(this.webpackJsonpamstangram=this.webpackJsonpamstangram||[]).push([[0],{50:function(e,t,n){e.exports=n(84)},55:function(e,t,n){},61:function(e,t,n){},62:function(e,t){},63:function(e,t){},84:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(42),i=n.n(o),c=(n(55),n(47)),u=n(26),s=n(30),l=n(43),d=n(21);function g(){var e=Object(l.a)(["\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return g=function(){return e},e}var y=s.b.div(g(),d.g,d.e,d.h,d.c,d.d,d.a,d.b,d.f),f=(n(61),function(e){var t=e.galery,n=e.onSelect,o=Object(r.useState)(!1),i=Object(u.a)(o,2),c=i[0],s=i[1];return a.a.createElement("div",{className:"drawer",style:{top:c?0:-180}},a.a.createElement("div",{className:"galery"},t.map((function(e,t){return a.a.createElement("div",{key:e,className:"card",onClick:function(){return n(e)}},a.a.createElement("span",null,"Square"),a.a.createElement("div",{className:"image",style:{backgroundImage:"url(".concat(e,")")}}),a.a.createElement("span",null,"By myagoo"))}))),a.a.createElement("div",{className:"handle",onClick:function(){return s(!c)}},"Toggle gallery"))}),v=n(46),m=n.n(v),h=n(14),p=n.n(h),w=n(9),x=30,b=10,B=60,E=2;function k(e){return[{x:0,y:0},{x:2*e,y:0},{x:e,y:e}]}function O(e){return[{x:e,y:0},{x:3*e,y:0},{x:2*e,y:e},{x:0,y:e}]}function j(e){return[{x:0,y:0},{x:2*e,y:0},{x:3*e,y:e},{x:e,y:e}]}var C=function(e){var t=e.onSave,n=e.patternImageDataUrl,o=Object(r.useRef)(),i=Object(r.useRef)(),c=Object(r.useRef)(),u=Object(r.useRef)();return Object(r.useEffect)((function(){if(n){var e=document.createElement("canvas");e.width=o.current.width,e.height=o.current.height;var t=e.getContext("2d"),r=new Image;r.onload=function(){t.drawImage(r,0,0)},r.src=n;var a={numberofcolors:2,qtres:0,ltres:1,rightangleenhance:!0,pathomit:8};return setTimeout((function(){var n=t.getImageData(0,0,e.width,e.height),r=m.a.imagedataToTracedata(n,a);u.current=r.layers[0].map((function(e){var t=e.segments,n=new p.a.Path(t.map((function(e){return[e.x1,e.y1]})));n.closed=!0,n.strokeWidth=1,n.strokeColor="green",n.position={x:200,y:200};for(var r={type:"static",position:{x:200/x,y:200/x}},a=c.current.createBody(r),o=[],i=0;i<t.length;i++)o[i]=new w.Vec2(t[i].x1/x,t[i].y1/x);var u={filterCategoryBits:2,filterMaskBits:2,shape:new w.Polygon(o)};return a.createFixture(u),{body:a,path:n}}))}),0),function(){u.current.forEach((function(e){var t=e.body,n=e.path;c.current.destroyBody(t),n.remove()}))}}}),[n]),Object(r.useLayoutEffect)((function(){var e;function t(t,r){var a=new p.a.Path(t);a.strokeColor="black",a.strokeWidth=E,a.fillColor=p.a.Color.random(),a.closed=!0,a.applyMatrix=!1,a.pivot=new p.a.Point(0,0);for(var o=[],s=0;s<t.length;s++)o[s]=new w.Vec2(t[s].x/x,t[s].y/x);var l={density:1e3,friction:0,restitution:0,shape:new w.Polygon(o)},d={type:"dynamic",position:{x:200/x,y:200/x},linearDamping:100,angularDamping:100},g=c.current.createBody(d);if(g.createFixture(l),p.a.view.on("frame",(function(){var e=g.getPosition();a.position=new p.a.Point(e.x*x,e.y*x),a.rotation=g.getAngle()*(180/Math.PI)})),a.on("click",(function(){window.event.ctrlKey&&("dynamic"===g.getType()?(g.setType("static"),g.setAwake(!1)):(g.setType("dynamic"),g.setAwake(!0)))})),r){for(var y=!1,f=[],v=0;v<r.length;v++)f[v]=new w.Vec2(r[v].x/x,r[v].y/x);var m={density:1e3,friction:0,restitution:0,shape:new w.Polygon(f)};a.on("doubleclick",(function(){g.destroyFixture(g.getFixtureList()),g.createFixture(y?l:m),a.segments=y?t:r,y=!y}))}return a.on("mousedown",(function(t){var r;window.event.ctrlKey||(g.getFixtureList().setDensity(1),g.resetMassData(),g.setBullet(!0),p.a.view.on("mousemove",a),p.a.view.on("mouseup",(function e(){p.a.view.off("mousemove",a),p.a.view.off("mouseup",e),r&&c.current.destroyJoint(r),g.setBullet(!1),g.getFixtureList().setDensity(1e3),g.resetMassData(),u.current&&function(){var e=new w.Vec2(0,0),t=u.current.map((function(e){var t=e.body;return t.getFixtureList().getShape().m_vertices.map((function(e){return t.getWorldPoint(e)}))}));i.current.every((function(r){var a=r.body;return a.getFixtureList().getShape().m_vertices.every((function(r,o){for(var i=0,c=a.getWorldPoint(r),u=0;u<t.length;u++)for(var s=t[u],l=s[s.length-1],d=0;d<s.length;d++){var g=s[d];n(e.x,e.y,c.x,c.y,l.x,l.y,g.x,g.y)&&i++,l=g}return i%2}))}))&&alert("YOU WIN MOTHERFUCKER")}()})));function a(t){var n=new w.Vec2(t.point.x/x,t.point.y/x);if(r)r.setTarget(n);else{var a={bodyA:e,bodyB:g,target:n,collideConnected:!0,maxForce:2e3*g.getMass(),dampingRatio:0};r=c.current.createJoint(Object(w.MouseJoint)(a))}}})),{body:g,path:a,points:t,invertedPoints:r}}function n(e,t,n,r,a,o,i,c){var u=(n-e)*(c-o)-(i-a)*(r-t);if(0===u)return!1;var s=((c-o)*(i-e)+(a-i)*(c-t))/u,l=((t-r)*(i-e)+(n-e)*(c-t))/u;return 0<s&&s<1&&0<l&&l<1}function r(e,t,n){var r={type:"static",position:{x:n.x/x,y:n.y/x}},a=c.current.createBody(r),o={shape:new w.Polygon([new w.Vec2(0/x,0/x),new w.Vec2(e/x,0/x),new w.Vec2(e/x,t/x),new w.Vec2(0/x,t/x)])};return a.createFixture(o),a}function a(){p.a.view.update(),c.current.step(1/B,10,10),c.current.clearForces()}!function(){var n=o.current.parentElement.getBoundingClientRect();o.current.width=n.width,o.current.height=n.height,p.a.setup(o.current),p.a.view.autoUpdate=!1,function(){var t=o.current.getBoundingClientRect(),n=new w.Vec2(0,0);c.current=new w.World(n,!0),e=r(t.width,b,{x:0,y:0}),r(t.width,b,{x:0,y:t.height-b}),r(b,t.height,{x:0,y:0}),r(b,t.height,{x:t.width-b,y:0})}(),function(){var e=Math.sqrt(2*Math.pow(40,2)),n=Math.sqrt(2*Math.pow(e,2));i.current=[t(k(40)),t(k(40)),t(k(e)),t(k(n)),t(k(n)),t((r=e,[{x:0,y:0},{x:r,y:0},{x:r,y:r},{x:0,y:r}])),t(j(40),O(40))];var r}(),p.a.view.on("frame",a)}()}),[]),a.a.createElement(y,{display:"flex",flex:"1",position:"relative"},a.a.createElement(y,{as:"canvas",ref:o,position:"absolute",top:0,left:0}),a.a.createElement(y,{as:"button",position:"absolute",bottom:0,right:0,onClick:function(){return t(function(){for(var e,t,n,r,a,c=0;c<i.current.length;c++)a=i.current[c].body.getFixtureList().getAABB(0),(void 0===e||a.lowerBound.x<e)&&(e=a.lowerBound.x),(void 0===t||a.lowerBound.y<t)&&(t=a.lowerBound.y),(void 0===n||a.upperBound.x>n)&&(n=a.upperBound.x),(void 0===r||a.upperBound.y>r)&&(r=a.upperBound.y);for(var u=o.current.getContext("2d").getImageData(e*x,t*x,n*x-e*x,r*x-t*x),s=u.data,l=0,d=s.length;l<d;l+=4)s[l+3]&&(s[l]=0,s[l+1]=0,s[l+2]=0);var g=document.createElement("canvas"),y=g.getContext("2d");return g.width=u.width,g.height=u.height,y.putImageData(u,0,0),g.toDataURL("image/png").replace("image/png","image/octet-stream")}())}},"Save"))};var F=function(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),n=t[0],o=t[1],i=Object(r.useState)(),l=Object(u.a)(i,2),d=l[0],g=l[1];return a.a.createElement(s.a,{theme:{}},a.a.createElement(y,{display:"flex",flexDirection:"column",height:"100vh",width:"100vw"},a.a.createElement(C,{onSave:function(e){o([].concat(Object(c.a)(n),[e]))},patternImageDataUrl:d}),a.a.createElement(f,{galery:n,onSelect:function(e){g(e)}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(F,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[50,1,2]]]);
//# sourceMappingURL=main.4a387756.chunk.js.map