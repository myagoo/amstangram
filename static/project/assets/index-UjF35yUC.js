(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();const Ak=50,Pk=.25,ia=1,hs=4,bk=2,Rk=5,vI=10,kk=300,md=1500,yI=100,Sf=250,Xr=1e3,i_=500,cn="DIALOG_CLOSED_REASON",wI=60,Nk=5,II=2,EI=.25,TI=.75,Dk=["animals","letters","digits","people","geometric","stuff"],dc=["0️⃣","1️⃣","2️⃣","3️⃣","4️⃣","5️⃣","6️⃣","7️⃣","8️⃣","9️⃣"],fc=["🄰","🄱","🄲","🄳","🄴","🄵","🄶","🄷","🄸","🄹","🄺","🄻","🄼","🄽","🄾","🄿","🅀","🅁","🅂","🅃","🅄","🅅","🅆","🅇","🅈","🅉"];window.sentryOnLoad=function(){Sentry.init({enabled:!0,release:`83b44a9
`,environment:"production",beforeSend:(t,e)=>e.originalException===cn?null:t})};{let t=function(){dataLayer.push(arguments)};window.dataLayer=window.dataLayer||[],t("js",new Date),t("config","G-F7R3KZMTTS",{anonymize_ip:!0,cookie_expires:0})}var et=[],yi=[],Ko=[];for(var Nu=0;Nu<=5;Nu++)yi[Nu]=[],et[Nu]=[],Ko[Nu]=[];et[0][0]=[new Point(new IntAdjoinSqrt2(0,12*FACTOR),new IntAdjoinSqrt2(0,0)),new Point(new IntAdjoinSqrt2(0,0),new IntAdjoinSqrt2(0,12*FACTOR))];et[1][0]=[new Point(new IntAdjoinSqrt2(12*FACTOR,0),new IntAdjoinSqrt2(0,0)),new Point(new IntAdjoinSqrt2(0,0),new IntAdjoinSqrt2(12*FACTOR,0))];et[2][0]=[new Point(new IntAdjoinSqrt2(0,6*FACTOR),new IntAdjoinSqrt2(0,0)),new Point(new IntAdjoinSqrt2(0,0),new IntAdjoinSqrt2(0,6*FACTOR))];et[3][0]=[new Point(new IntAdjoinSqrt2(0,6*FACTOR),new IntAdjoinSqrt2(0,0)),new Point(new IntAdjoinSqrt2(0,6*FACTOR),new IntAdjoinSqrt2(0,6*FACTOR)),new Point(new IntAdjoinSqrt2(0,0),new IntAdjoinSqrt2(0,6*FACTOR))];et[4][0]=[new Point(new IntAdjoinSqrt2(12*FACTOR,0),new IntAdjoinSqrt2(0,0)),new Point(new IntAdjoinSqrt2(18*FACTOR,0),new IntAdjoinSqrt2(6*FACTOR,0)),new Point(new IntAdjoinSqrt2(6*FACTOR,0),new IntAdjoinSqrt2(6*FACTOR,0))];et[5][0]=[new Point(new IntAdjoinSqrt2(12*FACTOR,0),new IntAdjoinSqrt2(0,0)),new Point(new IntAdjoinSqrt2(18*FACTOR,0),new IntAdjoinSqrt2(-6*FACTOR,0)),new Point(new IntAdjoinSqrt2(6*FACTOR,0),new IntAdjoinSqrt2(-6*FACTOR,0))];for(var Oe=0;Oe<=5;Oe++){for(var Jm=new Point,Tr=0;Tr<et[Oe][0].length;Tr++)Jm.add(et[Oe][0][Tr]);Jm.scale(1/(et[Oe][0].length+1)),yi[Oe][0]=[],yi[Oe][0][0]=Jm}for(Oe=0;Oe<=1;Oe++){var SI=et[Oe][0][0].dup().add(et[Oe][0][1]).scale(.5),fl=et[Oe][0][0].dup().add(SI),gl=et[Oe][0][1].dup().add(SI);if(fl.scale(1/et[Oe][0].length),yi[Oe][0][1]=fl,gl.scale(1/et[Oe][0].length),yi[Oe][0][2]=gl,Oe===0){var Ok=et[Oe][0][0].dup().scale(.5),Mk=et[Oe][0][1].dup().scale(.5),xI=Ok.add(Mk);xI.scale(1/et[Oe][0].length),xI.scale(1/et[Oe][0].length)}}for(Oe=3;Oe<=5;Oe++){for(fl=new Point,gl=new Point,Tr=0;Tr<et[Oe][0].length;Tr++)Tr!=et[Oe][0].length-1&&fl.add(et[Oe][0][Tr]),gl.add(et[Oe][0][Tr]);fl.scale(1/et[Oe][0].length),yi[Oe][0][1]=fl,gl.scale(1/et[Oe][0].length),yi[Oe][0][2]=gl}var CI=[[new IntAdjoinSqrt2(0,.5),new IntAdjoinSqrt2(0,-.5),new IntAdjoinSqrt2(0,0)],[new IntAdjoinSqrt2(0,.5),new IntAdjoinSqrt2(0,.5),new IntAdjoinSqrt2(0,0)],[new IntAdjoinSqrt2(0,0),new IntAdjoinSqrt2(0,0),new IntAdjoinSqrt2(1,0)]];for(Oe=0;Oe<=5;Oe++)for(var wt=0;wt<7;wt++){et[Oe][wt+1]=[],yi[Oe][wt+1]=[];for(var Tr=0;Tr<yi[Oe][wt].length;Tr++)yi[Oe][wt+1][Tr]=yi[Oe][wt][Tr].dup().transform(CI);for(var pd=0;pd<et[Oe][0].length;pd++)et[Oe][wt+1][pd]=et[Oe][wt][pd].dup().transform(CI)}for(Oe=0;Oe<=5;Oe++)for(wt=0;wt<=7;wt++)if(Ko[Oe][wt]=[],Ko[Oe][wt][0]=[et[Oe][wt][0].dup(),et[Oe][wt][Oe<3?1:2].dup()],Ko[Oe][wt][1]=[et[Oe][wt][0].dup().neg(),et[Oe][wt][0].dup().neg().add(et[Oe][wt][1].dup())],Oe<3)Ko[Oe][wt][2]=[et[Oe][wt][1].dup().neg(),et[Oe][wt][1].dup().neg().add(et[Oe][wt][0].dup())];else{var AI=et[Oe][wt][1].dup().neg();Ko[Oe][wt][2]=[et[Oe][wt][0].dup().add(AI),et[Oe][wt][2].dup().add(AI)],Ko[Oe][wt][3]=[et[Oe][wt][2].dup().neg(),et[Oe][wt][2].dup().neg().add(et[Oe][wt][1].dup())]}new Point(new IntAdjoinSqrt2(0,0),new IntAdjoinSqrt2(-6*FACTOR,0)),new Point(new IntAdjoinSqrt2(0,0),new IntAdjoinSqrt2(0,6*FACTOR)),new Point(new IntAdjoinSqrt2(0,0),new IntAdjoinSqrt2(18*FACTOR,0)),new Point(new IntAdjoinSqrt2(0,0),new IntAdjoinSqrt2(0,12*FACTOR)),new Point(new IntAdjoinSqrt2(0,0),new IntAdjoinSqrt2(6*FACTOR,0)),new Point(new IntAdjoinSqrt2(0,0),new IntAdjoinSqrt2(0,-6*FACTOR)),new Point(new IntAdjoinSqrt2(0,0),new IntAdjoinSqrt2(-18*FACTOR,0)),new Point(new IntAdjoinSqrt2(0,0),new IntAdjoinSqrt2(0,-12*FACTOR)),new Point(new IntAdjoinSqrt2(0,0),new IntAdjoinSqrt2(6*FACTOR,0)),new Point(new IntAdjoinSqrt2(0,0),new IntAdjoinSqrt2(0,12*FACTOR)),new Point(new IntAdjoinSqrt2(0,0),new IntAdjoinSqrt2(18*FACTOR,0)),new Point(new IntAdjoinSqrt2(0,0),new IntAdjoinSqrt2(0,6*FACTOR)),new Point(new IntAdjoinSqrt2(0,0),new IntAdjoinSqrt2(-6*FACTOR,0)),new Point(new IntAdjoinSqrt2(0,0),new IntAdjoinSqrt2(0,-12*FACTOR)),new Point(new IntAdjoinSqrt2(0,0),new IntAdjoinSqrt2(-18*FACTOR,0)),new Point(new IntAdjoinSqrt2(0,0),new IntAdjoinSqrt2(0,-6*FACTOR));new IntAdjoinSqrt2(576*FACTOR,0);[96,48,24,48,48,48].map(t=>t*FACTOR);var Lk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function I1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Vk(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var E1={exports:{}},bg={},T1={exports:{}},ht={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bh=Symbol.for("react.element"),Fk=Symbol.for("react.portal"),Bk=Symbol.for("react.fragment"),jk=Symbol.for("react.strict_mode"),Uk=Symbol.for("react.profiler"),zk=Symbol.for("react.provider"),$k=Symbol.for("react.context"),qk=Symbol.for("react.forward_ref"),Hk=Symbol.for("react.suspense"),Gk=Symbol.for("react.memo"),Wk=Symbol.for("react.lazy"),PI=Symbol.iterator;function Kk(t){return t===null||typeof t!="object"?null:(t=PI&&t[PI]||t["@@iterator"],typeof t=="function"?t:null)}var S1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x1=Object.assign,C1={};function fu(t,e,n){this.props=t,this.context=e,this.refs=C1,this.updater=n||S1}fu.prototype.isReactComponent={};fu.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};fu.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function A1(){}A1.prototype=fu.prototype;function cy(t,e,n){this.props=t,this.context=e,this.refs=C1,this.updater=n||S1}var hy=cy.prototype=new A1;hy.constructor=cy;x1(hy,fu.prototype);hy.isPureReactComponent=!0;var bI=Array.isArray,P1=Object.prototype.hasOwnProperty,dy={current:null},b1={key:!0,ref:!0,__self:!0,__source:!0};function R1(t,e,n){var r,i={},s=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)P1.call(e,r)&&!b1.hasOwnProperty(r)&&(i[r]=e[r]);var c=arguments.length-2;if(c===1)i.children=n;else if(1<c){for(var h=Array(c),g=0;g<c;g++)h[g]=arguments[g+2];i.children=h}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)i[r]===void 0&&(i[r]=c[r]);return{$$typeof:bh,type:t,key:s,ref:a,props:i,_owner:dy.current}}function Qk(t,e){return{$$typeof:bh,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function fy(t){return typeof t=="object"&&t!==null&&t.$$typeof===bh}function Yk(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var RI=/\/+/g;function Zm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Yk(""+t.key):e.toString(36)}function Yd(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case bh:case Fk:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+Zm(a,0):r,bI(i)?(n="",t!=null&&(n=t.replace(RI,"$&/")+"/"),Yd(i,e,n,"",function(g){return g})):i!=null&&(fy(i)&&(i=Qk(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(RI,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",bI(t))for(var c=0;c<t.length;c++){s=t[c];var h=r+Zm(s,c);a+=Yd(s,e,n,h,i)}else if(h=Kk(t),typeof h=="function")for(t=h.call(t),c=0;!(s=t.next()).done;)s=s.value,h=r+Zm(s,c++),a+=Yd(s,e,n,h,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function _d(t,e,n){if(t==null)return t;var r=[],i=0;return Yd(t,r,"","",function(s){return e.call(n,s,i++)}),r}function Xk(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var pr={current:null},Xd={transition:null},Jk={ReactCurrentDispatcher:pr,ReactCurrentBatchConfig:Xd,ReactCurrentOwner:dy};ht.Children={map:_d,forEach:function(t,e,n){_d(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return _d(t,function(){e++}),e},toArray:function(t){return _d(t,function(e){return e})||[]},only:function(t){if(!fy(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ht.Component=fu;ht.Fragment=Bk;ht.Profiler=Uk;ht.PureComponent=cy;ht.StrictMode=jk;ht.Suspense=Hk;ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jk;ht.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=x1({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=dy.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(h in e)P1.call(e,h)&&!b1.hasOwnProperty(h)&&(r[h]=e[h]===void 0&&c!==void 0?c[h]:e[h])}var h=arguments.length-2;if(h===1)r.children=n;else if(1<h){c=Array(h);for(var g=0;g<h;g++)c[g]=arguments[g+2];r.children=c}return{$$typeof:bh,type:t.type,key:i,ref:s,props:r,_owner:a}};ht.createContext=function(t){return t={$$typeof:$k,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:zk,_context:t},t.Consumer=t};ht.createElement=R1;ht.createFactory=function(t){var e=R1.bind(null,t);return e.type=t,e};ht.createRef=function(){return{current:null}};ht.forwardRef=function(t){return{$$typeof:qk,render:t}};ht.isValidElement=fy;ht.lazy=function(t){return{$$typeof:Wk,_payload:{_status:-1,_result:t},_init:Xk}};ht.memo=function(t,e){return{$$typeof:Gk,type:t,compare:e===void 0?null:e}};ht.startTransition=function(t){var e=Xd.transition;Xd.transition={};try{t()}finally{Xd.transition=e}};ht.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ht.useCallback=function(t,e){return pr.current.useCallback(t,e)};ht.useContext=function(t){return pr.current.useContext(t)};ht.useDebugValue=function(){};ht.useDeferredValue=function(t){return pr.current.useDeferredValue(t)};ht.useEffect=function(t,e){return pr.current.useEffect(t,e)};ht.useId=function(){return pr.current.useId()};ht.useImperativeHandle=function(t,e,n){return pr.current.useImperativeHandle(t,e,n)};ht.useInsertionEffect=function(t,e){return pr.current.useInsertionEffect(t,e)};ht.useLayoutEffect=function(t,e){return pr.current.useLayoutEffect(t,e)};ht.useMemo=function(t,e){return pr.current.useMemo(t,e)};ht.useReducer=function(t,e,n){return pr.current.useReducer(t,e,n)};ht.useRef=function(t){return pr.current.useRef(t)};ht.useState=function(t){return pr.current.useState(t)};ht.useSyncExternalStore=function(t,e,n){return pr.current.useSyncExternalStore(t,e,n)};ht.useTransition=function(){return pr.current.useTransition()};ht.version="18.2.0";T1.exports=ht;var G=T1.exports;const St=I1(G);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zk=G,eN=Symbol.for("react.element"),tN=Symbol.for("react.fragment"),nN=Object.prototype.hasOwnProperty,rN=Zk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,iN={key:!0,ref:!0,__self:!0,__source:!0};function k1(t,e,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)nN.call(e,r)&&!iN.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:eN,type:t,key:s,ref:a,props:i,_owner:rN.current}}bg.Fragment=tN;bg.jsx=k1;bg.jsxs=k1;E1.exports=bg;var R=E1.exports,sN={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var s_=function(t,e){return s_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},s_(t,e)};function N1(t,e){s_(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Lr=function(){return Lr=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Lr.apply(this,arguments)};function Dc(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function $l(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var s=arguments[e],a=0,c=s.length;a<c;a++,i++)r[i]=s[a];return r}function oN(t,e){for(;t.length<e;)t="0"+t;return t}function ss(t,e){var n,r,i;if(e.length===0)return t;for(n=0,i=e.length;n<i;n++)r=e.charCodeAt(n),t=(t<<5)-t+r,t|=0;return t<0?t*-2:t}function aN(t,e,n){return Object.keys(e).sort().reduce(r,t);function r(i,s){return D1(i,e[s],s,n)}}function D1(t,e,n,r){var i=ss(ss(ss(t,n),lN(e)),typeof e);if(e===null)return ss(i,"null");if(e===void 0)return ss(i,"undefined");if(typeof e=="object"||typeof e=="function"){if(r.indexOf(e)!==-1)return ss(i,"[Circular]"+n);r.push(e);var s=aN(i,e,r);if(!("valueOf"in e)||typeof e.valueOf!="function")return s;try{return ss(s,String(e.valueOf()))}catch(a){return ss(s,"[valueOf exception]"+(a.stack||a.message))}}return ss(i,e.toString())}function lN(t){return Object.prototype.toString.call(t)}function uN(t){return oN(D1(0,t,"",[]).toString(16),8)}var gy=uN,cN={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},hN={bg:"backgroundColor",m:"margin",mt:"marginTop",mr:"marginRight",mb:"marginBottom",ml:"marginLeft",mx:"marginX",my:"marginY",p:"padding",pt:"paddingTop",pr:"paddingRight",pb:"paddingBottom",pl:"paddingLeft",px:"paddingX",py:"paddingY"},dN={marginX:["marginLeft","marginRight"],marginY:["marginTop","marginBottom"],paddingX:["paddingLeft","paddingRight"],paddingY:["paddingTop","paddingBottom"],size:["width","height"]},fN={color:"colors",backgroundColor:"colors",borderColor:"colors",margin:"space",marginTop:"space",marginRight:"space",marginBottom:"space",marginLeft:"space",marginX:"space",marginY:"space",padding:"space",paddingTop:"space",paddingRight:"space",paddingBottom:"space",paddingLeft:"space",paddingX:"space",paddingY:"space",top:"space",right:"space",bottom:"space",left:"space",gridGap:"space",gridColumnGap:"space",gridRowGap:"space",gap:"space",columnGap:"space",rowGap:"space",fontFamily:"fonts",fontSize:"fontSizes",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",border:"borders",borderTop:"borders",borderRight:"borders",borderBottom:"borders",borderLeft:"borders",borderWidth:"borderWidths",borderStyle:"borderStyles",borderRadius:"radii",borderTopRightRadius:"radii",borderTopLeftRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",borderTopWidth:"borderWidths",borderTopColor:"colors",borderTopStyle:"borderStyles",borderBottomWidth:"borderWidths",borderBottomColor:"colors",borderBottomStyle:"borderStyles",borderLeftWidth:"borderWidths",borderLeftColor:"colors",borderLeftStyle:"borderStyles",borderRightWidth:"borderWidths",borderRightColor:"colors",borderRightStyle:"borderStyles",outlineColor:"colors",boxShadow:"shadows",textShadow:"shadows",zIndex:"zIndices",width:"sizes",minWidth:"sizes",maxWidth:"sizes",height:"sizes",minHeight:"sizes",maxHeight:"sizes",flexBasis:"sizes",size:"sizes",fill:"colors",stroke:"colors"},gN={margin:1,marginTop:1,marginRight:1,marginBottom:1,marginLeft:1,marginX:1,marginY:1,top:1,bottom:1,left:1,right:1},_i={unitlessProperties:cN,propertyAliases:hN,multiplePropertyAliases:dN,propertyScales:fN,negativeProperties:gN},Vr=function(t,e,n){for(var r=t,i=typeof e=="string"?e.split("."):[e],s=0,a=i;s<a.length;s++){var c=a[s];r=r?r[c]:void 0}return r===void 0?n:r},O1=function(t,e){if(typeof e!="number"||e>=0)return Vr(t,e,e);var n=Math.abs(e),r=Vr(t,n,n);return typeof r=="string"?"-"+r:r*-1},o_=function(t,e){return e==null||typeof e=="boolean"||e===""?"":typeof e=="number"&&e!==0&&!(t in _i.unitlessProperties)?e+"px":String(e).trim()},a_=function(t){return t.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()})},mN=function(t,e){var n={},r=Vr(e,"breakpoints"),i=Object.entries(r).reduce(function(E,$,U){var J,V=$[0],B=$[1];return Lr(Lr({},E),(J={},J[V]="@media screen and (min-width: #"+U+"#"+B+")",J))},{_:null});for(var s in t){var a=t[s],c=typeof a;if(a!=null){if(s.includes("&")||s.startsWith("@")||c==="string"||c==="number"){n[s]=a;continue}for(var h=Object.keys(a),g=0,_=h;g<_.length;g++){var w=_[g],T=i[w];if(!T){n[s]=a[w];continue}n[T]=n[T]||{},a[w]!=null&&(n[T][s]=a[w])}}}return n},my=function(t,e){var n={},r=mN(t,e);for(var i in r){var s=r[i];if(s&&typeof s=="object"){n[i]=my(s,e);continue}var a=Vr(_i.propertyAliases,i,i),c=Vr(_i.propertyScales,a),h=Vr(e,c,Vr(e,a,{})),g=a in _i.negativeProperties?O1(h,s):Vr(h,s,s);if(_i.multiplePropertyAliases[a])for(var _=_i.multiplePropertyAliases[a],w=0;w<_.length;w++)n[_[w]]=g;else n[a]=g}return n},l_=function(t,e,n){Object.keys(e).forEach(function(r){var i=e[r];typeof i=="string"||typeof i=="number"?(n[t]||(n[t]=""),n[t]+=a_(r)+":"+o_(r,i)+";"):typeof i=="object"&&(r.startsWith("@media")||r.startsWith("@supports")?(n[r]||(n[r]={}),l_(t,i,n[r])):l_(r.replace(/&/g,t),i,n))})},M1=function(t){var e={};return l_("&",t,e),e},py=[],eo="global",xf="data-css-system-id",u_="data-css-system-ids",c_=" ",pN=typeof process=="object"&&sN&&!1,h_=function(){function t(e){var n=this;this.createdIds={};var r=document.querySelector("style["+xf+'="'+e+'"]');if(r===null)r=document.createElement("style"),r.setAttribute(xf,e),document.head.appendChild(r);else{var i=r.getAttribute(u_);i!==null&&i.split(c_).forEach(function(s){return n.createdIds[s]=!0})}this.element=r}return t.prototype.insertRule=function(e){var n=this.element.sheet;n.insertRule(e,n.cssRules.length)},t.prototype.remove=function(){this.element.remove()},t}(),kI=function(t){N1(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.insertRule=function(n){this.element.textContent+=n+`
`},e}(h_),L1=function(){function t(){var e;this.styleSheets=(e={},e[eo]=new h_(eo),e)}return t.prototype.getGlobalStyleSheet=function(){return this.styleSheets[eo]},t.prototype.createStyleSheet=function(e){return this.styleSheets[e]=new h_(e),this.styleSheets[e]},t.prototype.removeStyleSheet=function(e){this.styleSheets[e]&&(this.styleSheets[e].remove(),delete this.styleSheets[e])},t}(),_N=function(t){N1(e,t);function e(){var n,r=t!==null&&t.apply(this,arguments)||this;return r.styleSheets=(n={},n[eo]=new kI(eo),n),r}return e.prototype.createStyleSheet=function(n){return this.styleSheets[n]=new kI(n),this.styleSheets[n]},e}(L1),NI=function(){function t(e){this.rules=[],this.createdIds={},this.id=e}return t.prototype.insertRule=function(e){this.rules.push(e)},t.prototype.getStyleTag=function(){return"<style "+xf+'="'+this.id+'" '+u_+'="'+Object.keys(this.createdIds).join(c_)+'">'+this.rules.join(`
`)+"</style>"},t.prototype.getStyleComponent=function(){var e;return G.createElement("style",(e={},e[xf]=this.id,e[u_]=Object.keys(this.createdIds).join(c_),e.dangerouslySetInnerHTML={__html:this.rules.join(`
`)},e))},t}(),vN=function(){function t(){var e;this.styleSheets=(e={},e[eo]=new NI(eo),e)}return t.prototype.getGlobalStyleSheet=function(){return this.styleSheets[eo]},t.prototype.createStyleSheet=function(e){return this.styleSheets[e]=new NI(e),this.styleSheets[e]},t.prototype.removeStyleSheet=function(e){delete this.styleSheets[e]},t.prototype.getStyleTags=function(){return Object.values(this.styleSheets).map(function(e){return e.getStyleTag()}).join(`
`)},t.prototype.getStyleComponents=function(){return Object.values(this.styleSheets).map(function(e){return e.getStyleComponent()})},t}(),yN=typeof document<"u",_y=G.createContext(yN?pN?new _N:new L1:new vN),wN={breakpoints:{s:"40em",m:"52em",l:"64em"},space:[0,4,8,16,32,64,128,256,512],fontSizes:[12,14,16,20,24,32,48,64,72]},Pi=G.createContext(wN),IN=function(t,e){e===void 0&&(e=py);var n=G.useContext(_y),r=G.useContext(Pi),i=G.useMemo(function(){var s=my(t,r),a=gy(s),c="style-"+a,h=n.getGlobalStyleSheet();if(!h.createdIds[c]){for(var g=M1(s),_=Object.keys(g).sort(function(Z,ne){return Z<ne?-1:Z>ne?1:0}),w=0,T=_;w<T.length;w++){var E=T[w];if(typeof g[E]=="string"){var $=E.replace(/&/g,"."+c),U=g[E];h.insertRule($+"{"+U+"}")}else{var J=E,V=g[J],B="";for(var j in V){var $=j.replace(/&/g,"."+c),U=V[j];B+=$+"{"+U+"}"}h.insertRule(J.replace(/#\d#/,"")+"{"+B+"}")}}h.createdIds[c]=!0}return c},$l([r],e));return i},EN=function(t,e){e===void 0&&(e=py);var n=G.useContext(_y),r=G.useContext(Pi),i=G.useMemo(function(){var s=gy({systemObject:t,theme:r}),a=n.createStyleSheet(s);for(var c in t)for(var h=my(t[c],r),g=M1(h),_=Object.keys(g).sort(function(Z,ne){return Z<ne?-1:Z>ne?1:0}),w=0,T=_;w<T.length;w++){var E=T[w];if(typeof g[E]=="string"){var $=E.replace(/&/g,c).replace(/#\d#/,""),U=g[E];a.insertRule($+"{"+U+"}")}else{var J=E,V=g[J],B="";for(var j in V){var $=j.replace(/&/g,c),U=V[j];B+=$+"{"+U+"}"}a.insertRule(J.replace(/#\d#/,"")+"{"+B+"}")}}return s},$l([r],e));G.useEffect(function(){return function(){return n.removeStyleSheet(i)}},$l([i,r],e))},TN=function(t,e){var n="";for(var r in t){var i=t[r],s=Vr(_i.propertyAliases,r,r),a=Vr(_i.propertyScales,s),c=Vr(e,a,Vr(e,s,{})),h=s in _i.negativeProperties?O1(c,i):Vr(c,i,i);if(_i.multiplePropertyAliases[s])for(var g=_i.multiplePropertyAliases[s],_=0;_<g.length;_++)n+=a_(g[_])+":"+o_(s,h)+";";else n+=a_(s)+":"+o_(s,h)+";"}return n},Cf=function(t,e){e===void 0&&(e=py);var n=G.useContext(_y),r=G.useContext(Pi),i=G.useMemo(function(){var s="keyframes-"+gy({keyframesObject:t,theme:r}),a=n.getGlobalStyleSheet();if(!a.createdIds[s]){var c="";for(var h in t){var g=t[h],_=isNaN(h)?h:h+"%",w=TN(g,r);c+=_+"{"+w+"}"}a.insertRule("@keyframes "+s+"{"+c+"}"),a.createdIds[s]=!0}return s},$l([r],e));return i},V1=function(t){var e=t.css,n=Dc(t,["css"]);return function(r){var i=r.css,s=Dc(r,["css"]);return Lr(Lr(Lr({},n),{css:Lr(Lr({},e),i)}),s)}},Rh=function(t,e){var n=typeof e=="function"?e:V1(e);return St.forwardRef(function(r,i){var s=n(r),a=s.as,c=a===void 0?t:a,h=s.css,g=s.deps,_=s.className,w=Dc(s,["as","css","deps","className"]),T=IN(h,g),E=_?_+" "+T:T;return St.createElement(c,Lr({ref:i},w,{className:E}))})},ns=function(t,e){var n=typeof e=="function"?e:V1(e);return St.forwardRef(function(r,i){var s=n(r),a=s.css,c=Dc(s,["css"]);return St.createElement(t,Lr({ref:i,css:a},c))})},SN=function(t){var e=t.gap,n=Dc(t,["gap"]),r=n.flexDirection,i=G.useContext(Pi),s=G.useMemo(function(){var a;if(e&&r){if(typeof r=="string"){var c=r==="column"||r==="column-reverse";return{"& > * + *":(a={},a[c?"mt":"ml"]=e,a)}}for(var h=void 0,g=void 0,_=typeof e=="object"?e:{_:e},w=r,T=new Set($l(Object.keys(w),Object.keys(_))),E={},$={},U=$l(["_"],Object.keys(i.breakpoints)),J=0,V=U;J<V.length;J++){var B=V[J];if(T.has(B)!==!1){var j=B,Z=w[j]!=null?w[j]:h;h=Z;var ne=_[j]!=null?_[j]:g;g=ne;var c=Z==="column"||Z==="column-reverse";c?(E[j]=ne,$[j]=0):($[j]=ne,E[j]=0)}}return{"& > * + *":{mt:E,ml:$}}}},[e,r,i]);return e?Lr(Lr({},n),s):n},d_={},F1={exports:{}},Hr={},B1={exports:{}},j1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Ce,Te){var De=Ce.length;Ce.push(Te);e:for(;0<De;){var Ye=De-1>>>1,It=Ce[Ye];if(0<i(It,Te))Ce[Ye]=Te,Ce[De]=It,De=Ye;else break e}}function n(Ce){return Ce.length===0?null:Ce[0]}function r(Ce){if(Ce.length===0)return null;var Te=Ce[0],De=Ce.pop();if(De!==Te){Ce[0]=De;e:for(var Ye=0,It=Ce.length,it=It>>>1;Ye<it;){var Mt=2*(Ye+1)-1,Qe=Ce[Mt],ln=Mt+1,En=Ce[ln];if(0>i(Qe,De))ln<It&&0>i(En,Qe)?(Ce[Ye]=En,Ce[ln]=De,Ye=ln):(Ce[Ye]=Qe,Ce[Mt]=De,Ye=Mt);else if(ln<It&&0>i(En,De))Ce[Ye]=En,Ce[ln]=De,Ye=ln;else break e}}return Te}function i(Ce,Te){var De=Ce.sortIndex-Te.sortIndex;return De!==0?De:Ce.id-Te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var h=[],g=[],_=1,w=null,T=3,E=!1,$=!1,U=!1,J=typeof setTimeout=="function"?setTimeout:null,V=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(Ce){for(var Te=n(g);Te!==null;){if(Te.callback===null)r(g);else if(Te.startTime<=Ce)r(g),Te.sortIndex=Te.expirationTime,e(h,Te);else break;Te=n(g)}}function Z(Ce){if(U=!1,j(Ce),!$)if(n(h)!==null)$=!0,he(ne);else{var Te=n(g);Te!==null&&ot(Z,Te.startTime-Ce)}}function ne(Ce,Te){$=!1,U&&(U=!1,V(ce),ce=-1),E=!0;var De=T;try{for(j(Te),w=n(h);w!==null&&(!(w.expirationTime>Te)||Ce&&!tt());){var Ye=w.callback;if(typeof Ye=="function"){w.callback=null,T=w.priorityLevel;var It=Ye(w.expirationTime<=Te);Te=t.unstable_now(),typeof It=="function"?w.callback=It:w===n(h)&&r(h),j(Te)}else r(h);w=n(h)}if(w!==null)var it=!0;else{var Mt=n(g);Mt!==null&&ot(Z,Mt.startTime-Te),it=!1}return it}finally{w=null,T=De,E=!1}}var te=!1,ae=null,ce=-1,_e=5,me=-1;function tt(){return!(t.unstable_now()-me<_e)}function Le(){if(ae!==null){var Ce=t.unstable_now();me=Ce;var Te=!0;try{Te=ae(!0,Ce)}finally{Te?xe():(te=!1,ae=null)}}else te=!1}var xe;if(typeof B=="function")xe=function(){B(Le)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,nt=we.port2;we.port1.onmessage=Le,xe=function(){nt.postMessage(null)}}else xe=function(){J(Le,0)};function he(Ce){ae=Ce,te||(te=!0,xe())}function ot(Ce,Te){ce=J(function(){Ce(t.unstable_now())},Te)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Ce){Ce.callback=null},t.unstable_continueExecution=function(){$||E||($=!0,he(ne))},t.unstable_forceFrameRate=function(Ce){0>Ce||125<Ce?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_e=0<Ce?Math.floor(1e3/Ce):5},t.unstable_getCurrentPriorityLevel=function(){return T},t.unstable_getFirstCallbackNode=function(){return n(h)},t.unstable_next=function(Ce){switch(T){case 1:case 2:case 3:var Te=3;break;default:Te=T}var De=T;T=Te;try{return Ce()}finally{T=De}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Ce,Te){switch(Ce){case 1:case 2:case 3:case 4:case 5:break;default:Ce=3}var De=T;T=Ce;try{return Te()}finally{T=De}},t.unstable_scheduleCallback=function(Ce,Te,De){var Ye=t.unstable_now();switch(typeof De=="object"&&De!==null?(De=De.delay,De=typeof De=="number"&&0<De?Ye+De:Ye):De=Ye,Ce){case 1:var It=-1;break;case 2:It=250;break;case 5:It=1073741823;break;case 4:It=1e4;break;default:It=5e3}return It=De+It,Ce={id:_++,callback:Te,priorityLevel:Ce,startTime:De,expirationTime:It,sortIndex:-1},De>Ye?(Ce.sortIndex=De,e(g,Ce),n(h)===null&&Ce===n(g)&&(U?(V(ce),ce=-1):U=!0,ot(Z,De-Ye))):(Ce.sortIndex=It,e(h,Ce),$||E||($=!0,he(ne))),Ce},t.unstable_shouldYield=tt,t.unstable_wrapCallback=function(Ce){var Te=T;return function(){var De=T;T=Te;try{return Ce.apply(this,arguments)}finally{T=De}}}})(j1);B1.exports=j1;var xN=B1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U1=G,zr=xN;function ye(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var z1=new Set,Oc={};function Ba(t,e){ql(t,e),ql(t+"Capture",e)}function ql(t,e){for(Oc[t]=e,t=0;t<e.length;t++)z1.add(e[t])}var Is=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f_=Object.prototype.hasOwnProperty,CN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,DI={},OI={};function AN(t){return f_.call(OI,t)?!0:f_.call(DI,t)?!1:CN.test(t)?OI[t]=!0:(DI[t]=!0,!1)}function PN(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function bN(t,e,n,r){if(e===null||typeof e>"u"||PN(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function _r(t,e,n,r,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var $n={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){$n[t]=new _r(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];$n[e]=new _r(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){$n[t]=new _r(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){$n[t]=new _r(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){$n[t]=new _r(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){$n[t]=new _r(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){$n[t]=new _r(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){$n[t]=new _r(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){$n[t]=new _r(t,5,!1,t.toLowerCase(),null,!1,!1)});var vy=/[\-:]([a-z])/g;function yy(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(vy,yy);$n[e]=new _r(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(vy,yy);$n[e]=new _r(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(vy,yy);$n[e]=new _r(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){$n[t]=new _r(t,1,!1,t.toLowerCase(),null,!1,!1)});$n.xlinkHref=new _r("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){$n[t]=new _r(t,1,!1,t.toLowerCase(),null,!0,!0)});function wy(t,e,n,r){var i=$n.hasOwnProperty(e)?$n[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(bN(e,n,i,r)&&(n=null),r||i===null?AN(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var bs=U1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,vd=Symbol.for("react.element"),ml=Symbol.for("react.portal"),pl=Symbol.for("react.fragment"),Iy=Symbol.for("react.strict_mode"),g_=Symbol.for("react.profiler"),$1=Symbol.for("react.provider"),q1=Symbol.for("react.context"),Ey=Symbol.for("react.forward_ref"),m_=Symbol.for("react.suspense"),p_=Symbol.for("react.suspense_list"),Ty=Symbol.for("react.memo"),zs=Symbol.for("react.lazy"),H1=Symbol.for("react.offscreen"),MI=Symbol.iterator;function Du(t){return t===null||typeof t!="object"?null:(t=MI&&t[MI]||t["@@iterator"],typeof t=="function"?t:null)}var Xt=Object.assign,ep;function ec(t){if(ep===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ep=e&&e[1]||""}return`
`+ep+t}var tp=!1;function np(t,e){if(!t||tp)return"";tp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(g){var r=g}Reflect.construct(t,[],e)}else{try{e.call()}catch(g){r=g}t.call(e.prototype)}else{try{throw Error()}catch(g){r=g}t()}}catch(g){if(g&&r&&typeof g.stack=="string"){for(var i=g.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,c=s.length-1;1<=a&&0<=c&&i[a]!==s[c];)c--;for(;1<=a&&0<=c;a--,c--)if(i[a]!==s[c]){if(a!==1||c!==1)do if(a--,c--,0>c||i[a]!==s[c]){var h=`
`+i[a].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=a&&0<=c);break}}}finally{tp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ec(t):""}function RN(t){switch(t.tag){case 5:return ec(t.type);case 16:return ec("Lazy");case 13:return ec("Suspense");case 19:return ec("SuspenseList");case 0:case 2:case 15:return t=np(t.type,!1),t;case 11:return t=np(t.type.render,!1),t;case 1:return t=np(t.type,!0),t;default:return""}}function __(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case pl:return"Fragment";case ml:return"Portal";case g_:return"Profiler";case Iy:return"StrictMode";case m_:return"Suspense";case p_:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case q1:return(t.displayName||"Context")+".Consumer";case $1:return(t._context.displayName||"Context")+".Provider";case Ey:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ty:return e=t.displayName||null,e!==null?e:__(t.type)||"Memo";case zs:e=t._payload,t=t._init;try{return __(t(e))}catch{}}return null}function kN(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return __(e);case 8:return e===Iy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function fo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function G1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function NN(t){var e=G1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function yd(t){t._valueTracker||(t._valueTracker=NN(t))}function W1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=G1(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Af(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function v_(t,e){var n=e.checked;return Xt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function LI(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=fo(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function K1(t,e){e=e.checked,e!=null&&wy(t,"checked",e,!1)}function y_(t,e){K1(t,e);var n=fo(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?w_(t,e.type,n):e.hasOwnProperty("defaultValue")&&w_(t,e.type,fo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function VI(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function w_(t,e,n){(e!=="number"||Af(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var tc=Array.isArray;function Rl(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+fo(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function I_(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ye(91));return Xt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function FI(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ye(92));if(tc(n)){if(1<n.length)throw Error(ye(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:fo(n)}}function Q1(t,e){var n=fo(e.value),r=fo(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function BI(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Y1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function E_(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Y1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var wd,X1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(wd=wd||document.createElement("div"),wd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=wd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Mc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var gc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},DN=["Webkit","ms","Moz","O"];Object.keys(gc).forEach(function(t){DN.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),gc[e]=gc[t]})});function J1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||gc.hasOwnProperty(t)&&gc[t]?(""+e).trim():e+"px"}function Z1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=J1(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var ON=Xt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function T_(t,e){if(e){if(ON[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ye(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ye(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ye(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ye(62))}}function S_(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var x_=null;function Sy(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var C_=null,kl=null,Nl=null;function jI(t){if(t=Dh(t)){if(typeof C_!="function")throw Error(ye(280));var e=t.stateNode;e&&(e=Og(e),C_(t.stateNode,t.type,e))}}function ex(t){kl?Nl?Nl.push(t):Nl=[t]:kl=t}function tx(){if(kl){var t=kl,e=Nl;if(Nl=kl=null,jI(t),e)for(t=0;t<e.length;t++)jI(e[t])}}function nx(t,e){return t(e)}function rx(){}var rp=!1;function ix(t,e,n){if(rp)return t(e,n);rp=!0;try{return nx(t,e,n)}finally{rp=!1,(kl!==null||Nl!==null)&&(rx(),tx())}}function Lc(t,e){var n=t.stateNode;if(n===null)return null;var r=Og(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ye(231,e,typeof n));return n}var A_=!1;if(Is)try{var Ou={};Object.defineProperty(Ou,"passive",{get:function(){A_=!0}}),window.addEventListener("test",Ou,Ou),window.removeEventListener("test",Ou,Ou)}catch{A_=!1}function MN(t,e,n,r,i,s,a,c,h){var g=Array.prototype.slice.call(arguments,3);try{e.apply(n,g)}catch(_){this.onError(_)}}var mc=!1,Pf=null,bf=!1,P_=null,LN={onError:function(t){mc=!0,Pf=t}};function VN(t,e,n,r,i,s,a,c,h){mc=!1,Pf=null,MN.apply(LN,arguments)}function FN(t,e,n,r,i,s,a,c,h){if(VN.apply(this,arguments),mc){if(mc){var g=Pf;mc=!1,Pf=null}else throw Error(ye(198));bf||(bf=!0,P_=g)}}function ja(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function sx(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function UI(t){if(ja(t)!==t)throw Error(ye(188))}function BN(t){var e=t.alternate;if(!e){if(e=ja(t),e===null)throw Error(ye(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return UI(i),t;if(s===r)return UI(i),e;s=s.sibling}throw Error(ye(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,c=i.child;c;){if(c===n){a=!0,n=i,r=s;break}if(c===r){a=!0,r=i,n=s;break}c=c.sibling}if(!a){for(c=s.child;c;){if(c===n){a=!0,n=s,r=i;break}if(c===r){a=!0,r=s,n=i;break}c=c.sibling}if(!a)throw Error(ye(189))}}if(n.alternate!==r)throw Error(ye(190))}if(n.tag!==3)throw Error(ye(188));return n.stateNode.current===n?t:e}function ox(t){return t=BN(t),t!==null?ax(t):null}function ax(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=ax(t);if(e!==null)return e;t=t.sibling}return null}var lx=zr.unstable_scheduleCallback,zI=zr.unstable_cancelCallback,jN=zr.unstable_shouldYield,UN=zr.unstable_requestPaint,hn=zr.unstable_now,zN=zr.unstable_getCurrentPriorityLevel,xy=zr.unstable_ImmediatePriority,ux=zr.unstable_UserBlockingPriority,Rf=zr.unstable_NormalPriority,$N=zr.unstable_LowPriority,cx=zr.unstable_IdlePriority,Rg=null,Wi=null;function qN(t){if(Wi&&typeof Wi.onCommitFiberRoot=="function")try{Wi.onCommitFiberRoot(Rg,t,void 0,(t.current.flags&128)===128)}catch{}}var Ii=Math.clz32?Math.clz32:WN,HN=Math.log,GN=Math.LN2;function WN(t){return t>>>=0,t===0?32:31-(HN(t)/GN|0)|0}var Id=64,Ed=4194304;function nc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function kf(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,a=n&268435455;if(a!==0){var c=a&~i;c!==0?r=nc(c):(s&=a,s!==0&&(r=nc(s)))}else a=n&~i,a!==0?r=nc(a):s!==0&&(r=nc(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ii(e),i=1<<n,r|=t[n],e&=~i;return r}function KN(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function QN(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-Ii(s),c=1<<a,h=i[a];h===-1?(!(c&n)||c&r)&&(i[a]=KN(c,e)):h<=e&&(t.expiredLanes|=c),s&=~c}}function b_(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function hx(){var t=Id;return Id<<=1,!(Id&4194240)&&(Id=64),t}function ip(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function kh(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ii(e),t[e]=n}function YN(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Ii(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Cy(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ii(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ct=0;function dx(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var fx,Ay,gx,mx,px,R_=!1,Td=[],to=null,no=null,ro=null,Vc=new Map,Fc=new Map,qs=[],XN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $I(t,e){switch(t){case"focusin":case"focusout":to=null;break;case"dragenter":case"dragleave":no=null;break;case"mouseover":case"mouseout":ro=null;break;case"pointerover":case"pointerout":Vc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fc.delete(e.pointerId)}}function Mu(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Dh(e),e!==null&&Ay(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function JN(t,e,n,r,i){switch(e){case"focusin":return to=Mu(to,t,e,n,r,i),!0;case"dragenter":return no=Mu(no,t,e,n,r,i),!0;case"mouseover":return ro=Mu(ro,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Vc.set(s,Mu(Vc.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Fc.set(s,Mu(Fc.get(s)||null,t,e,n,r,i)),!0}return!1}function _x(t){var e=sa(t.target);if(e!==null){var n=ja(e);if(n!==null){if(e=n.tag,e===13){if(e=sx(n),e!==null){t.blockedOn=e,px(t.priority,function(){gx(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Jd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=k_(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);x_=r,n.target.dispatchEvent(r),x_=null}else return e=Dh(n),e!==null&&Ay(e),t.blockedOn=n,!1;e.shift()}return!0}function qI(t,e,n){Jd(t)&&n.delete(e)}function ZN(){R_=!1,to!==null&&Jd(to)&&(to=null),no!==null&&Jd(no)&&(no=null),ro!==null&&Jd(ro)&&(ro=null),Vc.forEach(qI),Fc.forEach(qI)}function Lu(t,e){t.blockedOn===e&&(t.blockedOn=null,R_||(R_=!0,zr.unstable_scheduleCallback(zr.unstable_NormalPriority,ZN)))}function Bc(t){function e(i){return Lu(i,t)}if(0<Td.length){Lu(Td[0],t);for(var n=1;n<Td.length;n++){var r=Td[n];r.blockedOn===t&&(r.blockedOn=null)}}for(to!==null&&Lu(to,t),no!==null&&Lu(no,t),ro!==null&&Lu(ro,t),Vc.forEach(e),Fc.forEach(e),n=0;n<qs.length;n++)r=qs[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<qs.length&&(n=qs[0],n.blockedOn===null);)_x(n),n.blockedOn===null&&qs.shift()}var Dl=bs.ReactCurrentBatchConfig,Nf=!0;function eD(t,e,n,r){var i=Ct,s=Dl.transition;Dl.transition=null;try{Ct=1,Py(t,e,n,r)}finally{Ct=i,Dl.transition=s}}function tD(t,e,n,r){var i=Ct,s=Dl.transition;Dl.transition=null;try{Ct=4,Py(t,e,n,r)}finally{Ct=i,Dl.transition=s}}function Py(t,e,n,r){if(Nf){var i=k_(t,e,n,r);if(i===null)gp(t,e,r,Df,n),$I(t,r);else if(JN(i,t,e,n,r))r.stopPropagation();else if($I(t,r),e&4&&-1<XN.indexOf(t)){for(;i!==null;){var s=Dh(i);if(s!==null&&fx(s),s=k_(t,e,n,r),s===null&&gp(t,e,r,Df,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else gp(t,e,r,null,n)}}var Df=null;function k_(t,e,n,r){if(Df=null,t=Sy(r),t=sa(t),t!==null)if(e=ja(t),e===null)t=null;else if(n=e.tag,n===13){if(t=sx(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Df=t,null}function vx(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zN()){case xy:return 1;case ux:return 4;case Rf:case $N:return 16;case cx:return 536870912;default:return 16}default:return 16}}var Qs=null,by=null,Zd=null;function yx(){if(Zd)return Zd;var t,e=by,n=e.length,r,i="value"in Qs?Qs.value:Qs.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[s-r];r++);return Zd=i.slice(t,1<r?1-r:void 0)}function ef(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Sd(){return!0}function HI(){return!1}function Gr(t){function e(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(s):s[c]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Sd:HI,this.isPropagationStopped=HI,this}return Xt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Sd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Sd)},persist:function(){},isPersistent:Sd}),e}var gu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ry=Gr(gu),Nh=Xt({},gu,{view:0,detail:0}),nD=Gr(Nh),sp,op,Vu,kg=Xt({},Nh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ky,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Vu&&(Vu&&t.type==="mousemove"?(sp=t.screenX-Vu.screenX,op=t.screenY-Vu.screenY):op=sp=0,Vu=t),sp)},movementY:function(t){return"movementY"in t?t.movementY:op}}),GI=Gr(kg),rD=Xt({},kg,{dataTransfer:0}),iD=Gr(rD),sD=Xt({},Nh,{relatedTarget:0}),ap=Gr(sD),oD=Xt({},gu,{animationName:0,elapsedTime:0,pseudoElement:0}),aD=Gr(oD),lD=Xt({},gu,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),uD=Gr(lD),cD=Xt({},gu,{data:0}),WI=Gr(cD),hD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gD(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=fD[t])?!!e[t]:!1}function ky(){return gD}var mD=Xt({},Nh,{key:function(t){if(t.key){var e=hD[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ef(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?dD[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ky,charCode:function(t){return t.type==="keypress"?ef(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ef(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),pD=Gr(mD),_D=Xt({},kg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),KI=Gr(_D),vD=Xt({},Nh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ky}),yD=Gr(vD),wD=Xt({},gu,{propertyName:0,elapsedTime:0,pseudoElement:0}),ID=Gr(wD),ED=Xt({},kg,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),TD=Gr(ED),SD=[9,13,27,32],Ny=Is&&"CompositionEvent"in window,pc=null;Is&&"documentMode"in document&&(pc=document.documentMode);var xD=Is&&"TextEvent"in window&&!pc,wx=Is&&(!Ny||pc&&8<pc&&11>=pc),QI=" ",YI=!1;function Ix(t,e){switch(t){case"keyup":return SD.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ex(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var _l=!1;function CD(t,e){switch(t){case"compositionend":return Ex(e);case"keypress":return e.which!==32?null:(YI=!0,QI);case"textInput":return t=e.data,t===QI&&YI?null:t;default:return null}}function AD(t,e){if(_l)return t==="compositionend"||!Ny&&Ix(t,e)?(t=yx(),Zd=by=Qs=null,_l=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return wx&&e.locale!=="ko"?null:e.data;default:return null}}var PD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function XI(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!PD[t.type]:e==="textarea"}function Tx(t,e,n,r){ex(r),e=Of(e,"onChange"),0<e.length&&(n=new Ry("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var _c=null,jc=null;function bD(t){Ox(t,0)}function Ng(t){var e=wl(t);if(W1(e))return t}function RD(t,e){if(t==="change")return e}var Sx=!1;if(Is){var lp;if(Is){var up="oninput"in document;if(!up){var JI=document.createElement("div");JI.setAttribute("oninput","return;"),up=typeof JI.oninput=="function"}lp=up}else lp=!1;Sx=lp&&(!document.documentMode||9<document.documentMode)}function ZI(){_c&&(_c.detachEvent("onpropertychange",xx),jc=_c=null)}function xx(t){if(t.propertyName==="value"&&Ng(jc)){var e=[];Tx(e,jc,t,Sy(t)),ix(bD,e)}}function kD(t,e,n){t==="focusin"?(ZI(),_c=e,jc=n,_c.attachEvent("onpropertychange",xx)):t==="focusout"&&ZI()}function ND(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ng(jc)}function DD(t,e){if(t==="click")return Ng(e)}function OD(t,e){if(t==="input"||t==="change")return Ng(e)}function MD(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Si=typeof Object.is=="function"?Object.is:MD;function Uc(t,e){if(Si(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f_.call(e,i)||!Si(t[i],e[i]))return!1}return!0}function eE(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function tE(t,e){var n=eE(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=eE(n)}}function Cx(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Cx(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Ax(){for(var t=window,e=Af();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Af(t.document)}return e}function Dy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function LD(t){var e=Ax(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Cx(n.ownerDocument.documentElement,n)){if(r!==null&&Dy(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=tE(n,s);var a=tE(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var VD=Is&&"documentMode"in document&&11>=document.documentMode,vl=null,N_=null,vc=null,D_=!1;function nE(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;D_||vl==null||vl!==Af(r)||(r=vl,"selectionStart"in r&&Dy(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),vc&&Uc(vc,r)||(vc=r,r=Of(N_,"onSelect"),0<r.length&&(e=new Ry("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=vl)))}function xd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var yl={animationend:xd("Animation","AnimationEnd"),animationiteration:xd("Animation","AnimationIteration"),animationstart:xd("Animation","AnimationStart"),transitionend:xd("Transition","TransitionEnd")},cp={},Px={};Is&&(Px=document.createElement("div").style,"AnimationEvent"in window||(delete yl.animationend.animation,delete yl.animationiteration.animation,delete yl.animationstart.animation),"TransitionEvent"in window||delete yl.transitionend.transition);function Dg(t){if(cp[t])return cp[t];if(!yl[t])return t;var e=yl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Px)return cp[t]=e[n];return t}var bx=Dg("animationend"),Rx=Dg("animationiteration"),kx=Dg("animationstart"),Nx=Dg("transitionend"),Dx=new Map,rE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Po(t,e){Dx.set(t,e),Ba(e,[t])}for(var hp=0;hp<rE.length;hp++){var dp=rE[hp],FD=dp.toLowerCase(),BD=dp[0].toUpperCase()+dp.slice(1);Po(FD,"on"+BD)}Po(bx,"onAnimationEnd");Po(Rx,"onAnimationIteration");Po(kx,"onAnimationStart");Po("dblclick","onDoubleClick");Po("focusin","onFocus");Po("focusout","onBlur");Po(Nx,"onTransitionEnd");ql("onMouseEnter",["mouseout","mouseover"]);ql("onMouseLeave",["mouseout","mouseover"]);ql("onPointerEnter",["pointerout","pointerover"]);ql("onPointerLeave",["pointerout","pointerover"]);Ba("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ba("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ba("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ba("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ba("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ba("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jD=new Set("cancel close invalid load scroll toggle".split(" ").concat(rc));function iE(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,FN(r,e,void 0,t),t.currentTarget=null}function Ox(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var c=r[a],h=c.instance,g=c.currentTarget;if(c=c.listener,h!==s&&i.isPropagationStopped())break e;iE(i,c,g),s=h}else for(a=0;a<r.length;a++){if(c=r[a],h=c.instance,g=c.currentTarget,c=c.listener,h!==s&&i.isPropagationStopped())break e;iE(i,c,g),s=h}}}if(bf)throw t=P_,bf=!1,P_=null,t}function Lt(t,e){var n=e[F_];n===void 0&&(n=e[F_]=new Set);var r=t+"__bubble";n.has(r)||(Mx(e,t,2,!1),n.add(r))}function fp(t,e,n){var r=0;e&&(r|=4),Mx(n,t,r,e)}var Cd="_reactListening"+Math.random().toString(36).slice(2);function zc(t){if(!t[Cd]){t[Cd]=!0,z1.forEach(function(n){n!=="selectionchange"&&(jD.has(n)||fp(n,!1,t),fp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Cd]||(e[Cd]=!0,fp("selectionchange",!1,e))}}function Mx(t,e,n,r){switch(vx(e)){case 1:var i=eD;break;case 4:i=tD;break;default:i=Py}n=i.bind(null,e,n,t),i=void 0,!A_||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function gp(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var c=r.stateNode.containerInfo;if(c===i||c.nodeType===8&&c.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var h=a.tag;if((h===3||h===4)&&(h=a.stateNode.containerInfo,h===i||h.nodeType===8&&h.parentNode===i))return;a=a.return}for(;c!==null;){if(a=sa(c),a===null)return;if(h=a.tag,h===5||h===6){r=s=a;continue e}c=c.parentNode}}r=r.return}ix(function(){var g=s,_=Sy(n),w=[];e:{var T=Dx.get(t);if(T!==void 0){var E=Ry,$=t;switch(t){case"keypress":if(ef(n)===0)break e;case"keydown":case"keyup":E=pD;break;case"focusin":$="focus",E=ap;break;case"focusout":$="blur",E=ap;break;case"beforeblur":case"afterblur":E=ap;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=GI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=iD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=yD;break;case bx:case Rx:case kx:E=aD;break;case Nx:E=ID;break;case"scroll":E=nD;break;case"wheel":E=TD;break;case"copy":case"cut":case"paste":E=uD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=KI}var U=(e&4)!==0,J=!U&&t==="scroll",V=U?T!==null?T+"Capture":null:T;U=[];for(var B=g,j;B!==null;){j=B;var Z=j.stateNode;if(j.tag===5&&Z!==null&&(j=Z,V!==null&&(Z=Lc(B,V),Z!=null&&U.push($c(B,Z,j)))),J)break;B=B.return}0<U.length&&(T=new E(T,$,null,n,_),w.push({event:T,listeners:U}))}}if(!(e&7)){e:{if(T=t==="mouseover"||t==="pointerover",E=t==="mouseout"||t==="pointerout",T&&n!==x_&&($=n.relatedTarget||n.fromElement)&&(sa($)||$[Es]))break e;if((E||T)&&(T=_.window===_?_:(T=_.ownerDocument)?T.defaultView||T.parentWindow:window,E?($=n.relatedTarget||n.toElement,E=g,$=$?sa($):null,$!==null&&(J=ja($),$!==J||$.tag!==5&&$.tag!==6)&&($=null)):(E=null,$=g),E!==$)){if(U=GI,Z="onMouseLeave",V="onMouseEnter",B="mouse",(t==="pointerout"||t==="pointerover")&&(U=KI,Z="onPointerLeave",V="onPointerEnter",B="pointer"),J=E==null?T:wl(E),j=$==null?T:wl($),T=new U(Z,B+"leave",E,n,_),T.target=J,T.relatedTarget=j,Z=null,sa(_)===g&&(U=new U(V,B+"enter",$,n,_),U.target=j,U.relatedTarget=J,Z=U),J=Z,E&&$)t:{for(U=E,V=$,B=0,j=U;j;j=Xa(j))B++;for(j=0,Z=V;Z;Z=Xa(Z))j++;for(;0<B-j;)U=Xa(U),B--;for(;0<j-B;)V=Xa(V),j--;for(;B--;){if(U===V||V!==null&&U===V.alternate)break t;U=Xa(U),V=Xa(V)}U=null}else U=null;E!==null&&sE(w,T,E,U,!1),$!==null&&J!==null&&sE(w,J,$,U,!0)}}e:{if(T=g?wl(g):window,E=T.nodeName&&T.nodeName.toLowerCase(),E==="select"||E==="input"&&T.type==="file")var ne=RD;else if(XI(T))if(Sx)ne=OD;else{ne=ND;var te=kD}else(E=T.nodeName)&&E.toLowerCase()==="input"&&(T.type==="checkbox"||T.type==="radio")&&(ne=DD);if(ne&&(ne=ne(t,g))){Tx(w,ne,n,_);break e}te&&te(t,T,g),t==="focusout"&&(te=T._wrapperState)&&te.controlled&&T.type==="number"&&w_(T,"number",T.value)}switch(te=g?wl(g):window,t){case"focusin":(XI(te)||te.contentEditable==="true")&&(vl=te,N_=g,vc=null);break;case"focusout":vc=N_=vl=null;break;case"mousedown":D_=!0;break;case"contextmenu":case"mouseup":case"dragend":D_=!1,nE(w,n,_);break;case"selectionchange":if(VD)break;case"keydown":case"keyup":nE(w,n,_)}var ae;if(Ny)e:{switch(t){case"compositionstart":var ce="onCompositionStart";break e;case"compositionend":ce="onCompositionEnd";break e;case"compositionupdate":ce="onCompositionUpdate";break e}ce=void 0}else _l?Ix(t,n)&&(ce="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(ce="onCompositionStart");ce&&(wx&&n.locale!=="ko"&&(_l||ce!=="onCompositionStart"?ce==="onCompositionEnd"&&_l&&(ae=yx()):(Qs=_,by="value"in Qs?Qs.value:Qs.textContent,_l=!0)),te=Of(g,ce),0<te.length&&(ce=new WI(ce,t,null,n,_),w.push({event:ce,listeners:te}),ae?ce.data=ae:(ae=Ex(n),ae!==null&&(ce.data=ae)))),(ae=xD?CD(t,n):AD(t,n))&&(g=Of(g,"onBeforeInput"),0<g.length&&(_=new WI("onBeforeInput","beforeinput",null,n,_),w.push({event:_,listeners:g}),_.data=ae))}Ox(w,e)})}function $c(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Of(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Lc(t,n),s!=null&&r.unshift($c(t,s,i)),s=Lc(t,e),s!=null&&r.push($c(t,s,i))),t=t.return}return r}function Xa(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function sE(t,e,n,r,i){for(var s=e._reactName,a=[];n!==null&&n!==r;){var c=n,h=c.alternate,g=c.stateNode;if(h!==null&&h===r)break;c.tag===5&&g!==null&&(c=g,i?(h=Lc(n,s),h!=null&&a.unshift($c(n,h,c))):i||(h=Lc(n,s),h!=null&&a.push($c(n,h,c)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var UD=/\r\n?/g,zD=/\u0000|\uFFFD/g;function oE(t){return(typeof t=="string"?t:""+t).replace(UD,`
`).replace(zD,"")}function Ad(t,e,n){if(e=oE(e),oE(t)!==e&&n)throw Error(ye(425))}function Mf(){}var O_=null,M_=null;function L_(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var V_=typeof setTimeout=="function"?setTimeout:void 0,$D=typeof clearTimeout=="function"?clearTimeout:void 0,aE=typeof Promise=="function"?Promise:void 0,qD=typeof queueMicrotask=="function"?queueMicrotask:typeof aE<"u"?function(t){return aE.resolve(null).then(t).catch(HD)}:V_;function HD(t){setTimeout(function(){throw t})}function mp(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Bc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Bc(e)}function io(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function lE(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var mu=Math.random().toString(36).slice(2),Mi="__reactFiber$"+mu,qc="__reactProps$"+mu,Es="__reactContainer$"+mu,F_="__reactEvents$"+mu,GD="__reactListeners$"+mu,WD="__reactHandles$"+mu;function sa(t){var e=t[Mi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Es]||n[Mi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=lE(t);t!==null;){if(n=t[Mi])return n;t=lE(t)}return e}t=n,n=t.parentNode}return null}function Dh(t){return t=t[Mi]||t[Es],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function wl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ye(33))}function Og(t){return t[qc]||null}var B_=[],Il=-1;function bo(t){return{current:t}}function Ut(t){0>Il||(t.current=B_[Il],B_[Il]=null,Il--)}function Dt(t,e){Il++,B_[Il]=t.current,t.current=e}var go={},tr=bo(go),Rr=bo(!1),wa=go;function Hl(t,e){var n=t.type.contextTypes;if(!n)return go;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function kr(t){return t=t.childContextTypes,t!=null}function Lf(){Ut(Rr),Ut(tr)}function uE(t,e,n){if(tr.current!==go)throw Error(ye(168));Dt(tr,e),Dt(Rr,n)}function Lx(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ye(108,kN(t)||"Unknown",i));return Xt({},n,r)}function Vf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||go,wa=tr.current,Dt(tr,t),Dt(Rr,Rr.current),!0}function cE(t,e,n){var r=t.stateNode;if(!r)throw Error(ye(169));n?(t=Lx(t,e,wa),r.__reactInternalMemoizedMergedChildContext=t,Ut(Rr),Ut(tr),Dt(tr,t)):Ut(Rr),Dt(Rr,n)}var cs=null,Mg=!1,pp=!1;function Vx(t){cs===null?cs=[t]:cs.push(t)}function KD(t){Mg=!0,Vx(t)}function Ro(){if(!pp&&cs!==null){pp=!0;var t=0,e=Ct;try{var n=cs;for(Ct=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}cs=null,Mg=!1}catch(i){throw cs!==null&&(cs=cs.slice(t+1)),lx(xy,Ro),i}finally{Ct=e,pp=!1}}return null}var El=[],Tl=0,Ff=null,Bf=0,Jr=[],Zr=0,Ia=null,fs=1,gs="";function Qo(t,e){El[Tl++]=Bf,El[Tl++]=Ff,Ff=t,Bf=e}function Fx(t,e,n){Jr[Zr++]=fs,Jr[Zr++]=gs,Jr[Zr++]=Ia,Ia=t;var r=fs;t=gs;var i=32-Ii(r)-1;r&=~(1<<i),n+=1;var s=32-Ii(e)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,fs=1<<32-Ii(e)+i|n<<i|r,gs=s+t}else fs=1<<s|n<<i|r,gs=t}function Oy(t){t.return!==null&&(Qo(t,1),Fx(t,1,0))}function My(t){for(;t===Ff;)Ff=El[--Tl],El[Tl]=null,Bf=El[--Tl],El[Tl]=null;for(;t===Ia;)Ia=Jr[--Zr],Jr[Zr]=null,gs=Jr[--Zr],Jr[Zr]=null,fs=Jr[--Zr],Jr[Zr]=null}var jr=null,Fr=null,qt=!1,pi=null;function Bx(t,e){var n=ti(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function hE(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,jr=t,Fr=io(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,jr=t,Fr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ia!==null?{id:fs,overflow:gs}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ti(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,jr=t,Fr=null,!0):!1;default:return!1}}function j_(t){return(t.mode&1)!==0&&(t.flags&128)===0}function U_(t){if(qt){var e=Fr;if(e){var n=e;if(!hE(t,e)){if(j_(t))throw Error(ye(418));e=io(n.nextSibling);var r=jr;e&&hE(t,e)?Bx(r,n):(t.flags=t.flags&-4097|2,qt=!1,jr=t)}}else{if(j_(t))throw Error(ye(418));t.flags=t.flags&-4097|2,qt=!1,jr=t}}}function dE(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;jr=t}function Pd(t){if(t!==jr)return!1;if(!qt)return dE(t),qt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!L_(t.type,t.memoizedProps)),e&&(e=Fr)){if(j_(t))throw jx(),Error(ye(418));for(;e;)Bx(t,e),e=io(e.nextSibling)}if(dE(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ye(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Fr=io(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Fr=null}}else Fr=jr?io(t.stateNode.nextSibling):null;return!0}function jx(){for(var t=Fr;t;)t=io(t.nextSibling)}function Gl(){Fr=jr=null,qt=!1}function Ly(t){pi===null?pi=[t]:pi.push(t)}var QD=bs.ReactCurrentBatchConfig;function gi(t,e){if(t&&t.defaultProps){e=Xt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var jf=bo(null),Uf=null,Sl=null,Vy=null;function Fy(){Vy=Sl=Uf=null}function By(t){var e=jf.current;Ut(jf),t._currentValue=e}function z_(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ol(t,e){Uf=t,Vy=Sl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(xr=!0),t.firstContext=null)}function ii(t){var e=t._currentValue;if(Vy!==t)if(t={context:t,memoizedValue:e,next:null},Sl===null){if(Uf===null)throw Error(ye(308));Sl=t,Uf.dependencies={lanes:0,firstContext:t}}else Sl=Sl.next=t;return e}var oa=null;function jy(t){oa===null?oa=[t]:oa.push(t)}function Ux(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,jy(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ts(t,r)}function Ts(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var $s=!1;function Uy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zx(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function vs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function so(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,vt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ts(t,n)}return i=r.interleaved,i===null?(e.next=e,jy(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ts(t,n)}function tf(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Cy(t,n)}}function fE(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function zf(t,e,n,r){var i=t.updateQueue;$s=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,c=i.shared.pending;if(c!==null){i.shared.pending=null;var h=c,g=h.next;h.next=null,a===null?s=g:a.next=g,a=h;var _=t.alternate;_!==null&&(_=_.updateQueue,c=_.lastBaseUpdate,c!==a&&(c===null?_.firstBaseUpdate=g:c.next=g,_.lastBaseUpdate=h))}if(s!==null){var w=i.baseState;a=0,_=g=h=null,c=s;do{var T=c.lane,E=c.eventTime;if((r&T)===T){_!==null&&(_=_.next={eventTime:E,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var $=t,U=c;switch(T=e,E=n,U.tag){case 1:if($=U.payload,typeof $=="function"){w=$.call(E,w,T);break e}w=$;break e;case 3:$.flags=$.flags&-65537|128;case 0:if($=U.payload,T=typeof $=="function"?$.call(E,w,T):$,T==null)break e;w=Xt({},w,T);break e;case 2:$s=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,T=i.effects,T===null?i.effects=[c]:T.push(c))}else E={eventTime:E,lane:T,tag:c.tag,payload:c.payload,callback:c.callback,next:null},_===null?(g=_=E,h=w):_=_.next=E,a|=T;if(c=c.next,c===null){if(c=i.shared.pending,c===null)break;T=c,c=T.next,T.next=null,i.lastBaseUpdate=T,i.shared.pending=null}}while(!0);if(_===null&&(h=w),i.baseState=h,i.firstBaseUpdate=g,i.lastBaseUpdate=_,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ta|=a,t.lanes=a,t.memoizedState=w}}function gE(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ye(191,i));i.call(r)}}}var $x=new U1.Component().refs;function $_(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Xt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Lg={isMounted:function(t){return(t=t._reactInternals)?ja(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=hr(),i=ao(t),s=vs(r,i);s.payload=e,n!=null&&(s.callback=n),e=so(t,s,i),e!==null&&(Ei(e,t,i,r),tf(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=hr(),i=ao(t),s=vs(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=so(t,s,i),e!==null&&(Ei(e,t,i,r),tf(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=hr(),r=ao(t),i=vs(n,r);i.tag=2,e!=null&&(i.callback=e),e=so(t,i,r),e!==null&&(Ei(e,t,r,n),tf(e,t,r))}};function mE(t,e,n,r,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!Uc(n,r)||!Uc(i,s):!0}function qx(t,e,n){var r=!1,i=go,s=e.contextType;return typeof s=="object"&&s!==null?s=ii(s):(i=kr(e)?wa:tr.current,r=e.contextTypes,s=(r=r!=null)?Hl(t,i):go),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Lg,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function pE(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Lg.enqueueReplaceState(e,e.state,null)}function q_(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=$x,Uy(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=ii(s):(s=kr(e)?wa:tr.current,i.context=Hl(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&($_(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Lg.enqueueReplaceState(i,i.state,null),zf(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Fu(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ye(309));var r=n.stateNode}if(!r)throw Error(ye(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var c=i.refs;c===$x&&(c=i.refs={}),a===null?delete c[s]:c[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(ye(284));if(!n._owner)throw Error(ye(290,t))}return t}function bd(t,e){throw t=Object.prototype.toString.call(e),Error(ye(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function _E(t){var e=t._init;return e(t._payload)}function Hx(t){function e(V,B){if(t){var j=V.deletions;j===null?(V.deletions=[B],V.flags|=16):j.push(B)}}function n(V,B){if(!t)return null;for(;B!==null;)e(V,B),B=B.sibling;return null}function r(V,B){for(V=new Map;B!==null;)B.key!==null?V.set(B.key,B):V.set(B.index,B),B=B.sibling;return V}function i(V,B){return V=lo(V,B),V.index=0,V.sibling=null,V}function s(V,B,j){return V.index=j,t?(j=V.alternate,j!==null?(j=j.index,j<B?(V.flags|=2,B):j):(V.flags|=2,B)):(V.flags|=1048576,B)}function a(V){return t&&V.alternate===null&&(V.flags|=2),V}function c(V,B,j,Z){return B===null||B.tag!==6?(B=Tp(j,V.mode,Z),B.return=V,B):(B=i(B,j),B.return=V,B)}function h(V,B,j,Z){var ne=j.type;return ne===pl?_(V,B,j.props.children,Z,j.key):B!==null&&(B.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===zs&&_E(ne)===B.type)?(Z=i(B,j.props),Z.ref=Fu(V,B,j),Z.return=V,Z):(Z=lf(j.type,j.key,j.props,null,V.mode,Z),Z.ref=Fu(V,B,j),Z.return=V,Z)}function g(V,B,j,Z){return B===null||B.tag!==4||B.stateNode.containerInfo!==j.containerInfo||B.stateNode.implementation!==j.implementation?(B=Sp(j,V.mode,Z),B.return=V,B):(B=i(B,j.children||[]),B.return=V,B)}function _(V,B,j,Z,ne){return B===null||B.tag!==7?(B=ma(j,V.mode,Z,ne),B.return=V,B):(B=i(B,j),B.return=V,B)}function w(V,B,j){if(typeof B=="string"&&B!==""||typeof B=="number")return B=Tp(""+B,V.mode,j),B.return=V,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case vd:return j=lf(B.type,B.key,B.props,null,V.mode,j),j.ref=Fu(V,null,B),j.return=V,j;case ml:return B=Sp(B,V.mode,j),B.return=V,B;case zs:var Z=B._init;return w(V,Z(B._payload),j)}if(tc(B)||Du(B))return B=ma(B,V.mode,j,null),B.return=V,B;bd(V,B)}return null}function T(V,B,j,Z){var ne=B!==null?B.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return ne!==null?null:c(V,B,""+j,Z);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case vd:return j.key===ne?h(V,B,j,Z):null;case ml:return j.key===ne?g(V,B,j,Z):null;case zs:return ne=j._init,T(V,B,ne(j._payload),Z)}if(tc(j)||Du(j))return ne!==null?null:_(V,B,j,Z,null);bd(V,j)}return null}function E(V,B,j,Z,ne){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return V=V.get(j)||null,c(B,V,""+Z,ne);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case vd:return V=V.get(Z.key===null?j:Z.key)||null,h(B,V,Z,ne);case ml:return V=V.get(Z.key===null?j:Z.key)||null,g(B,V,Z,ne);case zs:var te=Z._init;return E(V,B,j,te(Z._payload),ne)}if(tc(Z)||Du(Z))return V=V.get(j)||null,_(B,V,Z,ne,null);bd(B,Z)}return null}function $(V,B,j,Z){for(var ne=null,te=null,ae=B,ce=B=0,_e=null;ae!==null&&ce<j.length;ce++){ae.index>ce?(_e=ae,ae=null):_e=ae.sibling;var me=T(V,ae,j[ce],Z);if(me===null){ae===null&&(ae=_e);break}t&&ae&&me.alternate===null&&e(V,ae),B=s(me,B,ce),te===null?ne=me:te.sibling=me,te=me,ae=_e}if(ce===j.length)return n(V,ae),qt&&Qo(V,ce),ne;if(ae===null){for(;ce<j.length;ce++)ae=w(V,j[ce],Z),ae!==null&&(B=s(ae,B,ce),te===null?ne=ae:te.sibling=ae,te=ae);return qt&&Qo(V,ce),ne}for(ae=r(V,ae);ce<j.length;ce++)_e=E(ae,V,ce,j[ce],Z),_e!==null&&(t&&_e.alternate!==null&&ae.delete(_e.key===null?ce:_e.key),B=s(_e,B,ce),te===null?ne=_e:te.sibling=_e,te=_e);return t&&ae.forEach(function(tt){return e(V,tt)}),qt&&Qo(V,ce),ne}function U(V,B,j,Z){var ne=Du(j);if(typeof ne!="function")throw Error(ye(150));if(j=ne.call(j),j==null)throw Error(ye(151));for(var te=ne=null,ae=B,ce=B=0,_e=null,me=j.next();ae!==null&&!me.done;ce++,me=j.next()){ae.index>ce?(_e=ae,ae=null):_e=ae.sibling;var tt=T(V,ae,me.value,Z);if(tt===null){ae===null&&(ae=_e);break}t&&ae&&tt.alternate===null&&e(V,ae),B=s(tt,B,ce),te===null?ne=tt:te.sibling=tt,te=tt,ae=_e}if(me.done)return n(V,ae),qt&&Qo(V,ce),ne;if(ae===null){for(;!me.done;ce++,me=j.next())me=w(V,me.value,Z),me!==null&&(B=s(me,B,ce),te===null?ne=me:te.sibling=me,te=me);return qt&&Qo(V,ce),ne}for(ae=r(V,ae);!me.done;ce++,me=j.next())me=E(ae,V,ce,me.value,Z),me!==null&&(t&&me.alternate!==null&&ae.delete(me.key===null?ce:me.key),B=s(me,B,ce),te===null?ne=me:te.sibling=me,te=me);return t&&ae.forEach(function(Le){return e(V,Le)}),qt&&Qo(V,ce),ne}function J(V,B,j,Z){if(typeof j=="object"&&j!==null&&j.type===pl&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case vd:e:{for(var ne=j.key,te=B;te!==null;){if(te.key===ne){if(ne=j.type,ne===pl){if(te.tag===7){n(V,te.sibling),B=i(te,j.props.children),B.return=V,V=B;break e}}else if(te.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===zs&&_E(ne)===te.type){n(V,te.sibling),B=i(te,j.props),B.ref=Fu(V,te,j),B.return=V,V=B;break e}n(V,te);break}else e(V,te);te=te.sibling}j.type===pl?(B=ma(j.props.children,V.mode,Z,j.key),B.return=V,V=B):(Z=lf(j.type,j.key,j.props,null,V.mode,Z),Z.ref=Fu(V,B,j),Z.return=V,V=Z)}return a(V);case ml:e:{for(te=j.key;B!==null;){if(B.key===te)if(B.tag===4&&B.stateNode.containerInfo===j.containerInfo&&B.stateNode.implementation===j.implementation){n(V,B.sibling),B=i(B,j.children||[]),B.return=V,V=B;break e}else{n(V,B);break}else e(V,B);B=B.sibling}B=Sp(j,V.mode,Z),B.return=V,V=B}return a(V);case zs:return te=j._init,J(V,B,te(j._payload),Z)}if(tc(j))return $(V,B,j,Z);if(Du(j))return U(V,B,j,Z);bd(V,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,B!==null&&B.tag===6?(n(V,B.sibling),B=i(B,j),B.return=V,V=B):(n(V,B),B=Tp(j,V.mode,Z),B.return=V,V=B),a(V)):n(V,B)}return J}var Wl=Hx(!0),Gx=Hx(!1),Oh={},Ki=bo(Oh),Hc=bo(Oh),Gc=bo(Oh);function aa(t){if(t===Oh)throw Error(ye(174));return t}function zy(t,e){switch(Dt(Gc,e),Dt(Hc,t),Dt(Ki,Oh),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:E_(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=E_(e,t)}Ut(Ki),Dt(Ki,e)}function Kl(){Ut(Ki),Ut(Hc),Ut(Gc)}function Wx(t){aa(Gc.current);var e=aa(Ki.current),n=E_(e,t.type);e!==n&&(Dt(Hc,t),Dt(Ki,n))}function $y(t){Hc.current===t&&(Ut(Ki),Ut(Hc))}var Kt=bo(0);function $f(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var _p=[];function qy(){for(var t=0;t<_p.length;t++)_p[t]._workInProgressVersionPrimary=null;_p.length=0}var nf=bs.ReactCurrentDispatcher,vp=bs.ReactCurrentBatchConfig,Ea=0,Qt=null,vn=null,Cn=null,qf=!1,yc=!1,Wc=0,YD=0;function Qn(){throw Error(ye(321))}function Hy(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Si(t[n],e[n]))return!1;return!0}function Gy(t,e,n,r,i,s){if(Ea=s,Qt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,nf.current=t===null||t.memoizedState===null?eO:tO,t=n(r,i),yc){s=0;do{if(yc=!1,Wc=0,25<=s)throw Error(ye(301));s+=1,Cn=vn=null,e.updateQueue=null,nf.current=nO,t=n(r,i)}while(yc)}if(nf.current=Hf,e=vn!==null&&vn.next!==null,Ea=0,Cn=vn=Qt=null,qf=!1,e)throw Error(ye(300));return t}function Wy(){var t=Wc!==0;return Wc=0,t}function ki(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Cn===null?Qt.memoizedState=Cn=t:Cn=Cn.next=t,Cn}function si(){if(vn===null){var t=Qt.alternate;t=t!==null?t.memoizedState:null}else t=vn.next;var e=Cn===null?Qt.memoizedState:Cn.next;if(e!==null)Cn=e,vn=t;else{if(t===null)throw Error(ye(310));vn=t,t={memoizedState:vn.memoizedState,baseState:vn.baseState,baseQueue:vn.baseQueue,queue:vn.queue,next:null},Cn===null?Qt.memoizedState=Cn=t:Cn=Cn.next=t}return Cn}function Kc(t,e){return typeof e=="function"?e(t):e}function yp(t){var e=si(),n=e.queue;if(n===null)throw Error(ye(311));n.lastRenderedReducer=t;var r=vn,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var c=a=null,h=null,g=s;do{var _=g.lane;if((Ea&_)===_)h!==null&&(h=h.next={lane:0,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null}),r=g.hasEagerState?g.eagerState:t(r,g.action);else{var w={lane:_,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null};h===null?(c=h=w,a=r):h=h.next=w,Qt.lanes|=_,Ta|=_}g=g.next}while(g!==null&&g!==s);h===null?a=r:h.next=c,Si(r,e.memoizedState)||(xr=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=h,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Qt.lanes|=s,Ta|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function wp(t){var e=si(),n=e.queue;if(n===null)throw Error(ye(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);Si(s,e.memoizedState)||(xr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Kx(){}function Qx(t,e){var n=Qt,r=si(),i=e(),s=!Si(r.memoizedState,i);if(s&&(r.memoizedState=i,xr=!0),r=r.queue,Ky(Jx.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Cn!==null&&Cn.memoizedState.tag&1){if(n.flags|=2048,Qc(9,Xx.bind(null,n,r,i,e),void 0,null),Pn===null)throw Error(ye(349));Ea&30||Yx(n,e,i)}return i}function Yx(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Qt.updateQueue,e===null?(e={lastEffect:null,stores:null},Qt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Xx(t,e,n,r){e.value=n,e.getSnapshot=r,Zx(e)&&eC(t)}function Jx(t,e,n){return n(function(){Zx(e)&&eC(t)})}function Zx(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Si(t,n)}catch{return!0}}function eC(t){var e=Ts(t,1);e!==null&&Ei(e,t,1,-1)}function vE(t){var e=ki();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Kc,lastRenderedState:t},e.queue=t,t=t.dispatch=ZD.bind(null,Qt,t),[e.memoizedState,t]}function Qc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Qt.updateQueue,e===null?(e={lastEffect:null,stores:null},Qt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function tC(){return si().memoizedState}function rf(t,e,n,r){var i=ki();Qt.flags|=t,i.memoizedState=Qc(1|e,n,void 0,r===void 0?null:r)}function Vg(t,e,n,r){var i=si();r=r===void 0?null:r;var s=void 0;if(vn!==null){var a=vn.memoizedState;if(s=a.destroy,r!==null&&Hy(r,a.deps)){i.memoizedState=Qc(e,n,s,r);return}}Qt.flags|=t,i.memoizedState=Qc(1|e,n,s,r)}function yE(t,e){return rf(8390656,8,t,e)}function Ky(t,e){return Vg(2048,8,t,e)}function nC(t,e){return Vg(4,2,t,e)}function rC(t,e){return Vg(4,4,t,e)}function iC(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function sC(t,e,n){return n=n!=null?n.concat([t]):null,Vg(4,4,iC.bind(null,e,t),n)}function Qy(){}function oC(t,e){var n=si();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Hy(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function aC(t,e){var n=si();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Hy(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function lC(t,e,n){return Ea&21?(Si(n,e)||(n=hx(),Qt.lanes|=n,Ta|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,xr=!0),t.memoizedState=n)}function XD(t,e){var n=Ct;Ct=n!==0&&4>n?n:4,t(!0);var r=vp.transition;vp.transition={};try{t(!1),e()}finally{Ct=n,vp.transition=r}}function uC(){return si().memoizedState}function JD(t,e,n){var r=ao(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},cC(t))hC(e,n);else if(n=Ux(t,e,n,r),n!==null){var i=hr();Ei(n,t,r,i),dC(n,e,r)}}function ZD(t,e,n){var r=ao(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(cC(t))hC(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,c=s(a,n);if(i.hasEagerState=!0,i.eagerState=c,Si(c,a)){var h=e.interleaved;h===null?(i.next=i,jy(e)):(i.next=h.next,h.next=i),e.interleaved=i;return}}catch{}finally{}n=Ux(t,e,i,r),n!==null&&(i=hr(),Ei(n,t,r,i),dC(n,e,r))}}function cC(t){var e=t.alternate;return t===Qt||e!==null&&e===Qt}function hC(t,e){yc=qf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function dC(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Cy(t,n)}}var Hf={readContext:ii,useCallback:Qn,useContext:Qn,useEffect:Qn,useImperativeHandle:Qn,useInsertionEffect:Qn,useLayoutEffect:Qn,useMemo:Qn,useReducer:Qn,useRef:Qn,useState:Qn,useDebugValue:Qn,useDeferredValue:Qn,useTransition:Qn,useMutableSource:Qn,useSyncExternalStore:Qn,useId:Qn,unstable_isNewReconciler:!1},eO={readContext:ii,useCallback:function(t,e){return ki().memoizedState=[t,e===void 0?null:e],t},useContext:ii,useEffect:yE,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,rf(4194308,4,iC.bind(null,e,t),n)},useLayoutEffect:function(t,e){return rf(4194308,4,t,e)},useInsertionEffect:function(t,e){return rf(4,2,t,e)},useMemo:function(t,e){var n=ki();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ki();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=JD.bind(null,Qt,t),[r.memoizedState,t]},useRef:function(t){var e=ki();return t={current:t},e.memoizedState=t},useState:vE,useDebugValue:Qy,useDeferredValue:function(t){return ki().memoizedState=t},useTransition:function(){var t=vE(!1),e=t[0];return t=XD.bind(null,t[1]),ki().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Qt,i=ki();if(qt){if(n===void 0)throw Error(ye(407));n=n()}else{if(n=e(),Pn===null)throw Error(ye(349));Ea&30||Yx(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,yE(Jx.bind(null,r,s,t),[t]),r.flags|=2048,Qc(9,Xx.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=ki(),e=Pn.identifierPrefix;if(qt){var n=gs,r=fs;n=(r&~(1<<32-Ii(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Wc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=YD++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},tO={readContext:ii,useCallback:oC,useContext:ii,useEffect:Ky,useImperativeHandle:sC,useInsertionEffect:nC,useLayoutEffect:rC,useMemo:aC,useReducer:yp,useRef:tC,useState:function(){return yp(Kc)},useDebugValue:Qy,useDeferredValue:function(t){var e=si();return lC(e,vn.memoizedState,t)},useTransition:function(){var t=yp(Kc)[0],e=si().memoizedState;return[t,e]},useMutableSource:Kx,useSyncExternalStore:Qx,useId:uC,unstable_isNewReconciler:!1},nO={readContext:ii,useCallback:oC,useContext:ii,useEffect:Ky,useImperativeHandle:sC,useInsertionEffect:nC,useLayoutEffect:rC,useMemo:aC,useReducer:wp,useRef:tC,useState:function(){return wp(Kc)},useDebugValue:Qy,useDeferredValue:function(t){var e=si();return vn===null?e.memoizedState=t:lC(e,vn.memoizedState,t)},useTransition:function(){var t=wp(Kc)[0],e=si().memoizedState;return[t,e]},useMutableSource:Kx,useSyncExternalStore:Qx,useId:uC,unstable_isNewReconciler:!1};function Ql(t,e){try{var n="",r=e;do n+=RN(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Ip(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function H_(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var rO=typeof WeakMap=="function"?WeakMap:Map;function fC(t,e,n){n=vs(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Wf||(Wf=!0,tv=r),H_(t,e)},n}function gC(t,e,n){n=vs(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){H_(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){H_(t,e),typeof r!="function"&&(oo===null?oo=new Set([this]):oo.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function wE(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new rO;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=_O.bind(null,t,e,n),e.then(t,t))}function IE(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function EE(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=vs(-1,1),e.tag=2,so(n,e,1))),n.lanes|=1),t)}var iO=bs.ReactCurrentOwner,xr=!1;function sr(t,e,n,r){e.child=t===null?Gx(e,null,n,r):Wl(e,t.child,n,r)}function TE(t,e,n,r,i){n=n.render;var s=e.ref;return Ol(e,i),r=Gy(t,e,n,r,s,i),n=Wy(),t!==null&&!xr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ss(t,e,i)):(qt&&n&&Oy(e),e.flags|=1,sr(t,e,r,i),e.child)}function SE(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!r0(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,mC(t,e,s,r,i)):(t=lf(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Uc,n(a,r)&&t.ref===e.ref)return Ss(t,e,i)}return e.flags|=1,t=lo(s,r),t.ref=e.ref,t.return=e,e.child=t}function mC(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Uc(s,r)&&t.ref===e.ref)if(xr=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(xr=!0);else return e.lanes=t.lanes,Ss(t,e,i)}return G_(t,e,n,r,i)}function pC(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Dt(Cl,Or),Or|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Dt(Cl,Or),Or|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Dt(Cl,Or),Or|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Dt(Cl,Or),Or|=r;return sr(t,e,i,n),e.child}function _C(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function G_(t,e,n,r,i){var s=kr(n)?wa:tr.current;return s=Hl(e,s),Ol(e,i),n=Gy(t,e,n,r,s,i),r=Wy(),t!==null&&!xr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ss(t,e,i)):(qt&&r&&Oy(e),e.flags|=1,sr(t,e,n,i),e.child)}function xE(t,e,n,r,i){if(kr(n)){var s=!0;Vf(e)}else s=!1;if(Ol(e,i),e.stateNode===null)sf(t,e),qx(e,n,r),q_(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,c=e.memoizedProps;a.props=c;var h=a.context,g=n.contextType;typeof g=="object"&&g!==null?g=ii(g):(g=kr(n)?wa:tr.current,g=Hl(e,g));var _=n.getDerivedStateFromProps,w=typeof _=="function"||typeof a.getSnapshotBeforeUpdate=="function";w||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==r||h!==g)&&pE(e,a,r,g),$s=!1;var T=e.memoizedState;a.state=T,zf(e,r,a,i),h=e.memoizedState,c!==r||T!==h||Rr.current||$s?(typeof _=="function"&&($_(e,n,_,r),h=e.memoizedState),(c=$s||mE(e,n,c,r,T,h,g))?(w||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=h),a.props=r,a.state=h,a.context=g,r=c):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,zx(t,e),c=e.memoizedProps,g=e.type===e.elementType?c:gi(e.type,c),a.props=g,w=e.pendingProps,T=a.context,h=n.contextType,typeof h=="object"&&h!==null?h=ii(h):(h=kr(n)?wa:tr.current,h=Hl(e,h));var E=n.getDerivedStateFromProps;(_=typeof E=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==w||T!==h)&&pE(e,a,r,h),$s=!1,T=e.memoizedState,a.state=T,zf(e,r,a,i);var $=e.memoizedState;c!==w||T!==$||Rr.current||$s?(typeof E=="function"&&($_(e,n,E,r),$=e.memoizedState),(g=$s||mE(e,n,g,r,T,$,h)||!1)?(_||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,$,h),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,$,h)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&T===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&T===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=$),a.props=r,a.state=$,a.context=h,r=g):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&T===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&T===t.memoizedState||(e.flags|=1024),r=!1)}return W_(t,e,n,r,s,i)}function W_(t,e,n,r,i,s){_C(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&cE(e,n,!1),Ss(t,e,s);r=e.stateNode,iO.current=e;var c=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Wl(e,t.child,null,s),e.child=Wl(e,null,c,s)):sr(t,e,c,s),e.memoizedState=r.state,i&&cE(e,n,!0),e.child}function vC(t){var e=t.stateNode;e.pendingContext?uE(t,e.pendingContext,e.pendingContext!==e.context):e.context&&uE(t,e.context,!1),zy(t,e.containerInfo)}function CE(t,e,n,r,i){return Gl(),Ly(i),e.flags|=256,sr(t,e,n,r),e.child}var K_={dehydrated:null,treeContext:null,retryLane:0};function Q_(t){return{baseLanes:t,cachePool:null,transitions:null}}function yC(t,e,n){var r=e.pendingProps,i=Kt.current,s=!1,a=(e.flags&128)!==0,c;if((c=a)||(c=t!==null&&t.memoizedState===null?!1:(i&2)!==0),c?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Dt(Kt,i&1),t===null)return U_(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,s?(r=e.mode,s=e.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=jg(a,r,0,null),t=ma(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Q_(n),e.memoizedState=K_,t):Yy(e,a));if(i=t.memoizedState,i!==null&&(c=i.dehydrated,c!==null))return sO(t,e,a,r,c,i,n);if(s){s=r.fallback,a=e.mode,i=t.child,c=i.sibling;var h={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=h,e.deletions=null):(r=lo(i,h),r.subtreeFlags=i.subtreeFlags&14680064),c!==null?s=lo(c,s):(s=ma(s,a,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,a=t.child.memoizedState,a=a===null?Q_(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~n,e.memoizedState=K_,r}return s=t.child,t=s.sibling,r=lo(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Yy(t,e){return e=jg({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Rd(t,e,n,r){return r!==null&&Ly(r),Wl(e,t.child,null,n),t=Yy(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function sO(t,e,n,r,i,s,a){if(n)return e.flags&256?(e.flags&=-257,r=Ip(Error(ye(422))),Rd(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=jg({mode:"visible",children:r.children},i,0,null),s=ma(s,i,a,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Wl(e,t.child,null,a),e.child.memoizedState=Q_(a),e.memoizedState=K_,s);if(!(e.mode&1))return Rd(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var c=r.dgst;return r=c,s=Error(ye(419)),r=Ip(s,r,void 0),Rd(t,e,a,r)}if(c=(a&t.childLanes)!==0,xr||c){if(r=Pn,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ts(t,i),Ei(r,t,i,-1))}return n0(),r=Ip(Error(ye(421))),Rd(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=vO.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Fr=io(i.nextSibling),jr=e,qt=!0,pi=null,t!==null&&(Jr[Zr++]=fs,Jr[Zr++]=gs,Jr[Zr++]=Ia,fs=t.id,gs=t.overflow,Ia=e),e=Yy(e,r.children),e.flags|=4096,e)}function AE(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),z_(t.return,e,n)}function Ep(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function wC(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(sr(t,e,r.children,n),r=Kt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&AE(t,n,e);else if(t.tag===19)AE(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Dt(Kt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&$f(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Ep(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&$f(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Ep(e,!0,n,null,s);break;case"together":Ep(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function sf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ss(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ta|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ye(153));if(e.child!==null){for(t=e.child,n=lo(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=lo(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function oO(t,e,n){switch(e.tag){case 3:vC(e),Gl();break;case 5:Wx(e);break;case 1:kr(e.type)&&Vf(e);break;case 4:zy(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Dt(jf,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Dt(Kt,Kt.current&1),e.flags|=128,null):n&e.child.childLanes?yC(t,e,n):(Dt(Kt,Kt.current&1),t=Ss(t,e,n),t!==null?t.sibling:null);Dt(Kt,Kt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return wC(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Dt(Kt,Kt.current),r)break;return null;case 22:case 23:return e.lanes=0,pC(t,e,n)}return Ss(t,e,n)}var IC,Y_,EC,TC;IC=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Y_=function(){};EC=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,aa(Ki.current);var s=null;switch(n){case"input":i=v_(t,i),r=v_(t,r),s=[];break;case"select":i=Xt({},i,{value:void 0}),r=Xt({},r,{value:void 0}),s=[];break;case"textarea":i=I_(t,i),r=I_(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Mf)}T_(n,r);var a;n=null;for(g in i)if(!r.hasOwnProperty(g)&&i.hasOwnProperty(g)&&i[g]!=null)if(g==="style"){var c=i[g];for(a in c)c.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else g!=="dangerouslySetInnerHTML"&&g!=="children"&&g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(Oc.hasOwnProperty(g)?s||(s=[]):(s=s||[]).push(g,null));for(g in r){var h=r[g];if(c=i!=null?i[g]:void 0,r.hasOwnProperty(g)&&h!==c&&(h!=null||c!=null))if(g==="style")if(c){for(a in c)!c.hasOwnProperty(a)||h&&h.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in h)h.hasOwnProperty(a)&&c[a]!==h[a]&&(n||(n={}),n[a]=h[a])}else n||(s||(s=[]),s.push(g,n)),n=h;else g==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,c=c?c.__html:void 0,h!=null&&c!==h&&(s=s||[]).push(g,h)):g==="children"?typeof h!="string"&&typeof h!="number"||(s=s||[]).push(g,""+h):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&(Oc.hasOwnProperty(g)?(h!=null&&g==="onScroll"&&Lt("scroll",t),s||c===h||(s=[])):(s=s||[]).push(g,h))}n&&(s=s||[]).push("style",n);var g=s;(e.updateQueue=g)&&(e.flags|=4)}};TC=function(t,e,n,r){n!==r&&(e.flags|=4)};function Bu(t,e){if(!qt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Yn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function aO(t,e,n){var r=e.pendingProps;switch(My(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yn(e),null;case 1:return kr(e.type)&&Lf(),Yn(e),null;case 3:return r=e.stateNode,Kl(),Ut(Rr),Ut(tr),qy(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Pd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,pi!==null&&(iv(pi),pi=null))),Y_(t,e),Yn(e),null;case 5:$y(e);var i=aa(Gc.current);if(n=e.type,t!==null&&e.stateNode!=null)EC(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ye(166));return Yn(e),null}if(t=aa(Ki.current),Pd(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Mi]=e,r[qc]=s,t=(e.mode&1)!==0,n){case"dialog":Lt("cancel",r),Lt("close",r);break;case"iframe":case"object":case"embed":Lt("load",r);break;case"video":case"audio":for(i=0;i<rc.length;i++)Lt(rc[i],r);break;case"source":Lt("error",r);break;case"img":case"image":case"link":Lt("error",r),Lt("load",r);break;case"details":Lt("toggle",r);break;case"input":LI(r,s),Lt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Lt("invalid",r);break;case"textarea":FI(r,s),Lt("invalid",r)}T_(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var c=s[a];a==="children"?typeof c=="string"?r.textContent!==c&&(s.suppressHydrationWarning!==!0&&Ad(r.textContent,c,t),i=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(s.suppressHydrationWarning!==!0&&Ad(r.textContent,c,t),i=["children",""+c]):Oc.hasOwnProperty(a)&&c!=null&&a==="onScroll"&&Lt("scroll",r)}switch(n){case"input":yd(r),VI(r,s,!0);break;case"textarea":yd(r),BI(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Mf)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Y1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Mi]=e,t[qc]=r,IC(t,e,!1,!1),e.stateNode=t;e:{switch(a=S_(n,r),n){case"dialog":Lt("cancel",t),Lt("close",t),i=r;break;case"iframe":case"object":case"embed":Lt("load",t),i=r;break;case"video":case"audio":for(i=0;i<rc.length;i++)Lt(rc[i],t);i=r;break;case"source":Lt("error",t),i=r;break;case"img":case"image":case"link":Lt("error",t),Lt("load",t),i=r;break;case"details":Lt("toggle",t),i=r;break;case"input":LI(t,r),i=v_(t,r),Lt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Xt({},r,{value:void 0}),Lt("invalid",t);break;case"textarea":FI(t,r),i=I_(t,r),Lt("invalid",t);break;default:i=r}T_(n,i),c=i;for(s in c)if(c.hasOwnProperty(s)){var h=c[s];s==="style"?Z1(t,h):s==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&X1(t,h)):s==="children"?typeof h=="string"?(n!=="textarea"||h!=="")&&Mc(t,h):typeof h=="number"&&Mc(t,""+h):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Oc.hasOwnProperty(s)?h!=null&&s==="onScroll"&&Lt("scroll",t):h!=null&&wy(t,s,h,a))}switch(n){case"input":yd(t),VI(t,r,!1);break;case"textarea":yd(t),BI(t);break;case"option":r.value!=null&&t.setAttribute("value",""+fo(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Rl(t,!!r.multiple,s,!1):r.defaultValue!=null&&Rl(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Mf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Yn(e),null;case 6:if(t&&e.stateNode!=null)TC(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ye(166));if(n=aa(Gc.current),aa(Ki.current),Pd(e)){if(r=e.stateNode,n=e.memoizedProps,r[Mi]=e,(s=r.nodeValue!==n)&&(t=jr,t!==null))switch(t.tag){case 3:Ad(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ad(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Mi]=e,e.stateNode=r}return Yn(e),null;case 13:if(Ut(Kt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(qt&&Fr!==null&&e.mode&1&&!(e.flags&128))jx(),Gl(),e.flags|=98560,s=!1;else if(s=Pd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(ye(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ye(317));s[Mi]=e}else Gl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Yn(e),s=!1}else pi!==null&&(iv(pi),pi=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Kt.current&1?yn===0&&(yn=3):n0())),e.updateQueue!==null&&(e.flags|=4),Yn(e),null);case 4:return Kl(),Y_(t,e),t===null&&zc(e.stateNode.containerInfo),Yn(e),null;case 10:return By(e.type._context),Yn(e),null;case 17:return kr(e.type)&&Lf(),Yn(e),null;case 19:if(Ut(Kt),s=e.memoizedState,s===null)return Yn(e),null;if(r=(e.flags&128)!==0,a=s.rendering,a===null)if(r)Bu(s,!1);else{if(yn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=$f(t),a!==null){for(e.flags|=128,Bu(s,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Dt(Kt,Kt.current&1|2),e.child}t=t.sibling}s.tail!==null&&hn()>Yl&&(e.flags|=128,r=!0,Bu(s,!1),e.lanes=4194304)}else{if(!r)if(t=$f(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Bu(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!qt)return Yn(e),null}else 2*hn()-s.renderingStartTime>Yl&&n!==1073741824&&(e.flags|=128,r=!0,Bu(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(n=s.last,n!==null?n.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=hn(),e.sibling=null,n=Kt.current,Dt(Kt,r?n&1|2:n&1),e):(Yn(e),null);case 22:case 23:return t0(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Or&1073741824&&(Yn(e),e.subtreeFlags&6&&(e.flags|=8192)):Yn(e),null;case 24:return null;case 25:return null}throw Error(ye(156,e.tag))}function lO(t,e){switch(My(e),e.tag){case 1:return kr(e.type)&&Lf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Kl(),Ut(Rr),Ut(tr),qy(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return $y(e),null;case 13:if(Ut(Kt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ye(340));Gl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ut(Kt),null;case 4:return Kl(),null;case 10:return By(e.type._context),null;case 22:case 23:return t0(),null;case 24:return null;default:return null}}var kd=!1,Jn=!1,uO=typeof WeakSet=="function"?WeakSet:Set,Ve=null;function xl(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){en(t,e,r)}else n.current=null}function X_(t,e,n){try{n()}catch(r){en(t,e,r)}}var PE=!1;function cO(t,e){if(O_=Nf,t=Ax(),Dy(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,c=-1,h=-1,g=0,_=0,w=t,T=null;t:for(;;){for(var E;w!==n||i!==0&&w.nodeType!==3||(c=a+i),w!==s||r!==0&&w.nodeType!==3||(h=a+r),w.nodeType===3&&(a+=w.nodeValue.length),(E=w.firstChild)!==null;)T=w,w=E;for(;;){if(w===t)break t;if(T===n&&++g===i&&(c=a),T===s&&++_===r&&(h=a),(E=w.nextSibling)!==null)break;w=T,T=w.parentNode}w=E}n=c===-1||h===-1?null:{start:c,end:h}}else n=null}n=n||{start:0,end:0}}else n=null;for(M_={focusedElem:t,selectionRange:n},Nf=!1,Ve=e;Ve!==null;)if(e=Ve,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ve=t;else for(;Ve!==null;){e=Ve;try{var $=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if($!==null){var U=$.memoizedProps,J=$.memoizedState,V=e.stateNode,B=V.getSnapshotBeforeUpdate(e.elementType===e.type?U:gi(e.type,U),J);V.__reactInternalSnapshotBeforeUpdate=B}break;case 3:var j=e.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ye(163))}}catch(Z){en(e,e.return,Z)}if(t=e.sibling,t!==null){t.return=e.return,Ve=t;break}Ve=e.return}return $=PE,PE=!1,$}function wc(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&X_(e,n,s)}i=i.next}while(i!==r)}}function Fg(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function J_(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function SC(t){var e=t.alternate;e!==null&&(t.alternate=null,SC(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Mi],delete e[qc],delete e[F_],delete e[GD],delete e[WD])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function xC(t){return t.tag===5||t.tag===3||t.tag===4}function bE(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||xC(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Z_(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Mf));else if(r!==4&&(t=t.child,t!==null))for(Z_(t,e,n),t=t.sibling;t!==null;)Z_(t,e,n),t=t.sibling}function ev(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(ev(t,e,n),t=t.sibling;t!==null;)ev(t,e,n),t=t.sibling}var Ln=null,mi=!1;function Vs(t,e,n){for(n=n.child;n!==null;)CC(t,e,n),n=n.sibling}function CC(t,e,n){if(Wi&&typeof Wi.onCommitFiberUnmount=="function")try{Wi.onCommitFiberUnmount(Rg,n)}catch{}switch(n.tag){case 5:Jn||xl(n,e);case 6:var r=Ln,i=mi;Ln=null,Vs(t,e,n),Ln=r,mi=i,Ln!==null&&(mi?(t=Ln,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ln.removeChild(n.stateNode));break;case 18:Ln!==null&&(mi?(t=Ln,n=n.stateNode,t.nodeType===8?mp(t.parentNode,n):t.nodeType===1&&mp(t,n),Bc(t)):mp(Ln,n.stateNode));break;case 4:r=Ln,i=mi,Ln=n.stateNode.containerInfo,mi=!0,Vs(t,e,n),Ln=r,mi=i;break;case 0:case 11:case 14:case 15:if(!Jn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&X_(n,e,a),i=i.next}while(i!==r)}Vs(t,e,n);break;case 1:if(!Jn&&(xl(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){en(n,e,c)}Vs(t,e,n);break;case 21:Vs(t,e,n);break;case 22:n.mode&1?(Jn=(r=Jn)||n.memoizedState!==null,Vs(t,e,n),Jn=r):Vs(t,e,n);break;default:Vs(t,e,n)}}function RE(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new uO),e.forEach(function(r){var i=yO.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function fi(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,a=e,c=a;e:for(;c!==null;){switch(c.tag){case 5:Ln=c.stateNode,mi=!1;break e;case 3:Ln=c.stateNode.containerInfo,mi=!0;break e;case 4:Ln=c.stateNode.containerInfo,mi=!0;break e}c=c.return}if(Ln===null)throw Error(ye(160));CC(s,a,i),Ln=null,mi=!1;var h=i.alternate;h!==null&&(h.return=null),i.return=null}catch(g){en(i,e,g)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)AC(e,t),e=e.sibling}function AC(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(fi(e,t),Ri(t),r&4){try{wc(3,t,t.return),Fg(3,t)}catch(U){en(t,t.return,U)}try{wc(5,t,t.return)}catch(U){en(t,t.return,U)}}break;case 1:fi(e,t),Ri(t),r&512&&n!==null&&xl(n,n.return);break;case 5:if(fi(e,t),Ri(t),r&512&&n!==null&&xl(n,n.return),t.flags&32){var i=t.stateNode;try{Mc(i,"")}catch(U){en(t,t.return,U)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=n!==null?n.memoizedProps:s,c=t.type,h=t.updateQueue;if(t.updateQueue=null,h!==null)try{c==="input"&&s.type==="radio"&&s.name!=null&&K1(i,s),S_(c,a);var g=S_(c,s);for(a=0;a<h.length;a+=2){var _=h[a],w=h[a+1];_==="style"?Z1(i,w):_==="dangerouslySetInnerHTML"?X1(i,w):_==="children"?Mc(i,w):wy(i,_,w,g)}switch(c){case"input":y_(i,s);break;case"textarea":Q1(i,s);break;case"select":var T=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var E=s.value;E!=null?Rl(i,!!s.multiple,E,!1):T!==!!s.multiple&&(s.defaultValue!=null?Rl(i,!!s.multiple,s.defaultValue,!0):Rl(i,!!s.multiple,s.multiple?[]:"",!1))}i[qc]=s}catch(U){en(t,t.return,U)}}break;case 6:if(fi(e,t),Ri(t),r&4){if(t.stateNode===null)throw Error(ye(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(U){en(t,t.return,U)}}break;case 3:if(fi(e,t),Ri(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Bc(e.containerInfo)}catch(U){en(t,t.return,U)}break;case 4:fi(e,t),Ri(t);break;case 13:fi(e,t),Ri(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Zy=hn())),r&4&&RE(t);break;case 22:if(_=n!==null&&n.memoizedState!==null,t.mode&1?(Jn=(g=Jn)||_,fi(e,t),Jn=g):fi(e,t),Ri(t),r&8192){if(g=t.memoizedState!==null,(t.stateNode.isHidden=g)&&!_&&t.mode&1)for(Ve=t,_=t.child;_!==null;){for(w=Ve=_;Ve!==null;){switch(T=Ve,E=T.child,T.tag){case 0:case 11:case 14:case 15:wc(4,T,T.return);break;case 1:xl(T,T.return);var $=T.stateNode;if(typeof $.componentWillUnmount=="function"){r=T,n=T.return;try{e=r,$.props=e.memoizedProps,$.state=e.memoizedState,$.componentWillUnmount()}catch(U){en(r,n,U)}}break;case 5:xl(T,T.return);break;case 22:if(T.memoizedState!==null){NE(w);continue}}E!==null?(E.return=T,Ve=E):NE(w)}_=_.sibling}e:for(_=null,w=t;;){if(w.tag===5){if(_===null){_=w;try{i=w.stateNode,g?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(c=w.stateNode,h=w.memoizedProps.style,a=h!=null&&h.hasOwnProperty("display")?h.display:null,c.style.display=J1("display",a))}catch(U){en(t,t.return,U)}}}else if(w.tag===6){if(_===null)try{w.stateNode.nodeValue=g?"":w.memoizedProps}catch(U){en(t,t.return,U)}}else if((w.tag!==22&&w.tag!==23||w.memoizedState===null||w===t)&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===t)break e;for(;w.sibling===null;){if(w.return===null||w.return===t)break e;_===w&&(_=null),w=w.return}_===w&&(_=null),w.sibling.return=w.return,w=w.sibling}}break;case 19:fi(e,t),Ri(t),r&4&&RE(t);break;case 21:break;default:fi(e,t),Ri(t)}}function Ri(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(xC(n)){var r=n;break e}n=n.return}throw Error(ye(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Mc(i,""),r.flags&=-33);var s=bE(t);ev(t,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,c=bE(t);Z_(t,c,a);break;default:throw Error(ye(161))}}catch(h){en(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function hO(t,e,n){Ve=t,PC(t)}function PC(t,e,n){for(var r=(t.mode&1)!==0;Ve!==null;){var i=Ve,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||kd;if(!a){var c=i.alternate,h=c!==null&&c.memoizedState!==null||Jn;c=kd;var g=Jn;if(kd=a,(Jn=h)&&!g)for(Ve=i;Ve!==null;)a=Ve,h=a.child,a.tag===22&&a.memoizedState!==null?DE(i):h!==null?(h.return=a,Ve=h):DE(i);for(;s!==null;)Ve=s,PC(s),s=s.sibling;Ve=i,kd=c,Jn=g}kE(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Ve=s):kE(t)}}function kE(t){for(;Ve!==null;){var e=Ve;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Jn||Fg(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Jn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:gi(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&gE(e,s,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}gE(e,a,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var h=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&n.focus();break;case"img":h.src&&(n.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var g=e.alternate;if(g!==null){var _=g.memoizedState;if(_!==null){var w=_.dehydrated;w!==null&&Bc(w)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ye(163))}Jn||e.flags&512&&J_(e)}catch(T){en(e,e.return,T)}}if(e===t){Ve=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ve=n;break}Ve=e.return}}function NE(t){for(;Ve!==null;){var e=Ve;if(e===t){Ve=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ve=n;break}Ve=e.return}}function DE(t){for(;Ve!==null;){var e=Ve;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Fg(4,e)}catch(h){en(e,n,h)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(h){en(e,i,h)}}var s=e.return;try{J_(e)}catch(h){en(e,s,h)}break;case 5:var a=e.return;try{J_(e)}catch(h){en(e,a,h)}}}catch(h){en(e,e.return,h)}if(e===t){Ve=null;break}var c=e.sibling;if(c!==null){c.return=e.return,Ve=c;break}Ve=e.return}}var dO=Math.ceil,Gf=bs.ReactCurrentDispatcher,Xy=bs.ReactCurrentOwner,ri=bs.ReactCurrentBatchConfig,vt=0,Pn=null,_n=null,jn=0,Or=0,Cl=bo(0),yn=0,Yc=null,Ta=0,Bg=0,Jy=0,Ic=null,Sr=null,Zy=0,Yl=1/0,ls=null,Wf=!1,tv=null,oo=null,Nd=!1,Ys=null,Kf=0,Ec=0,nv=null,of=-1,af=0;function hr(){return vt&6?hn():of!==-1?of:of=hn()}function ao(t){return t.mode&1?vt&2&&jn!==0?jn&-jn:QD.transition!==null?(af===0&&(af=hx()),af):(t=Ct,t!==0||(t=window.event,t=t===void 0?16:vx(t.type)),t):1}function Ei(t,e,n,r){if(50<Ec)throw Ec=0,nv=null,Error(ye(185));kh(t,n,r),(!(vt&2)||t!==Pn)&&(t===Pn&&(!(vt&2)&&(Bg|=n),yn===4&&Hs(t,jn)),Nr(t,r),n===1&&vt===0&&!(e.mode&1)&&(Yl=hn()+500,Mg&&Ro()))}function Nr(t,e){var n=t.callbackNode;QN(t,e);var r=kf(t,t===Pn?jn:0);if(r===0)n!==null&&zI(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&zI(n),e===1)t.tag===0?KD(OE.bind(null,t)):Vx(OE.bind(null,t)),qD(function(){!(vt&6)&&Ro()}),n=null;else{switch(dx(r)){case 1:n=xy;break;case 4:n=ux;break;case 16:n=Rf;break;case 536870912:n=cx;break;default:n=Rf}n=LC(n,bC.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function bC(t,e){if(of=-1,af=0,vt&6)throw Error(ye(327));var n=t.callbackNode;if(Ml()&&t.callbackNode!==n)return null;var r=kf(t,t===Pn?jn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Qf(t,r);else{e=r;var i=vt;vt|=2;var s=kC();(Pn!==t||jn!==e)&&(ls=null,Yl=hn()+500,ga(t,e));do try{mO();break}catch(c){RC(t,c)}while(!0);Fy(),Gf.current=s,vt=i,_n!==null?e=0:(Pn=null,jn=0,e=yn)}if(e!==0){if(e===2&&(i=b_(t),i!==0&&(r=i,e=rv(t,i))),e===1)throw n=Yc,ga(t,0),Hs(t,r),Nr(t,hn()),n;if(e===6)Hs(t,r);else{if(i=t.current.alternate,!(r&30)&&!fO(i)&&(e=Qf(t,r),e===2&&(s=b_(t),s!==0&&(r=s,e=rv(t,s))),e===1))throw n=Yc,ga(t,0),Hs(t,r),Nr(t,hn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(ye(345));case 2:Yo(t,Sr,ls);break;case 3:if(Hs(t,r),(r&130023424)===r&&(e=Zy+500-hn(),10<e)){if(kf(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){hr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=V_(Yo.bind(null,t,Sr,ls),e);break}Yo(t,Sr,ls);break;case 4:if(Hs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-Ii(r);s=1<<a,a=e[a],a>i&&(i=a),r&=~s}if(r=i,r=hn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*dO(r/1960))-r,10<r){t.timeoutHandle=V_(Yo.bind(null,t,Sr,ls),r);break}Yo(t,Sr,ls);break;case 5:Yo(t,Sr,ls);break;default:throw Error(ye(329))}}}return Nr(t,hn()),t.callbackNode===n?bC.bind(null,t):null}function rv(t,e){var n=Ic;return t.current.memoizedState.isDehydrated&&(ga(t,e).flags|=256),t=Qf(t,e),t!==2&&(e=Sr,Sr=n,e!==null&&iv(e)),t}function iv(t){Sr===null?Sr=t:Sr.push.apply(Sr,t)}function fO(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Si(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Hs(t,e){for(e&=~Jy,e&=~Bg,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ii(e),r=1<<n;t[n]=-1,e&=~r}}function OE(t){if(vt&6)throw Error(ye(327));Ml();var e=kf(t,0);if(!(e&1))return Nr(t,hn()),null;var n=Qf(t,e);if(t.tag!==0&&n===2){var r=b_(t);r!==0&&(e=r,n=rv(t,r))}if(n===1)throw n=Yc,ga(t,0),Hs(t,e),Nr(t,hn()),n;if(n===6)throw Error(ye(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Yo(t,Sr,ls),Nr(t,hn()),null}function e0(t,e){var n=vt;vt|=1;try{return t(e)}finally{vt=n,vt===0&&(Yl=hn()+500,Mg&&Ro())}}function Sa(t){Ys!==null&&Ys.tag===0&&!(vt&6)&&Ml();var e=vt;vt|=1;var n=ri.transition,r=Ct;try{if(ri.transition=null,Ct=1,t)return t()}finally{Ct=r,ri.transition=n,vt=e,!(vt&6)&&Ro()}}function t0(){Or=Cl.current,Ut(Cl)}function ga(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,$D(n)),_n!==null)for(n=_n.return;n!==null;){var r=n;switch(My(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Lf();break;case 3:Kl(),Ut(Rr),Ut(tr),qy();break;case 5:$y(r);break;case 4:Kl();break;case 13:Ut(Kt);break;case 19:Ut(Kt);break;case 10:By(r.type._context);break;case 22:case 23:t0()}n=n.return}if(Pn=t,_n=t=lo(t.current,null),jn=Or=e,yn=0,Yc=null,Jy=Bg=Ta=0,Sr=Ic=null,oa!==null){for(e=0;e<oa.length;e++)if(n=oa[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}oa=null}return t}function RC(t,e){do{var n=_n;try{if(Fy(),nf.current=Hf,qf){for(var r=Qt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}qf=!1}if(Ea=0,Cn=vn=Qt=null,yc=!1,Wc=0,Xy.current=null,n===null||n.return===null){yn=1,Yc=e,_n=null;break}e:{var s=t,a=n.return,c=n,h=e;if(e=jn,c.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var g=h,_=c,w=_.tag;if(!(_.mode&1)&&(w===0||w===11||w===15)){var T=_.alternate;T?(_.updateQueue=T.updateQueue,_.memoizedState=T.memoizedState,_.lanes=T.lanes):(_.updateQueue=null,_.memoizedState=null)}var E=IE(a);if(E!==null){E.flags&=-257,EE(E,a,c,s,e),E.mode&1&&wE(s,g,e),e=E,h=g;var $=e.updateQueue;if($===null){var U=new Set;U.add(h),e.updateQueue=U}else $.add(h);break e}else{if(!(e&1)){wE(s,g,e),n0();break e}h=Error(ye(426))}}else if(qt&&c.mode&1){var J=IE(a);if(J!==null){!(J.flags&65536)&&(J.flags|=256),EE(J,a,c,s,e),Ly(Ql(h,c));break e}}s=h=Ql(h,c),yn!==4&&(yn=2),Ic===null?Ic=[s]:Ic.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var V=fC(s,h,e);fE(s,V);break e;case 1:c=h;var B=s.type,j=s.stateNode;if(!(s.flags&128)&&(typeof B.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(oo===null||!oo.has(j)))){s.flags|=65536,e&=-e,s.lanes|=e;var Z=gC(s,c,e);fE(s,Z);break e}}s=s.return}while(s!==null)}DC(n)}catch(ne){e=ne,_n===n&&n!==null&&(_n=n=n.return);continue}break}while(!0)}function kC(){var t=Gf.current;return Gf.current=Hf,t===null?Hf:t}function n0(){(yn===0||yn===3||yn===2)&&(yn=4),Pn===null||!(Ta&268435455)&&!(Bg&268435455)||Hs(Pn,jn)}function Qf(t,e){var n=vt;vt|=2;var r=kC();(Pn!==t||jn!==e)&&(ls=null,ga(t,e));do try{gO();break}catch(i){RC(t,i)}while(!0);if(Fy(),vt=n,Gf.current=r,_n!==null)throw Error(ye(261));return Pn=null,jn=0,yn}function gO(){for(;_n!==null;)NC(_n)}function mO(){for(;_n!==null&&!jN();)NC(_n)}function NC(t){var e=MC(t.alternate,t,Or);t.memoizedProps=t.pendingProps,e===null?DC(t):_n=e,Xy.current=null}function DC(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=lO(n,e),n!==null){n.flags&=32767,_n=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{yn=6,_n=null;return}}else if(n=aO(n,e,Or),n!==null){_n=n;return}if(e=e.sibling,e!==null){_n=e;return}_n=e=t}while(e!==null);yn===0&&(yn=5)}function Yo(t,e,n){var r=Ct,i=ri.transition;try{ri.transition=null,Ct=1,pO(t,e,n,r)}finally{ri.transition=i,Ct=r}return null}function pO(t,e,n,r){do Ml();while(Ys!==null);if(vt&6)throw Error(ye(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ye(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(YN(t,s),t===Pn&&(_n=Pn=null,jn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Nd||(Nd=!0,LC(Rf,function(){return Ml(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=ri.transition,ri.transition=null;var a=Ct;Ct=1;var c=vt;vt|=4,Xy.current=null,cO(t,n),AC(n,t),LD(M_),Nf=!!O_,M_=O_=null,t.current=n,hO(n),UN(),vt=c,Ct=a,ri.transition=s}else t.current=n;if(Nd&&(Nd=!1,Ys=t,Kf=i),s=t.pendingLanes,s===0&&(oo=null),qN(n.stateNode),Nr(t,hn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Wf)throw Wf=!1,t=tv,tv=null,t;return Kf&1&&t.tag!==0&&Ml(),s=t.pendingLanes,s&1?t===nv?Ec++:(Ec=0,nv=t):Ec=0,Ro(),null}function Ml(){if(Ys!==null){var t=dx(Kf),e=ri.transition,n=Ct;try{if(ri.transition=null,Ct=16>t?16:t,Ys===null)var r=!1;else{if(t=Ys,Ys=null,Kf=0,vt&6)throw Error(ye(331));var i=vt;for(vt|=4,Ve=t.current;Ve!==null;){var s=Ve,a=s.child;if(Ve.flags&16){var c=s.deletions;if(c!==null){for(var h=0;h<c.length;h++){var g=c[h];for(Ve=g;Ve!==null;){var _=Ve;switch(_.tag){case 0:case 11:case 15:wc(8,_,s)}var w=_.child;if(w!==null)w.return=_,Ve=w;else for(;Ve!==null;){_=Ve;var T=_.sibling,E=_.return;if(SC(_),_===g){Ve=null;break}if(T!==null){T.return=E,Ve=T;break}Ve=E}}}var $=s.alternate;if($!==null){var U=$.child;if(U!==null){$.child=null;do{var J=U.sibling;U.sibling=null,U=J}while(U!==null)}}Ve=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,Ve=a;else e:for(;Ve!==null;){if(s=Ve,s.flags&2048)switch(s.tag){case 0:case 11:case 15:wc(9,s,s.return)}var V=s.sibling;if(V!==null){V.return=s.return,Ve=V;break e}Ve=s.return}}var B=t.current;for(Ve=B;Ve!==null;){a=Ve;var j=a.child;if(a.subtreeFlags&2064&&j!==null)j.return=a,Ve=j;else e:for(a=B;Ve!==null;){if(c=Ve,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Fg(9,c)}}catch(ne){en(c,c.return,ne)}if(c===a){Ve=null;break e}var Z=c.sibling;if(Z!==null){Z.return=c.return,Ve=Z;break e}Ve=c.return}}if(vt=i,Ro(),Wi&&typeof Wi.onPostCommitFiberRoot=="function")try{Wi.onPostCommitFiberRoot(Rg,t)}catch{}r=!0}return r}finally{Ct=n,ri.transition=e}}return!1}function ME(t,e,n){e=Ql(n,e),e=fC(t,e,1),t=so(t,e,1),e=hr(),t!==null&&(kh(t,1,e),Nr(t,e))}function en(t,e,n){if(t.tag===3)ME(t,t,n);else for(;e!==null;){if(e.tag===3){ME(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(oo===null||!oo.has(r))){t=Ql(n,t),t=gC(e,t,1),e=so(e,t,1),t=hr(),e!==null&&(kh(e,1,t),Nr(e,t));break}}e=e.return}}function _O(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=hr(),t.pingedLanes|=t.suspendedLanes&n,Pn===t&&(jn&n)===n&&(yn===4||yn===3&&(jn&130023424)===jn&&500>hn()-Zy?ga(t,0):Jy|=n),Nr(t,e)}function OC(t,e){e===0&&(t.mode&1?(e=Ed,Ed<<=1,!(Ed&130023424)&&(Ed=4194304)):e=1);var n=hr();t=Ts(t,e),t!==null&&(kh(t,e,n),Nr(t,n))}function vO(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),OC(t,n)}function yO(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ye(314))}r!==null&&r.delete(e),OC(t,n)}var MC;MC=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Rr.current)xr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return xr=!1,oO(t,e,n);xr=!!(t.flags&131072)}else xr=!1,qt&&e.flags&1048576&&Fx(e,Bf,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;sf(t,e),t=e.pendingProps;var i=Hl(e,tr.current);Ol(e,n),i=Gy(null,e,r,t,i,n);var s=Wy();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,kr(r)?(s=!0,Vf(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Uy(e),i.updater=Lg,e.stateNode=i,i._reactInternals=e,q_(e,r,t,n),e=W_(null,e,r,!0,s,n)):(e.tag=0,qt&&s&&Oy(e),sr(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(sf(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=IO(r),t=gi(r,t),i){case 0:e=G_(null,e,r,t,n);break e;case 1:e=xE(null,e,r,t,n);break e;case 11:e=TE(null,e,r,t,n);break e;case 14:e=SE(null,e,r,gi(r.type,t),n);break e}throw Error(ye(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:gi(r,i),G_(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:gi(r,i),xE(t,e,r,i,n);case 3:e:{if(vC(e),t===null)throw Error(ye(387));r=e.pendingProps,s=e.memoizedState,i=s.element,zx(t,e),zf(e,r,null,n);var a=e.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ql(Error(ye(423)),e),e=CE(t,e,r,n,i);break e}else if(r!==i){i=Ql(Error(ye(424)),e),e=CE(t,e,r,n,i);break e}else for(Fr=io(e.stateNode.containerInfo.firstChild),jr=e,qt=!0,pi=null,n=Gx(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Gl(),r===i){e=Ss(t,e,n);break e}sr(t,e,r,n)}e=e.child}return e;case 5:return Wx(e),t===null&&U_(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,L_(r,i)?a=null:s!==null&&L_(r,s)&&(e.flags|=32),_C(t,e),sr(t,e,a,n),e.child;case 6:return t===null&&U_(e),null;case 13:return yC(t,e,n);case 4:return zy(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Wl(e,null,r,n):sr(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:gi(r,i),TE(t,e,r,i,n);case 7:return sr(t,e,e.pendingProps,n),e.child;case 8:return sr(t,e,e.pendingProps.children,n),e.child;case 12:return sr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,Dt(jf,r._currentValue),r._currentValue=a,s!==null)if(Si(s.value,a)){if(s.children===i.children&&!Rr.current){e=Ss(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var c=s.dependencies;if(c!==null){a=s.child;for(var h=c.firstContext;h!==null;){if(h.context===r){if(s.tag===1){h=vs(-1,n&-n),h.tag=2;var g=s.updateQueue;if(g!==null){g=g.shared;var _=g.pending;_===null?h.next=h:(h.next=_.next,_.next=h),g.pending=h}}s.lanes|=n,h=s.alternate,h!==null&&(h.lanes|=n),z_(s.return,n,e),c.lanes|=n;break}h=h.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(ye(341));a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),z_(a,n,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}sr(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ol(e,n),i=ii(i),r=r(i),e.flags|=1,sr(t,e,r,n),e.child;case 14:return r=e.type,i=gi(r,e.pendingProps),i=gi(r.type,i),SE(t,e,r,i,n);case 15:return mC(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:gi(r,i),sf(t,e),e.tag=1,kr(r)?(t=!0,Vf(e)):t=!1,Ol(e,n),qx(e,r,i),q_(e,r,i,n),W_(null,e,r,!0,t,n);case 19:return wC(t,e,n);case 22:return pC(t,e,n)}throw Error(ye(156,e.tag))};function LC(t,e){return lx(t,e)}function wO(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ti(t,e,n,r){return new wO(t,e,n,r)}function r0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function IO(t){if(typeof t=="function")return r0(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ey)return 11;if(t===Ty)return 14}return 2}function lo(t,e){var n=t.alternate;return n===null?(n=ti(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function lf(t,e,n,r,i,s){var a=2;if(r=t,typeof t=="function")r0(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case pl:return ma(n.children,i,s,e);case Iy:a=8,i|=8;break;case g_:return t=ti(12,n,e,i|2),t.elementType=g_,t.lanes=s,t;case m_:return t=ti(13,n,e,i),t.elementType=m_,t.lanes=s,t;case p_:return t=ti(19,n,e,i),t.elementType=p_,t.lanes=s,t;case H1:return jg(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case $1:a=10;break e;case q1:a=9;break e;case Ey:a=11;break e;case Ty:a=14;break e;case zs:a=16,r=null;break e}throw Error(ye(130,t==null?t:typeof t,""))}return e=ti(a,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ma(t,e,n,r){return t=ti(7,t,r,e),t.lanes=n,t}function jg(t,e,n,r){return t=ti(22,t,r,e),t.elementType=H1,t.lanes=n,t.stateNode={isHidden:!1},t}function Tp(t,e,n){return t=ti(6,t,null,e),t.lanes=n,t}function Sp(t,e,n){return e=ti(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function EO(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ip(0),this.expirationTimes=ip(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ip(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function i0(t,e,n,r,i,s,a,c,h){return t=new EO(t,e,n,c,h),e===1?(e=1,s===!0&&(e|=8)):e=0,s=ti(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Uy(s),t}function TO(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ml,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function VC(t){if(!t)return go;t=t._reactInternals;e:{if(ja(t)!==t||t.tag!==1)throw Error(ye(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(kr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ye(171))}if(t.tag===1){var n=t.type;if(kr(n))return Lx(t,n,e)}return e}function FC(t,e,n,r,i,s,a,c,h){return t=i0(n,r,!0,t,i,s,a,c,h),t.context=VC(null),n=t.current,r=hr(),i=ao(n),s=vs(r,i),s.callback=e??null,so(n,s,i),t.current.lanes=i,kh(t,i,r),Nr(t,r),t}function Ug(t,e,n,r){var i=e.current,s=hr(),a=ao(i);return n=VC(n),e.context===null?e.context=n:e.pendingContext=n,e=vs(s,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=so(i,e,a),t!==null&&(Ei(t,i,a,s),tf(t,i,a)),a}function Yf(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function LE(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function s0(t,e){LE(t,e),(t=t.alternate)&&LE(t,e)}function SO(){return null}var BC=typeof reportError=="function"?reportError:function(t){console.error(t)};function o0(t){this._internalRoot=t}zg.prototype.render=o0.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ye(409));Ug(t,e,null,null)};zg.prototype.unmount=o0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Sa(function(){Ug(null,t,null,null)}),e[Es]=null}};function zg(t){this._internalRoot=t}zg.prototype.unstable_scheduleHydration=function(t){if(t){var e=mx();t={blockedOn:null,target:t,priority:e};for(var n=0;n<qs.length&&e!==0&&e<qs[n].priority;n++);qs.splice(n,0,t),n===0&&_x(t)}};function a0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function $g(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function VE(){}function xO(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var g=Yf(a);s.call(g)}}var a=FC(e,r,t,0,null,!1,!1,"",VE);return t._reactRootContainer=a,t[Es]=a.current,zc(t.nodeType===8?t.parentNode:t),Sa(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var c=r;r=function(){var g=Yf(h);c.call(g)}}var h=i0(t,0,!1,null,null,!1,!1,"",VE);return t._reactRootContainer=h,t[Es]=h.current,zc(t.nodeType===8?t.parentNode:t),Sa(function(){Ug(e,h,n,r)}),h}function qg(t,e,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var c=i;i=function(){var h=Yf(a);c.call(h)}}Ug(e,a,t,i)}else a=xO(n,e,t,i,r);return Yf(a)}fx=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=nc(e.pendingLanes);n!==0&&(Cy(e,n|1),Nr(e,hn()),!(vt&6)&&(Yl=hn()+500,Ro()))}break;case 13:Sa(function(){var r=Ts(t,1);if(r!==null){var i=hr();Ei(r,t,1,i)}}),s0(t,1)}};Ay=function(t){if(t.tag===13){var e=Ts(t,134217728);if(e!==null){var n=hr();Ei(e,t,134217728,n)}s0(t,134217728)}};gx=function(t){if(t.tag===13){var e=ao(t),n=Ts(t,e);if(n!==null){var r=hr();Ei(n,t,e,r)}s0(t,e)}};mx=function(){return Ct};px=function(t,e){var n=Ct;try{return Ct=t,e()}finally{Ct=n}};C_=function(t,e,n){switch(e){case"input":if(y_(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Og(r);if(!i)throw Error(ye(90));W1(r),y_(r,i)}}}break;case"textarea":Q1(t,n);break;case"select":e=n.value,e!=null&&Rl(t,!!n.multiple,e,!1)}};nx=e0;rx=Sa;var CO={usingClientEntryPoint:!1,Events:[Dh,wl,Og,ex,tx,e0]},ju={findFiberByHostInstance:sa,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},AO={bundleType:ju.bundleType,version:ju.version,rendererPackageName:ju.rendererPackageName,rendererConfig:ju.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:bs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ox(t),t===null?null:t.stateNode},findFiberByHostInstance:ju.findFiberByHostInstance||SO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dd.isDisabled&&Dd.supportsFiber)try{Rg=Dd.inject(AO),Wi=Dd}catch{}}Hr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=CO;Hr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!a0(e))throw Error(ye(200));return TO(t,e,null,n)};Hr.createRoot=function(t,e){if(!a0(t))throw Error(ye(299));var n=!1,r="",i=BC;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=i0(t,1,!1,null,null,n,!1,r,i),t[Es]=e.current,zc(t.nodeType===8?t.parentNode:t),new o0(e)};Hr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ye(188)):(t=Object.keys(t).join(","),Error(ye(268,t)));return t=ox(e),t=t===null?null:t.stateNode,t};Hr.flushSync=function(t){return Sa(t)};Hr.hydrate=function(t,e,n){if(!$g(e))throw Error(ye(200));return qg(null,t,e,!0,n)};Hr.hydrateRoot=function(t,e,n){if(!a0(t))throw Error(ye(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=BC;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=FC(e,null,t,1,n??null,i,!1,s,a),t[Es]=e.current,zc(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new zg(e)};Hr.render=function(t,e,n){if(!$g(e))throw Error(ye(200));return qg(null,t,e,!1,n)};Hr.unmountComponentAtNode=function(t){if(!$g(t))throw Error(ye(40));return t._reactRootContainer?(Sa(function(){qg(null,null,t,!1,function(){t._reactRootContainer=null,t[Es]=null})}),!0):!1};Hr.unstable_batchedUpdates=e0;Hr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!$g(n))throw Error(ye(200));if(t==null||t._reactInternals===void 0)throw Error(ye(38));return qg(t,e,n,!1,r)};Hr.version="18.2.0-next-9e3b772b8-20220608";function jC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(jC)}catch(t){console.error(t)}}jC(),F1.exports=Hr;var l0=F1.exports,FE=l0;d_.createRoot=FE.createRoot,d_.hydrateRoot=FE.hydrateRoot;var sv=function(t,e){return sv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},sv(t,e)};function ai(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");sv(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Fe=function(){return Fe=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Fe.apply(this,arguments)};function xs(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Oi(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var UC={exports:{}},Pt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kn=typeof Symbol=="function"&&Symbol.for,u0=kn?Symbol.for("react.element"):60103,c0=kn?Symbol.for("react.portal"):60106,Hg=kn?Symbol.for("react.fragment"):60107,Gg=kn?Symbol.for("react.strict_mode"):60108,Wg=kn?Symbol.for("react.profiler"):60114,Kg=kn?Symbol.for("react.provider"):60109,Qg=kn?Symbol.for("react.context"):60110,h0=kn?Symbol.for("react.async_mode"):60111,Yg=kn?Symbol.for("react.concurrent_mode"):60111,Xg=kn?Symbol.for("react.forward_ref"):60112,Jg=kn?Symbol.for("react.suspense"):60113,PO=kn?Symbol.for("react.suspense_list"):60120,Zg=kn?Symbol.for("react.memo"):60115,em=kn?Symbol.for("react.lazy"):60116,bO=kn?Symbol.for("react.block"):60121,RO=kn?Symbol.for("react.fundamental"):60117,kO=kn?Symbol.for("react.responder"):60118,NO=kn?Symbol.for("react.scope"):60119;function Wr(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case u0:switch(t=t.type,t){case h0:case Yg:case Hg:case Wg:case Gg:case Jg:return t;default:switch(t=t&&t.$$typeof,t){case Qg:case Xg:case em:case Zg:case Kg:return t;default:return e}}case c0:return e}}}function zC(t){return Wr(t)===Yg}Pt.AsyncMode=h0;Pt.ConcurrentMode=Yg;Pt.ContextConsumer=Qg;Pt.ContextProvider=Kg;Pt.Element=u0;Pt.ForwardRef=Xg;Pt.Fragment=Hg;Pt.Lazy=em;Pt.Memo=Zg;Pt.Portal=c0;Pt.Profiler=Wg;Pt.StrictMode=Gg;Pt.Suspense=Jg;Pt.isAsyncMode=function(t){return zC(t)||Wr(t)===h0};Pt.isConcurrentMode=zC;Pt.isContextConsumer=function(t){return Wr(t)===Qg};Pt.isContextProvider=function(t){return Wr(t)===Kg};Pt.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===u0};Pt.isForwardRef=function(t){return Wr(t)===Xg};Pt.isFragment=function(t){return Wr(t)===Hg};Pt.isLazy=function(t){return Wr(t)===em};Pt.isMemo=function(t){return Wr(t)===Zg};Pt.isPortal=function(t){return Wr(t)===c0};Pt.isProfiler=function(t){return Wr(t)===Wg};Pt.isStrictMode=function(t){return Wr(t)===Gg};Pt.isSuspense=function(t){return Wr(t)===Jg};Pt.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Hg||t===Yg||t===Wg||t===Gg||t===Jg||t===PO||typeof t=="object"&&t!==null&&(t.$$typeof===em||t.$$typeof===Zg||t.$$typeof===Kg||t.$$typeof===Qg||t.$$typeof===Xg||t.$$typeof===RO||t.$$typeof===kO||t.$$typeof===NO||t.$$typeof===bO)};Pt.typeOf=Wr;UC.exports=Pt;var DO=UC.exports,$C=DO,OO={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},MO={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},qC={};qC[$C.ForwardRef]=OO;qC[$C.Memo]=MO;function HC(t,e,n){if(n===void 0&&(n=Error),!t)throw new n(e)}var dt;(function(t){t[t.EXPECT_ARGUMENT_CLOSING_BRACE=1]="EXPECT_ARGUMENT_CLOSING_BRACE",t[t.EMPTY_ARGUMENT=2]="EMPTY_ARGUMENT",t[t.MALFORMED_ARGUMENT=3]="MALFORMED_ARGUMENT",t[t.EXPECT_ARGUMENT_TYPE=4]="EXPECT_ARGUMENT_TYPE",t[t.INVALID_ARGUMENT_TYPE=5]="INVALID_ARGUMENT_TYPE",t[t.EXPECT_ARGUMENT_STYLE=6]="EXPECT_ARGUMENT_STYLE",t[t.INVALID_NUMBER_SKELETON=7]="INVALID_NUMBER_SKELETON",t[t.INVALID_DATE_TIME_SKELETON=8]="INVALID_DATE_TIME_SKELETON",t[t.EXPECT_NUMBER_SKELETON=9]="EXPECT_NUMBER_SKELETON",t[t.EXPECT_DATE_TIME_SKELETON=10]="EXPECT_DATE_TIME_SKELETON",t[t.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE=11]="UNCLOSED_QUOTE_IN_ARGUMENT_STYLE",t[t.EXPECT_SELECT_ARGUMENT_OPTIONS=12]="EXPECT_SELECT_ARGUMENT_OPTIONS",t[t.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE=13]="EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE",t[t.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE=14]="INVALID_PLURAL_ARGUMENT_OFFSET_VALUE",t[t.EXPECT_SELECT_ARGUMENT_SELECTOR=15]="EXPECT_SELECT_ARGUMENT_SELECTOR",t[t.EXPECT_PLURAL_ARGUMENT_SELECTOR=16]="EXPECT_PLURAL_ARGUMENT_SELECTOR",t[t.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT=17]="EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT",t[t.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT=18]="EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT",t[t.INVALID_PLURAL_ARGUMENT_SELECTOR=19]="INVALID_PLURAL_ARGUMENT_SELECTOR",t[t.DUPLICATE_PLURAL_ARGUMENT_SELECTOR=20]="DUPLICATE_PLURAL_ARGUMENT_SELECTOR",t[t.DUPLICATE_SELECT_ARGUMENT_SELECTOR=21]="DUPLICATE_SELECT_ARGUMENT_SELECTOR",t[t.MISSING_OTHER_CLAUSE=22]="MISSING_OTHER_CLAUSE",t[t.INVALID_TAG=23]="INVALID_TAG",t[t.INVALID_TAG_NAME=25]="INVALID_TAG_NAME",t[t.UNMATCHED_CLOSING_TAG=26]="UNMATCHED_CLOSING_TAG",t[t.UNCLOSED_TAG=27]="UNCLOSED_TAG"})(dt||(dt={}));var Vt;(function(t){t[t.literal=0]="literal",t[t.argument=1]="argument",t[t.number=2]="number",t[t.date=3]="date",t[t.time=4]="time",t[t.select=5]="select",t[t.plural=6]="plural",t[t.pound=7]="pound",t[t.tag=8]="tag"})(Vt||(Vt={}));var Xl;(function(t){t[t.number=0]="number",t[t.dateTime=1]="dateTime"})(Xl||(Xl={}));function BE(t){return t.type===Vt.literal}function LO(t){return t.type===Vt.argument}function GC(t){return t.type===Vt.number}function WC(t){return t.type===Vt.date}function KC(t){return t.type===Vt.time}function QC(t){return t.type===Vt.select}function YC(t){return t.type===Vt.plural}function VO(t){return t.type===Vt.pound}function XC(t){return t.type===Vt.tag}function JC(t){return!!(t&&typeof t=="object"&&t.type===Xl.number)}function ov(t){return!!(t&&typeof t=="object"&&t.type===Xl.dateTime)}var ZC=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,FO=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;function BO(t){var e={};return t.replace(FO,function(n){var r=n.length;switch(n[0]){case"G":e.era=r===4?"long":r===5?"narrow":"short";break;case"y":e.year=r===2?"2-digit":"numeric";break;case"Y":case"u":case"U":case"r":throw new RangeError("`Y/u/U/r` (year) patterns are not supported, use `y` instead");case"q":case"Q":throw new RangeError("`q/Q` (quarter) patterns are not supported");case"M":case"L":e.month=["numeric","2-digit","short","long","narrow"][r-1];break;case"w":case"W":throw new RangeError("`w/W` (week) patterns are not supported");case"d":e.day=["numeric","2-digit"][r-1];break;case"D":case"F":case"g":throw new RangeError("`D/F/g` (day) patterns are not supported, use `d` instead");case"E":e.weekday=r===4?"long":r===5?"narrow":"short";break;case"e":if(r<4)throw new RangeError("`e..eee` (weekday) patterns are not supported");e.weekday=["short","long","narrow","short"][r-4];break;case"c":if(r<4)throw new RangeError("`c..ccc` (weekday) patterns are not supported");e.weekday=["short","long","narrow","short"][r-4];break;case"a":e.hour12=!0;break;case"b":case"B":throw new RangeError("`b/B` (period) patterns are not supported, use `a` instead");case"h":e.hourCycle="h12",e.hour=["numeric","2-digit"][r-1];break;case"H":e.hourCycle="h23",e.hour=["numeric","2-digit"][r-1];break;case"K":e.hourCycle="h11",e.hour=["numeric","2-digit"][r-1];break;case"k":e.hourCycle="h24",e.hour=["numeric","2-digit"][r-1];break;case"j":case"J":case"C":throw new RangeError("`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead");case"m":e.minute=["numeric","2-digit"][r-1];break;case"s":e.second=["numeric","2-digit"][r-1];break;case"S":case"A":throw new RangeError("`S/A` (second) patterns are not supported, use `s` instead");case"z":e.timeZoneName=r<4?"short":"long";break;case"Z":case"O":case"v":case"V":case"X":case"x":throw new RangeError("`Z/O/v/V/X/x` (timeZone) patterns are not supported, use `z` instead")}return""}),e}var jO=/[\t-\r \x85\u200E\u200F\u2028\u2029]/i;function UO(t){if(t.length===0)throw new Error("Number skeleton cannot be empty");for(var e=t.split(jO).filter(function(T){return T.length>0}),n=[],r=0,i=e;r<i.length;r++){var s=i[r],a=s.split("/");if(a.length===0)throw new Error("Invalid number skeleton");for(var c=a[0],h=a.slice(1),g=0,_=h;g<_.length;g++){var w=_[g];if(w.length===0)throw new Error("Invalid number skeleton")}n.push({stem:c,options:h})}return n}function zO(t){return t.replace(/^(.*?)-/,"")}var jE=/^\.(?:(0+)(\*)?|(#+)|(0+)(#+))$/g,eA=/^(@+)?(\+|#+)?[rs]?$/g,$O=/(\*)(0+)|(#+)(0+)|(0+)/g,tA=/^(0+)$/;function UE(t){var e={};return t[t.length-1]==="r"?e.roundingPriority="morePrecision":t[t.length-1]==="s"&&(e.roundingPriority="lessPrecision"),t.replace(eA,function(n,r,i){return typeof i!="string"?(e.minimumSignificantDigits=r.length,e.maximumSignificantDigits=r.length):i==="+"?e.minimumSignificantDigits=r.length:r[0]==="#"?e.maximumSignificantDigits=r.length:(e.minimumSignificantDigits=r.length,e.maximumSignificantDigits=r.length+(typeof i=="string"?i.length:0)),""}),e}function nA(t){switch(t){case"sign-auto":return{signDisplay:"auto"};case"sign-accounting":case"()":return{currencySign:"accounting"};case"sign-always":case"+!":return{signDisplay:"always"};case"sign-accounting-always":case"()!":return{signDisplay:"always",currencySign:"accounting"};case"sign-except-zero":case"+?":return{signDisplay:"exceptZero"};case"sign-accounting-except-zero":case"()?":return{signDisplay:"exceptZero",currencySign:"accounting"};case"sign-never":case"+_":return{signDisplay:"never"}}}function qO(t){var e;if(t[0]==="E"&&t[1]==="E"?(e={notation:"engineering"},t=t.slice(2)):t[0]==="E"&&(e={notation:"scientific"},t=t.slice(1)),e){var n=t.slice(0,2);if(n==="+!"?(e.signDisplay="always",t=t.slice(2)):n==="+?"&&(e.signDisplay="exceptZero",t=t.slice(2)),!tA.test(t))throw new Error("Malformed concise eng/scientific notation");e.minimumIntegerDigits=t.length}return e}function zE(t){var e={},n=nA(t);return n||e}function HO(t){for(var e={},n=0,r=t;n<r.length;n++){var i=r[n];switch(i.stem){case"percent":case"%":e.style="percent";continue;case"%x100":e.style="percent",e.scale=100;continue;case"currency":e.style="currency",e.currency=i.options[0];continue;case"group-off":case",_":e.useGrouping=!1;continue;case"precision-integer":case".":e.maximumFractionDigits=0;continue;case"measure-unit":case"unit":e.style="unit",e.unit=zO(i.options[0]);continue;case"compact-short":case"K":e.notation="compact",e.compactDisplay="short";continue;case"compact-long":case"KK":e.notation="compact",e.compactDisplay="long";continue;case"scientific":e=Fe(Fe(Fe({},e),{notation:"scientific"}),i.options.reduce(function(h,g){return Fe(Fe({},h),zE(g))},{}));continue;case"engineering":e=Fe(Fe(Fe({},e),{notation:"engineering"}),i.options.reduce(function(h,g){return Fe(Fe({},h),zE(g))},{}));continue;case"notation-simple":e.notation="standard";continue;case"unit-width-narrow":e.currencyDisplay="narrowSymbol",e.unitDisplay="narrow";continue;case"unit-width-short":e.currencyDisplay="code",e.unitDisplay="short";continue;case"unit-width-full-name":e.currencyDisplay="name",e.unitDisplay="long";continue;case"unit-width-iso-code":e.currencyDisplay="symbol";continue;case"scale":e.scale=parseFloat(i.options[0]);continue;case"integer-width":if(i.options.length>1)throw new RangeError("integer-width stems only accept a single optional option");i.options[0].replace($O,function(h,g,_,w,T,E){if(g)e.minimumIntegerDigits=_.length;else{if(w&&T)throw new Error("We currently do not support maximum integer digits");if(E)throw new Error("We currently do not support exact integer digits")}return""});continue}if(tA.test(i.stem)){e.minimumIntegerDigits=i.stem.length;continue}if(jE.test(i.stem)){if(i.options.length>1)throw new RangeError("Fraction-precision stems only accept a single optional option");i.stem.replace(jE,function(h,g,_,w,T,E){return _==="*"?e.minimumFractionDigits=g.length:w&&w[0]==="#"?e.maximumFractionDigits=w.length:T&&E?(e.minimumFractionDigits=T.length,e.maximumFractionDigits=T.length+E.length):(e.minimumFractionDigits=g.length,e.maximumFractionDigits=g.length),""});var s=i.options[0];s==="w"?e=Fe(Fe({},e),{trailingZeroDisplay:"stripIfInteger"}):s&&(e=Fe(Fe({},e),UE(s)));continue}if(eA.test(i.stem)){e=Fe(Fe({},e),UE(i.stem));continue}var a=nA(i.stem);a&&(e=Fe(Fe({},e),a));var c=qO(i.stem);c&&(e=Fe(Fe({},e),c))}return e}var Od={"001":["H","h"],AC:["H","h","hb","hB"],AD:["H","hB"],AE:["h","hB","hb","H"],AF:["H","hb","hB","h"],AG:["h","hb","H","hB"],AI:["H","h","hb","hB"],AL:["h","H","hB"],AM:["H","hB"],AO:["H","hB"],AR:["H","h","hB","hb"],AS:["h","H"],AT:["H","hB"],AU:["h","hb","H","hB"],AW:["H","hB"],AX:["H"],AZ:["H","hB","h"],BA:["H","hB","h"],BB:["h","hb","H","hB"],BD:["h","hB","H"],BE:["H","hB"],BF:["H","hB"],BG:["H","hB","h"],BH:["h","hB","hb","H"],BI:["H","h"],BJ:["H","hB"],BL:["H","hB"],BM:["h","hb","H","hB"],BN:["hb","hB","h","H"],BO:["H","hB","h","hb"],BQ:["H"],BR:["H","hB"],BS:["h","hb","H","hB"],BT:["h","H"],BW:["H","h","hb","hB"],BY:["H","h"],BZ:["H","h","hb","hB"],CA:["h","hb","H","hB"],CC:["H","h","hb","hB"],CD:["hB","H"],CF:["H","h","hB"],CG:["H","hB"],CH:["H","hB","h"],CI:["H","hB"],CK:["H","h","hb","hB"],CL:["H","h","hB","hb"],CM:["H","h","hB"],CN:["H","hB","hb","h"],CO:["h","H","hB","hb"],CP:["H"],CR:["H","h","hB","hb"],CU:["H","h","hB","hb"],CV:["H","hB"],CW:["H","hB"],CX:["H","h","hb","hB"],CY:["h","H","hb","hB"],CZ:["H"],DE:["H","hB"],DG:["H","h","hb","hB"],DJ:["h","H"],DK:["H"],DM:["h","hb","H","hB"],DO:["h","H","hB","hb"],DZ:["h","hB","hb","H"],EA:["H","h","hB","hb"],EC:["H","hB","h","hb"],EE:["H","hB"],EG:["h","hB","hb","H"],EH:["h","hB","hb","H"],ER:["h","H"],ES:["H","hB","h","hb"],ET:["hB","hb","h","H"],FI:["H"],FJ:["h","hb","H","hB"],FK:["H","h","hb","hB"],FM:["h","hb","H","hB"],FO:["H","h"],FR:["H","hB"],GA:["H","hB"],GB:["H","h","hb","hB"],GD:["h","hb","H","hB"],GE:["H","hB","h"],GF:["H","hB"],GG:["H","h","hb","hB"],GH:["h","H"],GI:["H","h","hb","hB"],GL:["H","h"],GM:["h","hb","H","hB"],GN:["H","hB"],GP:["H","hB"],GQ:["H","hB","h","hb"],GR:["h","H","hb","hB"],GT:["H","h","hB","hb"],GU:["h","hb","H","hB"],GW:["H","hB"],GY:["h","hb","H","hB"],HK:["h","hB","hb","H"],HN:["H","h","hB","hb"],HR:["H","hB"],HU:["H","h"],IC:["H","h","hB","hb"],ID:["H"],IE:["H","h","hb","hB"],IL:["H","hB"],IM:["H","h","hb","hB"],IN:["h","H"],IO:["H","h","hb","hB"],IQ:["h","hB","hb","H"],IR:["hB","H"],IS:["H"],IT:["H","hB"],JE:["H","h","hb","hB"],JM:["h","hb","H","hB"],JO:["h","hB","hb","H"],JP:["H","K","h"],KE:["hB","hb","H","h"],KG:["H","h","hB","hb"],KH:["hB","h","H","hb"],KI:["h","hb","H","hB"],KM:["H","h","hB","hb"],KN:["h","hb","H","hB"],KP:["h","H","hB","hb"],KR:["h","H","hB","hb"],KW:["h","hB","hb","H"],KY:["h","hb","H","hB"],KZ:["H","hB"],LA:["H","hb","hB","h"],LB:["h","hB","hb","H"],LC:["h","hb","H","hB"],LI:["H","hB","h"],LK:["H","h","hB","hb"],LR:["h","hb","H","hB"],LS:["h","H"],LT:["H","h","hb","hB"],LU:["H","h","hB"],LV:["H","hB","hb","h"],LY:["h","hB","hb","H"],MA:["H","h","hB","hb"],MC:["H","hB"],MD:["H","hB"],ME:["H","hB","h"],MF:["H","hB"],MG:["H","h"],MH:["h","hb","H","hB"],MK:["H","h","hb","hB"],ML:["H"],MM:["hB","hb","H","h"],MN:["H","h","hb","hB"],MO:["h","hB","hb","H"],MP:["h","hb","H","hB"],MQ:["H","hB"],MR:["h","hB","hb","H"],MS:["H","h","hb","hB"],MT:["H","h"],MU:["H","h"],MV:["H","h"],MW:["h","hb","H","hB"],MX:["H","h","hB","hb"],MY:["hb","hB","h","H"],MZ:["H","hB"],NA:["h","H","hB","hb"],NC:["H","hB"],NE:["H"],NF:["H","h","hb","hB"],NG:["H","h","hb","hB"],NI:["H","h","hB","hb"],NL:["H","hB"],NO:["H","h"],NP:["H","h","hB"],NR:["H","h","hb","hB"],NU:["H","h","hb","hB"],NZ:["h","hb","H","hB"],OM:["h","hB","hb","H"],PA:["h","H","hB","hb"],PE:["H","hB","h","hb"],PF:["H","h","hB"],PG:["h","H"],PH:["h","hB","hb","H"],PK:["h","hB","H"],PL:["H","h"],PM:["H","hB"],PN:["H","h","hb","hB"],PR:["h","H","hB","hb"],PS:["h","hB","hb","H"],PT:["H","hB"],PW:["h","H"],PY:["H","h","hB","hb"],QA:["h","hB","hb","H"],RE:["H","hB"],RO:["H","hB"],RS:["H","hB","h"],RU:["H"],RW:["H","h"],SA:["h","hB","hb","H"],SB:["h","hb","H","hB"],SC:["H","h","hB"],SD:["h","hB","hb","H"],SE:["H"],SG:["h","hb","H","hB"],SH:["H","h","hb","hB"],SI:["H","hB"],SJ:["H"],SK:["H"],SL:["h","hb","H","hB"],SM:["H","h","hB"],SN:["H","h","hB"],SO:["h","H"],SR:["H","hB"],SS:["h","hb","H","hB"],ST:["H","hB"],SV:["H","h","hB","hb"],SX:["H","h","hb","hB"],SY:["h","hB","hb","H"],SZ:["h","hb","H","hB"],TA:["H","h","hb","hB"],TC:["h","hb","H","hB"],TD:["h","H","hB"],TF:["H","h","hB"],TG:["H","hB"],TH:["H","h"],TJ:["H","h"],TL:["H","hB","hb","h"],TM:["H","h"],TN:["h","hB","hb","H"],TO:["h","H"],TR:["H","hB"],TT:["h","hb","H","hB"],TW:["hB","hb","h","H"],TZ:["hB","hb","H","h"],UA:["H","hB","h"],UG:["hB","hb","H","h"],UM:["h","hb","H","hB"],US:["h","hb","H","hB"],UY:["H","h","hB","hb"],UZ:["H","hB","h"],VA:["H","h","hB"],VC:["h","hb","H","hB"],VE:["h","H","hB","hb"],VG:["h","hb","H","hB"],VI:["h","hb","H","hB"],VN:["H","h"],VU:["h","H"],WF:["H","hB"],WS:["h","H"],XK:["H","hB","h"],YE:["h","hB","hb","H"],YT:["H","hB"],ZA:["H","h","hb","hB"],ZM:["h","hb","H","hB"],ZW:["H","h"],"af-ZA":["H","h","hB","hb"],"ar-001":["h","hB","hb","H"],"ca-ES":["H","h","hB"],"en-001":["h","hb","H","hB"],"es-BO":["H","h","hB","hb"],"es-BR":["H","h","hB","hb"],"es-EC":["H","h","hB","hb"],"es-ES":["H","h","hB","hb"],"es-GQ":["H","h","hB","hb"],"es-PE":["H","h","hB","hb"],"fr-CA":["H","h","hB"],"gl-ES":["H","h","hB"],"gu-IN":["hB","hb","h","H"],"hi-IN":["hB","h","H"],"it-CH":["H","h","hB"],"it-IT":["H","h","hB"],"kn-IN":["hB","h","H"],"ml-IN":["hB","h","H"],"mr-IN":["hB","hb","h","H"],"pa-IN":["hB","hb","h","H"],"ta-IN":["hB","h","hb","H"],"te-IN":["hB","h","H"],"zu-ZA":["H","hB","hb","h"]};function GO(t,e){for(var n="",r=0;r<t.length;r++){var i=t.charAt(r);if(i==="j"){for(var s=0;r+1<t.length&&t.charAt(r+1)===i;)s++,r++;var a=1+(s&1),c=s<2?1:3+(s>>1),h="a",g=WO(e);for((g=="H"||g=="k")&&(c=0);c-- >0;)n+=h;for(;a-- >0;)n=g+n}else i==="J"?n+="H":n+=i}return n}function WO(t){var e=t.hourCycle;if(e===void 0&&t.hourCycles&&t.hourCycles.length&&(e=t.hourCycles[0]),e)switch(e){case"h24":return"k";case"h23":return"H";case"h12":return"h";case"h11":return"K";default:throw new Error("Invalid hourCycle")}var n=t.language,r;n!=="root"&&(r=t.maximize().region);var i=Od[r||""]||Od[n||""]||Od["".concat(n,"-001")]||Od["001"];return i[0]}var xp,KO=new RegExp("^".concat(ZC.source,"*")),QO=new RegExp("".concat(ZC.source,"*$"));function gt(t,e){return{start:t,end:e}}var YO=!!String.prototype.startsWith&&"_a".startsWith("a",1),XO=!!String.fromCodePoint,JO=!!Object.fromEntries,ZO=!!String.prototype.codePointAt,eM=!!String.prototype.trimStart,tM=!!String.prototype.trimEnd,nM=!!Number.isSafeInteger,rM=nM?Number.isSafeInteger:function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t&&Math.abs(t)<=9007199254740991},av=!0;try{var iM=iA("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");av=((xp=iM.exec("a"))===null||xp===void 0?void 0:xp[0])==="a"}catch{av=!1}var $E=YO?function(e,n,r){return e.startsWith(n,r)}:function(e,n,r){return e.slice(r,r+n.length)===n},lv=XO?String.fromCodePoint:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r="",i=e.length,s=0,a;i>s;){if(a=e[s++],a>1114111)throw RangeError(a+" is not a valid code point");r+=a<65536?String.fromCharCode(a):String.fromCharCode(((a-=65536)>>10)+55296,a%1024+56320)}return r},qE=JO?Object.fromEntries:function(e){for(var n={},r=0,i=e;r<i.length;r++){var s=i[r],a=s[0],c=s[1];n[a]=c}return n},rA=ZO?function(e,n){return e.codePointAt(n)}:function(e,n){var r=e.length;if(!(n<0||n>=r)){var i=e.charCodeAt(n),s;return i<55296||i>56319||n+1===r||(s=e.charCodeAt(n+1))<56320||s>57343?i:(i-55296<<10)+(s-56320)+65536}},sM=eM?function(e){return e.trimStart()}:function(e){return e.replace(KO,"")},oM=tM?function(e){return e.trimEnd()}:function(e){return e.replace(QO,"")};function iA(t,e){return new RegExp(t,e)}var uv;if(av){var HE=iA("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");uv=function(e,n){var r;HE.lastIndex=n;var i=HE.exec(e);return(r=i[1])!==null&&r!==void 0?r:""}}else uv=function(e,n){for(var r=[];;){var i=rA(e,n);if(i===void 0||sA(i)||cM(i))break;r.push(i),n+=i>=65536?2:1}return lv.apply(void 0,r)};var aM=function(){function t(e,n){n===void 0&&(n={}),this.message=e,this.position={offset:0,line:1,column:1},this.ignoreTag=!!n.ignoreTag,this.locale=n.locale,this.requiresOtherClause=!!n.requiresOtherClause,this.shouldParseSkeletons=!!n.shouldParseSkeletons}return t.prototype.parse=function(){if(this.offset()!==0)throw Error("parser can only be used once");return this.parseMessage(0,"",!1)},t.prototype.parseMessage=function(e,n,r){for(var i=[];!this.isEOF();){var s=this.char();if(s===123){var a=this.parseArgument(e,r);if(a.err)return a;i.push(a.val)}else{if(s===125&&e>0)break;if(s===35&&(n==="plural"||n==="selectordinal")){var c=this.clonePosition();this.bump(),i.push({type:Vt.pound,location:gt(c,this.clonePosition())})}else if(s===60&&!this.ignoreTag&&this.peek()===47){if(r)break;return this.error(dt.UNMATCHED_CLOSING_TAG,gt(this.clonePosition(),this.clonePosition()))}else if(s===60&&!this.ignoreTag&&cv(this.peek()||0)){var a=this.parseTag(e,n);if(a.err)return a;i.push(a.val)}else{var a=this.parseLiteral(e,n);if(a.err)return a;i.push(a.val)}}}return{val:i,err:null}},t.prototype.parseTag=function(e,n){var r=this.clonePosition();this.bump();var i=this.parseTagName();if(this.bumpSpace(),this.bumpIf("/>"))return{val:{type:Vt.literal,value:"<".concat(i,"/>"),location:gt(r,this.clonePosition())},err:null};if(this.bumpIf(">")){var s=this.parseMessage(e+1,n,!0);if(s.err)return s;var a=s.val,c=this.clonePosition();if(this.bumpIf("</")){if(this.isEOF()||!cv(this.char()))return this.error(dt.INVALID_TAG,gt(c,this.clonePosition()));var h=this.clonePosition(),g=this.parseTagName();return i!==g?this.error(dt.UNMATCHED_CLOSING_TAG,gt(h,this.clonePosition())):(this.bumpSpace(),this.bumpIf(">")?{val:{type:Vt.tag,value:i,children:a,location:gt(r,this.clonePosition())},err:null}:this.error(dt.INVALID_TAG,gt(c,this.clonePosition())))}else return this.error(dt.UNCLOSED_TAG,gt(r,this.clonePosition()))}else return this.error(dt.INVALID_TAG,gt(r,this.clonePosition()))},t.prototype.parseTagName=function(){var e=this.offset();for(this.bump();!this.isEOF()&&uM(this.char());)this.bump();return this.message.slice(e,this.offset())},t.prototype.parseLiteral=function(e,n){for(var r=this.clonePosition(),i="";;){var s=this.tryParseQuote(n);if(s){i+=s;continue}var a=this.tryParseUnquoted(e,n);if(a){i+=a;continue}var c=this.tryParseLeftAngleBracket();if(c){i+=c;continue}break}var h=gt(r,this.clonePosition());return{val:{type:Vt.literal,value:i,location:h},err:null}},t.prototype.tryParseLeftAngleBracket=function(){return!this.isEOF()&&this.char()===60&&(this.ignoreTag||!lM(this.peek()||0))?(this.bump(),"<"):null},t.prototype.tryParseQuote=function(e){if(this.isEOF()||this.char()!==39)return null;switch(this.peek()){case 39:return this.bump(),this.bump(),"'";case 123:case 60:case 62:case 125:break;case 35:if(e==="plural"||e==="selectordinal")break;return null;default:return null}this.bump();var n=[this.char()];for(this.bump();!this.isEOF();){var r=this.char();if(r===39)if(this.peek()===39)n.push(39),this.bump();else{this.bump();break}else n.push(r);this.bump()}return lv.apply(void 0,n)},t.prototype.tryParseUnquoted=function(e,n){if(this.isEOF())return null;var r=this.char();return r===60||r===123||r===35&&(n==="plural"||n==="selectordinal")||r===125&&e>0?null:(this.bump(),lv(r))},t.prototype.parseArgument=function(e,n){var r=this.clonePosition();if(this.bump(),this.bumpSpace(),this.isEOF())return this.error(dt.EXPECT_ARGUMENT_CLOSING_BRACE,gt(r,this.clonePosition()));if(this.char()===125)return this.bump(),this.error(dt.EMPTY_ARGUMENT,gt(r,this.clonePosition()));var i=this.parseIdentifierIfPossible().value;if(!i)return this.error(dt.MALFORMED_ARGUMENT,gt(r,this.clonePosition()));if(this.bumpSpace(),this.isEOF())return this.error(dt.EXPECT_ARGUMENT_CLOSING_BRACE,gt(r,this.clonePosition()));switch(this.char()){case 125:return this.bump(),{val:{type:Vt.argument,value:i,location:gt(r,this.clonePosition())},err:null};case 44:return this.bump(),this.bumpSpace(),this.isEOF()?this.error(dt.EXPECT_ARGUMENT_CLOSING_BRACE,gt(r,this.clonePosition())):this.parseArgumentOptions(e,n,i,r);default:return this.error(dt.MALFORMED_ARGUMENT,gt(r,this.clonePosition()))}},t.prototype.parseIdentifierIfPossible=function(){var e=this.clonePosition(),n=this.offset(),r=uv(this.message,n),i=n+r.length;this.bumpTo(i);var s=this.clonePosition(),a=gt(e,s);return{value:r,location:a}},t.prototype.parseArgumentOptions=function(e,n,r,i){var s,a=this.clonePosition(),c=this.parseIdentifierIfPossible().value,h=this.clonePosition();switch(c){case"":return this.error(dt.EXPECT_ARGUMENT_TYPE,gt(a,h));case"number":case"date":case"time":{this.bumpSpace();var g=null;if(this.bumpIf(",")){this.bumpSpace();var _=this.clonePosition(),w=this.parseSimpleArgStyleIfPossible();if(w.err)return w;var T=oM(w.val);if(T.length===0)return this.error(dt.EXPECT_ARGUMENT_STYLE,gt(this.clonePosition(),this.clonePosition()));var E=gt(_,this.clonePosition());g={style:T,styleLocation:E}}var $=this.tryParseArgumentClose(i);if($.err)return $;var U=gt(i,this.clonePosition());if(g&&$E(g==null?void 0:g.style,"::",0)){var J=sM(g.style.slice(2));if(c==="number"){var w=this.parseNumberSkeletonFromString(J,g.styleLocation);return w.err?w:{val:{type:Vt.number,value:r,location:U,style:w.val},err:null}}else{if(J.length===0)return this.error(dt.EXPECT_DATE_TIME_SKELETON,U);var V=J;this.locale&&(V=GO(J,this.locale));var T={type:Xl.dateTime,pattern:V,location:g.styleLocation,parsedOptions:this.shouldParseSkeletons?BO(V):{}},B=c==="date"?Vt.date:Vt.time;return{val:{type:B,value:r,location:U,style:T},err:null}}}return{val:{type:c==="number"?Vt.number:c==="date"?Vt.date:Vt.time,value:r,location:U,style:(s=g==null?void 0:g.style)!==null&&s!==void 0?s:null},err:null}}case"plural":case"selectordinal":case"select":{var j=this.clonePosition();if(this.bumpSpace(),!this.bumpIf(","))return this.error(dt.EXPECT_SELECT_ARGUMENT_OPTIONS,gt(j,Fe({},j)));this.bumpSpace();var Z=this.parseIdentifierIfPossible(),ne=0;if(c!=="select"&&Z.value==="offset"){if(!this.bumpIf(":"))return this.error(dt.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,gt(this.clonePosition(),this.clonePosition()));this.bumpSpace();var w=this.tryParseDecimalInteger(dt.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,dt.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE);if(w.err)return w;this.bumpSpace(),Z=this.parseIdentifierIfPossible(),ne=w.val}var te=this.tryParsePluralOrSelectOptions(e,c,n,Z);if(te.err)return te;var $=this.tryParseArgumentClose(i);if($.err)return $;var ae=gt(i,this.clonePosition());return c==="select"?{val:{type:Vt.select,value:r,options:qE(te.val),location:ae},err:null}:{val:{type:Vt.plural,value:r,options:qE(te.val),offset:ne,pluralType:c==="plural"?"cardinal":"ordinal",location:ae},err:null}}default:return this.error(dt.INVALID_ARGUMENT_TYPE,gt(a,h))}},t.prototype.tryParseArgumentClose=function(e){return this.isEOF()||this.char()!==125?this.error(dt.EXPECT_ARGUMENT_CLOSING_BRACE,gt(e,this.clonePosition())):(this.bump(),{val:!0,err:null})},t.prototype.parseSimpleArgStyleIfPossible=function(){for(var e=0,n=this.clonePosition();!this.isEOF();){var r=this.char();switch(r){case 39:{this.bump();var i=this.clonePosition();if(!this.bumpUntil("'"))return this.error(dt.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE,gt(i,this.clonePosition()));this.bump();break}case 123:{e+=1,this.bump();break}case 125:{if(e>0)e-=1;else return{val:this.message.slice(n.offset,this.offset()),err:null};break}default:this.bump();break}}return{val:this.message.slice(n.offset,this.offset()),err:null}},t.prototype.parseNumberSkeletonFromString=function(e,n){var r=[];try{r=UO(e)}catch{return this.error(dt.INVALID_NUMBER_SKELETON,n)}return{val:{type:Xl.number,tokens:r,location:n,parsedOptions:this.shouldParseSkeletons?HO(r):{}},err:null}},t.prototype.tryParsePluralOrSelectOptions=function(e,n,r,i){for(var s,a=!1,c=[],h=new Set,g=i.value,_=i.location;;){if(g.length===0){var w=this.clonePosition();if(n!=="select"&&this.bumpIf("=")){var T=this.tryParseDecimalInteger(dt.EXPECT_PLURAL_ARGUMENT_SELECTOR,dt.INVALID_PLURAL_ARGUMENT_SELECTOR);if(T.err)return T;_=gt(w,this.clonePosition()),g=this.message.slice(w.offset,this.offset())}else break}if(h.has(g))return this.error(n==="select"?dt.DUPLICATE_SELECT_ARGUMENT_SELECTOR:dt.DUPLICATE_PLURAL_ARGUMENT_SELECTOR,_);g==="other"&&(a=!0),this.bumpSpace();var E=this.clonePosition();if(!this.bumpIf("{"))return this.error(n==="select"?dt.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT:dt.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT,gt(this.clonePosition(),this.clonePosition()));var $=this.parseMessage(e+1,n,r);if($.err)return $;var U=this.tryParseArgumentClose(E);if(U.err)return U;c.push([g,{value:$.val,location:gt(E,this.clonePosition())}]),h.add(g),this.bumpSpace(),s=this.parseIdentifierIfPossible(),g=s.value,_=s.location}return c.length===0?this.error(n==="select"?dt.EXPECT_SELECT_ARGUMENT_SELECTOR:dt.EXPECT_PLURAL_ARGUMENT_SELECTOR,gt(this.clonePosition(),this.clonePosition())):this.requiresOtherClause&&!a?this.error(dt.MISSING_OTHER_CLAUSE,gt(this.clonePosition(),this.clonePosition())):{val:c,err:null}},t.prototype.tryParseDecimalInteger=function(e,n){var r=1,i=this.clonePosition();this.bumpIf("+")||this.bumpIf("-")&&(r=-1);for(var s=!1,a=0;!this.isEOF();){var c=this.char();if(c>=48&&c<=57)s=!0,a=a*10+(c-48),this.bump();else break}var h=gt(i,this.clonePosition());return s?(a*=r,rM(a)?{val:a,err:null}:this.error(n,h)):this.error(e,h)},t.prototype.offset=function(){return this.position.offset},t.prototype.isEOF=function(){return this.offset()===this.message.length},t.prototype.clonePosition=function(){return{offset:this.position.offset,line:this.position.line,column:this.position.column}},t.prototype.char=function(){var e=this.position.offset;if(e>=this.message.length)throw Error("out of bound");var n=rA(this.message,e);if(n===void 0)throw Error("Offset ".concat(e," is at invalid UTF-16 code unit boundary"));return n},t.prototype.error=function(e,n){return{val:null,err:{kind:e,message:this.message,location:n}}},t.prototype.bump=function(){if(!this.isEOF()){var e=this.char();e===10?(this.position.line+=1,this.position.column=1,this.position.offset+=1):(this.position.column+=1,this.position.offset+=e<65536?1:2)}},t.prototype.bumpIf=function(e){if($E(this.message,e,this.offset())){for(var n=0;n<e.length;n++)this.bump();return!0}return!1},t.prototype.bumpUntil=function(e){var n=this.offset(),r=this.message.indexOf(e,n);return r>=0?(this.bumpTo(r),!0):(this.bumpTo(this.message.length),!1)},t.prototype.bumpTo=function(e){if(this.offset()>e)throw Error("targetOffset ".concat(e," must be greater than or equal to the current offset ").concat(this.offset()));for(e=Math.min(e,this.message.length);;){var n=this.offset();if(n===e)break;if(n>e)throw Error("targetOffset ".concat(e," is at invalid UTF-16 code unit boundary"));if(this.bump(),this.isEOF())break}},t.prototype.bumpSpace=function(){for(;!this.isEOF()&&sA(this.char());)this.bump()},t.prototype.peek=function(){if(this.isEOF())return null;var e=this.char(),n=this.offset(),r=this.message.charCodeAt(n+(e>=65536?2:1));return r??null},t}();function cv(t){return t>=97&&t<=122||t>=65&&t<=90}function lM(t){return cv(t)||t===47}function uM(t){return t===45||t===46||t>=48&&t<=57||t===95||t>=97&&t<=122||t>=65&&t<=90||t==183||t>=192&&t<=214||t>=216&&t<=246||t>=248&&t<=893||t>=895&&t<=8191||t>=8204&&t<=8205||t>=8255&&t<=8256||t>=8304&&t<=8591||t>=11264&&t<=12271||t>=12289&&t<=55295||t>=63744&&t<=64975||t>=65008&&t<=65533||t>=65536&&t<=983039}function sA(t){return t>=9&&t<=13||t===32||t===133||t>=8206&&t<=8207||t===8232||t===8233}function cM(t){return t>=33&&t<=35||t===36||t>=37&&t<=39||t===40||t===41||t===42||t===43||t===44||t===45||t>=46&&t<=47||t>=58&&t<=59||t>=60&&t<=62||t>=63&&t<=64||t===91||t===92||t===93||t===94||t===96||t===123||t===124||t===125||t===126||t===161||t>=162&&t<=165||t===166||t===167||t===169||t===171||t===172||t===174||t===176||t===177||t===182||t===187||t===191||t===215||t===247||t>=8208&&t<=8213||t>=8214&&t<=8215||t===8216||t===8217||t===8218||t>=8219&&t<=8220||t===8221||t===8222||t===8223||t>=8224&&t<=8231||t>=8240&&t<=8248||t===8249||t===8250||t>=8251&&t<=8254||t>=8257&&t<=8259||t===8260||t===8261||t===8262||t>=8263&&t<=8273||t===8274||t===8275||t>=8277&&t<=8286||t>=8592&&t<=8596||t>=8597&&t<=8601||t>=8602&&t<=8603||t>=8604&&t<=8607||t===8608||t>=8609&&t<=8610||t===8611||t>=8612&&t<=8613||t===8614||t>=8615&&t<=8621||t===8622||t>=8623&&t<=8653||t>=8654&&t<=8655||t>=8656&&t<=8657||t===8658||t===8659||t===8660||t>=8661&&t<=8691||t>=8692&&t<=8959||t>=8960&&t<=8967||t===8968||t===8969||t===8970||t===8971||t>=8972&&t<=8991||t>=8992&&t<=8993||t>=8994&&t<=9e3||t===9001||t===9002||t>=9003&&t<=9083||t===9084||t>=9085&&t<=9114||t>=9115&&t<=9139||t>=9140&&t<=9179||t>=9180&&t<=9185||t>=9186&&t<=9254||t>=9255&&t<=9279||t>=9280&&t<=9290||t>=9291&&t<=9311||t>=9472&&t<=9654||t===9655||t>=9656&&t<=9664||t===9665||t>=9666&&t<=9719||t>=9720&&t<=9727||t>=9728&&t<=9838||t===9839||t>=9840&&t<=10087||t===10088||t===10089||t===10090||t===10091||t===10092||t===10093||t===10094||t===10095||t===10096||t===10097||t===10098||t===10099||t===10100||t===10101||t>=10132&&t<=10175||t>=10176&&t<=10180||t===10181||t===10182||t>=10183&&t<=10213||t===10214||t===10215||t===10216||t===10217||t===10218||t===10219||t===10220||t===10221||t===10222||t===10223||t>=10224&&t<=10239||t>=10240&&t<=10495||t>=10496&&t<=10626||t===10627||t===10628||t===10629||t===10630||t===10631||t===10632||t===10633||t===10634||t===10635||t===10636||t===10637||t===10638||t===10639||t===10640||t===10641||t===10642||t===10643||t===10644||t===10645||t===10646||t===10647||t===10648||t>=10649&&t<=10711||t===10712||t===10713||t===10714||t===10715||t>=10716&&t<=10747||t===10748||t===10749||t>=10750&&t<=11007||t>=11008&&t<=11055||t>=11056&&t<=11076||t>=11077&&t<=11078||t>=11079&&t<=11084||t>=11085&&t<=11123||t>=11124&&t<=11125||t>=11126&&t<=11157||t===11158||t>=11159&&t<=11263||t>=11776&&t<=11777||t===11778||t===11779||t===11780||t===11781||t>=11782&&t<=11784||t===11785||t===11786||t===11787||t===11788||t===11789||t>=11790&&t<=11798||t===11799||t>=11800&&t<=11801||t===11802||t===11803||t===11804||t===11805||t>=11806&&t<=11807||t===11808||t===11809||t===11810||t===11811||t===11812||t===11813||t===11814||t===11815||t===11816||t===11817||t>=11818&&t<=11822||t===11823||t>=11824&&t<=11833||t>=11834&&t<=11835||t>=11836&&t<=11839||t===11840||t===11841||t===11842||t>=11843&&t<=11855||t>=11856&&t<=11857||t===11858||t>=11859&&t<=11903||t>=12289&&t<=12291||t===12296||t===12297||t===12298||t===12299||t===12300||t===12301||t===12302||t===12303||t===12304||t===12305||t>=12306&&t<=12307||t===12308||t===12309||t===12310||t===12311||t===12312||t===12313||t===12314||t===12315||t===12316||t===12317||t>=12318&&t<=12319||t===12320||t===12336||t===64830||t===64831||t>=65093&&t<=65094}function hv(t){t.forEach(function(e){if(delete e.location,QC(e)||YC(e))for(var n in e.options)delete e.options[n].location,hv(e.options[n].value);else GC(e)&&JC(e.style)||(WC(e)||KC(e))&&ov(e.style)?delete e.style.location:XC(e)&&hv(e.children)})}function hM(t,e){e===void 0&&(e={}),e=Fe({shouldParseSkeletons:!0,requiresOtherClause:!0},e);var n=new aM(t,e).parse();if(n.err){var r=SyntaxError(dt[n.err.kind]);throw r.location=n.err.location,r.originalMessage=n.err.message,r}return e!=null&&e.captureLocation||hv(n.val),n.val}function Ni(t,e){var n=e&&e.cache?e.cache:_M,r=e&&e.serializer?e.serializer:pM,i=e&&e.strategy?e.strategy:fM;return i(t,{cache:n,serializer:r})}function dM(t){return t==null||typeof t=="number"||typeof t=="boolean"}function oA(t,e,n,r){var i=dM(r)?r:n(r),s=e.get(i);return typeof s>"u"&&(s=t.call(this,r),e.set(i,s)),s}function aA(t,e,n){var r=Array.prototype.slice.call(arguments,3),i=n(r),s=e.get(i);return typeof s>"u"&&(s=t.apply(this,r),e.set(i,s)),s}function d0(t,e,n,r,i){return n.bind(e,t,r,i)}function fM(t,e){var n=t.length===1?oA:aA;return d0(t,this,n,e.cache.create(),e.serializer)}function gM(t,e){return d0(t,this,aA,e.cache.create(),e.serializer)}function mM(t,e){return d0(t,this,oA,e.cache.create(),e.serializer)}var pM=function(){return JSON.stringify(arguments)};function f0(){this.cache=Object.create(null)}f0.prototype.get=function(t){return this.cache[t]};f0.prototype.set=function(t,e){this.cache[t]=e};var _M={create:function(){return new f0}},Di={variadic:gM,monadic:mM},Xi;(function(t){t.MISSING_VALUE="MISSING_VALUE",t.INVALID_VALUE="INVALID_VALUE",t.MISSING_INTL_API="MISSING_INTL_API"})(Xi||(Xi={}));var ko=function(t){ai(e,t);function e(n,r,i){var s=t.call(this,n)||this;return s.code=r,s.originalMessage=i,s}return e.prototype.toString=function(){return"[formatjs Error: ".concat(this.code,"] ").concat(this.message)},e}(Error),GE=function(t){ai(e,t);function e(n,r,i,s){return t.call(this,'Invalid values for "'.concat(n,'": "').concat(r,'". Options are "').concat(Object.keys(i).join('", "'),'"'),Xi.INVALID_VALUE,s)||this}return e}(ko),vM=function(t){ai(e,t);function e(n,r,i){return t.call(this,'Value for "'.concat(n,'" must be of type ').concat(r),Xi.INVALID_VALUE,i)||this}return e}(ko),yM=function(t){ai(e,t);function e(n,r){return t.call(this,'The intl string context variable "'.concat(n,'" was not provided to the string "').concat(r,'"'),Xi.MISSING_VALUE,r)||this}return e}(ko),ir;(function(t){t[t.literal=0]="literal",t[t.object=1]="object"})(ir||(ir={}));function wM(t){return t.length<2?t:t.reduce(function(e,n){var r=e[e.length-1];return!r||r.type!==ir.literal||n.type!==ir.literal?e.push(n):r.value+=n.value,e},[])}function lA(t){return typeof t=="function"}function uf(t,e,n,r,i,s,a){if(t.length===1&&BE(t[0]))return[{type:ir.literal,value:t[0].value}];for(var c=[],h=0,g=t;h<g.length;h++){var _=g[h];if(BE(_)){c.push({type:ir.literal,value:_.value});continue}if(VO(_)){typeof s=="number"&&c.push({type:ir.literal,value:n.getNumberFormat(e).format(s)});continue}var w=_.value;if(!(i&&w in i))throw new yM(w,a);var T=i[w];if(LO(_)){(!T||typeof T=="string"||typeof T=="number")&&(T=typeof T=="string"||typeof T=="number"?String(T):""),c.push({type:typeof T=="string"?ir.literal:ir.object,value:T});continue}if(WC(_)){var E=typeof _.style=="string"?r.date[_.style]:ov(_.style)?_.style.parsedOptions:void 0;c.push({type:ir.literal,value:n.getDateTimeFormat(e,E).format(T)});continue}if(KC(_)){var E=typeof _.style=="string"?r.time[_.style]:ov(_.style)?_.style.parsedOptions:r.time.medium;c.push({type:ir.literal,value:n.getDateTimeFormat(e,E).format(T)});continue}if(GC(_)){var E=typeof _.style=="string"?r.number[_.style]:JC(_.style)?_.style.parsedOptions:void 0;E&&E.scale&&(T=T*(E.scale||1)),c.push({type:ir.literal,value:n.getNumberFormat(e,E).format(T)});continue}if(XC(_)){var $=_.children,U=_.value,J=i[U];if(!lA(J))throw new vM(U,"function",a);var V=uf($,e,n,r,i,s),B=J(V.map(function(ne){return ne.value}));Array.isArray(B)||(B=[B]),c.push.apply(c,B.map(function(ne){return{type:typeof ne=="string"?ir.literal:ir.object,value:ne}}))}if(QC(_)){var j=_.options[T]||_.options.other;if(!j)throw new GE(_.value,T,Object.keys(_.options),a);c.push.apply(c,uf(j.value,e,n,r,i));continue}if(YC(_)){var j=_.options["=".concat(T)];if(!j){if(!Intl.PluralRules)throw new ko(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,Xi.MISSING_INTL_API,a);var Z=n.getPluralRules(e,{type:_.pluralType}).select(T-(_.offset||0));j=_.options[Z]||_.options.other}if(!j)throw new GE(_.value,T,Object.keys(_.options),a);c.push.apply(c,uf(j.value,e,n,r,i,T-(_.offset||0)));continue}}return wM(c)}function IM(t,e){return e?Fe(Fe(Fe({},t||{}),e||{}),Object.keys(t).reduce(function(n,r){return n[r]=Fe(Fe({},t[r]),e[r]||{}),n},{})):t}function EM(t,e){return e?Object.keys(t).reduce(function(n,r){return n[r]=IM(t[r],e[r]),n},Fe({},t)):t}function Cp(t){return{create:function(){return{get:function(e){return t[e]},set:function(e,n){t[e]=n}}}}}function TM(t){return t===void 0&&(t={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:Ni(function(){for(var e,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return new((e=Intl.NumberFormat).bind.apply(e,Oi([void 0],n,!1)))},{cache:Cp(t.number),strategy:Di.variadic}),getDateTimeFormat:Ni(function(){for(var e,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return new((e=Intl.DateTimeFormat).bind.apply(e,Oi([void 0],n,!1)))},{cache:Cp(t.dateTime),strategy:Di.variadic}),getPluralRules:Ni(function(){for(var e,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return new((e=Intl.PluralRules).bind.apply(e,Oi([void 0],n,!1)))},{cache:Cp(t.pluralRules),strategy:Di.variadic})}}var uA=function(){function t(e,n,r,i){var s=this;if(n===void 0&&(n=t.defaultLocale),this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(h){var g=s.formatToParts(h);if(g.length===1)return g[0].value;var _=g.reduce(function(w,T){return!w.length||T.type!==ir.literal||typeof w[w.length-1]!="string"?w.push(T.value):w[w.length-1]+=T.value,w},[]);return _.length<=1?_[0]||"":_},this.formatToParts=function(h){return uf(s.ast,s.locales,s.formatters,s.formats,h,void 0,s.message)},this.resolvedOptions=function(){var h;return{locale:((h=s.resolvedLocale)===null||h===void 0?void 0:h.toString())||Intl.NumberFormat.supportedLocalesOf(s.locales)[0]}},this.getAst=function(){return s.ast},this.locales=n,this.resolvedLocale=t.resolveLocale(n),typeof e=="string"){if(this.message=e,!t.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");var a=i||{};a.formatters;var c=xs(a,["formatters"]);this.ast=t.__parse(e,Fe(Fe({},c),{locale:this.resolvedLocale}))}else this.ast=e;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=EM(t.formats,r),this.formatters=i&&i.formatters||TM(this.formatterCache)}return Object.defineProperty(t,"defaultLocale",{get:function(){return t.memoizedDefaultLocale||(t.memoizedDefaultLocale=new Intl.NumberFormat().resolvedOptions().locale),t.memoizedDefaultLocale},enumerable:!1,configurable:!0}),t.memoizedDefaultLocale=null,t.resolveLocale=function(e){if(!(typeof Intl.Locale>"u")){var n=Intl.NumberFormat.supportedLocalesOf(e);return n.length>0?new Intl.Locale(n[0]):new Intl.Locale(typeof e=="string"?e:e[0])}},t.__parse=hM,t.formats={number:{integer:{maximumFractionDigits:0},currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},t}(),xa;(function(t){t.FORMAT_ERROR="FORMAT_ERROR",t.UNSUPPORTED_FORMATTER="UNSUPPORTED_FORMATTER",t.INVALID_CONFIG="INVALID_CONFIG",t.MISSING_DATA="MISSING_DATA",t.MISSING_TRANSLATION="MISSING_TRANSLATION"})(xa||(xa={}));var Mh=function(t){ai(e,t);function e(n,r,i){var s=this,a=i?i instanceof Error?i:new Error(String(i)):void 0;return s=t.call(this,"[@formatjs/intl Error ".concat(n,"] ").concat(r,`
`).concat(a?`
`.concat(a.message,`
`).concat(a.stack):""))||this,s.code=n,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(s,e),s}return e}(Error),SM=function(t){ai(e,t);function e(n,r){return t.call(this,xa.UNSUPPORTED_FORMATTER,n,r)||this}return e}(Mh),xM=function(t){ai(e,t);function e(n,r){return t.call(this,xa.INVALID_CONFIG,n,r)||this}return e}(Mh),WE=function(t){ai(e,t);function e(n,r){return t.call(this,xa.MISSING_DATA,n,r)||this}return e}(Mh),li=function(t){ai(e,t);function e(n,r,i){var s=t.call(this,xa.FORMAT_ERROR,"".concat(n,`
Locale: `).concat(r,`
`),i)||this;return s.locale=r,s}return e}(Mh),Ap=function(t){ai(e,t);function e(n,r,i,s){var a=t.call(this,"".concat(n,`
MessageID: `).concat(i==null?void 0:i.id,`
Default Message: `).concat(i==null?void 0:i.defaultMessage,`
Description: `).concat(i==null?void 0:i.description,`
`),r,s)||this;return a.descriptor=i,a.locale=r,a}return e}(li),CM=function(t){ai(e,t);function e(n,r){var i=t.call(this,xa.MISSING_TRANSLATION,'Missing message: "'.concat(n.id,'" for locale "').concat(r,'", using ').concat(n.defaultMessage?"default message (".concat(typeof n.defaultMessage=="string"?n.defaultMessage:n.defaultMessage.map(function(s){var a;return(a=s.value)!==null&&a!==void 0?a:JSON.stringify(s)}).join(),")"):"id"," as fallback."))||this;return i.descriptor=n,i}return e}(Mh);function Ua(t,e,n){return n===void 0&&(n={}),e.reduce(function(r,i){return i in t?r[i]=t[i]:i in n&&(r[i]=n[i]),r},{})}var AM=function(t){},PM=function(t){},cA={formats:{},messages:{},timeZone:void 0,defaultLocale:"en",defaultFormats:{},fallbackOnEmptyString:!0,onError:AM,onWarn:PM};function hA(){return{dateTime:{},number:{},message:{},relativeTime:{},pluralRules:{},list:{},displayNames:{}}}function Go(t){return{create:function(){return{get:function(e){return t[e]},set:function(e,n){t[e]=n}}}}}function bM(t){t===void 0&&(t=hA());var e=Intl.RelativeTimeFormat,n=Intl.ListFormat,r=Intl.DisplayNames,i=Ni(function(){for(var c,h=[],g=0;g<arguments.length;g++)h[g]=arguments[g];return new((c=Intl.DateTimeFormat).bind.apply(c,Oi([void 0],h,!1)))},{cache:Go(t.dateTime),strategy:Di.variadic}),s=Ni(function(){for(var c,h=[],g=0;g<arguments.length;g++)h[g]=arguments[g];return new((c=Intl.NumberFormat).bind.apply(c,Oi([void 0],h,!1)))},{cache:Go(t.number),strategy:Di.variadic}),a=Ni(function(){for(var c,h=[],g=0;g<arguments.length;g++)h[g]=arguments[g];return new((c=Intl.PluralRules).bind.apply(c,Oi([void 0],h,!1)))},{cache:Go(t.pluralRules),strategy:Di.variadic});return{getDateTimeFormat:i,getNumberFormat:s,getMessageFormat:Ni(function(c,h,g,_){return new uA(c,h,g,Fe({formatters:{getNumberFormat:s,getDateTimeFormat:i,getPluralRules:a}},_||{}))},{cache:Go(t.message),strategy:Di.variadic}),getRelativeTimeFormat:Ni(function(){for(var c=[],h=0;h<arguments.length;h++)c[h]=arguments[h];return new(e.bind.apply(e,Oi([void 0],c,!1)))},{cache:Go(t.relativeTime),strategy:Di.variadic}),getPluralRules:a,getListFormat:Ni(function(){for(var c=[],h=0;h<arguments.length;h++)c[h]=arguments[h];return new(n.bind.apply(n,Oi([void 0],c,!1)))},{cache:Go(t.list),strategy:Di.variadic}),getDisplayNames:Ni(function(){for(var c=[],h=0;h<arguments.length;h++)c[h]=arguments[h];return new(r.bind.apply(r,Oi([void 0],c,!1)))},{cache:Go(t.displayNames),strategy:Di.variadic})}}function g0(t,e,n,r){var i=t&&t[e],s;if(i&&(s=i[n]),s)return s;r(new SM("No ".concat(e," format named: ").concat(n)))}function Md(t,e){return Object.keys(t).reduce(function(n,r){return n[r]=Fe({timeZone:e},t[r]),n},{})}function KE(t,e){var n=Object.keys(Fe(Fe({},t),e));return n.reduce(function(r,i){return r[i]=Fe(Fe({},t[i]||{}),e[i]||{}),r},{})}function QE(t,e){if(!e)return t;var n=uA.formats;return Fe(Fe(Fe({},n),t),{date:KE(Md(n.date,e),Md(t.date||{},e)),time:KE(Md(n.time,e),Md(t.time||{},e))})}var dv=function(t,e,n,r,i){var s=t.locale,a=t.formats,c=t.messages,h=t.defaultLocale,g=t.defaultFormats,_=t.fallbackOnEmptyString,w=t.onError,T=t.timeZone,E=t.defaultRichTextElements;n===void 0&&(n={id:""});var $=n.id,U=n.defaultMessage;HC(!!$,"[@formatjs/intl] An `id` must be provided to format a message. You can either:\n1. Configure your build toolchain with [babel-plugin-formatjs](https://formatjs.io/docs/tooling/babel-plugin)\nor [@formatjs/ts-transformer](https://formatjs.io/docs/tooling/ts-transformer) OR\n2. Configure your `eslint` config to include [eslint-plugin-formatjs](https://formatjs.io/docs/tooling/linter#enforce-id)\nto autofix this issue");var J=String($),V=c&&Object.prototype.hasOwnProperty.call(c,J)&&c[J];if(Array.isArray(V)&&V.length===1&&V[0].type===Vt.literal)return V[0].value;if(!r&&V&&typeof V=="string"&&!E)return V.replace(/'\{(.*?)\}'/gi,"{$1}");if(r=Fe(Fe({},E),r||{}),a=QE(a,T),g=QE(g,T),!V){if(_===!1&&V==="")return V;if((!U||s&&s.toLowerCase()!==h.toLowerCase())&&w(new CM(n,s)),U)try{var B=e.getMessageFormat(U,h,g,i);return B.format(r)}catch(j){return w(new Ap('Error formatting default message for: "'.concat(J,'", rendering default message verbatim'),s,n,j)),typeof U=="string"?U:J}return J}try{var B=e.getMessageFormat(V,s,a,Fe({formatters:e},i||{}));return B.format(r)}catch(j){w(new Ap('Error formatting message: "'.concat(J,'", using ').concat(U?"default message":"id"," as fallback."),s,n,j))}if(U)try{var B=e.getMessageFormat(U,h,g,i);return B.format(r)}catch(j){w(new Ap('Error formatting the default message for: "'.concat(J,'", rendering message verbatim'),s,n,j))}return typeof V=="string"?V:typeof U=="string"?U:J},dA=["formatMatcher","timeZone","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName","hourCycle","dateStyle","timeStyle","calendar","numberingSystem","fractionalSecondDigits"];function tm(t,e,n,r){var i=t.locale,s=t.formats,a=t.onError,c=t.timeZone;r===void 0&&(r={});var h=r.format,g=Fe(Fe({},c&&{timeZone:c}),h&&g0(s,e,h,a)),_=Ua(r,dA,g);return e==="time"&&!_.hour&&!_.minute&&!_.second&&!_.timeStyle&&!_.dateStyle&&(_=Fe(Fe({},_),{hour:"numeric",minute:"numeric"})),n(i,_)}function RM(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n[0],s=n[1],a=s===void 0?{}:s,c=typeof i=="string"?new Date(i||0):i;try{return tm(t,"date",e,a).format(c)}catch(h){t.onError(new li("Error formatting date.",t.locale,h))}return String(c)}function kM(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n[0],s=n[1],a=s===void 0?{}:s,c=typeof i=="string"?new Date(i||0):i;try{return tm(t,"time",e,a).format(c)}catch(h){t.onError(new li("Error formatting time.",t.locale,h))}return String(c)}function NM(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n[0],s=n[1],a=n[2],c=a===void 0?{}:a,h=t.timeZone,g=t.locale,_=t.onError,w=Ua(c,dA,h?{timeZone:h}:{});try{return e(g,w).formatRange(i,s)}catch(T){_(new li("Error formatting date time range.",t.locale,T))}return String(i)}function DM(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n[0],s=n[1],a=s===void 0?{}:s,c=typeof i=="string"?new Date(i||0):i;try{return tm(t,"date",e,a).formatToParts(c)}catch(h){t.onError(new li("Error formatting date.",t.locale,h))}return[]}function OM(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n[0],s=n[1],a=s===void 0?{}:s,c=typeof i=="string"?new Date(i||0):i;try{return tm(t,"time",e,a).formatToParts(c)}catch(h){t.onError(new li("Error formatting time.",t.locale,h))}return[]}var MM=["style","type","fallback","languageDisplay"];function LM(t,e,n,r){var i=t.locale,s=t.onError,a=Intl.DisplayNames;a||s(new ko(`Intl.DisplayNames is not available in this environment.
Try polyfilling it using "@formatjs/intl-displaynames"
`,Xi.MISSING_INTL_API));var c=Ua(r,MM);try{return e(i,c).of(n)}catch(h){s(new li("Error formatting display name.",i,h))}}var VM=["type","style"],YE=Date.now();function FM(t){return"".concat(YE,"_").concat(t,"_").concat(YE)}function BM(t,e,n,r){r===void 0&&(r={});var i=fA(t,e,n,r).reduce(function(s,a){var c=a.value;return typeof c!="string"?s.push(c):typeof s[s.length-1]=="string"?s[s.length-1]+=c:s.push(c),s},[]);return i.length===1?i[0]:i.length===0?"":i}function fA(t,e,n,r){var i=t.locale,s=t.onError;r===void 0&&(r={});var a=Intl.ListFormat;a||s(new ko(`Intl.ListFormat is not available in this environment.
Try polyfilling it using "@formatjs/intl-listformat"
`,Xi.MISSING_INTL_API));var c=Ua(r,VM);try{var h={},g=n.map(function(_,w){if(typeof _=="object"){var T=FM(w);return h[T]=_,T}return String(_)});return e(i,c).formatToParts(g).map(function(_){return _.type==="literal"?_:Fe(Fe({},_),{value:h[_.value]||_.value})})}catch(_){s(new li("Error formatting list.",i,_))}return n}var jM=["type"];function UM(t,e,n,r){var i=t.locale,s=t.onError;r===void 0&&(r={}),Intl.PluralRules||s(new ko(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,Xi.MISSING_INTL_API));var a=Ua(r,jM);try{return e(i,a).select(n)}catch(c){s(new li("Error formatting plural.",i,c))}return"other"}var zM=["numeric","style"];function $M(t,e,n){var r=t.locale,i=t.formats,s=t.onError;n===void 0&&(n={});var a=n.format,c=!!a&&g0(i,"relative",a,s)||{},h=Ua(n,zM,c);return e(r,h)}function qM(t,e,n,r,i){i===void 0&&(i={}),r||(r="second");var s=Intl.RelativeTimeFormat;s||t.onError(new ko(`Intl.RelativeTimeFormat is not available in this environment.
Try polyfilling it using "@formatjs/intl-relativetimeformat"
`,Xi.MISSING_INTL_API));try{return $M(t,e,i).format(n,r)}catch(a){t.onError(new li("Error formatting relative time.",t.locale,a))}return String(n)}var HM=["style","currency","currencyDisplay","unit","unitDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","currencyDisplay","currencySign","notation","signDisplay","unit","unitDisplay","numberingSystem"];function gA(t,e,n){var r=t.locale,i=t.formats,s=t.onError;n===void 0&&(n={});var a=n.format,c=a&&g0(i,"number",a,s)||{},h=Ua(n,HM,c);return e(r,h)}function GM(t,e,n,r){r===void 0&&(r={});try{return gA(t,e,r).format(n)}catch(i){t.onError(new li("Error formatting number.",t.locale,i))}return String(n)}function WM(t,e,n,r){r===void 0&&(r={});try{return gA(t,e,r).formatToParts(n)}catch(i){t.onError(new li("Error formatting number.",t.locale,i))}return[]}function KM(t){var e=t?t[Object.keys(t)[0]]:void 0;return typeof e=="string"}function QM(t){t.onWarn&&t.defaultRichTextElements&&KM(t.messages||{})&&t.onWarn(`[@formatjs/intl] "defaultRichTextElements" was specified but "message" was not pre-compiled. 
Please consider using "@formatjs/cli" to pre-compile your messages for performance.
For more details see https://formatjs.io/docs/getting-started/message-distribution`)}function YM(t,e){var n=bM(e),r=Fe(Fe({},cA),t),i=r.locale,s=r.defaultLocale,a=r.onError;return i?!Intl.NumberFormat.supportedLocalesOf(i).length&&a?a(new WE('Missing locale data for locale: "'.concat(i,'" in Intl.NumberFormat. Using default locale: "').concat(s,'" as fallback. See https://formatjs.io/docs/react-intl#runtime-requirements for more details'))):!Intl.DateTimeFormat.supportedLocalesOf(i).length&&a&&a(new WE('Missing locale data for locale: "'.concat(i,'" in Intl.DateTimeFormat. Using default locale: "').concat(s,'" as fallback. See https://formatjs.io/docs/react-intl#runtime-requirements for more details'))):(a&&a(new xM('"locale" was not configured, using "'.concat(s,'" as fallback. See https://formatjs.io/docs/react-intl/api#intlshape for more details'))),r.locale=r.defaultLocale||"en"),QM(r),Fe(Fe({},r),{formatters:n,formatNumber:GM.bind(null,r,n.getNumberFormat),formatNumberToParts:WM.bind(null,r,n.getNumberFormat),formatRelativeTime:qM.bind(null,r,n.getRelativeTimeFormat),formatDate:RM.bind(null,r,n.getDateTimeFormat),formatDateToParts:DM.bind(null,r,n.getDateTimeFormat),formatTime:kM.bind(null,r,n.getDateTimeFormat),formatDateTimeRange:NM.bind(null,r,n.getDateTimeFormat),formatTimeToParts:OM.bind(null,r,n.getDateTimeFormat),formatPlural:UM.bind(null,r,n.getPluralRules),formatMessage:dv.bind(null,r,n),$t:dv.bind(null,r,n),formatList:BM.bind(null,r,n.getListFormat),formatListToParts:fA.bind(null,r,n.getListFormat),formatDisplayName:LM.bind(null,r,n.getDisplayNames)})}function mA(t){HC(t,"[React Intl] Could not find required `intl` object. <IntlProvider> needs to exist in the component ancestry.")}var pA=Fe(Fe({},cA),{textComponent:G.Fragment});function XM(t){return function(e){return t(G.Children.toArray(e))}}function fv(t,e){if(t===e)return!0;if(!t||!e)return!1;var n=Object.keys(t),r=Object.keys(e),i=n.length;if(r.length!==i)return!1;for(var s=0;s<i;s++){var a=n[s];if(t[a]!==e[a]||!Object.prototype.hasOwnProperty.call(e,a))return!1}return!0}var m0=typeof window<"u"&&!window.__REACT_INTL_BYPASS_GLOBAL_CONTEXT__?window.__REACT_INTL_CONTEXT__||(window.__REACT_INTL_CONTEXT__=G.createContext(null)):G.createContext(null);m0.Consumer;var JM=m0.Provider,ZM=JM,eL=m0;function Zt(){var t=G.useContext(eL);return mA(t),t}var gv;(function(t){t.formatDate="FormattedDate",t.formatTime="FormattedTime",t.formatNumber="FormattedNumber",t.formatList="FormattedList",t.formatDisplayName="FormattedDisplayName"})(gv||(gv={}));var mv;(function(t){t.formatDate="FormattedDateParts",t.formatTime="FormattedTimeParts",t.formatNumber="FormattedNumberParts",t.formatList="FormattedListParts"})(mv||(mv={}));function _A(t){var e=function(n){var r=Zt(),i=n.value,s=n.children,a=xs(n,["value","children"]),c=typeof i=="string"?new Date(i||0):i,h=t==="formatDate"?r.formatDateToParts(c,a):r.formatTimeToParts(c,a);return s(h)};return e.displayName=mv[t],e}function Lh(t){var e=function(n){var r=Zt(),i=n.value,s=n.children,a=xs(n,["value","children"]),c=r[t](i,a);if(typeof s=="function")return s(c);var h=r.textComponent||G.Fragment;return G.createElement(h,null,c)};return e.displayName=gv[t],e}function Pp(t){return{locale:t.locale,timeZone:t.timeZone,fallbackOnEmptyString:t.fallbackOnEmptyString,formats:t.formats,textComponent:t.textComponent,messages:t.messages,defaultLocale:t.defaultLocale,defaultFormats:t.defaultFormats,onError:t.onError,onWarn:t.onWarn,wrapRichTextChunksInFragment:t.wrapRichTextChunksInFragment,defaultRichTextElements:t.defaultRichTextElements}}function vA(t){return t&&Object.keys(t).reduce(function(e,n){var r=t[n];return e[n]=lA(r)?XM(r):r,e},{})}var XE=function(t,e,n,r){for(var i=[],s=4;s<arguments.length;s++)i[s-4]=arguments[s];var a=vA(r),c=dv.apply(void 0,Oi([t,e,n,a],i,!1));return Array.isArray(c)?G.Children.toArray(c):c},JE=function(t,e){var n=t.defaultRichTextElements,r=xs(t,["defaultRichTextElements"]),i=vA(n),s=YM(Fe(Fe(Fe({},pA),r),{defaultRichTextElements:i}),e),a={locale:s.locale,timeZone:s.timeZone,fallbackOnEmptyString:s.fallbackOnEmptyString,formats:s.formats,defaultLocale:s.defaultLocale,defaultFormats:s.defaultFormats,messages:s.messages,onError:s.onError,defaultRichTextElements:i};return Fe(Fe({},s),{formatMessage:XE.bind(null,a,s.formatters),$t:XE.bind(null,a,s.formatters)})},tL=function(t){ai(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.cache=hA(),n.state={cache:n.cache,intl:JE(Pp(n.props),n.cache),prevConfig:Pp(n.props)},n}return e.getDerivedStateFromProps=function(n,r){var i=r.prevConfig,s=r.cache,a=Pp(n);return fv(i,a)?null:{intl:JE(a,s),prevConfig:a}},e.prototype.render=function(){return mA(this.state.intl),G.createElement(ZM,{value:this.state.intl},this.props.children)},e.displayName="IntlProvider",e.defaultProps=pA,e}(G.PureComponent);const nL=tL;function rL(t,e){var n=t.values,r=xs(t,["values"]),i=e.values,s=xs(e,["values"]);return fv(i,n)&&fv(r,s)}function yA(t){var e=Zt(),n=e.formatMessage,r=e.textComponent,i=r===void 0?G.Fragment:r,s=t.id,a=t.description,c=t.defaultMessage,h=t.values,g=t.children,_=t.tagName,w=_===void 0?i:_,T=t.ignoreTag,E={id:s,description:a,defaultMessage:c},$=n(E,h,{ignoreTag:T});return typeof g=="function"?g(Array.isArray($)?$:[$]):w?G.createElement(w,null,G.Children.toArray($)):G.createElement(G.Fragment,null,$)}yA.displayName="FormattedMessage";var wA=G.memo(yA,rL);wA.displayName="MemoizedFormattedMessage";const Tt=wA;Lh("formatDate");Lh("formatTime");Lh("formatNumber");Lh("formatList");Lh("formatDisplayName");_A("formatDate");_A("formatTime");const fe=Rh("div",({css:t,...e})=>({css:SN({display:"flex",minWidth:0,minHeight:0,flex:"none",alignSelf:"auto",alignItems:"stretch",flexDirection:"column",justifyContent:"flex-start",...t}),...e})),IA=t=>{const e=G.useContext(Pi);return R.jsxs(fe,{as:"svg",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 467.27 512",...t,children:[R.jsx("polygon",{fill:e.colors.shape,points:"352.33 159.67 432.16 239.45 432.16 399.13 319.29 512 93.55 512 159.67 445.87 0 286.25 319.29 286.25 272.55 239.45 272.55 79.84 352.33 0 465.26 112.87 352.33 112.87 352.33 159.67"}),R.jsxs("g",{children:[R.jsx("polygon",{fill:e.colors.pieces.mt1,points:"272.57 79.84 272.57 239.45 352.36 319.29 432.19 399.13 432.19 239.45 352.36 159.67 352.36 112.87 465.29 112.87 352.36 0 272.57 79.84"}),R.jsx("polygon",{fill:e.colors.pieces.st1,points:"93.58 512 319.32 512 432.19 399.13 319.32 286.25 93.58 512"}),R.jsx("polygon",{fill:e.colors.pieces.lt2,points:"159.67 445.87 239.48 366.05 319.31 286.24 0.03 286.24 159.67 445.87"})]})]})};var ZE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},iL=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],a=t[n++],c=t[n++],h=((i&7)<<18|(s&63)<<12|(a&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const s=t[n++],a=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},TA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],a=i+1<t.length,c=a?t[i+1]:0,h=i+2<t.length,g=h?t[i+2]:0,_=s>>2,w=(s&3)<<4|c>>4;let T=(c&15)<<2|g>>6,E=g&63;h||(E=64,a||(T=64)),r.push(n[_],n[w],n[T],n[E])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(EA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):iL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;const g=i<t.length?n[t.charAt(i)]:64;++i;const w=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||c==null||g==null||w==null)throw new sL;const T=s<<2|c>>4;if(r.push(T),g!==64){const E=c<<4&240|g>>2;if(r.push(E),w!==64){const $=g<<6&192|w;r.push($)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class sL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const oL=function(t){const e=EA(t);return TA.encodeByteArray(e,!0)},Xf=function(t){return oL(t).replace(/\./g,"")},SA=function(t){try{return TA.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Jf(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!aL(n)||(t[n]=Jf(t[n],e[n]));return t}function aL(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uL=()=>lL().__FIREBASE_DEFAULTS__,cL=()=>{if(typeof process>"u"||typeof ZE>"u")return;const t=ZE.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},hL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&SA(t[1]);return e&&JSON.parse(e)},p0=()=>{try{return uL()||cL()||hL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},xA=()=>{var t;return(t=p0())===null||t===void 0?void 0:t.config},dL=t=>{var e;return(e=p0())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fL=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gL(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),c="";return[Xf(JSON.stringify(n)),Xf(JSON.stringify(a)),c].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function mL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Jt())}function _0(){var t;const e=(t=p0())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function pL(){return typeof self=="object"&&self.self===self}function CA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function v0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function AA(){const t=Jt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function _L(){return!_0()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Xc(){try{return typeof indexedDB=="object"}catch{return!1}}function vL(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yL="FirebaseError";class dr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=yL,Object.setPrototypeOf(this,dr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,za.prototype.create)}}class za{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?wL(s,r):"Error",c=`${this.serviceName}: ${a} (${i}).`;return new dr(i,c,r)}}function wL(t,e){return t.replace(IL,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const IL=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eT(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function EL(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function pv(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],a=e[i];if(tT(s)&&tT(a)){if(!pv(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function tT(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Al(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function ic(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function PA(t,e){const n=new TL(t,e);return n.subscribe.bind(n)}class TL{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");SL(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=bp),i.error===void 0&&(i.error=bp),i.complete===void 0&&(i.complete=bp);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function SL(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function bp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ge(t){return t&&t._delegate?t._delegate:t}class Ji{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xL{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new fL;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(AL(e))try{this.getOrInitializeService({instanceIdentifier:Xo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Xo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xo){return this.instances.has(e)}getOptions(e=Xo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(s);r===c&&a.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:CL(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Xo){return this.component?this.component.multipleInstances?e:Xo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function CL(t){return t===Xo?void 0:t}function AL(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new xL(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y0=[];var lt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(lt||(lt={}));const bA={debug:lt.DEBUG,verbose:lt.VERBOSE,info:lt.INFO,warn:lt.WARN,error:lt.ERROR,silent:lt.SILENT},bL=lt.INFO,RL={[lt.DEBUG]:"log",[lt.VERBOSE]:"log",[lt.INFO]:"info",[lt.WARN]:"warn",[lt.ERROR]:"error"},kL=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=RL[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class nm{constructor(e){this.name=e,this._logLevel=bL,this._logHandler=kL,this._userLogHandler=null,y0.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in lt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?bA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,lt.DEBUG,...e),this._logHandler(this,lt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,lt.VERBOSE,...e),this._logHandler(this,lt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,lt.INFO,...e),this._logHandler(this,lt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,lt.WARN,...e),this._logHandler(this,lt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,lt.ERROR,...e),this._logHandler(this,lt.ERROR,...e)}}function NL(t){y0.forEach(e=>{e.setLogLevel(t)})}function DL(t,e){for(const n of y0){let r=null;e&&e.level&&(r=bA[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,s,...a)=>{const c=a.map(h=>{if(h==null)return null;if(typeof h=="string")return h;if(typeof h=="number"||typeof h=="boolean")return h.toString();if(h instanceof Error)return h.message;try{return JSON.stringify(h)}catch{return null}}).filter(h=>h).join(" ");s>=(r??i.logLevel)&&t({level:lt[s].toLowerCase(),message:c,args:a,type:i.name})}}}const OL=(t,e)=>e.some(n=>t instanceof n);let nT,rT;function ML(){return nT||(nT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function LL(){return rT||(rT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const RA=new WeakMap,_v=new WeakMap,kA=new WeakMap,Rp=new WeakMap,w0=new WeakMap;function VL(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(uo(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&RA.set(n,t)}).catch(()=>{}),w0.set(e,t),e}function FL(t){if(_v.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});_v.set(t,e)}let vv={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return _v.get(t);if(e==="objectStoreNames")return t.objectStoreNames||kA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return uo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function BL(t){vv=t(vv)}function jL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(kp(this),e,...n);return kA.set(r,e.sort?e.sort():[e]),uo(r)}:LL().includes(t)?function(...e){return t.apply(kp(this),e),uo(RA.get(this))}:function(...e){return uo(t.apply(kp(this),e))}}function UL(t){return typeof t=="function"?jL(t):(t instanceof IDBTransaction&&FL(t),OL(t,ML())?new Proxy(t,vv):t)}function uo(t){if(t instanceof IDBRequest)return VL(t);if(Rp.has(t))return Rp.get(t);const e=UL(t);return e!==t&&(Rp.set(t,e),w0.set(e,t)),e}const kp=t=>w0.get(t);function zL(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),c=uo(a);return r&&a.addEventListener("upgradeneeded",h=>{r(uo(a.result),h.oldVersion,h.newVersion,uo(a.transaction),h)}),n&&a.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),c.then(h=>{s&&h.addEventListener("close",()=>s()),i&&h.addEventListener("versionchange",g=>i(g.oldVersion,g.newVersion,g))}).catch(()=>{}),c}const $L=["get","getKey","getAll","getAllKeys","count"],qL=["put","add","delete","clear"],Np=new Map;function iT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Np.get(e))return Np.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=qL.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||$L.includes(n)))return;const s=async function(a,...c){const h=this.transaction(a,i?"readwrite":"readonly");let g=h.store;return r&&(g=g.index(c.shift())),(await Promise.all([g[n](...c),i&&h.done]))[0]};return Np.set(e,s),s}BL(t=>({...t,get:(e,n,r)=>iT(e,n)||t.get(e,n,r),has:(e,n)=>!!iT(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(GL(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function GL(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const yv="@firebase/app",sT="0.9.24";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca=new nm("@firebase/app"),WL="@firebase/app-compat",KL="@firebase/analytics-compat",QL="@firebase/analytics",YL="@firebase/app-check-compat",XL="@firebase/app-check",JL="@firebase/auth",ZL="@firebase/auth-compat",eV="@firebase/database",tV="@firebase/database-compat",nV="@firebase/functions",rV="@firebase/functions-compat",iV="@firebase/installations",sV="@firebase/installations-compat",oV="@firebase/messaging",aV="@firebase/messaging-compat",lV="@firebase/performance",uV="@firebase/performance-compat",cV="@firebase/remote-config",hV="@firebase/remote-config-compat",dV="@firebase/storage",fV="@firebase/storage-compat",gV="@firebase/firestore",mV="@firebase/firestore-compat",pV="firebase",_V="10.7.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo="[DEFAULT]",vV={[yv]:"fire-core",[WL]:"fire-core-compat",[QL]:"fire-analytics",[KL]:"fire-analytics-compat",[XL]:"fire-app-check",[YL]:"fire-app-check-compat",[JL]:"fire-auth",[ZL]:"fire-auth-compat",[eV]:"fire-rtdb",[tV]:"fire-rtdb-compat",[nV]:"fire-fn",[rV]:"fire-fn-compat",[iV]:"fire-iid",[sV]:"fire-iid-compat",[oV]:"fire-fcm",[aV]:"fire-fcm-compat",[lV]:"fire-perf",[uV]:"fire-perf-compat",[cV]:"fire-rc",[hV]:"fire-rc-compat",[dV]:"fire-gcs",[fV]:"fire-gcs-compat",[gV]:"fire-fst",[mV]:"fire-fst-compat","fire-js":"fire-js",[pV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const po=new Map,Jc=new Map;function Zf(t,e){try{t.container.addComponent(e)}catch(n){Ca.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function NA(t,e){t.container.addOrOverwriteComponent(e)}function _o(t){const e=t.name;if(Jc.has(e))return Ca.debug(`There were multiple attempts to register component ${e}.`),!1;Jc.set(e,t);for(const n of po.values())Zf(n,t);return!0}function DA(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function yV(t,e,n=mo){DA(t,e).clearInstance(n)}function wV(){Jc.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},ys=new za("app","Firebase",IV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let EV=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ji("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ys.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const No=_V;function I0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:mo,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw ys.create("bad-app-name",{appName:String(i)});if(n||(n=xA()),!n)throw ys.create("no-options");const s=po.get(i);if(s){if(pv(n,s.options)&&pv(r,s.config))return s;throw ys.create("duplicate-app",{appName:i})}const a=new PL(i);for(const h of Jc.values())a.addComponent(h);const c=new EV(n,r,a);return po.set(i,c),c}function TV(t=mo){const e=po.get(t);if(!e&&t===mo&&xA())return I0();if(!e)throw ys.create("no-app",{appName:t});return e}function SV(){return Array.from(po.values())}async function OA(t){const e=t.name;po.has(e)&&(po.delete(e),await Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)}function Qi(t,e,n){var r;let i=(r=vV[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const c=[`Unable to register library "${i}" with version "${e}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ca.warn(c.join(" "));return}_o(new Ji(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function MA(t,e){if(t!==null&&typeof t!="function")throw ys.create("invalid-log-argument");DL(t,e)}function LA(t){NL(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xV="firebase-heartbeat-database",CV=1,Zc="firebase-heartbeat-store";let Dp=null;function VA(){return Dp||(Dp=zL(xV,CV,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Zc)}}}).catch(t=>{throw ys.create("idb-open",{originalErrorMessage:t.message})})),Dp}async function AV(t){try{return await(await VA()).transaction(Zc).objectStore(Zc).get(FA(t))}catch(e){if(e instanceof dr)Ca.warn(e.message);else{const n=ys.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ca.warn(n.message)}}}async function oT(t,e){try{const r=(await VA()).transaction(Zc,"readwrite");await r.objectStore(Zc).put(e,FA(t)),await r.done}catch(n){if(n instanceof dr)Ca.warn(n.message);else{const r=ys.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ca.warn(r.message)}}}function FA(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PV=1024,bV=30*24*60*60*1e3;class RV{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new NV(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=aT();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const c=new Date(a.date).valueOf();return Date.now()-c<=bV}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=aT(),{heartbeatsToSend:r,unsentEntries:i}=kV(this._heartbeatsCache.heartbeats),s=Xf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function aT(){return new Date().toISOString().substring(0,10)}function kV(t,e=PV){const n=[];let r=t.slice();for(const i of t){const s=n.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),lT(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),lT(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class NV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Xc()?vL().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await AV(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return oT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return oT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function lT(t){return Xf(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DV(t){_o(new Ji("platform-logger",e=>new HL(e),"PRIVATE")),_o(new Ji("heartbeat",e=>new RV(e),"PRIVATE")),Qi(yv,sT,t),Qi(yv,sT,"esm2017"),Qi("fire-js","")}DV("");const OV=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:dr,SDK_VERSION:No,_DEFAULT_ENTRY_NAME:mo,_addComponent:Zf,_addOrOverwriteComponent:NA,_apps:po,_clearComponents:wV,_components:Jc,_getProvider:DA,_registerComponent:_o,_removeServiceInstance:yV,deleteApp:OA,getApp:TV,getApps:SV,initializeApp:I0,onLog:MA,registerVersion:Qi,setLogLevel:LA},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MV{constructor(e,n){this._delegate=e,this.firebase=n,Zf(e,new Ji("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),OA(this._delegate)))}_getService(e,n=mo){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=mo){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Zf(this._delegate,e)}_addOrOverwriteComponent(e){NA(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LV={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},uT=new za("app-compat","Firebase",LV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VV(t){const e={},n={__esModule:!0,initializeApp:s,app:i,registerVersion:Qi,setLogLevel:LA,onLog:MA,apps:null,SDK_VERSION:No,INTERNAL:{registerComponent:c,removeApp:r,useAsService:h,modularAPIs:OV}};n.default=n,Object.defineProperty(n,"apps",{get:a});function r(g){delete e[g]}function i(g){if(g=g||mo,!eT(e,g))throw uT.create("no-app",{appName:g});return e[g]}i.App=t;function s(g,_={}){const w=I0(g,_);if(eT(e,w.name))return e[w.name];const T=new t(w,n);return e[w.name]=T,T}function a(){return Object.keys(e).map(g=>e[g])}function c(g){const _=g.name,w=_.replace("-compat","");if(_o(g)&&g.type==="PUBLIC"){const T=(E=i())=>{if(typeof E[w]!="function")throw uT.create("invalid-app-argument",{appName:_});return E[w]()};g.serviceProps!==void 0&&Jf(T,g.serviceProps),n[w]=T,t.prototype[w]=function(...E){return this._getService.bind(this,_).apply(this,g.multipleInstances?E:[])}}return g.type==="PUBLIC"?n[w]:null}function h(g,_){return _==="serverAuth"?null:_}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BA(){const t=VV(MV);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:BA,extendNamespace:e,createSubscribe:PA,ErrorFactory:za,deepExtend:Jf});function e(n){Jf(t,n)}return t}const FV=BA();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT=new nm("@firebase/app-compat"),BV="@firebase/app-compat",jV="0.2.24";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UV(t){Qi(BV,jV,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(pL()&&self.firebase!==void 0){cT.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);const t=self.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&cT.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}const Ft=FV;UV();var zV="firebase",$V="10.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ft.registerVersion(zV,$V,"app-compat");const Uu={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Ja={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qV(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}}function jA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const HV=qV,GV=jA,UA=new za("auth","Firebase",jA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eg=new nm("@firebase/auth");function WV(t,...e){eg.logLevel<=lt.WARN&&eg.warn(`Auth (${No}): ${t}`,...e)}function cf(t,...e){eg.logLevel<=lt.ERROR&&eg.error(`Auth (${No}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qn(t,...e){throw E0(t,...e)}function Un(t,...e){return E0(t,...e)}function zA(t,e,n){const r=Object.assign(Object.assign({},GV()),{[e]:n});return new za("auth","Firebase",r).create(e,{appName:t.name})}function _u(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&qn(t,"argument-error"),zA(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function E0(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return UA.create(t,...e)}function Ee(t,e,...n){if(!t)throw E0(e,...n)}function Ui(t){const e="INTERNAL ASSERTION FAILED: "+t;throw cf(e),new Error(e)}function xi(t,e){t||Ui(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function T0(){return hT()==="http:"||hT()==="https:"}function hT(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(T0()||CA()||"connection"in navigator)?navigator.onLine:!0}function QV(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,n){this.shortDelay=e,this.longDelay=n,xi(n>e,"Short delay should be less than long delay!"),this.isMobile=mL()||v0()}get(){return KV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S0(t,e){xi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ui("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ui("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ui("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XV=new Vh(3e4,6e4);function on(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function an(t,e,n,r,i={}){return qA(t,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const c=pu(Object.assign({key:t.config.apiKey},a)).slice(1),h=await t._getAdditionalHeaders();return h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode),$A.fetch()(HA(t,t.config.apiHost,n,c),Object.assign({method:e,headers:h,referrerPolicy:"no-referrer"},s))})}async function qA(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},YV),e);try{const i=new ZV(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw sc(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const c=s.ok?a.errorMessage:a.error.message,[h,g]=c.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw sc(t,"credential-already-in-use",a);if(h==="EMAIL_EXISTS")throw sc(t,"email-already-in-use",a);if(h==="USER_DISABLED")throw sc(t,"user-disabled",a);const _=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw zA(t,_,g);qn(t,_)}}catch(i){if(i instanceof dr)throw i;qn(t,"network-request-failed",{message:String(i)})}}async function Rs(t,e,n,r,i={}){const s=await an(t,e,n,r,i);return"mfaPendingCredential"in s&&qn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function HA(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?S0(t.config,i):`${t.config.apiScheme}://${i}`}function JV(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ZV{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Un(this.auth,"network-request-failed")),XV.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function sc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Un(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dT(t){return t!==void 0&&t.getResponse!==void 0}function fT(t){return t!==void 0&&t.enterprise!==void 0}class eF{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return JV(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tF(t){return(await an(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function nF(t,e){return an(t,"GET","/v2/recaptchaConfig",on(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rF(t,e){return an(t,"POST","/v1/accounts:delete",e)}async function iF(t,e){return an(t,"POST","/v1/accounts:update",e)}async function sF(t,e){return an(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function oF(t,e=!1){const n=Ge(t),r=await n.getIdToken(e),i=rm(r);Ee(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Tc(Op(i.auth_time)),issuedAtTime:Tc(Op(i.iat)),expirationTime:Tc(Op(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Op(t){return Number(t)*1e3}function rm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return cf("JWT malformed, contained fewer than 3 sections"),null;try{const i=SA(n);return i?JSON.parse(i):(cf("Failed to decode base64 JWT payload"),null)}catch(i){return cf("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function aF(t){const e=rm(t);return Ee(e,"internal-error"),Ee(typeof e.exp<"u","internal-error"),Ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cs(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof dr&&lF(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function lF({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uF{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Tc(this.lastLoginAt),this.creationTime=Tc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function th(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Cs(t,sF(n,{idToken:r}));Ee(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?dF(s.providerUserInfo):[],c=hF(t.providerData,a),h=t.isAnonymous,g=!(t.email&&s.passwordHash)&&!(c!=null&&c.length),_=h?g:!1,w={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new GA(s.createdAt,s.lastLoginAt),isAnonymous:_};Object.assign(t,w)}async function cF(t){const e=Ge(t);await th(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function hF(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function dF(t){return t.map(e=>{var{providerId:n}=e,r=xs(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fF(t,e){const n=await qA(t,{},async()=>{const r=pu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,a=HA(t,i,"/v1/token",`key=${s}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",$A.fetch()(a,{method:"POST",headers:c,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function gF(t,e){return an(t,"POST","/v2/accounts:revokeToken",on(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ee(e.idToken,"internal-error"),Ee(typeof e.idToken<"u","internal-error"),Ee(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):aF(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return Ee(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await fF(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,a=new nh;return r&&(Ee(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(Ee(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(Ee(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new nh,this.toJSON())}_performRefresh(){return Ui("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fs(t,e){Ee(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class pa{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=xs(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new uF(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new GA(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Cs(this,this.stsTokenManager.getToken(this.auth,e));return Ee(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return oF(this,e)}reload(){return cF(this)}_assign(e){this!==e&&(Ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new pa(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await th(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Cs(this,rF(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,a,c,h,g,_;const w=(r=n.displayName)!==null&&r!==void 0?r:void 0,T=(i=n.email)!==null&&i!==void 0?i:void 0,E=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,$=(a=n.photoURL)!==null&&a!==void 0?a:void 0,U=(c=n.tenantId)!==null&&c!==void 0?c:void 0,J=(h=n._redirectEventId)!==null&&h!==void 0?h:void 0,V=(g=n.createdAt)!==null&&g!==void 0?g:void 0,B=(_=n.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:j,emailVerified:Z,isAnonymous:ne,providerData:te,stsTokenManager:ae}=n;Ee(j&&ae,e,"internal-error");const ce=nh.fromJSON(this.name,ae);Ee(typeof j=="string",e,"internal-error"),Fs(w,e.name),Fs(T,e.name),Ee(typeof Z=="boolean",e,"internal-error"),Ee(typeof ne=="boolean",e,"internal-error"),Fs(E,e.name),Fs($,e.name),Fs(U,e.name),Fs(J,e.name),Fs(V,e.name),Fs(B,e.name);const _e=new pa({uid:j,auth:e,email:T,emailVerified:Z,displayName:w,isAnonymous:ne,photoURL:$,phoneNumber:E,tenantId:U,stsTokenManager:ce,createdAt:V,lastLoginAt:B});return te&&Array.isArray(te)&&(_e.providerData=te.map(me=>Object.assign({},me))),J&&(_e._redirectEventId=J),_e}static async _fromIdTokenResponse(e,n,r=!1){const i=new nh;i.updateFromServerResponse(n);const s=new pa({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await th(s),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT=new Map;function Br(t){xi(t instanceof Function,"Expected a class definition");let e=gT.get(t);return e?(xi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,gT.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}WA.type="NONE";const Jl=WA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _a(t,e,n){return`firebase:${t}:${e}:${n}`}class Ll{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=_a(this.userKey,i.apiKey,s),this.fullPersistenceKey=_a("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?pa._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ll(Br(Jl),e,r);const i=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let s=i[0]||Br(Jl);const a=_a(r,e.config.apiKey,e.name);let c=null;for(const g of n)try{const _=await g._get(a);if(_){const w=pa._fromJSON(e,_);g!==s&&(c=w),s=g;break}}catch{}const h=i.filter(g=>g._shouldAllowMigration);return!s._shouldAllowMigration||!h.length?new Ll(s,e,r):(s=h[0],c&&await s._set(a,c.toJSON()),await Promise.all(n.map(async g=>{if(g!==s)try{await g._remove(a)}catch{}})),new Ll(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mT(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(YA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(KA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(XA(e))return"Blackberry";if(JA(e))return"Webos";if(x0(e))return"Safari";if((e.includes("chrome/")||QA(e))&&!e.includes("edge/"))return"Chrome";if(Fh(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function KA(t=Jt()){return/firefox\//i.test(t)}function x0(t=Jt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function QA(t=Jt()){return/crios\//i.test(t)}function YA(t=Jt()){return/iemobile/i.test(t)}function Fh(t=Jt()){return/android/i.test(t)}function XA(t=Jt()){return/blackberry/i.test(t)}function JA(t=Jt()){return/webos/i.test(t)}function vu(t=Jt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function mF(t=Jt()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function pF(t=Jt()){var e;return vu(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function _F(){return AA()&&document.documentMode===10}function ZA(t=Jt()){return vu(t)||Fh(t)||JA(t)||XA(t)||/windows phone/i.test(t)||YA(t)}function vF(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eP(t,e=[]){let n;switch(t){case"Browser":n=mT(Jt());break;case"Worker":n=`${mT(Jt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${No}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yF{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((a,c)=>{try{const h=e(s);a(h)}catch(h){c(h)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wF(t,e={}){return an(t,"GET","/v2/passwordPolicy",on(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IF=6;class EF{constructor(e){var n,r,i,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:IF,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,a,c;const h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(n=h.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),h.isValid&&(h.isValid=(r=h.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),h.isValid&&(h.isValid=(i=h.containsLowercaseLetter)!==null&&i!==void 0?i:!0),h.isValid&&(h.isValid=(s=h.containsUppercaseLetter)!==null&&s!==void 0?s:!0),h.isValid&&(h.isValid=(a=h.containsNumericCharacter)!==null&&a!==void 0?a:!0),h.isValid&&(h.isValid=(c=h.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),h}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TF{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pT(this),this.idTokenSubscription=new pT(this),this.beforeStateQueue=new yF(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=UA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Br(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Ll.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=i==null?void 0:i._redirectEventId,h=await this.tryRedirectSignIn(e);(!a||a===c)&&(h!=null&&h.user)&&(i=h.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await th(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=QV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?Ge(e):null;return n&&Ee(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Br(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await wF(this),n=new EF(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new za("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await gF(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Br(e)||this._popupRedirectResolver;Ee(n,this,"argument-error"),this.redirectPersistenceManager=await Ll.create(this,[Br(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ee(c,this,"internal-error"),c.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const h=e.addObserver(n,r,i);return()=>{a=!0,h()}}else{const h=e.addObserver(n);return()=>{a=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=eP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&WV(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function nn(t){return Ge(t)}class pT{constructor(e){this.auth=e,this.observer=null,this.addObserver=PA(n=>this.observer=n)}get next(){return Ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SF(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function C0(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Un("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",SF().appendChild(r)})}function tP(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const xF="https://www.google.com/recaptcha/enterprise.js?render=",CF="recaptcha-enterprise",AF="NO_RECAPTCHA";class PF{constructor(e){this.type=CF,this.auth=nn(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,c)=>{nF(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const g=new eF(h);return s.tenantId==null?s._agentRecaptchaConfig=g:s._tenantRecaptchaConfigs[s.tenantId]=g,a(g.siteKey)}}).catch(h=>{c(h)})})}function i(s,a,c){const h=window.grecaptcha;fT(h)?h.enterprise.ready(()=>{h.enterprise.execute(s,{action:e}).then(g=>{a(g)}).catch(()=>{a(AF)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,a)=>{r(this.auth).then(c=>{if(!n&&fT(window.grecaptcha))i(c,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}C0(xF+c).then(()=>{i(c,s,a)}).catch(h=>{a(h)})}}).catch(c=>{a(c)})})}}async function _T(t,e,n,r=!1){const i=new PF(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const a=Object.assign({},e);return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function rh(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await _T(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await _T(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(s)})}function bF(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Br);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function RF(t,e,n){const r=nn(t);Ee(r._canInitEmulator,r,"emulator-config-failed"),Ee(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=nP(e),{host:a,port:c}=kF(e),h=c===null?"":`:${c}`;r.config.emulator={url:`${s}//${a}${h}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||NF()}function nP(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function kF(t){const e=nP(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:vT(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:vT(a)}}}function vT(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function NF(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ui("not implemented")}_getIdTokenResponse(e){return Ui("not implemented")}_linkToIdToken(e,n){return Ui("not implemented")}_getReauthenticationResolver(e){return Ui("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rP(t,e){return an(t,"POST","/v1/accounts:resetPassword",on(t,e))}async function DF(t,e){return an(t,"POST","/v1/accounts:update",e)}async function OF(t,e){return an(t,"POST","/v1/accounts:signUp",e)}async function MF(t,e){return an(t,"POST","/v1/accounts:update",on(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LF(t,e){return Rs(t,"POST","/v1/accounts:signInWithPassword",on(t,e))}async function im(t,e){return an(t,"POST","/v1/accounts:sendOobCode",on(t,e))}async function VF(t,e){return im(t,e)}async function FF(t,e){return im(t,e)}async function BF(t,e){return im(t,e)}async function jF(t,e){return im(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UF(t,e){return Rs(t,"POST","/v1/accounts:signInWithEmailLink",on(t,e))}async function zF(t,e){return Rs(t,"POST","/v1/accounts:signInWithEmailLink",on(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih extends yu{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new ih(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new ih(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return rh(e,n,"signInWithPassword",LF);case"emailLink":return UF(e,{email:this._email,oobCode:this._password});default:qn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return rh(e,r,"signUpPassword",OF);case"emailLink":return zF(e,{idToken:n,email:this._email,oobCode:this._password});default:qn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ws(t,e){return Rs(t,"POST","/v1/accounts:signInWithIdp",on(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $F="http://localhost";class Zi extends yu{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Zi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):qn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=xs(n,["providerId","signInMethod"]);if(!r||!i)return null;const a=new Zi(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return ws(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ws(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ws(e,n)}buildRequest(){const e={requestUri:$F,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=pu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qF(t,e){return an(t,"POST","/v1/accounts:sendVerificationCode",on(t,e))}async function HF(t,e){return Rs(t,"POST","/v1/accounts:signInWithPhoneNumber",on(t,e))}async function GF(t,e){const n=await Rs(t,"POST","/v1/accounts:signInWithPhoneNumber",on(t,e));if(n.temporaryProof)throw sc(t,"account-exists-with-different-credential",n);return n}const WF={USER_NOT_FOUND:"user-not-found"};async function KF(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Rs(t,"POST","/v1/accounts:signInWithPhoneNumber",on(t,n),WF)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va extends yu{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new va({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new va({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return HF(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return GF(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return KF(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!n&&!i&&!s?null:new va({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QF(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function YF(t){const e=Al(ic(t)).link,n=e?Al(ic(e)).deep_link_id:null,r=Al(ic(t)).deep_link_id;return(r?Al(ic(r)).link:null)||r||n||e||t}class sm{constructor(e){var n,r,i,s,a,c;const h=Al(ic(e)),g=(n=h.apiKey)!==null&&n!==void 0?n:null,_=(r=h.oobCode)!==null&&r!==void 0?r:null,w=QF((i=h.mode)!==null&&i!==void 0?i:null);Ee(g&&_&&w,"argument-error"),this.apiKey=g,this.operation=w,this.code=_,this.continueUrl=(s=h.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(a=h.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(c=h.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=YF(e);try{return new sm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(){this.providerId=Do.PROVIDER_ID}static credential(e,n){return ih._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=sm.parseLink(n);return Ee(r,"argument-error"),ih._fromEmailAndCode(e,r.code,r.tenantId)}}Do.PROVIDER_ID="password";Do.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Do.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu extends ks{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Vl extends wu{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return Ee("providerId"in n&&"signInMethod"in n,"argument-error"),Zi._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return Ee(e.idToken||e.accessToken,"argument-error"),Zi._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Vl.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Vl.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:a,providerId:c}=e;if(!r&&!i&&!n&&!s||!c)return null;try{return new Vl(c)._credential({idToken:n,accessToken:r,nonce:a,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li extends wu{constructor(){super("facebook.com")}static credential(e){return Zi._fromParams({providerId:Li.PROVIDER_ID,signInMethod:Li.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Li.credentialFromTaggedObject(e)}static credentialFromError(e){return Li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Li.credential(e.oauthAccessToken)}catch{return null}}}Li.FACEBOOK_SIGN_IN_METHOD="facebook.com";Li.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi extends wu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Zi._fromParams({providerId:Vi.PROVIDER_ID,signInMethod:Vi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Vi.credentialFromTaggedObject(e)}static credentialFromError(e){return Vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Vi.credential(n,r)}catch{return null}}}Vi.GOOGLE_SIGN_IN_METHOD="google.com";Vi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi extends wu{constructor(){super("github.com")}static credential(e){return Zi._fromParams({providerId:Fi.PROVIDER_ID,signInMethod:Fi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fi.credentialFromTaggedObject(e)}static credentialFromError(e){return Fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fi.credential(e.oauthAccessToken)}catch{return null}}}Fi.GITHUB_SIGN_IN_METHOD="github.com";Fi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XF="http://localhost";class Zl extends yu{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return ws(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ws(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ws(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:s}=n;return!r||!i||!s||r!==i?null:new Zl(r,s)}static _create(e,n){return new Zl(e,n)}buildRequest(){return{requestUri:XF,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JF="saml.";class tg extends ks{constructor(e){Ee(e.startsWith(JF),"argument-error"),super(e)}static credentialFromResult(e){return tg.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return tg.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=Zl.fromJSON(e);return Ee(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return Zl._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi extends wu{constructor(){super("twitter.com")}static credential(e,n){return Zi._fromParams({providerId:Bi.PROVIDER_ID,signInMethod:Bi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Bi.credentialFromTaggedObject(e)}static credentialFromError(e){return Bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Bi.credential(n,r)}catch{return null}}}Bi.TWITTER_SIGN_IN_METHOD="twitter.com";Bi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iP(t,e){return Rs(t,"POST","/v1/accounts:signUp",on(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await pa._fromIdTokenResponse(e,r,i),a=yT(r);return new oi({user:s,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=yT(r);return new oi({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function yT(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZF(t){var e;const n=nn(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new oi({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await iP(n,{returnSecureToken:!0}),i=await oi._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng extends dr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,ng.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new ng(e,n,r,i)}}function sP(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?ng._fromErrorAndOperation(t,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oP(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e5(t,e){const n=Ge(t);await om(!0,n,e);const{providerUserInfo:r}=await iF(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=oP(r||[]);return n.providerData=n.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function A0(t,e,n=!1){const r=await Cs(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return oi._forOperation(t,"link",r)}async function om(t,e,n){await th(e);const r=oP(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";Ee(r.has(n)===t,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aP(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const s=await Cs(t,sP(r,i,e,t),n);Ee(s.idToken,r,"internal-error");const a=rm(s.idToken);Ee(a,r,"internal-error");const{sub:c}=a;return Ee(t.uid===c,r,"user-mismatch"),oi._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&qn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lP(t,e,n=!1){const r="signIn",i=await sP(t,r,e),s=await oi._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function am(t,e){return lP(nn(t),e)}async function uP(t,e){const n=Ge(t);return await om(!1,n,e.providerId),A0(n,e)}async function cP(t,e){return aP(Ge(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t5(t,e){return Rs(t,"POST","/v1/accounts:signInWithCustomToken",on(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n5(t,e){const n=nn(t),r=await t5(n,{token:e,returnSecureToken:!0}),i=await oi._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?P0._fromServerResponse(e,n):"totpInfo"in n?b0._fromServerResponse(e,n):qn(e,"internal-error")}}class P0 extends Bh{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new P0(n)}}class b0 extends Bh{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new b0(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lm(t,e,n){var r;Ee(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),Ee(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Ee(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(Ee(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R0(t){const e=nn(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function r5(t,e,n){const r=nn(t),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&lm(r,i,n),await rh(r,i,"getOobCode",FF)}async function i5(t,e,n){await rP(Ge(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&R0(t),r})}async function s5(t,e){await MF(Ge(t),{oobCode:e})}async function hP(t,e){const n=Ge(t),r=await rP(n,{oobCode:e}),i=r.requestType;switch(Ee(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ee(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ee(r.mfaInfo,n,"internal-error");default:Ee(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=Bh._fromServerResponse(nn(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function o5(t,e){const{data:n}=await hP(Ge(t),e);return n.email}async function a5(t,e,n){const r=nn(t),a=await rh(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",iP).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&R0(t),h}),c=await oi._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(c.user),c}function l5(t,e,n){return am(Ge(t),Do.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&R0(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u5(t,e,n){const r=nn(t),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(a,c){Ee(c.handleCodeInApp,r,"argument-error"),c&&lm(r,a,c)}s(i,n),await rh(r,i,"getOobCode",BF)}function c5(t,e){const n=sm.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function h5(t,e,n){const r=Ge(t),i=Do.credentialWithLink(e,n||eh());return Ee(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),am(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d5(t,e){return an(t,"POST","/v1/accounts:createAuthUri",on(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f5(t,e){const n=T0()?eh():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await d5(Ge(t),r);return i||[]}async function g5(t,e){const n=Ge(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&lm(n.auth,i,e);const{email:s}=await VF(n.auth,i);s!==t.email&&await t.reload()}async function m5(t,e,n){const r=Ge(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&lm(r.auth,s,n);const{email:a}=await jF(r.auth,s);a!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p5(t,e){return an(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _5(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Ge(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},a=await Cs(r,p5(r.auth,s));r.displayName=a.displayName||null,r.photoURL=a.photoUrl||null;const c=r.providerData.find(({providerId:h})=>h==="password");c&&(c.displayName=r.displayName,c.photoURL=r.photoURL),await r._updateTokensIfNecessary(a)}function v5(t,e){return dP(Ge(t),e,null)}function y5(t,e){return dP(Ge(t),null,e)}async function dP(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const a=await Cs(t,DF(r,s));await t._updateTokensIfNecessary(a,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w5(t){var e,n;if(!t)return null;const{providerId:r}=t,i=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},s=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(t!=null&&t.idToken)){const a=(n=(e=rm(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(a){const c=a!=="anonymous"&&a!=="custom"?a:null;return new Fl(s,c)}}if(!r)return null;switch(r){case"facebook.com":return new I5(s,i);case"github.com":return new E5(s,i);case"google.com":return new T5(s,i);case"twitter.com":return new S5(s,i,t.screenName||null);case"custom":case"anonymous":return new Fl(s,null);default:return new Fl(s,r,i)}}class Fl{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class fP extends Fl{constructor(e,n,r,i){super(e,n,r),this.username=i}}class I5 extends Fl{constructor(e,n){super(e,"facebook.com",n)}}class E5 extends fP{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class T5 extends Fl{constructor(e,n){super(e,"google.com",n)}}class S5 extends fP{constructor(e,n,r){super(e,"twitter.com",n,r)}}function x5(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:w5(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e,n,r){this.type=e,this.credential=n,this.user=r}static _fromIdtoken(e,n){return new la("enroll",e,n)}static _fromMfaPendingCredential(e){return new la("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return la._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return la._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=nn(e),i=n.customData._serverResponse,s=(i.mfaInfo||[]).map(c=>Bh._fromServerResponse(r,c));Ee(i.mfaPendingCredential,r,"internal-error");const a=la._fromMfaPendingCredential(i.mfaPendingCredential);return new k0(a,s,async c=>{const h=await c._process(r,a);delete i.mfaInfo,delete i.mfaPendingCredential;const g=Object.assign(Object.assign({},i),{idToken:h.idToken,refreshToken:h.refreshToken});switch(n.operationType){case"signIn":const _=await oi._fromIdTokenResponse(r,n.operationType,g);return await r._updateCurrentUser(_.user),_;case"reauthenticate":return Ee(n.user,r,"internal-error"),oi._forOperation(n.user,n.operationType,g);default:qn(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function C5(t,e){var n;const r=Ge(t),i=e;return Ee(e.customData.operationType,r,"argument-error"),Ee((n=i.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,r,"argument-error"),k0._fromError(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A5(t,e){return an(t,"POST","/v2/accounts/mfaEnrollment:start",on(t,e))}function P5(t,e){return an(t,"POST","/v2/accounts/mfaEnrollment:finalize",on(t,e))}function b5(t,e){return an(t,"POST","/v2/accounts/mfaEnrollment:withdraw",on(t,e))}class N0{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>Bh._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new N0(e)}async getSession(){return la._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const r=e,i=await this.getSession(),s=await Cs(this.user,r._process(this.user.auth,i,n));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await Cs(this.user,b5(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==n),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const Mp=new WeakMap;function R5(t){const e=Ge(t);return Mp.has(e)||Mp.set(e,N0._fromUser(e)),Mp.get(e)}const rg="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(rg,"1"),this.storage.removeItem(rg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k5(){const t=Jt();return x0(t)||vu(t)}const N5=1e3,D5=10;class mP extends gP{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=k5()&&vF(),this.fallbackToPolling=ZA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,c,h)=>{this.notifyListeners(a,h)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(r);if(e.newValue!==a)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);_F()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,D5):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},N5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}mP.type="LOCAL";const D0=mP;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP extends gP{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}pP.type="SESSION";const Aa=pP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O5(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new um(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(a).map(async g=>g(n.origin,s)),h=await O5(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:h})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}um.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jh(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M5{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((c,h)=>{const g=jh("",20);i.port1.start();const _=setTimeout(()=>{h(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(w){const T=w;if(T.data.eventId===g)switch(T.data.status){case"ack":clearTimeout(_),s=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(T.data.response);break;default:clearTimeout(_),clearTimeout(s),h(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(){return window}function L5(t){pn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O0(){return typeof pn().WorkerGlobalScope<"u"&&typeof pn().importScripts=="function"}async function V5(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function F5(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function B5(){return O0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _P="firebaseLocalStorageDb",j5=1,ig="firebaseLocalStorage",vP="fbase_key";class Uh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function cm(t,e){return t.transaction([ig],e?"readwrite":"readonly").objectStore(ig)}function U5(){const t=indexedDB.deleteDatabase(_P);return new Uh(t).toPromise()}function wv(){const t=indexedDB.open(_P,j5);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(ig,{keyPath:vP})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(ig)?e(r):(r.close(),await U5(),e(await wv()))})})}async function wT(t,e,n){const r=cm(t,!0).put({[vP]:e,value:n});return new Uh(r).toPromise()}async function z5(t,e){const n=cm(t,!1).get(e),r=await new Uh(n).toPromise();return r===void 0?null:r.value}function IT(t,e){const n=cm(t,!0).delete(e);return new Uh(n).toPromise()}const $5=800,q5=3;class yP{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await wv(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>q5)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return O0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=um._getInstance(B5()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await V5(),!this.activeServiceWorker)return;this.sender=new M5(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||F5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await wv();return await wT(e,rg,"1"),await IT(e,rg),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>wT(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>z5(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>IT(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=cm(i,!1).getAll();return new Uh(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),$5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}yP.type="LOCAL";const sh=yP;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H5(t,e){return an(t,"POST","/v2/accounts/mfaSignIn:start",on(t,e))}function G5(t,e){return an(t,"POST","/v2/accounts/mfaSignIn:finalize",on(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W5=500,K5=6e4,Ld=1e12;class Q5{constructor(e){this.auth=e,this.counter=Ld,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new Y5(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||Ld;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||Ld;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||Ld;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class Y5{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;Ee(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=X5(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},K5)},W5))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function X5(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lp=tP("rcb"),J5=new Vh(3e4,6e4),Z5="https://www.google.com/recaptcha/api.js?";class e4{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=pn().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return Ee(t4(n),e,"argument-error"),this.shouldResolveImmediately(n)&&dT(pn().grecaptcha)?Promise.resolve(pn().grecaptcha):new Promise((r,i)=>{const s=pn().setTimeout(()=>{i(Un(e,"network-request-failed"))},J5.get());pn()[Lp]=()=>{pn().clearTimeout(s),delete pn()[Lp];const c=pn().grecaptcha;if(!c||!dT(c)){i(Un(e,"internal-error"));return}const h=c.render;c.render=(g,_)=>{const w=h(g,_);return this.counter++,w},this.hostLanguage=n,r(c)};const a=`${Z5}?${pu({onload:Lp,render:"explicit",hl:n})}`;C0(a).catch(()=>{clearTimeout(s),i(Un(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=pn().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function t4(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class n4{async load(e){return new Q5(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wP="recaptcha",r4={theme:"light",type:"image"};let i4=class{constructor(e,n,r=Object.assign({},r4)){this.parameters=r,this.type=wP,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=nn(e),this.isInvisible=this.parameters.size==="invisible",Ee(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof n=="string"?document.getElementById(n):n;Ee(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new n4:new e4,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const s=a=>{a&&(this.tokenChangeListeners.delete(s),i(a))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){Ee(!this.parameters.sitekey,this.auth,"argument-error"),Ee(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ee(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=pn()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){Ee(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){Ee(T0()&&!O0(),this.auth,"internal-error"),await s4(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await tF(this.auth);Ee(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return Ee(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function s4(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=va._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function o4(t,e,n){const r=nn(t),i=await hm(r,e,Ge(n));return new M0(i,s=>am(r,s))}async function a4(t,e,n){const r=Ge(t);await om(!1,r,"phone");const i=await hm(r.auth,e,Ge(n));return new M0(i,s=>uP(r,s))}async function l4(t,e,n){const r=Ge(t),i=await hm(r.auth,e,Ge(n));return new M0(i,s=>cP(r,s))}async function hm(t,e,n){var r;const i=await n.verify();try{Ee(typeof i=="string",t,"argument-error"),Ee(n.type===wP,t,"argument-error");let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const a=s.session;if("phoneNumber"in s)return Ee(a.type==="enroll",t,"internal-error"),(await A5(t,{idToken:a.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{Ee(a.type==="signin",t,"internal-error");const c=((r=s.multiFactorHint)===null||r===void 0?void 0:r.uid)||s.multiFactorUid;return Ee(c,t,"missing-multi-factor-info"),(await H5(t,{mfaPendingCredential:a.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:a}=await qF(t,{phoneNumber:s.phoneNumber,recaptchaToken:i});return a}}finally{n._reset()}}async function u4(t,e){await A0(Ge(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pa=class hf{constructor(e){this.providerId=hf.PROVIDER_ID,this.auth=nn(e)}verifyPhoneNumber(e,n){return hm(this.auth,e,Ge(n))}static credential(e,n){return va._fromVerification(e,n)}static credentialFromResult(e){const n=e;return hf.credentialFromTaggedObject(n)}static credentialFromError(e){return hf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?va._fromTokenResponse(n,r):null}};Pa.PROVIDER_ID="phone";Pa.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $a(t,e){return e?Br(e):(Ee(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0 extends yu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ws(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ws(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ws(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function c4(t){return lP(t.auth,new L0(t),t.bypassAuthState)}function h4(t){const{auth:e,user:n}=t;return Ee(n,e,"internal-error"),aP(n,new L0(t),t.bypassAuthState)}async function d4(t){const{auth:e,user:n}=t;return Ee(n,e,"internal-error"),A0(n,new L0(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:a,type:c}=e;if(a){this.reject(a);return}const h={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(h))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return c4;case"linkViaPopup":case"linkViaRedirect":return d4;case"reauthViaPopup":case"reauthViaRedirect":return h4;default:qn(this.auth,"internal-error")}}resolve(e){xi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){xi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f4=new Vh(2e3,1e4);async function g4(t,e,n){const r=nn(t);_u(t,e,ks);const i=$a(r,n);return new ms(r,"signInViaPopup",e,i).executeNotNull()}async function m4(t,e,n){const r=Ge(t);_u(r.auth,e,ks);const i=$a(r.auth,n);return new ms(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function p4(t,e,n){const r=Ge(t);_u(r.auth,e,ks);const i=$a(r.auth,n);return new ms(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class ms extends IP{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,ms.currentPopupAction&&ms.currentPopupAction.cancel(),ms.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ee(e,this.auth,"internal-error"),e}async onExecution(){xi(this.filter.length===1,"Popup operations only handle one event");const e=jh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Un(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Un(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ms.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Un(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,f4.get())};e()}}ms.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _4="pendingRedirect",Sc=new Map;class v4 extends IP{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Sc.get(this.auth._key());if(!e){try{const r=await y4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Sc.set(this.auth._key(),e)}return this.bypassAuthState||Sc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function y4(t,e){const n=TP(e),r=EP(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function V0(t,e){return EP(t)._set(TP(e),"true")}function w4(){Sc.clear()}function F0(t,e){Sc.set(t._key(),e)}function EP(t){return Br(t._redirectPersistence)}function TP(t){return _a(_4,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I4(t,e,n){return E4(t,e,n)}async function E4(t,e,n){const r=nn(t);_u(t,e,ks),await r._initializationPromise;const i=$a(r,n);return await V0(i,r),i._openRedirect(r,e,"signInViaRedirect")}function T4(t,e,n){return S4(t,e,n)}async function S4(t,e,n){const r=Ge(t);_u(r.auth,e,ks),await r.auth._initializationPromise;const i=$a(r.auth,n);await V0(i,r.auth);const s=await SP(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",s)}function x4(t,e,n){return C4(t,e,n)}async function C4(t,e,n){const r=Ge(t);_u(r.auth,e,ks),await r.auth._initializationPromise;const i=$a(r.auth,n);await om(!1,r,e.providerId),await V0(i,r.auth);const s=await SP(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)}async function A4(t,e){return await nn(t)._initializationPromise,dm(t,e,!1)}async function dm(t,e,n=!1){const r=nn(t),i=$a(r,e),a=await new v4(r,i,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}async function SP(t){const e=jh(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P4=10*60*1e3;class xP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!b4(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!CP(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Un(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=P4&&this.cachedEventUids.clear(),this.cachedEventUids.has(ET(e))}saveEventToCache(e){this.cachedEventUids.add(ET(e)),this.lastProcessedEventTime=Date.now()}}function ET(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function CP({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function b4(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return CP(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AP(t,e={}){return an(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,k4=/^https?/;async function N4(t){if(t.config.emulator)return;const{authorizedDomains:e}=await AP(t);for(const n of e)try{if(D4(n))return}catch{}qn(t,"unauthorized-domain")}function D4(t){const e=eh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!k4.test(n))return!1;if(R4.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O4=new Vh(3e4,6e4);function TT(){const t=pn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function M4(t){return new Promise((e,n)=>{var r,i,s;function a(){TT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{TT(),n(Un(t,"network-request-failed"))},timeout:O4.get()})}if(!((i=(r=pn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=pn().gapi)===null||s===void 0)&&s.load)a();else{const c=tP("iframefcb");return pn()[c]=()=>{gapi.load?a():n(Un(t,"network-request-failed"))},C0(`https://apis.google.com/js/api.js?onload=${c}`).catch(h=>n(h))}}).catch(e=>{throw df=null,e})}let df=null;function L4(t){return df=df||M4(t),df}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V4=new Vh(5e3,15e3),F4="__/auth/iframe",B4="emulator/auth/iframe",j4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},U4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function z4(t){const e=t.config;Ee(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?S0(e,B4):`https://${t.config.authDomain}/${F4}`,r={apiKey:e.apiKey,appName:t.name,v:No},i=U4.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${pu(r).slice(1)}`}async function $4(t){const e=await L4(t),n=pn().gapi;return Ee(n,t,"internal-error"),e.open({where:document.body,url:z4(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:j4,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=Un(t,"network-request-failed"),c=pn().setTimeout(()=>{s(a)},V4.get());function h(){pn().clearTimeout(c),i(r)}r.ping(h).then(h,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},H4=500,G4=600,W4="_blank",K4="http://localhost";class ST{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Q4(t,e,n,r=H4,i=G4){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const h=Object.assign(Object.assign({},q4),{width:r.toString(),height:i.toString(),top:s,left:a}),g=Jt().toLowerCase();n&&(c=QA(g)?W4:n),KA(g)&&(e=e||K4,h.scrollbars="yes");const _=Object.entries(h).reduce((T,[E,$])=>`${T}${E}=${$},`,"");if(pF(g)&&c!=="_self")return Y4(e||"",c),new ST(null);const w=window.open(e||"",c,_);Ee(w,t,"popup-blocked");try{w.focus()}catch{}return new ST(w)}function Y4(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X4="__/auth/handler",J4="emulator/auth/handler",Z4=encodeURIComponent("fac");async function Iv(t,e,n,r,i,s){Ee(t.config.authDomain,t,"auth-domain-config-required"),Ee(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:No,eventId:i};if(e instanceof ks){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",EL(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,w]of Object.entries(s||{}))a[_]=w}if(e instanceof wu){const _=e.getScopes().filter(w=>w!=="");_.length>0&&(a.scopes=_.join(","))}t.tenantId&&(a.tid=t.tenantId);const c=a;for(const _ of Object.keys(c))c[_]===void 0&&delete c[_];const h=await t._getAppCheckToken(),g=h?`#${Z4}=${encodeURIComponent(h)}`:"";return`${e3(t)}?${pu(c).slice(1)}${g}`}function e3({config:t}){return t.emulator?S0(t,J4):`https://${t.authDomain}/${X4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vp="webStorageSupport";class t3{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Aa,this._completeRedirectFn=dm,this._overrideRedirectResult=F0}async _openPopup(e,n,r,i){var s;xi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await Iv(e,n,r,eh(),i);return Q4(e,a,jh())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await Iv(e,n,r,eh(),i);return L5(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(xi(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await $4(e),r=new xP(e);return n.register("authEvent",i=>(Ee(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Vp,{type:Vp},i=>{var s;const a=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Vp];a!==void 0&&n(!!a),qn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=N4(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return ZA()||x0()||vu()}}const n3=t3;class r3{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return Ui("unexpected MultiFactorSessionType")}}}class B0 extends r3{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new B0(e)}_finalizeEnroll(e,n,r){return P5(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return G5(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class PP{constructor(){}static assertion(e){return B0._fromCredential(e)}}PP.FACTOR_ID="phone";var xT="@firebase/auth",CT="1.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i3{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s3(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function o3(t){_o(new Ji("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=r.options;Ee(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:a,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:eP(t)},g=new TF(r,i,s,h);return bF(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),_o(new Ji("auth-internal",e=>{const n=nn(e.getProvider("auth").getImmediate());return(r=>new i3(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Qi(xT,CT,s3(t)),Qi(xT,CT,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a3=5*60;dL("authIdTokenMaxAge");o3("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ba(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l3=2e3;async function u3(t,e,n){var r;const{BuildInfo:i}=ba();xi(e.sessionId,"AuthEvent did not contain a session ID");const s=await g3(e.sessionId),a={};return vu()?a.ibi=i.packageName:Fh()?a.apn=i.packageName:qn(t,"operation-not-supported-in-this-environment"),i.displayName&&(a.appDisplayName=i.displayName),a.sessionId=s,Iv(t,n,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,a)}async function c3(t){const{BuildInfo:e}=ba(),n={};vu()?n.iosBundleId=e.packageName:Fh()?n.androidPackageName=e.packageName:qn(t,"operation-not-supported-in-this-environment"),await AP(t,n)}function h3(t){const{cordova:e}=ba();return new Promise(n=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(t):i=e.InAppBrowser.open(t,mF()?"_blank":"_system","location=yes"),n(i)})})}async function d3(t,e,n){const{cordova:r}=ba();let i=()=>{};try{await new Promise((s,a)=>{let c=null;function h(){var w;s();const T=(w=r.plugins.browsertab)===null||w===void 0?void 0:w.close;typeof T=="function"&&T(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function g(){c||(c=window.setTimeout(()=>{a(Un(t,"redirect-cancelled-by-user"))},l3))}function _(){(document==null?void 0:document.visibilityState)==="visible"&&g()}e.addPassiveListener(h),document.addEventListener("resume",g,!1),Fh()&&document.addEventListener("visibilitychange",_,!1),i=()=>{e.removePassiveListener(h),document.removeEventListener("resume",g,!1),document.removeEventListener("visibilitychange",_,!1),c&&window.clearTimeout(c)}})}finally{i()}}function f3(t){var e,n,r,i,s,a,c,h,g,_;const w=ba();Ee(typeof((e=w==null?void 0:w.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Ee(typeof((n=w==null?void 0:w.BuildInfo)===null||n===void 0?void 0:n.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Ee(typeof((s=(i=(r=w==null?void 0:w.cordova)===null||r===void 0?void 0:r.plugins)===null||i===void 0?void 0:i.browsertab)===null||s===void 0?void 0:s.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ee(typeof((h=(c=(a=w==null?void 0:w.cordova)===null||a===void 0?void 0:a.plugins)===null||c===void 0?void 0:c.browsertab)===null||h===void 0?void 0:h.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ee(typeof((_=(g=w==null?void 0:w.cordova)===null||g===void 0?void 0:g.InAppBrowser)===null||_===void 0?void 0:_.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function g3(t){const e=m3(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")}function m3(t){if(xi(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p3=20;class _3 extends xP{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function v3(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:I3(),postBody:null,tenantId:t.tenantId,error:Un(t,"no-auth-event")}}function y3(t,e){return Ev()._set(Tv(t),e)}async function AT(t){const e=await Ev()._get(Tv(t));return e&&await Ev()._remove(Tv(t)),e}function w3(t,e){var n,r;const i=T3(e);if(i.includes("/__/auth/callback")){const s=ff(i),a=s.firebaseError?E3(decodeURIComponent(s.firebaseError)):null,c=(r=(n=a==null?void 0:a.code)===null||n===void 0?void 0:n.split("auth/"))===null||r===void 0?void 0:r[1],h=c?Un(c):null;return h?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:h,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:i,postBody:null}}return null}function I3(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<p3;n++){const r=Math.floor(Math.random()*e.length);t.push(e.charAt(r))}return t.join("")}function Ev(){return Br(D0)}function Tv(t){return _a("authEvent",t.config.apiKey,t.name)}function E3(t){try{return JSON.parse(t)}catch{return null}}function T3(t){const e=ff(t),n=e.link?decodeURIComponent(e.link):void 0,r=ff(n).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return ff(i).link||i||r||n||t}function ff(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return Al(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S3=500;class x3{constructor(){this._redirectPersistence=Aa,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=dm,this._overrideRedirectResult=F0}async _initialize(e){const n=e._key();let r=this.eventManagers.get(n);return r||(r=new _3(e),this.eventManagers.set(n,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){qn(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,r,i){f3(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),w4(),await this._originValidation(e);const a=v3(e,r,i);await y3(e,a);const c=await u3(e,a,n),h=await h3(c);return d3(e,s,h)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=c3(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:r,handleOpenURL:i,BuildInfo:s}=ba(),a=setTimeout(async()=>{await AT(e),n.onEvent(PT())},S3),c=async _=>{clearTimeout(a);const w=await AT(e);let T=null;w&&(_!=null&&_.url)&&(T=w3(w,_.url)),n.onEvent(T||PT())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,c);const h=i,g=`${s.packageName.toLowerCase()}://`;ba().handleOpenURL=async _=>{if(_.toLowerCase().startsWith(g)&&c({url:_}),typeof h=="function")try{h(_)}catch(w){console.error(w)}}}}const C3=x3;function PT(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Un("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A3(t,e){nn(t)._logFramework(e)}var P3="@firebase/auth-compat",b3="0.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R3=1e3;function xc(){var t;return((t=self==null?void 0:self.location)===null||t===void 0?void 0:t.protocol)||null}function k3(){return xc()==="http:"||xc()==="https:"}function bP(t=Jt()){return!!((xc()==="file:"||xc()==="ionic:"||xc()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function N3(){return v0()||_0()}function D3(){return AA()&&(document==null?void 0:document.documentMode)===11}function O3(t=Jt()){return/Edge\/\d+/.test(t)}function M3(t=Jt()){return D3()||O3(t)}function RP(){try{const t=self.localStorage,e=jh();if(t)return t.setItem(e,"1"),t.removeItem(e),M3()?Xc():!0}catch{return j0()&&Xc()}return!1}function j0(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Fp(){return(k3()||CA()||bP())&&!N3()&&RP()&&!j0()}function kP(){return bP()&&typeof document<"u"}async function L3(){return kP()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},R3);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function V3(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mr={LOCAL:"local",NONE:"none",SESSION:"session"},zu=Ee,NP="persistence";function F3(t,e){if(zu(Object.values(Mr).includes(e),t,"invalid-persistence-type"),v0()){zu(e!==Mr.SESSION,t,"unsupported-persistence-type");return}if(_0()){zu(e===Mr.NONE,t,"unsupported-persistence-type");return}if(j0()){zu(e===Mr.NONE||e===Mr.LOCAL&&Xc(),t,"unsupported-persistence-type");return}zu(e===Mr.NONE||RP(),t,"unsupported-persistence-type")}async function Sv(t){await t._initializationPromise;const e=DP(),n=_a(NP,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function B3(t,e){const n=DP();if(!n)return[];const r=_a(NP,t,e);switch(n.getItem(r)){case Mr.NONE:return[Jl];case Mr.LOCAL:return[sh,Aa];case Mr.SESSION:return[Aa];default:return[]}}function DP(){var t;try{return((t=V3())===null||t===void 0?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j3=Ee;class Xs{constructor(){this.browserResolver=Br(n3),this.cordovaResolver=Br(C3),this.underlyingResolver=null,this._redirectPersistence=Aa,this._completeRedirectFn=dm,this._overrideRedirectResult=F0}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,r,i)}async _openRedirect(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,r,i)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return kP()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return j3(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await L3();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OP(t){return t.unwrap()}function U3(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z3(t){return MP(t)}function $3(t,e){var n;const r=(n=e.customData)===null||n===void 0?void 0:n._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new q3(t,C5(t,e))}else if(r){const i=MP(e),s=e;i&&(s.credential=i,s.tenantId=r.tenantId||void 0,s.email=r.email||void 0,s.phoneNumber=r.phoneNumber||void 0)}}function MP(t){const{_tokenResponse:e}=t instanceof dr?t.customData:t;if(!e)return null;if(!(t instanceof dr)&&"temporaryProof"in e&&"phoneNumber"in e)return Pa.credentialFromResult(t);const n=e.providerId;if(!n||n===Uu.PASSWORD)return null;let r;switch(n){case Uu.GOOGLE:r=Vi;break;case Uu.FACEBOOK:r=Li;break;case Uu.GITHUB:r=Fi;break;case Uu.TWITTER:r=Bi;break;default:const{oauthIdToken:i,oauthAccessToken:s,oauthTokenSecret:a,pendingToken:c,nonce:h}=e;return!s&&!a&&!i&&!c?null:c?n.startsWith("saml.")?Zl._create(n,c):Zi._fromParams({providerId:n,signInMethod:n,pendingToken:c,idToken:i,accessToken:s}):new Vl(n).credential({idToken:i,accessToken:s,rawNonce:h})}return t instanceof dr?r.credentialFromError(t):r.credentialFromResult(t)}function wr(t,e){return e.catch(n=>{throw n instanceof dr&&$3(t,n),n}).then(n=>{const r=n.operationType,i=n.user;return{operationType:r,credential:z3(n),additionalUserInfo:x5(n),user:fm.getOrCreate(i)}})}async function xv(t,e){const n=await e;return{verificationId:n.verificationId,confirm:r=>wr(t,n.confirm(r))}}class q3{constructor(e,n){this.resolver=n,this.auth=U3(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return wr(OP(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fm=class oc{constructor(e){this._delegate=e,this.multiFactor=R5(e)}static getOrCreate(e){return oc.USER_MAP.has(e)||oc.USER_MAP.set(e,new oc(e)),oc.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return wr(this.auth,uP(this._delegate,e))}async linkWithPhoneNumber(e,n){return xv(this.auth,a4(this._delegate,e,n))}async linkWithPopup(e){return wr(this.auth,p4(this._delegate,e,Xs))}async linkWithRedirect(e){return await Sv(nn(this.auth)),x4(this._delegate,e,Xs)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return wr(this.auth,cP(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return xv(this.auth,l4(this._delegate,e,n))}reauthenticateWithPopup(e){return wr(this.auth,m4(this._delegate,e,Xs))}async reauthenticateWithRedirect(e){return await Sv(nn(this.auth)),T4(this._delegate,e,Xs)}sendEmailVerification(e){return g5(this._delegate,e)}async unlink(e){return await e5(this._delegate,e),this}updateEmail(e){return v5(this._delegate,e)}updatePassword(e){return y5(this._delegate,e)}updatePhoneNumber(e){return u4(this._delegate,e)}updateProfile(e){return _5(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return m5(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};fm.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $u=Ee;class Cv{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;$u(r,"invalid-api-key",{appName:e.name}),$u(r,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?Xs:void 0;this._delegate=n.initialize({options:{persistence:H3(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(HV),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?fm.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){RF(this._delegate,e,n)}applyActionCode(e){return s5(this._delegate,e)}checkActionCode(e){return hP(this._delegate,e)}confirmPasswordReset(e,n){return i5(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return wr(this._delegate,a5(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return f5(this._delegate,e)}isSignInWithEmailLink(e){return c5(this._delegate,e)}async getRedirectResult(){$u(Fp(),this._delegate,"operation-not-supported-in-this-environment");const e=await A4(this._delegate,Xs);return e?wr(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){A3(this._delegate,e)}onAuthStateChanged(e,n,r){const{next:i,error:s,complete:a}=bT(e,n,r);return this._delegate.onAuthStateChanged(i,s,a)}onIdTokenChanged(e,n,r){const{next:i,error:s,complete:a}=bT(e,n,r);return this._delegate.onIdTokenChanged(i,s,a)}sendSignInLinkToEmail(e,n){return u5(this._delegate,e,n)}sendPasswordResetEmail(e,n){return r5(this._delegate,e,n||void 0)}async setPersistence(e){F3(this._delegate,e);let n;switch(e){case Mr.SESSION:n=Aa;break;case Mr.LOCAL:n=await Br(sh)._isAvailable()?sh:D0;break;case Mr.NONE:n=Jl;break;default:return qn("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return wr(this._delegate,ZF(this._delegate))}signInWithCredential(e){return wr(this._delegate,am(this._delegate,e))}signInWithCustomToken(e){return wr(this._delegate,n5(this._delegate,e))}signInWithEmailAndPassword(e,n){return wr(this._delegate,l5(this._delegate,e,n))}signInWithEmailLink(e,n){return wr(this._delegate,h5(this._delegate,e,n))}signInWithPhoneNumber(e,n){return xv(this._delegate,o4(this._delegate,e,n))}async signInWithPopup(e){return $u(Fp(),this._delegate,"operation-not-supported-in-this-environment"),wr(this._delegate,g4(this._delegate,e,Xs))}async signInWithRedirect(e){return $u(Fp(),this._delegate,"operation-not-supported-in-this-environment"),await Sv(this._delegate),I4(this._delegate,e,Xs)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return o5(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}Cv.Persistence=Mr;function bT(t,e,n){let r=t;typeof t!="function"&&({next:r,error:e,complete:n}=t);const i=r;return{next:a=>i(a&&fm.getOrCreate(a)),error:e,complete:n}}function H3(t,e){const n=B3(t,e);if(typeof self<"u"&&!n.includes(sh)&&n.push(sh),typeof window<"u")for(const r of[D0,Aa])n.includes(r)||n.push(r);return n.includes(Jl)||n.push(Jl),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0{constructor(){this.providerId="phone",this._delegate=new Pa(OP(Ft.auth()))}static credential(e,n){return Pa.credential(e,n)}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}U0.PHONE_SIGN_IN_METHOD=Pa.PHONE_SIGN_IN_METHOD;U0.PROVIDER_ID=Pa.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G3=Ee;class W3{constructor(e,n,r=Ft.app()){var i;G3((i=r.options)===null||i===void 0?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new i4(r.auth(),e,n),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K3="auth-compat";function Q3(t){t.INTERNAL.registerComponent(new Ji(K3,e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new Cv(n,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Ja.EMAIL_SIGNIN,PASSWORD_RESET:Ja.PASSWORD_RESET,RECOVER_EMAIL:Ja.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Ja.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Ja.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Ja.VERIFY_EMAIL}},EmailAuthProvider:Do,FacebookAuthProvider:Li,GithubAuthProvider:Fi,GoogleAuthProvider:Vi,OAuthProvider:Vl,SAMLAuthProvider:tg,PhoneAuthProvider:U0,PhoneMultiFactorGenerator:PP,RecaptchaVerifier:W3,TwitterAuthProvider:Bi,Auth:Cv,AuthCredential:yu,Error:dr}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(P3,b3)}Q3(Ft);var Y3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ne,z0=z0||{},Je=Y3||self;function gm(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function zh(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function X3(t){return Object.prototype.hasOwnProperty.call(t,Bp)&&t[Bp]||(t[Bp]=++J3)}var Bp="closure_uid_"+(1e9*Math.random()>>>0),J3=0;function Z3(t,e,n){return t.call.apply(t.bind,arguments)}function eB(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Zn(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Zn=Z3:Zn=eB,Zn.apply(null,arguments)}function Vd(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Nn(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var a=Array(arguments.length-2),c=2;c<arguments.length;c++)a[c-2]=arguments[c];return e.prototype[i].apply(r,a)}}function Oo(){this.s=this.s,this.o=this.o}var tB=0;Oo.prototype.s=!1;Oo.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),tB!=0)&&X3(this)};Oo.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const LP=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function $0(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function RT(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(gm(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let a=0;a<s;a++)t[i+a]=r[a]}else t.push(r)}}function er(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}er.prototype.h=function(){this.defaultPrevented=!0};var nB=function(){if(!Je.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const n=()=>{};Je.addEventListener("test",n,e),Je.removeEventListener("test",n,e)}catch{}return t}();function oh(t){return/^[\s\xa0]*$/.test(t)}function mm(){var t=Je.navigator;return t&&(t=t.userAgent)?t:""}function ji(t){return mm().indexOf(t)!=-1}function q0(t){return q0[" "](t),t}q0[" "]=function(){};function rB(t,e){var n=QB;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var iB=ji("Opera"),eu=ji("Trident")||ji("MSIE"),VP=ji("Edge"),Av=VP||eu,FP=ji("Gecko")&&!(mm().toLowerCase().indexOf("webkit")!=-1&&!ji("Edge"))&&!(ji("Trident")||ji("MSIE"))&&!ji("Edge"),sB=mm().toLowerCase().indexOf("webkit")!=-1&&!ji("Edge");function BP(){var t=Je.document;return t?t.documentMode:void 0}var Pv;e:{var jp="",Up=function(){var t=mm();if(FP)return/rv:([^\);]+)(\)|;)/.exec(t);if(VP)return/Edge\/([\d\.]+)/.exec(t);if(eu)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(sB)return/WebKit\/(\S+)/.exec(t);if(iB)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Up&&(jp=Up?Up[1]:""),eu){var zp=BP();if(zp!=null&&zp>parseFloat(jp)){Pv=String(zp);break e}}Pv=jp}var bv;if(Je.document&&eu){var kT=BP();bv=kT||parseInt(Pv,10)||void 0}else bv=void 0;var oB=bv;function ah(t,e){if(er.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(FP){e:{try{q0(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:aB[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&ah.$.h.call(this)}}Nn(ah,er);var aB={2:"touch",3:"pen",4:"mouse"};ah.prototype.h=function(){ah.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var $h="closure_listenable_"+(1e6*Math.random()|0),lB=0;function uB(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++lB,this.fa=this.ia=!1}function pm(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function H0(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function cB(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function jP(t){const e={};for(const n in t)e[n]=t[n];return e}const NT="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function UP(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<NT.length;s++)n=NT[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function _m(t){this.src=t,this.g={},this.h=0}_m.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var a=kv(t,e,r,i);return-1<a?(e=t[a],n||(e.ia=!1)):(e=new uB(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function Rv(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=LP(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(pm(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function kv(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var G0="closure_lm_"+(1e6*Math.random()|0),$p={};function zP(t,e,n,r,i){if(r&&r.once)return qP(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)zP(t,e[s],n,r,i);return null}return n=Q0(n),t&&t[$h]?t.O(e,n,zh(r)?!!r.capture:!!r,i):$P(t,e,n,!1,r,i)}function $P(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var a=zh(i)?!!i.capture:!!i,c=K0(t);if(c||(t[G0]=c=new _m(t)),n=c.add(e,n,r,a,s),n.proxy)return n;if(r=hB(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)nB||(i=a),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(GP(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function hB(){function t(n){return e.call(t.src,t.listener,n)}const e=dB;return t}function qP(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)qP(t,e[s],n,r,i);return null}return n=Q0(n),t&&t[$h]?t.P(e,n,zh(r)?!!r.capture:!!r,i):$P(t,e,n,!0,r,i)}function HP(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)HP(t,e[s],n,r,i);else r=zh(r)?!!r.capture:!!r,n=Q0(n),t&&t[$h]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=kv(s,n,r,i),-1<n&&(pm(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=K0(t))&&(e=t.g[e.toString()],t=-1,e&&(t=kv(e,n,r,i)),(n=-1<t?e[t]:null)&&W0(n))}function W0(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[$h])Rv(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(GP(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=K0(e))?(Rv(n,t),n.h==0&&(n.src=null,e[G0]=null)):pm(t)}}}function GP(t){return t in $p?$p[t]:$p[t]="on"+t}function dB(t,e){if(t.fa)t=!0;else{e=new ah(e,this);var n=t.listener,r=t.la||t.src;t.ia&&W0(t),t=n.call(r,e)}return t}function K0(t){return t=t[G0],t instanceof _m?t:null}var qp="__closure_events_fn_"+(1e9*Math.random()>>>0);function Q0(t){return typeof t=="function"?t:(t[qp]||(t[qp]=function(e){return t.handleEvent(e)}),t[qp])}function Rn(){Oo.call(this),this.i=new _m(this),this.S=this,this.J=null}Nn(Rn,Oo);Rn.prototype[$h]=!0;Rn.prototype.removeEventListener=function(t,e,n,r){HP(this,t,e,n,r)};function zn(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new er(e,t);else if(e instanceof er)e.target=e.target||t;else{var i=e;e=new er(r,t),UP(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var a=e.g=n[s];i=Fd(a,r,!0,e)&&i}if(a=e.g=t,i=Fd(a,r,!0,e)&&i,i=Fd(a,r,!1,e)&&i,n)for(s=0;s<n.length;s++)a=e.g=n[s],i=Fd(a,r,!1,e)&&i}Rn.prototype.N=function(){if(Rn.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)pm(n[r]);delete t.g[e],t.h--}}this.J=null};Rn.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};Rn.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Fd(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var a=e[s];if(a&&!a.fa&&a.capture==n){var c=a.listener,h=a.la||a.src;a.ia&&Rv(t.i,a),i=c.call(h,r)!==!1&&i}}return i&&!r.defaultPrevented}var Y0=Je.JSON.stringify;class fB{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function gB(){var t=X0;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class mB{constructor(){this.h=this.g=null}add(e,n){const r=WP.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var WP=new fB(()=>new pB,t=>t.reset());class pB{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function _B(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function vB(t){Je.setTimeout(()=>{throw t},0)}let lh,uh=!1,X0=new mB,KP=()=>{const t=Je.Promise.resolve(void 0);lh=()=>{t.then(yB)}};var yB=()=>{for(var t;t=gB();){try{t.h.call(t.g)}catch(n){vB(n)}var e=WP;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}uh=!1};function vm(t,e){Rn.call(this),this.h=t||1,this.g=e||Je,this.j=Zn(this.qb,this),this.l=Date.now()}Nn(vm,Rn);Ne=vm.prototype;Ne.ga=!1;Ne.T=null;Ne.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),zn(this,"tick"),this.ga&&(J0(this),this.start()))}};Ne.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function J0(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}Ne.N=function(){vm.$.N.call(this),J0(this),delete this.g};function Z0(t,e,n){if(typeof t=="function")n&&(t=Zn(t,n));else if(t&&typeof t.handleEvent=="function")t=Zn(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:Je.setTimeout(t,e||0)}function QP(t){t.g=Z0(()=>{t.g=null,t.i&&(t.i=!1,QP(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class wB extends Oo{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:QP(this)}N(){super.N(),this.g&&(Je.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ch(t){Oo.call(this),this.h=t,this.g={}}Nn(ch,Oo);var DT=[];function YP(t,e,n,r){Array.isArray(n)||(n&&(DT[0]=n.toString()),n=DT);for(var i=0;i<n.length;i++){var s=zP(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function XP(t){H0(t.g,function(e,n){this.g.hasOwnProperty(n)&&W0(e)},t),t.g={}}ch.prototype.N=function(){ch.$.N.call(this),XP(this)};ch.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function ym(){this.g=!0}ym.prototype.Ea=function(){this.g=!1};function IB(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var a="",c=s.split("&"),h=0;h<c.length;h++){var g=c[h].split("=");if(1<g.length){var _=g[0];g=g[1];var w=_.split("_");a=2<=w.length&&w[1]=="type"?a+(_+"="+g+"&"):a+(_+"=redacted&")}}else a=null;else a=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+a})}function EB(t,e,n,r,i,s,a){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+a})}function Pl(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+SB(t,n)+(r?" "+r:"")})}function TB(t,e){t.info(function(){return"TIMEOUT: "+e})}ym.prototype.info=function(){};function SB(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var a=1;a<i.length;a++)i[a]=""}}}}return Y0(n)}catch{return e}}var qa={},OT=null;function wm(){return OT=OT||new Rn}qa.Ta="serverreachability";function JP(t){er.call(this,qa.Ta,t)}Nn(JP,er);function hh(t){const e=wm();zn(e,new JP(e))}qa.STAT_EVENT="statevent";function ZP(t,e){er.call(this,qa.STAT_EVENT,t),this.stat=e}Nn(ZP,er);function ur(t){const e=wm();zn(e,new ZP(e,t))}qa.Ua="timingevent";function eb(t,e){er.call(this,qa.Ua,t),this.size=e}Nn(eb,er);function qh(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return Je.setTimeout(function(){t()},e)}var Im={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},tb={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function ew(){}ew.prototype.h=null;function MT(t){return t.h||(t.h=t.i())}function nb(){}var Hh={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function tw(){er.call(this,"d")}Nn(tw,er);function nw(){er.call(this,"c")}Nn(nw,er);var Nv;function Em(){}Nn(Em,ew);Em.prototype.g=function(){return new XMLHttpRequest};Em.prototype.i=function(){return{}};Nv=new Em;function Gh(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new ch(this),this.P=xB,t=Av?125:void 0,this.V=new vm(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new rb}function rb(){this.i=null,this.g="",this.h=!1}var xB=45e3,ib={},Dv={};Ne=Gh.prototype;Ne.setTimeout=function(t){this.P=t};function Ov(t,e,n){t.L=1,t.A=Sm(As(e)),t.u=n,t.S=!0,sb(t,null)}function sb(t,e){t.G=Date.now(),Wh(t),t.B=As(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),fb(n.i,"t",r),t.o=0,n=t.l.J,t.h=new rb,t.g=Ob(t.l,n?e:null,!t.u),0<t.O&&(t.M=new wB(Zn(t.Pa,t,t.g),t.O)),YP(t.U,t.g,"readystatechange",t.nb),e=t.I?jP(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),hh(),IB(t.j,t.v,t.B,t.m,t.W,t.u)}Ne.nb=function(t){t=t.target;const e=this.M;e&&zi(t)==3?e.l():this.Pa(t)};Ne.Pa=function(t){try{if(t==this.g)e:{const _=zi(this.g);var e=this.g.Ia();const w=this.g.da();if(!(3>_)&&(_!=3||Av||this.g&&(this.h.h||this.g.ja()||BT(this.g)))){this.J||_!=4||e==7||(e==8||0>=w?hh(3):hh(2)),Tm(this);var n=this.g.da();this.ca=n;t:if(ob(this)){var r=BT(this.g);t="";var i=r.length,s=zi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ua(this),Cc(this);var a="";break t}this.h.i=new Je.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=t,this.o=0,a=this.h.g}else a=this.g.ja();if(this.i=n==200,EB(this.j,this.v,this.B,this.m,this.W,_,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var c,h=this.g;if((c=h.g?h.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!oh(c)){var g=c;break t}}g=null}if(n=g)Pl(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Mv(this,n);else{this.i=!1,this.s=3,ur(12),ua(this),Cc(this);break e}}this.S?(ab(this,_,a),Av&&this.i&&_==3&&(YP(this.U,this.V,"tick",this.mb),this.V.start())):(Pl(this.j,this.m,a,null),Mv(this,a)),_==4&&ua(this),this.i&&!this.J&&(_==4?Rb(this.l,this):(this.i=!1,Wh(this)))}else GB(this.g),n==400&&0<a.indexOf("Unknown SID")?(this.s=3,ur(12)):(this.s=0,ur(13)),ua(this),Cc(this)}}}catch{}finally{}};function ob(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function ab(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=CB(t,n),i==Dv){e==4&&(t.s=4,ur(14),r=!1),Pl(t.j,t.m,null,"[Incomplete Response]");break}else if(i==ib){t.s=4,ur(15),Pl(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Pl(t.j,t.m,i,null),Mv(t,i);ob(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,ur(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),lw(e),e.M=!0,ur(11))):(Pl(t.j,t.m,n,"[Invalid Chunked Response]"),ua(t),Cc(t))}Ne.mb=function(){if(this.g){var t=zi(this.g),e=this.g.ja();this.o<e.length&&(Tm(this),ab(this,t,e),this.i&&t!=4&&Wh(this))}};function CB(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?Dv:(n=Number(e.substring(n,r)),isNaN(n)?ib:(r+=1,r+n>e.length?Dv:(e=e.slice(r,r+n),t.o=r+n,e)))}Ne.cancel=function(){this.J=!0,ua(this)};function Wh(t){t.Y=Date.now()+t.P,lb(t,t.P)}function lb(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=qh(Zn(t.lb,t),e)}function Tm(t){t.C&&(Je.clearTimeout(t.C),t.C=null)}Ne.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(TB(this.j,this.B),this.L!=2&&(hh(),ur(17)),ua(this),this.s=2,Cc(this)):lb(this,this.Y-t)};function Cc(t){t.l.H==0||t.J||Rb(t.l,t)}function ua(t){Tm(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,J0(t.V),XP(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Mv(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||Lv(n.i,t))){if(!t.K&&Lv(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)ag(n),Pm(n);else break e;aw(n),ur(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=qh(Zn(n.ib,n),6e3));if(1>=pb(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else ca(n,11)}else if((t.K||n.g==t)&&ag(n),!oh(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let g=i[e];if(n.V=g[0],g=g[1],n.H==2)if(g[0]=="c"){n.K=g[1],n.pa=g[2];const _=g[3];_!=null&&(n.ra=_,n.l.info("VER="+n.ra));const w=g[4];w!=null&&(n.Ga=w,n.l.info("SVER="+n.Ga));const T=g[5];T!=null&&typeof T=="number"&&0<T&&(r=1.5*T,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const E=t.g;if(E){const $=E.g?E.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($){var s=r.i;s.g||$.indexOf("spdy")==-1&&$.indexOf("quic")==-1&&$.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(rw(s,s.h),s.h=null))}if(r.F){const U=E.g?E.g.getResponseHeader("X-HTTP-Session-Id"):null;U&&(r.Da=U,Bt(r.I,r.F,U))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var a=t;if(r.wa=Db(r,r.J?r.pa:null,r.Y),a.K){_b(r.i,a);var c=a,h=r.L;h&&c.setTimeout(h),c.C&&(Tm(c),Wh(c)),r.g=a}else Pb(r);0<n.j.length&&bm(n)}else g[0]!="stop"&&g[0]!="close"||ca(n,7);else n.H==3&&(g[0]=="stop"||g[0]=="close"?g[0]=="stop"?ca(n,7):ow(n):g[0]!="noop"&&n.h&&n.h.Aa(g),n.A=0)}}hh(4)}catch{}}function AB(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(gm(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function PB(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(gm(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function ub(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(gm(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=PB(t),r=AB(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var cb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function bB(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function ya(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof ya){this.h=t.h,sg(this,t.j),this.s=t.s,this.g=t.g,og(this,t.m),this.l=t.l;var e=t.i,n=new dh;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),LT(this,n),this.o=t.o}else t&&(e=String(t).match(cb))?(this.h=!1,sg(this,e[1]||"",!0),this.s=ac(e[2]||""),this.g=ac(e[3]||"",!0),og(this,e[4]),this.l=ac(e[5]||"",!0),LT(this,e[6]||"",!0),this.o=ac(e[7]||"")):(this.h=!1,this.i=new dh(null,this.h))}ya.prototype.toString=function(){var t=[],e=this.j;e&&t.push(lc(e,VT,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(lc(e,VT,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(lc(n,n.charAt(0)=="/"?NB:kB,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",lc(n,OB)),t.join("")};function As(t){return new ya(t)}function sg(t,e,n){t.j=n?ac(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function og(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function LT(t,e,n){e instanceof dh?(t.i=e,MB(t.i,t.h)):(n||(e=lc(e,DB)),t.i=new dh(e,t.h))}function Bt(t,e,n){t.i.set(e,n)}function Sm(t){return Bt(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function ac(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function lc(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,RB),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function RB(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var VT=/[#\/\?@]/g,kB=/[#\?:]/g,NB=/[#\?]/g,DB=/[#\?@]/g,OB=/#/g;function dh(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Mo(t){t.g||(t.g=new Map,t.h=0,t.i&&bB(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}Ne=dh.prototype;Ne.add=function(t,e){Mo(this),this.i=null,t=Iu(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function hb(t,e){Mo(t),e=Iu(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function db(t,e){return Mo(t),e=Iu(t,e),t.g.has(e)}Ne.forEach=function(t,e){Mo(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};Ne.ta=function(){Mo(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};Ne.Z=function(t){Mo(this);let e=[];if(typeof t=="string")db(this,t)&&(e=e.concat(this.g.get(Iu(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};Ne.set=function(t,e){return Mo(this),this.i=null,t=Iu(this,t),db(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};Ne.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function fb(t,e,n){hb(t,e),0<n.length&&(t.i=null,t.g.set(Iu(t,e),$0(n)),t.h+=n.length)}Ne.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var i=s;a[r]!==""&&(i+="="+encodeURIComponent(String(a[r]))),t.push(i)}}return this.i=t.join("&")};function Iu(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function MB(t,e){e&&!t.j&&(Mo(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(hb(this,r),fb(this,i,n))},t)),t.j=e}var LB=class{constructor(t,e){this.g=t,this.map=e}};function gb(t){this.l=t||VB,Je.PerformanceNavigationTiming?(t=Je.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(Je.g&&Je.g.Ka&&Je.g.Ka()&&Je.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var VB=10;function mb(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function pb(t){return t.h?1:t.g?t.g.size:0}function Lv(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function rw(t,e){t.g?t.g.add(e):t.h=e}function _b(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}gb.prototype.cancel=function(){if(this.i=vb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function vb(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return $0(t.i)}var FB=class{stringify(t){return Je.JSON.stringify(t,void 0)}parse(t){return Je.JSON.parse(t,void 0)}};function BB(){this.g=new FB}function jB(t,e,n){const r=n||"";try{ub(t,function(i,s){let a=i;zh(i)&&(a=Y0(i)),e.push(r+s+"="+encodeURIComponent(a))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function UB(t,e){const n=new ym;if(Je.Image){const r=new Image;r.onload=Vd(Bd,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Vd(Bd,n,r,"TestLoadImage: error",!1,e),r.onabort=Vd(Bd,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Vd(Bd,n,r,"TestLoadImage: timeout",!1,e),Je.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Bd(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function xm(t){this.l=t.ec||null,this.j=t.ob||!1}Nn(xm,ew);xm.prototype.g=function(){return new Cm(this.l,this.j)};xm.prototype.i=function(t){return function(){return t}}({});function Cm(t,e){Rn.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=iw,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Nn(Cm,Rn);var iw=0;Ne=Cm.prototype;Ne.open=function(t,e){if(this.readyState!=iw)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,fh(this)};Ne.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||Je).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};Ne.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Kh(this)),this.readyState=iw};Ne.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,fh(this)),this.g&&(this.readyState=3,fh(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Je.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;yb(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function yb(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}Ne.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Kh(this):fh(this),this.readyState==3&&yb(this)}};Ne.Za=function(t){this.g&&(this.response=this.responseText=t,Kh(this))};Ne.Ya=function(t){this.g&&(this.response=t,Kh(this))};Ne.ka=function(){this.g&&Kh(this)};function Kh(t){t.readyState=4,t.l=null,t.j=null,t.A=null,fh(t)}Ne.setRequestHeader=function(t,e){this.v.append(t,e)};Ne.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};Ne.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function fh(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Cm.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var zB=Je.JSON.parse;function rn(t){Rn.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=wb,this.L=this.M=!1}Nn(rn,Rn);var wb="",$B=/^https?$/i,qB=["POST","PUT"];Ne=rn.prototype;Ne.Oa=function(t){this.M=t};Ne.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Nv.g(),this.C=this.u?MT(this.u):MT(Nv),this.g.onreadystatechange=Zn(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){FT(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=Je.FormData&&t instanceof Je.FormData,!(0<=LP(qB,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,a]of n)this.g.setRequestHeader(s,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Tb(this),0<this.B&&((this.L=HB(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Zn(this.ua,this)):this.A=Z0(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){FT(this,s)}};function HB(t){return eu&&typeof t.timeout=="number"&&t.ontimeout!==void 0}Ne.ua=function(){typeof z0<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,zn(this,"timeout"),this.abort(8))};function FT(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Ib(t),Am(t)}function Ib(t){t.F||(t.F=!0,zn(t,"complete"),zn(t,"error"))}Ne.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,zn(this,"complete"),zn(this,"abort"),Am(this))};Ne.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Am(this,!0)),rn.$.N.call(this)};Ne.La=function(){this.s||(this.G||this.v||this.l?Eb(this):this.kb())};Ne.kb=function(){Eb(this)};function Eb(t){if(t.h&&typeof z0<"u"&&(!t.C[1]||zi(t)!=4||t.da()!=2)){if(t.v&&zi(t)==4)Z0(t.La,0,t);else if(zn(t,"readystatechange"),zi(t)==4){t.h=!1;try{const a=t.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=a===0){var i=String(t.I).match(cb)[1]||null;!i&&Je.self&&Je.self.location&&(i=Je.self.location.protocol.slice(0,-1)),r=!$B.test(i?i.toLowerCase():"")}n=r}if(n)zn(t,"complete"),zn(t,"success");else{t.m=6;try{var s=2<zi(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",Ib(t)}}finally{Am(t)}}}}function Am(t,e){if(t.g){Tb(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||zn(t,"ready");try{n.onreadystatechange=r}catch{}}}function Tb(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(Je.clearTimeout(t.A),t.A=null)}Ne.isActive=function(){return!!this.g};function zi(t){return t.g?t.g.readyState:0}Ne.da=function(){try{return 2<zi(this)?this.g.status:-1}catch{return-1}};Ne.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};Ne.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),zB(e)}};function BT(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case wb:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function GB(t){const e={};t=(t.g&&2<=zi(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(oh(t[r]))continue;var n=_B(t[r]);const i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}cB(e,function(r){return r.join(", ")})}Ne.Ia=function(){return this.m};Ne.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function Sb(t){let e="";return H0(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function sw(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Sb(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Bt(t,e,n))}function qu(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function xb(t){this.Ga=0,this.j=[],this.l=new ym,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=qu("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=qu("baseRetryDelayMs",5e3,t),this.hb=qu("retryDelaySeedMs",1e4,t),this.eb=qu("forwardChannelMaxRetries",2,t),this.xa=qu("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new gb(t&&t.concurrentRequestLimit),this.Ja=new BB,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}Ne=xb.prototype;Ne.ra=8;Ne.H=1;function ow(t){if(Cb(t),t.H==3){var e=t.W++,n=As(t.I);if(Bt(n,"SID",t.K),Bt(n,"RID",e),Bt(n,"TYPE","terminate"),Qh(t,n),e=new Gh(t,t.l,e),e.L=2,e.A=Sm(As(n)),n=!1,Je.navigator&&Je.navigator.sendBeacon)try{n=Je.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&Je.Image&&(new Image().src=e.A,n=!0),n||(e.g=Ob(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Wh(e)}Nb(t)}function Pm(t){t.g&&(lw(t),t.g.cancel(),t.g=null)}function Cb(t){Pm(t),t.u&&(Je.clearTimeout(t.u),t.u=null),ag(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&Je.clearTimeout(t.m),t.m=null)}function bm(t){if(!mb(t.i)&&!t.m){t.m=!0;var e=t.Na;lh||KP(),uh||(lh(),uh=!0),X0.add(e,t),t.C=0}}function WB(t,e){return pb(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=qh(Zn(t.Na,t,e),kb(t,t.C)),t.C++,!0)}Ne.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new Gh(this,this.l,t);let s=this.s;if(this.U&&(s?(s=jP(s),UP(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Ab(this,i,e),n=As(this.I),Bt(n,"RID",t),Bt(n,"CVER",22),this.F&&Bt(n,"X-HTTP-Session-Id",this.F),Qh(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(Sb(s)))+"&"+e:this.o&&sw(n,this.o,s)),rw(this.i,i),this.bb&&Bt(n,"TYPE","init"),this.P?(Bt(n,"$req",e),Bt(n,"SID","null"),i.aa=!0,Ov(i,n,null)):Ov(i,n,e),this.H=2}}else this.H==3&&(t?jT(this,t):this.j.length==0||mb(this.i)||jT(this))};function jT(t,e){var n;e?n=e.m:n=t.W++;const r=As(t.I);Bt(r,"SID",t.K),Bt(r,"RID",n),Bt(r,"AID",t.V),Qh(t,r),t.o&&t.s&&sw(r,t.o,t.s),n=new Gh(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=Ab(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),rw(t.i,n),Ov(n,r,e)}function Qh(t,e){t.na&&H0(t.na,function(n,r){Bt(e,r,n)}),t.h&&ub({},function(n,r){Bt(e,r,n)})}function Ab(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Zn(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const a=["count="+n];s==-1?0<n?(s=i[0].g,a.push("ofs="+s)):s=0:a.push("ofs="+s);let c=!0;for(let h=0;h<n;h++){let g=i[h].g;const _=i[h].map;if(g-=s,0>g)s=Math.max(0,i[h].g-100),c=!1;else try{jB(_,a,"req"+g+"_")}catch{r&&r(_)}}if(c){r=a.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function Pb(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;lh||KP(),uh||(lh(),uh=!0),X0.add(e,t),t.A=0}}function aw(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=qh(Zn(t.Ma,t),kb(t,t.A)),t.A++,!0)}Ne.Ma=function(){if(this.u=null,bb(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=qh(Zn(this.jb,this),t)}};Ne.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ur(10),Pm(this),bb(this))};function lw(t){t.B!=null&&(Je.clearTimeout(t.B),t.B=null)}function bb(t){t.g=new Gh(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=As(t.wa);Bt(e,"RID","rpc"),Bt(e,"SID",t.K),Bt(e,"AID",t.V),Bt(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Bt(e,"TO",t.qa),Bt(e,"TYPE","xmlhttp"),Qh(t,e),t.o&&t.s&&sw(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Sm(As(e)),n.u=null,n.S=!0,sb(n,t)}Ne.ib=function(){this.v!=null&&(this.v=null,Pm(this),aw(this),ur(19))};function ag(t){t.v!=null&&(Je.clearTimeout(t.v),t.v=null)}function Rb(t,e){var n=null;if(t.g==e){ag(t),lw(t),t.g=null;var r=2}else if(Lv(t.i,e))n=e.F,_b(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=wm(),zn(r,new eb(r,n)),bm(t)}else Pb(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&WB(t,e)||r==2&&aw(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:ca(t,5);break;case 4:ca(t,10);break;case 3:ca(t,6);break;default:ca(t,2)}}}function kb(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function ca(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=Zn(t.pb,t);n||(n=new ya("//www.google.com/images/cleardot.gif"),Je.location&&Je.location.protocol=="http"||sg(n,"https"),Sm(n)),UB(n.toString(),r)}else ur(2);t.H=0,t.h&&t.h.za(e),Nb(t),Cb(t)}Ne.pb=function(t){t?(this.l.info("Successfully pinged google.com"),ur(2)):(this.l.info("Failed to ping google.com"),ur(1))};function Nb(t){if(t.H=0,t.ma=[],t.h){const e=vb(t.i);(e.length!=0||t.j.length!=0)&&(RT(t.ma,e),RT(t.ma,t.j),t.i.i.length=0,$0(t.j),t.j.length=0),t.h.ya()}}function Db(t,e,n){var r=n instanceof ya?As(n):new ya(n);if(r.g!="")e&&(r.g=e+"."+r.g),og(r,r.m);else{var i=Je.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new ya(null);r&&sg(s,r),e&&(s.g=e),i&&og(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&Bt(r,n,e),Bt(r,"VER",t.ra),Qh(t,r),r}function Ob(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new rn(new xm({ob:n})):new rn(t.va),e.Oa(t.J),e}Ne.isActive=function(){return!!this.h&&this.h.isActive(this)};function Mb(){}Ne=Mb.prototype;Ne.Ba=function(){};Ne.Aa=function(){};Ne.za=function(){};Ne.ya=function(){};Ne.isActive=function(){return!0};Ne.Va=function(){};function lg(){if(eu&&!(10<=Number(oB)))throw Error("Environmental error: no available transport.")}lg.prototype.g=function(t,e){return new $r(t,e)};function $r(t,e){Rn.call(this),this.g=new xb(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!oh(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!oh(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Eu(this)}Nn($r,Rn);$r.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;ur(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=Db(t,null,t.Y),bm(t)};$r.prototype.close=function(){ow(this.g)};$r.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Y0(t),t=n);e.j.push(new LB(e.fb++,t)),e.H==3&&bm(e)};$r.prototype.N=function(){this.g.h=null,delete this.j,ow(this.g),delete this.g,$r.$.N.call(this)};function Lb(t){tw.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Nn(Lb,tw);function Vb(){nw.call(this),this.status=1}Nn(Vb,nw);function Eu(t){this.g=t}Nn(Eu,Mb);Eu.prototype.Ba=function(){zn(this.g,"a")};Eu.prototype.Aa=function(t){zn(this.g,new Lb(t))};Eu.prototype.za=function(t){zn(this.g,new Vb)};Eu.prototype.ya=function(){zn(this.g,"b")};function KB(){this.blockSize=-1}function Ci(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Nn(Ci,KB);Ci.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Hp(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],a=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(a<<7&4294967295|a>>>25),a=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(a<<12&4294967295|a>>>20),a=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(a<<17&4294967295|a>>>15),a=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(a<<22&4294967295|a>>>10),a=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(a<<7&4294967295|a>>>25),a=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(a<<12&4294967295|a>>>20),a=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(a<<17&4294967295|a>>>15),a=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(a<<22&4294967295|a>>>10),a=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(a<<7&4294967295|a>>>25),a=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(a<<12&4294967295|a>>>20),a=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(a<<17&4294967295|a>>>15),a=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(a<<22&4294967295|a>>>10),a=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(a<<7&4294967295|a>>>25),a=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(a<<12&4294967295|a>>>20),a=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(a<<17&4294967295|a>>>15),a=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(a<<22&4294967295|a>>>10),a=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(a<<5&4294967295|a>>>27),a=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(a<<9&4294967295|a>>>23),a=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(a<<14&4294967295|a>>>18),a=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(a<<20&4294967295|a>>>12),a=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(a<<5&4294967295|a>>>27),a=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(a<<9&4294967295|a>>>23),a=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(a<<14&4294967295|a>>>18),a=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(a<<20&4294967295|a>>>12),a=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(a<<5&4294967295|a>>>27),a=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(a<<9&4294967295|a>>>23),a=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(a<<14&4294967295|a>>>18),a=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(a<<20&4294967295|a>>>12),a=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(a<<5&4294967295|a>>>27),a=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(a<<9&4294967295|a>>>23),a=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(a<<14&4294967295|a>>>18),a=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(a<<20&4294967295|a>>>12),a=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(a<<4&4294967295|a>>>28),a=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(a<<11&4294967295|a>>>21),a=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(a<<16&4294967295|a>>>16),a=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(a<<23&4294967295|a>>>9),a=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(a<<4&4294967295|a>>>28),a=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(a<<11&4294967295|a>>>21),a=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(a<<16&4294967295|a>>>16),a=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(a<<23&4294967295|a>>>9),a=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(a<<4&4294967295|a>>>28),a=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(a<<11&4294967295|a>>>21),a=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(a<<16&4294967295|a>>>16),a=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(a<<23&4294967295|a>>>9),a=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(a<<4&4294967295|a>>>28),a=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(a<<11&4294967295|a>>>21),a=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(a<<16&4294967295|a>>>16),a=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(a<<23&4294967295|a>>>9),a=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(a<<6&4294967295|a>>>26),a=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(a<<10&4294967295|a>>>22),a=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(a<<15&4294967295|a>>>17),a=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(a<<21&4294967295|a>>>11),a=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(a<<6&4294967295|a>>>26),a=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(a<<10&4294967295|a>>>22),a=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(a<<15&4294967295|a>>>17),a=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(a<<21&4294967295|a>>>11),a=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(a<<6&4294967295|a>>>26),a=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(a<<10&4294967295|a>>>22),a=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(a<<15&4294967295|a>>>17),a=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(a<<21&4294967295|a>>>11),a=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(a<<6&4294967295|a>>>26),a=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(a<<10&4294967295|a>>>22),a=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(a<<15&4294967295|a>>>17),a=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(a<<21&4294967295|a>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}Ci.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)Hp(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){Hp(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){Hp(this,r),i=0;break}}this.h=i,this.i+=e};Ci.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function At(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var QB={};function uw(t){return-128<=t&&128>t?rB(t,function(e){return new At([e|0],0>e?-1:0)}):new At([t|0],0>t?-1:0)}function $i(t){if(isNaN(t)||!isFinite(t))return Bl;if(0>t)return Fn($i(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=Vv;return new At(e,0)}function Fb(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Fn(Fb(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=$i(Math.pow(e,8)),r=Bl,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),a=parseInt(t.substring(i,i+s),e);8>s?(s=$i(Math.pow(e,s)),r=r.R(s).add($i(a))):(r=r.R(n),r=r.add($i(a)))}return r}var Vv=4294967296,Bl=uw(0),Fv=uw(1),UT=uw(16777216);Ne=At.prototype;Ne.ea=function(){if(ei(this))return-Fn(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:Vv+r)*e,e*=Vv}return t};Ne.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(ps(this))return"0";if(ei(this))return"-"+Fn(this).toString(t);for(var e=$i(Math.pow(t,6)),n=this,r="";;){var i=cg(n,e).g;n=ug(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,ps(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};Ne.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function ps(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function ei(t){return t.h==-1}Ne.X=function(t){return t=ug(this,t),ei(t)?-1:ps(t)?0:1};function Fn(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new At(n,~t.h).add(Fv)}Ne.abs=function(){return ei(this)?Fn(this):this};Ne.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),a=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=a>>>16,s&=65535,a&=65535,n[i]=a<<16|s}return new At(n,n[n.length-1]&-2147483648?-1:0)};function ug(t,e){return t.add(Fn(e))}Ne.R=function(t){if(ps(this)||ps(t))return Bl;if(ei(this))return ei(t)?Fn(this).R(Fn(t)):Fn(Fn(this).R(t));if(ei(t))return Fn(this.R(Fn(t)));if(0>this.X(UT)&&0>t.X(UT))return $i(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,a=this.D(r)&65535,c=t.D(i)>>>16,h=t.D(i)&65535;n[2*r+2*i]+=a*h,jd(n,2*r+2*i),n[2*r+2*i+1]+=s*h,jd(n,2*r+2*i+1),n[2*r+2*i+1]+=a*c,jd(n,2*r+2*i+1),n[2*r+2*i+2]+=s*c,jd(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new At(n,0)};function jd(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Hu(t,e){this.g=t,this.h=e}function cg(t,e){if(ps(e))throw Error("division by zero");if(ps(t))return new Hu(Bl,Bl);if(ei(t))return e=cg(Fn(t),e),new Hu(Fn(e.g),Fn(e.h));if(ei(e))return e=cg(t,Fn(e)),new Hu(Fn(e.g),e.h);if(30<t.g.length){if(ei(t)||ei(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Fv,r=e;0>=r.X(t);)n=zT(n),r=zT(r);var i=Za(n,1),s=Za(r,1);for(r=Za(r,2),n=Za(n,2);!ps(r);){var a=s.add(r);0>=a.X(t)&&(i=i.add(n),s=a),r=Za(r,1),n=Za(n,1)}return e=ug(t,i.R(e)),new Hu(i,e)}for(i=Bl;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=$i(n),a=s.R(e);ei(a)||0<a.X(t);)n-=r,s=$i(n),a=s.R(e);ps(s)&&(s=Fv),i=i.add(s),t=ug(t,a)}return new Hu(i,t)}Ne.gb=function(t){return cg(this,t).h};Ne.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new At(n,this.h&t.h)};Ne.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new At(n,this.h|t.h)};Ne.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new At(n,this.h^t.h)};function zT(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new At(n,t.h)}function Za(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new At(i,t.h)}lg.prototype.createWebChannel=lg.prototype.g;$r.prototype.send=$r.prototype.u;$r.prototype.open=$r.prototype.m;$r.prototype.close=$r.prototype.close;Im.NO_ERROR=0;Im.TIMEOUT=8;Im.HTTP_ERROR=6;tb.COMPLETE="complete";nb.EventType=Hh;Hh.OPEN="a";Hh.CLOSE="b";Hh.ERROR="c";Hh.MESSAGE="d";Rn.prototype.listen=Rn.prototype.O;rn.prototype.listenOnce=rn.prototype.P;rn.prototype.getLastError=rn.prototype.Sa;rn.prototype.getLastErrorCode=rn.prototype.Ia;rn.prototype.getStatus=rn.prototype.da;rn.prototype.getResponseJson=rn.prototype.Wa;rn.prototype.getResponseText=rn.prototype.ja;rn.prototype.send=rn.prototype.ha;rn.prototype.setWithCredentials=rn.prototype.Oa;Ci.prototype.digest=Ci.prototype.l;Ci.prototype.reset=Ci.prototype.reset;Ci.prototype.update=Ci.prototype.j;At.prototype.add=At.prototype.add;At.prototype.multiply=At.prototype.R;At.prototype.modulo=At.prototype.gb;At.prototype.compare=At.prototype.X;At.prototype.toNumber=At.prototype.ea;At.prototype.toString=At.prototype.toString;At.prototype.getBits=At.prototype.D;At.fromNumber=$i;At.fromString=Fb;var YB=function(){return new lg},XB=function(){return wm()},Gp=Im,JB=tb,ZB=qa,$T={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Ud=nb,e6=rn,t6=Ci,jl=At,n6={};const qT="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}An.UNAUTHENTICATED=new An(null),An.GOOGLE_CREDENTIALS=new An("google-credentials-uid"),An.FIRST_PARTY=new An("first-party-uid"),An.MOCK_USER=new An("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tu="10.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vo=new nm("@firebase/firestore");function ll(){return vo.logLevel}function r6(t){vo.setLogLevel(t)}function ve(t,...e){if(vo.logLevel<=lt.DEBUG){const n=e.map(cw);vo.debug(`Firestore (${Tu}): ${t}`,...n)}}function dn(t,...e){if(vo.logLevel<=lt.ERROR){const n=e.map(cw);vo.error(`Firestore (${Tu}): ${t}`,...n)}}function Ai(t,...e){if(vo.logLevel<=lt.WARN){const n=e.map(cw);vo.warn(`Firestore (${Tu}): ${t}`,...n)}}function cw(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(t="Unexpected state"){const e=`FIRESTORE (${Tu}) INTERNAL ASSERTION FAILED: `+t;throw dn(e),new Error(e)}function Be(t,e){t||Me()}function i6(t,e){t||Me()}function ke(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends dr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class s6{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(An.UNAUTHENTICATED))}shutdown(){}}class o6{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class a6{constructor(e){this.t=e,this.currentUser=An.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=h=>this.i!==r?(r=this.i,n(h)):Promise.resolve();let s=new bn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new bn,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const h=s;e.enqueueRetryable(async()=>{await h.promise,await i(this.currentUser)})},c=h=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(h=>c(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?c(h):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new bn)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Be(typeof r.accessToken=="string"),new Bb(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Be(e===null||typeof e=="string"),new An(e)}}class l6{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=An.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class u6{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new l6(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(An.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class c6{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class h6{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.R;return this.R=s.token,ve("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Be(typeof n.token=="string"),this.R=n.token,new c6(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d6(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=d6(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function rt(t,e){return t<e?-1:t>e?1:0}function tu(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function Ub(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new pe(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new pe(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new pe(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Wt.fromMillis(Date.now())}static fromDate(e){return Wt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Wt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?rt(this.nanoseconds,e.nanoseconds):rt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ue(e)}static min(){return new Ue(new Wt(0,0))}static max(){return new Ue(new Wt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(e,n,r){n===void 0?n=0:n>e.length&&Me(),r===void 0?r=e.length-n:r>e.length-n&&Me(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return gh.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof gh?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),a=n.get(i);if(s<a)return-1;if(s>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class pt extends gh{construct(e,n,r){return new pt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new pe(ue.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new pt(n)}static emptyPath(){return new pt([])}}const f6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ht extends gh{construct(e,n,r){return new Ht(e,n,r)}static isValidIdentifier(e){return f6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ht.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ht(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new pe(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new pe(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new pe(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,i+=2}else c==="`"?(a=!a,i++):c!=="."||a?(r+=c,i++):(s(),i++)}if(s(),a)throw new pe(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ht(n)}static emptyPath(){return new Ht([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(e){this.path=e}static fromPath(e){return new Pe(pt.fromString(e))}static fromName(e){return new Pe(pt.fromString(e).popFirst(5))}static empty(){return new Pe(pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return pt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Pe(new pt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function Bv(t){return t.fields.find(e=>e.kind===2)}function Jo(t){return t.fields.filter(e=>e.kind!==2)}hg.UNKNOWN_ID=-1;class gf{constructor(e,n){this.fieldPath=e,this.kind=n}}class mh{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new mh(0,qr.min())}}function zb(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ue.fromTimestamp(r===1e9?new Wt(n+1,0):new Wt(n,r));return new qr(i,Pe.empty(),e)}function $b(t){return new qr(t.readTime,t.key,-1)}class qr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new qr(Ue.min(),Pe.empty(),-1)}static max(){return new qr(Ue.max(),Pe.empty(),-1)}}function hw(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Pe.comparator(t.documentKey,e.documentKey),n!==0?n:rt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Hb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lo(t){if(t.code!==ue.FAILED_PRECONDITION||t.message!==qb)throw t;ve("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Me(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new se((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof se?n:se.resolve(n)}catch(n){return se.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):se.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):se.reject(n)}static resolve(e){return new se((n,r)=>{n(e)})}static reject(e){return new se((n,r)=>{r(e)})}static waitFor(e){return new se((n,r)=>{let i=0,s=0,a=!1;e.forEach(c=>{++i,c.next(()=>{++s,a&&s===i&&n()},h=>r(h))}),a=!0,s===i&&n()})}static or(e){let n=se.resolve(!1);for(const r of e)n=n.next(i=>i?se.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new se((r,i)=>{const s=e.length,a=new Array(s);let c=0;for(let h=0;h<s;h++){const g=h;n(e[g]).next(_=>{a[g]=_,++c,c===s&&r(a)},_=>i(_))}})}static doWhile(e,n){return new se((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new bn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Ac(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=dw(r.target.error);this.V.reject(new Ac(e,i))}}static open(e,n,r,i){try{return new Rm(n,e.transaction(i,r))}catch(s){throw new Ac(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ve("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new m6(n)}}class wi{constructor(e,n,r){this.name=e,this.version=n,this.p=r,wi.S(Jt())===12.2&&dn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ve("SimpleDb","Removing database:",e),Zo(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Xc())return!1;if(wi.C())return!0;const e=Jt(),n=wi.S(e),r=0<n&&n<10,i=wi.v(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&((e=n6)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async O(e){return this.db||(ve("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const a=s.target.result;n(a)},i.onblocked=()=>{r(new Ac(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const a=s.target.error;a.name==="VersionError"?r(new pe(ue.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?r(new pe(ue.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):r(new Ac(e,a))},i.onupgradeneeded=s=>{ve("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const a=s.target.result;this.p.N(a,i.transaction,s.oldVersion,this.version).next(()=>{ve("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let a=0;for(;;){++a;try{this.db=await this.O(e);const c=Rm.open(this.db,e,s?"readonly":"readwrite",r),h=i(c).next(g=>(c.g(),g)).catch(g=>(c.abort(g),se.reject(g))).toPromise();return h.catch(()=>{}),await c.m,h}catch(c){const h=c,g=h.name!=="FirebaseError"&&a<3;if(ve("SimpleDb","Transaction failed with error:",h.message,"Retrying:",g),this.close(),!g)return Promise.reject(h)}}}close(){this.db&&this.db.close(),this.db=void 0}}class g6{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Zo(this.k.delete())}}class Ac extends pe{constructor(e,n){super(ue.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Vo(t){return t.name==="IndexedDbTransactionError"}class m6{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(ve("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(ve("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Zo(r)}add(e){return ve("SimpleDb","ADD",this.store.name,e,e),Zo(this.store.add(e))}get(e){return Zo(this.store.get(e)).next(n=>(n===void 0&&(n=null),ve("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return ve("SimpleDb","DELETE",this.store.name,e),Zo(this.store.delete(e))}count(){return ve("SimpleDb","COUNT",this.store.name),Zo(this.store.count())}W(e,n){const r=this.options(e,n);if(r.index||typeof this.store.getAll!="function"){const i=this.cursor(r),s=[];return this.G(i,(a,c)=>{s.push(c)}).next(()=>s)}{const i=this.store.getAll(r.range);return new se((s,a)=>{i.onerror=c=>{a(c.target.error)},i.onsuccess=c=>{s(c.target.result)}})}}j(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new se((i,s)=>{r.onerror=a=>{s(a.target.error)},r.onsuccess=a=>{i(a.target.result)}})}H(e,n){ve("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.J=!1;const i=this.cursor(r);return this.G(i,(s,a,c)=>c.delete())}Y(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.G(i,n)}Z(e){const n=this.cursor({});return new se((r,i)=>{n.onerror=s=>{const a=dw(s.target.error);i(a)},n.onsuccess=s=>{const a=s.target.result;a?e(a.primaryKey,a.value).next(c=>{c?a.continue():r()}):r()}})}G(e,n){const r=[];return new se((i,s)=>{e.onerror=a=>{s(a.target.error)},e.onsuccess=a=>{const c=a.target.result;if(!c)return void i();const h=new g6(c),g=n(c.primaryKey,c.value,h);if(g instanceof se){const _=g.catch(w=>(h.done(),se.reject(w)));r.push(_)}h.isDone?i():h.$===null?c.continue():c.continue(h.$)}}).next(()=>se.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Zo(t){return new se((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=dw(r.target.error);n(i)}})}let HT=!1;function dw(t){const e=wi.S(Jt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new pe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return HT||(HT=!0,setTimeout(()=>{throw r},0)),r}}return t}class p6{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ee(e){ve("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{ve("IndexBackiller",`Documents written: ${await this.X.te()}`)}catch(n){Vo(n)?ve("IndexBackiller","Ignoring IndexedDB error during index backfill: ",n):await Lo(n)}await this.ee(6e4)})}}class _6{constructor(e,n){this.localStore=e,this.persistence=n}async te(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.ne(n,e))}ne(e,n){const r=new Set;let i=n,s=!0;return se.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(a=>{if(a!==null&&!r.has(a))return ve("IndexBackiller",`Processing collection: ${a}`),this.re(e,a,i).next(c=>{i-=c,r.add(a)});s=!1})).next(()=>n-i)}re(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const a=s.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next(()=>this.ie(i,s)).next(c=>(ve("IndexBackiller",`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,n,c))).next(()=>a.size)}))}ie(e,n){let r=e;return n.changes.forEach((i,s)=>{const a=$b(s);hw(a,r)>0&&(r=a)}),new qr(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.se(r),this.oe=r=>n.writeSequenceNumber(r))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}Cr._e=-1;function Yh(t){return t==null}function ph(t){return t===0&&1/t==-1/0}function Gb(t){return typeof t=="number"&&Number.isInteger(t)&&!ph(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fr(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=GT(e)),e=v6(t.get(n),e);return GT(e)}function v6(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function GT(t){return t+""}function qi(t){const e=t.length;if(Be(e>=2),e===2)return Be(t.charAt(0)===""&&t.charAt(1)===""),pt.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const a=t.indexOf("",s);switch((a<0||a>n)&&Me(),t.charAt(a+1)){case"":const c=t.substring(s,a);let h;i.length===0?h=c:(i+=c,h=i,i=""),r.push(h);break;case"":i+=t.substring(s,a),i+="\0";break;case"":i+=t.substring(s,a+1);break;default:Me()}s=a+2}return new pt(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mf(t,e){return[t,fr(e)]}function Wb(t,e,n){return[t,fr(e),n]}const y6={},w6=["prefixPath","collectionGroup","readTime","documentId"],I6=["prefixPath","collectionGroup","documentId"],E6=["collectionGroup","readTime","prefixPath","documentId"],T6=["canonicalId","targetId"],S6=["targetId","path"],x6=["path","targetId"],C6=["collectionId","parent"],A6=["indexId","uid"],P6=["uid","sequenceNumber"],b6=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],R6=["indexId","uid","orderedDocumentKey"],k6=["userId","collectionPath","documentId"],N6=["userId","collectionPath","largestBatchId"],D6=["userId","collectionGroup","largestBatchId"],Kb=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],O6=[...Kb,"documentOverlays"],Qb=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Yb=Qb,M6=[...Yb,"indexConfiguration","indexState","indexEntries"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv extends Hb{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}}function Dn(t,e){const n=ke(t);return wi.M(n.ae,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KT(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ha(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Xb(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e,n){this.comparator=e,this.root=n||Vn.EMPTY}insert(e,n){return new Ot(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Vn.BLACK,null,null))}remove(e){return new Ot(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zd(this.root,e,this.comparator,!1)}getReverseIterator(){return new zd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zd(this.root,e,this.comparator,!0)}}class zd{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Vn{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Vn.RED,this.left=i??Vn.EMPTY,this.right=s??Vn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Vn(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Vn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Vn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Vn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Vn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Me();const e=this.left.check();if(e!==this.right.check())throw Me();return e+(this.isRed()?0:1)}}Vn.EMPTY=null,Vn.RED=!0,Vn.BLACK=!1;Vn.EMPTY=new class{constructor(){this.size=0}get key(){throw Me()}get value(){throw Me()}get color(){throw Me()}get left(){throw Me()}get right(){throw Me()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Vn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.comparator=e,this.data=new Ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new QT(this.data.getIterator())}getIteratorFrom(e){return new QT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Rt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Rt(this.comparator);return n.data=e,n}}class QT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function el(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e){this.fields=e,e.sort(Ht.comparator)}static empty(){return new Ar([])}unionWith(e){let n=new Rt(Ht.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ar(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return tu(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L6(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Jb("Invalid base64 string: "+s):s}}(e);return new wn(n)}static fromUint8Array(e){const n=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new wn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return rt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wn.EMPTY_BYTE_STRING=new wn("");const V6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yo(t){if(Be(!!t),typeof t=="string"){let e=0;const n=V6.exec(t);if(Be(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:tn(t.seconds),nanos:tn(t.nanos)}}function tn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function wo(t){return typeof t=="string"?wn.fromBase64String(t):wn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function km(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function fw(t){const e=t.mapValue.fields.__previous_value__;return km(e)?fw(e):e}function _h(t){const e=yo(t.mapValue.fields.__local_write_time__.timestampValue);return new Wt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F6{constructor(e,n,r,i,s,a,c,h,g){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=h,this.useFetchStreams=g}}class Io{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Io("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Io&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},pf={nullValue:"NULL_VALUE"};function Ra(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?km(t)?4:Zb(t)?9007199254740991:10:Me()}function es(t,e){if(t===e)return!0;const n=Ra(t);if(n!==Ra(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return _h(t).isEqual(_h(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=yo(i.timestampValue),c=yo(s.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return wo(i.bytesValue).isEqual(wo(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return tn(i.geoPointValue.latitude)===tn(s.geoPointValue.latitude)&&tn(i.geoPointValue.longitude)===tn(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return tn(i.integerValue)===tn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=tn(i.doubleValue),c=tn(s.doubleValue);return a===c?ph(a)===ph(c):isNaN(a)&&isNaN(c)}return!1}(t,e);case 9:return tu(t.arrayValue.values||[],e.arrayValue.values||[],es);case 10:return function(i,s){const a=i.mapValue.fields||{},c=s.mapValue.fields||{};if(KT(a)!==KT(c))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(c[h]===void 0||!es(a[h],c[h])))return!1;return!0}(t,e);default:return Me()}}function vh(t,e){return(t.values||[]).find(n=>es(n,e))!==void 0}function Eo(t,e){if(t===e)return 0;const n=Ra(t),r=Ra(e);if(n!==r)return rt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return rt(t.booleanValue,e.booleanValue);case 2:return function(s,a){const c=tn(s.integerValue||s.doubleValue),h=tn(a.integerValue||a.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1}(t,e);case 3:return YT(t.timestampValue,e.timestampValue);case 4:return YT(_h(t),_h(e));case 5:return rt(t.stringValue,e.stringValue);case 6:return function(s,a){const c=wo(s),h=wo(a);return c.compareTo(h)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const c=s.split("/"),h=a.split("/");for(let g=0;g<c.length&&g<h.length;g++){const _=rt(c[g],h[g]);if(_!==0)return _}return rt(c.length,h.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const c=rt(tn(s.latitude),tn(a.latitude));return c!==0?c:rt(tn(s.longitude),tn(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,a){const c=s.values||[],h=a.values||[];for(let g=0;g<c.length&&g<h.length;++g){const _=Eo(c[g],h[g]);if(_)return _}return rt(c.length,h.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,a){if(s===Js.mapValue&&a===Js.mapValue)return 0;if(s===Js.mapValue)return 1;if(a===Js.mapValue)return-1;const c=s.fields||{},h=Object.keys(c),g=a.fields||{},_=Object.keys(g);h.sort(),_.sort();for(let w=0;w<h.length&&w<_.length;++w){const T=rt(h[w],_[w]);if(T!==0)return T;const E=Eo(c[h[w]],g[_[w]]);if(E!==0)return E}return rt(h.length,_.length)}(t.mapValue,e.mapValue);default:throw Me()}}function YT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return rt(t,e);const n=yo(t),r=yo(e),i=rt(n.seconds,r.seconds);return i!==0?i:rt(n.nanos,r.nanos)}function nu(t){return Uv(t)}function Uv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=yo(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return wo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Pe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Uv(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${Uv(n.fields[a])}`;return i+"}"}(t.mapValue):Me()}function ka(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function zv(t){return!!t&&"integerValue"in t}function yh(t){return!!t&&"arrayValue"in t}function XT(t){return!!t&&"nullValue"in t}function JT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function _f(t){return!!t&&"mapValue"in t}function Pc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ha(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Pc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Pc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Zb(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function B6(t){return"nullValue"in t?pf:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?ka(Io.empty(),Pe.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:Me()}function j6(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?ka(Io.empty(),Pe.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Js:Me()}function ZT(t,e){const n=Eo(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function eS(t,e){const n=Eo(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.value=e}static empty(){return new Bn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!_f(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pc(n)}setAll(e){let n=Ht.emptyPath(),r={},i=[];e.forEach((a,c)=>{if(!n.isImmediateParentOf(c)){const h=this.getFieldsMap(n);this.applyChanges(h,r,i),r={},i=[],n=c.popLast()}a?r[c.lastSegment()]=Pc(a):i.push(c.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());_f(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return es(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];_f(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ha(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Bn(Pc(this.value))}}function eR(t){const e=[];return Ha(t.fields,(n,r)=>{const i=new Ht([n]);if(_f(r)){const s=eR(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new Ar(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,n,r,i,s,a,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=c}static newInvalidDocument(e){return new jt(e,0,Ue.min(),Ue.min(),Ue.min(),Bn.empty(),0)}static newFoundDocument(e,n,r,i){return new jt(e,1,n,Ue.min(),r,i,0)}static newNoDocument(e,n){return new jt(e,2,n,Ue.min(),Ue.min(),Bn.empty(),0)}static newUnknownDocument(e,n){return new jt(e,3,n,Ue.min(),Ue.min(),Bn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof jt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new jt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e,n){this.position=e,this.inclusive=n}}function tS(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],a=t.position[i];if(s.field.isKeyField()?r=Pe.comparator(Pe.fromName(a.referenceValue),n.key):r=Eo(a,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function nS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!es(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e,n="asc"){this.field=e,this.dir=n}}function U6(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{}class ct extends tR{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new z6(e,n,r):n==="array-contains"?new H6(e,r):n==="in"?new aR(e,r):n==="not-in"?new G6(e,r):n==="array-contains-any"?new W6(e,r):new ct(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new $6(e,r):new q6(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Eo(n,this.value)):n!==null&&Ra(this.value)===Ra(n)&&this.matchesComparison(Eo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Me()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class xt extends tR{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new xt(e,n)}matches(e){return ru(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function ru(t){return t.op==="and"}function $v(t){return t.op==="or"}function gw(t){return nR(t)&&ru(t)}function nR(t){for(const e of t.filters)if(e instanceof xt)return!1;return!0}function qv(t){if(t instanceof ct)return t.field.canonicalString()+t.op.toString()+nu(t.value);if(gw(t))return t.filters.map(e=>qv(e)).join(",");{const e=t.filters.map(n=>qv(n)).join(",");return`${t.op}(${e})`}}function rR(t,e){return t instanceof ct?function(r,i){return i instanceof ct&&r.op===i.op&&r.field.isEqual(i.field)&&es(r.value,i.value)}(t,e):t instanceof xt?function(r,i){return i instanceof xt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,c)=>s&&rR(a,i.filters[c]),!0):!1}(t,e):void Me()}function iR(t,e){const n=t.filters.concat(e);return xt.create(n,t.op)}function sR(t){return t instanceof ct?function(n){return`${n.field.canonicalString()} ${n.op} ${nu(n.value)}`}(t):t instanceof xt?function(n){return n.op.toString()+" {"+n.getFilters().map(sR).join(" ,")+"}"}(t):"Filter"}class z6 extends ct{constructor(e,n,r){super(e,n,r),this.key=Pe.fromName(r.referenceValue)}matches(e){const n=Pe.comparator(e.key,this.key);return this.matchesComparison(n)}}class $6 extends ct{constructor(e,n){super(e,"in",n),this.keys=oR("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class q6 extends ct{constructor(e,n){super(e,"not-in",n),this.keys=oR("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function oR(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Pe.fromName(r.referenceValue))}class H6 extends ct{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return yh(n)&&vh(n.arrayValue,this.value)}}class aR extends ct{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&vh(this.value.arrayValue,n)}}class G6 extends ct{constructor(e,n){super(e,"not-in",n)}matches(e){if(vh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!vh(this.value.arrayValue,n)}}class W6 extends ct{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!yh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>vh(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K6{constructor(e,n=null,r=[],i=[],s=null,a=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=c,this.ce=null}}function Hv(t,e=null,n=[],r=[],i=null,s=null,a=null){return new K6(t,e,n,r,i,s,a)}function Na(t){const e=ke(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>qv(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Yh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>nu(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>nu(r)).join(",")),e.ce=n}return e.ce}function Xh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!U6(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!rR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!nS(t.startAt,e.startAt)&&nS(t.endAt,e.endAt)}function dg(t){return Pe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function fg(t,e){return t.filters.filter(n=>n instanceof ct&&n.field.isEqual(e))}function rS(t,e,n){let r=pf,i=!0;for(const s of fg(t,e)){let a=pf,c=!0;switch(s.op){case"<":case"<=":a=B6(s.value);break;case"==":case"in":case">=":a=s.value;break;case">":a=s.value,c=!1;break;case"!=":case"not-in":a=pf}ZT({value:r,inclusive:i},{value:a,inclusive:c})<0&&(r=a,i=c)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const a=n.position[s];ZT({value:r,inclusive:i},{value:a,inclusive:n.inclusive})<0&&(r=a,i=n.inclusive);break}}return{value:r,inclusive:i}}function iS(t,e,n){let r=Js,i=!0;for(const s of fg(t,e)){let a=Js,c=!0;switch(s.op){case">=":case">":a=j6(s.value),c=!1;break;case"==":case"in":case"<=":a=s.value;break;case"<":a=s.value,c=!1;break;case"!=":case"not-in":a=Js}eS({value:r,inclusive:i},{value:a,inclusive:c})>0&&(r=a,i=c)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const a=n.position[s];eS({value:r,inclusive:i},{value:a,inclusive:n.inclusive})>0&&(r=a,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e,n=null,r=[],i=[],s=null,a="F",c=null,h=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=c,this.endAt=h,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function lR(t,e,n,r,i,s,a,c){return new Ns(t,e,n,r,i,s,a,c)}function Su(t){return new Ns(t)}function sS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function mw(t){return t.collectionGroup!==null}function Ul(t){const e=ke(t);if(e.le===null){e.le=[];const n=new Set;for(const s of e.explicitOrderBy)e.le.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new Rt(Ht.comparator);return a.filters.forEach(h=>{h.getFlattenedFilters().forEach(g=>{g.isInequality()&&(c=c.add(g.field))})}),c})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.le.push(new wh(s,r))}),n.has(Ht.keyField().canonicalString())||e.le.push(new wh(Ht.keyField(),r))}return e.le}function gr(t){const e=ke(t);return e.he||(e.he=Q6(e,Ul(t))),e.he}function Q6(t,e){if(t.limitType==="F")return Hv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new wh(i.field,s)});const n=t.endAt?new To(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new To(t.startAt.position,t.startAt.inclusive):null;return Hv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Gv(t,e){const n=t.filters.concat([e]);return new Ns(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function gg(t,e,n){return new Ns(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Jh(t,e){return Xh(gr(t),gr(e))&&t.limitType===e.limitType}function uR(t){return`${Na(gr(t))}|lt:${t.limitType}`}function ul(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>sR(i)).join(", ")}]`),Yh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>nu(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>nu(i)).join(",")),`Target(${r})`}(gr(t))}; limitType=${t.limitType})`}function Zh(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Pe.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Ul(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(a,c,h){const g=tS(a,c,h);return a.inclusive?g<=0:g<0}(r.startAt,Ul(r),i)||r.endAt&&!function(a,c,h){const g=tS(a,c,h);return a.inclusive?g>=0:g>0}(r.endAt,Ul(r),i))}(t,e)}function cR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function hR(t){return(e,n)=>{let r=!1;for(const i of Ul(t)){const s=Y6(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Y6(t,e,n){const r=t.field.isKeyField()?Pe.comparator(e.key,n.key):function(s,a,c){const h=a.data.field(s),g=c.data.field(s);return h!==null&&g!==null?Eo(h,g):Me()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Me()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ha(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Xb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X6=new Ot(Pe.comparator);function Pr(){return X6}const dR=new Ot(Pe.comparator);function uc(...t){let e=dR;for(const n of t)e=e.insert(n.key,n);return e}function fR(t){let e=dR;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Hi(){return bc()}function gR(){return bc()}function bc(){return new Fo(t=>t.toString(),(t,e)=>t.isEqual(e))}const J6=new Ot(Pe.comparator),Z6=new Rt(Pe.comparator);function st(...t){let e=Z6;for(const n of t)e=e.add(n);return e}const ej=new Rt(rt);function pw(){return ej}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mR(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ph(e)?"-0":e}}function pR(t){return{integerValue:""+t}}function _R(t,e){return Gb(e)?pR(e):mR(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(){this._=void 0}}function tj(t,e,n){return t instanceof iu?function(i,s){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&km(s)&&(s=fw(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}}(n,e):t instanceof Da?yR(t,e):t instanceof Oa?wR(t,e):function(i,s){const a=vR(i,s),c=oS(a)+oS(i.Ie);return zv(a)&&zv(i.Ie)?pR(c):mR(i.serializer,c)}(t,e)}function nj(t,e,n){return t instanceof Da?yR(t,e):t instanceof Oa?wR(t,e):n}function vR(t,e){return t instanceof su?function(r){return zv(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class iu extends Nm{}class Da extends Nm{constructor(e){super(),this.elements=e}}function yR(t,e){const n=IR(e);for(const r of t.elements)n.some(i=>es(i,r))||n.push(r);return{arrayValue:{values:n}}}class Oa extends Nm{constructor(e){super(),this.elements=e}}function wR(t,e){let n=IR(e);for(const r of t.elements)n=n.filter(i=>!es(i,r));return{arrayValue:{values:n}}}class su extends Nm{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function oS(t){return tn(t.integerValue||t.doubleValue)}function IR(t){return yh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(e,n){this.field=e,this.transform=n}}function rj(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Da&&i instanceof Da||r instanceof Oa&&i instanceof Oa?tu(r.elements,i.elements,es):r instanceof su&&i instanceof su?es(r.Ie,i.Ie):r instanceof iu&&i instanceof iu}(t.transform,e.transform)}class ij{constructor(e,n){this.version=e,this.transformResults=n}}class Gt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Gt}static exists(e){return new Gt(void 0,e)}static updateTime(e){return new Gt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Dm{}function ER(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Cu(t.key,Gt.none()):new xu(t.key,t.data,Gt.none());{const n=t.data,r=Bn.empty();let i=new Rt(Ht.comparator);for(let s of e.fields)if(!i.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new Ds(t.key,r,new Ar(i.toArray()),Gt.none())}}function sj(t,e,n){t instanceof xu?function(i,s,a){const c=i.value.clone(),h=lS(i.fieldTransforms,s,a.transformResults);c.setAll(h),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Ds?function(i,s,a){if(!vf(i.precondition,s))return void s.convertToUnknownDocument(a.version);const c=lS(i.fieldTransforms,s,a.transformResults),h=s.data;h.setAll(TR(i)),h.setAll(c),s.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(t,e,n):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Rc(t,e,n,r){return t instanceof xu?function(s,a,c,h){if(!vf(s.precondition,a))return c;const g=s.value.clone(),_=uS(s.fieldTransforms,h,a);return g.setAll(_),a.convertToFoundDocument(a.version,g).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ds?function(s,a,c,h){if(!vf(s.precondition,a))return c;const g=uS(s.fieldTransforms,h,a),_=a.data;return _.setAll(TR(s)),_.setAll(g),a.convertToFoundDocument(a.version,_).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(w=>w.field))}(t,e,n,r):function(s,a,c){return vf(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(t,e,n)}function oj(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=vR(r.transform,i||null);s!=null&&(n===null&&(n=Bn.empty()),n.set(r.field,s))}return n||null}function aS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&tu(r,i,(s,a)=>rj(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class xu extends Dm{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ds extends Dm{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function TR(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function lS(t,e,n){const r=new Map;Be(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],a=s.transform,c=e.data.field(s.field);r.set(s.field,nj(a,c,n[i]))}return r}function uS(t,e,n){const r=new Map;for(const i of t){const s=i.transform,a=n.data.field(i.field);r.set(i.field,tj(s,a,e))}return r}class Cu extends Dm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _w extends Dm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&sj(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Rc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Rc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=gR();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let c=this.applyToLocalView(a,s.mutatedFields);c=n.has(i.key)?null:c;const h=ER(a,c);h!==null&&r.set(i.key,h),a.isValidDocument()||a.convertToNoDocument(Ue.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),st())}isEqual(e){return this.batchId===e.batchId&&tu(this.mutations,e.mutations,(n,r)=>aS(n,r))&&tu(this.baseMutations,e.baseMutations,(n,r)=>aS(n,r))}}class yw{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Be(e.mutations.length===r.length);let i=function(){return J6}();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new yw(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mn,mt;function SR(t){switch(t){default:return Me();case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0}}function xR(t){if(t===void 0)return dn("GRPC error has no .code"),ue.UNKNOWN;switch(t){case mn.OK:return ue.OK;case mn.CANCELLED:return ue.CANCELLED;case mn.UNKNOWN:return ue.UNKNOWN;case mn.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case mn.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case mn.INTERNAL:return ue.INTERNAL;case mn.UNAVAILABLE:return ue.UNAVAILABLE;case mn.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case mn.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case mn.NOT_FOUND:return ue.NOT_FOUND;case mn.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case mn.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case mn.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case mn.ABORTED:return ue.ABORTED;case mn.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case mn.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case mn.DATA_LOSS:return ue.DATA_LOSS;default:return Me()}}(mt=mn||(mn={}))[mt.OK=0]="OK",mt[mt.CANCELLED=1]="CANCELLED",mt[mt.UNKNOWN=2]="UNKNOWN",mt[mt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",mt[mt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",mt[mt.NOT_FOUND=5]="NOT_FOUND",mt[mt.ALREADY_EXISTS=6]="ALREADY_EXISTS",mt[mt.PERMISSION_DENIED=7]="PERMISSION_DENIED",mt[mt.UNAUTHENTICATED=16]="UNAUTHENTICATED",mt[mt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",mt[mt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",mt[mt.ABORTED=10]="ABORTED",mt[mt.OUT_OF_RANGE=11]="OUT_OF_RANGE",mt[mt.UNIMPLEMENTED=12]="UNIMPLEMENTED",mt[mt.INTERNAL=13]="INTERNAL",mt[mt.UNAVAILABLE=14]="UNAVAILABLE",mt[mt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lj=new jl([4294967295,4294967295],0);function cS(t){const e=CR().encode(t),n=new t6;return n.update(e),new Uint8Array(n.digest())}function hS(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new jl([n,r],0),new jl([i,s],0)]}class Iw{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new cc(`Invalid padding: ${n}`);if(r<0)throw new cc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new cc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new cc(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=jl.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(jl.fromNumber(r)));return i.compare(lj)===1&&(i=new jl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=cS(e),[r,i]=hS(n);for(let s=0;s<this.hashCount;s++){const a=this.de(r,i,s);if(!this.Ae(a))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new Iw(s,i,n);return r.forEach(c=>a.insert(c)),a}insert(e){if(this.Te===0)return;const n=cS(e),[r,i]=hS(n);for(let s=0;s<this.hashCount;s++){const a=this.de(r,i,s);this.Re(a)}}Re(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class cc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,nd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new td(Ue.min(),i,new Ot(rt),Pr(),st())}}class nd{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new nd(r,n,st(),st(),st())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}}class AR{constructor(e,n){this.targetId=e,this.fe=n}}class PR{constructor(e,n,r=wn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class dS{constructor(){this.ge=0,this.pe=gS(),this.ye=wn.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=st(),n=st(),r=st();return this.pe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Me()}}),new nd(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=gS()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Be(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class uj{constructor(e){this.Le=e,this.ke=new Map,this.qe=Pr(),this.Qe=fS(),this.Ke=new Ot(rt)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:Me()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){const s=i.target;if(dg(s))if(r===0){const a=new Pe(s.path);this.We(n,a,jt.newNoDocument(a,Ue.min()))}else Be(r===1);else{const a=this.Ze(n);if(a!==r){const c=this.Xe(e),h=c?this.et(c,e,a):1;if(h!==0){this.He(n);const g=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,g)}}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let a,c;try{a=wo(r).toUint8Array()}catch(h){if(h instanceof Jb)return Ai("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{c=new Iw(a,i,s)}catch(h){return Ai(h instanceof cc?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return c.Te===0?null:c}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const a=this.Le.nt(),c=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.We(n,s,null),i++)}),i}it(e){const n=new Map;this.ke.forEach((s,a)=>{const c=this.Ye(a);if(c){if(s.current&&dg(c.target)){const h=new Pe(c.target.path);this.qe.get(h)!==null||this.st(a,h)||this.We(a,h,jt.newNoDocument(h,e))}s.De&&(n.set(a,s.ve()),s.Fe())}});let r=st();this.Qe.forEach((s,a)=>{let c=!0;a.forEachWhile(h=>{const g=this.Ye(h);return!g||g.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(s))}),this.qe.forEach((s,a)=>a.setReadTime(e));const i=new td(e,n,this.Ke,this.qe,r);return this.qe=Pr(),this.Qe=fS(),this.Ke=new Ot(rt),i}Ue(e,n){if(!this.je(e))return;const r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new dS,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Rt(rt),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||ve("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new dS),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function fS(){return new Ot(Pe.comparator)}function gS(){return new Ot(Pe.comparator)}const cj={asc:"ASCENDING",desc:"DESCENDING"},hj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dj={and:"AND",or:"OR"};class fj{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Wv(t,e){return t.useProto3Json||Yh(e)?e:{value:e}}function ou(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function gj(t,e){return ou(t,e.toTimestamp())}function gn(t){return Be(!!t),Ue.fromTimestamp(function(n){const r=yo(n);return new Wt(r.seconds,r.nanos)}(t))}function Ew(t,e){return function(r){return new pt(["projects",r.projectId,"databases",r.database])}(t).child("documents").child(e).canonicalString()}function RR(t){const e=pt.fromString(t);return Be(BR(e)),e}function Ih(t,e){return Ew(t.databaseId,e.path)}function Yi(t,e){const n=RR(e);if(n.get(1)!==t.databaseId.projectId)throw new pe(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new pe(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Pe(NR(n))}function Kv(t,e){return Ew(t.databaseId,e)}function kR(t){const e=RR(t);return e.length===4?pt.emptyPath():NR(e)}function Eh(t){return new pt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function NR(t){return Be(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function mS(t,e,n){return{name:Ih(t,e),fields:n.value.mapValue.fields}}function DR(t,e,n){const r=Yi(t,e.name),i=gn(e.updateTime),s=e.createTime?gn(e.createTime):Ue.min(),a=new Bn({mapValue:{fields:e.fields}}),c=jt.newFoundDocument(r,i,s,a);return n&&c.setHasCommittedMutations(),n?c.setHasCommittedMutations():c}function mj(t,e){return"found"in e?function(r,i){Be(!!i.found),i.found.name,i.found.updateTime;const s=Yi(r,i.found.name),a=gn(i.found.updateTime),c=i.found.createTime?gn(i.found.createTime):Ue.min(),h=new Bn({mapValue:{fields:i.found.fields}});return jt.newFoundDocument(s,a,c,h)}(t,e):"missing"in e?function(r,i){Be(!!i.missing),Be(!!i.readTime);const s=Yi(r,i.missing),a=gn(i.readTime);return jt.newNoDocument(s,a)}(t,e):Me()}function pj(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Me()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(g,_){return g.useProto3Json?(Be(_===void 0||typeof _=="string"),wn.fromBase64String(_||"")):(Be(_===void 0||_ instanceof Uint8Array),wn.fromUint8Array(_||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&function(g){const _=g.code===void 0?ue.UNKNOWN:xR(g.code);return new pe(_,g.message||"")}(a);n=new PR(r,i,s,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Yi(t,r.document.name),s=gn(r.document.updateTime),a=r.document.createTime?gn(r.document.createTime):Ue.min(),c=new Bn({mapValue:{fields:r.document.fields}}),h=jt.newFoundDocument(i,s,a,c),g=r.targetIds||[],_=r.removedTargetIds||[];n=new yf(g,_,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Yi(t,r.document),s=r.readTime?gn(r.readTime):Ue.min(),a=jt.newNoDocument(i,s),c=r.removedTargetIds||[];n=new yf([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Yi(t,r.document),s=r.removedTargetIds||[];n=new yf([],s,i,null)}else{if(!("filter"in e))return Me();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new aj(i,s),c=r.targetId;n=new AR(c,a)}}return n}function Th(t,e){let n;if(e instanceof xu)n={update:mS(t,e.key,e.value)};else if(e instanceof Cu)n={delete:Ih(t,e.key)};else if(e instanceof Ds)n={update:mS(t,e.key,e.data),updateMask:Ej(e.fieldMask)};else{if(!(e instanceof _w))return Me();n={verify:Ih(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,a){const c=a.transform;if(c instanceof iu)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Da)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Oa)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof su)return{fieldPath:a.field.canonicalString(),increment:c.Ie};throw Me()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:gj(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Me()}(t,e.precondition)),n}function Qv(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?Gt.updateTime(gn(s.updateTime)):s.exists!==void 0?Gt.exists(s.exists):Gt.none()}(e.currentDocument):Gt.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,c){let h=null;if("setToServerValue"in c)Be(c.setToServerValue==="REQUEST_TIME"),h=new iu;else if("appendMissingElements"in c){const _=c.appendMissingElements.values||[];h=new Da(_)}else if("removeAllFromArray"in c){const _=c.removeAllFromArray.values||[];h=new Oa(_)}else"increment"in c?h=new su(a,c.increment):Me();const g=Ht.fromServerFormat(c.fieldPath);return new ed(g,h)}(t,i)):[];if(e.update){e.update.name;const i=Yi(t,e.update.name),s=new Bn({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=function(h){const g=h.fieldPaths||[];return new Ar(g.map(_=>Ht.fromServerFormat(_)))}(e.updateMask);return new Ds(i,s,a,n,r)}return new xu(i,s,n,r)}if(e.delete){const i=Yi(t,e.delete);return new Cu(i,n)}if(e.verify){const i=Yi(t,e.verify);return new _w(i,n)}return Me()}function _j(t,e){return t&&t.length>0?(Be(e!==void 0),t.map(n=>function(i,s){let a=i.updateTime?gn(i.updateTime):gn(s);return a.isEqual(Ue.min())&&(a=gn(s)),new ij(a,i.transformResults||[])}(n,e))):[]}function OR(t,e){return{documents:[Kv(t,e.path)]}}function MR(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=Kv(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Kv(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(h){if(h.length!==0)return FR(xt.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(h){if(h.length!==0)return h.map(g=>function(w){return{field:cl(w.field),direction:yj(w.dir)}}(g))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const a=Wv(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),n}function LR(t){let e=kR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Be(r===1);const _=n.from[0];_.allDescendants?i=_.collectionId:e=e.child(_.collectionId)}let s=[];n.where&&(s=function(w){const T=VR(w);return T instanceof xt&&gw(T)?T.getFilters():[T]}(n.where));let a=[];n.orderBy&&(a=function(w){return w.map(T=>function($){return new wh(hl($.field),function(J){switch(J){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}($.direction))}(T))}(n.orderBy));let c=null;n.limit&&(c=function(w){let T;return T=typeof w=="object"?w.value:w,Yh(T)?null:T}(n.limit));let h=null;n.startAt&&(h=function(w){const T=!!w.before,E=w.values||[];return new To(E,T)}(n.startAt));let g=null;return n.endAt&&(g=function(w){const T=!w.before,E=w.values||[];return new To(E,T)}(n.endAt)),lR(e,i,a,s,c,"F",h,g)}function vj(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Me()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function VR(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=hl(n.unaryFilter.field);return ct.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=hl(n.unaryFilter.field);return ct.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=hl(n.unaryFilter.field);return ct.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=hl(n.unaryFilter.field);return ct.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Me()}}(t):t.fieldFilter!==void 0?function(n){return ct.create(hl(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Me()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return xt.create(n.compositeFilter.filters.map(r=>VR(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Me()}}(n.compositeFilter.op))}(t):Me()}function yj(t){return cj[t]}function wj(t){return hj[t]}function Ij(t){return dj[t]}function cl(t){return{fieldPath:t.canonicalString()}}function hl(t){return Ht.fromServerFormat(t.fieldPath)}function FR(t){return t instanceof ct?function(n){if(n.op==="=="){if(JT(n.value))return{unaryFilter:{field:cl(n.field),op:"IS_NAN"}};if(XT(n.value))return{unaryFilter:{field:cl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(JT(n.value))return{unaryFilter:{field:cl(n.field),op:"IS_NOT_NAN"}};if(XT(n.value))return{unaryFilter:{field:cl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:cl(n.field),op:wj(n.op),value:n.value}}}(t):t instanceof xt?function(n){const r=n.getFilters().map(i=>FR(i));return r.length===1?r[0]:{compositeFilter:{op:Ij(n.op),filters:r}}}(t):Me()}function Ej(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function BR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e,n,r,i,s=Ue.min(),a=Ue.min(),c=wn.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=h}withSequenceNumber(e){return new _s(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e){this.ut=e}}function Tj(t,e){let n;if(e.document)n=DR(t.ut,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Pe.fromSegments(e.noDocument.path),i=La(e.noDocument.readTime);n=jt.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Me();{const r=Pe.fromSegments(e.unknownDocument.path),i=La(e.unknownDocument.version);n=jt.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new Wt(i[0],i[1]);return Ue.fromTimestamp(s)}(e.readTime)),n}function pS(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:mg(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,a){return{name:Ih(s,a.key),fields:a.data.value.mapValue.fields,updateTime:ou(s,a.version.toTimestamp()),createTime:ou(s,a.createTime.toTimestamp())}}(t.ut,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Ma(e.version)};else{if(!e.isUnknownDocument())return Me();r.unknownDocument={path:n.path.toArray(),version:Ma(e.version)}}return r}function mg(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ma(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function La(t){const e=new Wt(t.seconds,t.nanoseconds);return Ue.fromTimestamp(e)}function ea(t,e){const n=(e.baseMutations||[]).map(s=>Qv(t.ut,s));for(let s=0;s<e.mutations.length-1;++s){const a=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const c=e.mutations[s+1];a.updateTransforms=c.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>Qv(t.ut,s)),i=Wt.fromMillis(e.localWriteTimeMs);return new vw(e.batchId,i,n,r)}function hc(t){const e=La(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?La(t.lastLimboFreeSnapshotVersion):Ue.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){return Be(s.documents.length===1),gr(Su(kR(s.documents[0])))}(t.query):function(s){return gr(LR(s))}(t.query),new _s(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,wn.fromBase64String(t.resumeToken))}function UR(t,e){const n=Ma(e.snapshotVersion),r=Ma(e.lastLimboFreeSnapshotVersion);let i;i=dg(e.target)?OR(t.ut,e.target):MR(t.ut,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Na(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Tw(t){const e=LR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?gg(e,e.limit,"L"):e}function Wp(t,e){return new ww(e.largestBatchId,Qv(t.ut,e.overlayMutation))}function _S(t,e){const n=e.path.lastSegment();return[t,fr(e.path.popLast()),n]}function vS(t,e,n,r){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:Ma(r.readTime),documentKey:fr(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sj{getBundleMetadata(e,n){return yS(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:La(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return yS(e).put(function(i){return{bundleId:i.id,createTime:Ma(gn(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return wS(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:Tw(s.bundledQuery),readTime:La(s.readTime)}}(r)})}saveNamedQuery(e,n){return wS(e).put(function(i){return{name:i.name,readTime:Ma(gn(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function yS(t){return Dn(t,"bundles")}function wS(t){return Dn(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e,n){this.serializer=e,this.userId=n}static ct(e,n){const r=n.uid||"";return new Om(e,r)}getOverlay(e,n){return Gu(e).get(_S(this.userId,n)).next(r=>r?Wp(this.serializer,r):null)}getOverlays(e,n){const r=Hi();return se.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,a)=>{const c=new ww(n,a);i.push(this.lt(e,c))}),se.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(a=>i.add(fr(a.getCollectionPath())));const s=[];return i.forEach(a=>{const c=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,r+1],!1,!0);s.push(Gu(e).H("collectionPathOverlayIndex",c))}),se.waitFor(s)}getOverlaysForCollection(e,n,r){const i=Hi(),s=fr(n),a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Gu(e).W("collectionPathOverlayIndex",a).next(c=>{for(const h of c){const g=Wp(this.serializer,h);i.set(g.getKey(),g)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=Hi();let a;const c=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Gu(e).Y({index:"collectionGroupOverlayIndex",range:c},(h,g,_)=>{const w=Wp(this.serializer,g);s.size()<i||w.largestBatchId===a?(s.set(w.getKey(),w),a=w.largestBatchId):_.done()}).next(()=>s)}lt(e,n){return Gu(e).put(function(i,s,a){const[c,h,g]=_S(s,a.mutation.key);return{userId:s,collectionPath:h,documentId:g,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:Th(i.ut,a.mutation)}}(this.serializer,this.userId,n))}}function Gu(t){return Dn(t,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(){}ht(e,n){this.Pt(e,n),n.It()}Pt(e,n){if("nullValue"in e)this.Tt(n,5);else if("booleanValue"in e)this.Tt(n,10),n.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(n,15),n.Et(tn(e.integerValue));else if("doubleValue"in e){const r=tn(e.doubleValue);isNaN(r)?this.Tt(n,13):(this.Tt(n,15),ph(r)?n.Et(0):n.Et(r))}else if("timestampValue"in e){const r=e.timestampValue;this.Tt(n,20),typeof r=="string"?n.dt(r):(n.dt(`${r.seconds||""}`),n.Et(r.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,n),this.Rt(n);else if("bytesValue"in e)this.Tt(n,30),n.Vt(wo(e.bytesValue)),this.Rt(n);else if("referenceValue"in e)this.ft(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Tt(n,45),n.Et(r.latitude||0),n.Et(r.longitude||0)}else"mapValue"in e?Zb(e)?this.Tt(n,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,n),this.Rt(n)):"arrayValue"in e?(this.yt(e.arrayValue,n),this.Rt(n)):Me()}At(e,n){this.Tt(n,25),this.wt(e,n)}wt(e,n){n.dt(e)}gt(e,n){const r=e.fields||{};this.Tt(n,55);for(const i of Object.keys(r))this.At(i,n),this.Pt(r[i],n)}yt(e,n){const r=e.values||[];this.Tt(n,50);for(const i of r)this.Pt(i,n)}ft(e,n){this.Tt(n,37),Pe.fromName(e).path.forEach(r=>{this.Tt(n,60),this.wt(r,n)})}Tt(e,n){e.Et(n)}Rt(e){e.Et(2)}}ta.St=new ta;function xj(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function IS(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const a=xj(255&r[s]);if(i+=a,a!==8)break}return i}(t);return Math.ceil(e/8)}class Cj{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Dt(r.value),r=n.next();this.Ct()}vt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Dt(r);else if(r<2048)this.Dt(960|r>>>6),this.Dt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Dt(480|r>>>12),this.Dt(128|63&r>>>6),this.Dt(128|63&r);else{const i=n.codePointAt(0);this.Dt(240|i>>>18),this.Dt(128|63&i>>>12),this.Dt(128|63&i>>>6),this.Dt(128|63&i)}}this.Ct()}Ot(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Nt(e){const n=this.Bt(e),r=IS(n);this.Lt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}kt(e){const n=this.Bt(e),r=IS(n);this.Lt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){const n=function(s){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,s,!1),new Uint8Array(a.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Dt(e){const n=255&e;n===0?(this.Qt(0),this.Qt(255)):n===255?(this.Qt(255),this.Qt(0)):this.Qt(n)}Ft(e){const n=255&e;n===0?(this.$t(0),this.$t(255)):n===255?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class Aj{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class Pj{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class Wu{constructor(){this.Wt=new Cj,this.Gt=new Aj(this.Wt),this.zt=new Pj(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return e===0?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Ht(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new na(this.indexId,this.documentKey,this.arrayValue,r)}}function Bs(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=ES(t.arrayValue,e.arrayValue),n!==0?n:(n=ES(t.directionalValue,e.directionalValue),n!==0?n:Pe.comparator(t.documentKey,e.documentKey)))}function ES(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(e){this.Jt=new Rt((n,r)=>Ht.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const n of e.filters){const r=n;r.isInequality()?this.Jt=this.Jt.add(r):this.Zt.push(r)}}get Xt(){return this.Jt.size>1}en(e){if(Be(e.collectionGroup===this.collectionId),this.Xt)return!1;const n=Bv(e);if(n!==void 0&&!this.tn(n))return!1;const r=Jo(e);let i=new Set,s=0,a=0;for(;s<r.length&&this.tn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Jt.size>0){const c=this.Jt.getIterator().getNext();if(!i.has(c.field.canonicalString())){const h=r[s];if(!this.nn(c,h)||!this.rn(this.Yt[a++],h))return!1}++s}for(;s<r.length;++s){const c=r[s];if(a>=this.Yt.length||!this.rn(this.Yt[a++],c))return!1}return!0}sn(){if(this.Xt)return null;let e=new Rt(Ht.comparator);const n=[];for(const r of this.Zt)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new gf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new gf(r.field,0))}for(const r of this.Yt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new gf(r.field,r.dir==="asc"?0:1)));return new hg(hg.UNKNOWN_ID,this.collectionId,n,mh.empty())}tn(e){for(const n of this.Zt)if(this.nn(n,e))return!0;return!1}nn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}rn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zR(t){var e,n;if(Be(t instanceof ct||t instanceof xt),t instanceof ct){if(t instanceof aR){const i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>ct.create(t.field,"==",s)))||[];return xt.create(i,"or")}return t}const r=t.filters.map(i=>zR(i));return xt.create(r,t.op)}function bj(t){if(t.getFilters().length===0)return[];const e=Jv(zR(t));return Be($R(e)),Yv(e)||Xv(e)?[e]:e.getFilters()}function Yv(t){return t instanceof ct}function Xv(t){return t instanceof xt&&gw(t)}function $R(t){return Yv(t)||Xv(t)||function(n){if(n instanceof xt&&$v(n)){for(const r of n.getFilters())if(!Yv(r)&&!Xv(r))return!1;return!0}return!1}(t)}function Jv(t){if(Be(t instanceof ct||t instanceof xt),t instanceof ct)return t;if(t.filters.length===1)return Jv(t.filters[0]);const e=t.filters.map(r=>Jv(r));let n=xt.create(e,t.op);return n=pg(n),$R(n)?n:(Be(n instanceof xt),Be(ru(n)),Be(n.filters.length>1),n.filters.reduce((r,i)=>Sw(r,i)))}function Sw(t,e){let n;return Be(t instanceof ct||t instanceof xt),Be(e instanceof ct||e instanceof xt),n=t instanceof ct?e instanceof ct?function(i,s){return xt.create([i,s],"and")}(t,e):SS(t,e):e instanceof ct?SS(e,t):function(i,s){if(Be(i.filters.length>0&&s.filters.length>0),ru(i)&&ru(s))return iR(i,s.getFilters());const a=$v(i)?i:s,c=$v(i)?s:i,h=a.filters.map(g=>Sw(g,c));return xt.create(h,"or")}(t,e),pg(n)}function SS(t,e){if(ru(e))return iR(e,t.getFilters());{const n=e.filters.map(r=>Sw(t,r));return xt.create(n,"or")}}function pg(t){if(Be(t instanceof ct||t instanceof xt),t instanceof ct)return t;const e=t.getFilters();if(e.length===1)return pg(e[0]);if(nR(t))return t;const n=e.map(i=>pg(i)),r=[];return n.forEach(i=>{i instanceof ct?r.push(i):i instanceof xt&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:xt.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rj{constructor(){this.on=new xw}addToCollectionParentIndex(e,n){return this.on.add(n),se.resolve()}getCollectionParents(e,n){return se.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return se.resolve()}deleteFieldIndex(e,n){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,n){return se.resolve()}getDocumentsMatchingTarget(e,n){return se.resolve(null)}getIndexType(e,n){return se.resolve(0)}getFieldIndexes(e,n){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,n){return se.resolve(qr.min())}getMinOffsetFromCollectionGroup(e,n){return se.resolve(qr.min())}updateCollectionGroup(e,n,r){return se.resolve()}updateIndexEntries(e,n){return se.resolve()}}class xw{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Rt(pt.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Rt(pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $d=new Uint8Array(0);class kj{constructor(e,n){this.user=e,this.databaseId=n,this._n=new xw,this.an=new Fo(r=>Na(r),(r,i)=>Xh(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this._n.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this._n.add(n)});const s={collectionId:r,parent:fr(i)};return xS(e).put(s)}return se.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[Ub(n),""],!1,!0);return xS(e).W(i).next(s=>{for(const a of s){if(a.collectionId!==n)break;r.push(qi(a.parent))}return r})}addFieldIndex(e,n){const r=Ku(e),i=function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const a=nl(e);return s.next(c=>{a.put(vS(c,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=Ku(e),i=nl(e),s=tl(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Ku(e),r=tl(e),i=nl(e);return n.H().next(()=>r.H()).next(()=>i.H())}createTargetIndexes(e,n){return se.forEach(this.un(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new TS(r).sn();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=tl(e);let i=!0;const s=new Map;return se.forEach(this.un(n),a=>this.cn(e,a).next(c=>{i&&(i=!!c),s.set(a,c)})).next(()=>{if(i){let a=st();const c=[];return se.forEach(s,(h,g)=>{ve("IndexedDbIndexManager",`Using index ${function(j){return`id=${j.indexId}|cg=${j.collectionGroup}|f=${j.fields.map(Z=>`${Z.fieldPath}:${Z.kind}`).join(",")}`}(h)} to execute ${Na(n)}`);const _=function(j,Z){const ne=Bv(Z);if(ne===void 0)return null;for(const te of fg(j,ne.fieldPath))switch(te.op){case"array-contains-any":return te.value.arrayValue.values||[];case"array-contains":return[te.value]}return null}(g,h),w=function(j,Z){const ne=new Map;for(const te of Jo(Z))for(const ae of fg(j,te.fieldPath))switch(ae.op){case"==":case"in":ne.set(te.fieldPath.canonicalString(),ae.value);break;case"not-in":case"!=":return ne.set(te.fieldPath.canonicalString(),ae.value),Array.from(ne.values())}return null}(g,h),T=function(j,Z){const ne=[];let te=!0;for(const ae of Jo(Z)){const ce=ae.kind===0?rS(j,ae.fieldPath,j.startAt):iS(j,ae.fieldPath,j.startAt);ne.push(ce.value),te&&(te=ce.inclusive)}return new To(ne,te)}(g,h),E=function(j,Z){const ne=[];let te=!0;for(const ae of Jo(Z)){const ce=ae.kind===0?iS(j,ae.fieldPath,j.endAt):rS(j,ae.fieldPath,j.endAt);ne.push(ce.value),te&&(te=ce.inclusive)}return new To(ne,te)}(g,h),$=this.ln(h,g,T),U=this.ln(h,g,E),J=this.hn(h,g,w),V=this.Pn(h.indexId,_,$,T.inclusive,U,E.inclusive,J);return se.forEach(V,B=>r.j(B,n.limit).next(j=>{j.forEach(Z=>{const ne=Pe.fromSegments(Z.documentKey);a.has(ne)||(a=a.add(ne),c.push(ne))})}))}).next(()=>c)}return se.resolve(null)})}un(e){let n=this.an.get(e);return n||(e.filters.length===0?n=[e]:n=bj(xt.create(e.filters,"and")).map(r=>Hv(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.an.set(e,n),n)}Pn(e,n,r,i,s,a,c){const h=(n!=null?n.length:1)*Math.max(r.length,s.length),g=h/(n!=null?n.length:1),_=[];for(let w=0;w<h;++w){const T=n?this.In(n[w/g]):$d,E=this.Tn(e,T,r[w%g],i),$=this.En(e,T,s[w%g],a),U=c.map(J=>this.Tn(e,T,J,!0));_.push(...this.createRange(E,$,U))}return _}Tn(e,n,r,i){const s=new na(e,Pe.empty(),n,r);return i?s:s.Ht()}En(e,n,r,i){const s=new na(e,Pe.empty(),n,r);return i?s.Ht():s}cn(e,n){const r=new TS(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let a=null;for(const c of s)r.en(c)&&(!a||c.fields.length>a.fields.length)&&(a=c);return a})}getIndexType(e,n){let r=2;const i=this.un(n);return se.forEach(i,s=>this.cn(e,s).next(a=>{a?r!==0&&a.fields.length<function(h){let g=new Rt(Ht.comparator),_=!1;for(const w of h.filters)for(const T of w.getFlattenedFilters())T.field.isKeyField()||(T.op==="array-contains"||T.op==="array-contains-any"?_=!0:g=g.add(T.field));for(const w of h.orderBy)w.field.isKeyField()||(g=g.add(w.field));return g.size+(_?1:0)}(s)&&(r=1):r=0})).next(()=>function(a){return a.limit!==null}(n)&&i.length>1&&r===2?1:r)}dn(e,n){const r=new Wu;for(const i of Jo(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const a=r.jt(i.kind);ta.St.ht(s,a)}return r.Ut()}In(e){const n=new Wu;return ta.St.ht(e,n.jt(0)),n.Ut()}An(e,n){const r=new Wu;return ta.St.ht(ka(this.databaseId,n),r.jt(function(s){const a=Jo(s);return a.length===0?0:a[a.length-1].kind}(e))),r.Ut()}hn(e,n,r){if(r===null)return[];let i=[];i.push(new Wu);let s=0;for(const a of Jo(e)){const c=r[s++];for(const h of i)if(this.Rn(n,a.fieldPath)&&yh(c))i=this.Vn(i,a,c);else{const g=h.jt(a.kind);ta.St.ht(c,g)}}return this.mn(i)}ln(e,n,r){return this.hn(e,n,r.position)}mn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Ut();return n}Vn(e,n,r){const i=[...e],s=[];for(const a of r.arrayValue.values||[])for(const c of i){const h=new Wu;h.seed(c.Ut()),ta.St.ht(a,h.jt(n.kind)),s.push(h)}return s}Rn(e,n){return!!e.filters.find(r=>r instanceof ct&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=Ku(e),i=nl(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(s=>{const a=[];return se.forEach(s,c=>i.get([c.indexId,this.uid]).next(h=>{a.push(function(_,w){const T=w?new mh(w.sequenceNumber,new qr(La(w.readTime),new Pe(qi(w.documentKey)),w.largestBatchId)):mh.empty(),E=_.fields.map(([$,U])=>new gf(Ht.fromServerFormat($),U));return new hg(_.indexId,_.collectionGroup,E,T)}(c,h))})).next(()=>a)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:rt(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Ku(e),s=nl(e);return this.fn(e).next(a=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(c=>se.forEach(c,h=>s.put(vS(h.indexId,this.user,a,r)))))}updateIndexEntries(e,n){const r=new Map;return se.forEach(n,(i,s)=>{const a=r.get(i.collectionGroup);return(a?se.resolve(a):this.getFieldIndexes(e,i.collectionGroup)).next(c=>(r.set(i.collectionGroup,c),se.forEach(c,h=>this.gn(e,i,h).next(g=>{const _=this.pn(s,h);return g.isEqual(_)?se.resolve():this.yn(e,s,h,g,_)}))))})}wn(e,n,r,i){return tl(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.An(r,n.key),documentKey:n.key.path.toArray()})}Sn(e,n,r,i){return tl(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.An(r,n.key),n.key.path.toArray()])}gn(e,n,r){const i=tl(e);let s=new Rt(Bs);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.An(r,n)])},(a,c)=>{s=s.add(new na(r.indexId,n,c.arrayValue,c.directionalValue))}).next(()=>s)}pn(e,n){let r=new Rt(Bs);const i=this.dn(n,e);if(i==null)return r;const s=Bv(n);if(s!=null){const a=e.data.field(s.fieldPath);if(yh(a))for(const c of a.arrayValue.values||[])r=r.add(new na(n.indexId,e.key,this.In(c),i))}else r=r.add(new na(n.indexId,e.key,$d,i));return r}yn(e,n,r,i,s){ve("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const a=[];return function(h,g,_,w,T){const E=h.getIterator(),$=g.getIterator();let U=el(E),J=el($);for(;U||J;){let V=!1,B=!1;if(U&&J){const j=_(U,J);j<0?B=!0:j>0&&(V=!0)}else U!=null?B=!0:V=!0;V?(w(J),J=el($)):B?(T(U),U=el(E)):(U=el(E),J=el($))}}(i,s,Bs,c=>{a.push(this.wn(e,n,r,c))},c=>{a.push(this.Sn(e,n,r,c))}),se.waitFor(a)}fn(e){let n=1;return nl(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((a,c)=>Bs(a,c)).filter((a,c,h)=>!c||Bs(a,h[c-1])!==0);const i=[];i.push(e);for(const a of r){const c=Bs(a,e),h=Bs(a,n);if(c===0)i[0]=e.Ht();else if(c>0&&h<0)i.push(a),i.push(a.Ht());else if(h>0)break}i.push(n);const s=[];for(let a=0;a<i.length;a+=2){if(this.bn(i[a],i[a+1]))return[];const c=[i[a].indexId,this.uid,i[a].arrayValue,i[a].directionalValue,$d,[]],h=[i[a+1].indexId,this.uid,i[a+1].arrayValue,i[a+1].directionalValue,$d,[]];s.push(IDBKeyRange.bound(c,h))}return s}bn(e,n){return Bs(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(CS)}getMinOffset(e,n){return se.mapArray(this.un(n),r=>this.cn(e,r).next(i=>i||Me())).next(CS)}}function xS(t){return Dn(t,"collectionParents")}function tl(t){return Dn(t,"indexEntries")}function Ku(t){return Dn(t,"indexConfiguration")}function nl(t){return Dn(t,"indexState")}function CS(t){Be(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;hw(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new qr(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ir{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ir(e,Ir.DEFAULT_COLLECTION_PERCENTILE,Ir.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qR(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],a=IDBKeyRange.only(n.batchId);let c=0;const h=r.Y({range:a},(_,w,T)=>(c++,T.delete()));s.push(h.next(()=>{Be(c===1)}));const g=[];for(const _ of n.mutations){const w=Wb(e,_.key.path,n.batchId);s.push(i.delete(w)),g.push(_.key)}return se.waitFor(s).next(()=>g)}function _g(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Me();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ir.DEFAULT_COLLECTION_PERCENTILE=10,Ir.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ir.DEFAULT=new Ir(41943040,Ir.DEFAULT_COLLECTION_PERCENTILE,Ir.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ir.DISABLED=new Ir(-1,0,0);class Mm{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Dn={}}static ct(e,n,r,i){Be(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new Mm(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return js(e).Y({index:"userMutationsIndex",range:r},(i,s,a)=>{n=!1,a.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=dl(e),a=js(e);return a.add({}).next(c=>{Be(typeof c=="number");const h=new vw(c,n,r,i),g=function(E,$,U){const J=U.baseMutations.map(B=>Th(E.ut,B)),V=U.mutations.map(B=>Th(E.ut,B));return{userId:$,batchId:U.batchId,localWriteTimeMs:U.localWriteTime.toMillis(),baseMutations:J,mutations:V}}(this.serializer,this.userId,h),_=[];let w=new Rt((T,E)=>rt(T.canonicalString(),E.canonicalString()));for(const T of i){const E=Wb(this.userId,T.key.path,c);w=w.add(T.key.path.popLast()),_.push(a.put(g)),_.push(s.put(E,y6))}return w.forEach(T=>{_.push(this.indexManager.addToCollectionParentIndex(e,T))}),e.addOnCommittedListener(()=>{this.Dn[c]=h.keys()}),se.waitFor(_).next(()=>h)})}lookupMutationBatch(e,n){return js(e).get(n).next(r=>r?(Be(r.userId===this.userId),ea(this.serializer,r)):null)}Cn(e,n){return this.Dn[n]?se.resolve(this.Dn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Dn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return js(e).Y({index:"userMutationsIndex",range:i},(a,c,h)=>{c.userId===this.userId&&(Be(c.batchId>=r),s=ea(this.serializer,c)),h.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return js(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(i,s,a)=>{r=s.batchId,a.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return js(e).W("userMutationsIndex",n).next(r=>r.map(i=>ea(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=mf(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return dl(e).Y({range:i},(a,c,h)=>{const[g,_,w]=a,T=qi(_);if(g===this.userId&&n.path.isEqual(T))return js(e).get(w).next(E=>{if(!E)throw Me();Be(E.userId===this.userId),s.push(ea(this.serializer,E))});h.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Rt(rt);const i=[];return n.forEach(s=>{const a=mf(this.userId,s.path),c=IDBKeyRange.lowerBound(a),h=dl(e).Y({range:c},(g,_,w)=>{const[T,E,$]=g,U=qi(E);T===this.userId&&s.path.isEqual(U)?r=r.add($):w.done()});i.push(h)}),se.waitFor(i).next(()=>this.vn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=mf(this.userId,r),a=IDBKeyRange.lowerBound(s);let c=new Rt(rt);return dl(e).Y({range:a},(h,g,_)=>{const[w,T,E]=h,$=qi(T);w===this.userId&&r.isPrefixOf($)?$.length===i&&(c=c.add(E)):_.done()}).next(()=>this.vn(e,c))}vn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(js(e).get(s).next(a=>{if(a===null)throw Me();Be(a.userId===this.userId),r.push(ea(this.serializer,a))}))}),se.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return qR(e.ae,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Fn(n.batchId)}),se.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return se.resolve();const r=IDBKeyRange.lowerBound(function(a){return[a]}(this.userId)),i=[];return dl(e).Y({range:r},(s,a,c)=>{if(s[0]===this.userId){const h=qi(s[1]);i.push(h)}else c.done()}).next(()=>{Be(i.length===0)})})}containsKey(e,n){return HR(e,this.userId,n)}Mn(e){return GR(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function HR(t,e,n){const r=mf(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let a=!1;return dl(t).Y({range:s,J:!0},(c,h,g)=>{const[_,w,T]=c;_===e&&w===i&&(a=!0),g.done()}).next(()=>a)}function js(t){return Dn(t,"mutations")}function dl(t){return Dn(t,"documentMutations")}function GR(t){return Dn(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new Va(0)}static Nn(){return new Va(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{const r=new Va(n.highestTargetId);return n.highestTargetId=r.next(),this.Ln(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>Ue.fromTimestamp(new Wt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Ln(e,i)))}addTargetData(e,n){return this.kn(e,n).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.qn(n,r),this.Ln(e,r))))}updateTargetData(e,n){return this.kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>rl(e).delete(n.targetId)).next(()=>this.Bn(e)).next(r=>(Be(r.targetCount>0),r.targetCount-=1,this.Ln(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return rl(e).Y((a,c)=>{const h=hc(c);h.sequenceNumber<=n&&r.get(h.targetId)===null&&(i++,s.push(this.removeTargetData(e,h)))}).next(()=>se.waitFor(s)).next(()=>i)}forEachTarget(e,n){return rl(e).Y((r,i)=>{const s=hc(i);n(s)})}Bn(e){return PS(e).get("targetGlobalKey").next(n=>(Be(n!==null),n))}Ln(e,n){return PS(e).put("targetGlobalKey",n)}kn(e,n){return rl(e).put(UR(this.serializer,n))}qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Na(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return rl(e).Y({range:i,index:"queryTargetsIndex"},(a,c,h)=>{const g=hc(c);Xh(n,g.target)&&(s=g,h.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=Gs(e);return n.forEach(a=>{const c=fr(a.path);i.push(s.put({targetId:r,path:c})),i.push(this.referenceDelegate.addReference(e,r,a))}),se.waitFor(i)}removeMatchingKeys(e,n,r){const i=Gs(e);return se.forEach(n,s=>{const a=fr(s.path);return se.waitFor([i.delete([r,a]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=Gs(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Gs(e);let s=st();return i.Y({range:r,J:!0},(a,c,h)=>{const g=qi(a[1]),_=new Pe(g);s=s.add(_)}).next(()=>s)}containsKey(e,n){const r=fr(n.path),i=IDBKeyRange.bound([r],[Ub(r)],!1,!0);let s=0;return Gs(e).Y({index:"documentTargetsIndex",J:!0,range:i},([a,c],h,g)=>{a!==0&&(s++,g.done())}).next(()=>s>0)}_t(e,n){return rl(e).get(n).next(r=>r?hc(r):null)}}function rl(t){return Dn(t,"targets")}function PS(t){return Dn(t,"targetGlobal")}function Gs(t){return Dn(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bS([t,e],[n,r]){const i=rt(t,n);return i===0?rt(e,r):i}class Dj{constructor(e){this.Qn=e,this.buffer=new Rt(bS),this.Kn=0}$n(){return++this.Kn}Un(e){const n=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();bS(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Oj{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Wn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return this.Wn!==null}Gn(e){ve("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Wn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Vo(n)?ve("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Lo(n)}await this.Gn(3e5)})}}class Mj{constructor(e,n){this.zn=e,this.params=n}calculateTargetCount(e,n){return this.zn.jn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return se.resolve(Cr._e);const r=new Dj(n);return this.zn.forEachTarget(e,i=>r.Un(i.sequenceNumber)).next(()=>this.zn.Hn(e,i=>r.Un(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.zn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.zn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ve("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(AS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),AS):this.Jn(e,n))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,n){let r,i,s,a,c,h,g;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),i=this.params.maximumSequenceNumbersToCollect):i=w,a=Date.now(),this.nthSequenceNumber(e,i))).next(w=>(r=w,c=Date.now(),this.removeTargets(e,r,n))).next(w=>(s=w,h=Date.now(),this.removeOrphanedDocuments(e,r))).next(w=>(g=Date.now(),ll()<=lt.DEBUG&&ve("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-_}ms
	Determined least recently used ${i} in `+(c-a)+`ms
	Removed ${s} targets in `+(h-c)+`ms
	Removed ${w} documents in `+(g-h)+`ms
Total Duration: ${g-_}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:w})))}}function Lj(t,e){return new Mj(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{constructor(e,n){this.db=e,this.garbageCollector=Lj(this,n)}jn(e){const n=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Yn(e){let n=0;return this.Hn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Hn(e,n){return this.Zn(e,(r,i)=>n(i))}addReference(e,n,r){return qd(e,r)}removeReference(e,n,r){return qd(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return qd(e,n)}Xn(e,n){return function(i,s){let a=!1;return GR(i).Z(c=>HR(i,c,s).next(h=>(h&&(a=!0),se.resolve(!h)))).next(()=>a)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Zn(e,(a,c)=>{if(c<=n){const h=this.Xn(e,a).next(g=>{if(!g)return s++,r.getEntry(e,a).next(()=>(r.removeEntry(a,Ue.min()),Gs(e).delete(function(w){return[0,fr(w.path)]}(a))))});i.push(h)}}).next(()=>se.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return qd(e,n)}Zn(e,n){const r=Gs(e);let i,s=Cr._e;return r.Y({index:"documentTargetsIndex"},([a,c],{path:h,sequenceNumber:g})=>{a===0?(s!==Cr._e&&n(new Pe(qi(i)),s),s=g,i=h):s=Cr._e}).next(()=>{s!==Cr._e&&n(new Pe(qi(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function qd(t,e){return Gs(t).put(function(r,i){return{targetId:0,path:fr(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(){this.changes=new Fo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,jt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?se.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Wo(e).put(r)}removeEntry(e,n,r){return Wo(e).delete(function(s,a){const c=s.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],mg(a),c[c.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.er(e,r)))}getEntry(e,n){let r=jt.newInvalidDocument(n);return Wo(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Qu(n))},(i,s)=>{r=this.tr(n,s)}).next(()=>r)}nr(e,n){let r={size:0,document:jt.newInvalidDocument(n)};return Wo(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Qu(n))},(i,s)=>{r={document:this.tr(n,s),size:_g(s)}}).next(()=>r)}getEntries(e,n){let r=Pr();return this.rr(e,n,(i,s)=>{const a=this.tr(i,s);r=r.insert(i,a)}).next(()=>r)}ir(e,n){let r=Pr(),i=new Ot(Pe.comparator);return this.rr(e,n,(s,a)=>{const c=this.tr(s,a);r=r.insert(s,c),i=i.insert(s,_g(a))}).next(()=>({documents:r,sr:i}))}rr(e,n,r){if(n.isEmpty())return se.resolve();let i=new Rt(NS);n.forEach(h=>i=i.add(h));const s=IDBKeyRange.bound(Qu(i.first()),Qu(i.last())),a=i.getIterator();let c=a.getNext();return Wo(e).Y({index:"documentKeyIndex",range:s},(h,g,_)=>{const w=Pe.fromSegments([...g.prefixPath,g.collectionGroup,g.documentId]);for(;c&&NS(c,w)<0;)r(c,null),c=a.getNext();c&&c.isEqual(w)&&(r(c,g),c=a.hasNext()?a.getNext():null),c?_.U(Qu(c)):_.done()}).next(()=>{for(;c;)r(c,null),c=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const a=n.path,c=[a.popLast().toArray(),a.lastSegment(),mg(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],h=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Wo(e).W(IDBKeyRange.bound(c,h,!0)).next(g=>{s==null||s.incrementDocumentReadCount(g.length);let _=Pr();for(const w of g){const T=this.tr(Pe.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);T.isFoundDocument()&&(Zh(n,T)||i.has(T.key))&&(_=_.insert(T.key,T))}return _})}getAllFromCollectionGroup(e,n,r,i){let s=Pr();const a=kS(n,r),c=kS(n,qr.max());return Wo(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(a,c,!0)},(h,g,_)=>{const w=this.tr(Pe.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);s=s.insert(w.key,w),s.size===i&&_.done()}).next(()=>s)}newChangeBuffer(e){return new Bj(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return RS(e).get("remoteDocumentGlobalKey").next(n=>(Be(!!n),n))}er(e,n){return RS(e).put("remoteDocumentGlobalKey",n)}tr(e,n){if(n){const r=Tj(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(Ue.min())))return r}return jt.newInvalidDocument(e)}}function KR(t){return new Fj(t)}class Bj extends WR{constructor(e,n){super(),this._r=e,this.trackRemovals=n,this.ar=new Fo(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Rt((s,a)=>rt(s.canonicalString(),a.canonicalString()));return this.changes.forEach((s,a)=>{const c=this.ar.get(s);if(n.push(this._r.removeEntry(e,s,c.readTime)),a.isValidDocument()){const h=pS(this._r.serializer,a);i=i.add(s.path.popLast());const g=_g(h);r+=g-c.size,n.push(this._r.addEntry(e,s,h))}else if(r-=c.size,this.trackRemovals){const h=pS(this._r.serializer,a.convertToNoDocument(Ue.min()));n.push(this._r.addEntry(e,s,h))}}),i.forEach(s=>{n.push(this._r.indexManager.addToCollectionParentIndex(e,s))}),n.push(this._r.updateMetadata(e,r)),se.waitFor(n)}getFromCache(e,n){return this._r.nr(e,n).next(r=>(this.ar.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this._r.ir(e,n).next(({documents:r,sr:i})=>(i.forEach((s,a)=>{this.ar.set(s,{size:a,readTime:r.get(s).readTime})}),r))}}function RS(t){return Dn(t,"remoteDocumentGlobal")}function Wo(t){return Dn(t,"remoteDocumentsV14")}function Qu(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function kS(t,e){const n=e.documentKey.path.toArray();return[t,mg(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function NS(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=rt(n[s],r[s]),i)return i;return i=rt(n.length,r.length),i||(i=rt(n[n.length-2],r[r.length-2]),i||rt(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Rc(r.mutation,i,Ar.empty(),Wt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,st()).next(()=>r))}getLocalViewOfDocuments(e,n,r=st()){const i=Hi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let a=uc();return s.forEach((c,h)=>{a=a.insert(c,h.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=Hi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,st()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,c)=>{n.set(a,c)})})}computeViews(e,n,r,i){let s=Pr();const a=bc(),c=function(){return bc()}();return n.forEach((h,g)=>{const _=r.get(g.key);i.has(g.key)&&(_===void 0||_.mutation instanceof Ds)?s=s.insert(g.key,g):_!==void 0?(a.set(g.key,_.mutation.getFieldMask()),Rc(_.mutation,g,_.mutation.getFieldMask(),Wt.now())):a.set(g.key,Ar.empty())}),this.recalculateAndSaveOverlays(e,s).next(h=>(h.forEach((g,_)=>a.set(g,_)),n.forEach((g,_)=>{var w;return c.set(g,new jj(_,(w=a.get(g))!==null&&w!==void 0?w:null))}),c))}recalculateAndSaveOverlays(e,n){const r=bc();let i=new Ot((a,c)=>a-c),s=st();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const c of a)c.keys().forEach(h=>{const g=n.get(h);if(g===null)return;let _=r.get(h)||Ar.empty();_=c.applyToLocalView(g,_),r.set(h,_);const w=(i.get(c.batchId)||st()).add(h);i=i.insert(c.batchId,w)})}).next(()=>{const a=[],c=i.getReverseIterator();for(;c.hasNext();){const h=c.getNext(),g=h.key,_=h.value,w=gR();_.forEach(T=>{if(!s.has(T)){const E=ER(n.get(T),r.get(T));E!==null&&w.set(T,E),s=s.add(T)}}),a.push(this.documentOverlayCache.saveOverlays(e,g,w))}return se.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(a){return Pe.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):mw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):se.resolve(Hi());let c=-1,h=s;return a.next(g=>se.forEach(g,(_,w)=>(c<w.largestBatchId&&(c=w.largestBatchId),s.get(_)?se.resolve():this.remoteDocumentCache.getEntry(e,_).next(T=>{h=h.insert(_,T)}))).next(()=>this.populateOverlays(e,g,s)).next(()=>this.computeViews(e,h,g,st())).next(_=>({batchId:c,changes:fR(_)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Pe(n)).next(r=>{let i=uc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let a=uc();return this.indexManager.getCollectionParents(e,s).next(c=>se.forEach(c,h=>{const g=function(w,T){return new Ns(T,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(n,h.child(s));return this.getDocumentsMatchingCollectionQuery(e,g,r,i).next(_=>{_.forEach((w,T)=>{a=a.insert(w,T)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(a=>{s.forEach((h,g)=>{const _=g.getKey();a.get(_)===null&&(a=a.insert(_,jt.newInvalidDocument(_)))});let c=uc();return a.forEach((h,g)=>{const _=s.get(h);_!==void 0&&Rc(_.mutation,g,Ar.empty(),Wt.now()),Zh(n,g)&&(c=c.insert(h,g))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return se.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,function(i){return{id:i.id,version:i.version,createTime:gn(i.createTime)}}(n)),se.resolve()}getNamedQuery(e,n){return se.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,function(i){return{name:i.name,query:Tw(i.bundledQuery),readTime:gn(i.readTime)}}(n)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{constructor(){this.overlays=new Ot(Pe.comparator),this.lr=new Map}getOverlay(e,n){return se.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Hi();return se.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.lt(e,n,s)}),se.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.lr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.lr.delete(r)),se.resolve()}getOverlaysForCollection(e,n,r){const i=Hi(),s=n.length+1,a=new Pe(n.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const h=c.getNext().value,g=h.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===s&&h.largestBatchId>r&&i.set(h.getKey(),h)}return se.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ot((g,_)=>g-_);const a=this.overlays.getIterator();for(;a.hasNext();){const g=a.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>r){let _=s.get(g.largestBatchId);_===null&&(_=Hi(),s=s.insert(g.largestBatchId,_)),_.set(g.getKey(),g)}}const c=Hi(),h=s.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((g,_)=>c.set(g,_)),!(c.size()>=i)););return se.resolve(c)}lt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.lr.get(i.largestBatchId).delete(r.key);this.lr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new ww(n,r));let s=this.lr.get(n);s===void 0&&(s=st(),this.lr.set(n,s)),this.lr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(){this.hr=new Rt(xn.Pr),this.Ir=new Rt(xn.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){const r=new xn(e,n);this.hr=this.hr.add(r),this.Ir=this.Ir.add(r)}Er(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.dr(new xn(e,n))}Ar(e,n){e.forEach(r=>this.removeReference(r,n))}Rr(e){const n=new Pe(new pt([])),r=new xn(n,e),i=new xn(n,e+1),s=[];return this.Ir.forEachInRange([r,i],a=>{this.dr(a),s.push(a.key)}),s}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const n=new Pe(new pt([])),r=new xn(n,e),i=new xn(n,e+1);let s=st();return this.Ir.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){const n=new xn(e,0),r=this.hr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class xn{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return Pe.comparator(e.key,n.key)||rt(e.gr,n.gr)}static Tr(e,n){return rt(e.gr,n.gr)||Pe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $j{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new Rt(xn.Pr)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new vw(s,n,r,i);this.mutationQueue.push(a);for(const c of i)this.yr=this.yr.add(new xn(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return se.resolve(a)}lookupMutationBatch(e,n){return se.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Sr(r),s=i<0?0:i;return se.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?-1:this.pr-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new xn(n,0),i=new xn(n,Number.POSITIVE_INFINITY),s=[];return this.yr.forEachInRange([r,i],a=>{const c=this.wr(a.gr);s.push(c)}),se.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Rt(rt);return n.forEach(i=>{const s=new xn(i,0),a=new xn(i,Number.POSITIVE_INFINITY);this.yr.forEachInRange([s,a],c=>{r=r.add(c.gr)})}),se.resolve(this.br(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;Pe.isDocumentKey(s)||(s=s.child(""));const a=new xn(new Pe(s),0);let c=new Rt(rt);return this.yr.forEachWhile(h=>{const g=h.key.path;return!!r.isPrefixOf(g)&&(g.length===i&&(c=c.add(h.gr)),!0)},a),se.resolve(this.br(c))}br(e){const n=[];return e.forEach(r=>{const i=this.wr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Be(this.Dr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.yr;return se.forEach(n.mutations,i=>{const s=new xn(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.yr=r})}Fn(e){}containsKey(e,n){const r=new xn(n,0),i=this.yr.firstAfterOrEqual(r);return se.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}wr(e){const n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qj{constructor(e){this.Cr=e,this.docs=function(){return new Ot(Pe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,a=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return se.resolve(r?r.document.mutableCopy():jt.newInvalidDocument(n))}getEntries(e,n){let r=Pr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():jt.newInvalidDocument(i))}),se.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Pr();const a=n.path,c=new Pe(a.child("")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){const{key:g,value:{document:_}}=h.getNext();if(!a.isPrefixOf(g.path))break;g.path.length>a.length+1||hw($b(_),r)<=0||(i.has(_.key)||Zh(n,_))&&(s=s.insert(_.key,_.mutableCopy()))}return se.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Me()}vr(e,n){return se.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Hj(this)}getSize(e){return se.resolve(this.size)}}class Hj extends WR{constructor(e){super(),this._r=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this._r.addEntry(e,i)):this._r.removeEntry(r)}),se.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gj{constructor(e){this.persistence=e,this.Fr=new Fo(n=>Na(n),Xh),this.lastRemoteSnapshotVersion=Ue.min(),this.highestTargetId=0,this.Mr=0,this.Or=new Cw,this.targetCount=0,this.Nr=Va.On()}forEachTarget(e,n){return this.Fr.forEach((r,i)=>n(i)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Mr&&(this.Mr=n),se.resolve()}kn(e){this.Fr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Nr=new Va(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,se.resolve()}updateTargetData(e,n){return this.kn(n),se.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Fr.forEach((a,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.Fr.delete(a),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),se.waitFor(s).next(()=>i)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,n){const r=this.Fr.get(n)||null;return se.resolve(r)}addMatchingKeys(e,n,r){return this.Or.Er(n,r),se.resolve()}removeMatchingKeys(e,n,r){this.Or.Ar(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),se.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),se.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Or.mr(n);return se.resolve(r)}containsKey(e,n){return se.resolve(this.Or.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(e,n){this.Br={},this.overlays={},this.Lr=new Cr(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new Gj(this),this.indexManager=new Rj,this.remoteDocumentCache=function(i){return new qj(i)}(r=>this.referenceDelegate.Qr(r)),this.serializer=new jR(n),this.Kr=new Uj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new zj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new $j(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,r){ve("MemoryPersistence","Starting transaction:",e);const i=new Wj(this.Lr.next());return this.referenceDelegate.$r(),r(i).next(s=>this.referenceDelegate.Ur(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Wr(e,n){return se.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class Wj extends Hb{constructor(e){super(),this.currentSequenceNumber=e}}class Lm{constructor(e){this.persistence=e,this.Gr=new Cw,this.zr=null}static jr(e){return new Lm(e)}get Hr(){if(this.zr)return this.zr;throw Me()}addReference(e,n,r){return this.Gr.addReference(r,n),this.Hr.delete(r.toString()),se.resolve()}removeReference(e,n,r){return this.Gr.removeReference(r,n),this.Hr.add(r.toString()),se.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),se.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(i=>this.Hr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Hr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.Hr,r=>{const i=Pe.fromPath(r);return this.Jr(e,i).next(s=>{s||n.removeEntry(i,Ue.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(r=>{r?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return se.or([()=>se.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{constructor(e){this.serializer=e}N(e,n,r,i){const s=new Rm("createOrUpgrade",n);r<1&&i>=1&&(function(h){h.createObjectStore("owner")}(e),function(h){h.createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",WT,{unique:!0}),h.createObjectStore("documentMutations")}(e),DS(e),function(h){h.createObjectStore("remoteDocuments")}(e));let a=se.resolve();return r<3&&i>=3&&(r!==0&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),DS(e)),a=a.next(()=>function(h){const g=h.store("targetGlobal"),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ue.min().toTimestamp(),targetCount:0};return g.put("targetGlobalKey",_)}(s))),r<4&&i>=4&&(r!==0&&(a=a.next(()=>function(h,g){return g.store("mutations").W().next(_=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",WT,{unique:!0});const w=g.store("mutations"),T=_.map(E=>w.put(E));return se.waitFor(T)})}(e,s))),a=a.next(()=>{(function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(a=a.next(()=>this.Zr(s))),r<6&&i>=6&&(a=a.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(s)))),r<7&&i>=7&&(a=a.next(()=>this.ei(s))),r<8&&i>=8&&(a=a.next(()=>this.ti(e,s))),r<9&&i>=9&&(a=a.next(()=>{(function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(a=a.next(()=>this.ni(s))),r<11&&i>=11&&(a=a.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(a=a.next(()=>{(function(h){const g=h.createObjectStore("documentOverlays",{keyPath:k6});g.createIndex("collectionPathOverlayIndex",N6,{unique:!1}),g.createIndex("collectionGroupOverlayIndex",D6,{unique:!1})})(e)})),r<13&&i>=13&&(a=a.next(()=>function(h){const g=h.createObjectStore("remoteDocumentsV14",{keyPath:w6});g.createIndex("documentKeyIndex",I6),g.createIndex("collectionGroupIndex",E6)}(e)).next(()=>this.ri(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(a=a.next(()=>this.ii(e,s))),r<15&&i>=15&&(a=a.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:A6}).createIndex("sequenceNumberIndex",P6,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:b6}).createIndex("documentKeyIndex",R6,{unique:!1})}(e))),a}Xr(e){let n=0;return e.store("remoteDocuments").Y((r,i)=>{n+=_g(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Zr(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>se.forEach(i,s=>{const a=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",a).next(c=>se.forEach(c,h=>{Be(h.userId===s.userId);const g=ea(this.serializer,h);return qR(e,s.userId,g).next(()=>{})}))}))}ei(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.Y((a,c)=>{const h=new pt(a),g=function(w){return[0,fr(w)]}(h);s.push(n.get(g).next(_=>_?se.resolve():(w=>n.put({targetId:0,path:fr(w),sequenceNumber:i.highestListenSequenceNumber}))(h)))}).next(()=>se.waitFor(s))})}ti(e,n){e.createObjectStore("collectionParents",{keyPath:C6});const r=n.store("collectionParents"),i=new xw,s=a=>{if(i.add(a)){const c=a.lastSegment(),h=a.popLast();return r.put({collectionId:c,parent:fr(h)})}};return n.store("remoteDocuments").Y({J:!0},(a,c)=>{const h=new pt(a);return s(h.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([a,c,h],g)=>{const _=qi(c);return s(_.popLast())}))}ni(e){const n=e.store("targets");return n.Y((r,i)=>{const s=hc(i),a=UR(this.serializer,s);return n.put(a)})}ri(e,n){const r=n.store("remoteDocuments"),i=[];return r.Y((s,a)=>{const c=n.store("remoteDocumentsV14"),h=function(w){return w.document?new Pe(pt.fromString(w.document.name).popFirst(5)):w.noDocument?Pe.fromSegments(w.noDocument.path):w.unknownDocument?Pe.fromSegments(w.unknownDocument.path):Me()}(a).path.toArray(),g={prefixPath:h.slice(0,h.length-2),collectionGroup:h[h.length-2],documentId:h[h.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};i.push(c.put(g))}).next(()=>se.waitFor(i))}ii(e,n){const r=n.store("mutations"),i=KR(this.serializer),s=new YR(Lm.jr,this.serializer.ut);return r.W().next(a=>{const c=new Map;return a.forEach(h=>{var g;let _=(g=c.get(h.userId))!==null&&g!==void 0?g:st();ea(this.serializer,h).keys().forEach(w=>_=_.add(w)),c.set(h.userId,_)}),se.forEach(c,(h,g)=>{const _=new An(g),w=Om.ct(this.serializer,_),T=s.getIndexManager(_),E=Mm.ct(_,this.serializer,T,s.referenceDelegate);return new QR(i,E,w,T).recalculateAndSaveOverlaysForDocumentKeys(new jv(n,Cr._e),h).next()})})}}function DS(t){t.createObjectStore("targetDocuments",{keyPath:S6}).createIndex("documentTargetsIndex",x6,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",T6,{unique:!0}),t.createObjectStore("targetGlobal")}const Kp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Aw{constructor(e,n,r,i,s,a,c,h,g,_,w=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.si=s,this.window=a,this.document=c,this.oi=g,this._i=_,this.ai=w,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=T=>Promise.resolve(),!Aw.D())throw new pe(ue.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Vj(this,i),this.Ii=n+"main",this.serializer=new jR(h),this.Ti=new wi(this.Ii,this.ai,new Kj(this.serializer)),this.qr=new Nj(this.referenceDelegate,this.serializer),this.remoteDocumentCache=KR(this.serializer),this.Kr=new Sj,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,_===!1&&dn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new pe(ue.FAILED_PRECONDITION,Kp);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.qr.getHighestSequenceNumber(e))}).then(e=>{this.Lr=new Cr(e,this.oi)}).then(()=>{this.kr=!0}).catch(e=>(this.Ti&&this.Ti.close(),Promise.reject(e)))}mi(e){return this.Pi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget(async()=>{this.started&&await this.di()}))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Hd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(n=>{n||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)))})}).next(()=>this.gi(e)).next(n=>this.isPrimary&&!n?this.pi(e).next(()=>!1):!!n&&this.yi(e).next(()=>!0))).catch(e=>{if(Vo(e))return ve("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ve("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.Pi(e)),this.isPrimary=e})}fi(e){return Yu(e).get("owner").next(n=>se.resolve(this.wi(n)))}Si(e){return Hd(e).delete(this.clientId)}async bi(){if(this.isPrimary&&!this.Di(this.hi,18e5)){this.hi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Dn(n,"clientMetadata");return r.W().next(i=>{const s=this.Ci(i,18e5),a=i.filter(c=>s.indexOf(c)===-1);return se.forEach(a,c=>r.delete(c.clientId)).next(()=>a)})}).catch(()=>[]);if(this.Ei)for(const n of e)this.Ei.removeItem(this.vi(n.clientId))}}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.di().then(()=>this.bi()).then(()=>this.Vi()))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?se.resolve(!0):Yu(e).get("owner").next(n=>{if(n!==null&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)){if(this.wi(n)&&this.networkEnabled)return!0;if(!this.wi(n)){if(!n.allowTabSynchronization)throw new pe(ue.FAILED_PRECONDITION,Kp);return!1}}return!(!this.networkEnabled||!this.inForeground)||Hd(e).W().next(r=>this.Ci(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,a=!this.inForeground&&i.inForeground,c=this.networkEnabled===i.networkEnabled;if(s||a&&c)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&ve("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.kr=!1,this.Mi(),this.li&&(this.li.cancel(),this.li=null),this.xi(),this.Oi(),await this.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new jv(e,Cr._e);return this.pi(n).next(()=>this.Si(n))}),this.Ti.close(),this.Ni()}Ci(e,n){return e.filter(r=>this.Di(r.updateTimeMs,n)&&!this.Fi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>Hd(e).W().next(n=>this.Ci(n,18e5).map(r=>r.clientId)))}get started(){return this.kr}getMutationQueue(e,n){return Mm.ct(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new kj(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return Om.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,n,r){ve("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=function(h){return h===15?M6:h===14?Yb:h===13?Qb:h===12?O6:h===11?Kb:void Me()}(this.ai);let a;return this.Ti.runTransaction(e,i,s,c=>(a=new jv(c,this.Lr?this.Lr.next():Cr._e),n==="readwrite-primary"?this.fi(a).next(h=>!!h||this.gi(a)).next(h=>{if(!h)throw dn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)),new pe(ue.FAILED_PRECONDITION,qb);return r(a)}).next(h=>this.yi(a).next(()=>h)):this.Li(a).next(()=>r(a)))).then(c=>(a.raiseOnCommittedEvent(),c))}Li(e){return Yu(e).get("owner").next(n=>{if(n!==null&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)&&!this.wi(n)&&!(this._i||this.allowTabSynchronization&&n.allowTabSynchronization))throw new pe(ue.FAILED_PRECONDITION,Kp)})}yi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Yu(e).put("owner",n)}static D(){return wi.D()}pi(e){const n=Yu(e);return n.get("owner").next(r=>this.wi(r)?(ve("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):se.resolve())}Di(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(dn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Ai(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.di()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground=this.document.visibilityState==="visible")}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ui=()=>{this.Mi();const n=/(?:Version|Mobile)\/1[456]/;_L()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var n;try{const r=((n=this.Ei)===null||n===void 0?void 0:n.getItem(this.vi(e)))!==null;return ve("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return dn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){dn("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch{}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Yu(t){return Dn(t,"owner")}function Hd(t){return Dn(t,"clientMetadata")}function Pw(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.ki=r,this.qi=i}static Qi(e,n){let r=st(),i=st();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new bw(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,n){this.Gi=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.zi(e,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ji(e,n,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new Qj;return this.Hi(e,n,a).next(c=>{if(s.result=c,this.$i)return this.Ji(e,n,a,c.size)})}).next(()=>s.result)}Ji(e,n,r,i){return r.documentReadCount<this.Ui?(ll()<=lt.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",ul(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),se.resolve()):(ll()<=lt.DEBUG&&ve("QueryEngine","Query:",ul(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Wi*i?(ll()<=lt.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",ul(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,gr(n))):se.resolve())}zi(e,n){if(sS(n))return se.resolve(null);let r=gr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=gg(n,null,"F"),r=gr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const a=st(...s);return this.Gi.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,r).next(h=>{const g=this.Yi(n,c);return this.Zi(n,g,a,h.readTime)?this.zi(e,gg(n,null,"F")):this.Xi(e,g,n,h)}))})))}ji(e,n,r,i){return sS(n)||i.isEqual(Ue.min())?se.resolve(null):this.Gi.getDocuments(e,r).next(s=>{const a=this.Yi(n,s);return this.Zi(n,a,r,i)?se.resolve(null):(ll()<=lt.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ul(n)),this.Xi(e,a,n,zb(i,-1)).next(c=>c))})}Yi(e,n){let r=new Rt(hR(e));return n.forEach((i,s)=>{Zh(e,s)&&(r=r.add(s))}),r}Zi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Hi(e,n,r){return ll()<=lt.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",ul(n)),this.Gi.getDocumentsMatchingQuery(e,n,qr.min(),r)}Xi(e,n,r,i){return this.Gi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yj{constructor(e,n,r,i){this.persistence=e,this.es=n,this.serializer=i,this.ts=new Ot(rt),this.ns=new Fo(s=>Na(s),Xh),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(r)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new QR(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ts))}}function JR(t,e,n,r){return new Yj(t,e,n,r)}async function ZR(t,e){const n=ke(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.os(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],c=[];let h=st();for(const g of i){a.push(g.batchId);for(const _ of g.mutations)h=h.add(_.key)}for(const g of s){c.push(g.batchId);for(const _ of g.mutations)h=h.add(_.key)}return n.localDocuments.getDocuments(r,h).next(g=>({_s:g,removedBatchIds:a,addedBatchIds:c}))})})}function Xj(t,e){const n=ke(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.ss.newChangeBuffer({trackRemovals:!0});return function(c,h,g,_){const w=g.batch,T=w.keys();let E=se.resolve();return T.forEach($=>{E=E.next(()=>_.getEntry(h,$)).next(U=>{const J=g.docVersions.get($);Be(J!==null),U.version.compareTo(J)<0&&(w.applyToRemoteDocument(U,g),U.isValidDocument()&&(U.setReadTime(g.commitVersion),_.addEntry(U)))})}),E.next(()=>c.mutationQueue.removeMutationBatch(h,w))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let h=st();for(let g=0;g<c.mutationResults.length;++g)c.mutationResults[g].transformResults.length>0&&(h=h.add(c.batch.mutations[g].key));return h}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function e2(t){const e=ke(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function Jj(t,e){const n=ke(t),r=e.snapshotVersion;let i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;const c=[];e.targetChanges.forEach((_,w)=>{const T=i.get(w);if(!T)return;c.push(n.qr.removeMatchingKeys(s,_.removedDocuments,w).next(()=>n.qr.addMatchingKeys(s,_.addedDocuments,w)));let E=T.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(w)!==null?E=E.withResumeToken(wn.EMPTY_BYTE_STRING,Ue.min()).withLastLimboFreeSnapshotVersion(Ue.min()):_.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(_.resumeToken,r)),i=i.insert(w,E),function(U,J,V){return U.resumeToken.approximateByteSize()===0||J.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=3e8?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0}(T,E,_)&&c.push(n.qr.updateTargetData(s,E))});let h=Pr(),g=st();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(s,_))}),c.push(t2(s,a,e.documentUpdates).next(_=>{h=_.us,g=_.cs})),!r.isEqual(Ue.min())){const _=n.qr.getLastRemoteSnapshotVersion(s).next(w=>n.qr.setTargetsMetadata(s,s.currentSequenceNumber,r));c.push(_)}return se.waitFor(c).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,h,g)).next(()=>h)}).then(s=>(n.ts=i,s))}function t2(t,e,n){let r=st(),i=st();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let a=Pr();return n.forEach((c,h)=>{const g=s.get(c);h.isFoundDocument()!==g.isFoundDocument()&&(i=i.add(c)),h.isNoDocument()&&h.version.isEqual(Ue.min())?(e.removeEntry(c,h.readTime),a=a.insert(c,h)):!g.isValidDocument()||h.version.compareTo(g.version)>0||h.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(h),a=a.insert(c,h)):ve("LocalStore","Ignoring outdated watch update for ",c,". Current version:",g.version," Watch version:",h.version)}),{us:a,cs:i}})}function Zj(t,e){const n=ke(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function au(t,e){const n=ke(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.qr.getTargetData(r,e).next(s=>s?(i=s,se.resolve(i)):n.qr.allocateTargetId(r).next(a=>(i=new _s(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ts.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ts=n.ts.insert(r.targetId,r),n.ns.set(e,r.targetId)),r})}async function lu(t,e,n){const r=ke(t),i=r.ts.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!Vo(a))throw a;ve("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.ts=r.ts.remove(e),r.ns.delete(i.target)}function vg(t,e,n){const r=ke(t);let i=Ue.min(),s=st();return r.persistence.runTransaction("Execute query","readwrite",a=>function(h,g,_){const w=ke(h),T=w.ns.get(_);return T!==void 0?se.resolve(w.ts.get(T)):w.qr.getTargetData(g,_)}(r,a,gr(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(a,c.targetId).next(h=>{s=h})}).next(()=>r.es.getDocumentsMatchingQuery(a,e,n?i:Ue.min(),n?s:st())).next(c=>(i2(r,cR(e),c),{documents:c,ls:s})))}function n2(t,e){const n=ke(t),r=ke(n.qr),i=n.ts.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r._t(s,e).next(a=>a?a.target:null))}function r2(t,e){const n=ke(t),r=n.rs.get(e)||Ue.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.ss.getAllFromCollectionGroup(i,e,zb(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(i2(n,e,i),i))}function i2(t,e,n){let r=t.rs.get(e)||Ue.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.rs.set(e,r)}async function e9(t,e,n,r){const i=ke(t);let s=st(),a=Pr();for(const g of n){const _=e.hs(g.metadata.name);g.document&&(s=s.add(_));const w=e.Ps(g);w.setReadTime(e.Is(g.metadata.readTime)),a=a.insert(_,w)}const c=i.ss.newChangeBuffer({trackRemovals:!0}),h=await au(i,function(_){return gr(Su(pt.fromString(`__bundle__/docs/${_}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",g=>t2(g,c,a).next(_=>(c.apply(g),_)).next(_=>i.qr.removeMatchingKeysForTargetId(g,h.targetId).next(()=>i.qr.addMatchingKeys(g,s,h.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(g,_.us,_.cs)).next(()=>_.us)))}async function t9(t,e,n=st()){const r=await au(t,gr(Tw(e.bundledQuery))),i=ke(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const a=gn(e.readTime);if(r.snapshotVersion.compareTo(a)>=0)return i.Kr.saveNamedQuery(s,e);const c=r.withResumeToken(wn.EMPTY_BYTE_STRING,a);return i.ts=i.ts.insert(c.targetId,c),i.qr.updateTargetData(s,c).next(()=>i.qr.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.qr.addMatchingKeys(s,n,r.targetId)).next(()=>i.Kr.saveNamedQuery(s,e))})}function OS(t,e){return`firestore_clients_${t}_${e}`}function MS(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Qp(t,e){return`firestore_targets_${t}_${e}`}class yg{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ts(e,n,r){const i=JSON.parse(r);let s,a=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return a&&i.error&&(a=typeof i.error.message=="string"&&typeof i.error.code=="string",a&&(s=new pe(i.error.code,i.error.message))),a?new yg(e,n,i.state,s):(dn("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class kc{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ts(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new pe(r.error.code,r.error.message))),s?new kc(e,r.state,i):(dn("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class wg{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ts(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=pw();for(let a=0;i&&a<r.activeTargetIds.length;++a)i=Gb(r.activeTargetIds[a]),s=s.add(r.activeTargetIds[a]);return i?new wg(e,s):(dn("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class Rw{constructor(e,n){this.clientId=e,this.onlineState=n}static Ts(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new Rw(n.clientId,n.onlineState):(dn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Zv{constructor(){this.activeTargetIds=pw()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Yp{constructor(e,n,r,i,s){this.window=e,this.si=n,this.persistenceKey=r,this.Rs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new Ot(rt),this.started=!1,this.ps=[];const a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ys=OS(this.persistenceKey,this.Rs),this.ws=function(h){return`firestore_sequence_number_${h}`}(this.persistenceKey),this.gs=this.gs.insert(this.Rs,new Zv),this.Ss=new RegExp(`^firestore_clients_${a}_([^_]*)$`),this.bs=new RegExp(`^firestore_mutations_${a}_(\\d+)(?:_(.*))?$`),this.Ds=new RegExp(`^firestore_targets_${a}_(\\d+)$`),this.Cs=function(h){return`firestore_online_state_${h}`}(this.persistenceKey),this.vs=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Bi();for(const r of e){if(r===this.Rs)continue;const i=this.getItem(OS(this.persistenceKey,r));if(i){const s=wg.Ts(r,i);s&&(this.gs=this.gs.insert(s.clientId,s))}}this.Fs();const n=this.storage.getItem(this.Cs);if(n){const r=this.Ms(n);r&&this.xs(r)}for(const r of this.ps)this.fs(r);this.ps=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let n=!1;return this.gs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,n,r){this.Ns(e,n,r),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Qp(this.persistenceKey,e));if(r){const i=kc.Ts(e,r);i&&(n=i.state)}}return this.Ls.ds(e),this.Fs(),n}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Qp(this.persistenceKey,e))}updateQueryState(e,n,r){this.ks(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return ve("SharedClientState","READ",e,n),n}setItem(e,n){ve("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){ve("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){const n=e;if(n.storageArea===this.storage){if(ve("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ys)return void dn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.Ss.test(n.key)){if(n.newValue==null){const r=this.Ks(n.key);return this.$s(r,null)}{const r=this.Us(n.key,n.newValue);if(r)return this.$s(r.clientId,r)}}else if(this.bs.test(n.key)){if(n.newValue!==null){const r=this.Ws(n.key,n.newValue);if(r)return this.Gs(r)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){const r=this.zs(n.key,n.newValue);if(r)return this.js(r)}}else if(n.key===this.Cs){if(n.newValue!==null){const r=this.Ms(n.newValue);if(r)return this.xs(r)}}else if(n.key===this.ws){const r=function(s){let a=Cr._e;if(s!=null)try{const c=JSON.parse(s);Be(typeof c=="number"),a=c}catch(c){dn("SharedClientState","Failed to read sequence number from WebStorage",c)}return a}(n.newValue);r!==Cr._e&&this.sequenceNumberHandler(r)}else if(n.key===this.vs){const r=this.Hs(n.newValue);await Promise.all(r.map(i=>this.syncEngine.Js(i)))}}}else this.ps.push(n)})}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,n,r){const i=new yg(this.currentUser,e,n,r),s=MS(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Es())}Bs(e){const n=MS(this.persistenceKey,this.currentUser,e);this.removeItem(n)}qs(e){const n={clientId:this.Rs,onlineState:e};this.storage.setItem(this.Cs,JSON.stringify(n))}ks(e,n,r){const i=Qp(this.persistenceKey,e),s=new kc(e,n,r);this.setItem(i,s.Es())}Qs(e){const n=JSON.stringify(Array.from(e));this.setItem(this.vs,n)}Ks(e){const n=this.Ss.exec(e);return n?n[1]:null}Us(e,n){const r=this.Ks(e);return wg.Ts(r,n)}Ws(e,n){const r=this.bs.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return yg.Ts(new An(s),i,n)}zs(e,n){const r=this.Ds.exec(e),i=Number(r[1]);return kc.Ts(i,n)}Ms(e){return Rw.Ts(e)}Hs(e){return JSON.parse(e)}async Gs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Ys(e.batchId,e.state,e.error);ve("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,n){const r=n?this.gs.insert(e,n):this.gs.remove(e),i=this.Os(this.gs),s=this.Os(r),a=[],c=[];return s.forEach(h=>{i.has(h)||a.push(h)}),i.forEach(h=>{s.has(h)||c.push(h)}),this.syncEngine.Xs(a,c).then(()=>{this.gs=r})}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let n=pw();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class s2{constructor(){this.eo=new Zv,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,n,r){this.no[e]=n}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new Zv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n9{ro(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){ve("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){ve("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gd=null;function Xp(){return Gd===null?Gd=function(){return 268435456+Math.round(2147483648*Math.random())}():Gd++,"0x"+Gd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r9={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i9{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xn="WebChannelConnection";class s9 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.mo=r+"://"+n.host,this.fo=`projects/${i}/databases/${s}`,this.po=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get yo(){return!1}wo(n,r,i,s,a){const c=Xp(),h=this.So(n,r);ve("RestConnection",`Sending RPC '${n}' ${c}:`,h,i);const g={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(g,s,a),this.Do(n,h,g,i).then(_=>(ve("RestConnection",`Received RPC '${n}' ${c}: `,_),_),_=>{throw Ai("RestConnection",`RPC '${n}' ${c} failed with error: `,_,"url: ",h,"request:",i),_})}Co(n,r,i,s,a,c){return this.wo(n,r,i,s,a)}bo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Tu}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,a)=>n[a]=s),i&&i.headers.forEach((s,a)=>n[a]=s)}So(n,r){const i=r9[n];return`${this.mo}/v1/${r}:${i}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,n,r,i){const s=Xp();return new Promise((a,c)=>{const h=new e6;h.setWithCredentials(!0),h.listenOnce(JB.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Gp.NO_ERROR:const _=h.getResponseJson();ve(Xn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(_)),a(_);break;case Gp.TIMEOUT:ve(Xn,`RPC '${e}' ${s} timed out`),c(new pe(ue.DEADLINE_EXCEEDED,"Request time out"));break;case Gp.HTTP_ERROR:const w=h.getStatus();if(ve(Xn,`RPC '${e}' ${s} failed with status:`,w,"response text:",h.getResponseText()),w>0){let T=h.getResponseJson();Array.isArray(T)&&(T=T[0]);const E=T==null?void 0:T.error;if(E&&E.status&&E.message){const $=function(J){const V=J.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(V)>=0?V:ue.UNKNOWN}(E.status);c(new pe($,E.message))}else c(new pe(ue.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new pe(ue.UNAVAILABLE,"Connection failed."));break;default:Me()}}finally{ve(Xn,`RPC '${e}' ${s} completed.`)}});const g=JSON.stringify(i);ve(Xn,`RPC '${e}' ${s} sending request:`,i),h.send(n,"POST",g,r,15)})}vo(e,n,r){const i=Xp(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=YB(),c=XB(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(h.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(h.useFetchStreams=!0),this.bo(h.initMessageHeaders,n,r),h.encodeInitMessageHeaders=!0;const _=s.join("");ve(Xn,`Creating RPC '${e}' stream ${i}: ${_}`,h);const w=a.createWebChannel(_,h);let T=!1,E=!1;const $=new i9({co:J=>{E?ve(Xn,`Not sending because RPC '${e}' stream ${i} is closed:`,J):(T||(ve(Xn,`Opening RPC '${e}' stream ${i} transport.`),w.open(),T=!0),ve(Xn,`RPC '${e}' stream ${i} sending:`,J),w.send(J))},lo:()=>w.close()}),U=(J,V,B)=>{J.listen(V,j=>{try{B(j)}catch(Z){setTimeout(()=>{throw Z},0)}})};return U(w,Ud.EventType.OPEN,()=>{E||ve(Xn,`RPC '${e}' stream ${i} transport opened.`)}),U(w,Ud.EventType.CLOSE,()=>{E||(E=!0,ve(Xn,`RPC '${e}' stream ${i} transport closed`),$.Ro())}),U(w,Ud.EventType.ERROR,J=>{E||(E=!0,Ai(Xn,`RPC '${e}' stream ${i} transport errored:`,J),$.Ro(new pe(ue.UNAVAILABLE,"The operation could not be completed")))}),U(w,Ud.EventType.MESSAGE,J=>{var V;if(!E){const B=J.data[0];Be(!!B);const j=B,Z=j.error||((V=j[0])===null||V===void 0?void 0:V.error);if(Z){ve(Xn,`RPC '${e}' stream ${i} received error:`,Z);const ne=Z.status;let te=function(_e){const me=mn[_e];if(me!==void 0)return xR(me)}(ne),ae=Z.message;te===void 0&&(te=ue.INTERNAL,ae="Unknown error status: "+ne+" with message "+Z.message),E=!0,$.Ro(new pe(te,ae)),w.close()}else ve(Xn,`RPC '${e}' stream ${i} received:`,B),$.Vo(B)}}),U(c,ZB.STAT_EVENT,J=>{J.stat===$T.PROXY?ve(Xn,`RPC '${e}' stream ${i} detected buffering proxy`):J.stat===$T.NOPROXY&&ve(Xn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{$.Ao()},0),$}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o2(){return typeof window<"u"?window:null}function wf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rd(t){return new fj(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(e,n,r=1e3,i=1.5,s=6e4){this.si=e,this.timerId=n,this.Fo=r,this.Mo=i,this.xo=s,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const n=Math.floor(this.Oo+this.qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&ve("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Oo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){this.No!==null&&(this.No.skipDelay(),this.No=null)}cancel(){this.No!==null&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e,n,r,i,s,a,c,h){this.si=e,this.Ko=r,this.$o=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=h,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new kw(e,n)}jo(){return this.state===1||this.state===5||this.Ho()}Ho(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Jo()}async stop(){this.jo()&&await this.close(0)}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&this.Wo===null&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}async Xo(){if(this.Ho())return this.close(0)}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}async close(e,n){this.t_(),this.n_(),this.zo.cancel(),this.Uo++,e!==4?this.zo.reset():n&&n.code===ue.RESOURCE_EXHAUSTED?(dn(n.toString()),dn("Using maximum backoff delay to prevent overloading the backend."),this.zo.Lo()):n&&n.code===ue.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.r_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Io(n)}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),n=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Uo===n&&this.s_(r,i)},r=>{e(()=>{const i=new pe(ue.UNKNOWN,"Fetching auth token failed: "+r.message);return this.o_(i)})})}s_(e,n){const r=this.i_(this.Uo);this.stream=this.__(e,n),this.stream.ho(()=>{r(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(i=>{r(()=>this.o_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Jo(){this.state=5,this.zo.ko(async()=>{this.state=0,this.start()})}o_(e){return ve("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return n=>{this.si.enqueueAndForget(()=>this.Uo===e?n():(ve("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class o9 extends a2{constructor(e,n,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}__(e,n){return this.connection.vo("Listen",e,n)}onMessage(e){this.zo.reset();const n=pj(this.serializer,e),r=function(s){if(!("targetChange"in s))return Ue.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?Ue.min():a.readTime?gn(a.readTime):Ue.min()}(e);return this.listener.a_(n,r)}u_(e){const n={};n.database=Eh(this.serializer),n.addTarget=function(s,a){let c;const h=a.target;if(c=dg(h)?{documents:OR(s,h)}:{query:MR(s,h)},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=bR(s,a.resumeToken);const g=Wv(s,a.expectedCount);g!==null&&(c.expectedCount=g)}else if(a.snapshotVersion.compareTo(Ue.min())>0){c.readTime=ou(s,a.snapshotVersion.toTimestamp());const g=Wv(s,a.expectedCount);g!==null&&(c.expectedCount=g)}return c}(this.serializer,e);const r=vj(this.serializer,e);r&&(n.labels=r),this.e_(n)}c_(e){const n={};n.database=Eh(this.serializer),n.removeTarget=e,this.e_(n)}}class a9 extends a2{constructor(e,n,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,n){return this.connection.vo("Write",e,n)}onMessage(e){if(Be(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const n=_j(e.writeResults,e.commitTime),r=gn(e.commitTime);return this.listener.I_(r,n)}return Be(!e.writeResults||e.writeResults.length===0),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=Eh(this.serializer),this.e_(e)}P_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Th(this.serializer,r))};this.e_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l9 extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.d_=!1}A_(){if(this.d_)throw new pe(ue.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,n,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.wo(e,n,r,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new pe(ue.UNKNOWN,i.toString())})}Co(e,n,r,i){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Co(e,n,r,s,a,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new pe(ue.UNKNOWN,s.toString())})}terminate(){this.d_=!0}}class u9{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){this.V_===0&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){this.state==="Online"?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,e==="Online"&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(dn(n),this.f_=!1):ve("OnlineStateTracker",n)}S_(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c9{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=s,this.F_.ro(a=>{r.enqueueAndForget(async()=>{Bo(this)&&(ve("RemoteStore","Restarting streams for network reachability change."),await async function(h){const g=ke(h);g.C_.add(4),await Au(g),g.M_.set("Unknown"),g.C_.delete(4),await id(g)}(this))})}),this.M_=new u9(r,i)}}async function id(t){if(Bo(t))for(const e of t.v_)await e(!0)}async function Au(t){for(const e of t.v_)await e(!1)}function Vm(t,e){const n=ke(t);n.D_.has(e.targetId)||(n.D_.set(e.targetId,e),Ow(n)?Dw(n):bu(n).Ho()&&Nw(n,e))}function Sh(t,e){const n=ke(t),r=bu(n);n.D_.delete(e),r.Ho()&&l2(n,e),n.D_.size===0&&(r.Ho()?r.Zo():Bo(n)&&n.M_.set("Unknown"))}function Nw(t,e){if(t.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ue.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}bu(t).u_(e)}function l2(t,e){t.x_.Oe(e),bu(t).c_(e)}function Dw(t){t.x_=new uj({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.D_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),bu(t).start(),t.M_.g_()}function Ow(t){return Bo(t)&&!bu(t).jo()&&t.D_.size>0}function Bo(t){return ke(t).C_.size===0}function u2(t){t.x_=void 0}async function h9(t){t.D_.forEach((e,n)=>{Nw(t,e)})}async function d9(t,e){u2(t),Ow(t)?(t.M_.w_(e),Dw(t)):t.M_.set("Unknown")}async function f9(t,e,n){if(t.M_.set("Online"),e instanceof PR&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const c of s.targetIds)i.D_.has(c)&&(await i.remoteSyncer.rejectListen(c,a),i.D_.delete(c),i.x_.removeTarget(c))}(t,e)}catch(r){ve("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ig(t,r)}else if(e instanceof yf?t.x_.$e(e):e instanceof AR?t.x_.Je(e):t.x_.Ge(e),!n.isEqual(Ue.min()))try{const r=await e2(t.localStore);n.compareTo(r)>=0&&await function(s,a){const c=s.x_.it(a);return c.targetChanges.forEach((h,g)=>{if(h.resumeToken.approximateByteSize()>0){const _=s.D_.get(g);_&&s.D_.set(g,_.withResumeToken(h.resumeToken,a))}}),c.targetMismatches.forEach((h,g)=>{const _=s.D_.get(h);if(!_)return;s.D_.set(h,_.withResumeToken(wn.EMPTY_BYTE_STRING,_.snapshotVersion)),l2(s,h);const w=new _s(_.target,h,g,_.sequenceNumber);Nw(s,w)}),s.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){ve("RemoteStore","Failed to raise snapshot:",r),await Ig(t,r)}}async function Ig(t,e,n){if(!Vo(e))throw e;t.C_.add(1),await Au(t),t.M_.set("Offline"),n||(n=()=>e2(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ve("RemoteStore","Retrying IndexedDB access"),await n(),t.C_.delete(1),await id(t)})}function c2(t,e){return e().catch(n=>Ig(t,n,e))}async function Pu(t){const e=ke(t),n=So(e);let r=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;g9(e);)try{const i=await Zj(e.localStore,r);if(i===null){e.b_.length===0&&n.Zo();break}r=i.batchId,m9(e,i)}catch(i){await Ig(e,i)}h2(e)&&d2(e)}function g9(t){return Bo(t)&&t.b_.length<10}function m9(t,e){t.b_.push(e);const n=So(t);n.Ho()&&n.h_&&n.P_(e.mutations)}function h2(t){return Bo(t)&&!So(t).jo()&&t.b_.length>0}function d2(t){So(t).start()}async function p9(t){So(t).E_()}async function _9(t){const e=So(t);for(const n of t.b_)e.P_(n.mutations)}async function v9(t,e,n){const r=t.b_.shift(),i=yw.from(r,e,n);await c2(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Pu(t)}async function y9(t,e){e&&So(t).h_&&await async function(r,i){if(function(a){return SR(a)&&a!==ue.ABORTED}(i.code)){const s=r.b_.shift();So(r).Yo(),await c2(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Pu(r)}}(t,e),h2(t)&&d2(t)}async function VS(t,e){const n=ke(t);n.asyncQueue.verifyOperationInProgress(),ve("RemoteStore","RemoteStore received new credentials");const r=Bo(n);n.C_.add(3),await Au(n),r&&n.M_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.C_.delete(3),await id(n)}async function ey(t,e){const n=ke(t);e?(n.C_.delete(2),await id(n)):e||(n.C_.add(2),await Au(n),n.M_.set("Unknown"))}function bu(t){return t.O_||(t.O_=function(n,r,i){const s=ke(n);return s.A_(),new o9(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{ho:h9.bind(null,t),Io:d9.bind(null,t),a_:f9.bind(null,t)}),t.v_.push(async e=>{e?(t.O_.Yo(),Ow(t)?Dw(t):t.M_.set("Unknown")):(await t.O_.stop(),u2(t))})),t.O_}function So(t){return t.N_||(t.N_=function(n,r,i){const s=ke(n);return s.A_(),new a9(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{ho:p9.bind(null,t),Io:y9.bind(null,t),T_:_9.bind(null,t),I_:v9.bind(null,t)}),t.v_.push(async e=>{e?(t.N_.Yo(),await Pu(t)):(await t.N_.stop(),t.b_.length>0&&(ve("RemoteStore",`Stopping write stream with ${t.b_.length} pending writes`),t.b_=[]))})),t.N_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new bn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const a=Date.now()+r,c=new Mw(e,n,a,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ru(t,e){if(dn("AsyncQueue",`${e}: ${t}`),Vo(t))return new pe(ue.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Pe.comparator(n.key,r.key):(n,r)=>Pe.comparator(n.key,r.key),this.keyedMap=uc(),this.sortedSet=new Ot(this.comparator)}static emptySet(e){return new zl(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof zl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new zl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(){this.B_=new Ot(Pe.comparator)}track(e){const n=e.doc.key,r=this.B_.get(n);r?e.type!==0&&r.type===3?this.B_=this.B_.insert(n,e):e.type===3&&r.type!==1?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.B_=this.B_.remove(n):e.type===1&&r.type===2?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):Me():this.B_=this.B_.insert(n,e)}L_(){const e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}}class uu{constructor(e,n,r,i,s,a,c,h,g){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=h,this.hasCachedResults=g}static fromInitialDocuments(e,n,r,i,s){const a=[];return n.forEach(c=>{a.push({type:0,doc:c})}),new uu(e,n,zl.emptySet(n),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Jh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w9{constructor(){this.k_=void 0,this.listeners=[]}}class I9{constructor(){this.queries=new Fo(e=>uR(e),Jh),this.onlineState="Unknown",this.q_=new Set}}async function Lw(t,e){const n=ke(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new w9),i)try{s.k_=await n.onListen(r)}catch(a){const c=Ru(a,`Initialization of query '${ul(e.query)}' failed`);return void e.onError(c)}n.queries.set(r,s),s.listeners.push(e),e.Q_(n.onlineState),s.k_&&e.K_(s.k_)&&Fw(n)}async function Vw(t,e){const n=ke(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const a=s.listeners.indexOf(e);a>=0&&(s.listeners.splice(a,1),i=s.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function E9(t,e){const n=ke(t);let r=!1;for(const i of e){const s=i.query,a=n.queries.get(s);if(a){for(const c of a.listeners)c.K_(i)&&(r=!0);a.k_=i}}r&&Fw(n)}function T9(t,e,n){const r=ke(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function Fw(t){t.q_.forEach(e=>{e.next()})}class Bw{constructor(e,n,r){this.query=e,this.U_=n,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=r||{}}K_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new uu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.W_?this.z_(e)&&(this.U_.next(e),n=!0):this.j_(e,this.onlineState)&&(this.H_(e),n=!0),this.G_=e,n}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let n=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),n=!0),n}j_(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.J_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}z_(e){if(e.docChanges.length>0)return!0;const n=this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}H_(e){e=uu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S9{constructor(e,n){this.Y_=e,this.byteLength=n}Z_(){return"metadata"in this.Y_}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(e){this.serializer=e}hs(e){return Yi(this.serializer,e)}Ps(e){return e.metadata.exists?DR(this.serializer,e.document,!1):jt.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return gn(e)}}class x9{constructor(e,n,r){this.X_=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=f2(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++n;const r=pt.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ta(e){const n=new Map,r=new BS(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.hs(i.metadata.name);for(const a of i.metadata.queries){const c=(n.get(a)||st()).add(s);n.set(a,c)}}return n}async complete(){const e=await e9(this.localStore,new BS(this.serializer),this.documents,this.X_.id),n=this.ta(this.documents);for(const r of this.queries)await t9(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,na:this.collectionGroups,ra:e}}}function f2(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(e){this.key=e}}class m2{constructor(e){this.key=e}}class p2{constructor(e,n){this.query=e,this.ia=n,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=st(),this.mutatedKeys=st(),this._a=hR(e),this.aa=new zl(this._a)}get ua(){return this.ia}ca(e,n){const r=n?n.la:new FS,i=n?n.aa:this.aa;let s=n?n.mutatedKeys:this.mutatedKeys,a=i,c=!1;const h=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,g=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((_,w)=>{const T=i.get(_),E=Zh(this.query,w)?w:null,$=!!T&&this.mutatedKeys.has(T.key),U=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let J=!1;T&&E?T.data.isEqual(E.data)?$!==U&&(r.track({type:3,doc:E}),J=!0):this.ha(T,E)||(r.track({type:2,doc:E}),J=!0,(h&&this._a(E,h)>0||g&&this._a(E,g)<0)&&(c=!0)):!T&&E?(r.track({type:0,doc:E}),J=!0):T&&!E&&(r.track({type:1,doc:T}),J=!0,(h||g)&&(c=!0)),J&&(E?(a=a.add(E),s=U?s.add(_):s.delete(_)):(a=a.delete(_),s=s.delete(_)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const _=this.query.limitType==="F"?a.last():a.first();a=a.delete(_.key),s=s.delete(_.key),r.track({type:1,doc:_})}return{aa:a,la:r,Zi:c,mutatedKeys:s}}ha(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const a=e.la.L_();a.sort((_,w)=>function(E,$){const U=J=>{switch(J){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Me()}};return U(E)-U($)}(_.type,w.type)||this._a(_.doc,w.doc)),this.Pa(r),i=i!=null&&i;const c=n&&!i?this.Ia():[],h=this.oa.size===0&&this.current&&!i?1:0,g=h!==this.sa;return this.sa=h,a.length!==0||g?{snapshot:new uu(this.query,e.aa,s,a,e.mutatedKeys,h===0,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ta:c}:{Ta:c}}Q_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({aa:this.aa,la:new FS,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(n=>this.ia=this.ia.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ia=this.ia.delete(n)),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=st(),this.aa.forEach(r=>{this.Ea(r.key)&&(this.oa=this.oa.add(r.key))});const n=[];return e.forEach(r=>{this.oa.has(r)||n.push(new m2(r))}),this.oa.forEach(r=>{e.has(r)||n.push(new g2(r))}),n}da(e){this.ia=e.ls,this.oa=st();const n=this.ca(e.documents);return this.applyChanges(n,!0)}Aa(){return uu.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,this.sa===0,this.hasCachedResults)}}class C9{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class A9{constructor(e){this.key=e,this.Ra=!1}}class P9{constructor(e,n,r,i,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Va={},this.ma=new Fo(c=>uR(c),Jh),this.fa=new Map,this.ga=new Set,this.pa=new Ot(Pe.comparator),this.ya=new Map,this.wa=new Cw,this.Sa={},this.ba=new Map,this.Da=Va.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return this.Ca===!0}}async function b9(t,e){const n=qw(t);let r,i;const s=n.ma.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Aa();else{const a=await au(n.localStore,gr(e)),c=n.sharedClientState.addLocalQueryTarget(a.targetId);r=a.targetId,i=await jw(n,e,r,c==="current",a.resumeToken),n.isPrimaryClient&&Vm(n.remoteStore,a)}return i}async function jw(t,e,n,r,i){t.va=(w,T,E)=>async function(U,J,V,B){let j=J.view.ca(V);j.Zi&&(j=await vg(U.localStore,J.query,!1).then(({documents:ae})=>J.view.ca(ae,j)));const Z=B&&B.targetChanges.get(J.targetId),ne=B&&B.targetMismatches.get(J.targetId)!=null,te=J.view.applyChanges(j,U.isPrimaryClient,Z,ne);return ty(U,J.targetId,te.Ta),te.snapshot}(t,w,T,E);const s=await vg(t.localStore,e,!0),a=new p2(e,s.ls),c=a.ca(s.documents),h=nd.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),g=a.applyChanges(c,t.isPrimaryClient,h);ty(t,n,g.Ta);const _=new C9(e,n,a);return t.ma.set(e,_),t.fa.has(n)?t.fa.get(n).push(e):t.fa.set(n,[e]),g.snapshot}async function R9(t,e){const n=ke(t),r=n.ma.get(e),i=n.fa.get(r.targetId);if(i.length>1)return n.fa.set(r.targetId,i.filter(s=>!Jh(s,e))),void n.ma.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await lu(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Sh(n.remoteStore,r.targetId),cu(n,r.targetId)}).catch(Lo)):(cu(n,r.targetId),await lu(n.localStore,r.targetId,!0))}async function k9(t,e,n){const r=Hw(t);try{const i=await function(a,c){const h=ke(a),g=Wt.now(),_=c.reduce((E,$)=>E.add($.key),st());let w,T;return h.persistence.runTransaction("Locally write mutations","readwrite",E=>{let $=Pr(),U=st();return h.ss.getEntries(E,_).next(J=>{$=J,$.forEach((V,B)=>{B.isValidDocument()||(U=U.add(V))})}).next(()=>h.localDocuments.getOverlayedDocuments(E,$)).next(J=>{w=J;const V=[];for(const B of c){const j=oj(B,w.get(B.key).overlayedDocument);j!=null&&V.push(new Ds(B.key,j,eR(j.value.mapValue),Gt.exists(!0)))}return h.mutationQueue.addMutationBatch(E,g,V,c)}).next(J=>{T=J;const V=J.applyToLocalDocumentSet(w,U);return h.documentOverlayCache.saveOverlays(E,J.batchId,V)})}).then(()=>({batchId:T.batchId,changes:fR(w)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,c,h){let g=a.Sa[a.currentUser.toKey()];g||(g=new Ot(rt)),g=g.insert(c,h),a.Sa[a.currentUser.toKey()]=g}(r,i.batchId,n),await Os(r,i.changes),await Pu(r.remoteStore)}catch(i){const s=Ru(i,"Failed to persist write");n.reject(s)}}async function _2(t,e){const n=ke(t);try{const r=await Jj(n.localStore,e);e.targetChanges.forEach((i,s)=>{const a=n.ya.get(s);a&&(Be(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.Ra=!0:i.modifiedDocuments.size>0?Be(a.Ra):i.removedDocuments.size>0&&(Be(a.Ra),a.Ra=!1))}),await Os(n,r,e)}catch(r){await Lo(r)}}function jS(t,e,n){const r=ke(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ma.forEach((s,a)=>{const c=a.view.Q_(e);c.snapshot&&i.push(c.snapshot)}),function(a,c){const h=ke(a);h.onlineState=c;let g=!1;h.queries.forEach((_,w)=>{for(const T of w.listeners)T.Q_(c)&&(g=!0)}),g&&Fw(h)}(r.eventManager,e),i.length&&r.Va.a_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function N9(t,e,n){const r=ke(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.ya.get(e),s=i&&i.key;if(s){let a=new Ot(Pe.comparator);a=a.insert(s,jt.newNoDocument(s,Ue.min()));const c=st().add(s),h=new td(Ue.min(),new Map,new Ot(rt),a,c);await _2(r,h),r.pa=r.pa.remove(s),r.ya.delete(e),$w(r)}else await lu(r.localStore,e,!1).then(()=>cu(r,e,n)).catch(Lo)}async function D9(t,e){const n=ke(t),r=e.batch.batchId;try{const i=await Xj(n.localStore,e);zw(n,r,null),Uw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Os(n,i)}catch(i){await Lo(i)}}async function O9(t,e,n){const r=ke(t);try{const i=await function(a,c){const h=ke(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let _;return h.mutationQueue.lookupMutationBatch(g,c).next(w=>(Be(w!==null),_=w.keys(),h.mutationQueue.removeMutationBatch(g,w))).next(()=>h.mutationQueue.performConsistencyCheck(g)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(g,_,c)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,_)).next(()=>h.localDocuments.getDocuments(g,_))})}(r.localStore,e);zw(r,e,n),Uw(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Os(r,i)}catch(i){await Lo(i)}}async function M9(t,e){const n=ke(t);Bo(n.remoteStore)||ve("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(a){const c=ke(a);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>c.mutationQueue.getHighestUnacknowledgedBatchId(h))}(n.localStore);if(r===-1)return void e.resolve();const i=n.ba.get(r)||[];i.push(e),n.ba.set(r,i)}catch(r){const i=Ru(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function Uw(t,e){(t.ba.get(e)||[]).forEach(n=>{n.resolve()}),t.ba.delete(e)}function zw(t,e,n){const r=ke(t);let i=r.Sa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Sa[r.currentUser.toKey()]=i}}function cu(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.fa.get(e))t.ma.delete(r),n&&t.Va.Fa(r,n);t.fa.delete(e),t.isPrimaryClient&&t.wa.Rr(e).forEach(r=>{t.wa.containsKey(r)||v2(t,r)})}function v2(t,e){t.ga.delete(e.path.canonicalString());const n=t.pa.get(e);n!==null&&(Sh(t.remoteStore,n),t.pa=t.pa.remove(e),t.ya.delete(n),$w(t))}function ty(t,e,n){for(const r of n)r instanceof g2?(t.wa.addReference(r.key,e),L9(t,r)):r instanceof m2?(ve("SyncEngine","Document no longer in limbo: "+r.key),t.wa.removeReference(r.key,e),t.wa.containsKey(r.key)||v2(t,r.key)):Me()}function L9(t,e){const n=e.key,r=n.path.canonicalString();t.pa.get(n)||t.ga.has(r)||(ve("SyncEngine","New document in limbo: "+n),t.ga.add(r),$w(t))}function $w(t){for(;t.ga.size>0&&t.pa.size<t.maxConcurrentLimboResolutions;){const e=t.ga.values().next().value;t.ga.delete(e);const n=new Pe(pt.fromString(e)),r=t.Da.next();t.ya.set(r,new A9(n)),t.pa=t.pa.insert(n,r),Vm(t.remoteStore,new _s(gr(Su(n.path)),r,"TargetPurposeLimboResolution",Cr._e))}}async function Os(t,e,n){const r=ke(t),i=[],s=[],a=[];r.ma.isEmpty()||(r.ma.forEach((c,h)=>{a.push(r.va(h,e,n).then(g=>{if((g||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(h.targetId,g!=null&&g.fromCache?"not-current":"current"),g){i.push(g);const _=bw.Qi(h.targetId,g);s.push(_)}}))}),await Promise.all(a),r.Va.a_(i),await async function(h,g){const _=ke(h);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>se.forEach(g,T=>se.forEach(T.ki,E=>_.persistence.referenceDelegate.addReference(w,T.targetId,E)).next(()=>se.forEach(T.qi,E=>_.persistence.referenceDelegate.removeReference(w,T.targetId,E)))))}catch(w){if(!Vo(w))throw w;ve("LocalStore","Failed to update sequence numbers: "+w)}for(const w of g){const T=w.targetId;if(!w.fromCache){const E=_.ts.get(T),$=E.snapshotVersion,U=E.withLastLimboFreeSnapshotVersion($);_.ts=_.ts.insert(T,U)}}}(r.localStore,s))}async function V9(t,e){const n=ke(t);if(!n.currentUser.isEqual(e)){ve("SyncEngine","User change. New user:",e.toKey());const r=await ZR(n.localStore,e);n.currentUser=e,function(s,a){s.ba.forEach(c=>{c.forEach(h=>{h.reject(new pe(ue.CANCELLED,a))})}),s.ba.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Os(n,r._s)}}function F9(t,e){const n=ke(t),r=n.ya.get(e);if(r&&r.Ra)return st().add(r.key);{let i=st();const s=n.fa.get(e);if(!s)return i;for(const a of s){const c=n.ma.get(a);i=i.unionWith(c.view.ua)}return i}}async function B9(t,e){const n=ke(t),r=await vg(n.localStore,e.query,!0),i=e.view.da(r);return n.isPrimaryClient&&ty(n,e.targetId,i.Ta),i}async function j9(t,e){const n=ke(t);return r2(n.localStore,e).then(r=>Os(n,r))}async function U9(t,e,n,r){const i=ke(t),s=await function(c,h){const g=ke(c),_=ke(g.mutationQueue);return g.persistence.runTransaction("Lookup mutation documents","readonly",w=>_.Cn(w,h).next(T=>T?g.localDocuments.getDocuments(w,T):se.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await Pu(i.remoteStore):n==="acknowledged"||n==="rejected"?(zw(i,e,r||null),Uw(i,e),function(c,h){ke(ke(c).mutationQueue).Fn(h)}(i.localStore,e)):Me(),await Os(i,s)):ve("SyncEngine","Cannot apply mutation batch with id: "+e)}async function z9(t,e){const n=ke(t);if(qw(n),Hw(n),e===!0&&n.Ca!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await US(n,r.toArray());n.Ca=!0,await ey(n.remoteStore,!0);for(const s of i)Vm(n.remoteStore,s)}else if(e===!1&&n.Ca!==!1){const r=[];let i=Promise.resolve();n.fa.forEach((s,a)=>{n.sharedClientState.isLocalQueryTarget(a)?r.push(a):i=i.then(()=>(cu(n,a),lu(n.localStore,a,!0))),Sh(n.remoteStore,a)}),await i,await US(n,r),function(a){const c=ke(a);c.ya.forEach((h,g)=>{Sh(c.remoteStore,g)}),c.wa.Vr(),c.ya=new Map,c.pa=new Ot(Pe.comparator)}(n),n.Ca=!1,await ey(n.remoteStore,!1)}}async function US(t,e,n){const r=ke(t),i=[],s=[];for(const a of e){let c;const h=r.fa.get(a);if(h&&h.length!==0){c=await au(r.localStore,gr(h[0]));for(const g of h){const _=r.ma.get(g),w=await B9(r,_);w.snapshot&&s.push(w.snapshot)}}else{const g=await n2(r.localStore,a);c=await au(r.localStore,g),await jw(r,y2(g),a,!1,c.resumeToken)}i.push(c)}return r.Va.a_(s),i}function y2(t){return lR(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function $9(t){return function(n){return ke(ke(n).persistence).Bi()}(ke(t).localStore)}async function q9(t,e,n,r){const i=ke(t);if(i.Ca)return void ve("SyncEngine","Ignoring unexpected query state notification.");const s=i.fa.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const a=await r2(i.localStore,cR(s[0])),c=td.createSynthesizedRemoteEventForCurrentChange(e,n==="current",wn.EMPTY_BYTE_STRING);await Os(i,a,c);break}case"rejected":await lu(i.localStore,e,!0),cu(i,e,r);break;default:Me()}}async function H9(t,e,n){const r=qw(t);if(r.Ca){for(const i of e){if(r.fa.has(i)){ve("SyncEngine","Adding an already active target "+i);continue}const s=await n2(r.localStore,i),a=await au(r.localStore,s);await jw(r,y2(s),a.targetId,!1,a.resumeToken),Vm(r.remoteStore,a)}for(const i of n)r.fa.has(i)&&await lu(r.localStore,i,!1).then(()=>{Sh(r.remoteStore,i),cu(r,i)}).catch(Lo)}}function qw(t){const e=ke(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=_2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=F9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=N9.bind(null,e),e.Va.a_=E9.bind(null,e.eventManager),e.Va.Fa=T9.bind(null,e.eventManager),e}function Hw(t){const e=ke(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=D9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=O9.bind(null,e),e}function G9(t,e,n){const r=ke(t);(async function(s,a,c){try{const h=await a.getMetadata();if(await function(E,$){const U=ke(E),J=gn($.createTime);return U.persistence.runTransaction("hasNewerBundle","readonly",V=>U.Kr.getBundleMetadata(V,$.id)).then(V=>!!V&&V.createTime.compareTo(J)>=0)}(s.localStore,h))return await a.close(),c._completeWith(function(E){return{taskState:"Success",documentsLoaded:E.totalDocuments,bytesLoaded:E.totalBytes,totalDocuments:E.totalDocuments,totalBytes:E.totalBytes}}(h)),Promise.resolve(new Set);c._updateProgress(f2(h));const g=new x9(h,s.localStore,a.serializer);let _=await a.Ma();for(;_;){const T=await g.ea(_);T&&c._updateProgress(T),_=await a.Ma()}const w=await g.complete();return await Os(s,w.ra,void 0),await function(E,$){const U=ke(E);return U.persistence.runTransaction("Save bundle","readwrite",J=>U.Kr.saveBundleMetadata(J,$))}(s.localStore,h),c._completeWith(w.progress),Promise.resolve(w.na)}catch(h){return Ai("SyncEngine",`Loading bundle failed with ${h}`),c._failWith(h),Promise.resolve(new Set)}})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class ny{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=rd(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return JR(this.persistence,new XR,e.initialUser,this.serializer)}createPersistence(e){return new YR(Lm.jr,this.serializer)}createSharedClientState(e){return new s2}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class w2 extends ny{constructor(e,n,r){super(),this.xa=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xa.initialize(this,e),await Hw(this.xa.syncEngine),await Pu(this.xa.remoteStore),await this.persistence.mi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}createLocalStore(e){return JR(this.persistence,new XR,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new Oj(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const r=new _6(n,this.persistence);return new p6(e.asyncQueue,r)}createPersistence(e){const n=Pw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Ir.withCacheSize(this.cacheSizeBytes):Ir.DEFAULT;return new Aw(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,o2(),wf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new s2}}class W9 extends w2{constructor(e,n){super(e,n,!1),this.xa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xa.syncEngine;this.sharedClientState instanceof Yp&&(this.sharedClientState.syncEngine={Ys:U9.bind(null,n),Zs:q9.bind(null,n),Xs:H9.bind(null,n),Bi:$9.bind(null,n),Js:j9.bind(null,n)},await this.sharedClientState.start()),await this.persistence.mi(async r=>{await z9(this.xa.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}createSharedClientState(e){const n=o2();if(!Yp.D(n))throw new pe(ue.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Pw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Yp(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Gw{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>jS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=V9.bind(null,this.syncEngine),await ey(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new I9}()}createDatastore(e){const n=rd(e.databaseInfo.databaseId),r=function(s){return new s9(s)}(e.databaseInfo);return function(s,a,c,h){return new l9(s,a,c,h)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,a,c){return new c9(r,i,s,a,c)}(this.localStore,this.datastore,e.asyncQueue,n=>jS(this.syncEngine,n,0),function(){return LS.D()?new LS:new n9}())}createSyncEngine(e,n){return function(i,s,a,c,h,g,_){const w=new P9(i,s,a,c,h,g);return _&&(w.Ca=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const r=ke(n);ve("RemoteStore","RemoteStore shutting down."),r.C_.add(5),await Au(r),r.F_.shutdown(),r.M_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):dn("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K9{constructor(e,n){this.Ba=e,this.serializer=n,this.metadata=new bn,this.buffer=new Uint8Array,this.La=function(){return new TextDecoder("utf-8")}(),this.ka().then(r=>{r&&r.Z_()?this.metadata.resolve(r.Y_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.Y_)}`))},r=>this.metadata.reject(r))}close(){return this.Ba.cancel()}async getMetadata(){return this.metadata.promise}async Ma(){return await this.getMetadata(),this.ka()}async ka(){const e=await this.qa();if(e===null)return null;const n=this.La.decode(e),r=Number(n);isNaN(r)&&this.Qa(`length string (${n}) is not valid number`);const i=await this.Ka(r);return new S9(JSON.parse(i),e.length+r)}$a(){return this.buffer.findIndex(e=>e===123)}async qa(){for(;this.$a()<0&&!await this.Ua(););if(this.buffer.length===0)return null;const e=this.$a();e<0&&this.Qa("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async Ka(e){for(;this.buffer.length<e;)await this.Ua()&&this.Qa("Reached the end of bundle when more is expected.");const n=this.La.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}Qa(e){throw this.Ba.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ua(){const e=await this.Ba.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q9{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new pe(ue.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=await async function(i,s){const a=ke(i),c=Eh(a.serializer)+"/documents",h={documents:s.map(T=>Ih(a.serializer,T))},g=await a.Co("BatchGetDocuments",c,h,s.length),_=new Map;g.forEach(T=>{const E=mj(a.serializer,T);_.set(E.key.toString(),E)});const w=[];return s.forEach(T=>{const E=_.get(T.toString());Be(!!E),w.push(E)}),w}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Cu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=Pe.fromPath(r);this.mutations.push(new _w(i,this.precondition(i)))}),await async function(r,i){const s=ke(r),a=Eh(s.serializer)+"/documents",c={writes:i.map(h=>Th(s.serializer,h))};await s.wo("Commit",a,c)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Me();n=Ue.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new pe(ue.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Ue.min())?Gt.exists(!1):Gt.updateTime(n):Gt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Ue.min()))throw new pe(ue.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Gt.updateTime(n)}return Gt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y9{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.Wa=r.maxAttempts,this.zo=new kw(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){this.zo.ko(async()=>{const e=new Q9(this.datastore),n=this.za(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.ja(i)}))}).catch(r=>{this.ja(r)})})}za(e){try{const n=this.updateFunction(e);return!Yh(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ga(),Promise.resolve()))):this.deferred.reject(e)}Ha(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!SR(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X9{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=An.UNAUTHENTICATED,this.clientId=jb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{ve("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(ve("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new pe(ue.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new bn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ru(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function If(t,e){t.asyncQueue.verifyOperationInProgress(),ve("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await ZR(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function ry(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Ww(t);ve("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(i=>VS(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>VS(e.remoteStore,s)),t._onlineComponents=e}function I2(t){return t.name==="FirebaseError"?t.code===ue.FAILED_PRECONDITION||t.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function Ww(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ve("FirestoreClient","Using user provided OfflineComponentProvider");try{await If(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!I2(n))throw n;Ai("Error using user provided cache. Falling back to memory cache: "+n),await If(t,new ny)}}else ve("FirestoreClient","Using default OfflineComponentProvider"),await If(t,new ny);return t._offlineComponents}async function Bm(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ve("FirestoreClient","Using user provided OnlineComponentProvider"),await ry(t,t._uninitializedComponentsProvider._online)):(ve("FirestoreClient","Using default OnlineComponentProvider"),await ry(t,new Gw))),t._onlineComponents}function E2(t){return Ww(t).then(e=>e.persistence)}function Kw(t){return Ww(t).then(e=>e.localStore)}function T2(t){return Bm(t).then(e=>e.remoteStore)}function Qw(t){return Bm(t).then(e=>e.syncEngine)}function J9(t){return Bm(t).then(e=>e.datastore)}async function hu(t){const e=await Bm(t),n=e.eventManager;return n.onListen=b9.bind(null,e.syncEngine),n.onUnlisten=R9.bind(null,e.syncEngine),n}function Z9(t){return t.asyncQueue.enqueue(async()=>{const e=await E2(t),n=await T2(t);return e.setNetworkEnabled(!0),function(i){const s=ke(i);return s.C_.delete(0),id(s)}(n)})}function eU(t){return t.asyncQueue.enqueue(async()=>{const e=await E2(t),n=await T2(t);return e.setNetworkEnabled(!1),async function(i){const s=ke(i);s.C_.add(0),await Au(s),s.M_.set("Offline")}(n)})}function tU(t,e){const n=new bn;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,a){try{const c=await function(g,_){const w=ke(g);return w.persistence.runTransaction("read document","readonly",T=>w.localDocuments.getDocument(T,_))}(i,s);c.isFoundDocument()?a.resolve(c):c.isNoDocument()?a.resolve(null):a.reject(new pe(ue.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(c){const h=Ru(c,`Failed to get document '${s} from cache`);a.reject(h)}}(await Kw(t),e,n)),n.promise}function S2(t,e,n={}){const r=new bn;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,c,h,g){const _=new Fm({next:T=>{a.enqueueAndForget(()=>Vw(s,w));const E=T.docs.has(c);!E&&T.fromCache?g.reject(new pe(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&T.fromCache&&h&&h.source==="server"?g.reject(new pe(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(T)},error:T=>g.reject(T)}),w=new Bw(Su(c.path),_,{includeMetadataChanges:!0,J_:!0});return Lw(s,w)}(await hu(t),t.asyncQueue,e,n,r)),r.promise}function nU(t,e){const n=new bn;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,a){try{const c=await vg(i,s,!0),h=new p2(s,c.ls),g=h.ca(c.documents),_=h.applyChanges(g,!1);a.resolve(_.snapshot)}catch(c){const h=Ru(c,`Failed to execute query '${s} against cache`);a.reject(h)}}(await Kw(t),e,n)),n.promise}function x2(t,e,n={}){const r=new bn;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,c,h,g){const _=new Fm({next:T=>{a.enqueueAndForget(()=>Vw(s,w)),T.fromCache&&h.source==="server"?g.reject(new pe(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(T)},error:T=>g.reject(T)}),w=new Bw(c,_,{includeMetadataChanges:!0,J_:!0});return Lw(s,w)}(await hu(t),t.asyncQueue,e,n,r)),r.promise}function rU(t,e){const n=new Fm(e);return t.asyncQueue.enqueueAndForget(async()=>function(i,s){ke(i).q_.add(s),s.next()}(await hu(t),n)),()=>{n.Na(),t.asyncQueue.enqueueAndForget(async()=>function(i,s){ke(i).q_.delete(s)}(await hu(t),n))}}function iU(t,e,n,r){const i=function(a,c){let h;return h=typeof a=="string"?CR().encode(a):a,function(_,w){return new K9(_,w)}(function(_,w){if(_ instanceof Uint8Array)return zS(_,w);if(_ instanceof ArrayBuffer)return zS(new Uint8Array(_),w);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),c)}(n,rd(e));t.asyncQueue.enqueueAndForget(async()=>{G9(await Qw(t),i,r)})}function sU(t,e){return t.asyncQueue.enqueue(async()=>function(r,i){const s=ke(r);return s.persistence.runTransaction("Get named query","readonly",a=>s.Kr.getNamedQuery(a,i))}(await Kw(t),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C2(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yw(t,e,n){if(!n)throw new pe(ue.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function A2(t,e,n,r){if(e===!0&&r===!0)throw new pe(ue.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function qS(t){if(!Pe.isDocumentKey(t))throw new pe(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function HS(t){if(Pe.isDocumentKey(t))throw new pe(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function jm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Me()}function yt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new pe(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=jm(t);throw new pe(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function P2(t,e){if(e<=0)throw new pe(ue.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new pe(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new pe(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}A2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=C2((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new pe(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new pe(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new pe(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class sd{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new GS({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new pe(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new pe(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new GS(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new s6;switch(r.type){case"firstParty":return new u6(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new pe(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=$S.get(n);r&&(ve("ComponentProvider","Removing Datastore"),$S.delete(n),r.terminate())}(this),Promise.resolve()}}function oU(t,e,n,r={}){var i;const s=(t=yt(t,sd))._getSettings(),a=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==a&&Ai("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let c,h;if(typeof r.mockUserToken=="string")c=r.mockUserToken,h=An.MOCK_USER;else{c=gL(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new pe(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new An(g)}t._authCredentials=new o6(new Bb(c,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mr=class b2{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new b2(this.firestore,e,this._query)}},Yt=class R2{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new co(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new R2(this.firestore,e,this._key)}},co=class k2 extends mr{constructor(e,n,r){super(e,n,Su(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Yt(this.firestore,null,new Pe(e))}withConverter(e){return new k2(this.firestore,e,this._path)}};function N2(t,e,...n){if(t=Ge(t),Yw("collection","path",e),t instanceof sd){const r=pt.fromString(e,...n);return HS(r),new co(t,null,r)}{if(!(t instanceof Yt||t instanceof co))throw new pe(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(pt.fromString(e,...n));return HS(r),new co(t.firestore,null,r)}}function aU(t,e){if(t=yt(t,sd),Yw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new pe(ue.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new mr(t,null,function(r){return new Ns(pt.emptyPath(),r)}(e))}function Eg(t,e,...n){if(t=Ge(t),arguments.length===1&&(e=jb.newId()),Yw("doc","path",e),t instanceof sd){const r=pt.fromString(e,...n);return qS(r),new Yt(t,null,new Pe(r))}{if(!(t instanceof Yt||t instanceof co))throw new pe(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(pt.fromString(e,...n));return qS(r),new Yt(t.firestore,t instanceof co?t.converter:null,new Pe(r))}}function D2(t,e){return t=Ge(t),e=Ge(e),(t instanceof Yt||t instanceof co)&&(e instanceof Yt||e instanceof co)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function O2(t,e){return t=Ge(t),e=Ge(e),t instanceof mr&&e instanceof mr&&t.firestore===e.firestore&&Jh(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lU{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new kw(this,"async_queue_retry"),this.iu=()=>{const n=wf();n&&ve("AsyncQueue","Visibility state changed to "+n.visibilityState),this.zo.Qo()};const e=wf();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const n=wf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});const n=new bn;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}async _u(){if(this.Ya.length!==0){try{await this.Ya[0](),this.Ya.shift(),this.zo.reset()}catch(e){if(!Vo(e))throw e;ve("AsyncQueue","Operation failed with retryable error: "+e)}this.Ya.length>0&&this.zo.ko(()=>this._u())}}ou(e){const n=this.Ja.then(()=>(this.tu=!0,e().catch(r=>{this.eu=r,this.tu=!1;const i=function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),c}(r);throw dn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.tu=!1,r))));return this.Ja=n,n}enqueueAfterDelay(e,n,r){this.su(),this.ru.indexOf(e)>-1&&(n=0);const i=Mw.createAndSchedule(this,e,n,r,s=>this.au(s));return this.Xa.push(i),i}su(){this.eu&&Me()}verifyOperationInProgress(){}async uu(){let e;do e=this.Ja,await e;while(e!==this.Ja)}cu(e){for(const n of this.Xa)if(n.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Xa)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){const n=this.Xa.indexOf(e);this.Xa.splice(n,1)}}function iy(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class uU{constructor(){this._progressObserver={},this._taskCompletionResolver=new bn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cU=-1;let sn=class extends sd{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new lU}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||M2(this),this._firestoreClient.terminate()}};function On(t){return t._firestoreClient||M2(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function M2(t){var e,n,r;const i=t._freezeSettings(),s=function(c,h,g,_){return new F6(c,h,g,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,C2(_.experimentalLongPollingOptions),_.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new X9(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function hU(t,e){V2(t=yt(t,sn));const n=On(t);if(n._uninitializedComponentsProvider)throw new pe(ue.FAILED_PRECONDITION,"SDK cache is already specified.");Ai("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings(),i=new Gw;return L2(n,i,new w2(i,r.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function dU(t){V2(t=yt(t,sn));const e=On(t);if(e._uninitializedComponentsProvider)throw new pe(ue.FAILED_PRECONDITION,"SDK cache is already specified.");Ai("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),r=new Gw;return L2(e,r,new W9(r,n.cacheSizeBytes))}function L2(t,e,n){const r=new bn;return t.asyncQueue.enqueue(async()=>{try{await If(t,n),await ry(t,e),r.resolve()}catch(i){const s=i;if(!I2(s))throw s;Ai("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}}).then(()=>r.promise)}function fU(t){if(t._initialized&&!t._terminated)throw new pe(ue.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new bn;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!wi.D())return Promise.resolve();const i=r+"main";await wi.delete(i)}(Pw(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function gU(t){return function(n){const r=new bn;return n.asyncQueue.enqueueAndForget(async()=>M9(await Qw(n),r)),r.promise}(On(t=yt(t,sn)))}function mU(t){return Z9(On(t=yt(t,sn)))}function pU(t){return eU(On(t=yt(t,sn)))}function _U(t,e){const n=On(t=yt(t,sn)),r=new uU;return iU(n,t._databaseId,e,r),r}function vU(t,e){return sU(On(t=yt(t,sn)),e).then(n=>n?new mr(t,null,n.query):null)}function V2(t){if(t._initialized||t._terminated)throw new pe(ue.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ts(wn.fromBase64String(e))}catch(n){throw new pe(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ts(wn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xo=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new pe(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ht(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ga=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new pe(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new pe(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return rt(this._lat,e._lat)||rt(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yU=/^__.*__$/;class wU{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ds(e,this.data,this.fieldMask,n,this.fieldTransforms):new xu(e,this.data,n,this.fieldTransforms)}}class F2{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ds(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function B2(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Me()}}class zm{constructor(e,n,r,i,s,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Pu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new zm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Tu({path:r,du:!1});return i.Au(e),i}Ru(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Tu({path:r,du:!1});return i.Pu(),i}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return Tg(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(e.length===0)throw this.mu("Document fields must not be empty");if(B2(this.Iu)&&yU.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class IU{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||rd(e)}pu(e,n,r,i=!1){return new zm({Iu:e,methodName:n,gu:r,path:Ht.emptyPath(),du:!1,fu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Wa(t){const e=t._freezeSettings(),n=rd(t._databaseId);return new IU(t._databaseId,!!e.ignoreUndefinedProperties,n)}function $m(t,e,n,r,i,s={}){const a=t.pu(s.merge||s.mergeFields?2:0,e,n,i);eI("Data must be an object, but it was:",a,r);const c=z2(r,a);let h,g;if(s.merge)h=new Ar(a.fieldMask),g=a.fieldTransforms;else if(s.mergeFields){const _=[];for(const w of s.mergeFields){const T=sy(e,w,n);if(!a.contains(T))throw new pe(ue.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);q2(_,T)||_.push(T)}h=new Ar(_),g=a.fieldTransforms.filter(w=>h.covers(w.field))}else h=null,g=a.fieldTransforms;return new wU(new Bn(c),h,g)}class od extends Ga{_toFieldTransform(e){if(e.Iu!==2)throw e.Iu===1?e.mu(`${this._methodName}() can only appear at the top level of your update data`):e.mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof od}}function j2(t,e,n){return new zm({Iu:3,gu:e.settings.gu,methodName:t._methodName,du:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Xw extends Ga{_toFieldTransform(e){return new ed(e.path,new iu)}isEqual(e){return e instanceof Xw}}class EU extends Ga{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=j2(this,e,!0),r=this.yu.map(s=>Ka(s,n)),i=new Da(r);return new ed(e.path,i)}isEqual(e){return this===e}}class TU extends Ga{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=j2(this,e,!0),r=this.yu.map(s=>Ka(s,n)),i=new Oa(r);return new ed(e.path,i)}isEqual(e){return this===e}}class SU extends Ga{constructor(e,n){super(e),this.wu=n}_toFieldTransform(e){const n=new su(e.serializer,_R(e.serializer,this.wu));return new ed(e.path,n)}isEqual(e){return this===e}}function Jw(t,e,n,r){const i=t.pu(1,e,n);eI("Data must be an object, but it was:",i,r);const s=[],a=Bn.empty();Ha(r,(h,g)=>{const _=tI(e,h,n);g=Ge(g);const w=i.Ru(_);if(g instanceof od)s.push(_);else{const T=Ka(g,w);T!=null&&(s.push(_),a.set(_,T))}});const c=new Ar(s);return new F2(a,c,i.fieldTransforms)}function Zw(t,e,n,r,i,s){const a=t.pu(1,e,n),c=[sy(e,r,n)],h=[i];if(s.length%2!=0)throw new pe(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<s.length;T+=2)c.push(sy(e,s[T])),h.push(s[T+1]);const g=[],_=Bn.empty();for(let T=c.length-1;T>=0;--T)if(!q2(g,c[T])){const E=c[T];let $=h[T];$=Ge($);const U=a.Ru(E);if($ instanceof od)g.push(E);else{const J=Ka($,U);J!=null&&(g.push(E),_.set(E,J))}}const w=new Ar(g);return new F2(_,w,a.fieldTransforms)}function U2(t,e,n,r=!1){return Ka(n,t.pu(r?4:3,e))}function Ka(t,e){if($2(t=Ge(t)))return eI("Unsupported field value:",e,t),z2(t,e);if(t instanceof Ga)return function(r,i){if(!B2(i.Iu))throw i.mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.mu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.du&&e.Iu!==4)throw e.mu("Nested arrays are not supported");return function(r,i){const s=[];let a=0;for(const c of r){let h=Ka(c,i.Vu(a));h==null&&(h={nullValue:"NULL_VALUE"}),s.push(h),a++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Ge(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return _R(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Wt.fromDate(r);return{timestampValue:ou(i.serializer,s)}}if(r instanceof Wt){const s=new Wt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ou(i.serializer,s)}}if(r instanceof Um)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ts)return{bytesValue:bR(i.serializer,r._byteString)};if(r instanceof Yt){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.mu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Ew(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.mu(`Unsupported field value: ${jm(r)}`)}(t,e)}function z2(t,e){const n={};return Xb(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ha(t,(r,i)=>{const s=Ka(i,e.Eu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function $2(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Wt||t instanceof Um||t instanceof ts||t instanceof Yt||t instanceof Ga)}function eI(t,e,n){if(!$2(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=jm(n);throw r==="an object"?e.mu(t+" a custom object"):e.mu(t+" "+r)}}function sy(t,e,n){if((e=Ge(e))instanceof xo)return e._internalPath;if(typeof e=="string")return tI(t,e);throw Tg("Field path arguments must be of type string or ",t,!1,void 0,n)}const xU=new RegExp("[~\\*/\\[\\]]");function tI(t,e,n){if(e.search(xU)>=0)throw Tg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new xo(...e.split("."))._internalPath}catch{throw Tg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Tg(t,e,n,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let h="";return(s||a)&&(h+=" (found",s&&(h+=` in field ${r}`),a&&(h+=` in document ${i}`),h+=")"),new pe(ue.INVALID_ARGUMENT,c+t+h)}function q2(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Yt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new CU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(qm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class CU extends xh{data(){return super.data()}}function qm(t,e){return typeof e=="string"?tI(t,e):e instanceof xo?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H2(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new pe(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class nI{}class ad extends nI{}function Us(t,e,...n){let r=[];e instanceof nI&&r.push(e),r=r.concat(n),function(s){const a=s.filter(h=>h instanceof rI).length,c=s.filter(h=>h instanceof Hm).length;if(a>1||a>0&&c>0)throw new pe(ue.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Hm extends ad{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Hm(e,n,r)}_apply(e){const n=this._parse(e);return W2(e._query,n),new mr(e.firestore,e.converter,Gv(e._query,n))}_parse(e){const n=Wa(e.firestore);return function(s,a,c,h,g,_,w){let T;if(g.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new pe(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){KS(w,_);const E=[];for(const $ of w)E.push(WS(h,s,$));T={arrayValue:{values:E}}}else T=WS(h,s,w)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||KS(w,_),T=U2(c,a,w,_==="in"||_==="not-in");return ct.create(g,_,T)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function AU(t,e,n){const r=e,i=qm("where",t);return Hm._create(i,r,n)}class rI extends nI{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new rI(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:xt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let a=i;const c=s.getFlattenedFilters();for(const h of c)W2(a,h),a=Gv(a,h)}(e._query,n),new mr(e.firestore,e.converter,Gv(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class iI extends ad{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new iI(e,n)}_apply(e){const n=function(i,s,a){if(i.startAt!==null)throw new pe(ue.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new pe(ue.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new wh(s,a)}(e._query,this._field,this._direction);return new mr(e.firestore,e.converter,function(i,s){const a=i.explicitOrderBy.concat([s]);return new Ns(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function PU(t,e="asc"){const n=e,r=qm("orderBy",t);return iI._create(r,n)}class Gm extends ad{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Gm(e,n,r)}_apply(e){return new mr(e.firestore,e.converter,gg(e._query,this._limit,this._limitType))}}function bU(t){return P2("limit",t),Gm._create("limit",t,"F")}function RU(t){return P2("limitToLast",t),Gm._create("limitToLast",t,"L")}class Wm extends ad{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Wm(e,n,r)}_apply(e){const n=G2(e,this.type,this._docOrFields,this._inclusive);return new mr(e.firestore,e.converter,function(i,s){return new Ns(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}}function kU(...t){return Wm._create("startAt",t,!0)}function NU(...t){return Wm._create("startAfter",t,!1)}class Km extends ad{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Km(e,n,r)}_apply(e){const n=G2(e,this.type,this._docOrFields,this._inclusive);return new mr(e.firestore,e.converter,function(i,s){return new Ns(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,n))}}function DU(...t){return Km._create("endBefore",t,!1)}function OU(...t){return Km._create("endAt",t,!0)}function G2(t,e,n,r){if(n[0]=Ge(n[0]),n[0]instanceof xh)return function(s,a,c,h,g){if(!h)throw new pe(ue.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const _=[];for(const w of Ul(s))if(w.field.isKeyField())_.push(ka(a,h.key));else{const T=h.data.field(w.field);if(km(T))throw new pe(ue.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+w.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(T===null){const E=w.field.canonicalString();throw new pe(ue.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${E}' (used as the orderBy) does not exist.`)}_.push(T)}return new To(_,g)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Wa(t.firestore);return function(a,c,h,g,_,w){const T=a.explicitOrderBy;if(_.length>T.length)throw new pe(ue.INVALID_ARGUMENT,`Too many arguments provided to ${g}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const E=[];for(let $=0;$<_.length;$++){const U=_[$];if(T[$].field.isKeyField()){if(typeof U!="string")throw new pe(ue.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${g}(), but got a ${typeof U}`);if(!mw(a)&&U.indexOf("/")!==-1)throw new pe(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${g}() must be a plain document ID, but '${U}' contains a slash.`);const J=a.path.child(pt.fromString(U));if(!Pe.isDocumentKey(J))throw new pe(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${g}() must result in a valid document path, but '${J}' is not because it contains an odd number of segments.`);const V=new Pe(J);E.push(ka(c,V))}else{const J=U2(h,g,U);E.push(J)}}return new To(E,w)}(t._query,t.firestore._databaseId,i,e,n,r)}}function WS(t,e,n){if(typeof(n=Ge(n))=="string"){if(n==="")throw new pe(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!mw(e)&&n.indexOf("/")!==-1)throw new pe(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(pt.fromString(n));if(!Pe.isDocumentKey(r))throw new pe(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ka(t,new Pe(r))}if(n instanceof Yt)return ka(t,n._key);throw new pe(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jm(n)}.`)}function KS(t,e){if(!Array.isArray(t)||t.length===0)throw new pe(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function W2(t,e){const n=function(i,s){for(const a of i)for(const c of a.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new pe(ue.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new pe(ue.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class sI{convertValue(e,n="none"){switch(Ra(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(wo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw Me()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ha(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new Um(tn(e.latitude),tn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=fw(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(_h(e));default:return null}}convertTimestamp(e){const n=yo(e);return new Wt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=pt.fromString(e);Be(BR(r));const i=new Io(r.get(1),r.get(3)),s=new Pe(r.popFirst(5));return i.isEqual(n)||dn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qm(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class MU extends sI{constructor(e){super(),this.firestore=e}convertBytes(e){return new ts(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Yt(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let Ps=class extends xh{constructor(e,n,r,i,s,a){super(e,n,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Nc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(qm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Nc=class extends Ps{data(e={}){return super.data(e)}},Co=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ha(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Nc(this._firestore,this._userDataWriter,r.key,r,new ha(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new pe(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(c=>{const h=new Nc(i._firestore,i._userDataWriter,c.doc.key,c.doc,new ha(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:h,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{const h=new Nc(i._firestore,i._userDataWriter,c.doc.key,c.doc,new ha(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let g=-1,_=-1;return c.type!==0&&(g=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),_=a.indexOf(c.doc.key)),{type:LU(c.type),doc:h,oldIndex:g,newIndex:_}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function LU(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Me()}}function K2(t,e){return t instanceof Ps&&e instanceof Ps?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Co&&e instanceof Co&&t._firestore===e._firestore&&O2(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VU(t){t=yt(t,Yt);const e=yt(t.firestore,sn);return S2(On(e),t._key).then(n=>oI(e,t,n))}class Qa extends sI{constructor(e){super(),this.firestore=e}convertBytes(e){return new ts(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Yt(this.firestore,null,n)}}function FU(t){t=yt(t,Yt);const e=yt(t.firestore,sn),n=On(e),r=new Qa(e);return tU(n,t._key).then(i=>new Ps(e,r,t._key,i,new ha(i!==null&&i.hasLocalMutations,!0),t.converter))}function BU(t){t=yt(t,Yt);const e=yt(t.firestore,sn);return S2(On(e),t._key,{source:"server"}).then(n=>oI(e,t,n))}function jU(t){t=yt(t,mr);const e=yt(t.firestore,sn),n=On(e),r=new Qa(e);return H2(t._query),x2(n,t._query).then(i=>new Co(e,r,t,i))}function UU(t){t=yt(t,mr);const e=yt(t.firestore,sn),n=On(e),r=new Qa(e);return nU(n,t._query).then(i=>new Co(e,r,t,i))}function zU(t){t=yt(t,mr);const e=yt(t.firestore,sn),n=On(e),r=new Qa(e);return x2(n,t._query,{source:"server"}).then(i=>new Co(e,r,t,i))}function QS(t,e,n){t=yt(t,Yt);const r=yt(t.firestore,sn),i=Qm(t.converter,e,n);return ld(r,[$m(Wa(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Gt.none())])}function YS(t,e,n,...r){t=yt(t,Yt);const i=yt(t.firestore,sn),s=Wa(i);let a;return a=typeof(e=Ge(e))=="string"||e instanceof xo?Zw(s,"updateDoc",t._key,e,n,r):Jw(s,"updateDoc",t._key,e),ld(i,[a.toMutation(t._key,Gt.exists(!0))])}function $U(t){return ld(yt(t.firestore,sn),[new Cu(t._key,Gt.none())])}function qU(t,e){const n=yt(t.firestore,sn),r=Eg(t),i=Qm(t.converter,e);return ld(n,[$m(Wa(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Gt.exists(!1))]).then(()=>r)}function Q2(t,...e){var n,r,i;t=Ge(t);let s={includeMetadataChanges:!1},a=0;typeof e[a]!="object"||iy(e[a])||(s=e[a],a++);const c={includeMetadataChanges:s.includeMetadataChanges};if(iy(e[a])){const w=e[a];e[a]=(n=w.next)===null||n===void 0?void 0:n.bind(w),e[a+1]=(r=w.error)===null||r===void 0?void 0:r.bind(w),e[a+2]=(i=w.complete)===null||i===void 0?void 0:i.bind(w)}let h,g,_;if(t instanceof Yt)g=yt(t.firestore,sn),_=Su(t._key.path),h={next:w=>{e[a]&&e[a](oI(g,t,w))},error:e[a+1],complete:e[a+2]};else{const w=yt(t,mr);g=yt(w.firestore,sn),_=w._query;const T=new Qa(g);h={next:E=>{e[a]&&e[a](new Co(g,T,w,E))},error:e[a+1],complete:e[a+2]},H2(t._query)}return function(T,E,$,U){const J=new Fm(U),V=new Bw(E,J,$);return T.asyncQueue.enqueueAndForget(async()=>Lw(await hu(T),V)),()=>{J.Na(),T.asyncQueue.enqueueAndForget(async()=>Vw(await hu(T),V))}}(On(g),_,c,h)}function HU(t,e){return rU(On(t=yt(t,sn)),iy(e)?e:{next:e})}function ld(t,e){return function(r,i){const s=new bn;return r.asyncQueue.enqueueAndForget(async()=>k9(await Qw(r),i,s)),s.promise}(On(t),e)}function oI(t,e,n){const r=n.docs.get(e._key),i=new Qa(t);return new Ps(t,i,e._key,r,new ha(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GU={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let WU=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Wa(e)}set(e,n,r){this._verifyNotCommitted();const i=Ws(e,this._firestore),s=Qm(i.converter,n,r),a=$m(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(a.toMutation(i._key,Gt.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Ws(e,this._firestore);let a;return a=typeof(n=Ge(n))=="string"||n instanceof xo?Zw(this._dataReader,"WriteBatch.update",s._key,n,r,i):Jw(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(a.toMutation(s._key,Gt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Ws(e,this._firestore);return this._mutations=this._mutations.concat(new Cu(n._key,Gt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new pe(ue.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Ws(t,e){if((t=Ge(t)).firestore!==e)throw new pe(ue.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let KU=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Wa(n)}get(n){const r=Ws(n,this._firestore),i=new MU(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return Me();const a=s[0];if(a.isFoundDocument())return new xh(this._firestore,i,a.key,a,r.converter);if(a.isNoDocument())return new xh(this._firestore,i,r._key,null,r.converter);throw Me()})}set(n,r,i){const s=Ws(n,this._firestore),a=Qm(s.converter,r,i),c=$m(this._dataReader,"Transaction.set",s._key,a,s.converter!==null,i);return this._transaction.set(s._key,c),this}update(n,r,i,...s){const a=Ws(n,this._firestore);let c;return c=typeof(r=Ge(r))=="string"||r instanceof xo?Zw(this._dataReader,"Transaction.update",a._key,r,i,s):Jw(this._dataReader,"Transaction.update",a._key,r),this._transaction.update(a._key,c),this}delete(n){const r=Ws(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Ws(e,this._firestore),r=new Qa(this._firestore);return super.get(e).then(i=>new Ps(this._firestore,r,n._key,i._document,new ha(!1,!1),n.converter))}};function QU(t,e,n){t=yt(t,sn);const r=Object.assign(Object.assign({},GU),n);return function(s){if(s.maxAttempts<1)throw new pe(ue.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,a,c){const h=new bn;return s.asyncQueue.enqueueAndForget(async()=>{const g=await J9(s);new Y9(s.asyncQueue,g,c,a,h).run()}),h.promise}(On(t),i=>e(new KU(t,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YU(){return new od("deleteField")}function XU(){return new Xw("serverTimestamp")}function JU(...t){return new EU("arrayUnion",t)}function ZU(...t){return new TU("arrayRemove",t)}function ez(t){return new SU("increment",t)}(function(e,n=!0){(function(i){Tu=i})(No),_o(new Ji("firestore",(r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),c=new sn(new a6(r.getProvider("auth-internal")),new h6(r.getProvider("app-check-internal")),function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new pe(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Io(g.options.projectId,_)}(a,i),a);return s=Object.assign({useFetchStreams:n},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),Qi(qT,"4.4.0",e),Qi(qT,"4.4.0","esm2017")})();const tz="@firebase/firestore-compat",nz="0.3.23";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aI(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new pe("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XS(){if(typeof Uint8Array>"u")throw new pe("unimplemented","Uint8Arrays are not available in this environment.")}function JS(){if(!L6())throw new pe("unimplemented","Blobs are unavailable in Firestore in this environment.")}let Y2=class oy{constructor(e){this._delegate=e}static fromBase64String(e){return JS(),new oy(ts.fromBase64String(e))}static fromUint8Array(e){return XS(),new oy(ts.fromUint8Array(e))}toBase64(){return JS(),this._delegate.toBase64()}toUint8Array(){return XS(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ay(t){return rz(t,["next","error","complete"])}function rz(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iz{enableIndexedDbPersistence(e,n){return hU(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return dU(e._delegate)}clearIndexedDbPersistence(e){return fU(e._delegate)}}class X2{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Io||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Ai("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){oU(this._delegate,e,n,r)}enableNetwork(){return mU(this._delegate)}disableNetwork(){return pU(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,A2("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return gU(this._delegate)}onSnapshotsInSync(e){return HU(this._delegate,e)}get app(){if(!this._appCompat)throw new pe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new du(this,N2(this._delegate,e))}catch(n){throw ar(n,"collection()","Firestore.collection()")}}doc(e){try{return new ni(this,Eg(this._delegate,e))}catch(n){throw ar(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new or(this,aU(this._delegate,e))}catch(n){throw ar(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return QU(this._delegate,n=>e(new J2(this,n)))}batch(){return On(this._delegate),new Z2(new WU(this._delegate,e=>ld(this._delegate,e)))}loadBundle(e){return _U(this._delegate,e)}namedQuery(e){return vU(this._delegate,e).then(n=>n?new or(this,n):null)}}class Ym extends sI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Y2(new ts(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return ni.forKey(n,this.firestore,null)}}function sz(t){r6(t)}class J2{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Ym(e)}get(e){const n=da(e);return this._delegate.get(n).then(r=>new Ch(this._firestore,new Ps(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=da(e);return r?(aI("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=da(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=da(e);return this._delegate.delete(n),this}}class Z2{constructor(e){this._delegate=e}set(e,n,r){const i=da(e);return r?(aI("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=da(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=da(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class Fa{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new Nc(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Ah(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=Fa.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new Fa(e,new Ym(e),n),i.set(n,s)),s}}Fa.INSTANCES=new WeakMap;class ni{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Ym(e)}static forPath(e,n,r){if(e.length%2!==0)throw new pe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ni(n,new Yt(n._delegate,r,new Pe(e)))}static forKey(e,n,r){return new ni(n,new Yt(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new du(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new du(this.firestore,N2(this._delegate,e))}catch(n){throw ar(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Ge(e),e instanceof Yt?D2(this._delegate,e):!1}set(e,n){n=aI("DocumentReference.set",n);try{return n?QS(this._delegate,e,n):QS(this._delegate,e)}catch(r){throw ar(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?YS(this._delegate,e):YS(this._delegate,e,n,...r)}catch(i){throw ar(i,"updateDoc()","DocumentReference.update()")}}delete(){return $U(this._delegate)}onSnapshot(...e){const n=ek(e),r=tk(e,i=>new Ch(this.firestore,new Ps(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return Q2(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=FU(this._delegate):(e==null?void 0:e.source)==="server"?n=BU(this._delegate):n=VU(this._delegate),n.then(r=>new Ch(this.firestore,new Ps(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ni(this.firestore,e?this._delegate.withConverter(Fa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function ar(t,e,n){return t.message=t.message.replace(e,n),t}function ek(t){for(const e of t)if(typeof e=="object"&&!ay(e))return e;return{}}function tk(t,e){var n,r;let i;return ay(t[0])?i=t[0]:ay(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}class Ch{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new ni(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return K2(this._delegate,e._delegate)}}class Ah extends Ch{data(e){const n=this._delegate.data(e);return this._delegate._converter||i6(n!==void 0),n}}class or{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Ym(e)}where(e,n,r){try{return new or(this.firestore,Us(this._delegate,AU(e,n,r)))}catch(i){throw ar(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new or(this.firestore,Us(this._delegate,PU(e,n)))}catch(r){throw ar(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new or(this.firestore,Us(this._delegate,bU(e)))}catch(n){throw ar(n,"limit()","Query.limit()")}}limitToLast(e){try{return new or(this.firestore,Us(this._delegate,RU(e)))}catch(n){throw ar(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new or(this.firestore,Us(this._delegate,kU(...e)))}catch(n){throw ar(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new or(this.firestore,Us(this._delegate,NU(...e)))}catch(n){throw ar(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new or(this.firestore,Us(this._delegate,DU(...e)))}catch(n){throw ar(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new or(this.firestore,Us(this._delegate,OU(...e)))}catch(n){throw ar(n,"endAt()","Query.endAt()")}}isEqual(e){return O2(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=UU(this._delegate):(e==null?void 0:e.source)==="server"?n=zU(this._delegate):n=jU(this._delegate),n.then(r=>new ly(this.firestore,new Co(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=ek(e),r=tk(e,i=>new ly(this.firestore,new Co(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return Q2(this._delegate,n,r)}withConverter(e){return new or(this.firestore,e?this._delegate.withConverter(Fa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class oz{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Ah(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class ly{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new or(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Ah(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new oz(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Ah(this._firestore,r))})}isEqual(e){return K2(this._delegate,e._delegate)}}class du extends or{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ni(this.firestore,e):null}doc(e){try{return e===void 0?new ni(this.firestore,Eg(this._delegate)):new ni(this.firestore,Eg(this._delegate,e))}catch(n){throw ar(n,"doc()","CollectionReference.doc()")}}add(e){return qU(this._delegate,e).then(n=>new ni(this.firestore,n))}isEqual(e){return D2(this._delegate,e._delegate)}withConverter(e){return new du(this.firestore,e?this._delegate.withConverter(Fa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function da(t){return yt(t,Yt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(...e){this._delegate=new xo(...e)}static documentId(){return new lI(Ht.keyField().canonicalString())}isEqual(e){return e=Ge(e),e instanceof xo?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e){this._delegate=e}static serverTimestamp(){const e=XU();return e._methodName="FieldValue.serverTimestamp",new ra(e)}static delete(){const e=YU();return e._methodName="FieldValue.delete",new ra(e)}static arrayUnion(...e){const n=JU(...e);return n._methodName="FieldValue.arrayUnion",new ra(n)}static arrayRemove(...e){const n=ZU(...e);return n._methodName="FieldValue.arrayRemove",new ra(n)}static increment(e){const n=ez(e);return n._methodName="FieldValue.increment",new ra(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const az={Firestore:X2,GeoPoint:Um,Timestamp:Wt,Blob:Y2,Transaction:J2,WriteBatch:Z2,DocumentReference:ni,DocumentSnapshot:Ch,Query:or,QueryDocumentSnapshot:Ah,QuerySnapshot:ly,CollectionReference:du,FieldPath:lI,FieldValue:ra,setLogLevel:sz,CACHE_SIZE_UNLIMITED:cU};function lz(t,e){t.INTERNAL.registerComponent(new Ji("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},az)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uz(t){lz(t,(e,n)=>new X2(e,n,new iz)),t.registerVersion(tz,nz)}uz(Ft);Ft.initializeApp({apiKey:"AIzaSyAHOemftrTSOUjtoA6K3VR2hkOU5H-ScSI",authDomain:"amstangram.firebaseapp.com",databaseURL:"https://amstangram.firebaseio.com",projectId:"amstangram",storageBucket:"amstangram.appspot.com",messagingSenderId:"1075176148116",appId:"1:1075176148116:web:e61e6512cd983a75533881",measurementId:"G-PLH3BSWLM2"});const cz=t=>{const e=document.createElement("textarea");e.value=t,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)},hz=t=>{let e=t.length,n,r;for(;e!==0;)r=Math.floor(Math.random()*e),e-=1,n=t[e],t[e]=t[r],t[r]=n;return t},dz=ns(fe,{css:{fontSize:3,p:2,borderRadius:1,bg:"notificationBackground",color:"dialogText",animation:`${Xr/2}ms fadeIn both`,boxShadow:"0px 0px 10px #00000080"}}),ui=G.createContext(null),fz=({children:t})=>{const e=G.useRef(),[n,r]=G.useState(null),i=G.useCallback(s=>{r(a=>(a&&clearTimeout(a.timeoutId),{content:s,timeoutId:setTimeout(()=>{r(null)},2e3)}))},[]);return R.jsxs(ui.Provider,{value:i,children:[t,n&&l0.createPortal(R.jsx(fe,{css:{position:"fixed",top:0,left:0,bottom:0,right:0,pointerEvents:"none",alignItems:"center",justifyContent:"center"},children:R.jsx(dz,{ref:e,children:n.content})}),document.getElementById("notificationContainer"))]})},Hn=G.createContext(null),gz=({children:t})=>{const[e,n]=G.useState(void 0),[r,i]=G.useState(null),[s,a]=G.useState(!1);G.useEffect(()=>{e!==void 0&&r!==null&&a(!0)},[e,r]),G.useEffect(()=>Ft.auth().onAuthStateChanged(async T=>{if(!T)n(null);else{const $=(await Ft.firestore().collection("users").doc(T.uid).get()).data();n({uid:T.uid,...$,firebaseUser:T})}}),[]),G.useEffect(()=>Ft.firestore().collection("users").onSnapshot(T=>{const E={};for(const $ of T.docs){const U=$.data();E[$.id]=U}i(E)}),[]);const c=G.useCallback(async(w,T)=>{await w.firebaseUser.updateProfile({displayName:T}),await Ft.firestore().collection("users").doc(w.uid).update({username:T}),n({...w,username:T})},[]),h=G.useCallback(async(w,T,E)=>{const $=Ft.auth.EmailAuthProvider.credential(w.firebaseUser.email,T);await w.firebaseUser.reauthenticateWithCredential($),await w.firebaseUser.updatePassword(E)},[]),g=G.useCallback(async(w,T,E)=>{const $=Ft.auth.EmailAuthProvider.credential(w.firebaseUser.email,E);await w.firebaseUser.reauthenticateWithCredential($),await w.firebaseUser.updateEmail(T)},[]),_=G.useMemo(()=>({initialized:s,currentUser:e,usersMetadata:r,updateUsername:c,updatePassword:h,updateEmail:g}),[s,e,r,c,h,g]);return R.jsx(Hn.Provider,{value:_,children:t})};var mz=function(t){for(var e=JSON.parse(t),n=[],r=0;r<7;r++){var i=e[r],s=new Point(new IntAdjoinSqrt2(i.anchor.x.coeffInt,i.anchor.x.coeffSqrt),new IntAdjoinSqrt2(i.anchor.y.coeffInt,i.anchor.y.coeffSqrt));n.push(new Tan(i.tanType,s,i.orientation))}return new Tangram(n)};const jo=G.createContext([]),pz=({children:t})=>{const{currentUser:e}=G.useContext(Hn),[n,r]=G.useState(null);G.useEffect(()=>{const s=new Worker(new URL("/static/project/assets/generator-nq86RVpu.js",import.meta.url));return s.onmessage=function(a){var c=a.data;typeof c=="string"?c==="Worker started!"?(generating=!0,console.log("Worker said: ",c)):c==="Generating done!"?r(generated.map((h,g)=>(h.positionCentered(),{id:g,approved:!0,category:"geometric",emoji:"👴",length:h.evaluation.perimeter,edges:h.evaluation.outlineVertices,height:h.evaluation.rangeY,width:h.evaluation.rangeX,path:h.toSVGOutline()}))):c.startsWith("console")?console.log("Log from worker",c):(generating=!1,generated.push(mz(c))):console.log("Worker said: ","Generated!")},s.postMessage(1e3),()=>s.terminate()},[]);const i=G.useMemo(()=>{if(!n)return{initialized:!1,approvedTangrams:null,pendingTangrams:null,approvedTangramsByCategory:null};const s=[],a=[];for(const c of n)c.approved?s.push(c):e&&(e.isAdmin||c.uid===e.uid)&&a.push(c);return{initialized:!0,approvedTangrams:s,pendingTangrams:a}},[e,n]);return R.jsx(jo.Provider,{value:i,children:t})},Dr=G.createContext(null),_z=({children:t})=>{const e=Zt(),n=G.useContext(ui),{currentUser:r}=G.useContext(Hn),{approvedTangrams:i}=G.useContext(jo),[s,a]=G.useState(null),[c,h]=G.useState(null),[g,_]=G.useState(null),[w,T]=G.useState(0),[E,$]=G.useState(!1);G.useEffect(()=>{s&&c&&$(!0)},[s,c]),G.useEffect(()=>Ft.firestore().collection("stats").onSnapshot(ce=>{const _e={},me={};for(const tt of ce.docs){const Le=tt.id,xe=tt.data();_e[Le]||(_e[Le]={},me[Le]={});for(const we in xe)_e[Le][we]=xe[we].completed,me[Le][we]=xe[we].starred}a(_e),h(me)}),[]);const U=G.useCallback(ae=>!r||!c[ae]?!1:c[ae][r.uid]===!0,[r,c]),J=G.useCallback(ae=>!r||!s[ae]?!1:s[ae][r.uid]!==void 0,[r,s]),V=G.useCallback(ae=>{let ce=`${window.location.origin}/?tangrams=${ae.map(({id:_e})=>_e).join(",")}`;r&&(ce+=`&uid=${r.uid}`),cz(ce),n(e.formatMessage({id:"Challenge link copied to clipboard"}))},[n,r,e]),B=G.useCallback(()=>{T(ae=>ae+1)},[]),j=G.useCallback(ae=>{const ce=ae?({id:me,edges:tt},{id:Le,edges:xe})=>{const we=J(me),nt=J(Le);return!we&&!nt?xe-tt:we-nt}:({id:me},{id:tt})=>{const Le=J(me),xe=J(tt);return Le-xe},_e=hz([...i]).sort(ce);_(_e)},[i,J]),Z=G.useCallback(async(ae,ce)=>{r&&i.some(_e=>_e.id===ae.id)&&!J(ae.id)&&await Ft.firestore().collection("stats").doc(ae.id).set({[r.uid]:{completed:ce}},{merge:!0})},[i,r,J]),ne=G.useCallback(async ae=>{if(r&&i.some(ce=>ce.id===ae.id)){const ce=U(ae.id);await Ft.firestore().collection("stats").doc(ae.id).set({[r.uid]:{starred:!ce}},{merge:!0})}},[i,r,U]),te=G.useMemo(()=>({initialized:E,requestSave:B,saveRequestId:w,playlist:g,setPlaylist:_,shareTangrams:V,startRandomPlaylist:j,tangramsCompletedBy:s,tangramsStarredBy:c,toggleTangramStar:ne,markTangramAsComplete:Z,isTangramCompleted:J,isTangramStarred:U}),[E,B,w,g,V,j,s,c,ne,Z,J,U]);return R.jsx(Dr.Provider,{value:te,children:t})};var nk={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},ZS=St.createContext&&St.createContext(nk),ho=function(){return ho=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},ho.apply(this,arguments)},vz=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function rk(t){return t&&t.map(function(e,n){return St.createElement(e.tag,ho({key:n},e.attr),rk(e.child))})}function vr(t){return function(e){return St.createElement(yz,ho({attr:ho({},t.attr)},e),rk(t.child))}}function yz(t){var e=function(n){var r=t.attr,i=t.size,s=t.title,a=vz(t,["attr","size","title"]),c=i||n.size||"1em",h;return n.className&&(h=n.className),t.className&&(h=(h?h+" ":"")+t.className),St.createElement("svg",ho({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,a,{className:h,style:ho(ho({color:t.color||n.color},n.style),t.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),s&&St.createElement("title",null,s),t.children)};return ZS!==void 0?St.createElement(ZS.Consumer,null,function(n){return e(n)}):e(nk)}function ik(t){return vr({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"8",r:"7"}},{tag:"polyline",attr:{points:"8.21 13.89 7 23 12 20 17 23 15.79 13.88"}}]})(t)}function wz(t){return vr({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"}}]})(t)}function sk(t){return vr({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"7",height:"7"}},{tag:"rect",attr:{x:"14",y:"3",width:"7",height:"7"}},{tag:"rect",attr:{x:"14",y:"14",width:"7",height:"7"}},{tag:"rect",attr:{x:"3",y:"14",width:"7",height:"7"}}]})(t)}function ok(t){return vr({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"}},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"}},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"}}]})(t)}function Iz(t){return vr({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"}}]})(t)}function Ez(t){return vr({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"5 3 19 12 5 21 5 3"}}]})(t)}function ak(t){return vr({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}},{tag:"polyline",attr:{points:"17 21 17 13 7 13 7 21"}},{tag:"polyline",attr:{points:"7 3 7 8 15 8"}}]})(t)}function lk(t){return vr({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"}},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"}}]})(t)}function uk(t){return vr({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"18",cy:"5",r:"3"}},{tag:"circle",attr:{cx:"6",cy:"12",r:"3"}},{tag:"circle",attr:{cx:"18",cy:"19",r:"3"}},{tag:"line",attr:{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}},{tag:"line",attr:{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"}}]})(t)}function Ao(t){return vr({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"}}]})(t)}function Tz(t){return vr({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"5"}},{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"3"}},{tag:"line",attr:{x1:"12",y1:"21",x2:"12",y2:"23"}},{tag:"line",attr:{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}},{tag:"line",attr:{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}},{tag:"line",attr:{x1:"1",y1:"12",x2:"3",y2:"12"}},{tag:"line",attr:{x1:"21",y1:"12",x2:"23",y2:"12"}},{tag:"line",attr:{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}},{tag:"line",attr:{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"}}]})(t)}function ck(t){return vr({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"}}]})(t)}function Sz(t){return vr({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"}},{tag:"path",attr:{d:"M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"}}]})(t)}function xz(t){return vr({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"}},{tag:"line",attr:{x1:"23",y1:"9",x2:"17",y2:"15"}},{tag:"line",attr:{x1:"17",y1:"9",x2:"23",y2:"15"}}]})(t)}function hk(t){return vr({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"}},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"}}]})(t)}const Cz="modulepreload",Az=function(t){return"/static/project/"+t},e1={},Pz=function(e,n,r){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=Az(s),s in e1)return;e1[s]=!0;const a=s.endsWith(".css"),c=a?'[rel="stylesheet"]':"";if(!!r)for(let _=i.length-1;_>=0;_--){const w=i[_];if(w.href===s&&(!a||w.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${c}`))return;const g=document.createElement("link");if(g.rel=a?"stylesheet":Cz,a||(g.as="script",g.crossOrigin=""),g.href=s,document.head.appendChild(g),a)return new Promise((_,w)=>{g.addEventListener("load",_),g.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s})};function Sg(){return Sg=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Sg.apply(this,arguments)}function bz(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Rz(t){G.useEffect(t,[])}function il(t,e){e===void 0&&(e={});var n=e,r=n.volume,i=r===void 0?1:r,s=n.playbackRate,a=s===void 0?1:s,c=n.soundEnabled,h=c===void 0?!0:c,g=n.interrupt,_=g===void 0?!1:g,w=n.onload,T=bz(n,["id","volume","playbackRate","soundEnabled","interrupt","onload"]),E=St.useRef(null),$=St.useRef(!1),U=St.useState(null),J=U[0],V=U[1],B=St.useState(null),j=B[0],Z=B[1],ne=function(){typeof w=="function"&&w.call(this),$.current&&V(this.duration()*1e3),Z(this)};Rz(function(){return Pz(()=>import("./howler-yPQVcE2J.js").then(me=>me.h),__vite__mapDeps([])).then(function(me){if(!$.current){var tt;E.current=(tt=me.Howl)!==null&&tt!==void 0?tt:me.default.Howl,$.current=!0,new E.current(Sg({src:Array.isArray(t)?t:[t],volume:i,rate:a,onload:ne},T))}}),function(){$.current=!1}}),St.useEffect(function(){E.current&&j&&Z(new E.current(Sg({src:Array.isArray(t)?t:[t],volume:i,onload:ne},T)))},[JSON.stringify(t)]),St.useEffect(function(){j&&(j.volume(i),j.rate(a))},[i,a]);var te=St.useCallback(function(me){typeof me>"u"&&(me={}),!(!j||!h&&!me.forceSoundEnabled)&&(_&&j.stop(),me.playbackRate&&j.rate(me.playbackRate),j.play(me.id))},[j,h,_]),ae=St.useCallback(function(me){j&&j.stop(me)},[j]),ce=St.useCallback(function(me){j&&j.pause(me)},[j]),_e=[te,{sound:j,stop:ae,pause:ce,duration:J}];return _e}const kz="/static/project/assets/star-wql4oqhK.wav",t1="/static/project/assets/button-J_WJeIQM.wav",Nz="/static/project/assets/card-xj0x2Eh2.wav",Dz="/static/project/assets/pop-DwoHE_6m.wav",Oz="/static/project/assets/victory-gnOqf9qL.wav",ci=G.createContext([!0,()=>{}]),Mz=({children:t})=>{const[e,n]=G.useState(!0),[r]=il(kz,{soundEnabled:e}),[i]=il(t1,{soundEnabled:e}),[s]=il(t1,{soundEnabled:e}),[a]=il(Nz,{soundEnabled:e}),[c]=il(Dz,{soundEnabled:e}),[h]=il(Oz,{soundEnabled:e});G.useEffect(()=>{n(window.localStorage.getItem("sound")!=="off")},[]);const g=G.useCallback(()=>{const w=!e;n(w),window.localStorage.setItem("sound",w?"on":"off")},[e]),_=G.useMemo(()=>({soundEnabled:e,toggleSound:g,playButton:i,playToggle:s,playCard:a,playStar:r,playTangram:c,playVictory:h}),[e,g,i,s,a,r,c,h]);return R.jsx(ci.Provider,{value:_,children:t})},uI=Rh("button",({css:t,onClick:e,mute:n,...r})=>{const{playButton:i}=G.useContext(ci);return{css:{borderRadius:2,minWidth:0,minHeight:0,flex:"none",fontFamily:"inherit",fontWeight:"bolder",border:"none",fontSize:"inherit",color:"inherit",background:"none",cursor:"pointer",p:3,"&:disabled":{opacity:.3,cursor:"not-allowed"},"&:focus":{outline:"none"},...t},onClick:s=>{n||i(),e&&e(s)},...r}}),Lz=ns(uI,{css:{border:"2px solid",borderRadius:2}}),Vz=ns(uI,{css:{border:"2px solid",color:"errorText"}}),cr=ns(uI,({css:t,...e})=>({css:{animation:`${Cf({0:{bg:"pieces.lt2"},14:{bg:"pieces.rh"},28:{bg:"pieces.st2"},42:{bg:"pieces.mt1"},57:{bg:"pieces.st1"},71:{bg:"pieces.lt1"},85:{bg:"pieces.sq"},100:{bg:"pieces.lt2"}})} 20s linear infinite both`,color:"#FFFFFFDD",...t},...e})),Xm=({uid:t,size:e="badge",css:n,onClick:r,...i})=>{const{playButton:s}=G.useContext(ci),a=G.useContext(Pi),c=G.useMemo(()=>{const h=Object.values(a.colors.pieces);return h[t.charCodeAt(0)%h.length].slice(1)},[a,t]);return R.jsx(fe,{as:"img",src:`https://api.dicebear.com/7.x/croodles-neutral/svg?seed=${t}&backgroundColor=${encodeURIComponent(c)}`,css:{m:"2px",boxShadow:`0 0 0 2px ${a.colors.dialogText}`,borderRadius:"50%",backgroundColor:c,size:e,...n},onClick:r?h=>{s(),r(h)}:void 0,...i})},Fz=(t,e)=>{const[n,r]=G.useState(null),i=c=>{if(n&&c.touches&&c.touches.length!==1)clearTimeout(n.timeoutId);else{const h=c.touches?c.touches.item(0):c;r({timeoutId:setTimeout(t,e),startEvent:{clientX:h.clientX,clientY:h.clientY}})}},s=c=>{if(!n)return;let h=c.touches?c.touches.item(0):c;Math.sqrt(Math.pow(h.clientX-n.startEvent.clientX,2)+Math.pow(h.clientY-n.startEvent.clientY,2))>10&&clearTimeout(n.timeoutId)},a=()=>{n&&clearTimeout(n.timeoutId)};return{onMouseDown:i,onMouseUp:a,onMouseMove:s,onMouseLeave:a,onTouchStart:i,onTouchEnd:a,onTouchMove:s}},Bz=t=>t.edges>16?0:t.edges>8?1:2,ud=({showStroke:t,tangram:e,completed:n,selected:r,css:i,onBadgeClick:s,onClick:a,onLongPress:c,hideBadge:h,...g})=>{const{path:_,width:w,height:T,uid:E,approved:$,emoji:U}=e,J=G.useMemo(()=>Bz(e),[e]),{playCard:V}=G.useContext(ci),j=G.useContext(Pi).colors.difficulties[J],Z=G.useCallback(()=>{c&&c(e)},[c,e]),ne=Fz(Z,1e3);return R.jsx(fe,{css:i,onClick:a?()=>{V(),a(e)}:void 0,...ne,...g,children:R.jsxs(fe,{css:{opacity:E&&$===!1?.5:1,borderRadius:5,boxShadow:r?`0px 0px 0px 4px ${j}`:"0px 0px 0px 1px rgba(0, 0, 0, 0.1)",m:1,bg:"background",transition:`background-color ${Sf}ms`,p:3,textAlign:"center",position:"relative",cursor:a||c?"pointer":void 0,width:128,height:178},deps:[j,r,E,$],children:[R.jsx(fe,{as:"svg",css:{flex:"1",justifyContent:"center",fill:j,stroke:t?"lime":void 0,strokeWidth:t?8:void 0},deps:[t,j],viewBox:`0 0 ${w} ${T}`,dangerouslySetInnerHTML:{__html:`<path d="${_}" />`}}),n&&R.jsx(fe,{css:{position:"absolute",top:1,left:1,fontSize:"30px"},children:U}),E&&!h&&R.jsx(Xm,{uid:E,css:{position:"absolute",bottom:1,right:1,cursor:s?"pointer":void 0},onClick:s?te=>{te.stopPropagation(),s(E)}:void 0})]})})},rs=({children:t,title:e,onClose:n,big:r,css:i,...s})=>{const{playButton:a}=G.useContext(ci);return l0.createPortal(R.jsx(fe,{onClick:n,css:{position:"fixed",top:0,left:0,right:0,bottom:0,bg:"#00000080",alignItems:"center",justifyContent:"center",animation:`${Xr/2}ms fadeIn ease both`,p:3},children:R.jsxs(fe,{css:{flex:"0 1 auto",bg:"dialogBackground",color:"dialogText",borderRadius:3,transition:`background-color ${Sf}ms, color ${Sf}ms`,fontSize:3,p:3,gap:3,maxWidth:"95vw",width:r?"568px":"400px"},onClick:c=>c.stopPropagation(),children:[R.jsxs(fe,{css:{flexDirection:"row",gap:3,alignItems:"center",justifyContent:"space-between",zIndex:1},children:[e,R.jsx(fe,{as:hk,css:{cursor:"pointer",size:"badge",ml:e?void 0:"auto"},onClick:()=>{a(),n()}})]}),R.jsx(fe,{css:{overflow:"auto",flex:"1",maxWidth:"100%",...i},...s,children:t})]})}),document.getElementById("dialogContainer"))},Xe=Rh("div",{css:{display:"inline",minWidth:0,minHeight:0,flex:"none"}}),br=ns(Xe,{css:{fontSize:2,color:"errorText"}}),ds=ns(Xe,{css:{fontSize:2,opacity:.75}}),Ur=ns(Xe,{css:{fontSize:4,fontWeight:"bolder"}}),sl=ns(Xe,{css:{fontSize:3,fontWeight:"bold"}}),n1=Rh("a",{css:{cursor:"pointer",textDecoration:"underline",color:"inherit","&:visited":{color:"inherit"}}}),Ti=ns(Xe,{css:{cursor:"pointer",textDecoration:"underline"}}),Er=({icon:t,css:e})=>R.jsx(Xe,{as:t,css:{position:"relative",top:"0.1em",size:"0.9em",...e}}),jz=({uid:t,tangrams:e,deferred:n})=>{const r=Zt(),{usersMetadata:i}=G.useContext(Hn);G.useContext(Dr);const s=i[t]?i[t].username:null;return R.jsxs(rs,{big:!0,title:R.jsx(Ur,{children:s?r.formatMessage({id:"{username} challenged you"},{username:s}):r.formatMessage({id:"Rise to the challenge"},{username:s})}),onClose:()=>n.reject(cn),css:{gap:3,overflow:"initial",maxWidth:"568px"},children:[R.jsx(fe,{css:{flex:"1",overflow:"auto",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",m:-1},children:e.map(a=>R.jsx(ud,{selected:!0,tangram:a,css:{m:1}},a.id))}),R.jsx(cr,{onClick:()=>{n.resolve()},children:r.formatMessage({id:"Let's go!"})})]})},Uz=(t,e)=>e.edges===t.edges?e.length-t.length:e.edges-t.edges,zz=(t,e)=>dc.indexOf(t.emoji)-dc.indexOf(e.emoji),$z=(t,e)=>fc.indexOf(t.emoji)-fc.indexOf(e.emoji),fn=Rh("input",{type:"text",css:{color:"inherit",fontFamily:"inherit",fontWeight:"bolder",fontSize:"inherit",bg:"inputBackground",border:"none",borderRadius:2,borderColor:"currentColor",p:2,"&:disabled":{opacity:.5,cursor:"not-allowed"},"&:focus":{outline:"none"}}}),qz=ns(fe,({css:t,...e})=>({css:{p:3,alignItems:"center",position:"sticky",top:0,zIndex:1,background:`linear-gradient(0deg, rgba(0,0,0,0) 0%, ${G.useContext(Pi).colors.dialogBackground} 50%)`,...t},...e})),Hz=({deferred:t})=>{const e=Zt(),{currentUser:n}=G.useContext(Hn),{pendingTangrams:r,approvedTangrams:i}=G.useContext(jo),{showProfile:s,showTangram:a}=G.useContext(dd),{setPlaylist:c,shareTangrams:h,startRandomPlaylist:g,isTangramCompleted:_,isTangramStarred:w}=G.useContext(Dr),[T,E]=G.useState([]),[$,U]=G.useState(()=>{const te=window.localStorage.getItem("selectedGalleryFilter");return["all","uncompleted","starred","pending"].includes(te)?te:"all"}),J=te=>{U(te.target.value),window.localStorage.setItem("selectedGalleryFilter",te.target.value)},V=G.useCallback(te=>{E(ae=>ae.some(ce=>ce.id===te.id)?ae.filter(ce=>ce.id!==te.id):[...ae,te])},[]),B=()=>{T.length?c(T):g(),t.resolve()},j=()=>t.reject(cn),Z=G.useMemo(()=>{const te=$==="pending"?r:i,ae={};for(const _e of te)$==="uncompleted"&&_(_e.id)||$==="starred"&&!w(_e.id)||(ae[_e.category]||(ae[_e.category]=[]),ae[_e.category].push(_e));const ce={};for(const _e of Object.keys(ae).sort())ce[_e]=ae[_e].sort(_e==="letters"?$z:_e==="digits"?zz:Uz);return ce},[r,i,$,_,w]),ne=Object.keys(Z);return R.jsx(R.Fragment,{children:R.jsx(rs,{big:!0,title:R.jsx(Ur,{children:e.formatMessage({id:"Tangram gallery"})}),css:{gap:3,width:"568px"},onClose:j,children:R.jsxs(R.Fragment,{children:[R.jsxs(fn,{as:"select",value:$,onChange:J,children:[R.jsx("option",{value:"all",children:e.formatMessage({id:"All tangrams"})}),R.jsx("option",{value:"uncompleted",children:e.formatMessage({id:"Uncompleted tangrams"})}),R.jsx("option",{value:"starred",children:e.formatMessage({id:"★ Starred tangrams"})}),R.jsx("option",{value:"pending",children:e.formatMessage({id:"Pending approbation tangrams"})})]}),R.jsx(fe,{css:{flex:"1",overflow:"auto",gap:3},children:ne.length===0?R.jsx(fe,{css:{gap:3,alignItems:"center"},children:$==="uncompleted"?R.jsxs(R.Fragment,{children:[R.jsx(Xe,{css:{fontSize:"8em"},children:"🍾"}),R.jsxs(fe,{css:{gap:2,alignItems:"center",px:3},children:[R.jsx(sl,{css:{textAlign:"center"},children:R.jsx(Tt,{id:"You've completed all tangrams"})}),R.jsx(ds,{children:R.jsx(Tt,{id:"Come back later for more or create your own tangrams"})})]})]}):$==="pending"?n&&n.isAdmin?R.jsxs(R.Fragment,{children:[R.jsx(Xe,{css:{fontSize:"8em"},children:"👮"}),R.jsxs(fe,{css:{gap:2,alignItems:"center",px:3},children:[R.jsx(sl,{css:{textAlign:"center"},children:R.jsx(Tt,{id:"No tangram left to approve"})}),R.jsx(ds,{children:R.jsx(Tt,{id:"Good job moderator {username}!",values:{username:n.username}})})]})]}):R.jsxs(R.Fragment,{children:[R.jsx(Xe,{css:{fontSize:"8em"},children:"👍"}),R.jsxs(fe,{css:{gap:2,alignItems:"center",px:3},children:[R.jsx(sl,{css:{textAlign:"center"},children:R.jsx(Tt,{id:"All your tangrams have been approved"})}),R.jsx(ds,{children:R.jsx(Tt,{id:"Create more tangrams and earn <starIcon></starIcon>",values:{starIcon:()=>R.jsx(Er,{icon:Ao,css:{fill:"currentColor"}})}})})]})]}):$==="starred"?R.jsxs(R.Fragment,{children:[R.jsx(Xe,{css:{fontSize:"8em"},children:"🌃"}),R.jsxs(fe,{css:{gap:2,alignItems:"center",px:3},children:[R.jsx(sl,{css:{textAlign:"center"},children:R.jsx(Tt,{id:"No starred tangrams yet"})}),R.jsx(ds,{children:R.jsx(Tt,{id:"Press <starIcon></starIcon> to star a tangram and show your love",values:{starIcon:()=>R.jsx(Er,{icon:Ao,css:{fill:"currentColor"}})}})})]})]}):R.jsxs(R.Fragment,{children:[R.jsx(Xe,{css:{fontSize:"8em"},children:"🤷"}),R.jsxs(fe,{css:{gap:2,alignItems:"center",px:3},children:[R.jsx(sl,{css:{textAlign:"center"},children:R.jsx(Tt,{id:"Nothing to see here"})}),R.jsx(ds,{children:R.jsx(Tt,{id:"Something might have gone wrong"})})]})]})},"noresult"):R.jsx(fe,{css:{flex:"1",overflow:"auto",gap:3},children:ne.map(te=>R.jsxs(fe,{children:[R.jsx(qz,{children:R.jsx(sl,{children:e.formatMessage({id:te})})}),R.jsx(fe,{css:{display:"grid",gridTemplateColumns:"repeat(auto-fill, 136px)",gridColumnGap:2,gridRowGap:2,justifyContent:"center",justifyItems:"center",alignItems:"center"},children:Z[te].map(ae=>R.jsx(ud,{showStroke:$==="pending"&&n&&n.isAdmin,tangram:ae,completed:_(ae.id),selected:T.some(ce=>ce.id===ae.id),onClick:V,onBadgeClick:s,onLongPress:a},ae.id))})]},te))},"results")}),R.jsxs(fe,{css:{flexDirection:"row",gap:2},children:[R.jsx(cr,{onClick:B,css:{flex:"1"},children:T.length===0?e.formatMessage({id:"Play now!"}):T.length===1?e.formatMessage({id:"Start 1 tangram!"}):e.formatMessage({id:"Start {count} tangrams!"},{count:T.length})}),R.jsx(cr,{disabled:T.length===0,onClick:()=>h(T),children:R.jsx(fe,{as:uk,css:{size:"icon",m:"-2px"}})})]})]})})})},Gz=({deferred:t})=>{const e=Zt(),{showProfile:n}=G.useContext(dd),{currentUser:r,usersMetadata:i}=G.useContext(Hn),{approvedTangrams:s}=G.useContext(jo),{tangramsStarredBy:a,tangramsCompletedBy:c}=G.useContext(Dr),[h,g]=G.useState(()=>{const $=window.localStorage.getItem("selectedLeaderboard");return["stars","completed","created"].includes($)?$:"stars"}),_=$=>{g($.target.value),window.localStorage.setItem("selectedLeaderboard",$.target.value)},w=$=>{n($)},T=G.useMemo(()=>{const $={},U={},J={};for(const{id:V,uid:B}of s){U[B]||(U[B]=0,$[B]=0);for(const j in a[V])j!==B&&a[V][j]&&($[B]+=1);U[B]+=1;for(const j in c[V])J[j]||(J[j]=0),J[j]+=1}return Object.keys(i).map(V=>{const B=i[V];return{uid:V,...B,stars:$[V]||0,completed:J[V]||0,created:U[V]||0}})},[s,a,c,i]),E=G.useMemo(()=>{if(T)return T.sort(($,U)=>U[h]-$[h])},[T,h]);return R.jsx(rs,{title:R.jsx(Ur,{children:e.formatMessage({id:"Leaderboard"})}),onClose:()=>t.reject(cn),css:{gap:3},children:R.jsxs(R.Fragment,{children:[R.jsxs(fn,{as:"select",value:h,onChange:_,children:[R.jsx("option",{value:"stars",children:e.formatMessage({id:"Stars earned"})}),R.jsx("option",{value:"completed",children:e.formatMessage({id:"Completed tangrams"})}),R.jsx("option",{value:"created",children:e.formatMessage({id:"Created tangrams"})})]}),R.jsx(fe,{css:{flex:"1",overflow:"auto",gap:2},children:E.map(({uid:$,username:U,...J},V)=>R.jsxs(fe,{css:{flexDirection:"row",gap:2,alignItems:"center",fontSize:V===0?"1.6em":V===1?"1.4em":V===2?"1.2em":void 0},deps:[V],children:[R.jsx(Xm,{uid:$,size:"badge",onClick:()=>w($)}),R.jsx(Xe,{css:{flex:"1",fontWeight:r&&r.uid===$?"bold":void 0},deps:[r,$],children:U}),R.jsxs(Xe,{children:[J[h],h==="stars"&&R.jsxs(R.Fragment,{children:[" ",R.jsx(Er,{icon:Ao,css:{fill:"currentColor"}})]})]})]},$))})]})})};var cd=t=>t.type==="checkbox",bl=t=>t instanceof Date,lr=t=>t==null;const dk=t=>typeof t=="object";var In=t=>!lr(t)&&!Array.isArray(t)&&dk(t)&&!bl(t),Wz=t=>In(t)&&t.target?cd(t.target)?t.target.checked:t.target.value:t,Kz=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,Qz=(t,e)=>t.has(Kz(e)),Yz=t=>{const e=t.constructor&&t.constructor.prototype;return In(e)&&e.hasOwnProperty("isPrototypeOf")},cI=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function as(t){let e;const n=Array.isArray(t);if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(cI&&(t instanceof Blob||t instanceof FileList))&&(n||In(t)))if(e=n?[]:{},!n&&!Yz(t))e=t;else for(const r in t)t.hasOwnProperty(r)&&(e[r]=as(t[r]));else return t;return e}var hd=t=>Array.isArray(t)?t.filter(Boolean):[],un=t=>t===void 0,je=(t,e,n)=>{if(!e||!In(t))return n;const r=hd(e.split(/[,[\].]+?/)).reduce((i,s)=>lr(i)?i:i[s],t);return un(r)||r===t?un(t[e])?n:t[e]:r},Ks=t=>typeof t=="boolean";const r1={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},vi={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},os={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};St.createContext(null);var Xz=(t,e,n,r=!0)=>{const i={defaultValues:e._defaultValues};for(const s in t)Object.defineProperty(i,s,{get:()=>{const a=s;return e._proxyFormState[a]!==vi.all&&(e._proxyFormState[a]=!r||vi.all),n&&(n[a]=!0),t[a]}});return i},Yr=t=>In(t)&&!Object.keys(t).length,Jz=(t,e,n,r)=>{n(t);const{name:i,...s}=t;return Yr(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(a=>e[a]===(!r||vi.all))},Jp=t=>Array.isArray(t)?t:[t];function Zz(t){const e=St.useRef(t);e.current=t,St.useEffect(()=>{const n=!t.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{n&&n.unsubscribe()}},[t.disabled])}var Gi=t=>typeof t=="string",e8=(t,e,n,r,i)=>Gi(t)?(r&&e.watch.add(t),je(n,t,i)):Array.isArray(t)?t.map(s=>(r&&e.watch.add(s),je(n,s))):(r&&(e.watchAll=!0),n),hI=t=>/^\w*$/.test(t),fk=t=>hd(t.replace(/["|']|\]/g,"").split(/\.|\[/));function $t(t,e,n){let r=-1;const i=hI(e)?[e]:fk(e),s=i.length,a=s-1;for(;++r<s;){const c=i[r];let h=n;if(r!==a){const g=t[c];h=In(g)||Array.isArray(g)?g:isNaN(+i[r+1])?{}:[]}t[c]=h,t=t[c]}return t}var t8=(t,e,n,r,i)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:i||!0}}:{},i1=t=>({isOnSubmit:!t||t===vi.onSubmit,isOnBlur:t===vi.onBlur,isOnChange:t===vi.onChange,isOnAll:t===vi.all,isOnTouch:t===vi.onTouched}),s1=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const Ef=(t,e,n,r)=>{for(const i of n||Object.keys(t)){const s=je(t,i);if(s){const{_f:a,...c}=s;if(a){if(a.refs&&a.refs[0]&&e(a.refs[0],i)&&!r)break;if(a.ref&&e(a.ref,a.name)&&!r)break}else In(c)&&Ef(c,e)}}};var n8=(t,e,n)=>{const r=hd(je(t,n));return $t(r,"root",e[n]),$t(t,n,r),t},dI=t=>t.type==="file",Zs=t=>typeof t=="function",xg=t=>{if(!cI)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Tf=t=>Gi(t),fI=t=>t.type==="radio",Cg=t=>t instanceof RegExp;const o1={value:!1,isValid:!1},a1={value:!0,isValid:!0};var gk=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!un(t[0].attributes.value)?un(t[0].value)||t[0].value===""?a1:{value:t[0].value,isValid:!0}:a1:o1}return o1};const l1={isValid:!1,value:null};var mk=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,l1):l1;function u1(t,e,n="validate"){if(Tf(t)||Array.isArray(t)&&t.every(Tf)||Ks(t)&&!t)return{type:n,message:Tf(t)?t:"",ref:e}}var ol=t=>In(t)&&!Cg(t)?t:{value:t,message:""},c1=async(t,e,n,r,i)=>{const{ref:s,refs:a,required:c,maxLength:h,minLength:g,min:_,max:w,pattern:T,validate:E,name:$,valueAsNumber:U,mount:J,disabled:V}=t._f,B=je(e,$);if(!J||V)return{};const j=a?a[0]:s,Z=Le=>{r&&j.reportValidity&&(j.setCustomValidity(Ks(Le)?"":Le||""),j.reportValidity())},ne={},te=fI(s),ae=cd(s),ce=te||ae,_e=(U||dI(s))&&un(s.value)&&un(B)||xg(s)&&s.value===""||B===""||Array.isArray(B)&&!B.length,me=t8.bind(null,$,n,ne),tt=(Le,xe,we,nt=os.maxLength,he=os.minLength)=>{const ot=Le?xe:we;ne[$]={type:Le?nt:he,message:ot,ref:s,...me(Le?nt:he,ot)}};if(i?!Array.isArray(B)||!B.length:c&&(!ce&&(_e||lr(B))||Ks(B)&&!B||ae&&!gk(a).isValid||te&&!mk(a).isValid)){const{value:Le,message:xe}=Tf(c)?{value:!!c,message:c}:ol(c);if(Le&&(ne[$]={type:os.required,message:xe,ref:j,...me(os.required,xe)},!n))return Z(xe),ne}if(!_e&&(!lr(_)||!lr(w))){let Le,xe;const we=ol(w),nt=ol(_);if(!lr(B)&&!isNaN(B)){const he=s.valueAsNumber||B&&+B;lr(we.value)||(Le=he>we.value),lr(nt.value)||(xe=he<nt.value)}else{const he=s.valueAsDate||new Date(B),ot=De=>new Date(new Date().toDateString()+" "+De),Ce=s.type=="time",Te=s.type=="week";Gi(we.value)&&B&&(Le=Ce?ot(B)>ot(we.value):Te?B>we.value:he>new Date(we.value)),Gi(nt.value)&&B&&(xe=Ce?ot(B)<ot(nt.value):Te?B<nt.value:he<new Date(nt.value))}if((Le||xe)&&(tt(!!Le,we.message,nt.message,os.max,os.min),!n))return Z(ne[$].message),ne}if((h||g)&&!_e&&(Gi(B)||i&&Array.isArray(B))){const Le=ol(h),xe=ol(g),we=!lr(Le.value)&&B.length>+Le.value,nt=!lr(xe.value)&&B.length<+xe.value;if((we||nt)&&(tt(we,Le.message,xe.message),!n))return Z(ne[$].message),ne}if(T&&!_e&&Gi(B)){const{value:Le,message:xe}=ol(T);if(Cg(Le)&&!B.match(Le)&&(ne[$]={type:os.pattern,message:xe,ref:s,...me(os.pattern,xe)},!n))return Z(xe),ne}if(E){if(Zs(E)){const Le=await E(B,e),xe=u1(Le,j);if(xe&&(ne[$]={...xe,...me(os.validate,xe.message)},!n))return Z(xe.message),ne}else if(In(E)){let Le={};for(const xe in E){if(!Yr(Le)&&!n)break;const we=u1(await E[xe](B,e),j,xe);we&&(Le={...we,...me(xe,we.message)},Z(we.message),n&&(ne[$]=Le))}if(!Yr(Le)&&(ne[$]={ref:j,...Le},!n))return ne}}return Z(!0),ne};function r8(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=un(t)?r++:t[e[r++]];return t}function i8(t){for(const e in t)if(t.hasOwnProperty(e)&&!un(t[e]))return!1;return!0}function Mn(t,e){const n=Array.isArray(e)?e:hI(e)?[e]:fk(e),r=n.length===1?t:r8(t,n),i=n.length-1,s=n[i];return r&&delete r[s],i!==0&&(In(r)&&Yr(r)||Array.isArray(r)&&i8(r))&&Mn(t,n.slice(0,-1)),t}function Zp(){let t=[];return{get observers(){return t},next:i=>{for(const s of t)s.next&&s.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(s=>s!==i)}}),unsubscribe:()=>{t=[]}}}var Ag=t=>lr(t)||!dk(t);function fa(t,e){if(Ag(t)||Ag(e))return t===e;if(bl(t)&&bl(e))return t.getTime()===e.getTime();const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const i of n){const s=t[i];if(!r.includes(i))return!1;if(i!=="ref"){const a=e[i];if(bl(s)&&bl(a)||In(s)&&In(a)||Array.isArray(s)&&Array.isArray(a)?!fa(s,a):s!==a)return!1}}return!0}var pk=t=>t.type==="select-multiple",s8=t=>fI(t)||cd(t),e_=t=>xg(t)&&t.isConnected,_k=t=>{for(const e in t)if(Zs(t[e]))return!0;return!1};function Pg(t,e={}){const n=Array.isArray(t);if(In(t)||n)for(const r in t)Array.isArray(t[r])||In(t[r])&&!_k(t[r])?(e[r]=Array.isArray(t[r])?[]:{},Pg(t[r],e[r])):lr(t[r])||(e[r]=!0);return e}function vk(t,e,n){const r=Array.isArray(t);if(In(t)||r)for(const i in t)Array.isArray(t[i])||In(t[i])&&!_k(t[i])?un(e)||Ag(n[i])?n[i]=Array.isArray(t[i])?Pg(t[i],[]):{...Pg(t[i])}:vk(t[i],lr(e)?{}:e[i],n[i]):n[i]=!fa(t[i],e[i]);return n}var t_=(t,e)=>vk(t,e,Pg(e)),yk=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>un(t)?t:e?t===""?NaN:t&&+t:n&&Gi(t)?new Date(t):r?r(t):t;function n_(t){const e=t.ref;if(!(t.refs?t.refs.every(n=>n.disabled):e.disabled))return dI(e)?e.files:fI(e)?mk(t.refs).value:pk(e)?[...e.selectedOptions].map(({value:n})=>n):cd(e)?gk(t.refs).value:yk(un(e.value)?t.ref.value:e.value,t)}var o8=(t,e,n,r)=>{const i={};for(const s of t){const a=je(e,s);a&&$t(i,s,a._f)}return{criteriaMode:n,names:[...t],fields:i,shouldUseNativeValidation:r}},Xu=t=>un(t)?t:Cg(t)?t.source:In(t)?Cg(t.value)?t.value.source:t.value:t,a8=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate);function h1(t,e,n){const r=je(t,n);if(r||hI(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const s=i.join("."),a=je(e,s),c=je(t,s);if(a&&!Array.isArray(a)&&n!==s)return{name:n};if(c&&c.type)return{name:s,error:c};i.pop()}return{name:n}}var l8=(t,e,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(e||t):(n?r.isOnBlur:i.isOnBlur)?!t:(n?r.isOnChange:i.isOnChange)?t:!0,u8=(t,e)=>!hd(je(t,e)).length&&Mn(t,e);const c8={mode:vi.onSubmit,reValidateMode:vi.onChange,shouldFocusError:!0};function h8(t={},e){let n={...c8,...t},r={submitCount:0,isDirty:!1,isLoading:Zs(n.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:{},disabled:!1},i={},s=In(n.defaultValues)||In(n.values)?as(n.defaultValues||n.values)||{}:{},a=n.shouldUnregister?{}:as(s),c={action:!1,mount:!1,watch:!1},h={mount:new Set,unMount:new Set,array:new Set,watch:new Set},g,_=0;const w={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},T={values:Zp(),array:Zp(),state:Zp()},E=t.resetOptions&&t.resetOptions.keepDirtyValues,$=i1(n.mode),U=i1(n.reValidateMode),J=n.criteriaMode===vi.all,V=X=>ie=>{clearTimeout(_),_=setTimeout(X,ie)},B=async X=>{if(w.isValid||X){const ie=n.resolver?Yr((await _e()).errors):await tt(i,!0);ie!==r.isValid&&T.state.next({isValid:ie})}},j=X=>w.isValidating&&T.state.next({isValidating:X}),Z=(X,ie=[],ge,Ae,Re=!0,de=!0)=>{if(Ae&&ge){if(c.action=!0,de&&Array.isArray(je(i,X))){const o=ge(je(i,X),Ae.argA,Ae.argB);Re&&$t(i,X,o)}if(de&&Array.isArray(je(r.errors,X))){const o=ge(je(r.errors,X),Ae.argA,Ae.argB);Re&&$t(r.errors,X,o),u8(r.errors,X)}if(w.touchedFields&&de&&Array.isArray(je(r.touchedFields,X))){const o=ge(je(r.touchedFields,X),Ae.argA,Ae.argB);Re&&$t(r.touchedFields,X,o)}w.dirtyFields&&(r.dirtyFields=t_(s,a)),T.state.next({name:X,isDirty:xe(X,ie),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else $t(a,X,ie)},ne=(X,ie)=>{$t(r.errors,X,ie),T.state.next({errors:r.errors})},te=(X,ie,ge,Ae)=>{const Re=je(i,X);if(Re){const de=je(a,X,un(ge)?je(s,X):ge);un(de)||Ae&&Ae.defaultChecked||ie?$t(a,X,ie?de:n_(Re._f)):he(X,de),c.mount&&B()}},ae=(X,ie,ge,Ae,Re)=>{let de=!1,o=!1;const l={name:X};if(!ge||Ae){w.isDirty&&(o=r.isDirty,r.isDirty=l.isDirty=xe(),de=o!==l.isDirty);const u=fa(je(s,X),ie);o=je(r.dirtyFields,X),u?Mn(r.dirtyFields,X):$t(r.dirtyFields,X,!0),l.dirtyFields=r.dirtyFields,de=de||w.dirtyFields&&o!==!u}if(ge){const u=je(r.touchedFields,X);u||($t(r.touchedFields,X,ge),l.touchedFields=r.touchedFields,de=de||w.touchedFields&&u!==ge)}return de&&Re&&T.state.next(l),de?l:{}},ce=(X,ie,ge,Ae)=>{const Re=je(r.errors,X),de=w.isValid&&Ks(ie)&&r.isValid!==ie;if(t.delayError&&ge?(g=V(()=>ne(X,ge)),g(t.delayError)):(clearTimeout(_),g=null,ge?$t(r.errors,X,ge):Mn(r.errors,X)),(ge?!fa(Re,ge):Re)||!Yr(Ae)||de){const o={...Ae,...de&&Ks(ie)?{isValid:ie}:{},errors:r.errors,name:X};r={...r,...o},T.state.next(o)}j(!1)},_e=async X=>n.resolver(a,n.context,o8(X||h.mount,i,n.criteriaMode,n.shouldUseNativeValidation)),me=async X=>{const{errors:ie}=await _e(X);if(X)for(const ge of X){const Ae=je(ie,ge);Ae?$t(r.errors,ge,Ae):Mn(r.errors,ge)}else r.errors=ie;return ie},tt=async(X,ie,ge={valid:!0})=>{for(const Ae in X){const Re=X[Ae];if(Re){const{_f:de,...o}=Re;if(de){const l=h.array.has(de.name),u=await c1(Re,a,J,n.shouldUseNativeValidation&&!ie,l);if(u[de.name]&&(ge.valid=!1,ie))break;!ie&&(je(u,de.name)?l?n8(r.errors,u,de.name):$t(r.errors,de.name,u[de.name]):Mn(r.errors,de.name))}o&&await tt(o,ie,ge)}}return ge.valid},Le=()=>{for(const X of h.unMount){const ie=je(i,X);ie&&(ie._f.refs?ie._f.refs.every(ge=>!e_(ge)):!e_(ie._f.ref))&&En(X)}h.unMount=new Set},xe=(X,ie)=>(X&&ie&&$t(a,X,ie),!fa(It(),s)),we=(X,ie,ge)=>e8(X,h,{...c.mount?a:un(ie)?s:Gi(X)?{[X]:ie}:ie},ge,ie),nt=X=>hd(je(c.mount?a:s,X,t.shouldUnregister?je(s,X,[]):[])),he=(X,ie,ge={})=>{const Ae=je(i,X);let Re=ie;if(Ae){const de=Ae._f;de&&(!de.disabled&&$t(a,X,yk(ie,de)),Re=xg(de.ref)&&lr(ie)?"":ie,pk(de.ref)?[...de.ref.options].forEach(o=>o.selected=Re.includes(o.value)):de.refs?cd(de.ref)?de.refs.length>1?de.refs.forEach(o=>(!o.defaultChecked||!o.disabled)&&(o.checked=Array.isArray(Re)?!!Re.find(l=>l===o.value):Re===o.value)):de.refs[0]&&(de.refs[0].checked=!!Re):de.refs.forEach(o=>o.checked=o.value===Re):dI(de.ref)?de.ref.value="":(de.ref.value=Re,de.ref.type||T.values.next({name:X,values:{...a}})))}(ge.shouldDirty||ge.shouldTouch)&&ae(X,Re,ge.shouldTouch,ge.shouldDirty,!0),ge.shouldValidate&&Ye(X)},ot=(X,ie,ge)=>{for(const Ae in ie){const Re=ie[Ae],de=`${X}.${Ae}`,o=je(i,de);(h.array.has(X)||!Ag(Re)||o&&!o._f)&&!bl(Re)?ot(de,Re,ge):he(de,Re,ge)}},Ce=(X,ie,ge={})=>{const Ae=je(i,X),Re=h.array.has(X),de=as(ie);$t(a,X,de),Re?(T.array.next({name:X,values:{...a}}),(w.isDirty||w.dirtyFields)&&ge.shouldDirty&&T.state.next({name:X,dirtyFields:t_(s,a),isDirty:xe(X,de)})):Ae&&!Ae._f&&!lr(de)?ot(X,de,ge):he(X,de,ge),s1(X,h)&&T.state.next({...r}),T.values.next({name:X,values:{...a}}),!c.mount&&e()},Te=async X=>{const ie=X.target;let ge=ie.name,Ae=!0;const Re=je(i,ge),de=()=>ie.type?n_(Re._f):Wz(X),o=l=>{Ae=Number.isNaN(l)||l===je(a,ge,l)};if(Re){let l,u;const d=de(),f=X.type===r1.BLUR||X.type===r1.FOCUS_OUT,m=!a8(Re._f)&&!n.resolver&&!je(r.errors,ge)&&!Re._f.deps||l8(f,je(r.touchedFields,ge),r.isSubmitted,U,$),v=s1(ge,h,f);$t(a,ge,d),f?(Re._f.onBlur&&Re._f.onBlur(X),g&&g(0)):Re._f.onChange&&Re._f.onChange(X);const p=ae(ge,d,f,!1),y=!Yr(p)||v;if(!f&&T.values.next({name:ge,type:X.type,values:{...a}}),m)return w.isValid&&B(),y&&T.state.next({name:ge,...v?{}:p});if(!f&&v&&T.state.next({...r}),j(!0),n.resolver){const{errors:I}=await _e([ge]);if(o(d),Ae){const A=h1(r.errors,i,ge),P=h1(I,i,A.name||ge);l=P.error,ge=P.name,u=Yr(I)}}else l=(await c1(Re,a,J,n.shouldUseNativeValidation))[ge],o(d),Ae&&(l?u=!1:w.isValid&&(u=await tt(i,!0)));Ae&&(Re._f.deps&&Ye(Re._f.deps),ce(ge,u,l,p))}},De=(X,ie)=>{if(je(r.errors,ie)&&X.focus)return X.focus(),1},Ye=async(X,ie={})=>{let ge,Ae;const Re=Jp(X);if(j(!0),n.resolver){const de=await me(un(X)?X:Re);ge=Yr(de),Ae=X?!Re.some(o=>je(de,o)):ge}else X?(Ae=(await Promise.all(Re.map(async de=>{const o=je(i,de);return await tt(o&&o._f?{[de]:o}:o)}))).every(Boolean),!(!Ae&&!r.isValid)&&B()):Ae=ge=await tt(i);return T.state.next({...!Gi(X)||w.isValid&&ge!==r.isValid?{}:{name:X},...n.resolver||!X?{isValid:ge}:{},errors:r.errors,isValidating:!1}),ie.shouldFocus&&!Ae&&Ef(i,De,X?Re:h.mount),Ae},It=X=>{const ie={...s,...c.mount?a:{}};return un(X)?ie:Gi(X)?je(ie,X):X.map(ge=>je(ie,ge))},it=(X,ie)=>({invalid:!!je((ie||r).errors,X),isDirty:!!je((ie||r).dirtyFields,X),isTouched:!!je((ie||r).touchedFields,X),error:je((ie||r).errors,X)}),Mt=X=>{X&&Jp(X).forEach(ie=>Mn(r.errors,ie)),T.state.next({errors:X?r.errors:{}})},Qe=(X,ie,ge)=>{const Ae=(je(i,X,{_f:{}})._f||{}).ref;$t(r.errors,X,{...ie,ref:Ae}),T.state.next({name:X,errors:r.errors,isValid:!1}),ge&&ge.shouldFocus&&Ae&&Ae.focus&&Ae.focus()},ln=(X,ie)=>Zs(X)?T.values.subscribe({next:ge=>X(we(void 0,ie),ge)}):we(X,ie,!0),En=(X,ie={})=>{for(const ge of X?Jp(X):h.mount)h.mount.delete(ge),h.array.delete(ge),ie.keepValue||(Mn(i,ge),Mn(a,ge)),!ie.keepError&&Mn(r.errors,ge),!ie.keepDirty&&Mn(r.dirtyFields,ge),!ie.keepTouched&&Mn(r.touchedFields,ge),!n.shouldUnregister&&!ie.keepDefaultValue&&Mn(s,ge);T.values.next({values:{...a}}),T.state.next({...r,...ie.keepDirty?{isDirty:xe()}:{}}),!ie.keepIsValid&&B()},is=({disabled:X,name:ie,field:ge,fields:Ae,value:Re})=>{if(Ks(X)){const de=X?void 0:un(Re)?n_(ge?ge._f:je(Ae,ie)._f):Re;$t(a,ie,de),ae(ie,de,!1,!1,!0)}},bt=(X,ie={})=>{let ge=je(i,X);const Ae=Ks(ie.disabled);return $t(i,X,{...ge||{},_f:{...ge&&ge._f?ge._f:{ref:{name:X}},name:X,mount:!0,...ie}}),h.mount.add(X),ge?is({field:ge,disabled:ie.disabled,name:X}):te(X,!0,ie.value),{...Ae?{disabled:ie.disabled}:{},...n.progressive?{required:!!ie.required,min:Xu(ie.min),max:Xu(ie.max),minLength:Xu(ie.minLength),maxLength:Xu(ie.maxLength),pattern:Xu(ie.pattern)}:{},name:X,onChange:Te,onBlur:Te,ref:Re=>{if(Re){bt(X,ie),ge=je(i,X);const de=un(Re.value)&&Re.querySelectorAll&&Re.querySelectorAll("input,select,textarea")[0]||Re,o=s8(de),l=ge._f.refs||[];if(o?l.find(u=>u===de):de===ge._f.ref)return;$t(i,X,{_f:{...ge._f,...o?{refs:[...l.filter(e_),de,...Array.isArray(je(s,X))?[{}]:[]],ref:{type:de.type,name:X}}:{ref:de}}}),te(X,!1,void 0,de)}else ge=je(i,X,{}),ge._f&&(ge._f.mount=!1),(n.shouldUnregister||ie.shouldUnregister)&&!(Qz(h.array,X)&&c.action)&&h.unMount.add(X)}}},zt=()=>n.shouldFocusError&&Ef(i,De,h.mount),kt=X=>{Ks(X)&&(T.state.next({disabled:X}),Ef(i,ie=>{ie.disabled=X},0,!1))},Uo=(X,ie)=>async ge=>{ge&&(ge.preventDefault&&ge.preventDefault(),ge.persist&&ge.persist());let Ae=as(a);if(T.state.next({isSubmitting:!0}),n.resolver){const{errors:Re,values:de}=await _e();r.errors=Re,Ae=de}else await tt(i);Mn(r.errors,"root"),Yr(r.errors)?(T.state.next({errors:{}}),await X(Ae,ge)):(ie&&await ie({...r.errors},ge),zt(),setTimeout(zt)),T.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Yr(r.errors),submitCount:r.submitCount+1,errors:r.errors})},nr=(X,ie={})=>{je(i,X)&&(un(ie.defaultValue)?Ce(X,je(s,X)):(Ce(X,ie.defaultValue),$t(s,X,ie.defaultValue)),ie.keepTouched||Mn(r.touchedFields,X),ie.keepDirty||(Mn(r.dirtyFields,X),r.isDirty=ie.defaultValue?xe(X,je(s,X)):xe()),ie.keepError||(Mn(r.errors,X),w.isValid&&B()),T.state.next({...r}))},Kr=(X,ie={})=>{const ge=X?as(X):s,Ae=as(ge),Re=X&&!Yr(X)?Ae:s;if(ie.keepDefaultValues||(s=ge),!ie.keepValues){if(ie.keepDirtyValues||E)for(const de of h.mount)je(r.dirtyFields,de)?$t(Re,de,je(a,de)):Ce(de,je(Re,de));else{if(cI&&un(X))for(const de of h.mount){const o=je(i,de);if(o&&o._f){const l=Array.isArray(o._f.refs)?o._f.refs[0]:o._f.ref;if(xg(l)){const u=l.closest("form");if(u){u.reset();break}}}}i={}}a=t.shouldUnregister?ie.keepDefaultValues?as(s):{}:as(Re),T.array.next({values:{...Re}}),T.values.next({values:{...Re}})}h={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!c.mount&&e(),c.mount=!w.isValid||!!ie.keepIsValid,c.watch=!!t.shouldUnregister,T.state.next({submitCount:ie.keepSubmitCount?r.submitCount:0,isDirty:ie.keepDirty?r.isDirty:!!(ie.keepDefaultValues&&!fa(X,s)),isSubmitted:ie.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:ie.keepDirtyValues?r.dirtyFields:ie.keepDefaultValues&&X?t_(s,X):{},touchedFields:ie.keepTouched?r.touchedFields:{},errors:ie.keepErrors?r.errors:{},isSubmitSuccessful:ie.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},Qr=(X,ie)=>Kr(Zs(X)?X(a):X,ie);return{control:{register:bt,unregister:En,getFieldState:it,handleSubmit:Uo,setError:Qe,_executeSchema:_e,_getWatch:we,_getDirty:xe,_updateValid:B,_removeUnmounted:Le,_updateFieldArray:Z,_updateDisabledField:is,_getFieldArray:nt,_reset:Kr,_resetDefaultValues:()=>Zs(n.defaultValues)&&n.defaultValues().then(X=>{Qr(X,n.resetOptions),T.state.next({isLoading:!1})}),_updateFormState:X=>{r={...r,...X}},_disableForm:kt,_subjects:T,_proxyFormState:w,get _fields(){return i},get _formValues(){return a},get _state(){return c},set _state(X){c=X},get _defaultValues(){return s},get _names(){return h},set _names(X){h=X},get _formState(){return r},set _formState(X){r=X},get _options(){return n},set _options(X){n={...n,...X}}},trigger:Ye,register:bt,handleSubmit:Uo,watch:ln,setValue:Ce,getValues:It,reset:Qr,resetField:nr,clearErrors:Mt,unregister:En,setError:Qe,setFocus:(X,ie={})=>{const ge=je(i,X),Ae=ge&&ge._f;if(Ae){const Re=Ae.refs?Ae.refs[0]:Ae.ref;Re.focus&&(Re.focus(),ie.shouldSelect&&Re.select())}},getFieldState:it}}function Ya(t={}){const e=St.useRef(),n=St.useRef(),[r,i]=St.useState({isDirty:!1,isValidating:!1,isLoading:Zs(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:{},disabled:!1,defaultValues:Zs(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...h8(t,()=>i(a=>({...a}))),formState:r});const s=e.current.control;return s._options=t,Zz({subject:s._subjects.state,next:a=>{Jz(a,s._proxyFormState,s._updateFormState,!0)&&i({...s._formState})}}),St.useEffect(()=>s._disableForm(t.disabled),[s,t.disabled]),St.useEffect(()=>{if(s._proxyFormState.isDirty){const a=s._getDirty();a!==r.isDirty&&s._subjects.state.next({isDirty:a})}},[s,r.isDirty]),St.useEffect(()=>{t.values&&!fa(t.values,n.current)?(s._reset(t.values,s._options.resetOptions),n.current=t.values):s._resetDefaultValues()},[t.values,s]),St.useEffect(()=>{s._state.mount||(s._updateValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),e.current.formState=Xz(r,s),e.current}const d8=({setTab:t})=>{const e=Zt(),n=G.useContext(ui),{handleSubmit:r,register:i,setError:s,formState:a}=Ya(),c=G.useCallback(async({email:h})=>{try{await Ft.auth().sendPasswordResetEmail(h),t("signin"),n(e.formatMessage({id:"Reset password email sent"}))}catch(g){switch(g.code){case"auth/invalid-email":case"auth/user-not-found":case"auth/user-disabled":s("email",{type:"invalid",message:e.formatMessage({id:"Unknown email address"})});break;default:n(e.formatMessage({id:"An error occured, please retry later"},{email:h}))}}},[s,e,n,t]);return R.jsxs(fe,{as:"form",name:"reset",onSubmit:r(c),css:{gap:4},children:[R.jsxs(fe,{css:{gap:2},children:[R.jsx("label",{children:e.formatMessage({id:"Email address"})}),R.jsx(fn,{type:"email",...i("email",{required:e.formatMessage({id:"Email address is required"})})}),a.errors.email&&R.jsx(br,{children:a.errors.email.message})]}),R.jsxs(fe,{css:{gap:3},children:[R.jsx(cr,{type:"submit",disabled:a.isSubmitting,children:e.formatMessage({id:"Send the reset mail!"})}),R.jsx(fe,{css:{alignItems:"center"},children:R.jsx(Ti,{onClick:()=>t("signin"),children:e.formatMessage({id:"Back"})})})]})]})},f8=({onSignUp:t,setTab:e})=>{const n=Zt(),{handleSubmit:r,register:i,watch:s,setError:a,formState:c}=Ya(),h=s("password"),g=G.useCallback(async({email:_,username:w,password:T})=>{try{const{user:E}=await Ft.auth().createUserWithEmailAndPassword(_,T),$={username:w,signupDate:Date.now()};await Ft.firestore().collection("users").doc(E.uid).set($),t({uid:E.uid,...$,firebaseUser:E})}catch(E){switch(E.code){case"auth/weak-password":a("password",{type:"weakPassword",message:n.formatMessage({id:"Password is too weak"})});break;case"auth/email-already-in-use":a("email",{type:"alreadyExists",message:n.formatMessage({id:"Email address already in use"})});break;case"auth/invalid-email":a("email",{type:"invalid",message:n.formatMessage({id:"Invalid email address"})});break;default:return}}},[t,a,n]);return R.jsxs(fe,{as:"form",name:"signup",autoComplete:"off",onSubmit:r(g),css:{gap:4},children:[R.jsxs(fe,{css:{gap:3},children:[R.jsxs(fe,{css:{gap:2},children:[R.jsx("label",{children:n.formatMessage({id:"Username"})}),R.jsx(fn,{...i("username",{required:n.formatMessage({id:"Username is required"})})}),c.errors.username&&R.jsx(br,{children:c.errors.username.message})]}),R.jsxs(fe,{css:{gap:2},children:[R.jsx("label",{children:n.formatMessage({id:"Email address"})}),R.jsx(fn,{type:"email",...i("email",{required:n.formatMessage({id:"Email address is required"})})}),c.errors.email&&R.jsx(br,{children:c.errors.email.message})]}),R.jsxs(fe,{css:{gap:2},children:[R.jsx("label",{children:n.formatMessage({id:"Password"})}),R.jsx(fn,{autoComplete:"new-password",type:"password",...i("password",{required:n.formatMessage({id:"Password is required"})})}),c.errors.password&&R.jsx(br,{children:c.errors.password.message})]}),R.jsxs(fe,{css:{gap:2},children:[R.jsx("label",{children:n.formatMessage({id:"Confirm password"})}),R.jsx(fn,{autoComplete:"off",type:"password",...i("passwordConfirm",{required:"Password is required",validate:_=>_===h||n.formatMessage({id:"Passwords must match"})})}),c.errors.passwordConfirm&&R.jsx(br,{children:c.errors.passwordConfirm.message})]})]}),R.jsxs(fe,{css:{gap:3},children:[R.jsx(cr,{disabled:c.isSubmitting,type:"submit",children:n.formatMessage({id:"Sign me up!"})}),R.jsx(fe,{css:{alignItems:"center"},children:R.jsx(Ti,{onClick:()=>e("signin"),children:n.formatMessage({id:"I already have an account"})})})]})]})},g8=({onSignIn:t,setTab:e})=>{const n=Zt(),{handleSubmit:r,register:i,setError:s,formState:a}=Ya(),c=G.useCallback(async({email:h,password:g})=>{try{const{user:_}=await Ft.auth().signInWithEmailAndPassword(h,g),T=(await Ft.firestore().collection("users").doc(_.uid).get()).data();t({uid:_.uid,...T,firebaseUser:_})}catch(_){switch(_.code){case"auth/invalid-email":case"auth/user-not-found":case"auth/user-disabled":s("email",{type:"invalid",message:n.formatMessage({id:"Unknown email address"})});break;case"auth/wrong-password":s("password",{type:"mismatch",message:n.formatMessage({id:"Incorrect password"})});break;default:return}}},[t,s,n]);return R.jsxs(fe,{as:"form",name:"signin",onSubmit:r(c),css:{gap:4},children:[R.jsxs(fe,{css:{gap:3},children:[R.jsxs(fe,{css:{gap:2},children:[R.jsx("label",{children:n.formatMessage({id:"Email address"})}),R.jsx(fn,{type:"email",...i("email",{required:n.formatMessage({id:"Email address is required"})})}),a.errors.email&&R.jsx(br,{children:a.errors.email.message})]}),R.jsxs(fe,{css:{gap:2},children:[R.jsx("label",{children:n.formatMessage({id:"Password"})}),R.jsx(fn,{type:"password",...i("password",{required:n.formatMessage({id:"Password is required"})})}),a.errors.password&&R.jsx(br,{children:a.errors.password.message}),R.jsx(Ti,{css:{alignSelf:"flex-end",fontSize:2},onClick:()=>e("reset"),children:n.formatMessage({id:"Forgot password?"})})]})]}),R.jsxs(fe,{css:{gap:3},children:[R.jsx(cr,{type:"submit",disabled:a.isSubmitting,children:n.formatMessage({id:"Sign me in!"})}),R.jsx(fe,{css:{alignItems:"center"},children:R.jsx(Ti,{onClick:()=>e("signup"),children:n.formatMessage({id:"I don't have an account"})})})]})]})},m8=({deferred:t})=>{const e=Zt(),n=G.useContext(ui),[r,i]=G.useState("signup"),s=a=>{t.resolve(a),n(e.formatMessage({id:"Logged in as {username}"},{username:a.username}))};return R.jsx(rs,{title:r==="signup"?R.jsx(Ur,{children:e.formatMessage({id:"Create your account"})}):r==="signin"?R.jsx(Ur,{children:e.formatMessage({id:"Connect to your account"})}):R.jsx(Ur,{children:e.formatMessage({id:"Reset your password"})}),onClose:()=>t.reject(cn),children:r==="signup"?R.jsx(f8,{onSignUp:s,setTab:i}):r==="signin"?R.jsx(g8,{onSignIn:s,setTab:i}):R.jsx(d8,{setTab:i})})},p8={Amstangram:"Amstangram",Language:"Language",en:"English",fr:"French",Theme:"Theme","Logged in as {username}":"Logged in as {username}",Settings:"Settings",Difficulty:"Difficulty",Easy:"Easy",Hard:"Hard","Tangram approved":"Tangram approved","You can't save an invalid tangram":"You can't save an invalid tangram","You can't save such an easy tangram":"You can't save such an easy tangram","Tangram submitted for review":"Tangram submitted for review","Logged out":"Logged out","Tangram gallery":"Tangram gallery","All tangrams":"All tangrams","Uncompleted tangrams":"Uncompleted tangrams","★ Starred tangrams":"★ Starred tangrams","Pending approbation tangrams":"Pending approbation tangrams","You've completed all tangrams":"You've completed all tangrams","Come back later for more or create your own tangrams":"Come back later for more or create your own tangrams","No tangram left to approve":"No tangram left to approve","Good job moderator {username}!":"Good job moderator {username}!","All your tangrams have been approved":"All your tangrams have been approved","Create more tangrams and earn <starIcon></starIcon>":"Create more tangrams and earn <starIcon></starIcon>","No starred tangrams yet":"No starred tangrams yet","Press <starIcon></starIcon> to star a tangram and show your love":"Press <starIcon></starIcon> to star a tangram and show your love","Nothing to see here":"Nothing to see here","Something might have gone wrong":"Something might have gone wrong","Play now!":"Play now !","Start 1 tangram!":"Start 1 tangram !","Start {count} tangrams!":"Start {count} tangrams !","Password is too weak":"Password is too weak","Email address already in use":"Email address already in use","Invalid email address":"Invalid email address","Email address":"Email address","Email address is required":"Email address is required",Username:"Username","Username is required":"Username is required",Password:"Password","Password is required":"Password is required","Confirm password":"Confirm password","Passwords must match":"Passwords must match","Sign me up!":"Sign me up!","I already have an account":"I already have an account","Unknown email address":"Unknown email address","Incorrect password":"Incorrect password","Sign me in!":"Sign me in!","I don't have an account":"I don't have an account","Create your account":"Create your account","Connect to your account":"Connect to your account","A moderator will have to approve your tangram. It can be deleted or edited at any time.":"A moderator will have to approve your tangram.<br></br>It can be deleted or edited at any time.","Submit your tangram":"Submit your tangram","Edit your tangram":"Edit your tangram",Path:"Path","Invalid path":"Invalid path",Category:"Category","Victory emoji":"Victory emoji","Leave empty for random emoji":"Leave empty for random emoji",Order:"Order","Submit!":"Submit!","Edit!":"Edit!","Or delete tangram":"Or delete tangram",animals:"Animals",geometric:"Geometric",digits:"Digits",letters:"Alphabet",people:"People",stuff:"Stuff","Joined {signupDate}":"Joined {signupDate}","Log out":"Log out","Are you sure you want to log out?":"Are you sure you want to log out?","Change email address":"Change email address","Change username":"Change username","Change password":"Change password",Back:"Back","Confirm new password":"Confirm new password","New password":"New password","Current password":"Current password","Password changed successfuly":"Password changed successfuly","New username":"New username","Username updated successfuly":"Username updated successfuly","Email address updated successfuly":"Email address updated successfuly","New email address":"New email address","An error occured, please retry later":"An error occured, please retry later",Sounds:"Sounds","Are you sure you want to delete this tangram?":"Are you sure you want to delete this tangram?","Tangram deleted successfuly":"Tangram deleted successfuly","Tangram modified successfuly":"Tangram modified successfuly","Challenge link copied to clipboard":"Challenge link copied to clipboard","{username} challenged you":"{username} challenged you","Rise to the challenge":"Rise to the challenge","Let's go!":"Let's go!",Leaderboard:"Leaderboard","Completed {completed}/{total} tangrams":"Completed {completed}/{total} tangrams","Created {created} tangrams":"Created {created} tangrams","Earned {stars}":"Earned {stars} <starIcon></starIcon>","Stars earned":"Stars earned","Completed tangrams":"Completed tangrams","Created tangrams":"Created tangrams","Random tip":"Random tip","Got it!":"Got it!","Welcome to Amstangram":"Welcome to Amstangram","tips.welcome":"Reproduce the black shape by moving the pieces, you can rotate a piece by pressing it.<br></br><br></br>Have fun !","tips.menu":"You can access the tangram gallery {galleryIcon}, settings {settingsIcon} and more by pressing {menuIcon}","tips.account1":"You can create an account by pressing {accountIcon} in the menu {menuIcon}","tips.account2":"Signup in order to save your progression and create your very own tangrams","tips.gallery":"You can create your own tangram playlist by selecting tangrams in the gallery {galleryIcon}","tips.share":"You can share playlist with your friends by pressing {shareIcon} in the gallery {galleryIcon}","tips.create":"You can create your own tangrams by pressing {createIcon} in the menu {menuIcon}","tips.stars":"Did you liked this tangram?<br></br>Give a star to its creator by pressing {starIcon}","tips.difficulty":"Having it too easy?<br></br>You can change difficulty by pressing {settingsIcon} in the menu {menuIcon}","tips.theme":"Too bright for your eyes?<br></br>You can toggle dark mode by pressing {settingsIcon} in the menu {menuIcon}","tips.sound":"Too much noise?<br></br>You can disable sounds by pressing {settingsIcon} in the menu {menuIcon}","tips.card":"You can acces tangram details or edit your own tangrams by long pressing a card in the gallery {galleryIcon}","tips.leaderboard":"Check the leaderboard to see who's the best by pressing {leaderboardIcon} in the menu {menuIcon}","tips.particles":"Disable particle effects by pressing {settingsIcon} in the menu {menuIcon}. It can improve performances.","I don't want to see tips anymore":"I don't want to see tips anymore","Show tips":"Show tips","Show particles":"Show particles",Yes:"Yes",No:"No","Reset tips":"Reset tips","Tips reseted successfuly":"Tips reseted successfuly","Loading...":"Loading...",Approve:"Approve",Next:"Next",Quit:"Quit","See my profile":"See my profile","Log in":"Log in","Save tangram":"Save tangram","Contact 💌":"Contact 💌","A word about Amstangram":"A word about Amstangram","Version {code}":"Version {code}","Forgot password?":"Forgot password?","Reset your password":"Reset your password","Send the reset mail!":"Send the reset mail!","Reset password email sent":"Reset password email sent"},_8={Amstangram:"Amstangram",Language:"Langage",en:"Anglais",fr:"Francais",Theme:"Thème","Logged in as {username}":"Connecté en tant que {username}",Settings:"Réglages",Difficulty:"Difficulté",Easy:"Facile",Hard:"Difficile","Tangram approved":"Tangram approuvé","You can't save an invalid tangram":"Tangram invalide","You can't save such an easy tangram":"Tangram trop facile","Tangram submitted for review":"Tangram soumis pour vérification","Logged out":"Déconnecté.e","Tangram gallery":"Galerie des tangrams","All tangrams":"Tous les tangrams","Uncompleted tangrams":"Tangrams non complétés","★ Starred tangrams":"Tangrams étoilés ★","Pending approbation tangrams":"Tangrams en attente d'approbation","You've completed all tangrams":"Tu as complété tous les tangrams","Come back later for more or create your own tangrams":"Reviens plus tard ou créés tes propres tangrams","No tangram left to approve":"Il ne reste plus de tangram à approuver","Good job moderator {username}!":"Bon boulot modérateur {username} !","All your tangrams have been approved":"Tous tes tangrams ont été approuvés","Create more tangrams and earn <starIcon></starIcon>":"Créés d'autres tangrams et gagne des <starIcon></starIcon>","No starred tangrams yet":"Tu n'as pas encore donné d'étoile","Press <starIcon></starIcon> to star a tangram and show your love":"Appuie sur <starIcon></starIcon> pour donner une étoile et montrer que tu aimes un tangram","Nothing to see here":"Rien à voir","Something might have gone wrong":"Il semble y avoir un problème","Play now!":"Commencer à jouer !","Start 1 tangram!":"Lancer 1 tangram","Start {count} tangrams!":"Lancer {count} tangrams","Password is too weak":"Mot de passe trop faible","Email address already in use":"Adresse email déjà prise","Invalid email address":"Adresse email invalide","Email address":"Adresse Email","Email address is required":"Adresse email requise",Username:"Nom d'utilisateur","Username is required":"Nom d'utilisateur requis",Password:"Mot de passe","Password is required":"Mot de passe requis","Confirm password":"Confirmer le mot de passe","Passwords must match":"Les mots de passe doivent correspondre","Sign me up!":"Je créé mon compte !","I already have an account":"J'ai déjà un compte","Unknown email address":"Adresse email inconnu","Incorrect password":"Mot de passe incorrect","Sign me in!":"Je me connecte !","I don't have an account":"Je n'ai pas de compte","Create your account":"Créer un compte","Connect to your account":"Se connecter","Submit your tangram":"Envoyer votre tangram","Edit your tangram":"Éditer votre tangram",Category:"Catégorie",Path:"Chemin","Invalid path":"Chemin invalide","Victory emoji":"Emoji de succès","Leave empty for random emoji":"Laisser vide pour un emoji au hasard",Order:"Ordre","A moderator will have to approve your tangram. It can be deleted or edited at any time.":"Un modérateur doit approuver votre tangram.<br></br>Il peut être supprimé ou modifié n'importe quand.","Submit!":"Envoyer !","Edit!":"Éditer !","Or delete tangram":"Ou supprimer le tangram",animals:"Animaux",geometric:"Géométrique",digits:"Chiffres",letters:"Alphabet",people:"Personnes",stuff:"Trucs","Joined {signupDate}":"Inscrit le {signupDate}","Log out":"Se déconnecter","Are you sure you want to log out?":"Es-tu sûr.e de vouloir te déconnecter ?","Change email address":"Modifier l'adresse email","Change username":"Modifier le nom d'utilisateur","Change password":"Modifier le mot de passe",Back:"Retour","Confirm new password":"Confirmer le nouveau mot de passe","New password":"Nouveau mot de passe","Current password":"Mot de passe actuel","Password changed successfuly":"Mot de passe changé avec succés","New username":"Nouveau nom d'utilisateur","Username updated successfuly":"Nom d'utilisateur changé avec succés","Email address updated successfuly":"Adresse email changé avec succés","New email address":"Nouvelle adresse email","An error occured, please retry later":"Une erreur est survenue, veuillez réessayer plus tard",Sounds:"Sons","Are you sure you want to delete this tangram?":"Es-tu sûr.e de vouloir supprimer ce tangram ?","Tangram deleted successfuly":"Tangram supprimé avec succés","Tangram modified successfuly":"Tangram modifié avec succés","Challenge link copied to clipboard":"Lien de défi copié dans le presse papier","{username} challenged you":"{username} te met au défi","Rise to the challenge":"Relevez le défi","Let's go!":"C'est parti !",Leaderboard:"Classement","Completed {completed}/{total} tangrams":"{completed}/{total} tangrams complétés","Created {created} tangrams":"{created} tangrams créés","Earned {stars}":"{stars} <starIcon></starIcon> gagnées","Stars earned":"Étoiles gagnées","Completed tangrams":"Tangrams complétés","Created tangrams":"Tangrams créés","Random tip":"Astuce","Got it!":"J'ai compris !","Welcome to Amstangram":"Bienvenue sur Amstangram","tips.welcome":"Reproduis la forme noire en déplaçant les pièces, tu peux faire tourner une pièce en appuyant dessus.<br></br><br></br>Amuse-toi bien !","tips.menu":"Tu peux accéder à la galerie des tangrams {galleryIcon}, aux réglages {settingsIcon} et plus encore en appuyant sur {menuIcon}","tips.account1":"Créer ton compte utilisateur en appuyant sur {accountIcon} dans le menu {menuIcon}","tips.account2":"Créer ton compte utilisateur pour sauvegarder ta progression créer tes propres tangrams","tips.gallery":"Tu peux créer ta propre playlist en sélectionnant les tangrams dans la galerie {galleryIcon}","tips.share":"Tu peux partager ta playlist avec tes amis en appuyant sur {shareIcon} dans la galerie {galleryIcon}","tips.create":"Tu peux créer tes propres tangrams en appuyant sur {createIcon} dans le menu {menuIcon}","tips.stars":"T'as aimé ce tangram ?<br></br>Envoie une étoile à son créateur en appuyant sur {starIcon}","tips.difficulty":"Trop facile pour toi ?<br></br>Essayes le mode difficile en appuyant sur {settingsIcon} dans le menu {menuIcon}","tips.theme":"Envie de passer du côté obscur ?<br></br>Tu peux activer le mode sombre en appuyant sur {settingsIcon} dans le menu {menuIcon}","tips.sound":"Trop de bruits ?<br></br>Tu peux désactiver les sons en appuyant sur {settingsIcon} dans le menu {menuIcon}","tips.card":"Tu peux accéder aux détails d'un tangram ou même éditer les tiens en faisant un appui long sur une carte dans la galerie {galleryIcon}","tips.leaderboard":"Jette un oeil au classement pour savoir qui est le meilleur en appuyant sur {leaderboardIcon} dans le menu {menuIcon}","tips.particles":"Désactive les effets de particule en appuyant sur {settingsIcon} dans le menu {menuIcon}. Cela peut améliorer les performances.","I don't want to see tips anymore":"Je ne veux plus voir les astuces","Show tips":"Afficher les astuces","Show particles":"Afficher les particles",Yes:"Oui",No:"Non","Reset tips":"Réinitialiser les astuces","Tips reseted successfuly":"Astuces réinitilisées avec succés","Loading...":"Chargement...",Approve:"Approuver",Next:"Suivant",Quit:"Quitter","See my profile":"Voir mon profil","Log in":"Se connecter","Save tangram":"Sauvegarder le tangram","Contact 💌":"Contact 💌","A word about Amstangram":"Quelques mots à propos d'Amstangram","Version {code}":"Version {code}","Forgot password?":"Mot de passe oublié ?","Reset your password":"Réinitialiser le mot de passe","Send the reset mail!":"Envoyer le mail de réinitialisation","Reset password email sent":"Email de réinitialisation envoyé"},v8={en:p8,fr:_8},gI="fr",uy=["en","fr"],mI=G.createContext({language:gI,setLanguage:()=>{}}),y8=()=>{const t=localStorage.getItem("language");if(uy.includes(t))return t;const e=navigator.languages;for(const n of e){const r=uy.find(i=>n.includes(i));if(r)return r}return gI},w8=({children:t})=>{const[e,n]=G.useState(gI);G.useEffect(()=>{const i=y8();n(i)},[]);const r=G.useMemo(()=>({language:e,setLanguage:i=>{n(i),localStorage.setItem("language",i)}}),[e]);return R.jsx(nL,{locale:e,messages:v8[e],onError:console.warn,children:R.jsx(mI.Provider,{value:r,children:t})})},I8=({currentUser:t,onClose:e})=>{const n=Zt(),{updateEmail:r}=G.useContext(Hn),i=G.useContext(ui),{handleSubmit:s,register:a,setError:c,formState:h}=Ya(),g=G.useCallback(async({password:_,newEmail:w})=>{try{await r(t,_,w),i(n.formatMessage({id:"Email address updated successfuly"})),e()}catch(T){switch(T.code){case"auth/email-already-in-use":c("newEmail",{type:"alreadyExists",message:n.formatMessage({id:"Email address already in use"})});break;case"auth/invalid-email":c("newEmail",{type:"invalid",message:n.formatMessage({id:"Invalid email address"})});break;case"auth/wrong-password":c("password",{type:"mismatch",message:n.formatMessage({id:"Incorrect password"})});break;default:throw i(n.formatMessage({id:"An error occured, please retry later"})),T}}},[t,r,c,e,i,n]);return R.jsxs(fe,{as:"form",onSubmit:s(g),css:{flex:"1",gap:4},children:[R.jsxs(fe,{css:{gap:3,overflow:"auto",flex:"1"},children:[R.jsxs(fe,{css:{gap:2},children:[R.jsx("label",{children:n.formatMessage({id:"Password"})}),R.jsx(fn,{type:"password",...a("password",{required:n.formatMessage({id:"Password is required"})})}),h.errors.password&&R.jsx(br,{children:h.errors.password.message})]}),R.jsxs(fe,{css:{gap:2},children:[R.jsx("label",{children:n.formatMessage({id:"New email address"})}),R.jsx(fn,{type:"email",...a("newEmail",{required:n.formatMessage({id:"Email address is required"})})}),h.errors.newEmail&&R.jsx(br,{children:h.errors.newEmail.message})]})]}),R.jsxs(fe,{css:{gap:3},children:[R.jsx(cr,{disabled:h.isSubmitting,type:"submit",children:n.formatMessage({id:"Change email address"})}),R.jsx(fe,{css:{alignItems:"center"},children:R.jsx(Ti,{onClick:e,children:n.formatMessage({id:"Back"})})})]})]})},E8=({currentUser:t,onClose:e})=>{const n=Zt(),{updateUsername:r}=G.useContext(Hn),i=G.useContext(ui),{handleSubmit:s,register:a,formState:c}=Ya(),h=G.useCallback(async({newUsername:g})=>{try{await r(t,g),i(n.formatMessage({id:"Username updated successfuly"})),e()}catch(_){throw i(n.formatMessage({id:"An error occured, please retry later"})),_}},[t,r,e,i,n]);return R.jsxs(fe,{as:"form",onSubmit:s(h),css:{flex:"1",gap:4},children:[R.jsx(fe,{css:{gap:3,overflow:"auto",flex:"1"},children:R.jsxs(fe,{css:{gap:2},children:[R.jsx("label",{children:n.formatMessage({id:"New username"})}),R.jsx(fn,{type:"text",...a("newUsername",{required:n.formatMessage({id:"Username is required"})})}),c.errors.newUsername&&R.jsx(br,{children:c.errors.newUsername.message})]})}),R.jsxs(fe,{css:{gap:3},children:[R.jsx(cr,{disabled:c.isSubmitting,type:"submit",children:n.formatMessage({id:"Change username"})}),R.jsx(fe,{css:{alignItems:"center"},children:R.jsx(Ti,{onClick:e,children:n.formatMessage({id:"Back"})})})]})]})},T8=({currentUser:t,onClose:e})=>{const n=Zt(),{updateUsername:r}=G.useContext(Hn),i=G.useContext(ui),{handleSubmit:s,register:a,watch:c,setError:h,formState:g}=Ya(),_=c("newPassword"),w=G.useCallback(async({password:T,newPassword:E})=>{try{await r(t,T,E),i(n.formatMessage({id:"Password changed successfuly"})),e()}catch($){switch($.code){case"auth/weak-password":h("newPassword",{type:"weakPassword",message:n.formatMessage({id:"Password is too weak"})});break;case"auth/wrong-password":h("password",{type:"mismatch",message:n.formatMessage({id:"Incorrect password"})});break;default:i(n.formatMessage({id:"An error occured, please retry later"}));return}}},[t,r,e,h,i,n]);return R.jsxs(fe,{as:"form",onSubmit:s(w),css:{flex:"1",gap:4},children:[R.jsxs(fe,{css:{gap:3,overflow:"auto",flex:"1"},children:[R.jsxs(fe,{css:{gap:2},children:[R.jsx("label",{children:n.formatMessage({id:"Current password"})}),R.jsx(fn,{type:"password",...a("password",{required:n.formatMessage({id:"Password is required"})})}),g.errors.password&&R.jsx(br,{children:g.errors.password.message})]}),R.jsxs(fe,{css:{gap:2},children:[R.jsx("label",{children:n.formatMessage({id:"New password"})}),R.jsx(fn,{type:"password",autoComplete:"new-password",...a("newPassword",{required:n.formatMessage({id:"Password is required"})})}),g.errors.newPassword&&R.jsx(br,{children:g.errors.newPassword.message})]}),R.jsxs(fe,{css:{gap:2},children:[R.jsx("label",{children:n.formatMessage({id:"Confirm new password"})}),R.jsx(fn,{type:"password",...a("newPasswordConfirm",{required:"Password is required",validate:T=>T===_||n.formatMessage({id:"Passwords must match"})})}),g.errors.newPasswordConfirm&&R.jsx(br,{children:g.errors.newPasswordConfirm.message})]})]}),R.jsxs(fe,{css:{gap:3},children:[R.jsx(cr,{disabled:g.isSubmitting,type:"submit",children:n.formatMessage({id:"Change password"})}),R.jsx(fe,{css:{alignItems:"center"},children:R.jsx(Ti,{onClick:e,children:n.formatMessage({id:"Back"})})})]})]})},S8=({uid:t,deferred:e})=>{const n=Zt(),r=G.useContext(ui),{language:i}=G.useContext(mI),{currentUser:s,usersMetadata:a}=G.useContext(Hn),{username:c,signupDate:h}=a[t],[g,_]=G.useState(!1),[w,T]=G.useState(!1),[E,$]=G.useState(!1),{approvedTangrams:U}=G.useContext(jo),{tangramsStarredBy:J,tangramsCompletedBy:V}=G.useContext(Dr),{stars:B,completed:j,created:Z}=G.useMemo(()=>{let te=0,ae=0,ce=0;for(const _e of U){if(_e.uid===t){ae++;for(const me in J[_e.id])me!==t&&J[_e.id][me]&&(te+=1)}for(const me in V[_e.id])me===t&&(ce+=1)}return{stars:te,completed:ce,created:ae}},[U,V,J,t]),ne=async()=>{window.confirm(n.formatMessage({id:"Are you sure you want to log out?"}))&&(await Ft.auth().signOut(),e.reject(cn),r(n.formatMessage({id:"Logged out"})))};return R.jsx(rs,{onClose:()=>e.reject(cn),css:{overflow:"auto",pt:4,mt:-4,gap:3},children:g?R.jsx(I8,{currentUser:s,onClose:()=>_(!1)}):w?R.jsx(E8,{currentUser:s,onClose:()=>T(!1)}):E?R.jsx(T8,{currentUser:s,onClose:()=>$(!1)}):R.jsxs(fe,{css:{gap:4,mt:-4},children:[R.jsxs(fe,{css:{gap:3,alignItems:"center"},children:[R.jsx(Xm,{uid:t,size:"badgeBig"}),R.jsx(Ur,{children:c}),R.jsxs(fe,{css:{gap:2,fontSize:2,alignItems:"center"},children:[s&&t===s.uid&&R.jsx(Xe,{children:s.firebaseUser.email}),R.jsx(Xe,{children:n.formatMessage({id:"Joined {signupDate}"},{signupDate:new Intl.DateTimeFormat(i).format(h)})}),R.jsx(Xe,{children:n.formatMessage({id:"Completed {completed}/{total} tangrams"},{completed:j,total:U.length})}),R.jsx(Xe,{children:n.formatMessage({id:"Created {created} tangrams"},{created:Z})}),R.jsx(Xe,{children:R.jsx(Tt,{id:"Earned {stars}",values:{stars:B,starIcon:()=>R.jsx(Er,{icon:Ao,css:{fill:"currentColor"}})}})})]})]}),s&&s.uid===t&&R.jsxs(R.Fragment,{children:[R.jsxs(fe,{css:{gap:3,alignItems:"center"},children:[R.jsx(Ti,{onClick:()=>_(!0),children:n.formatMessage({id:"Change email address"})}),R.jsx(Ti,{onClick:()=>T(!0),children:n.formatMessage({id:"Change username"})}),R.jsx(Ti,{onClick:()=>$(!0),children:n.formatMessage({id:"Change password"})})]}),R.jsx(Vz,{onClick:ne,children:n.formatMessage({id:"Log out"})})]})]})})},d1=["💪","🔥","😱","😎","🎉","🥇","🚀","👌","👍","😵"],f1=()=>d1[Math.floor(Math.random()*d1.length)];var wk={exports:{}};const x8={},C8=Object.freeze(Object.defineProperty({__proto__:null,default:x8},Symbol.toStringTag,{value:"Module"})),g1=Vk(C8);/*!
 * Paper.js v0.12.17 - The Swiss Army Knife of Vector Graphics Scripting.
 * http://paperjs.org/
 *
 * Copyright (c) 2011 - 2020, Jürg Lehni & Jonathan Puckey
 * http://juerglehni.com/ & https://puckey.studio/
 *
 * Distributed under the MIT license. See LICENSE file for details.
 *
 * All rights reserved.
 *
 * Date: Thu Nov 3 21:15:36 2022 +0100
 *
 ***
 *
 * Straps.js - Class inheritance library with support for bean-style accessors
 *
 * Copyright (c) 2006 - 2020 Jürg Lehni
 * http://juerglehni.com/
 *
 * Distributed under the MIT license.
 *
 ***
 *
 * Acorn.js
 * https://marijnhaverbeke.nl/acorn/
 *
 * Acorn is a tiny, fast JavaScript parser written in JavaScript,
 * created by Marijn Haverbeke and released under an MIT license.
 *
 */(function(t){(function(e,n){e=e||g1;var r=e.window,i=e.document,s=new function(){var o=/^(statics|enumerable|beans|preserve)$/,l=[],u=l.slice,d=Object.create,f=Object.getOwnPropertyDescriptor,m=Object.defineProperty,v=l.forEach||function(C,S){for(var k=0,M=this.length;k<M;k++)C.call(S,this[k],k,this)},p=function(C,S){for(var k in this)this.hasOwnProperty(k)&&C.call(S,this[k],k,this)},y=Object.assign||function(C){for(var S=1,k=arguments.length;S<k;S++){var M=arguments[S];for(var F in M)M.hasOwnProperty(F)&&(C[F]=M[F])}return C},I=function(C,S,k){if(C){var M=f(C,"length");(M&&typeof M.value=="number"?v:p).call(C,S,k=k||C)}return k};function A(C,S,k,M,F){var N={};function D(z,q){q=q||(q=f(S,z))&&(q.get?q:q.value),typeof q=="string"&&q[0]==="#"&&(q=C[q.substring(1)]||q);var H=typeof q=="function",W=q,Q=F||H&&!q.base?q&&q.get?z in C:C[z]:null,K;(!F||!Q)&&(H&&Q&&(q.base=Q),H&&M!==!1&&(K=z.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(N[K[3].toLowerCase()+K[4]]=K[2]),(!W||H||!W.get||typeof W.get!="function"||!P.isPlainObject(W))&&(W={value:W,writable:!0}),(f(C,z)||{configurable:!0}).configurable&&(W.configurable=!0,W.enumerable=k??!K),m(C,z,W))}if(S){for(var x in S)S.hasOwnProperty(x)&&!o.test(x)&&D(x);for(var x in N){var b=N[x],O=C["set"+b],L=C["get"+b]||O&&C["is"+b];L&&(M===!0||L.length===0)&&D(x,{get:L,set:O})}}return C}function P(){for(var C=0,S=arguments.length;C<S;C++){var k=arguments[C];k&&y(this,k)}return this}return A(P,{inject:function(C){if(C){var S=C.statics===!0?C:C.statics,k=C.beans,M=C.preserve;S!==C&&A(this.prototype,C,C.enumerable,k,M),A(this,S,null,k,M)}for(var F=1,N=arguments.length;F<N;F++)this.inject(arguments[F]);return this},extend:function(){for(var C=this,S,k,M=0,F,N=arguments.length;M<N&&!(S&&k);M++)F=arguments[M],S=S||F.initialize,k=k||F.prototype;return S=S||function(){C.apply(this,arguments)},k=S.prototype=k||d(this.prototype),m(k,"constructor",{value:S,writable:!0,configurable:!0}),A(S,this),arguments.length&&this.inject.apply(S,arguments),S.base=C,S}}).inject({enumerable:!1,initialize:P,set:P,inject:function(){for(var C=0,S=arguments.length;C<S;C++){var k=arguments[C];k&&A(this,k,k.enumerable,k.beans,k.preserve)}return this},extend:function(){var C=d(this);return C.inject.apply(C,arguments)},each:function(C,S){return I(this,C,S)},clone:function(){return new this.constructor(this)},statics:{set:y,each:I,create:d,define:m,describe:f,clone:function(C){return y(new C.constructor,C)},isPlainObject:function(C){var S=C!=null&&C.constructor;return S&&(S===Object||S===P||S.name==="Object")},pick:function(C,S){return C!==n?C:S},slice:function(C,S,k){return u.call(C,S,k)}}})};t.exports=s,s.inject({enumerable:!1,toString:function(){return this._id!=null?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+s.each(this,function(o,l){if(!/^_/.test(l)){var u=typeof o;this.push(l+": "+(u==="number"?_.instance.number(o):u==="string"?"'"+o+"'":o))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(o){return s.importJSON(o,this)},exportJSON:function(o){return s.exportJSON(this,o)},toJSON:function(){return s.serialize(this)},set:function(o,l){return o&&s.filter(this,o,l,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function o(){var l=o.base.apply(this,arguments),u=l.prototype._class;return u&&!s.exports[u]&&(s.exports[u]=l),l},equals:function(o,l){if(o===l)return!0;if(o&&o.equals)return o.equals(l);if(l&&l.equals)return l.equals(o);if(o&&l&&typeof o=="object"&&typeof l=="object"){if(Array.isArray(o)&&Array.isArray(l)){var u=o.length;if(u!==l.length)return!1;for(;u--;)if(!s.equals(o[u],l[u]))return!1}else{var d=Object.keys(o),u=d.length;if(u!==Object.keys(l).length)return!1;for(;u--;){var f=d[u];if(!(l.hasOwnProperty(f)&&s.equals(o[f],l[f])))return!1}}return!0}return!1},read:function(o,l,u,d){if(this===s){var f=this.peek(o,l);return o.__index++,f}var m=this.prototype,v=m._readIndex,p=l||v&&o.__index||0,y=o.length,I=o[p];if(d=d||y-p,I instanceof this||u&&u.readNull&&I==null&&d<=1)return v&&(o.__index=p+1),I&&u&&u.clone?I.clone():I;if(I=s.create(m),v&&(I.__read=!0),I=I.initialize.apply(I,p>0||p+d<y?s.slice(o,p,p+d):o)||I,v){o.__index=p+I.__read;var A=I.__filtered;A&&(o.__filtered=A,I.__filtered=n),I.__read=n}return I},peek:function(o,l){return o[o.__index=l||o.__index||0]},remain:function(o){return o.length-(o.__index||0)},readList:function(o,l,u,d){for(var f=[],m,v=l||0,p=d?v+d:o.length,y=v;y<p;y++)f.push(Array.isArray(m=o[y])?this.read(m,0,u):this.read(o,y,u,1));return f},readNamed:function(o,l,u,d,f){var m=this.getNamed(o,l),v=m!==n;if(v){var p=o.__filtered;if(!p){var y=this.getSource(o);p=o.__filtered=s.create(y),p.__unfiltered=y}p[l]=n}return this.read(v?[m]:o,u,d,f)},readSupported:function(o,l){var u=this.getSource(o),d=this,f=!1;return u&&Object.keys(u).forEach(function(m){if(m in l){var v=d.readNamed(o,m);v!==n&&(l[m]=v),f=!0}}),f},getSource:function(o){var l=o.__source;if(l===n){var u=o.length===1&&o[0];l=o.__source=u&&s.isPlainObject(u)?u:null}return l},getNamed:function(o,l){var u=this.getSource(o);if(u)return l?u[l]:o.__filtered||u},hasNamed:function(o,l){return!!this.getNamed(o,l)},filter:function(o,l,u,d){var f;function m(A){if(!(u&&A in u)&&!(f&&A in f)){var P=l[A];P!==n&&(o[A]=P)}}if(d){for(var v={},p=0,y,I=d.length;p<I;p++)(y=d[p])in l&&(m(y),v[y]=!0);f=v}return Object.keys(l.__unfiltered||l).forEach(m),o},isPlainValue:function(o,l){return s.isPlainObject(o)||Array.isArray(o)||l&&typeof o=="string"},serialize:function(o,l,u,d){l=l||{};var f=!d,m;if(f&&(l.formatter=new _(l.precision),d={length:0,definitions:{},references:{},add:function(P,C){var S="#"+P._id,k=this.references[S];if(!k){this.length++;var M=C.call(P),F=P._class;F&&M[0]!==F&&M.unshift(F),this.definitions[S]=M,k=this.references[S]=[S]}return k}}),o&&o._serialize){m=o._serialize(l,d);var v=o._class;v&&!o._compactSerialize&&(f||!u)&&m[0]!==v&&m.unshift(v)}else if(Array.isArray(o)){m=[];for(var p=0,y=o.length;p<y;p++)m[p]=s.serialize(o[p],l,u,d)}else if(s.isPlainObject(o)){m={};for(var I=Object.keys(o),p=0,y=I.length;p<y;p++){var A=I[p];m[A]=s.serialize(o[A],l,u,d)}}else typeof o=="number"?m=l.formatter.number(o,l.precision):m=o;return f&&d.length>0?[["dictionary",d.definitions],m]:m},deserialize:function(o,l,u,d,f){var m=o,v=!u,p=v&&o&&o.length&&o[0][0]==="dictionary";if(u=u||{},Array.isArray(o)){var y=o[0],I=y==="dictionary";if(o.length==1&&/^#/.test(y))return u.dictionary[y];y=s.exports[y],m=[];for(var A=y?1:0,P=o.length;A<P;A++)m.push(s.deserialize(o[A],l,u,I,p));if(y){var C=m;l?m=l(y,C,v||f):m=new y(C)}}else if(s.isPlainObject(o)){m={},d&&(u.dictionary=m);for(var S in o)m[S]=s.deserialize(o[S],l,u)}return p?m[1]:m},exportJSON:function(o,l){var u=s.serialize(o,l);return l&&l.asString==!1?u:JSON.stringify(u)},importJSON:function(o,l){return s.deserialize(typeof o=="string"?JSON.parse(o):o,function(u,d,f){var m=f&&l&&l.constructor===u,v=m?l:s.create(u.prototype);if(d.length===1&&v instanceof te&&(m||!(v instanceof ce))){var p=d[0];s.isPlainObject(p)&&(p.insert=!1,m&&(d=d.concat([te.INSERT])))}return(m?v.set:u).apply(v,d),m&&(l=null),v})},push:function(o,l){var u=l.length;if(u<4096)o.push.apply(o,l);else{var d=o.length;o.length+=u;for(var f=0;f<u;f++)o[d+f]=l[f]}return o},splice:function(o,l,u,d){var f=l&&l.length,m=u===n;u=m?o.length:u,u>o.length&&(u=o.length);for(var v=0;v<f;v++)l[v]._index=u+v;if(m)return s.push(o,l),[];var p=[u,d];l&&s.push(p,l);for(var y=o.splice.apply(o,p),v=0,I=y.length;v<I;v++)y[v]._index=n;for(var v=u+f,I=o.length;v<I;v++)o[v]._index=v;return y},capitalize:function(o){return o.replace(/\b[a-z]/g,function(l){return l.toUpperCase()})},camelize:function(o){return o.replace(/-(.)/g,function(l,u){return u.toUpperCase()})},hyphenate:function(o){return o.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var a={on:function(o,l){if(typeof o!="string")s.each(o,function(m,v){this.on(v,m)},this);else{var u=this._eventTypes,d=u&&u[o],f=this._callbacks=this._callbacks||{};f=f[o]=f[o]||[],f.indexOf(l)===-1&&(f.push(l),d&&d.install&&f.length===1&&d.install.call(this,o))}return this},off:function(o,l){if(typeof o!="string"){s.each(o,function(v,p){this.off(p,v)},this);return}var u=this._eventTypes,d=u&&u[o],f=this._callbacks&&this._callbacks[o],m;return f&&(!l||(m=f.indexOf(l))!==-1&&f.length===1?(d&&d.uninstall&&d.uninstall.call(this,o),delete this._callbacks[o]):m!==-1&&f.splice(m,1)),this},once:function(o,l){return this.on(o,function u(){l.apply(this,arguments),this.off(o,u)})},emit:function(o,l){var u=this._callbacks&&this._callbacks[o];if(!u)return!1;var d=s.slice(arguments,1),f=l&&l.target&&!l.currentTarget;u=u.slice(),f&&(l.currentTarget=this);for(var m=0,v=u.length;m<v;m++)if(u[m].apply(this,d)==!1){l&&l.stop&&l.stop();break}return f&&delete l.currentTarget,!0},responds:function(o){return!!(this._callbacks&&this._callbacks[o])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(o){var l=this._eventTypes,u=this._callbacks,d=o?"install":"uninstall";if(l){for(var f in u)if(u[f].length>0){var m=l[f],v=m&&m[d];v&&v.call(this,f)}}},statics:{inject:function o(l){var u=l._events;if(u){var d={};s.each(u,function(f,m){var v=typeof f=="string",p=v?f:m,y=s.capitalize(p),I=p.substring(2).toLowerCase();d[I]=v?{}:f,p="_"+p,l["get"+y]=function(){return this[p]},l["set"+y]=function(A){var P=this[p];P&&this.off(I,P),A&&this.on(I,A),this[p]=A}}),l._eventTypes=d}return o.base.apply(this,arguments)}}},c=s.extend({_class:"PaperScope",initialize:function o(){de=this,this.settings=new s({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=o._id++,o._scopes[this._id]=this;var l=o.prototype;if(!this.support){var u=ie.getContext(1,1)||{};l.support={nativeDash:"setLineDash"in u||"mozDash"in u,nativeBlendModes:ge.nativeModes},ie.release(u)}if(!this.agent){var d=e.navigator.userAgent.toLowerCase(),f=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(d)||[])[0],m=f==="darwin"?"mac":f,v=l.agent=l.browser={platform:m};m&&(v[m]=!0),d.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(p,y,I,A,P){if(!v.chrome){var C=y==="opera"?A:/^(node|trident)$/.test(y)?P:I;v.version=C,v.versionNumber=parseFloat(C),y={trident:"msie",jsdom:"node"}[y]||y,v.name=y,v[y]=!0}}),v.chrome&&delete v.webkit,v.atom&&delete v.chrome}},version:"0.12.17",getView:function(){var o=this.project;return o&&o._view},getPaper:function(){return this},execute:function(o,l){},install:function(o){var l=this;s.each(["project","view","tool"],function(d){s.define(o,d,{configurable:!0,get:function(){return l[d]}})});for(var u in this)!/^_/.test(u)&&this[u]&&(o[u]=this[u])},setup:function(o){return de=this,this.project=new ne(o),this},createCanvas:function(o,l){return ie.getCanvas(o,l)},activate:function(){de=this},clear:function(){for(var o=this.projects,l=this.tools,u=o.length-1;u>=0;u--)o[u].remove();for(var u=l.length-1;u>=0;u--)l[u].remove()},remove:function(){this.clear(),delete c._scopes[this._id]},statics:new function(){function o(l){return l+="Attribute",function(u,d){return u[l](d)||u[l]("data-paper-"+d)}}return{_scopes:{},_id:0,get:function(l){return this._scopes[l]||null},getAttribute:o("get"),hasAttribute:o("has")}}}),h=s.extend(a,{initialize:function(o){this._scope=de,this._index=this._scope[this._list].push(this)-1,(o||!this._scope[this._reference])&&this.activate()},activate:function(){if(!this._scope)return!1;var o=this._scope[this._reference];return o&&o!==this&&o.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",o),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return this._index==null?!1:(s.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),g={findItemBoundsCollisions:function(o,l,u){function d(v){for(var p=new Array(v.length),y=0;y<v.length;y++){var I=v[y].getBounds();p[y]=[I.left,I.top,I.right,I.bottom]}return p}var f=d(o),m=!l||l===o?f:d(l);return this.findBoundsCollisions(f,m,u||0)},findCurveBoundsCollisions:function(o,l,u,d){function f(C){for(var S=Math.min,k=Math.max,M=new Array(C.length),F=0;F<C.length;F++){var N=C[F];M[F]=[S(N[0],N[2],N[4],N[6]),S(N[1],N[3],N[5],N[7]),k(N[0],N[2],N[4],N[6]),k(N[1],N[3],N[5],N[7])]}return M}var m=f(o),v=!l||l===o?m:f(l);if(d){for(var p=this.findBoundsCollisions(m,v,u||0,!1,!0),y=this.findBoundsCollisions(m,v,u||0,!0,!0),I=[],A=0,P=p.length;A<P;A++)I[A]={hor:p[A],ver:y[A]};return I}return this.findBoundsCollisions(m,v,u||0)},findBoundsCollisions:function(o,l,u,d,f){var m=!l||o===l,v=m?o:o.concat(l),p=o.length,y=v.length;function I(Se,be,Ke){for(var qe=0,$e=Se.length;qe<$e;){var ze=$e+qe>>>1;v[Se[ze]][be]<Ke?qe=ze+1:$e=ze}return qe-1}for(var A=d?1:0,P=A+2,C=d?0:1,S=C+2,k=new Array(y),M=0;M<y;M++)k[M]=M;k.sort(function(Se,be){return v[Se][A]-v[be][A]});for(var F=[],N=new Array(p),M=0;M<y;M++){var D=k[M],x=v[D],b=m?D:D-p,O=D<p,L=m||!O,z=O?[]:null;if(F.length){var q=I(F,P,x[A]-u)+1;if(F.splice(0,q),m&&f){z=z.concat(F);for(var H=0;H<F.length;H++){var W=F[H];N[W].push(b)}}else for(var Q=x[S],K=x[C],H=0;H<F.length;H++){var W=F[H],Y=v[W],ee=W<p,re=m||W>=p;(f||(O&&re||L&&ee)&&Q>=Y[C]-u&&K<=Y[S]+u)&&(O&&re&&z.push(m?W:W-p),L&&ee&&N[W].push(b))}}if(O&&(o===l&&z.push(D),N[D]=z),F.length){var oe=x[P],le=I(F,P,oe);F.splice(le+1,0,D)}else F.push(D)}for(var M=0;M<N.length;M++){var Ie=N[M];Ie&&Ie.sort(function(be,Ke){return be-Ke})}return N}},_=s.extend({initialize:function(o){this.precision=s.pick(o,5),this.multiplier=Math.pow(10,this.precision)},number:function(o){return this.precision<16?Math.round(o*this.multiplier)/this.multiplier:o},pair:function(o,l,u){return this.number(o)+(u||",")+this.number(l)},point:function(o,l){return this.number(o.x)+(l||",")+this.number(o.y)},size:function(o,l){return this.number(o.width)+(l||",")+this.number(o.height)},rectangle:function(o,l){return this.point(o,l)+(l||",")+this.size(o,l)}});_.instance=new _;var w=new function(){var o=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],l=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],u=Math.abs,d=Math.sqrt,f=Math.pow,m=Math.log2||function(P){return Math.log(P)*Math.LOG2E},v=1e-12,p=112e-18;function y(P,C,S){return P<C?C:P>S?S:P}function I(P,C,S){function k(q){var H=q*134217729,W=q-H,Q=W+H,K=q-Q;return[Q,K]}var M=C*C-P*S,F=C*C+P*S;if(u(M)*3<F){var N=k(P),D=k(C),x=k(S),b=C*C,O=D[0]*D[0]-b+2*D[0]*D[1]+D[1]*D[1],L=P*S,z=N[0]*x[0]-L+N[0]*x[1]+N[1]*x[0]+N[1]*x[1];M=b-L+(O-z)}return M}function A(){var P=Math.max.apply(Math,arguments);return P&&(P<1e-8||P>1e8)?f(2,-Math.round(m(P))):0}return{EPSILON:v,MACHINE_EPSILON:p,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,ANGULAR_EPSILON:1e-5,KAPPA:4*(d(2)-1)/3,isZero:function(P){return P>=-v&&P<=v},isMachineZero:function(P){return P>=-p&&P<=p},clamp:y,integrate:function(P,C,S,k){for(var M=o[k-2],F=l[k-2],N=(S-C)*.5,D=N+C,x=0,b=k+1>>1,O=k&1?F[x++]*P(D):0;x<b;){var L=N*M[x];O+=F[x++]*(P(D+L)+P(D-L))}return N*O},findRoot:function(P,C,S,k,M,F,N){for(var D=0;D<F;D++){var x=P(S),b=x/C(S),O=S-b;if(u(b)<N){S=O;break}x>0?(M=S,S=O<=k?(k+M)*.5:O):(k=S,S=O>=M?(k+M)*.5:O)}return y(S,k,M)},solveQuadratic:function(P,C,S,k,M,F){var N,D=1/0;if(u(P)<v){if(u(C)<v)return u(S)<v?-1:0;N=-S/C}else{C*=-.5;var x=I(P,C,S);if(x&&u(x)<p){var b=A(u(P),u(C),u(S));b&&(P*=b,C*=b,S*=b,x=I(P,C,S))}if(x>=-p){var O=x<0?0:d(x),L=C+(C<0?-O:O);L===0?(N=S/P,D=-N):(N=L/P,D=S/L)}}var z=0,q=M==null,H=M-v,W=F+v;return isFinite(N)&&(q||N>H&&N<W)&&(k[z++]=q?N:y(N,M,F)),D!==N&&isFinite(D)&&(q||D>H&&D<W)&&(k[z++]=q?D:y(D,M,F)),z},solveCubic:function(P,C,S,k,M,F,N){var D=A(u(P),u(C),u(S),u(k)),x,b,O,L,z;D&&(P*=D,C*=D,S*=D,k*=D);function q(le){x=le;var Ie=P*x;b=Ie+C,O=b*x+S,L=(Ie+b)*x+O,z=O*x+k}if(u(P)<v)P=C,b=S,O=k,x=1/0;else if(u(k)<v)b=C,O=S,x=0;else{q(-(C/P)/3);var H=z/P,W=f(u(H),1/3),Q=H<0?-1:1,K=-L/P,Y=K>0?1.324717957244746*Math.max(W,d(K)):W,ee=x-Q*Y;if(ee!==x){do q(ee),ee=L===0?x:x-z/L/(1+p);while(Q*ee>Q*x);u(P)*x*x>u(k/x)&&(O=-k/x,b=(O-S)/x)}}var re=w.solveQuadratic(P,b,O,M,F,N),oe=F==null;return isFinite(x)&&(re===0||re>0&&x!==M[0]&&x!==M[1])&&(oe||x>F-v&&x<N+v)&&(M[re++]=oe?x:y(x,F,N)),re}}},T={_id:1,_pools:{},get:function(o){if(o){var l=this._pools[o];return l||(l=this._pools[o]={_id:1}),l._id++}else return this._id++}},E=s.extend({_class:"Point",_readIndex:!0,initialize:function(l,u){var d=typeof l,f=this.__read,m=0;if(d==="number"){var v=typeof u=="number";this._set(l,v?u:l),f&&(m=v?2:1)}else if(d==="undefined"||l===null)this._set(0,0),f&&(m=l===null?1:0);else{var p=d==="string"?l.split(/[\s,]+/)||[]:l;m=1,Array.isArray(p)?this._set(+p[0],+(p.length>1?p[1]:p[0])):"x"in p?this._set(p.x||0,p.y||0):"width"in p?this._set(p.width||0,p.height||0):"angle"in p?(this._set(p.length||0,0),this.setAngle(p.angle||0)):(this._set(0,0),m=0)}return f&&(this.__read=m),this},set:"#initialize",_set:function(o,l){return this.x=o,this.y=l,this},equals:function(o){return this===o||o&&(this.x===o.x&&this.y===o.y||Array.isArray(o)&&this.x===o[0]&&this.y===o[1])||!1},clone:function(){return new E(this.x,this.y)},toString:function(){var o=_.instance;return"{ x: "+o.number(this.x)+", y: "+o.number(this.y)+" }"},_serialize:function(o){var l=o.formatter;return[l.number(this.x),l.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(o){if(this.isZero()){var l=this._angle||0;this._set(Math.cos(l)*o,Math.sin(l)*o)}else{var u=o/this.getLength();w.isZero(u)&&this.getAngle(),this._set(this.x*u,this.y*u)}},getAngle:function(){return this.getAngleInRadians.apply(this,arguments)*180/Math.PI},setAngle:function(o){this.setAngleInRadians.call(this,o*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var o=E.read(arguments),l=this.getLength()*o.getLength();if(w.isZero(l))return NaN;var u=this.dot(o)/l;return Math.acos(u<-1?-1:u>1?1:u)}else return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(o){if(this._angle=o,!this.isZero()){var l=this.getLength();this._set(Math.cos(o)*l,Math.sin(o)*l)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var o=E.read(arguments);return Math.atan2(this.cross(o),this.dot(o))*180/Math.PI},getDistance:function(){var o=arguments,l=E.read(o),u=l.x-this.x,d=l.y-this.y,f=u*u+d*d,m=s.read(o);return m?f:Math.sqrt(f)},normalize:function(o){o===n&&(o=1);var l=this.getLength(),u=l!==0?o/l:0,d=new E(this.x*u,this.y*u);return u>=0&&(d._angle=this._angle),d},rotate:function(o,l){if(o===0)return this.clone();o=o*Math.PI/180;var u=l?this.subtract(l):this,d=Math.sin(o),f=Math.cos(o);return u=new E(u.x*f-u.y*d,u.x*d+u.y*f),l?u.add(l):u},transform:function(o){return o?o._transformPoint(this):this},add:function(){var o=E.read(arguments);return new E(this.x+o.x,this.y+o.y)},subtract:function(){var o=E.read(arguments);return new E(this.x-o.x,this.y-o.y)},multiply:function(){var o=E.read(arguments);return new E(this.x*o.x,this.y*o.y)},divide:function(){var o=E.read(arguments);return new E(this.x/o.x,this.y/o.y)},modulo:function(){var o=E.read(arguments);return new E(this.x%o.x,this.y%o.y)},negate:function(){return new E(-this.x,-this.y)},isInside:function(){return V.read(arguments).contains(this)},isClose:function(){var o=arguments,l=E.read(o),u=s.read(o);return this.getDistance(l)<=u},isCollinear:function(){var o=E.read(arguments);return E.isCollinear(this.x,this.y,o.x,o.y)},isColinear:"#isCollinear",isOrthogonal:function(){var o=E.read(arguments);return E.isOrthogonal(this.x,this.y,o.x,o.y)},isZero:function(){var o=w.isZero;return o(this.x)&&o(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(o){return this.x*(o>1&&o<4?-1:1)>=0&&this.y*(o>2?-1:1)>=0},dot:function(){var o=E.read(arguments);return this.x*o.x+this.y*o.y},cross:function(){var o=E.read(arguments);return this.x*o.y-this.y*o.x},project:function(){var o=E.read(arguments),l=o.isZero()?0:this.dot(o)/o.dot(o);return new E(o.x*l,o.y*l)},statics:{min:function(){var o=arguments,l=E.read(o),u=E.read(o);return new E(Math.min(l.x,u.x),Math.min(l.y,u.y))},max:function(){var o=arguments,l=E.read(o),u=E.read(o);return new E(Math.max(l.x,u.x),Math.max(l.y,u.y))},random:function(){return new E(Math.random(),Math.random())},isCollinear:function(o,l,u,d){return Math.abs(o*d-l*u)<=Math.sqrt((o*o+l*l)*(u*u+d*d))*1e-8},isOrthogonal:function(o,l,u,d){return Math.abs(o*u+l*d)<=Math.sqrt((o*o+l*l)*(u*u+d*d))*1e-8}}},s.each(["round","ceil","floor","abs"],function(o){var l=Math[o];this[o]=function(){return new E(l(this.x),l(this.y))}},{})),$=E.extend({initialize:function(l,u,d,f){this._x=l,this._y=u,this._owner=d,this._setter=f},_set:function(o,l,u){return this._x=o,this._y=l,u||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(o){this._x=o,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(o){this._y=o,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(o){this._owner._changeSelection(this._getSelection(),o)},_getSelection:function(){return this._setter==="setPosition"?4:0}}),U=s.extend({_class:"Size",_readIndex:!0,initialize:function(l,u){var d=typeof l,f=this.__read,m=0;if(d==="number"){var v=typeof u=="number";this._set(l,v?u:l),f&&(m=v?2:1)}else if(d==="undefined"||l===null)this._set(0,0),f&&(m=l===null?1:0);else{var p=d==="string"?l.split(/[\s,]+/)||[]:l;m=1,Array.isArray(p)?this._set(+p[0],+(p.length>1?p[1]:p[0])):"width"in p?this._set(p.width||0,p.height||0):"x"in p?this._set(p.x||0,p.y||0):(this._set(0,0),m=0)}return f&&(this.__read=m),this},set:"#initialize",_set:function(o,l){return this.width=o,this.height=l,this},equals:function(o){return o===this||o&&(this.width===o.width&&this.height===o.height||Array.isArray(o)&&this.width===o[0]&&this.height===o[1])||!1},clone:function(){return new U(this.width,this.height)},toString:function(){var o=_.instance;return"{ width: "+o.number(this.width)+", height: "+o.number(this.height)+" }"},_serialize:function(o){var l=o.formatter;return[l.number(this.width),l.number(this.height)]},add:function(){var o=U.read(arguments);return new U(this.width+o.width,this.height+o.height)},subtract:function(){var o=U.read(arguments);return new U(this.width-o.width,this.height-o.height)},multiply:function(){var o=U.read(arguments);return new U(this.width*o.width,this.height*o.height)},divide:function(){var o=U.read(arguments);return new U(this.width/o.width,this.height/o.height)},modulo:function(){var o=U.read(arguments);return new U(this.width%o.width,this.height%o.height)},negate:function(){return new U(-this.width,-this.height)},isZero:function(){var o=w.isZero;return o(this.width)&&o(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(o,l){return new U(Math.min(o.width,l.width),Math.min(o.height,l.height))},max:function(o,l){return new U(Math.max(o.width,l.width),Math.max(o.height,l.height))},random:function(){return new U(Math.random(),Math.random())}}},s.each(["round","ceil","floor","abs"],function(o){var l=Math[o];this[o]=function(){return new U(l(this.width),l(this.height))}},{})),J=U.extend({initialize:function(l,u,d,f){this._width=l,this._height=u,this._owner=d,this._setter=f},_set:function(o,l,u){return this._width=o,this._height=l,u||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(o){this._width=o,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(o){this._height=o,this._owner[this._setter](this)}}),V=s.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(l,u,d,f){var m=arguments,v=typeof l,p;if(v==="number"?(this._set(l,u,d,f),p=4):v==="undefined"||l===null?(this._set(0,0,0,0),p=l===null?1:0):m.length===1&&(Array.isArray(l)?(this._set.apply(this,l),p=1):l.x!==n||l.width!==n?(this._set(l.x||0,l.y||0,l.width||0,l.height||0),p=1):l.from===n&&l.to===n&&(this._set(0,0,0,0),s.readSupported(m,this)&&(p=1))),p===n){var y=E.readNamed(m,"from"),I=s.peek(m),A=y.x,P=y.y,C,S;if(I&&I.x!==n||s.hasNamed(m,"to")){var k=E.readNamed(m,"to");C=k.x-A,S=k.y-P,C<0&&(A=k.x,C=-C),S<0&&(P=k.y,S=-S)}else{var M=U.read(m);C=M.width,S=M.height}this._set(A,P,C,S),p=m.__index}var F=m.__filtered;return F&&(this.__filtered=F),this.__read&&(this.__read=p),this},set:"#initialize",_set:function(o,l,u,d){return this.x=o,this.y=l,this.width=u,this.height=d,this},clone:function(){return new V(this.x,this.y,this.width,this.height)},equals:function(o){var l=s.isPlainValue(o)?V.read(arguments):o;return l===this||l&&this.x===l.x&&this.y===l.y&&this.width===l.width&&this.height===l.height||!1},toString:function(){var o=_.instance;return"{ x: "+o.number(this.x)+", y: "+o.number(this.y)+", width: "+o.number(this.width)+", height: "+o.number(this.height)+" }"},_serialize:function(o){var l=o.formatter;return[l.number(this.x),l.number(this.y),l.number(this.width),l.number(this.height)]},getPoint:function(o){var l=o?E:$;return new l(this.x,this.y,this,"setPoint")},setPoint:function(){var o=E.read(arguments);this.x=o.x,this.y=o.y},getSize:function(o){var l=o?U:J;return new l(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var o=U.read(arguments),l=this._sx,u=this._sy,d=o.width,f=o.height;l&&(this.x+=(this.width-d)*l),u&&(this.y+=(this.height-f)*u),this.width=d,this.height=f,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(o){if(!this._fw){var l=o-this.x;this.width-=this._sx===.5?l*2:l}this.x=o,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(o){if(!this._fh){var l=o-this.y;this.height-=this._sy===.5?l*2:l}this.y=o,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(o){if(!this._fw){var l=o-this.x;this.width=this._sx===.5?l*2:l}this.x=o-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(o){if(!this._fh){var l=o-this.y;this.height=this._sy===.5?l*2:l}this.y=o-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(o){this._fw||this._sx===.5?this.x=o-this.width/2:(this._sx&&(this.x+=(o-this.x)*2*this._sx),this.width=(o-this.x)*2),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(o){this._fh||this._sy===.5?this.y=o-this.height/2:(this._sy&&(this.y+=(o-this.y)*2*this._sy),this.height=(o-this.y)*2),this._sy=.5,this._fh=0},getCenter:function(o){var l=o?E:$;return new l(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var o=E.read(arguments);return this.setCenterX(o.x),this.setCenterY(o.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return this.width===0||this.height===0},contains:function(o){return o&&o.width!==n||(Array.isArray(o)?o:arguments).length===4?this._containsRectangle(V.read(arguments)):this._containsPoint(E.read(arguments))},_containsPoint:function(o){var l=o.x,u=o.y;return l>=this.x&&u>=this.y&&l<=this.x+this.width&&u<=this.y+this.height},_containsRectangle:function(o){var l=o.x,u=o.y;return l>=this.x&&u>=this.y&&l+o.width<=this.x+this.width&&u+o.height<=this.y+this.height},intersects:function(){var o=V.read(arguments),l=s.read(arguments)||0;return o.x+o.width>this.x-l&&o.y+o.height>this.y-l&&o.x<this.x+this.width+l&&o.y<this.y+this.height+l},intersect:function(){var o=V.read(arguments),l=Math.max(this.x,o.x),u=Math.max(this.y,o.y),d=Math.min(this.x+this.width,o.x+o.width),f=Math.min(this.y+this.height,o.y+o.height);return new V(l,u,d-l,f-u)},unite:function(){var o=V.read(arguments),l=Math.min(this.x,o.x),u=Math.min(this.y,o.y),d=Math.max(this.x+this.width,o.x+o.width),f=Math.max(this.y+this.height,o.y+o.height);return new V(l,u,d-l,f-u)},include:function(){var o=E.read(arguments),l=Math.min(this.x,o.x),u=Math.min(this.y,o.y),d=Math.max(this.x+this.width,o.x),f=Math.max(this.y+this.height,o.y);return new V(l,u,d-l,f-u)},expand:function(){var o=U.read(arguments),l=o.width,u=o.height;return new V(this.x-l/2,this.y-u/2,this.width+l,this.height+u)},scale:function(o,l){return this.expand(this.width*o-this.width,this.height*(l===n?o:l)-this.height)}},s.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(o,l){var u=o.join(""),d=/^[RL]/.test(u);l>=4&&(o[1]+=d?"Y":"X");var f=o[d?0:1],m=o[d?1:0],v="get"+f,p="get"+m,y="set"+f,I="set"+m,A="get"+u,P="set"+u;this[A]=function(C){var S=C?E:$;return new S(this[v](),this[p](),this,P)},this[P]=function(){var C=E.read(arguments);this[y](C.x),this[I](C.y)}},{beans:!0})),B=V.extend({initialize:function(l,u,d,f,m,v){this._set(l,u,d,f,!0),this._owner=m,this._setter=v},_set:function(o,l,u,d,f){return this._x=o,this._y=l,this._width=u,this._height=d,f||this._owner[this._setter](this),this}},new function(){var o=V.prototype;return s.each(["x","y","width","height"],function(l){var u=s.capitalize(l),d="_"+l;this["get"+u]=function(){return this[d]},this["set"+u]=function(f){this[d]=f,this._dontNotify||this._owner[this._setter](this)}},s.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(l){var u="set"+l;this[u]=function(){this._dontNotify=!0,o[u].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(this._owner._selection&2)},setSelected:function(l){var u=this._owner;u._changeSelection&&u._changeSelection(2,l)}}))}),j=s.extend({_class:"Matrix",initialize:function o(l,u){var d=arguments,f=d.length,m=!0;if(f>=6?this._set.apply(this,d):f===1||f===2?l instanceof o?this._set(l._a,l._b,l._c,l._d,l._tx,l._ty,u):Array.isArray(l)?this._set.apply(this,u?l.concat([u]):l):m=!1:f?m=!1:this.reset(),!m)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(o,l,u,d,f,m,v){return this._a=o,this._b=l,this._c=u,this._d=d,this._tx=f,this._ty=m,v||this._changed(),this},_serialize:function(o,l){return s.serialize(this.getValues(),o,!0,l)},_changed:function(){var o=this._owner;o&&(o._applyMatrix?o.transform(null,!0):o._changed(25))},clone:function(){return new j(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(o){return o===this||o&&this._a===o._a&&this._b===o._b&&this._c===o._c&&this._d===o._d&&this._tx===o._tx&&this._ty===o._ty},toString:function(){var o=_.instance;return"[["+[o.number(this._a),o.number(this._c),o.number(this._tx)].join(", ")+"], ["+[o.number(this._b),o.number(this._d),o.number(this._ty)].join(", ")+"]]"},reset:function(o){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,o||this._changed(),this},apply:function(o,l){var u=this._owner;return u?(u.transform(null,s.pick(o,!0),l),this.isIdentity()):!1},translate:function(){var o=E.read(arguments),l=o.x,u=o.y;return this._tx+=l*this._a+u*this._c,this._ty+=l*this._b+u*this._d,this._changed(),this},scale:function(){var o=arguments,l=E.read(o),u=E.read(o,0,{readNull:!0});return u&&this.translate(u),this._a*=l.x,this._b*=l.x,this._c*=l.y,this._d*=l.y,u&&this.translate(u.negate()),this._changed(),this},rotate:function(o){o*=Math.PI/180;var l=E.read(arguments,1),u=l.x,d=l.y,f=Math.cos(o),m=Math.sin(o),v=u-u*f+d*m,p=d-u*m-d*f,y=this._a,I=this._b,A=this._c,P=this._d;return this._a=f*y+m*A,this._b=f*I+m*P,this._c=-m*y+f*A,this._d=-m*I+f*P,this._tx+=v*y+p*A,this._ty+=v*I+p*P,this._changed(),this},shear:function(){var o=arguments,l=E.read(o),u=E.read(o,0,{readNull:!0});u&&this.translate(u);var d=this._a,f=this._b;return this._a+=l.y*this._c,this._b+=l.y*this._d,this._c+=l.x*d,this._d+=l.x*f,u&&this.translate(u.negate()),this._changed(),this},skew:function(){var o=arguments,l=E.read(o),u=E.read(o,0,{readNull:!0}),d=Math.PI/180,f=new E(Math.tan(l.x*d),Math.tan(l.y*d));return this.shear(f,u)},append:function(o,l){if(o){var u=this._a,d=this._b,f=this._c,m=this._d,v=o._a,p=o._c,y=o._b,I=o._d,A=o._tx,P=o._ty;this._a=v*u+y*f,this._c=p*u+I*f,this._b=v*d+y*m,this._d=p*d+I*m,this._tx+=A*u+P*f,this._ty+=A*d+P*m,l||this._changed()}return this},prepend:function(o,l){if(o){var u=this._a,d=this._b,f=this._c,m=this._d,v=this._tx,p=this._ty,y=o._a,I=o._c,A=o._b,P=o._d,C=o._tx,S=o._ty;this._a=y*u+I*d,this._c=y*f+I*m,this._b=A*u+P*d,this._d=A*f+P*m,this._tx=y*v+I*p+C,this._ty=A*v+P*p+S,l||this._changed()}return this},appended:function(o){return this.clone().append(o)},prepended:function(o){return this.clone().prepend(o)},invert:function(){var o=this._a,l=this._b,u=this._c,d=this._d,f=this._tx,m=this._ty,v=o*d-l*u,p=null;return v&&!isNaN(v)&&isFinite(f)&&isFinite(m)&&(this._a=d/v,this._b=-l/v,this._c=-u/v,this._d=o/v,this._tx=(u*m-d*f)/v,this._ty=(l*f-o*m)/v,p=this),p},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new j(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return this._a===1&&this._b===0&&this._c===0&&this._d===1&&this._tx===0&&this._ty===0},isInvertible:function(){var o=this._a*this._d-this._c*this._b;return o&&!isNaN(o)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(o,l,u){return arguments.length<3?this._transformPoint(E.read(arguments)):this._transformCoordinates(o,l,u)},_transformPoint:function(o,l,u){var d=o.x,f=o.y;return l||(l=new E),l._set(d*this._a+f*this._c+this._tx,d*this._b+f*this._d+this._ty,u)},_transformCoordinates:function(o,l,u){for(var d=0,f=2*u;d<f;d+=2){var m=o[d],v=o[d+1];l[d]=m*this._a+v*this._c+this._tx,l[d+1]=m*this._b+v*this._d+this._ty}return l},_transformCorners:function(o){var l=o.x,u=o.y,d=l+o.width,f=u+o.height,m=[l,u,d,u,d,f,l,f];return this._transformCoordinates(m,m,4)},_transformBounds:function(o,l,u){for(var d=this._transformCorners(o),f=d.slice(0,2),m=f.slice(),v=2;v<8;v++){var p=d[v],y=v&1;p<f[y]?f[y]=p:p>m[y]&&(m[y]=p)}return l||(l=new V),l._set(f[0],f[1],m[0]-f[0],m[1]-f[1],u)},inverseTransform:function(){return this._inverseTransform(E.read(arguments))},_inverseTransform:function(o,l,u){var d=this._a,f=this._b,m=this._c,v=this._d,p=this._tx,y=this._ty,I=d*v-f*m,A=null;if(I&&!isNaN(I)&&isFinite(p)&&isFinite(y)){var P=o.x-this._tx,C=o.y-this._ty;l||(l=new E),A=l._set((P*v-C*m)/I,(C*d-P*f)/I,u)}return A},decompose:function(){var o=this._a,l=this._b,u=this._c,d=this._d,f=o*d-l*u,m=Math.sqrt,v=Math.atan2,p=180/Math.PI,y,I,A;if(o!==0||l!==0){var P=m(o*o+l*l);y=Math.acos(o/P)*(l>0?1:-1),I=[P,f/P],A=[v(o*u+l*d,P*P),0]}else if(u!==0||d!==0){var C=m(u*u+d*d);y=Math.asin(u/C)*(d>0?1:-1),I=[f/C,C],A=[0,v(o*u+l*d,C*C)]}else y=0,A=I=[0,0];return{translation:this.getTranslation(),rotation:y*p,scaling:new E(I),skewing:new E(A[0]*p,A[1]*p)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new E(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(o){this.isIdentity()||o.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},s.each(["a","b","c","d","tx","ty"],function(o){var l=s.capitalize(o),u="_"+o;this["get"+l]=function(){return this[u]},this["set"+l]=function(d){this[u]=d,this._changed()}},{})),Z=s.extend({_class:"Line",initialize:function(l,u,d,f,m){var v=!1;arguments.length>=4?(this._px=l,this._py=u,this._vx=d,this._vy=f,v=m):(this._px=l.x,this._py=l.y,this._vx=u.x,this._vy=u.y,v=d),v||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new E(this._px,this._py)},getVector:function(){return new E(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(o,l){return Z.intersect(this._px,this._py,this._vx,this._vy,o._px,o._py,o._vx,o._vy,!0,l)},getSide:function(o,l){return Z.getSide(this._px,this._py,this._vx,this._vy,o.x,o.y,!0,l)},getDistance:function(o){return Math.abs(this.getSignedDistance(o))},getSignedDistance:function(o){return Z.getSignedDistance(this._px,this._py,this._vx,this._vy,o.x,o.y,!0)},isCollinear:function(o){return E.isCollinear(this._vx,this._vy,o._vx,o._vy)},isOrthogonal:function(o){return E.isOrthogonal(this._vx,this._vy,o._vx,o._vy)},statics:{intersect:function(o,l,u,d,f,m,v,p,y,I){y||(u-=o,d-=l,v-=f,p-=m);var A=u*p-d*v;if(!w.isMachineZero(A)){var P=o-f,C=l-m,S=(v*C-p*P)/A,k=(u*C-d*P)/A,M=1e-12,F=-M,N=1+M;if(I||F<S&&S<N&&F<k&&k<N)return I||(S=S<=0?0:S>=1?1:S),new E(o+S*u,l+S*d)}},getSide:function(o,l,u,d,f,m,v,p){v||(u-=o,d-=l);var y=f-o,I=m-l,A=y*d-I*u;return!p&&w.isMachineZero(A)&&(A=(y*u+y*u)/(u*u+d*d),A>=0&&A<=1&&(A=0)),A<0?-1:A>0?1:0},getSignedDistance:function(o,l,u,d,f,m,v){return v||(u-=o,d-=l),u===0?d>0?f-o:o-f:d===0?u<0?m-l:l-m:((f-o)*d-(m-l)*u)/(d>u?d*Math.sqrt(1+u*u/(d*d)):u*Math.sqrt(1+d*d/(u*u)))},getDistance:function(o,l,u,d,f,m,v){return Math.abs(Z.getSignedDistance(o,l,u,d,f,m,v))}}}),ne=h.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(l){h.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new is(null,null,this),this._view=kt.create(this,l||ie.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(o,l){return s.serialize(this._children,o,!0,l)},_changed:function(o,l){if(o&1){var u=this._view;u&&(u._needsUpdate=!0,!u._requested&&u._autoUpdate&&u.requestUpdate())}var d=this._changes;if(d&&l){var f=this._changesById,m=l._id,v=f[m];v?v.flags|=o:d.push(f[m]={item:l,flags:o})}},clear:function(){for(var o=this._children,l=o.length-1;l>=0;l--)o[l].remove()},isEmpty:function(){return!this._children.length},remove:function o(){return o.base.call(this)?(this._view&&this._view.remove(),!0):!1},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(o){this._currentStyle.set(o)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new ce({project:this,insert:!0})},getSymbolDefinitions:function(){var o=[],l={};return this.getItems({class:tt,match:function(u){var d=u._definition,f=d._id;return l[f]||(l[f]=!0,o.push(d)),!1}}),o},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var o=this._selectionItems,l=[];for(var u in o){var d=o[u],f=d._selection;f&1&&d.isInserted()?l.push(d):f||this._updateSelection(d)}return l},_updateSelection:function(o){var l=o._id,u=this._selectionItems;o._selection?u[l]!==o&&(this._selectionCount++,u[l]=o):u[l]===o&&(this._selectionCount--,delete u[l])},selectAll:function(){for(var o=this._children,l=0,u=o.length;l<u;l++)o[l].setFullySelected(!0)},deselectAll:function(){var o=this._selectionItems;for(var l in o)o[l].setFullySelected(!1)},addLayer:function(o){return this.insertLayer(n,o)},insertLayer:function(o,l){if(l instanceof ce){l._remove(!1,!0),s.splice(this._children,[l],o,0),l._setProject(this,!0);var u=l._name;u&&l.setName(u),this._changes&&l._changed(5),this._activeLayer||(this._activeLayer=l)}else l=null;return l},_insertItem:function(o,l,u){return l=this.insertLayer(o,l)||(this._activeLayer||this._insertItem(n,new ce(te.NO_INSERT),!0)).insertChild(o,l),u&&l.activate&&l.activate(),l},getItems:function(o){return te._getItems(this,o)},getItem:function(o){return te._getItems(this,o,null,null,!0)[0]||null},importJSON:function(o){this.activate();var l=this._activeLayer;return s.importJSON(o,l&&l.isEmpty()&&l)},removeOn:function(o){var l=this._removeSets;if(l){o==="mouseup"&&(l.mousedrag=null);var u=l[o];if(u){for(var d in u){var f=u[d];for(var m in l){var v=l[m];v&&v!=u&&delete v[f._id]}f.remove()}l[o]=null}}},draw:function(o,l,u){this._updateVersion++,o.save(),l.applyToContext(o);for(var d=this._children,f=new s({offset:new E(0,0),pixelRatio:u,viewMatrix:l.isIdentity()?null:l,matrices:[new j],updateMatrix:!0}),m=0,v=d.length;m<v;m++)d[m].draw(o,f);if(o.restore(),this._selectionCount>0){o.save(),o.strokeWidth=1;var p=this._selectionItems,y=this._scope.settings.handleSize,I=this._updateVersion;for(var A in p)p[A]._drawSelection(o,l,y,p,I);o.restore()}}}),te=s.extend(a,{statics:{extend:function o(l){return l._serializeFields&&(l._serializeFields=s.set({},this.prototype._serializeFields,l._serializeFields)),o.base.apply(this,arguments)},INSERT:{insert:!0},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new j,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var o=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return s.each(o,function(l){this._events[l]={install:function(u){this.getView()._countItemEvent(u,1)},uninstall:function(u){this.getView()._countItemEvent(u,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:o}})},{initialize:function(){},_initialize:function(o,l){var u=o&&s.isPlainObject(o),d=u&&o.internal===!0,f=this._matrix=new j,m=u&&o.project||de.project,v=de.settings;return this._id=d?null:T.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&v.applyMatrix,l&&f.translate(l),f._owner=this,this._style=new is(m._currentStyle,this,m),d||u&&o.insert==!1||!v.insertItems&&!(u&&o.insert==!0)?this._setProject(m):(u&&o.parent||m)._insertItem(n,this,!0),u&&o!==te.NO_INSERT&&o!==te.INSERT&&this.set(o,{internal:!0,insert:!0,project:!0,parent:!0}),u},_serialize:function(o,l){var u={},d=this;function f(m){for(var v in m){var p=d[v];s.equals(p,v==="leading"?m.fontSize*1.2:m[v])||(u[v]=s.serialize(p,o,v!=="data",l))}}return f(this._serializeFields),this instanceof ae||f(this._style._defaults),[this._class,u]},_changed:function(o){var l=this._symbol,u=this._parent||l,d=this._project;o&8&&(this._bounds=this._position=this._decomposed=n),o&16&&(this._globalMatrix=n),u&&o&72&&te._clearBoundsCache(u),o&2&&te._clearBoundsCache(this),d&&d._changed(o,this),l&&l._changed(o)},getId:function(){return this._id},getName:function(){return this._name},setName:function(o){if(this._name&&this._removeNamed(),o===+o+"")throw new Error("Names consisting only of numbers are not supported.");var l=this._getOwner();if(o&&l){var u=l._children,d=l._namedChildren;(d[o]=d[o]||[]).push(this),o in u||(u[o]=this)}this._name=o||n,this._changed(256)},getStyle:function(){return this._style},setStyle:function(o){this.getStyle().set(o)}},s.each(["locked","visible","blendMode","opacity","guide"],function(o){var l=s.capitalize(o),u="_"+o,d={locked:256,visible:265};this["get"+l]=function(){return this[u]},this["set"+l]=function(f){f!=this[u]&&(this[u]=f,this._changed(d[o]||257))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(o){if(o!==this._selection){this._selection=o;var l=this._project;l&&(l._updateSelection(this),this._changed(257))}},_changeSelection:function(o,l){var u=this._selection;this.setSelection(l?u|o:u&~o)},isSelected:function(){if(this._selectChildren){for(var o=this._children,l=0,u=o.length;l<u;l++)if(o[l].isSelected())return!0}return!!(this._selection&1)},setSelected:function(o){if(this._selectChildren)for(var l=this._children,u=0,d=l.length;u<d;u++)l[u].setSelected(o);this._changeSelection(1,o)},isFullySelected:function(){var o=this._children,l=!!(this._selection&1);if(o&&l){for(var u=0,d=o.length;u<d;u++)if(!o[u].isFullySelected())return!1;return!0}return l},setFullySelected:function(o){var l=this._children;if(l)for(var u=0,d=l.length;u<d;u++)l[u].setFullySelected(o);this._changeSelection(1,o)},isClipMask:function(){return this._clipMask},setClipMask:function(o){this._clipMask!=(o=!!o)&&(this._clipMask=o,o&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(o){this._data=o},getPosition:function(o){var l=o?E:$,u=this._position||(this._position=this._getPositionFromBounds());return new l(u.x,u.y,this,"setPosition")},setPosition:function(){this.translate(E.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(o){return this._pivot?this._matrix._transformPoint(this._pivot):(o||this.getBounds()).getCenter(!0)},getPivot:function(){var o=this._pivot;return o?new $(o.x,o.y,this,"setPivot"):null},setPivot:function(){this._pivot=E.read(arguments,0,{clone:!0,readNull:!0}),this._position=n}},s.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(o,l){this[l]=function(u){return this.getBounds(u,o)}},{beans:!0,getBounds:function(o,l){var u=l||o instanceof j,d=s.set({},u?l:o,this._boundsOptions);(!d.stroke||this.getStrokeScaling())&&(d.cacheItem=this);var f=this._getCachedBounds(u&&o,d).rect;return arguments.length?f:new B(f.x,f.y,f.width,f.height,this,"setBounds")},setBounds:function(){var o=V.read(arguments),l=this.getBounds(),u=this._matrix,d=new j,f=o.getCenter();d.translate(f),(o.width!=l.width||o.height!=l.height)&&(u.isInvertible()||(u.set(u._backup||new j().translate(u.getTranslation())),l=this.getBounds()),d.scale(l.width!==0?o.width/l.width:0,l.height!==0?o.height/l.height:0)),f=l.getCenter(),d.translate(-f.x,-f.y),this.transform(d)},_getBounds:function(o,l){var u=this._children;return!u||!u.length?new V:(te._updateBoundsCache(this,l.cacheItem),te._getBounds(u,o,l))},_getBoundsCacheKey:function(o,l){return[o.stroke?1:0,o.handle?1:0,l?1:0].join("")},_getCachedBounds:function(o,l,u){o=o&&o._orNullIfIdentity();var d=l.internal&&!u,f=l.cacheItem,m=d?null:this._matrix._orNullIfIdentity(),v=f&&(!o||o.equals(m))&&this._getBoundsCacheKey(l,d),p=this._bounds;if(te._updateBoundsCache(this._parent||this._symbol,f),v&&p&&v in p){var y=p[v];return{rect:y.rect.clone(),nonscaling:y.nonscaling}}var I=this._getBounds(o||m,l),A=I.rect||I,P=this._style,C=I.nonscaling||P.hasStroke()&&!P.getStrokeScaling();if(v){p||(this._bounds=p={});var y=p[v]={rect:A.clone(),nonscaling:C,internal:d}}return{rect:A,nonscaling:C}},_getStrokeMatrix:function(o,l){var u=this.getStrokeScaling()?null:l&&l.internal?this:this._parent||this._symbol&&this._symbol._item,d=u?u.getViewMatrix().invert():o;return d&&d._shiftless()},statics:{_updateBoundsCache:function(o,l){if(o&&l){var u=l._id,d=o._boundsCache=o._boundsCache||{ids:{},list:[]};d.ids[u]||(d.list.push(l),d.ids[u]=l)}},_clearBoundsCache:function(o){var l=o._boundsCache;if(l){o._bounds=o._position=o._boundsCache=n;for(var u=0,d=l.list,f=d.length;u<f;u++){var m=d[u];m!==o&&(m._bounds=m._position=n,m._boundsCache&&te._clearBoundsCache(m))}}},_getBounds:function(o,l,u){var d=1/0,f=-d,m=d,v=f,p=!1;u=u||{};for(var y=0,I=o.length;y<I;y++){var A=o[y];if(A._visible&&!A.isEmpty(!0)){var P=A._getCachedBounds(l&&l.appended(A._matrix),u,!0),C=P.rect;d=Math.min(C.x,d),m=Math.min(C.y,m),f=Math.max(C.x+C.width,f),v=Math.max(C.y+C.height,v),P.nonscaling&&(p=!0)}}return{rect:isFinite(d)?new V(d,m,f-d,v-m):new V,nonscaling:p}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var o=this._decompose();return o?o.rotation:0},setRotation:function(o){var l=this.getRotation();if(l!=null&&o!=null){var u=this._decomposed;this.rotate(o-l),u&&(u.rotation=o,this._decomposed=u)}},getScaling:function(){var o=this._decompose(),l=o&&o.scaling;return new $(l?l.x:1,l?l.y:1,this,"setScaling")},setScaling:function(){var o=this.getScaling(),l=E.read(arguments,0,{clone:!0,readNull:!0});if(o&&l&&!o.equals(l)){var u=this.getRotation(),d=this._decomposed,f=new j,m=w.isZero;if(m(o.x)||m(o.y))f.translate(d.translation),u&&f.rotate(u),f.scale(l.x,l.y),this._matrix.set(f);else{var v=this.getPosition(!0);f.translate(v),u&&f.rotate(u),f.scale(l.x/o.x,l.y/o.y),u&&f.rotate(-u),f.translate(v.negate()),this.transform(f)}d&&(d.scaling=l,this._decomposed=d)}},getMatrix:function(){return this._matrix},setMatrix:function(){var o=this._matrix;o.set.apply(o,arguments)},getGlobalMatrix:function(o){var l=this._globalMatrix;if(l)for(var u=this._parent,d=[];u;){if(!u._globalMatrix){l=null;for(var f=0,m=d.length;f<m;f++)d[f]._globalMatrix=null;break}d.push(u),u=u._parent}if(!l){l=this._globalMatrix=this._matrix.clone();var u=this._parent;u&&l.prepend(u.getGlobalMatrix(!0))}return o?l:l.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(o){(this._applyMatrix=this._canApplyMatrix&&!!o)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(o,l){if(this._project!==o){this._project&&this._installEvents(!1),this._project=o;for(var u=this._children,d=0,f=u&&u.length;d<f;d++)u[d]._setProject(o);l=!0}l&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function o(l){o.base.call(this,l);for(var u=this._children,d=0,f=u&&u.length;d<f;d++)u[d]._installEvents(l)},getLayer:function(){for(var o=this;o=o._parent;)if(o instanceof ce)return o;return null},getParent:function(){return this._parent},setParent:function(o){return o.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(o){this.removeChildren(),this.addChildren(o)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var o=this._getOwner();return o&&o._children[this._index+1]||null},getPreviousSibling:function(){var o=this._getOwner();return o&&o._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(o){return o===this||o&&this._class===o._class&&this._style.equals(o._style)&&this._matrix.equals(o._matrix)&&this._locked===o._locked&&this._visible===o._visible&&this._blendMode===o._blendMode&&this._opacity===o._opacity&&this._clipMask===o._clipMask&&this._guide===o._guide&&this._equals(o)||!1},_equals:function(o){return s.equals(this._children,o._children)},clone:function(o){var l=new this.constructor(te.NO_INSERT),u=this._children,d=s.pick(o?o.insert:n,o===n||o===!0),f=s.pick(o?o.deep:n,!0);u&&l.copyAttributes(this),(!u||f)&&l.copyContent(this),u||l.copyAttributes(this),d&&l.insertAbove(this);var m=this._name,v=this._parent;if(m&&v){for(var u=v._children,p=m,y=1;u[m];)m=p+" "+y++;m!==p&&l.setName(m)}return l},copyContent:function(o){for(var l=o._children,u=0,d=l&&l.length;u<d;u++)this.addChild(l[u].clone(!1),!0)},copyAttributes:function(o,l){this.setStyle(o._style);for(var u=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],d=0,f=u.length;d<f;d++){var m=u[d];o.hasOwnProperty(m)&&(this[m]=o[m])}l||this._matrix.set(o._matrix,!0),this.setApplyMatrix(o._applyMatrix),this.setPivot(o._pivot),this.setSelection(o._selection);var v=o._data,p=o._name;this._data=v?s.clone(v):null,p&&this.setName(p)},rasterize:function(o,l){var u,d,f;s.isPlainObject(o)?(u=o.resolution,d=o.insert,f=o.raster):(u=o,d=l),f||(f=new me(te.NO_INSERT));var m=this.getStrokeBounds(),v=(u||this.getView().getResolution())/72,p=m.getTopLeft().floor(),y=m.getBottomRight().ceil(),I=new U(y.subtract(p)),A=I.multiply(v);if(f.setSize(A,!0),!A.isZero()){var P=f.getContext(!0),C=new j().scale(v).translate(p.negate());P.save(),C.applyToContext(P),this.draw(P,new s({matrices:[C]})),P.restore()}return f._matrix.set(new j().translate(p.add(I.divide(2))).scale(1/v)),(d===n||d)&&f.insertAbove(this),f},contains:function(){var o=this._matrix;return o.isInvertible()&&!!this._contains(o._inverseTransform(E.read(arguments)))},_contains:function(o){var l=this._children;if(l){for(var u=l.length-1;u>=0;u--)if(l[u].contains(o))return!0;return!1}return o.isInside(this.getInternalBounds())},isInside:function(){return V.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new Te.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(o,l){return o instanceof te?this._asPathItem().getIntersections(o._asPathItem(),null,l,!0).length>0:!1}},new function(){function o(){var d=arguments;return this._hitTest(E.read(d),xe.getOptions(d))}function l(){var d=arguments,f=E.read(d),m=xe.getOptions(d),v=[];return this._hitTest(f,new s({all:v},m)),v}function u(d,f,m,v){var p=this._children;if(p)for(var y=p.length-1;y>=0;y--){var I=p[y],A=I!==v&&I._hitTest(d,f,m);if(A&&!f.all)return A}return null}return ne.inject({hitTest:o,hitTestAll:l,_hitTest:u}),{hitTest:o,hitTestAll:l,_hitTestChildren:u}},{_hitTest:function(o,l,u){if(this._locked||!this._visible||this._guide&&!l.guides||this.isEmpty())return null;var d=this._matrix,f=u?u.appended(d):this.getGlobalMatrix().prepend(this.getView()._matrix),m=Math.max(l.tolerance,1e-12),v=l._tolerancePadding=new U(Te._getStrokePadding(m,d._shiftless().invert()));if(o=d._inverseTransform(o),!o||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(v.multiply(2))._containsPoint(o))return null;var p=!(l.guides&&!this._guide||l.selected&&!this.isSelected()||l.type&&l.type!==s.hyphenate(this._class)||l.class&&!(this instanceof l.class)),y=l.match,I=this,A,P;function C(x){return x&&y&&!y(x)&&(x=null),x&&l.all&&l.all.push(x),x}function S(x,b){var O=b?A["get"+b]():I.getPosition();if(o.subtract(O).divide(v).length<=1)return new xe(x,I,{name:b?s.hyphenate(b):x,point:O})}var k=l.position,M=l.center,F=l.bounds;if(p&&this._parent&&(k||M||F)){if((M||F)&&(A=this.getInternalBounds()),P=k&&S("position")||M&&S("center","Center"),!P&&F)for(var N=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],D=0;D<8&&!P;D++)P=S("bounds",N[D]);P=C(P)}return P||(P=this._hitTestChildren(o,l,f)||p&&C(this._hitTestSelf(o,l,f,this.getStrokeScaling()?null:f._shiftless().invert()))||null),P&&P.point&&(P.point=d.transform(P.point)),P},_hitTestSelf:function(o,l){if(l.fill&&this.hasFill()&&this._contains(o))return new xe("fill",this)},matches:function(o,l){function u(v,p){for(var y in v)if(v.hasOwnProperty(y)){var I=v[y],A=p[y];if(s.isPlainObject(I)&&s.isPlainObject(A)){if(!u(I,A))return!1}else if(!s.equals(I,A))return!1}return!0}var d=typeof o;if(d==="object"){for(var f in o)if(o.hasOwnProperty(f)&&!this.matches(f,o[f]))return!1;return!0}else{if(d==="function")return o(this);if(o==="match")return l(this);var m=/^(empty|editable)$/.test(o)?this["is"+s.capitalize(o)]():o==="type"?s.hyphenate(this._class):this[o];if(o==="class"){if(typeof l=="function")return this instanceof l;m=this._class}if(typeof l=="function")return!!l(m);if(l){if(l.test)return l.test(m);if(s.isPlainObject(l))return u(l,m)}return s.equals(m,l)}},getItems:function(o){return te._getItems(this,o,this._matrix)},getItem:function(o){return te._getItems(this,o,this._matrix,null,!0)[0]||null},statics:{_getItems:function o(l,u,d,f,m){if(!f){var v=typeof u=="object"&&u,p=v&&v.overlapping,y=v&&v.inside,I=p||y,C=I&&V.read([I]);f={items:[],recursive:v&&v.recursive!==!1,inside:!!y,overlapping:!!p,rect:C,path:p&&new Te.Rectangle({rectangle:C,insert:!1})},v&&(u=s.filter({},u,{recursive:!0,inside:!0,overlapping:!0}))}var A=l._children,P=f.items,C=f.rect;d=C&&(d||new j);for(var S=0,k=A&&A.length;S<k;S++){var M=A[S],F=d&&d.appended(M._matrix),N=!0;if(C){var I=M.getBounds(F);if(!C.intersects(I))continue;C.contains(I)||f.overlapping&&(I.contains(C)||f.path.intersects(M,F))||(N=!1)}if(N&&M.matches(u)&&(P.push(M),m)||(f.recursive!==!1&&o(M,u,F,f,m),m&&P.length>0))break}return P}}},{importJSON:function(o){var l=s.importJSON(o,this);return l!==this?this.addChild(l):l},addChild:function(o){return this.insertChild(n,o)},insertChild:function(o,l){var u=l?this.insertChildren(o,[l]):null;return u&&u[0]},addChildren:function(o){return this.insertChildren(this._children.length,o)},insertChildren:function(o,l){var u=this._children;if(u&&l&&l.length>0){l=s.slice(l);for(var d={},f=l.length-1;f>=0;f--){var m=l[f],v=m&&m._id;!m||d[v]?l.splice(f,1):(m._remove(!1,!0),d[v]=!0)}s.splice(u,l,o,0);for(var p=this._project,y=p._changes,f=0,I=l.length;f<I;f++){var m=l[f],A=m._name;m._parent=this,m._setProject(p,!0),A&&m.setName(A),y&&m._changed(5)}this._changed(11)}else l=null;return l},_insertItem:"#insertChild",_insertAt:function(o,l){var u=o&&o._getOwner(),d=o!==this&&u?this:null;return d&&(d._remove(!1,!0),u._insertItem(o._index+l,d)),d},insertAbove:function(o){return this._insertAt(o,1)},insertBelow:function(o){return this._insertAt(o,0)},sendToBack:function(){var o=this._getOwner();return o?o._insertItem(0,this):null},bringToFront:function(){var o=this._getOwner();return o?o._insertItem(n,this):null},appendTop:"#addChild",appendBottom:function(o){return this.insertChild(0,o)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(o){return o._insertItem(n,this)},copyTo:function(o){return this.clone(!1).addTo(o)},reduce:function(o){var l=this._children;if(l&&l.length===1){var u=l[0].reduce(o);return this._parent?(u.insertAbove(this),this.remove()):u.remove(),u}return this},_removeNamed:function(){var o=this._getOwner();if(o){var l=o._children,u=o._namedChildren,d=this._name,f=u[d],m=f?f.indexOf(this):-1;m!==-1&&(l[d]==this&&delete l[d],f.splice(m,1),f.length?l[d]=f[0]:delete u[d])}},_remove:function(o,l){var u=this._getOwner(),d=this._project,f=this._index;return this._style&&this._style._dispose(),u?(this._name&&this._removeNamed(),f!=null&&(d._activeLayer===this&&(d._activeLayer=this.getNextSibling()||this.getPreviousSibling()),s.splice(u._children,null,f,1)),this._installEvents(!1),o&&d._changes&&this._changed(5),l&&u._changed(11,this),this._parent=null,!0):!1},remove:function(){return this._remove(!0,!0)},replaceWith:function(o){var l=o&&o.insertBelow(this);return l&&this.remove(),l},removeChildren:function(o,l){if(!this._children)return null;o=o||0,l=s.pick(l,this._children.length);for(var u=s.splice(this._children,null,o,l-o),d=u.length-1;d>=0;d--)u[d]._remove(!0,!1);return u.length>0&&this._changed(11),u},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var o=0,l=this._children.length;o<l;o++)this._children[o]._index=o;this._changed(11)}},isEmpty:function(o){var l=this._children,u=l?l.length:0;if(o){for(var d=0;d<u;d++)if(!l[d].isEmpty(o))return!1;return!0}return!u},isEditable:function(){for(var o=this;o;){if(!o._visible||o._locked)return!1;o=o._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(o){function l(v){var p=[];do p.unshift(v);while(v=v._parent);return p}for(var u=l(this),d=l(o),f=0,m=Math.min(u.length,d.length);f<m;f++)if(u[f]!=d[f])return u[f]._index<d[f]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return this._parent?this._parent.isInserted():!1},isAbove:function(o){return this._getOrder(o)===-1},isBelow:function(o){return this._getOrder(o)===1},isParent:function(o){return this._parent===o},isChild:function(o){return o&&o._parent===this},isDescendant:function(o){for(var l=this;l=l._parent;)if(l===o)return!0;return!1},isAncestor:function(o){return o?o.isDescendant(this):!1},isSibling:function(o){return this._parent===o._parent},isGroupedWith:function(o){for(var l=this._parent;l;){if(l._parent&&/^(Group|Layer|CompoundPath)$/.test(l._class)&&o.isDescendant(l))return!0;l=l._parent}return!1}},s.each(["rotate","scale","shear","skew"],function(o){var l=o==="rotate";this[o]=function(){var u=arguments,d=(l?s:E).read(u),f=E.read(u,0,{readNull:!0});return this.transform(new j()[o](d,f||this.getPosition(!0)))}},{translate:function(){var o=new j;return this.transform(o.translate.apply(o,arguments))},transform:function(o,l,u){var d=this._matrix,f=o&&!o.isIdentity(),m=u&&this._canApplyMatrix||this._applyMatrix&&(f||!d.isIdentity()||l&&this._children);if(!f&&!m)return this;if(f){!o.isInvertible()&&d.isInvertible()&&(d._backup=d.getValues()),d.prepend(o,!0);var v=this._style,p=v.getFillColor(!0),y=v.getStrokeColor(!0);p&&p.transform(o),y&&y.transform(o)}if(m&&(m=this._transformContent(d,l,u))){var I=this._pivot;I&&d._transformPoint(I,I,!0),d.reset(!0),u&&this._canApplyMatrix&&(this._applyMatrix=!0)}var A=this._bounds,P=this._position;(f||m)&&this._changed(25);var C=f&&A&&o.decompose();if(C&&C.skewing.isZero()&&C.rotation%90===0){for(var S in A){var k=A[S];if(k.nonscaling)delete A[S];else if(m||!k.internal){var M=k.rect;o._transformBounds(M,M)}}this._bounds=A;var F=A[this._getBoundsCacheKey(this._boundsOptions||{})];F&&(this._position=this._getPositionFromBounds(F.rect))}else f&&P&&this._pivot&&(this._position=o._transformPoint(P,P));return this},_transformContent:function(o,l,u){var d=this._children;if(d){for(var f=0,m=d.length;f<m;f++)d[f].transform(o,l,u);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(E.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(E.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(E.read(arguments))},localToParent:function(){return this._matrix._transformPoint(E.read(arguments))},fitBounds:function(o,l){o=V.read(arguments);var u=this.getBounds(),d=u.height/u.width,f=o.height/o.width,m=(l?d>f:d<f)?o.width/u.width:o.height/u.height,v=new V(new E,new U(u.width*m,u.height*m));v.setCenter(o.getCenter()),this.setBounds(v)}}),{_setStyles:function(o,l,u){var d=this._style,f=this._matrix;if(d.hasFill()&&(o.fillStyle=d.getFillColor().toCanvasStyle(o,f)),d.hasStroke()){o.strokeStyle=d.getStrokeColor().toCanvasStyle(o,f),o.lineWidth=d.getStrokeWidth();var m=d.getStrokeJoin(),v=d.getStrokeCap(),p=d.getMiterLimit();if(m&&(o.lineJoin=m),v&&(o.lineCap=v),p&&(o.miterLimit=p),de.support.nativeDash){var y=d.getDashArray(),I=d.getDashOffset();y&&y.length&&("setLineDash"in o?(o.setLineDash(y),o.lineDashOffset=I):(o.mozDash=y,o.mozDashOffset=I))}}if(d.hasShadow()){var A=l.pixelRatio||1,P=u._shiftless().prepend(new j().scale(A,A)),C=P.transform(new E(d.getShadowBlur(),0)),S=P.transform(this.getShadowOffset());o.shadowColor=d.getShadowColor().toCanvasStyle(o),o.shadowBlur=C.getLength(),o.shadowOffsetX=S.x,o.shadowOffsetY=S.y}},draw:function(o,l,u){if(this._updateVersion=this._project._updateVersion,!(!this._visible||this._opacity===0)){var d=l.matrices,f=l.viewMatrix,m=this._matrix,v=d[d.length-1].appended(m);if(v.isInvertible()){f=f?f.appended(v):v,d.push(v),l.updateMatrix&&(this._globalMatrix=v);var p=this._blendMode,y=w.clamp(this._opacity,0,1),I=p==="normal",A=ge.nativeModes[p],P=I&&y===1||l.dontStart||l.clip||(A||I&&y<1)&&this._canComposite(),C=l.pixelRatio||1,S,k,M;if(!P){var F=this.getStrokeBounds(f);if(!F.width||!F.height){d.pop();return}M=l.offset,k=l.offset=F.getTopLeft().floor(),S=o,o=ie.getContext(F.getSize().ceil().add(1).multiply(C)),C!==1&&o.scale(C,C)}o.save();var N=u?u.appended(m):this._canScaleStroke&&!this.getStrokeScaling(!0)&&f,D=!P&&l.clipItem,x=!N||D;if(P?(o.globalAlpha=y,A&&(o.globalCompositeOperation=p)):x&&o.translate(-k.x,-k.y),x&&(P?m:f).applyToContext(o),D&&l.clipItem.draw(o,l.extend({clip:!0})),N){o.setTransform(C,0,0,C,0,0);var b=l.offset;b&&o.translate(-b.x,-b.y)}this._draw(o,l,f,N),o.restore(),d.pop(),l.clip&&!l.dontFinish&&o.clip(this.getFillRule()),P||(ge.process(p,o,S,y,k.subtract(M).multiply(C)),ie.release(o),l.offset=M)}}},_isUpdated:function(o){var l=this._parent;if(l instanceof De)return l._isUpdated(o);var u=this._updateVersion===o;return!u&&l&&l._visible&&l._isUpdated(o)&&(this._updateVersion=o,u=!0),u},_drawSelection:function(o,l,u,d,f){var m=this._selection,v=m&1,p=m&2||v&&this._selectBounds,y=m&4;if(this._drawSelected||(v=!1),(v||p||y)&&this._isUpdated(f)){var I,A=this.getSelectedColor(!0)||(I=this.getLayer())&&I.getSelectedColor(!0),P=l.appended(this.getGlobalMatrix(!0)),C=u/2;if(o.strokeStyle=o.fillStyle=A?A.toCanvasStyle(o):"#009dec",v&&this._drawSelected(o,P,d),y){var S=this.getPosition(!0),k=this._parent,M=k?k.localToGlobal(S):S,F=M.x,N=M.y;o.beginPath(),o.arc(F,N,C,0,Math.PI*2,!0),o.stroke();for(var D=[[0,-1],[1,0],[0,1],[-1,0]],x=C,b=u+1,O=0;O<4;O++){var L=D[O],z=L[0],q=L[1];o.moveTo(F+z*x,N+q*x),o.lineTo(F+z*b,N+q*b),o.stroke()}}if(p){var H=P._transformCorners(this.getInternalBounds());o.beginPath();for(var O=0;O<8;O++)o[O?"lineTo":"moveTo"](H[O],H[++O]);o.closePath(),o.stroke();for(var O=0;O<8;O++)o.fillRect(H[O]-C,H[++O]-C,u,u)}}},_canComposite:function(){return!1}},s.each(["down","drag","up","move"],function(o){this["removeOn"+s.capitalize(o)]=function(){var l={};return l[o]=!0,this.removeOn(l)}},{removeOn:function(o){for(var l in o)if(o[l]){var u="mouse"+l,d=this._project,f=d._removeSets=d._removeSets||{};f[u]=f[u]||{},f[u][this._id]=this}return this}}),{tween:function(o,l,u){u||(u=l,l=o,o=null,u||(u=l,l=null));var d=u&&u.easing,f=u&&u.start,m=u!=null&&(typeof u=="number"?u:u.duration),v=new fd(this,o,l,m,d,f);function p(y){v._handleFrame(y.time*1e3),v.running||this.off("frame",p)}return m&&this.on("frame",p),v},tweenTo:function(o,l){return this.tween(null,o,l)},tweenFrom:function(o,l){return this.tween(o,null,l)}}),ae=te.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(l){this._children=[],this._namedChildren={},this._initialize(l)||this.addChildren(Array.isArray(l)?l:arguments)},_changed:function o(l){o.base.call(this,l),l&2050&&(this._clipItem=n)},_getClipItem:function(){var o=this._clipItem;if(o===n){o=null;for(var l=this._children,u=0,d=l.length;u<d;u++)if(l[u]._clipMask){o=l[u];break}this._clipItem=o}return o},isClipped:function(){return!!this._getClipItem()},setClipped:function(o){var l=this.getFirstChild();l&&l.setClipMask(o)},_getBounds:function o(l,u){var d=this._getClipItem();return d?d._getCachedBounds(d._matrix.prepended(l),s.set({},u,{stroke:!1})):o.base.call(this,l,u)},_hitTestChildren:function o(l,u,d){var f=this._getClipItem();return(!f||f.contains(l))&&o.base.call(this,l,u,d,f)},_draw:function(o,l){var u=l.clip,d=!u&&this._getClipItem();l=l.extend({clipItem:d,clip:!1}),u?(o.beginPath(),l.dontStart=l.dontFinish=!0):d&&d.draw(o,l.extend({clip:!0}));for(var f=this._children,m=0,v=f.length;m<v;m++){var p=f[m];p!==d&&p.draw(o,l)}}}),ce=ae.extend({_class:"Layer",initialize:function(){ae.apply(this,arguments)},_getOwner:function(){return this._parent||this._index!=null&&this._project},isInserted:function o(){return this._parent?o.base.call(this):this._index!=null},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),_e=te.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(l,u){this._initialize(l,u)},_equals:function(o){return this._type===o._type&&this._size.equals(o._size)&&s.equals(this._radius,o._radius)},copyContent:function(o){this.setType(o._type),this.setSize(o._size),this.setRadius(o._radius)},getType:function(){return this._type},setType:function(o){this._type=o},getShape:"#getType",setShape:"#setType",getSize:function(){var o=this._size;return new J(o.width,o.height,this,"setSize")},setSize:function(){var o=U.read(arguments);if(!this._size)this._size=o.clone();else if(!this._size.equals(o)){var l=this._type,u=o.width,d=o.height;l==="rectangle"?this._radius.set(U.min(this._radius,o.divide(2).abs())):l==="circle"?(u=d=(u+d)/2,this._radius=u/2):l==="ellipse"&&this._radius._set(u/2,d/2),this._size._set(u,d),this._changed(9)}},getRadius:function(){var o=this._radius;return this._type==="circle"?o:new J(o.width,o.height,this,"setRadius")},setRadius:function(o){var l=this._type;if(l==="circle"){if(o===this._radius)return;var u=o*2;this._radius=o,this._size._set(u,u)}else if(o=U.read(arguments),!this._radius)this._radius=o.clone();else{if(this._radius.equals(o))return;if(this._radius.set(o),l==="rectangle"){var u=U.max(this._size,o.multiply(2));this._size.set(u)}else l==="ellipse"&&this._size._set(o.width*2,o.height*2)}this._changed(9)},isEmpty:function(){return!1},toPath:function(o){var l=new Te[s.capitalize(this._type)]({center:new E,size:this._size,radius:this._radius,insert:!1});return l.copyAttributes(this),de.settings.applyMatrix&&l.setApplyMatrix(!0),(o===n||o)&&l.insertAbove(this),l},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(o,l,u,d){var f=this._style,m=f.hasFill(),v=f.hasStroke(),p=l.dontFinish||l.clip,y=!d;if(m||v||p){var I=this._type,A=this._radius,P=I==="circle";if(l.dontStart||o.beginPath(),y&&P)o.arc(0,0,A,0,Math.PI*2,!0);else{var C=P?A:A.width,S=P?A:A.height,k=this._size,M=k.width,F=k.height;if(y&&I==="rectangle"&&C===0&&S===0)o.rect(-M/2,-F/2,M,F);else{var N=M/2,D=F/2,x=1-.5522847498307936,b=C*x,O=S*x,L=[-N,-D+S,-N,-D+O,-N+b,-D,-N+C,-D,N-C,-D,N-b,-D,N,-D+O,N,-D+S,N,D-S,N,D-O,N-b,D,N-C,D,-N+C,D,-N+b,D,-N,D-O,-N,D-S];d&&d.transform(L,L,32),o.moveTo(L[0],L[1]),o.bezierCurveTo(L[2],L[3],L[4],L[5],L[6],L[7]),N!==C&&o.lineTo(L[8],L[9]),o.bezierCurveTo(L[10],L[11],L[12],L[13],L[14],L[15]),D!==S&&o.lineTo(L[16],L[17]),o.bezierCurveTo(L[18],L[19],L[20],L[21],L[22],L[23]),N!==C&&o.lineTo(L[24],L[25]),o.bezierCurveTo(L[26],L[27],L[28],L[29],L[30],L[31])}}o.closePath()}!p&&(m||v)&&(this._setStyles(o,l,u),m&&(o.fill(f.getFillRule()),o.shadowColor="rgba(0,0,0,0)"),v&&o.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(o,l){var u=new V(this._size).setCenter(0,0),d=this._style,f=l.stroke&&d.hasStroke()&&d.getStrokeWidth();return o&&(u=o._transformBounds(u)),f?u.expand(Te._getStrokePadding(f,this._getStrokeMatrix(o,l))):u}},new function(){function o(u,d,f){var m=u._radius;if(!m.isZero())for(var v=u._size.divide(2),p=1;p<=4;p++){var y=new E(p>1&&p<4?-1:1,p>2?-1:1),I=y.multiply(v),A=I.subtract(y.multiply(m)),P=new V(f?I.add(y.multiply(f)):I,A);if(P.contains(d))return{point:A,quadrant:p}}}function l(u,d,f,m){var v=u.divide(d);return(!m||v.isInQuadrant(m))&&v.subtract(v.normalize()).multiply(d).divide(f).length<=1}return{_contains:function u(d){if(this._type==="rectangle"){var f=o(this,d);return f?d.subtract(f.point).divide(this._radius).getLength()<=1:u.base.call(this,d)}else return d.divide(this.size).getLength()<=.5},_hitTestSelf:function u(d,f,m,v){var p=!1,y=this._style,I=f.stroke&&y.hasStroke(),A=f.fill&&y.hasFill();if(I||A){var P=this._type,C=this._radius,S=I?y.getStrokeWidth()/2:0,k=f._tolerancePadding.add(Te._getStrokePadding(S,!y.getStrokeScaling()&&v));if(P==="rectangle"){var M=k.multiply(2),F=o(this,d,M);if(F)p=l(d.subtract(F.point),C,k,F.quadrant);else{var N=new V(this._size).setCenter(0,0),D=N.expand(M),x=N.expand(M.negate());p=D._containsPoint(d)&&!x._containsPoint(d)}}else p=l(d,C,k)}return p?new xe(I?"stroke":"fill",this):u.base.apply(this,arguments)}}},{statics:new function(){function o(l,u,d,f,m){var v=s.create(_e.prototype);return v._type=l,v._size=d,v._radius=f,v._initialize(s.getNamed(m),u),v}return{Circle:function(){var l=arguments,u=E.readNamed(l,"center"),d=s.readNamed(l,"radius");return o("circle",u,new U(d*2),d,l)},Rectangle:function(){var l=arguments,u=V.readNamed(l,"rectangle"),d=U.min(U.readNamed(l,"radius"),u.getSize(!0).divide(2));return o("rectangle",u.getCenter(!0),u.getSize(!0),d,l)},Ellipse:function(){var l=arguments,u=_e._readEllipse(l),d=u.radius;return o("ellipse",u.center,d.multiply(2),d,l)},_readEllipse:function(l){var u,d;if(s.hasNamed(l,"radius"))u=E.readNamed(l,"center"),d=U.readNamed(l,"radius");else{var f=V.readNamed(l,"rectangle");u=f.getCenter(!0),d=f.getSize(!0).divide(2)}return{center:u,radius:d}}}}}),me=te.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:"low",beans:!0,initialize:function(l,u){if(!this._initialize(l,u!==n&&E.read(arguments))){var d,f=typeof l,m=f==="string"?i.getElementById(l):f==="object"?l:null;if(m&&m!==te.NO_INSERT){if(m.getContext||m.naturalHeight!=null)d=m;else if(m){var v=U.read(arguments);v.isZero()||(d=ie.getCanvas(v))}}d?this.setImage(d):this.setSource(l)}this._size||(this._size=new U,this._loaded=!1)},_equals:function(o){return this.getSource()===o.getSource()},copyContent:function(o){var l=o._image,u=o._canvas;if(l)this._setImage(l);else if(u){var d=ie.getCanvas(o._size);d.getContext("2d").drawImage(u,0,0),this._setImage(d)}this._crossOrigin=o._crossOrigin},getSize:function(){var o=this._size;return new J(o?o.width:0,o?o.height:0,this,"setSize")},setSize:function(o,l){var u=U.read(arguments);if(u.equals(this._size))l&&this.clear();else if(u.width>0&&u.height>0){var d=!l&&this.getElement();this._setImage(ie.getCanvas(u)),d&&this.getContext(!0).drawImage(d,0,0,u.width,u.height)}else this._canvas&&ie.release(this._canvas),this._size=u.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(o){this.setSize(o,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(o){this.setSize(this.getWidth(),o)},getLoaded:function(){return this._loaded},isEmpty:function(){var o=this._size;return!o||o.width===0&&o.height===0},getResolution:function(){var o=this._matrix,l=new E(0,0).transform(o),u=new E(1,0).transform(o).subtract(l),d=new E(0,1).transform(o).subtract(l);return new U(72/u.getLength(),72/d.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(o){var l=this;function u(d){var f=l.getView(),m=d&&d.type||"load";f&&l.responds(m)&&(de=f._scope,l.emit(m,new nr(d)))}this._setImage(o),this._loaded?setTimeout(u,0):o&&zt.add(o,{load:function(d){l._setImage(o),u(d)},error:u})},_setImage:function(o){this._canvas&&ie.release(this._canvas),o&&o.getContext?(this._image=null,this._canvas=o,this._loaded=!0):(this._image=o,this._canvas=null,this._loaded=!!(o&&o.src&&o.complete)),this._size=new U(o?o.naturalWidth||o.width:0,o?o.naturalHeight||o.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var o=ie.getContext(this._size);try{this._image&&o.drawImage(this._image,0,0),this._canvas=o.canvas}catch{ie.release(o)}}return this._canvas},setCanvas:"#setImage",getContext:function(o){return this._context||(this._context=this.getCanvas().getContext("2d")),o&&(this._image=null,this._changed(1025)),this._context},setContext:function(o){this._context=o},getSource:function(){var o=this._image;return o&&o.src||this.toDataURL()},setSource:function(o){var l=new e.Image,u=this._crossOrigin;u&&(l.crossOrigin=u),o&&(l.src=o),this.setImage(l)},getCrossOrigin:function(){var o=this._image;return o&&o.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(o){this._crossOrigin=o;var l=this._image;l&&(l.crossOrigin=o)},getSmoothing:function(){return this._smoothing},setSmoothing:function(o){this._smoothing=typeof o=="string"?o:o?"low":"off",this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var o=V.read(arguments),l=ie.getContext(o.getSize());return l.drawImage(this.getCanvas(),o.x,o.y,o.width,o.height,0,0,o.width,o.height),l.canvas},getSubRaster:function(){var o=V.read(arguments),l=new me(te.NO_INSERT);return l._setImage(this.getSubCanvas(o)),l.translate(o.getCenter().subtract(this.getSize().divide(2))),l._matrix.prepend(this._matrix),l.insertAbove(this),l},toDataURL:function(){var o=this._image,l=o&&o.src;if(/^data:/.test(l))return l;var u=this.getCanvas();return u?u.toDataURL.apply(u,arguments):null},drawImage:function(o){var l=E.read(arguments,1);this.getContext(!0).drawImage(o,l.x,l.y)},getAverageColor:function(o){var l,u;if(o?o instanceof Ce?(u=o,l=o.getBounds()):typeof o=="object"&&("width"in o?l=new V(o):"x"in o&&(l=new V(o.x-.5,o.y-.5,1,1))):l=this.getBounds(),!l)return null;var d=32,f=Math.min(l.width,d),m=Math.min(l.height,d),v=me._sampleContext;v?v.clearRect(0,0,d+1,d+1):v=me._sampleContext=ie.getContext(new U(d)),v.save();var p=new j().scale(f/l.width,m/l.height).translate(-l.x,-l.y);p.applyToContext(v),u&&u.draw(v,new s({clip:!0,matrices:[p]})),this._matrix.applyToContext(v);var y=this.getElement(),I=this._size;y&&v.drawImage(y,-I.width/2,-I.height/2),v.restore();for(var A=v.getImageData(.5,.5,Math.ceil(f),Math.ceil(m)).data,P=[0,0,0],C=0,S=0,k=A.length;S<k;S+=4){var M=A[S+3];C+=M,M/=255,P[0]+=A[S]*M,P[1]+=A[S+1]*M,P[2]+=A[S+2]*M}for(var S=0;S<3;S++)P[S]/=C;return C?Qe.read(P):null},getPixel:function(){var o=E.read(arguments),l=this.getContext().getImageData(o.x,o.y,1,1).data;return new Qe("rgb",[l[0]/255,l[1]/255,l[2]/255],l[3]/255)},setPixel:function(){var o=arguments,l=E.read(o),u=Qe.read(o),d=u._convert("rgb"),f=u._alpha,m=this.getContext(!0),v=m.createImageData(1,1),p=v.data;p[0]=d[0]*255,p[1]=d[1]*255,p[2]=d[2]*255,p[3]=f!=null?f*255:255,m.putImageData(v,l.x,l.y)},clear:function(){var o=this._size;this.getContext(!0).clearRect(0,0,o.width+1,o.height+1)},createImageData:function(){var o=U.read(arguments);return this.getContext().createImageData(o.width,o.height)},getImageData:function(){var o=V.read(arguments);return o.isEmpty()&&(o=new V(this._size)),this.getContext().getImageData(o.x,o.y,o.width,o.height)},putImageData:function(o){var l=E.read(arguments,1);this.getContext(!0).putImageData(o,l.x,l.y)},setImageData:function(o){this.setSize(o),this.getContext(!0).putImageData(o,0,0)},_getBounds:function(o,l){var u=new V(this._size).setCenter(0,0);return o?o._transformBounds(u):u},_hitTestSelf:function(o){if(this._contains(o)){var l=this;return new xe("pixel",l,{offset:o.add(l._size.divide(2)).round(),color:{get:function(){return l.getPixel(this.offset)}}})}},_draw:function(o,l,u){var d=this.getElement();if(d&&d.width>0&&d.height>0){o.globalAlpha=w.clamp(this._opacity,0,1),this._setStyles(o,l,u);var f=this._smoothing,m=f==="off";bt.setPrefixed(o,m?"imageSmoothingEnabled":"imageSmoothingQuality",m?!1:f),o.drawImage(d,-this._size.width/2,-this._size.height/2)}},_canComposite:function(){return!0}}),tt=te.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(l,u){this._initialize(l,u!==n&&E.read(arguments,1))||this.setDefinition(l instanceof Le?l:new Le(l))},_equals:function(o){return this._definition===o._definition},copyContent:function(o){this.setDefinition(o._definition)},getDefinition:function(){return this._definition},setDefinition:function(o){this._definition=o,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(o,l){var u=this._definition._item;return u._getCachedBounds(u._matrix.prepended(o),l)},_hitTestSelf:function(o,l,u){var d=l.extend({all:!1}),f=this._definition._item._hitTest(o,d,u);return f&&(f.item=this),f},_draw:function(o,l){this._definition._item.draw(o,l)}}),Le=s.extend({_class:"SymbolDefinition",initialize:function(l,u){this._id=T.get(),this.project=de.project,l&&this.setItem(l,u)},_serialize:function(o,l){return l.add(this,function(){return s.serialize([this._class,this._item],o,!1,l)})},_changed:function(o){o&8&&te._clearBoundsCache(this),o&1&&this.project._changed(o)},getItem:function(){return this._item},setItem:function(o,l){o._symbol&&(o=o.clone()),this._item&&(this._item._symbol=null),this._item=o,o.remove(),o.setSelected(!1),l||o.setPosition(new E),o._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(o){return new tt(this,o)},clone:function(){return new Le(this._item.clone(!1))},equals:function(o){return o===this||o&&this._item.equals(o._item)||!1}}),xe=s.extend({_class:"HitResult",initialize:function(l,u,d){this.type=l,this.item=u,d&&this.inject(d)},statics:{getOptions:function(o){var l=o&&s.read(o);return new s({type:null,tolerance:de.settings.hitTolerance,fill:!l,stroke:!l,segments:!l,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},l)}}}),we=s.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(l,u,d,f,m,v){var p=arguments.length,y,I,A,P;p>0&&(l==null||typeof l=="object"?p===1&&l&&"point"in l?(y=l.point,I=l.handleIn,A=l.handleOut,P=l.selection):(y=l,I=u,A=d,P=f):(y=[l,u],I=d!==n?[d,f]:null,A=m!==n?[m,v]:null)),new nt(y,this,"_point"),new nt(I,this,"_handleIn"),new nt(A,this,"_handleOut"),P&&this.setSelection(P)},_serialize:function(o,l){var u=this._point,d=this._selection,f=d||this.hasHandles()?[u,this._handleIn,this._handleOut]:u;return d&&f.push(d),s.serialize(f,o,!0,l)},_changed:function(o){var l=this._path;if(l){var u=l._curves,d=this._index,f;u&&((!o||o===this._point||o===this._handleIn)&&(f=d>0?u[d-1]:l._closed?u[u.length-1]:null)&&f._changed(),(!o||o===this._point||o===this._handleOut)&&(f=u[d])&&f._changed()),l._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(E.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(E.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(E.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var o=this._handleIn,l=this._handleOut;return!o.isZero()&&!l.isZero()&&o.isCollinear(l)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(o){var l=this._selection,u=this._path;this._selection=o=o||0,u&&o!==l&&(u._updateSelection(this,l,o),u._changed(257))},_changeSelection:function(o,l){var u=this._selection;this.setSelection(l?u|o:u&~o)},isSelected:function(){return!!(this._selection&7)},setSelected:function(o){this._changeSelection(7,o)},getIndex:function(){return this._index!==n?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var o=this._path,l=this._index;return o?(l>0&&!o._closed&&l===o._segments.length-1&&l--,o.getCurves()[l]||null):null},getLocation:function(){var o=this.getCurve();return o?new ot(o,this===o._segment1?0:1):null},getNext:function(){var o=this._path&&this._path._segments;return o&&(o[this._index+1]||this._path._closed&&o[0])||null},smooth:function(o,l,u){var d=o||{},f=d.type,m=d.factor,v=this.getPrevious(),p=this.getNext(),y=(v||this)._point,I=this._point,A=(p||this)._point,P=y.getDistance(I),C=I.getDistance(A);if(!f||f==="catmull-rom"){var S=m===n?.5:m,k=Math.pow(P,S),M=k*k,F=Math.pow(C,S),N=F*F;if(!l&&v){var D=2*N+3*F*k+M,x=3*F*(F+k);this.setHandleIn(x!==0?new E((N*y._x+D*I._x-M*A._x)/x-I._x,(N*y._y+D*I._y-M*A._y)/x-I._y):new E)}if(!u&&p){var D=2*M+3*k*F+N,x=3*k*(k+F);this.setHandleOut(x!==0?new E((M*A._x+D*I._x-N*y._x)/x-I._x,(M*A._y+D*I._y-N*y._y)/x-I._y):new E)}}else if(f==="geometric"){if(v&&p){var b=y.subtract(A),O=m===n?.4:m,L=O*P/(P+C);l||this.setHandleIn(b.multiply(L)),u||this.setHandleOut(b.multiply(L-O))}}else throw new Error("Smoothing method '"+f+"' not supported.")},getPrevious:function(){var o=this._path&&this._path._segments;return o&&(o[this._index-1]||this._path._closed&&o[o.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var o=this._path;return o&&this._index===o._segments.length-1||!1},reverse:function(){var o=this._handleIn,l=this._handleOut,u=o.clone();o.set(l),l.set(u)},reversed:function(){return new we(this._point,this._handleOut,this._handleIn)},remove:function(){return this._path?!!this._path.removeSegment(this._index):!1},clone:function(){return new we(this._point,this._handleIn,this._handleOut)},equals:function(o){return o===this||o&&this._class===o._class&&this._point.equals(o._point)&&this._handleIn.equals(o._handleIn)&&this._handleOut.equals(o._handleOut)||!1},toString:function(){var o=["point: "+this._point];return this._handleIn.isZero()||o.push("handleIn: "+this._handleIn),this._handleOut.isZero()||o.push("handleOut: "+this._handleOut),"{ "+o.join(", ")+" }"},transform:function(o){this._transformCoordinates(o,new Array(6),!0),this._changed()},interpolate:function(o,l,u){var d=1-u,f=u,m=o._point,v=l._point,p=o._handleIn,y=l._handleIn,I=l._handleOut,A=o._handleOut;this._point._set(d*m._x+f*v._x,d*m._y+f*v._y,!0),this._handleIn._set(d*p._x+f*y._x,d*p._y+f*y._y,!0),this._handleOut._set(d*A._x+f*I._x,d*A._y+f*I._y,!0),this._changed()},_transformCoordinates:function(o,l,u){var d=this._point,f=!u||!this._handleIn.isZero()?this._handleIn:null,m=!u||!this._handleOut.isZero()?this._handleOut:null,v=d._x,p=d._y,y=2;return l[0]=v,l[1]=p,f&&(l[y++]=f._x+v,l[y++]=f._y+p),m&&(l[y++]=m._x+v,l[y++]=m._y+p),o&&(o._transformCoordinates(l,l,y/2),v=l[0],p=l[1],u?(d._x=v,d._y=p,y=2,f&&(f._x=l[y++]-v,f._y=l[y++]-p),m&&(m._x=l[y++]-v,m._y=l[y++]-p)):(f||(l[y++]=v,l[y++]=p),m||(l[y++]=v,l[y++]=p))),l}}),nt=E.extend({initialize:function(l,u,d){var f,m,v;if(!l)f=m=0;else if((f=l[0])!==n)m=l[1];else{var p=l;(f=p.x)===n&&(p=E.read(arguments),f=p.x),m=p.y,v=p.selected}this._x=f,this._y=m,this._owner=u,u[d]=this,v&&this.setSelected(!0)},_set:function(o,l){return this._x=o,this._y=l,this._owner._changed(this),this},getX:function(){return this._x},setX:function(o){this._x=o,this._owner._changed(this)},getY:function(){return this._y},setY:function(o){this._y=o,this._owner._changed(this)},isZero:function(){var o=w.isZero;return o(this._x)&&o(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(o){this._owner._changeSelection(this._getSelection(),o)},_getSelection:function(){var o=this._owner;return this===o._point?1:this===o._handleIn?2:this===o._handleOut?4:0}}),he=s.extend({_class:"Curve",beans:!0,initialize:function(l,u,d,f,m,v,p,y){var I=arguments.length,A,P,C,S,k,M;I===3?(this._path=l,A=u,P=d):I?I===1?"segment1"in l?(A=new we(l.segment1),P=new we(l.segment2)):"point1"in l?(C=l.point1,k=l.handle1,M=l.handle2,S=l.point2):Array.isArray(l)&&(C=[l[0],l[1]],S=[l[6],l[7]],k=[l[2]-l[0],l[3]-l[1]],M=[l[4]-l[6],l[5]-l[7]]):I===2?(A=new we(l),P=new we(u)):I===4?(C=l,k=u,M=d,S=f):I===8&&(C=[l,u],S=[p,y],k=[d-l,f-u],M=[m-p,v-y]):(A=new we,P=new we),this._segment1=A||new we(C,null,k),this._segment2=P||new we(S,M,null)},_serialize:function(o,l){return s.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],o,!0,l)},_changed:function(){this._length=this._bounds=n},clone:function(){return new he(this._segment1,this._segment2)},toString:function(){var o=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||o.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||o.push("handle2: "+this._segment2._handleIn),o.push("point2: "+this._segment2._point),"{ "+o.join(", ")+" }"},classify:function(){return he.classify(this.getValues())},remove:function(){var o=!1;if(this._path){var l=this._segment2,u=l._handleOut;o=l.remove(),o&&this._segment1._handleOut.set(u)}return o},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(E.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(E.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(E.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(E.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var o=this._path&&this._path._curves;return o&&(o[this._segment1._index+1]||this._path._closed&&o[0])||null},getPrevious:function(){var o=this._path&&this._path._curves;return o&&(o[this._segment1._index-1]||this._path._closed&&o[o.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var o=this._path;return o&&this._segment1._index===o._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(o){this.getPoint1().setSelected(o),this.getHandle1().setSelected(o),this.getHandle2().setSelected(o),this.getPoint2().setSelected(o)},getValues:function(o){return he.getValues(this._segment1,this._segment2,o)},getPoints:function(){for(var o=this.getValues(),l=[],u=0;u<8;u+=2)l.push(new E(o[u],o[u+1]));return l}},{getLength:function(){return this._length==null&&(this._length=he.getLength(this.getValues(),0,1)),this._length},getArea:function(){return he.getArea(this.getValues())},getLine:function(){return new Z(this._segment1._point,this._segment2._point)},getPart:function(o,l){return new he(he.getPart(this.getValues(),o,l))},getPartLength:function(o,l){return he.getLength(this.getValues(),o,l)},divideAt:function(o){return this.divideAtTime(o&&o.curve===this?o.time:this.getTimeAt(o))},divideAtTime:function(o,l){var u=1e-8,d=1-u,f=null;if(o>=u&&o<=d){var m=he.subdivide(this.getValues(),o),v=m[0],p=m[1],y=l||this.hasHandles(),I=this._segment1,A=this._segment2,P=this._path;y&&(I._handleOut._set(v[2]-v[0],v[3]-v[1]),A._handleIn._set(p[4]-p[6],p[5]-p[7]));var C=v[6],S=v[7],k=new we(new E(C,S),y&&new E(v[4]-C,v[5]-S),y&&new E(p[2]-C,p[3]-S));P?(P.insert(I._index+1,k),f=this.getNext()):(this._segment2=k,this._changed(),f=new he(k,A))}return f},splitAt:function(o){var l=this._path;return l?l.splitAt(o):null},splitAtTime:function(o){return this.splitAt(this.getLocationAtTime(o))},divide:function(o,l){return this.divideAtTime(o===n?.5:l?o:this.getTimeAt(o))},split:function(o,l){return this.splitAtTime(o===n?.5:l?o:this.getTimeAt(o))},reversed:function(){return new he(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(o,l,u,d){var f=o._point,m=o._handleOut,v=l._handleIn,p=l._point,y=f.x,I=f.y,A=p.x,P=p.y,C=d?[y,I,y,I,A,P,A,P]:[y,I,y+m._x,I+m._y,A+v._x,P+v._y,A,P];return u&&u._transformCoordinates(C,C,4),C},subdivide:function(o,l){var u=o[0],d=o[1],f=o[2],m=o[3],v=o[4],p=o[5],y=o[6],I=o[7];l===n&&(l=.5);var A=1-l,P=A*u+l*f,C=A*d+l*m,S=A*f+l*v,k=A*m+l*p,M=A*v+l*y,F=A*p+l*I,N=A*P+l*S,D=A*C+l*k,x=A*S+l*M,b=A*k+l*F,O=A*N+l*x,L=A*D+l*b;return[[u,d,P,C,N,D,O,L],[O,L,x,b,M,F,y,I]]},getMonoCurves:function(o,l){var u=[],d=l?0:1,f=o[d+0],m=o[d+2],v=o[d+4],p=o[d+6];if(f>=m==m>=v&&m>=v==v>=p||he.isStraight(o))u.push(o);else{var y=3*(m-v)-f+p,I=2*(f+v)-4*m,A=m-f,P=1e-8,C=1-P,S=[],k=w.solveQuadratic(y,I,A,S,P,C);if(!k)u.push(o);else{S.sort();var M=S[0],F=he.subdivide(o,M);u.push(F[0]),k>1&&(M=(S[1]-M)/(1-M),F=he.subdivide(F[1],M),u.push(F[0])),u.push(F[1])}}return u},solveCubic:function(o,l,u,d,f,m){var v=o[l],p=o[l+2],y=o[l+4],I=o[l+6],A=0;if(!(v<u&&I<u&&p<u&&y<u||v>u&&I>u&&p>u&&y>u)){var P=3*(p-v),C=3*(y-p)-P,S=I-v-P-C;A=w.solveCubic(S,C,P,v-u,d,f,m)}return A},getTimeOf:function(o,l){var u=new E(o[0],o[1]),d=new E(o[6],o[7]),f=1e-12,m=1e-7,v=l.isClose(u,f)?0:l.isClose(d,f)?1:null;if(v===null)for(var p=[l.x,l.y],y=[],I=0;I<2;I++)for(var A=he.solveCubic(o,I,p[I],y,0,1),P=0;P<A;P++){var C=y[P];if(l.isClose(he.getPoint(o,C),m))return C}return l.isClose(u,m)?0:l.isClose(d,m)?1:null},getNearestTime:function(o,l){if(he.isStraight(o)){var u=o[0],d=o[1],f=o[6],m=o[7],v=f-u,p=m-d,y=v*v+p*p;if(y===0)return 0;var I=((l.x-u)*v+(l.y-d)*p)/y;return I<1e-12?0:I>.999999999999?1:he.getTimeOf(o,new E(u+I*v,d+I*p))}var A=100,P=1/0,C=0;function S(F){if(F>=0&&F<=1){var N=l.getDistance(he.getPoint(o,F),!0);if(N<P)return P=N,C=F,!0}}for(var k=0;k<=A;k++)S(k/A);for(var M=1/(A*2);M>1e-8;)!S(C-M)&&!S(C+M)&&(M/=2);return C},getPart:function(o,l,u){var d=l>u;if(d){var f=l;l=u,u=f}return l>0&&(o=he.subdivide(o,l)[1]),u<1&&(o=he.subdivide(o,(u-l)/(1-l))[0]),d?[o[6],o[7],o[4],o[5],o[2],o[3],o[0],o[1]]:o},isFlatEnough:function(o,l){var u=o[0],d=o[1],f=o[2],m=o[3],v=o[4],p=o[5],y=o[6],I=o[7],A=3*f-2*u-y,P=3*m-2*d-I,C=3*v-2*y-u,S=3*p-2*I-d;return Math.max(A*A,C*C)+Math.max(P*P,S*S)<=16*l*l},getArea:function(o){var l=o[0],u=o[1],d=o[2],f=o[3],m=o[4],v=o[5],p=o[6],y=o[7];return 3*((y-u)*(d+m)-(p-l)*(f+v)+f*(l-m)-d*(u-v)+y*(m+l/3)-p*(v+u/3))/20},getBounds:function(o){for(var l=o.slice(0,2),u=l.slice(),d=[0,0],f=0;f<2;f++)he._addBounds(o[f],o[f+2],o[f+4],o[f+6],f,0,l,u,d);return new V(l[0],l[1],u[0]-l[0],u[1]-l[1])},_addBounds:function(o,l,u,d,f,m,v,p,y){function I(O,L){var z=O-L,q=O+L;z<v[f]&&(v[f]=z),q>p[f]&&(p[f]=q)}m/=2;var A=v[f]+m,P=p[f]-m;if(o<A||l<A||u<A||d<A||o>P||l>P||u>P||d>P)if(l<o!=l<d&&u<o!=u<d)I(o,0),I(d,0);else{var C=3*(l-u)-o+d,S=2*(o+u)-4*l,k=l-o,M=w.solveQuadratic(C,S,k,y),F=1e-8,N=1-F;I(d,0);for(var D=0;D<M;D++){var x=y[D],b=1-x;F<=x&&x<=N&&I(b*b*b*o+3*b*b*x*l+3*b*x*x*u+x*x*x*d,m)}}}}},s.each(["getBounds","getStrokeBounds","getHandleBounds"],function(o){this[o]=function(){this._bounds||(this._bounds={});var l=this._bounds[o];return l||(l=this._bounds[o]=Te[o]([this._segment1,this._segment2],!1,this._path)),l.clone()}},{}),s.each({isStraight:function(o,l,u,d){if(l.isZero()&&u.isZero())return!0;var f=d.subtract(o);if(f.isZero())return!1;if(f.isCollinear(l)&&f.isCollinear(u)){var m=new Z(o,d),v=1e-7;if(m.getDistance(o.add(l))<v&&m.getDistance(d.add(u))<v){var p=f.dot(f),y=f.dot(l)/p,I=f.dot(u)/p;return y>=0&&y<=1&&I<=0&&I>=-1}}return!1},isLinear:function(o,l,u,d){var f=d.subtract(o).divide(3);return l.equals(f)&&u.negate().equals(f)}},function(o,l){this[l]=function(u){var d=this._segment1,f=this._segment2;return o(d._point,d._handleOut,f._handleIn,f._point,u)},this.statics[l]=function(u,d){var f=u[0],m=u[1],v=u[6],p=u[7];return o(new E(f,m),new E(u[2]-f,u[3]-m),new E(u[4]-v,u[5]-p),new E(v,p),d)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(o){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(o||0)},isCollinear:function(o){return o&&this.isStraight()&&o.isStraight()&&this.getLine().isCollinear(o.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(o,l){return this.getLocationAtTime(l?o:this.getTimeAt(o))},getLocationAtTime:function(o){return o!=null&&o>=0&&o<=1?new ot(this,o):null},getTimeAt:function(o,l){return he.getTimeAt(this.getValues(),o,l)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var o=E.read(arguments);return o.isZero()?[]:he.getTimesWithTangent(this.getValues(),o)},getOffsetAtTime:function(o){return this.getPartLength(0,o)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(E.read(arguments)))},getOffsetOf:function(){var o=this.getLocationOf.apply(this,arguments);return o?o.getOffset():null},getTimeOf:function(){return he.getTimeOf(this.getValues(),E.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var o=E.read(arguments),l=this.getValues(),u=he.getNearestTime(l,o),d=he.getPoint(l,u);return new ot(this,u,d,null,o.getDistance(d))},getNearestPoint:function(){var o=this.getNearestLocation.apply(this,arguments);return o&&o.getPoint()}},new function(){var o=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return s.each(o,function(l){this[l+"At"]=function(u,d){var f=this.getValues();return he[l](f,d?u:he.getTimeAt(f,u))},this[l+"AtTime"]=function(u){return he[l](this.getValues(),u)}},{statics:{_evaluateMethods:o}})},new function(){function o(d){var f=d[0],m=d[1],v=d[2],p=d[3],y=d[4],I=d[5],A=d[6],P=d[7],C=9*(v-y)+3*(A-f),S=6*(f+y)-12*v,k=3*(v-f),M=9*(p-I)+3*(P-m),F=6*(m+I)-12*p,N=3*(p-m);return function(D){var x=(C*D+S)*D+k,b=(M*D+F)*D+N;return Math.sqrt(x*x+b*b)}}function l(d,f){return Math.max(2,Math.min(16,Math.ceil(Math.abs(f-d)*32)))}function u(d,f,m,v){if(f==null||f<0||f>1)return null;var p=d[0],y=d[1],I=d[2],A=d[3],P=d[4],C=d[5],S=d[6],k=d[7],M=w.isZero;M(I-p)&&M(A-y)&&(I=p,A=y),M(P-S)&&M(C-k)&&(P=S,C=k);var F=3*(I-p),N=3*(P-I)-F,D=S-p-F-N,x=3*(A-y),b=3*(C-A)-x,O=k-y-x-b,L,z;if(m===0)L=f===0?p:f===1?S:((D*f+N)*f+F)*f+p,z=f===0?y:f===1?k:((O*f+b)*f+x)*f+y;else{var q=1e-8,H=1-q;if(f<q?(L=F,z=x):f>H?(L=3*(S-P),z=3*(k-C)):(L=(3*D*f+2*N)*f+F,z=(3*O*f+2*b)*f+x),v){L===0&&z===0&&(f<q||f>H)&&(L=P-I,z=C-A);var W=Math.sqrt(L*L+z*z);W&&(L/=W,z/=W)}if(m===3){var P=6*D*f+2*N,C=6*O*f+2*b,Q=Math.pow(L*L+z*z,3/2);L=Q!==0?(L*C-z*P)/Q:0,z=0}}return m===2?new E(z,-L):new E(L,z)}return{statics:{classify:function(d){var f=d[0],m=d[1],v=d[2],p=d[3],y=d[4],I=d[5],A=d[6],P=d[7],C=f*(P-I)+m*(y-A)+A*I-P*y,S=v*(m-P)+p*(A-f)+f*P-m*A,k=y*(p-m)+I*(f-v)+v*m-p*f,M=3*k,F=M-S,N=F-S+C,D=Math.sqrt(N*N+F*F+M*M),x=D!==0?1/D:0,b=w.isZero,O="serpentine";N*=x,F*=x,M*=x;function L(W,Q,K){var Y=Q!==n,ee=Y&&Q>0&&Q<1,re=Y&&K>0&&K<1;return Y&&(!(ee||re)||W==="loop"&&!(ee&&re))&&(W="arch",ee=re=!1),{type:W,roots:ee||re?ee&&re?Q<K?[Q,K]:[K,Q]:[ee?Q:K]:null}}if(b(N))return b(F)?L(b(M)?"line":"quadratic"):L(O,M/(3*F));var z=3*F*F-4*N*M;if(b(z))return L("cusp",F/(2*N));var q=z>0?Math.sqrt(z/3):Math.sqrt(-z),H=2*N;return L(z>0?O:"loop",(F+q)/H,(F-q)/H)},getLength:function(d,f,m,v){if(f===n&&(f=0),m===n&&(m=1),he.isStraight(d)){var p=d;m<1&&(p=he.subdivide(p,m)[0],f/=m),f>0&&(p=he.subdivide(p,f)[1]);var y=p[6]-p[0],I=p[7]-p[1];return Math.sqrt(y*y+I*I)}return w.integrate(v||o(d),f,m,l(f,m))},getTimeAt:function(d,f,m){if(m===n&&(m=f<0?1:0),f===0)return m;var v=Math.abs,p=1e-12,y=f>0,I=y?m:0,A=y?1:m,P=o(d),C=he.getLength(d,I,A,P),S=v(f)-C;if(v(S)<p)return y?A:I;if(S>p)return null;var k=f/C,M=0;function F(N){return M+=w.integrate(P,m,N,l(m,N)),m=N,M-f}return w.findRoot(F,P,m+k,I,A,32,1e-12)},getPoint:function(d,f){return u(d,f,0,!1)},getTangent:function(d,f){return u(d,f,1,!0)},getWeightedTangent:function(d,f){return u(d,f,1,!1)},getNormal:function(d,f){return u(d,f,2,!0)},getWeightedNormal:function(d,f){return u(d,f,2,!1)},getCurvature:function(d,f){return u(d,f,3,!1).x},getPeaks:function(d){var f=d[0],m=d[1],v=d[2],p=d[3],y=d[4],I=d[5],A=d[6],P=d[7],C=-f+3*v-3*y+A,S=3*f-6*v+3*y,k=-3*f+3*v,M=-m+3*p-3*I+P,F=3*m-6*p+3*I,N=-3*m+3*p,D=1e-8,x=1-D,b=[];return w.solveCubic(9*(C*C+M*M),9*(C*S+F*M),2*(S*S+F*F)+3*(k*C+N*M),k*S+F*N,b,D,x),b.sort()}}}},new function(){function o(S,k,M,F,N,D,x){var b=!x&&M.getPrevious()===N,O=!x&&M!==N&&M.getNext()===N,L=1e-8,z=1-L;if(F!==null&&F>=(b?L:0)&&F<=(O?z:1)&&D!==null&&D>=(O?L:0)&&D<=(b?z:1)){var q=new ot(M,F,null,x),H=new ot(N,D,null,x);q._intersection=H,H._intersection=q,(!k||k(q))&&ot.insert(S,q,!0)}}function l(S,k,M,F,N,D,x,b,O,L,z,q,H){if(++O>=4096||++b>=40)return O;var W=1e-9,Q=k[0],K=k[1],Y=k[6],ee=k[7],re=Z.getSignedDistance,oe=re(Q,K,Y,ee,k[2],k[3]),le=re(Q,K,Y,ee,k[4],k[5]),Ie=oe*le>0?3/4:4/9,Se=Ie*Math.min(0,oe,le),be=Ie*Math.max(0,oe,le),Ke=re(Q,K,Y,ee,S[0],S[1]),qe=re(Q,K,Y,ee,S[2],S[3]),$e=re(Q,K,Y,ee,S[4],S[5]),ze=re(Q,K,Y,ee,S[6],S[7]),Ze=u(Ke,qe,$e,ze),We=Ze[0],Et=Ze[1],at,ft;if(oe===0&&le===0&&Ke===0&&qe===0&&$e===0&&ze===0||(at=d(We,Et,Se,be))==null||(ft=d(We.reverse(),Et.reverse(),Se,be))==null)return O;var _t=L+(z-L)*at,ut=L+(z-L)*ft;if(Math.max(H-q,ut-_t)<W){var Gn=(_t+ut)/2,Wn=(q+H)/2;o(N,D,x?F:M,x?Wn:Gn,x?M:F,x?Gn:Wn)}else{S=he.getPart(S,at,ft);var yr=H-q;if(ft-at>.8)if(ut-_t>yr){var Tn=he.subdivide(S,.5),Gn=(_t+ut)/2;O=l(k,Tn[0],F,M,N,D,!x,b,O,q,H,_t,Gn),O=l(k,Tn[1],F,M,N,D,!x,b,O,q,H,Gn,ut)}else{var Tn=he.subdivide(k,.5),Wn=(q+H)/2;O=l(Tn[0],S,F,M,N,D,!x,b,O,q,Wn,_t,ut),O=l(Tn[1],S,F,M,N,D,!x,b,O,Wn,H,_t,ut)}else yr===0||yr>=W?O=l(k,S,F,M,N,D,!x,b,O,q,H,_t,ut):O=l(S,k,M,F,N,D,x,b,O,_t,ut,q,H)}return O}function u(S,k,M,F){var N=[0,S],D=[1/3,k],x=[2/3,M],b=[1,F],O=k-(2*S+F)/3,L=M-(S+2*F)/3,z;if(O*L<0)z=[[N,D,b],[N,x,b]];else{var q=O/L;z=[q>=2?[N,D,b]:q<=.5?[N,x,b]:[N,D,x,b],[N,b]]}return(O||L)<0?z.reverse():z}function d(S,k,M,F){return S[0][1]<M?f(S,!0,M):k[0][1]>F?f(k,!1,F):S[0][0]}function f(S,k,M){for(var F=S[0][0],N=S[0][1],D=1,x=S.length;D<x;D++){var b=S[D][0],O=S[D][1];if(k?O>=M:O<=M)return O===M?b:F+(M-N)*(b-F)/(O-N);F=b,N=O}return null}function m(S,k,M,F,N){var D=w.isZero;if(D(F)&&D(N)){var x=he.getTimeOf(S,new E(k,M));return x===null?[]:[x]}for(var b=Math.atan2(-N,F),O=Math.sin(b),L=Math.cos(b),z=[],q=[],H=0;H<8;H+=2){var W=S[H]-k,Q=S[H+1]-M;z.push(W*L-Q*O,W*O+Q*L)}return he.solveCubic(z,1,0,q,0,1),q}function v(S,k,M,F,N,D,x){for(var b=k[0],O=k[1],L=k[6],z=k[7],q=m(S,b,O,L-b,z-O),H=0,W=q.length;H<W;H++){var Q=q[H],K=he.getPoint(S,Q),Y=he.getTimeOf(k,K);Y!==null&&o(N,D,x?F:M,x?Y:Q,x?M:F,x?Q:Y)}}function p(S,k,M,F,N,D){var x=Z.intersect(S[0],S[1],S[6],S[7],k[0],k[1],k[6],k[7]);x&&o(N,D,M,he.getTimeOf(S,x),F,he.getTimeOf(k,x))}function y(S,k,M,F,N,D){var x=1e-12,b=Math.min,O=Math.max;if(O(S[0],S[2],S[4],S[6])+x>b(k[0],k[2],k[4],k[6])&&b(S[0],S[2],S[4],S[6])-x<O(k[0],k[2],k[4],k[6])&&O(S[1],S[3],S[5],S[7])+x>b(k[1],k[3],k[5],k[7])&&b(S[1],S[3],S[5],S[7])-x<O(k[1],k[3],k[5],k[7])){var L=P(S,k);if(L)for(var z=0;z<2;z++){var q=L[z];o(N,D,M,q[0],F,q[1],!0)}else{var H=he.isStraight(S),W=he.isStraight(k),Q=H&&W,K=H&&!W,Y=N.length;if((Q?p:H||W?v:l)(K?k:S,K?S:k,K?F:M,K?M:F,N,D,K,0,0,0,1,0,1),!Q||N.length===Y)for(var z=0;z<4;z++){var ee=z>>1,re=z&1,oe=ee*6,le=re*6,Ie=new E(S[oe],S[oe+1]),Se=new E(k[le],k[le+1]);Ie.isClose(Se,x)&&o(N,D,M,ee,F,re)}}}return N}function I(S,k,M,F){var N=he.classify(S);if(N.type==="loop"){var D=N.roots;o(M,F,k,D[0],k,D[1])}return M}function A(S,k,M,F,N,D){var x=1e-7,b=!k;b&&(k=S);for(var O=S.length,L=k.length,z=new Array(O),q=b?z:new Array(L),H=[],W=0;W<O;W++)z[W]=S[W].getValues(F);if(!b)for(var W=0;W<L;W++)q[W]=k[W].getValues(N);for(var Q=g.findCurveBoundsCollisions(z,q,x),K=0;K<O;K++){var Y=S[K],ee=z[K];b&&I(ee,Y,H,M);var re=Q[K];if(re)for(var oe=0;oe<re.length;oe++){if(D&&H.length)return H;var le=re[oe];if(!b||le>K){var Ie=k[le],Se=q[le];y(ee,Se,Y,Ie,H,M)}}}return H}function P(S,k){function M(ze){var Ze=ze[6]-ze[0],We=ze[7]-ze[1];return Ze*Ze+We*We}var F=Math.abs,N=Z.getDistance,D=1e-8,x=1e-7,b=he.isStraight(S),O=he.isStraight(k),L=b&&O,z=M(S)<M(k),q=z?k:S,H=z?S:k,W=q[0],Q=q[1],K=q[6]-W,Y=q[7]-Q;if(N(W,Q,K,Y,H[0],H[1],!0)<x&&N(W,Q,K,Y,H[6],H[7],!0)<x)!L&&N(W,Q,K,Y,q[2],q[3],!0)<x&&N(W,Q,K,Y,q[4],q[5],!0)<x&&N(W,Q,K,Y,H[2],H[3],!0)<x&&N(W,Q,K,Y,H[4],H[5],!0)<x&&(b=O=L=!0);else if(L)return null;if(b^O)return null;for(var ee=[S,k],re=[],oe=0;oe<4&&re.length<2;oe++){var le=oe&1,Ie=le^1,Se=oe>>1,be=he.getTimeOf(ee[le],new E(ee[Ie][Se?6:0],ee[Ie][Se?7:1]));if(be!=null){var Ke=le?[Se,be]:[be,Se];(!re.length||F(Ke[0]-re[0][0])>D&&F(Ke[1]-re[0][1])>D)&&re.push(Ke)}if(oe>2&&!re.length)break}if(re.length!==2)re=null;else if(!L){var qe=he.getPart(S,re[0][0],re[1][0]),$e=he.getPart(k,re[0][1],re[1][1]);(F($e[2]-qe[2])>x||F($e[3]-qe[3])>x||F($e[4]-qe[4])>x||F($e[5]-qe[5])>x)&&(re=null)}return re}function C(S,k){var M=S[0],F=S[1],N=S[2],D=S[3],x=S[4],b=S[5],O=S[6],L=S[7],z=k.normalize(),q=z.x,H=z.y,W=3*O-9*x+9*N-3*M,Q=3*L-9*b+9*D-3*F,K=6*x-12*N+6*M,Y=6*b-12*D+6*F,ee=3*N-3*M,re=3*D-3*F,oe=2*W*H-2*Q*q,le=[];if(Math.abs(oe)<w.CURVETIME_EPSILON){var Ie=W*re-Q*ee,oe=W*Y-Q*K;if(oe!=0){var Se=-Ie/oe;Se>=0&&Se<=1&&le.push(Se)}}else{var be=(K*K-4*W*ee)*H*H+(-2*K*Y+4*Q*ee+4*W*re)*q*H+(Y*Y-4*Q*re)*q*q,Ke=K*H-Y*q;if(be>=0&&oe!=0){var qe=Math.sqrt(be),$e=-(Ke+qe)/oe,ze=(-Ke+qe)/oe;$e>=0&&$e<=1&&le.push($e),ze>=0&&ze<=1&&le.push(ze)}}return le}return{getIntersections:function(S){var k=this.getValues(),M=S&&S!==this&&S.getValues();return M?y(k,M,this,S,[]):I(k,this,[])},statics:{getOverlaps:P,getIntersections:A,getCurveLineIntersections:m,getTimesWithTangent:C}}}),ot=s.extend({_class:"CurveLocation",initialize:function(l,u,d,f,m){if(u>=.99999999){var v=l.getNext();v&&(u=0,l=v)}this._setCurve(l),this._time=u,this._point=d||l.getPointAtTime(u),this._overlap=f,this._distance=m,this._intersection=this._next=this._previous=null},_setPath:function(o){this._path=o,this._version=o?o._version:0},_setCurve:function(o){this._setPath(o._path),this._curve=o,this._segment=null,this._segment1=o._segment1,this._segment2=o._segment2},_setSegment:function(o){var l=o.getCurve();l?this._setCurve(l):(this._setPath(o._path),this._segment1=o,this._segment2=null),this._segment=o,this._time=o===this._segment1?0:1,this._point=o._point.clone()},getSegment:function(){var o=this._segment;if(!o){var l=this.getCurve(),u=this.getTime();u===0?o=l._segment1:u===1?o=l._segment2:u!=null&&(o=l.getPartLength(0,u)<l.getPartLength(u,1)?l._segment1:l._segment2),this._segment=o}return o},getCurve:function(){var o=this._path,l=this;o&&o._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null);function u(d){var f=d&&d.getCurve();if(f&&(l._time=f.getTimeOf(l._point))!=null)return l._setCurve(f),f}return this._curve||u(this._segment)||u(this._segment1)||u(this._segment2.getPrevious())},getPath:function(){var o=this.getCurve();return o&&o._path},getIndex:function(){var o=this.getCurve();return o&&o.getIndex()},getTime:function(){var o=this.getCurve(),l=this._time;return o&&l==null?this._time=o.getTimeOf(this._point):l},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var o=this._offset;if(o==null){o=0;var l=this.getPath(),u=this.getIndex();if(l&&u!=null)for(var d=l.getCurves(),f=0;f<u;f++)o+=d[f].getLength();this._offset=o+=this.getCurveOffset()}return o},getCurveOffset:function(){var o=this._curveOffset;if(o==null){var l=this.getCurve(),u=this.getTime();this._curveOffset=o=u!=null&&l&&l.getPartLength(0,u)}return o},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var o=this.getCurve(),l=o&&o.divideAtTime(this.getTime());return l&&this._setSegment(l._segment1),l},split:function(){var o=this.getCurve(),l=o._path,u=o&&o.splitAtTime(this.getTime());return u&&this._setSegment(l.getLastSegment()),u},equals:function(o,l){var u=this===o;if(!u&&o instanceof ot){var d=this.getCurve(),f=o.getCurve(),m=d._path,v=f._path;if(m===v){var p=Math.abs,y=1e-7,I=p(this.getOffset()-o.getOffset()),A=!l&&this._intersection,P=!l&&o._intersection;u=(I<y||m&&p(m.getLength()-I)<y)&&(!A&&!P||A&&P&&A.equals(P,!0))}}return u},toString:function(){var o=[],l=this.getPoint(),u=_.instance;l&&o.push("point: "+l);var d=this.getIndex();d!=null&&o.push("index: "+d);var f=this.getTime();return f!=null&&o.push("time: "+u.number(f)),this._distance!=null&&o.push("distance: "+u.number(this._distance)),"{ "+o.join(", ")+" }"},isTouching:function(){var o=this._intersection;if(o&&this.getTangent().isCollinear(o.getTangent())){var l=this.getCurve(),u=o.getCurve();return!(l.isStraight()&&u.isStraight()&&l.getLine().intersect(u.getLine()))}return!1},isCrossing:function(){var o=this._intersection;if(!o)return!1;var l=this.getTime(),u=o.getTime(),d=1e-8,f=1-d,m=l>=d&&l<=f,v=u>=d&&u<=f;if(m&&v)return!this.isTouching();var p=this.getCurve(),y=p&&l<d?p.getPrevious():p,I=o.getCurve(),A=I&&u<d?I.getPrevious():I;if(l>f&&(p=p.getNext()),u>f&&(I=I.getNext()),!y||!p||!A||!I)return!1;var P=[];function C(q,H){var W=q.getValues(),Q=he.classify(W).roots||he.getPeaks(W),K=Q.length,Y=he.getLength(W,H&&K?Q[K-1]:0,!H&&K?Q[0]:1);P.push(K?Y:Y/32)}function S(q,H,W){return H<W?q>H&&q<W:q>H||q<W}m||(C(y,!0),C(p,!1)),v||(C(A,!0),C(I,!1));var k=this.getPoint(),M=Math.min.apply(Math,P),F=m?p.getTangentAtTime(l):p.getPointAt(M).subtract(k),N=m?F.negate():y.getPointAt(-M).subtract(k),D=v?I.getTangentAtTime(u):I.getPointAt(M).subtract(k),x=v?D.negate():A.getPointAt(-M).subtract(k),b=N.getAngle(),O=F.getAngle(),L=x.getAngle(),z=D.getAngle();return!!(m?S(b,L,z)^S(O,L,z)&&S(b,z,L)^S(O,z,L):S(L,b,O)^S(z,b,O)&&S(L,O,b)^S(z,O,b))},hasOverlap:function(){return!!this._overlap}},s.each(he._evaluateMethods,function(o){var l=o+"At";this[o]=function(){var u=this.getCurve(),d=this.getTime();return d!=null&&u&&u[l](d,!0)}},{preserve:!0}),new function(){function o(l,u,d){var f=l.length,m=0,v=f-1;function p(k,M){for(var F=k+M;F>=-1&&F<=f;F+=M){var N=l[(F%f+f)%f];if(!u.getPoint().isClose(N.getPoint(),1e-7))break;if(u.equals(N))return N}return null}for(;m<=v;){var y=m+v>>>1,I=l[y],A;if(d&&(A=u.equals(I)?I:p(y,-1)||p(y,1)))return u._overlap&&(A._overlap=A._intersection._overlap=!0),A;var P=u.getPath(),C=I.getPath(),S=P!==C?P._id-C._id:u.getIndex()+u.getTime()-(I.getIndex()+I.getTime());S<0?v=y-1:m=y+1}return l.splice(m,0,u),u}return{statics:{insert:o,expand:function(l){for(var u=l.slice(),d=l.length-1;d>=0;d--)o(u,l[d]._intersection,!1);return u}}}}),Ce=te.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(o){var l,u,d;if(s.isPlainObject(o)?(u=o.segments,l=o.pathData):Array.isArray(o)?u=o:typeof o=="string"&&(l=o),u){var f=u[0];d=f&&Array.isArray(f[0])}else l&&(d=(l.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(l));var m=d?De:Te;return new m(o)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(o){this.isClockwise()!=(o=!!o)&&this.reverse()},setPathData:function(o){var l=o&&o.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/ig),u,d=!1,f,m,v=new E,p=new E;function y(x,b){var O=+u[x];return d&&(O+=v[b]),O}function I(x){return new E(y(x,"x"),y(x+1,"y"))}this.clear();for(var A=0,P=l&&l.length;A<P;A++){var C=l[A],S=C[0],k=S.toLowerCase();u=C.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g);var M=u&&u.length;switch(d=S===k,f==="z"&&!/[mz]/.test(k)&&this.moveTo(v),k){case"m":case"l":for(var F=k==="m",N=0;N<M;N+=2)this[F?"moveTo":"lineTo"](v=I(N)),F&&(p=v,F=!1);m=v;break;case"h":case"v":var D=k==="h"?"x":"y";v=v.clone();for(var N=0;N<M;N++)v[D]=y(N,D),this.lineTo(v);m=v;break;case"c":for(var N=0;N<M;N+=6)this.cubicCurveTo(I(N),m=I(N+2),v=I(N+4));break;case"s":for(var N=0;N<M;N+=4)this.cubicCurveTo(/[cs]/.test(f)?v.multiply(2).subtract(m):v,m=I(N),v=I(N+2)),f=k;break;case"q":for(var N=0;N<M;N+=4)this.quadraticCurveTo(m=I(N),v=I(N+2));break;case"t":for(var N=0;N<M;N+=2)this.quadraticCurveTo(m=/[qt]/.test(f)?v.multiply(2).subtract(m):v,v=I(N)),f=k;break;case"a":for(var N=0;N<M;N+=7)this.arcTo(v=I(N+5),new U(+u[N],+u[N+1]),+u[N+2],+u[N+4],+u[N+3]);break;case"z":this.closePath(1e-12),v=p;break}f=k}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(o){var l=o.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(o):{};return l.onPath||!!(this.getFillRule()==="evenodd"?l.windingL&1||l.windingR&1:l.winding)},getIntersections:function(o,l,u,d){var f=this===o||!o,m=this._matrix._orNullIfIdentity(),v=f?m:(u||o._matrix)._orNullIfIdentity();return f||this.getBounds(m).intersects(o.getBounds(v),1e-12)?he.getIntersections(this.getCurves(),!f&&o.getCurves(),l,m,v,d):[]},getCrossings:function(o){return this.getIntersections(o,function(l){return l.isCrossing()})},getNearestLocation:function(){for(var o=E.read(arguments),l=this.getCurves(),u=1/0,d=null,f=0,m=l.length;f<m;f++){var v=l[f].getNearestLocation(o);v._distance<u&&(u=v._distance,d=v)}return d},getNearestPoint:function(){var o=this.getNearestLocation.apply(this,arguments);return o&&o.getPoint()},interpolate:function(o,l,u){var d=!this._children,f=d?"_segments":"_children",m=o[f],v=l[f],p=this[f];if(!m||!v||m.length!==v.length)throw new Error("Invalid operands in interpolate() call: "+o+", "+l);var y=p.length,I=v.length;if(y<I)for(var A=d?we:Te,P=y;P<I;P++)this.add(new A);else y>I&&this[d?"removeSegments":"removeChildren"](I,y);for(var P=0;P<I;P++)p[P].interpolate(m[P],v[P],u);d&&(this.setClosed(o._closed),this._changed(9))},compare:function(o){var l=!1;if(o){var u=this._children||[this],d=o._children?o._children.slice():[o],f=u.length,m=d.length,v=[],p=0;l=!0;for(var y=g.findItemBoundsCollisions(u,d,w.GEOMETRIC_EPSILON),I=f-1;I>=0&&l;I--){var A=u[I];l=!1;var P=y[I];if(P)for(var C=P.length-1;C>=0&&!l;C--)A.compare(d[P[C]])&&(v[P[C]]||(v[P[C]]=!0,p++),l=!0)}l=l&&p===m}return l}}),Te=Ce.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(l){this._closed=!1,this._segments=[],this._version=0;var u=arguments,d=Array.isArray(l)?typeof l[0]=="object"?l:u:l&&l.size===n&&(l.x!==n||l.point!==n)?u:null;d&&d.length>0?this.setSegments(d):(this._curves=n,this._segmentSelection=0,!d&&typeof l=="string"&&(this.setPathData(l),l=null)),this._initialize(!d&&l)},_equals:function(o){return this._closed===o._closed&&s.equals(this._segments,o._segments)},copyContent:function(o){this.setSegments(o._segments),this._closed=o._closed},_changed:function o(l){if(o.base.call(this,l),l&8){if(this._length=this._area=n,l&32)this._version++;else if(this._curves)for(var u=0,d=this._curves.length;u<d;u++)this._curves[u]._changed()}else l&64&&(this._bounds=n)},getStyle:function(){var o=this._parent;return(o instanceof De?o:this)._style},getSegments:function(){return this._segments},setSegments:function(o){var l=this.isFullySelected(),u=o&&o.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=n,u){var d=o[u-1];typeof d=="boolean"&&(this.setClosed(d),u--),this._add(we.readList(o,0,{},u))}l&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var o=this._curves,l=this._segments;if(!o){var u=this._countCurves();o=this._curves=new Array(u);for(var d=0;d<u;d++)o[d]=new he(this,l[d],l[d+1]||l[0])}return o},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var o=this.getCurves();return o[o.length-1]},isClosed:function(){return this._closed},setClosed:function(o){if(this._closed!=(o=!!o)){if(this._closed=o,this._curves){var l=this._curves.length=this._countCurves();o&&(this._curves[l-1]=new he(this,this._segments[l-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(o,l){var u=this._segments,d=u.length,f=new _(l),m=new Array(6),v=!0,p,y,I,A,P,C,S,k,M=[];function F(D,x){if(D._transformCoordinates(o,m),p=m[0],y=m[1],v)M.push("M"+f.pair(p,y)),v=!1;else if(P=m[2],C=m[3],P===p&&C===y&&S===I&&k===A){if(!x){var b=p-I,O=y-A;M.push(b===0?"v"+f.number(O):O===0?"h"+f.number(b):"l"+f.pair(b,O))}}else M.push("c"+f.pair(S-I,k-A)+" "+f.pair(P-I,C-A)+" "+f.pair(p-I,y-A));I=p,A=y,S=m[4],k=m[5]}if(!d)return"";for(var N=0;N<d;N++)F(u[N]);return this._closed&&d>0&&(F(u[0],!0),M.push("z")),M.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(o){for(var l=this._segments,u=new Array(6),d=0,f=l.length;d<f;d++)l[d]._transformCoordinates(o,u,!0);return!0},_add:function(o,v){for(var u=this._segments,d=this._curves,f=o.length,m=v==null,v=m?u.length:v,p=0;p<f;p++){var y=o[p];y._path&&(y=o[p]=y.clone()),y._path=this,y._index=v+p,y._selection&&this._updateSelection(y,0,y._selection)}if(m)s.push(u,o);else{u.splice.apply(u,[v,0].concat(o));for(var p=v+f,I=u.length;p<I;p++)u[p]._index=p}if(d){var A=this._countCurves(),P=v>0&&v+f-1===A?v-1:v,C=P,S=Math.min(P+f,A);o._curves&&(d.splice.apply(d,[P,0].concat(o._curves)),C+=o._curves.length);for(var p=C;p<S;p++)d.splice(p,0,new he(this,null,null));this._adjustCurves(P,S)}return this._changed(41),o},_adjustCurves:function(o,l){for(var u=this._segments,d=this._curves,f,m=o;m<l;m++)f=d[m],f._path=this,f._segment1=u[m],f._segment2=u[m+1]||u[0],f._changed();(f=d[this._closed&&!o?u.length-1:o-1])&&(f._segment2=u[o]||u[0],f._changed()),(f=d[l])&&(f._segment1=u[l],f._changed())},_countCurves:function(){var o=this._segments.length;return!this._closed&&o>0?o-1:o},add:function(o){var l=arguments;return l.length>1&&typeof o!="number"?this._add(we.readList(l)):this._add([we.read(l)])[0]},insert:function(o,l){var u=arguments;return u.length>2&&typeof l!="number"?this._add(we.readList(u,1),o):this._add([we.read(u,1)],o)[0]},addSegment:function(){return this._add([we.read(arguments)])[0]},insertSegment:function(o){return this._add([we.read(arguments,1)],o)[0]},addSegments:function(o){return this._add(we.readList(o))},insertSegments:function(o,l){return this._add(we.readList(l),o)},removeSegment:function(o){return this.removeSegments(o,o+1)[0]||null},removeSegments:function(o,l,u){o=o||0,l=s.pick(l,this._segments.length);var d=this._segments,f=this._curves,m=d.length,v=d.splice(o,l-o),p=v.length;if(!p)return v;for(var y=0;y<p;y++){var I=v[y];I._selection&&this._updateSelection(I,I._selection,0),I._index=I._path=null}for(var y=o,A=d.length;y<A;y++)d[y]._index=y;if(f){for(var P=o>0&&l===m+(this._closed?1:0)?o-1:o,f=f.splice(P,p),y=f.length-1;y>=0;y--)f[y]._path=null;u&&(v._curves=f.slice(1)),this._adjustCurves(P,P)}return this._changed(41),v},clear:"#removeSegments",hasHandles:function(){for(var o=this._segments,l=0,u=o.length;l<u;l++)if(o[l].hasHandles())return!0;return!1},clearHandles:function(){for(var o=this._segments,l=0,u=o.length;l<u;l++)o[l].clearHandles()},getLength:function(){if(this._length==null){for(var o=this.getCurves(),l=0,u=0,d=o.length;u<d;u++)l+=o[u].getLength();this._length=l}return this._length},getArea:function(){var o=this._area;if(o==null){var l=this._segments,u=this._closed;o=0;for(var d=0,f=l.length;d<f;d++){var m=d+1===f;o+=he.getArea(he.getValues(l[d],l[m?0:d+1],null,m&&!u))}this._area=o}return o},isFullySelected:function(){var o=this._segments.length;return this.isSelected()&&o>0&&this._segmentSelection===o*7},setFullySelected:function(o){o&&this._selectSegments(!0),this.setSelected(o)},setSelection:function o(l){l&1||this._selectSegments(!1),o.base.call(this,l)},_selectSegments:function(o){var l=this._segments,u=l.length,d=o?7:0;this._segmentSelection=d*u;for(var f=0;f<u;f++)l[f]._selection=d},_updateSelection:function(o,l,u){o._selection=u;var d=this._segmentSelection+=u-l;d>0&&this.setSelected(!0)},divideAt:function(o){var l=this.getLocationAt(o),u;return l&&(u=l.getCurve().divideAt(l.getCurveOffset()))?u._segment1:null},splitAt:function(o){var l=this.getLocationAt(o),u=l&&l.index,d=l&&l.time,f=1e-8,m=1-f;d>m&&(u++,d=0);var v=this.getCurves();if(u>=0&&u<v.length){d>=f&&v[u++].divideAtTime(d);var p=this.removeSegments(u,this._segments.length,!0),y;return this._closed?(this.setClosed(!1),y=this):(y=new Te(te.NO_INSERT),y.insertAbove(this),y.copyAttributes(this)),y._add(p,0),this.addSegment(p[0]),y}return null},split:function(o,l){var u,d=l===n?o:(u=this.getCurves()[o])&&u.getLocationAtTime(l);return d!=null?this.splitAt(d):null},join:function(o,l){var u=l||0;if(o&&o!==this){var d=o._segments,f=this.getLastSegment(),m=o.getLastSegment();if(!m)return this;f&&f._point.isClose(m._point,u)&&o.reverse();var v=o.getFirstSegment();if(f&&f._point.isClose(v._point,u))f.setHandleOut(v._handleOut),this._add(d.slice(1));else{var p=this.getFirstSegment();p&&p._point.isClose(v._point,u)&&o.reverse(),m=o.getLastSegment(),p&&p._point.isClose(m._point,u)?(p.setHandleIn(m._handleIn),this._add(d.slice(0,d.length-1),0)):this._add(d.slice())}o._closed&&this._add([d[0]]),o.remove()}var y=this.getFirstSegment(),I=this.getLastSegment();return y!==I&&y._point.isClose(I._point,u)&&(y.setHandleIn(I._handleIn),I.remove(),this.setClosed(!0)),this},reduce:function(o){for(var l=this.getCurves(),u=o&&o.simplify,d=u?1e-7:0,f=l.length-1;f>=0;f--){var m=l[f];!m.hasHandles()&&(!m.hasLength(d)||u&&m.isCollinear(m.getNext()))&&m.remove()}return this},reverse:function(){this._segments.reverse();for(var o=0,l=this._segments.length;o<l;o++){var u=this._segments[o],d=u._handleIn;u._handleIn=u._handleOut,u._handleOut=d,u._index=o}this._curves=null,this._changed(9)},flatten:function(o){for(var l=new Ye(this,o||.25,256,!0),u=l.parts,d=u.length,f=[],m=0;m<d;m++)f.push(new we(u[m].curve.slice(0,2)));!this._closed&&d>0&&f.push(new we(u[d-1].curve.slice(6))),this.setSegments(f)},simplify:function(o){var l=new It(this).fit(o||2.5);return l&&this.setSegments(l),!!l},smooth:function(o){var l=this,u=o||{},d=u.type||"asymmetric",f=this._segments,m=f.length,v=this._closed;function p(We,Et){var at=We&&We.index;if(at!=null){var ft=We.path;if(ft&&ft!==l)throw new Error(We._class+" "+at+" of "+ft+" is not part of "+l);Et&&We instanceof he&&at++}else at=typeof We=="number"?We:Et;return Math.min(at<0&&v?at%m:at<0?at+m:at,m-1)}var y=v&&u.from===n&&u.to===n,I=p(u.from,0),A=p(u.to,m-1);if(I>A)if(v)I-=m;else{var P=I;I=A,A=P}if(/^(?:asymmetric|continuous)$/.test(d)){var C=d==="asymmetric",S=Math.min,k=A-I+1,M=k-1,F=y?S(k,4):1,N=F,D=F,x=[];if(v||(N=S(1,I),D=S(1,m-A-1)),M+=N+D,M<=1)return;for(var b=0,O=I-N;b<=M;b++,O++)x[b]=f[(O<0?O+m:O)%m]._point;for(var L=x[0]._x+2*x[1]._x,z=x[0]._y+2*x[1]._y,q=2,H=M-1,W=[L],Q=[z],K=[q],Y=[],ee=[],b=1;b<M;b++){var re=b<H,oe=re||C?1:2,le=re?4:C?2:7,Ie=re?4:C?3:8,Se=re?2:C?0:1,be=oe/q;q=K[b]=le-be,L=W[b]=Ie*x[b]._x+Se*x[b+1]._x-be*L,z=Q[b]=Ie*x[b]._y+Se*x[b+1]._y-be*z}Y[H]=W[H]/K[H],ee[H]=Q[H]/K[H];for(var b=M-2;b>=0;b--)Y[b]=(W[b]-Y[b+1])/K[b],ee[b]=(Q[b]-ee[b+1])/K[b];Y[M]=(3*x[M]._x-Y[H])/2,ee[M]=(3*x[M]._y-ee[H])/2;for(var b=N,Ke=M-D,O=I;b<=Ke;b++,O++){var qe=f[O<0?O+m:O],$e=qe._point,ze=Y[b]-$e._x,Ze=ee[b]-$e._y;(y||b<Ke)&&qe.setHandleOut(ze,Ze),(y||b>N)&&qe.setHandleIn(-ze,-Ze)}}else for(var b=I;b<=A;b++)f[b<0?b+m:b].smooth(u,!y&&b===I,!y&&b===A)},toShape:function(o){if(!this._closed)return null;var l=this._segments,u,d,f,m;function v(C,S){var k=l[C],M=k.getNext(),F=l[S],N=F.getNext();return k._handleOut.isZero()&&M._handleIn.isZero()&&F._handleOut.isZero()&&N._handleIn.isZero()&&M._point.subtract(k._point).isCollinear(N._point.subtract(F._point))}function p(C){var S=l[C],k=S.getPrevious(),M=S.getNext();return k._handleOut.isZero()&&S._handleIn.isZero()&&S._handleOut.isZero()&&M._handleIn.isZero()&&S._point.subtract(k._point).isOrthogonal(M._point.subtract(S._point))}function y(C){var S=l[C],k=S.getNext(),M=S._handleOut,F=k._handleIn,N=.5522847498307936;if(M.isOrthogonal(F)){var D=S._point,x=k._point,b=new Z(D,M,!0).intersect(new Z(x,F,!0),!0);return b&&w.isZero(M.getLength()/b.subtract(D).getLength()-N)&&w.isZero(F.getLength()/b.subtract(x).getLength()-N)}return!1}function I(C,S){return l[C]._point.getDistance(l[S]._point)}if(!this.hasHandles()&&l.length===4&&v(0,2)&&v(1,3)&&p(1)?(u=_e.Rectangle,d=new U(I(0,3),I(0,1)),m=l[1]._point.add(l[2]._point).divide(2)):l.length===8&&y(0)&&y(2)&&y(4)&&y(6)&&v(1,5)&&v(3,7)?(u=_e.Rectangle,d=new U(I(1,6),I(0,3)),f=d.subtract(new U(I(0,7),I(1,2))).divide(2),m=l[3]._point.add(l[4]._point).divide(2)):l.length===4&&y(0)&&y(1)&&y(2)&&y(3)&&(w.isZero(I(0,2)-I(1,3))?(u=_e.Circle,f=I(0,2)/2):(u=_e.Ellipse,f=new U(I(2,0)/2,I(3,1)/2)),m=l[1]._point),u){var A=this.getPosition(!0),P=new u({center:A,size:d,radius:f,insert:!1});return P.copyAttributes(this,!0),P._matrix.prepend(this._matrix),P.rotate(m.subtract(A).getAngle()+90),(o===n||o)&&P.insertAbove(this),P}return null},toPath:"#clone",compare:function o(l){if(!l||l instanceof De)return o.base.call(this,l);var u=this.getCurves(),d=l.getCurves(),f=u.length,m=d.length;if(!f||!m)return f==m;for(var v=u[0].getValues(),p=[],y=0,I,A=0,P,C=0;C<m;C++){var F=d[C].getValues();p.push(F);var S=he.getOverlaps(v,F);if(S){I=!C&&S[0][0]>0?m-1:C,P=S[0][1];break}}for(var k=Math.abs,M=1e-8,F=p[I],N;v&&F;){var S=he.getOverlaps(v,F);if(S){var D=S[0][0];if(k(D-A)<M){A=S[1][0],A===1&&(v=++y<f?u[y].getValues():null,A=0);var x=S[0][1];if(k(x-P)<M){if(N||(N=[I,x]),P=S[1][1],P===1&&(++I>=m&&(I=0),F=p[I]||d[I].getValues(),P=0),!v)return N[0]===I&&N[1]===P;continue}}}break}return!1},_hitTestSelf:function(o,l,u,d){var f=this,m=this.getStyle(),v=this._segments,p=v.length,y=this._closed,I=l._tolerancePadding,A=I,P,C,S,k,M,F,N=l.stroke&&m.hasStroke(),D=l.fill&&m.hasFill(),x=l.curves,b=N?m.getStrokeWidth()/2:D&&l.tolerance>0||x?0:null;b!==null&&(b>0?(P=m.getStrokeJoin(),C=m.getStrokeCap(),S=m.getMiterLimit(),A=A.add(Te._getStrokePadding(b,d))):P=C="round");function O(Y,ee){return o.subtract(Y).divide(ee).length<=1}function L(Y,ee,re){if(!l.selected||ee.isSelected()){var oe=Y._point;if(ee!==oe&&(ee=ee.add(oe)),O(ee,A))return new xe(re,f,{segment:Y,point:ee})}}function z(Y,ee){return(ee||l.segments)&&L(Y,Y._point,"segment")||!ee&&l.handles&&(L(Y,Y._handleIn,"handle-in")||L(Y,Y._handleOut,"handle-out"))}function q(Y){k.add(Y)}function H(Y){var ee=y||Y._index>0&&Y._index<p-1;if((ee?P:C)==="round")return O(Y._point,A);if(k=new Te({internal:!0,closed:!0}),ee?Y.isSmooth()||Te._addBevelJoin(Y,P,b,S,null,d,q,!0):C==="square"&&Te._addSquareCap(Y,C,b,null,d,q,!0),!k.isEmpty()){var re;return k.contains(o)||(re=k.getNearestLocation(o))&&O(re.getPoint(),I)}}if(l.ends&&!l.segments&&!y){if(F=z(v[0],!0)||z(v[p-1],!0))return F}else if(l.segments||l.handles){for(var W=0;W<p;W++)if(F=z(v[W]))return F}if(b!==null){if(M=this.getNearestLocation(o),M){var Q=M.getTime();Q===0||Q===1&&p>1?H(M.getSegment())||(M=null):O(M.getPoint(),A)||(M=null)}if(!M&&P==="miter"&&p>1)for(var W=0;W<p;W++){var K=v[W];if(o.getDistance(K._point)<=S*b&&H(K)){M=K.getLocation();break}}}return!M&&D&&this._contains(o)||M&&!N&&!x?new xe("fill",this):M?new xe(N?"stroke":"curve",this,{location:M,point:M.getPoint()}):null}},s.each(he._evaluateMethods,function(o){this[o+"At"]=function(l){var u=this.getLocationAt(l);return u&&u[o]()}},{beans:!1,getLocationOf:function(){for(var o=E.read(arguments),l=this.getCurves(),u=0,d=l.length;u<d;u++){var f=l[u].getLocationOf(o);if(f)return f}return null},getOffsetOf:function(){var o=this.getLocationOf.apply(this,arguments);return o?o.getOffset():null},getLocationAt:function(o){if(typeof o=="number"){for(var l=this.getCurves(),u=0,d=0,f=l.length;d<f;d++){var m=u,v=l[d];if(u+=v.getLength(),u>o)return v.getLocationAt(o-m)}if(l.length>0&&o<=this.getLength())return new ot(l[l.length-1],1)}else if(o&&o.getPath&&o.getPath()===this)return o;return null},getOffsetsWithTangent:function(){var o=E.read(arguments);if(o.isZero())return[];for(var l=[],u=0,d=this.getCurves(),f=0,m=d.length;f<m;f++){for(var v=d[f],p=v.getTimesWithTangent(o),y=0,I=p.length;y<I;y++){var A=u+v.getOffsetAtTime(p[y]);l.indexOf(A)<0&&l.push(A)}u+=v.length}return l}}),new function(){function o(u,d,f,m){if(m<=0)return;var v=m/2,p=m-2,y=v-1,I=new Array(6),A,P;function C(D){var x=I[D],b=I[D+1];(A!=x||P!=b)&&(u.beginPath(),u.moveTo(A,P),u.lineTo(x,b),u.stroke(),u.beginPath(),u.arc(x,b,v,0,Math.PI*2,!0),u.fill())}for(var S=0,k=d.length;S<k;S++){var M=d[S],F=M._selection;if(M._transformCoordinates(f,I),A=I[0],P=I[1],F&2&&C(2),F&4&&C(4),u.fillRect(A-v,P-v,m,m),p>0&&!(F&1)){var N=u.fillStyle;u.fillStyle="#ffffff",u.fillRect(A-y,P-y,p,p),u.fillStyle=N}}}function l(u,d,f){var m=d._segments,v=m.length,p=new Array(6),y=!0,I,A,P,C,S,k,M,F;function N(x){if(f)x._transformCoordinates(f,p),I=p[0],A=p[1];else{var b=x._point;I=b._x,A=b._y}if(y)u.moveTo(I,A),y=!1;else{if(f)S=p[2],k=p[3];else{var O=x._handleIn;S=I+O._x,k=A+O._y}S===I&&k===A&&M===P&&F===C?u.lineTo(I,A):u.bezierCurveTo(M,F,S,k,I,A)}if(P=I,C=A,f)M=p[4],F=p[5];else{var O=x._handleOut;M=P+O._x,F=C+O._y}}for(var D=0;D<v;D++)N(m[D]);d._closed&&v>0&&N(m[0])}return{_draw:function(u,d,f,m){var v=d.dontStart,p=d.dontFinish||d.clip,y=this.getStyle(),I=y.hasFill(),A=y.hasStroke(),P=y.getDashArray(),C=!de.support.nativeDash&&A&&P&&P.length;v||u.beginPath(),(I||A&&!C||p)&&(l(u,this,m),this._closed&&u.closePath());function S(x){return P[(x%C+C)%C]}if(!p&&(I||A)&&(this._setStyles(u,d,f),I&&(u.fill(y.getFillRule()),u.shadowColor="rgba(0,0,0,0)"),A)){if(C){v||u.beginPath();for(var k=new Ye(this,.25,32,!1,m),M=k.length,F=-y.getDashOffset(),N,D=0;F>0;)F-=S(D--)+S(D--);for(;F<M;)N=F+S(D++),(F>0||N>0)&&k.drawPart(u,Math.max(F,0),Math.max(N,0)),F=N+S(D++)}u.stroke()}},_drawSelected:function(u,d){u.beginPath(),l(u,this,d),u.stroke(),o(u,this._segments,d,de.settings.handleSize)}}},new function(){function o(l){var u=l._segments;if(!u.length)throw new Error("Use a moveTo() command first");return u[u.length-1]}return{moveTo:function(){var l=this._segments;l.length===1&&this.removeSegment(0),l.length||this._add([new we(E.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new we(E.read(arguments))])},cubicCurveTo:function(){var l=arguments,u=E.read(l),d=E.read(l),f=E.read(l),m=o(this);m.setHandleOut(u.subtract(m._point)),this._add([new we(f,d.subtract(f))])},quadraticCurveTo:function(){var l=arguments,u=E.read(l),d=E.read(l),f=o(this)._point;this.cubicCurveTo(u.add(f.subtract(u).multiply(1/3)),u.add(d.subtract(u).multiply(1/3)),d)},curveTo:function(){var l=arguments,u=E.read(l),d=E.read(l),f=s.pick(s.read(l),.5),m=1-f,v=o(this)._point,p=u.subtract(v.multiply(m*m)).subtract(d.multiply(f*f)).divide(2*f*m);if(p.isNaN())throw new Error("Cannot put a curve through points with parameter = "+f);this.quadraticCurveTo(p,d)},arcTo:function(){var l=arguments,u=Math.abs,d=Math.sqrt,f=o(this),m=f._point,v=E.read(l),p,y=s.peek(l),I=s.pick(y,!0),A,P,C,S;if(typeof I=="boolean")var k=m.add(v).divide(2),p=k.add(k.subtract(m).rotate(I?-90:90));else if(s.remain(l)<=2)p=v,v=E.read(l);else if(!m.equals(v)){var M=U.read(l),F=w.isZero;if(F(M.width)||F(M.height))return this.lineTo(v);var N=s.read(l),I=!!s.read(l),D=!!s.read(l),k=m.add(v).divide(2),x=m.subtract(k).rotate(-N),b=x.x,O=x.y,L=u(M.width),z=u(M.height),q=L*L,H=z*z,W=b*b,Q=O*O,K=d(W/q+Q/H);if(K>1&&(L*=K,z*=K,q=L*L,H=z*z),K=(q*H-q*Q-H*W)/(q*Q+H*W),u(K)<1e-12&&(K=0),K<0)throw new Error("Cannot create an arc with the given arguments");A=new E(L*O/z,-z*b/L).multiply((D===I?-1:1)*d(K)).rotate(N).add(k),S=new j().translate(A).rotate(N).scale(L,z),C=S._inverseTransform(m),P=C.getDirectedAngle(S._inverseTransform(v)),!I&&P>0?P-=360:I&&P<0&&(P+=360)}if(p){var Y=new Z(m.add(p).divide(2),p.subtract(m).rotate(90),!0),ee=new Z(p.add(v).divide(2),v.subtract(p).rotate(90),!0),re=new Z(m,v),oe=re.getSide(p);if(A=Y.intersect(ee,!0),!A){if(!oe)return this.lineTo(v);throw new Error("Cannot create an arc with the given arguments")}C=m.subtract(A),P=C.getDirectedAngle(v.subtract(A));var le=re.getSide(A,!0);le===0?P=oe*u(P):oe===le&&(P+=P<0?360:-360)}if(P){for(var Ie=1e-5,Se=u(P),be=Se>=360?4:Math.ceil((Se-Ie)/90),Ke=P/be,qe=Ke*Math.PI/360,$e=4/3*Math.sin(qe)/(1+Math.cos(qe)),ze=[],Ze=0;Ze<=be;Ze++){var x=v,We=null;if(Ze<be&&(We=C.rotate(90).multiply($e),S?(x=S._transformPoint(C),We=S._transformPoint(C.add(We)).subtract(x)):x=A.add(C)),!Ze)f.setHandleOut(We);else{var Et=C.rotate(-90).multiply($e);S&&(Et=S._transformPoint(C.add(Et)).subtract(x)),ze.push(new we(x,Et,We))}C=C.rotate(Ke)}this._add(ze)}},lineBy:function(){var l=E.read(arguments),u=o(this)._point;this.lineTo(u.add(l))},curveBy:function(){var l=arguments,u=E.read(l),d=E.read(l),f=s.read(l),m=o(this)._point;this.curveTo(m.add(u),m.add(d),f)},cubicCurveBy:function(){var l=arguments,u=E.read(l),d=E.read(l),f=E.read(l),m=o(this)._point;this.cubicCurveTo(m.add(u),m.add(d),m.add(f))},quadraticCurveBy:function(){var l=arguments,u=E.read(l),d=E.read(l),f=o(this)._point;this.quadraticCurveTo(f.add(u),f.add(d))},arcBy:function(){var l=arguments,u=o(this)._point,d=u.add(E.read(l)),f=s.pick(s.peek(l),!0);typeof f=="boolean"?this.arcTo(d,f):this.arcTo(d,u.add(E.read(l)))},closePath:function(l){this.setClosed(!0),this.join(this,l)}}},{_getBounds:function(o,l){var u=l.handle?"getHandleBounds":l.stroke?"getStrokeBounds":"getBounds";return Te[u](this._segments,this._closed,this,o,l)},statics:{getBounds:function(o,l,u,d,f,m){var v=o[0];if(!v)return new V;var p=new Array(6),y=v._transformCoordinates(d,new Array(6)),I=y.slice(0,2),A=I.slice(),P=new Array(2);function C(M){M._transformCoordinates(d,p);for(var F=0;F<2;F++)he._addBounds(y[F],y[F+4],p[F+2],p[F],F,m?m[F]:0,I,A,P);var N=y;y=p,p=N}for(var S=1,k=o.length;S<k;S++)C(o[S]);return l&&C(v),new V(I[0],I[1],A[0]-I[0],A[1]-I[1])},getStrokeBounds:function(o,l,u,d,f){var m=u.getStyle(),v=m.hasStroke(),p=m.getStrokeWidth(),y=v&&u._getStrokeMatrix(d,f),I=v&&Te._getStrokePadding(p,y),A=Te.getBounds(o,l,u,d,f,I);if(!v)return A;var P=p/2,C=m.getStrokeJoin(),S=m.getStrokeCap(),k=m.getMiterLimit(),M=new V(new U(I));function F(L){A=A.include(L)}function N(L){A=A.unite(M.setCenter(L._point.transform(d)))}function D(L,z){z==="round"||L.isSmooth()?N(L):Te._addBevelJoin(L,z,P,k,d,y,F)}function x(L,z){z==="round"?N(L):Te._addSquareCap(L,z,P,d,y,F)}var b=o.length-(l?0:1);if(b>0){for(var O=1;O<b;O++)D(o[O],C);l?D(o[0],C):(x(o[0],S),x(o[o.length-1],S))}return A},_getStrokePadding:function(o,l){if(!l)return[o,o];var u=new E(o,0).transform(l),d=new E(0,o).transform(l),f=u.getAngleInRadians(),m=u.getLength(),v=d.getLength(),p=Math.sin(f),y=Math.cos(f),I=Math.tan(f),A=Math.atan2(v*I,m),P=Math.atan2(v,I*m);return[Math.abs(m*Math.cos(A)*y+v*Math.sin(A)*p),Math.abs(v*Math.sin(P)*y+m*Math.cos(P)*p)]},_addBevelJoin:function(o,l,u,d,f,m,v,p){var y=o.getCurve(),I=y.getPrevious(),A=y.getPoint1().transform(f),P=I.getNormalAtTime(1).multiply(u).transform(m),C=y.getNormalAtTime(0).multiply(u).transform(m),S=P.getDirectedAngle(C);if((S<0||S>=180)&&(P=P.negate(),C=C.negate()),p&&v(A),v(A.add(P)),l==="miter"){var k=new Z(A.add(P),new E(-P.y,P.x),!0).intersect(new Z(A.add(C),new E(-C.y,C.x),!0),!0);k&&A.getDistance(k)<=d*u&&v(k)}v(A.add(C))},_addSquareCap:function(o,l,u,d,f,m,v){var p=o._point.transform(d),y=o.getLocation(),I=y.getNormal().multiply(y.getTime()===0?u:-u).transform(f);l==="square"&&(v&&(m(p.subtract(I)),m(p.add(I))),p=p.add(I.rotate(-90))),m(p.add(I)),m(p.subtract(I))},getHandleBounds:function(o,l,u,d,f){var m=u.getStyle(),v=f.stroke&&m.hasStroke(),p,y;if(v){var I=u._getStrokeMatrix(d,f),A=m.getStrokeWidth()/2,P=A;m.getStrokeJoin()==="miter"&&(P=A*m.getMiterLimit()),m.getStrokeCap()==="square"&&(P=Math.max(P,A*Math.SQRT2)),p=Te._getStrokePadding(A,I),y=Te._getStrokePadding(P,I)}for(var C=new Array(6),S=1/0,k=-S,M=S,F=k,N=0,D=o.length;N<D;N++){var x=o[N];x._transformCoordinates(d,C);for(var b=0;b<6;b+=2){var O=b?p:y,L=O?O[0]:0,z=O?O[1]:0,q=C[b],H=C[b+1],W=q-L,Q=q+L,K=H-z,Y=H+z;W<S&&(S=W),Q>k&&(k=Q),K<M&&(M=K),Y>F&&(F=Y)}}return new V(S,M,k-S,F-M)}}});Te.inject({statics:new function(){var o=.5522847498307936,l=[new we([-1,0],[0,o],[0,-o]),new we([0,-1],[-o,0],[o,0]),new we([1,0],[0,-o],[0,o]),new we([0,1],[o,0],[-o,0])];function u(f,m,v){var p=s.getNamed(v),y=new Te(p&&(p.insert==!0?te.INSERT:p.insert==!1?te.NO_INSERT:null));return y._add(f),y._closed=m,y.set(p,te.INSERT)}function d(f,m,v){for(var p=new Array(4),y=0;y<4;y++){var I=l[y];p[y]=new we(I._point.multiply(m).add(f),I._handleIn.multiply(m),I._handleOut.multiply(m))}return u(p,!0,v)}return{Line:function(){var f=arguments;return u([new we(E.readNamed(f,"from")),new we(E.readNamed(f,"to"))],!1,f)},Circle:function(){var f=arguments,m=E.readNamed(f,"center"),v=s.readNamed(f,"radius");return d(m,new U(v),f)},Rectangle:function(){var f=arguments,m=V.readNamed(f,"rectangle"),v=U.readNamed(f,"radius",0,{readNull:!0}),p=m.getBottomLeft(!0),y=m.getTopLeft(!0),I=m.getTopRight(!0),A=m.getBottomRight(!0),P;if(!v||v.isZero())P=[new we(p),new we(y),new we(I),new we(A)];else{v=U.min(v,m.getSize(!0).divide(2));var C=v.width,S=v.height,k=C*o,M=S*o;P=[new we(p.add(C,0),null,[-k,0]),new we(p.subtract(0,S),[0,M]),new we(y.add(0,S),null,[0,-M]),new we(y.add(C,0),[-k,0],null),new we(I.subtract(C,0),null,[k,0]),new we(I.add(0,S),[0,-M],null),new we(A.subtract(0,S),null,[0,M]),new we(A.subtract(C,0),[k,0])]}return u(P,!0,f)},RoundRectangle:"#Rectangle",Ellipse:function(){var f=arguments,m=_e._readEllipse(f);return d(m.center,m.radius,f)},Oval:"#Ellipse",Arc:function(){var f=arguments,m=E.readNamed(f,"from"),v=E.readNamed(f,"through"),p=E.readNamed(f,"to"),y=s.getNamed(f),I=new Te(y&&y.insert==!1&&te.NO_INSERT);return I.moveTo(m),I.arcTo(v,p),I.set(y)},RegularPolygon:function(){for(var f=arguments,m=E.readNamed(f,"center"),v=s.readNamed(f,"sides"),p=s.readNamed(f,"radius"),y=360/v,I=v%3===0,A=new E(0,I?-p:p),P=I?-1:.5,C=new Array(v),S=0;S<v;S++)C[S]=new we(m.add(A.rotate((S+P)*y)));return u(C,!0,f)},Star:function(){for(var f=arguments,m=E.readNamed(f,"center"),v=s.readNamed(f,"points")*2,p=s.readNamed(f,"radius1"),y=s.readNamed(f,"radius2"),I=360/v,A=new E(0,-1),P=new Array(v),C=0;C<v;C++)P[C]=new we(m.add(A.rotate(I*C).multiply(C%2?y:p)));return u(P,!0,f)}}}});var De=Ce.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(l){this._children=[],this._namedChildren={},this._initialize(l)||(typeof l=="string"?this.setPathData(l):this.addChildren(Array.isArray(l)?l:arguments))},insertChildren:function o(l,u){var d=u,f=d[0];f&&typeof f[0]=="number"&&(d=[d]);for(var m=u.length-1;m>=0;m--){var v=d[m];d===u&&!(v instanceof Te)&&(d=s.slice(d)),Array.isArray(v)?d[m]=new Te({segments:v,insert:!1}):v instanceof De&&(d.splice.apply(d,[m,1].concat(v.removeChildren())),v.remove())}return o.base.call(this,l,d)},reduce:function o(l){for(var u=this._children,d=u.length-1;d>=0;d--){var f=u[d].reduce(l);f.isEmpty()&&f.remove()}if(!u.length){var f=new Te(te.NO_INSERT);return f.copyAttributes(this),f.insertAbove(this),this.remove(),f}return o.base.call(this)},isClosed:function(){for(var o=this._children,l=0,u=o.length;l<u;l++)if(!o[l]._closed)return!1;return!0},setClosed:function(o){for(var l=this._children,u=0,d=l.length;u<d;u++)l[u].setClosed(o)},getFirstSegment:function(){var o=this.getFirstChild();return o&&o.getFirstSegment()},getLastSegment:function(){var o=this.getLastChild();return o&&o.getLastSegment()},getCurves:function(){for(var o=this._children,l=[],u=0,d=o.length;u<d;u++)s.push(l,o[u].getCurves());return l},getFirstCurve:function(){var o=this.getFirstChild();return o&&o.getFirstCurve()},getLastCurve:function(){var o=this.getLastChild();return o&&o.getLastCurve()},getArea:function(){for(var o=this._children,l=0,u=0,d=o.length;u<d;u++)l+=o[u].getArea();return l},getLength:function(){for(var o=this._children,l=0,u=0,d=o.length;u<d;u++)l+=o[u].getLength();return l},getPathData:function(o,l){for(var u=this._children,d=[],f=0,m=u.length;f<m;f++){var v=u[f],p=v._matrix;d.push(v.getPathData(o&&!p.isIdentity()?o.appended(p):o,l))}return d.join("")},_hitTestChildren:function o(l,u,d){return o.base.call(this,l,u.class===Te||u.type==="path"?u:s.set({},u,{fill:!1}),d)},_draw:function(o,l,u,d){var f=this._children;if(f.length){l=l.extend({dontStart:!0,dontFinish:!0}),o.beginPath();for(var m=0,v=f.length;m<v;m++)f[m].draw(o,l,d);if(!l.clip){this._setStyles(o,l,u);var p=this._style;p.hasFill()&&(o.fill(p.getFillRule()),o.shadowColor="rgba(0,0,0,0)"),p.hasStroke()&&o.stroke()}}},_drawSelected:function(o,l,u){for(var d=this._children,f=0,m=d.length;f<m;f++){var v=d[f],p=v._matrix;u[v._id]||v._drawSelected(o,p.isIdentity()?l:l.appended(p))}}},new function(){function o(l,u){var d=l._children;if(u&&!d.length)throw new Error("Use a moveTo() command first");return d[d.length-1]}return s.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(l){this[l]=function(){var u=o(this,!0);u[l].apply(u,arguments)}},{moveTo:function(){var l=o(this),u=l&&l.isEmpty()?l:new Te(te.NO_INSERT);u!==l&&this.addChild(u),u.moveTo.apply(u,arguments)},moveBy:function(){var l=o(this,!0),u=l&&l.getLastSegment(),d=E.read(arguments);this.moveTo(u?d.add(u._point):d)},closePath:function(l){o(this,!0).closePath(l)}})},s.each(["reverse","flatten","simplify","smooth"],function(o){this[o]=function(l){for(var u=this._children,d,f=0,m=u.length;f<m;f++)d=u[f][o](l)||d;return d}},{}));Ce.inject(new function(){var o=Math.min,l=Math.max,u=Math.abs,d={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};function f(N){return N._children||[N]}function m(N,D){var x=N.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);if(D){for(var b=f(x),O=0,L=b.length;O<L;O++){var N=b[O];!N._closed&&!N.isEmpty()&&(N.closePath(1e-12),N.getFirstSegment().setHandleIn(0,0),N.getLastSegment().setHandleOut(0,0))}x=x.resolveCrossings().reorient(x.getFillRule()==="nonzero",!0)}return x}function v(N,D,x,b,O){var L=new De(te.NO_INSERT);return L.addChildren(N,!0),L=L.reduce({simplify:D}),O&&O.insert==!1||L.insertAbove(b&&x.isSibling(b)&&x.getIndex()<b.getIndex()?b:x),L.copyAttributes(x,!0),L}function p(N){return N.hasOverlap()||N.isCrossing()}function y(N,D,x,b){if(b&&(b.trace==!1||b.stroke)&&/^(subtract|intersect)$/.test(x))return I(N,D,x);var O=m(N,!0),L=D&&N!==D&&m(D,!0),z=d[x];z[x]=!0,L&&(z.subtract||z.exclude)^(L.isClockwise()^O.isClockwise())&&L.reverse();var q=S(ot.expand(O.getIntersections(L,p))),H=f(O),W=L&&f(L),Q=[],K=[],Y;function ee(We){for(var Et=0,at=We.length;Et<at;Et++){var ft=We[Et];s.push(Q,ft._segments),s.push(K,ft.getCurves()),ft._overlapsOnly=!0}}function re(We){for(var Et=[],at=0,ft=We&&We.length;at<ft;at++)Et.push(K[We[at]]);return Et}if(q.length){ee(H),W&&ee(W);for(var oe=new Array(K.length),le=0,Ie=K.length;le<Ie;le++)oe[le]=K[le].getValues();for(var Se=g.findCurveBoundsCollisions(oe,oe,0,!0),be={},le=0;le<K.length;le++){var Ke=K[le],qe=Ke._path._id,$e=be[qe]=be[qe]||{};$e[Ke.getIndex()]={hor:re(Se[le].hor),ver:re(Se[le].ver)}}for(var le=0,Ie=q.length;le<Ie;le++)M(q[le]._segment,O,L,be,z);for(var le=0,Ie=Q.length;le<Ie;le++){var ze=Q[le],Ze=ze._intersection;ze._winding||M(ze,O,L,be,z),Ze&&Ze._overlap||(ze._path._overlapsOnly=!1)}Y=F(Q,z)}else Y=C(W?H.concat(W):H.slice(),function(We){return!!z[We]});return v(Y,!0,N,D,b)}function I(N,D,x){var b=m(N),O=m(D),L=b.getIntersections(O,p),z=x==="subtract",q=x==="divide",H={},W=[];function Q(ee){if(!H[ee._id]&&(q||O.contains(ee.getPointAt(ee.getLength()/2))^z))return W.unshift(ee),H[ee._id]=!0}for(var K=L.length-1;K>=0;K--){var Y=L[K].split();Y&&(Q(Y)&&Y.getFirstSegment().setHandleIn(0,0),b.getLastSegment().setHandleOut(0,0))}return Q(b),v(W,!1,N,D)}function A(N,D){for(var x=N;x;){if(x===D)return;x=x._previous}for(;N._next&&N._next!==D;)N=N._next;if(!N._next){for(;D._previous;)D=D._previous;N._next=D,D._previous=N}}function P(N){for(var D=N.length-1;D>=0;D--)N[D].clearHandles()}function C(N,D,x){var b=N&&N.length;if(b){var O=s.each(N,function(Se,be){this[Se._id]={container:null,winding:Se.isClockwise()?1:-1,index:be}},{}),L=N.slice().sort(function(Se,be){return u(be.getArea())-u(Se.getArea())}),z=L[0],q=g.findItemBoundsCollisions(L,null,w.GEOMETRIC_EPSILON);x==null&&(x=z.isClockwise());for(var H=0;H<b;H++){var W=L[H],Q=O[W._id],K=0,Y=q[H];if(Y){for(var ee=null,re=Y.length-1;re>=0;re--)if(Y[re]<H){ee=ee||W.getInteriorPoint();var oe=L[Y[re]];if(oe.contains(ee)){var le=O[oe._id];K=le.winding,Q.winding+=K,Q.container=le.exclude?le.container:oe;break}}}if(D(Q.winding)===D(K))Q.exclude=!0,N[Q.index]=null;else{var Ie=Q.container;W.setClockwise(Ie?!Ie.isClockwise():x)}}}return N}function S(N,D,x){var b=D&&[],O=1e-8,L=1-O,z=!1,q=x||[],H=x&&{},W,Q,K;function Y(Et){return Et._path._id+"."+Et._segment1._index}for(var ee=(x&&x.length)-1;ee>=0;ee--){var re=x[ee];re._path&&(H[Y(re)]=!0)}for(var ee=N.length-1;ee>=0;ee--){var oe=N[ee],le=oe._time,Ie=le,Se=D&&!D(oe),re=oe._curve,be;if(re&&(re!==Q?(z=!re.hasHandles()||H&&H[Y(re)],W=[],K=null,Q=re):K>=O&&(le/=K)),Se){W&&W.push(oe);continue}else D&&b.unshift(oe);if(K=Ie,le<O)be=re._segment1;else if(le>L)be=re._segment2;else{var Ke=re.divideAtTime(le,!0);z&&q.push(re,Ke),be=Ke._segment1;for(var qe=W.length-1;qe>=0;qe--){var $e=W[qe];$e._time=($e._time-le)/(1-le)}}oe._setSegment(be);var ze=be._intersection,Ze=oe._intersection;if(ze){A(ze,Ze);for(var We=ze;We;)A(We._intersection,ze),We=We._next}else be._intersection=Ze}return x||P(q),b||N}function k(N,D,x,b,O){var L=Array.isArray(D)?D:D[x?"hor":"ver"],z=x?1:0,q=z^1,H=[N.x,N.y],W=H[z],Q=H[q],K=1e-9,Y=1e-6,ee=W-K,re=W+K,oe=0,le=0,Ie=0,Se=0,be=!1,Ke=!1,qe=1,$e=[],ze,Ze;function We(Nt){var Sn=Nt[q+0],hi=Nt[q+6];if(!(Q<o(Sn,hi)||Q>l(Sn,hi))){var Kn=Nt[z+0],Ms=Nt[z+2],ku=Nt[z+4],Ls=Nt[z+6];if(Sn===hi){(Kn<re&&Ls>ee||Ls<re&&Kn>ee)&&(be=!0);return}var qo=Q===Sn?0:Q===hi||ee>l(Kn,Ms,ku,Ls)||re<o(Kn,Ms,ku,Ls)?1:he.solveCubic(Nt,q,Q,$e,0,1)>0?$e[0]:1,di=qo===0?Kn:qo===1?Ls:he.getPoint(Nt,qo)[x?"y":"x"],bi=Sn>hi?1:-1,gd=ze[q]>ze[q+6]?1:-1,Ho=ze[z+6];return Q!==Sn?(di<ee?Ie+=bi:di>re?Se+=bi:be=!0,di>W-Y&&di<W+Y&&(qe/=2)):(bi!==gd?Kn<ee?Ie+=bi:Kn>re&&(Se+=bi):Kn!=Ho&&(Ho<re&&di>re?(Se+=bi,be=!0):Ho>ee&&di<ee&&(Ie+=bi,be=!0)),qe/=4),ze=Nt,!O&&di>ee&&di<re&&he.getTangent(Nt,qo)[x?"x":"y"]===0&&k(N,D,!x,b,!0)}}function Et(Nt){var Sn=Nt[q+0],hi=Nt[q+2],Kn=Nt[q+4],Ms=Nt[q+6];if(Q<=l(Sn,hi,Kn,Ms)&&Q>=o(Sn,hi,Kn,Ms)){for(var ku=Nt[z+0],Ls=Nt[z+2],qo=Nt[z+4],di=Nt[z+6],bi=ee>l(ku,Ls,qo,di)||re<o(ku,Ls,qo,di)?[Nt]:he.getMonoCurves(Nt,x),gd,Ho=0,Ck=bi.length;Ho<Ck;Ho++)if(gd=We(bi[Ho]))return gd}}for(var at=0,ft=L.length;at<ft;at++){var _t=L[at],ut=_t._path,Gn=_t.getValues(),Wn;if((!at||L[at-1]._path!==ut)&&(ze=null,ut._closed||(Ze=he.getValues(ut.getLastCurve().getSegment2(),_t.getSegment1(),null,!b),Ze[q]!==Ze[q+6]&&(ze=Ze)),!ze)){ze=Gn;for(var yr=ut.getLastCurve();yr&&yr!==_t;){var Tn=yr.getValues();if(Tn[q]!==Tn[q+6]){ze=Tn;break}yr=yr.getPrevious()}}if(Wn=Et(Gn))return Wn;if(at+1===ft||L[at+1]._path!==ut){if(Ze&&(Wn=Et(Ze)))return Wn;be&&!Ie&&!Se&&(Ie=Se=ut.isClockwise(b)^x?1:-1),oe+=Ie,le+=Se,Ie=Se=0,be&&(Ke=!0,be=!1),Ze=null}}return oe=u(oe),le=u(le),{winding:l(oe,le),windingL:oe,windingR:le,quality:qe,onPath:Ke}}function M(N,D,x,b,O){var L=[],z=N,q=0,K;do{var H=N.getCurve();if(H){var W=H.getLength();L.push({segment:N,curve:H,length:W}),q+=W}N=N.getNext()}while(N&&!N._intersection&&N!==z);for(var Q=[.5,.25,.75],K={winding:0,quality:-1},Y=.001,ee=1-Y,re=0;re<Q.length&&K.quality<.5;re++)for(var W=q*Q[re],oe=0,le=L.length;oe<le;oe++){var Ie=L[oe],Se=Ie.length;if(W<=Se){var H=Ie.curve,be=H._path,Ke=be._parent,qe=Ke instanceof De?Ke:be,$e=w.clamp(H.getTimeAt(W),Y,ee),ze=H.getPointAtTime($e),Ze=u(H.getTangentAtTime($e).y)<Math.SQRT1_2,We=null;if(O.subtract&&x){var Et=qe===D?x:D,at=Et._getWinding(ze,Ze,!0);if(qe===D&&at.winding||qe===x&&!at.winding){if(at.quality<1)continue;We={winding:0,quality:1}}}We=We||k(ze,b[be._id][H.getIndex()],Ze,!0),We.quality>K.quality&&(K=We);break}W-=Se}for(var oe=L.length-1;oe>=0;oe--)L[oe].segment._winding=K}function F(N,D){var x=[],b;function O(ft){var _t;return!!(ft&&!ft._visited&&(!D||D[(_t=ft._winding||{}).winding]&&!(D.unite&&_t.winding===2&&_t.windingL&&_t.windingR)))}function L(ft){if(ft){for(var _t=0,ut=b.length;_t<ut;_t++)if(ft===b[_t])return!0}return!1}function z(ft){for(var _t=ft._segments,ut=0,Gn=_t.length;ut<Gn;ut++)_t[ut]._visited=!0}function q(ft,_t){var ut=ft._intersection,Gn=ut,Wn=[];_t&&(b=[ft]);function yr(Tn,Nt){for(;Tn&&Tn!==Nt;){var Sn=Tn._segment,hi=Sn&&Sn._path;if(hi){var Kn=Sn.getNext()||hi.getFirstSegment(),Ms=Kn._intersection;Sn!==ft&&(L(Sn)||L(Kn)||Kn&&O(Sn)&&(O(Kn)||Ms&&O(Ms._segment)))&&Wn.push(Sn),_t&&b.push(Sn)}Tn=Tn._next}}if(ut){for(yr(ut);ut&&ut._previous;)ut=ut._previous;yr(ut,Gn)}return Wn}N.sort(function(ft,_t){var ut=ft._intersection,Gn=_t._intersection,Wn=!!(ut&&ut._overlap),yr=!!(Gn&&Gn._overlap),Tn=ft._path,Nt=_t._path;return Wn^yr?Wn?1:-1:!ut^!Gn?ut?1:-1:Tn!==Nt?Tn._id-Nt._id:ft._index-_t._index});for(var H=0,W=N.length;H<W;H++){var Q=N[H],K=O(Q),Y=null,ee=!1,re=!0,oe=[],le,Ie,Se;if(K&&Q._path._overlapsOnly){var be=Q._path,Ke=Q._intersection._segment._path;be.compare(Ke)&&(be.getArea()&&x.push(be.clone(!1)),z(be),z(Ke),K=!1)}for(;K;){var qe=!Y,$e=q(Q,qe),ze=$e.shift(),ee=!qe&&(L(Q)||L(ze)),Ze=!ee&&ze;if(qe&&(Y=new Te(te.NO_INSERT),le=null),ee){(Q.isFirst()||Q.isLast())&&(re=Q._path._closed),Q._visited=!0;break}if(Ze&&le&&(oe.push(le),le=null),le||(Ze&&$e.push(Q),le={start:Y._segments.length,crossings:$e,visited:Ie=[],handleIn:Se}),Ze&&(Q=ze),!O(Q)){Y.removeSegments(le.start);for(var We=0,Et=Ie.length;We<Et;We++)Ie[We]._visited=!1;Ie.length=0;do Q=le&&le.crossings.shift(),(!Q||!Q._path)&&(Q=null,le=oe.pop(),le&&(Ie=le.visited,Se=le.handleIn));while(le&&!O(Q));if(!Q)break}var at=Q.getNext();Y.add(new we(Q._point,Se,at&&Q._handleOut)),Q._visited=!0,Ie.push(Q),Q=at||Q._path.getFirstSegment(),Se=at&&at._handleIn}ee&&(re&&(Y.getFirstSegment().setHandleIn(Se),Y.setClosed(re)),Y.getArea()!==0&&x.push(Y))}return x}return{_getWinding:function(N,D,x){return k(N,this.getCurves(),D,x)},unite:function(N,D){return y(this,N,"unite",D)},intersect:function(N,D){return y(this,N,"intersect",D)},subtract:function(N,D){return y(this,N,"subtract",D)},exclude:function(N,D){return y(this,N,"exclude",D)},divide:function(N,D){return D&&(D.trace==!1||D.stroke)?I(this,N,"divide"):v([this.subtract(N,D),this.intersect(N,D)],!0,this,N,D)},resolveCrossings:function(){var N=this._children,D=N||[this];function x(le,Ie){var Se=le&&le._intersection;return Se&&Se._overlap&&Se._path===Ie}var b=!1,O=!1,L=this.getIntersections(null,function(le){return le.hasOverlap()&&(b=!0)||le.isCrossing()&&(O=!0)}),z=b&&O&&[];if(L=ot.expand(L),b)for(var q=S(L,function(le){return le.hasOverlap()},z),H=q.length-1;H>=0;H--){var W=q[H],Q=W._path,K=W._segment,Y=K.getPrevious(),ee=K.getNext();x(Y,Q)&&x(ee,Q)&&(K.remove(),Y._handleOut._set(0,0),ee._handleIn._set(0,0),Y!==K&&!Y.getCurve().hasLength()&&(ee._handleIn.set(Y._handleIn),Y.remove()))}O&&(S(L,b&&function(le){var Ie=le.getCurve(),Se=le.getSegment(),be=le._intersection,Ke=be._curve,qe=be._segment;if(Ie&&Ke&&Ie._path&&Ke._path)return!0;Se&&(Se._intersection=null),qe&&(qe._intersection=null)},z),z&&P(z),D=F(s.each(D,function(le){s.push(this,le._segments)},[])));var re=D.length,oe;return re>1&&N?(D!==N&&this.setChildren(D),oe=this):re===1&&!N&&(D[0]!==this&&this.setSegments(D[0].removeSegments()),oe=this),oe||(oe=new De(te.NO_INSERT),oe.addChildren(D),oe=oe.reduce(),oe.copyAttributes(this),this.replaceWith(oe)),oe},reorient:function(N,D){var x=this._children;return x&&x.length?this.setChildren(C(this.removeChildren(),function(b){return!!(N?b:b&1)},D)):D!==n&&this.setClockwise(D),this},getInteriorPoint:function(){var N=this.getBounds(),D=N.getCenter(!0);if(!this.contains(D)){for(var x=this.getCurves(),b=D.y,O=[],L=[],z=0,q=x.length;z<q;z++){var H=x[z].getValues(),W=H[1],Q=H[3],K=H[5],Y=H[7];if(b>=o(W,Q,K,Y)&&b<=l(W,Q,K,Y))for(var ee=he.getMonoCurves(H),re=0,oe=ee.length;re<oe;re++){var le=ee[re],Ie=le[1],Se=le[7];if(Ie!==Se&&(b>=Ie&&b<=Se||b>=Se&&b<=Ie)){var be=b===Ie?le[0]:b===Se?le[6]:he.solveCubic(le,1,b,L,0,1)===1?he.getPoint(le,L[0]).x:(le[0]+le[6])/2;O.push(be)}}}O.length>1&&(O.sort(function(Ke,qe){return Ke-qe}),D.x=(O[0]+O[1])/2)}return D}}});var Ye=s.extend({_class:"PathFlattener",initialize:function(o,l,u,d,f){var m=[],v=[],p=0,y=1/(u||32),I=o._segments,A=I[0],P;function C(F,N){var D=he.getValues(F,N,f);m.push(D),S(D,F._index,0,1)}function S(F,N,D,x){if(x-D>y&&!(d&&he.isStraight(F))&&!he.isFlatEnough(F,l||.25)){var b=he.subdivide(F,.5),O=(D+x)/2;S(b[0],N,D,O),S(b[1],N,O,x)}else{var L=F[6]-F[0],z=F[7]-F[1],q=Math.sqrt(L*L+z*z);q>0&&(p+=q,v.push({offset:p,curve:F,index:N,time:x}))}}for(var k=1,M=I.length;k<M;k++)P=I[k],C(A,P),A=P;o._closed&&C(P||A,I[0]),this.curves=m,this.parts=v,this.length=p,this.index=0},_get:function(o){for(var l=this.parts,u=l.length,d,f=this.index;d=f,!(!f||l[--f].offset<o););for(;d<u;d++){var m=l[d];if(m.offset>=o){this.index=d;var v=l[d-1],p=v&&v.index===m.index?v.time:0,y=v?v.offset:0;return{index:m.index,time:p+(m.time-p)*(o-y)/(m.offset-y)}}}return{index:l[u-1].index,time:1}},drawPart:function(o,l,u){for(var d=this._get(l),f=this._get(u),m=d.index,v=f.index;m<=v;m++){var p=he.getPart(this.curves[m],m===d.index?d.time:0,m===f.index?f.time:1);m===d.index&&o.moveTo(p[0],p[1]),o.bezierCurveTo.apply(o,p.slice(2))}}},s.each(he._evaluateMethods,function(o){this[o+"At"]=function(l){var u=this._get(l);return he[o](this.curves[u.index],u.time)}},{})),It=s.extend({initialize:function(o){for(var l=this.points=[],u=o._segments,d=o._closed,f=0,m,v=u.length;f<v;f++){var p=u[f].point;(!m||!m.equals(p))&&l.push(m=p.clone())}d&&(l.unshift(l[l.length-1]),l.push(l[1])),this.closed=d},fit:function(o){var l=this.points,u=l.length,d=null;return u>0&&(d=[new we(l[0])],u>1&&(this.fitCubic(d,o,0,u-1,l[1].subtract(l[0]),l[u-2].subtract(l[u-1])),this.closed&&(d.shift(),d.pop()))),d},fitCubic:function(o,l,u,d,f,m){var v=this.points;if(d-u===1){var p=v[u],y=v[d],I=p.getDistance(y)/3;this.addCurve(o,[p,p.add(f.normalize(I)),y.add(m.normalize(I)),y]);return}for(var A=this.chordLengthParameterize(u,d),P=Math.max(l,l*l),C,S=!0,k=0;k<=4;k++){var M=this.generateBezier(u,d,A,f,m),F=this.findMaxError(u,d,M,A);if(F.error<l&&S){this.addCurve(o,M);return}if(C=F.index,F.error>=P)break;S=this.reparameterize(u,d,A,M),P=F.error}var N=v[C-1].subtract(v[C+1]);this.fitCubic(o,l,u,C,f,N),this.fitCubic(o,l,C,d,N.negate(),m)},addCurve:function(o,l){var u=o[o.length-1];u.setHandleOut(l[1].subtract(l[0])),o.push(new we(l[3],l[2].subtract(l[3])))},generateBezier:function(o,l,u,d,f){for(var m=1e-12,v=Math.abs,p=this.points,y=p[o],I=p[l],A=[[0,0],[0,0]],P=[0,0],C=0,S=l-o+1;C<S;C++){var k=u[C],M=1-k,F=3*k*M,N=M*M*M,D=F*M,x=F*k,b=k*k*k,O=d.normalize(D),L=f.normalize(x),z=p[o+C].subtract(y.multiply(N+D)).subtract(I.multiply(x+b));A[0][0]+=O.dot(O),A[0][1]+=O.dot(L),A[1][0]=A[0][1],A[1][1]+=L.dot(L),P[0]+=O.dot(z),P[1]+=L.dot(z)}var q=A[0][0]*A[1][1]-A[1][0]*A[0][1],H,W;if(v(q)>m){var Q=A[0][0]*P[1]-A[1][0]*P[0],K=P[0]*A[1][1]-P[1]*A[0][1];H=K/q,W=Q/q}else{var Y=A[0][0]+A[0][1],ee=A[1][0]+A[1][1];H=W=v(Y)>m?P[0]/Y:v(ee)>m?P[1]/ee:0}var re=I.getDistance(y),oe=m*re,le,Ie;if(H<oe||W<oe)H=W=re/3;else{var Se=I.subtract(y);le=d.normalize(H),Ie=f.normalize(W),le.dot(Se)-Ie.dot(Se)>re*re&&(H=W=re/3,le=Ie=null)}return[y,y.add(le||d.normalize(H)),I.add(Ie||f.normalize(W)),I]},reparameterize:function(o,l,u,d){for(var f=o;f<=l;f++)u[f-o]=this.findRoot(d,this.points[f],u[f-o]);for(var f=1,m=u.length;f<m;f++)if(u[f]<=u[f-1])return!1;return!0},findRoot:function(o,l,u){for(var d=[],f=[],m=0;m<=2;m++)d[m]=o[m+1].subtract(o[m]).multiply(3);for(var m=0;m<=1;m++)f[m]=d[m+1].subtract(d[m]).multiply(2);var v=this.evaluate(3,o,u),p=this.evaluate(2,d,u),y=this.evaluate(1,f,u),I=v.subtract(l),A=p.dot(p)+I.dot(y);return w.isMachineZero(A)?u:u-I.dot(p)/A},evaluate:function(o,l,u){for(var d=l.slice(),f=1;f<=o;f++)for(var m=0;m<=o-f;m++)d[m]=d[m].multiply(1-u).add(d[m+1].multiply(u));return d[0]},chordLengthParameterize:function(o,l){for(var u=[0],d=o+1;d<=l;d++)u[d-o]=u[d-o-1]+this.points[d].getDistance(this.points[d-1]);for(var d=1,f=l-o;d<=f;d++)u[d]/=u[f];return u},findMaxError:function(o,l,u,d){for(var f=Math.floor((l-o+1)/2),m=0,v=o+1;v<l;v++){var p=this.evaluate(3,u,d[v-o]),y=p.subtract(this.points[v]),I=y.x*y.x+y.y*y.y;I>=m&&(m=I,f=v)}return{error:m,index:f}}}),it=te.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(l){this._content="",this._lines=[];var u=l&&s.isPlainObject(l)&&l.x===n&&l.y===n;this._initialize(u&&l,!u&&E.read(arguments))},_equals:function(o){return this._content===o._content},copyContent:function(o){this.setContent(o._content)},getContent:function(){return this._content},setContent:function(o){this._content=""+o,this._lines=this._content.split(/\r\n|\n|\r/mg),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),Mt=it.extend({_class:"PointText",initialize:function(){it.apply(this,arguments)},getPoint:function(){var o=this._matrix.getTranslation();return new $(o.x,o.y,this,"setPoint")},setPoint:function(){var o=E.read(arguments);this.translate(o.subtract(this._matrix.getTranslation()))},_draw:function(o,l,u){if(this._content){this._setStyles(o,l,u);var d=this._lines,f=this._style,m=f.hasFill(),v=f.hasStroke(),p=f.getLeading(),y=o.shadowColor;o.font=f.getFontStyle(),o.textAlign=f.getJustification();for(var I=0,A=d.length;I<A;I++){o.shadowColor=y;var P=d[I];m&&(o.fillText(P,0,0),o.shadowColor="rgba(0,0,0,0)"),v&&o.strokeText(P,0,0),o.translate(0,p)}}},_getBounds:function(o,l){var u=this._style,d=this._lines,f=d.length,m=u.getJustification(),v=u.getLeading(),p=this.getView().getTextWidth(u.getFontStyle(),d),y=0;m!=="left"&&(y-=p/(m==="center"?2:1));var I=new V(y,f?-.75*v:0,p,f*v);return o?o._transformBounds(I,I):I}}),Qe=s.extend(new function(){var o={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},l={},u={transparent:[0,0,0,0]},d;function f(p){var y=p.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||p.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),I="rgb",A;if(y){var P=y[4]?4:3;A=new Array(P);for(var C=0;C<P;C++){var S=y[C+1];A[C]=parseInt(S.length==1?S+S:S,16)/255}}else if(y=p.match(/^(rgb|hsl)a?\((.*)\)$/)){I=y[1],A=y[2].trim().split(/[,\s]+/g);for(var k=I==="hsl",C=0,M=Math.min(A.length,4);C<M;C++){var F=A[C],S=parseFloat(F);if(k)if(C===0){var N=F.match(/([a-z]*)$/)[1];S*={turn:360,rad:180/Math.PI,grad:.9}[N]||1}else C<3&&(S/=100);else C<3&&(S/=/%$/.test(F)?100:255);A[C]=S}}else{var D=u[p];if(!D)if(r){d||(d=ie.getContext(1,1,{willReadFrequently:!0}),d.globalCompositeOperation="copy"),d.fillStyle="rgba(0,0,0,0)",d.fillStyle=p,d.fillRect(0,0,1,1);var x=d.getImageData(0,0,1,1).data;D=u[p]=[x[0]/255,x[1]/255,x[2]/255]}else D=[0,0,0];A=D.slice()}return[I,A]}var m=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],v={"rgb-hsb":function(p,y,I){var A=Math.max(p,y,I),P=Math.min(p,y,I),C=A-P,S=C===0?0:(A==p?(y-I)/C+(y<I?6:0):A==y?(I-p)/C+2:(p-y)/C+4)*60;return[S,A===0?0:C/A,A]},"hsb-rgb":function(p,y,I){p=(p/60%6+6)%6;var P=Math.floor(p),A=p-P,P=m[P],C=[I,I*(1-y),I*(1-y*A),I*(1-y*(1-A))];return[C[P[0]],C[P[1]],C[P[2]]]},"rgb-hsl":function(p,y,I){var A=Math.max(p,y,I),P=Math.min(p,y,I),C=A-P,S=C===0,k=S?0:(A==p?(y-I)/C+(y<I?6:0):A==y?(I-p)/C+2:(p-y)/C+4)*60,M=(A+P)/2,F=S?0:M<.5?C/(A+P):C/(2-A-P);return[k,F,M]},"hsl-rgb":function(p,y,I){if(p=(p/360%1+1)%1,y===0)return[I,I,I];for(var A=[p+1/3,p,p-1/3],P=I<.5?I*(1+y):I+y-I*y,C=2*I-P,S=[],k=0;k<3;k++){var M=A[k];M<0&&(M+=1),M>1&&(M-=1),S[k]=6*M<1?C+(P-C)*6*M:2*M<1?P:3*M<2?C+(P-C)*(2/3-M)*6:C}return S},"rgb-gray":function(p,y,I){return[p*.2989+y*.587+I*.114]},"gray-rgb":function(p){return[p,p,p]},"gray-hsb":function(p){return[0,0,p]},"gray-hsl":function(p){return[0,0,p]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return s.each(o,function(p,y){l[y]=[],s.each(p,function(I,A){var P=s.capitalize(I),C=/^(hue|saturation)$/.test(I),S=l[y][A]=y==="gradient"?I==="gradient"?function(k){var M=this._components[0];return k=ln.read(Array.isArray(k)?k:arguments,0,{readNull:!0}),M!==k&&(M&&M._removeOwner(this),k&&k._addOwner(this)),k}:function(){return E.read(arguments,0,{readNull:I==="highlight",clone:!0})}:function(k){return k==null||isNaN(k)?0:+k};this["get"+P]=function(){return this._type===y||C&&/^hs[bl]$/.test(this._type)?this._components[A]:this._convert(y)[A]},this["set"+P]=function(k){this._type!==y&&!(C&&/^hs[bl]$/.test(this._type))&&(this._components=this._convert(y),this._properties=o[y],this._type=y),this._components[A]=S.call(this,k),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function p(y){var I=arguments,A=this.__read,P=0,C,S,k,M;Array.isArray(y)&&(I=y,y=I[0]);var F=y!=null&&typeof y;if(F==="string"&&y in o&&(C=y,y=I[1],Array.isArray(y)?(S=y,k=I[2]):(A&&(P=1),I=s.slice(I,1),F=typeof y)),!S){if(M=F==="number"?I:F==="object"&&y.length!=null?y:null,M){C||(C=M.length>=3?"rgb":"gray");var N=o[C].length;k=M[N],A&&(P+=M===arguments?N+(k!=null?1:0):1),M.length>N&&(M=s.slice(M,0,N))}else if(F==="string"){var D=f(y);C=D[0],S=D[1],S.length===4&&(k=S[3],S.length--)}else if(F==="object")if(y.constructor===p){if(C=y._type,S=y._components.slice(),k=y._alpha,C==="gradient")for(var x=1,b=S.length;x<b;x++){var O=S[x];O&&(S[x]=O.clone())}}else if(y.constructor===ln)C="gradient",M=I;else{C="hue"in y?"lightness"in y?"hsl":"hsb":"gradient"in y||"stops"in y||"radial"in y?"gradient":"gray"in y?"gray":"rgb";var L=o[C],z=l[C];this._components=S=[];for(var x=0,b=L.length;x<b;x++){var q=y[L[x]];q==null&&!x&&C==="gradient"&&"stops"in y&&(q={stops:y.stops,radial:y.radial}),q=z[x].call(this,q),q!=null&&(S[x]=q)}k=y.alpha}A&&C&&(P=1)}if(this._type=C||"rgb",!S){this._components=S=[];for(var z=l[this._type],x=0,b=z.length;x<b;x++){var q=z[x].call(this,M&&M[x]);q!=null&&(S[x]=q)}}return this._components=S,this._properties=o[this._type],this._alpha=k,A&&(this.__read=P),this},set:"#initialize",_serialize:function(p,y){var I=this.getComponents();return s.serialize(/^(gray|rgb)$/.test(this._type)?I:[this._type].concat(I),p,!0,y)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(p){var y;return this._type===p?this._components.slice():(y=v[this._type+"-"+p])?y.apply(this,this._components):v["rgb-"+p].apply(this,v[this._type+"-rgb"].apply(this,this._components))},convert:function(p){return new Qe(p,this._convert(p),this._alpha)},getType:function(){return this._type},setType:function(p){this._components=this._convert(p),this._properties=o[p],this._type=p},getComponents:function(){var p=this._components.slice();return this._alpha!=null&&p.push(this._alpha),p},getAlpha:function(){return this._alpha!=null?this._alpha:1},setAlpha:function(p){this._alpha=p==null?null:Math.min(Math.max(p,0),1),this._changed()},hasAlpha:function(){return this._alpha!=null},equals:function(p){var y=s.isPlainValue(p,!0)?Qe.read(arguments):p;return y===this||y&&this._class===y._class&&this._type===y._type&&this.getAlpha()===y.getAlpha()&&s.equals(this._components,y._components)||!1},toString:function(){for(var p=this._properties,y=[],I=this._type==="gradient",A=_.instance,P=0,C=p.length;P<C;P++){var S=this._components[P];S!=null&&y.push(p[P]+": "+(I?S:A.number(S)))}return this._alpha!=null&&y.push("alpha: "+A.number(this._alpha)),"{ "+y.join(", ")+" }"},toCSS:function(p){var y=this._convert("rgb"),I=p||this._alpha==null?1:this._alpha;function A(P){return Math.round((P<0?0:P>1?1:P)*255)}return y=[A(y[0]),A(y[1]),A(y[2])],I<1&&y.push(I<0?0:I),p?"#"+((1<<24)+(y[0]<<16)+(y[1]<<8)+y[2]).toString(16).slice(1):(y.length==4?"rgba(":"rgb(")+y.join(",")+")"},toCanvasStyle:function(p,y){if(this._canvasStyle)return this._canvasStyle;if(this._type!=="gradient")return this._canvasStyle=this.toCSS();var I=this._components,A=I[0],P=A._stops,C=I[1],S=I[2],k=I[3],M=y&&y.inverted(),F;if(M&&(C=M._transformPoint(C),S=M._transformPoint(S),k&&(k=M._transformPoint(k))),A._radial){var N=S.getDistance(C);if(k){var D=k.subtract(C);D.getLength()>N&&(k=C.add(D.normalize(N-.1)))}var x=k||C;F=p.createRadialGradient(x.x,x.y,0,C.x,C.y,N)}else F=p.createLinearGradient(C.x,C.y,S.x,S.y);for(var b=0,O=P.length;b<O;b++){var L=P[b],z=L._offset;F.addColorStop(z??b/(O-1),L._color.toCanvasStyle())}return this._canvasStyle=F},transform:function(p){if(this._type==="gradient"){for(var y=this._components,I=1,A=y.length;I<A;I++){var P=y[I];p._transformPoint(P,P,!0)}this._changed()}},statics:{_types:o,random:function(){var p=Math.random;return new Qe(p(),p(),p())},_setOwner:function(p,y,I){return p&&(p._owner&&y&&p._owner!==y&&(p=p.clone()),!p._owner^!y&&(p._owner=y||null,p._setter=I||null)),p}}})},new function(){var o={add:function(l,u){return l+u},subtract:function(l,u){return l-u},multiply:function(l,u){return l*u},divide:function(l,u){return l/u}};return s.each(o,function(l,u){this[u]=function(d){d=Qe.read(arguments);for(var f=this._type,m=this._components,v=d._convert(f),p=0,y=m.length;p<y;p++)v[p]=l(m[p],v[p]);return new Qe(f,v,this._alpha!=null?l(this._alpha,d.getAlpha()):null)}},{})}),ln=s.extend({_class:"Gradient",initialize:function(l,u){this._id=T.get(),l&&s.isPlainObject(l)&&(this.set(l),l=u=null),this._stops==null&&this.setStops(l||["white","black"]),this._radial==null&&this.setRadial(typeof u=="string"&&u==="radial"||u||!1)},_serialize:function(o,l){return l.add(this,function(){return s.serialize([this._stops,this._radial],o,!0,l)})},_changed:function(){for(var o=0,l=this._owners&&this._owners.length;o<l;o++)this._owners[o]._changed()},_addOwner:function(o){this._owners||(this._owners=[]),this._owners.push(o)},_removeOwner:function(o){var l=this._owners?this._owners.indexOf(o):-1;l!=-1&&(this._owners.splice(l,1),this._owners.length||(this._owners=n))},clone:function(){for(var o=[],l=0,u=this._stops.length;l<u;l++)o[l]=this._stops[l].clone();return new ln(o,this._radial)},getStops:function(){return this._stops},setStops:function(o){if(o.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var l=this._stops;if(l)for(var u=0,d=l.length;u<d;u++)l[u]._owner=n;l=this._stops=En.readList(o,0,{clone:!0});for(var u=0,d=l.length;u<d;u++)l[u]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(o){this._radial=o,this._changed()},equals:function(o){if(o===this)return!0;if(o&&this._class===o._class){var l=this._stops,u=o._stops,d=l.length;if(d===u.length){for(var f=0;f<d;f++)if(!l[f].equals(u[f]))return!1;return!0}}return!1}}),En=s.extend({_class:"GradientStop",initialize:function(l,u){var d=l,f=u;typeof l=="object"&&u===n&&(Array.isArray(l)&&typeof l[0]!="number"?(d=l[0],f=l[1]):("color"in l||"offset"in l||"rampPoint"in l)&&(d=l.color,f=l.offset||l.rampPoint||0)),this.setColor(d),this.setOffset(f)},clone:function(){return new En(this._color.clone(),this._offset)},_serialize:function(o,l){var u=this._color,d=this._offset;return s.serialize(d==null?[u]:[u,d],o,!0,l)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(o){this._offset=o,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){Qe._setOwner(this._color,null),this._color=Qe._setOwner(Qe.read(arguments,0),this,"setColor"),this._changed()},equals:function(o){return o===this||o&&this._class===o._class&&this._color.equals(o._color)&&this._offset==o._offset||!1}}),is=s.extend(new function(){var o={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new E,selectedColor:null},l=s.set({},o,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),u=s.set({},l,{fillColor:new Qe}),d={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},f={beans:!0},m={_class:"Style",beans:!0,initialize:function(p,y,I){this._values={},this._owner=y,this._project=y&&y._project||I||de.project,this._defaults=!y||y instanceof ae?l:y instanceof it?u:o,p&&this.set(p)}};return s.each(l,function(v,p){var y=/Color$/.test(p),I=p==="shadowOffset",A=s.capitalize(p),P=d[p],C="set"+A,S="get"+A;m[C]=function(k){var M=this._owner,F=M&&M._children,N=F&&F.length>0&&!(M instanceof De);if(N)for(var D=0,x=F.length;D<x;D++)F[D]._style[C](k);if((p==="selectedColor"||!N)&&p in this._defaults){var b=this._values[p];b!==k&&(y&&(b&&(Qe._setOwner(b,null),b._canvasStyle=null),k&&k.constructor===Qe&&(k=Qe._setOwner(k,M,N&&C))),this._values[p]=k,M&&M._changed(P||129))}},m[S]=function(k){var M=this._owner,F=M&&M._children,N=F&&F.length>0&&!(M instanceof De),D;if(N&&!k)for(var x=0,b=F.length;x<b;x++){var O=F[x]._style[S]();if(!x)D=O;else if(!s.equals(D,O))return n}else if(p in this._defaults){var D=this._values[p];if(D===n)D=this._defaults[p],D&&D.clone&&(D=D.clone());else{var L=y?Qe:I?E:null;L&&!(D&&D.constructor===L)&&(this._values[p]=D=L.read([D],0,{readNull:!0,clone:!0}))}}return D&&y&&(D=Qe._setOwner(D,M,N&&C)),D},f[S]=function(k){return this._style[S](k)},f[C]=function(k){this._style[C](k)}}),s.each({Font:"FontFamily",WindingRule:"FillRule"},function(v,p){var y="get"+p,I="set"+p;m[y]=f[y]="#get"+v,m[I]=f[I]="#set"+v}),te.inject(f),m},{set:function(o){var l=o instanceof is,u=l?o._values:o;if(u){for(var d in u)if(d in this._defaults){var f=u[d];this[d]=f&&l&&f.clone?f.clone():f}}},equals:function(o){function l(u,d,f){var m=u._values,v=d._values,p=d._defaults;for(var y in m){var I=m[y],A=v[y];if(!(f&&y in v)&&!s.equals(I,A===n?p[y]:A))return!1}return!0}return o===this||o&&this._class===o._class&&l(this,o)&&l(o,this,!0)||!1},_dispose:function(){var o;o=this.getFillColor(),o&&(o._canvasStyle=null),o=this.getStrokeColor(),o&&(o._canvasStyle=null),o=this.getShadowColor(),o&&(o._canvasStyle=null)},hasFill:function(){var o=this.getFillColor();return!!o&&o.alpha>0},hasStroke:function(){var o=this.getStrokeColor();return!!o&&o.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var o=this.getShadowColor();return!!o&&o.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var o=this.getFontSize();return this.getFontWeight()+" "+o+(/[a-z]/i.test(o+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function o(){var l=o.base.call(this),u=this.getFontSize();return/pt|em|%|px/.test(u)&&(u=this.getView().getPixelSize(u)),l??u*1.2}}),bt=new function(){function o(l,u,d,f){for(var m=["","webkit","moz","Moz","ms","o"],v=u[0].toUpperCase()+u.substring(1),p=0;p<6;p++){var y=m[p],I=y?y+v:u;if(I in l){if(d)l[I]=f;else return l[I];break}}}return{getStyles:function(l){var u=l&&l.nodeType!==9?l.ownerDocument:l,d=u&&u.defaultView;return d&&d.getComputedStyle(l,"")},getBounds:function(l,u){var d=l.ownerDocument,f=d.body,m=d.documentElement,v;try{v=l.getBoundingClientRect()}catch{v={left:0,top:0,width:0,height:0}}var p=v.left-(m.clientLeft||f.clientLeft||0),y=v.top-(m.clientTop||f.clientTop||0);if(!u){var I=d.defaultView;p+=I.pageXOffset||m.scrollLeft||f.scrollLeft,y+=I.pageYOffset||m.scrollTop||f.scrollTop}return new V(p,y,v.width,v.height)},getViewportBounds:function(l){var u=l.ownerDocument,d=u.defaultView,f=u.documentElement;return new V(0,0,d.innerWidth||f.clientWidth,d.innerHeight||f.clientHeight)},getOffset:function(l,u){return bt.getBounds(l,u).getPoint()},getSize:function(l){return bt.getBounds(l,!0).getSize()},isInvisible:function(l){return bt.getSize(l).equals(new U(0,0))},isInView:function(l){return!bt.isInvisible(l)&&bt.getViewportBounds(l).intersects(bt.getBounds(l,!0))},isInserted:function(l){return i.body.contains(l)},getPrefixed:function(l,u){return l&&o(l,u)},setPrefixed:function(l,u,d){if(typeof u=="object")for(var f in u)o(l,f,!0,u[f]);else o(l,u,!0,d)}}},zt={add:function(o,l){if(o)for(var u in l)for(var d=l[u],f=u.split(/[\s,]+/g),m=0,v=f.length;m<v;m++){var p=f[m],y=o===i&&(p==="touchstart"||p==="touchmove")?{passive:!1}:!1;o.addEventListener(p,d,y)}},remove:function(o,l){if(o)for(var u in l)for(var d=l[u],f=u.split(/[\s,]+/g),m=0,v=f.length;m<v;m++)o.removeEventListener(f[m],d,!1)},getPoint:function(o){var l=o.targetTouches?o.targetTouches.length?o.targetTouches[0]:o.changedTouches[0]:o;return new E(l.pageX||l.clientX+i.documentElement.scrollLeft,l.pageY||l.clientY+i.documentElement.scrollTop)},getTarget:function(o){return o.target||o.srcElement},getRelatedTarget:function(o){return o.relatedTarget||o.toElement},getOffset:function(o,l){return zt.getPoint(o).subtract(bt.getOffset(l||zt.getTarget(o)))}};zt.requestAnimationFrame=new function(){var o=bt.getPrefixed(r,"requestAnimationFrame"),l=!1,u=[],d;function f(){var m=u;u=[];for(var v=0,p=m.length;v<p;v++)m[v]();l=o&&u.length,l&&o(f)}return function(m){u.push(m),o?l||(o(f),l=!0):d||(d=setInterval(f,1e3/60))}};var kt=s.extend(a,{_class:"View",initialize:function o(l,u){function d(P){return u[P]||parseInt(u.getAttribute(P),10)}function f(){var P=bt.getSize(u);return P.isNaN()||P.isZero()?new U(d("width"),d("height")):P}var m;if(r&&u){this._id=u.getAttribute("id"),this._id==null&&u.setAttribute("id",this._id="paper-view-"+o._id++),zt.add(u,this._viewEvents);var v="none";if(bt.setPrefixed(u.style,{userDrag:v,userSelect:v,touchCallout:v,contentZooming:v,tapHighlightColor:"rgba(0,0,0,0)"}),c.hasAttribute(u,"resize")){var p=this;zt.add(r,this._windowEvents={resize:function(){p.setViewSize(f())}})}if(m=f(),c.hasAttribute(u,"stats")&&typeof Stats<"u"){this._stats=new Stats;var y=this._stats.domElement,I=y.style,A=bt.getOffset(u);I.position="absolute",I.left=A.x+"px",I.top=A.y+"px",i.body.appendChild(y)}}else m=new U(u),u=null;this._project=l,this._scope=l._scope,this._element=u,this._pixelRatio||(this._pixelRatio=r&&r.devicePixelRatio||1),this._setElementSize(m.width,m.height),this._viewSize=m,o._views.push(this),o._viewsById[this._id]=this,(this._matrix=new j)._owner=this,o._focused||(o._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!de.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;kt._focused===this&&(kt._focused=null),kt._views.splice(kt._views.indexOf(this),1),delete kt._viewsById[this._id];var o=this._project;return o._view===this&&(o._view=null),zt.remove(this._element,this._viewEvents),zt.remove(r,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:s.each(te._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(o){this[o]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(o){this._autoUpdate=o,o&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var o=this;zt.requestAnimationFrame(function(){if(o._requested=!1,o._animate){o.requestUpdate();var l=o._element;(!bt.getPrefixed(i,"hidden")||c.getAttribute(l,"keepalive")==="true")&&bt.isInView(l)&&o._handleFrame()}o._autoUpdate&&o.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){de=this._scope;var o=Date.now()/1e3,l=this._last?o-this._last:0;this._last=o,this.emit("frame",new s({delta:l,time:this._time+=l,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(o,l){var u=this._frameItems;l?(u[o._id]={item:o,time:0,count:0},++this._frameItemCount===1&&this.on("frame",this._handleFrameItems)):(delete u[o._id],--this._frameItemCount===0&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(o){for(var l in this._frameItems){var u=this._frameItems[l];u.item.emit("frame",new s(o,{time:u.time+=o.delta,count:u.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=n},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return this._pixelRatio*72},getViewSize:function(){var o=this._viewSize;return new J(o.width,o.height,this,"setViewSize")},setViewSize:function(){var o=U.read(arguments),l=o.subtract(this._viewSize);l.isZero()||(this._setElementSize(o.width,o.height),this._viewSize.set(o),this._changed(),this.emit("resize",{size:o,delta:l}),this._autoUpdate&&this.update())},_setElementSize:function(o,l){var u=this._element;u&&(u.width!==o&&(u.width=o),u.height!==l&&(u.height=l))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new V(new E,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return bt.isInView(this._element)},isInserted:function(){return bt.isInserted(this._element)},getPixelSize:function(o){var l=this._element,u;if(l){var d=l.parentNode,f=i.createElement("div");f.style.fontSize=o,d.appendChild(f),u=parseFloat(bt.getStyles(f).fontSize),d.removeChild(f)}else u=parseFloat(u);return u},getTextWidth:function(o,l){return 0}},s.each(["rotate","scale","shear","skew"],function(o){var l=o==="rotate";this[o]=function(){var u=arguments,d=(l?s:E).read(u),f=E.read(u,0,{readNull:!0});return this.transform(new j()[o](d,f||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var o=new j;return this.transform(o.translate.apply(o,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var o=E.read(arguments);this.translate(this.getCenter().subtract(o))},getZoom:function(){var o=this._decompose().scaling;return(o.x+o.y)/2},setZoom:function(o){this.transform(new j().scale(o/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(o){var l=this.getRotation();l!=null&&o!=null&&this.rotate(o-l)},getScaling:function(){var o=this._decompose().scaling;return new $(o.x,o.y,this,"setScaling")},setScaling:function(){var o=this.getScaling(),l=E.read(arguments,0,{clone:!0,readNull:!0});o&&l&&this.scale(l.x/o.x,l.y/o.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var o=this._matrix;o.set.apply(o,arguments)},transform:function(o){this._matrix.append(o)},scrollBy:function(){this.translate(E.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(E.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(E.read(arguments))},getEventPoint:function(o){return this.viewToProject(zt.getOffset(o,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(o,l){i&&typeof l=="string"&&(l=i.getElementById(l));var u=r?Uo:kt;return new u(o,l)}}},new function(){if(!r)return;var o,l,u=!1,d=!1;function f(K){var Y=zt.getTarget(K);return Y.getAttribute&&kt._viewsById[Y.getAttribute("id")]}function m(){var K=kt._focused;if(!K||!K.isVisible()){for(var Y=0,ee=kt._views.length;Y<ee;Y++)if((K=kt._views[Y]).isVisible()){kt._focused=l=K;break}}}function v(K,Y,ee){K._handleMouseEvent("mousemove",Y,ee)}var p=r.navigator,y,I,A;p.pointerEnabled||p.msPointerEnabled?(y="pointerdown MSPointerDown",I="pointermove MSPointerMove",A="pointerup pointercancel MSPointerUp MSPointerCancel"):(y="touchstart",I="touchmove",A="touchend touchcancel","ontouchstart"in r&&p.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(y+=" mousedown",I+=" mousemove",A+=" mouseup"));var P={},C={mouseout:function(K){var Y=kt._focused,ee=zt.getRelatedTarget(K);if(Y&&(!ee||ee.nodeName==="HTML")){var re=zt.getOffset(K,Y._element),oe=re.x,le=Math.abs,Ie=le(oe),Se=1<<25,be=Ie-Se;re.x=le(be)<Ie?be*(oe<0?-1:1):oe,v(Y,K,Y.viewToProject(re))}},scroll:m};P[y]=function(K){var Y=kt._focused=f(K);u||(u=!0,Y._handleMouseEvent("mousedown",K))},C[I]=function(K){var Y=kt._focused;if(!d){var ee=f(K);ee?Y!==ee&&(Y&&v(Y,K),o||(o=Y),Y=kt._focused=l=ee):l&&l===Y&&(o&&!o.isInserted()&&(o=null),Y=kt._focused=o,o=null,m())}Y&&v(Y,K)},C[y]=function(){d=!0},C[A]=function(K){var Y=kt._focused;Y&&u&&Y._handleMouseEvent("mouseup",K),d=u=!1},zt.add(i,C),zt.add(r,{load:m});var S=!1,k=!1,M={doubleclick:"click",mousedrag:"mousemove"},F=!1,N,D,x,b,O,L,z,q;function H(K,Y,ee,re,oe,le,Ie){var Se=!1,be;function Ke(qe,$e){if(qe.responds($e)){if(be||(be=new zo($e,re,oe,Y||qe,le?oe.subtract(le):null)),qe.emit($e,be)&&(S=!0,be.prevented&&(k=!0),be.stopped))return Se=!0}else{var ze=M[$e];if(ze)return Ke(qe,ze)}}for(;K&&K!==Ie&&!Ke(K,ee);)K=K._parent;return Se}function W(K,Y,ee,re,oe,le){return K._project.removeOn(ee),k=S=!1,O&&H(O,null,ee,re,oe,le)||Y&&Y!==O&&!Y.isDescendant(O)&&H(Y,null,ee==="mousedrag"?"mousemove":ee,re,oe,le,O)||H(K,O||Y||K,ee,re,oe,le)}var Q={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:P,_handleMouseEvent:function(K,Y,ee){var re=this._itemEvents,oe=re.native[K],le=K==="mousemove",Ie=this._scope.tool,Se=this;function be(Et){return re.virtual[Et]||Se.responds(Et)||Ie&&Ie.responds(Et)}le&&u&&be("mousedrag")&&(K="mousedrag"),ee||(ee=this.getEventPoint(Y));var Ke=this.getBounds().contains(ee),qe=oe&&Ke&&Se._project.hitTest(ee,{tolerance:0,fill:!0,stroke:!0}),$e=qe&&qe.item||null,ze=!1,Ze={};if(Ze[K.substr(5)]=!0,oe&&$e!==b&&(b&&H(b,null,"mouseleave",Y,ee),$e&&H($e,null,"mouseenter",Y,ee),b=$e),F^Ke&&(H(this,null,Ke?"mouseenter":"mouseleave",Y,ee),ze=!0),(Ke||Ze.drag)&&!ee.equals(D)&&(W(this,$e,le?K:"mousemove",Y,ee,D),ze=!0),F=Ke,Ze.down&&Ke||Ze.up&&N){if(W(this,$e,K,Y,ee,N),Ze.down){if(q=$e===L&&Date.now()-z<300,x=L=$e,!k&&$e){for(var We=$e;We&&!We.responds("mousedrag");)We=We._parent;We&&(O=$e)}N=ee}else Ze.up&&(!k&&$e===x&&(z=Date.now(),W(this,$e,q?"doubleclick":"click",Y,ee,N),q=!1),x=O=null);F=!1,ze=!0}D=ee,ze&&Ie&&(S=Ie._handleMouseEvent(K,Y,ee,Ze)||S),Y.cancelable!==!1&&(S&&!Ze.move||Ze.down&&be("mouseup"))&&Y.preventDefault()},_handleKeyEvent:function(K,Y,ee,re){var oe=this._scope,le=oe.tool,Ie;function Se(be){be.responds(K)&&(de=oe,be.emit(K,Ie=Ie||new Kr(K,Y,ee,re)))}this.isVisible()&&(Se(this),le&&le.responds(K)&&Se(le))},_countItemEvent:function(K,Y){var ee=this._itemEvents,re=ee.native,oe=ee.virtual;for(var le in Q)re[le]=(re[le]||0)+(Q[le][K]||0)*Y;oe[K]=(oe[K]||0)+Y},statics:{updateFocus:m,_resetState:function(){u=d=S=F=!1,o=l=N=D=x=b=O=L=z=q=null}}}}),Uo=kt.extend({_class:"CanvasView",initialize:function(l,u){if(!(u instanceof r.HTMLCanvasElement)){var d=U.read(arguments,1);if(d.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+s.slice(arguments,1));u=ie.getCanvas(d)}var f=this._context=u.getContext("2d");if(f.save(),this._pixelRatio=1,!/^off|false$/.test(c.getAttribute(u,"hidpi"))){var m=r.devicePixelRatio||1,v=bt.getPrefixed(f,"backingStorePixelRatio")||1;this._pixelRatio=m/v}kt.call(this,l,u),this._needsUpdate=!0},remove:function o(){return this._context.restore(),o.base.call(this)},_setElementSize:function o(l,u){var d=this._pixelRatio;if(o.base.call(this,l*d,u*d),d!==1){var f=this._element,m=this._context;if(!c.hasAttribute(f,"resize")){var v=f.style;v.width=l+"px",v.height=u+"px"}m.restore(),m.save(),m.scale(d,d)}},getContext:function(){return this._context},getPixelSize:function o(l){var u=de.agent,d;if(u&&u.firefox)d=o.base.call(this,l);else{var f=this._context,m=f.font;f.font=l+" serif",d=parseFloat(f.font),f.font=m}return d},getTextWidth:function(o,l){var u=this._context,d=u.font,f=0;u.font=o;for(var m=0,v=l.length;m<v;m++)f=Math.max(f,u.measureText(l[m]).width);return u.font=d,f},update:function(){if(!this._needsUpdate)return!1;var o=this._project,l=this._context,u=this._viewSize;return l.clearRect(0,0,u.width+1,u.height+1),o&&o.draw(l,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),nr=s.extend({_class:"Event",initialize:function(l){this.event=l,this.type=l&&l.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return Qr.modifiers}}),Kr=nr.extend({_class:"KeyEvent",initialize:function(l,u,d,f){this.type=l,this.event=u,this.key=d,this.character=f},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),Qr=new function(){var o={"	":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},l={tab:"	",space:" ",enter:"\r"},u={},d={},f,m,v=new s({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var I=de&&de.agent;return I&&I.mac?this.meta:this.control}}});function p(I){var A=I.key||I.keyIdentifier;return A=/^U\+/.test(A)?String.fromCharCode(parseInt(A.substr(2),16)):/^Arrow[A-Z]/.test(A)?A.substr(5):A==="Unidentified"||A===n?String.fromCharCode(I.keyCode):A,o[A]||(A.length>1?s.hyphenate(A):A.toLowerCase())}function y(I,A,P,C){var S=kt._focused,k;if(u[A]=I,I?d[A]=P:delete d[A],A.length>1&&(k=s.camelize(A))in v){v[k]=I;var M=de&&de.agent;if(k==="meta"&&M&&M.mac)if(I)f={};else{for(var F in f)F in d&&y(!1,F,f[F],C);f=null}}else I&&f&&(f[A]=P);S&&S._handleKeyEvent(I?"keydown":"keyup",C,A,P)}return zt.add(i,{keydown:function(I){var A=p(I),P=de&&de.agent;A.length>1||P&&P.chrome&&(I.altKey||P.mac&&I.metaKey||!P.mac&&I.ctrlKey)?y(!0,A,l[A]||(A.length>1?"":A),I):m=A},keypress:function(I){if(m){var A=p(I),P=I.charCode,C=P>=32?String.fromCharCode(P):A.length>1?"":A;A!==m&&(A=C.toLowerCase()),y(!0,A,C,I),m=null}},keyup:function(I){var A=p(I);A in d&&y(!1,A,d[A],I)}}),zt.add(r,{blur:function(I){for(var A in d)y(!1,A,d[A],I)}}),{modifiers:v,isDown:function(I){return!!u[I]}}},zo=nr.extend({_class:"MouseEvent",initialize:function(l,u,d,f,m){this.type=l,this.event=u,this.point=d,this.target=f,this.delta=m},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),$o=nr.extend({_class:"ToolEvent",_item:null,initialize:function(l,u,d){this.tool=l,this.type=u,this.event=d},_choosePoint:function(o,l){return o||(l?l.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(o){this._point=o},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(o){this._lastPoint=o},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(o){this._downPoint=o},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(o){this._middlePoint=o},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(o){this._delta=o},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(o){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=o},getItem:function(){if(!this._item){var o=this.tool._scope.project.hitTest(this.getPoint());if(o){for(var l=o.item,u=l._parent;/^(Group|CompoundPath)$/.test(u._class);)l=u,u=u._parent;this._item=l}}return this._item},setItem:function(o){this._item=o},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}});h.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(l){h.call(this),this._moveCount=-1,this._downCount=-1,this.set(l)},getMinDistance:function(){return this._minDistance},setMinDistance:function(o){this._minDistance=o,o!=null&&this._maxDistance!=null&&o>this._maxDistance&&(this._maxDistance=o)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(o){this._maxDistance=o,this._minDistance!=null&&o!=null&&o<this._minDistance&&(this._minDistance=o)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(o){this._minDistance=this._maxDistance=o},_handleMouseEvent:function(o,l,u,d){de=this._scope,d.drag&&!this.responds(o)&&(o="mousemove");var f=d.move||d.drag,m=this.responds(o),v=this.minDistance,p=this.maxDistance,y=!1,I=this;function A(C,S){var k=u,M=f?I._point:I._downPoint||k;if(f){if(I._moveCount>=0&&k.equals(M))return!1;if(M&&(C!=null||S!=null)){var F=k.subtract(M),N=F.getLength();if(N<(C||0))return!1;S&&(k=M.add(F.normalize(Math.min(N,S))))}I._moveCount++}return I._point=k,I._lastPoint=M||k,d.down&&(I._moveCount=-1,I._downPoint=k,I._downCount++),!0}function P(){m&&(y=I.emit(o,new $o(I,o,l))||y)}if(d.down)A(),P();else if(d.up)A(null,p),P();else if(m)for(;A(v,p);)P();return y}});var fd=s.extend(a,{_class:"Tween",statics:{easings:new s({linear:function(o){return o},easeInQuad:function(o){return o*o},easeOutQuad:function(o){return o*(2-o)},easeInOutQuad:function(o){return o<.5?2*o*o:-1+2*(2-o)*o},easeInCubic:function(o){return o*o*o},easeOutCubic:function(o){return--o*o*o+1},easeInOutCubic:function(o){return o<.5?4*o*o*o:(o-1)*(2*o-2)*(2*o-2)+1},easeInQuart:function(o){return o*o*o*o},easeOutQuart:function(o){return 1- --o*o*o*o},easeInOutQuart:function(o){return o<.5?8*o*o*o*o:1-8*--o*o*o*o},easeInQuint:function(o){return o*o*o*o*o},easeOutQuint:function(o){return 1+--o*o*o*o*o},easeInOutQuint:function(o){return o<.5?16*o*o*o*o*o:1+16*--o*o*o*o*o}})},initialize:function o(l,u,d,f,m,v){this.object=l;var p=typeof m,y=p==="function";this.type=y?p:p==="string"?m:"linear",this.easing=y?m:o.easings[this.type],this.duration=f,this.running=!1,this._then=null,this._startTime=null;var I=u||d;this._keys=I?Object.keys(I):[],this._parsedKeys=this._parseKeys(this._keys),this._from=I&&this._getState(u),this._to=I&&this._getState(d),v!==!1&&this.start()},then:function(o){return this._then=o,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(o){if(this.running){o>=1&&(o=1,this.running=!1);for(var l=this.easing(o),u=this._keys,d=function(A){return typeof A=="function"?A(l,o):A},f=0,m=u&&u.length;f<m;f++){var v=u[f],p=d(this._from[v]),y=d(this._to[v]),I=p&&y&&p.__add&&y.__add?y.__subtract(p).__multiply(l).__add(p):(y-p)*l+p;this._setProperty(this._parsedKeys[v],I)}this.responds("update")&&this.emit("update",new s({progress:o,factor:l})),!this.running&&this._then&&this._then(this.object)}return this},_events:{onUpdate:{}},_handleFrame:function(o){var l=this._startTime,u=l?(o-l)/this.duration:0;l||(this._startTime=o),this.update(u)},_getState:function(o){for(var l=this._keys,u={},d=0,f=l.length;d<f;d++){var m=l[d],v=this._parsedKeys[m],p=this._getProperty(v),y;if(o){var I=this._resolveValue(p,o[m]);this._setProperty(v,I),y=this._getProperty(v),y=y&&y.clone?y.clone():y,this._setProperty(v,p)}else y=p&&p.clone?p.clone():p;u[m]=y}return u},_resolveValue:function(o,l){if(l){if(Array.isArray(l)&&l.length===2){var u=l[0];return u&&u.match&&u.match(/^[+\-\*\/]=/)?this._calculate(o,u[0],l[1]):l}else if(typeof l=="string"){var d=l.match(/^[+\-*/]=(.*)/);if(d){var f=JSON.parse(d[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(o,l[0],f)}}}return l},_calculate:function(o,l,u){return de.PaperScript.calculateBinary(o,l,u)},_parseKeys:function(o){for(var l={},u=0,d=o.length;u<d;u++){var f=o[u],m=f.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");l[f]=m.split("/")}return l},_getProperty:function(o,l){for(var u=this.object,d=0,f=o.length-(l||0);d<f&&u;d++)u=u[o[d]];return u},_setProperty:function(o,l){var u=this._getProperty(o,1);u&&(u[o[o.length-1]]=l)}}),X={request:function(o){var l=new e.XMLHttpRequest;return l.open((o.method||"get").toUpperCase(),o.url,s.pick(o.async,!0)),o.mimeType&&l.overrideMimeType(o.mimeType),l.onload=function(){var u=l.status;u===0||u===200?o.onLoad&&o.onLoad.call(l,l.responseText):l.onerror()},l.onerror=function(){var u=l.status,d='Could not load "'+o.url+'" (Status: '+u+")";if(o.onError)o.onError(d,u);else throw new Error(d)},l.send(null)}},ie=s.exports.CanvasProvider={canvases:[],getCanvas:function(o,l,u){if(!r)return null;var d,f=!0;typeof o=="object"&&(l=o.height,o=o.width),this.canvases.length?d=this.canvases.pop():(d=i.createElement("canvas"),f=!1);var m=d.getContext("2d",u||{});if(!m)throw new Error("Canvas "+d+" is unable to provide a 2D context.");return d.width===o&&d.height===l?f&&m.clearRect(0,0,o+1,l+1):(d.width=o,d.height=l),m.save(),d},getContext:function(o,l,u){var d=this.getCanvas(o,l,u);return d?d.getContext("2d",u||{}):null},release:function(o){var l=o&&o.canvas?o.canvas:o;l&&l.getContext&&(l.getContext("2d").restore(),this.canvases.push(l))}},ge=new function(){var o=Math.min,l=Math.max,u=Math.abs,d,f,m,v,p,y,I,A,P,C,S;function k(O,L,z){return .2989*O+.587*L+.114*z}function M(O,L,z,W){var H=W-k(O,L,z);P=O+H,C=L+H,S=z+H;var W=k(P,C,S),Q=o(P,C,S),K=l(P,C,S);if(Q<0){var Y=W-Q;P=W+(P-W)*W/Y,C=W+(C-W)*W/Y,S=W+(S-W)*W/Y}if(K>255){var ee=255-W,re=K-W;P=W+(P-W)*ee/re,C=W+(C-W)*ee/re,S=W+(S-W)*ee/re}}function F(O,L,z){return l(O,L,z)-o(O,L,z)}function N(O,L,z,q){var H=[O,L,z],W=l(O,L,z),Q=o(O,L,z),K;Q=Q===O?0:Q===L?1:2,W=W===O?0:W===L?1:2,K=o(Q,W)===0?l(Q,W)===1?2:1:0,H[W]>H[Q]?(H[K]=(H[K]-H[Q])*q/(H[W]-H[Q]),H[W]=q):H[K]=H[W]=0,H[Q]=0,P=H[0],C=H[1],S=H[2]}var D={multiply:function(){P=p*d/255,C=y*f/255,S=I*m/255},screen:function(){P=p+d-p*d/255,C=y+f-y*f/255,S=I+m-I*m/255},overlay:function(){P=p<128?2*p*d/255:255-2*(255-p)*(255-d)/255,C=y<128?2*y*f/255:255-2*(255-y)*(255-f)/255,S=I<128?2*I*m/255:255-2*(255-I)*(255-m)/255},"soft-light":function(){var O=d*p/255;P=O+p*(255-(255-p)*(255-d)/255-O)/255,O=f*y/255,C=O+y*(255-(255-y)*(255-f)/255-O)/255,O=m*I/255,S=O+I*(255-(255-I)*(255-m)/255-O)/255},"hard-light":function(){P=d<128?2*d*p/255:255-2*(255-d)*(255-p)/255,C=f<128?2*f*y/255:255-2*(255-f)*(255-y)/255,S=m<128?2*m*I/255:255-2*(255-m)*(255-I)/255},"color-dodge":function(){P=p===0?0:d===255?255:o(255,255*p/(255-d)),C=y===0?0:f===255?255:o(255,255*y/(255-f)),S=I===0?0:m===255?255:o(255,255*I/(255-m))},"color-burn":function(){P=p===255?255:d===0?0:l(0,255-(255-p)*255/d),C=y===255?255:f===0?0:l(0,255-(255-y)*255/f),S=I===255?255:m===0?0:l(0,255-(255-I)*255/m)},darken:function(){P=p<d?p:d,C=y<f?y:f,S=I<m?I:m},lighten:function(){P=p>d?p:d,C=y>f?y:f,S=I>m?I:m},difference:function(){P=p-d,P<0&&(P=-P),C=y-f,C<0&&(C=-C),S=I-m,S<0&&(S=-S)},exclusion:function(){P=p+d*(255-p-p)/255,C=y+f*(255-y-y)/255,S=I+m*(255-I-I)/255},hue:function(){N(d,f,m,F(p,y,I)),M(P,C,S,k(p,y,I))},saturation:function(){N(p,y,I,F(d,f,m)),M(P,C,S,k(p,y,I))},luminosity:function(){M(p,y,I,k(d,f,m))},color:function(){M(d,f,m,k(p,y,I))},add:function(){P=o(p+d,255),C=o(y+f,255),S=o(I+m,255)},subtract:function(){P=l(p-d,0),C=l(y-f,0),S=l(I-m,0)},average:function(){P=(p+d)/2,C=(y+f)/2,S=(I+m)/2},negation:function(){P=255-u(255-d-p),C=255-u(255-f-y),S=255-u(255-m-I)}},x=this.nativeModes=s.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(O){this[O]=!0},{}),b=ie.getContext(1,1,{willReadFrequently:!0});b&&(s.each(D,function(O,L){var z=L==="darken",q=!1;b.save();try{b.fillStyle=z?"#300":"#a00",b.fillRect(0,0,1,1),b.globalCompositeOperation=L,b.globalCompositeOperation===L&&(b.fillStyle=z?"#a00":"#300",b.fillRect(0,0,1,1),q=b.getImageData(0,0,1,1).data[0]!==z?170:51)}catch{}b.restore(),x[L]=q}),ie.release(b)),this.process=function(O,L,z,q,H){var W=L.canvas,Q=O==="normal";if(Q||x[O])z.save(),z.setTransform(1,0,0,1,0,0),z.globalAlpha=q,Q||(z.globalCompositeOperation=O),z.drawImage(W,H.x,H.y),z.restore();else{var K=D[O];if(!K)return;for(var Y=z.getImageData(H.x,H.y,W.width,W.height),ee=Y.data,re=L.getImageData(0,0,W.width,W.height).data,oe=0,le=ee.length;oe<le;oe+=4){d=re[oe],p=ee[oe],f=re[oe+1],y=ee[oe+1],m=re[oe+2],I=ee[oe+2],v=re[oe+3],A=ee[oe+3],K();var Ie=v*q/255,Se=1-Ie;ee[oe]=Ie*P+Se*p,ee[oe+1]=Ie*C+Se*y,ee[oe+2]=Ie*S+Se*I,ee[oe+3]=v*q+Se*A}z.putImageData(Y,H.x,H.y)}}},Ae=new function(){var o="http://www.w3.org/2000/svg",l="http://www.w3.org/2000/xmlns",u="http://www.w3.org/1999/xlink",d={href:u,xlink:l,xmlns:l+"/","xmlns:xlink":l+"/"};function f(p,y,I){return v(i.createElementNS(o,p),y,I)}function m(p,y){var I=d[y],A=I?p.getAttributeNS(I,y):p.getAttribute(y);return A==="null"?null:A}function v(p,y,I){for(var A in y){var P=y[A],C=d[A];typeof P=="number"&&I&&(P=I.number(P)),C?p.setAttributeNS(C,A,P):p.setAttribute(A,P)}return p}return{svg:o,xmlns:l,xlink:u,create:f,get:m,set:v}},Re=s.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(o,l){return!l&&(o instanceof Ce||o instanceof _e||o instanceof it)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(o,l){var u=s.capitalize(l),d=o[2];this[l]={type:o[1],property:l,attribute:o[0],toSVG:d,fromSVG:d&&s.each(d,function(f,m){this[f]=m},{}),exportFilter:o[3],get:"get"+u,set:"set"+u}},{});new function(){var o;function l(D,x,b){var O=new s,L=D.getTranslation();if(x){var z;D.isInvertible()?(D=D._shiftless(),z=D._inverseTransform(L),L=null):z=new E,O[b?"cx":"x"]=z.x,O[b?"cy":"y"]=z.y}if(!D.isIdentity()){var q=D.decompose();if(q){var H=[],W=q.rotation,Q=q.scaling,K=q.skewing;L&&!L.isZero()&&H.push("translate("+o.point(L)+")"),W&&H.push("rotate("+o.number(W)+")"),(!w.isZero(Q.x-1)||!w.isZero(Q.y-1))&&H.push("scale("+o.point(Q)+")"),K.x&&H.push("skewX("+o.number(K.x)+")"),K.y&&H.push("skewY("+o.number(K.y)+")"),O.transform=H.join(" ")}else O.transform="matrix("+D.getValues().join(",")+")"}return O}function u(D,x){for(var b=l(D._matrix),O=D._children,L=Ae.create("g",b,o),z=0,q=O.length;z<q;z++){var H=O[z],W=F(H,x);if(W)if(H.isClipMask()){var Q=Ae.create("clipPath");Q.appendChild(W),k(H,Q,"clip"),Ae.set(L,{"clip-path":"url(#"+Q.id+")"})}else L.appendChild(W)}return L}function d(D,x){var b=l(D._matrix,!0),O=D.getSize(),L=D.getImage();return b.x-=O.width/2,b.y-=O.height/2,b.width=O.width,b.height=O.height,b.href=x.embedImages==!1&&L&&L.src||D.toDataURL(),Ae.create("image",b,o)}function f(D,x){var b=x.matchShapes;if(b){var O=D.toShape(!1);if(O)return m(O)}var L=D._segments,z=L.length,q,H=l(D._matrix);if(b&&z>=2&&!D.hasHandles())if(z>2){q=D._closed?"polygon":"polyline";for(var W=[],Q=0;Q<z;Q++)W.push(o.point(L[Q]._point));H.points=W.join(" ")}else{q="line";var K=L[0]._point,Y=L[1]._point;H.set({x1:K.x,y1:K.y,x2:Y.x,y2:Y.y})}else q="path",H.d=D.getPathData(null,x.precision);return Ae.create(q,H,o)}function m(D){var x=D._type,b=D._radius,O=l(D._matrix,!0,x!=="rectangle");if(x==="rectangle"){x="rect";var L=D._size,z=L.width,q=L.height;O.x-=z/2,O.y-=q/2,O.width=z,O.height=q,b.isZero()&&(b=null)}return b&&(x==="circle"?O.r=b:(O.rx=b.width,O.ry=b.height)),Ae.create(x,O,o)}function v(D,x){var b=l(D._matrix),O=D.getPathData(null,x.precision);return O&&(b.d=O),Ae.create("path",b,o)}function p(D,x){var b=l(D._matrix,!0),O=D._definition,L=S(O,"symbol"),z=O._item,q=z.getStrokeBounds();return L||(L=Ae.create("symbol",{viewBox:o.rectangle(q)}),L.appendChild(F(z,x)),k(O,L,"symbol")),b.href="#"+L.id,b.x+=q.x,b.y+=q.y,b.width=q.width,b.height=q.height,b.overflow="visible",Ae.create("use",b,o)}function y(D){var x=S(D,"color");if(!x){var b=D.getGradient(),O=b._radial,L=D.getOrigin(),z=D.getDestination(),q;if(O){q={cx:L.x,cy:L.y,r:L.getDistance(z)};var H=D.getHighlight();H&&(q.fx=H.x,q.fy=H.y)}else q={x1:L.x,y1:L.y,x2:z.x,y2:z.y};q.gradientUnits="userSpaceOnUse",x=Ae.create((O?"radial":"linear")+"Gradient",q,o);for(var W=b._stops,Q=0,K=W.length;Q<K;Q++){var Y=W[Q],ee=Y._color,re=ee.getAlpha(),oe=Y._offset;q={offset:oe??Q/(K-1)},ee&&(q["stop-color"]=ee.toCSS(!0)),re<1&&(q["stop-opacity"]=re),x.appendChild(Ae.create("stop",q,o))}k(D,x,"color")}return"url(#"+x.id+")"}function I(D){var x=Ae.create("text",l(D._matrix,!0),o);return x.textContent=D._content,x}var A={Group:u,Layer:u,Raster:d,Path:f,Shape:m,CompoundPath:v,SymbolItem:p,PointText:I};function P(D,x,b){var O={},L=!b&&D.getParent(),z=[];return D._name!=null&&(O.id=D._name),s.each(Re,function(q){var H=q.get,W=q.type,Q=D[H]();if(q.exportFilter?q.exportFilter(D,Q):!L||!s.equals(L[H](),Q)){if(W==="color"&&Q!=null){var K=Q.getAlpha();K<1&&(O[q.attribute+"-opacity"]=K)}W==="style"?z.push(q.attribute+": "+Q):O[q.attribute]=Q==null?"none":W==="color"?Q.gradient?y(Q):Q.toCSS(!0):W==="array"?Q.join(","):W==="lookup"?q.toSVG[Q]:Q}}),z.length&&(O.style=z.join(";")),O.opacity===1&&delete O.opacity,D._visible||(O.visibility="hidden"),Ae.set(x,O,o)}var C;function S(D,x){return C||(C={ids:{},svgs:{}}),D&&C.svgs[x+"-"+(D._id||D.__id||(D.__id=T.get("svg")))]}function k(D,x,b){C||S();var O=C.ids[b]=(C.ids[b]||0)+1;x.id=b+"-"+O,C.svgs[b+"-"+(D._id||D.__id)]=x}function M(D,x){var b=D,O=null;if(C){b=D.nodeName.toLowerCase()==="svg"&&D;for(var L in C.svgs)O||(b||(b=Ae.create("svg"),b.appendChild(D)),O=b.insertBefore(Ae.create("defs"),b.firstChild)),O.appendChild(C.svgs[L]);C=null}return x.asString?new e.XMLSerializer().serializeToString(b):b}function F(D,x,b){var O=A[D._class],L=O&&O(D,x);if(L){var z=x.onExport;z&&(L=z(D,L,x)||L);var q=JSON.stringify(D._data);q&&q!=="{}"&&q!=="null"&&L.setAttribute("data-paper-data",q)}return L&&P(D,L,b)}function N(D){return D||(D={}),o=new _(D.precision),D}te.inject({exportSVG:function(D){return D=N(D),M(F(this,D,!0),D)}}),ne.inject({exportSVG:function(D){D=N(D);var x=this._children,b=this.getView(),O=s.pick(D.bounds,"view"),L=D.matrix||O==="view"&&b._matrix,z=L&&j.read([L]),q=O==="view"?new V([0,0],b.getViewSize()):O==="content"?te._getBounds(x,z,{stroke:!0}).rect:V.read([O],0,{readNull:!0}),H={version:"1.1",xmlns:Ae.svg,"xmlns:xlink":Ae.xlink};q&&(H.width=q.width,H.height=q.height,(q.x||q.x===0||q.y||q.y===0)&&(H.viewBox=o.rectangle(q)));var W=Ae.create("svg",H,o),Q=W;z&&!z.isIdentity()&&(Q=W.appendChild(Ae.create("g",l(z),o)));for(var K=0,Y=x.length;K<Y;K++)Q.appendChild(F(x[K],D,!0));return M(W,D)}})},new function(){var o={},l;function u(x,b,O,L,z,q){var H=Ae.get(x,b)||q,W=H==null?L?null:O?"":0:O?H:parseFloat(H);return/%\s*$/.test(H)?W/100*(z?1:l[/x|^width/.test(b)?"width":"height"]):W}function d(x,b,O,L,z,q,H){return b=u(x,b||"x",!1,L,z,q),O=u(x,O||"y",!1,L,z,H),L&&(b==null||O==null)?null:new E(b,O)}function f(x,b,O,L,z){return b=u(x,b||"width",!1,L,z),O=u(x,O||"height",!1,L,z),L&&(b==null||O==null)?null:new U(b,O)}function m(x,b,O){return x==="none"?null:b==="number"?parseFloat(x):b==="array"?x?x.split(/[\s,]+/g).map(parseFloat):[]:b==="color"?F(x)||x:b==="lookup"?O[x]:x}function v(x,b,O,L){var z=x.childNodes,q=b==="clippath",H=b==="defs",W=new ae,Q=W._project,K=Q._currentStyle,Y=[];if(!q&&!H&&(W=M(W,x,L),Q._currentStyle=W._style.clone()),L)for(var ee=x.querySelectorAll("defs"),re=0,oe=ee.length;re<oe;re++)N(ee[re],O,!1);for(var re=0,oe=z.length;re<oe;re++){var le=z[re],Ie;le.nodeType===1&&!/^defs$/i.test(le.nodeName)&&(Ie=N(le,O,!1))&&!(Ie instanceof Le)&&Y.push(Ie)}return W.addChildren(Y),q&&(W=M(W.reduce(),x,L)),Q._currentStyle=K,(q||H)&&(W.remove(),W=null),W}function p(x,b){for(var O=x.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),L=[],z=0,q=O.length;z<q;z+=2)L.push(new E(parseFloat(O[z]),parseFloat(O[z+1])));var H=new Te(L);return b==="polygon"&&H.closePath(),H}function y(x){return Ce.create(x.getAttribute("d"))}function I(x,b){var O=(u(x,"href",!0)||"").substring(1),L=b==="radialgradient",z;if(O)z=o[O].getGradient(),z._radial^L&&(z=z.clone(),z._radial=L);else{for(var q=x.childNodes,H=[],W=0,Q=q.length;W<Q;W++){var K=q[W];K.nodeType===1&&H.push(M(new En,K))}z=new ln(H,L)}var Y,ee,re,oe=u(x,"gradientUnits",!0)!=="userSpaceOnUse";L?(Y=d(x,"cx","cy",!1,oe,"50%","50%"),ee=Y.add(u(x,"r",!1,!1,oe,"50%"),0),re=d(x,"fx","fy",!0,oe)):(Y=d(x,"x1","y1",!1,oe,"0%","0%"),ee=d(x,"x2","y2",!1,oe,"100%","0%"));var le=M(new Qe(z,Y,ee,re),x);return le._scaleToBounds=oe,null}var A={"#document":function(x,b,O,L){for(var z=x.childNodes,q=0,H=z.length;q<H;q++){var W=z[q];if(W.nodeType===1)return N(W,O,L)}},g:v,svg:v,clippath:v,polygon:p,polyline:p,path:y,lineargradient:I,radialgradient:I,image:function(x){var b=new me(u(x,"href",!0));return b.on("load",function(){var O=f(x);this.setSize(O);var L=d(x).add(O.divide(2));this._matrix.append(new j().translate(L))}),b},symbol:function(x,b,O,L){return new Le(v(x,b,O,L),!0)},defs:v,use:function(x){var b=(u(x,"href",!0)||"").substring(1),O=o[b],L=d(x);return O?O instanceof Le?O.place(L):O.clone().translate(L):null},circle:function(x){return new _e.Circle(d(x,"cx","cy"),u(x,"r"))},ellipse:function(x){return new _e.Ellipse({center:d(x,"cx","cy"),radius:f(x,"rx","ry")})},rect:function(x){return new _e.Rectangle(new V(d(x),f(x)),f(x,"rx","ry"))},line:function(x){return new Te.Line(d(x,"x1","y1"),d(x,"x2","y2"))},text:function(x){var b=new Mt(d(x).add(d(x,"dx","dy")));return b.setContent(x.textContent.trim()||""),b},switch:v};function P(x,b,O,L){if(x.transform){for(var z=(L.getAttribute(O)||"").split(/\)\s*/g),q=new j,H=0,W=z.length;H<W;H++){var Q=z[H];if(!Q)break;for(var K=Q.split(/\(\s*/),Y=K[0],ee=K[1].split(/[\s,]+/g),re=0,oe=ee.length;re<oe;re++)ee[re]=parseFloat(ee[re]);switch(Y){case"matrix":q.append(new j(ee[0],ee[1],ee[2],ee[3],ee[4],ee[5]));break;case"rotate":q.rotate(ee[0],ee[1]||0,ee[2]||0);break;case"translate":q.translate(ee[0],ee[1]||0);break;case"scale":q.scale(ee);break;case"skewX":q.skew(ee[0],0);break;case"skewY":q.skew(0,ee[0]);break}}x.transform(q)}}function C(x,b,O){var L=O==="fill-opacity"?"getFillColor":"getStrokeColor",z=x[L]&&x[L]();z&&z.setAlpha(parseFloat(b))}var S=s.set(s.each(Re,function(x){this[x.attribute]=function(b,O){if(b[x.set]&&(b[x.set](m(O,x.type,x.fromSVG)),x.type==="color")){var L=b[x.get]();if(L&&L._scaleToBounds){var z=b.getBounds();L.transform(new j().translate(z.getPoint()).scale(z.getSize()))}}}},{}),{id:function(x,b){o[b]=x,x.setName&&x.setName(b)},"clip-path":function(x,b){var O=F(b);if(O)if(O=O.clone(),O.setClipMask(!0),x instanceof ae)x.insertChild(0,O);else return new ae(O,x)},gradientTransform:P,transform:P,"fill-opacity":C,"stroke-opacity":C,visibility:function(x,b){x.setVisible&&x.setVisible(b==="visible")},display:function(x,b){x.setVisible&&x.setVisible(b!==null)},"stop-color":function(x,b){x.setColor&&x.setColor(b)},"stop-opacity":function(x,b){x._color&&x._color.setAlpha(parseFloat(b))},offset:function(x,b){if(x.setOffset){var O=b.match(/(.*)%$/);x.setOffset(O?O[1]/100:parseFloat(b))}},viewBox:function(x,b,O,L,z){var q=new V(m(b,"array")),H=f(L,null,null,!0),W,Q;if(x instanceof ae){var K=H?H.divide(q.getSize()):1,Q=new j().scale(K).translate(q.getPoint().negate());W=x}else x instanceof Le&&(H&&q.setSize(H),W=x._item);if(W){if(k(L,"overflow",z)!=="visible"){var Y=new _e.Rectangle(q);Y.setClipMask(!0),W.addChild(Y)}Q&&W.transform(Q)}}});function k(x,b,O){var L=x.attributes[b],z=L&&L.value;if(!z&&x.style){var q=s.camelize(b);z=x.style[q],!z&&O.node[q]!==O.parent[q]&&(z=O.node[q])}return z?z==="none"?null:z:n}function M(x,b,O){var L=b.parentNode,z={node:bt.getStyles(b)||{},parent:!O&&!/^defs$/i.test(L.tagName)&&bt.getStyles(L)||{}};return s.each(S,function(q,H){var W=k(b,H,z);x=W!==n&&q(x,W,H,b,z)||x}),x}function F(x){var b=x&&x.match(/\((?:["'#]*)([^"')]+)/),O=b&&b[1],L=O&&o[r?O.replace(r.location.href.split("#")[0]+"#",""):O];return L&&L._scaleToBounds&&(L=L.clone(),L._scaleToBounds=!0),L}function N(x,b,O){var L=x.nodeName.toLowerCase(),z=L!=="#document",q=i.body,H,W,Q;O&&z&&(l=de.getView().getSize(),l=f(x,null,null,!0)||l,H=Ae.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),W=x.parentNode,Q=x.nextSibling,H.appendChild(x),q.appendChild(H));var K=de.settings,Y=K.applyMatrix,ee=K.insertItems;K.applyMatrix=!1,K.insertItems=!1;var re=A[L],oe=re&&re(x,L,b,O)||null;if(K.insertItems=ee,K.applyMatrix=Y,oe){z&&!(oe instanceof ae)&&(oe=M(oe,x,O));var le=b.onImport,Ie=z&&x.getAttribute("data-paper-data");le&&(oe=le(x,oe,b)||oe),b.expandShapes&&oe instanceof _e&&(oe.remove(),oe=oe.toPath()),Ie&&(oe._data=JSON.parse(Ie))}return H&&(q.removeChild(H),W&&(Q?W.insertBefore(x,Q):W.appendChild(x))),O&&(o={},oe&&s.pick(b.applyMatrix,Y)&&oe.matrix.apply(!0,!0)),oe}function D(x,b,O){if(!x)return null;b=typeof b=="function"?{onLoad:b}:b||{};var L=de,z=null;function q(K){try{var Y=typeof K=="object"?K:new e.DOMParser().parseFromString(K.trim(),"image/svg+xml");if(!Y.nodeName)throw Y=null,new Error("Unsupported SVG source: "+x);de=L,z=N(Y,b,!0),(!b||b.insert!==!1)&&O._insertItem(n,z);var ee=b.onLoad;ee&&ee(z,K)}catch(re){H(re)}}function H(K,Y){var ee=b.onError;if(ee)ee(K,Y);else throw new Error(K)}if(typeof x=="string"&&!/^[\s\S]*</.test(x)){var W=i.getElementById(x);W?q(W):X.request({url:x,async:!0,onLoad:q,onError:H})}else if(typeof File<"u"&&x instanceof File){var Q=new FileReader;return Q.onload=function(){q(Q.result)},Q.onerror=function(){H(Q.error)},Q.readAsText(x)}else q(x);return z}te.inject({importSVG:function(x,b){return D(x,b,this)}}),ne.inject({importSVG:function(x,b){return this.activate(),D(x,b,this)}})};var de=new(c.inject(s.exports,{Base:s,Numerical:w,Key:Qr,DomEvent:zt,DomElement:bt,document:i,window:r,Symbol:Le,PlacedSymbol:tt}));return de.agent.node&&g1(de),typeof n=="function"&&n.amd?n("paper",de):t&&(t.exports=de),de}).call(Lk,typeof self=="object"?self:null)})(wk);var A8=wk.exports;const He=I1(A8),P8=t=>{const e=He.project.importSVG(`<path d="${t}" />`,{applyMatrix:!0,insert:!1}),n={path:e.exportSVG().getAttribute("d"),edges:e.curves.length,height:Math.round(e.bounds.height),width:Math.round(e.bounds.width),length:Math.round(e.length)};if(e.remove(),n.edges<3||n.edges>23)throw new Error("Invalid path");return n},b8=({tangram:t,deferred:e})=>{const{tangramsStarredBy:n}=G.useContext(Dr),r=G.useMemo(()=>{let i=0;for(const s in n[t.id])n[t.id][s]&&(i+=1);return i},[t,n]);return R.jsx(rs,{onClose:()=>e.reject(cn),css:{gap:3},children:R.jsxs(fe,{css:{gap:3,overflow:"auto",flex:"1",alignItems:"center"},children:[R.jsx(ud,{selected:!0,tangram:t}),R.jsx(Xe,{css:{fontSize:2},children:R.jsx(Tt,{id:"Earned {stars}",values:{stars:r,starIcon:()=>R.jsx(Er,{icon:Ao,css:{fill:"currentColor"}})}})})]})})},R8=({tangram:t,deferred:e})=>{const n=Zt(),r=G.useContext(ui),{currentUser:i}=G.useContext(Hn),[s,a]=G.useState(()=>({...t})),{tangramsStarredBy:c}=G.useContext(Dr),h=i&&!t.id,g=G.useMemo(()=>({path:t.path,category:t.category,emoji:t.category!=="digits"&&t.category!=="letters"?t.emoji:f1(),letterIndex:t.category==="letters"?fc.indexOf(t.emoji):void 0,digitIndex:t.category==="digits"?dc.indexOf(t.emoji):void 0}),[t]),{handleSubmit:_,register:w,watch:T,setError:E,clearErrors:$,formState:U}=Ya({defaultValues:g}),{path:J,category:V,emoji:B,letterIndex:j,digitIndex:Z}=T();G.useEffect(()=>{try{const ce=P8(J);a(_e=>({..._e,...ce})),$("path")}catch{E("path",{type:"invalid",message:n.formatMessage({id:"Invalid path"})})}},[J,E,$,n]),G.useEffect(()=>{const ce=V==="letters"?fc[j]:V==="digits"?dc[Z]:B||f1();a(_e=>({..._e,emoji:ce}))},[V,B,j,Z]),G.useEffect(()=>{a(ce=>({...ce,category:V}))},[V]);const ne=async()=>{window.confirm(n.formatMessage({id:"Are you sure you want to delete this tangram?"}))&&(await Ft.firestore().collection("tangrams").doc(t.id).delete(),r(n.formatMessage({id:"Tangram deleted successfuly"})),e.resolve())},te=async()=>{h?(await Ft.firestore().collection("tangrams").add({...s,uid:i.uid,approved:!1}),r(n.formatMessage({id:"Tangram submitted for review"}))):(await Ft.firestore().collection("tangrams").doc(t.id).update(s),r(n.formatMessage({id:"Tangram modified successfuly"}))),e.resolve()},ae=G.useMemo(()=>{if(!t.approved)return 0;let ce=0;for(const _e in c[t.id])c[t.id][_e]&&(ce+=1);return ce},[t,c]);return R.jsxs(rs,{title:R.jsx(Ur,{children:h?n.formatMessage({id:"Submit your tangram"}):n.formatMessage({id:"Edit your tangram"})}),onClose:()=>e.reject(cn),as:"form",onSubmit:_(te),css:{gap:3},children:[R.jsxs(fe,{css:{gap:3,overflow:"auto",flex:"1"},children:[R.jsx(ud,{showStroke:i.isAdmin,selected:!0,completed:!0,tangram:s,css:{alignSelf:"center"}}),t.approved&&R.jsx(Xe,{css:{alignSelf:"center",fontSize:2},children:R.jsx(Tt,{id:"Earned {stars}",values:{stars:ae,starIcon:()=>R.jsx(Er,{icon:Ao,css:{fill:"currentColor"}})}})}),h&&!i.isAdmin&&R.jsx(ds,{children:R.jsx(Tt,{id:"A moderator will have to approve your tangram. It can be deleted or edited at any time.",values:{br:()=>R.jsx("br",{})}})}),i&&i.isAdmin&&R.jsx(R.Fragment,{children:R.jsxs(fe,{css:{gap:2},children:[R.jsx("label",{children:n.formatMessage({id:"Path"})}),R.jsx(fn,{as:"textarea",...w("path")}),U.errors.path&&R.jsx(br,{children:U.errors.path.message})]})}),R.jsxs(fe,{css:{gap:2},children:[R.jsx("label",{children:n.formatMessage({id:"Category"})}),R.jsx(fn,{as:"select",...w("category"),children:Dk.map(ce=>R.jsx("option",{value:ce,children:n.formatMessage({id:ce})},ce))})]}),V==="digits"?R.jsxs(fe,{css:{gap:2},children:[R.jsx("label",{children:n.formatMessage({id:"Victory emoji"})}),R.jsx(fn,{as:"select",...w("digitIndex"),children:dc.map((ce,_e)=>R.jsx("option",{value:_e,children:ce},_e))})]}):V==="letters"?R.jsxs(fe,{css:{gap:2},children:[R.jsx("label",{children:n.formatMessage({id:"Victory emoji"})}),R.jsx(fn,{as:"select",...w("letterIndex"),children:fc.map((ce,_e)=>R.jsx("option",{value:_e,children:ce},_e))})]}):R.jsxs(fe,{css:{gap:2},children:[R.jsx("label",{children:n.formatMessage({id:"Victory emoji"})}),R.jsx(fn,{...w("emoji")}),R.jsx(ds,{children:n.formatMessage({id:"Leave empty for random emoji"})})]})]}),R.jsx(cr,{type:"submit",children:h?n.formatMessage({id:"Submit!"}):n.formatMessage({id:"Edit!"})}),!h&&R.jsx(fe,{css:{alignItems:"center"},children:R.jsx(Ti,{onClick:ne,children:n.formatMessage({id:"Or delete tangram"})})})]})},k8=({tangram:t,deferred:e})=>{const{currentUser:n}=G.useContext(Hn);return n&&(n.isAdmin||!t.id||t.uid===n.uid)?R.jsx(R8,{tangram:t,deferred:e}):R.jsx(b8,{tangram:t,deferred:e})};class us{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}const Ik=G.createContext([!0,()=>{}]),pI=()=>G.useContext(Ik),N8=({children:t})=>{const[e,n]=G.useState(!0);G.useEffect(()=>{const s=window.localStorage.getItem("showBackgroundPattern");if(s===null){n(!0);return}try{const a=JSON.parse(s);n(!!JSON.parse(a))}catch{window.localStorage.removeItem("showBackgroundPattern")}},[]);const r=G.useCallback(()=>{const s=!e;n(s),window.localStorage.setItem("showBackgroundPattern",JSON.stringify(s))},[e]),i=G.useMemo(()=>[e,r],[e,r]);return R.jsx(Ik.Provider,{value:i,children:t})},Ek=G.createContext(["",()=>{}]),Tk=()=>G.useContext(Ek),m1="css-system-theme",p1={breakpoints:{s:"40em",m:"52em",l:"64em"},space:[0,4,8,16,32,64,128,256,512],sizes:{menu:40,inline:16,logo:128,icon:24,badge:32,badgeBig:86},borderWidths:{loader:8},radii:[0,4,8,16,32],fontSizes:[10,12,14,18,22,30,46,62,70]},Wd={light:{...p1,colors:{pieces:{st1:"#FECA57",st2:"#48DBFB",mt1:"#1DD1A1",lt1:"#FF6B6B",lt2:"#8557E0",sq:"#FF9FF3",rh:"#54A0FF"},difficulties:["#10ac84","#2e86de","#ee5253"],shape:"#121212",background:"#fff",dialogBackground:"#d9d9d9",dialogText:"#303030",inputBackground:"#fff",errorText:"#bd0808",notificationBackground:"#FFFFFFdd"}},dark:{...p1,colors:{pieces:{st1:"#CE9518",st2:"#1CACCB",mt1:"#0CA57C",lt1:"#C33B3B",lt2:"#5C2DB9",sq:"#C95EBC",rh:"#2E75CF"},difficulties:["#0b8767","#1a6cbd","#ce3737"],shape:"#595959",background:"#15141a",dialogBackground:"#383838",dialogText:"#d8d8d8",inputBackground:"#595959",errorText:"#e63c3c",notificationBackground:"#000000dd"}}},D8="light",O8=({children:t})=>{const[e,n]=G.useState(D8);G.useEffect(()=>{const s=window.localStorage.getItem(m1);Wd[s]&&n(s)},[]);const r=G.useCallback(s=>{Wd[s]&&(n(s),window.localStorage.setItem(m1,s))},[Wd]),i=G.useMemo(()=>[e,r],[e,r]);return R.jsx(Ek.Provider,{value:i,children:R.jsx(Pi.Provider,{value:Wd[e],children:t})})},_I=G.createContext(),M8=({deferred:t,tip:{id:e,title:n=R.jsx(Ur,{children:R.jsx(Tt,{id:"Random tip"})}),content:r}})=>{const i=Zt(),[s,a]=G.useState(!1);return R.jsxs(rs,{onClose:()=>t.reject(cn),title:n,css:{gap:3},children:[r,R.jsx(cr,{onClick:()=>t.resolve(s),children:i.formatMessage({id:"Got it!"})}),e!=="welcome"&&R.jsxs(fe,{as:"label",css:{gap:1,flexDirection:"row",cursor:"pointer",alignItems:"flex-end"},children:[R.jsx("input",{type:"checkbox",checked:s,onChange:()=>a(!s)}),R.jsx(Xe,{as:"small",children:i.formatMessage({id:"I don't want to see tips anymore"})})]})]})},rr={settingsIcon:R.jsx(Er,{icon:lk}),accountIcon:R.jsx(Er,{icon:ck}),menuIcon:R.jsx(Er,{icon:ok}),galleryIcon:R.jsx(Er,{icon:sk}),shareIcon:R.jsx(Er,{icon:uk}),createIcon:R.jsx(Er,{icon:ak}),leaderboardIcon:R.jsx(Er,{icon:ik}),starIcon:R.jsx(Er,{icon:Ao}),br:()=>R.jsx("br",{})},L8=[{id:"particles",predicate:({particles:t})=>t,content:R.jsx(Xe,{css:{textAlign:"justify"},children:R.jsx(Tt,{id:"tips.particles",values:rr})})},{id:"menu",content:R.jsx(Xe,{css:{textAlign:"justify"},children:R.jsx(Tt,{id:"tips.menu",values:rr})})},{id:"gallery",content:R.jsx(Xe,{css:{textAlign:"justify"},children:R.jsx(Tt,{id:"tips.gallery",values:rr})})},{id:"difficulty",predicate:({showBackgroundPattern:t})=>t,content:R.jsx(Xe,{css:{textAlign:"justify"},children:R.jsx(Tt,{id:"tips.difficulty",values:rr})})},{id:"theme",predicate:({themeKey:t})=>t!=="dark",content:R.jsx(Xe,{css:{textAlign:"justify"},children:R.jsx(Tt,{id:"tips.theme",values:rr})})},{id:"sound",predicate:({soundEnabled:t})=>t,content:R.jsx(Xe,{css:{textAlign:"justify"},children:R.jsx(Tt,{id:"tips.sound",values:rr})})},{id:"account1",predicate:({currentUser:t})=>!t,content:R.jsx(Xe,{css:{textAlign:"justify"},children:R.jsx(Tt,{id:"tips.account1",values:rr})})},{id:"account2",predicate:({currentUser:t})=>!t,content:R.jsx(Xe,{css:{textAlign:"justify"},children:R.jsx(Tt,{id:"tips.account2",values:rr})})},{id:"stars",predicate:({currentUser:t})=>t,content:R.jsx(Xe,{css:{textAlign:"justify"},children:R.jsx(Tt,{id:"tips.stars",values:rr})})},{id:"create",predicate:({currentUser:t,approvedTangrams:e,isTangramCompleted:n})=>{if(t){let r=0;for(const{id:i}of e)if(n(i)&&(r+=1,r===10))return!0}return!1},content:R.jsx(Xe,{css:{textAlign:"justify"},children:R.jsx(Tt,{id:"tips.create",values:rr})})},{id:"share",content:R.jsx(Xe,{css:{textAlign:"justify"},children:R.jsx(Tt,{id:"tips.share",values:rr})})},{id:"card",content:R.jsx(Xe,{css:{textAlign:"justify"},children:R.jsx(Tt,{id:"tips.card",values:rr})})},{id:"leaderboard",content:R.jsx(Xe,{css:{textAlign:"justify"},children:R.jsx(Tt,{id:"tips.leaderboard",values:rr})})}],V8=({children:t})=>{const e=Zt(),n=G.useContext(ui),[r,i]=G.useState(null),[s,a]=G.useState(!0),{soundEnabled:c}=G.useContext(ci),[h]=Tk(),[g]=pI(),{currentUser:_}=G.useContext(Hn),{approvedTangrams:w}=G.useContext(jo),{isTangramCompleted:T}=G.useContext(Dr);G.useEffect(()=>{a(window.localStorage.getItem("hideTips")===null)},[]),G.useEffect(()=>{s?window.localStorage.removeItem("hideTips"):window.localStorage.setItem("hideTips",!0)},[s]);const E=()=>{let Z=[];const ne=localStorage.getItem("seenTips");if(ne)try{const te=JSON.parse(ne);if(!Array.isArray(te))throw new Error("Invalid data for seenTips : "+te);Z=te}catch{localStorage.removeItem("seenTips")}return Z},$=G.useCallback(Z=>{const ne=E(),te=new us;return i({deferred:te,tip:Z}),te.promise.then(ae=>{ae&&a(!1)}).finally(()=>{localStorage.setItem("seenTips",JSON.stringify([...ne,Z.id])),i(null)})},[]),U=G.useCallback(()=>{!s||E().includes("welcome")||(!_||!w.some(ne=>T(ne.id)))&&$({id:"welcome",title:R.jsx(Ur,{children:R.jsx(Tt,{id:"Welcome to Amstangram",values:rr})}),content:R.jsx(Xe,{css:{textAlign:"justify"},children:R.jsx(Tt,{id:"tips.welcome",values:rr})})})},[$,s,_,w,T]),J=G.useCallback(()=>{if(!s)return;const Z=E(),ne=L8.filter(({id:ae,predicate:ce=()=>!0})=>!Z.includes(ae)&&ce({themeKey:h,showBackgroundPattern:g,currentUser:_,approvedTangrams:w,isTangramCompleted:T,soundEnabled:c}));if(!ne.length)return;const te=ne[0];$(te)},[$,w,T,h,_,g,c,s]),V=G.useCallback(()=>{a(Z=>!Z)},[]),B=G.useCallback(()=>{a(!0),window.localStorage.removeItem("seenTips"),n(e.formatMessage({id:"Tips reseted successfuly"}))},[n,e]),j=G.useMemo(()=>({showRandomTip:J,showWelcome:U,tipsEnabled:s,toggleTips:V,resetTips:B}),[J,U,s,V,B]);return R.jsxs(_I.Provider,{value:j,children:[t,r&&R.jsx(M8,{...r})]})},Kd=20,Ju=({leftComponent:t,leftValue:e,rightComponent:n,rightValue:r,value:i,onChange:s,invertSounds:a})=>{const{playToggle:c,soundEnabled:h}=G.useContext(ci),g=G.useContext(Pi),_=G.useMemo(()=>i===r?"right":"left",[i,r]),w=()=>{a?h||c({forceSoundEnabled:!0}):c()},T=()=>{s((_==="left"?"right":"left")==="right"?r:e),w()},E=$=>{$!==_&&(s($==="right"?r:e),w())};return R.jsxs(fe,{css:{flexDirection:"row",justifyContent:"center",alignItems:"center",gap:3},children:[R.jsx(fe,{css:{cursor:"pointer",flex:"1",alignItems:"flex-end"},onClick:()=>E("left"),children:t}),R.jsx(fe,{onClick:T,css:{cursor:"pointer",position:"relative",bg:"inputBackground",width:`${2*Kd}px`,height:`${Kd}px`,borderRadius:"99999px"},children:R.jsx(fe,{css:{position:"absolute",size:`${Kd}px`,borderRadius:"99999px",bg:"dialogText",boxShadow:`0 0 0 2px ${g.colors.inputBackground}`,transition:"left 250ms ease-in-out"},style:{left:_==="left"?0:Kd}})}),R.jsx(fe,{css:{cursor:"pointer",flex:"1",alignItems:"flex-start"},onClick:()=>E("right"),children:n})]})},Sk=G.createContext([!0,()=>{}]),xk=()=>G.useContext(Sk),F8=({children:t})=>{const[e,n]=G.useState(!0);G.useEffect(()=>{const s=window.localStorage.getItem("showParticles");if(s===null){n(!0);return}try{const a=JSON.parse(s);n(!!JSON.parse(a))}catch{window.localStorage.removeItem("showParticles")}},[]);const r=G.useCallback(()=>{const s=!e;n(s),window.localStorage.setItem("showParticles",JSON.stringify(s))},[e]),i=G.useMemo(()=>[e,r],[e,r]);return R.jsx(Sk.Provider,{value:i,children:t})},B8=({deferred:t})=>{const{soundEnabled:e,toggleSound:n}=G.useContext(ci),{tipsEnabled:r,toggleTips:i,resetTips:s}=G.useContext(_I),[a,c]=pI(),[h,g]=xk(),{language:_,setLanguage:w}=G.useContext(mI),T=Zt(),[E,$]=Tk(),U=J=>{w(J.target.value)};return R.jsxs(rs,{title:R.jsx(Ur,{children:T.formatMessage({id:"Settings"})}),onClose:()=>t.reject(cn),css:{gap:4},children:[R.jsxs(fe,{css:{gap:3},children:[R.jsxs(fe,{css:{gap:2},children:[R.jsx("label",{children:T.formatMessage({id:"Language"})}),R.jsx(fn,{as:"select",onChange:U,value:_,children:uy.map(J=>R.jsx("option",{value:J,children:T.formatMessage({id:J})},J))})]}),R.jsxs(fe,{css:{gap:2},children:[R.jsx("label",{children:T.formatMessage({id:"Difficulty"})}),R.jsx(Ju,{value:a,onChange:c,leftComponent:R.jsx(Xe,{children:T.formatMessage({id:"Easy"})}),leftValue:!0,rightComponent:R.jsx(Xe,{children:T.formatMessage({id:"Hard"})}),rightValue:!1})]}),R.jsxs(fe,{css:{gap:2},children:[R.jsx("label",{children:T.formatMessage({id:"Theme"})}),R.jsx(Ju,{value:E,onChange:$,leftComponent:R.jsx(fe,{as:Tz,css:{size:"icon"}}),leftValue:"light",rightComponent:R.jsx(fe,{as:Iz,css:{size:"icon"}}),rightValue:"dark"})]}),R.jsxs(fe,{css:{gap:2},children:[R.jsx("label",{children:T.formatMessage({id:"Sounds"})}),R.jsx(Ju,{invertSounds:!0,value:e,onChange:n,leftComponent:R.jsx(fe,{as:xz,css:{size:"icon"}}),leftValue:!1,rightComponent:R.jsx(fe,{as:Sz,css:{size:"icon"}}),rightValue:!0})]}),R.jsxs(fe,{css:{gap:2},children:[R.jsx("label",{children:T.formatMessage({id:"Show particles"})}),R.jsx(Ju,{value:h,onChange:g,leftComponent:R.jsx(Xe,{children:T.formatMessage({id:"Yes"})}),leftValue:!0,rightComponent:R.jsx(Xe,{children:T.formatMessage({id:"No"})}),rightValue:!1})]}),R.jsxs(fe,{css:{gap:2},children:[R.jsx("label",{children:T.formatMessage({id:"Show tips"})}),R.jsx(Ju,{value:r,onChange:i,leftComponent:R.jsx(Xe,{children:T.formatMessage({id:"Yes"})}),leftValue:!0,rightComponent:R.jsx(Xe,{children:T.formatMessage({id:"No"})}),rightValue:!1})]})]}),R.jsx(Lz,{onClick:s,children:T.formatMessage({id:"Reset tips"})})]})},dd=G.createContext(),j8=({children:t})=>{const{initialized:e}=G.useContext(Hn),{playlist:n,setPlaylist:r,startRandomPlaylist:i,initialized:s}=G.useContext(Dr),{initialized:a,approvedTangrams:c}=G.useContext(jo),[h,g]=G.useState(!1),[_,w]=G.useState(null),T=G.useCallback(async nt=>{const he=new us;w({uid:nt,deferred:he});try{await he.promise}catch(ot){if(ot!==cn)throw ot}finally{w(null)}},[]),[E,$]=G.useState(null),U=G.useCallback(async()=>{const nt=new us;$(nt);try{await nt.promise}catch(he){if(he!==cn)throw he}finally{$(null)}},[]),[J,V]=G.useState(null),B=G.useCallback(async()=>{const nt=new us;V(nt);try{await nt.promise}catch(he){if(he!==cn)throw he}finally{V(null)}},[]),[j,Z]=G.useState(null),ne=G.useCallback(async()=>{const nt=new us;Z(nt);try{await nt.promise}catch(he){if(he!==cn)throw he}finally{Z(null)}},[]),[te,ae]=G.useState(null),ce=G.useCallback(async nt=>{const he=new us;ae({deferred:he,tangram:nt});try{await he.promise}catch(ot){if(ot!==cn)throw ot}finally{ae(null)}},[]),[_e,me]=G.useState(null),tt=G.useCallback(async()=>{const nt=new us;me(nt);try{await nt.promise}catch(he){if(he!==cn)throw he}finally{me(null)}},[]),[Le,xe]=G.useState(null);G.useEffect(()=>{(async()=>{if(a&&s&&e&&!h){let he=!1;if(!n&&window.location.search){const ot=new URLSearchParams(window.location.search);if(ot.has("tangrams")){const Ce=ot.get("tangrams").split(","),Te=ot.get("uid"),De=c.filter(Ye=>Ce.includes(Ye.id));if(De.length){window.history.replaceState({},document.title,window.location.origin);const Ye=new us;xe({deferred:Ye,tangrams:De,uid:Te});try{await Ye.promise,he=!0,r(De)}catch(It){if(It!==cn)throw It}finally{xe(null)}}}}he||i(!0),g(!0)}})()},[a,s,e,h]);const we=G.useMemo(()=>({showProfile:T,showLeaderboard:U,showGallery:B,showLogin:ne,showTangram:ce,showSettings:tt}),[T,U,B,ne,ce,tt]);return R.jsxs(dd.Provider,{value:we,children:[t,j&&R.jsx(m8,{deferred:j}),J&&R.jsx(Hz,{deferred:J}),te&&R.jsx(k8,{...te}),_&&R.jsx(S8,{..._}),E&&R.jsx(Gz,{deferred:E}),Le&&R.jsx(jz,{...Le}),_e&&R.jsx(B8,{deferred:_e})]})},al=({action:t,icon:e,text:n})=>{const{playButton:r}=G.useContext(ci);return R.jsxs(fe,{css:{alignItems:"center",flexDirection:"row",gap:3,cursor:"pointer",py:3},onClick:()=>{r(),t()},children:[R.jsx(fe,{as:e,css:{size:"icon"}}),R.jsx(Xe,{css:{fontSize:3},children:n})]})},U8=()=>{const{playlist:t,saveRequestId:e}=G.useContext(Dr),{currentUser:n}=G.useContext(Hn),{playButton:r}=G.useContext(ci),i=Zt(),{showLeaderboard:s,showGallery:a,showLogin:c,showProfile:h,showSettings:g}=G.useContext(dd),[_,w]=G.useState();G.useEffect(()=>{_&&_.reject(cn)},[t,e]);const{requestSave:T}=G.useContext(Dr),E=async()=>{r();const J=new us;w(J);try{await J.promise}catch(V){if(V!==cn)throw V}finally{w(null)}},$=Cf({0:{color:"pieces.lt2"},14:{color:"pieces.rh"},28:{color:"pieces.st2"},42:{color:"pieces.mt1"},57:{color:"pieces.st1"},71:{color:"pieces.lt1"},85:{color:"pieces.sq"},100:{color:"pieces.lt2"}}),U=Cf({from:{transform:"translate(0, 0)"},to:{transform:"translate(30px, -30px)"}});return R.jsxs(R.Fragment,{children:[R.jsx(fe,{css:{position:"fixed",top:3,left:3,animation:`${$} 20s linear infinite both`},children:R.jsx(fe,{as:ok,css:{size:"menu",cursor:"pointer"},onClick:E})}),_&&R.jsxs(rs,{onClose:()=>_.reject(cn),title:R.jsxs(fe,{css:{flexDirection:"row",gap:3,alignItems:"center"},children:[R.jsx(IA,{css:{size:"badge",ml:"-2px",mr:"-6px",overflow:"visible","& > g":{animation:`${U} ${Xr}ms ${i_}ms ease both`}}}),R.jsx(Ur,{children:i.formatMessage({id:"Amstangram"})})]}),css:{gap:3,overflow:"initial"},children:[R.jsxs(fe,{children:[n?R.jsx(al,{action:()=>h(n.uid),icon:()=>R.jsx(Xm,{css:{mx:-1},uid:n.uid,size:"badge"}),text:i.formatMessage({id:"See my profile"})}):R.jsx(al,{action:c,icon:ck,text:i.formatMessage({id:"Log in"})}),R.jsx(al,{action:a,icon:sk,text:i.formatMessage({id:"Tangram gallery"})}),R.jsx(al,{action:T,icon:ak,text:i.formatMessage({id:"Save tangram"})}),R.jsx(al,{action:s,icon:ik,text:i.formatMessage({id:"Leaderboard"})}),R.jsx(al,{action:g,icon:lk,text:i.formatMessage({id:"Settings"})})]}),R.jsxs(fe,{css:{flexDirection:"row",alignItems:"baseline",justifyContent:"space-between"},children:[R.jsx(ds,{as:n1,href:`mailto:millagou.benjamin@gmail.com?subject=${i.formatMessage({id:"A word about Amstangram"})}`,target:"_blank",rel:"noopener, noreferrer",children:i.formatMessage({id:"Contact 💌"})}),R.jsx(ds,{as:n1,href:"https://github.com/myagoo/amstangram",target:"_blank",rel:"noopener, noreferrer",children:i.formatMessage({id:"Version {code}"},{code:"✨.🥸.🚀"})})]})]})]})},Ph=(t,e)=>{const n=new window.ClipperLib.ClipperOffset,r=new window.ClipperLib.Paths;if(n.AddPaths([t.map(({x:i,y:s})=>({X:i,Y:s}))],window.ClipperLib.JoinType.jtMiter,window.ClipperLib.EndType.etClosedPolygon),n.MiterLimit=0,n.ArcTolerance=0,n.Execute(r,e),r.length)return r[0].map(({X:i,Y:s})=>new He.Point(i,s))},z8=t=>{const e=t[1].getDistance(t[2]),n=t[0].getDistance(t[2]),r=t[0].getDistance(t[1]),i=e+n+r,s=(t[0].x*e+t[1].x*n+t[2].x*r)/i,a=(t[0].y*e+t[1].y*n+t[2].y*r)/i;return new He.Point(s,a)},Zu=(t,e)=>{const n=[new He.Point(0,0),new He.Point(t*2,0),new He.Point(t,t)],r=new He.Path({name:"display",segments:n,closed:!0}),i=new He.Path({name:"collision",segments:Ph(n,-ia),closed:!0}),s=new He.Path({name:"insetBorder",segments:Ph(n,-hs),closed:!0,strokeWidth:hs}),a=z8(n),c=new He.Point(He.view.center.x+a.x-r.bounds.width/2,He.view.center.y+a.y-r.bounds.height/2);return new He.Group({children:[r,i,s],position:He.view.center,pivot:c,data:{id:e,collisions:new Set},applyMatrix:!0})},$8=(t,e)=>{const n=[new He.Point(0,0),new He.Point(t*2,0),new He.Point(t*3,t),new He.Point(t,t)],r=new He.Path({name:"display",segments:n,closed:!0}),i=new He.Path({name:"collision",segments:Ph(n,-ia),closed:!0,strokeWidth:ia}),s=new He.Path({name:"insetBorder",segments:Ph(n,-hs),closed:!0,strokeWidth:hs});return new He.Group({children:[r,i,s],position:He.view.center,data:{id:e,collisions:new Set},applyMatrix:!0})},q8=(t,e)=>{const n=new He.Path.Rectangle({name:"display",point:[0,0],size:[t,t]}),r=new He.Path.Rectangle({name:"collision",point:[ia,ia],size:[t-ia*2,t-ia*2]}),i=new He.Path.Rectangle({name:"insetBorder",point:[hs,hs],size:[t-hs*2,t-hs*2],strokeWidth:hs});return new He.Group({children:[n,r,i],position:He.view.center,data:{id:e,collisions:new Set},applyMatrix:!0,rotation:Math.round(Math.random()*7)*45})},H8=()=>{const t=Ak,e=Math.sqrt(Math.pow(t,2)*2),n=Math.sqrt(Math.pow(e,2)*2);return new He.Group([Zu(t,"st1"),Zu(t,"st2"),Zu(e,"mt1"),Zu(n,"lt1"),Zu(n,"lt2"),q8(e,"sq"),$8(t,"rh")])},G8=(t,e)=>{let n;for(const h of t.children){const g=h.children.display;n?n=n.unite(g,{insert:!1}):n=g}n.scale(1/e),n.position=new He.Point(n.bounds.width/2,n.bounds.height/2);const r=n.exportSVG().getAttribute("d"),i=n.curves.length,s=Math.round(n.bounds.width),a=Math.round(n.bounds.height),c=Math.round(n.length);return n.remove(),{width:s,height:a,length:c,path:r,edges:i}},_1=(t,e,n)=>{const r={x:n.x-e.x,y:n.y-e.y},i={x:t.x-e.x,y:t.y-e.y},s=r.x*r.x+r.y*r.y;let a=i.x*r.x+i.y*r.y;const c=Math.min(1,Math.max(0,a/s));return a=(n.x-e.x)*(t.y-e.y)-(n.y-e.y)*(t.x-e.x),new He.Point(e.x+r.x*c,e.y+r.y*c)},v1=(t,e,n)=>{for(const r of e)for(const{point:i}of r.segments)for(const{point:s}of t.segments){const a=s.getDistance(i);a<n.distance&&(n.distance=a,n.shape=r,n.vector=i.subtract(s))}if(!n.vector)for(const r of e){for(const{point:i}of t.segments)for(const{point:s,next:{point:a}}of r.segments){const c=_1(i,s,a),h=c.getDistance(i);h<n.distance&&(n.distance=h,n.vector=c.subtract(i),n.shape=r,n.segment=[s,a],n.point=i)}for(const{point:i}of r.segments)for(const{point:s,next:{point:a}}of t.segments){const c=_1(i,s,a),h=c.getDistance(i);h<n.distance&&(n.distance=h,n.vector=i.subtract(c),n.shape=t,n.segment=[s,a])}}return n},y1=(t,e,n)=>{if(n.segment){let r=n.maxDistance,i;const[s,a]=n.segment,c=Math.atan2(a.y-s.y,a.x-s.x),h=Math.atan2(s.y-a.y,s.x-a.x);for(const g of[c,h])for(const{point:_}of t.segments){if(_===n.point)continue;const w=_.add(n.vector),T=new He.Point(w.x+n.maxDistance*Math.cos(g),w.y+n.maxDistance*Math.sin(g)),E=new He.Path.Line({from:w,to:T,insert:!1});for(const $ of e){const U=E.getIntersections($);for(const{point:J}of U){const V=J.subtract(w).add(n.vector);V.length<n.maxDistance&&V.length<=r&&(r=V.length,i=V)}}}i&&(n.vector=i)}},W8=(t,e,n,r)=>{let i={maxDistance:t,distance:t};return v1(e,n,i),r&&v1(e,r,i),y1(e,n.filter(s=>s.shape!==i.shape),i),r&&y1(e,r,i),i.vector},K8=(t,e,n)=>{let r=t;for(const i of e.children){if(i.data.collisions.size>0)return;r=r.unite(new He.Path({segments:Ph(i.children.display.segments.map(({point:s})=>s),-n),closed:!0,insert:!1}),{insert:!1})}return Math.round(r.length*1e3)===Math.round(t.length*1e3)},Q8=t=>{for(const e of t.children)if(e.data.collisions.size>0)return!1;return!0},Qd=(t,e)=>{const n=t.pivot?t.pivot.subtract(t.bounds.center):new He.Point;t.bounds.x<0&&(t.position.x=t.bounds.width/2+n.x),t.bounds.y<0&&(t.position.y=t.bounds.height/2+n.y),t.bounds.x+t.bounds.width>e.width/window.devicePixelRatio&&(t.position.x=e.width/window.devicePixelRatio-t.bounds.width/2+n.x),t.bounds.y+t.bounds.height>e.height/window.devicePixelRatio&&(t.position.y=e.height/window.devicePixelRatio-t.bounds.height/2+n.y)},Y8=(t,e)=>{const n=new He.Point(He.project.view.bounds.width,He.project.view.bounds.height).subtract(yI*2);if(t.position=He.Point.random().multiply(n).add(yI),t.data.id==="rh"){const r=Math.round(Math.random()*3)*45;t.rotation=r,t.data.rotation=r}else t.rotation=Math.round(Math.random()*7)*45},w1=(t,e)=>e.segments.every(n=>t.contains(n.point)),r_=(t,e)=>{for(const r of e.children){if(r===t)continue;const i=t.children.collision,s=r.children.collision;i.intersects(s)||w1(i,s)||w1(s,i)?(t.data.collisions.add(r.data.id),r.data.collisions.add(t.data.id)):(t.data.collisions.delete(r.data.id),r.data.collisions.delete(t.data.id))}let n=!0;for(const r of e.children)r.data.collisions.size>0?(n=!1,r.children.display.opacity=Pk):r.children.display.opacity=1;return n},X8=({tangram:t,onStop:e,onNext:n,onApprove:r,onStarToggle:i})=>{const s=Zt(),[a,c]=G.useState(!1),{playStar:h}=G.useContext(ci),{tangramsStarredBy:g,isTangramStarred:_}=G.useContext(Dr),w=G.useMemo(()=>{let U=0;for(const J in g[t.id])g[t.id][J]&&(U+=1);return U},[t,g]),T=_(t.id),E=Cf({0:{opacity:"0",transform:"rotate(0) scale(0)"},100:{opacity:1,transform:`rotate(${360*5}deg) scale(1)`}}),$=()=>{setTimeout(()=>c(!0),1e3)};return R.jsx(fe,{css:{position:"absolute",top:0,left:0,right:0,bottom:0,alignItems:"center",justifyContent:"center",gap:3},children:R.jsxs(fe,{css:{position:"relative"},children:[R.jsx(fe,{onAnimationEnd:$,css:{textShadow:"0px 5px 10px #00000080",fontSize:"30vmin",animation:`2000ms ${E} cubic-bezier(.6,1.56,.58,.92) forwards`},children:t.emoji},"emojiSpin"),a&&R.jsxs(fe,{css:{mt:3,position:"absolute",top:"100%",left:"50%",transform:"translateX(-50%)",flexDirection:"row",gap:3,animation:`${Xr}ms fadeIn ease both`},children:[r&&R.jsxs(fe,{as:cr,onClick:r,css:{boxShadow:"0px 5px 10px #00000080",flexDirection:"row",gap:2,alignItems:"flex-end"},children:[R.jsx(fe,{as:wz,css:{size:"icon"}}),R.jsx(Xe,{children:s.formatMessage({id:"Approve"})})]}),i&&R.jsxs(fe,{as:cr,mute:!0,onClick:()=>{h(),i()},css:{boxShadow:"0px 5px 10px #00000080",flexDirection:"row",gap:2,alignItems:"flex-end"},children:[R.jsx(Xe,{children:w}),R.jsx(fe,{as:Ao,css:{size:"icon",fill:T?"currentColor":void 0},deps:[T]})]}),n?R.jsxs(fe,{as:cr,onClick:n,css:{boxShadow:"0px 5px 10px #00000080",flexDirection:"row",gap:2,alignItems:"flex-end"},children:[R.jsx(fe,{as:Ez,css:{size:"icon"}}),R.jsx(Xe,{children:s.formatMessage({id:"Next"})})]}):R.jsxs(fe,{as:cr,onClick:e,css:{boxShadow:"0px 5px 10px #00000080",flexDirection:"row",gap:2,alignItems:"flex-end"},children:[R.jsx(fe,{as:hk,css:{size:"icon"}}),R.jsx(Xe,{children:s.formatMessage({id:"Quit"})})]})]})]})})},J8=()=>{const t=Zt(),{showRandomTip:e,showWelcome:n}=G.useContext(_I),{showLogin:r,showTangram:i}=G.useContext(dd),{playTangram:s,playVictory:a}=G.useContext(ci),c=G.useRef();c.current={tangram:s,victory:a};const{currentUser:h}=G.useContext(Hn),g=G.useRef();g.current=h;const _=G.useContext(Pi),w=G.useContext(ui),[T]=pI(),[E]=xk(),{saveRequestId:$,playlist:U,setPlaylist:J,markTangramAsComplete:V,toggleTangramStar:B}=G.useContext(Dr),j=G.useRef();j.current=V;const[Z,ne]=G.useState(0),[te,ae]=G.useState(!1),ce=G.useRef(),_e=G.useRef(),me=G.useRef(),tt=G.useRef(),Le=G.useRef(),xe=G.useRef(),we=G.useRef(),nt=G.useRef(),he=G.useMemo(()=>U&&U[Z],[U,Z]),ot=()=>{ae(!1),ne(Z+1),e()},Ce=()=>{ae(!1),J(null),e()},Te=async()=>{await Ft.firestore().collection("tangrams").doc(he.id).update({approved:!0}),w(t.formatMessage({id:"Tangram approved"}))};return G.useEffect(()=>{ne(0)},[U]),G.useEffect(()=>{if($){if(!Q8(me.current)){w(t.formatMessage({id:"You can't save an invalid tangram"}));return}const De=G8(me.current,_e.current);if(De.edges===23){w(t.formatMessage({id:"You can't save such an easy tangram"}));return}(async()=>{h||await r(),await i(De)})()}},[$]),G.useEffect(()=>{const De=()=>{if(ce.current&&me.current)for(const Ye of me.current.children)Qd(Ye,ce.current)};return window.addEventListener("resize",De),()=>window.removeEventListener("resize",De)},[]),G.useLayoutEffect(()=>{const De=Date.now(),Ye=it=>{let Mt=null,Qe=null,ln=null,En=null;const is=nr=>{document.activeElement===ce.current&&(document.body.style.cursor="pointer")},bt=nr=>{document.body.style.cursor="default"},zt=nr=>{ln=Date.now(),En=nr.point,Mt=nr.point.subtract(it.position),Qe=it.clone({insert:!1,deep:!0}),it.bringToFront()},kt=nr=>{document.body.style.cursor="move";const Qr=nr.point.subtract(it.position).subtract(Mt);Qe.position=it.position.add(Qr);const zo=Qe.children["display 1"],$o=me.current.children.filter(ie=>ie!==it).map(({children:ie})=>ie.display),fd=we.current&&xe.current?xe.current.children?xe.current.children:[xe.current]:null,X=W8(vI,zo,$o,fd);X&&(Qe.position.x+=X.x,Qe.position.y+=X.y),Qd(Qe,ce.current),it.position=Qe.position,r_(it,me.current)},Uo=nr=>{if(document.body.style.cursor="pointer",nr.point.subtract(En).length<vI&&Date.now()-ln<kk&&(it.rotation+=45,it.data.id==="rh"&&(it.data.rotation+=45,it.data.rotation===180&&(it.data.rotation=0,it.scale(-1,1))),c.current.tangram(),Qd(it,ce.current),r_(it,me.current),ln=null,En=null),Mt=null,Qe&&Qe.remove(),Qe=null,!!xe.current&&(we.current===!1&&(xe.current.position=me.current.position),K8(xe.current,me.current,we.current?bk:Rk))){j.current(he,Date.now()-De);for(const Kr of me.current.children)Kr.data.removeListeners();if(document.body.style.cursor="default",!nt.current){c.current.victory(),ae(!0);return}He.project.activeLayer.tween({opacity:0},{duration:md,easing:"easeInCubic"});for(const Kr of Le.current)Kr.data.animation.stop(),Kr.tween({"position.x":me.current.position.x,"position.y":me.current.position.y,opacity:TI},{duration:md,easing:"easeInCubic"});setTimeout(()=>{c.current.victory(),He.project.activeLayer.tween({opacity:1},{duration:Xr,easing:"easeOutCubic"});const Kr=Math.max(He.view.bounds.width,He.view.bounds.height)/2;for(const Qr of Le.current){Qr.data.animation.stop();const zo=Math.random()*Math.PI*2,$o=Math.random()*Kr;Qr.tween({"position.x":Qr.position.x+$o*Math.cos(zo),"position.y":Qr.position.y+$o*Math.sin(zo),opacity:0},{duration:md,easing:"easeOutCubic"})}ae(!0)},md)}};it.on({mouseenter:is,mouseleave:bt,mousedown:zt,mousedrag:kt,mouseup:Uo}),it.data.removeListeners=()=>it.off({mouseenter:is,mouseleave:bt,mousedown:zt,mousedrag:kt,mouseup:Uo})};return(()=>{He.setup(ce.current),me.current=H8(),he&&(xe.current=He.project.importSVG(`<path d="${he.path}" />`,{applyMatrix:!0}),xe.current.sendToBack(),xe.current.fillRule="evenodd",xe.current.closed=!0);const it=He.project.view.bounds,Mt=xe.current?xe.current.bounds:me.current.children[3].bounds.scale(2);it.width>it.height?_e.current=Math.min(Math.min(it.width*.7,700)/Mt.width,Math.min(it.height*.8,600)/Mt.height):_e.current=Math.min(Math.min(it.width*.8,600)/Mt.width,Math.min(it.height*.7,700)/Mt.height),xe.current&&(xe.current.scale(_e.current),xe.current.position=He.view.center);for(const Qe of me.current.children)Qe.scale(_e.current),Y8(Qe,ce.current),Ye(Qe),Qd(Qe,ce.current),r_(Qe,me.current)})(),()=>{He.project.remove(),Le.current=null,me.current=null,xe.current=null}},[he]),G.useLayoutEffect(()=>{we.current=T,xe.current&&(T?(xe.current.fillColor=_.colors.shape,xe.current.position=He.view.center):xe.current.fillColor="transparent")},[he,T,_]),G.useLayoutEffect(()=>{if(nt.current=E,!E)return;const De=new He.Group;De.sendToBack();const Ye=new He.Point(ce.current.width,ce.current.height).divide(window.devicePixelRatio),It=()=>Math.random()*(Nk-II)+II,it=()=>Math.random()*(TI-EI)+EI;Le.current=new Array(wI);for(let Mt=0;Mt<wI;Mt++){const Qe=new He.Path.Circle({center:He.Point.random().multiply(Ye),radius:It(),opacity:it(),parent:De,data:{index:Mt}}),ln=()=>{const En={radius:It(),opacity:it(),"position.x":Math.min(ce.current.width/window.devicePixelRatio,Math.max(0,Qe.position.x+Math.random()*200-100)),"position.y":Math.min(ce.current.height/window.devicePixelRatio,Math.max(0,Qe.position.y+Math.random()*200-100))};Qe.data.animation=Qe.tween(En,{duration:Math.random()*1e4+5e3,easing:"easeInOutQuad"}).then(ln)};ln(),Le.current[Mt]=Qe}},[he,E]),G.useLayoutEffect(()=>{!E&&tt.current&&(tt.current.remove(),tt.current=null,Le.current=null)},[E]),G.useLayoutEffect(()=>{for(const Ye of me.current.children)Ye.children.display.fillColor=_.colors.pieces[Ye.data.id],Ye.children.insetBorder.strokeColor=_.colors.pieces[Ye.data.id];const De=Object.values(_.colors.pieces);if(E)for(const Ye of Le.current)Ye.fillColor=De[Math.floor(Math.random()*De.length)]},[_.colors,he,E]),G.useEffect(()=>{n()},[]),R.jsxs(fe,{css:{flex:"1",position:"relative",color:"dialogText",animation:`${Xr}ms fadeIn ease`},children:[he&&T===!1&&R.jsx(fe,{css:{zIndex:-1,position:"absolute",top:3,right:3,cursor:"pointer"},children:R.jsx(ud,{tangram:he,selected:!0,hideBadge:!0})}),R.jsx(fe,{as:"canvas",ref:ce,css:{minHeight:"auto",flex:1}}),he&&te&&R.jsx(X8,{tangram:he,onStop:Ce,onNext:Z<U.length-1?ot:void 0,onApprove:h&&h.isAdmin&&!he.approved?Te:void 0,onStarToggle:h&&he.approved?()=>B(he):void 0})]})},Z8=()=>{const t=Zt(),e=G.useContext(ui),[n,r]=G.useState(!1),[i,s]=G.useState(!1),[a,c]=G.useState(!1),[h,g]=G.useState(!1),{initialized:_}=G.useContext(jo),{playlist:w,initialized:T}=G.useContext(Dr),{currentUser:E,initialized:$}=G.useContext(Hn),U=$&&_&&T&&w;if(G.useEffect(()=>{setTimeout(()=>r(!0),Xr*2),c(setTimeout(()=>s(!0),Xr*2))},[]),G.useEffect(()=>{U&&(clearTimeout(a),s(!1))},[U]),h)return R.jsxs(R.Fragment,{children:[R.jsx(J8,{}),R.jsx(U8,{})]});const J=()=>{g(!0),E&&e(t.formatMessage({id:"Logged in as {username}"},{username:E.username}))};return R.jsxs(fe,{css:{flex:"1",alignItems:"center",justifyContent:"center",gap:3,animation:U&&n?`${Xr}ms fadeIn ease ${i_}ms forwards reverse`:void 0},deps:[U,n],onAnimationEnd:V=>{V.currentTarget===V.target&&J()},children:[R.jsx(fe,{css:{animation:`${Xr}ms fadeIn ease ${i_}ms both`},children:R.jsx(IA,{css:{size:"logo",overflow:"visible","& > g":{transition:`all ${Xr}ms ease`,transform:U&&n?"translate(30px, -30px)":"translate(0, 0)"}},deps:[U,n]})}),R.jsx(Ur,{css:{transition:`opacity ${Xr}ms ease`,opacity:i?1:0},deps:[i],children:t.formatMessage({id:"Loading..."})})]})};window.isSecureContext&&navigator.serviceWorker.getRegistrations().then(function(t){for(let e of t)e.unregister()});const e$=()=>(G.useEffect(()=>{matchMedia("hover: none").matches&&(window.oncontextmenu=function(){return!1})},[]),EN({body:{m:0,bg:"background",fontFamily:"'Comic Neue', cursive",fontWeight:"bolder","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale",transition:`background-color ${Sf}ms`},"body, html, #root":{height:"100%"},"#root":{display:"flex",flexDirection:"column",padding:`
        env(safe-area-inset-top, 0)
        env(safe-area-inset-right, 0)
        env(safe-area-inset-bottom, 0)
        env(safe-area-inset-left, 0)
      `},"*":{boxSizing:"border-box",userSelect:"none","-moz-user-select":"none","-khtml-user-select":"none","-webkit-user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)"},"input, textarea":{"-webkit-user-select":"initial","-moz-user-select":"initial","-ms-user-select":"initial",userSelect:"initial"}}),R.jsx(Mz,{children:R.jsx(w8,{children:R.jsx(fz,{children:R.jsx(gz,{children:R.jsx(pz,{children:R.jsx(N8,{children:R.jsx(F8,{children:R.jsx(_z,{children:R.jsx(V8,{children:R.jsx(j8,{children:R.jsx(fe,{css:{flex:"1",color:"dialogText",fontSize:3},children:R.jsx(Z8,{})})})})})})})})})})})}));d_.createRoot(document.getElementById("root")).render(R.jsx(O8,{children:R.jsx(e$,{})}));export{Lk as c,I1 as g};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}