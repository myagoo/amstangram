(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{0:function(e,t){},1:function(e,t){},"8Ymh":function(e,t,n){e.exports=n.p+"static/clap-083856b66ccbb1cf6692425f9dbe9b0b.wav"},Hrb7:function(e,t,n){e.exports=n.p+"static/button-14ce515d099e43f117dc184a4b22a8a7.wav"},Lnxd:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));n("ioFf"),n("91GP");var r=n("q1tI"),a={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},o=r.createContext&&r.createContext(a),i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&(n[r[a]]=e[r[a]])}return n};function u(e){return function(t){return r.createElement(s,i({attr:i({},e.attr)},t),function e(t){return t&&t.map((function(t,n){return r.createElement(t.tag,i({key:n},t.attr),e(t.child))}))}(e.child))}}function s(e){var t=function(t){var n,a=e.size||t.size||"1em";t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className);var o=e.attr,u=e.title,s=c(e,["attr","title"]);return r.createElement("svg",i({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,o,s,{className:n,style:i({color:e.color||t.color},t.style,e.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),u&&r.createElement("title",null,u),e.children)};return void 0!==o?r.createElement(o.Consumer,null,(function(e){return t(e)})):t(a)}},NczM:function(e,t,n){e.exports=n.p+"static/card-96da3e7a10f4a164c88ac0a09b36ffec.wav"},RXBc:function(e,t,n){"use strict";n.r(t);var r=n("I9K0"),a=n("q1tI"),o=n.n(a);n("91GP"),n("rGqo"),n("yt8O"),n("Btvt"),n("RW0V");var i=Object(r.createPrimitive)("div",(function(e){var t=e.css,n=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["css"]);return Object.assign({css:Object(r.useGap)(Object.assign({display:"flex",minWidth:0,minHeight:0,flex:"none",alignSelf:"auto",alignItems:"stretch",flexDirection:"column",justifyContent:"flex-start"},t))},n)})),c=function(e){var t=Object(a.useContext)(r.ThemeContext);return o.a.createElement(i,Object.assign({as:"svg",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 467.27 512"},e),o.a.createElement("polygon",{fill:t.colors.shape,points:"352.33 159.67 432.16 239.45 432.16 399.13 319.29 512 93.55 512 159.67 445.87 0 286.25 319.29 286.25 272.55 239.45 272.55 79.84 352.33 0 465.26 112.87 352.33 112.87 352.33 159.67"}),o.a.createElement("g",null,o.a.createElement("polygon",{fill:t.colors.pieces.mt1,points:"272.57 79.84 272.57 239.45 352.36 319.29 432.19 399.13 432.19 239.45 352.36 159.67 352.36 112.87 465.29 112.87 352.36 0 272.57 79.84"}),o.a.createElement("polygon",{fill:t.colors.pieces.st1,points:"93.58 512 319.32 512 432.19 399.13 319.32 286.25 93.58 512"}),o.a.createElement("polygon",{fill:t.colors.pieces.lt2,points:"159.67 445.87 239.48 366.05 319.31 286.24 0.03 286.24 159.67 445.87"})))},u=n("X7BR"),s=(n("VRzm"),n("rE2o"),n("ioFf"),n("XfO3"),n("HEwt"),n("f3/d"),n("a1Th"),n("Vd3H"),n("o0o1")),l=n.n(s),f=(n("ls82"),n("Z2Ku"),n("L9s1"),n("Wcq6")),d=n.n(f);d.a.apps.length||d.a.initializeApp({apiKey:"AIzaSyAHOemftrTSOUjtoA6K3VR2hkOU5H-ScSI",authDomain:"amstangram.firebaseapp.com",databaseURL:"https://amstangram.firebaseio.com",projectId:"amstangram",storageBucket:"amstangram.appspot.com",messagingSenderId:"1075176148116",appId:"1:1075176148116:web:e61e6512cd983a75533881",measurementId:"G-PLH3BSWLM2"});var m=d.a,p=n("i8i4"),h=Object(r.extendPrimitive)(i,{fontSize:3,p:2,borderRadius:1,bg:"notificationBackground",color:"dialogText",animation:u.FADE_TRANSITION_DURATION/2+"ms fadeIn both",boxShadow:"0px 0px 10px #00000080"}),v=Object(a.createContext)(null),b=function(e){var t=e.children,n=Object(a.useRef)(),r=Object(a.useState)(null),c=r[0],u=r[1],s=Object(a.useCallback)((function(e){u((function(t){return t&&clearTimeout(t.timeoutId),{content:e,timeoutId:setTimeout((function(){u(null)}),2e3)}}))}),[]);return o.a.createElement(v.Provider,{value:s},t,c&&Object(p.createPortal)(o.a.createElement(i,{css:{position:"fixed",top:0,left:0,bottom:0,right:0,pointerEvents:"none",alignItems:"center",justifyContent:"center"}},o.a.createElement(h,{ref:n},c.content)),document.getElementById("notificationContainer")))};function g(e){var t=0;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e)))return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function E(e,t,n,r,a,o,i){try{var c=e[o](i),u=c.value}catch(s){return void n(s)}c.done?t(u):Promise.resolve(u).then(r,a)}function O(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){E(o,r,a,i,c,"next",e)}function c(e){E(o,r,a,i,c,"throw",e)}i(void 0)}))}}var w=Object(a.createContext)(null),j=function(e){var t=e.children,n=Object(a.useState)(void 0),r=n[0],i=n[1],c=Object(a.useState)(null),u=c[0],s=c[1],f=Object(a.useState)(!1),d=f[0],p=f[1];Object(a.useEffect)((function(){void 0!==r&&null!==u&&p(!0)}),[r,u]),Object(a.useEffect)((function(){return m.auth().onAuthStateChanged(function(){var e=O(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=4;break}i(null),e.next=9;break;case 4:return e.next=6,m.firestore().collection("users").doc(t.uid).get();case 6:n=e.sent,r=n.data(),i(Object.assign({uid:t.uid},r,{firebaseUser:t}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(a.useEffect)((function(){return m.firestore().collection("users").onSnapshot((function(e){for(var t,n={},r=g(e.docs);!(t=r()).done;){var a=t.value,o=a.data();n[a.id]=o}s(n)}))}),[]);var h=Object(a.useCallback)(function(){var e=O(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.firebaseUser.updateProfile({displayName:n});case 2:return e.next=4,m.firestore().collection("users").doc(t.uid).update({username:n});case 4:i(Object.assign({},t,{username:n}));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[]),v=Object(a.useCallback)(function(){var e=O(l.a.mark((function e(t,n,r){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=m.auth.EmailAuthProvider.credential(t.firebaseUser.email,n),e.next=3,t.firebaseUser.reauthenticateWithCredential(a);case 3:return e.next=5,t.firebaseUser.updatePassword(r);case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),[]),b=Object(a.useCallback)(function(){var e=O(l.a.mark((function e(t,n,r){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=m.auth.EmailAuthProvider.credential(t.firebaseUser.email,r),e.next=3,t.firebaseUser.reauthenticateWithCredential(a);case 3:return e.next=5,t.firebaseUser.updateEmail(n);case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),[]),y=Object(a.useMemo)((function(){return{initialized:d,currentUser:r,usersMetadata:u,updateUsername:h,updatePassword:v,updateEmail:b}}),[d,r,u,h,v,b]);return o.a.createElement(w.Provider,{value:y},t)},x=function(e,t){return t.edges===e.edges?t.length-e.length:t.edges-e.edges},C=function(e,t){return u.DIGITS.indexOf(e.emoji)-u.DIGITS.indexOf(t.emoji)},S=function(e,t){return u.LETTERS.indexOf(e.emoji)-u.LETTERS.indexOf(t.emoji)};function k(e){var t=0;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I(e,t)}(e)))return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var A=Object(a.createContext)([]),T=function(e){var t=e.children,n=Object(a.useContext)(w).currentUser,r=Object(a.useState)(null),i=r[0],c=r[1];Object(a.useEffect)((function(){return m.firestore().collection("tangrams").onSnapshot((function(e){for(var t,n=[],r=k(e.docs);!(t=r()).done;){var a=t.value,o=a.id,i=a.data();n.push(Object.assign({id:o},i))}c(n)}))}),[]);var u=Object(a.useMemo)((function(){if(!i)return{initialized:!1,approvedTangrams:null,pendingTangrams:null,approvedTangramsByCategory:null};for(var e,t=[],r=[],a={},o=k(i);!(e=o()).done;){var c=e.value;c.approved?(t.push(c),a[c.category]||(a[c.category]=[]),a[c.category].push(c)):n&&(n.isAdmin||c.uid===n.uid)&&r.push(c)}for(var u,s={},l=k(Object.keys(a).sort());!(u=l()).done;){var f=u.value;s[f]=a[f].sort("letters"===f?S:"digits"===f?C:x)}return{initialized:!0,approvedTangrams:t,pendingTangrams:r,approvedTangramsByCategory:a}}),[n,i]);return o.a.createElement(A.Provider,{value:u},t)},R=(n("I5cv"),n("KQm4")),P=n("1OyB"),L=n("vuIU"),N=n("Ji7U"),M=n("md7G"),D=n("foSv"),_=n("zSVi"),U=n("LiQ7"),B=n("MyaD"),F=n("6koa");function z(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var G=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},V=n.n(F).a||F;function W(e,t){return Object(U.a)(Object.assign(Object.assign({},B.a),{locale:"en"}),Object(B.b)(),e,t)}var q=function(e){Object(N.a)(r,e);var t,n=(t=r,function(){var e,n=Object(D.a)(t);if(z()){var r=Object(D.a)(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return Object(M.a)(this,e)});function r(){return Object(P.a)(this,r),n.apply(this,arguments)}return Object(L.a)(r,[{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=t.values,r=G(t,["values"]),a=e.values,o=G(e,["values"]);return!V(a,n)||!V(r,o)}},{key:"render",value:function(){var e=this;return a.createElement(_.a.Consumer,null,(function(t){e.props.defaultMessage||Object(B.f)(t);var n=t||{},r=n.formatMessage,o=void 0===r?W:r,i=n.textComponent,c=void 0===i?a.Fragment:i,u=e.props,s=u.id,l=u.description,f=u.defaultMessage,d=u.values,m=u.children,p=u.tagName,h=void 0===p?c:p,v=o({id:s,description:l,defaultMessage:f},d);return Array.isArray(v)||(v=[v]),"function"==typeof m?m.apply(void 0,Object(R.a)(v)):h?a.createElement.apply(a,[h,null].concat(Object(R.a)(v))):v}))}}]),r}(a.Component);q.displayName="FormattedMessage",q.defaultProps={values:{}};var H=q;function Y(e){return function(e){if(Array.isArray(e))return X(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||$(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,t,n,r,a,o,i){try{var c=e[o](i),u=c.value}catch(s){return void n(s)}c.done?t(u):Promise.resolve(u).then(r,a)}function $(e,t){if(e){if("string"==typeof e)return X(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?X(e,t):void 0}}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var J=Object(a.createContext)(null),Q=function(e){var t=e.children,n=Object(a.useContext)(v),r=Object(a.useContext)(w).currentUser,i=Object(a.useContext)(A).approvedTangrams,c=Object(a.useState)(null),u=c[0],s=c[1],f=Object(a.useState)(0),d=f[0],p=f[1],h=Object(a.useState)(null),b=h[0],g=h[1],y=Object(a.useState)(!1),E=y[0],O=y[1];Object(a.useEffect)((function(){return m.firestore().collection("stats").onSnapshot((function(e){for(var t,n={},r=function(e){var t=0;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=$(e)))return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}(e.docs);!(t=r()).done;){var a=t.value,o=a.id,i=a.data();n[o]=i}g(n)}))}),[]);var j=Object(a.useMemo)((function(){if(!i||!b)return null;var e=i.map((function(e){return e.id})),t={};for(var n in b)for(var r in t[n]||(t[n]={}),b[n])e.includes(r)&&(t[n][r]=b[n][r]);return t}),[b,i]);Object(a.useEffect)((function(){j&&O(!0)}),[j]);var x=Object(a.useCallback)((function(e){var t,a,i=window.location.origin+"/?tangrams="+e.map((function(e){return e.id})).join(",");r&&(i+="&uid="+r.uid),t=i,(a=document.createElement("textarea")).value=t,document.body.appendChild(a),a.select(),document.execCommand("copy"),document.body.removeChild(a),n(o.a.createElement(H,{id:"Challenge link copied to clipboard"}))}),[n,r]),C=Object(a.useCallback)((function(){p((function(e){return e+1}))}),[]),S=Object(a.useCallback)(function(){var e,t=(e=l.a.mark((function e(t,n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r||!t.approved||j[t.id]){e.next=3;break}return e.next=3,m.firestore().collection("stats").doc(r.uid).set(((a={})[t.id]={completionTime:n},a),{merge:!0});case 3:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){K(o,r,a,i,c,"next",e)}function c(e){K(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(e,n){return t.apply(this,arguments)}}(),[r,j]),k=Object(a.useCallback)((function(){var e=null!=r&&j[r.uid]?j[r.uid]:{},t=function(e){for(var t,n,r=e.length;0!==r;)n=Math.floor(Math.random()*r),t=e[r-=1],e[r]=e[n],e[n]=t;return e}(Y(i)).sort((function(t,n){var r=t.id,a=t.edges,o=n.id,i=n.edges,c=void 0!==e[r],u=void 0!==e[o];return c||u?c-u:i-a}));s(Y(t))}),[i,j,r]),I=Object(a.useMemo)((function(){return{initialized:E,requestSave:C,saveRequestId:d,playlist:u,setPlaylist:s,markTangramAsComplete:S,completedTangrams:j,shareTangrams:x,startRandomPlaylist:k}}),[E,C,d,u,S,j,x,k]);return o.a.createElement(J.Provider,{value:I},t)};var Z=function(e){var t=e.css,n=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["css"]),c=Object(r.useKeyframes)({from:{transform:"rotate(0deg)"},to:{transform:"rotate(360deg)"}}),u=Object(r.useKeyframes)({0:{borderTopColor:"pieces.lt2"},14:{borderTopColor:"pieces.rh"},28:{borderTopColor:"pieces.st2"},42:{borderTopColor:"pieces.mt1"},57:{borderTopColor:"pieces.st1"},71:{borderTopColor:"pieces.lt1"},85:{borderTopColor:"pieces.sq"},100:{borderTopColor:"pieces.lt2"}}),s=Object(a.useContext)(r.ThemeContext);return o.a.createElement(i,Object.assign({css:Object.assign({position:"relative",alignItems:"center",justifyContent:"center",size:Math.round(1.4*s.sizes.button)+"px"},t,{"& > div":{position:"absolute",size:"button",borderColor:"transparent",borderStyle:"solid",borderWidth:"loader",borderRadius:"50%",animation:c+" 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite, "+u+" 10s linear infinite both","&:nth-child(1)":{animationDelay:"-0.45s"},"&:nth-child(2)":{animationDelay:"-0.3s"},"&:nth-child(3)":{animationDelay:"-0.15s"}}})},n),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null))},ee=(n("hhXQ"),n("dRSK"),n("BbdF")),te=n.n(ee);n("KKXr"),n("OG14"),n("CX2u");function ne(){return(ne=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var re=function(e,t){void 0===t&&(t={});var r,i=t,c=i.volume,u=void 0===c?1:c,s=i.playbackRate,l=void 0===s?1:s,f=i.soundEnabled,d=void 0===f||f,m=i.interrupt,p=void 0!==m&&m,h=i.onload,v=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(i,["volume","playbackRate","soundEnabled","interrupt","onload"]),b=o.a.useRef(null),g=o.a.useState(!1),y=g[0],E=g[1],O=o.a.useState(null),w=O[0],j=O[1],x=o.a.useState(null),C=x[0],S=x[1],k=function(){"function"==typeof h&&h.call(this),j(1e3*this.duration())};r=function(){n.e(9).then(n.t.bind(null,"HlzF",7)).then((function(t){b.current=t.Howl;var n=new b.current(ne({src:[e],volume:u,onload:k},v));S(n)}))},Object(a.useEffect)(r,[]),o.a.useEffect((function(){b.current&&C&&S(new b.current(ne({src:[e],volume:u,onload:k},v)))}),[e]),o.a.useEffect((function(){C&&(C.volume(u),C.rate(l))}),[u,l]);var I=o.a.useCallback((function(e){void 0===e&&(e={}),C&&(d||e.forceSoundEnabled)&&(p&&C.stop(),e.playbackRate&&C.rate(e.playbackRate),C.play(e.id),C.once("end",(function(){return E(!1)})),E(!0))}),[C,d,p]),A=o.a.useCallback((function(e){C&&(C.stop(e),E(!1))}),[C]),T=o.a.useCallback((function(e){C&&(C.pause(e),E(!1))}),[C]);return[I,{sound:C,stop:A,pause:T,isPlaying:y,duration:w}]},ae=n("8Ymh"),oe=n.n(ae),ie=n("Hrb7"),ce=n.n(ie),ue=n("NczM"),se=n.n(ue),le=n("wCrC"),fe=n.n(le),de=Object(a.createContext)([!0,function(){}]),me=function(e){var t=e.children,n=Object(a.useState)(!0),r=n[0],i=n[1],c=re(oe.a,{soundEnabled:r})[0],u=re(ce.a,{soundEnabled:r})[0],s=re(ce.a,{soundEnabled:r})[0],l=re(se.a,{soundEnabled:r})[0],f=re(fe.a,{soundEnabled:r})[0];Object(a.useEffect)((function(){i("off"!==window.localStorage.getItem("sound"))}),[]);var d=Object(a.useCallback)((function(){var e=!r;i(e),window.localStorage.setItem("sound",e?"on":"off")}),[r]),m=Object(a.useMemo)((function(){return{soundEnabled:r,toggleSound:d,playButton:u,playToggle:s,playCard:l,playClap:c,playTangram:f}}),[r,d,u,s,l,c,f]);return o.a.createElement(de.Provider,{value:m},t)};function pe(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}var he=Object(r.createPrimitive)("button",{minWidth:0,minHeight:0,flex:"none",fontWeight:"bold",border:"2px solid",borderRadius:2,fontSize:"inherit",color:"errorText",background:"none",cursor:"pointer",p:3,"&:disabled":{opacity:.3,cursor:"not-allowed"},"&:focus":{outline:"none"}}),ve=function(e){var t=e.as,n=void 0===t?"button":t,i=e.css,c=e.onClick,u=pe(e,["as","css","onClick"]),s=Object(a.useContext)(de).playButton,l=Object(r.useKeyframes)({0:{bg:"pieces.lt2"},14:{bg:"pieces.rh"},28:{bg:"pieces.st2"},42:{bg:"pieces.mt1"},57:{bg:"pieces.st1"},71:{bg:"pieces.lt1"},85:{bg:"pieces.sq"},100:{bg:"pieces.lt2"}}),f=Object(r.useCss)(Object.assign({minWidth:0,minHeight:0,flex:"none",animation:l+" 20s linear infinite both",fontWeight:"bold",border:0,borderRadius:2,fontSize:"inherit",color:"#FFFFFFDD",cursor:"pointer",p:3,"&:disabled":{opacity:.3,cursor:"not-allowed"},"&:focus":{outline:"none"}},i));return o.a.createElement(n,Object.assign({className:f,onClick:c?function(e){s(),c(e)}:void 0},u))},be=function(e){var t=e.as,n=void 0===t?"button":t,i=e.css,c=e.onClick,u=pe(e,["as","css","onClick"]),s=Object(a.useContext)(de).playButton,l=Object(r.useKeyframes)({0:{bg:"pieces.lt2"},14:{bg:"pieces.rh"},28:{bg:"pieces.st2"},42:{bg:"pieces.mt1"},57:{bg:"pieces.st1"},71:{bg:"pieces.lt1"},85:{bg:"pieces.sq"},100:{bg:"pieces.lt2"}}),f=Object(r.useCss)(Object.assign({animation:l+" 20s linear infinite both",backgroundSize:"2000% 2000%",boxShadow:"0px 5px 10px #00000080",border:0,borderRadius:"50%",fontSize:5,color:"#FFFFFFDD",size:"button",cursor:"pointer",p:0,"&:disabled":{opacity:.3,cursor:"not-allowed"},"&:focus":{outline:"none"}},i));return o.a.createElement(n,Object.assign({className:f,onClick:c?function(e){s(),c(e)}:void 0},u))};var ge=function(e){var t=e.uid,n=e.size,r=void 0===n?40:n,a=e.css,c=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["uid","size","css"]);return o.a.createElement(i,Object.assign({as:"img",src:"https://api.adorable.io/avatars/"+r+"/"+t+".png",css:Object.assign({border:"2px solid",borderColor:"dialogText",borderRadius:"50%",size:r},a)},c))};var ye=function(e){var t,n,c,s,l,f,d,m,p=e.tangram,h=e.completed,v=e.selected,b=e.css,g=e.onBadgeClick,y=e.onClick,E=e.onLongPress,O=e.hideBadge,w=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["tangram","completed","selected","css","onBadgeClick","onClick","onLongPress","hideBadge"]),j=p.path,x=p.width,C=p.height,S=p.uid,k=p.approved,I=p.emoji,A=Object(a.useMemo)((function(){return function(e){return e.edges>16?0:e.edges>8?1:2}(p)}),[p]),T=Object(a.useContext)(de).playCard,R=Object(a.useContext)(r.ThemeContext).colors.difficulties[A],P=Object(a.useCallback)((function(){E&&E(p)}),[E,p]),L=(t=P,n=1e3,c=Object(a.useState)(null),s=c[0],l=c[1],{onMouseDown:f=function(e){if(s&&e.touches&&1!==e.touches.length)clearTimeout(s.timeoutId);else{var r=e.touches?e.touches.item(0):e;l({timeoutId:setTimeout(t,n),startEvent:{clientX:r.clientX,clientY:r.clientY}})}},onMouseUp:m=function(){s&&clearTimeout(s.timeoutId)},onMouseMove:d=function(e){if(s){var t=e.touches?e.touches.item(0):e;Math.sqrt(Math.pow(t.clientX-s.startEvent.clientX,2)+Math.pow(t.clientY-s.startEvent.clientY,2))>10&&clearTimeout(s.timeoutId)}},onMouseLeave:m,onTouchStart:f,onTouchEnd:m,onTouchMove:d});return o.a.createElement(i,Object.assign({css:b,onClick:y?function(e){T(),y(e)}:void 0},L,w),o.a.createElement(i,{css:{opacity:S&&!1===k?.5:1,borderRadius:5,boxShadow:v?"0px 0px 0px 4px "+R:"0px 0px 0px 1px rgba(0, 0, 0, 0.1)",m:1,bg:"background",transition:"background-color "+u.COLOR_TRANSITION_DURATION+"ms",p:3,textAlign:"center",position:"relative",cursor:y||E?"pointer":void 0,width:128,height:178},deps:[R,v,S,k]},o.a.createElement(i,{as:"svg",css:{flex:"1",justifyContent:"center",fill:R,stroke:u.DEV?"red":void 0,strokeWidth:u.DEV?4:void 0},deps:[R],viewBox:"0 0 "+x+" "+C,dangerouslySetInnerHTML:{__html:'<path d="'+j+'" />'}}),h&&I&&o.a.createElement(i,{css:{position:"absolute",top:1,left:1,fontSize:"30px"}},I),S&&!O&&o.a.createElement(ge,{uid:S,css:{position:"absolute",bottom:1,right:1,cursor:g?"pointer":void 0},onClick:g?function(e){e.stopPropagation(),g(S)}:void 0})))},Ee=n("Tgqd");var Oe=function(e){var t=e.children,n=e.title,r=e.onClose,a=e.css,c=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["children","title","onClose","css"]);return Object(p.createPortal)(o.a.createElement(i,{onClick:r,css:{position:"fixed",top:0,left:0,right:0,bottom:0,bg:"#00000080",alignItems:"center",justifyContent:"center",animation:u.FADE_TRANSITION_DURATION/2+"ms fadeIn ease both",p:3}},o.a.createElement(i,{css:{flex:"0 1 auto",bg:"dialogBackground",color:"dialogText",borderRadius:3,transition:"background-color "+u.COLOR_TRANSITION_DURATION+"ms, color "+u.COLOR_TRANSITION_DURATION+"ms",fontSize:3,p:3,gap:3,maxWidth:"95vw"}},o.a.createElement(i,{css:{flexDirection:"row",gap:3,alignItems:"center",justifyContent:"space-between",zIndex:1}},n,o.a.createElement(i,{as:Ee.o,css:{cursor:"pointer",size:32,ml:n?void 0:"auto"},onClick:r})),o.a.createElement(i,Object.assign({onClick:function(e){return e.stopPropagation()},css:Object.assign({flex:"1"},a)},c),t))),document.getElementById("dialogContainer"))},we=n("McE4");function je(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}var xe=Object(r.extendPrimitive)(we.a,(function(e){var t=e.as,n=void 0===t?"small":t,r=e.css,a=je(e,["as","css"]);return Object.assign({as:n,css:Object.assign({color:"errorText"},r)},a)})),Ce=Object(r.extendPrimitive)(we.a,(function(e){var t=e.as,n=void 0===t?"small":t,r=e.css,a=je(e,["as","css"]);return Object.assign({as:n,css:Object.assign({opacity:.5},r)},a)})),Se=Object(r.extendPrimitive)(we.a,{fontSize:4,fontWeight:"bold"}),ke=Object(r.extendPrimitive)(we.a,{fontSize:3,fontWeight:"bold"}),Ie=Object(r.extendPrimitive)(we.a,{cursor:"pointer",textDecoration:"underline"}),Ae=function(e){var t=e.uid,n=e.tangrams,r=e.deferred,c=Object(a.useContext)(Tn),s=c.showProfile,l=c.showTangram,f=Object(a.useContext)(w).usersMetadata,d=Object(a.useContext)(J).setPlaylist,m=f[t]?f[t].username:null;return o.a.createElement(Oe,{title:o.a.createElement(Se,null,m?o.a.createElement(H,{id:"{username} challenged you",values:{username:m}}):o.a.createElement(H,{id:"Rise to the challenge",values:{username:m}})),onClose:function(){return r.reject(u.DIALOG_CLOSED_REASON)},css:{gap:3,minWidth:"268px",maxWidth:"500px"}},o.a.createElement(i,{css:{flex:"1",overflow:"auto",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",m:-1}},n.map((function(e){return o.a.createElement(ye,{key:e.id,selected:!0,tangram:e,css:{m:1},onBadgeClick:s,onLongPress:l})}))),o.a.createElement(ve,{onClick:function(){d(n),r.resolve()}},o.a.createElement(H,{id:"Let's go !"})))};function Te(e){return function(e){if(Array.isArray(e))return Re(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Re(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Re(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Pe=Object(r.extendPrimitive)(i,(function(e){var t=e.css,n=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["css"]),o=Object(a.useContext)(r.ThemeContext);return Object.assign({css:Object.assign({},t,{p:3,alignItems:"center",position:"sticky",top:0,zIndex:1,background:"linear-gradient(0deg, rgba(0,0,0,0) 0%, "+o.colors.dialogBackground+" 50%)"})},n)})),Le=function(e){var t=e.deferred,n=Object(a.useContext)(A),r=n.pendingTangrams,c=n.approvedTangramsByCategory,s=Object(a.useContext)(Tn),l=s.showProfile,f=s.showTangram,d=Object(a.useContext)(w).currentUser,m=Object(a.useContext)(J),p=m.setPlaylist,h=m.completedTangrams,v=m.shareTangrams,b=m.startRandomPlaylist,g=Object(a.useState)([]),y=g[0],E=g[1],O=function(e){console.log(e),E((function(t){return t.some((function(t){return t.id===e.id}))?y.filter((function(t){return t.id!==e.id})):[].concat(Te(y),[e])}))};return o.a.createElement(o.a.Fragment,null,o.a.createElement(Oe,{title:o.a.createElement(Se,null,o.a.createElement(H,{id:"Tangram gallery"})),css:{gap:3,width:"500px",maxWidth:"80vw"},onClose:function(){return t.reject(u.DIALOG_CLOSED_REASON)}},o.a.createElement(o.a.Fragment,null,o.a.createElement(i,{css:{flex:"1",overflow:"auto",gap:3}},r.length>0&&o.a.createElement(i,null,o.a.createElement(Pe,null,o.a.createElement(ke,null,o.a.createElement(H,{id:"Pending approbation"}))),o.a.createElement(i,{css:{display:"grid",gridTemplateColumns:"repeat(auto-fill, 136px)",gridColumnGap:2,gridRowGap:2,justifyContent:"center",justifyItems:"center",alignItems:"center"}},r.map((function(e){return o.a.createElement(ye,{key:e.id,tangram:e,completed:d&&h[d.uid]&&h[d.uid][e.id],selected:y.some((function(t){return t.id===e.id})),onClick:function(){return O(e)},onBadgeClick:l,onLongPress:f})})))),Object.keys(c).map((function(e){return o.a.createElement(i,{key:e},o.a.createElement(Pe,null,o.a.createElement(ke,null,o.a.createElement(H,{id:e}))),o.a.createElement(i,{css:{display:"grid",gridTemplateColumns:"repeat(auto-fill, 136px)",gridColumnGap:2,gridRowGap:2,justifyContent:"center",justifyItems:"center",alignItems:"center"}},c[e].map((function(e){return o.a.createElement(ye,{key:e.id,tangram:e,completed:d&&h[d.uid]&&h[d.uid][e.id],selected:y.some((function(t){return t.id===e.id})),onClick:function(){return O(e)},onBadgeClick:l,onLongPress:f})}))))}))),o.a.createElement(i,{css:{flexDirection:"row",gap:2}},o.a.createElement(ve,{onClick:function(){y.length?p(y):b(),t.resolve()},css:{flex:"1"}},0===y.length?o.a.createElement(H,{id:"Play now !"}):1===y.length?o.a.createElement(H,{id:"Start 1 tangram !"}):o.a.createElement(H,{id:"Start {count} tangrams !",values:{count:y.length}})),o.a.createElement(ve,{disabled:0===y.length,onClick:function(){return v(y)}},o.a.createElement(i,{as:Ee.i,size:20}))))))};var Ne=Object(r.createPrimitive)("input",(function(e){var t=e.css,n=e.type,r=void 0===n?"text":n,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["css","type"]);return Object.assign({css:Object.assign({color:"inherit",fontSize:"inherit",bg:"inputBackground",border:"none",borderRadius:2,borderColor:"currentColor",p:2,"&:disabled":{opacity:.5,cursor:"not-allowed"},"&:focus":{outline:"none"}},t),type:r},a)}));function Me(e){var t=0;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return De(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return De(e,t)}(e)))return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}function De(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _e=function(e){var t=e.deferred,n=Object(a.useContext)(Tn).showProfile,r=Object(a.useContext)(w),c=r.currentUser,s=r.usersMetadata,l=Object(a.useContext)(A).approvedTangrams,f=Object(a.useContext)(J).completedTangrams,d=Object(a.useState)((function(){return window.localStorage.getItem("selectedLeaderboard")||"claps"})),m=d[0],p=d[1],h=Object(a.useMemo)((function(){for(var e,t={},n={},r=Me(l);!(e=r()).done;){var a=e.value,o=a.uid,i=a.claps;t[o]||(t[o]=0,n[o]=0),t[o]+=i||0,n[o]+=1}return Object.keys(s).map((function(e){var r=s[e];return Object.assign({uid:e},r,{claps:t[e]||0,completed:f[e]?Object.keys(f[e]).length:0,created:n[e]||0})}))}),[f,l,s]),v=Object(a.useMemo)((function(){if(h)return h.sort((function(e,t){return t[m]-e[m]}))}),[h,m]);return o.a.createElement(Oe,{title:o.a.createElement(Se,null,o.a.createElement(H,{id:"Leaderboard"})),onClose:function(){return t.reject(u.DIALOG_CLOSED_REASON)},css:{gap:3,minWidth:"268px",maxWidth:"500px",flex:"1",overflow:"auto"}},o.a.createElement(o.a.Fragment,null,o.a.createElement(Ne,{as:"select",value:m,onChange:function(e){p(e.target.value),window.localStorage.setItem("selectedLeaderboard",e.target.value)}},o.a.createElement("option",{value:"claps"},o.a.createElement(H,{id:"Claps"})),o.a.createElement("option",{value:"completed"},o.a.createElement(H,{id:"Completed tangrams"})),o.a.createElement("option",{value:"created"},o.a.createElement(H,{id:"Created tangrams"}))),o.a.createElement(i,{css:{flex:"1",overflow:"auto",gap:2}},v.map((function(e,t){var r=e.uid,a=e.username,u=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["uid","username"]);return o.a.createElement(i,{key:r,css:{flexDirection:"row",gap:2,alignItems:"center",fontSize:0===t?"1.6em":1===t?"1.4em":2===t?"1.2em":void 0},deps:[t]},o.a.createElement(ge,{uid:r,size:32,onClick:function(){return function(e){n(e)}(r)}}),o.a.createElement(we.a,{css:{flex:"1",fontWeight:c&&c.uid===r?"bold":void 0},deps:[c,r]},a),o.a.createElement(we.a,null,u[m],"claps"===m&&"👏"))})))))};n("bHtr"),n("SRfc"),n("T39b");function Ue(e,t,n,r,a,o,i){try{var c=e[o](i),u=c.value}catch(s){return void n(s)}c.done?t(u):Promise.resolve(u).then(r,a)}function Be(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Ue(o,r,a,i,c,"next",e)}function c(e){Ue(o,r,a,i,c,"throw",e)}i(void 0)}))}}n("Oyvg"),n("9VmF");var Fe=n("rePB");var ze=n("BsWD");function Ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(u){a=!0,o=u}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}}(e,t)||Object(ze.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n("/8Fb"),n("pIFo");var Ve=function(e){return void 0===e},We=function(e){return null===e||Ve(e)},qe=function(e){return Array.isArray(e)},He=function(e){return"object"==typeof e},Ye=function(e){return!We(e)&&!qe(e)&&He(e)},Ke=function(e){return Ye(e)&&e.nodeType===Node.ELEMENT_NODE},$e={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit"},Xe="undefined",Je={BLUR:"blur",CHANGE:"change",INPUT:"input"},Qe="max",Ze="min",et="maxLength",tt="minLength",nt="pattern",rt="required",at="validate",ot=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,it=/^\w*$/,ct=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ut=/\\(\\)?/g;var st=function(e){return!qe(e)&&(it.test(e)||!ot.test(e))},lt=function(e){var t=[];return e.replace(ct,(function(e,n,r,a){t.push(r?a.replace(ut,"$1"):n||e)})),t};function ft(e,t,n){for(var r=-1,a=st(t)?[t]:lt(t),o=a.length,i=o-1;++r<o;){var c=a[r],u=n;if(r!==i){var s=e[c];u=Ye(s)||qe(s)?s:isNaN(+a[r+1])?{}:[]}e[c]=u,e=e[c]}return e}var dt=function(e){return Object.entries(e).reduce((function(e,t){var n=Ge(t,2),r=n[0],a=n[1];return st(r)?Object.assign(Object.assign({},e),Object(Fe.a)({},r,a)):(ft(e,r,a),e)}),{})},mt=function(e,t,n){var r=t.split(/[,[\].]+?/).filter(Boolean).reduce((function(e,t){return We(e)?e:e[t]}),e);return Ve(r)||r===e?e[t]||n:r},pt=function(e,t){for(var n in e)if(mt(t,n)){var r=e[n];if(r){if(r.ref.focus){r.ref.focus();break}if(r.options){r.options[0].ref.focus();break}}}},ht=function(e,t){Ke(e)&&e.removeEventListener&&(e.removeEventListener(Je.INPUT,t),e.removeEventListener(Je.CHANGE,t),e.removeEventListener(Je.BLUR,t))},vt=function(e){return"radio"===e.type},bt=function(e){return"checkbox"===e.type};function gt(e){return!e||e instanceof HTMLElement&&e.nodeType!==Node.DOCUMENT_NODE&&gt(e.parentNode)}var yt=function(e){return Ye(e)&&!Object.keys(e).length};function Et(e){return qe(e)?e:lt(e)}function Ot(e,t){return 1==t.length?e:function(e,t){for(var n=st(t)?[t]:Et(t),r=t.length,a=0;a<r;)e=Ve(e)?a++:e[n[a++]];return a==r?e:void 0}(e,function(e,t,n){var r=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(n=n>a?a:n)<0&&(n+=a),a=t>n?0:n-t;for(var o=Array(a);++r<a;)o[r]=e[r+t];return o}(t,0,-1))}function wt(e,t){return t.forEach((function(t){!function(e,t){for(var n=st(t)?[t]:Et(t),r=Ot(e,n),a=n[n.length-1],o=!(null!=r)||delete r[a],i=void 0,c=0;c<n.slice(0,-1).length;c++){var u=-1,s=void 0,l=n.slice(0,-(c+1)),f=l.length-1;for(c>0&&(i=e);++u<l.length;){var d=l[u];s=s?s[d]:e[d],f===u&&(Ye(s)&&yt(s)||qe(s)&&!s.filter((function(e){return Ye(e)&&!yt(e)})).length)&&(i?delete i[d]:delete e[d]),i=s}}}(e,t)})),e}var jt={isValid:!1,value:""},xt=function(e){return qe(e)?e.filter(Boolean).reduce((function(e,t){var n=t.ref,r=n.checked,a=n.value;return r?{isValid:!0,value:a}:e}),jt):jt},Ct=function(e){return Object(R.a)(e).filter((function(e){return e.selected})).map((function(e){return e.value}))},St=function(e){return"file"===e.type},kt=function(e){return"select-multiple"===e.type},It=function(e){return""===e},At={value:!1,isValid:!1},Tt={value:!0,isValid:!0},Rt=function(e){if(qe(e)){if(e.length>1){var t=e.filter((function(e){return e.ref.checked})).map((function(e){return e.ref.value}));return{value:t,isValid:!!t.length}}var n=e[0].ref,r=n.checked,a=n.value,o=n.attributes;return r?o&&!Ve(o.value)?Ve(a)||It(a)?Tt:{value:a,isValid:!0}:Tt:At}return At};function Pt(e,t){var n=t.name,r=t.value,a=e[n];return St(t)?t.files:vt(t)?a?xt(a.options).value:"":kt(t)?Ct(t.options):bt(t)?!!a&&Rt(a.options).value:r}var Lt=function(e){return"string"==typeof e},Nt=function(e,t){var n={},r=function(r){(Ve(t)||(Lt(t)?r.startsWith(t):qe(t)?t.find((function(e){return r.startsWith(e)})):t&&t.nest))&&(n[r]=Pt(e,e[r].ref))};for(var a in e)r(a);return n},Mt=function(e,t){var n=t.type,r=t.types,a=t.message;return Ye(e)&&e.type===n&&e.message===a&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object.entries(e),r=Object.keys(t);return n.length===r.length&&n.reduce((function(e,n){var r=Ge(n,2),a=r[0],o=r[1];return!!e&&(t[a]&&t[a]===o)}),!0)}(e.types,r)};var Dt=function(e){return e instanceof RegExp},_t=function(e){var t;return Ye(t=e)&&!Dt(t)?e:{value:e,message:""}},Ut=function(e){return"function"==typeof e},Bt=function(e){return"boolean"==typeof e},Ft=function(e){return Lt(e)||Ye(e)&&Object(a.isValidElement)(e)};function zt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"validate";if(Ft(e)||Bt(e)&&!e)return{type:n,message:Ft(e)?e:"",ref:t}}var Gt=function(e,t,n,r,a){if(t){var o=n[e];return Object.assign(Object.assign({},o),{types:Object.assign(Object.assign({},o&&o.types?o.types:{}),Object(Fe.a)({},r,a||!0))})}return{}},Vt=function(){var e=Be(l.a.mark((function e(t,n,r){var a,o,i,c,u,s,f,d,m,p,h,v,b,g,y,E,O,w,j,x,C,S,k,I,A,T,R,P,L,N,M,D,_,U,B,F,z,G,V,W,q,H,Y,K,$,X,J,Q,Z,ee,te,ne,re,ae,oe,ie,ce,ue,se;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.ref,o=r.ref,i=o.type,c=o.value,u=o.name,s=r.options,f=r.required,d=r.maxLength,m=r.minLength,p=r.min,h=r.max,v=r.pattern,b=r.validate,y=t.current,E={},O=vt(a),w=bt(a),j=O||w,x=It(c),C=Gt.bind(null,u,n,E),S=function(e,t,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:et,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:tt,c=e?t:r;if(E[u]=Object.assign({type:e?o:i,message:c,ref:a},C(e?o:i,c)),!n)return E},!f||!(!O&&!w&&(x||We(c))||Bt(c)&&!c||w&&!Rt(s).isValid||O&&!xt(s).isValid)){e.next=15;break}if(k=Ft(f)?{value:!!f,message:f}:_t(f),I=k.value,A=k.message,!I){e.next=15;break}if(E[u]=Object.assign({type:rt,message:A,ref:j?null===(g=y[u].options)||void 0===g?void 0:g[0].ref:a},C(rt,A)),n){e.next=15;break}return e.abrupt("return",E);case 15:if(We(p)&&We(h)){e.next=23;break}if(P=_t(h),L=P.value,N=P.message,M=_t(p),D=M.value,_=M.message,"number"===i||!i&&!isNaN(c)?(U=a.valueAsNumber||parseFloat(c),We(L)||(T=U>L),We(D)||(R=U<D)):(B=a.valueAsDate||new Date(c),Lt(L)&&(T=B>new Date(L)),Lt(D)&&(R=B<new Date(D))),!T&&!R){e.next=23;break}if(S(!!T,N,_,Qe,Ze),n){e.next=23;break}return e.abrupt("return",E);case 23:if(!Lt(c)||x||!d&&!m){e.next=33;break}if(F=_t(d),z=F.value,G=F.message,V=_t(m),W=V.value,q=V.message,H=c.toString().length,Y=!We(z)&&H>z,K=!We(W)&&H<W,!Y&&!K){e.next=33;break}if(S(!!Y,G,q),n){e.next=33;break}return e.abrupt("return",E);case 33:if(!v||x){e.next=39;break}if($=_t(v),X=$.value,J=$.message,!Dt(X)||X.test(c)){e.next=39;break}if(E[u]=Object.assign({type:nt,message:J,ref:a},C(nt,J)),n){e.next=39;break}return e.abrupt("return",E);case 39:if(!b){e.next=72;break}if(Q=Pt(y,a),Z=j&&s?s[0].ref:a,!Ut(b)){e.next=53;break}return e.next=45,b(Q);case 45:if(ee=e.sent,!(te=zt(ee,Z))){e.next=51;break}if(E[u]=Object.assign(Object.assign({},te),C(at,te.message)),n){e.next=51;break}return e.abrupt("return",E);case 51:e.next=72;break;case 53:if(!Ye(b)){e.next=72;break}ne={},re=0,ae=Object.entries(b);case 56:if(!(re<ae.length)){e.next=68;break}if(oe=Ge(ae[re],2),ie=oe[0],ce=oe[1],yt(ne)||n){e.next=60;break}return e.abrupt("break",68);case 60:return e.next=62,ce(Q);case 62:ue=e.sent,(se=zt(ue,Z,ie))&&(ne=Object.assign(Object.assign({},se),C(ie,se.message)),n&&(E[u]=ne));case 65:re++,e.next=56;break;case 68:if(yt(ne)){e.next=72;break}if(E[u]=Object.assign({ref:Z},ne),n){e.next=72;break}return e.abrupt("return",E);case 72:return e.abrupt("return",E);case 73:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Wt=function(e,t){return qe(e.inner)?e.inner.reduce((function(e,n){var r=n.path,a=n.message,o=n.type;return Object.assign(Object.assign({},e),e[r]&&t?Object(Fe.a)({},r,Gt(r,t,e,o,a)):Object(Fe.a)({},r,e[r]||Object.assign({message:a,type:o},t?{types:Object(Fe.a)({},o,a||!0)}:{})))}),{}):Object(Fe.a)({},e.path,{message:e.message,type:e.type})};function qt(e,t,n,r,a){return Ht.apply(this,arguments)}function Ht(){return(Ht=Be(l.a.mark((function e(t,n,r,a,o){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=2;break}return e.abrupt("return",a(r,o));case 2:return e.prev=2,e.next=5,t.validate(r,{abortEarly:!1,context:o});case 5:return e.t0=e.sent,e.t1={},e.abrupt("return",{values:e.t0,errors:e.t1});case 10:return e.prev=10,e.t2=e.catch(2),e.abrupt("return",{values:{},errors:dt(Wt(e.t2,n))});case 13:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}var Yt=function(e){return We(e)||!He(e)},Kt=function(e,t){return function e(t,n){var r=function(n,r,a){var o=a?"".concat(t,".").concat(r):"".concat(t,"[").concat(r,"]");return Yt(n)?o:e(o,n)};return qe(n)?n.map((function(e,t){return r(e,t)})):Object.entries(n).map((function(e){var t=Ge(e,2),n=t[0],a=t[1];return r(a,n,!0)}))}(e,t).flat(1/0)},$t=function(e,t,n,r){var a;return n.add(t),yt(e)?a=void 0:Ve(e[t])?(a=mt(dt(e),t),Ve(a)||Kt(t,a).forEach((function(e){return n.add(e)}))):(a=e[t],n.add(t)),Ve(a)?Ye(r)?mt(r,t):r:a},Xt=function(e){var t=e.isOnChange,n=e.hasError,r=e.isBlurEvent,a=e.isOnSubmit,o=e.isReValidateOnSubmit,i=e.isOnBlur,c=e.isReValidateOnBlur,u=e.isSubmitted;return t&&r||a&&o||a&&!u||i&&!r&&!n||c&&!r&&n||o&&u},Jt=function(e){return e.substring(0,e.indexOf("["))},Qt=function(e,t){var n=dt(Nt(e));return t?mt(n,t,n):n};function Zt(e,t){var n=!1;if(!qe(e)||!qe(t)||e.length!==t.length)return!0;for(var r=0;r<e.length&&!n;r++){var a=e[r],o=t[r];if(Ve(o)||Object.keys(a).length!==Object.keys(o).length){n=!0;break}for(var i in a)if(a[i]!==o[i]){n=!0;break}}return n}var en=function(e,t){return RegExp("^".concat(t,"[\\d+]").replace(/\[/g,"\\[").replace(/\]/g,"\\]")).test(e)},tn=function(e,t){return Object(R.a)(e).reduce((function(e,n){return!!en(t,n)||e}),!1)},nn=function(e){return typeof FileList!==Xe&&e instanceof FileList};var rn=function(e){return{isOnSubmit:!e||e===$e.onSubmit,isOnBlur:e===$e.onBlur,isOnChange:e===$e.onChange}},an=function(e){return vt(e)||bt(e)};function on(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mode,n=void 0===t?$e.onSubmit:t,r=e.reValidateMode,o=void 0===r?$e.onChange:r,i=e.validationSchema,c=e.validationResolver,u=e.validationContext,s=e.defaultValues,f=void 0===s?{}:s,d=e.submitFocusError,m=void 0===d||d,p=e.validateCriteriaMode,h=Object(a.useRef)({}),v="all"===p,b=Object(a.useRef)({}),g=Object(a.useRef)({}),y=Object(a.useRef)({}),E=Object(a.useRef)(new Set),O=Object(a.useRef)(new Set),w=Object(a.useRef)(new Set),j=Object(a.useRef)(new Set),x=Object(a.useRef)(!0),C=Object(a.useRef)({}),S=Object(a.useRef)(f),k=Object(a.useRef)(!1),I=Object(a.useRef)(!1),A=Object(a.useRef)(!1),T=Object(a.useRef)(!1),P=Object(a.useRef)(0),L=Object(a.useRef)(!1),N=Object(a.useRef)(),M=Object(a.useRef)({}),D=Object(a.useRef)(u),_=Object(a.useRef)(new Set),U=Ge(Object(a.useState)(),2)[1],B=Object(a.useRef)(rn(n)).current,F=B.isOnBlur,z=B.isOnSubmit,G=B.isOnChange,V=typeof window===Xe,W=!(!i&&!c),q=typeof document!==Xe&&!V&&!Ve(window.HTMLElement),H=q&&"Proxy"in window,Y=Object(a.useRef)({dirty:!H,dirtyFields:!H,isSubmitted:z,submitCount:!H,touched:!H,isSubmitting:!H,isValid:!H}),K=Object(a.useRef)(rn(o)).current,$=K.isOnBlur,X=K.isOnSubmit;D.current=u;var J=Object(a.useCallback)((function(){k.current||U({})}),[]),Q=Object(a.useCallback)((function(e,t,n,r){var a=n||function(e){var t=e.errors,n=e.name,r=e.error,a=e.validFields,o=e.fieldsWithValidation,i=yt(r),c=yt(t),u=mt(r,n),s=mt(t,n);return!(i&&a.has(n)||s&&s.isManual)&&(!!(c!==i||!c&&!s||i&&o.has(n)&&!a.has(n))||u&&!Mt(s,u))}({errors:b.current,error:t,name:e,validFields:j.current,fieldsWithValidation:w.current});if(yt(t)?((w.current.has(e)||W)&&(j.current.add(e),a=a||mt(b.current,e)),b.current=wt(b.current,[e])):(j.current.delete(e),a=a||!mt(b.current,e),ft(b.current,e,t[e])),a&&!r)return J(),!0}),[J,W]),Z=Object(a.useCallback)((function(e,t){var n=e.ref,r=e.options,a=n.type,o=q&&Ke(n)&&We(t)?"":t;return vt(n)&&r?r.forEach((function(e){var t=e.ref;return t.checked=t.value===o})):St(n)?nn(o)?n.files=o:n.value=o:kt(n)?Object(R.a)(n.options).forEach((function(e){return e.selected=o.includes(e.value)})):bt(n)&&r?r.length>1?r.forEach((function(e){var t=e.ref;return t.checked=o.includes(t.value)})):r[0].ref.checked=!!o:n.value=o,!!a}),[q]),ee=function(e){if(!h.current[e]||!Y.current.dirty&&!Y.current.dirtyFields)return!1;var t=tn(_.current,e),n=O.current.size,r=C.current[e]!==Pt(h.current,h.current[e].ref);if(t){var a=Jt(e);r=Zt(Qt(h.current,a),mt(S.current,a))}var o=(t?T.current:O.current.has(e))!==r;return r?O.current.add(e):O.current.delete(e),T.current=t?r:!!O.current.size,Y.current.dirty?o:n!==O.current.size},te=Object(a.useCallback)((function(e){if(ee(e)||!mt(g.current,e)&&Y.current.touched)return!!ft(g.current,e,!0)}),[]),ne=Object(a.useCallback)((function(e,t,n){var r=qe(t);for(var a in t){var o="".concat(n||e).concat(r?"[".concat(a,"]"):".".concat(a));Ye(t[a])&&ne(e,t[a],o);var i=h.current[o];i&&(Z(i,t[a]),te(o))}}),[Z,te]),re=Object(a.useCallback)((function(e,t){var n=h.current[e];if(n){Z(n,t);var r=te(e);if(Bt(r))return r}else Yt(t)||ne(e,t)}),[te,Z,ne]),ae=Object(a.useCallback)(function(){var e=Be(l.a.mark((function e(t,n){var r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=h.current[t]){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Vt(h,v,r);case 5:return a=e.sent,Q(t,a,!1,n),e.abrupt("return",yt(a));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[Q,v]),oe=Object(a.useCallback)(function(){var e=Be(l.a.mark((function e(t){var n,r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qt(i,v,Qt(h.current),c,D.current);case 2:return n=e.sent,r=n.errors,a=x.current,x.current=yt(r),qe(t)?(t.forEach((function(e){var t=mt(r,e);t?ft(b.current,e,t):wt(b.current,[e])})),J()):Q(t,mt(r,t)?Object(Fe.a)({},t,mt(r,t)):{},a!==x.current),e.abrupt("return",yt(b.current));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[J,Q,v,c,i]),ie=Object(a.useCallback)(function(){var e=Be(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t||Object.keys(h.current),!W){e.next=3;break}return e.abrupt("return",oe(n));case 3:if(!qe(n)){e.next=9;break}return e.next=6,Promise.all(n.map(function(){var e=Be(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae(t,!0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:return r=e.sent,J(),e.abrupt("return",r.every(Boolean));case 9:return e.next=11,ae(n);case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[oe,ae,J,W]),ce=function(e){return I.current||E.current.has(e)||E.current.has((e.match(/\w+/)||[])[0])};N.current=N.current?N.current:function(){var e=Be(l.a.mark((function e(t){var n,r,a,o,u,s,f,d,m,p,y,E,O,w,j;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.type,r=t.target,a=r?r.name:"",o=h.current,u=b.current,s=o[a],f=mt(u,a),s){e.next=8;break}return e.abrupt("return");case 8:if(m=n===Je.BLUR,p=Xt({hasError:!!f,isOnChange:G,isBlurEvent:m,isOnSubmit:z,isReValidateOnSubmit:X,isOnBlur:F,isReValidateOnBlur:$,isSubmitted:A.current}),y=ee(a),E=ce(a)||y,m&&!mt(g.current,a)&&Y.current.touched&&(ft(g.current,a,!0),E=!0),!p){e.next=15;break}return e.abrupt("return",E&&J());case 15:if(!W){e.next=26;break}return e.next=18,qt(i,v,Qt(o),c,D.current);case 18:O=e.sent,w=O.errors,j=x.current,x.current=yt(w),d=mt(w,a)?Object(Fe.a)({},a,mt(w,a)):{},j!==x.current&&(E=!0),e.next=29;break;case 26:return e.next=28,Vt(h,v,s);case 28:d=e.sent;case 29:!Q(a,d)&&E&&J();case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var ue=Object(a.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=yt(S.current)?Nt(h.current):S.current;qt(i,v,dt(Object.assign(Object.assign({},t),e)),c,D.current).then((function(e){var t=e.errors,n=x.current;x.current=yt(t),n!==x.current&&J()}))}),[J,v,c]),se=Object(a.useCallback)((function(e,t){!Ve(N.current)&&e&&function(e,t,n,r){var a=n.ref,o=n.ref,i=o.name,c=o.type,u=n.mutationWatcher;if(c){var s=e[i];if((vt(a)||bt(a))&&s){var l=s.options;qe(l)&&l.length?(l.filter(Boolean).forEach((function(e,n){var a=e.ref,o=e.mutationWatcher;(a&&gt(a)||r)&&(ht(a,t),o&&o.disconnect(),wt(l,["[".concat(n,"]")]))})),l&&!l.filter(Boolean).length&&delete e[i]):delete e[i]}else(gt(a)||r)&&(ht(a,t),u&&u.disconnect(),delete e[i])}else delete e[i]}(h.current,N.current,e,t)}),[]),le=Object(a.useCallback)((function(e,t){if(e&&(!e||!tn(_.current,e.ref.name)||t)){se(e,t);var n=e.ref.name;b.current=wt(b.current,[n]),g.current=wt(g.current,[n]),C.current=wt(C.current,[n]),[O,w,j,E].forEach((function(e){return e.current.delete(n)})),(Y.current.isValid||Y.current.touched)&&(J(),W&&ue())}}),[J,W,ue,se]);var fe=function(e){var t=e.name,n=e.type,r=e.types,a=e.message,o=e.preventRender,i=h.current[t];Mt(b.current[t],{type:n,message:a,types:r})||(ft(b.current,t,{type:n,types:r,message:a,ref:i?i.ref:{},isManual:!0}),o||J())};function de(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e.name)return console.warn("Missing name @",e);var n,r=e.name,a=e.type,o=e.value,i=Object.assign({ref:e},t),c=h.current,u=an(e),s=c[r],l=!0,f=!1;if(u?s&&qe(s.options)&&s.options.filter(Boolean).find((function(e){var t=e.ref;return o===t.value})):s)c[r]=Object.assign(Object.assign({},s),t);else{if(a){var d=(m=e,p=function(){return le(i)},(b=new MutationObserver((function(){gt(m)&&(b.disconnect(),p())}))).observe(window.document,{childList:!0,subtree:!0}),b);s=u?Object.assign({options:[].concat(Object(R.a)(s&&s.options||[]),[{ref:e,mutationWatcher:d}]),ref:{type:a,name:r}},t):Object.assign(Object.assign({},i),{mutationWatcher:d})}else s=i;var m,p,b;if(c[r]=s,yt(S.current)||(n=mt(S.current,r),l=Ve(n),f=tn(_.current,r),l||f||Z(s,n)),W&&!f&&Y.current.isValid?ue():yt(t)||(w.current.add(r),!z&&Y.current.isValid&&Vt(h,v,s).then((function(e){var t=x.current;yt(e)?j.current.add(r):x.current=!1,t!==x.current&&J()}))),C.current[r]||f&&l||(C.current[r]=l?Pt(c,s.ref):n),a)!function(e){var t=e.field.ref,n=e.handleChange,r=e.isRadioOrCheckbox;Ke(t)&&n&&(t.addEventListener(r?Je.CHANGE:Je.INPUT,n),t.addEventListener(Je.BLUR,n))}({field:u&&s.options?s.options[s.options.length-1]:s,isRadioOrCheckbox:u,handleChange:N.current})}}var me=Object(a.useCallback)((function(e){return function(){var t=Be(l.a.mark((function t(n){var r,a,o,u,s,f,d,p,g,y,E,O;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n&&(n.preventDefault(),n.persist()),r={},a={},o=h.current,Y.current.isSubmitting&&(L.current=!0,J()),t.prev=5,!W){t.next=18;break}return a=Nt(o),t.next=10,qt(i,v,dt(a),c,D.current);case 10:u=t.sent,s=u.errors,f=u.values,b.current=s,r=s,a=f,t.next=30;break;case 18:d=0,p=Object.values(o);case 19:if(!(d<p.length)){t.next=30;break}if(!(g=p[d])){t.next=27;break}return y=g.ref,E=g.ref.name,t.next=25,Vt(h,v,g);case 25:(O=t.sent)[E]?(ft(r,E,O[E]),j.current.delete(E)):(w.current.has(E)&&j.current.add(E),a[E]=Pt(o,y));case 27:d++,t.next=19;break;case 30:if(!yt(r)){t.next=36;break}return b.current={},t.next=34,e(dt(a),n);case 34:t.next=38;break;case 36:m&&q&&pt(o,r),b.current=r;case 38:return t.prev=38,A.current=!0,L.current=!1,P.current=P.current+1,J(),t.finish(38);case 44:case"end":return t.stop()}}),t,null,[[5,,38,44]])})));return function(e){return t.apply(this,arguments)}}()}),[q,J,W,m,v,c,i]),pe=function(e){var t=e.errors,n=e.dirty,r=e.isSubmitted,a=e.touched,o=e.isValid,i=e.submitCount;h.current={},t||(b.current={}),a||(g.current={}),o||(j.current=new Set,w.current=new Set,x.current=!0),n||(O.current=new Set,T.current=!1),r||(A.current=!1),i||(P.current=0),C.current={},y.current={},E.current=new Set,I.current=!1};Object(a.useEffect)((function(){return function(){k.current=!0,h.current&&Object.values(h.current).forEach((function(e){return le(e,!0)}))}}),[le]),W||(x.current=j.current.size>=w.current.size&&yt(b.current));var he={dirty:T.current,dirtyFields:O.current,isSubmitted:A.current,submitCount:P.current,touched:g.current,isSubmitting:L.current,isValid:z?A.current&&yt(b.current):x.current},ve={triggerValidation:ie,setValue:Object(a.useCallback)((function(e,t,n){var r=!1,a=qe(e);(a?e:[e]).forEach((function(e){var n=Lt(e);r=!(!re(n?e:Object.keys(e)[0],n?t:Object.values(e)[0])&&!a)||ce(e)})),(r||a)&&J(),(n||a&&t)&&ie(a?void 0:e)}),[J,re,ie]),register:Object(a.useCallback)((function(e,t){if(!V)if(Lt(e))de({name:e},t);else{if(!(Ye(e)&&"name"in e))return function(t){return t&&de(t,e)};de(e,t)}}),[S.current,C.current]),unregister:Object(a.useCallback)((function(e){yt(h.current)||(qe(e)?e:[e]).forEach((function(e){return le(h.current[e],!0)}))}),[]),getValues:Object(a.useCallback)((function(e){var t=Nt(h.current),n=yt(t)?S.current:t;return e&&e.nest?dt(n):n}),[]),formState:H?new Proxy(he,{get:function(e,t){return t in e?(Y.current[t]=!0,e[t]):{}}}):he},be=Object.assign(Object.assign(Object.assign({removeFieldEventListener:se,reRender:J},W?{validateSchemaIsValid:ue}:{}),{mode:{isOnBlur:F,isOnSubmit:z,isOnChange:G},reValidateMode:{isReValidateOnBlur:$,isReValidateOnSubmit:X},errorsRef:b,touchedFieldsRef:g,fieldsRef:h,isWatchAllRef:I,watchFieldsRef:E,resetFieldArrayFunctionRef:M,fieldArrayDefaultValues:y,validFieldsRef:j,dirtyFieldsRef:O,fieldsWithValidationRef:w,fieldArrayNamesRef:_,isDirtyRef:T,readFormStateRef:Y,defaultValuesRef:S}),ve);return Object.assign({watch:function(e,t){var n=Ve(t)?Ve(S.current)?{}:S.current:t,r=Nt(h.current,e),a=E.current;if(yt(n)||(Y.current.dirty=!0),Lt(e))return $t(r,e,a,n);if(qe(e))return e.reduce((function(e,t){return Object.assign(Object.assign({},e),Object(Fe.a)({},t,$t(r,t,a,n)))}),{});I.current=!0;var o=!yt(r)&&r||n;return e&&e.nest?dt(o):o},control:be,handleSubmit:me,reset:Object(a.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(q)for(var n=0,r=Object.values(h.current);n<r.length;n++){var a=r[n];if(a){var o=a.ref,i=a.options,c=an(o)&&qe(i)?i[0].ref:o;if(Ke(c))try{c.closest("form").reset();break}catch(u){}}}e&&(S.current=e),Object.values(M.current).forEach((function(e){return Ut(e)&&e()})),pe(t),J()}),[]),clearError:Object(a.useCallback)((function(e){Ve(e)?b.current={}:wt(b.current,qe(e)?e:[e]),J()}),[]),setError:Object(a.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0;Lt(e)?fe(Object.assign({name:e},Ye(t)?{types:t,type:""}:{type:t,message:n})):qe(e)&&(e.forEach((function(e){return fe(Object.assign(Object.assign({},e),{preventRender:!0}))})),J())}),[]),errors:b.current},ve)}Object(a.createContext)(null);function cn(e,t,n,r,a,o,i){try{var c=e[o](i),u=c.value}catch(s){return void n(s)}c.done?t(u):Promise.resolve(u).then(r,a)}function un(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){cn(o,r,a,i,c,"next",e)}function c(e){cn(o,r,a,i,c,"throw",e)}i(void 0)}))}}var sn=function(e){var t=e.onSignup,n=e.switchTab,r=on(),c=r.handleSubmit,u=r.register,s=r.watch,f=r.setError,d=r.errors,p=r.formState,h=s("password"),v=Object(a.useCallback)(function(){var e=un(l.a.mark((function e(n){var r,a,i,c,u,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.email,a=n.username,i=n.password,e.prev=1,e.next=4,m.auth().createUserWithEmailAndPassword(r,i);case 4:return c=e.sent,u=c.user,s={username:a,signupDate:Date.now()},e.next=9,m.firestore().collection("users").doc(u.uid).set(s);case 9:t(Object.assign({uid:u.uid},s,{firebaseUser:u})),e.next=24;break;case 12:e.prev=12,e.t0=e.catch(1),e.t1=e.t0.code,e.next="auth/weak-password"===e.t1?17:"auth/email-already-in-use"===e.t1?19:"auth/invalid-email"===e.t1?21:23;break;case 17:return f("password","weakPassword",o.a.createElement(H,{id:"Password is too weak"})),e.abrupt("break",24);case 19:return f("email","alreadyExists",o.a.createElement(H,{id:"Email address already in use"})),e.abrupt("break",24);case 21:return f("email","invalid",o.a.createElement(H,{id:"Invalid email address"})),e.abrupt("break",24);case 23:return e.abrupt("return");case 24:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),[t,f]);return o.a.createElement(i,{as:"form",onSubmit:c(v),css:{flex:"1",gap:3}},o.a.createElement(i,{css:{gap:3,overflow:"auto",flex:"1"}},o.a.createElement(i,{css:{gap:2}},o.a.createElement("label",null,o.a.createElement(H,{id:"Email address"})),o.a.createElement(Ne,{type:"email",name:"email",ref:u({required:o.a.createElement(H,{id:"Email address is required"})})}),d.email&&o.a.createElement(xe,null,d.email.message)),o.a.createElement(i,{css:{gap:2}},o.a.createElement("label",null,o.a.createElement(H,{id:"Username"})),o.a.createElement(Ne,{name:"username",ref:u({required:o.a.createElement(H,{id:"Username is required"})})}),d.username&&o.a.createElement(xe,null,d.username.message)),o.a.createElement(i,{css:{gap:2}},o.a.createElement("label",null,o.a.createElement(H,{id:"Password"})),o.a.createElement(Ne,{type:"password",name:"password",ref:u({required:o.a.createElement(H,{id:"Password is required"})})}),d.password&&o.a.createElement(xe,null,d.password.message)),o.a.createElement(i,{css:{gap:2}},o.a.createElement("label",null,o.a.createElement(H,{id:"Confirm password"})),o.a.createElement(Ne,{type:"password",name:"passwordConfirm",ref:u({required:"Password is required",validate:function(e){return e===h||o.a.createElement(H,{id:"Passwords must match"})}})}),d.passwordConfirm&&o.a.createElement(xe,null,d.passwordConfirm.message))),o.a.createElement(ve,{disabled:p.isSubmitting,type:"submit"},o.a.createElement(H,{id:"Sign me up !"})),o.a.createElement(i,{css:{alignItems:"center"}},o.a.createElement(Ie,{onClick:n},o.a.createElement(H,{id:"I already have an account"}))))},ln=function(e){var t=e.onSignin,n=e.switchTab,r=on(),c=r.handleSubmit,u=r.register,s=r.setError,f=r.errors,d=r.formState,p=Object(a.useCallback)(function(){var e=un(l.a.mark((function e(n){var r,a,i,c,u,f;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.email,a=n.password,e.prev=1,e.next=4,m.auth().signInWithEmailAndPassword(r,a);case 4:return i=e.sent,c=i.user,e.next=8,m.firestore().collection("users").doc(c.uid).get();case 8:u=e.sent,f=u.data(),t(Object.assign({uid:c.uid},f,{firebaseUser:c})),e.next=23;break;case 13:e.prev=13,e.t0=e.catch(1),e.t1=e.t0.code,e.next="auth/invalid-email"===e.t1?18:"auth/user-not-found"===e.t1?18:"auth/user-disabled"===e.t1?18:"auth/wrong-password"===e.t1?20:22;break;case 18:return s("email","invalid",o.a.createElement(H,{id:"Unknown email address"})),e.abrupt("break",23);case 20:return s("password","mismatch",o.a.createElement(H,{id:"Incorrect password"})),e.abrupt("break",23);case 22:return e.abrupt("return");case 23:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}(),[t,s]);return o.a.createElement(i,{as:"form",onSubmit:c(p),css:{flex:"1",gap:3}},o.a.createElement(i,{css:{gap:3,overflow:"auto",flex:"1"}},o.a.createElement(i,{css:{gap:2}},o.a.createElement("label",null,o.a.createElement(H,{id:"Email address"})),o.a.createElement(Ne,{type:"email",name:"email",ref:u({required:o.a.createElement(H,{id:"Email address is required"})})}),f.email&&o.a.createElement(xe,null,f.email.message)),o.a.createElement(i,{css:{gap:2}},o.a.createElement("label",null,o.a.createElement(H,{id:"Password"})),o.a.createElement(Ne,{type:"password",name:"password",ref:u({required:o.a.createElement(H,{id:"Password is required"})})}),f.password&&o.a.createElement(xe,null,f.password.message))),o.a.createElement(ve,{type:"submit",disabled:d.isSubmitting},o.a.createElement(H,{id:"Sign me in !"})),o.a.createElement(i,{css:{alignItems:"center"}},o.a.createElement(Ie,{onClick:n},o.a.createElement(H,{id:"I don't have an account"}))))},fn=function(e){var t=e.deferred,n=Object(a.useContext)(v),r=Object(a.useState)("signup"),i=r[0],c=r[1],s=function(e){t.resolve(e),n(o.a.createElement(H,{id:"Logged in as {username}",values:{username:e.username}}))};return o.a.createElement(Oe,{title:"signup"===i?o.a.createElement(Se,null,o.a.createElement(H,{id:"Create your account"})):o.a.createElement(Se,null,o.a.createElement(H,{id:"Connect to your account"})),onClose:function(){return t.reject(u.DIALOG_CLOSED_REASON)},css:{gap:3}},"signup"===i?o.a.createElement(sn,{onSignup:s,switchTab:function(){return c("signin")}}):o.a.createElement(ln,{onSignin:s,switchTab:function(){return c("signup")}}))},dn=n("3TQf");function mn(){var e=Object(a.useContext)(_.a);return Object(B.f)(e),e}function pn(e){var t=0;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return hn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hn(e,t)}(e)))return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}function hn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function vn(e,t,n,r,a,o,i){try{var c=e[o](i),u=c.value}catch(s){return void n(s)}c.done?t(u):Promise.resolve(u).then(r,a)}function bn(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){vn(o,r,a,i,c,"next",e)}function c(e){vn(o,r,a,i,c,"throw",e)}i(void 0)}))}}var gn=function(e){var t=e.currentUser,n=e.onClose,r=Object(a.useContext)(w).updateEmail,c=Object(a.useContext)(v),u=on(),s=u.handleSubmit,f=u.register,d=u.setError,m=u.errors,p=u.formState,h=Object(a.useCallback)(function(){var e=bn(l.a.mark((function e(a){var i,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.password,u=a.newEmail,e.prev=1,e.next=4,r(t,i,u);case 4:c(o.a.createElement(H,{id:"Email address updated sucessfuly"})),n(),e.next=21;break;case 8:e.prev=8,e.t0=e.catch(1),e.t1=e.t0.code,e.next="auth/email-already-in-use"===e.t1?13:"auth/invalid-email"===e.t1?15:"auth/wrong-password"===e.t1?17:19;break;case 13:return d("newEmail","alreadyExists",o.a.createElement(H,{id:"Email address already in use"})),e.abrupt("break",21);case 15:return d("newEmail","invalid",o.a.createElement(H,{id:"Invalid email address"})),e.abrupt("break",21);case 17:return d("password","mismatch",o.a.createElement(H,{id:"Incorrect password"})),e.abrupt("break",21);case 19:throw c(o.a.createElement(H,{id:"An error occured, please retry later"})),e.t0;case 21:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),[t,r,d,n,c]);return o.a.createElement(i,{as:"form",onSubmit:s(h),css:{flex:"1",gap:4}},o.a.createElement(i,{css:{gap:3,overflow:"auto",flex:"1"}},o.a.createElement(i,{css:{gap:2}},o.a.createElement("label",null,o.a.createElement(H,{id:"Password"})),o.a.createElement(Ne,{type:"password",name:"password",ref:f({required:o.a.createElement(H,{id:"Password is required"})})}),m.password&&o.a.createElement(xe,null,m.password.message)),o.a.createElement(i,{css:{gap:2}},o.a.createElement("label",null,o.a.createElement(H,{id:"New email address"})),o.a.createElement(Ne,{type:"email",name:"newEmail",ref:f({required:o.a.createElement(H,{id:"Email address is required"})})}),m.newEmail&&o.a.createElement(xe,null,m.newEmail.message))),o.a.createElement(i,{css:{gap:3}},o.a.createElement(ve,{disabled:p.isSubmitting,type:"submit"},o.a.createElement(H,{id:"Change email address"})),o.a.createElement(i,{css:{alignItems:"center"}},o.a.createElement(Ie,{onClick:n},o.a.createElement(H,{id:"Back"})))))},yn=function(e){var t=e.currentUser,n=e.onClose,r=Object(a.useContext)(w).updateUsername,c=Object(a.useContext)(v),u=on(),s=u.handleSubmit,f=u.register,d=u.errors,m=u.formState,p=Object(a.useCallback)(function(){var e=bn(l.a.mark((function e(a){var i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.newUsername,e.prev=1,e.next=4,r(t,i);case 4:c(o.a.createElement(H,{id:"Username updated sucessfuly"})),n(),e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(1),c(o.a.createElement(H,{id:"An error occured, please retry later"})),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),[t,r,n,c]);return o.a.createElement(i,{as:"form",onSubmit:s(p),css:{flex:"1",gap:4}},o.a.createElement(i,{css:{gap:3,overflow:"auto",flex:"1"}},o.a.createElement(i,{css:{gap:2}},o.a.createElement("label",null,o.a.createElement(H,{id:"New username"})),o.a.createElement(Ne,{type:"text",name:"newUsername",ref:f({required:o.a.createElement(H,{id:"Username is required"})})}),d.newUsername&&o.a.createElement(xe,null,d.newUsername.message))),o.a.createElement(i,{css:{gap:3}},o.a.createElement(ve,{disabled:m.isSubmitting,type:"submit"},o.a.createElement(H,{id:"Change username"})),o.a.createElement(i,{css:{alignItems:"center"}},o.a.createElement(Ie,{onClick:n},o.a.createElement(H,{id:"Back"})))))},En=function(e){var t=e.currentUser,n=e.onClose,r=Object(a.useContext)(w).updateUsername,c=Object(a.useContext)(v),u=on(),s=u.handleSubmit,f=u.register,d=u.watch,m=u.setError,p=u.errors,h=u.formState,b=d("newPassword"),g=Object(a.useCallback)(function(){var e=bn(l.a.mark((function e(a){var i,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.password,u=a.newPassword,e.prev=1,e.next=4,r(t,i,u);case 4:c(o.a.createElement(H,{id:"Password changed sucessfuly"})),n(),e.next=19;break;case 8:e.prev=8,e.t0=e.catch(1),e.t1=e.t0.code,e.next="auth/weak-password"===e.t1?13:"auth/wrong-password"===e.t1?15:17;break;case 13:return m("newPassword","weakPassword",o.a.createElement(H,{id:"Password is too weak"})),e.abrupt("break",19);case 15:return m("password","mismatch",o.a.createElement(H,{id:"Incorrect password"})),e.abrupt("break",19);case 17:return c(o.a.createElement(H,{id:"An error occured, please retry later"})),e.abrupt("return");case 19:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),[t,r,n,m,c]);return o.a.createElement(i,{as:"form",onSubmit:s(g),css:{flex:"1",gap:4}},o.a.createElement(i,{css:{gap:3,overflow:"auto",flex:"1"}},o.a.createElement(i,{css:{gap:2}},o.a.createElement("label",null,o.a.createElement(H,{id:"Current password"})),o.a.createElement(Ne,{type:"password",name:"password",ref:f({required:o.a.createElement(H,{id:"Password is required"})})}),p.password&&o.a.createElement(xe,null,p.password.message)),o.a.createElement(i,{css:{gap:2}},o.a.createElement("label",null,o.a.createElement(H,{id:"New password"})),o.a.createElement(Ne,{type:"password",name:"newPassword",ref:f({required:o.a.createElement(H,{id:"Password is required"})})}),p.newPassword&&o.a.createElement(xe,null,p.newPassword.message)),o.a.createElement(i,{css:{gap:2}},o.a.createElement("label",null,o.a.createElement(H,{id:"Confirm new password"})),o.a.createElement(Ne,{type:"password",name:"newPasswordConfirm",ref:f({required:"Password is required",validate:function(e){return e===b||o.a.createElement(H,{id:"Passwords must match"})}})}),p.newPasswordConfirm&&o.a.createElement(xe,null,p.newPasswordConfirm.message))),o.a.createElement(i,{css:{gap:3}},o.a.createElement(ve,{disabled:h.isSubmitting,type:"submit"},o.a.createElement(H,{id:"Change password"})),o.a.createElement(i,{css:{alignItems:"center"}},o.a.createElement(Ie,{onClick:n},o.a.createElement(H,{id:"Back"})))))},On=function(e){var t=e.uid,n=e.deferred,r=mn(),c=Object(a.useContext)(v),s=Object(a.useContext)(dn.LanguageContext).language,f=Object(a.useContext)(J).completedTangrams,d=Object(a.useContext)(w),p=d.currentUser,h=d.usersMetadata[t],b=h.username,g=h.signupDate,y=Object(a.useState)(!1),E=y[0],O=y[1],j=Object(a.useState)(!1),x=j[0],C=j[1],S=Object(a.useState)(!1),k=S[0],I=S[1],T=Object(a.useContext)(A).approvedTangrams,R=Object(a.useMemo)((function(){for(var e,n=0,r=0,a=pn(T);!(e=a()).done;){var o=e.value;o.uid===t&&(n+=o.claps||0,r++)}return{claps:n,completed:f[t]?Object.keys(f[t]).length:0,created:r}}),[f,T,t]),P=R.claps,L=R.completed,N=R.created,M=function(){var e=bn(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm(r.formatMessage({id:"Are you sure you want to log out?"}))){e.next=5;break}return e.next=3,m.auth().signOut();case 3:n.reject(u.DIALOG_CLOSED_REASON),c(o.a.createElement(H,{id:"Logged out"}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return o.a.createElement(Oe,{onClose:function(){return n.reject(u.DIALOG_CLOSED_REASON)},css:{flex:"1",minWidth:"268px",overflow:"auto",pt:4,mt:-4,gap:3}},E?o.a.createElement(gn,{currentUser:p,onClose:function(){return O(!1)}}):x?o.a.createElement(yn,{currentUser:p,onClose:function(){return C(!1)}}):k?o.a.createElement(En,{currentUser:p,onClose:function(){return I(!1)}}):o.a.createElement(i,{css:{gap:4}},o.a.createElement(i,{css:{gap:3,alignItems:"center"}},o.a.createElement(ge,{uid:t,size:86,css:{}}),o.a.createElement(Se,null,b),o.a.createElement(i,{css:{gap:2,fontSize:2,alignItems:"center"}},p&&t===p.uid&&o.a.createElement(we.a,{css:{fontSize:2}},p.firebaseUser.email),o.a.createElement(we.a,{css:{fontSize:2}},o.a.createElement(H,{id:"Joined {signupDate}",values:{signupDate:new Intl.DateTimeFormat(s).format(g)}})),o.a.createElement(we.a,null,o.a.createElement(H,{id:"Completed {completed}/{total} tangrams",values:{completed:L,total:T.length}})),o.a.createElement(we.a,null,o.a.createElement(H,{id:"Created {created} tangrams",values:{created:N}})),o.a.createElement(we.a,null,o.a.createElement(H,{id:"Earned {claps} 👏",values:{claps:P}})))),o.a.createElement(i,{css:{gap:3,alignItems:"center"}},o.a.createElement(Ie,{onClick:function(){return O(!0)}},o.a.createElement(H,{id:"Change email address"})),o.a.createElement(Ie,{onClick:function(){return C(!0)}},o.a.createElement(H,{id:"Change username"})),o.a.createElement(Ie,{onClick:function(){return I(!0)}},o.a.createElement(H,{id:"Change password"}))),o.a.createElement(he,{onClick:M},o.a.createElement(H,{id:"Log out"}))))},wn=["💪","🔥","😱","😎","🎉","🥇","🚀","👌","👍","😵"],jn=function(){return wn[Math.floor(Math.random()*wn.length)]};function xn(e,t,n,r,a,o,i){try{var c=e[o](i),u=c.value}catch(s){return void n(s)}c.done?t(u):Promise.resolve(u).then(r,a)}function Cn(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){xn(o,r,a,i,c,"next",e)}function c(e){xn(o,r,a,i,c,"throw",e)}i(void 0)}))}}var Sn=function(e){var t=e.tangram,n=e.deferred;return o.a.createElement(Oe,{onClose:function(){return n.reject(u.DIALOG_CLOSED_REASON)},css:{gap:3,minWidth:"268px"}},o.a.createElement(i,{css:{gap:3,overflow:"auto",flex:"1",alignItems:"center"}},o.a.createElement(ye,{selected:!0,tangram:t}),o.a.createElement(we.a,null,o.a.createElement(H,{id:"Earned {claps} 👏",values:{claps:t.claps||0}}))))},kn=function(e){var t=e.tangram,n=e.deferred,r=mn(),c=Object(a.useContext)(v),s=Object(a.useContext)(w).currentUser,f=Object(a.useState)(Object.assign({},t)),d=f[0],p=f[1],h=s&&!t.id,b=on({defaultValues:Object(a.useMemo)((function(){return{path:t.path,category:t.category,emoji:"digits"!==t.category&&"letters"!==t.category?t.emoji:jn(),letterIndex:"letters"===t.category?u.LETTERS.indexOf(t.emoji):void 0,digitIndex:"digits"===t.category?u.DIGITS.indexOf(t.emoji):void 0}}),[t])}),g=b.handleSubmit,y=b.register,E=b.watch,O=b.errors,j=b.setError,x=b.clearError,C=E(),S=C.path,k=C.category,I=C.emoji,A=C.letterIndex,T=C.digitIndex;Object(a.useEffect)((function(){try{var e=function(e){var t=te.a.project.importSVG('<path d="'+e+'" />',{applyMatrix:!0,insert:!1}),n={path:t.exportSVG().getAttribute("d"),edges:t.curves.length,height:Math.round(t.bounds.height),width:Math.round(t.bounds.width),length:Math.round(t.length)};if(t.remove(),n.edges<3||n.edges>23)throw new Error("Invalid path");return n}(S);p((function(t){return Object.assign({},t,{},e)})),x("path")}catch(t){j("path","invalid",o.a.createElement(H,{id:"Invalid path"}))}}),[S,j,x]),Object(a.useEffect)((function(){var e="letters"===k?u.LETTERS[A]:"digits"===k?u.DIGITS[T]:I||jn();p((function(t){return Object.assign({},t,{emoji:e})}))}),[k,I,A,T]),Object(a.useEffect)((function(){p((function(e){return Object.assign({},e,{category:k})}))}),[k]);var R=function(){var e=Cn(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm(r.formatMessage({id:"Are you sure you want to delete this tangram ?"}))){e.next=5;break}return e.next=3,m.firestore().collection("tangrams").doc(t.id).delete();case 3:c(o.a.createElement(H,{id:"Tangram sucessfuly deleted"})),n.resolve();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Cn(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h){e.next=6;break}return e.next=3,m.firestore().collection("tangrams").add(Object.assign({},d,{uid:s.uid,approved:!1}));case 3:c(o.a.createElement(H,{id:"Tangram submitted for review"})),e.next=9;break;case 6:return e.next=8,m.firestore().collection("tangrams").doc(t.id).update(d);case 8:c(o.a.createElement(H,{id:"Tangram successfuly modified"}));case 9:n.resolve();case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return o.a.createElement(Oe,{title:o.a.createElement(Se,null,h?o.a.createElement(H,{id:"Submit your tangram"}):o.a.createElement(H,{id:"Edit your tangram"})),onClose:function(){return n.reject(u.DIALOG_CLOSED_REASON)},as:"form",onSubmit:g(P),css:{gap:3,minWidth:"268px"}},o.a.createElement(i,{css:{gap:3,overflow:"auto",flex:"1"}},o.a.createElement(ye,{selected:!0,completed:!0,tangram:d,css:{alignSelf:"center"}}),t.approved&&o.a.createElement(we.a,{css:{alignSelf:"center"}},o.a.createElement(H,{id:"Earned {claps} 👏",values:{claps:t.claps||0}})),s&&s.isAdmin&&o.a.createElement(o.a.Fragment,null,o.a.createElement(i,{css:{gap:2}},o.a.createElement("label",null,o.a.createElement(H,{id:"Path"})),o.a.createElement(Ne,{as:"textarea",name:"path",ref:y}),O.path&&o.a.createElement(xe,null,O.path.message))),o.a.createElement(i,{css:{gap:2}},o.a.createElement("label",null,o.a.createElement(H,{id:"Category"})),o.a.createElement(Ne,{as:"select",name:"category",ref:y},u.CATEGORIES.map((function(e){return o.a.createElement("option",{key:e,value:e},o.a.createElement(H,{id:e}))})))),"digits"===k?o.a.createElement(i,{css:{gap:2}},o.a.createElement("label",null,o.a.createElement(H,{id:"Victory emoji"})),o.a.createElement(Ne,{as:"select",name:"digitIndex",ref:y},u.DIGITS.map((function(e,t){return o.a.createElement("option",{key:t,value:t},e)})))):"letters"===k?o.a.createElement(i,{css:{gap:2}},o.a.createElement("label",null,o.a.createElement(H,{id:"Victory emoji"})),o.a.createElement(Ne,{as:"select",name:"letterIndex",ref:y},u.LETTERS.map((function(e,t){return o.a.createElement("option",{key:t,value:t},e)})))):o.a.createElement(i,{css:{gap:2}},o.a.createElement("label",null,o.a.createElement(H,{id:"Victory emoji"})),o.a.createElement(Ne,{name:"emoji",ref:y}),o.a.createElement(Ce,null,o.a.createElement(H,{id:"Leave empty for random emoji"})))),o.a.createElement(ve,{type:"submit"},h?o.a.createElement(H,{id:"Submit !"}):o.a.createElement(H,{id:"Edit !"})),!h&&o.a.createElement(i,{css:{alignItems:"center"}},o.a.createElement(Ie,{onClick:R},o.a.createElement(H,{id:"Or delete tangram"}))))},In=function(e){var t=e.tangram,n=e.deferred,r=Object(a.useContext)(w).currentUser;return r&&(r.isAdmin||!t.id||t.uid===r.uid)?o.a.createElement(kn,{tangram:t,deferred:n}):o.a.createElement(Sn,{tangram:t,deferred:n})},An=function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))},Tn=Object(a.createContext)(),Rn=function(e){var t=e.children,n=Object(a.useState)(null),r=n[0],i=n[1],c=Object(a.useState)(null),u=c[0],s=c[1],l=Object(a.useState)(null),f=l[0],d=l[1],m=Object(a.useState)(null),p=m[0],h=m[1],v=Object(a.useState)(null),b=v[0],g=v[1],y=Object(a.useState)(null),E=y[0],O=y[1],j=Object(a.useContext)(w).initialized,x=Object(a.useContext)(J),C=x.playlist,S=x.startRandomPlaylist,k=x.initialized,I=Object(a.useContext)(A),T=I.initialized,R=I.approvedTangrams,P=Object(a.useState)(!1),L=P[0],N=P[1],M=Object(a.useCallback)((function(e){var t=new An;return i({uid:e,deferred:t}),t.promise.finally((function(){return i(null)}))}),[]),D=Object(a.useCallback)((function(){var e=new An;return s(e),e.promise.finally((function(){return s(null)}))}),[]),_=Object(a.useCallback)((function(){var e=new An;return d(e),e.promise.finally((function(){return d(null)}))}),[]),U=Object(a.useCallback)((function(){var e=new An;return h(e),e.promise.finally((function(){return h(null)}))}),[]),B=Object(a.useCallback)((function(e){var t=new An;return g({deferred:t,tangram:e}),t.promise.finally((function(){return g(null)}))}),[]);Object(a.useEffect)((function(){if(T&&k&&j&&!L){var e=!1;if(!C&&window.location.search){var t=new URLSearchParams(window.location.search);if(t.has("tangrams")){var n=t.get("tangrams").split(","),r=t.get("uid"),a=R.filter((function(e){return n.includes(e.id)}));if(a.length){e=!0,window.history.replaceState({},document.title,window.location.origin);var o=new An;O({deferred:o,tangrams:a,uid:r}),o.promise.catch((function(e){if(e instanceof Error)throw e;S()})).finally((function(){return O(null)}))}}}e||S(),N(!0)}}),[T,k,j,L]);var F=Object(a.useMemo)((function(){return{showProfile:M,showLeaderboard:D,showGallery:_,showLogin:U,showTangram:B}}),[M,D,_,U,B]);return o.a.createElement(Tn.Provider,{value:F},t,p&&o.a.createElement(fn,{deferred:p}),f&&o.a.createElement(Le,{deferred:f}),b&&o.a.createElement(In,b),r&&o.a.createElement(On,r),u&&o.a.createElement(_e,{deferred:u}),E&&o.a.createElement(Ae,E))},Pn=Object(a.createContext)([!0,function(){}]),Ln=function(){return Object(a.useContext)(Pn)},Nn=function(e){var t=e.children,n=Object(a.useState)(!0),r=n[0],i=n[1];Object(a.useEffect)((function(){var e=window.localStorage.getItem("showBackgroundPattern");if(null!==e)try{var t=JSON.parse(e);i(!!JSON.parse(t))}catch(n){window.localStorage.removeItem("showBackgroundPattern")}else i(!0)}),[]);var c=Object(a.useCallback)((function(){var e=!r;i(e),window.localStorage.setItem("showBackgroundPattern",JSON.stringify(e))}),[r]),u=Object(a.useMemo)((function(){return[r,c]}),[r,c]);return o.a.createElement(Pn.Provider,{value:u},t)},Mn=n("expU");function Dn(e){return function(e){if(Array.isArray(e))return _n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return _n(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _n(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Un=Object(a.createContext)(),Bn=function(e){var t=e.icon;return o.a.createElement(we.a,{css:{position:"relative",top:"4px"}},o.a.createElement(be,{css:{size:"20px",boxShadow:"none"}},o.a.createElement(i,{as:t,css:{m:"auto",size:"16px"}})))},Fn=function(e){var t=e.deferred,n=e.tip.Content;return o.a.createElement(Oe,{onClose:function(){return t.reject(u.DIALOG_CLOSED_REASON)},title:o.a.createElement(Se,null,o.a.createElement(H,{id:"Random tip"})),css:{gap:3,maxWidth:"300px"}},o.a.createElement(n,null),o.a.createElement(ve,{onClick:t.resolve},o.a.createElement(H,{id:"Got it!"})))},zn={settingsIcon:o.a.createElement(Bn,{icon:Ee.h}),accountIcon:o.a.createElement(Bn,{icon:Ee.l}),menuIcon:o.a.createElement(Bn,{icon:Ee.d}),galleryIcon:o.a.createElement(Bn,{icon:Ee.c}),shareIcon:o.a.createElement(Bn,{icon:Ee.i}),createIcon:o.a.createElement(Bn,{icon:Ee.g})},Gn=[{id:"menu",Content:function(){return o.a.createElement(H,{id:"tips.menu",values:zn})}},{id:"gallery",Content:function(){return o.a.createElement(H,{id:"tips.gallery",values:zn})}},{id:"difficulty",predicate:function(e){return e.showBackgroundPattern},Content:function(){return o.a.createElement(H,{id:"tips.difficulty",values:zn})}},{id:"theme",predicate:function(e){return"dark"!==e.themeKey},Content:function(){return o.a.createElement(H,{id:"tips.theme",values:zn})}},{id:"sound",predicate:function(e){return e.soundEnabled},Content:function(){return o.a.createElement(H,{id:"tips.sound",values:zn})}},{id:"account",predicate:function(e){return!e.currentUser},Content:function(){return o.a.createElement(H,{id:"tips.account",values:zn})}},{id:"claps",predicate:function(e){return e.currentUser},Content:function(){return o.a.createElement(H,{id:"tips.claps",values:zn})}},{id:"create",predicate:function(e){var t=e.currentUser,n=e.completedTangrams;return t&&n[t.uid]&&Object.values(n[t.uid]).length>=10},Content:function(){return o.a.createElement(H,{id:"tips.create",values:zn})}},{id:"share",Content:function(){return o.a.createElement(H,{id:"tips.share",values:zn})}},{id:"card",Content:function(){return o.a.createElement(H,{id:"tips.card",values:zn})}}],Vn=function(e){var t=e.children,n=Object(a.useState)(null),r=n[0],i=n[1],c=Object(a.useContext)(de).soundEnabled,u=Object(Mn.useSwitchTheme)()[0],s=Ln()[0],l=Object(a.useContext)(w).currentUser,f=Object(a.useContext)(J).completedTangrams,d=Object(a.useCallback)((function(){var e=function(){var e=[],t=localStorage.getItem("seenTips");if(t)try{var n=JSON.parse(t);if(!Array.isArray(n))throw new Error("Invalid data for seenTips : "+n);e=n}catch(r){localStorage.removeItem("seenTips")}return e}(),t=Gn.filter((function(t){var n=t.id,r=t.predicate,a=void 0===r?function(){return!0}:r;return!e.includes(n)&&a({themeKey:u,showBackgroundPattern:s,currentUser:l,completedTangrams:f,soundEnabled:c})}));if(t.length){var n=t[0],r=new An;return i({deferred:r,tip:n}),r.promise.finally((function(){localStorage.setItem("seenTips",JSON.stringify([].concat(Dn(e),[n.id]))),i(null)}))}}),[f,u,l,s,c]);return o.a.createElement(Un.Provider,{value:d},t,r&&o.a.createElement(Fn,r))},Wn=function(e,t){var n=new window.ClipperLib.ClipperOffset,r=new window.ClipperLib.Paths;if(n.AddPaths([e.map((function(e){return{X:e.x,Y:e.y}}))],window.ClipperLib.JoinType.jtMiter,window.ClipperLib.EndType.etClosedPolygon),n.MiterLimit=0,n.ArcTolerance=0,n.Execute(r,t),r.length)return r[0].map((function(e){var t=e.X,n=e.Y;return new te.a.Point(t,n)}))},qn=function(e,t){var n=[new te.a.Point(0,0),new te.a.Point(2*e,0),new te.a.Point(e,e)],r=new te.a.Path({name:"display",segments:n,closed:!0}),a=new te.a.Path({name:"collision",segments:Wn(n,-u.COLLISION_MARGIN),closed:!0}),o=new te.a.Path({name:"insetBorder",segments:Wn(n,-u.INSET_BORDER),closed:!0,strokeWidth:u.INSET_BORDER}),i=function(e){var t=e[1].getDistance(e[2]),n=e[0].getDistance(e[2]),r=e[0].getDistance(e[1]),a=t+n+r,o=(e[0].x*t+e[1].x*n+e[2].x*r)/a,i=(e[0].y*t+e[1].y*n+e[2].y*r)/a;return new te.a.Point(o,i)}(n),c=new te.a.Point(te.a.view.center.x+i.x-r.bounds.width/2,te.a.view.center.y+i.y-r.bounds.height/2);return new te.a.Group({children:[r,a,o],position:te.a.view.center,pivot:c,data:{id:t,collisions:new Set},applyMatrix:!0})},Hn=function(e,t){var n=[new te.a.Point(0,0),new te.a.Point(2*e,0),new te.a.Point(3*e,e),new te.a.Point(e,e)],r=new te.a.Path({name:"display",segments:n,closed:!0}),a=new te.a.Path({name:"collision",segments:Wn(n,-u.COLLISION_MARGIN),closed:!0,strokeWidth:u.COLLISION_MARGIN}),o=new te.a.Path({name:"insetBorder",segments:Wn(n,-u.INSET_BORDER),closed:!0,strokeWidth:u.INSET_BORDER});return new te.a.Group({children:[r,a,o],position:te.a.view.center,data:{id:t,collisions:new Set},applyMatrix:!0})};function Yn(e){var t=0;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return Kn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kn(e,t)}(e)))return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}function Kn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var $n=function(e,t,n){var r=n.x-t.x,a=n.y-t.y,o=r*r+a*a,i=(e.x-t.x)*r+(e.y-t.y)*a,c=Math.min(1,Math.max(0,i/o));return i=(n.x-t.x)*(e.y-t.y)-(n.y-t.y)*(e.x-t.x),new te.a.Point(t.x+r*c,t.y+a*c)};function Xn(e){var t=0;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return Jn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jn(e,t)}(e)))return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}function Jn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Qn=function(e,t,n){for(var r,a=Xn(t);!(r=a()).done;)for(var o,i=r.value,c=Xn(i.segments);!(o=c()).done;)for(var s,l=o.value.point,f=Xn(e.segments);!(s=f()).done;){var d=s.value.point,m=d.getDistance(l);m<n.distance&&(n.distance=m,n.shape=i,n.vector=l.subtract(d))}if(!n.vector)for(var p,h=Xn(t);!(p=h()).done;){for(var v,b=p.value,g=Xn(e.segments);!(v=g()).done;)for(var y,E=v.value.point,O=Xn(b.segments);!(y=O()).done;){var w=y.value,j=w.point,x=w.next.point,C=$n(E,j,x),S=C.getDistance(E);S<n.distance&&(n.distance=S,n.vector=C.subtract(E),n.shape=b,n.segment=[j,x],n.point=E,u.DEV&&new te.a.Path.Circle({center:C,radius:2,fillColor:"red"}).removeOn({drag:!0,move:!0}))}for(var k,I=Xn(b.segments);!(k=I()).done;)for(var A,T=k.value.point,R=Xn(e.segments);!(A=R()).done;){var P=A.value,L=P.point,N=P.next.point,M=$n(T,L,N),D=M.getDistance(T);D<n.distance&&(n.distance=D,n.vector=T.subtract(M),n.shape=e,n.segment=[L,N],u.DEV&&new te.a.Path.Circle({center:M,radius:2,fillColor:"red"}).removeOn({drag:!0,move:!0}))}}return n},Zn=function(e,t,n){if(n.segment){var r,a=n.maxDistance,o=n.segment,i=o[0],c=o[1],s=Math.atan2(c.y-i.y,c.x-i.x),l=Math.atan2(i.y-c.y,i.x-c.x);u.DEV&&new te.a.Path.Line({from:i,to:c,strokeColor:"red"}).removeOn({drag:!0,move:!0});for(var f=0,d=[s,l];f<d.length;f++)for(var m,p=d[f],h=Xn(e.segments);!(m=h()).done;){var v=m.value.point;if(v!==n.point){var b=v.add(n.vector),g=new te.a.Point(b.x+n.maxDistance*Math.cos(p),b.y+n.maxDistance*Math.sin(p)),y=new te.a.Path.Line({from:b,to:g,insert:!1});u.DEV&&new te.a.Path.Line({from:b,to:g,strokeColor:"green"}).removeOn({drag:!0,move:!0});for(var E,O=Xn(t);!(E=O()).done;)for(var w,j=E.value,x=Xn(y.getIntersections(j));!(w=x()).done;){var C=w.value.point;u.DEV&&new te.a.Path.Circle({center:C,radius:5,fillColor:"blue"}).removeOn({drag:!0,move:!0});var S=C.subtract(b).add(n.vector);S.length<n.maxDistance&&S.length<=a&&(a=S.length,r=S)}}}r&&(n.vector=r)}};function er(e){var t=0;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return tr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tr(e,t)}(e)))return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}function tr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function nr(e){var t=0;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return rr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rr(e,t)}(e)))return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}function rr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ar=function(e,t){var n=e.pivot?e.pivot.subtract(e.bounds.center):new te.a.Point;e.bounds.x<0&&(e.position.x=e.bounds.width/2+n.x),e.bounds.y<0&&(e.position.y=e.bounds.height/2+n.y),e.bounds.x+e.bounds.width>t.width/window.devicePixelRatio&&(e.position.x=t.width/window.devicePixelRatio-e.bounds.width/2+n.x),e.bounds.y+e.bounds.height>t.height/window.devicePixelRatio&&(e.position.y=t.height/window.devicePixelRatio-e.bounds.height/2+n.y)},or=function(e,t){var n=new te.a.Point(te.a.project.view.bounds.width,te.a.project.view.bounds.height).subtract(2*u.SCRAMBLE_PADDING);if(e.position=te.a.Point.random().multiply(n).add(u.SCRAMBLE_PADDING),"rh"===e.data.id){var r=45*Math.round(3*Math.random());e.rotation=r,e.data.rotation=r}else e.rotation=45*Math.round(7*Math.random())},ir=function(e,t){return t.segments.every((function(t){return e.contains(t.point)}))};function cr(e){var t=0;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return ur(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ur(e,t)}(e)))return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}function ur(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var sr=function(e,t){for(var n,r=cr(t.children);!(n=r()).done;){var a=n.value;if(a!==e){var o=e.children.collision,i=a.children.collision;o.intersects(i)||ir(o,i)||ir(i,o)?(e.data.collisions.add(a.data.id),a.data.collisions.add(e.data.id)):(e.data.collisions.delete(a.data.id),a.data.collisions.delete(e.data.id))}}for(var c,s=!0,l=cr(t.children);!(c=l()).done;){var f=c.value;f.data.collisions.size>0?(s=!1,f.children.display.opacity=u.OVERLAPING_OPACITY):f.children.display.opacity=1}return s},lr=function(e){var t=e.leftComponent,n=e.leftValue,c=e.rightComponent,u=e.rightValue,s=e.value,l=e.onChange,f=e.invertSounds,d=Object(a.useContext)(de),m=d.playToggle,p=d.soundEnabled,h=Object(a.useContext)(r.ThemeContext),v=Object(a.useMemo)((function(){return s===u?"right":"left"}),[s,u]),b=function(){f?p||m({forceSoundEnabled:!0}):m()},g=function(e){e!==v&&(l("right"===e?u:n),b())};return o.a.createElement(i,{css:{flexDirection:"row",justifyContent:"center",alignItems:"center",gap:3}},o.a.createElement(i,{css:{cursor:"pointer",flex:"1",alignItems:"flex-end"},onClick:function(){return g("left")}},t),o.a.createElement(i,{onClick:function(){l("right"===("left"===v?"right":"left")?u:n),b()},css:{cursor:"pointer",position:"relative",bg:"inputBackground",width:"40px",height:"20px",borderRadius:"99999px"}},o.a.createElement(i,{css:{position:"absolute",size:"20px",borderRadius:"99999px",bg:"dialogText",boxShadow:"0 0 0 2px "+h.colors.inputBackground,transition:"left 250ms ease-in-out"},style:{left:"left"===v?0:20}})),o.a.createElement(i,{css:{cursor:"pointer",flex:"1",alignItems:"flex-start"},onClick:function(){return g("right")}},c))},fr=function(e){var t=e.deferred,n=Object(a.useContext)(de),r=n.soundEnabled,c=n.toggleSound,s=Ln(),l=s[0],f=s[1],d=Object(a.useContext)(dn.LanguageContext),m=d.language,p=d.setLanguage,h=mn();console.log(m,dn.supportedLanguages);var v=Object(Mn.useSwitchTheme)(),b=v[0],g=v[1];return o.a.createElement(Oe,{title:o.a.createElement(Se,null,o.a.createElement(H,{id:"Settings"})),onClose:function(){return t.reject(u.DIALOG_CLOSED_REASON)},css:{gap:4,overflow:"auto",flex:"1",minWidth:"268px"}},o.a.createElement(i,{css:{gap:2}},o.a.createElement("label",null,o.a.createElement(H,{id:"Language"})),o.a.createElement(Ne,{as:"select",onChange:function(e){console.log("set",e.target.value),p(e.target.value)},value:m},dn.supportedLanguages.map((function(e){return o.a.createElement("option",{key:e,value:e},h.formatMessage({id:e}))})))),o.a.createElement(i,{css:{gap:2}},o.a.createElement("label",null,o.a.createElement(H,{id:"Difficulty"})),o.a.createElement(lr,{value:l,onChange:f,leftComponent:o.a.createElement(we.a,null,o.a.createElement(H,{id:"Easy"})),leftValue:!0,rightComponent:o.a.createElement(we.a,null,o.a.createElement(H,{id:"Hard"})),rightValue:!1})),o.a.createElement(i,{css:{gap:2}},o.a.createElement("label",null,o.a.createElement(H,{id:"Theme"})),o.a.createElement(lr,{value:b,onChange:g,leftComponent:o.a.createElement(i,{as:Ee.k,css:{size:32}}),leftValue:"light",rightComponent:o.a.createElement(i,{as:Ee.e,css:{size:32}}),rightValue:"dark"})),o.a.createElement(i,{css:{gap:2}},o.a.createElement("label",null,o.a.createElement(H,{id:"Sounds"})),o.a.createElement(lr,{invertSounds:!0,value:r,onChange:c,leftComponent:o.a.createElement(i,{as:Ee.n,css:{size:32}}),leftValue:!1,rightComponent:o.a.createElement(i,{as:Ee.m,css:{size:32}}),rightValue:!0})),o.a.createElement(he,{onClick:function(){window.confirm(h.formatMessage({id:"You are about to reset your settings and tips. Are you sure you want to proceed ?"}))&&(window.localStorage.clear(),window.location.reload(!0))}},o.a.createElement(H,{id:"Clear storage"})))},dr=Object(a.createContext)({showSettings:function(){}}),mr=function(e){var t=e.children,n=Object(a.useState)(null),r=n[0],i=n[1],c=Object(a.useCallback)((function(){var e=new An;return i(e),e.promise.finally((function(){return i(null)}))}),[]),u=Object(a.useMemo)((function(){return{showSettingsDialog:c}}),[c]);return o.a.createElement(dr.Provider,{value:u},t,r&&o.a.createElement(fr,{deferred:r}))},pr=function(){var e=Object(a.useContext)(dr).showSettingsDialog,t=Object(a.useContext)(Tn),n=t.showProfile,r=t.showLeaderboard,c=t.showGallery,s=t.showLogin,l=Object(a.useContext)(w).currentUser,f=Object(a.useState)(!1),d=f[0],m=f[1],p=Object(a.useContext)(J).requestSave,h=[o.a.createElement(be,{onClick:function(){c()}},o.a.createElement(i,{as:Ee.c,css:{m:"0 auto"}})),o.a.createElement(be,{onClick:function(){return p()}},o.a.createElement(i,{as:Ee.g,css:{m:"0 auto"}})),o.a.createElement(be,{onClick:function(){return r()}},o.a.createElement(i,{as:Ee.a,css:{m:"0 auto"}})),o.a.createElement(be,{onClick:function(){l?n(l.uid):s()}},o.a.createElement(i,{as:Ee.l,css:{m:"0 auto"}})),o.a.createElement(be,{onClick:function(){return e()}},o.a.createElement(i,{as:Ee.h,css:{m:"0 auto"}}))];return o.a.createElement(o.a.Fragment,null,o.a.createElement(i,{css:{position:"fixed",bottom:3,left:"50%",transform:"translateX(-50%)",animation:u.FADE_TRANSITION_DURATION+"ms fadeIn "+u.FADE_STAGGER_DURATION+"ms ease both"}},o.a.createElement(i,{css:{position:"relative"}},h.map((function(e,t,n){var r=((n.length%2!=0?180:157.5)+Math.ceil(t/2)*(t%2?45:-45))*Math.PI/180,a=100*Math.cos(r),c=100*Math.sin(r),u=d?{opacity:1,top:a+"px",left:c+"px"}:{opacity:0,top:"0px",left:"0px"};return o.a.createElement(i,{key:t,css:{transition:"all 100ms ease-in-out "+50*t+"ms",position:"absolute"},style:u,onClick:function(){return m(!1)}},e)})),o.a.createElement(i,{css:{zIndex:1}},o.a.createElement(be,{onClick:function(){return m(!d)}},o.a.createElement(i,{as:d?Ee.o:Ee.d,css:{m:"auto"}}))))))},hr=function(e){var t=e.emoji,n=e.onStop,c=e.onNext,s=e.onApprove,l=e.onClap,f=Object(a.useState)(!1),d=f[0],m=f[1],p=Object(a.useState)(!1),h=p[0],v=p[1],b=Object(a.useState)(!1),g=b[0],y=b[1],E=Object(a.useState)(!1),O=E[0],w=E[1],j=Object(a.useState)(1),x=j[0],C=j[1],S=Object(a.useContext)(de).playClap,k=Object(a.useState)(0),I=k[0],A=k[1],T=Object(a.useState)(),R=T[0],P=T[1],L=Object(r.useKeyframes)({0:{opacity:"0",transform:"rotate(0) scale(0)"},100:{opacity:1,transform:"rotate(1800deg) scale(1)"}}),N=Object(r.useKeyframes)({0:{transform:"rotate(0) scale(1)"},50:{transform:"rotate(5deg) scale(1.1)"},100:{transform:"rotate(0) scale(1)"}}),M=function(){l(I),A(0)};return o.a.createElement(i,{css:{position:"absolute",top:0,left:0,right:0,bottom:0,alignItems:"center",justifyContent:"center",gap:3}},h?g?o.a.createElement(o.a.Fragment,null,O?o.a.createElement(i,{key:"clap"+d,css:{fontSize:"30vmin",animation:d?"250ms "+N+" alternate":void 0},onClick:function(){d<15&&(S({playbackRate:x}),m(d+1),A(I+1),C(x+.05),clearTimeout(R),P(setTimeout(M,500)))}},"👏"):o.a.createElement(i,{key:"clapFadeInEnded",css:{fontSize:"30vmin",animation:u.FADE_TRANSITION_DURATION+"ms fadeIn ease both"},onAnimationEnd:function(){w(!0)}},"👏"),o.a.createElement(i,{css:{flexDirection:"row",gap:3,animation:u.FADE_TRANSITION_DURATION+"ms fadeIn ease both"}},s&&o.a.createElement(be,{onClick:s},o.a.createElement(i,{as:Ee.b,css:{m:"auto"}})),c?o.a.createElement(be,{onClick:c},o.a.createElement(i,{as:Ee.f,css:{m:"auto"}})):o.a.createElement(be,{onClick:n},o.a.createElement(i,{as:Ee.j,css:{m:"auto"}})))):o.a.createElement(i,{key:"emojiFadeOut",onAnimationEnd:function(){y(!0)},css:{fontSize:"30vmin",animation:u.FADE_TRANSITION_DURATION+"ms "+L+" cubic-bezier(.6,1.56,.58,.92) forwards reverse"}},t):o.a.createElement(i,{key:"emojiSpin",onAnimationEnd:function(){setTimeout((function(){return v(!0)}),1e3)},css:{fontSize:"30vmin",animation:"2000ms "+L+" cubic-bezier(.6,1.56,.58,.92) forwards"}},t))};function vr(e){var t=0;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return br(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return br(e,t)}(e)))return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}function br(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function gr(e,t,n,r,a,o,i){try{var c=e[o](i),u=c.value}catch(s){return void n(s)}c.done?t(u):Promise.resolve(u).then(r,a)}function yr(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){gr(o,r,a,i,c,"next",e)}function c(e){gr(o,r,a,i,c,"throw",e)}i(void 0)}))}}var Er=function(){var e=Object(a.useContext)(Un),t=Object(a.useContext)(A).approvedTangrams,n=Object(a.useContext)(Tn),c=n.showLogin,s=n.showTangram,f=Object(a.useContext)(de).playTangram,d=Object(a.useRef)();d.current=f;var p=Object(a.useContext)(w).currentUser;Object(a.useRef)().current=p;var h=Object(a.useContext)(r.ThemeContext),b=Object(a.useContext)(v),g=Ln()[0],y=Object(a.useContext)(J),E=y.markTangramAsComplete,O=y.saveRequestId,j=y.playlist,x=y.setPlaylist,C=Object(a.useRef)();C.current=E;var S=Object(a.useState)(0),k=S[0],I=S[1],T=Object(a.useState)(!1),R=T[0],P=T[1],L=Object(a.useRef)(),N=Object(a.useRef)(),M=Object(a.useRef)(),D=Object(a.useRef)(),_=Object(a.useRef)(),U=Object(a.useRef)(),B=Object(a.useMemo)((function(){return j&&j[k]}),[j,k]),F=function(){var e=yr(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.firestore().collection("tangrams").doc(B.id).update({approved:!0});case 2:b(o.a.createElement(H,{id:"Tangram approved"}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){I(0)}),[j]),Object(a.useEffect)((function(){if(O){if(!function(e){for(var t,n=nr(e.children);!(t=n()).done;){if(t.value.data.collisions.size>0)return!1}return!0}(M.current))return void b(o.a.createElement(H,{id:"You can't save an invalid tangram"}));var e=function(e,t){for(var n,r,a=Yn(e.children);!(r=a()).done;){var o=r.value.children.display;n=n?n.unite(o,{insert:!1}):o}n.scale(1/t),n.position=new te.a.Point(n.bounds.width/2,n.bounds.height/2);var i=n.exportSVG().getAttribute("d"),c=n.curves.length,u=Math.round(n.bounds.width),s=Math.round(n.bounds.height),l=Math.round(n.length);return n.remove(),{width:u,height:s,length:l,path:i,edges:c}}(M.current,N.current);if(23===e.edges)return void b(o.a.createElement(H,{id:"You can't save such an easy tangram"}));var n=Math.round(e.length),r=Math.round(e.width),a=Math.round(e.height);if(t.find((function(t){return t.edges===e.edges&&Math.round(t.length)===n&&Math.round(t.width)===r&&Math.round(t.height)===a})))return void b(o.a.createElement(H,{id:"This tangram already exists"}));(function(){var t=yr(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(p){t.next=3;break}return t.next=3,c();case 3:return t.next=5,s(e);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}}),[O]),Object(a.useEffect)((function(){var e=function(){if(L.current&&M.current)for(var e,t=vr(M.current.children);!(e=t()).done;){var n=e.value;ar(n,L.current)}};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),Object(a.useEffect)((function(){P(!1)}),[B]),Object(a.useLayoutEffect)((function(){var e=Date.now(),t=function(t){var n=null,r=null,a=null,o=null,i=function(e){document.activeElement===L.current&&(document.body.style.cursor="pointer")},c=function(e){document.body.style.cursor="default"},s=function(e){a=Date.now(),o=e.point,n=e.point.subtract(t.position),r=t.clone({insert:!1,deep:!0}),t.bringToFront()},l=function(e){document.body.style.cursor="move";var a=e.point.subtract(t.position).subtract(n);r.position=t.position.add(a);var o,i,c,s,l,f=r.children["display 1"],d=M.current.children.filter((function(e){return e!==t})).map((function(e){return e.children.display})),m=U.current&&_.current?_.current.children?_.current.children:[_.current]:null,p=(o=u.SNAP_DISTANCE,s=m,Qn(i=f,c=d,l={maxDistance:o,distance:o}),s&&Qn(i,s,l),Zn(i,c.filter((function(e){return e.shape!==l.shape})),l),s&&Zn(i,s,l),l.vector);p&&(r.position.x+=p.x,r.position.y+=p.y),ar(r,L.current),u.DEV&&new te.a.Path.Rectangle({rectangle:r.bounds,strokeColor:"black"}).removeOn({drag:!0,move:!0}),t.position=r.position,sr(t,M.current)},f=function(i){if(document.body.style.cursor="pointer",i.point.subtract(o).length<u.SNAP_DISTANCE&&Date.now()-a<u.CLICK_TIMEOUT&&(t.rotation+=45,"rh"===t.data.id&&(t.data.rotation+=45,180===t.data.rotation&&(t.data.rotation=0,t.scale(-1,1))),d.current(),ar(t,L.current),sr(t,M.current),a=null,o=null),n=null,r&&r.remove(),r=null,_.current&&(!1===U.current&&(_.current.position=M.current.position),function(e,t,n){for(var r,a=e,o=er(t.children);!(r=o()).done;){var i=r.value;if(i.data.collisions.size>0)return;a=a.unite(new te.a.Path({segments:Wn(i.children.display.segments.map((function(e){return e.point})),-n),closed:!0,insert:!1}),{insert:!1})}return Math.round(1e3*a.length)===Math.round(1e3*e.length)}(_.current,M.current,U.current?u.STRICT_ERROR_MARGIN:u.SOFT_ERROR_MARGIN))){C.current(B,Date.now()-e);for(var c,s=vr(M.current.children);!(c=s()).done;){c.value.data.removeListeners()}document.body.style.cursor="default",te.a.project.activeLayer.tween({opacity:0},{duration:u.VICTORY_PARTICLES_DURATION,easing:"easeInCubic"});for(var l,f=vr(D.current);!(l=f()).done;){var m=l.value;m.data.animation.stop(),m.tween({"position.x":M.current.position.x,"position.y":M.current.position.y},{duration:u.VICTORY_PARTICLES_DURATION,easing:"easeInCubic"})}setTimeout((function(){te.a.project.activeLayer.tween({opacity:1},{duration:u.FADE_TRANSITION_DURATION,easing:"easeOutCubic"});for(var e,t=Math.max(te.a.view.bounds.width,te.a.view.bounds.height)/2,n=vr(D.current);!(e=n()).done;){var r=e.value;r.data.animation.stop();var a=Math.random()*Math.PI*2,o=Math.random()*t;r.tween({"position.x":r.position.x+o*Math.cos(a),"position.y":r.position.y+o*Math.sin(a),opacity:0},{duration:u.VICTORY_PARTICLES_DURATION,easing:"easeOutCubic"})}P(!0)}),u.VICTORY_PARTICLES_DURATION)}};t.on({mouseenter:i,mouseleave:c,mousedown:s,mousedrag:l,mouseup:f}),t.data.removeListeners=function(){return t.off({mouseenter:i,mouseleave:c,mousedown:s,mousedrag:l,mouseup:f})}};return function(){var e,n,r,a,o,i,c,s;te.a.setup(L.current),M.current=(i=u.SMALL_TRIANGLE_BASE,c=Math.sqrt(2*Math.pow(i,2)),s=Math.sqrt(2*Math.pow(c,2)),new te.a.Group([qn(i,"st1"),qn(i,"st2"),qn(c,"mt1"),qn(s,"lt1"),qn(s,"lt2"),(e=c,n="sq",r=new te.a.Path.Rectangle({name:"display",point:[0,0],size:[e,e]}),a=new te.a.Path.Rectangle({name:"collision",point:[u.COLLISION_MARGIN,u.COLLISION_MARGIN],size:[e-2*u.COLLISION_MARGIN,e-2*u.COLLISION_MARGIN]}),o=new te.a.Path.Rectangle({name:"insetBorder",point:[u.INSET_BORDER,u.INSET_BORDER],size:[e-2*u.INSET_BORDER,e-2*u.INSET_BORDER],strokeWidth:u.INSET_BORDER}),new te.a.Group({children:[r,a,o],position:te.a.view.center,data:{id:n,collisions:new Set},applyMatrix:!0,rotation:45*Math.round(7*Math.random())})),Hn(i,"rh")])),B&&(_.current=te.a.project.importSVG('<path d="'+B.path+'" />',{applyMatrix:!0}),_.current.sendToBack(),_.current.fillRule="evenodd",u.DEV&&(_.current.strokeWidth=2,_.current.strokeColor="red"),_.current.closed=!0);var l=te.a.project.view.bounds,f=_.current?_.current.bounds:M.current.children[3].bounds.scale(2);l.width>l.height?N.current=Math.min(2,Math.min(.6*l.width,700)/f.width,Math.min(.8*l.height,600)/f.height):N.current=Math.min(2,Math.min(.8*l.width,600)/f.width,Math.min(.6*l.height,700)/f.height),_.current&&(_.current.scale(N.current),_.current.position=te.a.view.center);for(var d,m=vr(M.current.children);!(d=m()).done;){var p=d.value;p.scale(N.current),or(p,L.current),t(p),ar(p,L.current),sr(p,M.current)}}(),function(){te.a.project.remove(),D.current=null,M.current=null,_.current=null}}),[B]),Object(a.useLayoutEffect)((function(){U.current=g,_.current&&(g?(_.current.fillColor=h.colors.shape,_.current.position=te.a.view.center):_.current.fillColor="transparent")}),[B,g,h]),Object(a.useLayoutEffect)((function(){var e=new te.a.Group;e.sendToBack();var t=new te.a.Point(L.current.width,L.current.height).divide(window.devicePixelRatio),n=function(){return 3*Math.random()+2},r=function(){return.4*Math.random()+.1};D.current=new Array(60);for(var a=function(a){var o=new te.a.Path.Circle({center:te.a.Point.random().multiply(t),radius:n(),opacity:r(),parent:e,data:{index:a}});!function e(){var t={radius:n(),opacity:r(),"position.x":Math.min(L.current.width/window.devicePixelRatio,Math.max(0,o.position.x+200*Math.random()-100)),"position.y":Math.min(L.current.height/window.devicePixelRatio,Math.max(0,o.position.y+200*Math.random()-100))};o.data.animation=o.tween(t,{duration:1e4*Math.random()+5e3,easing:"easeInOutQuad"}).then(e)}(),D.current[a]=o},o=0;o<60;o++)a(o)}),[B]),Object(a.useLayoutEffect)((function(){for(var e,t=vr(M.current.children);!(e=t()).done;){var n=e.value;n.children.display.fillColor=h.colors.pieces[n.data.id],n.children.insetBorder.strokeColor=h.colors.pieces[n.data.id]}for(var r,a=Object.values(h.colors.pieces),o=vr(D.current);!(r=o()).done;){r.value.fillColor=a[Math.floor(Math.random()*a.length)]}}),[h.colors,B]),o.a.createElement(i,{css:{flex:"1",position:"relative",color:"dialogText",animation:u.FADE_TRANSITION_DURATION+"ms fadeIn ease"}},B&&!1===g&&o.a.createElement(i,{css:{zIndex:-1,position:"absolute",top:3,right:3,cursor:"pointer"}},o.a.createElement(ye,{tangram:B,selected:!0,hideBadge:!0})),o.a.createElement(i,{as:"canvas",ref:L,css:{minHeight:"auto",flex:1}}),j&&R&&o.a.createElement(hr,{emoji:B.emoji,onStop:function(){x(null),e()},onNext:k<j.length-1?function(){I(k+1),e()}:void 0,onApprove:p&&p.isAdmin&&B.uid&&!B.approved?F:void 0,onClap:function(e){p?m.firestore().collection("tangrams").doc(B.id).update({claps:m.firestore.FieldValue.increment(e)}):b(o.a.createElement(H,{id:"Claps only count when logged in"}))}}),o.a.createElement(pr,null))},Or=function(){var e=mn(),t=Object(a.useContext)(v),n=Object(a.useState)(!1),r=n[0],s=n[1],l=Object(a.useState)(!1),f=l[0],d=l[1],m=Object(a.useState)(!1),p=m[0],h=m[1],b=Object(a.useState)(!1),g=b[0],y=b[1],E=Object(a.useContext)(A).initialized,O=Object(a.useContext)(J),j=O.playlist,x=O.initialized,C=Object(a.useContext)(w),S=C.currentUser,k=C.initialized&&E&&x&&j;if(Object(a.useEffect)((function(){setTimeout((function(){return s(!0)}),2*u.FADE_TRANSITION_DURATION),h(setTimeout((function(){return d(!0)}),2*u.FADE_TRANSITION_DURATION))}),[]),Object(a.useEffect)((function(){k&&clearTimeout(p)}),[k]),g)return o.a.createElement(Er,null);return o.a.createElement(i,{css:{flex:"1",alignItems:"center",justifyContent:"center",animation:k&&r?u.FADE_TRANSITION_DURATION+"ms fadeIn ease "+u.FADE_STAGGER_DURATION+"ms reverse":void 0},deps:[k,r],onAnimationEnd:function(n){n.currentTarget===n.target&&(y(!0),S&&t(e.formatMessage({id:"Logged in as {username}"},{username:S.username})))}},o.a.createElement(i,{css:{animation:u.FADE_TRANSITION_DURATION+"ms fadeIn ease "+u.FADE_STAGGER_DURATION+"ms both"}},o.a.createElement(c,{css:{size:128,overflow:"visible","& > g":{transition:"all "+u.FADE_TRANSITION_DURATION+"ms ease",transform:k&&r?"translate(30px, -30px)":"translate(0, 0)"}},deps:[k,r]})),o.a.createElement(Z,{css:f?{animation:u.FADE_TRANSITION_DURATION+"ms fadeIn ease"}:{opacity:0},deps:[f]}))};t.default=function(){return Object(a.useEffect)((function(){window.oncontextmenu=function(){return!1}}),[]),Object(r.useGlobalCss)({body:{m:0,bg:"background",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto",\n        "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans",\n        "Helvetica Neue", sans-serif',"-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale",transition:"background-color "+u.COLOR_TRANSITION_DURATION+"ms"},"body, html, #___gatsby, #gatsby-focus-wrapper":{height:"100%"},"#gatsby-focus-wrapper":{display:"flex",flexDirection:"column",padding:"\n        env(safe-area-inset-top, 0)\n        env(safe-area-inset-right, 0)\n        env(safe-area-inset-bottom, 0)\n        env(safe-area-inset-left, 0)\n      "},"*":{boxSizing:"border-box",userSelect:"none","-moz-user-select":"none","-khtml-user-select":"none","-webkit-user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)"},"input, textarea":{"-webkit-user-select":"initial","-moz-user-select":"initial","-ms-user-select":"initial",userSelect:"initial"}}),o.a.createElement(me,null,o.a.createElement(dn.LanguageProvider,null,o.a.createElement(b,null,o.a.createElement(j,null,o.a.createElement(T,null,o.a.createElement(Nn,null,o.a.createElement(Q,null,o.a.createElement(mr,null,o.a.createElement(Rn,null,o.a.createElement(Vn,null,o.a.createElement(Or,null)))))))))))}},Wcq6:function(e,t,n){"use strict";var r,a=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r;a.registerVersion("firebase","7.14.0","app"),e.exports=a},bHtr:function(e,t,n){var r=n("XKFU");r(r.P,"Array",{fill:n("Nr18")}),n("nGyu")("fill")},ls82:function(e,t,n){n("rGqo"),n("yt8O"),n("a1Th"),n("VRzm"),n("Btvt"),n("f3/d"),n("rE2o"),n("ioFf");var r=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n,r){var a=t&&t.prototype instanceof h?t:h,o=Object.create(a.prototype),i=new k(r||[]);return o._invoke=function(e,t,n){var r=l;return function(a,o){if(r===d)throw new Error("Generator is already running");if(r===m){if("throw"===a)throw o;return A()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=x(i,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===l)throw r=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var u=s(e,t,n);if("normal"===u.type){if(r=n.done?m:f,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=m,n.method="throw",n.arg=u.arg)}}}(e,n,i),o}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(r){return{type:"throw",arg:r}}}e.wrap=u;var l="suspendedStart",f="suspendedYield",d="executing",m="completed",p={};function h(){}function v(){}function b(){}var g={};g[o]=function(){return this};var y=Object.getPrototypeOf,E=y&&y(y(I([])));E&&E!==n&&r.call(E,o)&&(g=E);var O=b.prototype=h.prototype=Object.create(g);function w(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function j(e){var t;this._invoke=function(n,a){function o(){return new Promise((function(t,o){!function t(n,a,o,i){var c=s(e[n],e,a);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==typeof l&&r.call(l,"__await")?Promise.resolve(l.__await).then((function(e){t("next",e,o,i)}),(function(e){t("throw",e,o,i)})):Promise.resolve(l).then((function(e){u.value=e,o(u)}),(function(e){return t("throw",e,o,i)}))}i(c.arg)}(n,a,t,o)}))}return t=t?t.then(o,o):o()}}function x(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,x(e,n),"throw"===n.method))return p;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var a=s(r,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,p;var o=a.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,p):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function I(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}return{next:A}}function A(){return{value:t,done:!0}}return v.prototype=O.constructor=b,b.constructor=v,b[c]=v.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c in e||(e[c]="GeneratorFunction")),e.prototype=Object.create(O),e},e.awrap=function(e){return{__await:e}},w(j.prototype),j.prototype[i]=function(){return this},e.AsyncIterator=j,e.async=function(t,n,r,a){var o=new j(u(t,n,r,a));return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},w(O),O[c]="Generator",O[o]=function(){return this},O.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=I,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return c.type="throw",c.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;S(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:I(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),p}},e}(e.exports);try{regeneratorRuntime=r}catch(a){Function("r","regeneratorRuntime = r")(r)}},mLhc:function(e,t,n){var r=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n,r){var a=t&&t.prototype instanceof h?t:h,o=Object.create(a.prototype),i=new k(r||[]);return o._invoke=function(e,t,n){var r=l;return function(a,o){if(r===d)throw new Error("Generator is already running");if(r===m){if("throw"===a)throw o;return A()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=x(i,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===l)throw r=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var u=s(e,t,n);if("normal"===u.type){if(r=n.done?m:f,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=m,n.method="throw",n.arg=u.arg)}}}(e,n,i),o}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(r){return{type:"throw",arg:r}}}e.wrap=u;var l="suspendedStart",f="suspendedYield",d="executing",m="completed",p={};function h(){}function v(){}function b(){}var g={};g[o]=function(){return this};var y=Object.getPrototypeOf,E=y&&y(y(I([])));E&&E!==n&&r.call(E,o)&&(g=E);var O=b.prototype=h.prototype=Object.create(g);function w(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function j(e,t){var n;this._invoke=function(a,o){function i(){return new t((function(n,i){!function n(a,o,i,c){var u=s(e[a],e,o);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,c)}))}c(u.arg)}(a,o,n,i)}))}return n=n?n.then(i,i):i()}}function x(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,x(e,n),"throw"===n.method))return p;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var a=s(r,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,p;var o=a.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,p):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function I(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}return{next:A}}function A(){return{value:t,done:!0}}return v.prototype=O.constructor=b,b.constructor=v,b[c]=v.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c in e||(e[c]="GeneratorFunction")),e.prototype=Object.create(O),e},e.awrap=function(e){return{__await:e}},w(j.prototype),j.prototype[i]=function(){return this},e.AsyncIterator=j,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new j(u(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},w(O),O[c]="Generator",O[o]=function(){return this},O.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=I,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return c.type="throw",c.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;S(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:I(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),p}},e}(e.exports);try{regeneratorRuntime=r}catch(a){Function("r","regeneratorRuntime = r")(r)}},o0o1:function(e,t,n){e.exports=n("mLhc")},"pp/T":function(e,t,n){var r=n("XKFU");r(r.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},wCrC:function(e,t,n){e.exports=n.p+"static/pop-a0c7623b355005c8fd4af82974179acf.wav"}}]);
//# sourceMappingURL=component---src-pages-index-js-4a86b266a729545e0244.js.map