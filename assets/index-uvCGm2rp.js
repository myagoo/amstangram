(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var OP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function DP(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function DS(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var LP={exports:{}},Nm={},MP={exports:{}},jt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ud=Symbol.for("react.element"),j5=Symbol.for("react.portal"),U5=Symbol.for("react.fragment"),V5=Symbol.for("react.strict_mode"),B5=Symbol.for("react.profiler"),z5=Symbol.for("react.provider"),q5=Symbol.for("react.context"),W5=Symbol.for("react.forward_ref"),G5=Symbol.for("react.suspense"),$5=Symbol.for("react.memo"),H5=Symbol.for("react.lazy"),UN=Symbol.iterator;function K5(t){return t===null||typeof t!="object"?null:(t=UN&&t[UN]||t["@@iterator"],typeof t=="function"?t:null)}var FP={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},jP=Object.assign,UP={};function ch(t,e,n){this.props=t,this.context=e,this.refs=UP,this.updater=n||FP}ch.prototype.isReactComponent={};ch.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ch.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function VP(){}VP.prototype=ch.prototype;function LS(t,e,n){this.props=t,this.context=e,this.refs=UP,this.updater=n||FP}var MS=LS.prototype=new VP;MS.constructor=LS;jP(MS,ch.prototype);MS.isPureReactComponent=!0;var VN=Array.isArray,BP=Object.prototype.hasOwnProperty,FS={current:null},zP={key:!0,ref:!0,__self:!0,__source:!0};function qP(t,e,n){var r,i={},o=null,u=null;if(e!=null)for(r in e.ref!==void 0&&(u=e.ref),e.key!==void 0&&(o=""+e.key),e)BP.call(e,r)&&!zP.hasOwnProperty(r)&&(i[r]=e[r]);var h=arguments.length-2;if(h===1)i.children=n;else if(1<h){for(var f=Array(h),v=0;v<h;v++)f[v]=arguments[v+2];i.children=f}if(t&&t.defaultProps)for(r in h=t.defaultProps,h)i[r]===void 0&&(i[r]=h[r]);return{$$typeof:Ud,type:t,key:o,ref:u,props:i,_owner:FS.current}}function Y5(t,e){return{$$typeof:Ud,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function jS(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ud}function Q5(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var BN=/\/+/g;function tw(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Q5(""+t.key):e.toString(36)}function Hg(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var u=!1;if(t===null)u=!0;else switch(o){case"string":case"number":u=!0;break;case"object":switch(t.$$typeof){case Ud:case j5:u=!0}}if(u)return u=t,i=i(u),t=r===""?"."+tw(u,0):r,VN(i)?(n="",t!=null&&(n=t.replace(BN,"$&/")+"/"),Hg(i,e,n,"",function(v){return v})):i!=null&&(jS(i)&&(i=Y5(i,n+(!i.key||u&&u.key===i.key?"":(""+i.key).replace(BN,"$&/")+"/")+t)),e.push(i)),1;if(u=0,r=r===""?".":r+":",VN(t))for(var h=0;h<t.length;h++){o=t[h];var f=r+tw(o,h);u+=Hg(o,e,n,f,i)}else if(f=K5(t),typeof f=="function")for(t=f.call(t),h=0;!(o=t.next()).done;)o=o.value,f=r+tw(o,h++),u+=Hg(o,e,n,f,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return u}function ug(t,e,n){if(t==null)return t;var r=[],i=0;return Hg(t,r,"","",function(o){return e.call(n,o,i++)}),r}function X5(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var hi={current:null},Kg={transition:null},J5={ReactCurrentDispatcher:hi,ReactCurrentBatchConfig:Kg,ReactCurrentOwner:FS};jt.Children={map:ug,forEach:function(t,e,n){ug(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ug(t,function(){e++}),e},toArray:function(t){return ug(t,function(e){return e})||[]},only:function(t){if(!jS(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};jt.Component=ch;jt.Fragment=U5;jt.Profiler=B5;jt.PureComponent=LS;jt.StrictMode=V5;jt.Suspense=G5;jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J5;jt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=jP({},t.props),i=t.key,o=t.ref,u=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,u=FS.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var h=t.type.defaultProps;for(f in e)BP.call(e,f)&&!zP.hasOwnProperty(f)&&(r[f]=e[f]===void 0&&h!==void 0?h[f]:e[f])}var f=arguments.length-2;if(f===1)r.children=n;else if(1<f){h=Array(f);for(var v=0;v<f;v++)h[v]=arguments[v+2];r.children=h}return{$$typeof:Ud,type:t.type,key:i,ref:o,props:r,_owner:u}};jt.createContext=function(t){return t={$$typeof:q5,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:z5,_context:t},t.Consumer=t};jt.createElement=qP;jt.createFactory=function(t){var e=qP.bind(null,t);return e.type=t,e};jt.createRef=function(){return{current:null}};jt.forwardRef=function(t){return{$$typeof:W5,render:t}};jt.isValidElement=jS;jt.lazy=function(t){return{$$typeof:H5,_payload:{_status:-1,_result:t},_init:X5}};jt.memo=function(t,e){return{$$typeof:$5,type:t,compare:e===void 0?null:e}};jt.startTransition=function(t){var e=Kg.transition;Kg.transition={};try{t()}finally{Kg.transition=e}};jt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};jt.useCallback=function(t,e){return hi.current.useCallback(t,e)};jt.useContext=function(t){return hi.current.useContext(t)};jt.useDebugValue=function(){};jt.useDeferredValue=function(t){return hi.current.useDeferredValue(t)};jt.useEffect=function(t,e){return hi.current.useEffect(t,e)};jt.useId=function(){return hi.current.useId()};jt.useImperativeHandle=function(t,e,n){return hi.current.useImperativeHandle(t,e,n)};jt.useInsertionEffect=function(t,e){return hi.current.useInsertionEffect(t,e)};jt.useLayoutEffect=function(t,e){return hi.current.useLayoutEffect(t,e)};jt.useMemo=function(t,e){return hi.current.useMemo(t,e)};jt.useReducer=function(t,e,n){return hi.current.useReducer(t,e,n)};jt.useRef=function(t){return hi.current.useRef(t)};jt.useState=function(t){return hi.current.useState(t)};jt.useSyncExternalStore=function(t,e,n){return hi.current.useSyncExternalStore(t,e,n)};jt.useTransition=function(){return hi.current.useTransition()};jt.version="18.2.0";MP.exports=jt;var ee=MP.exports;const Xn=DP(ee);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z5=ee,eV=Symbol.for("react.element"),tV=Symbol.for("react.fragment"),nV=Object.prototype.hasOwnProperty,rV=Z5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,iV={key:!0,ref:!0,__self:!0,__source:!0};function WP(t,e,n){var r,i={},o=null,u=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(u=e.ref);for(r in e)nV.call(e,r)&&!iV.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:eV,type:t,key:o,ref:u,props:i,_owner:rV.current}}Nm.Fragment=tV;Nm.jsx=WP;Nm.jsxs=WP;LP.exports=Nm;var F=LP.exports,xE={},GP={exports:{}},Ki={},$P={exports:{}},HP={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Fe,Ne){var qe=Fe.length;Fe.push(Ne);e:for(;0<qe;){var Pt=qe-1>>>1,rt=Fe[Pt];if(0<i(rt,Ne))Fe[Pt]=Ne,Fe[qe]=rt,qe=Pt;else break e}}function n(Fe){return Fe.length===0?null:Fe[0]}function r(Fe){if(Fe.length===0)return null;var Ne=Fe[0],qe=Fe.pop();if(qe!==Ne){Fe[0]=qe;e:for(var Pt=0,rt=Fe.length,Kt=rt>>>1;Pt<Kt;){var It=2*(Pt+1)-1,zt=Fe[It],Nn=It+1,Rt=Fe[Nn];if(0>i(zt,qe))Nn<rt&&0>i(Rt,zt)?(Fe[Pt]=Rt,Fe[Nn]=qe,Pt=Nn):(Fe[Pt]=zt,Fe[It]=qe,Pt=It);else if(Nn<rt&&0>i(Rt,qe))Fe[Pt]=Rt,Fe[Nn]=qe,Pt=Nn;else break e}}return Ne}function i(Fe,Ne){var qe=Fe.sortIndex-Ne.sortIndex;return qe!==0?qe:Fe.id-Ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,h=u.now();t.unstable_now=function(){return u.now()-h}}var f=[],v=[],_=1,b=null,S=3,I=!1,M=!1,D=!1,ne=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function K(Fe){for(var Ne=n(v);Ne!==null;){if(Ne.callback===null)r(v);else if(Ne.startTime<=Fe)r(v),Ne.sortIndex=Ne.expirationTime,e(f,Ne);else break;Ne=n(v)}}function ue(Fe){if(D=!1,K(Fe),!M)if(n(f)!==null)M=!0,Ce(oe);else{var Ne=n(v);Ne!==null&&Ut(ue,Ne.startTime-Fe)}}function oe(Fe,Ne){M=!1,D&&(D=!1,z(he),he=-1),I=!0;var qe=S;try{for(K(Ne),b=n(f);b!==null&&(!(b.expirationTime>Ne)||Fe&&!Ue());){var Pt=b.callback;if(typeof Pt=="function"){b.callback=null,S=b.priorityLevel;var rt=Pt(b.expirationTime<=Ne);Ne=t.unstable_now(),typeof rt=="function"?b.callback=rt:b===n(f)&&r(f),K(Ne)}else r(f);b=n(f)}if(b!==null)var Kt=!0;else{var It=n(v);It!==null&&Ut(ue,It.startTime-Ne),Kt=!1}return Kt}finally{b=null,S=qe,I=!1}}var fe=!1,me=null,he=-1,Z=5,Se=-1;function Ue(){return!(t.unstable_now()-Se<Z)}function Ge(){if(me!==null){var Fe=t.unstable_now();Se=Fe;var Ne=!0;try{Ne=me(!0,Fe)}finally{Ne?ft():(fe=!1,me=null)}}else fe=!1}var ft;if(typeof Y=="function")ft=function(){Y(Ge)};else if(typeof MessageChannel<"u"){var Ae=new MessageChannel,tt=Ae.port2;Ae.port1.onmessage=Ge,ft=function(){tt.postMessage(null)}}else ft=function(){ne(Ge,0)};function Ce(Fe){me=Fe,fe||(fe=!0,ft())}function Ut(Fe,Ne){he=ne(function(){Fe(t.unstable_now())},Ne)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Fe){Fe.callback=null},t.unstable_continueExecution=function(){M||I||(M=!0,Ce(oe))},t.unstable_forceFrameRate=function(Fe){0>Fe||125<Fe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Z=0<Fe?Math.floor(1e3/Fe):5},t.unstable_getCurrentPriorityLevel=function(){return S},t.unstable_getFirstCallbackNode=function(){return n(f)},t.unstable_next=function(Fe){switch(S){case 1:case 2:case 3:var Ne=3;break;default:Ne=S}var qe=S;S=Ne;try{return Fe()}finally{S=qe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Fe,Ne){switch(Fe){case 1:case 2:case 3:case 4:case 5:break;default:Fe=3}var qe=S;S=Fe;try{return Ne()}finally{S=qe}},t.unstable_scheduleCallback=function(Fe,Ne,qe){var Pt=t.unstable_now();switch(typeof qe=="object"&&qe!==null?(qe=qe.delay,qe=typeof qe=="number"&&0<qe?Pt+qe:Pt):qe=Pt,Fe){case 1:var rt=-1;break;case 2:rt=250;break;case 5:rt=1073741823;break;case 4:rt=1e4;break;default:rt=5e3}return rt=qe+rt,Fe={id:_++,callback:Ne,priorityLevel:Fe,startTime:qe,expirationTime:rt,sortIndex:-1},qe>Pt?(Fe.sortIndex=qe,e(v,Fe),n(f)===null&&Fe===n(v)&&(D?(z(he),he=-1):D=!0,Ut(ue,qe-Pt))):(Fe.sortIndex=rt,e(f,Fe),M||I||(M=!0,Ce(oe))),Fe},t.unstable_shouldYield=Ue,t.unstable_wrapCallback=function(Fe){var Ne=S;return function(){var qe=S;S=Ne;try{return Fe.apply(this,arguments)}finally{S=qe}}}})(HP);$P.exports=HP;var oV=$P.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KP=ee,$i=oV;function Re(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var YP=new Set,Hf={};function bl(t,e){$c(t,e),$c(t+"Capture",e)}function $c(t,e){for(Hf[t]=e,t=0;t<e.length;t++)YP.add(e[t])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),NE=Object.prototype.hasOwnProperty,sV=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zN={},qN={};function aV(t){return NE.call(qN,t)?!0:NE.call(zN,t)?!1:sV.test(t)?qN[t]=!0:(zN[t]=!0,!1)}function uV(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function lV(t,e,n,r){if(e===null||typeof e>"u"||uV(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function fi(t,e,n,r,i,o,u){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=u}var Or={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Or[t]=new fi(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Or[e]=new fi(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Or[t]=new fi(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Or[t]=new fi(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Or[t]=new fi(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Or[t]=new fi(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Or[t]=new fi(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Or[t]=new fi(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Or[t]=new fi(t,5,!1,t.toLowerCase(),null,!1,!1)});var US=/[\-:]([a-z])/g;function VS(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(US,VS);Or[e]=new fi(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(US,VS);Or[e]=new fi(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(US,VS);Or[e]=new fi(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Or[t]=new fi(t,1,!1,t.toLowerCase(),null,!1,!1)});Or.xlinkHref=new fi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Or[t]=new fi(t,1,!1,t.toLowerCase(),null,!0,!0)});function BS(t,e,n,r){var i=Or.hasOwnProperty(e)?Or[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(lV(e,n,i,r)&&(n=null),r||i===null?aV(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ga=KP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,lg=Symbol.for("react.element"),mc=Symbol.for("react.portal"),yc=Symbol.for("react.fragment"),zS=Symbol.for("react.strict_mode"),AE=Symbol.for("react.profiler"),QP=Symbol.for("react.provider"),XP=Symbol.for("react.context"),qS=Symbol.for("react.forward_ref"),kE=Symbol.for("react.suspense"),PE=Symbol.for("react.suspense_list"),WS=Symbol.for("react.memo"),Da=Symbol.for("react.lazy"),JP=Symbol.for("react.offscreen"),WN=Symbol.iterator;function nf(t){return t===null||typeof t!="object"?null:(t=WN&&t[WN]||t["@@iterator"],typeof t=="function"?t:null)}var Cn=Object.assign,nw;function Ef(t){if(nw===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);nw=e&&e[1]||""}return`
`+nw+t}var rw=!1;function iw(t,e){if(!t||rw)return"";rw=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(v){var r=v}Reflect.construct(t,[],e)}else{try{e.call()}catch(v){r=v}t.call(e.prototype)}else{try{throw Error()}catch(v){r=v}t()}}catch(v){if(v&&r&&typeof v.stack=="string"){for(var i=v.stack.split(`
`),o=r.stack.split(`
`),u=i.length-1,h=o.length-1;1<=u&&0<=h&&i[u]!==o[h];)h--;for(;1<=u&&0<=h;u--,h--)if(i[u]!==o[h]){if(u!==1||h!==1)do if(u--,h--,0>h||i[u]!==o[h]){var f=`
`+i[u].replace(" at new "," at ");return t.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",t.displayName)),f}while(1<=u&&0<=h);break}}}finally{rw=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ef(t):""}function cV(t){switch(t.tag){case 5:return Ef(t.type);case 16:return Ef("Lazy");case 13:return Ef("Suspense");case 19:return Ef("SuspenseList");case 0:case 2:case 15:return t=iw(t.type,!1),t;case 11:return t=iw(t.type.render,!1),t;case 1:return t=iw(t.type,!0),t;default:return""}}function RE(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case yc:return"Fragment";case mc:return"Portal";case AE:return"Profiler";case zS:return"StrictMode";case kE:return"Suspense";case PE:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case XP:return(t.displayName||"Context")+".Consumer";case QP:return(t._context.displayName||"Context")+".Provider";case qS:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case WS:return e=t.displayName||null,e!==null?e:RE(t.type)||"Memo";case Da:e=t._payload,t=t._init;try{return RE(t(e))}catch{}}return null}function hV(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return RE(e);case 8:return e===zS?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function su(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ZP(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function fV(t){var e=ZP(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(u){r=""+u,o.call(this,u)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(u){r=""+u},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function cg(t){t._valueTracker||(t._valueTracker=fV(t))}function eR(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=ZP(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function vv(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function OE(t,e){var n=e.checked;return Cn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function GN(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=su(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function tR(t,e){e=e.checked,e!=null&&BS(t,"checked",e,!1)}function DE(t,e){tR(t,e);var n=su(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?LE(t,e.type,n):e.hasOwnProperty("defaultValue")&&LE(t,e.type,su(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function $N(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function LE(t,e,n){(e!=="number"||vv(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Sf=Array.isArray;function Oc(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+su(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function ME(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Re(91));return Cn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function HN(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Re(92));if(Sf(n)){if(1<n.length)throw Error(Re(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:su(n)}}function nR(t,e){var n=su(e.value),r=su(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function KN(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function rR(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function FE(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?rR(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var hg,iR=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(hg=hg||document.createElement("div"),hg.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=hg.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Kf(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Af={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dV=["Webkit","ms","Moz","O"];Object.keys(Af).forEach(function(t){dV.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Af[e]=Af[t]})});function oR(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Af.hasOwnProperty(t)&&Af[t]?(""+e).trim():e+"px"}function sR(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=oR(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var pV=Cn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jE(t,e){if(e){if(pV[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Re(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Re(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Re(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Re(62))}}function UE(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var VE=null;function GS(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var BE=null,Dc=null,Lc=null;function YN(t){if(t=zd(t)){if(typeof BE!="function")throw Error(Re(280));var e=t.stateNode;e&&(e=Om(e),BE(t.stateNode,t.type,e))}}function aR(t){Dc?Lc?Lc.push(t):Lc=[t]:Dc=t}function uR(){if(Dc){var t=Dc,e=Lc;if(Lc=Dc=null,YN(t),e)for(t=0;t<e.length;t++)YN(e[t])}}function lR(t,e){return t(e)}function cR(){}var ow=!1;function hR(t,e,n){if(ow)return t(e,n);ow=!0;try{return lR(t,e,n)}finally{ow=!1,(Dc!==null||Lc!==null)&&(cR(),uR())}}function Yf(t,e){var n=t.stateNode;if(n===null)return null;var r=Om(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Re(231,e,typeof n));return n}var zE=!1;if(ia)try{var rf={};Object.defineProperty(rf,"passive",{get:function(){zE=!0}}),window.addEventListener("test",rf,rf),window.removeEventListener("test",rf,rf)}catch{zE=!1}function gV(t,e,n,r,i,o,u,h,f){var v=Array.prototype.slice.call(arguments,3);try{e.apply(n,v)}catch(_){this.onError(_)}}var kf=!1,mv=null,yv=!1,qE=null,vV={onError:function(t){kf=!0,mv=t}};function mV(t,e,n,r,i,o,u,h,f){kf=!1,mv=null,gV.apply(vV,arguments)}function yV(t,e,n,r,i,o,u,h,f){if(mV.apply(this,arguments),kf){if(kf){var v=mv;kf=!1,mv=null}else throw Error(Re(198));yv||(yv=!0,qE=v)}}function Tl(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function fR(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function QN(t){if(Tl(t)!==t)throw Error(Re(188))}function _V(t){var e=t.alternate;if(!e){if(e=Tl(t),e===null)throw Error(Re(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return QN(i),t;if(o===r)return QN(i),e;o=o.sibling}throw Error(Re(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,h=i.child;h;){if(h===n){u=!0,n=i,r=o;break}if(h===r){u=!0,r=i,n=o;break}h=h.sibling}if(!u){for(h=o.child;h;){if(h===n){u=!0,n=o,r=i;break}if(h===r){u=!0,r=o,n=i;break}h=h.sibling}if(!u)throw Error(Re(189))}}if(n.alternate!==r)throw Error(Re(190))}if(n.tag!==3)throw Error(Re(188));return n.stateNode.current===n?t:e}function dR(t){return t=_V(t),t!==null?pR(t):null}function pR(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=pR(t);if(e!==null)return e;t=t.sibling}return null}var gR=$i.unstable_scheduleCallback,XN=$i.unstable_cancelCallback,wV=$i.unstable_shouldYield,EV=$i.unstable_requestPaint,Bn=$i.unstable_now,SV=$i.unstable_getCurrentPriorityLevel,$S=$i.unstable_ImmediatePriority,vR=$i.unstable_UserBlockingPriority,_v=$i.unstable_NormalPriority,bV=$i.unstable_LowPriority,mR=$i.unstable_IdlePriority,Am=null,vs=null;function TV(t){if(vs&&typeof vs.onCommitFiberRoot=="function")try{vs.onCommitFiberRoot(Am,t,void 0,(t.current.flags&128)===128)}catch{}}var Wo=Math.clz32?Math.clz32:xV,IV=Math.log,CV=Math.LN2;function xV(t){return t>>>=0,t===0?32:31-(IV(t)/CV|0)|0}var fg=64,dg=4194304;function bf(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function wv(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,u=n&268435455;if(u!==0){var h=u&~i;h!==0?r=bf(h):(o&=u,o!==0&&(r=bf(o)))}else u=n&~i,u!==0?r=bf(u):o!==0&&(r=bf(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Wo(e),i=1<<n,r|=t[n],e&=~i;return r}function NV(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function AV(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var u=31-Wo(o),h=1<<u,f=i[u];f===-1?(!(h&n)||h&r)&&(i[u]=NV(h,e)):f<=e&&(t.expiredLanes|=h),o&=~h}}function WE(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function yR(){var t=fg;return fg<<=1,!(fg&4194240)&&(fg=64),t}function sw(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Vd(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Wo(e),t[e]=n}function kV(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Wo(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function HS(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Wo(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Xt=0;function _R(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var wR,KS,ER,SR,bR,GE=!1,pg=[],$a=null,Ha=null,Ka=null,Qf=new Map,Xf=new Map,Fa=[],PV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function JN(t,e){switch(t){case"focusin":case"focusout":$a=null;break;case"dragenter":case"dragleave":Ha=null;break;case"mouseover":case"mouseout":Ka=null;break;case"pointerover":case"pointerout":Qf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xf.delete(e.pointerId)}}function of(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=zd(e),e!==null&&KS(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function RV(t,e,n,r,i){switch(e){case"focusin":return $a=of($a,t,e,n,r,i),!0;case"dragenter":return Ha=of(Ha,t,e,n,r,i),!0;case"mouseover":return Ka=of(Ka,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Qf.set(o,of(Qf.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Xf.set(o,of(Xf.get(o)||null,t,e,n,r,i)),!0}return!1}function TR(t){var e=Ku(t.target);if(e!==null){var n=Tl(e);if(n!==null){if(e=n.tag,e===13){if(e=fR(n),e!==null){t.blockedOn=e,bR(t.priority,function(){ER(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Yg(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=$E(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);VE=r,n.target.dispatchEvent(r),VE=null}else return e=zd(n),e!==null&&KS(e),t.blockedOn=n,!1;e.shift()}return!0}function ZN(t,e,n){Yg(t)&&n.delete(e)}function OV(){GE=!1,$a!==null&&Yg($a)&&($a=null),Ha!==null&&Yg(Ha)&&(Ha=null),Ka!==null&&Yg(Ka)&&(Ka=null),Qf.forEach(ZN),Xf.forEach(ZN)}function sf(t,e){t.blockedOn===e&&(t.blockedOn=null,GE||(GE=!0,$i.unstable_scheduleCallback($i.unstable_NormalPriority,OV)))}function Jf(t){function e(i){return sf(i,t)}if(0<pg.length){sf(pg[0],t);for(var n=1;n<pg.length;n++){var r=pg[n];r.blockedOn===t&&(r.blockedOn=null)}}for($a!==null&&sf($a,t),Ha!==null&&sf(Ha,t),Ka!==null&&sf(Ka,t),Qf.forEach(e),Xf.forEach(e),n=0;n<Fa.length;n++)r=Fa[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Fa.length&&(n=Fa[0],n.blockedOn===null);)TR(n),n.blockedOn===null&&Fa.shift()}var Mc=ga.ReactCurrentBatchConfig,Ev=!0;function DV(t,e,n,r){var i=Xt,o=Mc.transition;Mc.transition=null;try{Xt=1,YS(t,e,n,r)}finally{Xt=i,Mc.transition=o}}function LV(t,e,n,r){var i=Xt,o=Mc.transition;Mc.transition=null;try{Xt=4,YS(t,e,n,r)}finally{Xt=i,Mc.transition=o}}function YS(t,e,n,r){if(Ev){var i=$E(t,e,n,r);if(i===null)vw(t,e,r,Sv,n),JN(t,r);else if(RV(i,t,e,n,r))r.stopPropagation();else if(JN(t,r),e&4&&-1<PV.indexOf(t)){for(;i!==null;){var o=zd(i);if(o!==null&&wR(o),o=$E(t,e,n,r),o===null&&vw(t,e,r,Sv,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else vw(t,e,r,null,n)}}var Sv=null;function $E(t,e,n,r){if(Sv=null,t=GS(r),t=Ku(t),t!==null)if(e=Tl(t),e===null)t=null;else if(n=e.tag,n===13){if(t=fR(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Sv=t,null}function IR(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(SV()){case $S:return 1;case vR:return 4;case _v:case bV:return 16;case mR:return 536870912;default:return 16}default:return 16}}var qa=null,QS=null,Qg=null;function CR(){if(Qg)return Qg;var t,e=QS,n=e.length,r,i="value"in qa?qa.value:qa.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var u=n-t;for(r=1;r<=u&&e[n-r]===i[o-r];r++);return Qg=i.slice(t,1<r?1-r:void 0)}function Xg(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function gg(){return!0}function eA(){return!1}function Yi(t){function e(n,r,i,o,u){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=u,this.currentTarget=null;for(var h in t)t.hasOwnProperty(h)&&(n=t[h],this[h]=n?n(o):o[h]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?gg:eA,this.isPropagationStopped=eA,this}return Cn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=gg)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=gg)},persist:function(){},isPersistent:gg}),e}var hh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},XS=Yi(hh),Bd=Cn({},hh,{view:0,detail:0}),MV=Yi(Bd),aw,uw,af,km=Cn({},Bd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:JS,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==af&&(af&&t.type==="mousemove"?(aw=t.screenX-af.screenX,uw=t.screenY-af.screenY):uw=aw=0,af=t),aw)},movementY:function(t){return"movementY"in t?t.movementY:uw}}),tA=Yi(km),FV=Cn({},km,{dataTransfer:0}),jV=Yi(FV),UV=Cn({},Bd,{relatedTarget:0}),lw=Yi(UV),VV=Cn({},hh,{animationName:0,elapsedTime:0,pseudoElement:0}),BV=Yi(VV),zV=Cn({},hh,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),qV=Yi(zV),WV=Cn({},hh,{data:0}),nA=Yi(WV),GV={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$V={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},HV={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function KV(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=HV[t])?!!e[t]:!1}function JS(){return KV}var YV=Cn({},Bd,{key:function(t){if(t.key){var e=GV[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Xg(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?$V[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:JS,charCode:function(t){return t.type==="keypress"?Xg(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Xg(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),QV=Yi(YV),XV=Cn({},km,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rA=Yi(XV),JV=Cn({},Bd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:JS}),ZV=Yi(JV),e6=Cn({},hh,{propertyName:0,elapsedTime:0,pseudoElement:0}),t6=Yi(e6),n6=Cn({},km,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),r6=Yi(n6),i6=[9,13,27,32],ZS=ia&&"CompositionEvent"in window,Pf=null;ia&&"documentMode"in document&&(Pf=document.documentMode);var o6=ia&&"TextEvent"in window&&!Pf,xR=ia&&(!ZS||Pf&&8<Pf&&11>=Pf),iA=" ",oA=!1;function NR(t,e){switch(t){case"keyup":return i6.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function AR(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var _c=!1;function s6(t,e){switch(t){case"compositionend":return AR(e);case"keypress":return e.which!==32?null:(oA=!0,iA);case"textInput":return t=e.data,t===iA&&oA?null:t;default:return null}}function a6(t,e){if(_c)return t==="compositionend"||!ZS&&NR(t,e)?(t=CR(),Qg=QS=qa=null,_c=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return xR&&e.locale!=="ko"?null:e.data;default:return null}}var u6={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sA(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!u6[t.type]:e==="textarea"}function kR(t,e,n,r){aR(r),e=bv(e,"onChange"),0<e.length&&(n=new XS("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Rf=null,Zf=null;function l6(t){BR(t,0)}function Pm(t){var e=Sc(t);if(eR(e))return t}function c6(t,e){if(t==="change")return e}var PR=!1;if(ia){var cw;if(ia){var hw="oninput"in document;if(!hw){var aA=document.createElement("div");aA.setAttribute("oninput","return;"),hw=typeof aA.oninput=="function"}cw=hw}else cw=!1;PR=cw&&(!document.documentMode||9<document.documentMode)}function uA(){Rf&&(Rf.detachEvent("onpropertychange",RR),Zf=Rf=null)}function RR(t){if(t.propertyName==="value"&&Pm(Zf)){var e=[];kR(e,Zf,t,GS(t)),hR(l6,e)}}function h6(t,e,n){t==="focusin"?(uA(),Rf=e,Zf=n,Rf.attachEvent("onpropertychange",RR)):t==="focusout"&&uA()}function f6(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Pm(Zf)}function d6(t,e){if(t==="click")return Pm(e)}function p6(t,e){if(t==="input"||t==="change")return Pm(e)}function g6(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ko=typeof Object.is=="function"?Object.is:g6;function ed(t,e){if(Ko(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!NE.call(e,i)||!Ko(t[i],e[i]))return!1}return!0}function lA(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function cA(t,e){var n=lA(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=lA(n)}}function OR(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?OR(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function DR(){for(var t=window,e=vv();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=vv(t.document)}return e}function eb(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function v6(t){var e=DR(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&OR(n.ownerDocument.documentElement,n)){if(r!==null&&eb(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=cA(n,o);var u=cA(n,r);i&&u&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==u.node||t.focusOffset!==u.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(u.node,u.offset)):(e.setEnd(u.node,u.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var m6=ia&&"documentMode"in document&&11>=document.documentMode,wc=null,HE=null,Of=null,KE=!1;function hA(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;KE||wc==null||wc!==vv(r)||(r=wc,"selectionStart"in r&&eb(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Of&&ed(Of,r)||(Of=r,r=bv(HE,"onSelect"),0<r.length&&(e=new XS("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=wc)))}function vg(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ec={animationend:vg("Animation","AnimationEnd"),animationiteration:vg("Animation","AnimationIteration"),animationstart:vg("Animation","AnimationStart"),transitionend:vg("Transition","TransitionEnd")},fw={},LR={};ia&&(LR=document.createElement("div").style,"AnimationEvent"in window||(delete Ec.animationend.animation,delete Ec.animationiteration.animation,delete Ec.animationstart.animation),"TransitionEvent"in window||delete Ec.transitionend.transition);function Rm(t){if(fw[t])return fw[t];if(!Ec[t])return t;var e=Ec[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in LR)return fw[t]=e[n];return t}var MR=Rm("animationend"),FR=Rm("animationiteration"),jR=Rm("animationstart"),UR=Rm("transitionend"),VR=new Map,fA="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function du(t,e){VR.set(t,e),bl(e,[t])}for(var dw=0;dw<fA.length;dw++){var pw=fA[dw],y6=pw.toLowerCase(),_6=pw[0].toUpperCase()+pw.slice(1);du(y6,"on"+_6)}du(MR,"onAnimationEnd");du(FR,"onAnimationIteration");du(jR,"onAnimationStart");du("dblclick","onDoubleClick");du("focusin","onFocus");du("focusout","onBlur");du(UR,"onTransitionEnd");$c("onMouseEnter",["mouseout","mouseover"]);$c("onMouseLeave",["mouseout","mouseover"]);$c("onPointerEnter",["pointerout","pointerover"]);$c("onPointerLeave",["pointerout","pointerover"]);bl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));bl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));bl("onBeforeInput",["compositionend","keypress","textInput","paste"]);bl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));bl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));bl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),w6=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tf));function dA(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,yV(r,e,void 0,t),t.currentTarget=null}function BR(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var u=r.length-1;0<=u;u--){var h=r[u],f=h.instance,v=h.currentTarget;if(h=h.listener,f!==o&&i.isPropagationStopped())break e;dA(i,h,v),o=f}else for(u=0;u<r.length;u++){if(h=r[u],f=h.instance,v=h.currentTarget,h=h.listener,f!==o&&i.isPropagationStopped())break e;dA(i,h,v),o=f}}}if(yv)throw t=qE,yv=!1,qE=null,t}function ln(t,e){var n=e[ZE];n===void 0&&(n=e[ZE]=new Set);var r=t+"__bubble";n.has(r)||(zR(e,t,2,!1),n.add(r))}function gw(t,e,n){var r=0;e&&(r|=4),zR(n,t,r,e)}var mg="_reactListening"+Math.random().toString(36).slice(2);function td(t){if(!t[mg]){t[mg]=!0,YP.forEach(function(n){n!=="selectionchange"&&(w6.has(n)||gw(n,!1,t),gw(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[mg]||(e[mg]=!0,gw("selectionchange",!1,e))}}function zR(t,e,n,r){switch(IR(e)){case 1:var i=DV;break;case 4:i=LV;break;default:i=YS}n=i.bind(null,e,n,t),i=void 0,!zE||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function vw(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var u=r.tag;if(u===3||u===4){var h=r.stateNode.containerInfo;if(h===i||h.nodeType===8&&h.parentNode===i)break;if(u===4)for(u=r.return;u!==null;){var f=u.tag;if((f===3||f===4)&&(f=u.stateNode.containerInfo,f===i||f.nodeType===8&&f.parentNode===i))return;u=u.return}for(;h!==null;){if(u=Ku(h),u===null)return;if(f=u.tag,f===5||f===6){r=o=u;continue e}h=h.parentNode}}r=r.return}hR(function(){var v=o,_=GS(n),b=[];e:{var S=VR.get(t);if(S!==void 0){var I=XS,M=t;switch(t){case"keypress":if(Xg(n)===0)break e;case"keydown":case"keyup":I=QV;break;case"focusin":M="focus",I=lw;break;case"focusout":M="blur",I=lw;break;case"beforeblur":case"afterblur":I=lw;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=tA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=jV;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=ZV;break;case MR:case FR:case jR:I=BV;break;case UR:I=t6;break;case"scroll":I=MV;break;case"wheel":I=r6;break;case"copy":case"cut":case"paste":I=qV;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=rA}var D=(e&4)!==0,ne=!D&&t==="scroll",z=D?S!==null?S+"Capture":null:S;D=[];for(var Y=v,K;Y!==null;){K=Y;var ue=K.stateNode;if(K.tag===5&&ue!==null&&(K=ue,z!==null&&(ue=Yf(Y,z),ue!=null&&D.push(nd(Y,ue,K)))),ne)break;Y=Y.return}0<D.length&&(S=new I(S,M,null,n,_),b.push({event:S,listeners:D}))}}if(!(e&7)){e:{if(S=t==="mouseover"||t==="pointerover",I=t==="mouseout"||t==="pointerout",S&&n!==VE&&(M=n.relatedTarget||n.fromElement)&&(Ku(M)||M[oa]))break e;if((I||S)&&(S=_.window===_?_:(S=_.ownerDocument)?S.defaultView||S.parentWindow:window,I?(M=n.relatedTarget||n.toElement,I=v,M=M?Ku(M):null,M!==null&&(ne=Tl(M),M!==ne||M.tag!==5&&M.tag!==6)&&(M=null)):(I=null,M=v),I!==M)){if(D=tA,ue="onMouseLeave",z="onMouseEnter",Y="mouse",(t==="pointerout"||t==="pointerover")&&(D=rA,ue="onPointerLeave",z="onPointerEnter",Y="pointer"),ne=I==null?S:Sc(I),K=M==null?S:Sc(M),S=new D(ue,Y+"leave",I,n,_),S.target=ne,S.relatedTarget=K,ue=null,Ku(_)===v&&(D=new D(z,Y+"enter",M,n,_),D.target=K,D.relatedTarget=ne,ue=D),ne=ue,I&&M)t:{for(D=I,z=M,Y=0,K=D;K;K=nc(K))Y++;for(K=0,ue=z;ue;ue=nc(ue))K++;for(;0<Y-K;)D=nc(D),Y--;for(;0<K-Y;)z=nc(z),K--;for(;Y--;){if(D===z||z!==null&&D===z.alternate)break t;D=nc(D),z=nc(z)}D=null}else D=null;I!==null&&pA(b,S,I,D,!1),M!==null&&ne!==null&&pA(b,ne,M,D,!0)}}e:{if(S=v?Sc(v):window,I=S.nodeName&&S.nodeName.toLowerCase(),I==="select"||I==="input"&&S.type==="file")var oe=c6;else if(sA(S))if(PR)oe=p6;else{oe=f6;var fe=h6}else(I=S.nodeName)&&I.toLowerCase()==="input"&&(S.type==="checkbox"||S.type==="radio")&&(oe=d6);if(oe&&(oe=oe(t,v))){kR(b,oe,n,_);break e}fe&&fe(t,S,v),t==="focusout"&&(fe=S._wrapperState)&&fe.controlled&&S.type==="number"&&LE(S,"number",S.value)}switch(fe=v?Sc(v):window,t){case"focusin":(sA(fe)||fe.contentEditable==="true")&&(wc=fe,HE=v,Of=null);break;case"focusout":Of=HE=wc=null;break;case"mousedown":KE=!0;break;case"contextmenu":case"mouseup":case"dragend":KE=!1,hA(b,n,_);break;case"selectionchange":if(m6)break;case"keydown":case"keyup":hA(b,n,_)}var me;if(ZS)e:{switch(t){case"compositionstart":var he="onCompositionStart";break e;case"compositionend":he="onCompositionEnd";break e;case"compositionupdate":he="onCompositionUpdate";break e}he=void 0}else _c?NR(t,n)&&(he="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(he="onCompositionStart");he&&(xR&&n.locale!=="ko"&&(_c||he!=="onCompositionStart"?he==="onCompositionEnd"&&_c&&(me=CR()):(qa=_,QS="value"in qa?qa.value:qa.textContent,_c=!0)),fe=bv(v,he),0<fe.length&&(he=new nA(he,t,null,n,_),b.push({event:he,listeners:fe}),me?he.data=me:(me=AR(n),me!==null&&(he.data=me)))),(me=o6?s6(t,n):a6(t,n))&&(v=bv(v,"onBeforeInput"),0<v.length&&(_=new nA("onBeforeInput","beforeinput",null,n,_),b.push({event:_,listeners:v}),_.data=me))}BR(b,e)})}function nd(t,e,n){return{instance:t,listener:e,currentTarget:n}}function bv(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Yf(t,n),o!=null&&r.unshift(nd(t,o,i)),o=Yf(t,e),o!=null&&r.push(nd(t,o,i))),t=t.return}return r}function nc(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function pA(t,e,n,r,i){for(var o=e._reactName,u=[];n!==null&&n!==r;){var h=n,f=h.alternate,v=h.stateNode;if(f!==null&&f===r)break;h.tag===5&&v!==null&&(h=v,i?(f=Yf(n,o),f!=null&&u.unshift(nd(n,f,h))):i||(f=Yf(n,o),f!=null&&u.push(nd(n,f,h)))),n=n.return}u.length!==0&&t.push({event:e,listeners:u})}var E6=/\r\n?/g,S6=/\u0000|\uFFFD/g;function gA(t){return(typeof t=="string"?t:""+t).replace(E6,`
`).replace(S6,"")}function yg(t,e,n){if(e=gA(e),gA(t)!==e&&n)throw Error(Re(425))}function Tv(){}var YE=null,QE=null;function XE(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var JE=typeof setTimeout=="function"?setTimeout:void 0,b6=typeof clearTimeout=="function"?clearTimeout:void 0,vA=typeof Promise=="function"?Promise:void 0,T6=typeof queueMicrotask=="function"?queueMicrotask:typeof vA<"u"?function(t){return vA.resolve(null).then(t).catch(I6)}:JE;function I6(t){setTimeout(function(){throw t})}function mw(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Jf(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Jf(e)}function Ya(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function mA(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var fh=Math.random().toString(36).slice(2),hs="__reactFiber$"+fh,rd="__reactProps$"+fh,oa="__reactContainer$"+fh,ZE="__reactEvents$"+fh,C6="__reactListeners$"+fh,x6="__reactHandles$"+fh;function Ku(t){var e=t[hs];if(e)return e;for(var n=t.parentNode;n;){if(e=n[oa]||n[hs]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=mA(t);t!==null;){if(n=t[hs])return n;t=mA(t)}return e}t=n,n=t.parentNode}return null}function zd(t){return t=t[hs]||t[oa],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Sc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Re(33))}function Om(t){return t[rd]||null}var e1=[],bc=-1;function pu(t){return{current:t}}function fn(t){0>bc||(t.current=e1[bc],e1[bc]=null,bc--)}function on(t,e){bc++,e1[bc]=t.current,t.current=e}var au={},Gr=pu(au),Ti=pu(!1),sl=au;function Hc(t,e){var n=t.type.contextTypes;if(!n)return au;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ii(t){return t=t.childContextTypes,t!=null}function Iv(){fn(Ti),fn(Gr)}function yA(t,e,n){if(Gr.current!==au)throw Error(Re(168));on(Gr,e),on(Ti,n)}function qR(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Re(108,hV(t)||"Unknown",i));return Cn({},n,r)}function Cv(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||au,sl=Gr.current,on(Gr,t),on(Ti,Ti.current),!0}function _A(t,e,n){var r=t.stateNode;if(!r)throw Error(Re(169));n?(t=qR(t,e,sl),r.__reactInternalMemoizedMergedChildContext=t,fn(Ti),fn(Gr),on(Gr,t)):fn(Ti),on(Ti,n)}var zs=null,Dm=!1,yw=!1;function WR(t){zs===null?zs=[t]:zs.push(t)}function N6(t){Dm=!0,WR(t)}function gu(){if(!yw&&zs!==null){yw=!0;var t=0,e=Xt;try{var n=zs;for(Xt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}zs=null,Dm=!1}catch(i){throw zs!==null&&(zs=zs.slice(t+1)),gR($S,gu),i}finally{Xt=e,yw=!1}}return null}var Tc=[],Ic=0,xv=null,Nv=0,oo=[],so=0,al=null,Ys=1,Qs="";function qu(t,e){Tc[Ic++]=Nv,Tc[Ic++]=xv,xv=t,Nv=e}function GR(t,e,n){oo[so++]=Ys,oo[so++]=Qs,oo[so++]=al,al=t;var r=Ys;t=Qs;var i=32-Wo(r)-1;r&=~(1<<i),n+=1;var o=32-Wo(e)+i;if(30<o){var u=i-i%5;o=(r&(1<<u)-1).toString(32),r>>=u,i-=u,Ys=1<<32-Wo(e)+i|n<<i|r,Qs=o+t}else Ys=1<<o|n<<i|r,Qs=t}function tb(t){t.return!==null&&(qu(t,1),GR(t,1,0))}function nb(t){for(;t===xv;)xv=Tc[--Ic],Tc[Ic]=null,Nv=Tc[--Ic],Tc[Ic]=null;for(;t===al;)al=oo[--so],oo[so]=null,Qs=oo[--so],oo[so]=null,Ys=oo[--so],oo[so]=null}var qi=null,Ui=null,vn=!1,Lo=null;function $R(t,e){var n=co(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function wA(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,qi=t,Ui=Ya(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,qi=t,Ui=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=al!==null?{id:Ys,overflow:Qs}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=co(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,qi=t,Ui=null,!0):!1;default:return!1}}function t1(t){return(t.mode&1)!==0&&(t.flags&128)===0}function n1(t){if(vn){var e=Ui;if(e){var n=e;if(!wA(t,e)){if(t1(t))throw Error(Re(418));e=Ya(n.nextSibling);var r=qi;e&&wA(t,e)?$R(r,n):(t.flags=t.flags&-4097|2,vn=!1,qi=t)}}else{if(t1(t))throw Error(Re(418));t.flags=t.flags&-4097|2,vn=!1,qi=t}}}function EA(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;qi=t}function _g(t){if(t!==qi)return!1;if(!vn)return EA(t),vn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!XE(t.type,t.memoizedProps)),e&&(e=Ui)){if(t1(t))throw HR(),Error(Re(418));for(;e;)$R(t,e),e=Ya(e.nextSibling)}if(EA(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Re(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ui=Ya(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ui=null}}else Ui=qi?Ya(t.stateNode.nextSibling):null;return!0}function HR(){for(var t=Ui;t;)t=Ya(t.nextSibling)}function Kc(){Ui=qi=null,vn=!1}function rb(t){Lo===null?Lo=[t]:Lo.push(t)}var A6=ga.ReactCurrentBatchConfig;function Ro(t,e){if(t&&t.defaultProps){e=Cn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Av=pu(null),kv=null,Cc=null,ib=null;function ob(){ib=Cc=kv=null}function sb(t){var e=Av.current;fn(Av),t._currentValue=e}function r1(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Fc(t,e){kv=t,ib=Cc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(wi=!0),t.firstContext=null)}function go(t){var e=t._currentValue;if(ib!==t)if(t={context:t,memoizedValue:e,next:null},Cc===null){if(kv===null)throw Error(Re(308));Cc=t,kv.dependencies={lanes:0,firstContext:t}}else Cc=Cc.next=t;return e}var Yu=null;function ab(t){Yu===null?Yu=[t]:Yu.push(t)}function KR(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,ab(e)):(n.next=i.next,i.next=n),e.interleaved=n,sa(t,r)}function sa(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var La=!1;function ub(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function YR(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ra(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Qa(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,$t&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,sa(t,n)}return i=r.interleaved,i===null?(e.next=e,ab(r)):(e.next=i.next,i.next=e),r.interleaved=e,sa(t,n)}function Jg(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,HS(t,n)}}function SA(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var u={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=u:o=o.next=u,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Pv(t,e,n,r){var i=t.updateQueue;La=!1;var o=i.firstBaseUpdate,u=i.lastBaseUpdate,h=i.shared.pending;if(h!==null){i.shared.pending=null;var f=h,v=f.next;f.next=null,u===null?o=v:u.next=v,u=f;var _=t.alternate;_!==null&&(_=_.updateQueue,h=_.lastBaseUpdate,h!==u&&(h===null?_.firstBaseUpdate=v:h.next=v,_.lastBaseUpdate=f))}if(o!==null){var b=i.baseState;u=0,_=v=f=null,h=o;do{var S=h.lane,I=h.eventTime;if((r&S)===S){_!==null&&(_=_.next={eventTime:I,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var M=t,D=h;switch(S=e,I=n,D.tag){case 1:if(M=D.payload,typeof M=="function"){b=M.call(I,b,S);break e}b=M;break e;case 3:M.flags=M.flags&-65537|128;case 0:if(M=D.payload,S=typeof M=="function"?M.call(I,b,S):M,S==null)break e;b=Cn({},b,S);break e;case 2:La=!0}}h.callback!==null&&h.lane!==0&&(t.flags|=64,S=i.effects,S===null?i.effects=[h]:S.push(h))}else I={eventTime:I,lane:S,tag:h.tag,payload:h.payload,callback:h.callback,next:null},_===null?(v=_=I,f=b):_=_.next=I,u|=S;if(h=h.next,h===null){if(h=i.shared.pending,h===null)break;S=h,h=S.next,S.next=null,i.lastBaseUpdate=S,i.shared.pending=null}}while(!0);if(_===null&&(f=b),i.baseState=f,i.firstBaseUpdate=v,i.lastBaseUpdate=_,e=i.shared.interleaved,e!==null){i=e;do u|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);ll|=u,t.lanes=u,t.memoizedState=b}}function bA(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Re(191,i));i.call(r)}}}var QR=new KP.Component().refs;function i1(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Cn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Lm={isMounted:function(t){return(t=t._reactInternals)?Tl(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ci(),i=Ja(t),o=ra(r,i);o.payload=e,n!=null&&(o.callback=n),e=Qa(t,o,i),e!==null&&(Go(e,t,i,r),Jg(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ci(),i=Ja(t),o=ra(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Qa(t,o,i),e!==null&&(Go(e,t,i,r),Jg(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ci(),r=Ja(t),i=ra(n,r);i.tag=2,e!=null&&(i.callback=e),e=Qa(t,i,r),e!==null&&(Go(e,t,r,n),Jg(e,t,r))}};function TA(t,e,n,r,i,o,u){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,u):e.prototype&&e.prototype.isPureReactComponent?!ed(n,r)||!ed(i,o):!0}function XR(t,e,n){var r=!1,i=au,o=e.contextType;return typeof o=="object"&&o!==null?o=go(o):(i=Ii(e)?sl:Gr.current,r=e.contextTypes,o=(r=r!=null)?Hc(t,i):au),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Lm,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function IA(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Lm.enqueueReplaceState(e,e.state,null)}function o1(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=QR,ub(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=go(o):(o=Ii(e)?sl:Gr.current,i.context=Hc(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(i1(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Lm.enqueueReplaceState(i,i.state,null),Pv(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function uf(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Re(309));var r=n.stateNode}if(!r)throw Error(Re(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(u){var h=i.refs;h===QR&&(h=i.refs={}),u===null?delete h[o]:h[o]=u},e._stringRef=o,e)}if(typeof t!="string")throw Error(Re(284));if(!n._owner)throw Error(Re(290,t))}return t}function wg(t,e){throw t=Object.prototype.toString.call(e),Error(Re(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function CA(t){var e=t._init;return e(t._payload)}function JR(t){function e(z,Y){if(t){var K=z.deletions;K===null?(z.deletions=[Y],z.flags|=16):K.push(Y)}}function n(z,Y){if(!t)return null;for(;Y!==null;)e(z,Y),Y=Y.sibling;return null}function r(z,Y){for(z=new Map;Y!==null;)Y.key!==null?z.set(Y.key,Y):z.set(Y.index,Y),Y=Y.sibling;return z}function i(z,Y){return z=Za(z,Y),z.index=0,z.sibling=null,z}function o(z,Y,K){return z.index=K,t?(K=z.alternate,K!==null?(K=K.index,K<Y?(z.flags|=2,Y):K):(z.flags|=2,Y)):(z.flags|=1048576,Y)}function u(z){return t&&z.alternate===null&&(z.flags|=2),z}function h(z,Y,K,ue){return Y===null||Y.tag!==6?(Y=Iw(K,z.mode,ue),Y.return=z,Y):(Y=i(Y,K),Y.return=z,Y)}function f(z,Y,K,ue){var oe=K.type;return oe===yc?_(z,Y,K.props.children,ue,K.key):Y!==null&&(Y.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===Da&&CA(oe)===Y.type)?(ue=i(Y,K.props),ue.ref=uf(z,Y,K),ue.return=z,ue):(ue=iv(K.type,K.key,K.props,null,z.mode,ue),ue.ref=uf(z,Y,K),ue.return=z,ue)}function v(z,Y,K,ue){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==K.containerInfo||Y.stateNode.implementation!==K.implementation?(Y=Cw(K,z.mode,ue),Y.return=z,Y):(Y=i(Y,K.children||[]),Y.return=z,Y)}function _(z,Y,K,ue,oe){return Y===null||Y.tag!==7?(Y=tl(K,z.mode,ue,oe),Y.return=z,Y):(Y=i(Y,K),Y.return=z,Y)}function b(z,Y,K){if(typeof Y=="string"&&Y!==""||typeof Y=="number")return Y=Iw(""+Y,z.mode,K),Y.return=z,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case lg:return K=iv(Y.type,Y.key,Y.props,null,z.mode,K),K.ref=uf(z,null,Y),K.return=z,K;case mc:return Y=Cw(Y,z.mode,K),Y.return=z,Y;case Da:var ue=Y._init;return b(z,ue(Y._payload),K)}if(Sf(Y)||nf(Y))return Y=tl(Y,z.mode,K,null),Y.return=z,Y;wg(z,Y)}return null}function S(z,Y,K,ue){var oe=Y!==null?Y.key:null;if(typeof K=="string"&&K!==""||typeof K=="number")return oe!==null?null:h(z,Y,""+K,ue);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case lg:return K.key===oe?f(z,Y,K,ue):null;case mc:return K.key===oe?v(z,Y,K,ue):null;case Da:return oe=K._init,S(z,Y,oe(K._payload),ue)}if(Sf(K)||nf(K))return oe!==null?null:_(z,Y,K,ue,null);wg(z,K)}return null}function I(z,Y,K,ue,oe){if(typeof ue=="string"&&ue!==""||typeof ue=="number")return z=z.get(K)||null,h(Y,z,""+ue,oe);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case lg:return z=z.get(ue.key===null?K:ue.key)||null,f(Y,z,ue,oe);case mc:return z=z.get(ue.key===null?K:ue.key)||null,v(Y,z,ue,oe);case Da:var fe=ue._init;return I(z,Y,K,fe(ue._payload),oe)}if(Sf(ue)||nf(ue))return z=z.get(K)||null,_(Y,z,ue,oe,null);wg(Y,ue)}return null}function M(z,Y,K,ue){for(var oe=null,fe=null,me=Y,he=Y=0,Z=null;me!==null&&he<K.length;he++){me.index>he?(Z=me,me=null):Z=me.sibling;var Se=S(z,me,K[he],ue);if(Se===null){me===null&&(me=Z);break}t&&me&&Se.alternate===null&&e(z,me),Y=o(Se,Y,he),fe===null?oe=Se:fe.sibling=Se,fe=Se,me=Z}if(he===K.length)return n(z,me),vn&&qu(z,he),oe;if(me===null){for(;he<K.length;he++)me=b(z,K[he],ue),me!==null&&(Y=o(me,Y,he),fe===null?oe=me:fe.sibling=me,fe=me);return vn&&qu(z,he),oe}for(me=r(z,me);he<K.length;he++)Z=I(me,z,he,K[he],ue),Z!==null&&(t&&Z.alternate!==null&&me.delete(Z.key===null?he:Z.key),Y=o(Z,Y,he),fe===null?oe=Z:fe.sibling=Z,fe=Z);return t&&me.forEach(function(Ue){return e(z,Ue)}),vn&&qu(z,he),oe}function D(z,Y,K,ue){var oe=nf(K);if(typeof oe!="function")throw Error(Re(150));if(K=oe.call(K),K==null)throw Error(Re(151));for(var fe=oe=null,me=Y,he=Y=0,Z=null,Se=K.next();me!==null&&!Se.done;he++,Se=K.next()){me.index>he?(Z=me,me=null):Z=me.sibling;var Ue=S(z,me,Se.value,ue);if(Ue===null){me===null&&(me=Z);break}t&&me&&Ue.alternate===null&&e(z,me),Y=o(Ue,Y,he),fe===null?oe=Ue:fe.sibling=Ue,fe=Ue,me=Z}if(Se.done)return n(z,me),vn&&qu(z,he),oe;if(me===null){for(;!Se.done;he++,Se=K.next())Se=b(z,Se.value,ue),Se!==null&&(Y=o(Se,Y,he),fe===null?oe=Se:fe.sibling=Se,fe=Se);return vn&&qu(z,he),oe}for(me=r(z,me);!Se.done;he++,Se=K.next())Se=I(me,z,he,Se.value,ue),Se!==null&&(t&&Se.alternate!==null&&me.delete(Se.key===null?he:Se.key),Y=o(Se,Y,he),fe===null?oe=Se:fe.sibling=Se,fe=Se);return t&&me.forEach(function(Ge){return e(z,Ge)}),vn&&qu(z,he),oe}function ne(z,Y,K,ue){if(typeof K=="object"&&K!==null&&K.type===yc&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case lg:e:{for(var oe=K.key,fe=Y;fe!==null;){if(fe.key===oe){if(oe=K.type,oe===yc){if(fe.tag===7){n(z,fe.sibling),Y=i(fe,K.props.children),Y.return=z,z=Y;break e}}else if(fe.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===Da&&CA(oe)===fe.type){n(z,fe.sibling),Y=i(fe,K.props),Y.ref=uf(z,fe,K),Y.return=z,z=Y;break e}n(z,fe);break}else e(z,fe);fe=fe.sibling}K.type===yc?(Y=tl(K.props.children,z.mode,ue,K.key),Y.return=z,z=Y):(ue=iv(K.type,K.key,K.props,null,z.mode,ue),ue.ref=uf(z,Y,K),ue.return=z,z=ue)}return u(z);case mc:e:{for(fe=K.key;Y!==null;){if(Y.key===fe)if(Y.tag===4&&Y.stateNode.containerInfo===K.containerInfo&&Y.stateNode.implementation===K.implementation){n(z,Y.sibling),Y=i(Y,K.children||[]),Y.return=z,z=Y;break e}else{n(z,Y);break}else e(z,Y);Y=Y.sibling}Y=Cw(K,z.mode,ue),Y.return=z,z=Y}return u(z);case Da:return fe=K._init,ne(z,Y,fe(K._payload),ue)}if(Sf(K))return M(z,Y,K,ue);if(nf(K))return D(z,Y,K,ue);wg(z,K)}return typeof K=="string"&&K!==""||typeof K=="number"?(K=""+K,Y!==null&&Y.tag===6?(n(z,Y.sibling),Y=i(Y,K),Y.return=z,z=Y):(n(z,Y),Y=Iw(K,z.mode,ue),Y.return=z,z=Y),u(z)):n(z,Y)}return ne}var Yc=JR(!0),ZR=JR(!1),qd={},ms=pu(qd),id=pu(qd),od=pu(qd);function Qu(t){if(t===qd)throw Error(Re(174));return t}function lb(t,e){switch(on(od,e),on(id,t),on(ms,qd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:FE(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=FE(e,t)}fn(ms),on(ms,e)}function Qc(){fn(ms),fn(id),fn(od)}function eO(t){Qu(od.current);var e=Qu(ms.current),n=FE(e,t.type);e!==n&&(on(id,t),on(ms,n))}function cb(t){id.current===t&&(fn(ms),fn(id))}var Tn=pu(0);function Rv(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var _w=[];function hb(){for(var t=0;t<_w.length;t++)_w[t]._workInProgressVersionPrimary=null;_w.length=0}var Zg=ga.ReactCurrentDispatcher,ww=ga.ReactCurrentBatchConfig,ul=0,In=null,ur=null,mr=null,Ov=!1,Df=!1,sd=0,k6=0;function Fr(){throw Error(Re(321))}function fb(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ko(t[n],e[n]))return!1;return!0}function db(t,e,n,r,i,o){if(ul=o,In=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Zg.current=t===null||t.memoizedState===null?D6:L6,t=n(r,i),Df){o=0;do{if(Df=!1,sd=0,25<=o)throw Error(Re(301));o+=1,mr=ur=null,e.updateQueue=null,Zg.current=M6,t=n(r,i)}while(Df)}if(Zg.current=Dv,e=ur!==null&&ur.next!==null,ul=0,mr=ur=In=null,Ov=!1,e)throw Error(Re(300));return t}function pb(){var t=sd!==0;return sd=0,t}function us(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mr===null?In.memoizedState=mr=t:mr=mr.next=t,mr}function vo(){if(ur===null){var t=In.alternate;t=t!==null?t.memoizedState:null}else t=ur.next;var e=mr===null?In.memoizedState:mr.next;if(e!==null)mr=e,ur=t;else{if(t===null)throw Error(Re(310));ur=t,t={memoizedState:ur.memoizedState,baseState:ur.baseState,baseQueue:ur.baseQueue,queue:ur.queue,next:null},mr===null?In.memoizedState=mr=t:mr=mr.next=t}return mr}function ad(t,e){return typeof e=="function"?e(t):e}function Ew(t){var e=vo(),n=e.queue;if(n===null)throw Error(Re(311));n.lastRenderedReducer=t;var r=ur,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var h=u=null,f=null,v=o;do{var _=v.lane;if((ul&_)===_)f!==null&&(f=f.next={lane:0,action:v.action,hasEagerState:v.hasEagerState,eagerState:v.eagerState,next:null}),r=v.hasEagerState?v.eagerState:t(r,v.action);else{var b={lane:_,action:v.action,hasEagerState:v.hasEagerState,eagerState:v.eagerState,next:null};f===null?(h=f=b,u=r):f=f.next=b,In.lanes|=_,ll|=_}v=v.next}while(v!==null&&v!==o);f===null?u=r:f.next=h,Ko(r,e.memoizedState)||(wi=!0),e.memoizedState=r,e.baseState=u,e.baseQueue=f,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,In.lanes|=o,ll|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Sw(t){var e=vo(),n=e.queue;if(n===null)throw Error(Re(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var u=i=i.next;do o=t(o,u.action),u=u.next;while(u!==i);Ko(o,e.memoizedState)||(wi=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function tO(){}function nO(t,e){var n=In,r=vo(),i=e(),o=!Ko(r.memoizedState,i);if(o&&(r.memoizedState=i,wi=!0),r=r.queue,gb(oO.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||mr!==null&&mr.memoizedState.tag&1){if(n.flags|=2048,ud(9,iO.bind(null,n,r,i,e),void 0,null),Sr===null)throw Error(Re(349));ul&30||rO(n,e,i)}return i}function rO(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=In.updateQueue,e===null?(e={lastEffect:null,stores:null},In.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function iO(t,e,n,r){e.value=n,e.getSnapshot=r,sO(e)&&aO(t)}function oO(t,e,n){return n(function(){sO(e)&&aO(t)})}function sO(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ko(t,n)}catch{return!0}}function aO(t){var e=sa(t,1);e!==null&&Go(e,t,1,-1)}function xA(t){var e=us();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ad,lastRenderedState:t},e.queue=t,t=t.dispatch=O6.bind(null,In,t),[e.memoizedState,t]}function ud(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=In.updateQueue,e===null?(e={lastEffect:null,stores:null},In.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function uO(){return vo().memoizedState}function ev(t,e,n,r){var i=us();In.flags|=t,i.memoizedState=ud(1|e,n,void 0,r===void 0?null:r)}function Mm(t,e,n,r){var i=vo();r=r===void 0?null:r;var o=void 0;if(ur!==null){var u=ur.memoizedState;if(o=u.destroy,r!==null&&fb(r,u.deps)){i.memoizedState=ud(e,n,o,r);return}}In.flags|=t,i.memoizedState=ud(1|e,n,o,r)}function NA(t,e){return ev(8390656,8,t,e)}function gb(t,e){return Mm(2048,8,t,e)}function lO(t,e){return Mm(4,2,t,e)}function cO(t,e){return Mm(4,4,t,e)}function hO(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function fO(t,e,n){return n=n!=null?n.concat([t]):null,Mm(4,4,hO.bind(null,e,t),n)}function vb(){}function dO(t,e){var n=vo();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&fb(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function pO(t,e){var n=vo();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&fb(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function gO(t,e,n){return ul&21?(Ko(n,e)||(n=yR(),In.lanes|=n,ll|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,wi=!0),t.memoizedState=n)}function P6(t,e){var n=Xt;Xt=n!==0&&4>n?n:4,t(!0);var r=ww.transition;ww.transition={};try{t(!1),e()}finally{Xt=n,ww.transition=r}}function vO(){return vo().memoizedState}function R6(t,e,n){var r=Ja(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},mO(t))yO(e,n);else if(n=KR(t,e,n,r),n!==null){var i=ci();Go(n,t,r,i),_O(n,e,r)}}function O6(t,e,n){var r=Ja(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(mO(t))yO(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var u=e.lastRenderedState,h=o(u,n);if(i.hasEagerState=!0,i.eagerState=h,Ko(h,u)){var f=e.interleaved;f===null?(i.next=i,ab(e)):(i.next=f.next,f.next=i),e.interleaved=i;return}}catch{}finally{}n=KR(t,e,i,r),n!==null&&(i=ci(),Go(n,t,r,i),_O(n,e,r))}}function mO(t){var e=t.alternate;return t===In||e!==null&&e===In}function yO(t,e){Df=Ov=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function _O(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,HS(t,n)}}var Dv={readContext:go,useCallback:Fr,useContext:Fr,useEffect:Fr,useImperativeHandle:Fr,useInsertionEffect:Fr,useLayoutEffect:Fr,useMemo:Fr,useReducer:Fr,useRef:Fr,useState:Fr,useDebugValue:Fr,useDeferredValue:Fr,useTransition:Fr,useMutableSource:Fr,useSyncExternalStore:Fr,useId:Fr,unstable_isNewReconciler:!1},D6={readContext:go,useCallback:function(t,e){return us().memoizedState=[t,e===void 0?null:e],t},useContext:go,useEffect:NA,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ev(4194308,4,hO.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ev(4194308,4,t,e)},useInsertionEffect:function(t,e){return ev(4,2,t,e)},useMemo:function(t,e){var n=us();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=us();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=R6.bind(null,In,t),[r.memoizedState,t]},useRef:function(t){var e=us();return t={current:t},e.memoizedState=t},useState:xA,useDebugValue:vb,useDeferredValue:function(t){return us().memoizedState=t},useTransition:function(){var t=xA(!1),e=t[0];return t=P6.bind(null,t[1]),us().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=In,i=us();if(vn){if(n===void 0)throw Error(Re(407));n=n()}else{if(n=e(),Sr===null)throw Error(Re(349));ul&30||rO(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,NA(oO.bind(null,r,o,t),[t]),r.flags|=2048,ud(9,iO.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=us(),e=Sr.identifierPrefix;if(vn){var n=Qs,r=Ys;n=(r&~(1<<32-Wo(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=sd++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=k6++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},L6={readContext:go,useCallback:dO,useContext:go,useEffect:gb,useImperativeHandle:fO,useInsertionEffect:lO,useLayoutEffect:cO,useMemo:pO,useReducer:Ew,useRef:uO,useState:function(){return Ew(ad)},useDebugValue:vb,useDeferredValue:function(t){var e=vo();return gO(e,ur.memoizedState,t)},useTransition:function(){var t=Ew(ad)[0],e=vo().memoizedState;return[t,e]},useMutableSource:tO,useSyncExternalStore:nO,useId:vO,unstable_isNewReconciler:!1},M6={readContext:go,useCallback:dO,useContext:go,useEffect:gb,useImperativeHandle:fO,useInsertionEffect:lO,useLayoutEffect:cO,useMemo:pO,useReducer:Sw,useRef:uO,useState:function(){return Sw(ad)},useDebugValue:vb,useDeferredValue:function(t){var e=vo();return ur===null?e.memoizedState=t:gO(e,ur.memoizedState,t)},useTransition:function(){var t=Sw(ad)[0],e=vo().memoizedState;return[t,e]},useMutableSource:tO,useSyncExternalStore:nO,useId:vO,unstable_isNewReconciler:!1};function Xc(t,e){try{var n="",r=e;do n+=cV(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function bw(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function s1(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var F6=typeof WeakMap=="function"?WeakMap:Map;function wO(t,e,n){n=ra(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Mv||(Mv=!0,v1=r),s1(t,e)},n}function EO(t,e,n){n=ra(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){s1(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){s1(t,e),typeof r!="function"&&(Xa===null?Xa=new Set([this]):Xa.add(this));var u=e.stack;this.componentDidCatch(e.value,{componentStack:u!==null?u:""})}),n}function AA(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new F6;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=X6.bind(null,t,e,n),e.then(t,t))}function kA(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function PA(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ra(-1,1),e.tag=2,Qa(n,e,1))),n.lanes|=1),t)}var j6=ga.ReactCurrentOwner,wi=!1;function ii(t,e,n,r){e.child=t===null?ZR(e,null,n,r):Yc(e,t.child,n,r)}function RA(t,e,n,r,i){n=n.render;var o=e.ref;return Fc(e,i),r=db(t,e,n,r,o,i),n=pb(),t!==null&&!wi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,aa(t,e,i)):(vn&&n&&tb(e),e.flags|=1,ii(t,e,r,i),e.child)}function OA(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!Tb(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,SO(t,e,o,r,i)):(t=iv(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var u=o.memoizedProps;if(n=n.compare,n=n!==null?n:ed,n(u,r)&&t.ref===e.ref)return aa(t,e,i)}return e.flags|=1,t=Za(o,r),t.ref=e.ref,t.return=e,e.child=t}function SO(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(ed(o,r)&&t.ref===e.ref)if(wi=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(wi=!0);else return e.lanes=t.lanes,aa(t,e,i)}return a1(t,e,n,r,i)}function bO(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},on(Nc,Oi),Oi|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,on(Nc,Oi),Oi|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,on(Nc,Oi),Oi|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,on(Nc,Oi),Oi|=r;return ii(t,e,i,n),e.child}function TO(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function a1(t,e,n,r,i){var o=Ii(n)?sl:Gr.current;return o=Hc(e,o),Fc(e,i),n=db(t,e,n,r,o,i),r=pb(),t!==null&&!wi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,aa(t,e,i)):(vn&&r&&tb(e),e.flags|=1,ii(t,e,n,i),e.child)}function DA(t,e,n,r,i){if(Ii(n)){var o=!0;Cv(e)}else o=!1;if(Fc(e,i),e.stateNode===null)tv(t,e),XR(e,n,r),o1(e,n,r,i),r=!0;else if(t===null){var u=e.stateNode,h=e.memoizedProps;u.props=h;var f=u.context,v=n.contextType;typeof v=="object"&&v!==null?v=go(v):(v=Ii(n)?sl:Gr.current,v=Hc(e,v));var _=n.getDerivedStateFromProps,b=typeof _=="function"||typeof u.getSnapshotBeforeUpdate=="function";b||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(h!==r||f!==v)&&IA(e,u,r,v),La=!1;var S=e.memoizedState;u.state=S,Pv(e,r,u,i),f=e.memoizedState,h!==r||S!==f||Ti.current||La?(typeof _=="function"&&(i1(e,n,_,r),f=e.memoizedState),(h=La||TA(e,n,h,r,S,f,v))?(b||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(e.flags|=4194308)):(typeof u.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=f),u.props=r,u.state=f,u.context=v,r=h):(typeof u.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{u=e.stateNode,YR(t,e),h=e.memoizedProps,v=e.type===e.elementType?h:Ro(e.type,h),u.props=v,b=e.pendingProps,S=u.context,f=n.contextType,typeof f=="object"&&f!==null?f=go(f):(f=Ii(n)?sl:Gr.current,f=Hc(e,f));var I=n.getDerivedStateFromProps;(_=typeof I=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(h!==b||S!==f)&&IA(e,u,r,f),La=!1,S=e.memoizedState,u.state=S,Pv(e,r,u,i);var M=e.memoizedState;h!==b||S!==M||Ti.current||La?(typeof I=="function"&&(i1(e,n,I,r),M=e.memoizedState),(v=La||TA(e,n,v,r,S,M,f)||!1)?(_||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(r,M,f),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(r,M,f)),typeof u.componentDidUpdate=="function"&&(e.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof u.componentDidUpdate!="function"||h===t.memoizedProps&&S===t.memoizedState||(e.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&S===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=M),u.props=r,u.state=M,u.context=f,r=v):(typeof u.componentDidUpdate!="function"||h===t.memoizedProps&&S===t.memoizedState||(e.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&S===t.memoizedState||(e.flags|=1024),r=!1)}return u1(t,e,n,r,o,i)}function u1(t,e,n,r,i,o){TO(t,e);var u=(e.flags&128)!==0;if(!r&&!u)return i&&_A(e,n,!1),aa(t,e,o);r=e.stateNode,j6.current=e;var h=u&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&u?(e.child=Yc(e,t.child,null,o),e.child=Yc(e,null,h,o)):ii(t,e,h,o),e.memoizedState=r.state,i&&_A(e,n,!0),e.child}function IO(t){var e=t.stateNode;e.pendingContext?yA(t,e.pendingContext,e.pendingContext!==e.context):e.context&&yA(t,e.context,!1),lb(t,e.containerInfo)}function LA(t,e,n,r,i){return Kc(),rb(i),e.flags|=256,ii(t,e,n,r),e.child}var l1={dehydrated:null,treeContext:null,retryLane:0};function c1(t){return{baseLanes:t,cachePool:null,transitions:null}}function CO(t,e,n){var r=e.pendingProps,i=Tn.current,o=!1,u=(e.flags&128)!==0,h;if((h=u)||(h=t!==null&&t.memoizedState===null?!1:(i&2)!==0),h?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),on(Tn,i&1),t===null)return n1(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(u=r.children,t=r.fallback,o?(r=e.mode,o=e.child,u={mode:"hidden",children:u},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=u):o=Um(u,r,0,null),t=tl(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=c1(n),e.memoizedState=l1,t):mb(e,u));if(i=t.memoizedState,i!==null&&(h=i.dehydrated,h!==null))return U6(t,e,u,r,h,i,n);if(o){o=r.fallback,u=e.mode,i=t.child,h=i.sibling;var f={mode:"hidden",children:r.children};return!(u&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=f,e.deletions=null):(r=Za(i,f),r.subtreeFlags=i.subtreeFlags&14680064),h!==null?o=Za(h,o):(o=tl(o,u,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,u=t.child.memoizedState,u=u===null?c1(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},o.memoizedState=u,o.childLanes=t.childLanes&~n,e.memoizedState=l1,r}return o=t.child,t=o.sibling,r=Za(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function mb(t,e){return e=Um({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Eg(t,e,n,r){return r!==null&&rb(r),Yc(e,t.child,null,n),t=mb(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function U6(t,e,n,r,i,o,u){if(n)return e.flags&256?(e.flags&=-257,r=bw(Error(Re(422))),Eg(t,e,u,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=Um({mode:"visible",children:r.children},i,0,null),o=tl(o,i,u,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Yc(e,t.child,null,u),e.child.memoizedState=c1(u),e.memoizedState=l1,o);if(!(e.mode&1))return Eg(t,e,u,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var h=r.dgst;return r=h,o=Error(Re(419)),r=bw(o,r,void 0),Eg(t,e,u,r)}if(h=(u&t.childLanes)!==0,wi||h){if(r=Sr,r!==null){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|u)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,sa(t,i),Go(r,t,i,-1))}return bb(),r=bw(Error(Re(421))),Eg(t,e,u,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=J6.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Ui=Ya(i.nextSibling),qi=e,vn=!0,Lo=null,t!==null&&(oo[so++]=Ys,oo[so++]=Qs,oo[so++]=al,Ys=t.id,Qs=t.overflow,al=e),e=mb(e,r.children),e.flags|=4096,e)}function MA(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),r1(t.return,e,n)}function Tw(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function xO(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(ii(t,e,r.children,n),r=Tn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&MA(t,n,e);else if(t.tag===19)MA(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(on(Tn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Rv(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Tw(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Rv(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Tw(e,!0,n,null,o);break;case"together":Tw(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function tv(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function aa(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ll|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Re(153));if(e.child!==null){for(t=e.child,n=Za(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Za(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function V6(t,e,n){switch(e.tag){case 3:IO(e),Kc();break;case 5:eO(e);break;case 1:Ii(e.type)&&Cv(e);break;case 4:lb(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;on(Av,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(on(Tn,Tn.current&1),e.flags|=128,null):n&e.child.childLanes?CO(t,e,n):(on(Tn,Tn.current&1),t=aa(t,e,n),t!==null?t.sibling:null);on(Tn,Tn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return xO(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),on(Tn,Tn.current),r)break;return null;case 22:case 23:return e.lanes=0,bO(t,e,n)}return aa(t,e,n)}var NO,h1,AO,kO;NO=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};h1=function(){};AO=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Qu(ms.current);var o=null;switch(n){case"input":i=OE(t,i),r=OE(t,r),o=[];break;case"select":i=Cn({},i,{value:void 0}),r=Cn({},r,{value:void 0}),o=[];break;case"textarea":i=ME(t,i),r=ME(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Tv)}jE(n,r);var u;n=null;for(v in i)if(!r.hasOwnProperty(v)&&i.hasOwnProperty(v)&&i[v]!=null)if(v==="style"){var h=i[v];for(u in h)h.hasOwnProperty(u)&&(n||(n={}),n[u]="")}else v!=="dangerouslySetInnerHTML"&&v!=="children"&&v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(Hf.hasOwnProperty(v)?o||(o=[]):(o=o||[]).push(v,null));for(v in r){var f=r[v];if(h=i!=null?i[v]:void 0,r.hasOwnProperty(v)&&f!==h&&(f!=null||h!=null))if(v==="style")if(h){for(u in h)!h.hasOwnProperty(u)||f&&f.hasOwnProperty(u)||(n||(n={}),n[u]="");for(u in f)f.hasOwnProperty(u)&&h[u]!==f[u]&&(n||(n={}),n[u]=f[u])}else n||(o||(o=[]),o.push(v,n)),n=f;else v==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,h=h?h.__html:void 0,f!=null&&h!==f&&(o=o||[]).push(v,f)):v==="children"?typeof f!="string"&&typeof f!="number"||(o=o||[]).push(v,""+f):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&(Hf.hasOwnProperty(v)?(f!=null&&v==="onScroll"&&ln("scroll",t),o||h===f||(o=[])):(o=o||[]).push(v,f))}n&&(o=o||[]).push("style",n);var v=o;(e.updateQueue=v)&&(e.flags|=4)}};kO=function(t,e,n,r){n!==r&&(e.flags|=4)};function lf(t,e){if(!vn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function jr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function B6(t,e,n){var r=e.pendingProps;switch(nb(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jr(e),null;case 1:return Ii(e.type)&&Iv(),jr(e),null;case 3:return r=e.stateNode,Qc(),fn(Ti),fn(Gr),hb(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(_g(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Lo!==null&&(_1(Lo),Lo=null))),h1(t,e),jr(e),null;case 5:cb(e);var i=Qu(od.current);if(n=e.type,t!==null&&e.stateNode!=null)AO(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Re(166));return jr(e),null}if(t=Qu(ms.current),_g(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[hs]=e,r[rd]=o,t=(e.mode&1)!==0,n){case"dialog":ln("cancel",r),ln("close",r);break;case"iframe":case"object":case"embed":ln("load",r);break;case"video":case"audio":for(i=0;i<Tf.length;i++)ln(Tf[i],r);break;case"source":ln("error",r);break;case"img":case"image":case"link":ln("error",r),ln("load",r);break;case"details":ln("toggle",r);break;case"input":GN(r,o),ln("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},ln("invalid",r);break;case"textarea":HN(r,o),ln("invalid",r)}jE(n,o),i=null;for(var u in o)if(o.hasOwnProperty(u)){var h=o[u];u==="children"?typeof h=="string"?r.textContent!==h&&(o.suppressHydrationWarning!==!0&&yg(r.textContent,h,t),i=["children",h]):typeof h=="number"&&r.textContent!==""+h&&(o.suppressHydrationWarning!==!0&&yg(r.textContent,h,t),i=["children",""+h]):Hf.hasOwnProperty(u)&&h!=null&&u==="onScroll"&&ln("scroll",r)}switch(n){case"input":cg(r),$N(r,o,!0);break;case"textarea":cg(r),KN(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Tv)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{u=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=rR(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=u.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=u.createElement(n,{is:r.is}):(t=u.createElement(n),n==="select"&&(u=t,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):t=u.createElementNS(t,n),t[hs]=e,t[rd]=r,NO(t,e,!1,!1),e.stateNode=t;e:{switch(u=UE(n,r),n){case"dialog":ln("cancel",t),ln("close",t),i=r;break;case"iframe":case"object":case"embed":ln("load",t),i=r;break;case"video":case"audio":for(i=0;i<Tf.length;i++)ln(Tf[i],t);i=r;break;case"source":ln("error",t),i=r;break;case"img":case"image":case"link":ln("error",t),ln("load",t),i=r;break;case"details":ln("toggle",t),i=r;break;case"input":GN(t,r),i=OE(t,r),ln("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Cn({},r,{value:void 0}),ln("invalid",t);break;case"textarea":HN(t,r),i=ME(t,r),ln("invalid",t);break;default:i=r}jE(n,i),h=i;for(o in h)if(h.hasOwnProperty(o)){var f=h[o];o==="style"?sR(t,f):o==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,f!=null&&iR(t,f)):o==="children"?typeof f=="string"?(n!=="textarea"||f!=="")&&Kf(t,f):typeof f=="number"&&Kf(t,""+f):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Hf.hasOwnProperty(o)?f!=null&&o==="onScroll"&&ln("scroll",t):f!=null&&BS(t,o,f,u))}switch(n){case"input":cg(t),$N(t,r,!1);break;case"textarea":cg(t),KN(t);break;case"option":r.value!=null&&t.setAttribute("value",""+su(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Oc(t,!!r.multiple,o,!1):r.defaultValue!=null&&Oc(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Tv)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return jr(e),null;case 6:if(t&&e.stateNode!=null)kO(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Re(166));if(n=Qu(od.current),Qu(ms.current),_g(e)){if(r=e.stateNode,n=e.memoizedProps,r[hs]=e,(o=r.nodeValue!==n)&&(t=qi,t!==null))switch(t.tag){case 3:yg(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&yg(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[hs]=e,e.stateNode=r}return jr(e),null;case 13:if(fn(Tn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(vn&&Ui!==null&&e.mode&1&&!(e.flags&128))HR(),Kc(),e.flags|=98560,o=!1;else if(o=_g(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(Re(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Re(317));o[hs]=e}else Kc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;jr(e),o=!1}else Lo!==null&&(_1(Lo),Lo=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Tn.current&1?cr===0&&(cr=3):bb())),e.updateQueue!==null&&(e.flags|=4),jr(e),null);case 4:return Qc(),h1(t,e),t===null&&td(e.stateNode.containerInfo),jr(e),null;case 10:return sb(e.type._context),jr(e),null;case 17:return Ii(e.type)&&Iv(),jr(e),null;case 19:if(fn(Tn),o=e.memoizedState,o===null)return jr(e),null;if(r=(e.flags&128)!==0,u=o.rendering,u===null)if(r)lf(o,!1);else{if(cr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(u=Rv(t),u!==null){for(e.flags|=128,lf(o,!1),r=u.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,u=o.alternate,u===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,t=u.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return on(Tn,Tn.current&1|2),e.child}t=t.sibling}o.tail!==null&&Bn()>Jc&&(e.flags|=128,r=!0,lf(o,!1),e.lanes=4194304)}else{if(!r)if(t=Rv(u),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),lf(o,!0),o.tail===null&&o.tailMode==="hidden"&&!u.alternate&&!vn)return jr(e),null}else 2*Bn()-o.renderingStartTime>Jc&&n!==1073741824&&(e.flags|=128,r=!0,lf(o,!1),e.lanes=4194304);o.isBackwards?(u.sibling=e.child,e.child=u):(n=o.last,n!==null?n.sibling=u:e.child=u,o.last=u)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Bn(),e.sibling=null,n=Tn.current,on(Tn,r?n&1|2:n&1),e):(jr(e),null);case 22:case 23:return Sb(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Oi&1073741824&&(jr(e),e.subtreeFlags&6&&(e.flags|=8192)):jr(e),null;case 24:return null;case 25:return null}throw Error(Re(156,e.tag))}function z6(t,e){switch(nb(e),e.tag){case 1:return Ii(e.type)&&Iv(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Qc(),fn(Ti),fn(Gr),hb(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return cb(e),null;case 13:if(fn(Tn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Re(340));Kc()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return fn(Tn),null;case 4:return Qc(),null;case 10:return sb(e.type._context),null;case 22:case 23:return Sb(),null;case 24:return null;default:return null}}var Sg=!1,Ur=!1,q6=typeof WeakSet=="function"?WeakSet:Set,Ye=null;function xc(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){On(t,e,r)}else n.current=null}function f1(t,e,n){try{n()}catch(r){On(t,e,r)}}var FA=!1;function W6(t,e){if(YE=Ev,t=DR(),eb(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var u=0,h=-1,f=-1,v=0,_=0,b=t,S=null;t:for(;;){for(var I;b!==n||i!==0&&b.nodeType!==3||(h=u+i),b!==o||r!==0&&b.nodeType!==3||(f=u+r),b.nodeType===3&&(u+=b.nodeValue.length),(I=b.firstChild)!==null;)S=b,b=I;for(;;){if(b===t)break t;if(S===n&&++v===i&&(h=u),S===o&&++_===r&&(f=u),(I=b.nextSibling)!==null)break;b=S,S=b.parentNode}b=I}n=h===-1||f===-1?null:{start:h,end:f}}else n=null}n=n||{start:0,end:0}}else n=null;for(QE={focusedElem:t,selectionRange:n},Ev=!1,Ye=e;Ye!==null;)if(e=Ye,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ye=t;else for(;Ye!==null;){e=Ye;try{var M=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(M!==null){var D=M.memoizedProps,ne=M.memoizedState,z=e.stateNode,Y=z.getSnapshotBeforeUpdate(e.elementType===e.type?D:Ro(e.type,D),ne);z.__reactInternalSnapshotBeforeUpdate=Y}break;case 3:var K=e.stateNode.containerInfo;K.nodeType===1?K.textContent="":K.nodeType===9&&K.documentElement&&K.removeChild(K.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Re(163))}}catch(ue){On(e,e.return,ue)}if(t=e.sibling,t!==null){t.return=e.return,Ye=t;break}Ye=e.return}return M=FA,FA=!1,M}function Lf(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&f1(e,n,o)}i=i.next}while(i!==r)}}function Fm(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function d1(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function PO(t){var e=t.alternate;e!==null&&(t.alternate=null,PO(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[hs],delete e[rd],delete e[ZE],delete e[C6],delete e[x6])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function RO(t){return t.tag===5||t.tag===3||t.tag===4}function jA(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||RO(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function p1(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Tv));else if(r!==4&&(t=t.child,t!==null))for(p1(t,e,n),t=t.sibling;t!==null;)p1(t,e,n),t=t.sibling}function g1(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(g1(t,e,n),t=t.sibling;t!==null;)g1(t,e,n),t=t.sibling}var xr=null,Do=!1;function Aa(t,e,n){for(n=n.child;n!==null;)OO(t,e,n),n=n.sibling}function OO(t,e,n){if(vs&&typeof vs.onCommitFiberUnmount=="function")try{vs.onCommitFiberUnmount(Am,n)}catch{}switch(n.tag){case 5:Ur||xc(n,e);case 6:var r=xr,i=Do;xr=null,Aa(t,e,n),xr=r,Do=i,xr!==null&&(Do?(t=xr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):xr.removeChild(n.stateNode));break;case 18:xr!==null&&(Do?(t=xr,n=n.stateNode,t.nodeType===8?mw(t.parentNode,n):t.nodeType===1&&mw(t,n),Jf(t)):mw(xr,n.stateNode));break;case 4:r=xr,i=Do,xr=n.stateNode.containerInfo,Do=!0,Aa(t,e,n),xr=r,Do=i;break;case 0:case 11:case 14:case 15:if(!Ur&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,u=o.destroy;o=o.tag,u!==void 0&&(o&2||o&4)&&f1(n,e,u),i=i.next}while(i!==r)}Aa(t,e,n);break;case 1:if(!Ur&&(xc(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(h){On(n,e,h)}Aa(t,e,n);break;case 21:Aa(t,e,n);break;case 22:n.mode&1?(Ur=(r=Ur)||n.memoizedState!==null,Aa(t,e,n),Ur=r):Aa(t,e,n);break;default:Aa(t,e,n)}}function UA(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new q6),e.forEach(function(r){var i=Z6.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ko(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,u=e,h=u;e:for(;h!==null;){switch(h.tag){case 5:xr=h.stateNode,Do=!1;break e;case 3:xr=h.stateNode.containerInfo,Do=!0;break e;case 4:xr=h.stateNode.containerInfo,Do=!0;break e}h=h.return}if(xr===null)throw Error(Re(160));OO(o,u,i),xr=null,Do=!1;var f=i.alternate;f!==null&&(f.return=null),i.return=null}catch(v){On(i,e,v)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)DO(e,t),e=e.sibling}function DO(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ko(e,t),as(t),r&4){try{Lf(3,t,t.return),Fm(3,t)}catch(D){On(t,t.return,D)}try{Lf(5,t,t.return)}catch(D){On(t,t.return,D)}}break;case 1:ko(e,t),as(t),r&512&&n!==null&&xc(n,n.return);break;case 5:if(ko(e,t),as(t),r&512&&n!==null&&xc(n,n.return),t.flags&32){var i=t.stateNode;try{Kf(i,"")}catch(D){On(t,t.return,D)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,u=n!==null?n.memoizedProps:o,h=t.type,f=t.updateQueue;if(t.updateQueue=null,f!==null)try{h==="input"&&o.type==="radio"&&o.name!=null&&tR(i,o),UE(h,u);var v=UE(h,o);for(u=0;u<f.length;u+=2){var _=f[u],b=f[u+1];_==="style"?sR(i,b):_==="dangerouslySetInnerHTML"?iR(i,b):_==="children"?Kf(i,b):BS(i,_,b,v)}switch(h){case"input":DE(i,o);break;case"textarea":nR(i,o);break;case"select":var S=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var I=o.value;I!=null?Oc(i,!!o.multiple,I,!1):S!==!!o.multiple&&(o.defaultValue!=null?Oc(i,!!o.multiple,o.defaultValue,!0):Oc(i,!!o.multiple,o.multiple?[]:"",!1))}i[rd]=o}catch(D){On(t,t.return,D)}}break;case 6:if(ko(e,t),as(t),r&4){if(t.stateNode===null)throw Error(Re(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(D){On(t,t.return,D)}}break;case 3:if(ko(e,t),as(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Jf(e.containerInfo)}catch(D){On(t,t.return,D)}break;case 4:ko(e,t),as(t);break;case 13:ko(e,t),as(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(wb=Bn())),r&4&&UA(t);break;case 22:if(_=n!==null&&n.memoizedState!==null,t.mode&1?(Ur=(v=Ur)||_,ko(e,t),Ur=v):ko(e,t),as(t),r&8192){if(v=t.memoizedState!==null,(t.stateNode.isHidden=v)&&!_&&t.mode&1)for(Ye=t,_=t.child;_!==null;){for(b=Ye=_;Ye!==null;){switch(S=Ye,I=S.child,S.tag){case 0:case 11:case 14:case 15:Lf(4,S,S.return);break;case 1:xc(S,S.return);var M=S.stateNode;if(typeof M.componentWillUnmount=="function"){r=S,n=S.return;try{e=r,M.props=e.memoizedProps,M.state=e.memoizedState,M.componentWillUnmount()}catch(D){On(r,n,D)}}break;case 5:xc(S,S.return);break;case 22:if(S.memoizedState!==null){BA(b);continue}}I!==null?(I.return=S,Ye=I):BA(b)}_=_.sibling}e:for(_=null,b=t;;){if(b.tag===5){if(_===null){_=b;try{i=b.stateNode,v?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(h=b.stateNode,f=b.memoizedProps.style,u=f!=null&&f.hasOwnProperty("display")?f.display:null,h.style.display=oR("display",u))}catch(D){On(t,t.return,D)}}}else if(b.tag===6){if(_===null)try{b.stateNode.nodeValue=v?"":b.memoizedProps}catch(D){On(t,t.return,D)}}else if((b.tag!==22&&b.tag!==23||b.memoizedState===null||b===t)&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===t)break e;for(;b.sibling===null;){if(b.return===null||b.return===t)break e;_===b&&(_=null),b=b.return}_===b&&(_=null),b.sibling.return=b.return,b=b.sibling}}break;case 19:ko(e,t),as(t),r&4&&UA(t);break;case 21:break;default:ko(e,t),as(t)}}function as(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(RO(n)){var r=n;break e}n=n.return}throw Error(Re(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Kf(i,""),r.flags&=-33);var o=jA(t);g1(t,o,i);break;case 3:case 4:var u=r.stateNode.containerInfo,h=jA(t);p1(t,h,u);break;default:throw Error(Re(161))}}catch(f){On(t,t.return,f)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function G6(t,e,n){Ye=t,LO(t)}function LO(t,e,n){for(var r=(t.mode&1)!==0;Ye!==null;){var i=Ye,o=i.child;if(i.tag===22&&r){var u=i.memoizedState!==null||Sg;if(!u){var h=i.alternate,f=h!==null&&h.memoizedState!==null||Ur;h=Sg;var v=Ur;if(Sg=u,(Ur=f)&&!v)for(Ye=i;Ye!==null;)u=Ye,f=u.child,u.tag===22&&u.memoizedState!==null?zA(i):f!==null?(f.return=u,Ye=f):zA(i);for(;o!==null;)Ye=o,LO(o),o=o.sibling;Ye=i,Sg=h,Ur=v}VA(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,Ye=o):VA(t)}}function VA(t){for(;Ye!==null;){var e=Ye;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ur||Fm(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ur)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Ro(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&bA(e,o,r);break;case 3:var u=e.updateQueue;if(u!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}bA(e,u,n)}break;case 5:var h=e.stateNode;if(n===null&&e.flags&4){n=h;var f=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":f.autoFocus&&n.focus();break;case"img":f.src&&(n.src=f.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var v=e.alternate;if(v!==null){var _=v.memoizedState;if(_!==null){var b=_.dehydrated;b!==null&&Jf(b)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Re(163))}Ur||e.flags&512&&d1(e)}catch(S){On(e,e.return,S)}}if(e===t){Ye=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ye=n;break}Ye=e.return}}function BA(t){for(;Ye!==null;){var e=Ye;if(e===t){Ye=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ye=n;break}Ye=e.return}}function zA(t){for(;Ye!==null;){var e=Ye;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Fm(4,e)}catch(f){On(e,n,f)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(f){On(e,i,f)}}var o=e.return;try{d1(e)}catch(f){On(e,o,f)}break;case 5:var u=e.return;try{d1(e)}catch(f){On(e,u,f)}}}catch(f){On(e,e.return,f)}if(e===t){Ye=null;break}var h=e.sibling;if(h!==null){h.return=e.return,Ye=h;break}Ye=e.return}}var $6=Math.ceil,Lv=ga.ReactCurrentDispatcher,yb=ga.ReactCurrentOwner,fo=ga.ReactCurrentBatchConfig,$t=0,Sr=null,tr=null,Pr=0,Oi=0,Nc=pu(0),cr=0,ld=null,ll=0,jm=0,_b=0,Mf=null,yi=null,wb=0,Jc=1/0,Us=null,Mv=!1,v1=null,Xa=null,bg=!1,Wa=null,Fv=0,Ff=0,m1=null,nv=-1,rv=0;function ci(){return $t&6?Bn():nv!==-1?nv:nv=Bn()}function Ja(t){return t.mode&1?$t&2&&Pr!==0?Pr&-Pr:A6.transition!==null?(rv===0&&(rv=yR()),rv):(t=Xt,t!==0||(t=window.event,t=t===void 0?16:IR(t.type)),t):1}function Go(t,e,n,r){if(50<Ff)throw Ff=0,m1=null,Error(Re(185));Vd(t,n,r),(!($t&2)||t!==Sr)&&(t===Sr&&(!($t&2)&&(jm|=n),cr===4&&ja(t,Pr)),Ci(t,r),n===1&&$t===0&&!(e.mode&1)&&(Jc=Bn()+500,Dm&&gu()))}function Ci(t,e){var n=t.callbackNode;AV(t,e);var r=wv(t,t===Sr?Pr:0);if(r===0)n!==null&&XN(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&XN(n),e===1)t.tag===0?N6(qA.bind(null,t)):WR(qA.bind(null,t)),T6(function(){!($t&6)&&gu()}),n=null;else{switch(_R(r)){case 1:n=$S;break;case 4:n=vR;break;case 16:n=_v;break;case 536870912:n=mR;break;default:n=_v}n=qO(n,MO.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function MO(t,e){if(nv=-1,rv=0,$t&6)throw Error(Re(327));var n=t.callbackNode;if(jc()&&t.callbackNode!==n)return null;var r=wv(t,t===Sr?Pr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=jv(t,r);else{e=r;var i=$t;$t|=2;var o=jO();(Sr!==t||Pr!==e)&&(Us=null,Jc=Bn()+500,el(t,e));do try{Y6();break}catch(h){FO(t,h)}while(!0);ob(),Lv.current=o,$t=i,tr!==null?e=0:(Sr=null,Pr=0,e=cr)}if(e!==0){if(e===2&&(i=WE(t),i!==0&&(r=i,e=y1(t,i))),e===1)throw n=ld,el(t,0),ja(t,r),Ci(t,Bn()),n;if(e===6)ja(t,r);else{if(i=t.current.alternate,!(r&30)&&!H6(i)&&(e=jv(t,r),e===2&&(o=WE(t),o!==0&&(r=o,e=y1(t,o))),e===1))throw n=ld,el(t,0),ja(t,r),Ci(t,Bn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Re(345));case 2:Wu(t,yi,Us);break;case 3:if(ja(t,r),(r&130023424)===r&&(e=wb+500-Bn(),10<e)){if(wv(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){ci(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=JE(Wu.bind(null,t,yi,Us),e);break}Wu(t,yi,Us);break;case 4:if(ja(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var u=31-Wo(r);o=1<<u,u=e[u],u>i&&(i=u),r&=~o}if(r=i,r=Bn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*$6(r/1960))-r,10<r){t.timeoutHandle=JE(Wu.bind(null,t,yi,Us),r);break}Wu(t,yi,Us);break;case 5:Wu(t,yi,Us);break;default:throw Error(Re(329))}}}return Ci(t,Bn()),t.callbackNode===n?MO.bind(null,t):null}function y1(t,e){var n=Mf;return t.current.memoizedState.isDehydrated&&(el(t,e).flags|=256),t=jv(t,e),t!==2&&(e=yi,yi=n,e!==null&&_1(e)),t}function _1(t){yi===null?yi=t:yi.push.apply(yi,t)}function H6(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Ko(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ja(t,e){for(e&=~_b,e&=~jm,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Wo(e),r=1<<n;t[n]=-1,e&=~r}}function qA(t){if($t&6)throw Error(Re(327));jc();var e=wv(t,0);if(!(e&1))return Ci(t,Bn()),null;var n=jv(t,e);if(t.tag!==0&&n===2){var r=WE(t);r!==0&&(e=r,n=y1(t,r))}if(n===1)throw n=ld,el(t,0),ja(t,e),Ci(t,Bn()),n;if(n===6)throw Error(Re(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Wu(t,yi,Us),Ci(t,Bn()),null}function Eb(t,e){var n=$t;$t|=1;try{return t(e)}finally{$t=n,$t===0&&(Jc=Bn()+500,Dm&&gu())}}function cl(t){Wa!==null&&Wa.tag===0&&!($t&6)&&jc();var e=$t;$t|=1;var n=fo.transition,r=Xt;try{if(fo.transition=null,Xt=1,t)return t()}finally{Xt=r,fo.transition=n,$t=e,!($t&6)&&gu()}}function Sb(){Oi=Nc.current,fn(Nc)}function el(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,b6(n)),tr!==null)for(n=tr.return;n!==null;){var r=n;switch(nb(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Iv();break;case 3:Qc(),fn(Ti),fn(Gr),hb();break;case 5:cb(r);break;case 4:Qc();break;case 13:fn(Tn);break;case 19:fn(Tn);break;case 10:sb(r.type._context);break;case 22:case 23:Sb()}n=n.return}if(Sr=t,tr=t=Za(t.current,null),Pr=Oi=e,cr=0,ld=null,_b=jm=ll=0,yi=Mf=null,Yu!==null){for(e=0;e<Yu.length;e++)if(n=Yu[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var u=o.next;o.next=i,r.next=u}n.pending=r}Yu=null}return t}function FO(t,e){do{var n=tr;try{if(ob(),Zg.current=Dv,Ov){for(var r=In.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ov=!1}if(ul=0,mr=ur=In=null,Df=!1,sd=0,yb.current=null,n===null||n.return===null){cr=1,ld=e,tr=null;break}e:{var o=t,u=n.return,h=n,f=e;if(e=Pr,h.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){var v=f,_=h,b=_.tag;if(!(_.mode&1)&&(b===0||b===11||b===15)){var S=_.alternate;S?(_.updateQueue=S.updateQueue,_.memoizedState=S.memoizedState,_.lanes=S.lanes):(_.updateQueue=null,_.memoizedState=null)}var I=kA(u);if(I!==null){I.flags&=-257,PA(I,u,h,o,e),I.mode&1&&AA(o,v,e),e=I,f=v;var M=e.updateQueue;if(M===null){var D=new Set;D.add(f),e.updateQueue=D}else M.add(f);break e}else{if(!(e&1)){AA(o,v,e),bb();break e}f=Error(Re(426))}}else if(vn&&h.mode&1){var ne=kA(u);if(ne!==null){!(ne.flags&65536)&&(ne.flags|=256),PA(ne,u,h,o,e),rb(Xc(f,h));break e}}o=f=Xc(f,h),cr!==4&&(cr=2),Mf===null?Mf=[o]:Mf.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var z=wO(o,f,e);SA(o,z);break e;case 1:h=f;var Y=o.type,K=o.stateNode;if(!(o.flags&128)&&(typeof Y.getDerivedStateFromError=="function"||K!==null&&typeof K.componentDidCatch=="function"&&(Xa===null||!Xa.has(K)))){o.flags|=65536,e&=-e,o.lanes|=e;var ue=EO(o,h,e);SA(o,ue);break e}}o=o.return}while(o!==null)}VO(n)}catch(oe){e=oe,tr===n&&n!==null&&(tr=n=n.return);continue}break}while(!0)}function jO(){var t=Lv.current;return Lv.current=Dv,t===null?Dv:t}function bb(){(cr===0||cr===3||cr===2)&&(cr=4),Sr===null||!(ll&268435455)&&!(jm&268435455)||ja(Sr,Pr)}function jv(t,e){var n=$t;$t|=2;var r=jO();(Sr!==t||Pr!==e)&&(Us=null,el(t,e));do try{K6();break}catch(i){FO(t,i)}while(!0);if(ob(),$t=n,Lv.current=r,tr!==null)throw Error(Re(261));return Sr=null,Pr=0,cr}function K6(){for(;tr!==null;)UO(tr)}function Y6(){for(;tr!==null&&!wV();)UO(tr)}function UO(t){var e=zO(t.alternate,t,Oi);t.memoizedProps=t.pendingProps,e===null?VO(t):tr=e,yb.current=null}function VO(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=z6(n,e),n!==null){n.flags&=32767,tr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{cr=6,tr=null;return}}else if(n=B6(n,e,Oi),n!==null){tr=n;return}if(e=e.sibling,e!==null){tr=e;return}tr=e=t}while(e!==null);cr===0&&(cr=5)}function Wu(t,e,n){var r=Xt,i=fo.transition;try{fo.transition=null,Xt=1,Q6(t,e,n,r)}finally{fo.transition=i,Xt=r}return null}function Q6(t,e,n,r){do jc();while(Wa!==null);if($t&6)throw Error(Re(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Re(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(kV(t,o),t===Sr&&(tr=Sr=null,Pr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||bg||(bg=!0,qO(_v,function(){return jc(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=fo.transition,fo.transition=null;var u=Xt;Xt=1;var h=$t;$t|=4,yb.current=null,W6(t,n),DO(n,t),v6(QE),Ev=!!YE,QE=YE=null,t.current=n,G6(n),EV(),$t=h,Xt=u,fo.transition=o}else t.current=n;if(bg&&(bg=!1,Wa=t,Fv=i),o=t.pendingLanes,o===0&&(Xa=null),TV(n.stateNode),Ci(t,Bn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Mv)throw Mv=!1,t=v1,v1=null,t;return Fv&1&&t.tag!==0&&jc(),o=t.pendingLanes,o&1?t===m1?Ff++:(Ff=0,m1=t):Ff=0,gu(),null}function jc(){if(Wa!==null){var t=_R(Fv),e=fo.transition,n=Xt;try{if(fo.transition=null,Xt=16>t?16:t,Wa===null)var r=!1;else{if(t=Wa,Wa=null,Fv=0,$t&6)throw Error(Re(331));var i=$t;for($t|=4,Ye=t.current;Ye!==null;){var o=Ye,u=o.child;if(Ye.flags&16){var h=o.deletions;if(h!==null){for(var f=0;f<h.length;f++){var v=h[f];for(Ye=v;Ye!==null;){var _=Ye;switch(_.tag){case 0:case 11:case 15:Lf(8,_,o)}var b=_.child;if(b!==null)b.return=_,Ye=b;else for(;Ye!==null;){_=Ye;var S=_.sibling,I=_.return;if(PO(_),_===v){Ye=null;break}if(S!==null){S.return=I,Ye=S;break}Ye=I}}}var M=o.alternate;if(M!==null){var D=M.child;if(D!==null){M.child=null;do{var ne=D.sibling;D.sibling=null,D=ne}while(D!==null)}}Ye=o}}if(o.subtreeFlags&2064&&u!==null)u.return=o,Ye=u;else e:for(;Ye!==null;){if(o=Ye,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Lf(9,o,o.return)}var z=o.sibling;if(z!==null){z.return=o.return,Ye=z;break e}Ye=o.return}}var Y=t.current;for(Ye=Y;Ye!==null;){u=Ye;var K=u.child;if(u.subtreeFlags&2064&&K!==null)K.return=u,Ye=K;else e:for(u=Y;Ye!==null;){if(h=Ye,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:Fm(9,h)}}catch(oe){On(h,h.return,oe)}if(h===u){Ye=null;break e}var ue=h.sibling;if(ue!==null){ue.return=h.return,Ye=ue;break e}Ye=h.return}}if($t=i,gu(),vs&&typeof vs.onPostCommitFiberRoot=="function")try{vs.onPostCommitFiberRoot(Am,t)}catch{}r=!0}return r}finally{Xt=n,fo.transition=e}}return!1}function WA(t,e,n){e=Xc(n,e),e=wO(t,e,1),t=Qa(t,e,1),e=ci(),t!==null&&(Vd(t,1,e),Ci(t,e))}function On(t,e,n){if(t.tag===3)WA(t,t,n);else for(;e!==null;){if(e.tag===3){WA(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Xa===null||!Xa.has(r))){t=Xc(n,t),t=EO(e,t,1),e=Qa(e,t,1),t=ci(),e!==null&&(Vd(e,1,t),Ci(e,t));break}}e=e.return}}function X6(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ci(),t.pingedLanes|=t.suspendedLanes&n,Sr===t&&(Pr&n)===n&&(cr===4||cr===3&&(Pr&130023424)===Pr&&500>Bn()-wb?el(t,0):_b|=n),Ci(t,e)}function BO(t,e){e===0&&(t.mode&1?(e=dg,dg<<=1,!(dg&130023424)&&(dg=4194304)):e=1);var n=ci();t=sa(t,e),t!==null&&(Vd(t,e,n),Ci(t,n))}function J6(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),BO(t,n)}function Z6(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Re(314))}r!==null&&r.delete(e),BO(t,n)}var zO;zO=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ti.current)wi=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return wi=!1,V6(t,e,n);wi=!!(t.flags&131072)}else wi=!1,vn&&e.flags&1048576&&GR(e,Nv,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;tv(t,e),t=e.pendingProps;var i=Hc(e,Gr.current);Fc(e,n),i=db(null,e,r,t,i,n);var o=pb();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ii(r)?(o=!0,Cv(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,ub(e),i.updater=Lm,e.stateNode=i,i._reactInternals=e,o1(e,r,t,n),e=u1(null,e,r,!0,o,n)):(e.tag=0,vn&&o&&tb(e),ii(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(tv(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=tB(r),t=Ro(r,t),i){case 0:e=a1(null,e,r,t,n);break e;case 1:e=DA(null,e,r,t,n);break e;case 11:e=RA(null,e,r,t,n);break e;case 14:e=OA(null,e,r,Ro(r.type,t),n);break e}throw Error(Re(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ro(r,i),a1(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ro(r,i),DA(t,e,r,i,n);case 3:e:{if(IO(e),t===null)throw Error(Re(387));r=e.pendingProps,o=e.memoizedState,i=o.element,YR(t,e),Pv(e,r,null,n);var u=e.memoizedState;if(r=u.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Xc(Error(Re(423)),e),e=LA(t,e,r,n,i);break e}else if(r!==i){i=Xc(Error(Re(424)),e),e=LA(t,e,r,n,i);break e}else for(Ui=Ya(e.stateNode.containerInfo.firstChild),qi=e,vn=!0,Lo=null,n=ZR(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Kc(),r===i){e=aa(t,e,n);break e}ii(t,e,r,n)}e=e.child}return e;case 5:return eO(e),t===null&&n1(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,u=i.children,XE(r,i)?u=null:o!==null&&XE(r,o)&&(e.flags|=32),TO(t,e),ii(t,e,u,n),e.child;case 6:return t===null&&n1(e),null;case 13:return CO(t,e,n);case 4:return lb(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Yc(e,null,r,n):ii(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ro(r,i),RA(t,e,r,i,n);case 7:return ii(t,e,e.pendingProps,n),e.child;case 8:return ii(t,e,e.pendingProps.children,n),e.child;case 12:return ii(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,u=i.value,on(Av,r._currentValue),r._currentValue=u,o!==null)if(Ko(o.value,u)){if(o.children===i.children&&!Ti.current){e=aa(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var h=o.dependencies;if(h!==null){u=o.child;for(var f=h.firstContext;f!==null;){if(f.context===r){if(o.tag===1){f=ra(-1,n&-n),f.tag=2;var v=o.updateQueue;if(v!==null){v=v.shared;var _=v.pending;_===null?f.next=f:(f.next=_.next,_.next=f),v.pending=f}}o.lanes|=n,f=o.alternate,f!==null&&(f.lanes|=n),r1(o.return,n,e),h.lanes|=n;break}f=f.next}}else if(o.tag===10)u=o.type===e.type?null:o.child;else if(o.tag===18){if(u=o.return,u===null)throw Error(Re(341));u.lanes|=n,h=u.alternate,h!==null&&(h.lanes|=n),r1(u,n,e),u=o.sibling}else u=o.child;if(u!==null)u.return=o;else for(u=o;u!==null;){if(u===e){u=null;break}if(o=u.sibling,o!==null){o.return=u.return,u=o;break}u=u.return}o=u}ii(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Fc(e,n),i=go(i),r=r(i),e.flags|=1,ii(t,e,r,n),e.child;case 14:return r=e.type,i=Ro(r,e.pendingProps),i=Ro(r.type,i),OA(t,e,r,i,n);case 15:return SO(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ro(r,i),tv(t,e),e.tag=1,Ii(r)?(t=!0,Cv(e)):t=!1,Fc(e,n),XR(e,r,i),o1(e,r,i,n),u1(null,e,r,!0,t,n);case 19:return xO(t,e,n);case 22:return bO(t,e,n)}throw Error(Re(156,e.tag))};function qO(t,e){return gR(t,e)}function eB(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function co(t,e,n,r){return new eB(t,e,n,r)}function Tb(t){return t=t.prototype,!(!t||!t.isReactComponent)}function tB(t){if(typeof t=="function")return Tb(t)?1:0;if(t!=null){if(t=t.$$typeof,t===qS)return 11;if(t===WS)return 14}return 2}function Za(t,e){var n=t.alternate;return n===null?(n=co(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function iv(t,e,n,r,i,o){var u=2;if(r=t,typeof t=="function")Tb(t)&&(u=1);else if(typeof t=="string")u=5;else e:switch(t){case yc:return tl(n.children,i,o,e);case zS:u=8,i|=8;break;case AE:return t=co(12,n,e,i|2),t.elementType=AE,t.lanes=o,t;case kE:return t=co(13,n,e,i),t.elementType=kE,t.lanes=o,t;case PE:return t=co(19,n,e,i),t.elementType=PE,t.lanes=o,t;case JP:return Um(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case QP:u=10;break e;case XP:u=9;break e;case qS:u=11;break e;case WS:u=14;break e;case Da:u=16,r=null;break e}throw Error(Re(130,t==null?t:typeof t,""))}return e=co(u,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function tl(t,e,n,r){return t=co(7,t,r,e),t.lanes=n,t}function Um(t,e,n,r){return t=co(22,t,r,e),t.elementType=JP,t.lanes=n,t.stateNode={isHidden:!1},t}function Iw(t,e,n){return t=co(6,t,null,e),t.lanes=n,t}function Cw(t,e,n){return e=co(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function nB(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=sw(0),this.expirationTimes=sw(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sw(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Ib(t,e,n,r,i,o,u,h,f){return t=new nB(t,e,n,h,f),e===1?(e=1,o===!0&&(e|=8)):e=0,o=co(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ub(o),t}function rB(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:mc,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function WO(t){if(!t)return au;t=t._reactInternals;e:{if(Tl(t)!==t||t.tag!==1)throw Error(Re(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ii(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Re(171))}if(t.tag===1){var n=t.type;if(Ii(n))return qR(t,n,e)}return e}function GO(t,e,n,r,i,o,u,h,f){return t=Ib(n,r,!0,t,i,o,u,h,f),t.context=WO(null),n=t.current,r=ci(),i=Ja(n),o=ra(r,i),o.callback=e??null,Qa(n,o,i),t.current.lanes=i,Vd(t,i,r),Ci(t,r),t}function Vm(t,e,n,r){var i=e.current,o=ci(),u=Ja(i);return n=WO(n),e.context===null?e.context=n:e.pendingContext=n,e=ra(o,u),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Qa(i,e,u),t!==null&&(Go(t,i,u,o),Jg(t,i,u)),u}function Uv(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function GA(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Cb(t,e){GA(t,e),(t=t.alternate)&&GA(t,e)}function iB(){return null}var $O=typeof reportError=="function"?reportError:function(t){console.error(t)};function xb(t){this._internalRoot=t}Bm.prototype.render=xb.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Re(409));Vm(t,e,null,null)};Bm.prototype.unmount=xb.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;cl(function(){Vm(null,t,null,null)}),e[oa]=null}};function Bm(t){this._internalRoot=t}Bm.prototype.unstable_scheduleHydration=function(t){if(t){var e=SR();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Fa.length&&e!==0&&e<Fa[n].priority;n++);Fa.splice(n,0,t),n===0&&TR(t)}};function Nb(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function zm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function $A(){}function oB(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var v=Uv(u);o.call(v)}}var u=GO(e,r,t,0,null,!1,!1,"",$A);return t._reactRootContainer=u,t[oa]=u.current,td(t.nodeType===8?t.parentNode:t),cl(),u}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var h=r;r=function(){var v=Uv(f);h.call(v)}}var f=Ib(t,0,!1,null,null,!1,!1,"",$A);return t._reactRootContainer=f,t[oa]=f.current,td(t.nodeType===8?t.parentNode:t),cl(function(){Vm(e,f,n,r)}),f}function qm(t,e,n,r,i){var o=n._reactRootContainer;if(o){var u=o;if(typeof i=="function"){var h=i;i=function(){var f=Uv(u);h.call(f)}}Vm(e,u,t,i)}else u=oB(n,e,t,i,r);return Uv(u)}wR=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=bf(e.pendingLanes);n!==0&&(HS(e,n|1),Ci(e,Bn()),!($t&6)&&(Jc=Bn()+500,gu()))}break;case 13:cl(function(){var r=sa(t,1);if(r!==null){var i=ci();Go(r,t,1,i)}}),Cb(t,1)}};KS=function(t){if(t.tag===13){var e=sa(t,134217728);if(e!==null){var n=ci();Go(e,t,134217728,n)}Cb(t,134217728)}};ER=function(t){if(t.tag===13){var e=Ja(t),n=sa(t,e);if(n!==null){var r=ci();Go(n,t,e,r)}Cb(t,e)}};SR=function(){return Xt};bR=function(t,e){var n=Xt;try{return Xt=t,e()}finally{Xt=n}};BE=function(t,e,n){switch(e){case"input":if(DE(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Om(r);if(!i)throw Error(Re(90));eR(r),DE(r,i)}}}break;case"textarea":nR(t,n);break;case"select":e=n.value,e!=null&&Oc(t,!!n.multiple,e,!1)}};lR=Eb;cR=cl;var sB={usingClientEntryPoint:!1,Events:[zd,Sc,Om,aR,uR,Eb]},cf={findFiberByHostInstance:Ku,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},aB={bundleType:cf.bundleType,version:cf.version,rendererPackageName:cf.rendererPackageName,rendererConfig:cf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ga.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=dR(t),t===null?null:t.stateNode},findFiberByHostInstance:cf.findFiberByHostInstance||iB,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tg.isDisabled&&Tg.supportsFiber)try{Am=Tg.inject(aB),vs=Tg}catch{}}Ki.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sB;Ki.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Nb(e))throw Error(Re(200));return rB(t,e,null,n)};Ki.createRoot=function(t,e){if(!Nb(t))throw Error(Re(299));var n=!1,r="",i=$O;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Ib(t,1,!1,null,null,n,!1,r,i),t[oa]=e.current,td(t.nodeType===8?t.parentNode:t),new xb(e)};Ki.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Re(188)):(t=Object.keys(t).join(","),Error(Re(268,t)));return t=dR(e),t=t===null?null:t.stateNode,t};Ki.flushSync=function(t){return cl(t)};Ki.hydrate=function(t,e,n){if(!zm(e))throw Error(Re(200));return qm(null,t,e,!0,n)};Ki.hydrateRoot=function(t,e,n){if(!Nb(t))throw Error(Re(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",u=$O;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(u=n.onRecoverableError)),e=GO(e,null,t,1,n??null,i,!1,o,u),t[oa]=e.current,td(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Bm(e)};Ki.render=function(t,e,n){if(!zm(e))throw Error(Re(200));return qm(null,t,e,!1,n)};Ki.unmountComponentAtNode=function(t){if(!zm(t))throw Error(Re(40));return t._reactRootContainer?(cl(function(){qm(null,null,t,!1,function(){t._reactRootContainer=null,t[oa]=null})}),!0):!1};Ki.unstable_batchedUpdates=Eb;Ki.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!zm(n))throw Error(Re(200));if(t==null||t._reactInternals===void 0)throw Error(Re(38));return qm(t,e,n,!1,r)};Ki.version="18.2.0-next-9e3b772b8-20220608";function HO(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(HO)}catch(t){console.error(t)}}HO(),GP.exports=Ki;var Ab=GP.exports,HA=Ab;xE.createRoot=HA.createRoot,xE.hydrateRoot=HA.hydrateRoot;var uB={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var w1=function(t,e){return w1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},w1(t,e)};function KO(t,e){w1(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Mi=function(){return Mi=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Mi.apply(this,arguments)};function cd(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Zc(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],u=0,h=o.length;u<h;u++,i++)r[i]=o[u];return r}function lB(t,e){for(;t.length<e;)t="0"+t;return t}function Ms(t,e){var n,r,i;if(e.length===0)return t;for(n=0,i=e.length;n<i;n++)r=e.charCodeAt(n),t=(t<<5)-t+r,t|=0;return t<0?t*-2:t}function cB(t,e,n){return Object.keys(e).sort().reduce(r,t);function r(i,o){return YO(i,e[o],o,n)}}function YO(t,e,n,r){var i=Ms(Ms(Ms(t,n),hB(e)),typeof e);if(e===null)return Ms(i,"null");if(e===void 0)return Ms(i,"undefined");if(typeof e=="object"||typeof e=="function"){if(r.indexOf(e)!==-1)return Ms(i,"[Circular]"+n);r.push(e);var o=cB(i,e,r);if(!("valueOf"in e)||typeof e.valueOf!="function")return o;try{return Ms(o,String(e.valueOf()))}catch(u){return Ms(o,"[valueOf exception]"+(u.stack||u.message))}}return Ms(i,e.toString())}function hB(t){return Object.prototype.toString.call(t)}function fB(t){return lB(YO(0,t,"",[]).toString(16),8)}var kb=fB,dB={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},pB={bg:"backgroundColor",m:"margin",mt:"marginTop",mr:"marginRight",mb:"marginBottom",ml:"marginLeft",mx:"marginX",my:"marginY",p:"padding",pt:"paddingTop",pr:"paddingRight",pb:"paddingBottom",pl:"paddingLeft",px:"paddingX",py:"paddingY"},gB={marginX:["marginLeft","marginRight"],marginY:["marginTop","marginBottom"],paddingX:["paddingLeft","paddingRight"],paddingY:["paddingTop","paddingBottom"],size:["width","height"]},vB={color:"colors",backgroundColor:"colors",borderColor:"colors",margin:"space",marginTop:"space",marginRight:"space",marginBottom:"space",marginLeft:"space",marginX:"space",marginY:"space",padding:"space",paddingTop:"space",paddingRight:"space",paddingBottom:"space",paddingLeft:"space",paddingX:"space",paddingY:"space",top:"space",right:"space",bottom:"space",left:"space",gridGap:"space",gridColumnGap:"space",gridRowGap:"space",gap:"space",columnGap:"space",rowGap:"space",fontFamily:"fonts",fontSize:"fontSizes",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",border:"borders",borderTop:"borders",borderRight:"borders",borderBottom:"borders",borderLeft:"borders",borderWidth:"borderWidths",borderStyle:"borderStyles",borderRadius:"radii",borderTopRightRadius:"radii",borderTopLeftRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",borderTopWidth:"borderWidths",borderTopColor:"colors",borderTopStyle:"borderStyles",borderBottomWidth:"borderWidths",borderBottomColor:"colors",borderBottomStyle:"borderStyles",borderLeftWidth:"borderWidths",borderLeftColor:"colors",borderLeftStyle:"borderStyles",borderRightWidth:"borderWidths",borderRightColor:"colors",borderRightStyle:"borderStyles",outlineColor:"colors",boxShadow:"shadows",textShadow:"shadows",zIndex:"zIndices",width:"sizes",minWidth:"sizes",maxWidth:"sizes",height:"sizes",minHeight:"sizes",maxHeight:"sizes",flexBasis:"sizes",size:"sizes",fill:"colors",stroke:"colors"},mB={margin:1,marginTop:1,marginRight:1,marginBottom:1,marginLeft:1,marginX:1,marginY:1,top:1,bottom:1,left:1,right:1},Mo={unitlessProperties:dB,propertyAliases:pB,multiplePropertyAliases:gB,propertyScales:vB,negativeProperties:mB},Fi=function(t,e,n){for(var r=t,i=typeof e=="string"?e.split("."):[e],o=0,u=i;o<u.length;o++){var h=u[o];r=r?r[h]:void 0}return r===void 0?n:r},QO=function(t,e){if(typeof e!="number"||e>=0)return Fi(t,e,e);var n=Math.abs(e),r=Fi(t,n,n);return typeof r=="string"?"-"+r:r*-1},E1=function(t,e){return e==null||typeof e=="boolean"||e===""?"":typeof e=="number"&&e!==0&&!(t in Mo.unitlessProperties)?e+"px":String(e).trim()},S1=function(t){return t.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()})},yB=function(t,e){var n={},r=Fi(e,"breakpoints"),i=Object.entries(r).reduce(function(I,M,D){var ne,z=M[0],Y=M[1];return Mi(Mi({},I),(ne={},ne[z]="@media screen and (min-width: #"+D+"#"+Y+")",ne))},{_:null});for(var o in t){var u=t[o],h=typeof u;if(u!=null){if(o.includes("&")||o.startsWith("@")||h==="string"||h==="number"){n[o]=u;continue}for(var f=Object.keys(u),v=0,_=f;v<_.length;v++){var b=_[v],S=i[b];if(!S){n[o]=u[b];continue}n[S]=n[S]||{},u[b]!=null&&(n[S][o]=u[b])}}}return n},Pb=function(t,e){var n={},r=yB(t,e);for(var i in r){var o=r[i];if(o&&typeof o=="object"){n[i]=Pb(o,e);continue}var u=Fi(Mo.propertyAliases,i,i),h=Fi(Mo.propertyScales,u),f=Fi(e,h,Fi(e,u,{})),v=u in Mo.negativeProperties?QO(f,o):Fi(f,o,o);if(Mo.multiplePropertyAliases[u])for(var _=Mo.multiplePropertyAliases[u],b=0;b<_.length;b++)n[_[b]]=v;else n[u]=v}return n},b1=function(t,e,n){Object.keys(e).forEach(function(r){var i=e[r];typeof i=="string"||typeof i=="number"?(n[t]||(n[t]=""),n[t]+=S1(r)+":"+E1(r,i)+";"):typeof i=="object"&&(r.startsWith("@media")||r.startsWith("@supports")?(n[r]||(n[r]={}),b1(t,i,n[r])):b1(r.replace(/&/g,t),i,n))})},XO=function(t){var e={};return b1("&",t,e),e},Rb=[],eu="global",Vv="data-css-system-id",T1="data-css-system-ids",I1=" ",_B=typeof process=="object"&&uB&&!1,C1=function(){function t(e){var n=this;this.createdIds={};var r=document.querySelector("style["+Vv+'="'+e+'"]');if(r===null)r=document.createElement("style"),r.setAttribute(Vv,e),document.head.appendChild(r);else{var i=r.getAttribute(T1);i!==null&&i.split(I1).forEach(function(o){return n.createdIds[o]=!0})}this.element=r}return t.prototype.insertRule=function(e){var n=this.element.sheet;n.insertRule(e,n.cssRules.length)},t.prototype.remove=function(){this.element.remove()},t}(),KA=function(t){KO(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.insertRule=function(n){this.element.textContent+=n+`
`},e}(C1),JO=function(){function t(){var e;this.styleSheets=(e={},e[eu]=new C1(eu),e)}return t.prototype.getGlobalStyleSheet=function(){return this.styleSheets[eu]},t.prototype.createStyleSheet=function(e){return this.styleSheets[e]=new C1(e),this.styleSheets[e]},t.prototype.removeStyleSheet=function(e){this.styleSheets[e]&&(this.styleSheets[e].remove(),delete this.styleSheets[e])},t}(),wB=function(t){KO(e,t);function e(){var n,r=t!==null&&t.apply(this,arguments)||this;return r.styleSheets=(n={},n[eu]=new KA(eu),n),r}return e.prototype.createStyleSheet=function(n){return this.styleSheets[n]=new KA(n),this.styleSheets[n]},e}(JO),YA=function(){function t(e){this.rules=[],this.createdIds={},this.id=e}return t.prototype.insertRule=function(e){this.rules.push(e)},t.prototype.getStyleTag=function(){return"<style "+Vv+'="'+this.id+'" '+T1+'="'+Object.keys(this.createdIds).join(I1)+'">'+this.rules.join(`
`)+"</style>"},t.prototype.getStyleComponent=function(){var e;return ee.createElement("style",(e={},e[Vv]=this.id,e[T1]=Object.keys(this.createdIds).join(I1),e.dangerouslySetInnerHTML={__html:this.rules.join(`
`)},e))},t}(),EB=function(){function t(){var e;this.styleSheets=(e={},e[eu]=new YA(eu),e)}return t.prototype.getGlobalStyleSheet=function(){return this.styleSheets[eu]},t.prototype.createStyleSheet=function(e){return this.styleSheets[e]=new YA(e),this.styleSheets[e]},t.prototype.removeStyleSheet=function(e){delete this.styleSheets[e]},t.prototype.getStyleTags=function(){return Object.values(this.styleSheets).map(function(e){return e.getStyleTag()}).join(`
`)},t.prototype.getStyleComponents=function(){return Object.values(this.styleSheets).map(function(e){return e.getStyleComponent()})},t}(),SB=typeof document<"u",Ob=ee.createContext(SB?_B?new wB:new JO:new EB),bB={breakpoints:{s:"40em",m:"52em",l:"64em"},space:[0,4,8,16,32,64,128,256,512],fontSizes:[12,14,16,20,24,32,48,64,72]},Xo=ee.createContext(bB),TB=function(t,e){e===void 0&&(e=Rb);var n=ee.useContext(Ob),r=ee.useContext(Xo),i=ee.useMemo(function(){var o=Pb(t,r),u=kb(o),h="style-"+u,f=n.getGlobalStyleSheet();if(!f.createdIds[h]){for(var v=XO(o),_=Object.keys(v).sort(function(ue,oe){return ue<oe?-1:ue>oe?1:0}),b=0,S=_;b<S.length;b++){var I=S[b];if(typeof v[I]=="string"){var M=I.replace(/&/g,"."+h),D=v[I];f.insertRule(M+"{"+D+"}")}else{var ne=I,z=v[ne],Y="";for(var K in z){var M=K.replace(/&/g,"."+h),D=z[K];Y+=M+"{"+D+"}"}f.insertRule(ne.replace(/#\d#/,"")+"{"+Y+"}")}}f.createdIds[h]=!0}return h},Zc([r],e));return i},IB=function(t,e){e===void 0&&(e=Rb);var n=ee.useContext(Ob),r=ee.useContext(Xo),i=ee.useMemo(function(){var o=kb({systemObject:t,theme:r}),u=n.createStyleSheet(o);for(var h in t)for(var f=Pb(t[h],r),v=XO(f),_=Object.keys(v).sort(function(ue,oe){return ue<oe?-1:ue>oe?1:0}),b=0,S=_;b<S.length;b++){var I=S[b];if(typeof v[I]=="string"){var M=I.replace(/&/g,h).replace(/#\d#/,""),D=v[I];u.insertRule(M+"{"+D+"}")}else{var ne=I,z=v[ne],Y="";for(var K in z){var M=K.replace(/&/g,h),D=z[K];Y+=M+"{"+D+"}"}u.insertRule(ne.replace(/#\d#/,"")+"{"+Y+"}")}}return o},Zc([r],e));ee.useEffect(function(){return function(){return n.removeStyleSheet(i)}},Zc([i,r],e))},CB=function(t,e){var n="";for(var r in t){var i=t[r],o=Fi(Mo.propertyAliases,r,r),u=Fi(Mo.propertyScales,o),h=Fi(e,u,Fi(e,o,{})),f=o in Mo.negativeProperties?QO(h,i):Fi(h,i,i);if(Mo.multiplePropertyAliases[o])for(var v=Mo.multiplePropertyAliases[o],_=0;_<v.length;_++)n+=S1(v[_])+":"+E1(o,f)+";";else n+=S1(o)+":"+E1(o,f)+";"}return n},Bv=function(t,e){e===void 0&&(e=Rb);var n=ee.useContext(Ob),r=ee.useContext(Xo),i=ee.useMemo(function(){var o="keyframes-"+kb({keyframesObject:t,theme:r}),u=n.getGlobalStyleSheet();if(!u.createdIds[o]){var h="";for(var f in t){var v=t[f],_=isNaN(f)?f:f+"%",b=CB(v,r);h+=_+"{"+b+"}"}u.insertRule("@keyframes "+o+"{"+h+"}"),u.createdIds[o]=!0}return o},Zc([r],e));return i},ZO=function(t){var e=t.css,n=cd(t,["css"]);return function(r){var i=r.css,o=cd(r,["css"]);return Mi(Mi(Mi({},n),{css:Mi(Mi({},e),i)}),o)}},Wd=function(t,e){var n=typeof e=="function"?e:ZO(e);return Xn.forwardRef(function(r,i){var o=n(r),u=o.as,h=u===void 0?t:u,f=o.css,v=o.deps,_=o.className,b=cd(o,["as","css","deps","className"]),S=TB(f,v),I=_?_+" "+S:S;return Xn.createElement(h,Mi({ref:i},b,{className:I}))})},Ts=function(t,e){var n=typeof e=="function"?e:ZO(e);return Xn.forwardRef(function(r,i){var o=n(r),u=o.css,h=cd(o,["css"]);return Xn.createElement(t,Mi({ref:i,css:u},h))})},xB=function(t){var e=t.gap,n=cd(t,["gap"]),r=n.flexDirection,i=ee.useContext(Xo),o=ee.useMemo(function(){var u;if(e&&r){if(typeof r=="string"){var h=r==="column"||r==="column-reverse";return{"& > * + *":(u={},u[h?"mt":"ml"]=e,u)}}for(var f=void 0,v=void 0,_=typeof e=="object"?e:{_:e},b=r,S=new Set(Zc(Object.keys(b),Object.keys(_))),I={},M={},D=Zc(["_"],Object.keys(i.breakpoints)),ne=0,z=D;ne<z.length;ne++){var Y=z[ne];if(S.has(Y)!==!1){var K=Y,ue=b[K]!=null?b[K]:f;f=ue;var oe=_[K]!=null?_[K]:v;v=oe;var h=ue==="column"||ue==="column-reverse";h?(I[K]=oe,M[K]=0):(M[K]=oe,I[K]=0)}}return{"& > * + *":{mt:I,ml:M}}}},[e,r,i]);return e?Mi(Mi({},n),o):n},x1=function(t,e){return x1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},x1(t,e)};function NB(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");x1(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Ws=function(){return Ws=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Ws.apply(this,arguments)};function hd(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function AB(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}var eD={exports:{}},Jt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ir=typeof Symbol=="function"&&Symbol.for,Db=Ir?Symbol.for("react.element"):60103,Lb=Ir?Symbol.for("react.portal"):60106,Wm=Ir?Symbol.for("react.fragment"):60107,Gm=Ir?Symbol.for("react.strict_mode"):60108,$m=Ir?Symbol.for("react.profiler"):60114,Hm=Ir?Symbol.for("react.provider"):60109,Km=Ir?Symbol.for("react.context"):60110,Mb=Ir?Symbol.for("react.async_mode"):60111,Ym=Ir?Symbol.for("react.concurrent_mode"):60111,Qm=Ir?Symbol.for("react.forward_ref"):60112,Xm=Ir?Symbol.for("react.suspense"):60113,kB=Ir?Symbol.for("react.suspense_list"):60120,Jm=Ir?Symbol.for("react.memo"):60115,Zm=Ir?Symbol.for("react.lazy"):60116,PB=Ir?Symbol.for("react.block"):60121,RB=Ir?Symbol.for("react.fundamental"):60117,OB=Ir?Symbol.for("react.responder"):60118,DB=Ir?Symbol.for("react.scope"):60119;function Qi(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Db:switch(t=t.type,t){case Mb:case Ym:case Wm:case $m:case Gm:case Xm:return t;default:switch(t=t&&t.$$typeof,t){case Km:case Qm:case Zm:case Jm:case Hm:return t;default:return e}}case Lb:return e}}}function tD(t){return Qi(t)===Ym}Jt.AsyncMode=Mb;Jt.ConcurrentMode=Ym;Jt.ContextConsumer=Km;Jt.ContextProvider=Hm;Jt.Element=Db;Jt.ForwardRef=Qm;Jt.Fragment=Wm;Jt.Lazy=Zm;Jt.Memo=Jm;Jt.Portal=Lb;Jt.Profiler=$m;Jt.StrictMode=Gm;Jt.Suspense=Xm;Jt.isAsyncMode=function(t){return tD(t)||Qi(t)===Mb};Jt.isConcurrentMode=tD;Jt.isContextConsumer=function(t){return Qi(t)===Km};Jt.isContextProvider=function(t){return Qi(t)===Hm};Jt.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Db};Jt.isForwardRef=function(t){return Qi(t)===Qm};Jt.isFragment=function(t){return Qi(t)===Wm};Jt.isLazy=function(t){return Qi(t)===Zm};Jt.isMemo=function(t){return Qi(t)===Jm};Jt.isPortal=function(t){return Qi(t)===Lb};Jt.isProfiler=function(t){return Qi(t)===$m};Jt.isStrictMode=function(t){return Qi(t)===Gm};Jt.isSuspense=function(t){return Qi(t)===Xm};Jt.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Wm||t===Ym||t===$m||t===Gm||t===Xm||t===kB||typeof t=="object"&&t!==null&&(t.$$typeof===Zm||t.$$typeof===Jm||t.$$typeof===Hm||t.$$typeof===Km||t.$$typeof===Qm||t.$$typeof===RB||t.$$typeof===OB||t.$$typeof===DB||t.$$typeof===PB)};Jt.typeOf=Qi;eD.exports=Jt;var LB=eD.exports,nD=LB,MB={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},FB={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},rD={};rD[nD.ForwardRef]=MB;rD[nD.Memo]=FB;function iD(t,e,n){if(n===void 0&&(n=Error),!t)throw new n(e)}var N1=function(t,e){return N1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},N1(t,e)};function Il(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");N1(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var _n=function(){return _n=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_n.apply(this,arguments)};function rc(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}var A1=function(t,e){return A1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},A1(t,e)};function ey(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");A1(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Ua=function(){return Ua=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Ua.apply(this,arguments)};function xw(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}var zv=function(){return zv=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},zv.apply(this,arguments)};var Bt;(function(t){t[t.EXPECT_ARGUMENT_CLOSING_BRACE=1]="EXPECT_ARGUMENT_CLOSING_BRACE",t[t.EMPTY_ARGUMENT=2]="EMPTY_ARGUMENT",t[t.MALFORMED_ARGUMENT=3]="MALFORMED_ARGUMENT",t[t.EXPECT_ARGUMENT_TYPE=4]="EXPECT_ARGUMENT_TYPE",t[t.INVALID_ARGUMENT_TYPE=5]="INVALID_ARGUMENT_TYPE",t[t.EXPECT_ARGUMENT_STYLE=6]="EXPECT_ARGUMENT_STYLE",t[t.INVALID_NUMBER_SKELETON=7]="INVALID_NUMBER_SKELETON",t[t.INVALID_DATE_TIME_SKELETON=8]="INVALID_DATE_TIME_SKELETON",t[t.EXPECT_NUMBER_SKELETON=9]="EXPECT_NUMBER_SKELETON",t[t.EXPECT_DATE_TIME_SKELETON=10]="EXPECT_DATE_TIME_SKELETON",t[t.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE=11]="UNCLOSED_QUOTE_IN_ARGUMENT_STYLE",t[t.EXPECT_SELECT_ARGUMENT_OPTIONS=12]="EXPECT_SELECT_ARGUMENT_OPTIONS",t[t.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE=13]="EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE",t[t.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE=14]="INVALID_PLURAL_ARGUMENT_OFFSET_VALUE",t[t.EXPECT_SELECT_ARGUMENT_SELECTOR=15]="EXPECT_SELECT_ARGUMENT_SELECTOR",t[t.EXPECT_PLURAL_ARGUMENT_SELECTOR=16]="EXPECT_PLURAL_ARGUMENT_SELECTOR",t[t.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT=17]="EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT",t[t.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT=18]="EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT",t[t.INVALID_PLURAL_ARGUMENT_SELECTOR=19]="INVALID_PLURAL_ARGUMENT_SELECTOR",t[t.DUPLICATE_PLURAL_ARGUMENT_SELECTOR=20]="DUPLICATE_PLURAL_ARGUMENT_SELECTOR",t[t.DUPLICATE_SELECT_ARGUMENT_SELECTOR=21]="DUPLICATE_SELECT_ARGUMENT_SELECTOR",t[t.MISSING_OTHER_CLAUSE=22]="MISSING_OTHER_CLAUSE",t[t.INVALID_TAG=23]="INVALID_TAG",t[t.INVALID_TAG_NAME=25]="INVALID_TAG_NAME",t[t.UNMATCHED_CLOSING_TAG=26]="UNMATCHED_CLOSING_TAG",t[t.UNCLOSED_TAG=27]="UNCLOSED_TAG"})(Bt||(Bt={}));var cn;(function(t){t[t.literal=0]="literal",t[t.argument=1]="argument",t[t.number=2]="number",t[t.date=3]="date",t[t.time=4]="time",t[t.select=5]="select",t[t.plural=6]="plural",t[t.pound=7]="pound",t[t.tag=8]="tag"})(cn||(cn={}));var eh;(function(t){t[t.number=0]="number",t[t.dateTime=1]="dateTime"})(eh||(eh={}));function QA(t){return t.type===cn.literal}function jB(t){return t.type===cn.argument}function oD(t){return t.type===cn.number}function sD(t){return t.type===cn.date}function aD(t){return t.type===cn.time}function uD(t){return t.type===cn.select}function lD(t){return t.type===cn.plural}function UB(t){return t.type===cn.pound}function cD(t){return t.type===cn.tag}function hD(t){return!!(t&&typeof t=="object"&&t.type===eh.number)}function k1(t){return!!(t&&typeof t=="object"&&t.type===eh.dateTime)}var fD=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,VB=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;function BB(t){var e={};return t.replace(VB,function(n){var r=n.length;switch(n[0]){case"G":e.era=r===4?"long":r===5?"narrow":"short";break;case"y":e.year=r===2?"2-digit":"numeric";break;case"Y":case"u":case"U":case"r":throw new RangeError("`Y/u/U/r` (year) patterns are not supported, use `y` instead");case"q":case"Q":throw new RangeError("`q/Q` (quarter) patterns are not supported");case"M":case"L":e.month=["numeric","2-digit","short","long","narrow"][r-1];break;case"w":case"W":throw new RangeError("`w/W` (week) patterns are not supported");case"d":e.day=["numeric","2-digit"][r-1];break;case"D":case"F":case"g":throw new RangeError("`D/F/g` (day) patterns are not supported, use `d` instead");case"E":e.weekday=r===4?"short":r===5?"narrow":"short";break;case"e":if(r<4)throw new RangeError("`e..eee` (weekday) patterns are not supported");e.weekday=["short","long","narrow","short"][r-4];break;case"c":if(r<4)throw new RangeError("`c..ccc` (weekday) patterns are not supported");e.weekday=["short","long","narrow","short"][r-4];break;case"a":e.hour12=!0;break;case"b":case"B":throw new RangeError("`b/B` (period) patterns are not supported, use `a` instead");case"h":e.hourCycle="h12",e.hour=["numeric","2-digit"][r-1];break;case"H":e.hourCycle="h23",e.hour=["numeric","2-digit"][r-1];break;case"K":e.hourCycle="h11",e.hour=["numeric","2-digit"][r-1];break;case"k":e.hourCycle="h24",e.hour=["numeric","2-digit"][r-1];break;case"j":case"J":case"C":throw new RangeError("`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead");case"m":e.minute=["numeric","2-digit"][r-1];break;case"s":e.second=["numeric","2-digit"][r-1];break;case"S":case"A":throw new RangeError("`S/A` (second) patterns are not supported, use `s` instead");case"z":e.timeZoneName=r<4?"short":"long";break;case"Z":case"O":case"v":case"V":case"X":case"x":throw new RangeError("`Z/O/v/V/X/x` (timeZone) patterns are not supported, use `z` instead")}return""}),e}var Pn=function(){return Pn=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Pn.apply(this,arguments)};var zB=/[\t-\r \x85\u200E\u200F\u2028\u2029]/i;function qB(t){if(t.length===0)throw new Error("Number skeleton cannot be empty");for(var e=t.split(zB).filter(function(S){return S.length>0}),n=[],r=0,i=e;r<i.length;r++){var o=i[r],u=o.split("/");if(u.length===0)throw new Error("Invalid number skeleton");for(var h=u[0],f=u.slice(1),v=0,_=f;v<_.length;v++){var b=_[v];if(b.length===0)throw new Error("Invalid number skeleton")}n.push({stem:h,options:f})}return n}function WB(t){return t.replace(/^(.*?)-/,"")}var XA=/^\.(?:(0+)(\*)?|(#+)|(0+)(#+))$/g,dD=/^(@+)?(\+|#+)?[rs]?$/g,GB=/(\*)(0+)|(#+)(0+)|(0+)/g,pD=/^(0+)$/;function JA(t){var e={};return t[t.length-1]==="r"?e.roundingPriority="morePrecision":t[t.length-1]==="s"&&(e.roundingPriority="lessPrecision"),t.replace(dD,function(n,r,i){return typeof i!="string"?(e.minimumSignificantDigits=r.length,e.maximumSignificantDigits=r.length):i==="+"?e.minimumSignificantDigits=r.length:r[0]==="#"?e.maximumSignificantDigits=r.length:(e.minimumSignificantDigits=r.length,e.maximumSignificantDigits=r.length+(typeof i=="string"?i.length:0)),""}),e}function gD(t){switch(t){case"sign-auto":return{signDisplay:"auto"};case"sign-accounting":case"()":return{currencySign:"accounting"};case"sign-always":case"+!":return{signDisplay:"always"};case"sign-accounting-always":case"()!":return{signDisplay:"always",currencySign:"accounting"};case"sign-except-zero":case"+?":return{signDisplay:"exceptZero"};case"sign-accounting-except-zero":case"()?":return{signDisplay:"exceptZero",currencySign:"accounting"};case"sign-never":case"+_":return{signDisplay:"never"}}}function $B(t){var e;if(t[0]==="E"&&t[1]==="E"?(e={notation:"engineering"},t=t.slice(2)):t[0]==="E"&&(e={notation:"scientific"},t=t.slice(1)),e){var n=t.slice(0,2);if(n==="+!"?(e.signDisplay="always",t=t.slice(2)):n==="+?"&&(e.signDisplay="exceptZero",t=t.slice(2)),!pD.test(t))throw new Error("Malformed concise eng/scientific notation");e.minimumIntegerDigits=t.length}return e}function ZA(t){var e={},n=gD(t);return n||e}function HB(t){for(var e={},n=0,r=t;n<r.length;n++){var i=r[n];switch(i.stem){case"percent":case"%":e.style="percent";continue;case"%x100":e.style="percent",e.scale=100;continue;case"currency":e.style="currency",e.currency=i.options[0];continue;case"group-off":case",_":e.useGrouping=!1;continue;case"precision-integer":case".":e.maximumFractionDigits=0;continue;case"measure-unit":case"unit":e.style="unit",e.unit=WB(i.options[0]);continue;case"compact-short":case"K":e.notation="compact",e.compactDisplay="short";continue;case"compact-long":case"KK":e.notation="compact",e.compactDisplay="long";continue;case"scientific":e=Pn(Pn(Pn({},e),{notation:"scientific"}),i.options.reduce(function(f,v){return Pn(Pn({},f),ZA(v))},{}));continue;case"engineering":e=Pn(Pn(Pn({},e),{notation:"engineering"}),i.options.reduce(function(f,v){return Pn(Pn({},f),ZA(v))},{}));continue;case"notation-simple":e.notation="standard";continue;case"unit-width-narrow":e.currencyDisplay="narrowSymbol",e.unitDisplay="narrow";continue;case"unit-width-short":e.currencyDisplay="code",e.unitDisplay="short";continue;case"unit-width-full-name":e.currencyDisplay="name",e.unitDisplay="long";continue;case"unit-width-iso-code":e.currencyDisplay="symbol";continue;case"scale":e.scale=parseFloat(i.options[0]);continue;case"integer-width":if(i.options.length>1)throw new RangeError("integer-width stems only accept a single optional option");i.options[0].replace(GB,function(f,v,_,b,S,I){if(v)e.minimumIntegerDigits=_.length;else{if(b&&S)throw new Error("We currently do not support maximum integer digits");if(I)throw new Error("We currently do not support exact integer digits")}return""});continue}if(pD.test(i.stem)){e.minimumIntegerDigits=i.stem.length;continue}if(XA.test(i.stem)){if(i.options.length>1)throw new RangeError("Fraction-precision stems only accept a single optional option");i.stem.replace(XA,function(f,v,_,b,S,I){return _==="*"?e.minimumFractionDigits=v.length:b&&b[0]==="#"?e.maximumFractionDigits=b.length:S&&I?(e.minimumFractionDigits=S.length,e.maximumFractionDigits=S.length+I.length):(e.minimumFractionDigits=v.length,e.maximumFractionDigits=v.length),""});var o=i.options[0];o==="w"?e=Pn(Pn({},e),{trailingZeroDisplay:"stripIfInteger"}):o&&(e=Pn(Pn({},e),JA(o)));continue}if(dD.test(i.stem)){e=Pn(Pn({},e),JA(i.stem));continue}var u=gD(i.stem);u&&(e=Pn(Pn({},e),u));var h=$B(i.stem);h&&(e=Pn(Pn({},e),h))}return e}var Nw,KB=new RegExp("^".concat(fD.source,"*")),YB=new RegExp("".concat(fD.source,"*$"));function qt(t,e){return{start:t,end:e}}var QB=!!String.prototype.startsWith,XB=!!String.fromCodePoint,JB=!!Object.fromEntries,ZB=!!String.prototype.codePointAt,ez=!!String.prototype.trimStart,tz=!!String.prototype.trimEnd,nz=!!Number.isSafeInteger,rz=nz?Number.isSafeInteger:function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t&&Math.abs(t)<=9007199254740991},P1=!0;try{var iz=mD("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");P1=((Nw=iz.exec("a"))===null||Nw===void 0?void 0:Nw[0])==="a"}catch{P1=!1}var e2=QB?function(e,n,r){return e.startsWith(n,r)}:function(e,n,r){return e.slice(r,r+n.length)===n},R1=XB?String.fromCodePoint:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r="",i=e.length,o=0,u;i>o;){if(u=e[o++],u>1114111)throw RangeError(u+" is not a valid code point");r+=u<65536?String.fromCharCode(u):String.fromCharCode(((u-=65536)>>10)+55296,u%1024+56320)}return r},t2=JB?Object.fromEntries:function(e){for(var n={},r=0,i=e;r<i.length;r++){var o=i[r],u=o[0],h=o[1];n[u]=h}return n},vD=ZB?function(e,n){return e.codePointAt(n)}:function(e,n){var r=e.length;if(!(n<0||n>=r)){var i=e.charCodeAt(n),o;return i<55296||i>56319||n+1===r||(o=e.charCodeAt(n+1))<56320||o>57343?i:(i-55296<<10)+(o-56320)+65536}},oz=ez?function(e){return e.trimStart()}:function(e){return e.replace(KB,"")},sz=tz?function(e){return e.trimEnd()}:function(e){return e.replace(YB,"")};function mD(t,e){return new RegExp(t,e)}var O1;if(P1){var n2=mD("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");O1=function(e,n){var r;n2.lastIndex=n;var i=n2.exec(e);return(r=i[1])!==null&&r!==void 0?r:""}}else O1=function(e,n){for(var r=[];;){var i=vD(e,n);if(i===void 0||yD(i)||cz(i))break;r.push(i),n+=i>=65536?2:1}return R1.apply(void 0,r)};var az=function(){function t(e,n){n===void 0&&(n={}),this.message=e,this.position={offset:0,line:1,column:1},this.ignoreTag=!!n.ignoreTag,this.requiresOtherClause=!!n.requiresOtherClause,this.shouldParseSkeletons=!!n.shouldParseSkeletons}return t.prototype.parse=function(){if(this.offset()!==0)throw Error("parser can only be used once");return this.parseMessage(0,"",!1)},t.prototype.parseMessage=function(e,n,r){for(var i=[];!this.isEOF();){var o=this.char();if(o===123){var u=this.parseArgument(e,r);if(u.err)return u;i.push(u.val)}else{if(o===125&&e>0)break;if(o===35&&(n==="plural"||n==="selectordinal")){var h=this.clonePosition();this.bump(),i.push({type:cn.pound,location:qt(h,this.clonePosition())})}else if(o===60&&!this.ignoreTag&&this.peek()===47){if(r)break;return this.error(Bt.UNMATCHED_CLOSING_TAG,qt(this.clonePosition(),this.clonePosition()))}else if(o===60&&!this.ignoreTag&&D1(this.peek()||0)){var u=this.parseTag(e,n);if(u.err)return u;i.push(u.val)}else{var u=this.parseLiteral(e,n);if(u.err)return u;i.push(u.val)}}}return{val:i,err:null}},t.prototype.parseTag=function(e,n){var r=this.clonePosition();this.bump();var i=this.parseTagName();if(this.bumpSpace(),this.bumpIf("/>"))return{val:{type:cn.literal,value:"<".concat(i,"/>"),location:qt(r,this.clonePosition())},err:null};if(this.bumpIf(">")){var o=this.parseMessage(e+1,n,!0);if(o.err)return o;var u=o.val,h=this.clonePosition();if(this.bumpIf("</")){if(this.isEOF()||!D1(this.char()))return this.error(Bt.INVALID_TAG,qt(h,this.clonePosition()));var f=this.clonePosition(),v=this.parseTagName();return i!==v?this.error(Bt.UNMATCHED_CLOSING_TAG,qt(f,this.clonePosition())):(this.bumpSpace(),this.bumpIf(">")?{val:{type:cn.tag,value:i,children:u,location:qt(r,this.clonePosition())},err:null}:this.error(Bt.INVALID_TAG,qt(h,this.clonePosition())))}else return this.error(Bt.UNCLOSED_TAG,qt(r,this.clonePosition()))}else return this.error(Bt.INVALID_TAG,qt(r,this.clonePosition()))},t.prototype.parseTagName=function(){var e=this.offset();for(this.bump();!this.isEOF()&&lz(this.char());)this.bump();return this.message.slice(e,this.offset())},t.prototype.parseLiteral=function(e,n){for(var r=this.clonePosition(),i="";;){var o=this.tryParseQuote(n);if(o){i+=o;continue}var u=this.tryParseUnquoted(e,n);if(u){i+=u;continue}var h=this.tryParseLeftAngleBracket();if(h){i+=h;continue}break}var f=qt(r,this.clonePosition());return{val:{type:cn.literal,value:i,location:f},err:null}},t.prototype.tryParseLeftAngleBracket=function(){return!this.isEOF()&&this.char()===60&&(this.ignoreTag||!uz(this.peek()||0))?(this.bump(),"<"):null},t.prototype.tryParseQuote=function(e){if(this.isEOF()||this.char()!==39)return null;switch(this.peek()){case 39:return this.bump(),this.bump(),"'";case 123:case 60:case 62:case 125:break;case 35:if(e==="plural"||e==="selectordinal")break;return null;default:return null}this.bump();var n=[this.char()];for(this.bump();!this.isEOF();){var r=this.char();if(r===39)if(this.peek()===39)n.push(39),this.bump();else{this.bump();break}else n.push(r);this.bump()}return R1.apply(void 0,n)},t.prototype.tryParseUnquoted=function(e,n){if(this.isEOF())return null;var r=this.char();return r===60||r===123||r===35&&(n==="plural"||n==="selectordinal")||r===125&&e>0?null:(this.bump(),R1(r))},t.prototype.parseArgument=function(e,n){var r=this.clonePosition();if(this.bump(),this.bumpSpace(),this.isEOF())return this.error(Bt.EXPECT_ARGUMENT_CLOSING_BRACE,qt(r,this.clonePosition()));if(this.char()===125)return this.bump(),this.error(Bt.EMPTY_ARGUMENT,qt(r,this.clonePosition()));var i=this.parseIdentifierIfPossible().value;if(!i)return this.error(Bt.MALFORMED_ARGUMENT,qt(r,this.clonePosition()));if(this.bumpSpace(),this.isEOF())return this.error(Bt.EXPECT_ARGUMENT_CLOSING_BRACE,qt(r,this.clonePosition()));switch(this.char()){case 125:return this.bump(),{val:{type:cn.argument,value:i,location:qt(r,this.clonePosition())},err:null};case 44:return this.bump(),this.bumpSpace(),this.isEOF()?this.error(Bt.EXPECT_ARGUMENT_CLOSING_BRACE,qt(r,this.clonePosition())):this.parseArgumentOptions(e,n,i,r);default:return this.error(Bt.MALFORMED_ARGUMENT,qt(r,this.clonePosition()))}},t.prototype.parseIdentifierIfPossible=function(){var e=this.clonePosition(),n=this.offset(),r=O1(this.message,n),i=n+r.length;this.bumpTo(i);var o=this.clonePosition(),u=qt(e,o);return{value:r,location:u}},t.prototype.parseArgumentOptions=function(e,n,r,i){var o,u=this.clonePosition(),h=this.parseIdentifierIfPossible().value,f=this.clonePosition();switch(h){case"":return this.error(Bt.EXPECT_ARGUMENT_TYPE,qt(u,f));case"number":case"date":case"time":{this.bumpSpace();var v=null;if(this.bumpIf(",")){this.bumpSpace();var _=this.clonePosition(),b=this.parseSimpleArgStyleIfPossible();if(b.err)return b;var S=sz(b.val);if(S.length===0)return this.error(Bt.EXPECT_ARGUMENT_STYLE,qt(this.clonePosition(),this.clonePosition()));var I=qt(_,this.clonePosition());v={style:S,styleLocation:I}}var M=this.tryParseArgumentClose(i);if(M.err)return M;var D=qt(i,this.clonePosition());if(v&&e2(v==null?void 0:v.style,"::",0)){var ne=oz(v.style.slice(2));if(h==="number"){var b=this.parseNumberSkeletonFromString(ne,v.styleLocation);return b.err?b:{val:{type:cn.number,value:r,location:D,style:b.val},err:null}}else{if(ne.length===0)return this.error(Bt.EXPECT_DATE_TIME_SKELETON,D);var S={type:eh.dateTime,pattern:ne,location:v.styleLocation,parsedOptions:this.shouldParseSkeletons?BB(ne):{}},z=h==="date"?cn.date:cn.time;return{val:{type:z,value:r,location:D,style:S},err:null}}}return{val:{type:h==="number"?cn.number:h==="date"?cn.date:cn.time,value:r,location:D,style:(o=v==null?void 0:v.style)!==null&&o!==void 0?o:null},err:null}}case"plural":case"selectordinal":case"select":{var Y=this.clonePosition();if(this.bumpSpace(),!this.bumpIf(","))return this.error(Bt.EXPECT_SELECT_ARGUMENT_OPTIONS,qt(Y,zv({},Y)));this.bumpSpace();var K=this.parseIdentifierIfPossible(),ue=0;if(h!=="select"&&K.value==="offset"){if(!this.bumpIf(":"))return this.error(Bt.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,qt(this.clonePosition(),this.clonePosition()));this.bumpSpace();var b=this.tryParseDecimalInteger(Bt.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,Bt.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE);if(b.err)return b;this.bumpSpace(),K=this.parseIdentifierIfPossible(),ue=b.val}var oe=this.tryParsePluralOrSelectOptions(e,h,n,K);if(oe.err)return oe;var M=this.tryParseArgumentClose(i);if(M.err)return M;var fe=qt(i,this.clonePosition());return h==="select"?{val:{type:cn.select,value:r,options:t2(oe.val),location:fe},err:null}:{val:{type:cn.plural,value:r,options:t2(oe.val),offset:ue,pluralType:h==="plural"?"cardinal":"ordinal",location:fe},err:null}}default:return this.error(Bt.INVALID_ARGUMENT_TYPE,qt(u,f))}},t.prototype.tryParseArgumentClose=function(e){return this.isEOF()||this.char()!==125?this.error(Bt.EXPECT_ARGUMENT_CLOSING_BRACE,qt(e,this.clonePosition())):(this.bump(),{val:!0,err:null})},t.prototype.parseSimpleArgStyleIfPossible=function(){for(var e=0,n=this.clonePosition();!this.isEOF();){var r=this.char();switch(r){case 39:{this.bump();var i=this.clonePosition();if(!this.bumpUntil("'"))return this.error(Bt.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE,qt(i,this.clonePosition()));this.bump();break}case 123:{e+=1,this.bump();break}case 125:{if(e>0)e-=1;else return{val:this.message.slice(n.offset,this.offset()),err:null};break}default:this.bump();break}}return{val:this.message.slice(n.offset,this.offset()),err:null}},t.prototype.parseNumberSkeletonFromString=function(e,n){var r=[];try{r=qB(e)}catch{return this.error(Bt.INVALID_NUMBER_SKELETON,n)}return{val:{type:eh.number,tokens:r,location:n,parsedOptions:this.shouldParseSkeletons?HB(r):{}},err:null}},t.prototype.tryParsePluralOrSelectOptions=function(e,n,r,i){for(var o,u=!1,h=[],f=new Set,v=i.value,_=i.location;;){if(v.length===0){var b=this.clonePosition();if(n!=="select"&&this.bumpIf("=")){var S=this.tryParseDecimalInteger(Bt.EXPECT_PLURAL_ARGUMENT_SELECTOR,Bt.INVALID_PLURAL_ARGUMENT_SELECTOR);if(S.err)return S;_=qt(b,this.clonePosition()),v=this.message.slice(b.offset,this.offset())}else break}if(f.has(v))return this.error(n==="select"?Bt.DUPLICATE_SELECT_ARGUMENT_SELECTOR:Bt.DUPLICATE_PLURAL_ARGUMENT_SELECTOR,_);v==="other"&&(u=!0),this.bumpSpace();var I=this.clonePosition();if(!this.bumpIf("{"))return this.error(n==="select"?Bt.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT:Bt.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT,qt(this.clonePosition(),this.clonePosition()));var M=this.parseMessage(e+1,n,r);if(M.err)return M;var D=this.tryParseArgumentClose(I);if(D.err)return D;h.push([v,{value:M.val,location:qt(I,this.clonePosition())}]),f.add(v),this.bumpSpace(),o=this.parseIdentifierIfPossible(),v=o.value,_=o.location}return h.length===0?this.error(n==="select"?Bt.EXPECT_SELECT_ARGUMENT_SELECTOR:Bt.EXPECT_PLURAL_ARGUMENT_SELECTOR,qt(this.clonePosition(),this.clonePosition())):this.requiresOtherClause&&!u?this.error(Bt.MISSING_OTHER_CLAUSE,qt(this.clonePosition(),this.clonePosition())):{val:h,err:null}},t.prototype.tryParseDecimalInteger=function(e,n){var r=1,i=this.clonePosition();this.bumpIf("+")||this.bumpIf("-")&&(r=-1);for(var o=!1,u=0;!this.isEOF();){var h=this.char();if(h>=48&&h<=57)o=!0,u=u*10+(h-48),this.bump();else break}var f=qt(i,this.clonePosition());return o?(u*=r,rz(u)?{val:u,err:null}:this.error(n,f)):this.error(e,f)},t.prototype.offset=function(){return this.position.offset},t.prototype.isEOF=function(){return this.offset()===this.message.length},t.prototype.clonePosition=function(){return{offset:this.position.offset,line:this.position.line,column:this.position.column}},t.prototype.char=function(){var e=this.position.offset;if(e>=this.message.length)throw Error("out of bound");var n=vD(this.message,e);if(n===void 0)throw Error("Offset ".concat(e," is at invalid UTF-16 code unit boundary"));return n},t.prototype.error=function(e,n){return{val:null,err:{kind:e,message:this.message,location:n}}},t.prototype.bump=function(){if(!this.isEOF()){var e=this.char();e===10?(this.position.line+=1,this.position.column=1,this.position.offset+=1):(this.position.column+=1,this.position.offset+=e<65536?1:2)}},t.prototype.bumpIf=function(e){if(e2(this.message,e,this.offset())){for(var n=0;n<e.length;n++)this.bump();return!0}return!1},t.prototype.bumpUntil=function(e){var n=this.offset(),r=this.message.indexOf(e,n);return r>=0?(this.bumpTo(r),!0):(this.bumpTo(this.message.length),!1)},t.prototype.bumpTo=function(e){if(this.offset()>e)throw Error("targetOffset ".concat(e," must be greater than or equal to the current offset ").concat(this.offset()));for(e=Math.min(e,this.message.length);;){var n=this.offset();if(n===e)break;if(n>e)throw Error("targetOffset ".concat(e," is at invalid UTF-16 code unit boundary"));if(this.bump(),this.isEOF())break}},t.prototype.bumpSpace=function(){for(;!this.isEOF()&&yD(this.char());)this.bump()},t.prototype.peek=function(){if(this.isEOF())return null;var e=this.char(),n=this.offset(),r=this.message.charCodeAt(n+(e>=65536?2:1));return r??null},t}();function D1(t){return t>=97&&t<=122||t>=65&&t<=90}function uz(t){return D1(t)||t===47}function lz(t){return t===45||t===46||t>=48&&t<=57||t===95||t>=97&&t<=122||t>=65&&t<=90||t==183||t>=192&&t<=214||t>=216&&t<=246||t>=248&&t<=893||t>=895&&t<=8191||t>=8204&&t<=8205||t>=8255&&t<=8256||t>=8304&&t<=8591||t>=11264&&t<=12271||t>=12289&&t<=55295||t>=63744&&t<=64975||t>=65008&&t<=65533||t>=65536&&t<=983039}function yD(t){return t>=9&&t<=13||t===32||t===133||t>=8206&&t<=8207||t===8232||t===8233}function cz(t){return t>=33&&t<=35||t===36||t>=37&&t<=39||t===40||t===41||t===42||t===43||t===44||t===45||t>=46&&t<=47||t>=58&&t<=59||t>=60&&t<=62||t>=63&&t<=64||t===91||t===92||t===93||t===94||t===96||t===123||t===124||t===125||t===126||t===161||t>=162&&t<=165||t===166||t===167||t===169||t===171||t===172||t===174||t===176||t===177||t===182||t===187||t===191||t===215||t===247||t>=8208&&t<=8213||t>=8214&&t<=8215||t===8216||t===8217||t===8218||t>=8219&&t<=8220||t===8221||t===8222||t===8223||t>=8224&&t<=8231||t>=8240&&t<=8248||t===8249||t===8250||t>=8251&&t<=8254||t>=8257&&t<=8259||t===8260||t===8261||t===8262||t>=8263&&t<=8273||t===8274||t===8275||t>=8277&&t<=8286||t>=8592&&t<=8596||t>=8597&&t<=8601||t>=8602&&t<=8603||t>=8604&&t<=8607||t===8608||t>=8609&&t<=8610||t===8611||t>=8612&&t<=8613||t===8614||t>=8615&&t<=8621||t===8622||t>=8623&&t<=8653||t>=8654&&t<=8655||t>=8656&&t<=8657||t===8658||t===8659||t===8660||t>=8661&&t<=8691||t>=8692&&t<=8959||t>=8960&&t<=8967||t===8968||t===8969||t===8970||t===8971||t>=8972&&t<=8991||t>=8992&&t<=8993||t>=8994&&t<=9e3||t===9001||t===9002||t>=9003&&t<=9083||t===9084||t>=9085&&t<=9114||t>=9115&&t<=9139||t>=9140&&t<=9179||t>=9180&&t<=9185||t>=9186&&t<=9254||t>=9255&&t<=9279||t>=9280&&t<=9290||t>=9291&&t<=9311||t>=9472&&t<=9654||t===9655||t>=9656&&t<=9664||t===9665||t>=9666&&t<=9719||t>=9720&&t<=9727||t>=9728&&t<=9838||t===9839||t>=9840&&t<=10087||t===10088||t===10089||t===10090||t===10091||t===10092||t===10093||t===10094||t===10095||t===10096||t===10097||t===10098||t===10099||t===10100||t===10101||t>=10132&&t<=10175||t>=10176&&t<=10180||t===10181||t===10182||t>=10183&&t<=10213||t===10214||t===10215||t===10216||t===10217||t===10218||t===10219||t===10220||t===10221||t===10222||t===10223||t>=10224&&t<=10239||t>=10240&&t<=10495||t>=10496&&t<=10626||t===10627||t===10628||t===10629||t===10630||t===10631||t===10632||t===10633||t===10634||t===10635||t===10636||t===10637||t===10638||t===10639||t===10640||t===10641||t===10642||t===10643||t===10644||t===10645||t===10646||t===10647||t===10648||t>=10649&&t<=10711||t===10712||t===10713||t===10714||t===10715||t>=10716&&t<=10747||t===10748||t===10749||t>=10750&&t<=11007||t>=11008&&t<=11055||t>=11056&&t<=11076||t>=11077&&t<=11078||t>=11079&&t<=11084||t>=11085&&t<=11123||t>=11124&&t<=11125||t>=11126&&t<=11157||t===11158||t>=11159&&t<=11263||t>=11776&&t<=11777||t===11778||t===11779||t===11780||t===11781||t>=11782&&t<=11784||t===11785||t===11786||t===11787||t===11788||t===11789||t>=11790&&t<=11798||t===11799||t>=11800&&t<=11801||t===11802||t===11803||t===11804||t===11805||t>=11806&&t<=11807||t===11808||t===11809||t===11810||t===11811||t===11812||t===11813||t===11814||t===11815||t===11816||t===11817||t>=11818&&t<=11822||t===11823||t>=11824&&t<=11833||t>=11834&&t<=11835||t>=11836&&t<=11839||t===11840||t===11841||t===11842||t>=11843&&t<=11855||t>=11856&&t<=11857||t===11858||t>=11859&&t<=11903||t>=12289&&t<=12291||t===12296||t===12297||t===12298||t===12299||t===12300||t===12301||t===12302||t===12303||t===12304||t===12305||t>=12306&&t<=12307||t===12308||t===12309||t===12310||t===12311||t===12312||t===12313||t===12314||t===12315||t===12316||t===12317||t>=12318&&t<=12319||t===12320||t===12336||t===64830||t===64831||t>=65093&&t<=65094}function L1(t){t.forEach(function(e){if(delete e.location,uD(e)||lD(e))for(var n in e.options)delete e.options[n].location,L1(e.options[n].value);else oD(e)&&hD(e.style)||(sD(e)||aD(e))&&k1(e.style)?delete e.style.location:cD(e)&&L1(e.children)})}function hz(t,e){e===void 0&&(e={}),e=zv({shouldParseSkeletons:!0,requiresOtherClause:!0},e);var n=new az(t,e).parse();if(n.err){var r=SyntaxError(Bt[n.err.kind]);throw r.location=n.err.location,r.originalMessage=n.err.message,r}return e!=null&&e.captureLocation||L1(n.val),n.val}function ls(t,e){var n=e&&e.cache?e.cache:mz,r=e&&e.serializer?e.serializer:vz,i=e&&e.strategy?e.strategy:dz;return i(t,{cache:n,serializer:r})}function fz(t){return t==null||typeof t=="number"||typeof t=="boolean"}function _D(t,e,n,r){var i=fz(r)?r:n(r),o=e.get(i);return typeof o>"u"&&(o=t.call(this,r),e.set(i,o)),o}function wD(t,e,n){var r=Array.prototype.slice.call(arguments,3),i=n(r),o=e.get(i);return typeof o>"u"&&(o=t.apply(this,r),e.set(i,o)),o}function Fb(t,e,n,r,i){return n.bind(e,t,r,i)}function dz(t,e){var n=t.length===1?_D:wD;return Fb(t,this,n,e.cache.create(),e.serializer)}function pz(t,e){return Fb(t,this,wD,e.cache.create(),e.serializer)}function gz(t,e){return Fb(t,this,_D,e.cache.create(),e.serializer)}var vz=function(){return JSON.stringify(arguments)};function jb(){this.cache=Object.create(null)}jb.prototype.get=function(t){return this.cache[t]};jb.prototype.set=function(t,e){this.cache[t]=e};var mz={create:function(){return new jb}},cs={variadic:pz,monadic:gz},_s;(function(t){t.MISSING_VALUE="MISSING_VALUE",t.INVALID_VALUE="INVALID_VALUE",t.MISSING_INTL_API="MISSING_INTL_API"})(_s||(_s={}));var vu=function(t){ey(e,t);function e(n,r,i){var o=t.call(this,n)||this;return o.code=r,o.originalMessage=i,o}return e.prototype.toString=function(){return"[formatjs Error: ".concat(this.code,"] ").concat(this.message)},e}(Error),r2=function(t){ey(e,t);function e(n,r,i,o){return t.call(this,'Invalid values for "'.concat(n,'": "').concat(r,'". Options are "').concat(Object.keys(i).join('", "'),'"'),_s.INVALID_VALUE,o)||this}return e}(vu),yz=function(t){ey(e,t);function e(n,r,i){return t.call(this,'Value for "'.concat(n,'" must be of type ').concat(r),_s.INVALID_VALUE,i)||this}return e}(vu),_z=function(t){ey(e,t);function e(n,r){return t.call(this,'The intl string context variable "'.concat(n,'" was not provided to the string "').concat(r,'"'),_s.MISSING_VALUE,r)||this}return e}(vu),ri;(function(t){t[t.literal=0]="literal",t[t.object=1]="object"})(ri||(ri={}));function wz(t){return t.length<2?t:t.reduce(function(e,n){var r=e[e.length-1];return!r||r.type!==ri.literal||n.type!==ri.literal?e.push(n):r.value+=n.value,e},[])}function ED(t){return typeof t=="function"}function ov(t,e,n,r,i,o,u){if(t.length===1&&QA(t[0]))return[{type:ri.literal,value:t[0].value}];for(var h=[],f=0,v=t;f<v.length;f++){var _=v[f];if(QA(_)){h.push({type:ri.literal,value:_.value});continue}if(UB(_)){typeof o=="number"&&h.push({type:ri.literal,value:n.getNumberFormat(e).format(o)});continue}var b=_.value;if(!(i&&b in i))throw new _z(b,u);var S=i[b];if(jB(_)){(!S||typeof S=="string"||typeof S=="number")&&(S=typeof S=="string"||typeof S=="number"?String(S):""),h.push({type:typeof S=="string"?ri.literal:ri.object,value:S});continue}if(sD(_)){var I=typeof _.style=="string"?r.date[_.style]:k1(_.style)?_.style.parsedOptions:void 0;h.push({type:ri.literal,value:n.getDateTimeFormat(e,I).format(S)});continue}if(aD(_)){var I=typeof _.style=="string"?r.time[_.style]:k1(_.style)?_.style.parsedOptions:void 0;h.push({type:ri.literal,value:n.getDateTimeFormat(e,I).format(S)});continue}if(oD(_)){var I=typeof _.style=="string"?r.number[_.style]:hD(_.style)?_.style.parsedOptions:void 0;I&&I.scale&&(S=S*(I.scale||1)),h.push({type:ri.literal,value:n.getNumberFormat(e,I).format(S)});continue}if(cD(_)){var M=_.children,D=_.value,ne=i[D];if(!ED(ne))throw new yz(D,"function",u);var z=ov(M,e,n,r,i,o),Y=ne(z.map(function(oe){return oe.value}));Array.isArray(Y)||(Y=[Y]),h.push.apply(h,Y.map(function(oe){return{type:typeof oe=="string"?ri.literal:ri.object,value:oe}}))}if(uD(_)){var K=_.options[S]||_.options.other;if(!K)throw new r2(_.value,S,Object.keys(_.options),u);h.push.apply(h,ov(K.value,e,n,r,i));continue}if(lD(_)){var K=_.options["=".concat(S)];if(!K){if(!Intl.PluralRules)throw new vu(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,_s.MISSING_INTL_API,u);var ue=n.getPluralRules(e,{type:_.pluralType}).select(S-(_.offset||0));K=_.options[ue]||_.options.other}if(!K)throw new r2(_.value,S,Object.keys(_.options),u);h.push.apply(h,ov(K.value,e,n,r,i,S-(_.offset||0)));continue}}return wz(h)}function Ez(t,e){return e?Ua(Ua(Ua({},t||{}),e||{}),Object.keys(t).reduce(function(n,r){return n[r]=Ua(Ua({},t[r]),e[r]||{}),n},{})):t}function Sz(t,e){return e?Object.keys(t).reduce(function(n,r){return n[r]=Ez(t[r],e[r]),n},Ua({},t)):t}function Aw(t){return{create:function(){return{get:function(e){return t[e]},set:function(e,n){t[e]=n}}}}}function bz(t){return t===void 0&&(t={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:ls(function(){for(var e,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return new((e=Intl.NumberFormat).bind.apply(e,xw([void 0],n,!1)))},{cache:Aw(t.number),strategy:cs.variadic}),getDateTimeFormat:ls(function(){for(var e,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return new((e=Intl.DateTimeFormat).bind.apply(e,xw([void 0],n,!1)))},{cache:Aw(t.dateTime),strategy:cs.variadic}),getPluralRules:ls(function(){for(var e,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return new((e=Intl.PluralRules).bind.apply(e,xw([void 0],n,!1)))},{cache:Aw(t.pluralRules),strategy:cs.variadic})}}var SD=function(){function t(e,n,r,i){var o=this;if(n===void 0&&(n=t.defaultLocale),this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(u){var h=o.formatToParts(u);if(h.length===1)return h[0].value;var f=h.reduce(function(v,_){return!v.length||_.type!==ri.literal||typeof v[v.length-1]!="string"?v.push(_.value):v[v.length-1]+=_.value,v},[]);return f.length<=1?f[0]||"":f},this.formatToParts=function(u){return ov(o.ast,o.locales,o.formatters,o.formats,u,void 0,o.message)},this.resolvedOptions=function(){return{locale:Intl.NumberFormat.supportedLocalesOf(o.locales)[0]}},this.getAst=function(){return o.ast},typeof e=="string"){if(this.message=e,!t.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");this.ast=t.__parse(e,{ignoreTag:i==null?void 0:i.ignoreTag})}else this.ast=e;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=Sz(t.formats,r),this.locales=n,this.formatters=i&&i.formatters||bz(this.formatterCache)}return Object.defineProperty(t,"defaultLocale",{get:function(){return t.memoizedDefaultLocale||(t.memoizedDefaultLocale=new Intl.NumberFormat().resolvedOptions().locale),t.memoizedDefaultLocale},enumerable:!1,configurable:!0}),t.memoizedDefaultLocale=null,t.__parse=hz,t.formats={number:{integer:{maximumFractionDigits:0},currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},t}(),$r;(function(t){t.FORMAT_ERROR="FORMAT_ERROR",t.UNSUPPORTED_FORMATTER="UNSUPPORTED_FORMATTER",t.INVALID_CONFIG="INVALID_CONFIG",t.MISSING_DATA="MISSING_DATA",t.MISSING_TRANSLATION="MISSING_TRANSLATION"})($r||($r={}));var Ai=function(t){Il(e,t);function e(n,r,i){var o=this,u=i?i instanceof Error?i:new Error(String(i)):void 0;return o=t.call(this,"[@formatjs/intl Error ".concat(n,"] ").concat(r,` 
`).concat(u?`
`.concat(u.message,`
`).concat(u.stack):""))||this,o.code=n,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(o,e),o}return e}(Error),Tz=function(t){Il(e,t);function e(n,r){return t.call(this,$r.UNSUPPORTED_FORMATTER,n,r)||this}return e}(Ai),Iz=function(t){Il(e,t);function e(n,r){return t.call(this,$r.INVALID_CONFIG,n,r)||this}return e}(Ai),i2=function(t){Il(e,t);function e(n,r){return t.call(this,$r.MISSING_DATA,n,r)||this}return e}(Ai),Ub=function(t){Il(e,t);function e(n,r,i){return t.call(this,$r.FORMAT_ERROR,"".concat(n,` 
Locale: `).concat(r,`
`),i)||this}return e}(Ai),kw=function(t){Il(e,t);function e(n,r,i,o){var u=t.call(this,"".concat(n,` 
MessageID: `).concat(i==null?void 0:i.id,`
Default Message: `).concat(i==null?void 0:i.defaultMessage,`
Description: `).concat(i==null?void 0:i.description,` 
`),r,o)||this;return u.descriptor=i,u}return e}(Ub),Cz=function(t){Il(e,t);function e(n,r){var i=t.call(this,$r.MISSING_TRANSLATION,'Missing message: "'.concat(n.id,'" for locale "').concat(r,'", using ').concat(n.defaultMessage?"default message":"id"," as fallback."))||this;return i.descriptor=n,i}return e}(Ai);function Cl(t,e,n){return n===void 0&&(n={}),e.reduce(function(r,i){return i in t?r[i]=t[i]:i in n&&(r[i]=n[i]),r},{})}var xz=function(t){},bD={formats:{},messages:{},timeZone:void 0,defaultLocale:"en",defaultFormats:{},fallbackOnEmptyString:!0,onError:xz};function TD(){return{dateTime:{},number:{},message:{},relativeTime:{},pluralRules:{},list:{},displayNames:{}}}function Bu(t){return{create:function(){return{get:function(e){return t[e]},set:function(e,n){t[e]=n}}}}}function Nz(t){t===void 0&&(t=TD());var e=Intl.RelativeTimeFormat,n=Intl.ListFormat,r=Intl.DisplayNames,i=ls(function(){for(var h,f=[],v=0;v<arguments.length;v++)f[v]=arguments[v];return new((h=Intl.DateTimeFormat).bind.apply(h,rc([void 0],f,!1)))},{cache:Bu(t.dateTime),strategy:cs.variadic}),o=ls(function(){for(var h,f=[],v=0;v<arguments.length;v++)f[v]=arguments[v];return new((h=Intl.NumberFormat).bind.apply(h,rc([void 0],f,!1)))},{cache:Bu(t.number),strategy:cs.variadic}),u=ls(function(){for(var h,f=[],v=0;v<arguments.length;v++)f[v]=arguments[v];return new((h=Intl.PluralRules).bind.apply(h,rc([void 0],f,!1)))},{cache:Bu(t.pluralRules),strategy:cs.variadic});return{getDateTimeFormat:i,getNumberFormat:o,getMessageFormat:ls(function(h,f,v,_){return new SD(h,f,v,_n({formatters:{getNumberFormat:o,getDateTimeFormat:i,getPluralRules:u}},_||{}))},{cache:Bu(t.message),strategy:cs.variadic}),getRelativeTimeFormat:ls(function(){for(var h=[],f=0;f<arguments.length;f++)h[f]=arguments[f];return new(e.bind.apply(e,rc([void 0],h,!1)))},{cache:Bu(t.relativeTime),strategy:cs.variadic}),getPluralRules:u,getListFormat:ls(function(){for(var h=[],f=0;f<arguments.length;f++)h[f]=arguments[f];return new(n.bind.apply(n,rc([void 0],h,!1)))},{cache:Bu(t.list),strategy:cs.variadic}),getDisplayNames:ls(function(){for(var h=[],f=0;f<arguments.length;f++)h[f]=arguments[f];return new(r.bind.apply(r,rc([void 0],h,!1)))},{cache:Bu(t.displayNames),strategy:cs.variadic})}}function Vb(t,e,n,r){var i=t&&t[e],o;if(i&&(o=i[n]),o)return o;r(new Tz("No ".concat(e," format named: ").concat(n)))}function Ig(t,e){return Object.keys(t).reduce(function(n,r){return n[r]=_n({timeZone:e},t[r]),n},{})}function o2(t,e){var n=Object.keys(_n(_n({},t),e));return n.reduce(function(r,i){return r[i]=_n(_n({},t[i]||{}),e[i]||{}),r},{})}function s2(t,e){if(!e)return t;var n=SD.formats;return _n(_n(_n({},n),t),{date:o2(Ig(n.date,e),Ig(t.date||{},e)),time:o2(Ig(n.time,e),Ig(t.time||{},e))})}function ID(t,e,n,r,i){var o=t.locale,u=t.formats,h=t.messages,f=t.defaultLocale,v=t.defaultFormats,_=t.fallbackOnEmptyString,b=t.onError,S=t.timeZone,I=t.defaultRichTextElements;n===void 0&&(n={id:""});var M=n.id,D=n.defaultMessage;iD(!!M,"[@formatjs/intl] An `id` must be provided to format a message. You can either:\n1. Configure your build toolchain with [babel-plugin-formatjs](https://formatjs.io/docs/tooling/babel-plugin)\nor [@formatjs/ts-transformer](https://formatjs.io/docs/tooling/ts-transformer) OR\n2. Configure your `eslint` config to include [eslint-plugin-formatjs](https://formatjs.io/docs/tooling/linter#enforce-id)\nto autofix this issue");var ne=String(M),z=h&&Object.prototype.hasOwnProperty.call(h,ne)&&h[ne];if(Array.isArray(z)&&z.length===1&&z[0].type===cn.literal)return z[0].value;if(!r&&z&&typeof z=="string"&&!I)return z.replace(/'\{(.*?)\}'/gi,"{$1}");if(r=_n(_n({},I),r||{}),u=s2(u,S),v=s2(v,S),!z){if(_===!1&&z==="")return z;if((!D||o&&o.toLowerCase()!==f.toLowerCase())&&b(new Cz(n,o)),D)try{var Y=e.getMessageFormat(D,f,v,i);return Y.format(r)}catch(K){return b(new kw('Error formatting default message for: "'.concat(ne,'", rendering default message verbatim'),o,n,K)),typeof D=="string"?D:ne}return ne}try{var Y=e.getMessageFormat(z,o,u,_n({formatters:e},i||{}));return Y.format(r)}catch(K){b(new kw('Error formatting message: "'.concat(ne,'", using ').concat(D?"default message":"id"," as fallback."),o,n,K))}if(D)try{var Y=e.getMessageFormat(D,f,v,i);return Y.format(r)}catch(K){b(new kw('Error formatting the default message for: "'.concat(ne,'", rendering message verbatim'),o,n,K))}return typeof z=="string"?z:typeof D=="string"?D:ne}var CD=["localeMatcher","formatMatcher","timeZone","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName","hourCycle","dateStyle","timeStyle","calendar","numberingSystem"];function ty(t,e,n,r){var i=t.locale,o=t.formats,u=t.onError,h=t.timeZone;r===void 0&&(r={});var f=r.format,v=_n(_n({},h&&{timeZone:h}),f&&Vb(o,e,f,u)),_=Cl(r,CD,v);return e==="time"&&!_.hour&&!_.minute&&!_.second&&!_.timeStyle&&!_.dateStyle&&(_=_n(_n({},_),{hour:"numeric",minute:"numeric"})),n(i,_)}function Az(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n[0],o=n[1],u=o===void 0?{}:o,h=typeof i=="string"?new Date(i||0):i;try{return ty(t,"date",e,u).format(h)}catch(f){t.onError(new Ai($r.FORMAT_ERROR,"Error formatting date.",f))}return String(h)}function kz(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n[0],o=n[1],u=o===void 0?{}:o,h=typeof i=="string"?new Date(i||0):i;try{return ty(t,"time",e,u).format(h)}catch(f){t.onError(new Ai($r.FORMAT_ERROR,"Error formatting time.",f))}return String(h)}function Pz(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n[0],o=n[1],u=n[2],h=u===void 0?{}:u,f=t.timeZone,v=t.locale,_=t.onError,b=Cl(h,CD,f?{timeZone:f}:{});try{return e(v,b).formatRange(i,o)}catch(S){_(new Ai($r.FORMAT_ERROR,"Error formatting date time range.",S))}return String(i)}function Rz(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n[0],o=n[1],u=o===void 0?{}:o,h=typeof i=="string"?new Date(i||0):i;try{return ty(t,"date",e,u).formatToParts(h)}catch(f){t.onError(new Ai($r.FORMAT_ERROR,"Error formatting date.",f))}return[]}function Oz(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n[0],o=n[1],u=o===void 0?{}:o,h=typeof i=="string"?new Date(i||0):i;try{return ty(t,"time",e,u).formatToParts(h)}catch(f){t.onError(new Ai($r.FORMAT_ERROR,"Error formatting time.",f))}return[]}var Dz=["localeMatcher","style","type","fallback"];function Lz(t,e,n,r){var i=t.locale,o=t.onError,u=Intl.DisplayNames;u||o(new vu(`Intl.DisplayNames is not available in this environment.
Try polyfilling it using "@formatjs/intl-displaynames"
`,_s.MISSING_INTL_API));var h=Cl(r,Dz);try{return e(i,h).of(n)}catch(f){o(new Ai($r.FORMAT_ERROR,"Error formatting display name.",f))}}var Mz=["localeMatcher","type","style"],a2=Date.now();function Fz(t){return"".concat(a2,"_").concat(t,"_").concat(a2)}function jz(t,e,n,r){r===void 0&&(r={});var i=xD(t,e,n,r).reduce(function(o,u){var h=u.value;return typeof h!="string"?o.push(h):typeof o[o.length-1]=="string"?o[o.length-1]+=h:o.push(h),o},[]);return i.length===1?i[0]:i}function xD(t,e,n,r){var i=t.locale,o=t.onError;r===void 0&&(r={});var u=Intl.ListFormat;u||o(new vu(`Intl.ListFormat is not available in this environment.
Try polyfilling it using "@formatjs/intl-listformat"
`,_s.MISSING_INTL_API));var h=Cl(r,Mz);try{var f={},v=n.map(function(_,b){if(typeof _=="object"){var S=Fz(b);return f[S]=_,S}return String(_)});return e(i,h).formatToParts(v).map(function(_){return _.type==="literal"?_:_n(_n({},_),{value:f[_.value]||_.value})})}catch(_){o(new Ai($r.FORMAT_ERROR,"Error formatting list.",_))}return n}var Uz=["localeMatcher","type"];function Vz(t,e,n,r){var i=t.locale,o=t.onError;r===void 0&&(r={}),Intl.PluralRules||o(new vu(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,_s.MISSING_INTL_API));var u=Cl(r,Uz);try{return e(i,u).select(n)}catch(h){o(new Ub("Error formatting plural.",i,h))}return"other"}var Bz=["numeric","style"];function zz(t,e,n){var r=t.locale,i=t.formats,o=t.onError;n===void 0&&(n={});var u=n.format,h=!!u&&Vb(i,"relative",u,o)||{},f=Cl(n,Bz,h);return e(r,f)}function qz(t,e,n,r,i){i===void 0&&(i={}),r||(r="second");var o=Intl.RelativeTimeFormat;o||t.onError(new vu(`Intl.RelativeTimeFormat is not available in this environment.
Try polyfilling it using "@formatjs/intl-relativetimeformat"
`,_s.MISSING_INTL_API));try{return zz(t,e,i).format(n,r)}catch(u){t.onError(new Ub("Error formatting relative time.",t.locale,u))}return String(n)}var Wz=["localeMatcher","style","currency","currencyDisplay","unit","unitDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","currencyDisplay","currencySign","notation","signDisplay","unit","unitDisplay","numberingSystem"];function ND(t,e,n){var r=t.locale,i=t.formats,o=t.onError;n===void 0&&(n={});var u=n.format,h=u&&Vb(i,"number",u,o)||{},f=Cl(n,Wz,h);return e(r,f)}function Gz(t,e,n,r){r===void 0&&(r={});try{return ND(t,e,r).format(n)}catch(i){t.onError(new Ai($r.FORMAT_ERROR,"Error formatting number.",i))}return String(n)}function $z(t,e,n,r){r===void 0&&(r={});try{return ND(t,e,r).formatToParts(n)}catch(i){t.onError(new Ai($r.FORMAT_ERROR,"Error formatting number.",i))}return[]}function Hz(t){var e=t?t[Object.keys(t)[0]]:void 0;return typeof e=="string"}function Kz(t){t.defaultRichTextElements&&Hz(t.messages||{})&&console.warn(`[@formatjs/intl] "defaultRichTextElements" was specified but "message" was not pre-compiled. 
Please consider using "@formatjs/cli" to pre-compile your messages for performance.
For more details see https://formatjs.io/docs/getting-started/message-distribution`)}function Yz(t,e){var n=Nz(e),r=_n(_n({},bD),t),i=r.locale,o=r.defaultLocale,u=r.onError;return i?!Intl.NumberFormat.supportedLocalesOf(i).length&&u?u(new i2('Missing locale data for locale: "'.concat(i,'" in Intl.NumberFormat. Using default locale: "').concat(o,'" as fallback. See https://formatjs.io/docs/react-intl#runtime-requirements for more details'))):!Intl.DateTimeFormat.supportedLocalesOf(i).length&&u&&u(new i2('Missing locale data for locale: "'.concat(i,'" in Intl.DateTimeFormat. Using default locale: "').concat(o,'" as fallback. See https://formatjs.io/docs/react-intl#runtime-requirements for more details'))):(u&&u(new Iz('"locale" was not configured, using "'.concat(o,'" as fallback. See https://formatjs.io/docs/react-intl/api#intlshape for more details'))),r.locale=r.defaultLocale||"en"),Kz(r),_n(_n({},r),{formatters:n,formatNumber:Gz.bind(null,r,n.getNumberFormat),formatNumberToParts:$z.bind(null,r,n.getNumberFormat),formatRelativeTime:qz.bind(null,r,n.getRelativeTimeFormat),formatDate:Az.bind(null,r,n.getDateTimeFormat),formatDateToParts:Rz.bind(null,r,n.getDateTimeFormat),formatTime:kz.bind(null,r,n.getDateTimeFormat),formatDateTimeRange:Pz.bind(null,r,n.getDateTimeFormat),formatTimeToParts:Oz.bind(null,r,n.getDateTimeFormat),formatPlural:Vz.bind(null,r,n.getPluralRules),formatMessage:ID.bind(null,r,n),formatList:jz.bind(null,r,n.getListFormat),formatListToParts:xD.bind(null,r,n.getListFormat),formatDisplayName:Lz.bind(null,r,n.getDisplayNames)})}function AD(t){iD(t,"[React Intl] Could not find required `intl` object. <IntlProvider> needs to exist in the component ancestry.")}var kD=Ws(Ws({},bD),{textComponent:ee.Fragment});function Qz(t){return function(e){return t(ee.Children.toArray(e))}}function M1(t,e){if(t===e)return!0;if(!t||!e)return!1;var n=Object.keys(t),r=Object.keys(e),i=n.length;if(r.length!==i)return!1;for(var o=0;o<i;o++){var u=n[o];if(t[u]!==e[u]||!Object.prototype.hasOwnProperty.call(e,u))return!1}return!0}var Bb=ee.createContext(null);Bb.Consumer;var Xz=Bb.Provider,Jz=Xz,Zz=Bb;function xn(){var t=ee.useContext(Zz);return AD(t),t}var F1;(function(t){t.formatDate="FormattedDate",t.formatTime="FormattedTime",t.formatNumber="FormattedNumber",t.formatList="FormattedList",t.formatDisplayName="FormattedDisplayName"})(F1||(F1={}));var j1;(function(t){t.formatDate="FormattedDateParts",t.formatTime="FormattedTimeParts",t.formatNumber="FormattedNumberParts",t.formatList="FormattedListParts"})(j1||(j1={}));function PD(t){var e=function(n){var r=xn(),i=n.value,o=n.children,u=hd(n,["value","children"]),h=typeof i=="string"?new Date(i||0):i,f=t==="formatDate"?r.formatDateToParts(h,u):r.formatTimeToParts(h,u);return o(f)};return e.displayName=j1[t],e}function Gd(t){var e=function(n){var r=xn(),i=n.value,o=n.children,u=hd(n,["value","children"]),h=r[t](i,u);if(typeof o=="function")return o(h);var f=r.textComponent||ee.Fragment;return ee.createElement(f,null,h)};return e.displayName=F1[t],e}function Pw(t){return{locale:t.locale,timeZone:t.timeZone,fallbackOnEmptyString:t.fallbackOnEmptyString,formats:t.formats,textComponent:t.textComponent,messages:t.messages,defaultLocale:t.defaultLocale,defaultFormats:t.defaultFormats,onError:t.onError,wrapRichTextChunksInFragment:t.wrapRichTextChunksInFragment,defaultRichTextElements:t.defaultRichTextElements}}function RD(t){return t&&Object.keys(t).reduce(function(e,n){var r=t[n];return e[n]=ED(r)?Qz(r):r,e},{})}var e8=function(t,e,n,r){for(var i=[],o=4;o<arguments.length;o++)i[o-4]=arguments[o];var u=RD(r),h=ID.apply(void 0,AB([t,e,n,u],i,!1));return Array.isArray(h)?ee.Children.toArray(h):h},u2=function(t,e){var n=t.defaultRichTextElements,r=hd(t,["defaultRichTextElements"]),i=RD(n),o=Yz(Ws(Ws(Ws({},kD),r),{defaultRichTextElements:i}),e);return Ws(Ws({},o),{formatMessage:e8.bind(null,{locale:o.locale,timeZone:o.timeZone,formats:o.formats,defaultLocale:o.defaultLocale,defaultFormats:o.defaultFormats,messages:o.messages,onError:o.onError,defaultRichTextElements:i},o.formatters)})},t8=function(t){NB(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.cache=TD(),n.state={cache:n.cache,intl:u2(Pw(n.props),n.cache),prevConfig:Pw(n.props)},n}return e.getDerivedStateFromProps=function(n,r){var i=r.prevConfig,o=r.cache,u=Pw(n);return M1(i,u)?null:{intl:u2(u,o),prevConfig:u}},e.prototype.render=function(){return AD(this.state.intl),ee.createElement(Jz,{value:this.state.intl},this.props.children)},e.displayName="IntlProvider",e.defaultProps=kD,e}(ee.PureComponent);const n8=t8;function r8(t,e){var n=t.values,r=hd(t,["values"]),i=e.values,o=hd(e,["values"]);return M1(i,n)&&M1(r,o)}function OD(t){var e=xn(),n=e.formatMessage,r=e.textComponent,i=r===void 0?ee.Fragment:r,o=t.id,u=t.description,h=t.defaultMessage,f=t.values,v=t.children,_=t.tagName,b=_===void 0?i:_,S=t.ignoreTag,I={id:o,description:u,defaultMessage:h},M=n(I,f,{ignoreTag:S});return typeof v=="function"?v(Array.isArray(M)?M:[M]):b?ee.createElement(b,null,ee.Children.toArray(M)):ee.createElement(ee.Fragment,null,M)}OD.displayName="FormattedMessage";var DD=ee.memo(OD,r8);DD.displayName="MemoizedFormattedMessage";const Qt=DD;Gd("formatDate");Gd("formatTime");Gd("formatNumber");Gd("formatList");Gd("formatDisplayName");PD("formatDate");PD("formatTime");const Te=Wd("div",({css:t,...e})=>({css:xB({display:"flex",minWidth:0,minHeight:0,flex:"none",alignSelf:"auto",alignItems:"stretch",flexDirection:"column",justifyContent:"flex-start",...t}),...e})),LD=t=>{const e=ee.useContext(Xo);return F.jsxs(Te,{as:"svg",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 467.27 512",...t,children:[F.jsx("polygon",{fill:e.colors.shape,points:"352.33 159.67 432.16 239.45 432.16 399.13 319.29 512 93.55 512 159.67 445.87 0 286.25 319.29 286.25 272.55 239.45 272.55 79.84 352.33 0 465.26 112.87 352.33 112.87 352.33 159.67"}),F.jsxs("g",{children:[F.jsx("polygon",{fill:e.colors.pieces.mt1,points:"272.57 79.84 272.57 239.45 352.36 319.29 432.19 399.13 432.19 239.45 352.36 159.67 352.36 112.87 465.29 112.87 352.36 0 272.57 79.84"}),F.jsx("polygon",{fill:e.colors.pieces.st1,points:"93.58 512 319.32 512 432.19 399.13 319.32 286.25 93.58 512"}),F.jsx("polygon",{fill:e.colors.pieces.lt2,points:"159.67 445.87 239.48 366.05 319.31 286.24 0.03 286.24 159.67 445.87"})]})]})},i8=50,o8=.25,Xu=1,Gs=4,s8=2,a8=5,l2=10,u8=300,Cg=1500,c2=100,qv=250,ao=1e3,U1=500,Zn="DIALOG_CLOSED_REASON",h2=60,l8=5,f2=2,d2=.25,p2=.75,c8=["animals","letters","digits","people","geometric","stuff"],jf=["0","1","2","3","4","5","6","7","8","9"],Uf=["","","","","","","","","","","","","","","","","","","","","","","","","",""];var zb={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var V1=function(t,e){return V1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},V1(t,e)};function Et(t,e){V1(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var wn=function(){return wn=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},wn.apply(this,arguments)};function h8(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function f8(t,e,n,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,r);else for(var h=t.length-1;h>=0;h--)(u=t[h])&&(o=(i<3?u(o):i>3?u(e,n,o):u(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o}function d8(t,e){return function(n,r){e(n,r,t)}}function p8(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Ee(t,e,n,r){function i(o){return o instanceof n?o:new n(function(u){u(o)})}return new(n||(n=Promise))(function(o,u){function h(_){try{v(r.next(_))}catch(b){u(b)}}function f(_){try{v(r.throw(_))}catch(b){u(b)}}function v(_){_.done?o(_.value):i(_.value).then(h,f)}v((r=r.apply(t,e||[])).next())})}function we(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,u;return u={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function h(v){return function(_){return f([v,_])}}function f(v){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=v[0]&2?i.return:v[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,v[1])).done)return o;switch(i=0,o&&(v=[v[0]&2,o.value]),v[0]){case 0:case 1:o=v;break;case 4:return n.label++,{value:v[1],done:!1};case 5:n.label++,i=v[1],v=[0];continue;case 7:v=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(v[0]===6||v[0]===2)){n=0;continue}if(v[0]===3&&(!o||v[1]>o[0]&&v[1]<o[3])){n.label=v[1];break}if(v[0]===6&&n.label<o[1]){n.label=o[1],o=v;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(v);break}o[2]&&n.ops.pop(),n.trys.pop();continue}v=e.call(t,n)}catch(_){v=[6,_],i=0}finally{r=o=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}}function g8(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function zn(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function fd(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],u;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(h){u={error:h}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(u)throw u.error}}return o}function va(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(fd(arguments[e]));return t}function Wi(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],u=0,h=o.length;u<h;u++,i++)r[i]=o[u];return r}function dd(t){return this instanceof dd?(this.v=t,this):new dd(t)}function v8(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i={},u("next"),u("throw"),u("return"),i[Symbol.asyncIterator]=function(){return this},i;function u(S){r[S]&&(i[S]=function(I){return new Promise(function(M,D){o.push([S,I,M,D])>1||h(S,I)})})}function h(S,I){try{f(r[S](I))}catch(M){b(o[0][3],M)}}function f(S){S.value instanceof dd?Promise.resolve(S.value.v).then(v,_):b(o[0][2],S)}function v(S){h("next",S)}function _(S){h("throw",S)}function b(S,I){S(I),o.shift(),o.length&&h(o[0][0],o[0][1])}}function m8(t){var e,n;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,o){e[i]=t[i]?function(u){return(n=!n)?{value:dd(t[i](u)),done:i==="return"}:o?o(u):u}:o}}function y8(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof zn=="function"?zn(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(u){return new Promise(function(h,f){u=t[o](u),i(h,f,u.done,u.value)})}}function i(o,u,h,f){Promise.resolve(f).then(function(v){o({value:v,done:h})},u)}}function _8(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function w8(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function E8(t){return t&&t.__esModule?t:{default:t}}function S8(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function b8(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const T8=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return wn},__asyncDelegator:m8,__asyncGenerator:v8,__asyncValues:y8,__await:dd,__awaiter:Ee,__classPrivateFieldGet:S8,__classPrivateFieldSet:b8,__decorate:f8,__exportStar:g8,__extends:Et,__generator:we,__importDefault:E8,__importStar:w8,__makeTemplateObject:_8,__metadata:p8,__param:d8,__read:fd,__rest:h8,__spread:va,__spreadArrays:Wi,__values:zn},Symbol.toStringTag,{value:"Module"})),qb=DS(T8);var dt={};Object.defineProperty(dt,"__esModule",{value:!0});var I8=qb;/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wv={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var MD=function(t,e){if(!t)throw FD(e)},FD=function(t){return new Error("Firebase Database ("+Wv.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jD=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},C8=function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){var o=t[n++],u=t[n++],h=t[n++],f=((i&7)<<18|(o&63)<<12|(u&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{var o=t[n++],u=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|u&63)}}return e.join("")},Wb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],u=i+1<t.length,h=u?t[i+1]:0,f=i+2<t.length,v=f?t[i+2]:0,_=o>>2,b=(o&3)<<4|h>>4,S=(h&15)<<2|v>>6,I=v&63;f||(I=64,u||(S=64)),r.push(n[_],n[b],n[S],n[I])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(jD(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):C8(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],u=i<t.length,h=u?n[t.charAt(i)]:0;++i;var f=i<t.length,v=f?n[t.charAt(i)]:64;++i;var _=i<t.length,b=_?n[t.charAt(i)]:64;if(++i,o==null||h==null||v==null||b==null)throw Error();var S=o<<2|h>>4;if(r.push(S),v!==64){var I=h<<4&240|v>>2;if(r.push(I),b!==64){var M=v<<6&192|b;r.push(M)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},x8=function(t){var e=jD(t);return Wb.encodeByteArray(e,!0)},B1=function(t){try{return Wb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N8(t){return Gb(void 0,t)}function Gb(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:var n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(var r in e)e.hasOwnProperty(r)&&(t[r]=Gb(t[r],e[r]));return t}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var A8=function(){function t(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(n,r){e.resolve=n,e.reject=r})}return t.prototype.wrapCallback=function(e){var n=this;return function(r,i){r?n.reject(r):n.resolve(i),typeof e=="function"&&(n.promise.catch(function(){}),e.length===1?e(r):e(r,i))}},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $d(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function k8(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($d())}function P8(){try{return Object.prototype.toString.call(OP.process)==="[object process]"}catch{return!1}}function R8(){return typeof self=="object"&&self.self===self}function O8(){var t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function D8(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function L8(){return $d().indexOf("Electron/")>=0}function M8(){var t=$d();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function F8(){return $d().indexOf("MSAppHost/")>=0}function j8(){return Wv.NODE_CLIENT===!0||Wv.NODE_ADMIN===!0}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var U8="FirebaseError",UD=function(t){I8.__extends(e,t);function e(n,r){var i=t.call(this,r)||this;return i.code=n,i.name=U8,Object.setPrototypeOf(i,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,VD.prototype.create),i}return e}(Error),VD=function(){function t(e,n,r){this.service=e,this.serviceName=n,this.errors=r}return t.prototype.create=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];for(var i=n[0]||{},o=this.service+"/"+e,u=this.errors[e],h=u?V8(u,i):"Error",f=this.serviceName+": "+h+" ("+o+").",v=new UD(o,f),_=0,b=Object.keys(i);_<b.length;_++){var S=b[_];S.slice(-1)!=="_"&&(S in v&&console.warn('Overwriting FirebaseError base field "'+S+'" can cause unexpected behavior.'),v[S]=i[S])}return v},t}();function V8(t,e){return t.replace(B8,function(n,r){var i=e[r];return i!=null?i.toString():"<"+r+"?>"})}var B8=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z1(t){return JSON.parse(t)}function z8(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hd=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=z1(B1(o[0])||""),n=z1(B1(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},q8=function(t){var e=Hd(t).claims,n=Math.floor(new Date().getTime()/1e3),r=0,i=0;return typeof e=="object"&&(e.hasOwnProperty("nbf")?r=e.nbf:e.hasOwnProperty("iat")&&(r=e.iat),e.hasOwnProperty("exp")?i=e.exp:i=r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},W8=function(t){var e=Hd(t).claims;return typeof e=="object"&&e.hasOwnProperty("iat")?e.iat:null},G8=function(t){var e=Hd(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},$8=function(t){var e=Hd(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H8(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function K8(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Y8(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Q8(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X8(t){for(var e=[],n=function(f,v){Array.isArray(v)?v.forEach(function(_){e.push(encodeURIComponent(f)+"="+encodeURIComponent(_))}):e.push(encodeURIComponent(f)+"="+encodeURIComponent(v))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r],u=o[0],h=o[1];n(u,h)}return e.length?"&"+e.join("&"):""}function J8(t){var e={},n=t.replace(/^\?/,"").split("&");return n.forEach(function(r){if(r){var i=r.split("=");e[i[0]]=i[1]}}),e}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Z8=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(e,n){n||(n=0);var r=this.W_;if(typeof e=="string")for(var i=0;i<16;i++)r[i]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(var i=0;i<16;i++)r[i]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(var i=16;i<80;i++){var o=r[i-3]^r[i-8]^r[i-14]^r[i-16];r[i]=(o<<1|o>>>31)&4294967295}for(var u=this.chain_[0],h=this.chain_[1],f=this.chain_[2],v=this.chain_[3],_=this.chain_[4],b,S,i=0;i<80;i++){i<40?i<20?(b=v^h&(f^v),S=1518500249):(b=h^f^v,S=1859775393):i<60?(b=h&f|v&(h|f),S=2400959708):(b=h^f^v,S=3395469782);var o=(u<<5|u>>>27)+b+_+S+r[i]&4294967295;_=v,v=f,f=(h<<30|h>>>2)&4294967295,h=u,u=o}this.chain_[0]=this.chain_[0]+u&4294967295,this.chain_[1]=this.chain_[1]+h&4294967295,this.chain_[2]=this.chain_[2]+f&4294967295,this.chain_[3]=this.chain_[3]+v&4294967295,this.chain_[4]=this.chain_[4]+_&4294967295},t.prototype.update=function(e,n){if(e!=null){n===void 0&&(n=e.length);for(var r=n-this.blockSize,i=0,o=this.buf_,u=this.inbuf_;i<n;){if(u===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(o[u]=e.charCodeAt(i),++u,++i,u===this.blockSize){this.compress_(o),u=0;break}}else for(;i<n;)if(o[u]=e[i],++u,++i,u===this.blockSize){this.compress_(o),u=0;break}}this.inbuf_=u,this.total_+=n}},t.prototype.digest=function(){var e=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);for(var i=0,r=0;r<5;r++)for(var o=24;o>=0;o-=8)e[i]=this.chain_[r]>>o&255,++i;return e},t}();function eq(t,e){var n=new tq(t,e);return n.subscribe.bind(n)}var tq=function(){function t(e,n){var r=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(function(){e(r)}).catch(function(i){r.error(i)})}return t.prototype.next=function(e){this.forEachObserver(function(n){n.next(e)})},t.prototype.error=function(e){this.forEachObserver(function(n){n.error(e)}),this.close(e)},t.prototype.complete=function(){this.forEachObserver(function(e){e.complete()}),this.close()},t.prototype.subscribe=function(e,n,r){var i=this,o;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");rq(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:r},o.next===void 0&&(o.next=Rw),o.error===void 0&&(o.error=Rw),o.complete===void 0&&(o.complete=Rw);var u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?o.error(i.finalError):o.complete()}catch{}}),this.observers.push(o),u},t.prototype.unsubscribeOne=function(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))},t.prototype.forEachObserver=function(e){if(!this.finalized)for(var n=0;n<this.observers.length;n++)this.sendOne(n,e)},t.prototype.sendOne=function(e,n){var r=this;this.task.then(function(){if(r.observers!==void 0&&r.observers[e]!==void 0)try{n(r.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})},t.prototype.close=function(e){var n=this;this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(function(){n.observers=void 0,n.onNoObservers=void 0}))},t}();function nq(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then(function(){t.apply(void 0,n)}).catch(function(i){e&&e(i)})}}function rq(t,e){if(typeof t!="object"||t===null)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&typeof t[i]=="function")return!0}return!1}function Rw(){}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var iq=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=n===0?"none":"no more than "+n),i){var o=t+" failed: Was called with "+r+(r===1?" argument.":" arguments.")+" Expects "+i+".";throw new Error(o)}};function ny(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=t+" failed: ";return i+=r+" argument ",i}function oq(t,e,n,r){if(!(r&&!n)&&typeof n!="string")throw new Error(ny(t,e,r)+"must be a valid firebase namespace.")}function sq(t,e,n,r){if(!(r&&!n)&&typeof n!="function")throw new Error(ny(t,e,r)+"must be a valid function.")}function aq(t,e,n,r){if(!(r&&!n)&&(typeof n!="object"||n===null))throw new Error(ny(t,e,r)+"must be a valid context object.")}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var uq=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var o=i-55296;r++,MD(r<t.length,"Surrogate pair missing trail surrogate.");var u=t.charCodeAt(r)-56320;i=65536+(o<<10)+u}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},lq=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},sv=dt.CONSTANTS=Wv,Fo=dt.Deferred=A8,Kd=dt.ErrorFactory=VD,$b=dt.FirebaseError=UD,cq=dt.Sha1=Z8,Oe=dt.assert=MD,Yd=dt.assertionError=FD;dt.async=nq;var hq=dt.base64=Wb;dt.base64Decode=B1;var fq=dt.base64Encode=x8,yo=dt.contains=H8;dt.createSubscribe=eq;dt.decode=Hd;var dq=dt.deepCopy=N8;dt.deepExtend=Gb;var ws=dt.errorPrefix=ny,q1=dt.getUA=$d,pq=dt.isAdmin=$8;dt.isBrowser=R8;var gq=dt.isBrowserExtension=O8,vq=dt.isElectron=L8,W1=dt.isEmpty=Y8,mq=dt.isIE=M8,Hb=dt.isMobileCordova=k8;dt.isNode=P8;var ua=dt.isNodeSdk=j8,BD=dt.isReactNative=D8,yq=dt.isUWP=F8,_q=dt.isValidFormat=G8;dt.isValidTimestamp=q8;dt.issuedAtTime=W8;var Kb=dt.jsonEval=z1,Gv=dt.map=Q8,wq=dt.querystring=X8;dt.querystringDecode=J8;var Uo=dt.safeGet=K8,av=dt.stringLength=lq,Eq=dt.stringToByteArray=uq,wr=dt.stringify=z8,ht=dt.validateArgCount=iq,yr=dt.validateCallback=sq,g2=dt.validateContextObject=aq;dt.validateNamespace=oq;var Qd={};Object.defineProperty(Qd,"__esModule",{value:!0});var hf=qb,Sq=dt,bq=function(){function t(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},t.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},t.prototype.setServiceProps=function(e){return this.serviceProps=e,this},t}();/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zD=function(){function t(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(e){e===void 0&&(e=dc);var n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){var r=new Sq.Deferred;this.instancesDeferred.set(n,r);try{var i=this.getOrInitializeService(n);i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise},t.prototype.getImmediate=function(e){var n=hf.__assign({identifier:dc,optional:!1},e),r=n.identifier,i=n.optional,o=this.normalizeInstanceIdentifier(r);try{var u=this.getOrInitializeService(o);if(!u){if(i)return null;throw Error("Service "+this.name+" is not available")}return u}catch(h){if(i)return null;throw h}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(e){var n,r;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,Iq(e))try{this.getOrInitializeService(dc)}catch{}try{for(var i=hf.__values(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var u=hf.__read(o.value,2),h=u[0],f=u[1],v=this.normalizeInstanceIdentifier(h);try{var _=this.getOrInitializeService(v);f.resolve(_)}catch{}}}catch(b){n={error:b}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},t.prototype.clearInstance=function(e){e===void 0&&(e=dc),this.instancesDeferred.delete(e),this.instances.delete(e)},t.prototype.delete=function(){return hf.__awaiter(this,void 0,void 0,function(){var e;return hf.__generator(this,function(n){switch(n.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(e.filter(function(r){return"INTERNAL"in r}).map(function(r){return r.INTERNAL.delete()}))];case 1:return n.sent(),[2]}})})},t.prototype.isComponentSet=function(){return this.component!=null},t.prototype.getOrInitializeService=function(e){var n=this.instances.get(e);return!n&&this.component&&(n=this.component.instanceFactory(this.container,Tq(e)),this.instances.set(e,n)),n||null},t.prototype.normalizeInstanceIdentifier=function(e){return this.component?this.component.multipleInstances?e:dc:e},t}();function Tq(t){return t===dc?void 0:t}function Iq(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cq=function(){function t(e){this.name=e,this.providers=new Map}return t.prototype.addComponent=function(e){var n=this.getProvider(e.name);if(n.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);n.setComponent(e)},t.prototype.addOrOverwriteComponent=function(e){var n=this.getProvider(e.name);n.isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},t.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var n=new zD(e,this);return this.providers.set(e,n),n},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}(),Es=Qd.Component=bq;Qd.ComponentContainer=Cq;Qd.Provider=zD;/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function Po(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],u=0,h=o.length;u<h;u++,i++)r[i]=o[u];return r}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zu,Yb=[],yt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(yt||(yt={}));var qD={debug:yt.DEBUG,verbose:yt.VERBOSE,info:yt.INFO,warn:yt.WARN,error:yt.ERROR,silent:yt.SILENT},xq=yt.INFO,Nq=(zu={},zu[yt.DEBUG]="log",zu[yt.VERBOSE]="log",zu[yt.INFO]="info",zu[yt.WARN]="warn",zu[yt.ERROR]="error",zu),Aq=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=new Date().toISOString(),o=Nq[e];if(o)console[o].apply(console,Po(["["+i+"]  "+t.name+":"],n));else throw new Error("Attempted to log a message with an invalid logType (value: "+e+")")}},dh=function(){function t(e){this.name=e,this._logLevel=xq,this._logHandler=Aq,this._userLogHandler=null,Yb.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in yt))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!0,configurable:!0}),t.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,Po([this,yt.DEBUG],e)),this._logHandler.apply(this,Po([this,yt.DEBUG],e))},t.prototype.log=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,Po([this,yt.VERBOSE],e)),this._logHandler.apply(this,Po([this,yt.VERBOSE],e))},t.prototype.info=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,Po([this,yt.INFO],e)),this._logHandler.apply(this,Po([this,yt.INFO],e))},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,Po([this,yt.WARN],e)),this._logHandler.apply(this,Po([this,yt.WARN],e))},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,Po([this,yt.ERROR],e)),this._logHandler.apply(this,Po([this,yt.ERROR],e))},t}();function kq(t){var e=typeof t=="string"?qD[t]:t;Yb.forEach(function(n){n.logLevel=e})}function Pq(t,e){for(var n=function(u){var h=null;e&&e.level&&(h=qD[e.level]),t===null?u.userLogHandler=null:u.userLogHandler=function(f,v){for(var _=[],b=2;b<arguments.length;b++)_[b-2]=arguments[b];var S=_.map(function(I){if(I==null)return null;if(typeof I=="string")return I;if(typeof I=="number"||typeof I=="boolean")return I.toString();if(I instanceof Error)return I.message;try{return JSON.stringify(I)}catch{return null}}).filter(function(I){return I}).join(" ");v>=(h??f.logLevel)&&t({level:yt[v].toLowerCase(),message:S,args:_,type:f.name})}},r=0,i=Yb;r<i.length;r++){var o=i[r];n(o)}}const Rq=Object.freeze(Object.defineProperty({__proto__:null,get LogLevel(){return yt},Logger:dh,setLogLevel:kq,setUserLogHandler:Pq},Symbol.toStringTag,{value:"Module"})),Oq=DS(Rq);Object.defineProperty(zb,"__esModule",{value:!0});var $v=qb,Vo=dt,Hv=Qd,G1=Oq;/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ka,Dq=(ka={},ka["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",ka["bad-app-name"]="Illegal App name: '{$appName}",ka["duplicate-app"]="Firebase App named '{$appName}' already exists",ka["app-deleted"]="Firebase App named '{$appName}' already deleted",ka["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",ka["invalid-log-argument"]="First argument to `onLog` must be null or a function.",ka),pc=new Vo.ErrorFactory("app","Firebase",Dq),WD="@firebase/app",Lq="0.6.1",Mq="@firebase/analytics",Fq="@firebase/auth",jq="@firebase/database",Uq="@firebase/functions",Vq="@firebase/installations",Bq="@firebase/messaging",zq="@firebase/performance",qq="@firebase/remote-config",Wq="@firebase/storage",Gq="@firebase/firestore",$q="firebase-wrapper";/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xr,Kv="[DEFAULT]",Hq=(Xr={},Xr[WD]="fire-core",Xr[Mq]="fire-analytics",Xr[Fq]="fire-auth",Xr[jq]="fire-rtdb",Xr[Uq]="fire-fn",Xr[Vq]="fire-iid",Xr[Bq]="fire-fcm",Xr[zq]="fire-perf",Xr[qq]="fire-rc",Xr[Wq]="fire-gcs",Xr[Gq]="fire-fst",Xr["fire-js"]="fire-js",Xr[$q]="fire-js-all",Xr);/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var th=new G1.Logger("@firebase/app");/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var uv=function(){function t(e,n,r){var i,o,u=this;this.firebase_=r,this.isDeleted_=!1,this.name_=n.name,this.automaticDataCollectionEnabled_=n.automaticDataCollectionEnabled||!1,this.options_=Vo.deepCopy(e),this.container=new Hv.ComponentContainer(n.name),this._addComponent(new Hv.Component("app",function(){return u},"PUBLIC"));try{for(var h=$v.__values(this.firebase_.INTERNAL.components.values()),f=h.next();!f.done;f=h.next()){var v=f.value;this._addComponent(v)}}catch(_){i={error:_}}finally{try{f&&!f.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),t.prototype.delete=function(){var e=this;return new Promise(function(n){e.checkDestroyed_(),n()}).then(function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map(function(n){return n.delete()}))}).then(function(){e.isDeleted_=!0})},t.prototype._getService=function(e,n){return n===void 0&&(n=Kv),this.checkDestroyed_(),this.container.getProvider(e).getImmediate({identifier:n})},t.prototype._removeServiceInstance=function(e,n){n===void 0&&(n=Kv),this.container.getProvider(e).clearInstance(n)},t.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(n){th.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,n)}},t.prototype._addOrOverwriteComponent=function(e){this.container.addOrOverwriteComponent(e)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw pc.create("app-deleted",{appName:this.name_})},t}();uv.prototype.name&&uv.prototype.options||uv.prototype.delete||console.log("dc");var Kq="7.13.2";/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yq(t){var e={},n=new Map,r={__esModule:!0,initializeApp:u,app:o,registerVersion:v,setLogLevel:G1.setLogLevel,onLog:_,apps:null,SDK_VERSION:Kq,INTERNAL:{registerComponent:f,removeApp:i,components:n,useAsService:b}};r.default=r,Object.defineProperty(r,"apps",{get:h});function i(S){delete e[S]}function o(S){if(S=S||Kv,!Vo.contains(e,S))throw pc.create("no-app",{appName:S});return e[S]}o.App=t;function u(S,I){if(I===void 0&&(I={}),typeof I!="object"||I===null){var M=I;I={name:M}}var D=I;D.name===void 0&&(D.name=Kv);var ne=D.name;if(typeof ne!="string"||!ne)throw pc.create("bad-app-name",{appName:String(ne)});if(Vo.contains(e,ne))throw pc.create("duplicate-app",{appName:ne});var z=new t(S,D,r);return e[ne]=z,z}function h(){return Object.keys(e).map(function(S){return e[S]})}function f(S){var I,M,D=S.name;if(n.has(D))return th.debug("There were multiple attempts to register component "+D+"."),S.type==="PUBLIC"?r[D]:null;if(n.set(D,S),S.type==="PUBLIC"){var ne=function(ue){if(ue===void 0&&(ue=o()),typeof ue[D]!="function")throw pc.create("invalid-app-argument",{appName:D});return ue[D]()};S.serviceProps!==void 0&&Vo.deepExtend(ne,S.serviceProps),r[D]=ne,t.prototype[D]=function(){for(var ue=[],oe=0;oe<arguments.length;oe++)ue[oe]=arguments[oe];var fe=this._getService.bind(this,D);return fe.apply(this,S.multipleInstances?ue:[])}}try{for(var z=$v.__values(Object.keys(e)),Y=z.next();!Y.done;Y=z.next()){var K=Y.value;e[K]._addComponent(S)}}catch(ue){I={error:ue}}finally{try{Y&&!Y.done&&(M=z.return)&&M.call(z)}finally{if(I)throw I.error}}return S.type==="PUBLIC"?r[D]:null}function v(S,I,M){var D,ne=(D=Hq[S])!==null&&D!==void 0?D:S;M&&(ne+="-"+M);var z=ne.match(/\s|\//),Y=I.match(/\s|\//);if(z||Y){var K=['Unable to register library "'+ne+'" with version "'+I+'":'];z&&K.push('library name "'+ne+'" contains illegal characters (whitespace or "/")'),z&&Y&&K.push("and"),Y&&K.push('version name "'+I+'" contains illegal characters (whitespace or "/")'),th.warn(K.join(" "));return}f(new Hv.Component(ne+"-version",function(){return{library:ne,version:I}},"VERSION"))}function _(S,I){if(S!==null&&typeof S!="function")throw pc.create("invalid-log-argument",{appName:name});G1.setUserLogHandler(S,I)}function b(S,I){if(I==="serverAuth")return null;var M=I;return M}return r}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GD(){var t=Yq(uv);t.INTERNAL=$v.__assign($v.__assign({},t.INTERNAL),{createFirebaseNamespace:GD,extendNamespace:e,createSubscribe:Vo.createSubscribe,ErrorFactory:Vo.ErrorFactory,deepExtend:Vo.deepExtend});function e(n){Vo.deepExtend(t,n)}return t}var Qb=GD();/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qq=function(){function t(e){this.container=e}return t.prototype.getPlatformInfoString=function(){var e=this.container.getProviders();return e.map(function(n){if(Xq(n)){var r=n.getImmediate();return r.library+"/"+r.version}else return null}).filter(function(n){return n}).join(" ")},t}();function Xq(t){var e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jq(t,e){t.INTERNAL.registerComponent(new Hv.Component("platform-logger",function(n){return new Qq(n)},"PRIVATE")),t.registerVersion(WD,Lq,e),t.registerVersion("fire-js","")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(Vo.isBrowser()&&self.firebase!==void 0){th.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);var v2=self.firebase.SDK_VERSION;v2&&v2.indexOf("LITE")>=0&&th.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}var Zq=Qb.initializeApp;Qb.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Vo.isNode()&&th.warn(`
      Warning: This is a browser-targeted Firebase bundle but it appears it is being
      run in a Node environment.  If running in a Node environment, make sure you
      are using the bundle specified by the "main" field in package.json.
      
      If you are using Webpack, you can specify "main" as the first item in
      "resolve.mainFields":
      https://webpack.js.org/configuration/resolve/#resolvemainfields
      
      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"
      as the first item in "mainFields", e.g. ['main', 'module'].
      https://github.com/rollup/rollup-plugin-node-resolve
      `),Zq.apply(void 0,t)};var Xb=Qb;Jq(Xb);var ze=zb.default=Xb;zb.firebase=Xb;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(s,l,p){s!=Array.prototype&&s!=Object.prototype&&(s[l]=p.value)};function n(s){s=[typeof window=="object"&&window,typeof self=="object"&&self,typeof global=="object"&&global,s];for(var l=0;l<s.length;++l){var p=s[l];if(p&&p.Math==Math)return p}return globalThis}var r=n(this);function i(s,l){if(l){var p=r;s=s.split(".");for(var y=0;y<s.length-1;y++){var x=s[y];x in p||(p[x]={}),p=p[x]}s=s[s.length-1],y=p[s],l=l(y),l!=y&&l!=null&&e(p,s,{configurable:!0,writable:!0,value:l})}}function o(s){var l=0;return function(){return l<s.length?{done:!1,value:s[l++]}:{done:!0}}}function u(s){var l=typeof Symbol<"u"&&Symbol.iterator&&s[Symbol.iterator];return l?l.call(s):{next:o(s)}}i("Promise",function(s){function l(G){this.b=0,this.c=void 0,this.a=[];var re=this.f();try{G(re.resolve,re.reject)}catch(be){re.reject(be)}}function p(){this.a=null}function y(G){return G instanceof l?G:new l(function(re){re(G)})}if(s)return s;p.prototype.b=function(G){if(this.a==null){this.a=[];var re=this;this.c(function(){re.g()})}this.a.push(G)};var x=r.setTimeout;p.prototype.c=function(G){x(G,0)},p.prototype.g=function(){for(;this.a&&this.a.length;){var G=this.a;this.a=[];for(var re=0;re<G.length;++re){var be=G[re];G[re]=null;try{be()}catch(xe){this.f(xe)}}}this.a=null},p.prototype.f=function(G){this.c(function(){throw G})},l.prototype.f=function(){function G(xe){return function(gt){be||(be=!0,xe.call(re,gt))}}var re=this,be=!1;return{resolve:G(this.m),reject:G(this.g)}},l.prototype.m=function(G){if(G===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(G instanceof l)this.s(G);else{e:switch(typeof G){case"object":var re=G!=null;break e;case"function":re=!0;break e;default:re=!1}re?this.u(G):this.h(G)}},l.prototype.u=function(G){var re=void 0;try{re=G.then}catch(be){this.g(be);return}typeof re=="function"?this.w(re,G):this.h(G)},l.prototype.g=function(G){this.i(2,G)},l.prototype.h=function(G){this.i(1,G)},l.prototype.i=function(G,re){if(this.b!=0)throw Error("Cannot settle("+G+", "+re+"): Promise already settled in state"+this.b);this.b=G,this.c=re,this.l()},l.prototype.l=function(){if(this.a!=null){for(var G=0;G<this.a.length;++G)j.b(this.a[G]);this.a=null}};var j=new p;return l.prototype.s=function(G){var re=this.f();G.Oa(re.resolve,re.reject)},l.prototype.w=function(G,re){var be=this.f();try{G.call(re,be.resolve,be.reject)}catch(xe){be.reject(xe)}},l.prototype.then=function(G,re){function be(Ht,gr){return typeof Ht=="function"?function(Ls){try{xe(Ht(Ls))}catch(ew){gt(ew)}}:gr}var xe,gt,tn=new l(function(Ht,gr){xe=Ht,gt=gr});return this.Oa(be(G,xe),be(re,gt)),tn},l.prototype.catch=function(G){return this.then(void 0,G)},l.prototype.Oa=function(G,re){function be(){switch(xe.b){case 1:G(xe.c);break;case 2:re(xe.c);break;default:throw Error("Unexpected state: "+xe.b)}}var xe=this;this.a==null?j.b(be):this.a.push(be)},l.resolve=y,l.reject=function(G){return new l(function(re,be){be(G)})},l.race=function(G){return new l(function(re,be){for(var xe=u(G),gt=xe.next();!gt.done;gt=xe.next())y(gt.value).Oa(re,be)})},l.all=function(G){var re=u(G),be=re.next();return be.done?y([]):new l(function(xe,gt){function tn(Ls){return function(ew){Ht[Ls]=ew,gr--,gr==0&&xe(Ht)}}var Ht=[],gr=0;do Ht.push(void 0),gr++,y(be.value).Oa(tn(Ht.length-1),gt),be=re.next();while(!be.done)})},l});var h=h||{},f=this||self,v=/^[\w+/_-]+[=]{0,2}$/,_=null;function b(){}function S(s){var l=typeof s;if(l=="object")if(s){if(s instanceof Array)return"array";if(s instanceof Object)return l;var p=Object.prototype.toString.call(s);if(p=="[object Window]")return"object";if(p=="[object Array]"||typeof s.length=="number"&&typeof s.splice<"u"&&typeof s.propertyIsEnumerable<"u"&&!s.propertyIsEnumerable("splice"))return"array";if(p=="[object Function]"||typeof s.call<"u"&&typeof s.propertyIsEnumerable<"u"&&!s.propertyIsEnumerable("call"))return"function"}else return"null";else if(l=="function"&&typeof s.call>"u")return"object";return l}function I(s){var l=S(s);return l=="array"||l=="object"&&typeof s.length=="number"}function M(s){return S(s)=="function"}function D(s){var l=typeof s;return l=="object"&&s!=null||l=="function"}function ne(s){return Object.prototype.hasOwnProperty.call(s,z)&&s[z]||(s[z]=++Y)}var z="closure_uid_"+(1e9*Math.random()>>>0),Y=0;function K(s,l,p){return s.call.apply(s.bind,arguments)}function ue(s,l,p){if(!s)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var x=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(x,y),s.apply(l,x)}}return function(){return s.apply(l,arguments)}}function oe(s,l,p){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?oe=K:oe=ue,oe.apply(null,arguments)}function fe(s,l){var p=Array.prototype.slice.call(arguments,1);return function(){var y=p.slice();return y.push.apply(y,arguments),s.apply(this,y)}}var me=Date.now||function(){return+new Date};function he(s,l){function p(){}p.prototype=l.prototype,s.Za=l.prototype,s.prototype=new p,s.prototype.constructor=s}function Z(s,l,p){this.code=Ue+s,this.message=l||Ge[s]||"",this.a=p||null}he(Z,Error),Z.prototype.v=function(){var s={code:this.code,message:this.message};return this.a&&(s.serverResponse=this.a),s},Z.prototype.toJSON=function(){return this.v()};function Se(s){var l=s&&s.code;return l?new Z(l.substring(Ue.length),s.message,s.serverResponse):null}var Ue="auth/",Ge={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},ft={hd:{Ra:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},pd:{Ra:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://securetoken.googleapis.com/v1/token",Ua:"https://identitytoolkit.googleapis.com/v2/",id:"p"},rd:{Ra:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},sd:{Ra:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Xa:"https://test-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function Ae(s){for(var l in ft)if(ft[l].id===s)return s=ft[l],{firebaseEndpoint:s.Ra,secureTokenEndpoint:s.Xa,identityPlatformEndpoint:s.Ua};return null}var tt;tt=Ae("__EID__")?"__EID__":void 0;function Ce(s){if(!s)return!1;try{return!!s.$goog_Thenable}catch{return!1}}function Ut(s){if(Error.captureStackTrace)Error.captureStackTrace(this,Ut);else{var l=Error().stack;l&&(this.stack=l)}s&&(this.message=String(s))}he(Ut,Error),Ut.prototype.name="CustomError";function Fe(s,l){s=s.split("%s");for(var p="",y=s.length-1,x=0;x<y;x++)p+=s[x]+(x<l.length?l[x]:"%s");Ut.call(this,p+s[y])}he(Fe,Ut),Fe.prototype.name="AssertionError";function Ne(s,l){throw new Fe("Failure"+(s?": "+s:""),Array.prototype.slice.call(arguments,1))}function qe(s,l){this.c=s,this.f=l,this.b=0,this.a=null}qe.prototype.get=function(){if(0<this.b){this.b--;var s=this.a;this.a=s.next,s.next=null}else s=this.c();return s};function Pt(s,l){s.f(l),100>s.b&&(s.b++,l.next=s.a,s.a=l)}function rt(){this.b=this.a=null}var Kt=new qe(function(){return new zt},function(s){s.reset()});rt.prototype.add=function(s,l){var p=Kt.get();p.set(s,l),this.b?this.b.next=p:this.a=p,this.b=p};function It(){var s=bI,l=null;return s.a&&(l=s.a,s.a=s.a.next,s.a||(s.b=null),l.next=null),l}function zt(){this.next=this.b=this.a=null}zt.prototype.set=function(s,l){this.a=s,this.b=l,this.next=null},zt.prototype.reset=function(){this.next=this.b=this.a=null};var Nn=Array.prototype.indexOf?function(s,l){return Array.prototype.indexOf.call(s,l,void 0)}:function(s,l){if(typeof s=="string")return typeof l!="string"||l.length!=1?-1:s.indexOf(l,0);for(var p=0;p<s.length;p++)if(p in s&&s[p]===l)return p;return-1},Rt=Array.prototype.forEach?function(s,l,p){Array.prototype.forEach.call(s,l,p)}:function(s,l,p){for(var y=s.length,x=typeof s=="string"?s.split(""):s,j=0;j<y;j++)j in x&&l.call(p,x[j],j,s)};function xs(s,l){for(var p=typeof s=="string"?s.split(""):s,y=s.length-1;0<=y;--y)y in p&&l.call(void 0,p[y],y,s)}var ce=Array.prototype.filter?function(s,l){return Array.prototype.filter.call(s,l,void 0)}:function(s,l){for(var p=s.length,y=[],x=0,j=typeof s=="string"?s.split(""):s,G=0;G<p;G++)if(G in j){var re=j[G];l.call(void 0,re,G,s)&&(y[x++]=re)}return y},ve=Array.prototype.map?function(s,l){return Array.prototype.map.call(s,l,void 0)}:function(s,l){for(var p=s.length,y=Array(p),x=typeof s=="string"?s.split(""):s,j=0;j<p;j++)j in x&&(y[j]=l.call(void 0,x[j],j,s));return y},_e=Array.prototype.some?function(s,l){return Array.prototype.some.call(s,l,void 0)}:function(s,l){for(var p=s.length,y=typeof s=="string"?s.split(""):s,x=0;x<p;x++)if(x in y&&l.call(void 0,y[x],x,s))return!0;return!1};function je(s){e:{for(var l=y4,p=s.length,y=typeof s=="string"?s.split(""):s,x=0;x<p;x++)if(x in y&&l.call(void 0,y[x],x,s)){l=x;break e}l=-1}return 0>l?null:typeof s=="string"?s.charAt(l):s[l]}function De(s,l){return 0<=Nn(s,l)}function Ve(s,l){l=Nn(s,l);var p;return(p=0<=l)&&Array.prototype.splice.call(s,l,1),p}function He(s,l){var p=0;xs(s,function(y,x){l.call(void 0,y,x,s)&&Array.prototype.splice.call(s,x,1).length==1&&p++})}function Vt(s){return Array.prototype.concat.apply([],arguments)}function Kr(s){var l=s.length;if(0<l){for(var p=Array(l),y=0;y<l;y++)p[y]=s[y];return p}return[]}var Xi=String.prototype.trim?function(s){return s.trim()}:function(s){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(s)[1]},Eo=/&/g,Sn=/</g,wa=/>/g,un=/"/g,Eu=/'/g,At=/\x00/g,a=/[\x00&<>"']/;function c(s,l){return s.indexOf(l)!=-1}function d(s,l){return s<l?-1:s>l?1:0}var g;e:{var m=f.navigator;if(m){var w=m.userAgent;if(w){g=w;break e}}g=""}function T(s){return c(g,s)}function E(s,l){for(var p in s)l.call(void 0,s[p],p,s)}function C(s){for(var l in s)return!1;return!0}function N(s){var l={},p;for(p in s)l[p]=s[p];return l}var R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(s,l){for(var p,y,x=1;x<arguments.length;x++){y=arguments[x];for(p in y)s[p]=y[p];for(var j=0;j<R.length;j++)p=R[j],Object.prototype.hasOwnProperty.call(y,p)&&(s[p]=y[p])}}function P(s,l){e:{try{var p=s&&s.ownerDocument,y=p&&(p.defaultView||p.parentWindow);if(y=y||f,y.Element&&y.Location){var x=y;break e}}catch{}x=null}if(x&&typeof x[l]<"u"&&(!s||!(s instanceof x[l])&&(s instanceof x.Location||s instanceof x.Element))){if(D(s))try{var j=s.constructor.displayName||s.constructor.name||Object.prototype.toString.call(s)}catch{j="<object could not be stringified>"}else j=s===void 0?"undefined":s===null?"null":typeof s;Ne("Argument is not a %s (or a non-Element, non-Location mock); got: %s",l,j)}}function A(s,l){this.a=s===H&&l||"",this.b=W}A.prototype.ra=!0,A.prototype.qa=function(){return this.a},A.prototype.toString=function(){return"Const{"+this.a+"}"};function U(s){return s instanceof A&&s.constructor===A&&s.b===W?s.a:(Ne("expected object of type Const, got '"+s+"'"),"type_error:Const")}var W={},H={},V=new A(H,"");function B(s,l){this.a=s===X&&l||"",this.b=Q}B.prototype.ra=!0,B.prototype.qa=function(){return this.a.toString()},B.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};function k(s){return s instanceof B&&s.constructor===B&&s.b===Q?s.a:(Ne("expected object of type TrustedResourceUrl, got '"+s+"' of type "+S(s)),"type_error:TrustedResourceUrl")}function L(s,l){var p=U(s);if(!$.test(p))throw Error("Invalid TrustedResourceUrl format: "+p);return s=p.replace(q,function(y,x){if(!Object.prototype.hasOwnProperty.call(l,x))throw Error('Found marker, "'+x+'", in format string, "'+p+'", but no valid label mapping found in args: '+JSON.stringify(l));return y=l[x],y instanceof A?U(y):encodeURIComponent(String(y))}),new B(X,s)}var q=/%{(\w+)}/g,$=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Q={},X={};function J(s,l){this.a=s===le&&l||"",this.b=ae}J.prototype.ra=!0,J.prototype.qa=function(){return this.a.toString()},J.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};function te(s){return s instanceof J&&s.constructor===J&&s.b===ae?s.a:(Ne("expected object of type SafeUrl, got '"+s+"' of type "+S(s)),"type_error:SafeUrl")}var se=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function ie(s){return s instanceof J?s:(s=typeof s=="object"&&s.ra?s.qa():String(s),se.test(s)||(s="about:invalid#zClosurez"),new J(le,s))}var ae={},le={};function de(){this.a="",this.b=ye}de.prototype.ra=!0,de.prototype.qa=function(){return this.a.toString()},de.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};function ge(s){return s instanceof de&&s.constructor===de&&s.b===ye?s.a:(Ne("expected object of type SafeHtml, got '"+s+"' of type "+S(s)),"type_error:SafeHtml")}var ye={};function ke(s){var l=new de;return l.a=s,l}ke("<!DOCTYPE html>");var Me=ke("");ke("<br>");function Be(s){var l=new B(X,U(V));P(s,"HTMLIFrameElement"),s.src=k(l).toString()}function lt(s,l){if(P(s,"HTMLScriptElement"),s.src=k(l),_===null)e:{if(l=f.document,(l=l.querySelector&&l.querySelector("script[nonce]"))&&(l=l.nonce||l.getAttribute("nonce"))&&v.test(l)){_=l;break e}_=""}l=_,l&&s.setAttribute("nonce",l)}function nt(s,l){for(var p=s.split("%s"),y="",x=Array.prototype.slice.call(arguments,1);x.length&&1<p.length;)y+=p.shift()+x.shift();return y+p.join("%s")}function et(s){return a.test(s)&&(s.indexOf("&")!=-1&&(s=s.replace(Eo,"&amp;")),s.indexOf("<")!=-1&&(s=s.replace(Sn,"&lt;")),s.indexOf(">")!=-1&&(s=s.replace(wa,"&gt;")),s.indexOf('"')!=-1&&(s=s.replace(un,"&quot;")),s.indexOf("'")!=-1&&(s=s.replace(Eu,"&#39;")),s.indexOf("\0")!=-1&&(s=s.replace(At,"&#0;"))),s}function Ze(s){return Ze[" "](s),s}Ze[" "]=b;function pt(s,l){var p=Kn;return Object.prototype.hasOwnProperty.call(p,s)?p[s]:p[s]=l(s)}var ot=T("Opera"),_t=T("Trident")||T("MSIE"),Tt=T("Edge"),Ot=Tt||_t,Dt=T("Gecko")&&!(c(g.toLowerCase(),"webkit")&&!T("Edge"))&&!(T("Trident")||T("MSIE"))&&!T("Edge"),Ct=c(g.toLowerCase(),"webkit")&&!T("Edge");function rr(){var s=f.document;return s?s.documentMode:void 0}var Hn;e:{var pr="",An=function(){var s=g;if(Dt)return/rv:([^\);]+)(\)|;)/.exec(s);if(Tt)return/Edge\/([\d\.]+)/.exec(s);if(_t)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(s);if(Ct)return/WebKit\/(\S+)/.exec(s);if(ot)return/(?:Version)[ \/]?(\S+)/.exec(s)}();if(An&&(pr=An?An[1]:""),_t){var Yt=rr();if(Yt!=null&&Yt>parseFloat(pr)){Hn=String(Yt);break e}}Hn=pr}var Kn={};function pi(s){return pt(s,function(){for(var l=0,p=Xi(String(Hn)).split("."),y=Xi(String(s)).split("."),x=Math.max(p.length,y.length),j=0;l==0&&j<x;j++){var G=p[j]||"",re=y[j]||"";do{if(G=/(\d*)(\D*)(.*)/.exec(G)||["","","",""],re=/(\d*)(\D*)(.*)/.exec(re)||["","","",""],G[0].length==0&&re[0].length==0)break;l=d(G[1].length==0?0:parseInt(G[1],10),re[1].length==0?0:parseInt(re[1],10))||d(G[2].length==0,re[2].length==0)||d(G[2],re[2]),G=G[3],re=re[3]}while(l==0)}return 0<=l})}var rn;rn=f.document&&_t?rr():void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch{}var Zo=!_t||9<=Number(rn);function So(s){var l=document;return typeof s=="string"?l.getElementById(s):s}function bo(s,l){E(l,function(p,y){p&&typeof p=="object"&&p.ra&&(p=p.qa()),y=="style"?s.style.cssText=p:y=="class"?s.className=p:y=="for"?s.htmlFor=p:es.hasOwnProperty(y)?s.setAttribute(es[y],p):y.lastIndexOf("aria-",0)==0||y.lastIndexOf("data-",0)==0?s.setAttribute(y,p):s[y]=p})}var es={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function ki(s,l,p){var y=arguments,x=document,j=String(y[0]),G=y[1];if(!Zo&&G&&(G.name||G.type)){if(j=["<",j],G.name&&j.push(' name="',et(G.name),'"'),G.type){j.push(' type="',et(G.type),'"');var re={};O(re,G),delete re.type,G=re}j.push(">"),j=j.join("")}return j=Ns(x,j),G&&(typeof G=="string"?j.className=G:Array.isArray(G)?j.className=G.join(" "):bo(j,G)),2<y.length&&Ji(x,j,y),j}function Ji(s,l,p){function y(G){G&&l.appendChild(typeof G=="string"?s.createTextNode(G):G)}for(var x=2;x<p.length;x++){var j=p[x];!I(j)||D(j)&&0<j.nodeType?y(j):Rt(As(j)?Kr(j):j,y)}}function Ns(s,l){return l=String(l),s.contentType==="application/xhtml+xml"&&(l=l.toLowerCase()),s.createElement(l)}function As(s){if(s&&typeof s.length=="number"){if(D(s))return typeof s.item=="function"||typeof s.item=="string";if(M(s))return typeof s.item=="function"}return!1}function gp(s){f.setTimeout(function(){throw s},0)}var Fy;function uj(){var s=f.MessageChannel;if(typeof s>"u"&&typeof window<"u"&&window.postMessage&&window.addEventListener&&!T("Presto")&&(s=function(){var x=Ns(document,"IFRAME");x.style.display="none",Be(x),document.documentElement.appendChild(x);var j=x.contentWindow;x=j.document,x.open(),x.write(ge(Me)),x.close();var G="callImmediate"+Math.random(),re=j.location.protocol=="file:"?"*":j.location.protocol+"//"+j.location.host;x=oe(function(be){(re=="*"||be.origin==re)&&be.data==G&&this.port1.onmessage()},this),j.addEventListener("message",x,!1),this.port1={},this.port2={postMessage:function(){j.postMessage(G,re)}}}),typeof s<"u"&&!T("Trident")&&!T("MSIE")){var l=new s,p={},y=p;return l.port1.onmessage=function(){if(p.next!==void 0){p=p.next;var x=p.Db;p.Db=null,x()}},function(x){y.next={Db:x},y=y.next,l.port2.postMessage(0)}}return function(x){f.setTimeout(x,0)}}function vp(s,l){mp||lj(),jy||(mp(),jy=!0),bI.add(s,l)}var mp;function lj(){if(f.Promise&&f.Promise.resolve){var s=f.Promise.resolve(void 0);mp=function(){s.then(TI)}}else mp=function(){var l=TI;!M(f.setImmediate)||f.Window&&f.Window.prototype&&!T("Edge")&&f.Window.prototype.setImmediate==f.setImmediate?(Fy||(Fy=uj()),Fy(l)):f.setImmediate(l)}}var jy=!1,bI=new rt;function TI(){for(var s;s=It();){try{s.a.call(s.b)}catch(l){gp(l)}Pt(Kt,s)}jy=!1}function Lt(s,l){if(this.a=Su,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,s!=b)try{var p=this;s.call(l,function(y){bu(p,Th,y)},function(y){if(!(y instanceof Ll))try{throw y instanceof Error?y:Error("Promise rejected.")}catch{}bu(p,ks,y)})}catch(y){bu(this,ks,y)}}var Su=0,Th=2,ks=3;function II(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}II.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var CI=new qe(function(){return new II},function(s){s.reset()});function Uy(s,l,p){var y=CI.get();return y.g=s,y.b=l,y.f=p,y}function it(s){if(s instanceof Lt)return s;var l=new Lt(b);return bu(l,Th,s),l}function pn(s){return new Lt(function(l,p){p(s)})}function xI(s,l,p){PI(s,l,p,null)||vp(fe(l,s))}function cj(s){return new Lt(function(l,p){var y=s.length,x=[];if(y)for(var j=function(xe,gt){y--,x[xe]=gt,y==0&&l(x)},G=function(xe){p(xe)},re=0,be;re<s.length;re++)be=s[re],xI(be,fe(j,re),G);else l(x)})}function NI(s){return new Lt(function(l){var p=s.length,y=[];if(p)for(var x=function(re,be,xe){p--,y[re]=be?{Mb:!0,value:xe}:{Mb:!1,reason:xe},p==0&&l(y)},j=0,G;j<s.length;j++)G=s[j],xI(G,fe(x,j,!0),fe(x,j,!1));else l(y)})}Lt.prototype.then=function(s,l,p){return kI(this,M(s)?s:null,M(l)?l:null,p)},Lt.prototype.$goog_Thenable=!0,t=Lt.prototype,t.ma=function(s,l){return s=Uy(s,s,l),s.c=!0,Vy(this,s),this},t.o=function(s,l){return kI(this,null,s,l)},t.cancel=function(s){if(this.a==Su){var l=new Ll(s);vp(function(){AI(this,l)},this)}};function AI(s,l){if(s.a==Su)if(s.c){var p=s.c;if(p.b){for(var y=0,x=null,j=null,G=p.b;G&&(G.c||(y++,G.a==s&&(x=G),!(x&&1<y)));G=G.next)x||(j=G);x&&(p.a==Su&&y==1?AI(p,l):(j?(y=j,y.next==p.f&&(p.f=y),y.next=y.next.next):OI(p),DI(p,x,ks,l)))}s.c=null}else bu(s,ks,l)}function Vy(s,l){s.b||s.a!=Th&&s.a!=ks||RI(s),s.f?s.f.next=l:s.b=l,s.f=l}function kI(s,l,p,y){var x=Uy(null,null,null);return x.a=new Lt(function(j,G){x.g=l?function(re){try{var be=l.call(y,re);j(be)}catch(xe){G(xe)}}:j,x.b=p?function(re){try{var be=p.call(y,re);be===void 0&&re instanceof Ll?G(re):j(be)}catch(xe){G(xe)}}:G}),x.a.c=s,Vy(s,x),x.a}t.Yc=function(s){this.a=Su,bu(this,Th,s)},t.Zc=function(s){this.a=Su,bu(this,ks,s)};function bu(s,l,p){s.a==Su&&(s===p&&(l=ks,p=new TypeError("Promise cannot resolve to itself")),s.a=1,PI(p,s.Yc,s.Zc,s)||(s.i=p,s.a=l,s.c=null,RI(s),l!=ks||p instanceof Ll||fj(s,p)))}function PI(s,l,p,y){if(s instanceof Lt)return Vy(s,Uy(l||b,p||null,y)),!0;if(Ce(s))return s.then(l,p,y),!0;if(D(s))try{var x=s.then;if(M(x))return hj(s,x,l,p,y),!0}catch(j){return p.call(y,j),!0}return!1}function hj(s,l,p,y,x){function j(be){re||(re=!0,y.call(x,be))}function G(be){re||(re=!0,p.call(x,be))}var re=!1;try{l.call(s,G,j)}catch(be){j(be)}}function RI(s){s.h||(s.h=!0,vp(s.ec,s))}function OI(s){var l=null;return s.b&&(l=s.b,s.b=l.next,l.next=null),s.b||(s.f=null),l}t.ec=function(){for(var s;s=OI(this);)DI(this,s,this.a,this.i);this.h=!1};function DI(s,l,p,y){if(p==ks&&l.b&&!l.c)for(;s&&s.g;s=s.c)s.g=!1;if(l.a)l.a.c=null,LI(l,p,y);else try{l.c?l.g.call(l.f):LI(l,p,y)}catch(x){MI.call(null,x)}Pt(CI,l)}function LI(s,l,p){l==Th?s.g.call(s.f,p):s.b&&s.b.call(s.f,p)}function fj(s,l){s.g=!0,vp(function(){s.g&&MI.call(null,l)})}var MI=gp;function Ll(s){Ut.call(this,s)}he(Ll,Ut),Ll.prototype.name="cancel";function yp(){this.wa=this.wa,this.na=this.na}var dj=0;yp.prototype.wa=!1;function FI(s){!s.wa&&(s.wa=!0,s.Ba(),dj!=0)&&ne(s)}yp.prototype.Ba=function(){if(this.na)for(;this.na.length;)this.na.shift()()};var pj=Object.freeze||function(s){return s},jI=!_t||9<=Number(rn),gj=_t&&!pi("9"),vj=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var s=!1,l=Object.defineProperty({},"passive",{get:function(){s=!0}});try{f.addEventListener("test",b,l),f.removeEventListener("test",b,l)}catch{}return s}();function Zi(s,l){this.type=s,this.b=this.target=l,this.defaultPrevented=!1}Zi.prototype.preventDefault=function(){this.defaultPrevented=!0};function Tu(s,l){if(Zi.call(this,s?s.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,s){var p=this.type=s.type,y=s.changedTouches&&s.changedTouches.length?s.changedTouches[0]:null;if(this.target=s.target||s.srcElement,this.b=l,l=s.relatedTarget){if(Dt){e:{try{Ze(l.nodeName);var x=!0;break e}catch{}x=!1}x||(l=null)}}else p=="mouseover"?l=s.fromElement:p=="mouseout"&&(l=s.toElement);this.relatedTarget=l,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=s.clientX!==void 0?s.clientX:s.pageX,this.clientY=s.clientY!==void 0?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0),this.button=s.button,this.key=s.key||"",this.ctrlKey=s.ctrlKey,this.altKey=s.altKey,this.shiftKey=s.shiftKey,this.metaKey=s.metaKey,this.pointerId=s.pointerId||0,this.pointerType=typeof s.pointerType=="string"?s.pointerType:mj[s.pointerType]||"",this.a=s,s.defaultPrevented&&this.preventDefault()}}he(Tu,Zi);var mj=pj({2:"touch",3:"pen",4:"mouse"});Tu.prototype.preventDefault=function(){Tu.Za.preventDefault.call(this);var s=this.a;if(s.preventDefault)s.preventDefault();else if(s.returnValue=!1,gj)try{(s.ctrlKey||112<=s.keyCode&&123>=s.keyCode)&&(s.keyCode=-1)}catch{}},Tu.prototype.f=function(){return this.a};var Ih="closure_listenable_"+(1e6*Math.random()|0),yj=0;function _j(s,l,p,y,x){this.listener=s,this.proxy=null,this.src=l,this.type=p,this.capture=!!y,this.Ta=x,this.key=++yj,this.ua=this.Na=!1}function _p(s){s.ua=!0,s.listener=null,s.proxy=null,s.src=null,s.Ta=null}function wp(s){this.src=s,this.a={},this.b=0}wp.prototype.add=function(s,l,p,y,x){var j=s.toString();s=this.a[j],s||(s=this.a[j]=[],this.b++);var G=zy(s,l,y,x);return-1<G?(l=s[G],p||(l.Na=!1)):(l=new _j(l,this.src,j,!!y,x),l.Na=p,s.push(l)),l};function By(s,l){var p=l.type;p in s.a&&Ve(s.a[p],l)&&(_p(l),s.a[p].length==0&&(delete s.a[p],s.b--))}function zy(s,l,p,y){for(var x=0;x<s.length;++x){var j=s[x];if(!j.ua&&j.listener==l&&j.capture==!!p&&j.Ta==y)return x}return-1}var qy="closure_lm_"+(1e6*Math.random()|0),Wy={};function To(s,l,p,y,x){if(y&&y.once)Gy(s,l,p,y,x);else if(Array.isArray(l))for(var j=0;j<l.length;j++)To(s,l[j],p,y,x);else p=Hy(p),s&&s[Ih]?WI(s,l,p,D(y)?!!y.capture:!!y,x):UI(s,l,p,!1,y,x)}function UI(s,l,p,y,x,j){if(!l)throw Error("Invalid event type");var G=D(x)?!!x.capture:!!x,re=Ep(s);if(re||(s[qy]=re=new wp(s)),p=re.add(l,p,y,G,j),!p.proxy)if(y=wj(),p.proxy=y,y.src=s,y.listener=p,s.addEventListener)vj||(x=G),x===void 0&&(x=!1),s.addEventListener(l.toString(),y,x);else if(s.attachEvent)s.attachEvent(BI(l.toString()),y);else if(s.addListener&&s.removeListener)s.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.")}function wj(){var s=Ej,l=jI?function(p){return s.call(l.src,l.listener,p)}:function(p){if(p=s.call(l.src,l.listener,p),!p)return p};return l}function Gy(s,l,p,y,x){if(Array.isArray(l))for(var j=0;j<l.length;j++)Gy(s,l[j],p,y,x);else p=Hy(p),s&&s[Ih]?Ky(s,l,p,D(y)?!!y.capture:!!y,x):UI(s,l,p,!0,y,x)}function eo(s,l,p,y,x){if(Array.isArray(l))for(var j=0;j<l.length;j++)eo(s,l[j],p,y,x);else y=D(y)?!!y.capture:!!y,p=Hy(p),s&&s[Ih]?(s=s.u,l=String(l).toString(),l in s.a&&(j=s.a[l],p=zy(j,p,y,x),-1<p&&(_p(j[p]),Array.prototype.splice.call(j,p,1),j.length==0&&(delete s.a[l],s.b--)))):s&&(s=Ep(s))&&(l=s.a[l.toString()],s=-1,l&&(s=zy(l,p,y,x)),(p=-1<s?l[s]:null)&&VI(p))}function VI(s){if(typeof s!="number"&&s&&!s.ua){var l=s.src;if(l&&l[Ih])By(l.u,s);else{var p=s.type,y=s.proxy;l.removeEventListener?l.removeEventListener(p,y,s.capture):l.detachEvent?l.detachEvent(BI(p),y):l.addListener&&l.removeListener&&l.removeListener(y),(p=Ep(l))?(By(p,s),p.b==0&&(p.src=null,l[qy]=null)):_p(s)}}}function BI(s){return s in Wy?Wy[s]:Wy[s]="on"+s}function zI(s,l,p,y){var x=!0;if((s=Ep(s))&&(l=s.a[l.toString()]))for(l=l.concat(),s=0;s<l.length;s++){var j=l[s];j&&j.capture==p&&!j.ua&&(j=qI(j,y),x=x&&j!==!1)}return x}function qI(s,l){var p=s.listener,y=s.Ta||s.src;return s.Na&&VI(s),p.call(y,l)}function Ej(s,l){if(s.ua)return!0;if(!jI){if(!l)e:{l=["window","event"];for(var p=f,y=0;y<l.length;y++)if(p=p[l[y]],p==null){l=null;break e}l=p}if(y=l,l=new Tu(y,this),p=!0,!(0>y.keyCode||y.returnValue!=null)){e:{var x=!1;if(y.keyCode==0)try{y.keyCode=-1;break e}catch{x=!0}(x||y.returnValue==null)&&(y.returnValue=!0)}for(y=[],x=l.b;x;x=x.parentNode)y.push(x);for(s=s.type,x=y.length-1;0<=x;x--){l.b=y[x];var j=zI(y[x],s,!0,l);p=p&&j}for(x=0;x<y.length;x++)l.b=y[x],j=zI(y[x],s,!1,l),p=p&&j}return p}return qI(s,new Tu(l,this))}function Ep(s){return s=s[qy],s instanceof wp?s:null}var $y="__closure_events_fn_"+(1e9*Math.random()>>>0);function Hy(s){return M(s)?s:(s[$y]||(s[$y]=function(l){return s.handleEvent(l)}),s[$y])}function Yr(){yp.call(this),this.u=new wp(this),this.Yb=this,this.eb=null}he(Yr,yp),Yr.prototype[Ih]=!0,Yr.prototype.addEventListener=function(s,l,p,y){To(this,s,l,p,y)},Yr.prototype.removeEventListener=function(s,l,p,y){eo(this,s,l,p,y)},Yr.prototype.dispatchEvent=function(s){var l,p=this.eb;if(p)for(l=[];p;p=p.eb)l.push(p);p=this.Yb;var y=s.type||s;if(typeof s=="string")s=new Zi(s,p);else if(s instanceof Zi)s.target=s.target||p;else{var x=s;s=new Zi(y,p),O(s,x)}if(x=!0,l)for(var j=l.length-1;0<=j;j--){var G=s.b=l[j];x=Sp(G,y,!0,s)&&x}if(G=s.b=p,x=Sp(G,y,!0,s)&&x,x=Sp(G,y,!1,s)&&x,l)for(j=0;j<l.length;j++)G=s.b=l[j],x=Sp(G,y,!1,s)&&x;return x},Yr.prototype.Ba=function(){if(Yr.Za.Ba.call(this),this.u){var s=this.u,l;for(l in s.a){for(var p=s.a[l],y=0;y<p.length;y++)_p(p[y]);delete s.a[l],s.b--}}this.eb=null};function WI(s,l,p,y,x){s.u.add(String(l),p,!1,y,x)}function Ky(s,l,p,y,x){s.u.add(String(l),p,!0,y,x)}function Sp(s,l,p,y){if(l=s.u.a[String(l)],!l)return!0;l=l.concat();for(var x=!0,j=0;j<l.length;++j){var G=l[j];if(G&&!G.ua&&G.capture==p){var re=G.listener,be=G.Ta||G.src;G.Na&&By(s.u,G),x=re.call(be,y)!==!1&&x}}return x&&!y.defaultPrevented}function Yy(s,l,p){if(M(s))p&&(s=oe(s,p));else if(s&&typeof s.handleEvent=="function")s=oe(s.handleEvent,s);else throw Error("Invalid listener argument");return 2147483647<Number(l)?-1:f.setTimeout(s,l||0)}function Ml(s){var l=null;return new Lt(function(p,y){l=Yy(function(){p(void 0)},s),l==-1&&y(Error("Failed to schedule timer."))}).o(function(p){throw f.clearTimeout(l),p})}function GI(s){if(s.V&&typeof s.V=="function")return s.V();if(typeof s=="string")return s.split("");if(I(s)){for(var l=[],p=s.length,y=0;y<p;y++)l.push(s[y]);return l}l=[],p=0;for(y in s)l[p++]=s[y];return l}function $I(s){if(s.X&&typeof s.X=="function")return s.X();if(!s.V||typeof s.V!="function"){if(I(s)||typeof s=="string"){var l=[];s=s.length;for(var p=0;p<s;p++)l.push(p);return l}l=[],p=0;for(var y in s)l[p++]=y;return l}}function Sj(s,l){if(s.forEach&&typeof s.forEach=="function")s.forEach(l,void 0);else if(I(s)||typeof s=="string")Rt(s,l,void 0);else for(var p=$I(s),y=GI(s),x=y.length,j=0;j<x;j++)l.call(void 0,y[j],p&&p[j],s)}function Fl(s,l){this.b={},this.a=[],this.c=0;var p=arguments.length;if(1<p){if(p%2)throw Error("Uneven number of arguments");for(var y=0;y<p;y+=2)this.set(arguments[y],arguments[y+1])}else if(s)if(s instanceof Fl)for(p=s.X(),y=0;y<p.length;y++)this.set(p[y],s.get(p[y]));else for(y in s)this.set(y,s[y])}t=Fl.prototype,t.V=function(){Qy(this);for(var s=[],l=0;l<this.a.length;l++)s.push(this.b[this.a[l]]);return s},t.X=function(){return Qy(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0};function Qy(s){if(s.c!=s.a.length){for(var l=0,p=0;l<s.a.length;){var y=s.a[l];Iu(s.b,y)&&(s.a[p++]=y),l++}s.a.length=p}if(s.c!=s.a.length){var x={};for(p=l=0;l<s.a.length;)y=s.a[l],Iu(x,y)||(s.a[p++]=y,x[y]=1),l++;s.a.length=p}}t.get=function(s,l){return Iu(this.b,s)?this.b[s]:l},t.set=function(s,l){Iu(this.b,s)||(this.c++,this.a.push(s)),this.b[s]=l},t.forEach=function(s,l){for(var p=this.X(),y=0;y<p.length;y++){var x=p[y],j=this.get(x);s.call(l,j,x,this)}};function Iu(s,l){return Object.prototype.hasOwnProperty.call(s,l)}var HI=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/\\#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function bj(s,l){if(s){s=s.split("&");for(var p=0;p<s.length;p++){var y=s[p].indexOf("="),x=null;if(0<=y){var j=s[p].substring(0,y);x=s[p].substring(y+1)}else j=s[p];l(j,x?decodeURIComponent(x.replace(/\+/g," ")):"")}}}function Ea(s,l){this.b=this.i=this.f="",this.l=null,this.g=this.c="",this.h=!1;var p;s instanceof Ea?(this.h=l!==void 0?l:s.h,bp(this,s.f),this.i=s.i,this.b=s.b,Xy(this,s.l),this.c=s.c,Jy(this,JI(s.a)),this.g=s.g):s&&(p=String(s).match(HI))?(this.h=!!l,bp(this,p[1]||"",!0),this.i=Ch(p[2]||""),this.b=Ch(p[3]||"",!0),Xy(this,p[4]),this.c=Ch(p[5]||"",!0),Jy(this,p[6]||"",!0),this.g=Ch(p[7]||"")):(this.h=!!l,this.a=new Cu(null,this.h))}Ea.prototype.toString=function(){var s=[],l=this.f;l&&s.push(xh(l,YI,!0),":");var p=this.b;return(p||l=="file")&&(s.push("//"),(l=this.i)&&s.push(xh(l,YI,!0),"@"),s.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.l,p!=null&&s.push(":",String(p))),(p=this.c)&&(this.b&&p.charAt(0)!="/"&&s.push("/"),s.push(xh(p,p.charAt(0)=="/"?Cj:Ij,!0))),(p=this.a.toString())&&s.push("?",p),(p=this.g)&&s.push("#",xh(p,Nj)),s.join("")},Ea.prototype.resolve=function(s){var l=new Ea(this),p=!!s.f;p?bp(l,s.f):p=!!s.i,p?l.i=s.i:p=!!s.b,p?l.b=s.b:p=s.l!=null;var y=s.c;if(p)Xy(l,s.l);else if(p=!!s.c){if(y.charAt(0)!="/")if(this.b&&!this.c)y="/"+y;else{var x=l.c.lastIndexOf("/");x!=-1&&(y=l.c.substr(0,x+1)+y)}if(x=y,x==".."||x==".")y="";else if(c(x,"./")||c(x,"/.")){y=x.lastIndexOf("/",0)==0,x=x.split("/");for(var j=[],G=0;G<x.length;){var re=x[G++];re=="."?y&&G==x.length&&j.push(""):re==".."?((1<j.length||j.length==1&&j[0]!="")&&j.pop(),y&&G==x.length&&j.push("")):(j.push(re),y=!0)}y=j.join("/")}else y=x}return p?l.c=y:p=s.a.toString()!=="",p?Jy(l,JI(s.a)):p=!!s.g,p&&(l.g=s.g),l};function bp(s,l,p){s.f=p?Ch(l,!0):l,s.f&&(s.f=s.f.replace(/:$/,""))}function Xy(s,l){if(l){if(l=Number(l),isNaN(l)||0>l)throw Error("Bad port number "+l);s.l=l}else s.l=null}function Jy(s,l,p){l instanceof Cu?(s.a=l,Aj(s.a,s.h)):(p||(l=xh(l,xj)),s.a=new Cu(l,s.h))}function Mn(s,l,p){s.a.set(l,p)}function to(s,l){return s.a.get(l)}function Ps(s){return s instanceof Ea?new Ea(s):new Ea(s,void 0)}function KI(s,l){var p=new Ea(null,void 0);return bp(p,"https"),s&&(p.b=s),l&&(p.c=l),p}function Ch(s,l){return s?l?decodeURI(s.replace(/%25/g,"%2525")):decodeURIComponent(s):""}function xh(s,l,p){return typeof s=="string"?(s=encodeURI(s).replace(l,Tj),p&&(s=s.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),s):null}function Tj(s){return s=s.charCodeAt(0),"%"+(s>>4&15).toString(16)+(s&15).toString(16)}var YI=/[#\/\?@]/g,Ij=/[#\?:]/g,Cj=/[#\?]/g,xj=/[#\?@]/g,Nj=/#/g;function Cu(s,l){this.b=this.a=null,this.c=s||null,this.f=!!l}function Sa(s){s.a||(s.a=new Fl,s.b=0,s.c&&bj(s.c,function(l,p){s.add(decodeURIComponent(l.replace(/\+/g," ")),p)}))}function QI(s){var l=$I(s);if(typeof l>"u")throw Error("Keys are undefined");var p=new Cu(null,void 0);s=GI(s);for(var y=0;y<l.length;y++){var x=l[y],j=s[y];Array.isArray(j)?XI(p,x,j):p.add(x,j)}return p}t=Cu.prototype,t.add=function(s,l){Sa(this),this.c=null,s=jl(this,s);var p=this.a.get(s);return p||this.a.set(s,p=[]),p.push(l),this.b+=1,this};function ts(s,l){Sa(s),l=jl(s,l),Iu(s.a.b,l)&&(s.c=null,s.b-=s.a.get(l).length,s=s.a,Iu(s.b,l)&&(delete s.b[l],s.c--,s.a.length>2*s.c&&Qy(s)))}t.clear=function(){this.a=this.c=null,this.b=0};function Zy(s,l){return Sa(s),l=jl(s,l),Iu(s.a.b,l)}t.forEach=function(s,l){Sa(this),this.a.forEach(function(p,y){Rt(p,function(x){s.call(l,x,y,this)},this)},this)},t.X=function(){Sa(this);for(var s=this.a.V(),l=this.a.X(),p=[],y=0;y<l.length;y++)for(var x=s[y],j=0;j<x.length;j++)p.push(l[y]);return p},t.V=function(s){Sa(this);var l=[];if(typeof s=="string")Zy(this,s)&&(l=Vt(l,this.a.get(jl(this,s))));else{s=this.a.V();for(var p=0;p<s.length;p++)l=Vt(l,s[p])}return l},t.set=function(s,l){return Sa(this),this.c=null,s=jl(this,s),Zy(this,s)&&(this.b-=this.a.get(s).length),this.a.set(s,[l]),this.b+=1,this},t.get=function(s,l){return s?(s=this.V(s),0<s.length?String(s[0]):l):l};function XI(s,l,p){ts(s,l),0<p.length&&(s.c=null,s.a.set(jl(s,l),Kr(p)),s.b+=p.length)}t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var s=[],l=this.a.X(),p=0;p<l.length;p++){var y=l[p],x=encodeURIComponent(String(y));y=this.V(y);for(var j=0;j<y.length;j++){var G=x;y[j]!==""&&(G+="="+encodeURIComponent(String(y[j]))),s.push(G)}}return this.c=s.join("&")};function JI(s){var l=new Cu;return l.c=s.c,s.a&&(l.a=new Fl(s.a),l.b=s.b),l}function jl(s,l){return l=String(l),s.f&&(l=l.toLowerCase()),l}function Aj(s,l){l&&!s.f&&(Sa(s),s.c=null,s.a.forEach(function(p,y){var x=y.toLowerCase();y!=x&&(ts(this,y),XI(this,x,p))},s)),s.f=l}function ZI(s){var l=[];return e_(new kj,s,l),l.join("")}function kj(){}function e_(s,l,p){if(l==null)p.push("null");else{if(typeof l=="object"){if(Array.isArray(l)){var y=l;l=y.length,p.push("[");for(var x="",j=0;j<l;j++)p.push(x),e_(s,y[j],p),x=",";p.push("]");return}if(l instanceof String||l instanceof Number||l instanceof Boolean)l=l.valueOf();else{p.push("{"),x="";for(y in l)Object.prototype.hasOwnProperty.call(l,y)&&(j=l[y],typeof j!="function"&&(p.push(x),tC(y,p),p.push(":"),e_(s,j,p),x=","));p.push("}");return}}switch(typeof l){case"string":tC(l,p);break;case"number":p.push(isFinite(l)&&!isNaN(l)?String(l):"null");break;case"boolean":p.push(String(l));break;case"function":p.push("null");break;default:throw Error("Unknown type: "+typeof l)}}}var eC={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\u000b"},Pj=/\uffff/.test("")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function tC(s,l){l.push('"',s.replace(Pj,function(p){var y=eC[p];return y||(y="\\u"+(p.charCodeAt(0)|65536).toString(16).substr(1),eC[p]=y),y}),'"')}function t_(){var s=Cr();return _t&&!!rn&&rn==11||/Edge\/\d+/.test(s)}function Nh(){return f.window&&f.window.location.href||self&&self.location&&self.location.href||""}function nC(s,l){l=l||f.window;var p="about:blank";s&&(p=te(ie(s))),l.location.href=p}function rC(s,l){var p=[],y;for(y in s)y in l?typeof s[y]!=typeof l[y]?p.push(y):typeof s[y]=="object"&&s[y]!=null&&l[y]!=null?0<rC(s[y],l[y]).length&&p.push(y):s[y]!==l[y]&&p.push(y):p.push(y);for(y in l)y in s||p.push(y);return p}function Rj(){var s=Cr();return s=Ul(s)!=aC?null:(s=s.match(/\sChrome\/(\d+)/i))&&s.length==2?parseInt(s[1],10):null,s&&30>s?!1:!_t||!rn||9<rn}function iC(s){return s=(s||Cr()).toLowerCase(),!!(s.match(/android/)||s.match(/webos/)||s.match(/iphone|ipad|ipod/)||s.match(/blackberry/)||s.match(/windows phone/)||s.match(/iemobile/))}function xu(s){s=s||f.window;try{s.close()}catch{}}function oC(s,l,p){var y=Math.floor(1e9*Math.random()).toString();l=l||500,p=p||600;var x=(window.screen.availHeight-p)/2,j=(window.screen.availWidth-l)/2;l={width:l,height:p,top:0<x?x:0,left:0<j?j:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},p=Cr().toLowerCase(),y&&(l.target=y,c(p,"crios/")&&(l.target="_blank")),Ul(Cr())==o_&&(s=s||"http://localhost",l.scrollbars=!0),p=s||"",(s=l)||(s={}),y=window,l=p instanceof J?p:ie(typeof p.href<"u"?p.href:String(p)),p=s.target||p.target,x=[];for(G in s)switch(G){case"width":case"height":case"top":case"left":x.push(G+"="+s[G]);break;case"target":case"noopener":case"noreferrer":break;default:x.push(G+"="+(s[G]?1:0))}var G=x.join(",");if((T("iPhone")&&!T("iPod")&&!T("iPad")||T("iPad")||T("iPod"))&&y.navigator&&y.navigator.standalone&&p&&p!="_self"?(G=Ns(document,"A"),P(G,"HTMLAnchorElement"),l instanceof J||l instanceof J||(l=typeof l=="object"&&l.ra?l.qa():String(l),se.test(l)||(l="about:invalid#zClosurez"),l=new J(le,l)),G.href=te(l),G.setAttribute("target",p),s.noreferrer&&G.setAttribute("rel","noreferrer"),s=document.createEvent("MouseEvent"),s.initMouseEvent("click",!0,!0,y,1),G.dispatchEvent(s),G={}):s.noreferrer?(G=y.open("",p,G),s=te(l),G&&(Ot&&c(s,";")&&(s="'"+s.replace(/'/g,"%27")+"'"),G.opener=null,s=ke('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+et(s)+'">'),y=G.document)&&(y.write(ge(s)),y.close())):(G=y.open(te(l),p,G))&&s.noopener&&(G.opener=null),G)try{G.focus()}catch{}return G}function Oj(s){return new Lt(function(l){function p(){Ml(2e3).then(function(){if(!s||s.closed)l();else return p()})}return p()})}var Dj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Lj=/^[^@]+@[^@]+$/;function n_(){var s=null;return new Lt(function(l){f.document.readyState=="complete"?l():(s=function(){l()},Gy(window,"load",s))}).o(function(l){throw eo(window,"load",s),l})}function Mj(){return r_(void 0)?n_().then(function(){return new Lt(function(s,l){var p=f.document,y=setTimeout(function(){l(Error("Cordova framework is not ready."))},1e3);p.addEventListener("deviceready",function(){clearTimeout(y),s()},!1)})}):pn(Error("Cordova must run in an Android or iOS file scheme."))}function r_(s){return s=s||Cr(),!(Bl()!=="file:"&&Bl()!=="ionic:"||!s.toLowerCase().match(/iphone|ipad|ipod|android/))}function i_(){var s=f.window;try{return!(!s||s==s.top)}catch{return!1}}function Io(){return typeof f.WorkerGlobalScope<"u"&&typeof f.importScripts=="function"}function ns(){return ze.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":ze.INTERNAL.hasOwnProperty("node")?"Node":Io()?"Worker":"Browser"}function sC(){var s=ns();return s==="ReactNative"||s==="Node"}function Fj(){for(var s=50,l=[];0<s;)l.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),s--;return l.join("")}var o_="Firefox",aC="Chrome";function Ul(s){var l=s.toLowerCase();if(c(l,"opera/")||c(l,"opr/")||c(l,"opios/"))return"Opera";if(c(l,"iemobile"))return"IEMobile";if(c(l,"msie")||c(l,"trident/"))return"IE";if(c(l,"edge/"))return"Edge";if(c(l,"firefox/"))return o_;if(c(l,"silk/"))return"Silk";if(c(l,"blackberry"))return"Blackberry";if(c(l,"webos"))return"Webos";if(!c(l,"safari/")||c(l,"chrome/")||c(l,"crios/")||c(l,"android"))if(!c(l,"chrome/")&&!c(l,"crios/")||c(l,"edge/")){if(c(l,"android"))return"Android";if((s=s.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&s.length==2)return s[1]}else return aC;else return"Safari";return"Other"}var uC={jd:"FirebaseCore-web",ld:"FirebaseUI-web"};function Vl(s,l){l=l||[];var p=[],y={},x;for(x in uC)y[uC[x]]=!0;for(x=0;x<l.length;x++)typeof y[l[x]]<"u"&&(delete y[l[x]],p.push(l[x]));return p.sort(),l=p,l.length||(l=["FirebaseCore-web"]),p=ns(),p==="Browser"?(y=Cr(),p=Ul(y)):p==="Worker"&&(y=Cr(),p=Ul(y)+"-"+p),p+"/JsCore/"+s+"/"+l.join(",")}function Cr(){return f.navigator&&f.navigator.userAgent||""}function gn(s,l){s=s.split("."),l=l||f;for(var p=0;p<s.length&&typeof l=="object"&&l!=null;p++)l=l[s[p]];return p!=s.length&&(l=void 0),l}function s_(){try{var s=f.localStorage,l=Au();if(s)return s.setItem(l,"1"),s.removeItem(l),t_()?!!f.indexedDB:!0}catch{return Io()&&!!f.indexedDB}return!1}function Nu(){return(Tp()||Bl()==="chrome-extension:"||r_())&&!sC()&&s_()&&!Io()}function Tp(){return Bl()==="http:"||Bl()==="https:"}function Bl(){return f.location&&f.location.protocol||null}function Ah(s){return s=s||Cr(),!(iC(s)||Ul(s)==o_)}function kh(s){return typeof s>"u"?null:ZI(s)}function lC(s){var l={},p;for(p in s)s.hasOwnProperty(p)&&s[p]!==null&&s[p]!==void 0&&(l[p]=s[p]);return l}function zl(s){if(s!==null)return JSON.parse(s)}function Au(s){return s||Math.floor(1e9*Math.random()).toString()}function cC(s){return s=s||Cr(),!(Ul(s)=="Safari"||s.toLowerCase().match(/iphone|ipad|ipod/))}function hC(){var s=f.___jsl;if(s&&s.H){for(var l in s.H)if(s.H[l].r=s.H[l].r||[],s.H[l].L=s.H[l].L||[],s.H[l].r=s.H[l].L.concat(),s.CP)for(var p=0;p<s.CP.length;p++)s.CP[p]=null}}function ba(s,l){if(s>l)throw Error("Short delay should be less than long delay!");this.a=s,this.c=l,s=Cr(),l=ns(),this.b=iC(s)||l==="ReactNative"}ba.prototype.get=function(){var s=f.navigator;return!(s&&typeof s.onLine=="boolean"&&(Tp()||Bl()==="chrome-extension:"||typeof s.connection<"u"))||s.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};function a_(){var s=f.document;return s&&typeof s.visibilityState<"u"?s.visibilityState=="visible":!0}function jj(){var s=f.document,l=null;return a_()||!s?it():new Lt(function(p){l=function(){a_()&&(s.removeEventListener("visibilitychange",l,!1),p())},s.addEventListener("visibilitychange",l,!1)}).o(function(p){throw s.removeEventListener("visibilitychange",l,!1),p})}function Ph(s){try{var l=new Date(parseInt(s,10));if(!isNaN(l.getTime())&&!/[^0-9]/.test(s))return l.toUTCString()}catch{}return null}function fC(){return!(!gn("fireauth.oauthhelper",f)&&!gn("fireauth.iframe",f))}function Uj(){var s=f.navigator;return s&&s.serviceWorker&&s.serviceWorker.controller||null}function Vj(){var s=f.navigator;return s&&s.serviceWorker?it().then(function(){return s.serviceWorker.ready}).then(function(l){return l.active||null}).o(function(){return null}):it(null)}var dC={};function u_(s){dC[s]||(dC[s]=!0,typeof console<"u"&&typeof console.warn=="function"&&console.warn(s))}var l_;try{var c_={};Object.defineProperty(c_,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(c_,"abcd",{configurable:!0,enumerable:!0,value:2}),l_=c_.abcd==2}catch{l_=!1}function Xe(s,l,p){l_?Object.defineProperty(s,l,{configurable:!0,enumerable:!0,value:p}):s[l]=p}function Qr(s,l){if(l)for(var p in l)l.hasOwnProperty(p)&&Xe(s,p,l[p])}function Ta(s){var l={};return Qr(l,s),l}function Bj(s){var l={},p;for(p in s)s.hasOwnProperty(p)&&(l[p]=s[p]);return l}function zj(s,l){if(!l||!l.length)return!0;if(!s)return!1;for(var p=0;p<l.length;p++){var y=s[l[p]];if(y==null||y==="")return!1}return!0}function h_(s){var l=s;if(typeof s=="object"&&s!=null){l="length"in s?[]:{};for(var p in s)Xe(l,p,h_(s[p]))}return l}function f_(s){var l=s&&(s[v_]?"phone":null);if(l&&s&&s[g_]){Xe(this,"uid",s[g_]),Xe(this,"displayName",s[pC]||null);var p=null;s[p_]&&(p=new Date(s[p_]).toUTCString()),Xe(this,"enrollmentTime",p),Xe(this,"factorId",l)}else throw new Z("internal-error","Internal assert: invalid MultiFactorInfo object")}f_.prototype.v=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};function d_(s){try{var l=new Rh(s)}catch{l=null}return l}var pC="displayName",p_="enrolledAt",g_="mfaEnrollmentId",v_="phoneInfo";function Rh(s){f_.call(this,s),Xe(this,"phoneNumber",s[v_])}he(Rh,f_),Rh.prototype.v=function(){var s=Rh.Za.v.call(this);return s.phoneNumber=this.phoneNumber,s};function qj(s){var l={},p=s[Wj],y=s[$j],x=s[Hj];if(s=d_(s[Gj]),!x||x!=Ip&&x!=Oh&&!p||x==Oh&&!y||x==m_&&!s)throw Error("Invalid checkActionCode response!");x==Oh?(l[vC]=p||null,l[mC]=p||null,l[gC]=y):(l[vC]=y||null,l[mC]=y||null,l[gC]=p||null),l[Kj]=s||null,Xe(this,Qj,x),Xe(this,Yj,h_(l))}var m_="REVERT_SECOND_FACTOR_ADDITION",Ip="EMAIL_SIGNIN",Oh="VERIFY_AND_CHANGE_EMAIL",Wj="email",Gj="mfaInfo",$j="newEmail",Hj="requestType",gC="email",vC="fromEmail",Kj="multiFactorInfo",mC="previousEmail",Yj="data",Qj="operation";function y_(s){s=Ps(s);var l=to(s,yC)||null,p=to(s,_C)||null,y=to(s,wC)||null;if(y=y&&e4[y]||null,!l||!p||!y)throw new Z("argument-error",yC+", "+_C+"and "+wC+" are required in a valid action code URL.");Qr(this,{apiKey:l,operation:y,code:p,continueUrl:to(s,Xj)||null,languageCode:to(s,Jj)||null,tenantId:to(s,Zj)||null})}var yC="apiKey",_C="oobCode",Xj="continueUrl",Jj="languageCode",wC="mode",Zj="tenantId",e4={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:m_,signIn:Ip,verifyAndChangeEmail:Oh,verifyEmail:"VERIFY_EMAIL"};function EC(s){try{return new y_(s)}catch{return null}}function Cp(s){var l=s[t4];if(typeof l>"u")throw new Z("missing-continue-uri");if(typeof l!="string"||typeof l=="string"&&!l.length)throw new Z("invalid-continue-uri");this.h=l,this.b=this.a=null,this.g=!1;var p=s[SC];if(p&&typeof p=="object"){l=p[xC];var y=p[IC];if(p=p[CC],typeof l=="string"&&l.length){if(this.a=l,typeof y<"u"&&typeof y!="boolean")throw new Z("argument-error",IC+" property must be a boolean when specified.");if(this.g=!!y,typeof p<"u"&&(typeof p!="string"||typeof p=="string"&&!p.length))throw new Z("argument-error",CC+" property must be a non empty string when specified.");this.b=p||null}else{if(typeof l<"u")throw new Z("argument-error",xC+" property must be a non empty string when specified.");if(typeof y<"u"||typeof p<"u")throw new Z("missing-android-pkg-name")}}else if(typeof p<"u")throw new Z("argument-error",SC+" property must be a non null object when specified.");if(this.f=null,(l=s[TC])&&typeof l=="object"){if(l=l[NC],typeof l=="string"&&l.length)this.f=l;else if(typeof l<"u")throw new Z("argument-error",NC+" property must be a non empty string when specified.")}else if(typeof l<"u")throw new Z("argument-error",TC+" property must be a non null object when specified.");if(l=s[__],typeof l<"u"&&typeof l!="boolean")throw new Z("argument-error",__+" property must be a boolean when specified.");if(this.c=!!l,s=s[bC],typeof s<"u"&&(typeof s!="string"||typeof s=="string"&&!s.length))throw new Z("argument-error",bC+" property must be a non empty string when specified.");this.i=s||null}var SC="android",bC="dynamicLinkDomain",__="handleCodeInApp",TC="iOS",t4="url",IC="installApp",CC="minimumVersion",xC="packageName",NC="bundleId";function xp(s){var l={};l.continueUrl=s.h,l.canHandleCodeInApp=s.c,(l.androidPackageName=s.a)&&(l.androidMinimumVersion=s.b,l.androidInstallApp=s.g),l.iOSBundleId=s.f,l.dynamicLinkDomain=s.i;for(var p in l)l[p]===null&&delete l[p];return l}function n4(s){return ve(s,function(l){return l=l.toString(16),1<l.length?l:"0"+l}).join("")}var Dh=null;function r4(s){var l="";return i4(s,function(p){l+=String.fromCharCode(p)}),l}function i4(s,l){function p(be){for(;y<s.length;){var xe=s.charAt(y++),gt=Dh[xe];if(gt!=null)return gt;if(!/^[\s\xa0]*$/.test(xe))throw Error("Unknown base64 encoding at char: "+xe)}return be}o4();for(var y=0;;){var x=p(-1),j=p(0),G=p(64),re=p(64);if(re===64&&x===-1)break;l(x<<2|j>>4),G!=64&&(l(j<<4&240|G>>2),re!=64&&l(G<<6&192|re))}}function o4(){if(!Dh){Dh={};for(var s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),l=["+/=","+/","-_=","-_.","-_"],p=0;5>p;p++)for(var y=s.concat(l[p].split("")),x=0;x<y.length;x++){var j=y[x];Dh[j]===void 0&&(Dh[j]=x)}}}function Np(s){var l=AC(s);if(!(l&&l.sub&&l.iss&&l.aud&&l.exp))throw Error("Invalid JWT");this.g=s,this.c=l.exp,this.h=l.sub,this.a=l.provider_id||l.firebase&&l.firebase.sign_in_provider||null,this.f=l.firebase&&l.firebase.tenant||null,this.b=!!l.is_anonymous||this.a=="anonymous"}Np.prototype.S=function(){return this.f},Np.prototype.i=function(){return this.b},Np.prototype.toString=function(){return this.g};function Ap(s){try{return new Np(s)}catch{return null}}function AC(s){if(!s||(s=s.split("."),s.length!=3))return null;s=s[1];for(var l=(4-s.length%4)%4,p=0;p<l;p++)s+=".";try{return JSON.parse(r4(s))}catch{}return null}var kC="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),kp=["client_id","response_type","scope","redirect_uri","state"],w_={kd:{Ha:"locale",ta:700,sa:600,ea:"facebook.com",Va:kp},md:{Ha:null,ta:500,sa:750,ea:"github.com",Va:kp},nd:{Ha:"hl",ta:515,sa:680,ea:"google.com",Va:kp},td:{Ha:"lang",ta:485,sa:705,ea:"twitter.com",Va:kC},gd:{Ha:"locale",ta:600,sa:600,ea:"apple.com",Va:[]}};function E_(s){for(var l in w_)if(w_[l].ea==s)return w_[l];return null}function PC(s){var l={};l["facebook.com"]=OC,l["google.com"]=LC,l["github.com"]=DC,l["twitter.com"]=MC;var p=s&&s[RC];try{if(p)return l[p]?new l[p](s):new rs(s);if(typeof s[S_]<"u")return new b_(s)}catch{}return null}var S_="idToken",RC="providerId";function b_(s){var l=s[RC];if(!l&&s[S_]){var p=Ap(s[S_]);p&&p.a&&(l=p.a)}if(!l)throw Error("Invalid additional user info!");(l=="anonymous"||l=="custom")&&(l=null),p=!1,typeof s.isNewUser<"u"?p=!!s.isNewUser:s.kind==="identitytoolkit#SignupNewUserResponse"&&(p=!0),Xe(this,"providerId",l),Xe(this,"isNewUser",p)}function rs(s){b_.call(this,s),s=zl(s.rawUserInfo||"{}"),Xe(this,"profile",h_(s||{}))}he(rs,b_);function OC(s){if(rs.call(this,s),this.providerId!="facebook.com")throw Error("Invalid provider ID!")}he(OC,rs);function DC(s){if(rs.call(this,s),this.providerId!="github.com")throw Error("Invalid provider ID!");Xe(this,"username",this.profile&&this.profile.login||null)}he(DC,rs);function LC(s){if(rs.call(this,s),this.providerId!="google.com")throw Error("Invalid provider ID!")}he(LC,rs);function MC(s){if(rs.call(this,s),this.providerId!="twitter.com")throw Error("Invalid provider ID!");Xe(this,"username",s.screenName||null)}he(MC,rs);function FC(s){var l=Ps(s),p=to(l,"link"),y=to(Ps(p),"link");return l=to(l,"deep_link_id"),to(Ps(l),"link")||l||y||p||s}function Pp(s,l){if(!s&&!l)throw new Z("internal-error","Internal assert: no raw session string available");if(s&&l)throw new Z("internal-error","Internal assert: unable to determine the session type");this.a=s||null,this.b=l||null,this.type=this.a?Lh:Rp}var Lh="enroll",Rp="signin";Pp.prototype.Fa=function(){return this.a?it(this.a):it(this.b)},Pp.prototype.v=function(){return this.type==Lh?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}};function ql(){}ql.prototype.ia=function(){},ql.prototype.b=function(){},ql.prototype.c=function(){},ql.prototype.v=function(){};function Wl(s,l){return s.then(function(p){if(p[No]){var y=Ap(p[No]);if(!y||l!=y.h)throw new Z("user-mismatch");return p}throw new Z("user-mismatch")}).o(function(p){throw p&&p.code&&p.code==Ue+"user-not-found"?new Z("user-mismatch"):p})}function ku(s,l){if(l)this.a=l;else throw new Z("internal-error","failed to construct a credential");Xe(this,"providerId",s),Xe(this,"signInMethod",s)}ku.prototype.ia=function(s){return H_(s,T_(this))},ku.prototype.b=function(s,l){var p=T_(this);return p.idToken=l,K_(s,p)},ku.prototype.c=function(s,l){return Wl(Y_(s,T_(this)),l)};function T_(s){return{pendingToken:s.a,requestUri:"http://localhost"}}ku.prototype.v=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}};function s4(s){if(s&&s.providerId&&s.signInMethod&&s.providerId.indexOf("saml.")==0&&s.pendingToken)try{return new ku(s.providerId,s.pendingToken)}catch{}return null}function Rs(s,l,p){if(this.a=null,l.idToken||l.accessToken)l.idToken&&Xe(this,"idToken",l.idToken),l.accessToken&&Xe(this,"accessToken",l.accessToken),l.nonce&&!l.pendingToken&&Xe(this,"nonce",l.nonce),l.pendingToken&&(this.a=l.pendingToken);else if(l.oauthToken&&l.oauthTokenSecret)Xe(this,"accessToken",l.oauthToken),Xe(this,"secret",l.oauthTokenSecret);else throw new Z("internal-error","failed to construct a credential");Xe(this,"providerId",s),Xe(this,"signInMethod",p)}Rs.prototype.ia=function(s){return H_(s,I_(this))},Rs.prototype.b=function(s,l){var p=I_(this);return p.idToken=l,K_(s,p)},Rs.prototype.c=function(s,l){var p=I_(this);return Wl(Y_(s,p),l)};function I_(s){var l={};return s.idToken&&(l.id_token=s.idToken),s.accessToken&&(l.access_token=s.accessToken),s.secret&&(l.oauth_token_secret=s.secret),l.providerId=s.providerId,s.nonce&&!s.a&&(l.nonce=s.nonce),l={postBody:QI(l).toString(),requestUri:"http://localhost"},s.a&&(delete l.postBody,l.pendingToken=s.a),l}Rs.prototype.v=function(){var s={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(s.oauthIdToken=this.idToken),this.accessToken&&(s.oauthAccessToken=this.accessToken),this.secret&&(s.oauthTokenSecret=this.secret),this.nonce&&(s.nonce=this.nonce),this.a&&(s.pendingToken=this.a),s};function a4(s){if(s&&s.providerId&&s.signInMethod){var l={idToken:s.oauthIdToken,accessToken:s.oauthTokenSecret?null:s.oauthAccessToken,oauthTokenSecret:s.oauthTokenSecret,oauthToken:s.oauthTokenSecret&&s.oauthAccessToken,nonce:s.nonce,pendingToken:s.pendingToken};try{return new Rs(s.providerId,l,s.signInMethod)}catch{}}return null}function Pu(s,l){this.Oc=l||[],Qr(this,{providerId:s,isOAuthProvider:!0}),this.Fb={},this.lb=(E_(s)||{}).Ha||null,this.kb=null}Pu.prototype.Ia=function(s){return this.Fb=N(s),this};function jC(s){if(typeof s!="string"||s.indexOf("saml.")!=0)throw new Z("argument-error",'SAML provider IDs must be prefixed with "saml."');Pu.call(this,s,[])}he(jC,Pu);function Pi(s){Pu.call(this,s,kp),this.a=[]}he(Pi,Pu),Pi.prototype.Aa=function(s){return De(this.a,s)||this.a.push(s),this},Pi.prototype.Nb=function(){return Kr(this.a)},Pi.prototype.credential=function(s,l){var p;if(D(s)?p={idToken:s.idToken||null,accessToken:s.accessToken||null,nonce:s.rawNonce||null}:p={idToken:s||null,accessToken:l||null},!p.idToken&&!p.accessToken)throw new Z("argument-error","credential failed: must provide the ID token and/or the access token.");return new Rs(this.providerId,p,this.providerId)};function Ru(){Pi.call(this,"facebook.com")}he(Ru,Pi),Xe(Ru,"PROVIDER_ID","facebook.com"),Xe(Ru,"FACEBOOK_SIGN_IN_METHOD","facebook.com");function UC(s){if(!s)throw new Z("argument-error","credential failed: expected 1 argument (the OAuth access token).");var l=s;return D(s)&&(l=s.accessToken),new Ru().credential({accessToken:l})}function Ou(){Pi.call(this,"github.com")}he(Ou,Pi),Xe(Ou,"PROVIDER_ID","github.com"),Xe(Ou,"GITHUB_SIGN_IN_METHOD","github.com");function VC(s){if(!s)throw new Z("argument-error","credential failed: expected 1 argument (the OAuth access token).");var l=s;return D(s)&&(l=s.accessToken),new Ou().credential({accessToken:l})}function Du(){Pi.call(this,"google.com"),this.Aa("profile")}he(Du,Pi),Xe(Du,"PROVIDER_ID","google.com"),Xe(Du,"GOOGLE_SIGN_IN_METHOD","google.com");function BC(s,l){var p=s;return D(s)&&(p=s.idToken,l=s.accessToken),new Du().credential({idToken:p,accessToken:l})}function Gl(){Pu.call(this,"twitter.com",kC)}he(Gl,Pu),Xe(Gl,"PROVIDER_ID","twitter.com"),Xe(Gl,"TWITTER_SIGN_IN_METHOD","twitter.com");function zC(s,l){var p=s;if(D(p)||(p={oauthToken:s,oauthTokenSecret:l}),!p.oauthToken||!p.oauthTokenSecret)throw new Z("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new Rs("twitter.com",p,"twitter.com")}function Ia(s,l,p){this.a=s,this.f=l,Xe(this,"providerId","password"),Xe(this,"signInMethod",p===no.EMAIL_LINK_SIGN_IN_METHOD?no.EMAIL_LINK_SIGN_IN_METHOD:no.EMAIL_PASSWORD_SIGN_IN_METHOD)}Ia.prototype.ia=function(s){return this.signInMethod==no.EMAIL_LINK_SIGN_IN_METHOD?Mt(s,G4,{email:this.a,oobCode:this.f}):Mt(s,vx,{email:this.a,password:this.f})},Ia.prototype.b=function(s,l){return this.signInMethod==no.EMAIL_LINK_SIGN_IN_METHOD?Mt(s,$4,{idToken:l,email:this.a,oobCode:this.f}):Mt(s,gx,{idToken:l,email:this.a,password:this.f})},Ia.prototype.c=function(s,l){return Wl(this.ia(s),l)},Ia.prototype.v=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}};function u4(s){return s&&s.email&&s.password?new Ia(s.email,s.password,s.signInMethod):null}function no(){Qr(this,{providerId:"password",isOAuthProvider:!1})}function qC(s,l){if(l=C_(l),!l)throw new Z("argument-error","Invalid email link!");return new Ia(s,l.code,no.EMAIL_LINK_SIGN_IN_METHOD)}function C_(s){return s=FC(s),(s=EC(s))&&s.operation===Ip?s:null}Qr(no,{PROVIDER_ID:"password"}),Qr(no,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Qr(no,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"});function Ca(s){if(!(s.bb&&s.ab||s.Ja&&s.da))throw new Z("internal-error");this.a=s,Xe(this,"providerId","phone"),this.ea="phone",Xe(this,"signInMethod","phone")}Ca.prototype.ia=function(s){return s.cb(Mh(this))},Ca.prototype.b=function(s,l){var p=Mh(this);return p.idToken=l,Mt(s,fU,p)},Ca.prototype.c=function(s,l){var p=Mh(this);return p.operation="REAUTH",s=Mt(s,dU,p),Wl(s,l)},Ca.prototype.v=function(){var s={providerId:"phone"};return this.a.bb&&(s.verificationId=this.a.bb),this.a.ab&&(s.verificationCode=this.a.ab),this.a.Ja&&(s.temporaryProof=this.a.Ja),this.a.da&&(s.phoneNumber=this.a.da),s};function l4(s){if(s&&s.providerId==="phone"&&(s.verificationId&&s.verificationCode||s.temporaryProof&&s.phoneNumber)){var l={};return Rt(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(p){s[p]&&(l[p]=s[p])}),new Ca(l)}return null}function Mh(s){return s.a.Ja&&s.a.da?{temporaryProof:s.a.Ja,phoneNumber:s.a.da}:{sessionInfo:s.a.bb,code:s.a.ab}}function Os(s){try{this.a=s||ze.auth()}catch{throw new Z("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Qr(this,{providerId:"phone",isOAuthProvider:!1})}Os.prototype.cb=function(s,l){var p=this.a.b;return it(l.verify()).then(function(y){if(typeof y!="string")throw new Z("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(l.type){case"recaptcha":var x=D(s)?s.session:null,j=D(s)?s.phoneNumber:s,G;return x&&x.type==Lh?G=x.Fa().then(function(re){return M4(p,{idToken:re,phoneEnrollmentInfo:{phoneNumber:j,recaptchaToken:y}})}):x&&x.type==Rp?G=x.Fa().then(function(re){return F4(p,{mfaPendingCredential:re,mfaEnrollmentId:s.multiFactorHint&&s.multiFactorHint.uid||s.multiFactorUid,phoneSignInInfo:{recaptchaToken:y}})}):G=L4(p,{phoneNumber:j,recaptchaToken:y}),G.then(function(re){return typeof l.reset=="function"&&l.reset(),re},function(re){throw typeof l.reset=="function"&&l.reset(),re});default:throw new Z("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})};function WC(s,l){if(!s)throw new Z("missing-verification-id");if(!l)throw new Z("missing-verification-code");return new Ca({bb:s,ab:l})}Qr(Os,{PROVIDER_ID:"phone"}),Qr(Os,{PHONE_SIGN_IN_METHOD:"phone"});function x_(s){if(s.temporaryProof&&s.phoneNumber)return new Ca({Ja:s.temporaryProof,da:s.phoneNumber});var l=s&&s.providerId;if(!l||l==="password")return null;var p=s&&s.oauthAccessToken,y=s&&s.oauthTokenSecret,x=s&&s.nonce,j=s&&s.oauthIdToken,G=s&&s.pendingToken;try{switch(l){case"google.com":return BC(j,p);case"facebook.com":return UC(p);case"github.com":return VC(p);case"twitter.com":return zC(p,y);default:return p||y||j||G?G?l.indexOf("saml.")==0?new ku(l,G):new Rs(l,{pendingToken:G,idToken:s.oauthIdToken,accessToken:s.oauthAccessToken},l):new Pi(l).credential({idToken:j,accessToken:p,rawNonce:x}):null}}catch{return null}}function N_(s){if(!s.isOAuthProvider)throw new Z("invalid-oauth-provider")}function Co(s,l,p,y,x,j,G){if(this.c=s,this.b=l||null,this.g=p||null,this.f=y||null,this.i=j||null,this.h=G||null,this.a=x||null,this.g||this.a){if(this.g&&this.a)throw new Z("invalid-auth-event");if(this.g&&!this.f)throw new Z("invalid-auth-event")}else throw new Z("invalid-auth-event")}Co.prototype.getUid=function(){var s=[];return s.push(this.c),this.b&&s.push(this.b),this.f&&s.push(this.f),this.h&&s.push(this.h),s.join("-")},Co.prototype.S=function(){return this.h},Co.prototype.v=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.v()}};function GC(s){return s=s||{},s.type?new Co(s.type,s.eventId,s.urlResponse,s.sessionId,s.error&&Se(s.error),s.postBody,s.tenantId):null}function c4(){this.b=null,this.a=[]}var A_=null;function h4(s){var l=A_;l.a.push(s),l.b||(l.b=function(p){for(var y=0;y<l.a.length;y++)l.a[y](p)},s=gn("universalLinks.subscribe",f),typeof s=="function"&&s(null,l.b))}function k_(s){var l="unauthorized-domain",p=void 0,y=Ps(s);s=y.b,y=y.f,y=="chrome-extension"?p=nt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",s):y=="http"||y=="https"?p=nt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",s):l="operation-not-supported-in-this-environment",Z.call(this,l,p)}he(k_,Z);function Fh(s,l,p){Z.call(this,s,p),s=l||{},s.Gb&&Xe(this,"email",s.Gb),s.da&&Xe(this,"phoneNumber",s.da),s.credential&&Xe(this,"credential",s.credential),s.Wb&&Xe(this,"tenantId",s.Wb)}he(Fh,Z),Fh.prototype.v=function(){var s={code:this.code,message:this.message};this.email&&(s.email=this.email),this.phoneNumber&&(s.phoneNumber=this.phoneNumber),this.tenantId&&(s.tenantId=this.tenantId);var l=this.credential&&this.credential.v();return l&&O(s,l),s},Fh.prototype.toJSON=function(){return this.v()};function Op(s){if(s.code){var l=s.code||"";l.indexOf(Ue)==0&&(l=l.substring(Ue.length));var p={credential:x_(s),Wb:s.tenantId};if(s.email)p.Gb=s.email;else if(s.phoneNumber)p.da=s.phoneNumber;else if(!p.credential)return new Z(l,s.message||void 0);return new Fh(l,p,s.message)}return null}function jh(){}jh.prototype.c=null;function $C(s){return s.c||(s.c=s.b())}var P_;function Dp(){}he(Dp,jh),Dp.prototype.a=function(){var s=HC(this);return s?new ActiveXObject(s):new XMLHttpRequest},Dp.prototype.b=function(){var s={};return HC(this)&&(s[0]=!0,s[1]=!0),s};function HC(s){if(!s.f&&typeof XMLHttpRequest>"u"&&typeof ActiveXObject<"u"){for(var l=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],p=0;p<l.length;p++){var y=l[p];try{return new ActiveXObject(y),s.f=y}catch{}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return s.f}P_=new Dp;function Lp(){}he(Lp,jh),Lp.prototype.a=function(){var s=new XMLHttpRequest;if("withCredentials"in s)return s;if(typeof XDomainRequest<"u")return new KC;throw Error("Unsupported browser")},Lp.prototype.b=function(){return{}};function KC(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=oe(this.oc,this),this.a.onerror=oe(this.Pb,this),this.a.onprogress=oe(this.pc,this),this.a.ontimeout=oe(this.tc,this)}t=KC.prototype,t.open=function(s,l,p){if(p!=null&&!p)throw Error("Only async requests are supported.");this.a.open(s,l)},t.send=function(s){if(s)if(typeof s=="string")this.a.send(s);else throw Error("Only string data is supported");else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(s){return s.toLowerCase()=="content-type"?this.a.contentType:""},t.oc=function(){this.status=200,this.response=this.responseText=this.a.responseText,R_(this,4)},t.Pb=function(){this.status=500,this.response=this.responseText="",R_(this,4)},t.tc=function(){this.Pb()},t.pc=function(){this.status=200,R_(this,1)};function R_(s,l){s.readyState=l,s.onreadystatechange&&s.onreadystatechange()}t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType};function O_(s,l,p){this.reset(s,l,p,void 0,void 0)}O_.prototype.a=null,O_.prototype.reset=function(s,l,p,y,x){delete this.a};function D_(s){this.f=s,this.b=this.c=this.a=null}function Uh(s,l){this.name=s,this.value=l}Uh.prototype.toString=function(){return this.name};var YC=new Uh("SEVERE",1e3),L_=new Uh("WARNING",900),f4=new Uh("CONFIG",700),d4=new Uh("FINE",500);function QC(s){return s.c?s.c:s.a?QC(s.a):(Ne("Root logger has no level set."),null)}D_.prototype.log=function(s,l,p){if(s.value>=QC(this).value)for(M(l)&&(l=l()),s=new O_(s,String(l),this.f),p&&(s.a=p),p=this;p;)p=p.a};var M_={},Mp=null;function F_(s){Mp||(Mp=new D_(""),M_[""]=Mp,Mp.c=f4);var l;if(!(l=M_[s])){l=new D_(s);var p=s.lastIndexOf("."),y=s.substr(p+1);p=F_(s.substr(0,p)),p.b||(p.b={}),p.b[y]=l,l.a=p,M_[s]=l}return l}function ro(s,l){s&&s.log(d4,l,void 0)}function Fp(s){this.f=s}he(Fp,jh),Fp.prototype.a=function(){return new j_(this.f)},Fp.prototype.b=function(s){return function(){return s}}({});function j_(s){Yr.call(this),this.s=s,this.readyState=U_,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=F_("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}he(j_,Yr);var U_=0;t=j_.prototype,t.open=function(s,l){if(this.readyState!=U_)throw this.abort(),Error("Error reopening a connection");this.m=s,this.g=l,this.readyState=1,Bh(this)},t.send=function(s){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.a=!0;var l={headers:this.i,method:this.m,credentials:void 0,cache:void 0};s&&(l.body=s),this.s.fetch(new Request(this.g,l)).then(this.sc.bind(this),this.Sa.bind(this))},t.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&this.readyState!=4&&(this.a=!1,Vh(this,!1)),this.readyState=U_},t.sc=function(s){this.a&&(this.f=s,this.b||(this.b=s.headers,this.readyState=2,Bh(this)),this.a&&(this.readyState=3,Bh(this),this.a&&(this.responseType==="arraybuffer"?s.arrayBuffer().then(this.qc.bind(this),this.Sa.bind(this)):typeof f.ReadableStream<"u"&&"body"in s?(this.response=this.responseText="",this.c=s.body.getReader(),this.l=new TextDecoder,XC(this)):s.text().then(this.rc.bind(this),this.Sa.bind(this)))))};function XC(s){s.c.read().then(s.nc.bind(s)).catch(s.Sa.bind(s))}t.nc=function(s){if(this.a){var l=this.l.decode(s.value?s.value:new Uint8Array(0),{stream:!s.done});l&&(this.response=this.responseText+=l),s.done?Vh(this,!0):Bh(this),this.readyState==3&&XC(this)}},t.rc=function(s){this.a&&(this.response=this.responseText=s,Vh(this,!0))},t.qc=function(s){this.a&&(this.response=s,Vh(this,!0))},t.Sa=function(s){var l=this.h;l&&l.log(L_,"Failed to fetch url "+this.g,s instanceof Error?s:Error(s)),this.a&&Vh(this,!0)};function Vh(s,l){l&&s.f&&(s.status=s.f.status,s.statusText=s.f.statusText),s.readyState=4,s.f=null,s.c=null,s.l=null,Bh(s)}t.setRequestHeader=function(s,l){this.i.append(s,l)},t.getResponseHeader=function(s){return this.b?this.b.get(s.toLowerCase())||"":((s=this.h)&&s.log(L_,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var s=this.h;return s&&s.log(L_,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}s=[];for(var l=this.b.entries(),p=l.next();!p.done;)p=p.value,s.push(p[0]+": "+p[1]),p=l.next();return s.join(`\r
`)};function Bh(s){s.onreadystatechange&&s.onreadystatechange.call(s)}function zh(s){Yr.call(this),this.headers=new Fl,this.D=s||null,this.c=!1,this.B=this.a=null,this.h=this.P=this.l="",this.f=this.O=this.i=this.N=!1,this.g=0,this.s=null,this.m=JC,this.w=this.R=!1}he(zh,Yr);var JC="";zh.prototype.b=F_("goog.net.XhrIo");var p4=/^https?$/i,g4=["POST","PUT"];function v4(s,l,p,y,x){if(s.a)throw Error("[goog.net.XhrIo] Object is active with another request="+s.l+"; newUri="+l);p=p?p.toUpperCase():"GET",s.l=l,s.h="",s.P=p,s.N=!1,s.c=!0,s.a=s.D?s.D.a():P_.a(),s.B=s.D?$C(s.D):$C(P_),s.a.onreadystatechange=oe(s.Sb,s);try{ro(s.b,Ds(s,"Opening Xhr")),s.O=!0,s.a.open(p,String(l),!0),s.O=!1}catch(G){ro(s.b,Ds(s,"Error opening Xhr: "+G.message)),ZC(s,G);return}l=y||"";var j=new Fl(s.headers);x&&Sj(x,function(G,re){j.set(re,G)}),x=je(j.X()),y=f.FormData&&l instanceof f.FormData,!De(g4,p)||x||y||j.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),j.forEach(function(G,re){this.a.setRequestHeader(re,G)},s),s.m&&(s.a.responseType=s.m),"withCredentials"in s.a&&s.a.withCredentials!==s.R&&(s.a.withCredentials=s.R);try{nx(s),0<s.g&&(s.w=m4(s.a),ro(s.b,Ds(s,"Will abort after "+s.g+"ms if incomplete, xhr2 "+s.w)),s.w?(s.a.timeout=s.g,s.a.ontimeout=oe(s.Ka,s)):s.s=Yy(s.Ka,s.g,s)),ro(s.b,Ds(s,"Sending request")),s.i=!0,s.a.send(l),s.i=!1}catch(G){ro(s.b,Ds(s,"Send error: "+G.message)),ZC(s,G)}}function m4(s){return _t&&pi(9)&&typeof s.timeout=="number"&&s.ontimeout!==void 0}function y4(s){return s.toLowerCase()=="content-type"}t=zh.prototype,t.Ka=function(){typeof h<"u"&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",ro(this.b,Ds(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))};function ZC(s,l){s.c=!1,s.a&&(s.f=!0,s.a.abort(),s.f=!1),s.h=l,ex(s),jp(s)}function ex(s){s.N||(s.N=!0,s.dispatchEvent("complete"),s.dispatchEvent("error"))}t.abort=function(){this.a&&this.c&&(ro(this.b,Ds(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),jp(this))},t.Ba=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),jp(this,!0)),zh.Za.Ba.call(this)},t.Sb=function(){this.wa||(this.O||this.i||this.f?tx(this):this.Hc())},t.Hc=function(){tx(this)};function tx(s){if(s.c&&typeof h<"u"){if(s.B[1]&&qh(s)==4&&Up(s)==2)ro(s.b,Ds(s,"Local request error detected and ignored"));else if(s.i&&qh(s)==4)Yy(s.Sb,0,s);else if(s.dispatchEvent("readystatechange"),qh(s)==4){ro(s.b,Ds(s,"Request complete")),s.c=!1;try{var l=Up(s);e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var y;if(!(y=p)){var x;if(x=l===0){var j=String(s.l).match(HI)[1]||null;if(!j&&f.self&&f.self.location){var G=f.self.location.protocol;j=G.substr(0,G.length-1)}x=!p4.test(j?j.toLowerCase():"")}y=x}if(y)s.dispatchEvent("complete"),s.dispatchEvent("success");else{try{var re=2<qh(s)?s.a.statusText:""}catch(be){ro(s.b,"Can not get status: "+be.message),re=""}s.h=re+" ["+Up(s)+"]",ex(s)}}finally{jp(s)}}}}function jp(s,l){if(s.a){nx(s);var p=s.a,y=s.B[0]?b:null;s.a=null,s.B=null,l||s.dispatchEvent("ready");try{p.onreadystatechange=y}catch(x){(s=s.b)&&s.log(YC,"Problem encountered resetting onreadystatechange: "+x.message,void 0)}}}function nx(s){s.a&&s.w&&(s.a.ontimeout=null),s.s&&(f.clearTimeout(s.s),s.s=null)}function qh(s){return s.a?s.a.readyState:0}function Up(s){try{return 2<qh(s)?s.a.status:-1}catch{return-1}}function _4(s){try{return s.a?s.a.responseText:""}catch(l){return ro(s.b,"Can not get responseText: "+l.message),""}}t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case JC:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var s=this.b;return s&&s.log(YC,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(l){return ro(this.b,"Can not get response: "+l.message),null}};function Ds(s,l){return l+" ["+s.P+" "+s.l+" "+Up(s)+"]"}function Lu(s){var l=S4;this.g=[],this.w=l,this.s=s||null,this.f=this.a=!1,this.c=void 0,this.u=this.B=this.i=!1,this.h=0,this.b=null,this.l=0}Lu.prototype.cancel=function(s){if(this.a)this.c instanceof Lu&&this.c.cancel();else{if(this.b){var l=this.b;delete this.b,s?l.cancel(s):(l.l--,0>=l.l&&l.cancel())}this.w?this.w.call(this.s,this):this.u=!0,this.a||(s=new Gh,Vp(this),Wh(this,!1,s))}},Lu.prototype.m=function(s,l){this.i=!1,Wh(this,s,l)};function Wh(s,l,p){s.a=!0,s.c=p,s.f=!l,ix(s)}function Vp(s){if(s.a){if(!s.u)throw new Bp;s.u=!1}}function w4(s,l){V_(s,null,l,void 0)}function V_(s,l,p,y){s.g.push([l,p,y]),s.a&&ix(s)}Lu.prototype.then=function(s,l,p){var y,x,j=new Lt(function(G,re){y=G,x=re});return V_(this,y,function(G){G instanceof Gh?j.cancel():x(G)}),j.then(s,l,p)},Lu.prototype.$goog_Thenable=!0;function rx(s){return _e(s.g,function(l){return M(l[1])})}function ix(s){if(s.h&&s.a&&rx(s)){var l=s.h,p=zp[l];p&&(f.clearTimeout(p.a),delete zp[l]),s.h=0}s.b&&(s.b.l--,delete s.b),l=s.c;for(var y=p=!1;s.g.length&&!s.i;){var x=s.g.shift(),j=x[0],G=x[1];if(x=x[2],j=s.f?G:j)try{var re=j.call(x||s.s,l);re!==void 0&&(s.f=s.f&&(re==l||re instanceof Error),s.c=l=re),(Ce(l)||typeof f.Promise=="function"&&l instanceof f.Promise)&&(y=!0,s.i=!0)}catch(be){l=be,s.f=!0,rx(s)||(p=!0)}}s.c=l,y&&(re=oe(s.m,s,!0),y=oe(s.m,s,!1),l instanceof Lu?(V_(l,re,y),l.B=!0):l.then(re,y)),p&&(l=new ox(l),zp[l.a]=l,s.h=l.a)}function Bp(){Ut.call(this)}he(Bp,Ut),Bp.prototype.message="Deferred has already fired",Bp.prototype.name="AlreadyCalledError";function Gh(){Ut.call(this)}he(Gh,Ut),Gh.prototype.message="Deferred was canceled",Gh.prototype.name="CanceledError";function ox(s){this.a=f.setTimeout(oe(this.c,this),0),this.b=s}ox.prototype.c=function(){throw delete zp[this.a],this.b};var zp={};function B_(s){var l={},p=l.document||document,y=k(s).toString(),x=Ns(document,"SCRIPT"),j={Tb:x,Ka:void 0},G=new Lu(j),re=null,be=l.timeout!=null?l.timeout:5e3;return 0<be&&(re=window.setTimeout(function(){qp(x,!0);var xe=new z_(T4,"Timeout reached for loading script "+y);Vp(G),Wh(G,!1,xe)},be),j.Ka=re),x.onload=x.onreadystatechange=function(){x.readyState&&x.readyState!="loaded"&&x.readyState!="complete"||(qp(x,l.ud||!1,re),Vp(G),Wh(G,!0,null))},x.onerror=function(){qp(x,!0,re);var xe=new z_(b4,"Error while loading script "+y);Vp(G),Wh(G,!1,xe)},j=l.attributes||{},O(j,{type:"text/javascript",charset:"UTF-8"}),bo(x,j),lt(x,s),E4(p).appendChild(x),G}function E4(s){var l;return(l=(s||document).getElementsByTagName("HEAD"))&&l.length!=0?l[0]:s.documentElement}function S4(){if(this&&this.Tb){var s=this.Tb;s&&s.tagName=="SCRIPT"&&qp(s,!0,this.Ka)}}function qp(s,l,p){p!=null&&f.clearTimeout(p),s.onload=b,s.onerror=b,s.onreadystatechange=b,l&&window.setTimeout(function(){s&&s.parentNode&&s.parentNode.removeChild(s)},0)}var b4=0,T4=1;function z_(s,l){var p="Jsloader error (code #"+s+")";l&&(p+=": "+l),Ut.call(this,p),this.code=s}he(z_,Ut);function Wp(s){this.f=s}he(Wp,jh),Wp.prototype.a=function(){return new this.f},Wp.prototype.b=function(){return{}};function xo(s,l,p){if(this.c=s,s=l||{},this.u=s.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=s.secureTokenTimeout||I4,this.g=N(s.secureTokenHeaders||C4),this.h=s.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.l=s.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.i=s.firebaseTimeout||x4,this.a=N(s.firebaseHeaders||N4),p&&(this.a["X-Client-Version"]=p,this.g["X-Client-Version"]=p),p=ns()=="Node",p=f.XMLHttpRequest||p&&ze.INTERNAL.node&&ze.INTERNAL.node.XMLHttpRequest,!p&&!Io())throw new Z("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,Io()?this.f=new Fp(self):sC()?this.f=new Wp(p):this.f=new Lp,this.b=null}var q_,No="idToken",I4=new ba(3e4,6e4),C4={"Content-Type":"application/x-www-form-urlencoded"},x4=new ba(3e4,6e4),N4={"Content-Type":"application/json"};function sx(s,l){l?s.a["X-Firebase-Locale"]=l:delete s.a["X-Firebase-Locale"]}function ax(s,l){l?(s.a["X-Client-Version"]=l,s.g["X-Client-Version"]=l):(delete s.a["X-Client-Version"],delete s.g["X-Client-Version"])}xo.prototype.S=function(){return this.b};function ux(s,l,p,y,x,j,G){Rj()||Io()?s=oe(s.w,s):(q_||(q_=new Lt(function(re,be){k4(re,be)})),s=oe(s.s,s)),s(l,p,y,x,j,G)}xo.prototype.w=function(s,l,p,y,x,j){if(Io()&&(typeof f.fetch>"u"||typeof f.Headers>"u"||typeof f.Request>"u"))throw new Z("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var G=new zh(this.f);if(j){G.g=Math.max(0,j);var re=setTimeout(function(){G.dispatchEvent("timeout")},j)}WI(G,"complete",function(){re&&clearTimeout(re);var be=null;try{be=JSON.parse(_4(this))||null}catch{be=null}l&&l(be)}),Ky(G,"ready",function(){re&&clearTimeout(re),FI(this)}),Ky(G,"timeout",function(){re&&clearTimeout(re),FI(this),l&&l(null)}),v4(G,s,p,y,x)};var A4=new A(H,"https://apis.google.com/js/client.js?onload=%{onload}"),lx="__fcb"+Math.floor(1e6*Math.random()).toString();function k4(s,l){if(((window.gapi||{}).client||{}).request)s();else{f[lx]=function(){((window.gapi||{}).client||{}).request?s():l(Error("CORS_UNSUPPORTED"))};var p=L(A4,{onload:lx});w4(B_(p),function(){l(Error("CORS_UNSUPPORTED"))})}}xo.prototype.s=function(s,l,p,y,x){var j=this;q_.then(function(){window.gapi.client.setApiKey(j.c);var G=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:s,method:p,body:y,headers:x,authType:"none",callback:function(re){window.gapi.auth.setToken(G),l&&l(re)}})}).o(function(G){l&&l({error:{message:G&&G.message||"CORS_UNSUPPORTED"}})})};function P4(s,l){return new Lt(function(p,y){l.grant_type=="refresh_token"&&l.refresh_token||l.grant_type=="authorization_code"&&l.code?ux(s,s.u+"?key="+encodeURIComponent(s.c),function(x){x?x.error?y(X_(x)):x.access_token&&x.refresh_token?p(x):y(new Z("internal-error")):y(new Z("network-request-failed"))},"POST",QI(l).toString(),s.g,s.m.get()):y(new Z("internal-error"))})}function cx(s,l,p,y,x,j,G){var re=Ps(l+p);Mn(re,"key",s.c),G&&Mn(re,"cb",me().toString());var be=y=="GET";if(be)for(var xe in x)x.hasOwnProperty(xe)&&Mn(re,xe,x[xe]);return new Lt(function(gt,tn){ux(s,re.toString(),function(Ht){Ht?Ht.error?tn(X_(Ht,j||{})):gt(Ht):tn(new Z("network-request-failed"))},y,be?void 0:ZI(lC(x)),s.a,s.i.get())})}function Mu(s){if(s=s.email,typeof s!="string"||!Lj.test(s))throw new Z("invalid-email")}function hx(s){"email"in s&&Mu(s)}function R4(s,l){return Mt(s,z4,{identifier:l,continueUri:Tp()?Nh():"http://localhost"}).then(function(p){return p.signinMethods||[]})}function O4(s){return Mt(s,eU,{}).then(function(l){return l.authorizedDomains||[]})}function gi(s){if(!s[No])throw s.mfaPendingCredential?new Z("multi-factor-auth-required",null,N(s)):new Z("internal-error")}function W_(s){if(s.phoneNumber||s.temporaryProof){if(!s.phoneNumber||!s.temporaryProof)throw new Z("internal-error")}else{if(!s.sessionInfo)throw new Z("missing-verification-id");if(!s.code)throw new Z("missing-verification-code")}}xo.prototype.vb=function(){return Mt(this,iU,{})},xo.prototype.xb=function(s,l){return Mt(this,px,{idToken:s,email:l})},xo.prototype.yb=function(s,l){return Mt(this,gx,{idToken:s,password:l})};var D4={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};t=xo.prototype,t.zb=function(s,l){var p={idToken:s},y=[];return E(D4,function(x,j){var G=l[j];G===null?y.push(x):j in l&&(p[j]=G)}),y.length&&(p.deleteAttribute=y),Mt(this,px,p)},t.rb=function(s,l){return s={requestType:"PASSWORD_RESET",email:s},O(s,l),Mt(this,Z4,s)},t.sb=function(s,l){return s={requestType:"EMAIL_SIGNIN",email:s},O(s,l),Mt(this,Q4,s)},t.qb=function(s,l){return s={requestType:"VERIFY_EMAIL",idToken:s},O(s,l),Mt(this,X4,s)},t.Ab=function(s,l,p){return s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:s,newEmail:l},O(s,p),Mt(this,J4,s)};function L4(s,l){return Mt(s,rU,l)}t.cb=function(s){return Mt(this,hU,s)};function M4(s,l){return Mt(s,oU,l).then(function(p){return p.phoneSessionInfo.sessionInfo})}function fx(s){if(!s.phoneVerificationInfo)throw new Z("internal-error");if(!s.phoneVerificationInfo.sessionInfo)throw new Z("missing-verification-id");if(!s.phoneVerificationInfo.code)throw new Z("missing-verification-code")}function F4(s,l){return Mt(s,sU,l).then(function(p){return p.phoneResponseInfo.sessionInfo})}function j4(s,l,p){return Mt(s,W4,{idToken:l,deleteProvider:p})}function G_(s){if(!s.requestUri||!s.sessionId&&!s.postBody&&!s.pendingToken)throw new Z("internal-error")}function $_(s,l){return l.oauthIdToken&&l.providerId&&l.providerId.indexOf("oidc.")==0&&!l.pendingToken&&(s.sessionId?l.nonce=s.sessionId:s.postBody&&(s=new Cu(s.postBody),Zy(s,"nonce")&&(l.nonce=s.get("nonce")))),l}function dx(s){var l=null;if(s.needConfirmation?(s.code="account-exists-with-different-credential",l=Op(s)):s.errorMessage=="FEDERATED_USER_ID_ALREADY_LINKED"?(s.code="credential-already-in-use",l=Op(s)):s.errorMessage=="EMAIL_EXISTS"?(s.code="email-already-in-use",l=Op(s)):s.errorMessage&&(l=mx(s.errorMessage)),l)throw l;gi(s)}function H_(s,l){return l.returnIdpCredential=!0,Mt(s,aU,l)}function K_(s,l){return l.returnIdpCredential=!0,Mt(s,lU,l)}function Y_(s,l){return l.returnIdpCredential=!0,l.autoCreate=!1,Mt(s,uU,l)}function Q_(s){if(!s.oobCode)throw new Z("invalid-action-code")}t.jb=function(s,l){return Mt(this,nU,{oobCode:s,newPassword:l})},t.Pa=function(s){return Mt(this,V4,{oobCode:s})},t.fb=function(s){return Mt(this,U4,{oobCode:s})};var U4={endpoint:"setAccountInfo",A:Q_,Y:"email",C:!0},V4={endpoint:"resetPassword",A:Q_,G:function(s){var l=s.requestType;if(!l||!s.email&&l!="EMAIL_SIGNIN"&&l!="VERIFY_AND_CHANGE_EMAIL")throw new Z("internal-error")},C:!0},B4={endpoint:"signupNewUser",A:function(s){if(Mu(s),!s.password)throw new Z("weak-password")},G:gi,U:!0,C:!0},z4={endpoint:"createAuthUri",C:!0},q4={endpoint:"deleteAccount",M:["idToken"]},W4={endpoint:"setAccountInfo",M:["idToken","deleteProvider"],A:function(s){if(S(s.deleteProvider)!="array")throw new Z("internal-error")}},G4={endpoint:"emailLinkSignin",M:["email","oobCode"],A:Mu,G:gi,U:!0,C:!0},$4={endpoint:"emailLinkSignin",M:["idToken","email","oobCode"],A:Mu,G:gi,U:!0},H4={endpoint:"accounts/mfaEnrollment:finalize",M:["idToken","phoneVerificationInfo"],A:fx,G:gi,C:!0,La:!0},K4={endpoint:"accounts/mfaSignIn:finalize",M:["mfaPendingCredential","phoneVerificationInfo"],A:fx,G:gi,C:!0,La:!0},Y4={endpoint:"getAccountInfo"},Q4={endpoint:"getOobConfirmationCode",M:["requestType"],A:function(s){if(s.requestType!="EMAIL_SIGNIN")throw new Z("internal-error");Mu(s)},Y:"email",C:!0},X4={endpoint:"getOobConfirmationCode",M:["idToken","requestType"],A:function(s){if(s.requestType!="VERIFY_EMAIL")throw new Z("internal-error")},Y:"email",C:!0},J4={endpoint:"getOobConfirmationCode",M:["idToken","newEmail","requestType"],A:function(s){if(s.requestType!="VERIFY_AND_CHANGE_EMAIL")throw new Z("internal-error")},Y:"email",C:!0},Z4={endpoint:"getOobConfirmationCode",M:["requestType"],A:function(s){if(s.requestType!="PASSWORD_RESET")throw new Z("internal-error");Mu(s)},Y:"email",C:!0},eU={hb:!0,endpoint:"getProjectConfig",Rb:"GET"},tU={hb:!0,endpoint:"getRecaptchaParam",Rb:"GET",G:function(s){if(!s.recaptchaSiteKey)throw new Z("internal-error")}},nU={endpoint:"resetPassword",A:Q_,Y:"email",C:!0},rU={endpoint:"sendVerificationCode",M:["phoneNumber","recaptchaToken"],Y:"sessionInfo",C:!0},px={endpoint:"setAccountInfo",M:["idToken"],A:hx,U:!0},gx={endpoint:"setAccountInfo",M:["idToken"],A:function(s){if(hx(s),!s.password)throw new Z("weak-password")},G:gi,U:!0},iU={endpoint:"signupNewUser",G:gi,U:!0,C:!0},oU={endpoint:"accounts/mfaEnrollment:start",M:["idToken","phoneEnrollmentInfo"],A:function(s){if(!s.phoneEnrollmentInfo)throw new Z("internal-error");if(!s.phoneEnrollmentInfo.phoneNumber)throw new Z("missing-phone-number");if(!s.phoneEnrollmentInfo.recaptchaToken)throw new Z("missing-app-credential")},G:function(s){if(!s.phoneSessionInfo||!s.phoneSessionInfo.sessionInfo)throw new Z("internal-error")},C:!0,La:!0},sU={endpoint:"accounts/mfaSignIn:start",M:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(s){if(!s.phoneSignInInfo||!s.phoneSignInInfo.recaptchaToken)throw new Z("missing-app-credential")},G:function(s){if(!s.phoneResponseInfo||!s.phoneResponseInfo.sessionInfo)throw new Z("internal-error")},C:!0,La:!0},aU={endpoint:"verifyAssertion",A:G_,Wa:$_,G:dx,U:!0,C:!0},uU={endpoint:"verifyAssertion",A:G_,Wa:$_,G:function(s){if(s.errorMessage&&s.errorMessage=="USER_NOT_FOUND")throw new Z("user-not-found");if(s.errorMessage)throw mx(s.errorMessage);gi(s)},U:!0,C:!0},lU={endpoint:"verifyAssertion",A:function(s){if(G_(s),!s.idToken)throw new Z("internal-error")},Wa:$_,G:dx,U:!0},cU={endpoint:"verifyCustomToken",A:function(s){if(!s.token)throw new Z("invalid-custom-token")},G:gi,U:!0,C:!0},vx={endpoint:"verifyPassword",A:function(s){if(Mu(s),!s.password)throw new Z("wrong-password")},G:gi,U:!0,C:!0},hU={endpoint:"verifyPhoneNumber",A:W_,G:gi,C:!0},fU={endpoint:"verifyPhoneNumber",A:function(s){if(!s.idToken)throw new Z("internal-error");W_(s)},G:function(s){if(s.temporaryProof)throw s.code="credential-already-in-use",Op(s);gi(s)}},dU={Eb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:W_,G:gi,C:!0},pU={endpoint:"accounts/mfaEnrollment:withdraw",M:["idToken","mfaEnrollmentId"],G:function(s){if(!!s[No]^!!s.refreshToken)throw new Z("internal-error")},C:!0,La:!0};function Mt(s,l,p){if(!zj(p,l.M))return pn(new Z("internal-error"));var y=!!l.La,x=l.Rb||"POST",j;return it(p).then(l.A).then(function(){return l.U&&(p.returnSecureToken=!0),l.C&&s.b&&typeof p.tenantId>"u"&&(p.tenantId=s.b),y?cx(s,s.l,l.endpoint,x,p,l.Eb,l.hb||!1):cx(s,s.h,l.endpoint,x,p,l.Eb,l.hb||!1)}).then(function(G){return j=G,l.Wa?l.Wa(p,j):j}).then(l.G).then(function(){if(!l.Y)return j;if(!(l.Y in j))throw new Z("internal-error");return j[l.Y]})}function mx(s){return X_({error:{errors:[{message:s}],code:400,message:s}})}function X_(s,l){var p=(s.error&&s.error.errors&&s.error.errors[0]||{}).reason||"",y={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(p=y[p]?new Z(y[p]):null)return p;p=s.error&&s.error.message||"",y={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},O(y,l||{}),l=(l=p.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<l.length?l[1]:void 0;for(var x in y)if(p.indexOf(x)===0)return new Z(y[x],l);return!l&&s&&(l=kh(s)),new Z("internal-error",l)}function gU(s){this.b=s,this.a=null,this.nb=vU(this)}function vU(s){return SU().then(function(){return new Lt(function(l,p){gn("gapi.iframes.getContext")().open({where:document.body,url:s.b,messageHandlersFilter:gn("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(y){function x(){clearTimeout(j),l()}s.a=y,s.a.restyle({setHideOnLeave:!1});var j=setTimeout(function(){p(Error("Network Error"))},EU.get());y.ping(x).then(x,function(){p(Error("Network Error"))})})})})}function mU(s,l){return s.nb.then(function(){return new Lt(function(p){s.a.send(l.type,l,p,gn("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}function yU(s,l){s.nb.then(function(){s.a.register("authEvent",l,gn("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}var _U=new A(H,"https://apis.google.com/js/api.js?onload=%{onload}"),wU=new ba(3e4,6e4),EU=new ba(5e3,15e3),Gp=null;function SU(){return Gp||(Gp=new Lt(function(s,l){function p(){hC(),gn("gapi.load")("gapi.iframes",{callback:s,ontimeout:function(){hC(),l(Error("Network Error"))},timeout:wU.get()})}if(gn("gapi.iframes.Iframe"))s();else if(gn("gapi.load"))p();else{var y="__iframefcb"+Math.floor(1e6*Math.random()).toString();f[y]=function(){gn("gapi.load")?p():l(Error("Network Error"))},y=L(_U,{onload:y}),it(B_(y)).o(function(){l(Error("Network Error"))})}}).o(function(s){throw Gp=null,s}))}function yx(s,l,p){this.i=s,this.g=l,this.h=p,this.f=null,this.a=KI(this.i,"/__/auth/iframe"),Mn(this.a,"apiKey",this.g),Mn(this.a,"appName",this.h),this.b=null,this.c=[]}yx.prototype.toString=function(){return this.f?Mn(this.a,"v",this.f):ts(this.a.a,"v"),this.b?Mn(this.a,"eid",this.b):ts(this.a.a,"eid"),this.c.length?Mn(this.a,"fw",this.c.join(",")):ts(this.a.a,"fw"),this.a.toString()};function J_(s,l,p,y,x){this.s=s,this.m=l,this.c=p,this.u=y,this.i=this.g=this.l=null,this.a=x,this.h=this.f=null}J_.prototype.ub=function(s){return this.h=s,this},J_.prototype.toString=function(){var s=KI(this.s,"/__/auth/handler");if(Mn(s,"apiKey",this.m),Mn(s,"appName",this.c),Mn(s,"authType",this.u),this.a.isOAuthProvider){var l=this.a;try{var p=ze.app(this.c).auth().ja()}catch{p=null}l.kb=p,Mn(s,"providerId",this.a.providerId),l=this.a,p=lC(l.Fb);for(var y in p)p[y]=p[y].toString();y=l.Oc,p=N(p);for(var x=0;x<y.length;x++){var j=y[x];j in p&&delete p[j]}l.lb&&l.kb&&!p[l.lb]&&(p[l.lb]=l.kb),C(p)||Mn(s,"customParameters",kh(p))}if(typeof this.a.Nb=="function"&&(l=this.a.Nb(),l.length&&Mn(s,"scopes",l.join(","))),this.l?Mn(s,"redirectUrl",this.l):ts(s.a,"redirectUrl"),this.g?Mn(s,"eventId",this.g):ts(s.a,"eventId"),this.i?Mn(s,"v",this.i):ts(s.a,"v"),this.b)for(var G in this.b)this.b.hasOwnProperty(G)&&!to(s,G)&&Mn(s,G,this.b[G]);return this.h?Mn(s,"tid",this.h):ts(s.a,"tid"),this.f?Mn(s,"eid",this.f):ts(s.a,"eid"),G=Z_(this.c),G.length&&Mn(s,"fw",G.join(",")),s.toString()};function Z_(s){try{return ze.app(s).auth().Ea()}catch{return[]}}function _x(s,l,p,y,x){this.u=s,this.f=l,this.b=p,this.c=y||null,this.h=x||null,this.m=this.s=this.w=null,this.g=[],this.l=this.a=null}function wx(s){var l=Nh();return O4(s).then(function(p){e:{var y=Ps(l),x=y.f;y=y.b;for(var j=0;j<p.length;j++){var G=p[j],re=y,be=x;if(G.indexOf("chrome-extension://")==0?re=Ps(G).b==re&&be=="chrome-extension":be!="http"&&be!="https"?re=!1:Dj.test(G)?re=re==G:(G=G.split(".").join("\\."),re=new RegExp("^(.+\\."+G+"|"+G+")$","i").test(re)),re){p=!0;break e}}p=!1}if(!p)throw new k_(Nh())})}function Ex(s){return s.l||(s.l=n_().then(function(){if(!s.s){var l=s.c,p=s.h,y=Z_(s.b),x=new yx(s.u,s.f,s.b);x.f=l,x.b=p,x.c=Kr(y||[]),s.s=x.toString()}s.i=new gU(s.s),bU(s)})),s.l}t=_x.prototype,t.Lb=function(s,l,p){var y=new Z("popup-closed-by-user"),x=new Z("web-storage-unsupported"),j=this,G=!1;return this.ka().then(function(){TU(j).then(function(re){re||(s&&xu(s),l(x),G=!0)})}).o(function(){}).then(function(){if(!G)return Oj(s)}).then(function(){if(!G)return Ml(p).then(function(){l(y)})})},t.Ub=function(){var s=Cr();return!Ah(s)&&!cC(s)},t.Qb=function(){return!1},t.Jb=function(s,l,p,y,x,j,G,re){if(!s)return pn(new Z("popup-blocked"));if(G&&!Ah())return this.ka().o(function(xe){xu(s),x(xe)}),y(),it();this.a||(this.a=wx(Sx(this)));var be=this;return this.a.then(function(){var xe=be.ka().o(function(gt){throw xu(s),x(gt),gt});return y(),xe}).then(function(){if(N_(p),!G){var xe=$h(be.u,be.f,be.b,l,p,null,j,be.c,void 0,be.h,re);nC(xe,s)}}).o(function(xe){throw xe.code=="auth/network-request-failed"&&(be.a=null),xe})};function Sx(s){return s.m||(s.w=s.c?Vl(s.c,Z_(s.b)):null,s.m=new xo(s.f,Ae(s.h),s.w)),s.m}t.Kb=function(s,l,p,y){this.a||(this.a=wx(Sx(this)));var x=this;return this.a.then(function(){N_(l);var j=$h(x.u,x.f,x.b,s,l,Nh(),p,x.c,void 0,x.h,y);nC(j)}).o(function(j){throw j.code=="auth/network-request-failed"&&(x.a=null),j})},t.ka=function(){var s=this;return Ex(this).then(function(){return s.i.nb}).o(function(){throw s.a=null,new Z("network-request-failed")})},t.Xb=function(){return!0};function $h(s,l,p,y,x,j,G,re,be,xe,gt){return s=new J_(s,l,p,y,x),s.l=j,s.g=G,s.i=re,s.b=N(be||null),s.f=xe,s.ub(gt).toString()}function bU(s){if(!s.i)throw Error("IfcHandler must be initialized!");yU(s.i,function(l){var p={};if(l&&l.authEvent){var y=!1;for(l=GC(l.authEvent),p=0;p<s.g.length;p++)y=s.g[p](l)||y;return p={},p.status=y?"ACK":"ERROR",it(p)}return p.status="ERROR",it(p)})}function TU(s){var l={type:"webStorageSupport"};return Ex(s).then(function(){return mU(s.i,l)}).then(function(p){if(p&&p.length&&typeof p[0].webStorageSupport<"u")return p[0].webStorageSupport;throw Error()})}t.Ca=function(s){this.g.push(s)},t.Qa=function(s){He(this.g,function(l){return l==s})};function bx(s){if(this.a=s||ze.INTERNAL.reactNative&&ze.INTERNAL.reactNative.AsyncStorage,!this.a)throw new Z("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}t=bx.prototype,t.get=function(s){return it(this.a.getItem(s)).then(function(l){return l&&zl(l)})},t.set=function(s,l){return it(this.a.setItem(s,kh(l)))},t.T=function(s){return it(this.a.removeItem(s))},t.ba=function(){},t.ha=function(){};function Tx(s){this.b=s,this.a={},this.f=oe(this.c,this)}var Ix=[];function IU(){var s=Io()?self:null;if(Rt(Ix,function(p){p.b==s&&(l=p)}),!l){var l=new Tx(s);Ix.push(l)}return l}Tx.prototype.c=function(s){var l=s.data.eventType,p=s.data.eventId,y=this.a[l];if(y&&0<y.length){s.ports[0].postMessage({status:"ack",eventId:p,eventType:l,response:null});var x=[];Rt(y,function(j){x.push(it().then(function(){return j(s.origin,s.data.data)}))}),NI(x).then(function(j){var G=[];Rt(j,function(re){G.push({fulfilled:re.Mb,value:re.value,reason:re.reason?re.reason.message:void 0})}),Rt(G,function(re){for(var be in re)typeof re[be]>"u"&&delete re[be]}),s.ports[0].postMessage({status:"done",eventId:p,eventType:l,response:G})})}};function Cx(s,l,p){C(s.a)&&s.b.addEventListener("message",s.f),typeof s.a[l]>"u"&&(s.a[l]=[]),s.a[l].push(p)}function xx(s){this.a=s}xx.prototype.postMessage=function(s,l){this.a.postMessage(s,l)};function Nx(s){this.c=s,this.b=!1,this.a=[]}function Ax(s,l,p,y){var x,j=p||{},G,re,be,xe=null;if(s.b)return pn(Error("connection_unavailable"));var gt=y?800:50,tn=typeof MessageChannel<"u"?new MessageChannel:null;return new Lt(function(Ht,gr){tn?(x=Math.floor(Math.random()*Math.pow(10,20)).toString(),tn.port1.start(),re=setTimeout(function(){gr(Error("unsupported_event"))},gt),G=function(Ls){Ls.data.eventId===x&&(Ls.data.status==="ack"?(clearTimeout(re),be=setTimeout(function(){gr(Error("timeout"))},3e3)):Ls.data.status==="done"?(clearTimeout(be),typeof Ls.data.response<"u"?Ht(Ls.data.response):gr(Error("unknown_error"))):(clearTimeout(re),clearTimeout(be),gr(Error("invalid_response"))))},xe={messageChannel:tn,onMessage:G},s.a.push(xe),tn.port1.addEventListener("message",G),s.c.postMessage({eventType:l,eventId:x,data:j},[tn.port2])):gr(Error("connection_unavailable"))}).then(function(Ht){return e0(s,xe),Ht}).o(function(Ht){throw e0(s,xe),Ht})}function e0(s,l){if(l){var p=l.messageChannel,y=l.onMessage;p&&(p.port1.removeEventListener("message",y),p.port1.close()),He(s.a,function(x){return x==l})}}Nx.prototype.close=function(){for(;0<this.a.length;)e0(this,this.a[0]);this.b=!0};function kx(){if(!Rx())throw new Z("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.u=f.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.s=!1,this.h=null;var s=this;Io()&&self?(this.l=IU(),Cx(this.l,"keyChanged",function(l,p){return Dx(s).then(function(y){return 0<y.length&&Rt(s.a,function(x){x(y)}),{keyProcessed:De(y,p.key)}})}),Cx(this.l,"ping",function(){return it(["keyChanged"])})):Vj().then(function(l){(s.h=l)&&(s.g=new Nx(new xx(l)),Ax(s.g,"ping",null,!0).then(function(p){p[0].fulfilled&&De(p[0].value,"keyChanged")&&(s.s=!0)}).o(function(){}))})}var t0;function CU(s){return new Lt(function(l,p){var y=s.u.deleteDatabase("firebaseLocalStorageDb");y.onsuccess=function(){l()},y.onerror=function(x){p(Error(x.target.error))}})}function Px(s){return new Lt(function(l,p){var y=s.u.open("firebaseLocalStorageDb",1);y.onerror=function(x){try{x.preventDefault()}catch{}p(Error(x.target.error))},y.onupgradeneeded=function(x){x=x.target.result;try{x.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(j){p(j)}},y.onsuccess=function(x){x=x.target.result,x.objectStoreNames.contains("firebaseLocalStorage")?l(x):CU(s).then(function(){return Px(s)}).then(function(j){l(j)}).o(function(j){p(j)})}})}function $p(s){return s.m||(s.m=Px(s)),s.m}function Rx(){try{return!!f.indexedDB}catch{return!1}}function Hh(s){return s.objectStore("firebaseLocalStorage")}function Kh(s,l){return s.transaction(["firebaseLocalStorage"],l?"readwrite":"readonly")}function $l(s){return new Lt(function(l,p){s.onsuccess=function(y){y&&y.target?l(y.target.result):l()},s.onerror=function(y){p(y.target.error)}})}t=kx.prototype,t.set=function(s,l){var p=!1,y,x=this;return $p(this).then(function(j){return y=j,j=Hh(Kh(y,!0)),$l(j.get(s))}).then(function(j){var G=Hh(Kh(y,!0));return j?(j.value=l,$l(G.put(j))):(x.b++,p=!0,j={},j.fbase_key=s,j.value=l,$l(G.add(j)))}).then(function(){return x.c[s]=l,Ox(x,s)}).ma(function(){p&&x.b--})};function Ox(s,l){return s.g&&s.h&&Uj()===s.h?Ax(s.g,"keyChanged",{key:l},s.s).then(function(){}).o(function(){}):it()}t.get=function(s){return $p(this).then(function(l){return $l(Hh(Kh(l,!1)).get(s))}).then(function(l){return l&&l.value})},t.T=function(s){var l=!1,p=this;return $p(this).then(function(y){return l=!0,p.b++,$l(Hh(Kh(y,!0)).delete(s))}).then(function(){return delete p.c[s],Ox(p,s)}).ma(function(){l&&p.b--})};function Dx(s){return $p(s).then(function(l){var p=Hh(Kh(l,!1));return p.getAll?$l(p.getAll()):new Lt(function(y,x){var j=[],G=p.openCursor();G.onsuccess=function(re){(re=re.target.result)?(j.push(re.value),re.continue()):y(j)},G.onerror=function(re){x(re.target.error)}})}).then(function(l){var p={},y=[];if(s.b==0){for(y=0;y<l.length;y++)p[l[y].fbase_key]=l[y].value;y=rC(s.c,p),s.c=p}return y})}t.ba=function(s){this.a.length==0&&xU(this),this.a.push(s)},t.ha=function(s){He(this.a,function(l){return l==s}),this.a.length==0&&Lx(this)};function xU(s){function l(){s.f=setTimeout(function(){s.i=Dx(s).then(function(p){0<p.length&&Rt(s.a,function(y){y(p)})}).then(function(){l()}).o(function(p){p.message!="STOP_EVENT"&&l()})},800)}Lx(s),l()}function Lx(s){s.i&&s.i.cancel("STOP_EVENT"),s.f&&(clearTimeout(s.f),s.f=null)}function Mx(s){var l=this,p=null;this.a=[],this.type="indexedDB",this.c=s,this.b=it().then(function(){if(Rx()){var y=Au(),x="__sak"+y;return t0||(t0=new kx),p=t0,p.set(x,y).then(function(){return p.get(x)}).then(function(j){if(j!==y)throw Error("indexedDB not supported!");return p.T(x)}).then(function(){return p}).o(function(){return l.c})}return l.c}).then(function(y){return l.type=y.type,y.ba(function(x){Rt(l.a,function(j){j(x)})}),y})}t=Mx.prototype,t.get=function(s){return this.b.then(function(l){return l.get(s)})},t.set=function(s,l){return this.b.then(function(p){return p.set(s,l)})},t.T=function(s){return this.b.then(function(l){return l.T(s)})},t.ba=function(s){this.a.push(s)},t.ha=function(s){He(this.a,function(l){return l==s})};function Yh(){this.a={},this.type="inMemory"}t=Yh.prototype,t.get=function(s){return it(this.a[s])},t.set=function(s,l){return this.a[s]=l,it()},t.T=function(s){return delete this.a[s],it()},t.ba=function(){},t.ha=function(){};function Hp(){if(!NU())throw ns()=="Node"?new Z("internal-error","The LocalStorage compatibility library was not found."):new Z("web-storage-unsupported");this.a=Fx()||ze.INTERNAL.node.localStorage,this.type="localStorage"}function Fx(){try{var s=f.localStorage,l=Au();return s&&(s.setItem(l,"1"),s.removeItem(l)),s}catch{return null}}function NU(){var s=ns()=="Node";if(s=Fx()||s&&ze.INTERNAL.node&&ze.INTERNAL.node.localStorage,!s)return!1;try{return s.setItem("__sak","1"),s.removeItem("__sak"),!0}catch{return!1}}t=Hp.prototype,t.get=function(s){var l=this;return it().then(function(){var p=l.a.getItem(s);return zl(p)})},t.set=function(s,l){var p=this;return it().then(function(){var y=kh(l);y===null?p.T(s):p.a.setItem(s,y)})},t.T=function(s){var l=this;return it().then(function(){l.a.removeItem(s)})},t.ba=function(s){f.window&&To(f.window,"storage",s)},t.ha=function(s){f.window&&eo(f.window,"storage",s)};function n0(){this.type="nullStorage"}t=n0.prototype,t.get=function(){return it(null)},t.set=function(){return it()},t.T=function(){return it()},t.ba=function(){},t.ha=function(){};function r0(){if(!AU())throw ns()=="Node"?new Z("internal-error","The SessionStorage compatibility library was not found."):new Z("web-storage-unsupported");this.a=jx()||ze.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function jx(){try{var s=f.sessionStorage,l=Au();return s&&(s.setItem(l,"1"),s.removeItem(l)),s}catch{return null}}function AU(){var s=ns()=="Node";if(s=jx()||s&&ze.INTERNAL.node&&ze.INTERNAL.node.sessionStorage,!s)return!1;try{return s.setItem("__sak","1"),s.removeItem("__sak"),!0}catch{return!1}}t=r0.prototype,t.get=function(s){var l=this;return it().then(function(){var p=l.a.getItem(s);return zl(p)})},t.set=function(s,l){var p=this;return it().then(function(){var y=kh(l);y===null?p.T(s):p.a.setItem(s,y)})},t.T=function(s){var l=this;return it().then(function(){l.a.removeItem(s)})},t.ba=function(){},t.ha=function(){};function kU(){var s={};s.Browser=PU,s.Node=RU,s.ReactNative=OU,s.Worker=DU,this.a=s[ns()]}var i0,PU={F:Hp,$a:r0},RU={F:Hp,$a:r0},OU={F:bx,$a:n0},DU={F:Hp,$a:n0},Hl={od:"local",NONE:"none",qd:"session"};function LU(s){var l=new Z("invalid-persistence-type"),p=new Z("unsupported-persistence-type");e:{for(y in Hl)if(Hl[y]==s){var y=!0;break e}y=!1}if(!y||typeof s!="string")throw l;switch(ns()){case"ReactNative":if(s==="session")throw p;break;case"Node":if(s!=="none")throw p;break;default:if(!s_()&&s!=="none")throw p}}function Ux(){var s=!!(!cC(Cr())&&i_()),l=Ah(),p=s_();this.m=s,this.h=l,this.l=p,this.a={},i0||(i0=new kU),s=i0;try{this.g=!t_()&&fC()||!f.indexedDB?new s.a.F:new Mx(Io()?new Yh:new s.a.F)}catch{this.g=new Yh,this.h=!0}try{this.i=new s.a.$a}catch{this.i=new Yh}this.u=new Yh,this.f=oe(this.Vb,this),this.b={}}var o0;function Qh(){return o0||(o0=new Ux),o0}function Fu(s,l){switch(l){case"session":return s.i;case"none":return s.u;default:return s.g}}function Kl(s,l){return"firebase:"+s.name+(l?":"+l:"")}function MU(s,l,p){var y=Kl(l,p),x=Fu(s,l.F);return s.get(l,p).then(function(j){var G=null;try{G=zl(f.localStorage.getItem(y))}catch{}if(G&&!j)return f.localStorage.removeItem(y),s.set(l,G,p);G&&j&&x.type!="localStorage"&&f.localStorage.removeItem(y)})}t=Ux.prototype,t.get=function(s,l){return Fu(this,s.F).get(Kl(s,l))};function Yl(s,l,p){return p=Kl(l,p),l.F=="local"&&(s.b[p]=null),Fu(s,l.F).T(p)}t.set=function(s,l,p){var y=Kl(s,p),x=this,j=Fu(this,s.F);return j.set(y,l).then(function(){return j.get(y)}).then(function(G){s.F=="local"&&(x.b[y]=G)})},t.addListener=function(s,l,p){s=Kl(s,l),this.l&&(this.b[s]=f.localStorage.getItem(s)),C(this.a)&&(Fu(this,"local").ba(this.f),this.h||(t_()||!fC())&&f.indexedDB||!this.l||FU(this)),this.a[s]||(this.a[s]=[]),this.a[s].push(p)},t.removeListener=function(s,l,p){s=Kl(s,l),this.a[s]&&(He(this.a[s],function(y){return y==p}),this.a[s].length==0&&delete this.a[s]),C(this.a)&&(Fu(this,"local").ha(this.f),s0(this))};function FU(s){s0(s),s.c=setInterval(function(){for(var l in s.a){var p=f.localStorage.getItem(l),y=s.b[l];p!=y&&(s.b[l]=p,p=new Tu({type:"storage",key:l,target:window,oldValue:y,newValue:p,a:!0}),s.Vb(p))}},1e3)}function s0(s){s.c&&(clearInterval(s.c),s.c=null)}t.Vb=function(s){if(s&&s.f){var l=s.a.key;if(l==null)for(var p in this.a){var y=this.b[p];typeof y>"u"&&(y=null);var x=f.localStorage.getItem(p);x!==y&&(this.b[p]=x,this.ib(p))}else if(l.indexOf("firebase:")==0&&this.a[l]){if(typeof s.a.a<"u"?Fu(this,"local").ha(this.f):s0(this),this.m){if(p=f.localStorage.getItem(l),y=s.a.newValue,y!==p)y!==null?f.localStorage.setItem(l,y):f.localStorage.removeItem(l);else if(this.b[l]===y&&typeof s.a.a>"u")return}var j=this;p=function(){(typeof s.a.a<"u"||j.b[l]!==f.localStorage.getItem(l))&&(j.b[l]=f.localStorage.getItem(l),j.ib(l))},_t&&rn&&rn==10&&f.localStorage.getItem(l)!==s.a.newValue&&s.a.newValue!==s.a.oldValue?setTimeout(p,10):p()}}else Rt(s,oe(this.ib,this))},t.ib=function(s){this.a[s]&&Rt(this.a[s],function(l){l()})};function jU(s){this.a=s,this.b=Qh()}var a0={name:"authEvent",F:"local"};function UU(s){return s.b.get(a0,s.a).then(function(l){return GC(l)})}function VU(){this.a=Qh()}function BU(){this.b=-1}function Kp(s,l){this.b=Vx,this.f=f.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=s,this.h=l,this.l=f.Int32Array?new Int32Array(64):Array(64),Yp===void 0&&(f.Int32Array?Yp=new Int32Array(qx):Yp=qx),this.reset()}var Yp;he(Kp,BU);for(var Vx=64,zU=Vx-1,Bx=[],u0=0;u0<zU;u0++)Bx[u0]=0;var zx=Vt(128,Bx);Kp.prototype.reset=function(){this.g=this.c=0,this.a=f.Int32Array?new Int32Array(this.h):Kr(this.h)};function l0(s){for(var l=s.f,p=s.l,y=0,x=0;x<l.length;)p[y++]=l[x]<<24|l[x+1]<<16|l[x+2]<<8|l[x+3],x=4*y;for(l=16;64>l;l++){x=p[l-15]|0,y=p[l-2]|0;var j=(p[l-16]|0)+((x>>>7|x<<25)^(x>>>18|x<<14)^x>>>3)|0,G=(p[l-7]|0)+((y>>>17|y<<15)^(y>>>19|y<<13)^y>>>10)|0;p[l]=j+G|0}y=s.a[0]|0,x=s.a[1]|0;var re=s.a[2]|0,be=s.a[3]|0,xe=s.a[4]|0,gt=s.a[5]|0,tn=s.a[6]|0;for(j=s.a[7]|0,l=0;64>l;l++){var Ht=((y>>>2|y<<30)^(y>>>13|y<<19)^(y>>>22|y<<10))+(y&x^y&re^x&re)|0;G=xe&gt^~xe&tn,j=j+((xe>>>6|xe<<26)^(xe>>>11|xe<<21)^(xe>>>25|xe<<7))|0,G=G+(Yp[l]|0)|0,G=j+(G+(p[l]|0)|0)|0,j=tn,tn=gt,gt=xe,xe=be+G|0,be=re,re=x,x=y,y=G+Ht|0}s.a[0]=s.a[0]+y|0,s.a[1]=s.a[1]+x|0,s.a[2]=s.a[2]+re|0,s.a[3]=s.a[3]+be|0,s.a[4]=s.a[4]+xe|0,s.a[5]=s.a[5]+gt|0,s.a[6]=s.a[6]+tn|0,s.a[7]=s.a[7]+j|0}function c0(s,l,p){p===void 0&&(p=l.length);var y=0,x=s.c;if(typeof l=="string")for(;y<p;)s.f[x++]=l.charCodeAt(y++),x==s.b&&(l0(s),x=0);else if(I(l))for(;y<p;){var j=l[y++];if(!(typeof j=="number"&&0<=j&&255>=j&&j==(j|0)))throw Error("message must be a byte array");s.f[x++]=j,x==s.b&&(l0(s),x=0)}else throw Error("message must be string or array");s.c=x,s.g+=p}var qx=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Wx(){Kp.call(this,8,qU)}he(Wx,Kp);var qU=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Gx(s,l,p,y,x){this.u=s,this.i=l,this.l=p,this.m=y||null,this.s=x||null,this.h=l+":"+p,this.w=new VU,this.g=new jU(this.h),this.f=null,this.b=[],this.a=this.c=null}function Qp(s){return new Z("invalid-cordova-configuration",s)}t=Gx.prototype,t.ka=function(){return this.Ga?this.Ga:this.Ga=Mj().then(function(){if(typeof gn("universalLinks.subscribe",f)!="function")throw Qp("cordova-universal-links-plugin-fix is not installed");if(typeof gn("BuildInfo.packageName",f)>"u")throw Qp("cordova-plugin-buildinfo is not installed");if(typeof gn("cordova.plugins.browsertab.openUrl",f)!="function")throw Qp("cordova-plugin-browsertab is not installed");if(typeof gn("cordova.InAppBrowser.open",f)!="function")throw Qp("cordova-plugin-inappbrowser is not installed")},function(){throw new Z("cordova-not-ready")})};function WU(){for(var s=20,l=[];0<s;)l.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),s--;return l.join("")}function GU(s){var l=new Wx;c0(l,s),s=[];var p=8*l.g;56>l.c?c0(l,zx,56-l.c):c0(l,zx,l.b-(l.c-56));for(var y=63;56<=y;y--)l.f[y]=p&255,p/=256;for(l0(l),y=p=0;y<l.i;y++)for(var x=24;0<=x;x-=8)s[p++]=l.a[y]>>x&255;return n4(s)}t.Lb=function(s,l){return l(new Z("operation-not-supported-in-this-environment")),it()},t.Jb=function(){return pn(new Z("operation-not-supported-in-this-environment"))},t.Xb=function(){return!1},t.Ub=function(){return!0},t.Qb=function(){return!0},t.Kb=function(s,l,p,y){if(this.c)return pn(new Z("redirect-operation-pending"));var x=this,j=f.document,G=null,re=null,be=null,xe=null;return this.c=it().then(function(){return N_(l),Hx(x)}).then(function(){return $U(x,s,l,p,y)}).then(function(){return new Lt(function(gt,tn){re=function(){var Ht=gn("cordova.plugins.browsertab.close",f);return gt(),typeof Ht=="function"&&Ht(),x.a&&typeof x.a.close=="function"&&(x.a.close(),x.a=null),!1},x.Ca(re),be=function(){G||(G=Ml(2e3).then(function(){tn(new Z("redirect-cancelled-by-user"))}))},xe=function(){a_()&&be()},j.addEventListener("resume",be,!1),Cr().toLowerCase().match(/android/)||j.addEventListener("visibilitychange",xe,!1)}).o(function(gt){return h0(x).then(function(){throw gt})})}).ma(function(){be&&j.removeEventListener("resume",be,!1),xe&&j.removeEventListener("visibilitychange",xe,!1),G&&G.cancel(),re&&x.Qa(re),x.c=null})};function $U(s,l,p,y,x){var j=WU(),G=new Co(l,y,null,j,new Z("no-auth-event"),null,x),re=gn("BuildInfo.packageName",f);if(typeof re!="string")throw new Z("invalid-cordova-configuration");var be=gn("BuildInfo.displayName",f),xe={};if(Cr().toLowerCase().match(/iphone|ipad|ipod/))xe.ibi=re;else if(Cr().toLowerCase().match(/android/))xe.apn=re;else return pn(new Z("operation-not-supported-in-this-environment"));be&&(xe.appDisplayName=be),j=GU(j),xe.sessionId=j;var gt=$h(s.u,s.i,s.l,l,p,null,y,s.m,xe,s.s,x);return s.ka().then(function(){var tn=s.h;return s.w.a.set(a0,G.v(),tn)}).then(function(){var tn=gn("cordova.plugins.browsertab.isAvailable",f);if(typeof tn!="function")throw new Z("invalid-cordova-configuration");var Ht=null;tn(function(gr){if(gr){if(Ht=gn("cordova.plugins.browsertab.openUrl",f),typeof Ht!="function")throw new Z("invalid-cordova-configuration");Ht(gt)}else{if(Ht=gn("cordova.InAppBrowser.open",f),typeof Ht!="function")throw new Z("invalid-cordova-configuration");gr=Cr(),s.a=Ht(gt,gr.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||gr.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}function $x(s,l){for(var p=0;p<s.b.length;p++)try{s.b[p](l)}catch{}}function Hx(s){return s.f||(s.f=s.ka().then(function(){return new Lt(function(l){function p(y){return l(y),s.Qa(p),!1}s.Ca(p),HU(s)})})),s.f}function h0(s){var l=null;return UU(s.g).then(function(p){return l=p,p=s.g,Yl(p.b,a0,p.a)}).then(function(){return l})}function HU(s){function l(G){y=!0,x&&x.cancel(),h0(s).then(function(re){var be=p;if(re&&G&&G.url){var xe=null;be=FC(G.url),be.indexOf("/__/auth/callback")!=-1&&(xe=Ps(be),xe=zl(to(xe,"firebaseError")||null),xe=(xe=typeof xe=="object"?Se(xe):null)?new Co(re.c,re.b,null,null,xe,null,re.S()):new Co(re.c,re.b,be,re.f,null,null,re.S())),be=xe||p}$x(s,be)})}var p=new Co("unknown",null,null,null,new Z("no-auth-event")),y=!1,x=Ml(500).then(function(){return h0(s).then(function(){y||$x(s,p)})}),j=f.handleOpenURL;f.handleOpenURL=function(G){if(G.toLowerCase().indexOf(gn("BuildInfo.packageName",f).toLowerCase()+"://")==0&&l({url:G}),typeof j=="function")try{j(G)}catch(re){console.error(re)}},A_||(A_=new c4),h4(l)}t.Ca=function(s){this.b.push(s),Hx(this).o(function(l){l.code==="auth/invalid-cordova-configuration"&&(l=new Co("unknown",null,null,null,new Z("no-auth-event")),s(l))})},t.Qa=function(s){He(this.b,function(l){return l==s})};function KU(s){this.a=s,this.b=Qh()}var f0={name:"pendingRedirect",F:"session"};function YU(s){return s.b.set(f0,"pending",s.a)}function d0(s){return Yl(s.b,f0,s.a)}function QU(s){return s.b.get(f0,s.a).then(function(l){return l=="pending"})}function Xp(s,l,p){this.i={},this.w=0,this.D=s,this.u=l,this.m=p,this.h=[],this.f=!1,this.l=oe(this.s,this),this.b=new Jp,this.B=new iN,this.g=new KU(this.u+":"+this.m),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.B,this.c.linkViaPopup=this.B,this.c.reauthViaPopup=this.B,this.a=Kx(this.D,this.u,this.m,tt)}function Kx(s,l,p,y){var x=ze.SDK_VERSION||null;return r_()?new Gx(s,l,p,x,y):new _x(s,l,p,x,y)}Xp.prototype.reset=function(){this.f=!1,this.a.Qa(this.l),this.a=Kx(this.D,this.u,this.m),this.i={}};function Yx(s){s.f||(s.f=!0,s.a.Ca(s.l));var l=s.a;return s.a.ka().o(function(p){throw s.a==l&&s.reset(),p})}function Qx(s){s.a.Ub()&&Yx(s).o(function(l){var p=new Co("unknown",null,null,null,new Z("operation-not-supported-in-this-environment"));g0(l)&&s.s(p)}),s.a.Qb()||nN(s.b)}function p0(s,l){De(s.h,l)||s.h.push(l),s.f||QU(s.g).then(function(p){p?d0(s.g).then(function(){Yx(s).o(function(y){var x=new Co("unknown",null,null,null,new Z("operation-not-supported-in-this-environment"));g0(y)&&s.s(x)})}):Qx(s)}).o(function(){Qx(s)})}function Xx(s,l){He(s.h,function(p){return p==l})}Xp.prototype.s=function(s){if(!s)throw new Z("invalid-auth-event");if(6e5<=me()-this.w&&(this.i={},this.w=0),s&&s.getUid()&&this.i.hasOwnProperty(s.getUid()))return!1;for(var l=!1,p=0;p<this.h.length;p++){var y=this.h[p];if(y.Cb(s.c,s.b)){(l=this.c[s.c])&&(l.h(s,y),s&&(s.f||s.b)&&(this.i[s.getUid()]=!0,this.w=me())),l=!0;break}}return nN(this.b),l};var XU=new ba(2e3,1e4),JU=new ba(3e4,6e4);Xp.prototype.pa=function(){return this.b.pa()};function Jx(s,l,p,y,x,j,G){return s.a.Jb(l,p,y,function(){s.f||(s.f=!0,s.a.Ca(s.l))},function(){s.reset()},x,j,G)}function g0(s){return!!(s&&s.code=="auth/cordova-not-ready")}function Zx(s,l,p,y,x){var j;return YU(s.g).then(function(){return s.a.Kb(l,p,y,x).o(function(G){if(g0(G))throw new Z("operation-not-supported-in-this-environment");return j=G,d0(s.g).then(function(){throw j})}).then(function(){return s.a.Xb()?new Lt(function(){}):d0(s.g).then(function(){return s.pa()}).then(function(){}).o(function(){})})})}function eN(s,l,p,y,x){return s.a.Lb(y,function(j){l.la(p,null,j,x)},XU.get())}var v0={};function tN(s,l,p){var y=l+":"+p;return v0[y]||(v0[y]=new Xp(s,l,p)),v0[y]}function Jp(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}Jp.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Jp.prototype.h=function(s,l){if(s){this.reset(),this.g=!0;var p=s.c,y=s.b,x=s.a&&s.a.code=="auth/web-storage-unsupported",j=s.a&&s.a.code=="auth/operation-not-supported-in-this-environment";this.i=!(!x&&!j),p!="unknown"||x||j?s.a?(ju(this,!0,null,s.a),it()):l.Da(p,y)?ZU(this,s,l):pn(new Z("invalid-auth-event")):(ju(this,!1,null,null),it())}else pn(new Z("invalid-auth-event"))};function nN(s){s.g||(s.g=!0,ju(s,!1,null,null))}function Zp(s){s.g&&!s.i&&ju(s,!1,null,null)}function ZU(s,l,p){p=p.Da(l.c,l.b);var y=l.g,x=l.f,j=l.i,G=l.S(),re=!!l.c.match(/Redirect$/);p(y,x,G,j).then(function(be){ju(s,re,be,null)}).o(function(be){ju(s,re,null,be)})}function e5(s,l){if(s.b=function(){return pn(l)},s.c.length)for(var p=0;p<s.c.length;p++)s.c[p](l)}function rN(s,l){if(s.b=function(){return it(l)},s.f.length)for(var p=0;p<s.f.length;p++)s.f[p](l)}function ju(s,l,p,y){l?y?e5(s,y):rN(s,p):rN(s,{user:null}),s.f=[],s.c=[]}Jp.prototype.pa=function(){var s=this;return new Lt(function(l,p){s.b?s.b().then(l,p):(s.f.push(l),s.c.push(p),t5(s))})};function t5(s){var l=new Z("timeout");s.a&&s.a.cancel(),s.a=Ml(JU.get()).then(function(){s.b||(s.g=!0,ju(s,!0,null,l))})}function iN(){}iN.prototype.h=function(s,l){if(s){var p=s.c,y=s.b;s.a?(l.la(s.c,null,s.a,s.b),it()):l.Da(p,y)?n5(s,l):pn(new Z("invalid-auth-event"))}else pn(new Z("invalid-auth-event"))};function n5(s,l){var p=s.b,y=s.c;l.Da(y,p)(s.g,s.f,s.S(),s.i).then(function(x){l.la(y,x,null,p)}).o(function(x){l.la(y,null,x,p)})}function oN(){this.Bb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.Bb},set:function(s){this.Bb=s},enumerable:!1})}function m0(s,l){this.a=l,Xe(this,"verificationId",s)}m0.prototype.confirm=function(s){return s=WC(this.verificationId,s),this.a(s)};function y0(s,l,p,y){return new Os(s).cb(l,p).then(function(x){return new m0(x,y)})}function r5(s){var l=AC(s);if(!(l&&l.exp&&l.auth_time&&l.iat))throw new Z("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Qr(this,{token:s,expirationTime:Ph(1e3*l.exp),authTime:Ph(1e3*l.auth_time),issuedAtTime:Ph(1e3*l.iat),signInProvider:l.firebase&&l.firebase.sign_in_provider?l.firebase.sign_in_provider:null,signInSecondFactor:l.firebase&&l.firebase.sign_in_second_factor?l.firebase.sign_in_second_factor:null,claims:l})}function _0(s,l,p){var y=l&&l[aN];if(!y)throw new Z("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=s,this.f=N(l),this.g=p,this.c=new Pp(null,y),this.b=[];var x=this;Rt(l[sN]||[],function(j){(j=d_(j))&&x.b.push(j)}),Xe(this,"auth",this.a),Xe(this,"session",this.c),Xe(this,"hints",this.b)}var sN="mfaInfo",aN="mfaPendingCredential";_0.prototype.Pc=function(s){var l=this;return s.ob(this.a.b,this.c).then(function(p){var y=N(l.f);return delete y[sN],delete y[aN],O(y,p),l.g(y)})};function w0(s,l,p,y){Z.call(this,"multi-factor-auth-required",y,l),this.b=new _0(s,l,p),Xe(this,"resolver",this.b)}he(w0,Z);function uN(s,l,p){if(s&&D(s.serverResponse)&&s.code==="auth/multi-factor-auth-required")try{return new w0(l,s.serverResponse,p,s.message)}catch{}return null}function lN(){}lN.prototype.ob=function(s,l,p){return l.type==Lh?i5(this,s,l,p):o5(this,s,l)};function i5(s,l,p,y){return p.Fa().then(function(x){return x={idToken:x},typeof y<"u"&&(x.displayName=y),O(x,{phoneVerificationInfo:Mh(s.a)}),Mt(l,H4,x)})}function o5(s,l,p){return p.Fa().then(function(y){return y={mfaPendingCredential:y},O(y,{phoneVerificationInfo:Mh(s.a)}),Mt(l,K4,y)})}function E0(s){Xe(this,"factorId",s.ea),this.a=s}he(E0,lN);function cN(s){if(E0.call(this,s),this.a.ea!=Os.PROVIDER_ID)throw new Z("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}he(cN,E0);function Ql(s,l){Zi.call(this,s);for(var p in l)this[p]=l[p]}he(Ql,Zi);function S0(s,l){this.a=s,this.b=[],this.c=oe(this.wc,this),To(this.a,"userReloaded",this.c);var p=[];l&&l.multiFactor&&l.multiFactor.enrolledFactors&&Rt(l.multiFactor.enrolledFactors,function(y){var x=null,j={};if(y){y.uid&&(j[g_]=y.uid),y.displayName&&(j[pC]=y.displayName),y.enrollmentTime&&(j[p_]=new Date(y.enrollmentTime).toISOString()),y.phoneNumber&&(j[v_]=y.phoneNumber);try{x=new Rh(j)}catch{}y=x}else y=null;y&&p.push(y)}),eg(this,p)}function s5(s){var l=[];return Rt(s.mfaInfo||[],function(p){(p=d_(p))&&l.push(p)}),l}t=S0.prototype,t.wc=function(s){eg(this,s5(s.ed))};function eg(s,l){s.b=l,Xe(s,"enrolledFactors",l)}t.Ob=function(){return this.a.I().then(function(s){return new Pp(s,null)})},t.dc=function(s,l){var p=this,y=this.a.a;return this.Ob().then(function(x){return s.ob(y,x,l)}).then(function(x){return is(p.a,x),p.a.reload()})},t.$c=function(s){var l=this,p=typeof s=="string"?s:s.uid,y=this.a.a;return this.a.I().then(function(x){return Mt(y,pU,{idToken:x,mfaEnrollmentId:p})}).then(function(x){var j=ce(l.b,function(G){return G.uid!=p});return eg(l,j),is(l.a,x),l.a.reload().o(function(G){if(G.code!="auth/user-token-expired")throw G})})},t.v=function(){return{multiFactor:{enrolledFactors:ve(this.b,function(s){return s.v()})}}};function b0(s,l,p){if(this.h=s,this.i=l,this.g=p,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}b0.prototype.start=function(){this.a=this.c,T0(this,!0)};function a5(s,l){return l?(s.a=s.c,s.g()):(l=s.a,s.a*=2,s.a>s.f&&(s.a=s.f),l)}function T0(s,l){s.stop(),s.b=Ml(a5(s,l)).then(function(){return jj()}).then(function(){return s.h()}).then(function(){T0(s,!0)}).o(function(p){s.i(p)&&T0(s,!1)})}b0.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)};function I0(s){this.c=s,this.b=this.a=null}I0.prototype.v=function(){return{apiKey:this.c.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:C0(this)}};function C0(s){return s.b&&1e3*s.b.c||0}function hN(s,l){var p=l.refreshToken;s.b=Ap(l[No]||""),s.a=p}function u5(s,l){s.b=l.b,s.a=l.a}function l5(s,l){return P4(s.c,l).then(function(p){return s.b=Ap(p.access_token),s.a=p.refresh_token,{accessToken:s.b.toString(),refreshToken:s.a}}).o(function(p){throw p.code=="auth/user-token-expired"&&(s.a=null),p})}I0.prototype.getToken=function(s){return s=!!s,this.b&&!this.a?pn(new Z("user-token-expired")):s||!this.b||me()>C0(this)-3e4?this.a?l5(this,{grant_type:"refresh_token",refresh_token:this.a}):it(null):it({accessToken:this.b.toString(),refreshToken:this.a})};function tg(s,l){this.a=s||null,this.b=l||null,Qr(this,{lastSignInTime:Ph(l||null),creationTime:Ph(s||null)})}function c5(s){return new tg(s.a,s.b)}tg.prototype.v=function(){return{lastLoginAt:this.b,createdAt:this.a}};function h5(s,l,p,y,x,j){Qr(this,{uid:s,displayName:y||null,photoURL:x||null,email:p||null,phoneNumber:j||null,providerId:l})}function Ri(s,l,p){this.N=[],this.l=s.apiKey,this.m=s.appName,this.s=s.authDomain||null,s=ze.SDK_VERSION?Vl(ze.SDK_VERSION):null,this.a=new xo(this.l,Ae(tt),s),this.b=new I0(this.a),P0(this,l[No]),hN(this.b,l),Xe(this,"refreshToken",this.b.a),dN(this,p||{}),Yr.call(this),this.P=!1,this.s&&Nu()&&(this.i=tN(this.s,this.l,this.m)),this.R=[],this.h=null,this.B=f5(this),this.Z=oe(this.Ma,this);var y=this;this.oa=null,this.za=function(x){y.va(x.g)},this.aa=null,this.W=[],this.ya=function(x){Xh(y,x.c)},this.$=null,this.O=new S0(this,p),Xe(this,"multiFactor",this.O)}he(Ri,Yr),Ri.prototype.va=function(s){this.oa=s,sx(this.a,s)},Ri.prototype.ja=function(){return this.oa};function x0(s,l){s.aa&&eo(s.aa,"languageCodeChanged",s.za),(s.aa=l)&&To(l,"languageCodeChanged",s.za)}function Xh(s,l){s.W=l,ax(s.a,ze.SDK_VERSION?Vl(ze.SDK_VERSION,s.W):null)}Ri.prototype.Ea=function(){return Kr(this.W)};function N0(s,l){s.$&&eo(s.$,"frameworkChanged",s.ya),(s.$=l)&&To(l,"frameworkChanged",s.ya)}Ri.prototype.Ma=function(){this.B.b&&(this.B.stop(),this.B.start())};function A0(s){try{return ze.app(s.m).auth()}catch{throw new Z("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+s.m+"'!")}}function f5(s){return new b0(function(){return s.I(!0)},function(l){return!!(l&&l.code=="auth/network-request-failed")},function(){var l=C0(s.b)-me()-3e5;return 0<l?l:0})}function fN(s){s.D||s.B.b||(s.B.start(),eo(s,"tokenChanged",s.Z),To(s,"tokenChanged",s.Z))}function k0(s){eo(s,"tokenChanged",s.Z),s.B.stop()}function P0(s,l){s.xa=l,Xe(s,"_lat",l)}function d5(s,l){He(s.R,function(p){return p==l})}function Uu(s){for(var l=[],p=0;p<s.R.length;p++)l.push(s.R[p](s));return NI(l).then(function(){return s})}function Jh(s){s.i&&!s.P&&(s.P=!0,p0(s.i,s))}function dN(s,l){Qr(s,{uid:l.uid,displayName:l.displayName||null,photoURL:l.photoURL||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,isAnonymous:l.isAnonymous||!1,tenantId:l.tenantId||null,metadata:new tg(l.createdAt,l.lastLoginAt),providerData:[]}),s.a.b=s.tenantId}Xe(Ri.prototype,"providerId","firebase");function pN(){}function R0(s){return it().then(function(){if(s.D)throw new Z("app-deleted")})}function O0(s){return ve(s.providerData,function(l){return l.providerId})}function D0(s,l){l&&(gN(s,l.providerId),s.providerData.push(l))}function gN(s,l){He(s.providerData,function(p){return p.providerId==l})}function xa(s,l,p){(l!="uid"||p)&&s.hasOwnProperty(l)&&Xe(s,l,p)}function ng(s,l){s!=l&&(Qr(s,{uid:l.uid,displayName:l.displayName,photoURL:l.photoURL,email:l.email,emailVerified:l.emailVerified,phoneNumber:l.phoneNumber,isAnonymous:l.isAnonymous,tenantId:l.tenantId,providerData:[]}),l.metadata?Xe(s,"metadata",c5(l.metadata)):Xe(s,"metadata",new tg),Rt(l.providerData,function(p){D0(s,p)}),u5(s.b,l.b),Xe(s,"refreshToken",s.b.a),eg(s.O,l.O.b))}t=Ri.prototype,t.reload=function(){var s=this;return ir(this,R0(this).then(function(){return L0(s).then(function(){return Uu(s)}).then(pN)}))};function L0(s){return s.I().then(function(l){var p=s.isAnonymous;return p5(s,l).then(function(){return p||xa(s,"isAnonymous",!1),l})})}t.mc=function(s){return this.I(s).then(function(l){return new r5(l)})},t.I=function(s){var l=this;return ir(this,R0(this).then(function(){return l.b.getToken(s)}).then(function(p){if(!p)throw new Z("internal-error");return p.accessToken!=l.xa&&(P0(l,p.accessToken),l.dispatchEvent(new Ql("tokenChanged"))),xa(l,"refreshToken",p.refreshToken),p.accessToken}))};function is(s,l){l[No]&&s.xa!=l[No]&&(hN(s.b,l),s.dispatchEvent(new Ql("tokenChanged")),P0(s,l[No]),xa(s,"refreshToken",s.b.a))}function p5(s,l){return Mt(s.a,Y4,{idToken:l}).then(oe(s.Ic,s))}t.Ic=function(s){if(s=s.users,!s||!s.length)throw new Z("internal-error");s=s[0],dN(this,{uid:s.localId,displayName:s.displayName,photoURL:s.photoUrl,email:s.email,emailVerified:!!s.emailVerified,phoneNumber:s.phoneNumber,lastLoginAt:s.lastLoginAt,createdAt:s.createdAt,tenantId:s.tenantId});for(var l=g5(s),p=0;p<l.length;p++)D0(this,l[p]);xa(this,"isAnonymous",!(this.email&&s.passwordHash)&&!(this.providerData&&this.providerData.length)),this.dispatchEvent(new Ql("userReloaded",{ed:s}))};function g5(s){return(s=s.providerUserInfo)&&s.length?ve(s,function(l){return new h5(l.rawId,l.providerId,l.email,l.displayName,l.photoUrl,l.phoneNumber)}):[]}t.Jc=function(s){return u_("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.pb(s)},t.pb=function(s){var l=this,p=null;return ir(this,s.c(this.a,this.uid).then(function(y){return is(l,y),p=Zh(l,y,"reauthenticate"),l.h=null,l.reload()}).then(function(){return p}),!0)};function rg(s,l){return L0(s).then(function(){if(De(O0(s),l))return Uu(s).then(function(){throw new Z("provider-already-linked")})})}t.Ac=function(s){return u_("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.mb(s)},t.mb=function(s){var l=this,p=null;return ir(this,rg(this,s.providerId).then(function(){return l.I()}).then(function(y){return s.b(l.a,y)}).then(function(y){return p=Zh(l,y,"link"),vN(l,y)}).then(function(){return p}))},t.Bc=function(s,l){var p=this;return ir(this,rg(this,"phone").then(function(){return y0(A0(p),s,l,oe(p.mb,p))}))},t.Kc=function(s,l){var p=this;return ir(this,it().then(function(){return y0(A0(p),s,l,oe(p.pb,p))}),!0)};function Zh(s,l,p){var y=x_(l);return l=PC(l),Ta({user:s,credential:y,additionalUserInfo:l,operationType:p})}function vN(s,l){return is(s,l),s.reload().then(function(){return s})}t.xb=function(s){var l=this;return ir(this,this.I().then(function(p){return l.a.xb(p,s)}).then(function(p){return is(l,p),l.reload()}))},t.cd=function(s){var l=this;return ir(this,this.I().then(function(p){return s.b(l.a,p)}).then(function(p){return is(l,p),l.reload()}))},t.yb=function(s){var l=this;return ir(this,this.I().then(function(p){return l.a.yb(p,s)}).then(function(p){return is(l,p),l.reload()}))},t.zb=function(s){if(s.displayName===void 0&&s.photoURL===void 0)return R0(this);var l=this;return ir(this,this.I().then(function(p){return l.a.zb(p,{displayName:s.displayName,photoUrl:s.photoURL})}).then(function(p){return is(l,p),xa(l,"displayName",p.displayName||null),xa(l,"photoURL",p.photoUrl||null),Rt(l.providerData,function(y){y.providerId==="password"&&(Xe(y,"displayName",l.displayName),Xe(y,"photoURL",l.photoURL))}),Uu(l)}).then(pN))},t.ad=function(s){var l=this;return ir(this,L0(this).then(function(p){return De(O0(l),s)?j4(l.a,p,[s]).then(function(y){var x={};return Rt(y.providerUserInfo||[],function(j){x[j.providerId]=!0}),Rt(O0(l),function(j){x[j]||gN(l,j)}),x[Os.PROVIDER_ID]||Xe(l,"phoneNumber",null),Uu(l)}):Uu(l).then(function(){throw new Z("no-such-provider")})}))},t.delete=function(){var s=this;return ir(this,this.I().then(function(l){return Mt(s.a,q4,{idToken:l})}).then(function(){s.dispatchEvent(new Ql("userDeleted"))})).then(function(){for(var l=0;l<s.N.length;l++)s.N[l].cancel("app-deleted");x0(s,null),N0(s,null),s.N=[],s.D=!0,k0(s),Xe(s,"refreshToken",null),s.i&&Xx(s.i,s)})},t.Cb=function(s,l){return!!(s=="linkViaPopup"&&(this.g||null)==l&&this.f||s=="reauthViaPopup"&&(this.g||null)==l&&this.f||s=="linkViaRedirect"&&(this.fa||null)==l||s=="reauthViaRedirect"&&(this.fa||null)==l)},t.la=function(s,l,p,y){s!="linkViaPopup"&&s!="reauthViaPopup"||y!=(this.g||null)||(p&&this.w?this.w(p):l&&!p&&this.f&&this.f(l),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.w)},t.Da=function(s,l){return s=="linkViaPopup"&&l==(this.g||null)?oe(this.Hb,this):s=="reauthViaPopup"&&l==(this.g||null)?oe(this.Ib,this):s=="linkViaRedirect"&&(this.fa||null)==l?oe(this.Hb,this):s=="reauthViaRedirect"&&(this.fa||null)==l?oe(this.Ib,this):null},t.Cc=function(s){var l=this;return mN(this,"linkViaPopup",s,function(){return rg(l,s.providerId).then(function(){return Uu(l)})},!1)},t.Lc=function(s){return mN(this,"reauthViaPopup",s,function(){return it()},!0)};function mN(s,l,p,y,x){if(!Nu())return pn(new Z("operation-not-supported-in-this-environment"));if(s.h&&!x)return pn(s.h);var j=E_(p.providerId),G=Au(s.uid+":::"),re=null;(!Ah()||i_())&&s.s&&p.isOAuthProvider&&(re=$h(s.s,s.l,s.m,l,p,null,G,ze.SDK_VERSION||null,null,null,s.tenantId));var be=oC(re,j&&j.ta,j&&j.sa);return y=y().then(function(){if(_N(s),!x)return s.I().then(function(){})}).then(function(){return Jx(s.i,be,l,p,G,!!re,s.tenantId)}).then(function(){return new Lt(function(xe,gt){s.la(l,null,new Z("cancelled-popup-request"),s.g||null),s.f=xe,s.w=gt,s.g=G,s.c=eN(s.i,s,l,be,G)})}).then(function(xe){return be&&xu(be),xe?Ta(xe):null}).o(function(xe){throw be&&xu(be),xe}),ir(s,y,x)}t.Dc=function(s){var l=this;return yN(this,"linkViaRedirect",s,function(){return rg(l,s.providerId)},!1)},t.Mc=function(s){return yN(this,"reauthViaRedirect",s,function(){return it()},!0)};function yN(s,l,p,y,x){if(!Nu())return pn(new Z("operation-not-supported-in-this-environment"));if(s.h&&!x)return pn(s.h);var j=null,G=Au(s.uid+":::");return y=y().then(function(){if(_N(s),!x)return s.I().then(function(){})}).then(function(){return s.fa=G,Uu(s)}).then(function(re){return s.ga&&(re=s.ga,re=re.b.set(M0,s.v(),re.a)),re}).then(function(){return Zx(s.i,l,p,G,s.tenantId)}).o(function(re){if(j=re,s.ga)return EN(s.ga);throw j}).then(function(){if(j)throw j}),ir(s,y,x)}function _N(s){if(!s.i||!s.P)throw s.i&&!s.P?new Z("internal-error"):new Z("auth-domain-config-required")}t.Hb=function(s,l,p,y){var x=this;this.c&&(this.c.cancel(),this.c=null);var j=null;return p=this.I().then(function(G){return K_(x.a,{requestUri:s,postBody:y,sessionId:l,idToken:G})}).then(function(G){return j=Zh(x,G,"link"),vN(x,G)}).then(function(){return j}),ir(this,p)},t.Ib=function(s,l,p,y){var x=this;this.c&&(this.c.cancel(),this.c=null);var j=null,G=it().then(function(){return Wl(Y_(x.a,{requestUri:s,sessionId:l,postBody:y,tenantId:p}),x.uid)}).then(function(re){return j=Zh(x,re,"reauthenticate"),is(x,re),x.h=null,x.reload()}).then(function(){return j});return ir(this,G,!0)},t.qb=function(s){var l=this,p=null;return ir(this,this.I().then(function(y){return p=y,typeof s>"u"||C(s)?{}:xp(new Cp(s))}).then(function(y){return l.a.qb(p,y)}).then(function(y){if(l.email!=y)return l.reload()}).then(function(){}))},t.Ab=function(s,l){var p=this,y=null;return ir(this,this.I().then(function(x){return y=x,typeof l>"u"||C(l)?{}:xp(new Cp(l))}).then(function(x){return p.a.Ab(y,s,x)}).then(function(x){if(p.email!=x)return p.reload()}).then(function(){}))};function ir(s,l,p){var y=v5(s,l,p);return s.N.push(y),y.ma(function(){Ve(s.N,y)}),y.o(function(x){var j=null;throw x&&x.code==="auth/multi-factor-auth-required"&&(j=uN(x.v(),A0(s),oe(s.hc,s))),j||x})}t.hc=function(s){var l=null,p=this;return s=Wl(it(s),p.uid).then(function(y){return l=Zh(p,y,"reauthenticate"),is(p,y),p.h=null,p.reload()}).then(function(){return l}),ir(this,s,!0)};function v5(s,l,p){return s.h&&!p?(l.cancel(),pn(s.h)):l.o(function(y){throw!y||y.code!="auth/user-disabled"&&y.code!="auth/user-token-expired"||(s.h||s.dispatchEvent(new Ql("userInvalidated")),s.h=y),y})}t.toJSON=function(){return this.v()},t.v=function(){var s={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.v(),redirectEventId:this.fa||null};return this.metadata&&O(s,this.metadata.v()),Rt(this.providerData,function(l){s.providerData.push(Bj(l))}),O(s,this.O.v()),s};function wN(s){if(!s.apiKey)return null;var l={apiKey:s.apiKey,authDomain:s.authDomain,appName:s.appName},p={};if(s.stsTokenManager&&s.stsTokenManager.accessToken)p[No]=s.stsTokenManager.accessToken,p.refreshToken=s.stsTokenManager.refreshToken||null;else return null;var y=new Ri(l,p,s);return s.providerData&&Rt(s.providerData,function(x){x&&D0(y,Ta(x))}),s.redirectEventId&&(y.fa=s.redirectEventId),y}function m5(s,l,p,y){var x=new Ri(s,l);return p&&(x.ga=p),y&&Xh(x,y),x.reload().then(function(){return x})}function y5(s,l,p,y){var x=s.b,j={};return j[No]=x.b&&x.b.toString(),j.refreshToken=x.a,l=new Ri(l||{apiKey:s.l,authDomain:s.s,appName:s.m},j),p&&(l.ga=p),y&&Xh(l,y),ng(l,s),l}function _5(s){this.a=s,this.b=Qh()}var M0={name:"redirectUser",F:"session"};function EN(s){return Yl(s.b,M0,s.a)}function w5(s,l){return s.b.get(M0,s.a).then(function(p){return p&&l&&(p.authDomain=l),wN(p||{})})}function F0(s){this.a=s,this.b=Qh(),this.c=null,this.f=E5(this),this.b.addListener(os("local"),this.a,oe(this.g,this))}F0.prototype.g=function(){var s=this,l=os("local");Xl(this,function(){return it().then(function(){return s.c&&s.c.F!="local"?s.b.get(l,s.a):null}).then(function(p){if(p)return j0(s,"local").then(function(){s.c=l})})})};function j0(s,l){var p=[],y;for(y in Hl)Hl[y]!==l&&p.push(Yl(s.b,os(Hl[y]),s.a));return p.push(Yl(s.b,U0,s.a)),cj(p)}function E5(s){var l=os("local"),p=os("session"),y=os("none");return MU(s.b,l,s.a).then(function(){return s.b.get(p,s.a)}).then(function(x){return x?p:s.b.get(y,s.a).then(function(j){return j?y:s.b.get(l,s.a).then(function(G){return G?l:s.b.get(U0,s.a).then(function(re){return re?os(re):l})})})}).then(function(x){return s.c=x,j0(s,x.F)}).o(function(){s.c||(s.c=l)})}var U0={name:"persistence",F:"session"};function os(s){return{name:"authUser",F:s}}F0.prototype.tb=function(s){var l=null,p=this;return LU(s),Xl(this,function(){return s!=p.c.F?p.b.get(p.c,p.a).then(function(y){return l=y,j0(p,s)}).then(function(){if(p.c=os(s),l)return p.b.set(p.c,l,p.a)}):it()})};function S5(s){return Xl(s,function(){return s.b.set(U0,s.c.F,s.a)})}function SN(s,l){return Xl(s,function(){return s.b.set(s.c,l.v(),s.a)})}function bN(s){return Xl(s,function(){return Yl(s.b,s.c,s.a)})}function TN(s,l){return Xl(s,function(){return s.b.get(s.c,s.a).then(function(p){return p&&l&&(p.authDomain=l),wN(p||{})})})}function Xl(s,l){return s.f=s.f.then(l,l),s.f}function Ao(s){if(this.l=!1,Xe(this,"settings",new oN),Xe(this,"app",s),Zt(this).options&&Zt(this).options.apiKey)s=ze.SDK_VERSION?Vl(ze.SDK_VERSION):null,this.b=new xo(Zt(this).options&&Zt(this).options.apiKey,Ae(tt),s);else throw new Z("invalid-api-key");this.P=[],this.m=[],this.O=[],this.$b=ze.INTERNAL.createSubscribe(oe(this.xc,this)),this.W=void 0,this.ac=ze.INTERNAL.createSubscribe(oe(this.yc,this)),Jl(this,null),this.i=new F0(Zt(this).options.apiKey+":"+Zt(this).name),this.B=new _5(Zt(this).options.apiKey+":"+Zt(this).name),this.Z=kn(this,x5(this)),this.h=kn(this,N5(this)),this.aa=!1,this.oa=oe(this.Xc,this),this.Ma=oe(this.ca,this),this.xa=oe(this.jc,this),this.ya=oe(this.uc,this),this.za=oe(this.vc,this),this.a=null,T5(this),this.INTERNAL={},this.INTERNAL.delete=oe(this.delete,this),this.INTERNAL.logFramework=oe(this.Ec,this),this.s=0,Yr.call(this),b5(this),this.N=[]}he(Ao,Yr);function IN(s){Zi.call(this,"languageCodeChanged"),this.g=s}he(IN,Zi);function CN(s){Zi.call(this,"frameworkChanged"),this.c=s}he(CN,Zi),t=Ao.prototype,t.tb=function(s){return s=this.i.tb(s),kn(this,s)},t.va=function(s){this.$===s||this.l||(this.$=s,sx(this.b,this.$),this.dispatchEvent(new IN(this.ja())))},t.ja=function(){return this.$},t.dd=function(){var s=f.navigator;this.va(s&&(s.languages&&s.languages[0]||s.language||s.userLanguage)||null)},t.Ec=function(s){this.N.push(s),ax(this.b,ze.SDK_VERSION?Vl(ze.SDK_VERSION,this.N):null),this.dispatchEvent(new CN(this.N))},t.Ea=function(){return Kr(this.N)},t.ub=function(s){this.R===s||this.l||(this.R=s,this.b.b=this.R)},t.S=function(){return this.R};function b5(s){Object.defineProperty(s,"lc",{get:function(){return this.ja()},set:function(l){this.va(l)},enumerable:!1}),s.$=null,Object.defineProperty(s,"ti",{get:function(){return this.S()},set:function(l){this.ub(l)},enumerable:!1}),s.R=null}t.toJSON=function(){return{apiKey:Zt(this).options.apiKey,authDomain:Zt(this).options.authDomain,appName:Zt(this).name,currentUser:St(this)&&St(this).v()}};function V0(s){return s.Zb||pn(new Z("auth-domain-config-required"))}function T5(s){var l=Zt(s).options.authDomain,p=Zt(s).options.apiKey;l&&Nu()&&(s.Zb=s.Z.then(function(){if(!s.l){if(s.a=tN(l,p,Zt(s).name),p0(s.a,s),St(s)&&Jh(St(s)),s.D){Jh(s.D);var y=s.D;y.va(s.ja()),x0(y,s),y=s.D,Xh(y,s.N),N0(y,s),s.D=null}return s.a}}))}t.Cb=function(s,l){switch(s){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==l&&!!this.f;default:return!1}},t.la=function(s,l,p,y){s=="signInViaPopup"&&this.g==y&&(p&&this.w?this.w(p):l&&!p&&this.f&&this.f(l),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.w)},t.Da=function(s,l){return s=="signInViaRedirect"||s=="signInViaPopup"&&this.g==l&&this.f?oe(this.gc,this):null},t.gc=function(s,l,p,y){var x=this,j={requestUri:s,postBody:y,sessionId:l,tenantId:p};return this.c&&(this.c.cancel(),this.c=null),x.Z.then(function(){return Vu(x,H_(x.b,j))})},t.Vc=function(s){if(!Nu())return pn(new Z("operation-not-supported-in-this-environment"));var l=this,p=E_(s.providerId),y=Au(),x=null;(!Ah()||i_())&&Zt(this).options.authDomain&&s.isOAuthProvider&&(x=$h(Zt(this).options.authDomain,Zt(this).options.apiKey,Zt(this).name,"signInViaPopup",s,null,y,ze.SDK_VERSION||null,null,null,this.S()));var j=oC(x,p&&p.ta,p&&p.sa);return p=V0(this).then(function(G){return Jx(G,j,"signInViaPopup",s,y,!!x,l.S())}).then(function(){return new Lt(function(G,re){l.la("signInViaPopup",null,new Z("cancelled-popup-request"),l.g),l.f=G,l.w=re,l.g=y,l.c=eN(l.a,l,"signInViaPopup",j,y)})}).then(function(G){return j&&xu(j),G?Ta(G):null}).o(function(G){throw j&&xu(j),G}),kn(this,p)},t.Wc=function(s){if(!Nu())return pn(new Z("operation-not-supported-in-this-environment"));var l=this,p=V0(this).then(function(){return S5(l.i)}).then(function(){return Zx(l.a,"signInViaRedirect",s,void 0,l.S())});return kn(this,p)};function xN(s){if(!Nu())return pn(new Z("operation-not-supported-in-this-environment"));var l=V0(s).then(function(){return s.a.pa()}).then(function(p){return p?Ta(p):null});return kn(s,l)}t.pa=function(){var s=this;return xN(this).then(function(l){return s.a&&Zp(s.a.b),l}).o(function(l){throw s.a&&Zp(s.a.b),l})},t.bd=function(s){if(!s)return pn(new Z("null-user"));if(this.R!=s.tenantId)return pn(new Z("tenant-id-mismatch"));var l=this,p={};p.apiKey=Zt(this).options.apiKey,p.authDomain=Zt(this).options.authDomain,p.appName=Zt(this).name;var y=y5(s,p,l.B,l.Ea());return kn(this,this.h.then(function(){if(Zt(l).options.apiKey!=s.l)return y.reload()}).then(function(){return St(l)&&s.uid==St(l).uid?(ng(St(l),s),l.ca(s)):(Jl(l,y),Jh(y),l.ca(y))}).then(function(){ef(l)}))};function I5(s,l){var p={};return p.apiKey=Zt(s).options.apiKey,p.authDomain=Zt(s).options.authDomain,p.appName=Zt(s).name,s.Z.then(function(){return m5(p,l,s.B,s.Ea())}).then(function(y){return St(s)&&y.uid==St(s).uid?(ng(St(s),y),s.ca(y)):(Jl(s,y),Jh(y),s.ca(y))}).then(function(){ef(s)})}function Jl(s,l){St(s)&&(d5(St(s),s.Ma),eo(St(s),"tokenChanged",s.xa),eo(St(s),"userDeleted",s.ya),eo(St(s),"userInvalidated",s.za),k0(St(s))),l&&(l.R.push(s.Ma),To(l,"tokenChanged",s.xa),To(l,"userDeleted",s.ya),To(l,"userInvalidated",s.za),0<s.s&&fN(l)),Xe(s,"currentUser",l),l&&(l.va(s.ja()),x0(l,s),Xh(l,s.N),N0(l,s))}t.wb=function(){var s=this,l=this.h.then(function(){return s.a&&Zp(s.a.b),St(s)?(Jl(s,null),bN(s.i).then(function(){ef(s)})):it()});return kn(this,l)};function C5(s){var l=w5(s.B,Zt(s).options.authDomain).then(function(p){return(s.D=p)&&(p.ga=s.B),EN(s.B)});return kn(s,l)}function x5(s){var l=Zt(s).options.authDomain,p=C5(s).then(function(){return TN(s.i,l)}).then(function(y){return y?(y.ga=s.B,s.D&&(s.D.fa||null)==(y.fa||null)?y:y.reload().then(function(){return SN(s.i,y).then(function(){return y})}).o(function(x){return x.code=="auth/network-request-failed"?y:bN(s.i)})):null}).then(function(y){Jl(s,y||null)});return kn(s,p)}function N5(s){return s.Z.then(function(){return xN(s)}).o(function(){}).then(function(){if(!s.l)return s.oa()}).o(function(){}).then(function(){if(!s.l){s.aa=!0;var l=s.i;l.b.addListener(os("local"),l.a,s.oa)}})}t.Xc=function(){var s=this;return TN(this.i,Zt(this).options.authDomain).then(function(l){if(!s.l){var p;if(p=St(s)&&l){p=St(s).uid;var y=l.uid;p=p==null||p===""||y===void 0||y===null||y===""?!1:p==y}if(p)return ng(St(s),l),St(s).I();(St(s)||l)&&(Jl(s,l),l&&(Jh(l),l.ga=s.B),s.a&&p0(s.a,s),ef(s))}})},t.ca=function(s){return SN(this.i,s)},t.jc=function(){ef(this),this.ca(St(this))},t.uc=function(){this.wb()},t.vc=function(){this.wb()};function Vu(s,l){var p=null,y=null;return kn(s,l.then(function(x){return p=x_(x),y=PC(x),I5(s,x)},function(x){var j=null;throw x&&x.code==="auth/multi-factor-auth-required"&&(j=uN(x.v(),s,oe(s.ic,s))),j||x}).then(function(){return Ta({user:St(s),credential:p,additionalUserInfo:y,operationType:"signIn"})}))}t.ic=function(s){var l=this;return this.h.then(function(){return Vu(l,it(s))})},t.xc=function(s){var l=this;this.addAuthTokenListener(function(){s.next(St(l))})},t.yc=function(s){var l=this;A5(this,function(){s.next(St(l))})},t.Gc=function(s,l,p){var y=this;return this.aa&&Promise.resolve().then(function(){M(s)?s(St(y)):M(s.next)&&s.next(St(y))}),this.$b(s,l,p)},t.Fc=function(s,l,p){var y=this;return this.aa&&Promise.resolve().then(function(){y.W=y.getUid(),M(s)?s(St(y)):M(s.next)&&s.next(St(y))}),this.ac(s,l,p)},t.kc=function(s){var l=this,p=this.h.then(function(){return St(l)?St(l).I(s).then(function(y){return{accessToken:y}}):null});return kn(this,p)},t.Rc=function(s){var l=this;return this.h.then(function(){return Vu(l,Mt(l.b,cU,{token:s}))}).then(function(p){var y=p.user;return xa(y,"isAnonymous",!1),l.ca(y),p})},t.Sc=function(s,l){var p=this;return this.h.then(function(){return Vu(p,Mt(p.b,vx,{email:s,password:l}))})},t.cc=function(s,l){var p=this;return this.h.then(function(){return Vu(p,Mt(p.b,B4,{email:s,password:l}))})},t.Ya=function(s){var l=this;return this.h.then(function(){return Vu(l,s.ia(l.b))})},t.Qc=function(s){return u_("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Ya(s)},t.vb=function(){var s=this;return this.h.then(function(){var l=St(s);if(l&&l.isAnonymous){var p=Ta({providerId:null,isNewUser:!1});return Ta({user:l,credential:null,additionalUserInfo:p,operationType:"signIn"})}return Vu(s,s.b.vb()).then(function(y){var x=y.user;return xa(x,"isAnonymous",!0),s.ca(x),y})})};function Zt(s){return s.app}function St(s){return s.currentUser}t.getUid=function(){return St(this)&&St(this).uid||null};function ig(s){return St(s)&&St(s)._lat||null}function ef(s){if(s.aa){for(var l=0;l<s.m.length;l++)s.m[l]&&s.m[l](ig(s));if(s.W!==s.getUid()&&s.O.length)for(s.W=s.getUid(),l=0;l<s.O.length;l++)s.O[l]&&s.O[l](ig(s))}}t.bc=function(s){this.addAuthTokenListener(s),this.s++,0<this.s&&St(this)&&fN(St(this))},t.Nc=function(s){var l=this;Rt(this.m,function(p){p==s&&l.s--}),0>this.s&&(this.s=0),this.s==0&&St(this)&&k0(St(this)),this.removeAuthTokenListener(s)},t.addAuthTokenListener=function(s){var l=this;this.m.push(s),kn(this,this.h.then(function(){l.l||De(l.m,s)&&s(ig(l))}))},t.removeAuthTokenListener=function(s){He(this.m,function(l){return l==s})};function A5(s,l){s.O.push(l),kn(s,s.h.then(function(){!s.l&&De(s.O,l)&&s.W!==s.getUid()&&(s.W=s.getUid(),l(ig(s)))}))}t.delete=function(){this.l=!0;for(var s=0;s<this.P.length;s++)this.P[s].cancel("app-deleted");return this.P=[],this.i&&(s=this.i,s.b.removeListener(os("local"),s.a,this.oa)),this.a&&(Xx(this.a,this),Zp(this.a.b)),Promise.resolve()};function kn(s,l){return s.P.push(l),l.ma(function(){Ve(s.P,l)}),l}t.fc=function(s){return kn(this,R4(this.b,s))},t.zc=function(s){return!!C_(s)},t.sb=function(s,l){var p=this;return kn(this,it().then(function(){var y=new Cp(l);if(!y.c)throw new Z("argument-error",__+" must be true when sending sign in link to email");return xp(y)}).then(function(y){return p.b.sb(s,y)}).then(function(){}))},t.fd=function(s){return this.Pa(s).then(function(l){return l.data.email})},t.jb=function(s,l){return kn(this,this.b.jb(s,l).then(function(){}))},t.Pa=function(s){return kn(this,this.b.Pa(s).then(function(l){return new qj(l)}))},t.fb=function(s){return kn(this,this.b.fb(s).then(function(){}))},t.rb=function(s,l){var p=this;return kn(this,it().then(function(){return typeof l>"u"||C(l)?{}:xp(new Cp(l))}).then(function(y){return p.b.rb(s,y)}).then(function(){}))},t.Uc=function(s,l){return kn(this,y0(this,s,l,oe(this.Ya,this)))},t.Tc=function(s,l){var p=this;return kn(this,it().then(function(){var y=l||Nh(),x=qC(s,y);if(y=C_(y),!y)throw new Z("argument-error","Invalid email link!");if(y.tenantId!==p.S())throw new Z("tenant-id-mismatch");return p.Ya(x)}))};function tf(){}tf.prototype.render=function(){},tf.prototype.reset=function(){},tf.prototype.getResponse=function(){},tf.prototype.execute=function(){};function Zl(){this.a={},this.b=1e12}var B0=null;Zl.prototype.render=function(s,l){return this.a[this.b.toString()]=new og(s,l),this.b++},Zl.prototype.reset=function(s){var l=z0(this,s);s=NN(s),l&&s&&(l.delete(),delete this.a[s])},Zl.prototype.getResponse=function(s){return(s=z0(this,s))?s.getResponse():null},Zl.prototype.execute=function(s){(s=z0(this,s))&&s.execute()};function z0(s,l){return(l=NN(l))&&s.a[l]||null}function NN(s){return(s=typeof s>"u"?1e12:s)?s.toString():null}function og(s,l){this.g=!1,this.c=l,this.a=this.b=null,this.h=this.c.size!=="invisible",this.f=So(s);var p=this;this.i=function(){p.execute()},this.h?this.execute():To(this.f,"click",this.i)}og.prototype.getResponse=function(){return q0(this),this.b},og.prototype.execute=function(){q0(this);var s=this;this.a||(this.a=setTimeout(function(){s.b=Fj();var l=s.c.callback,p=s.c["expired-callback"];if(l)try{l(s.b)}catch{}s.a=setTimeout(function(){if(s.a=null,s.b=null,p)try{p()}catch{}s.h&&s.execute()},6e4)},500))},og.prototype.delete=function(){q0(this),this.g=!0,clearTimeout(this.a),this.a=null,eo(this.f,"click",this.i)};function q0(s){if(s.g)throw Error("reCAPTCHA mock was already deleted!")}function W0(){}Xe(W0,"FACTOR_ID","phone");function G0(){}G0.prototype.g=function(){return B0||(B0=new Zl),it(B0)},G0.prototype.c=function(){};var $0=null;function H0(){this.b=f.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var k5=new A(H,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),P5=new ba(3e4,6e4);H0.prototype.g=function(s){var l=this;return new Lt(function(p,y){var x=setTimeout(function(){y(new Z("network-request-failed"))},P5.get());if(!f.grecaptcha||s!==l.f&&!l.b){f[l.a]=function(){if(f.grecaptcha){l.f=s;var G=f.grecaptcha.render;f.grecaptcha.render=function(re,be){return re=G(re,be),l.b++,re},clearTimeout(x),p(f.grecaptcha)}else clearTimeout(x),y(new Z("internal-error"));delete f[l.a]};var j=L(k5,{onload:l.a,hl:s||""});it(B_(j)).o(function(){clearTimeout(x),y(new Z("internal-error","Unable to load external reCAPTCHA dependencies!"))})}else clearTimeout(x),p(f.grecaptcha)})},H0.prototype.c=function(){this.b--};var K0=null;function Y0(s,l,p,y,x,j,G){if(Xe(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.u=l,this.g=null,G?($0||($0=new G0),G=$0):(K0||(K0=new H0),G=K0),this.m=G,this.a=p||{theme:"light",type:"image"},this.h=[],this.a[PN])throw new Z("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i=this.a[R5]==="invisible",!f.document)throw new Z("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!So(l)||!this.i&&So(l).hasChildNodes())throw new Z("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new xo(s,j||null,x||null),this.w=y||function(){return null};var re=this;this.l=[];var be=this.a[AN];this.a[AN]=function(gt){if(RN(re,gt),typeof be=="function")be(gt);else if(typeof be=="string"){var tn=gn(be,f);typeof tn=="function"&&tn(gt)}};var xe=this.a[kN];this.a[kN]=function(){if(RN(re,null),typeof xe=="function")xe();else if(typeof xe=="string"){var gt=gn(xe,f);typeof gt=="function"&&gt()}}}var AN="callback",kN="expired-callback",PN="sitekey",R5="size";function RN(s,l){for(var p=0;p<s.l.length;p++)try{s.l[p](l)}catch{}}function O5(s,l){He(s.l,function(p){return p==l})}function Q0(s,l){return s.h.push(l),l.ma(function(){Ve(s.h,l)}),l}t=Y0.prototype,t.Ga=function(){var s=this;return this.f?this.f:this.f=Q0(this,it().then(function(){if(Tp()&&!Io())return n_();throw new Z("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return s.m.g(s.w())}).then(function(l){return s.g=l,Mt(s.s,tU,{})}).then(function(l){s.a[PN]=l.recaptchaSiteKey}).o(function(l){throw s.f=null,l}))},t.render=function(){sg(this);var s=this;return Q0(this,this.Ga().then(function(){if(s.c===null){var l=s.u;if(!s.i){var p=So(l);l=ki("DIV"),p.appendChild(l)}s.c=s.g.render(l,s.a)}return s.c}))},t.verify=function(){sg(this);var s=this;return Q0(this,this.render().then(function(l){return new Lt(function(p){var y=s.g.getResponse(l);if(y)p(y);else{var x=function(j){j&&(O5(s,x),p(j))};s.l.push(x),s.i&&s.g.execute(s.c)}})}))},t.reset=function(){sg(this),this.c!==null&&this.g.reset(this.c)};function sg(s){if(s.D)throw new Z("internal-error","RecaptchaVerifier instance has been destroyed.")}t.clear=function(){sg(this),this.D=!0,this.m.c();for(var s=0;s<this.h.length;s++)this.h[s].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){s=So(this.u);for(var l;l=s.firstChild;)s.removeChild(l)}};function X0(s,l,p){var y=!1;try{this.b=p||ze.app()}catch{throw new Z("argument-error","No firebase.app.App instance is currently initialized.")}if(this.b.options&&this.b.options.apiKey)p=this.b.options.apiKey;else throw new Z("invalid-api-key");var x=this,j=null;try{j=this.b.auth().Ea()}catch{}try{y=this.b.auth().settings.appVerificationDisabledForTesting}catch{}j=ze.SDK_VERSION?Vl(ze.SDK_VERSION,j):null,Y0.call(this,p,s,l,function(){try{var G=x.b.auth().ja()}catch{G=null}return G},j,Ae(tt),y)}he(X0,Y0);function ON(s,l,p,y){e:{p=Array.prototype.slice.call(p);for(var x=0,j=!1,G=0;G<l.length;G++)if(l[G].optional)j=!0;else{if(j)throw new Z("internal-error","Argument validator encountered a required argument after an optional argument.");x++}if(j=l.length,p.length<x||j<p.length)y="Expected "+(x==j?x==1?"1 argument":x+" arguments":x+"-"+j+" arguments")+" but got "+p.length+".";else{for(x=0;x<p.length;x++)if(j=l[x].optional&&p[x]===void 0,!l[x].K(p[x])&&!j){if(l=l[x],0>x||x>=DN.length)throw new Z("internal-error","Argument validator received an unsupported number of arguments.");p=DN[x],y=(y?"":p+" argument ")+(l.name?'"'+l.name+'" ':"")+"must be "+l.J+".";break e}y=null}}if(y)throw new Z("argument-error",s+" failed: "+y)}var DN="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Je(s,l){return{name:s||"",J:"a valid string",optional:!!l,K:function(p){return typeof p=="string"}}}function J0(s,l){return{name:s||"",J:"a boolean",optional:!!l,K:function(p){return typeof p=="boolean"}}}function or(s,l){return{name:s||"",J:"a valid object",optional:!!l,K:D}}function ec(s,l){return{name:s||"",J:"a function",optional:!!l,K:M}}function ss(s,l){return{name:s||"",J:"null",optional:!!l,K:function(p){return p===null}}}function D5(){return{name:"",J:"an HTML element",optional:!1,K:function(s){return!!(s&&s instanceof Element)}}}function L5(){return{name:"auth",J:"an instance of Firebase Auth",optional:!0,K:function(s){return!!(s&&s instanceof Ao)}}}function M5(){return{name:"app",J:"an instance of Firebase App",optional:!0,K:function(s){return!!(s&&s instanceof ze.app.App)}}}function Na(s){return{name:s?s+"Credential":"credential",J:s?"a valid "+s+" credential":"a valid credential",optional:!1,K:function(l){if(!l)return!1;var p=!s||l.providerId===s;return!(!l.ia||!p)}}}function LN(){return{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(s){return s?!!s.ob:!1}}}function tc(){return{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(s){return!!(s&&s.providerId&&s.hasOwnProperty&&s.hasOwnProperty("isOAuthProvider"))}}}function Z0(s,l){return D(s)&&typeof s.type=="string"&&s.type===l&&M(s.Fa)}function MN(s){return D(s)&&typeof s.uid=="string"}function ag(){return{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(s){return!(!s||typeof s.type!="string"||!M(s.verify))}}}function Fn(s,l,p,y){return{name:p||"",J:s.J+" or "+l.J,optional:!!y,K:function(x){return s.K(x)||l.K(x)}}}function bn(s,l){for(var p in l){var y=l[p].name;s[y]=jN(y,s[p],l[p].j)}}function FN(s,l){for(var p in l){var y=l[p].name;y!==p&&Object.defineProperty(s,y,{get:fe(function(x){return this[x]},p),set:fe(function(x,j,G,re){ON(x,[G],[re],!0),this[j]=re},y,p,l[p].gb),enumerable:!0})}}function jn(s,l,p,y){s[l]=jN(l,p,y)}function jN(s,l,p){function y(){var G=Array.prototype.slice.call(arguments);return ON(x,p,G),l.apply(this,G)}if(!p)return l;var x=F5(s),j;for(j in l)y[j]=l[j];for(j in l.prototype)y.prototype[j]=l.prototype[j];return y}function F5(s){return s=s.split("."),s[s.length-1]}bn(Ao.prototype,{fb:{name:"applyActionCode",j:[Je("code")]},Pa:{name:"checkActionCode",j:[Je("code")]},jb:{name:"confirmPasswordReset",j:[Je("code"),Je("newPassword")]},cc:{name:"createUserWithEmailAndPassword",j:[Je("email"),Je("password")]},fc:{name:"fetchSignInMethodsForEmail",j:[Je("email")]},pa:{name:"getRedirectResult",j:[]},zc:{name:"isSignInWithEmailLink",j:[Je("emailLink")]},Fc:{name:"onAuthStateChanged",j:[Fn(or(),ec(),"nextOrObserver"),ec("opt_error",!0),ec("opt_completed",!0)]},Gc:{name:"onIdTokenChanged",j:[Fn(or(),ec(),"nextOrObserver"),ec("opt_error",!0),ec("opt_completed",!0)]},rb:{name:"sendPasswordResetEmail",j:[Je("email"),Fn(or("opt_actionCodeSettings",!0),ss(null,!0),"opt_actionCodeSettings",!0)]},sb:{name:"sendSignInLinkToEmail",j:[Je("email"),or("actionCodeSettings")]},tb:{name:"setPersistence",j:[Je("persistence")]},Qc:{name:"signInAndRetrieveDataWithCredential",j:[Na()]},vb:{name:"signInAnonymously",j:[]},Ya:{name:"signInWithCredential",j:[Na()]},Rc:{name:"signInWithCustomToken",j:[Je("token")]},Sc:{name:"signInWithEmailAndPassword",j:[Je("email"),Je("password")]},Tc:{name:"signInWithEmailLink",j:[Je("email"),Je("emailLink",!0)]},Uc:{name:"signInWithPhoneNumber",j:[Je("phoneNumber"),ag()]},Vc:{name:"signInWithPopup",j:[tc()]},Wc:{name:"signInWithRedirect",j:[tc()]},bd:{name:"updateCurrentUser",j:[Fn(function(s){return{name:"user",J:"an instance of Firebase User",optional:!!s,K:function(l){return!!(l&&l instanceof Ri)}}}(),ss(),"user")]},wb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Je(null,!0)]},dd:{name:"useDeviceLanguage",j:[]},fd:{name:"verifyPasswordResetCode",j:[Je("code")]}}),FN(Ao.prototype,{lc:{name:"languageCode",gb:Fn(Je(),ss(),"languageCode")},ti:{name:"tenantId",gb:Fn(Je(),ss(),"tenantId")}}),Ao.Persistence=Hl,Ao.Persistence.LOCAL="local",Ao.Persistence.SESSION="session",Ao.Persistence.NONE="none",bn(Ri.prototype,{delete:{name:"delete",j:[]},mc:{name:"getIdTokenResult",j:[J0("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[J0("opt_forceRefresh",!0)]},Ac:{name:"linkAndRetrieveDataWithCredential",j:[Na()]},mb:{name:"linkWithCredential",j:[Na()]},Bc:{name:"linkWithPhoneNumber",j:[Je("phoneNumber"),ag()]},Cc:{name:"linkWithPopup",j:[tc()]},Dc:{name:"linkWithRedirect",j:[tc()]},Jc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Na()]},pb:{name:"reauthenticateWithCredential",j:[Na()]},Kc:{name:"reauthenticateWithPhoneNumber",j:[Je("phoneNumber"),ag()]},Lc:{name:"reauthenticateWithPopup",j:[tc()]},Mc:{name:"reauthenticateWithRedirect",j:[tc()]},reload:{name:"reload",j:[]},qb:{name:"sendEmailVerification",j:[Fn(or("opt_actionCodeSettings",!0),ss(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Je(null,!0)]},ad:{name:"unlink",j:[Je("provider")]},xb:{name:"updateEmail",j:[Je("email")]},yb:{name:"updatePassword",j:[Je("password")]},cd:{name:"updatePhoneNumber",j:[Na("phone")]},zb:{name:"updateProfile",j:[or("profile")]},Ab:{name:"verifyBeforeUpdateEmail",j:[Je("email"),Fn(or("opt_actionCodeSettings",!0),ss(null,!0),"opt_actionCodeSettings",!0)]}}),bn(Zl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),bn(tf.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),bn(Lt.prototype,{ma:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),FN(oN.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",gb:J0("appVerificationDisabledForTesting")}}),bn(m0.prototype,{confirm:{name:"confirm",j:[Je("verificationCode")]}}),jn(ql,"fromJSON",function(s){s=typeof s=="string"?JSON.parse(s):s;for(var l,p=[a4,u4,l4,s4],y=0;y<p.length;y++)if(l=p[y](s))return l;return null},[Fn(Je(),or(),"json")]),jn(no,"credential",function(s,l){return new Ia(s,l)},[Je("email"),Je("password")]),bn(Ia.prototype,{v:{name:"toJSON",j:[Je(null,!0)]}}),bn(Ru.prototype,{Aa:{name:"addScope",j:[Je("scope")]},Ia:{name:"setCustomParameters",j:[or("customOAuthParameters")]}}),jn(Ru,"credential",UC,[Fn(Je(),or(),"token")]),jn(no,"credentialWithLink",qC,[Je("email"),Je("emailLink")]),bn(Ou.prototype,{Aa:{name:"addScope",j:[Je("scope")]},Ia:{name:"setCustomParameters",j:[or("customOAuthParameters")]}}),jn(Ou,"credential",VC,[Fn(Je(),or(),"token")]),bn(Du.prototype,{Aa:{name:"addScope",j:[Je("scope")]},Ia:{name:"setCustomParameters",j:[or("customOAuthParameters")]}}),jn(Du,"credential",BC,[Fn(Je(),Fn(or(),ss()),"idToken"),Fn(Je(),ss(),"accessToken",!0)]),bn(Gl.prototype,{Ia:{name:"setCustomParameters",j:[or("customOAuthParameters")]}}),jn(Gl,"credential",zC,[Fn(Je(),or(),"token"),Je("secret",!0)]),bn(Pi.prototype,{Aa:{name:"addScope",j:[Je("scope")]},credential:{name:"credential",j:[Fn(Je(),Fn(or(),ss()),"optionsOrIdToken"),Fn(Je(),ss(),"accessToken",!0)]},Ia:{name:"setCustomParameters",j:[or("customOAuthParameters")]}}),bn(Rs.prototype,{v:{name:"toJSON",j:[Je(null,!0)]}}),bn(ku.prototype,{v:{name:"toJSON",j:[Je(null,!0)]}}),jn(Os,"credential",WC,[Je("verificationId"),Je("verificationCode")]),bn(Os.prototype,{cb:{name:"verifyPhoneNumber",j:[Fn(Je(),function(s,l){return{name:s||"phoneInfoOptions",J:"valid phone info options",optional:!!l,K:function(p){return p?p.session&&p.phoneNumber?Z0(p.session,Lh)&&typeof p.phoneNumber=="string":p.session&&p.multiFactorHint?Z0(p.session,Rp)&&MN(p.multiFactorHint):p.session&&p.multiFactorUid?Z0(p.session,Rp)&&typeof p.multiFactorUid=="string":p.phoneNumber?typeof p.phoneNumber=="string":!1:!1}}}(),"phoneInfoOptions"),ag()]}}),bn(Ca.prototype,{v:{name:"toJSON",j:[Je(null,!0)]}}),bn(Z.prototype,{toJSON:{name:"toJSON",j:[Je(null,!0)]}}),bn(Fh.prototype,{toJSON:{name:"toJSON",j:[Je(null,!0)]}}),bn(k_.prototype,{toJSON:{name:"toJSON",j:[Je(null,!0)]}}),bn(w0.prototype,{toJSON:{name:"toJSON",j:[Je(null,!0)]}}),bn(_0.prototype,{Pc:{name:"resolveSignIn",j:[LN()]}}),bn(S0.prototype,{Ob:{name:"getSession",j:[]},dc:{name:"enroll",j:[LN(),Je("displayName",!0)]},$c:{name:"unenroll",j:[Fn({name:"multiFactorInfo",J:"a valid multiFactorInfo",optional:!1,K:MN},Je(),"multiFactorInfoIdentifier")]}}),bn(X0.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),jn(y_,"parseLink",EC,[Je("link")]),jn(W0,"assertion",function(s){return new cN(s)},[Na("phone")]),function(){if(typeof ze<"u"&&ze.INTERNAL&&ze.INTERNAL.registerComponent){var s={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Ip,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:m_,VERIFY_AND_CHANGE_EMAIL:Oh,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:Ao,AuthCredential:ql,Error:Z};jn(s,"EmailAuthProvider",no,[]),jn(s,"FacebookAuthProvider",Ru,[]),jn(s,"GithubAuthProvider",Ou,[]),jn(s,"GoogleAuthProvider",Du,[]),jn(s,"TwitterAuthProvider",Gl,[]),jn(s,"OAuthProvider",Pi,[Je("providerId")]),jn(s,"SAMLAuthProvider",jC,[Je("providerId")]),jn(s,"PhoneAuthProvider",Os,[L5()]),jn(s,"RecaptchaVerifier",X0,[Fn(Je(),D5(),"recaptchaContainer"),or("recaptchaParameters",!0),M5()]),jn(s,"ActionCodeURL",y_,[]),jn(s,"PhoneMultiFactorGenerator",W0,[]),ze.INTERNAL.registerComponent({name:"auth",instanceFactory:function(l){return l=l.getProvider("app").getImmediate(),new Ao(l)},multipleInstances:!1,serviceProps:s,instantiationMode:"LAZY",type:"PUBLIC"}),ze.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(l){return l=l.getProvider("auth").getImmediate(),{getUid:oe(l.getUid,l),getToken:oe(l.kc,l),addAuthTokenListener:oe(l.bc,l),removeAuthTokenListener:oe(l.Nc,l)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),ze.registerVersion("@firebase/auth","0.14.2"),ze.INTERNAL.extendNamespace({User:Ri})}else throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.")}()}).apply(typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{});var $D={};/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var e9=function(){function t(e){this.domStorage_=e,this.prefix_="firebase:"}return t.prototype.set=function(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),wr(n))},t.prototype.get=function(e){var n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Kb(n)},t.prototype.remove=function(e){this.domStorage_.removeItem(this.prefixedName_(e))},t.prototype.prefixedName_=function(e){return this.prefix_+e},t.prototype.toString=function(){return this.domStorage_.toString()},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var t9=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n},t.prototype.get=function(e){return yo(this.cache_,e)?this.cache_[e]:null},t.prototype.remove=function(e){delete this.cache_[e]},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var HD=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new e9(e)}}catch{}return new t9},Ju=HD("localStorage"),$1=HD("sessionStorage");/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Uc=new dh("@firebase/database"),KD=function(){var t=1;return function(){return t++}}(),YD=function(t){var e=Eq(t),n=new cq;n.update(e);var r=n.digest();return hq.encodeByteArray(r)},Xd=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?n+=Xd.apply(null,i):typeof i=="object"?n+=wr(i):n+=i,n+=" "}return n},nl=null,m2=!0,QD=function(t,e){Oe(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Uc.logLevel=yt.VERBOSE,nl=Uc.log.bind(Uc),e&&$1.set("logging_enabled",!0)):typeof t=="function"?nl=t:(nl=null,$1.remove("logging_enabled"))},Br=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(m2===!0&&(m2=!1,nl===null&&$1.get("logging_enabled")===!0&&QD(!0)),nl){var n=Xd.apply(null,t);nl(n)}},Jd=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Br.apply(void 0,va([t],e))}},H1=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+Xd.apply(void 0,va(t));Uc.error(n)},Xs=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+Xd.apply(void 0,va(t));throw Uc.error(n),new Error(n)},zr=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+Xd.apply(void 0,va(t));Uc.warn(n)},n9=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&zr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},ry=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},r9=function(t){if(ua()||document.readyState==="complete")t();else{var e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},hl="[MIN_NAME]",uu="[MAX_NAME]",xl=function(t,e){if(t===e)return 0;if(t===hl||e===uu)return-1;if(e===hl||t===uu)return 1;var n=y2(t),r=y2(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1},i9=function(t,e){return t===e?0:t<e?-1:1},ff=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+wr(e))},Jb=function(t){if(typeof t!="object"||t===null)return wr(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)i!==0&&(r+=","),r+=wr(e[i]),r+=":",r+=Jb(t[e[i]]);return r+="}",r},XD=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function lr(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var JD=function(t){Oe(!ry(t),"Invalid JSON number");var e=11,n=52,r=(1<<e-1)-1,i,o,u,h,f;t===0?(o=0,u=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(t)/Math.LN2),r),o=h+r,u=Math.round(t*Math.pow(2,n-h)-Math.pow(2,n))):(o=0,u=Math.round(t/Math.pow(2,1-r-n))));var v=[];for(f=n;f;f-=1)v.push(u%2?1:0),u=Math.floor(u/2);for(f=e;f;f-=1)v.push(o%2?1:0),o=Math.floor(o/2);v.push(i?1:0),v.reverse();var _=v.join(""),b="";for(f=0;f<64;f+=8){var S=parseInt(_.substr(f,8),2).toString(16);S.length===1&&(S="0"+S),b=b+S}return b.toLowerCase()},o9=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},s9=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},a9=function(t,e){var n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r},u9=new RegExp("^-?(0*)\\d{1,10}$"),y2=function(t){if(u9.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},ph=function(t){try{t()}catch(e){setTimeout(function(){var n=e.stack||"";throw zr("Exception was thrown by user callback.",n),e},Math.floor(0))}},l9=function(){var t=typeof window=="object"&&window.navigator&&window.navigator.userAgent||"";return t.search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Vf=function(t,e){var n=setTimeout(t,e);return typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e=function(){function t(e,n){if(n===void 0){this.pieces_=e.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}return Object.defineProperty(t,"Empty",{get:function(){return new t("")},enumerable:!0,configurable:!0}),t.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},t.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},t.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new t(this.pieces_,e)},t.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},t.prototype.toString=function(){for(var e="",n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"},t.prototype.toUrlEncodedString=function(){for(var e="",n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(this.pieces_[n])));return e||"/"},t.prototype.slice=function(e){return e===void 0&&(e=0),this.pieces_.slice(this.pieceNum_+e)},t.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)e.push(this.pieces_[n]);return new t(e,0)},t.prototype.child=function(e){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r]);if(e instanceof t)for(var r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else for(var i=e.split("/"),r=0;r<i.length;r++)i[r].length>0&&n.push(i[r]);return new t(n,0)},t.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},t.relativePath=function(e,n){var r=e.getFront(),i=n.getFront();if(r===null)return n;if(r===i)return t.relativePath(e.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")},t.comparePaths=function(e,n){for(var r=e.slice(),i=n.slice(),o=0;o<r.length&&o<i.length;o++){var u=xl(r[o],i[o]);if(u!==0)return u}return r.length===i.length?0:r.length<i.length?-1:1},t.prototype.equals=function(e){if(this.getLength()!==e.getLength())return!1;for(var n=this.pieceNum_,r=e.pieceNum_;n<=this.pieces_.length;n++,r++)if(this.pieces_[n]!==e.pieces_[r])return!1;return!0},t.prototype.contains=function(e){var n=this.pieceNum_,r=e.pieceNum_;if(this.getLength()>e.getLength())return!1;for(;n<this.pieces_.length;){if(this.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0},t}(),c9=function(){function t(e,n){this.errorPrefix_=n,this.parts_=e.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=av(this.parts_[r]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!0,configurable:!0}),t.prototype.push=function(e){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(e),this.byteLength_+=av(e),this.checkValid_()},t.prototype.pop=function(){var e=this.parts_.pop();this.byteLength_-=av(e),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return this.parts_.length===0?"":"in property '"+this.parts_.join(".")+"'"},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yv="5",ZD="v",eL="s",tL="r",nL="f",rL="firebaseio.com",iL="ls",oL="websocket",sL="long_polling";/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var aL=function(){function t(e,n,r,i,o,u){o===void 0&&(o=""),u===void 0&&(u=!1),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=u,this.host=e.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=Ju.get("host:"+e)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},t.prototype.isCacheableHost=function(){return this.internalHost.substr(0,2)==="s-"},t.prototype.isDemoHost=function(){return this.domain==="firebaseio-demo.com"},t.prototype.isCustomHost=function(){return this.domain!=="firebaseio.com"&&this.domain!=="firebaseio-demo.com"},t.prototype.updateHost=function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ju.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(e,n){Oe(typeof e=="string","typeof type must == string"),Oe(typeof n=="object","typeof params must == object");var r;if(e===oL)r=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else if(e===sL)r=(this.secure?"https://":"http://")+this.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);this.needsQueryParam()&&(n.ns=this.namespace);var i=[];return lr(n,function(o,u){i.push(o+"="+u)}),r+i.join("&")},t.prototype.toString=function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h9(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function f9(t){var e,n,r={};t.charAt(0)==="?"&&(t=t.substring(1));try{for(var i=zn(t.split("&")),o=i.next();!o.done;o=i.next()){var u=o.value;if(u.length!==0){var h=u.split("=");h.length===2?r[decodeURIComponent(h[0])]=decodeURIComponent(h[1]):zr("Invalid query segment '"+u+"' in query '"+t+"'")}}}catch(f){e={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}var K1=function(t){var e=d9(t),n=e.namespace;e.domain==="firebase"&&Xs(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!n||n==="undefined")&&e.domain!=="localhost"&&Xs("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||n9();var r=e.scheme==="ws"||e.scheme==="wss";return{repoInfo:new aL(e.host,e.secure,n,r,"",n!==e.subdomain),path:new $e(e.pathString)}},d9=function(t){var e="",n="",r="",i="",o="",u=!0,h="https",f=443;if(typeof t=="string"){var v=t.indexOf("//");v>=0&&(h=t.substring(0,v-1),t=t.substring(v+2));var _=t.indexOf("/");_===-1&&(_=t.length);var b=t.indexOf("?");b===-1&&(b=t.length),e=t.substring(0,Math.min(_,b)),_<b&&(i=h9(t.substring(_,b)));var S=f9(t.substring(Math.min(t.length,b)));v=e.indexOf(":"),v>=0?(u=h==="https"||h==="wss",f=parseInt(e.substring(v+1),10)):v=t.length;var I=e.split(".");I.length===3?(n=I[1],r=I[0].toLowerCase(),o=r):I.length===2?n=I[0]:I[0].slice(0,v).toLowerCase()==="localhost"&&(n="localhost"),"ns"in S&&(o=S.ns)}return{host:e,port:f,domain:n,subdomain:r,secure:u,scheme:h,pathString:i,namespace:o}};/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var p9=/[\[\].#$\/\u0000-\u001F\u007F]/,g9=/[\[\].#$\u0000-\u001F\u007F]/,Ow=10*1024*1024,iy=function(t){return typeof t=="string"&&t.length!==0&&!p9.test(t)},uL=function(t){return typeof t=="string"&&t.length!==0&&!g9.test(t)},v9=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),uL(t)},pd=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!ry(t)||t&&typeof t=="object"&&yo(t,".sv")},tu=function(t,e,n,r,i){i&&n===void 0||Zd(ws(t,e,i),n,r)},Zd=function(t,e,n){var r=n instanceof $e?new c9(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+r.toErrorString());if(typeof e=="function")throw new Error(t+"contains a function "+r.toErrorString()+" with contents = "+e.toString());if(ry(e))throw new Error(t+"contains "+e.toString()+" "+r.toErrorString());if(typeof e=="string"&&e.length>Ow/3&&av(e)>Ow)throw new Error(t+"contains a string greater than "+Ow+" utf8 bytes "+r.toErrorString()+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){var i=!1,o=!1;if(lr(e,function(u,h){if(u===".value")i=!0;else if(u!==".priority"&&u!==".sv"&&(o=!0,!iy(u)))throw new Error(t+" contains an invalid key ("+u+") "+r.toErrorString()+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);r.push(u),Zd(t,h,r),r.pop()}),i&&o)throw new Error(t+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},m9=function(t,e){var n,r;for(n=0;n<e.length;n++){r=e[n];for(var i=r.slice(),o=0;o<i.length;o++)if(!(i[o]===".priority"&&o===i.length-1)){if(!iy(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort($e.comparePaths);var u=null;for(n=0;n<e.length;n++){if(r=e[n],u!==null&&u.contains(r))throw new Error(t+"contains a path "+u.toString()+" that is ancestor of another path "+r.toString());u=r}},lL=function(t,e,n,r,i){if(!(i&&n===void 0)){var o=ws(t,e,i);if(!(n&&typeof n=="object")||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var u=[];lr(n,function(h,f){var v=new $e(h);if(Zd(o,f,r.child(v)),v.getBack()===".priority"&&!pd(f))throw new Error(o+"contains an invalid value for '"+v.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");u.push(v)}),m9(o,u)}},Y1=function(t,e,n,r){if(!(r&&n===void 0)){if(ry(n))throw new Error(ws(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!pd(n))throw new Error(ws(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Dw=function(t,e,n,r){if(!(r&&n===void 0))switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(ws(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Lw=function(t,e,n,r){if(!(r&&n===void 0)&&!iy(n))throw new Error(ws(t,e,r)+'was an invalid key = "'+n+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},gd=function(t,e,n,r){if(!(r&&n===void 0)&&!uL(n))throw new Error(ws(t,e,r)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},y9=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),gd(t,e,n,r)},io=function(t,e){if(e.getFront()===".info")throw new Error(t+" failed = Can't modify data under /.info/")},cL=function(t,e,n){var r=n.path.toString();if(typeof n.repoInfo.host!="string"||n.repoInfo.host.length===0||!iy(n.repoInfo.namespace)&&n.repoInfo.host.split(":")[0]!=="localhost"||r.length!==0&&!v9(r))throw new Error(ws(t,e,!1)+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)},_9=function(t,e,n,r){if(!(r&&n===void 0)&&typeof n!="boolean")throw new Error(ws(t,e,r)+"must be a boolean.")};/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var w9=function(){function t(e,n){this.repo_=e,this.path_=n}return t.prototype.cancel=function(e){ht("OnDisconnect.cancel",0,1,arguments.length),yr("OnDisconnect.cancel",1,e,!0);var n=new Fo;return this.repo_.onDisconnectCancel(this.path_,n.wrapCallback(e)),n.promise},t.prototype.remove=function(e){ht("OnDisconnect.remove",0,1,arguments.length),io("OnDisconnect.remove",this.path_),yr("OnDisconnect.remove",1,e,!0);var n=new Fo;return this.repo_.onDisconnectSet(this.path_,null,n.wrapCallback(e)),n.promise},t.prototype.set=function(e,n){ht("OnDisconnect.set",1,2,arguments.length),io("OnDisconnect.set",this.path_),tu("OnDisconnect.set",1,e,this.path_,!1),yr("OnDisconnect.set",2,n,!0);var r=new Fo;return this.repo_.onDisconnectSet(this.path_,e,r.wrapCallback(n)),r.promise},t.prototype.setWithPriority=function(e,n,r){ht("OnDisconnect.setWithPriority",2,3,arguments.length),io("OnDisconnect.setWithPriority",this.path_),tu("OnDisconnect.setWithPriority",1,e,this.path_,!1),Y1("OnDisconnect.setWithPriority",2,n,!1),yr("OnDisconnect.setWithPriority",3,r,!0);var i=new Fo;return this.repo_.onDisconnectSetWithPriority(this.path_,e,n,i.wrapCallback(r)),i.promise},t.prototype.update=function(e,n){if(ht("OnDisconnect.update",1,2,arguments.length),io("OnDisconnect.update",this.path_),Array.isArray(e)){for(var r={},i=0;i<e.length;++i)r[""+i]=e[i];e=r,zr("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}lL("OnDisconnect.update",1,e,this.path_,!1),yr("OnDisconnect.update",2,n,!0);var o=new Fo;return this.repo_.onDisconnectUpdate(this.path_,e,o.wrapCallback(n)),o.promise},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var E9=function(){function t(e,n){this.committed=e,this.snapshot=n}return t.prototype.toJSON=function(){return ht("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var S9=function(){var t="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",e=0,n=[];return function(r){var i=r===e;e=r;var o,u=new Array(8);for(o=7;o>=0;o--)u[o]=t.charAt(r%64),r=Math.floor(r/64);Oe(r===0,"Cannot push at time == 0");var h=u.join("");if(i){for(o=11;o>=0&&n[o]===63;o--)n[o]=0;n[o]++}else for(o=0;o<12;o++)n[o]=Math.floor(Math.random()*64);for(o=0;o<12;o++)h+=t.charAt(n[o]);return Oe(h.length===20,"nextPushId: Length should be 20."),h}}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ft=function(){function t(e,n){this.name=e,this.node=n}return t.Wrap=function(e,n){return new t(e,n)},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oy=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(e,n){var r=new Ft(hl,e),i=new Ft(hl,n);return this.compare(r,i)!==0},t.prototype.minPost=function(){return Ft.MIN},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xg,hL=function(t){Et(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return xg},set:function(n){xg=n},enumerable:!0,configurable:!0}),e.prototype.compare=function(n,r){return xl(n.name,r.name)},e.prototype.isDefinedOn=function(n){throw Yd("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(n,r){return!1},e.prototype.minPost=function(){return Ft.MIN},e.prototype.maxPost=function(){return new Ft(uu,xg)},e.prototype.makePost=function(n,r){return Oe(typeof n=="string","KeyIndex indexValue must always be a string."),new Ft(n,xg)},e.prototype.toString=function(){return".key"},e}(oy),nu=new hL;/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Q1;function b9(t){Q1=t}var fL=function(t){return typeof t=="number"?"number:"+JD(t):"string:"+t},dL=function(t){if(t.isLeafNode()){var e=t.val();Oe(typeof e=="string"||typeof e=="number"||typeof e=="object"&&yo(e,".sv"),"Priority must be a string or number.")}else Oe(t===Q1||t.isEmpty(),"priority of unexpected type.");Oe(t===Q1||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _2,nh=function(){function t(e,n){n===void 0&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Oe(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),dL(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return _2},set:function(e){_2=e},enumerable:!0,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return e===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return e.isEmpty()?this:e.getFront()===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(e,n){return null},t.prototype.updateImmediateChild=function(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=e.getFront();return r===null?n:n.isEmpty()&&r!==".priority"?this:(Oe(r!==".priority"||e.getLength()===1,".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(e.popFront(),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(e,n){return!1},t.prototype.val=function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(this.lazyHash_===null){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+fL(this.priorityNode_.val())+":");var n=typeof this.value_;e+=n+":",n==="number"?e+=JD(this.value_):e+=this.value_,this.lazyHash_=YD(e)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Oe(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),o=t.VALUE_TYPE_ORDER.indexOf(r);return Oe(i>=0,"Unknown leaf type: "+n),Oe(o>=0,"Unknown leaf type: "+r),i===o?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode()){var n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pL,gL;function T9(t){pL=t}function I9(t){gL=t}var C9=function(t){Et(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.compare=function(n,r){var i=n.node.getPriority(),o=r.node.getPriority(),u=i.compareTo(o);return u===0?xl(n.name,r.name):u},e.prototype.isDefinedOn=function(n){return!n.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(n,r){return!n.getPriority().equals(r.getPriority())},e.prototype.minPost=function(){return Ft.MIN},e.prototype.maxPost=function(){return new Ft(uu,new nh("[PRIORITY-POST]",gL))},e.prototype.makePost=function(n,r){var i=pL(n);return new Ft(r,new nh("[PRIORITY-POST]",i))},e.prototype.toString=function(){return".priority"},e}(oy),en=new C9;/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ng=function(){function t(e,n,r,i,o){o===void 0&&(o=null),this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];for(var u=1;!e.isEmpty();)if(e=e,u=n?r(e.key,n):1,i&&(u*=-1),u<0)this.isReverse_?e=e.left:e=e.right;else if(u===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}return t.prototype.getNext=function(){if(this.nodeStack_.length===0)return null;var e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(this.nodeStack_.length===0)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}},t}(),Oo=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??Js.EMPTY_NODE,this.right=o??Js.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)},t.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(e,n,r){var i=this,o=r(e,i.key);return o<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Js.EMPTY_NODE;var e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()},t.prototype.remove=function(e,n){var r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Js.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e},t.prototype.moveRedLeft_=function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e},t.prototype.moveRedRight_=function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)},t.prototype.checkMaxDepth_=function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),x9=function(){function t(){}return t.prototype.copy=function(e,n,r,i,o){return this},t.prototype.insert=function(e,n,r){return new Oo(e,n,null)},t.prototype.remove=function(e,n){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(e){return!1},t.prototype.reverseTraversal=function(e){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Js=function(){function t(e,n){n===void 0&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Oo.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Oo.BLACK,null,null))},t.prototype.get=function(e){for(var n,r=this.root_;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null},t.prototype.getPredecessorKey=function(e){for(var n,r=this.root_,i=null;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(e){return this.root_.inorderTraversal(e)},t.prototype.reverseTraversal=function(e){return this.root_.reverseTraversal(e)},t.prototype.getIterator=function(e){return new Ng(this.root_,null,this.comparator_,!1,e)},t.prototype.getIteratorFrom=function(e,n){return new Ng(this.root_,e,this.comparator_,!1,n)},t.prototype.getReverseIteratorFrom=function(e,n){return new Ng(this.root_,e,this.comparator_,!0,n)},t.prototype.getReverseIterator=function(e){return new Ng(this.root_,null,this.comparator_,!0,e)},t.EMPTY_NODE=new x9,t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var N9=Math.log(2),A9=function(){function t(e){var n=function(o){return parseInt(Math.log(o)/N9,10)},r=function(o){return parseInt(Array(o+1).join("1"),2)};this.count=n(e+1),this.current_=this.count-1;var i=r(this.count);this.bits_=e+1&i}return t.prototype.nextBitIsOne=function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e},t}(),Qv=function(t,e,n,r){t.sort(e);var i=function(f,v){var _=v-f,b,S;if(_===0)return null;if(_===1)return b=t[f],S=n?n(b):b,new Oo(S,b.node,Oo.BLACK,null,null);var I=parseInt(_/2,10)+f,M=i(f,I),D=i(I+1,v);return b=t[I],S=n?n(b):b,new Oo(S,b.node,Oo.BLACK,M,D)},o=function(f){for(var v=null,_=null,b=t.length,S=function(z,Y){var K=b-z,ue=b;b-=z;var oe=i(K+1,ue),fe=t[K],me=n?n(fe):fe;I(new Oo(me,fe.node,Y,null,oe))},I=function(z){v?(v.left=z,v=z):(_=z,v=z)},M=0;M<f.count;++M){var D=f.nextBitIsOne(),ne=Math.pow(2,f.count-(M+1));D?S(ne,Oo.BLACK):(S(ne,Oo.BLACK),S(ne,Oo.RED))}return _},u=new A9(t.length),h=o(u);return new Js(r||e,h)};/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mw,ic={},Xv=function(){function t(e,n){this.indexes_=e,this.indexSet_=n}return Object.defineProperty(t,"Default",{get:function(){return Oe(ic&&en,"ChildrenNode.ts has not been loaded"),Mw=Mw||new t({".priority":ic},{".priority":en}),Mw},enumerable:!0,configurable:!0}),t.prototype.get=function(e){var n=Uo(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Js?n:null},t.prototype.hasIndex=function(e){return yo(this.indexSet_,e.toString())},t.prototype.addIndex=function(e,n){Oe(e!==nu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r=[],i=!1,o=n.getIterator(Ft.Wrap),u=o.getNext();u;)i=i||e.isDefinedOn(u.node),r.push(u),u=o.getNext();var h;i?h=Qv(r,e.getCompare()):h=ic;var f=e.toString(),v=wn({},this.indexSet_);v[f]=e;var _=wn({},this.indexes_);return _[f]=h,new t(_,v)},t.prototype.addToIndexes=function(e,n){var r=this,i=Gv(this.indexes_,function(o,u){var h=Uo(r.indexSet_,u);if(Oe(h,"Missing index implementation for "+u),o===ic)if(h.isDefinedOn(e.node)){for(var f=[],v=n.getIterator(Ft.Wrap),_=v.getNext();_;)_.name!==e.name&&f.push(_),_=v.getNext();return f.push(e),Qv(f,h.getCompare())}else return ic;else{var b=n.get(e.name),S=o;return b&&(S=S.remove(new Ft(e.name,b))),S.insert(e,e.node)}});return new t(i,this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){var r=Gv(this.indexes_,function(i){if(i===ic)return i;var o=n.get(e.name);return o?i.remove(new Ft(e.name,o)):i});return new t(r,this.indexSet_)},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k9(t,e){return xl(t.name,e.name)}function Zb(t,e){return xl(t,e)}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var df,mt=function(){function t(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&dL(this.priorityNode_),this.children_.isEmpty()&&Oe(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return df||(df=new t(new Js(Zb),null,Xv.Default))},enumerable:!0,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||df},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(e){if(e===".priority")return this.getPriority();var n=this.children_.get(e);return n===null?df:n},t.prototype.getChild=function(e){var n=e.getFront();return n===null?this:this.getImmediateChild(n).getChild(e.popFront())},t.prototype.hasChild=function(e){return this.children_.get(e)!==null},t.prototype.updateImmediateChild=function(e,n){if(Oe(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);var r=new Ft(e,n),i=void 0,o=void 0;n.isEmpty()?(i=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),o=this.indexMap_.addToIndexes(r,this.children_));var u=i.isEmpty()?df:this.priorityNode_;return new t(i,u,o)},t.prototype.updateChild=function(e,n){var r=e.getFront();if(r===null)return n;Oe(e.getFront()!==".priority"||e.getLength()===1,".priority must be the last token in a path");var i=this.getImmediateChild(r).updateChild(e.popFront(),n);return this.updateImmediateChild(r,i)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(en,function(f,v){n[f]=v.val(e),r++,o&&t.INTEGER_REGEXP_.test(f)?i=Math.max(i,Number(f)):o=!1}),!e&&o&&i<2*r){var u=[];for(var h in n)u[h]=n[h];return u}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(this.lazyHash_===null){var e="";this.getPriority().isEmpty()||(e+="priority:"+fL(this.getPriority().val())+":"),this.forEachChild(en,function(n,r){var i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":YD(e)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(e,n,r){var i=this.resolveIndex_(r);if(i){var o=i.getPredecessorKey(new Ft(e,n));return o?o.name:null}else return this.children_.getPredecessorKey(e)},t.prototype.getFirstChildName=function(e){var n=this.resolveIndex_(e);if(n){var r=n.minKey();return r&&r.name}else return this.children_.minKey()},t.prototype.getFirstChild=function(e){var n=this.getFirstChildName(e);return n?new Ft(n,this.children_.get(n)):null},t.prototype.getLastChildName=function(e){var n=this.resolveIndex_(e);if(n){var r=n.maxKey();return r&&r.name}else return this.children_.maxKey()},t.prototype.getLastChild=function(e){var n=this.getLastChildName(e);return n?new Ft(n,this.children_.get(n)):null},t.prototype.forEachChild=function(e,n){var r=this.resolveIndex_(e);return r?r.inorderTraversal(function(i){return n(i.name,i.node)}):this.children_.inorderTraversal(n)},t.prototype.getIterator=function(e){return this.getIteratorFrom(e.minPost(),e)},t.prototype.getIteratorFrom=function(e,n){var r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,function(u){return u});for(var i=this.children_.getIteratorFrom(e.name,Ft.Wrap),o=i.peek();o!=null&&n.compare(o,e)<0;)i.getNext(),o=i.peek();return i},t.prototype.getReverseIterator=function(e){return this.getReverseIteratorFrom(e.maxPost(),e)},t.prototype.getReverseIteratorFrom=function(e,n){var r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,function(u){return u});for(var i=this.children_.getReverseIteratorFrom(e.name,Ft.Wrap),o=i.peek();o!=null&&n.compare(o,e)>0;)i.getNext(),o=i.peek();return i},t.prototype.compareTo=function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===ep?-1:0},t.prototype.withIndex=function(e){if(e===nu||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(e){return e===nu||this.indexMap_.hasIndex(e)},t.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){for(var r=this.getIterator(en),i=n.getIterator(en),o=r.getNext(),u=i.getNext();o&&u;){if(o.name!==u.name||!o.node.equals(u.node))return!1;o=r.getNext(),u=i.getNext()}return o===null&&u===null}else return!1;else return!1},t.prototype.resolveIndex_=function(e){return e===nu?null:this.indexMap_.get(e.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),P9=function(t){Et(e,t);function e(){return t.call(this,new Js(Zb),mt.EMPTY_NODE,Xv.Default)||this}return e.prototype.compareTo=function(n){return n===this?0:1},e.prototype.equals=function(n){return n===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(n){return mt.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(mt),ep=new P9;Object.defineProperties(Ft,{MIN:{value:new Ft(hl,mt.EMPTY_NODE)},MAX:{value:new Ft(uu,ep)}});hL.__EMPTY_NODE=mt.EMPTY_NODE;nh.__childrenNodeConstructor=mt;b9(ep);I9(ep);/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var R9=!0;function Rn(t,e){if(e===void 0&&(e=null),t===null)return mt.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),Oe(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){var n=t;return new nh(n,Rn(e))}if(!(t instanceof Array)&&R9){var r=[],i=!1,o=t;if(lr(o,function(v,_){if(v.substring(0,1)!=="."){var b=Rn(_);b.isEmpty()||(i=i||!b.getPriority().isEmpty(),r.push(new Ft(v,b)))}}),r.length===0)return mt.EMPTY_NODE;var u=Qv(r,k9,function(v){return v.name},Zb);if(i){var h=Qv(r,en.getCompare());return new mt(u,Rn(e),new Xv({".priority":h},{".priority":en}))}else return new mt(u,Rn(e),Xv.Default)}else{var f=mt.EMPTY_NODE;return lr(t,function(v,_){if(yo(t,v)&&v.substring(0,1)!=="."){var b=Rn(_);(b.isLeafNode()||!b.isEmpty())&&(f=f.updateImmediateChild(v,b))}}),f.updatePriority(Rn(e))}}T9(Rn);/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var O9=function(t){Et(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.compare=function(n,r){var i=n.node.compareTo(r.node);return i===0?xl(n.name,r.name):i},e.prototype.isDefinedOn=function(n){return!0},e.prototype.indexedValueChanged=function(n,r){return!n.equals(r)},e.prototype.minPost=function(){return Ft.MIN},e.prototype.maxPost=function(){return Ft.MAX},e.prototype.makePost=function(n,r){var i=Rn(n);return new Ft(r,i)},e.prototype.toString=function(){return".value"},e}(oy),X1=new O9;/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var J1=function(t){Et(e,t);function e(n){var r=t.call(this)||this;return r.indexPath_=n,Oe(!n.isEmpty()&&n.getFront()!==".priority","Can't create PathIndex with empty path or .priority key"),r}return e.prototype.extractChild=function(n){return n.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(n){return!n.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(n,r){var i=this.extractChild(n.node),o=this.extractChild(r.node),u=i.compareTo(o);return u===0?xl(n.name,r.name):u},e.prototype.makePost=function(n,r){var i=Rn(n),o=mt.EMPTY_NODE.updateChild(this.indexPath_,i);return new Ft(r,o)},e.prototype.maxPost=function(){var n=mt.EMPTY_NODE.updateChild(this.indexPath_,ep);return new Ft(uu,n)},e.prototype.toString=function(){return this.indexPath_.slice().join("/")},e}(oy);/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gh=function(){function t(e,n,r){this.node_=e,this.ref_=n,this.index_=r}return t.prototype.val=function(){return ht("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return ht("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return ht("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return ht("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){ht("DataSnapshot.child",0,1,arguments.length),e=String(e),gd("DataSnapshot.child",1,e,!1);var n=new $e(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,en)},t.prototype.hasChild=function(e){ht("DataSnapshot.hasChild",1,1,arguments.length),gd("DataSnapshot.hasChild",1,e,!1);var n=new $e(e);return!this.node_.getChild(n).isEmpty()},t.prototype.getPriority=function(){return ht("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if(ht("DataSnapshot.forEach",1,1,arguments.length),yr("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,function(i,o){return e(new t(o,n.ref_.child(i),en))})},t.prototype.hasChildren=function(){return ht("DataSnapshot.hasChildren",0,0,arguments.length),this.node_.isLeafNode()?!1:!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!0,configurable:!0}),t.prototype.numChildren=function(){return ht("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return ht("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vL=function(){function t(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}return t.prototype.getPath=function(){var e=this.snapshot.getRef();return this.eventType==="value"?e.path:e.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+wr(this.snapshot.exportVal())},t}(),mL=function(){function t(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var w2=function(){function t(e,n,r){this.callback_=e,this.cancelCallback_=n,this.context_=r}return t.prototype.respondsTo=function(e){return e==="value"},t.prototype.createEvent=function(e,n){var r=n.getQueryParams().getIndex();return new vL("value",this,new gh(e.snapshotNode,n.getRef(),r))},t.prototype.getEventRunner=function(e){var n=this.context_;if(e.getEventType()==="cancel"){Oe(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var r=this.cancelCallback_;return function(){r.call(n,e.error)}}else{var i=this.callback_;return function(){i.call(n,e.snapshot)}}},t.prototype.createCancelEvent=function(e,n){return this.cancelCallback_?new mL(this,e,n):null},t.prototype.matches=function(e){return e instanceof t?!e.callback_||!this.callback_?!0:e.callback_===this.callback_&&e.context_===this.context_:!1},t.prototype.hasAnyCallback=function(){return this.callback_!==null},t}(),E2=function(){function t(e,n,r){this.callbacks_=e,this.cancelCallback_=n,this.context_=r}return t.prototype.respondsTo=function(e){var n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,yo(this.callbacks_,n)},t.prototype.createCancelEvent=function(e,n){return this.cancelCallback_?new mL(this,e,n):null},t.prototype.createEvent=function(e,n){Oe(e.childName!=null,"Child events should have a childName.");var r=n.getRef().child(e.childName),i=n.getQueryParams().getIndex();return new vL(e.type,this,new gh(e.snapshotNode,r,i),e.prevName)},t.prototype.getEventRunner=function(e){var n=this.context_;if(e.getEventType()==="cancel"){Oe(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var r=this.cancelCallback_;return function(){r.call(n,e.error)}}else{var i=this.callbacks_[e.eventType];return function(){i.call(n,e.snapshot,e.prevName)}}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var r=Object.keys(e.callbacks_),i=Object.keys(this.callbacks_),o=r.length,u=i.length;if(o===u)if(o===1){var h=r[0],f=i[0];return f===h&&(!e.callbacks_[h]||!this.callbacks_[f]||e.callbacks_[h]===this.callbacks_[f])}else return i.every(function(v){return e.callbacks_[v]===n.callbacks_[v]})}}return!1},t.prototype.hasAnyCallback=function(){return this.callbacks_!==null},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fw,eT=function(){function t(e,n,r,i){this.repo=e,this.path=n,this.queryParams_=r,this.orderByCalled_=i}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Oe(Fw,"Reference.ts has not been loaded"),Fw},set:function(e){Fw=e},enumerable:!0,configurable:!0}),t.validateQueryEndpoints_=function(e){var n=null,r=null;if(e.hasStart()&&(n=e.getIndexStartValue()),e.hasEnd()&&(r=e.getIndexEndValue()),e.getIndex()===nu){var i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",o="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(e.hasStart()){var u=e.getIndexStartName();if(u!==hl)throw new Error(i);if(typeof n!="string")throw new Error(o)}if(e.hasEnd()){var h=e.getIndexEndName();if(h!==uu)throw new Error(i);if(typeof r!="string")throw new Error(o)}}else if(e.getIndex()===en){if(n!=null&&!pd(n)||r!=null&&!pd(r))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Oe(e.getIndex()instanceof J1||e.getIndex()===X1,"unknown index type."),n!=null&&typeof n=="object"||r!=null&&typeof r=="object")throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},t.validateLimit_=function(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(e){if(this.orderByCalled_===!0)throw new Error(e+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return ht("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){ht("Query.on",2,4,arguments.length),Dw("Query.on",1,e,!1),yr("Query.on",2,n,!1);var o=t.getCancelAndContextArgs_("Query.on",r,i);if(e==="value")this.onValueEvent(n,o.cancel,o.context);else{var u={};u[e]=n,this.onChildEvent(u,o.cancel,o.context)}return n},t.prototype.onValueEvent=function(e,n,r){var i=new w2(e,n||null,r||null);this.repo.addEventCallbackForQuery(this,i)},t.prototype.onChildEvent=function(e,n,r){var i=new E2(e,n,r);this.repo.addEventCallbackForQuery(this,i)},t.prototype.off=function(e,n,r){ht("Query.off",0,3,arguments.length),Dw("Query.off",1,e,!0),yr("Query.off",2,n,!0),g2("Query.off",3,r,!0);var i=null,o=null;if(e==="value"){var u=n||null;i=new w2(u,null,r||null)}else e&&(n&&(o={},o[e]=n),i=new E2(o,null,r||null));this.repo.removeEventCallbackForQuery(this,i)},t.prototype.once=function(e,n,r,i){var o=this;ht("Query.once",1,4,arguments.length),Dw("Query.once",1,e,!1),yr("Query.once",2,n,!0);var u=t.getCancelAndContextArgs_("Query.once",r,i),h=!0,f=new Fo;f.promise.catch(function(){});var v=function(_){h&&(h=!1,o.off(e,v),n&&n.bind(u.context)(_),f.resolve(_))};return this.on(e,v,function(_){o.off(e,v),u.cancel&&u.cancel.bind(u.context)(_),f.reject(_)}),f.promise},t.prototype.limitToFirst=function(e){if(ht("Query.limitToFirst",1,1,arguments.length),typeof e!="number"||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(ht("Query.limitToLast",1,1,arguments.length),typeof e!="number"||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(ht("Query.orderByChild",1,1,arguments.length),e==="$key")throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if(e==="$priority")throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if(e==="$value")throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');gd("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new $e(e);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new J1(n),i=this.queryParams_.orderBy(r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){ht("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy(nu);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){ht("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy(en);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){ht("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy(X1);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){e===void 0&&(e=null),ht("Query.startAt",0,2,arguments.length),tu("Query.startAt",1,e,this.path,!0),Lw("Query.startAt",2,n,!0);var r=this.queryParams_.startAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return e===void 0&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){e===void 0&&(e=null),ht("Query.endAt",0,2,arguments.length),tu("Query.endAt",1,e,this.path,!0),Lw("Query.endAt",2,n,!0);var r=this.queryParams_.endAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(e,n){if(ht("Query.equalTo",1,2,arguments.length),tu("Query.equalTo",1,e,this.path,!1),Lw("Query.equalTo",2,n,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(e,n).endAt(e,n)},t.prototype.toString=function(){return ht("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},t.prototype.toJSON=function(){return ht("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},t.prototype.queryIdentifier=function(){var e=this.queryObject(),n=Jb(e);return n==="{}"?"default":n},t.prototype.isEqual=function(e){if(ht("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===e.repo,i=this.path.equals(e.path),o=this.queryIdentifier()===e.queryIdentifier();return r&&i&&o},t.getCancelAndContextArgs_=function(e,n,r){var i={cancel:null,context:null};if(n&&r)i.cancel=n,yr(e,3,i.cancel,!0),i.context=r,g2(e,4,i.context,!0);else if(n)if(typeof n=="object"&&n!==null)i.context=n;else if(typeof n=="function")i.cancel=n;else throw new Error(ws(e,3,!0)+" must either be a cancel callback or a context object.");return i},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var D9=function(){function t(e){this.node_=e}return t.prototype.getImmediateChild=function(e){var n=this.node_.getImmediateChild(e);return new t(n)},t.prototype.node=function(){return this.node_},t}(),L9=function(){function t(e,n){this.syncTree_=e,this.path_=n}return t.prototype.getImmediateChild=function(e){var n=this.path_.child(e);return new t(this.syncTree_,n)},t.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},t}(),M9=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},S2=function(t,e,n){if(!t||typeof t!="object")return t;if(Oe(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return F9(t[".sv"],e,n);if(typeof t[".sv"]=="object")return j9(t[".sv"],e);Oe(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},F9=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Oe(!1,"Unexpected server value: "+t)}},j9=function(t,e,n){t.hasOwnProperty("increment")||Oe(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;typeof r!="number"&&Oe(!1,"Unexpected increment value: "+r);var i=e.node();if(Oe(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var o=i,u=o.getValue();return typeof u!="number"?r:u+r},b2=function(t,e,n,r){return nT(e,new L9(n,t),r)},tT=function(t,e,n){return nT(t,new D9(e),n)};function nT(t,e,n){var r=t.getPriority().val(),i=S2(r,e.getImmediateChild(".priority"),n),o;if(t.isLeafNode()){var u=t,h=S2(u.getValue(),e,n);return h!==u.getValue()||i!==u.getPriority().val()?new nh(h,Rn(i)):t}else{var f=t;return o=f,i!==f.getPriority().val()&&(o=o.updatePriority(new nh(i))),f.forEachChild(en,function(v,_){var b=nT(_,e.getImmediateChild(v),n);b!==_&&(o=o.updateImmediateChild(v,b))}),o}}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jw=function(){function t(){this.value=null,this.children=new Map}return t.prototype.find=function(e){if(this.value!=null)return this.value.getChild(e);if(!e.isEmpty()&&this.children.size>0){var n=e.getFront();if(e=e.popFront(),this.children.has(n)){var r=this.children.get(n);return r.find(e)}else return null}else return null},t.prototype.remember=function(e,n){if(e.isEmpty())this.value=n,this.children.clear();else if(this.value!==null)this.value=this.value.updateChild(e,n);else{var r=e.getFront();this.children.has(r)||this.children.set(r,new t);var i=this.children.get(r);e=e.popFront(),i.remember(e,n)}},t.prototype.forget=function(e){if(e.isEmpty())return this.value=null,this.children.clear(),!0;if(this.value!==null){if(this.value.isLeafNode())return!1;var n=this.value;this.value=null;var r=this;return n.forEachChild(en,function(u,h){r.remember(new $e(u),h)}),this.forget(e)}else if(this.children.size>0){var i=e.getFront();if(e=e.popFront(),this.children.has(i)){var o=this.children.get(i).forget(e);o&&this.children.delete(i)}return this.children.size===0}else return!0},t.prototype.forEachTree=function(e,n){this.value!==null?n(e,this.value):this.forEachChild(function(r,i){var o=new $e(e.toString()+"/"+r);i.forEachTree(o,n)})},t.prototype.forEachChild=function(e){this.children.forEach(function(n,r){e(r,n)})},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bo;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Bo||(Bo={}));var js=function(){function t(e,n,r,i){this.fromUser=e,this.fromServer=n,this.queryId=r,this.tagged=i,Oe(!i||n,"Tagged queries must be from server.")}return t.User=new t(!0,!1,null,!1),t.Server=new t(!1,!0,null,!1),t.forServerTaggedQuery=function(e){return new t(!1,!0,e,!0)},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var U9=function(){function t(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Bo.ACK_USER_WRITE,this.source=js.User}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(this.affectedTree.value!=null)return Oe(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new $e(e));return new t($e.Empty,n,this.revert)}else return Oe(this.path.getFront()===e,"operationForChild called for unrelated child."),new t(this.path.popFront(),this.affectedTree,this.revert)},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Uw,V9=function(){return Uw||(Uw=new Js(i9)),Uw},ji=function(){function t(e,n){n===void 0&&(n=V9()),this.value=e,this.children=n}return t.fromObject=function(e){var n=t.Empty;return lr(e,function(r,i){n=n.set(new $e(r),i)}),n},t.prototype.isEmpty=function(){return this.value===null&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(e,n){if(this.value!=null&&n(this.value))return{path:$e.Empty,value:this.value};if(e.isEmpty())return null;var r=e.getFront(),i=this.children.get(r);if(i!==null){var o=i.findRootMostMatchingPathAndValue(e.popFront(),n);if(o!=null){var u=new $e(r).child(o.path);return{path:u,value:o.value}}else return null}else return null},t.prototype.findRootMostValueAndPath=function(e){return this.findRootMostMatchingPathAndValue(e,function(){return!0})},t.prototype.subtree=function(e){if(e.isEmpty())return this;var n=e.getFront(),r=this.children.get(n);return r!==null?r.subtree(e.popFront()):t.Empty},t.prototype.set=function(e,n){if(e.isEmpty())return new t(n,this.children);var r=e.getFront(),i=this.children.get(r)||t.Empty,o=i.set(e.popFront(),n),u=this.children.insert(r,o);return new t(this.value,u)},t.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?t.Empty:new t(null,this.children);var n=e.getFront(),r=this.children.get(n);if(r){var i=r.remove(e.popFront()),o=void 0;return i.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,i),this.value===null&&o.isEmpty()?t.Empty:new t(this.value,o)}else return this},t.prototype.get=function(e){if(e.isEmpty())return this.value;var n=e.getFront(),r=this.children.get(n);return r?r.get(e.popFront()):null},t.prototype.setTree=function(e,n){if(e.isEmpty())return n;var r=e.getFront(),i=this.children.get(r)||t.Empty,o=i.setTree(e.popFront(),n),u=void 0;return o.isEmpty()?u=this.children.remove(r):u=this.children.insert(r,o),new t(this.value,u)},t.prototype.fold=function(e){return this.fold_($e.Empty,e)},t.prototype.fold_=function(e,n){var r={};return this.children.inorderTraversal(function(i,o){r[i]=o.fold_(e.child(i),n)}),n(e,this.value,r)},t.prototype.findOnPath=function(e,n){return this.findOnPath_(e,$e.Empty,n)},t.prototype.findOnPath_=function(e,n,r){var i=this.value?r(n,this.value):!1;if(i)return i;if(e.isEmpty())return null;var o=e.getFront(),u=this.children.get(o);return u?u.findOnPath_(e.popFront(),n.child(o),r):null},t.prototype.foreachOnPath=function(e,n){return this.foreachOnPath_(e,$e.Empty,n)},t.prototype.foreachOnPath_=function(e,n,r){if(e.isEmpty())return this;this.value&&r(n,this.value);var i=e.getFront(),o=this.children.get(i);return o?o.foreachOnPath_(e.popFront(),n.child(i),r):t.Empty},t.prototype.foreach=function(e){this.foreach_($e.Empty,e)},t.prototype.foreach_=function(e,n){this.children.inorderTraversal(function(r,i){i.foreach_(e.child(r),n)}),this.value&&n(e,this.value)},t.prototype.foreachChild=function(e){this.children.inorderTraversal(function(n,r){r.value&&e(n,r.value)})},t.Empty=new t(null),t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var T2=function(){function t(e,n){this.source=e,this.path=n,this.type=Bo.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,$e.Empty):new t(this.source,this.path.popFront())},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lv=function(){function t(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Bo.OVERWRITE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,$e.Empty,this.snap.getImmediateChild(e)):new t(this.source,this.path.popFront(),this.snap)},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vw=function(){function t(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Bo.MERGE}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){var n=this.children.subtree(new $e(e));return n.isEmpty()?null:n.value?new lv(this.source,$e.Empty,n.value):new t(this.source,$e.Empty,n)}else return Oe(this.path.getFront()===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,this.path.popFront(),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zs=function(){function t(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(e){if(e.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var n=e.getFront();return this.isCompleteForChild(n)},t.prototype.isCompleteForChild=function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)},t.prototype.getNode=function(){return this.node_},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yL=function(){function t(e,n){this.eventCache_=e,this.serverCache_=n}return t.prototype.updateEventSnap=function(e,n,r){return new t(new Zs(e,n,r),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,r){return new t(this.eventCache_,new Zs(e,n,r))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t.Empty=new t(new Zs(mt.EMPTY_NODE,!1,!1),new Zs(mt.EMPTY_NODE,!1,!1)),t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xt=function(){function t(e,n,r,i,o){this.type=e,this.snapshotNode=n,this.childName=r,this.oldSnap=i,this.prevName=o}return t.valueChange=function(e){return new t(t.VALUE,e)},t.childAddedChange=function(e,n){return new t(t.CHILD_ADDED,n,e)},t.childRemovedChange=function(e,n){return new t(t.CHILD_REMOVED,n,e)},t.childChangedChange=function(e,n,r){return new t(t.CHILD_CHANGED,n,e,r)},t.childMovedChange=function(e,n){return new t(t.CHILD_MOVED,n,e)},t.CHILD_ADDED="child_added",t.CHILD_REMOVED="child_removed",t.CHILD_CHANGED="child_changed",t.CHILD_MOVED="child_moved",t.VALUE="value",t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rT=function(){function t(e){this.index_=e}return t.prototype.updateChild=function(e,n,r,i,o,u){Oe(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var h=e.getImmediateChild(n);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(u!=null&&(r.isEmpty()?e.hasChild(n)?u.trackChildChange(xt.childRemovedChange(n,h)):Oe(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?u.trackChildChange(xt.childAddedChange(n,r)):u.trackChildChange(xt.childChangedChange(n,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)},t.prototype.updateFullNode=function(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(en,function(i,o){n.hasChild(i)||r.trackChildChange(xt.childRemovedChange(i,o))}),n.isLeafNode()||n.forEachChild(en,function(i,o){if(e.hasChild(i)){var u=e.getImmediateChild(i);u.equals(o)||r.trackChildChange(xt.childChangedChange(i,o,u))}else r.trackChildChange(xt.childAddedChange(i,o))})),n.withIndex(this.index_)},t.prototype.updatePriority=function(e,n){return e.isEmpty()?mt.EMPTY_NODE:e.updatePriority(n)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var B9=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(e){var n=e.type,r=e.childName;Oe(n===xt.CHILD_ADDED||n===xt.CHILD_CHANGED||n===xt.CHILD_REMOVED,"Only child changes supported for tracking"),Oe(r!==".priority","Only non-priority child changes can be tracked.");var i=this.changeMap.get(r);if(i){var o=i.type;if(n===xt.CHILD_ADDED&&o===xt.CHILD_REMOVED)this.changeMap.set(r,xt.childChangedChange(r,e.snapshotNode,i.snapshotNode));else if(n===xt.CHILD_REMOVED&&o===xt.CHILD_ADDED)this.changeMap.delete(r);else if(n===xt.CHILD_REMOVED&&o===xt.CHILD_CHANGED)this.changeMap.set(r,xt.childRemovedChange(r,i.oldSnap));else if(n===xt.CHILD_CHANGED&&o===xt.CHILD_ADDED)this.changeMap.set(r,xt.childAddedChange(r,e.snapshotNode));else if(n===xt.CHILD_CHANGED&&o===xt.CHILD_CHANGED)this.changeMap.set(r,xt.childChangedChange(r,e.snapshotNode,i.oldSnap));else throw Yd("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var z9=function(){function t(){}return t.prototype.getCompleteChild=function(e){return null},t.prototype.getChildAfterChild=function(e,n,r){return null},t}(),I2=new z9,Bw=function(){function t(e,n,r){r===void 0&&(r=null),this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}return t.prototype.getCompleteChild=function(e){var n=this.viewCache_.getEventCache();if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);var r=this.optCompleteServerCache_!=null?new Zs(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(e,r)},t.prototype.getChildAfterChild=function(e,n,r){var i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),o=this.writes_.calcIndexedSlice(i,n,1,r,e);return o.length===0?null:o[0]},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var q9=function(){function t(e,n){this.viewCache=e,this.changes=n}return t}(),W9=function(){function t(e){this.filter_=e}return t.prototype.assertIndexed=function(e){Oe(e.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),Oe(e.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,r,i){var o=new B9,u,h;if(n.type===Bo.OVERWRITE){var f=n;f.source.fromUser?u=this.applyUserOverwrite_(e,f.path,f.snap,r,i,o):(Oe(f.source.fromServer,"Unknown source."),h=f.source.tagged||e.getServerCache().isFiltered()&&!f.path.isEmpty(),u=this.applyServerOverwrite_(e,f.path,f.snap,r,i,h,o))}else if(n.type===Bo.MERGE){var v=n;v.source.fromUser?u=this.applyUserMerge_(e,v.path,v.children,r,i,o):(Oe(v.source.fromServer,"Unknown source."),h=v.source.tagged||e.getServerCache().isFiltered(),u=this.applyServerMerge_(e,v.path,v.children,r,i,h,o))}else if(n.type===Bo.ACK_USER_WRITE){var _=n;_.revert?u=this.revertUserWrite_(e,_.path,r,i,o):u=this.ackUserWrite_(e,_.path,_.affectedTree,r,i,o)}else if(n.type===Bo.LISTEN_COMPLETE)u=this.listenComplete_(e,n.path,r,o);else throw Yd("Unknown operation type: "+n.type);var b=o.getChanges();return t.maybeAddValueEvent_(e,u,b),new q9(u,b)},t.maybeAddValueEvent_=function(e,n,r){var i=n.getEventCache();if(i.isFullyInitialized()){var o=i.getNode().isLeafNode()||i.getNode().isEmpty(),u=e.getCompleteEventSnap();(r.length>0||!e.getEventCache().isFullyInitialized()||o&&!i.getNode().equals(u)||!i.getNode().getPriority().equals(u.getPriority()))&&r.push(xt.valueChange(n.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(e,n,r,i,o){var u=e.getEventCache();if(r.shadowingWrite(n)!=null)return e;var h=void 0,f=void 0;if(n.isEmpty())if(Oe(e.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),e.getServerCache().isFiltered()){var v=e.getCompleteServerSnap(),_=v instanceof mt?v:mt.EMPTY_NODE,b=r.calcCompleteEventChildren(_);h=this.filter_.updateFullNode(e.getEventCache().getNode(),b,o)}else{var S=r.calcCompleteEventCache(e.getCompleteServerSnap());h=this.filter_.updateFullNode(e.getEventCache().getNode(),S,o)}else{var I=n.getFront();if(I===".priority"){Oe(n.getLength()===1,"Can't have a priority with additional path components");var M=u.getNode();f=e.getServerCache().getNode();var D=r.calcEventCacheAfterServerOverwrite(n,M,f);D!=null?h=this.filter_.updatePriority(M,D):h=u.getNode()}else{var ne=n.popFront(),z=void 0;if(u.isCompleteForChild(I)){f=e.getServerCache().getNode();var Y=r.calcEventCacheAfterServerOverwrite(n,u.getNode(),f);Y!=null?z=u.getNode().getImmediateChild(I).updateChild(ne,Y):z=u.getNode().getImmediateChild(I)}else z=r.calcCompleteChild(I,e.getServerCache());z!=null?h=this.filter_.updateChild(u.getNode(),I,z,ne,i,o):h=u.getNode()}}return e.updateEventSnap(h,u.isFullyInitialized()||n.isEmpty(),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(e,n,r,i,o,u,h){var f=e.getServerCache(),v,_=u?this.filter_:this.filter_.getIndexedFilter();if(n.isEmpty())v=_.updateFullNode(f.getNode(),r,null);else if(_.filtersNodes()&&!f.isFiltered()){var b=f.getNode().updateChild(n,r);v=_.updateFullNode(f.getNode(),b,null)}else{var S=n.getFront();if(!f.isCompleteForPath(n)&&n.getLength()>1)return e;var I=n.popFront(),M=f.getNode().getImmediateChild(S),D=M.updateChild(I,r);S===".priority"?v=_.updatePriority(f.getNode(),D):v=_.updateChild(f.getNode(),S,D,I,I2,null)}var ne=e.updateServerSnap(v,f.isFullyInitialized()||n.isEmpty(),_.filtersNodes()),z=new Bw(i,ne,o);return this.generateEventCacheAfterServerEvent_(ne,n,i,z,h)},t.prototype.applyUserOverwrite_=function(e,n,r,i,o,u){var h=e.getEventCache(),f,v,_=new Bw(i,e,o);if(n.isEmpty())v=this.filter_.updateFullNode(e.getEventCache().getNode(),r,u),f=e.updateEventSnap(v,!0,this.filter_.filtersNodes());else{var b=n.getFront();if(b===".priority")v=this.filter_.updatePriority(e.getEventCache().getNode(),r),f=e.updateEventSnap(v,h.isFullyInitialized(),h.isFiltered());else{var S=n.popFront(),I=h.getNode().getImmediateChild(b),M=void 0;if(S.isEmpty())M=r;else{var D=_.getCompleteChild(b);D!=null?S.getBack()===".priority"&&D.getChild(S.parent()).isEmpty()?M=D:M=D.updateChild(S,r):M=mt.EMPTY_NODE}if(I.equals(M))f=e;else{var ne=this.filter_.updateChild(h.getNode(),b,M,S,_,u);f=e.updateEventSnap(ne,h.isFullyInitialized(),this.filter_.filtersNodes())}}}return f},t.cacheHasChild_=function(e,n){return e.getEventCache().isCompleteForChild(n)},t.prototype.applyUserMerge_=function(e,n,r,i,o,u){var h=this,f=e;return r.foreach(function(v,_){var b=n.child(v);t.cacheHasChild_(e,b.getFront())&&(f=h.applyUserOverwrite_(f,b,_,i,o,u))}),r.foreach(function(v,_){var b=n.child(v);t.cacheHasChild_(e,b.getFront())||(f=h.applyUserOverwrite_(f,b,_,i,o,u))}),f},t.prototype.applyMerge_=function(e,n){return n.foreach(function(r,i){e=e.updateChild(r,i)}),e},t.prototype.applyServerMerge_=function(e,n,r,i,o,u,h){var f=this;if(e.getServerCache().getNode().isEmpty()&&!e.getServerCache().isFullyInitialized())return e;var v=e,_;n.isEmpty()?_=r:_=ji.Empty.setTree(n,r);var b=e.getServerCache().getNode();return _.children.inorderTraversal(function(S,I){if(b.hasChild(S)){var M=e.getServerCache().getNode().getImmediateChild(S),D=f.applyMerge_(M,I);v=f.applyServerOverwrite_(v,new $e(S),D,i,o,u,h)}}),_.children.inorderTraversal(function(S,I){var M=!e.getServerCache().isCompleteForChild(S)&&I.value==null;if(!b.hasChild(S)&&!M){var D=e.getServerCache().getNode().getImmediateChild(S),ne=f.applyMerge_(D,I);v=f.applyServerOverwrite_(v,new $e(S),ne,i,o,u,h)}}),v},t.prototype.ackUserWrite_=function(e,n,r,i,o,u){if(i.shadowingWrite(n)!=null)return e;var h=e.getServerCache().isFiltered(),f=e.getServerCache();if(r.value!=null){if(n.isEmpty()&&f.isFullyInitialized()||f.isCompleteForPath(n))return this.applyServerOverwrite_(e,n,f.getNode().getChild(n),i,o,h,u);if(n.isEmpty()){var v=ji.Empty;return f.getNode().forEachChild(nu,function(b,S){v=v.set(new $e(b),S)}),this.applyServerMerge_(e,n,v,i,o,h,u)}else return e}else{var _=ji.Empty;return r.foreach(function(b,S){var I=n.child(b);f.isCompleteForPath(I)&&(_=_.set(b,f.getNode().getChild(I)))}),this.applyServerMerge_(e,n,_,i,o,h,u)}},t.prototype.listenComplete_=function(e,n,r,i){var o=e.getServerCache(),u=e.updateServerSnap(o.getNode(),o.isFullyInitialized()||n.isEmpty(),o.isFiltered());return this.generateEventCacheAfterServerEvent_(u,n,r,I2,i)},t.prototype.revertUserWrite_=function(e,n,r,i,o){var u;if(r.shadowingWrite(n)!=null)return e;var h=new Bw(r,e,i),f=e.getEventCache().getNode(),v=void 0;if(n.isEmpty()||n.getFront()===".priority"){var _=void 0;if(e.getServerCache().isFullyInitialized())_=r.calcCompleteEventCache(e.getCompleteServerSnap());else{var b=e.getServerCache().getNode();Oe(b instanceof mt,"serverChildren would be complete if leaf node"),_=r.calcCompleteEventChildren(b)}_=_,v=this.filter_.updateFullNode(f,_,o)}else{var S=n.getFront(),I=r.calcCompleteChild(S,e.getServerCache());I==null&&e.getServerCache().isCompleteForChild(S)&&(I=f.getImmediateChild(S)),I!=null?v=this.filter_.updateChild(f,S,I,n.popFront(),h,o):e.getEventCache().getNode().hasChild(S)?v=this.filter_.updateChild(f,S,mt.EMPTY_NODE,n.popFront(),h,o):v=f,v.isEmpty()&&e.getServerCache().isFullyInitialized()&&(u=r.calcCompleteEventCache(e.getCompleteServerSnap()),u.isLeafNode()&&(v=this.filter_.updateFullNode(v,u,o)))}return u=e.getServerCache().isFullyInitialized()||r.shadowingWrite($e.Empty)!=null,e.updateEventSnap(v,u,this.filter_.filtersNodes())},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var G9=function(){function t(e){this.query_=e,this.index_=this.query_.getQueryParams().getIndex()}return t.prototype.generateEventsForChanges=function(e,n,r){var i=this,o=[],u=[];return e.forEach(function(h){h.type===xt.CHILD_CHANGED&&i.index_.indexedValueChanged(h.oldSnap,h.snapshotNode)&&u.push(xt.childMovedChange(h.childName,h.snapshotNode))}),this.generateEventsForType_(o,xt.CHILD_REMOVED,e,r,n),this.generateEventsForType_(o,xt.CHILD_ADDED,e,r,n),this.generateEventsForType_(o,xt.CHILD_MOVED,u,r,n),this.generateEventsForType_(o,xt.CHILD_CHANGED,e,r,n),this.generateEventsForType_(o,xt.VALUE,e,r,n),o},t.prototype.generateEventsForType_=function(e,n,r,i,o){var u=this,h=r.filter(function(f){return f.type===n});h.sort(this.compareChanges_.bind(this)),h.forEach(function(f){var v=u.materializeSingleChange_(f,o);i.forEach(function(_){_.respondsTo(f.type)&&e.push(_.createEvent(v,u.query_))})})},t.prototype.materializeSingleChange_=function(e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,this.index_)),e},t.prototype.compareChanges_=function(e,n){if(e.childName==null||n.childName==null)throw Yd("Should only compare child_ events.");var r=new Ft(e.childName,e.snapshotNode),i=new Ft(n.childName,n.snapshotNode);return this.index_.compare(r,i)},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $9=function(){function t(e,n){this.query_=e,this.eventRegistrations_=[];var r=this.query_.getQueryParams(),i=new rT(r.getIndex()),o=r.getNodeFilter();this.processor_=new W9(o);var u=n.getServerCache(),h=n.getEventCache(),f=i.updateFullNode(mt.EMPTY_NODE,u.getNode(),null),v=o.updateFullNode(mt.EMPTY_NODE,h.getNode(),null),_=new Zs(f,u.isFullyInitialized(),i.filtersNodes()),b=new Zs(v,h.isFullyInitialized(),o.filtersNodes());this.viewCache_=new yL(b,_),this.eventGenerator_=new G9(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteServerCache=function(e){var n=this.viewCache_.getCompleteServerSnap();return n&&(this.query_.getQueryParams().loadsAllData()||!e.isEmpty()&&!n.getImmediateChild(e.getFront()).isEmpty())?n.getChild(e):null},t.prototype.isEmpty=function(){return this.eventRegistrations_.length===0},t.prototype.addEventRegistration=function(e){this.eventRegistrations_.push(e)},t.prototype.removeEventRegistration=function(e,n){var r=[];if(n){Oe(e==null,"A cancel should cancel all event registrations.");var i=this.query_.path;this.eventRegistrations_.forEach(function(f){n=n;var v=f.createCancelEvent(n,i);v&&r.push(v)})}if(e){for(var o=[],u=0;u<this.eventRegistrations_.length;++u){var h=this.eventRegistrations_[u];if(!h.matches(e))o.push(h);else if(e.hasAnyCallback()){o=o.concat(this.eventRegistrations_.slice(u+1));break}}this.eventRegistrations_=o}else this.eventRegistrations_=[];return r},t.prototype.applyOperation=function(e,n,r){e.type===Bo.MERGE&&e.source.queryId!==null&&(Oe(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),Oe(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var i=this.viewCache_,o=this.processor_.applyOperation(i,e,n,r);return this.processor_.assertIndexed(o.viewCache),Oe(o.viewCache.getServerCache().isFullyInitialized()||!i.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=o.viewCache,this.generateEventsForChanges_(o.changes,o.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(e){var n=this.viewCache_.getEventCache(),r=[];if(!n.getNode().isLeafNode()){var i=n.getNode();i.forEachChild(en,function(o,u){r.push(xt.childAddedChange(o,u))})}return n.isFullyInitialized()&&r.push(xt.valueChange(n.getNode())),this.generateEventsForChanges_(r,n.getNode(),e)},t.prototype.generateEventsForChanges_=function(e,n,r){var i=r?[r]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(e,n,i)},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ag,_L=function(){function t(){this.views=new Map}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Oe(Ag,"Reference.ts has not been loaded"),Ag},set:function(e){Oe(!Ag,"__referenceConstructor has already been defined"),Ag=e},enumerable:!0,configurable:!0}),t.prototype.isEmpty=function(){return this.views.size===0},t.prototype.applyOperation=function(e,n,r){var i,o,u=e.source.queryId;if(u!==null){var h=this.views.get(u);return Oe(h!=null,"SyncTree gave us an op for an invalid query."),h.applyOperation(e,n,r)}else{var f=[];try{for(var v=zn(this.views.values()),_=v.next();!_.done;_=v.next()){var h=_.value;f=f.concat(h.applyOperation(e,n,r))}}catch(b){i={error:b}}finally{try{_&&!_.done&&(o=v.return)&&o.call(v)}finally{if(i)throw i.error}}return f}},t.prototype.addEventRegistration=function(e,n,r,i,o){var u=e.queryIdentifier(),h=this.views.get(u);if(!h){var f=r.calcCompleteEventCache(o?i:null),v=!1;f?v=!0:i instanceof mt?(f=r.calcCompleteEventChildren(i),v=!1):(f=mt.EMPTY_NODE,v=!1);var _=new yL(new Zs(f,v,!1),new Zs(i,o,!1));h=new $9(e,_),this.views.set(u,h)}return h.addEventRegistration(n),h.getInitialEvents(n)},t.prototype.removeEventRegistration=function(e,n,r){var i,o,u=e.queryIdentifier(),h=[],f=[],v=this.hasCompleteView();if(u==="default")try{for(var _=zn(this.views.entries()),b=_.next();!b.done;b=_.next()){var S=fd(b.value,2),I=S[0],M=S[1];f=f.concat(M.removeEventRegistration(n,r)),M.isEmpty()&&(this.views.delete(I),M.getQuery().getQueryParams().loadsAllData()||h.push(M.getQuery()))}}catch(D){i={error:D}}finally{try{b&&!b.done&&(o=_.return)&&o.call(_)}finally{if(i)throw i.error}}else{var M=this.views.get(u);M&&(f=f.concat(M.removeEventRegistration(n,r)),M.isEmpty()&&(this.views.delete(u),M.getQuery().getQueryParams().loadsAllData()||h.push(M.getQuery())))}return v&&!this.hasCompleteView()&&h.push(new t.__referenceConstructor(e.repo,e.path)),{removed:h,events:f}},t.prototype.getQueryViews=function(){var e,n,r=[];try{for(var i=zn(this.views.values()),o=i.next();!o.done;o=i.next()){var u=o.value;u.getQuery().getQueryParams().loadsAllData()||r.push(u)}}catch(h){e={error:h}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r},t.prototype.getCompleteServerCache=function(e){var n,r,i=null;try{for(var o=zn(this.views.values()),u=o.next();!u.done;u=o.next()){var h=u.value;i=i||h.getCompleteServerCache(e)}}catch(f){n={error:f}}finally{try{u&&!u.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i},t.prototype.viewForQuery=function(e){var n=e.getQueryParams();if(n.loadsAllData())return this.getCompleteView();var r=e.queryIdentifier();return this.views.get(r)},t.prototype.viewExistsForQuery=function(e){return this.viewForQuery(e)!=null},t.prototype.hasCompleteView=function(){return this.getCompleteView()!=null},t.prototype.getCompleteView=function(){var e,n;try{for(var r=zn(this.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;if(o.getQuery().getQueryParams().loadsAllData())return o}}catch(u){e={error:u}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var C2=function(){function t(e){this.writeTree_=e}return t.prototype.addWrite=function(e,n){if(e.isEmpty())return new t(new ji(n));var r=this.writeTree_.findRootMostValueAndPath(e);if(r!=null){var i=r.path,o=r.value,u=$e.relativePath(i,e);return o=o.updateChild(u,n),new t(this.writeTree_.set(i,o))}else{var h=new ji(n),f=this.writeTree_.setTree(e,h);return new t(f)}},t.prototype.addWrites=function(e,n){var r=this;return lr(n,function(i,o){r=r.addWrite(e.child(i),o)}),r},t.prototype.removeWrite=function(e){if(e.isEmpty())return t.Empty;var n=this.writeTree_.setTree(e,ji.Empty);return new t(n)},t.prototype.hasCompleteWrite=function(e){return this.getCompleteNode(e)!=null},t.prototype.getCompleteNode=function(e){var n=this.writeTree_.findRootMostValueAndPath(e);return n!=null?this.writeTree_.get(n.path).getChild($e.relativePath(n.path,e)):null},t.prototype.getCompleteChildren=function(){var e=[],n=this.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(en,function(r,i){e.push(new Ft(r,i))}):this.writeTree_.children.inorderTraversal(function(r,i){i.value!=null&&e.push(new Ft(r,i.value))}),e},t.prototype.childCompoundWrite=function(e){if(e.isEmpty())return this;var n=this.getCompleteNode(e);return n!=null?new t(new ji(n)):new t(this.writeTree_.subtree(e))},t.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},t.prototype.apply=function(e){return wL($e.Empty,this.writeTree_,e)},t.Empty=new t(new ji(null)),t}();function wL(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal(function(i,o){i===".priority"?(Oe(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):n=wL(t.child(i),o,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(t.child(".priority"),r)),n}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var H9=function(){function t(){this.visibleWrites_=C2.Empty,this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(e){return new K9(e,this)},t.prototype.addOverwrite=function(e,n,r,i){Oe(r>this.lastWriteId_,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),this.allWrites_.push({path:e,snap:n,writeId:r,visible:i}),i&&(this.visibleWrites_=this.visibleWrites_.addWrite(e,n)),this.lastWriteId_=r},t.prototype.addMerge=function(e,n,r){Oe(r>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:e,children:n,writeId:r,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(e,n),this.lastWriteId_=r},t.prototype.getWrite=function(e){for(var n=0;n<this.allWrites_.length;n++){var r=this.allWrites_[n];if(r.writeId===e)return r}return null},t.prototype.removeWrite=function(e){var n=this,r=this.allWrites_.findIndex(function(_){return _.writeId===e});Oe(r>=0,"removeWrite called with nonexistent writeId.");var i=this.allWrites_[r];this.allWrites_.splice(r,1);for(var o=i.visible,u=!1,h=this.allWrites_.length-1;o&&h>=0;){var f=this.allWrites_[h];f.visible&&(h>=r&&this.recordContainsPath_(f,i.path)?o=!1:i.path.contains(f.path)&&(u=!0)),h--}if(o){if(u)return this.resetTree_(),!0;if(i.snap)this.visibleWrites_=this.visibleWrites_.removeWrite(i.path);else{var v=i.children;lr(v,function(_){n.visibleWrites_=n.visibleWrites_.removeWrite(i.path.child(_))})}return!0}else return!1},t.prototype.getCompleteWriteData=function(e){return this.visibleWrites_.getCompleteNode(e)},t.prototype.calcCompleteEventCache=function(e,n,r,i){if(!r&&!i){var o=this.visibleWrites_.getCompleteNode(e);if(o!=null)return o;var u=this.visibleWrites_.childCompoundWrite(e);if(u.isEmpty())return n;if(n==null&&!u.hasCompleteWrite($e.Empty))return null;var h=n||mt.EMPTY_NODE;return u.apply(h)}else{var f=this.visibleWrites_.childCompoundWrite(e);if(!i&&f.isEmpty())return n;if(!i&&n==null&&!f.hasCompleteWrite($e.Empty))return null;var v=function(S){return(S.visible||i)&&(!r||!~r.indexOf(S.writeId))&&(S.path.contains(e)||e.contains(S.path))},_=t.layerTree_(this.allWrites_,v,e),h=n||mt.EMPTY_NODE;return _.apply(h)}},t.prototype.calcCompleteEventChildren=function(e,n){var r=mt.EMPTY_NODE,i=this.visibleWrites_.getCompleteNode(e);if(i)return i.isLeafNode()||i.forEachChild(en,function(h,f){r=r.updateImmediateChild(h,f)}),r;if(n){var o=this.visibleWrites_.childCompoundWrite(e);return n.forEachChild(en,function(h,f){var v=o.childCompoundWrite(new $e(h)).apply(f);r=r.updateImmediateChild(h,v)}),o.getCompleteChildren().forEach(function(h){r=r.updateImmediateChild(h.name,h.node)}),r}else{var u=this.visibleWrites_.childCompoundWrite(e);return u.getCompleteChildren().forEach(function(h){r=r.updateImmediateChild(h.name,h.node)}),r}},t.prototype.calcEventCacheAfterServerOverwrite=function(e,n,r,i){Oe(r||i,"Either existingEventSnap or existingServerSnap must exist");var o=e.child(n);if(this.visibleWrites_.hasCompleteWrite(o))return null;var u=this.visibleWrites_.childCompoundWrite(o);return u.isEmpty()?i.getChild(n):u.apply(i.getChild(n))},t.prototype.calcCompleteChild=function(e,n,r){var i=e.child(n),o=this.visibleWrites_.getCompleteNode(i);if(o!=null)return o;if(r.isCompleteForChild(n)){var u=this.visibleWrites_.childCompoundWrite(i);return u.apply(r.getNode().getImmediateChild(n))}else return null},t.prototype.shadowingWrite=function(e){return this.visibleWrites_.getCompleteNode(e)},t.prototype.calcIndexedSlice=function(e,n,r,i,o,u){var h,f=this.visibleWrites_.childCompoundWrite(e),v=f.getCompleteNode($e.Empty);if(v!=null)h=v;else if(n!=null)h=f.apply(n);else return[];if(h=h.withIndex(u),!h.isEmpty()&&!h.isLeafNode()){for(var _=[],b=u.getCompare(),S=o?h.getReverseIteratorFrom(r,u):h.getIteratorFrom(r,u),I=S.getNext();I&&_.length<i;)b(I,r)!==0&&_.push(I),I=S.getNext();return _}else return[]},t.prototype.recordContainsPath_=function(e,n){if(e.snap)return e.path.contains(n);for(var r in e.children)if(e.children.hasOwnProperty(r)&&e.path.child(r).contains(n))return!0;return!1},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,$e.Empty),this.allWrites_.length>0?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},t.DefaultFilter_=function(e){return e.visible},t.layerTree_=function(e,n,r){for(var i=C2.Empty,o=0;o<e.length;++o){var u=e[o];if(n(u)){var h=u.path,f=void 0;if(u.snap)r.contains(h)?(f=$e.relativePath(r,h),i=i.addWrite(f,u.snap)):h.contains(r)&&(f=$e.relativePath(h,r),i=i.addWrite($e.Empty,u.snap.getChild(f)));else if(u.children){if(r.contains(h))f=$e.relativePath(r,h),i=i.addWrites(f,u.children);else if(h.contains(r))if(f=$e.relativePath(h,r),f.isEmpty())i=i.addWrites($e.Empty,u.children);else{var v=Uo(u.children,f.getFront());if(v){var _=v.getChild(f.popFront());i=i.addWrite($e.Empty,_)}}}else throw Yd("WriteRecord should have .snap or .children")}}return i},t}(),K9=function(){function t(e,n){this.treePath_=e,this.writeTree_=n}return t.prototype.calcCompleteEventCache=function(e,n,r){return this.writeTree_.calcCompleteEventCache(this.treePath_,e,n,r)},t.prototype.calcCompleteEventChildren=function(e){return this.writeTree_.calcCompleteEventChildren(this.treePath_,e)},t.prototype.calcEventCacheAfterServerOverwrite=function(e,n,r){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,e,n,r)},t.prototype.shadowingWrite=function(e){return this.writeTree_.shadowingWrite(this.treePath_.child(e))},t.prototype.calcIndexedSlice=function(e,n,r,i,o){return this.writeTree_.calcIndexedSlice(this.treePath_,e,n,r,i,o)},t.prototype.calcCompleteChild=function(e,n){return this.writeTree_.calcCompleteChild(this.treePath_,e,n)},t.prototype.child=function(e){return new t(this.treePath_.child(e),this.writeTree_)},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var x2=function(){function t(e){this.listenProvider_=e,this.syncPointTree_=ji.Empty,this.pendingWriteTree_=new H9,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return t.prototype.applyUserOverwrite=function(e,n,r,i){return this.pendingWriteTree_.addOverwrite(e,n,r,i),i?this.applyOperationToSyncPoints_(new lv(js.User,e,n)):[]},t.prototype.applyUserMerge=function(e,n,r){this.pendingWriteTree_.addMerge(e,n,r);var i=ji.fromObject(n);return this.applyOperationToSyncPoints_(new Vw(js.User,e,i))},t.prototype.ackUserWrite=function(e,n){n===void 0&&(n=!1);var r=this.pendingWriteTree_.getWrite(e),i=this.pendingWriteTree_.removeWrite(e);if(i){var o=ji.Empty;return r.snap!=null?o=o.set($e.Empty,!0):lr(r.children,function(u,h){o=o.set(new $e(u),h)}),this.applyOperationToSyncPoints_(new U9(r.path,o,n))}else return[]},t.prototype.applyServerOverwrite=function(e,n){return this.applyOperationToSyncPoints_(new lv(js.Server,e,n))},t.prototype.applyServerMerge=function(e,n){var r=ji.fromObject(n);return this.applyOperationToSyncPoints_(new Vw(js.Server,e,r))},t.prototype.applyListenComplete=function(e){return this.applyOperationToSyncPoints_(new T2(js.Server,e))},t.prototype.applyTaggedQueryOverwrite=function(e,n,r){var i=this.queryKeyForTag_(r);if(i!=null){var o=t.parseQueryKey_(i),u=o.path,h=o.queryId,f=$e.relativePath(u,e),v=new lv(js.forServerTaggedQuery(h),f,n);return this.applyTaggedOperation_(u,v)}else return[]},t.prototype.applyTaggedQueryMerge=function(e,n,r){var i=this.queryKeyForTag_(r);if(i){var o=t.parseQueryKey_(i),u=o.path,h=o.queryId,f=$e.relativePath(u,e),v=ji.fromObject(n),_=new Vw(js.forServerTaggedQuery(h),f,v);return this.applyTaggedOperation_(u,_)}else return[]},t.prototype.applyTaggedListenComplete=function(e,n){var r=this.queryKeyForTag_(n);if(r){var i=t.parseQueryKey_(r),o=i.path,u=i.queryId,h=$e.relativePath(o,e),f=new T2(js.forServerTaggedQuery(u),h);return this.applyTaggedOperation_(o,f)}else return[]},t.prototype.addEventRegistration=function(e,n){var r=e.path,i=null,o=!1;this.syncPointTree_.foreachOnPath(r,function(D,ne){var z=$e.relativePath(D,r);i=i||ne.getCompleteServerCache(z),o=o||ne.hasCompleteView()});var u=this.syncPointTree_.get(r);u?(o=o||u.hasCompleteView(),i=i||u.getCompleteServerCache($e.Empty)):(u=new _L,this.syncPointTree_=this.syncPointTree_.set(r,u));var h;if(i!=null)h=!0;else{h=!1,i=mt.EMPTY_NODE;var f=this.syncPointTree_.subtree(r);f.foreachChild(function(D,ne){var z=ne.getCompleteServerCache($e.Empty);z&&(i=i.updateImmediateChild(D,z))})}var v=u.viewExistsForQuery(e);if(!v&&!e.getQueryParams().loadsAllData()){var _=t.makeQueryKey_(e);Oe(!this.queryToTagMap.has(_),"View does not exist, but we have a tag");var b=t.getNextQueryTag_();this.queryToTagMap.set(_,b),this.tagToQueryMap.set(b,_)}var S=this.pendingWriteTree_.childWrites(r),I=u.addEventRegistration(e,n,S,i,h);if(!v&&!o){var M=u.viewForQuery(e);I=I.concat(this.setupListener_(e,M))}return I},t.prototype.removeEventRegistration=function(e,n,r){var i=this,o=e.path,u=this.syncPointTree_.get(o),h=[];if(u&&(e.queryIdentifier()==="default"||u.viewExistsForQuery(e))){var f=u.removeEventRegistration(e,n,r);u.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var v=f.removed;h=f.events;var _=v.findIndex(function(K){return K.getQueryParams().loadsAllData()})!==-1,b=this.syncPointTree_.findOnPath(o,function(K,ue){return ue.hasCompleteView()});if(_&&!b){var S=this.syncPointTree_.subtree(o);if(!S.isEmpty())for(var I=this.collectDistinctViewsForSubTree_(S),M=0;M<I.length;++M){var D=I[M],ne=D.getQuery(),z=this.createListenerForView_(D);this.listenProvider_.startListening(t.queryForListening_(ne),this.tagForQuery_(ne),z.hashFn,z.onComplete)}}if(!b&&v.length>0&&!r)if(_){var Y=null;this.listenProvider_.stopListening(t.queryForListening_(e),Y)}else v.forEach(function(K){var ue=i.queryToTagMap.get(t.makeQueryKey_(K));i.listenProvider_.stopListening(t.queryForListening_(K),ue)});this.removeTags_(v)}return h},t.prototype.calcCompleteEventCache=function(e,n){var r=!0,i=this.pendingWriteTree_,o=this.syncPointTree_.findOnPath(e,function(u,h){var f=$e.relativePath(u,e),v=h.getCompleteServerCache(f);if(v)return v});return i.calcCompleteEventCache(e,o,n,r)},t.prototype.collectDistinctViewsForSubTree_=function(e){return e.fold(function(n,r,i){if(r&&r.hasCompleteView()){var o=r.getCompleteView();return[o]}else{var u=[];return r&&(u=r.getQueryViews()),lr(i,function(h,f){u=u.concat(f)}),u}})},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=t.makeQueryKey_(r),o=this.queryToTagMap.get(i);this.queryToTagMap.delete(i),this.tagToQueryMap.delete(o)}}},t.queryForListening_=function(e){return e.getQueryParams().loadsAllData()&&!e.getQueryParams().isDefault()?e.getRef():e},t.prototype.setupListener_=function(e,n){var r=e.path,i=this.tagForQuery_(e),o=this.createListenerForView_(n),u=this.listenProvider_.startListening(t.queryForListening_(e),i,o.hashFn,o.onComplete),h=this.syncPointTree_.subtree(r);if(i)Oe(!h.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var f=h.fold(function(b,S,I){if(!b.isEmpty()&&S&&S.hasCompleteView())return[S.getCompleteView().getQuery()];var M=[];return S&&(M=M.concat(S.getQueryViews().map(function(D){return D.getQuery()}))),lr(I,function(D,ne){M=M.concat(ne)}),M}),v=0;v<f.length;++v){var _=f[v];this.listenProvider_.stopListening(t.queryForListening_(_),this.tagForQuery_(_))}return u},t.prototype.createListenerForView_=function(e){var n=this,r=e.getQuery(),i=this.tagForQuery_(r);return{hashFn:function(){var o=e.getServerCache()||mt.EMPTY_NODE;return o.hash()},onComplete:function(o){if(o==="ok")return i?n.applyTaggedListenComplete(r.path,i):n.applyListenComplete(r.path);var u=a9(o,r);return n.removeEventRegistration(r,null,u)}}},t.makeQueryKey_=function(e){return e.path.toString()+"$"+e.queryIdentifier()},t.parseQueryKey_=function(e){var n=e.indexOf("$");return Oe(n!==-1&&n<e.length-1,"Bad queryKey."),{queryId:e.substr(n+1),path:new $e(e.substr(0,n))}},t.prototype.queryKeyForTag_=function(e){return this.tagToQueryMap.get(e)},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return this.queryToTagMap.get(n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(e,n){var r=this.syncPointTree_.get(e);Oe(r,"Missing sync point for query tag that we're tracking");var i=this.pendingWriteTree_.childWrites(e);return r.applyOperation(n,i,null)},t.prototype.applyOperationToSyncPoints_=function(e){return this.applyOperationHelper_(e,this.syncPointTree_,null,this.pendingWriteTree_.childWrites($e.Empty))},t.prototype.applyOperationHelper_=function(e,n,r,i){if(e.path.isEmpty())return this.applyOperationDescendantsHelper_(e,n,r,i);var o=n.get($e.Empty);r==null&&o!=null&&(r=o.getCompleteServerCache($e.Empty));var u=[],h=e.path.getFront(),f=e.operationForChild(h),v=n.children.get(h);if(v&&f){var _=r?r.getImmediateChild(h):null,b=i.child(h);u=u.concat(this.applyOperationHelper_(f,v,_,b))}return o&&(u=u.concat(o.applyOperation(e,i,r))),u},t.prototype.applyOperationDescendantsHelper_=function(e,n,r,i){var o=this,u=n.get($e.Empty);r==null&&u!=null&&(r=u.getCompleteServerCache($e.Empty));var h=[];return n.children.inorderTraversal(function(f,v){var _=r?r.getImmediateChild(f):null,b=i.child(f),S=e.operationForChild(f);S&&(h=h.concat(o.applyOperationDescendantsHelper_(S,v,_,b)))}),u&&(h=h.concat(u.applyOperation(e,i,r))),h},t.nextQueryTag_=1,t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Y9=function(){function t(){this.rootNode_=mt.EMPTY_NODE}return t.prototype.getNode=function(e){return this.rootNode_.getChild(e)},t.prototype.updateSnapshot=function(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Q9=function(){function t(e,n){var r=this;this.app_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.get().then(function(i){return r.auth_=i})}return t.prototype.getToken=function(e){return this.auth_?this.auth_.getToken(e).catch(function(n){return n&&n.code==="auth/token-not-initialized"?(Br("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)}):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(e){this.auth_?this.auth_.addAuthTokenListener(e):(setTimeout(function(){return e(null)},0),this.authProvider_.get().then(function(n){return n.addAuthTokenListener(e)}))},t.prototype.removeTokenChangeListener=function(e){this.authProvider_.get().then(function(n){return n.removeAuthTokenListener(e)})},t.prototype.notifyForInvalidToken=function(){var e='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',zr(e)},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var X9=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(e,n){n===void 0&&(n=1),yo(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n},t.prototype.get=function(){return dq(this.counters_)},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jv=function(){function t(){}return t.getCollection=function(e){var n=e.toString();return this.collections_[n]||(this.collections_[n]=new X9),this.collections_[n]},t.getOrCreateReporter=function(e,n){var r=e.toString();return this.reporters_[r]||(this.reporters_[r]=n()),this.reporters_[r]},t.collections_={},t.reporters_={},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var EL=function(){function t(e){this.collection_=e,this.last_=null}return t.prototype.get=function(){var e=this.collection_.get(),n=wn({},e);return this.last_&&lr(this.last_,function(r,i){n[r]=n[r]-i}),this.last_=e,n},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var N2=10*1e3,J9=30*1e3,Z9=5*60*1e3,eW=function(){function t(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new EL(e);var r=N2+(J9-N2)*Math.random();Vf(this.reportStats_.bind(this),Math.floor(r))}return t.prototype.includeStat=function(e){this.statsToReport_[e]=!0},t.prototype.reportStats_=function(){var e=this,n=this.statsListener_.get(),r={},i=!1;lr(n,function(o,u){u>0&&yo(e.statsToReport_,o)&&(r[o]=u,i=!0)}),i&&this.server_.reportStats(r),Vf(this.reportStats_.bind(this),Math.floor(Math.random()*2*Z9))},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tW=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t.prototype.queueEvents=function(e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();n!==null&&!o.equals(n.getPath())&&(this.eventLists_.push(n),n=null),n===null&&(n=new nW(o)),n.add(i)}n&&this.eventLists_.push(n)},t.prototype.raiseEventsAtPath=function(e,n){this.queueEvents(n),this.raiseQueuedEventsMatchingPredicate_(function(r){return r.equals(e)})},t.prototype.raiseEventsForChangedPath=function(e,n){this.queueEvents(n),this.raiseQueuedEventsMatchingPredicate_(function(r){return r.contains(e)||e.contains(r)})},t.prototype.raiseQueuedEventsMatchingPredicate_=function(e){this.recursionDepth_++;for(var n=!0,r=0;r<this.eventLists_.length;r++){var i=this.eventLists_[r];if(i){var o=i.getPath();e(o)?(this.eventLists_[r].raise(),this.eventLists_[r]=null):n=!1}}n&&(this.eventLists_=[]),this.recursionDepth_--},t}(),nW=function(){function t(e){this.path_=e,this.events_=[]}return t.prototype.add=function(e){this.events_.push(e)},t.prototype.raise=function(){for(var e=0;e<this.events_.length;e++){var n=this.events_[e];if(n!==null){this.events_[e]=null;var r=n.getEventRunner();nl&&Br("event: "+n.toString()),ph(r)}}},t.prototype.getPath=function(){return this.path_},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var SL=function(){function t(e){this.allowedEvents_=e,this.listeners_={},Oe(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(Array.isArray(this.listeners_[e]))for(var i=va(this.listeners_[e]),o=0;o<i.length;o++)i[o].callback.apply(i[o].context,n)},t.prototype.on=function(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});var i=this.getInitialEvent(e);i&&n.apply(r,i)},t.prototype.off=function(e,n,r){this.validateEventType_(e);for(var i=this.listeners_[e]||[],o=0;o<i.length;o++)if(i[o].callback===n&&(!r||r===i[o].context)){i.splice(o,1);return}},t.prototype.validateEventType_=function(e){Oe(this.allowedEvents_.find(function(n){return n===e}),"Unknown event: "+e)},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rW=function(t){Et(e,t);function e(){var n=t.call(this,["visible"])||this,r,i;return typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(i="visibilitychange",r="hidden"):typeof document.mozHidden<"u"?(i="mozvisibilitychange",r="mozHidden"):typeof document.msHidden<"u"?(i="msvisibilitychange",r="msHidden"):typeof document.webkitHidden<"u"&&(i="webkitvisibilitychange",r="webkitHidden")),n.visible_=!0,i&&document.addEventListener(i,function(){var o=!document[r];o!==n.visible_&&(n.visible_=o,n.trigger("visible",o))},!1),n}return e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(n){return Oe(n==="visible","Unknown event type: "+n),[this.visible_]},e}(SL);/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var A2=function(t){Et(e,t);function e(){var n=t.call(this,["online"])||this;return n.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Hb()&&(window.addEventListener("online",function(){n.online_||(n.online_=!0,n.trigger("online",!0))},!1),window.addEventListener("offline",function(){n.online_&&(n.online_=!1,n.trigger("online",!1))},!1)),n}return e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(n){return Oe(n==="online","Unknown event type: "+n),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(SL);/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var iW=function(){function t(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(e,n){var r=this;this.pendingResponses[e]=n;for(var i=function(){var h=o.pendingResponses[o.currentResponseNum];delete o.pendingResponses[o.currentResponseNum];for(var f=function(_){h[_]&&ph(function(){r.onMessage_(h[_])})},v=0;v<h.length;++v)f(v);if(o.currentResponseNum===o.closeAfterResponse)return o.onClose&&(o.onClose(),o.onClose=null),"break";o.currentResponseNum++},o=this;this.pendingResponses[this.currentResponseNum];){var u=i();if(u==="break")break}},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var k2="start",oW="close",sW="pLPCommand",aW="pRTLPCB",bL="id",TL="pw",IL="ser",uW="cb",lW="seg",cW="ts",hW="d",fW="dframe",CL=1870,xL=30,dW=CL-xL,pW=25e3,gW=3e4,iT=function(){function t(e,n,r,i){this.connId=e,this.repoInfo=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Jd(e),this.stats_=Jv.getCollection(n),this.urlFn=function(o){return n.connectionURL(sL,o)}}return t.prototype.open=function(e,n){var r=this;this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new iW(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){r.log_("Timed out trying to connect."),r.onClosed_(),r.connectTimeoutTimer_=null},Math.floor(gW)),r9(function(){if(!r.isClosed_){r.scriptTagHolder=new vW(function(){for(var u=[],h=0;h<arguments.length;h++)u[h]=arguments[h];var f=fd(u,5),v=f[0],_=f[1],b=f[2];if(f[3],f[4],r.incrementIncomingBytes_(u),!!r.scriptTagHolder)if(r.connectTimeoutTimer_&&(clearTimeout(r.connectTimeoutTimer_),r.connectTimeoutTimer_=null),r.everConnected_=!0,v===k2)r.id=_,r.password=b;else if(v===oW)_?(r.scriptTagHolder.sendNewPolls=!1,r.myPacketOrderer.closeAfter(_,function(){r.onClosed_()})):r.onClosed_();else throw new Error("Unrecognized command received: "+v)},function(){for(var u=[],h=0;h<arguments.length;h++)u[h]=arguments[h];var f=fd(u,2),v=f[0],_=f[1];r.incrementIncomingBytes_(u),r.myPacketOrderer.handleResponse(v,_)},function(){r.onClosed_()},r.urlFn);var i={};i[k2]="t",i[IL]=Math.floor(Math.random()*1e8),r.scriptTagHolder.uniqueCallbackIdentifier&&(i[uW]=r.scriptTagHolder.uniqueCallbackIdentifier),i[ZD]=Yv,r.transportSessionId&&(i[eL]=r.transportSessionId),r.lastSessionId&&(i[iL]=r.lastSessionId),typeof location<"u"&&location.href&&location.href.indexOf(rL)!==-1&&(i[tL]=nL);var o=r.urlFn(i);r.log_("Connecting via long-poll to "+o),r.scriptTagHolder.addTag(o,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return ua()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!o9()&&!s9()},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(e){var n=wr(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);for(var r=fq(n),i=XD(r,dW),o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(e,n){if(!ua()){this.myDisconnFrame=document.createElement("iframe");var r={};r[fW]="t",r[bL]=e,r[TL]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(e){var n=wr(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)},t}(),vW=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,ua())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=KD(),window[sW+this.uniqueCallbackIdentifier]=e,window[aW+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var o="";if(this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"){var u=document.domain;o='<script>document.domain="'+u+'";<\/script>'}var h="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(h),this.myIFrame.doc.close()}catch(f){Br("frame writing exception"),f.stack&&Br(f.stack),Br(f)}}}return t.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{var n=e.contentWindow.document;n||Br("No IE domain setting required")}catch{var r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},t.prototype.close=function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){e.myIFrame!==null&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)},Math.floor(0)));var n=this.onDisconnect;n&&(this.onDisconnect=null,n())},t.prototype.startLongPoll=function(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e[bL]=this.myID,e[TL]=this.myPW,e[IL]=this.currentSerial;for(var n=this.urlFn(e),r="",i=0;this.pendingSegs.length>0;){var o=this.pendingSegs[0];if(o.d.length+xL+r.length<=CL){var u=this.pendingSegs.shift();r=r+"&"+lW+i+"="+u.seg+"&"+cW+i+"="+u.ts+"&"+hW+i+"="+u.d,i++}else break}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1},t.prototype.enqueueSegment=function(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(e,n){var r=this;this.outstandingRequests.add(n);var i=function(){r.outstandingRequests.delete(n),r.newRequest_()},o=setTimeout(i,Math.floor(pW)),u=function(){clearTimeout(o),i()};this.addTag(e,u)},t.prototype.addTag=function(e,n){var r=this;ua()?this.doNodeLongPoll(e,n):setTimeout(function(){try{if(!r.sendNewPolls)return;var i=r.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){var o=i.readyState;(!o||o==="loaded"||o==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=function(){Br("Long-poll script failed to load: "+e),r.sendNewPolls=!1,r.close()},r.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))},t}();/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oT="";function mW(t){oT=t}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yW=16384,_W=45e3,Bf=null;typeof MozWebSocket<"u"?Bf=MozWebSocket:typeof WebSocket<"u"&&(Bf=WebSocket);var $u=function(){function t(e,n,r,i){this.connId=e,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Jd(this.connId),this.stats_=Jv.getCollection(n),this.connURL=t.connectionURL_(n,r,i)}return t.connectionURL_=function(e,n,r){var i={};return i[ZD]=Yv,!ua()&&typeof location<"u"&&location.href&&location.href.indexOf(rL)!==-1&&(i[tL]=nL),n&&(i[eL]=n),r&&(i[iL]=r),e.connectionURL(oL,i)},t.prototype.open=function(e,n){var r=this;this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ju.set("previous_websocket_failure",!0);try{if(ua()){var i=sv.NODE_ADMIN?"AdminNode":"Node",o={headers:{"User-Agent":"Firebase/"+Yv+"/"+oT+"/"+process.platform+"/"+i}},u=$D,h=this.connURL.indexOf("wss://")===0?u.HTTPS_PROXY||u.https_proxy:u.HTTP_PROXY||u.http_proxy;h&&(o.proxy={origin:h}),this.mySock=new Bf(this.connURL,[],o)}else this.mySock=new Bf(this.connURL)}catch(v){this.log_("Error instantiating WebSocket.");var f=v.message||v.data;f&&this.log_(f),this.onClosed_();return}this.mySock.onopen=function(){r.log_("Websocket connected."),r.everConnected_=!0},this.mySock.onclose=function(){r.log_("Websocket connection was disconnected."),r.mySock=null,r.onClosed_()},this.mySock.onmessage=function(v){r.handleIncomingFrame(v)},this.mySock.onerror=function(v){r.log_("WebSocket error.  Closing connection.");var _=v.message||v.data;_&&r.log_(_),r.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if(typeof navigator<"u"&&navigator.userAgent){var n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Bf!==null&&!t.forceDisallow_},t.previouslyFailed=function(){return Ju.isInMemoryStorage||Ju.get("previous_websocket_failure")===!0},t.prototype.markConnectionHealthy=function(){Ju.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var n=this.frames.join("");this.frames=null;var r=Kb(n);this.onMessage(r)}},t.prototype.handleNewFrameCount_=function(e){this.totalFrames=e,this.frames=[]},t.prototype.extractFrameCount_=function(e){if(Oe(this.frames===null,"We already have a frame buffer"),e.length<=6){var n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e},t.prototype.handleIncomingFrame=function(e){if(this.mySock!==null){var n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{var r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}},t.prototype.send=function(e){this.resetKeepAlive();var n=wr(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);var r=XD(n,yW);r.length>1&&this.sendString_(String(r.length));for(var i=0;i<r.length;i++)this.sendString_(r[i])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()},Math.floor(_W))},t.prototype.sendString_=function(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wW=function(){function t(e){this.initTransports_(e)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[iT,$u]},enumerable:!0,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=$u&&$u.isAvailable(),o=i&&!$u.previouslyFailed();if(e.webSocketOnly&&(i||zr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[$u];else{var u=this.transports_=[];try{for(var h=zn(t.ALL_TRANSPORTS),f=h.next();!f.done;f=h.next()){var v=f.value;v&&v.isAvailable()&&u.push(v)}}catch(_){n={error:_}}finally{try{f&&!f.done&&(r=h.return)&&r.call(h)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var EW=6e4,SW=5e3,bW=10*1024,TW=100*1024,zw="t",P2="d",IW="s",R2="r",CW="e",O2="o",D2="a",L2="n",M2="p",xW="h",NL=function(){function t(e,n,r,i,o,u,h){this.id=e,this.repoInfo_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=u,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Jd("c:"+this.id+":"),this.transportManager_=new wW(n),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var e=this,n=this.transportManager_.initialTransport();this.conn_=new n(this.nextTransportId_(),this.repoInfo_,void 0,this.lastSessionId),this.primaryResponsesRequired_=n.responsesRequiredToBeHealthy||0;var r=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){e.conn_&&e.conn_.open(r,i)},Math.floor(0));var o=n.healthyTimeout||0;o>0&&(this.healthyTimeout_=Vf(function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>TW?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>bW?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))},Math.floor(o)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(e){var n=this;return function(r){e===n.conn_?n.onConnectionLost_(r):e===n.secondaryConn_?(n.log_("Secondary connection lost."),n.onSecondaryConnectionLost_()):n.log_("closing an old connection")}},t.prototype.connReceiver_=function(e){var n=this;return function(r){n.state_!==2&&(e===n.rx_?n.onPrimaryMessageReceived_(r):e===n.secondaryConn_?n.onSecondaryMessageReceived_(r):n.log_("message on old connection"))}},t.prototype.sendRequest=function(e){var n={t:"d",d:e};this.sendData_(n)},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(e){if(zw in e){var n=e[zw];n===D2?this.upgradeIfSecondaryHealthy_():n===R2?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===O2&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(e){var n=ff("t",e),r=ff("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:M2,d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:D2,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:L2,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(e){var n=ff("t",e),r=ff("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)},t.prototype.onDataMessage_=function(e){this.onPrimaryResponse_(),this.onMessage_(e)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(e){var n=ff(zw,e);if(P2 in e){var r=e[P2];if(n===xW)this.onHandshake_(r);else if(n===L2){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===IW?this.onConnectionShutdown_(r):n===R2?this.onReset_(r):n===CW?H1("Server Error: "+r):n===O2?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):H1("Unknown control packet command: "+n)}},t.prototype.onHandshake_=function(e){var n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.updateHost(i),this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Yv!==r&&zr("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)},t.prototype.startUpgrade_=function(e){var n=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var r=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(r,i),Vf(function(){n.secondaryConn_&&(n.log_("Timed out trying to upgrade."),n.secondaryConn_.close())},Math.floor(EW))},t.prototype.onReset_=function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.updateHost(e),this.state_===1?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(e,n){var r=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Vf(function(){r.sendPingOnPrimaryIfNecessary_()},Math.floor(SW))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:M2,d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()},t.prototype.onConnectionLost_=function(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ju.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()},t.prototype.onConnectionShutdown_=function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)},t.prototype.close=function(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var AL=function(){function t(){}return t.prototype.put=function(e,n,r,i){},t.prototype.merge=function(e,n,r,i){},t.prototype.refreshAuthToken=function(e){},t.prototype.onDisconnectPut=function(e,n,r){},t.prototype.onDisconnectMerge=function(e,n,r){},t.prototype.onDisconnectCancel=function(e,n){},t.prototype.reportStats=function(e){},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pf=1e3,NW=60*5*1e3,F2=30*1e3,AW=1.3,kW=3e4,PW="server_kill",RW=3,rl=function(t){Et(e,t);function e(n,r,i,o,u,h){var f=t.call(this)||this;if(f.repoInfo_=n,f.onDataUpdate_=r,f.onConnectStatus_=i,f.onServerInfoUpdate_=o,f.authTokenProvider_=u,f.authOverride_=h,f.id=e.nextPersistentConnectionId_++,f.log_=Jd("p:"+f.id+":"),f.interruptReasons_={},f.listens=new Map,f.outstandingPuts_=[],f.outstandingPutCount_=0,f.onDisconnectRequestQueue_=[],f.connected_=!1,f.reconnectDelay_=pf,f.maxReconnectDelay_=NW,f.securityDebugCallback_=null,f.lastSessionId=null,f.establishConnectionTimer_=null,f.visible_=!1,f.requestCBHash_={},f.requestNumber_=0,f.realtime_=null,f.authToken_=null,f.forceTokenRefresh_=!1,f.invalidAuthTokenCount_=0,f.firstConnection_=!0,f.lastConnectionAttemptTime_=null,f.lastConnectionEstablishedTime_=null,h&&!ua())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return f.scheduleConnect_(0),rW.getInstance().on("visible",f.onVisible_,f),n.host.indexOf("fblocal")===-1&&A2.getInstance().on("online",f.onOnline_,f),f}return e.prototype.sendRequest=function(n,r,i){var o=++this.requestNumber_,u={r:o,a:n,b:r};this.log_(wr(u)),Oe(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),i&&(this.requestCBHash_[o]=i)},e.prototype.listen=function(n,r,i,o){var u=n.queryIdentifier(),h=n.path.toString();this.log_("Listen called for "+h+" "+u),this.listens.has(h)||this.listens.set(h,new Map),Oe(n.getQueryParams().isDefault()||!n.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),Oe(!this.listens.get(h).has(u),"listen() called twice for same path/queryId.");var f={onComplete:o,hashFn:r,query:n,tag:i};this.listens.get(h).set(u,f),this.connected_&&this.sendListen_(f)},e.prototype.sendListen_=function(n){var r=this,i=n.query,o=i.path.toString(),u=i.queryIdentifier();this.log_("Listen on "+o+" for "+u);var h={p:o},f="q";n.tag&&(h.q=i.queryObject(),h.t=n.tag),h.h=n.hashFn(),this.sendRequest(f,h,function(v){var _=v.d,b=v.s;e.warnOnListenWarnings_(_,i);var S=r.listens.get(o)&&r.listens.get(o).get(u);S===n&&(r.log_("listen response",v),b!=="ok"&&r.removeListen_(o,u),n.onComplete&&n.onComplete(b,_))})},e.warnOnListenWarnings_=function(n,r){if(n&&typeof n=="object"&&yo(n,"w")){var i=Uo(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){var o='".indexOn": "'+r.getQueryParams().getIndex().toString()+'"',u=r.path.toString();zr("Using an unspecified index. Your data will be downloaded and "+("filtered on the client. Consider adding "+o+" at ")+(u+" to your security rules for better performance."))}}},e.prototype.refreshAuthToken=function(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(n)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(n){var r=n&&n.length===40;(r||pq(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=F2)},e.prototype.tryAuth=function(){var n=this;if(this.connected_&&this.authToken_){var r=this.authToken_,i=_q(r)?"auth":"gauth",o={cred:r};this.authOverride_===null?o.noauth=!0:typeof this.authOverride_=="object"&&(o.authvar=this.authOverride_),this.sendRequest(i,o,function(u){var h=u.s,f=u.d||"error";n.authToken_===r&&(h==="ok"?n.invalidAuthTokenCount_=0:n.onAuthRevoked_(h,f))})}},e.prototype.unlisten=function(n,r){var i=n.path.toString(),o=n.queryIdentifier();this.log_("Unlisten called for "+i+" "+o),Oe(n.getQueryParams().isDefault()||!n.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query");var u=this.removeListen_(i,o);u&&this.connected_&&this.sendUnlisten_(i,o,n.queryObject(),r)},e.prototype.sendUnlisten_=function(n,r,i,o){this.log_("Unlisten on "+n+" for "+r);var u={p:n},h="n";o&&(u.q=i,u.t=o),this.sendRequest(h,u)},e.prototype.onDisconnectPut=function(n,r,i){this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})},e.prototype.onDisconnectMerge=function(n,r,i){this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})},e.prototype.onDisconnectCancel=function(n,r){this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})},e.prototype.sendOnDisconnect_=function(n,r,i,o){var u={p:r,d:i};this.log_("onDisconnect "+n,u),this.sendRequest(n,u,function(h){o&&setTimeout(function(){o(h.s,h.d)},Math.floor(0))})},e.prototype.put=function(n,r,i,o){this.putInternal("p",n,r,i,o)},e.prototype.merge=function(n,r,i,o){this.putInternal("m",n,r,i,o)},e.prototype.putInternal=function(n,r,i,o,u){var h={p:r,d:i};u!==void 0&&(h.h=u),this.outstandingPuts_.push({action:n,request:h,onComplete:o}),this.outstandingPutCount_++;var f=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(f):this.log_("Buffering put: "+r)},e.prototype.sendPut_=function(n){var r=this,i=this.outstandingPuts_[n].action,o=this.outstandingPuts_[n].request,u=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(i,o,function(h){r.log_(i+" response",h),delete r.outstandingPuts_[n],r.outstandingPutCount_--,r.outstandingPutCount_===0&&(r.outstandingPuts_=[]),u&&u(h.s,h.d)})},e.prototype.reportStats=function(n){var r=this;if(this.connected_){var i={c:n};this.log_("reportStats",i),this.sendRequest("s",i,function(o){var u=o.s;if(u!=="ok"){var h=o.d;r.log_("reportStats","Error sending stats: "+h)}})}},e.prototype.onDataMessage_=function(n){if("r"in n){this.log_("from server: "+wr(n));var r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}},e.prototype.onDataPush_=function(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):H1("Unrecognized action received from server: "+wr(n)+`
Are you using the latest client?`)},e.prototype.onReady_=function(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(n){var r=this;Oe(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){r.establishConnectionTimer_=null,r.establishConnection_()},Math.floor(n))},e.prototype.onVisible_=function(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=pf,this.realtime_||this.scheduleConnect_(0)),this.visible_=n},e.prototype.onOnline_=function(n){n?(this.log_("Browser went online."),this.reconnectDelay_=pf,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(!this.visible_)this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime();else if(this.lastConnectionEstablishedTime_){var n=new Date().getTime()-this.lastConnectionEstablishedTime_;n>kW&&(this.reconnectDelay_=pf),this.lastConnectionEstablishedTime_=null}var r=new Date().getTime()-this.lastConnectionAttemptTime_,i=Math.max(0,this.reconnectDelay_-r);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*AW)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+e.nextConnectionId_++,u=this,h=this.lastSessionId,f=!1,v=null,_=function(){v?v.close():(f=!0,i())},b=function(I){Oe(v,"sendRequest call when we're not connected not allowed."),v.sendRequest(I)};this.realtime_={close:_,sendRequest:b};var S=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(S).then(function(I){f?Br("getToken() completed but was canceled"):(Br("getToken() completed. Creating connection."),u.authToken_=I&&I.accessToken,v=new NL(o,u.repoInfo_,n,r,i,function(M){zr(M+" ("+u.repoInfo_.toString()+")"),u.interrupt(PW)},h))}).then(null,function(I){u.log_("Failed to get token: "+I),f||(sv.NODE_ADMIN&&zr(I),_())})}},e.prototype.interrupt=function(n){Br("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(n){Br("Resuming connection for reason: "+n),delete this.interruptReasons_[n],W1(this.interruptReasons_)&&(this.reconnectDelay_=pf,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(n){var r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})},e.prototype.cancelSentTransactions_=function(){for(var n=0;n<this.outstandingPuts_.length;n++){var r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(n,r){var i;r?i=r.map(function(u){return Jb(u)}).join("$"):i="default";var o=this.removeListen_(n,i);o&&o.onComplete&&o.onComplete("permission_denied")},e.prototype.removeListen_=function(n,r){var i=new $e(n).toString(),o;if(this.listens.has(i)){var u=this.listens.get(i);o=u.get(r),u.delete(r),u.size===0&&this.listens.delete(i)}else o=void 0;return o},e.prototype.onAuthRevoked_=function(n,r){Br("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=RW&&(this.reconnectDelay_=F2,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))},e.prototype.restoreState_=function(){var n,r,i,o;this.tryAuth();try{for(var u=zn(this.listens.values()),h=u.next();!h.done;h=u.next()){var f=h.value;try{for(var v=(i=void 0,zn(f.values())),_=v.next();!_.done;_=v.next()){var b=_.value;this.sendListen_(b)}}catch(M){i={error:M}}finally{try{_&&!_.done&&(o=v.return)&&o.call(v)}finally{if(i)throw i.error}}}}catch(M){n={error:M}}finally{try{h&&!h.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}for(var S=0;S<this.outstandingPuts_.length;S++)this.outstandingPuts_[S]&&this.sendPut_(S);for(;this.onDisconnectRequestQueue_.length;){var I=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(I.action,I.pathString,I.data,I.onComplete)}},e.prototype.sendConnectStats_=function(){var n={},r="js";sv.NODE_ADMIN?r="admin_node":sv.NODE_CLIENT&&(r="node"),n["sdk."+r+"."+oT.replace(/\./g,"-")]=1,Hb()?n["framework.cordova"]=1:BD()&&(n["framework.reactnative"]=1),this.reportStats(n)},e.prototype.shouldReconnect_=function(){var n=A2.getInstance().currentlyOnline();return W1(this.interruptReasons_)&&n},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(AL);/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var OW=function(t){Et(e,t);function e(n,r,i){var o=t.call(this)||this;return o.repoInfo_=n,o.onDataUpdate_=r,o.authTokenProvider_=i,o.log_=Jd("p:rest:"),o.listens_={},o}return e.prototype.reportStats=function(n){throw new Error("Method not implemented.")},e.getListenId_=function(n,r){return r!==void 0?"tag$"+r:(Oe(n.getQueryParams().isDefault(),"should have a tag if it's not a default query."),n.path.toString())},e.prototype.listen=function(n,r,i,o){var u=this,h=n.path.toString();this.log_("Listen called for "+h+" "+n.queryIdentifier());var f=e.getListenId_(n,i),v={};this.listens_[f]=v;var _=n.getQueryParams().toRestQueryStringParameters();this.restRequest_(h+".json",_,function(b,S){var I=S;if(b===404&&(I=null,b=null),b===null&&u.onDataUpdate_(h,I,!1,i),Uo(u.listens_,f)===v){var M;b?b===401?M="permission_denied":M="rest_error:"+b:M="ok",o(M,null)}})},e.prototype.unlisten=function(n,r){var i=e.getListenId_(n,r);delete this.listens_[i]},e.prototype.refreshAuthToken=function(n){},e.prototype.restRequest_=function(n,r,i){var o=this;r===void 0&&(r={}),r.format="export",this.authTokenProvider_.getToken(!1).then(function(u){var h=u&&u.accessToken;h&&(r.auth=h);var f=(o.repoInfo_.secure?"https://":"http://")+o.repoInfo_.host+n+"?ns="+o.repoInfo_.namespace+wq(r);o.log_("Sending REST request for "+f);var v=new XMLHttpRequest;v.onreadystatechange=function(){if(i&&v.readyState===4){o.log_("REST Response for "+f+" received. status:",v.status,"response:",v.responseText);var _=null;if(v.status>=200&&v.status<300){try{_=Kb(v.responseText)}catch{zr("Failed to parse JSON response for "+f+": "+v.responseText)}i(null,_)}else v.status!==401&&v.status!==404&&zr("Got unsuccessful REST response for "+f+" Status: "+v.status),i(v.status);i=null}},v.open("GET",f,!0),v.send()})},e}(AL);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var j2="repo_interrupt",Tr=function(){function t(e,n,r,i){var o=this;this.repoInfo_=e,this.app=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new tW,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new jw,this.persistentConnection_=null;var u=new Q9(r,i);if(this.stats_=Jv.getCollection(e),n||l9())this.server_=new OW(this.repoInfo_,this.onDataUpdate_.bind(this),u),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var h=r.options.databaseAuthVariableOverride;if(typeof h<"u"&&h!==null){if(typeof h!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{wr(h)}catch(f){throw new Error("Invalid authOverride provided: "+f)}}this.persistentConnection_=new rl(this.repoInfo_,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),u,h),this.server_=this.persistentConnection_}u.addTokenChangeListener(function(f){o.server_.refreshAuthToken(f)}),this.statsReporter_=Jv.getOrCreateReporter(e,function(){return new eW(o.stats_,o.server_)}),this.transactionsInit_(),this.infoData_=new Y9,this.infoSyncTree_=new x2({startListening:function(f,v,_,b){var S=[],I=o.infoData_.getNode(f.path);return I.isEmpty()||(S=o.infoSyncTree_.applyServerOverwrite(f.path,I),setTimeout(function(){b("ok")},0)),S},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new x2({startListening:function(f,v,_,b){return o.server_.listen(f,_,v,function(S,I){var M=b(S,I);o.eventQueue_.raiseEventsForChangedPath(f.path,M)}),[]},stopListening:function(f,v){o.server_.unlisten(f,v)}})}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var e=this.infoData_.getNode(new $e(".info/serverTimeOffset")),n=e.val()||0;return new Date().getTime()+n},t.prototype.generateServerValues=function(){return M9({timestamp:this.serverTime()})},t.prototype.onDataUpdate_=function(e,n,r,i){this.dataUpdateCount++;var o=new $e(e);n=this.interceptServerDataCallback_?this.interceptServerDataCallback_(e,n):n;var u=[];if(i)if(r){var h=Gv(n,function(S){return Rn(S)});u=this.serverSyncTree_.applyTaggedQueryMerge(o,h,i)}else{var f=Rn(n);u=this.serverSyncTree_.applyTaggedQueryOverwrite(o,f,i)}else if(r){var v=Gv(n,function(S){return Rn(S)});u=this.serverSyncTree_.applyServerMerge(o,v)}else{var _=Rn(n);u=this.serverSyncTree_.applyServerOverwrite(o,_)}var b=o;u.length>0&&(b=this.rerunTransactions_(o)),this.eventQueue_.raiseEventsForChangedPath(b,u)},t.prototype.interceptServerData_=function(e){this.interceptServerDataCallback_=e},t.prototype.onConnectStatus_=function(e){this.updateInfo_("connected",e),e===!1&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(e){var n=this;lr(e,function(r,i){n.updateInfo_(r,i)})},t.prototype.updateInfo_=function(e,n){var r=new $e("/.info/"+e),i=Rn(n);this.infoData_.updateSnapshot(r,i);var o=this.infoSyncTree_.applyServerOverwrite(r,i);this.eventQueue_.raiseEventsForChangedPath(r,o)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.setWithPriority=function(e,n,r,i){var o=this;this.log_("set",{path:e.toString(),value:n,priority:r});var u=this.generateServerValues(),h=Rn(n,r),f=this.serverSyncTree_.calcCompleteEventCache(e),v=tT(h,f,u),_=this.getNextWriteId_(),b=this.serverSyncTree_.applyUserOverwrite(e,v,_,!0);this.eventQueue_.queueEvents(b),this.server_.put(e.toString(),h.val(!0),function(I,M){var D=I==="ok";D||zr("set at "+e+" failed: "+I);var ne=o.serverSyncTree_.ackUserWrite(_,!D);o.eventQueue_.raiseEventsForChangedPath(e,ne),o.callOnCompleteCallback(i,I,M)});var S=this.abortTransactions_(e);this.rerunTransactions_(S),this.eventQueue_.raiseEventsForChangedPath(S,[])},t.prototype.update=function(e,n,r){var i=this;this.log_("update",{path:e.toString(),value:n});var o=!0,u=this.generateServerValues(),h={};if(lr(n,function(_,b){o=!1,h[_]=b2(e.child(_),Rn(b),i.serverSyncTree_,u)}),o)Br("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(r,"ok");else{var f=this.getNextWriteId_(),v=this.serverSyncTree_.applyUserMerge(e,h,f);this.eventQueue_.queueEvents(v),this.server_.merge(e.toString(),n,function(_,b){var S=_==="ok";S||zr("update at "+e+" failed: "+_);var I=i.serverSyncTree_.ackUserWrite(f,!S),M=I.length>0?i.rerunTransactions_(e):e;i.eventQueue_.raiseEventsForChangedPath(M,I),i.callOnCompleteCallback(r,_,b)}),lr(n,function(_){var b=i.abortTransactions_(e.child(_));i.rerunTransactions_(b)}),this.eventQueue_.raiseEventsForChangedPath(e,[])}},t.prototype.runOnDisconnectEvents_=function(){var e=this;this.log_("onDisconnectEvents");var n=this.generateServerValues(),r=new jw;this.onDisconnect_.forEachTree($e.Empty,function(o,u){var h=b2(o,u,e.serverSyncTree_,n);r.remember(o,h)});var i=[];r.forEachTree($e.Empty,function(o,u){i=i.concat(e.serverSyncTree_.applyServerOverwrite(o,u));var h=e.abortTransactions_(o);e.rerunTransactions_(h)}),this.onDisconnect_=new jw,this.eventQueue_.raiseEventsForChangedPath($e.Empty,i)},t.prototype.onDisconnectCancel=function(e,n){var r=this;this.server_.onDisconnectCancel(e.toString(),function(i,o){i==="ok"&&r.onDisconnect_.forget(e),r.callOnCompleteCallback(n,i,o)})},t.prototype.onDisconnectSet=function(e,n,r){var i=this,o=Rn(n);this.server_.onDisconnectPut(e.toString(),o.val(!0),function(u,h){u==="ok"&&i.onDisconnect_.remember(e,o),i.callOnCompleteCallback(r,u,h)})},t.prototype.onDisconnectSetWithPriority=function(e,n,r,i){var o=this,u=Rn(n,r);this.server_.onDisconnectPut(e.toString(),u.val(!0),function(h,f){h==="ok"&&o.onDisconnect_.remember(e,u),o.callOnCompleteCallback(i,h,f)})},t.prototype.onDisconnectUpdate=function(e,n,r){var i=this;if(W1(n)){Br("onDisconnect().update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(r,"ok");return}this.server_.onDisconnectMerge(e.toString(),n,function(o,u){o==="ok"&&lr(n,function(h,f){var v=Rn(f);i.onDisconnect_.remember(e.child(h),v)}),i.callOnCompleteCallback(r,o,u)})},t.prototype.addEventCallbackForQuery=function(e,n){var r;e.path.getFront()===".info"?r=this.infoSyncTree_.addEventRegistration(e,n):r=this.serverSyncTree_.addEventRegistration(e,n),this.eventQueue_.raiseEventsAtPath(e.path,r)},t.prototype.removeEventCallbackForQuery=function(e,n){var r;e.path.getFront()===".info"?r=this.infoSyncTree_.removeEventRegistration(e,n):r=this.serverSyncTree_.removeEventRegistration(e,n),this.eventQueue_.raiseEventsAtPath(e.path,r)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(j2)},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(j2)},t.prototype.stats=function(e){if(e===void 0&&(e=!1),!(typeof console>"u")){var n;e?(this.statsListener_||(this.statsListener_=new EL(this.stats_)),n=this.statsListener_.get()):n=this.stats_.get();var r=Object.keys(n).reduce(function(i,o){return Math.max(o.length,i)},0);lr(n,function(i,o){for(var u=i,h=i.length;h<r+2;h++)u+=" ";console.log(u+o)})}},t.prototype.statsIncrementCounter=function(e){this.stats_.incrementCounter(e),this.statsReporter_.includeStat(e)},t.prototype.log_=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r="";this.persistentConnection_&&(r=this.persistentConnection_.id+":"),Br.apply(void 0,va([r],e))},t.prototype.callOnCompleteCallback=function(e,n,r){e&&ph(function(){if(n==="ok")e(null);else{var i=(n||"error").toUpperCase(),o=i;r&&(o+=": "+r);var u=new Error(o);u.code=i,e(u)}})},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new aT(this))},enumerable:!0,configurable:!0}),t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kL=function(){function t(e){this.indexedFilter_=new rT(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0},t.prototype.updateChild=function(e,n,r,i,o,u){return this.matches(new Ft(n,r))||(r=mt.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,o,u)},t.prototype.updateFullNode=function(e,n,r){n.isLeafNode()&&(n=mt.EMPTY_NODE);var i=n.withIndex(this.index_);i=i.updatePriority(mt.EMPTY_NODE);var o=this;return n.forEachChild(en,function(u,h){o.matches(new Ft(u,h))||(i=i.updateImmediateChild(u,mt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)},t.prototype.updatePriority=function(e,n){return e},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(e){if(e.hasStart()){var n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()},t.getEndPost_=function(e){if(e.hasEnd()){var n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var DW=function(){function t(e){this.rangedFilter_=new kL(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}return t.prototype.updateChild=function(e,n,r,i,o,u){return this.rangedFilter_.matches(new Ft(n,r))||(r=mt.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,o,u):this.fullLimitUpdateChild_(e,n,r,o,u)},t.prototype.updateFullNode=function(e,n,r){var i;if(n.isLeafNode()||n.isEmpty())i=mt.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=mt.EMPTY_NODE.withIndex(this.index_);var o=void 0;this.reverse_?o=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var u=0;o.hasNext()&&u<this.limit_;){var h=o.getNext(),f=void 0;if(this.reverse_?f=this.index_.compare(this.rangedFilter_.getStartPost(),h)<=0:f=this.index_.compare(h,this.rangedFilter_.getEndPost())<=0,f)i=i.updateImmediateChild(h.name,h.node),u++;else break}}else{i=n.withIndex(this.index_),i=i.updatePriority(mt.EMPTY_NODE);var v=void 0,_=void 0,b=void 0,o=void 0;if(this.reverse_){o=i.getReverseIterator(this.index_),v=this.rangedFilter_.getEndPost(),_=this.rangedFilter_.getStartPost();var S=this.index_.getCompare();b=function(ne,z){return S(z,ne)}}else o=i.getIterator(this.index_),v=this.rangedFilter_.getStartPost(),_=this.rangedFilter_.getEndPost(),b=this.index_.getCompare();for(var u=0,I=!1;o.hasNext();){var h=o.getNext();!I&&b(v,h)<=0&&(I=!0);var f=I&&u<this.limit_&&b(h,_)<=0;f?u++:i=i.updateImmediateChild(h.name,mt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)},t.prototype.updatePriority=function(e,n){return e},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(e,n,r,i,o){var u;if(this.reverse_){var h=this.index_.getCompare();u=function(Y,K){return h(K,Y)}}else u=this.index_.getCompare();var f=e;Oe(f.numChildren()===this.limit_,"");var v=new Ft(n,r),_=this.reverse_?f.getFirstChild(this.index_):f.getLastChild(this.index_),b=this.rangedFilter_.matches(v);if(f.hasChild(n)){for(var S=f.getImmediateChild(n),I=i.getChildAfterChild(this.index_,_,this.reverse_);I!=null&&(I.name===n||f.hasChild(I.name));)I=i.getChildAfterChild(this.index_,I,this.reverse_);var M=I==null?1:u(I,v),D=b&&!r.isEmpty()&&M>=0;if(D)return o!=null&&o.trackChildChange(xt.childChangedChange(n,r,S)),f.updateImmediateChild(n,r);o!=null&&o.trackChildChange(xt.childRemovedChange(n,S));var ne=f.updateImmediateChild(n,mt.EMPTY_NODE),z=I!=null&&this.rangedFilter_.matches(I);return z?(o!=null&&o.trackChildChange(xt.childAddedChange(I.name,I.node)),ne.updateImmediateChild(I.name,I.node)):ne}else return r.isEmpty()?e:b&&u(_,v)>=0?(o!=null&&(o.trackChildChange(xt.childRemovedChange(_.name,_.node)),o.trackChildChange(xt.childAddedChange(n,r))),f.updateImmediateChild(n,r).updateImmediateChild(_.name,mt.EMPTY_NODE)):e},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var LW=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=en}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.isViewFromLeft=function(){return this.viewFrom_===""?this.startSet_:this.viewFrom_===t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},t.prototype.getIndexStartValue=function(){return Oe(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Oe(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:hl},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Oe(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Oe(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:uu},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&this.viewFrom_!==""},t.prototype.getLimit=function(){return Oe(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.copy_=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t.prototype.limit=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="",n},t.prototype.limitToFirst=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},t.prototype.limitToLast=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},t.prototype.startAt=function(e,n){var r=this.copy_();return r.startSet_=!0,e===void 0&&(e=null),r.indexStartValue_=e,n!=null?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r},t.prototype.endAt=function(e,n){var r=this.copy_();return r.endSet_=!0,e===void 0&&(e=null),r.indexEndValue_=e,n!==void 0?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r},t.prototype.orderBy=function(e){var n=this.copy_();return n.index_=e,n},t.prototype.getQueryObject=function(){var e=t.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[e.LIMIT]=this.limit_;var r=this.viewFrom_;r===""&&(this.isViewFromLeft()?r=e.VIEW_FROM_LEFT:r=e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=r}return this.index_!==en&&(n[e.INDEX]=this.index_.toString()),n},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===en},t.prototype.getNodeFilter=function(){return this.loadsAllData()?new rT(this.getIndex()):this.hasLimit()?new DW(this):new kL(this)},t.prototype.toRestQueryStringParameters=function(){var e=t.REST_QUERY_CONSTANTS_,n={};if(this.isDefault())return n;var r;return this.index_===en?r=e.PRIORITY_INDEX:this.index_===X1?r=e.VALUE_INDEX:this.index_===nu?r=e.KEY_INDEX:(Oe(this.index_ instanceof J1,"Unrecognized index type!"),r=this.index_.toString()),n[e.ORDER_BY]=wr(r),this.startSet_&&(n[e.START_AT]=wr(this.indexStartValue_),this.startNameSet_&&(n[e.START_AT]+=","+wr(this.indexStartName_))),this.endSet_&&(n[e.END_AT]=wr(this.indexEndValue_),this.endNameSet_&&(n[e.END_AT]+=","+wr(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?n[e.LIMIT_TO_FIRST]=this.limit_:n[e.LIMIT_TO_LAST]=this.limit_),n},t.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},t.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},t.DEFAULT=new t,t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var la=function(t){Et(e,t);function e(n,r){var i=this;if(!(n instanceof Tr))throw new Error("new Reference() no longer supported - use app.database().");return i=t.call(this,n,r,LW.DEFAULT,!1)||this,i}return e.prototype.getKey=function(){return ht("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},e.prototype.child=function(n){return ht("Reference.child",1,1,arguments.length),typeof n=="number"?n=String(n):n instanceof $e||(this.path.getFront()===null?y9("Reference.child",1,n,!1):gd("Reference.child",1,n,!1)),new e(this.repo,this.path.child(n))},e.prototype.getParent=function(){ht("Reference.parent",0,0,arguments.length);var n=this.path.parent();return n===null?null:new e(this.repo,n)},e.prototype.getRoot=function(){ht("Reference.root",0,0,arguments.length);for(var n=this;n.getParent()!==null;)n=n.getParent();return n},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(n,r){ht("Reference.set",1,2,arguments.length),io("Reference.set",this.path),tu("Reference.set",1,n,this.path,!1),yr("Reference.set",2,r,!0);var i=new Fo;return this.repo.setWithPriority(this.path,n,null,i.wrapCallback(r)),i.promise},e.prototype.update=function(n,r){if(ht("Reference.update",1,2,arguments.length),io("Reference.update",this.path),Array.isArray(n)){for(var i={},o=0;o<n.length;++o)i[""+o]=n[o];n=i,zr("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}lL("Reference.update",1,n,this.path,!1),yr("Reference.update",2,r,!0);var u=new Fo;return this.repo.update(this.path,n,u.wrapCallback(r)),u.promise},e.prototype.setWithPriority=function(n,r,i){if(ht("Reference.setWithPriority",2,3,arguments.length),io("Reference.setWithPriority",this.path),tu("Reference.setWithPriority",1,n,this.path,!1),Y1("Reference.setWithPriority",2,r,!1),yr("Reference.setWithPriority",3,i,!0),this.getKey()===".length"||this.getKey()===".keys")throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var o=new Fo;return this.repo.setWithPriority(this.path,n,r,o.wrapCallback(i)),o.promise},e.prototype.remove=function(n){return ht("Reference.remove",0,1,arguments.length),io("Reference.remove",this.path),yr("Reference.remove",1,n,!0),this.set(null,n)},e.prototype.transaction=function(n,r,i){if(ht("Reference.transaction",1,3,arguments.length),io("Reference.transaction",this.path),yr("Reference.transaction",1,n,!1),yr("Reference.transaction",2,r,!0),_9("Reference.transaction",3,i,!0),this.getKey()===".length"||this.getKey()===".keys")throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";i===void 0&&(i=!0);var o=new Fo;typeof r=="function"&&o.promise.catch(function(){});var u=function(h,f,v){h?o.reject(h):o.resolve(new E9(f,v)),typeof r=="function"&&r(h,f,v)};return this.repo.startTransaction(this.path,n,u,i),o.promise},e.prototype.setPriority=function(n,r){ht("Reference.setPriority",1,2,arguments.length),io("Reference.setPriority",this.path),Y1("Reference.setPriority",1,n,!1),yr("Reference.setPriority",2,r,!0);var i=new Fo;return this.repo.setWithPriority(this.path.child(".priority"),n,null,i.wrapCallback(r)),i.promise},e.prototype.push=function(n,r){ht("Reference.push",0,2,arguments.length),io("Reference.push",this.path),tu("Reference.push",1,n,this.path,!0),yr("Reference.push",2,r,!0);var i=this.repo.serverTime(),o=S9(i),u=this.child(o),h=this.child(o),f;return n!=null?f=u.set(n,r).then(function(){return h}):f=Promise.resolve(h),u.then=f.then.bind(f),u.catch=f.then.bind(f,void 0),typeof r=="function"&&f.catch(function(){}),u},e.prototype.onDisconnect=function(){return io("Reference.onDisconnect",this.path),new w9(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!0,configurable:!0}),e}(eT);eT.__referenceConstructor=la;_L.__referenceConstructor=la;/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var U2=function(){function t(){this.children={},this.childCount=0,this.value=null}return t}(),MW=function(){function t(e,n,r){e===void 0&&(e=""),n===void 0&&(n=null),r===void 0&&(r=new U2),this.name_=e,this.parent_=n,this.node_=r}return t.prototype.subTree=function(e){for(var n=e instanceof $e?e:new $e(e),r=this,i=n.getFront();i!==null;){var o=Uo(r.node_.children,i)||new U2;r=new t(i,r,o),n=n.popFront(),i=n.getFront()}return r},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(e){Oe(typeof e<"u","Cannot set value to undefined"),this.node_.value=e,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return this.getValue()===null&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;lr(this.node_.children,function(r,i){e(new t(r,n,i))})},t.prototype.forEachDescendant=function(e,n,r){n&&!r&&e(this),this.forEachChild(function(i){i.forEachDescendant(e,!0,r)}),n&&r&&e(this)},t.prototype.forEachAncestor=function(e,n){for(var r=n?this:this.parent();r!==null;){if(e(r))return!0;r=r.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(e){this.forEachChild(function(n){n.getValue()!==null?e(n):n.forEachImmediateDescendantWithValue(e)})},t.prototype.path=function(){return new $e(this.parent_===null?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){this.parent_!==null&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(e,n){var r=n.isEmpty(),i=yo(this.node_.children,e);r&&i?(delete this.node_.children[e],this.node_.childCount--,this.updateParents_()):!r&&!i&&(this.node_.children[e]=n.node_,this.node_.childCount++,this.updateParents_())},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var er;(function(t){t[t.RUN=0]="RUN",t[t.SENT=1]="SENT",t[t.COMPLETED=2]="COMPLETED",t[t.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",t[t.NEEDS_ABORT=4]="NEEDS_ABORT"})(er||(er={}));Tr.MAX_TRANSACTION_RETRIES_=25;Tr.prototype.transactionsInit_=function(){this.transactionQueueTree_=new MW};Tr.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);var i=function(){},o=new la(this,t);o.on("value",i);var u=function(){o.off("value",i)},h={path:t,update:e,onComplete:n,status:null,order:KD(),applyLocally:r,retryCount:0,unwatcher:u,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},f=this.getLatestState_(t);h.currentInputSnapshot=f;var v=h.update(f.val());if(v===void 0){if(h.unwatcher(),h.currentOutputSnapshotRaw=null,h.currentOutputSnapshotResolved=null,h.onComplete){var _=new gh(h.currentInputSnapshot,new la(this,h.path),en);h.onComplete(null,!1,_)}}else{Zd("transaction failed: Data returned ",v,h.path),h.status=er.RUN;var b=this.transactionQueueTree_.subTree(t),S=b.getValue()||[];S.push(h),b.setValue(S);var I=void 0;if(typeof v=="object"&&v!==null&&yo(v,".priority"))I=Uo(v,".priority"),Oe(pd(I),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else{var M=this.serverSyncTree_.calcCompleteEventCache(t)||mt.EMPTY_NODE;I=M.getPriority().val()}I=I;var D=this.generateServerValues(),ne=Rn(v,I),z=tT(ne,f,D);h.currentOutputSnapshotRaw=ne,h.currentOutputSnapshotResolved=z,h.currentWriteId=this.getNextWriteId_();var Y=this.serverSyncTree_.applyUserOverwrite(t,z,h.currentWriteId,h.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,Y),this.sendReadyTransactions_()}};Tr.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||mt.EMPTY_NODE};Tr.prototype.sendReadyTransactions_=function(t){var e=this;if(t===void 0&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),t.getValue()!==null){var n=this.buildTransactionQueue_(t);Oe(n.length>0,"Sending zero length transaction queue");var r=n.every(function(i){return i.status===er.RUN});r&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild(function(i){e.sendReadyTransactions_(i)})};Tr.prototype.sendTransactionQueue_=function(t,e){for(var n=this,r=e.map(function(S){return S.currentWriteId}),i=this.getLatestState_(t,r),o=i,u=i.hash(),h=0;h<e.length;h++){var f=e[h];Oe(f.status===er.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),f.status=er.SENT,f.retryCount++;var v=$e.relativePath(t,f.path);o=o.updateChild(v,f.currentOutputSnapshotRaw)}var _=o.val(!0),b=t;this.server_.put(b.toString(),_,function(S){n.log_("transaction put response",{path:b.toString(),status:S});var I=[];if(S==="ok"){for(var M=[],D=0;D<e.length;D++){if(e[D].status=er.COMPLETED,I=I.concat(n.serverSyncTree_.ackUserWrite(e[D].currentWriteId)),e[D].onComplete){var ne=e[D].currentOutputSnapshotResolved,z=new la(n,e[D].path),Y=new gh(ne,z,en);M.push(e[D].onComplete.bind(null,null,!0,Y))}e[D].unwatcher()}n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(t,I);for(var D=0;D<M.length;D++)ph(M[D])}else{if(S==="datastale")for(var D=0;D<e.length;D++)e[D].status===er.SENT_NEEDS_ABORT?e[D].status=er.NEEDS_ABORT:e[D].status=er.RUN;else{zr("transaction at "+b.toString()+" failed: "+S);for(var D=0;D<e.length;D++)e[D].status=er.NEEDS_ABORT,e[D].abortReason=S}n.rerunTransactions_(t)}},u)};Tr.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n};Tr.prototype.rerunTransactionQueue_=function(t,e){if(t.length!==0){for(var n=[],r=[],i=t.filter(function(oe){return oe.status===er.RUN}),o=i.map(function(oe){return oe.currentWriteId}),u=0;u<t.length;u++){var h=t[u],f=$e.relativePath(e,h.path),v=!1,_=void 0;if(Oe(f!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),h.status===er.NEEDS_ABORT)v=!0,_=h.abortReason,r=r.concat(this.serverSyncTree_.ackUserWrite(h.currentWriteId,!0));else if(h.status===er.RUN)if(h.retryCount>=Tr.MAX_TRANSACTION_RETRIES_)v=!0,_="maxretry",r=r.concat(this.serverSyncTree_.ackUserWrite(h.currentWriteId,!0));else{var b=this.getLatestState_(h.path,o);h.currentInputSnapshot=b;var S=t[u].update(b.val());if(S!==void 0){Zd("transaction failed: Data returned ",S,h.path);var I=Rn(S),M=typeof S=="object"&&S!=null&&yo(S,".priority");M||(I=I.updatePriority(b.getPriority()));var D=h.currentWriteId,ne=this.generateServerValues(),z=tT(I,b,ne);h.currentOutputSnapshotRaw=I,h.currentOutputSnapshotResolved=z,h.currentWriteId=this.getNextWriteId_(),o.splice(o.indexOf(D),1),r=r.concat(this.serverSyncTree_.applyUserOverwrite(h.path,z,h.currentWriteId,h.applyLocally)),r=r.concat(this.serverSyncTree_.ackUserWrite(D,!0))}else v=!0,_="nodata",r=r.concat(this.serverSyncTree_.ackUserWrite(h.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,r),r=[],v&&(t[u].status=er.COMPLETED,function(oe){setTimeout(oe,Math.floor(0))}(t[u].unwatcher),t[u].onComplete))if(_==="nodata"){var Y=new la(this,t[u].path),K=t[u].currentInputSnapshot,ue=new gh(K,Y,en);n.push(t[u].onComplete.bind(null,null,!1,ue))}else n.push(t[u].onComplete.bind(null,new Error(_),!1,null))}this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);for(var u=0;u<n.length;u++)ph(n[u]);this.sendReadyTransactions_()}};Tr.prototype.getAncestorTransactionNode_=function(t){var e,n=this.transactionQueueTree_;for(e=t.getFront();e!==null&&n.getValue()===null;)n=n.subTree(e),t=t.popFront(),e=t.getFront();return n};Tr.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort(function(n,r){return n.order-r.order}),e};Tr.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(r!==null)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild(function(o){n.aggregateTransactionQueuesForNode_(o,e)})};Tr.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==er.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(n.length>0?n:null)}t.forEachChild(function(o){e.pruneCompletedTransactionsBelowNode_(o)})};Tr.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor(function(i){e.abortTransactionsOnNode_(i)}),this.abortTransactionsOnNode_(r),r.forEachDescendant(function(i){e.abortTransactionsOnNode_(i)}),n};Tr.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(e!==null){for(var n=[],r=[],i=-1,o=0;o<e.length;o++)if(e[o].status!==er.SENT_NEEDS_ABORT){if(e[o].status===er.SENT)Oe(i===o-1,"All SENT items should be at beginning of queue."),i=o,e[o].status=er.SENT_NEEDS_ABORT,e[o].abortReason="set";else if(Oe(e[o].status===er.RUN,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId,!0)),e[o].onComplete){var u=null;n.push(e[o].onComplete.bind(null,new Error("set"),!1,u))}}i===-1?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r);for(var o=0;o<n.length;o++)ph(n[o])}};/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var V2="databaseURL",FW="FIREBASE_DATABASE_EMULATOR_HOST",qw,sT=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return qw||(qw=new t),qw},t.prototype.interrupt=function(){var e,n,r,i;try{for(var o=zn(Object.keys(this.repos_)),u=o.next();!u.done;u=o.next()){var h=u.value;try{for(var f=(r=void 0,zn(Object.keys(this.repos_[h]))),v=f.next();!v.done;v=f.next()){var _=v.value;this.repos_[h][_].interrupt()}}catch(b){r={error:b}}finally{try{v&&!v.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}}}catch(b){e={error:b}}finally{try{u&&!u.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}},t.prototype.resume=function(){var e,n,r,i;try{for(var o=zn(Object.keys(this.repos_)),u=o.next();!u.done;u=o.next()){var h=u.value;try{for(var f=(r=void 0,zn(Object.keys(this.repos_[h]))),v=f.next();!v.done;v=f.next()){var _=v.value;this.repos_[h][_].resume()}}catch(b){r={error:b}}finally{try{v&&!v.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}}}catch(b){e={error:b}}finally{try{u&&!u.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}},t.prototype.databaseFromApp=function(e,n,r){var i=r||e.options[V2];i===void 0&&Xs("Can't determine Firebase Database URL.  Be sure to include "+V2+" option when calling firebase.initializeApp().");var o=K1(i),u=o.repoInfo,h=void 0;typeof process<"u"&&(h=$D[FW]),h&&(i="http://"+h+"?ns="+u.namespace,o=K1(i),u=o.repoInfo),cL("Invalid Firebase Database URL",1,o),o.path.isEmpty()||Xs("Database URL must point to the root of a Firebase Database (not including a child path).");var f=this.createRepo(u,e,n);return f.database},t.prototype.deleteRepo=function(e){var n=Uo(this.repos_,e.app.name);(!n||Uo(n,e.repoInfo_.toURLString())!==e)&&Xs("Database "+e.app.name+"("+e.repoInfo_+") has already been deleted."),e.interrupt(),delete n[e.repoInfo_.toURLString()]},t.prototype.createRepo=function(e,n,r){var i=Uo(this.repos_,n.name);i||(i={},this.repos_[n.name]=i);var o=Uo(i,e.toURLString());return o&&Xs("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Tr(e,this.useRestClient_,n,r),i[e.toURLString()]=o,o},t.prototype.forceRestClient=function(e){this.useRestClient_=e},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var aT=function(){function t(e){this.repo_=e,e instanceof Tr||Xs("Don't call new Database() directly - please use firebase.database()."),this.root_=new la(e,$e.Empty),this.INTERNAL=new jW(this)}return Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!0,configurable:!0}),t.prototype.ref=function(e){return this.checkDeleted_("ref"),ht("database.ref",0,1,arguments.length),e instanceof la?this.refFromURL(e.toString()):e!==void 0?this.root_.child(e):this.root_},t.prototype.refFromURL=function(e){var n="database.refFromURL";this.checkDeleted_(n),ht(n,1,1,arguments.length);var r=K1(e);cL(n,1,r);var i=r.repoInfo;return i.host!==this.repo_.repoInfo_.host&&Xs(n+": Host name does not match the current database: (found "+i.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(r.path.toString())},t.prototype.checkDeleted_=function(e){this.repo_===null&&Xs("Cannot call "+e+" on a deleted database.")},t.prototype.goOffline=function(){ht("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){ht("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(e){return{".sv":{increment:e}}}},t}(),jW=function(){function t(e){this.database=e}return t.prototype.delete=function(){return Ee(this,void 0,void 0,function(){return we(this,function(e){return this.database.checkDeleted_("delete"),sT.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]})})},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var UW=function(){$u.forceDisallow(),iT.forceAllow()},VW=function(){iT.forceDisallow()},BW=function(){return $u.isAvailable()},zW=function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},qW=function(t,e){t.repo.stats(e)},WW=function(t,e){t.repo.statsIncrementCounter(e)},GW=function(t){return t.repo.dataUpdateCount},$W=function(t,e){return t.repo.interceptServerData_(e)},HW=Object.freeze({__proto__:null,forceLongPolling:UW,forceWebSockets:VW,isWebSocketsAvailable:BW,setSecurityDebugCallback:zW,stats:qW,statsIncrementCounter:WW,dataUpdateCount:GW,interceptServerData:$W});/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var KW=rl;rl.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};rl.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var YW=NL,QW=function(t){var e=rl.prototype.put;return rl.prototype.put=function(n,r,i,o){o!==void 0&&(o=t()),e.call(this,n,r,i,o)},function(){rl.prototype.put=e}},XW=aL,JW=function(t){return t.queryIdentifier()},ZW=function(t){sT.getInstance().forceRestClient(t)},eG=Object.freeze({__proto__:null,DataConnection:KW,RealTimeConnection:YW,hijackHash:QW,ConnectionTarget:XW,queryIdentifier:JW,forceRestClient:ZW}),tG="@firebase/database",nG="0.6.0";/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rG=aT.ServerValue;function iG(t){mW(t.SDK_VERSION);var e=t.INTERNAL.registerComponent(new Es("database",function(n,r){var i=n.getProvider("app").getImmediate(),o=n.getProvider("auth-internal");return sT.getInstance().databaseFromApp(i,o,r)},"PUBLIC").setServiceProps({Reference:la,Query:eT,Database:aT,DataSnapshot:gh,enableLogging:QD,INTERNAL:HW,ServerValue:rG,TEST_ACCESS:eG}).setMultipleInstances(!0));t.registerVersion(tG,nG),ua()&&(module.exports=e)}iG(ze);var oG=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Le,uT=uT||{},wt=oG;function Hr(t){return typeof t=="string"}function sy(t){return typeof t=="number"}function gc(t,e){t=t.split("."),e=e||wt;for(var n=0;n<t.length;n++)if(e=e[t[n]],e==null)return null;return e}function Zv(){}function tp(t){var e=typeof t;if(e=="object")if(t){if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if(n=="[object Window]")return"object";if(n=="[object Array]"||typeof t.length=="number"&&typeof t.splice<"u"&&typeof t.propertyIsEnumerable<"u"&&!t.propertyIsEnumerable("splice"))return"array";if(n=="[object Function]"||typeof t.call<"u"&&typeof t.propertyIsEnumerable<"u"&&!t.propertyIsEnumerable("call"))return"function"}else return"null";else if(e=="function"&&typeof t.call>"u")return"object";return e}function vh(t){return tp(t)=="array"}function Z1(t){var e=tp(t);return e=="array"||e=="object"&&typeof t.length=="number"}function np(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}var em="closure_uid_"+(1e9*Math.random()>>>0),PL=0;function sG(t,e,n){return t.call.apply(t.bind,arguments)}function aG(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Rr(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Rr=sG:Rr=aG,Rr.apply(null,arguments)}function If(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}var ma=Date.now||function(){return+new Date};function Lr(t,e){function n(){}n.prototype=e.prototype,t.N=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.yb=function(r,i,o){for(var u=Array(arguments.length-2),h=2;h<arguments.length;h++)u[h-2]=arguments[h];return e.prototype[i].apply(r,u)}}function ya(){this.j=this.j,this.i=this.i}var uG=0;ya.prototype.j=!1;ya.prototype.la=function(){!this.j&&(this.j=!0,this.G(),uG!=0)&&(this[em]||(this[em]=++PL))};ya.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var RL=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(Hr(t))return Hr(e)&&e.length==1?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},ay=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=Hr(t)?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function lG(t){e:{for(var e=JG,n=t.length,r=Hr(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break e}e=-1}return 0>e?null:Hr(t)?t.charAt(e):t[e]}function B2(t){return Array.prototype.concat.apply([],arguments)}function lT(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function tm(t){return/^[\s\xa0]*$/.test(t)}var z2=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Ar(t,e){return t.indexOf(e)!=-1}function Ww(t,e){return t<e?-1:t>e?1:0}var si;e:{var q2=wt.navigator;if(q2){var W2=q2.userAgent;if(W2){si=W2;break e}}si=""}function cT(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function OL(t){var e={},n;for(n in t)e[n]=t[n];return e}var G2="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function DL(t,e){for(var n,r,i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(var o=0;o<G2.length;o++)n=G2[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function hT(t){return hT[" "](t),t}hT[" "]=Zv;function cG(t,e){var n=dG;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var hG=Ar(si,"Opera"),ca=Ar(si,"Trident")||Ar(si,"MSIE"),LL=Ar(si,"Edge"),eS=LL||ca,ML=Ar(si,"Gecko")&&!(Ar(si.toLowerCase(),"webkit")&&!Ar(si,"Edge"))&&!(Ar(si,"Trident")||Ar(si,"MSIE"))&&!Ar(si,"Edge"),fG=Ar(si.toLowerCase(),"webkit")&&!Ar(si,"Edge");function FL(){var t=wt.document;return t?t.documentMode:void 0}var nm;e:{var Gw="",$w=function(){var t=si;if(ML)return/rv:([^\);]+)(\)|;)/.exec(t);if(LL)return/Edge\/([\d\.]+)/.exec(t);if(ca)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(fG)return/WebKit\/(\S+)/.exec(t);if(hG)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if($w&&(Gw=$w?$w[1]:""),ca){var Hw=FL();if(Hw!=null&&Hw>parseFloat(Gw)){nm=String(Hw);break e}}nm=Gw}var dG={};function jL(t){return cG(t,function(){for(var e=0,n=z2(String(nm)).split("."),r=z2(String(t)).split("."),i=Math.max(n.length,r.length),o=0;e==0&&o<i;o++){var u=n[o]||"",h=r[o]||"";do{if(u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""],u[0].length==0&&h[0].length==0)break;e=Ww(u[1].length==0?0:parseInt(u[1],10),h[1].length==0?0:parseInt(h[1],10))||Ww(u[2].length==0,h[2].length==0)||Ww(u[2],h[2]),u=u[3],h=h[3]}while(e==0)}return 0<=e})}var uy,$2=wt.document;uy=$2&&ca?FL()||($2.compatMode=="CSS1Compat"?parseInt(nm,10):5):void 0;var fT=!ca||9<=Number(uy),pG=ca&&!jL("9"),gG=function(){if(!wt.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{wt.addEventListener("test",Zv,e),wt.removeEventListener("test",Zv,e)}catch{}return t}();function qr(t,e){this.type=t,this.a=this.target=e,this.Ia=!0}qr.prototype.b=function(){this.Ia=!1};function vd(t,e){if(qr.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(ML){e:{try{hT(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=Hr(t.pointerType)?t.pointerType:vG[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}Lr(vd,qr);var vG={2:"touch",3:"pen",4:"mouse"};vd.prototype.b=function(){vd.N.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,pG)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch{}};var rp="closure_listenable_"+(1e6*Math.random()|0),mG=0;function yG(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.da=i,this.key=++mG,this.X=this.Z=!1}function ly(t){t.X=!0,t.listener=null,t.proxy=null,t.src=null,t.da=null}function cy(t){this.src=t,this.a={},this.b=0}cy.prototype.add=function(t,e,n,r,i){var o=t.toString();t=this.a[o],t||(t=this.a[o]=[],this.b++);var u=nS(t,e,r,i);return-1<u?(e=t[u],n||(e.Z=!1)):(e=new yG(e,this.src,o,!!r,i),e.Z=n,t.push(e)),e};function tS(t,e){var n=e.type;if(n in t.a){var r=t.a[n],i=RL(r,e),o;(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(ly(e),t.a[n].length==0&&(delete t.a[n],t.b--))}}function nS(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.X&&o.listener==e&&o.capture==!!n&&o.da==r)return i}return-1}var dT="closure_lm_"+(1e6*Math.random()|0),Kw={};function pT(t,e,n,r,i){if(r&&r.once)return VL(t,e,n,r,i);if(vh(e)){for(var o=0;o<e.length;o++)pT(t,e[o],n,r,i);return null}return n=mT(n),t&&t[rp]?t.za(e,n,np(r)?!!r.capture:!!r,i):UL(t,e,n,!1,r,i)}function UL(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var u=np(i)?!!i.capture:!!i;if(u&&!fT)return null;var h=vT(t);if(h||(t[dT]=h=new cy(t)),n=h.add(e,n,r,u,o),n.proxy)return n;if(r=_G(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)gG||(i=u),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(zL(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function _G(){var t=wG,e=fT?function(n){return t.call(e.src,e.listener,n)}:function(n){if(n=t.call(e.src,e.listener,n),!n)return n};return e}function VL(t,e,n,r,i){if(vh(e)){for(var o=0;o<e.length;o++)VL(t,e[o],n,r,i);return null}return n=mT(n),t&&t[rp]?t.Aa(e,n,np(r)?!!r.capture:!!r,i):UL(t,e,n,!0,r,i)}function BL(t,e,n,r,i){if(vh(e))for(var o=0;o<e.length;o++)BL(t,e[o],n,r,i);else r=np(r)?!!r.capture:!!r,n=mT(n),t&&t[rp]?(t=t.c,e=String(e).toString(),e in t.a&&(o=t.a[e],n=nS(o,n,r,i),-1<n&&(ly(o[n]),Array.prototype.splice.call(o,n,1),o.length==0&&(delete t.a[e],t.b--)))):t&&(t=vT(t))&&(e=t.a[e.toString()],t=-1,e&&(t=nS(e,n,r,i)),(n=-1<t?e[t]:null)&&gT(n))}function gT(t){if(!sy(t)&&t&&!t.X){var e=t.src;if(e&&e[rp])tS(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(zL(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=vT(e))?(tS(n,t),n.b==0&&(n.src=null,e[dT]=null)):ly(t)}}}function zL(t){return t in Kw?Kw[t]:Kw[t]="on"+t}function H2(t,e){var n=t.listener,r=t.da||t.src;return t.Z&&gT(t),n.call(r,e)}function wG(t,e){return t.X?!0:fT?H2(t,new vd(e,this)):(e=new vd(e||gc("window.event"),this),H2(t,e))}function vT(t){return t=t[dT],t instanceof cy?t:null}var Yw="__closure_events_fn_"+(1e9*Math.random()>>>0);function mT(t){return tp(t)=="function"?t:(t[Yw]||(t[Yw]=function(e){return t.handleEvent(e)}),t[Yw])}function Hi(){ya.call(this),this.c=new cy(this),this.J=this,this.B=null}Lr(Hi,ya);Hi.prototype[rp]=!0;Le=Hi.prototype;Le.addEventListener=function(t,e,n,r){pT(this,t,e,n,r)};Le.removeEventListener=function(t,e,n,r){BL(this,t,e,n,r)};Le.dispatchEvent=function(t){var e,n=this.B;if(n)for(e=[];n;n=n.B)e.push(n);n=this.J;var r=t.type||t;if(Hr(t))t=new qr(t,n);else if(t instanceof qr)t.target=t.target||n;else{var i=t;t=new qr(r,n),DL(t,i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var u=t.a=e[o];i=kg(u,r,!0,t)&&i}if(u=t.a=n,i=kg(u,r,!0,t)&&i,i=kg(u,r,!1,t)&&i,e)for(o=0;o<e.length;o++)u=t.a=e[o],i=kg(u,r,!1,t)&&i;return i};Le.G=function(){if(Hi.N.G.call(this),this.c){var t=this.c,e;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)ly(n[r]);delete t.a[e],t.b--}}this.B=null};Le.za=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)};Le.Aa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};function kg(t,e,n,r){if(e=t.c.a[String(e)],!e)return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var u=e[o];if(u&&!u.X&&u.capture==n){var h=u.listener,f=u.da||u.src;u.Z&&tS(t.c,u),i=h.call(f,r)!==!1&&i}}return i&&r.Ia!=0}var qL=wt.JSON.stringify;function WL(t,e){this.c=t,this.f=e,this.b=0,this.a=null}WL.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};function GL(){this.b=this.a=null}var $L=new WL(function(){return new yT},function(t){t.reset()});GL.prototype.add=function(t,e){var n=$L.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n};function EG(){var t=KL,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function yT(){this.next=this.b=this.a=null}yT.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null};yT.prototype.reset=function(){this.next=this.b=this.a=null};function SG(t){wt.setTimeout(function(){throw t},0)}function HL(t,e){rS||bG(),iS||(rS(),iS=!0),KL.add(t,e)}var rS;function bG(){var t=wt.Promise.resolve(void 0);rS=function(){t.then(TG)}}var iS=!1,KL=new GL;function TG(){for(var t;t=EG();){try{t.a.call(t.b)}catch(n){SG(n)}var e=$L;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}iS=!1}function hy(t,e){Hi.call(this),this.b=t||1,this.a=e||wt,this.f=Rr(this.gb,this),this.g=ma()}Lr(hy,Hi);Le=hy.prototype;Le.ba=!1;Le.L=null;Le.gb=function(){if(this.ba){var t=ma()-this.g;0<t&&t<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-t):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.ba&&(_T(this),this.start()))}};Le.start=function(){this.ba=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=ma())};function _T(t){t.ba=!1,t.L&&(t.a.clearTimeout(t.L),t.L=null)}Le.G=function(){hy.N.G.call(this),_T(this),delete this.a};function wT(t,e,n){if(tp(t)=="function")n&&(t=Rr(t,n));else if(t&&typeof t.handleEvent=="function")t=Rr(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:wt.setTimeout(t,e||0)}function fy(t,e,n){ya.call(this),this.f=n!=null?Rr(t,n):t,this.c=e,this.b=Rr(this.$a,this),this.a=[]}Lr(fy,ya);Le=fy.prototype;Le.ea=!1;Le.U=null;Le.Ta=function(t){this.a=arguments,this.U?this.ea=!0:YL(this)};Le.G=function(){fy.N.G.call(this),this.U&&(wt.clearTimeout(this.U),this.U=null,this.ea=!1,this.a=[])};Le.$a=function(){this.U=null,this.ea&&(this.ea=!1,YL(this))};function YL(t){t.U=wT(t.b,t.c),t.f.apply(null,t.a)}function md(t){ya.call(this),this.b=t,this.a={}}Lr(md,ya);var K2=[];function QL(t,e,n,r){vh(n)||(n&&(K2[0]=n.toString()),n=K2);for(var i=0;i<n.length;i++){var o=pT(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function XL(t){cT(t.a,function(e,n){this.a.hasOwnProperty(n)&&gT(e)},t),t.a={}}md.prototype.G=function(){md.N.G.call(this),XL(this)};md.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function IG(){}var rh=new Hi;function JL(t){qr.call(this,"serverreachability",t)}Lr(JL,qr);function yd(t){rh.dispatchEvent(new JL(rh))}function ZL(t){qr.call(this,"statevent",t)}Lr(ZL,qr);function an(t){rh.dispatchEvent(new ZL(rh))}function eM(t){qr.call(this,"timingevent",t)}Lr(eM,qr);function dy(t,e){if(tp(t)!="function")throw Error("Fn must not be null and must be a function");return wt.setTimeout(function(){t()},e)}var py={NO_ERROR:0,hb:1,ob:2,nb:3,kb:4,mb:5,pb:6,La:7,TIMEOUT:8,sb:9},tM={jb:"complete",wb:"success",Ma:"error",La:"abort",ub:"ready",vb:"readystatechange",TIMEOUT:"timeout",qb:"incrementaldata",tb:"progress",lb:"downloadprogress",xb:"uploadprogress"};function nM(){}nM.prototype.a=null;function Y2(t){var e;return(e=t.a)||(e=t.a={}),e}function rM(){}var ip={OPEN:"a",ib:"b",Ma:"c",rb:"d"};function ET(){qr.call(this,"d")}Lr(ET,qr);function ST(){qr.call(this,"c")}Lr(ST,qr);var iM;function oM(){}Lr(oM,nM);iM=new oM;function Nl(t,e,n){this.g=t,this.W=e,this.V=n||1,this.I=new md(this),this.O=CG,t=eS?125:void 0,this.P=new hy(t),this.h=null,this.b=!1,this.l=this.D=this.f=this.F=this.v=this.R=this.i=null,this.j=[],this.a=null,this.A=0,this.c=this.w=null,this.o=-1,this.m=!1,this.J=0,this.B=null,this.s=this.S=this.H=!1}var CG=45e3,sM={},oS={};Le=Nl.prototype;Le.setTimeout=function(t){this.O=t};function sS(t,e,n){t.F=1,t.f=vy(Ss(e)),t.l=n,t.H=!0,aM(t,null)}function bT(t,e,n,r){t.F=1,t.f=vy(Ss(e)),t.l=null,t.H=n,aM(t,r)}function aM(t,e){t.v=ma(),op(t),t.D=Ss(t.f),im(t.D,"t",t.V),t.A=0,t.a=t.g.$(t.g.Y()?e:null),0<t.J&&(t.B=new fy(Rr(t.Ja,t,t.a),t.J)),QL(t.I,t.a,"readystatechange",t.cb),e=t.h?OL(t.h):{},t.l?(t.w||(t.w="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ca(t.D,t.w,t.l,e)):(t.w="GET",t.a.ca(t.D,t.w,null,e)),yd()}Le.cb=function(t){t=t.target;var e=this.B;e&&Ga(t)==3?e.Ta():this.Ja(t)};Le.Ja=function(t){try{if(t==this.a)e:{var e=Ga(this.a),n=this.a.ya(),r=this.a.T();if(!(3>e||e==3&&!eS&&!this.a.aa())){this.m||e!=4||n==7||(n==8||0>=r?yd(3):yd(2)),gy(this);var i=this.a.T();this.o=i;var o=this.a.aa();if(this.b=i==200){if(this.S&&!this.s){t:{if(this.a){var u=bd(this.a,"X-HTTP-Initial-Response");if(u&&!tm(u)){var h=u;break t}}h=null}if(h)this.s=!0,aS(this,h);else{this.b=!1,this.c=3,an(12),Vc(this),rm(this);break e}}this.H?(uM(this,e,o),eS&&this.b&&e==3&&(QL(this.I,this.P,"tick",this.bb),this.P.start())):aS(this,o),e==4&&Vc(this),this.b&&!this.m&&(e==4?this.g.na(this):(this.b=!1,op(this)))}else i==400&&0<o.indexOf("Unknown SID")?(this.c=3,an(12)):(this.c=0,an(13)),Vc(this),rm(this)}}}catch{}finally{}};function uM(t,e,n){for(var r=!0;!t.m&&t.A<n.length;){var i=xG(t,n);if(i==oS){e==4&&(t.c=4,an(),r=!1);break}else if(i==sM){t.c=4,an(),r=!1;break}else aS(t,i)}e==4&&n.length==0&&(t.c=1,an(),r=!1),t.b=t.b&&r,r||(Vc(t),rm(t))}Le.bb=function(){if(this.a){var t=Ga(this.a),e=this.a.aa();this.A<e.length&&(gy(this),uM(this,t,e),this.b&&t!=4&&op(this))}};function xG(t,e){var n=t.A,r=e.indexOf(`
`,n);return r==-1?oS:(n=Number(e.substring(n,r)),isNaN(n)?sM:(r+=1,r+n>e.length?oS:(e=e.substr(r,n),t.A=r+n,e)))}Le.cancel=function(){this.m=!0,Vc(this)};function op(t){t.R=ma()+t.O,lM(t,t.O)}function lM(t,e){if(t.i!=null)throw Error("WatchDog timer not null");t.i=dy(Rr(t.ab,t),e)}function gy(t){t.i&&(wt.clearTimeout(t.i),t.i=null)}Le.ab=function(){this.i=null;var t=ma();0<=t-this.R?(this.F!=2&&(yd(),an()),Vc(this),this.c=2,rm(this)):lM(this,this.R-t)};function rm(t){t.g.Ca()||t.m||t.g.na(t)}function Vc(t){gy(t);var e=t.B;e&&typeof e.la=="function"&&e.la(),t.B=null,_T(t.P),XL(t.I),t.a&&(e=t.a,t.a=null,e.abort(),e.la())}function aS(t,e){try{t.g.Fa(t,e),yd(4)}catch{}}function NG(t){if(t.C&&typeof t.C=="function")return t.C();if(Hr(t))return t.split("");if(Z1(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function TT(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Z1(t)||Hr(t))ay(t,e,void 0);else{if(t.K&&typeof t.K=="function")var n=t.K();else if(t.C&&typeof t.C=="function")n=void 0;else if(Z1(t)||Hr(t)){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;r=NG(t),i=r.length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Al(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Al)for(n=t.K(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}Le=Al.prototype;Le.C=function(){IT(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t};Le.K=function(){return IT(this),this.a.concat()};function AG(t){t.b={},t.a.length=0,t.c=0}function cM(t,e){ha(t.b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&IT(t))}function IT(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];ha(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)r=t.a[e],ha(i,r)||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}Le.get=function(t,e){return ha(this.b,t)?this.b[t]:e};Le.set=function(t,e){ha(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e};Le.forEach=function(t,e){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};function ha(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var hM=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function kG(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function lu(t,e){this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1;var n;t instanceof lu?(this.h=e!==void 0?e:t.h,_d(this,t.f),this.j=t.j,wd(this,t.b),Ed(this,t.i),this.a=t.a,uS(this,gM(t.c)),this.g=t.g):t&&(n=String(t).match(hM))?(this.h=!!e,_d(this,n[1]||"",!0),this.j=zf(n[2]||""),wd(this,n[3]||"",!0),Ed(this,n[4]),this.a=zf(n[5]||"",!0),uS(this,n[6]||"",!0),this.g=zf(n[7]||"")):(this.h=!!e,this.c=new Sd(null,this.h))}lu.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Cf(e,Q2,!0),":");var n=this.b;return(n||e=="file")&&(t.push("//"),(e=this.j)&&t.push(Cf(e,Q2,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.i,n!=null&&t.push(":",String(n))),(n=this.a)&&(this.b&&n.charAt(0)!="/"&&t.push("/"),t.push(Cf(n,n.charAt(0)=="/"?LG:DG,!0))),(n=this.c.toString())&&t.push("?",n),(n=this.g)&&t.push("#",Cf(n,FG)),t.join("")};lu.prototype.resolve=function(t){var e=Ss(this),n=!!t.f;n?_d(e,t.f):n=!!t.j,n?e.j=t.j:n=!!t.b,n?wd(e,t.b):n=t.i!=null;var r=t.a;if(n)Ed(e,t.i);else if(n=!!t.a){if(r.charAt(0)!="/")if(this.b&&!this.a)r="/"+r;else{var i=e.a.lastIndexOf("/");i!=-1&&(r=e.a.substr(0,i+1)+r)}if(i=r,i==".."||i==".")r="";else if(Ar(i,"./")||Ar(i,"/.")){r=i.lastIndexOf("/",0)==0,i=i.split("/");for(var o=[],u=0;u<i.length;){var h=i[u++];h=="."?r&&u==i.length&&o.push(""):h==".."?((1<o.length||o.length==1&&o[0]!="")&&o.pop(),r&&u==i.length&&o.push("")):(o.push(h),r=!0)}r=o.join("/")}else r=i}return n?e.a=r:n=t.c.toString()!=="",n?uS(e,gM(t.c)):n=!!t.g,n&&(e.g=t.g),e};function Ss(t){return new lu(t)}function _d(t,e,n){t.f=n?zf(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function wd(t,e,n){t.b=n?zf(e,!0):e}function Ed(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.i=e}else t.i=null}function uS(t,e,n){e instanceof Sd?(t.c=e,jG(t.c,t.h)):(n||(e=Cf(e,MG)),t.c=new Sd(e,t.h))}function yn(t,e,n){t.c.set(e,n)}function im(t,e,n){vh(n)||(n=[String(n)]),pM(t.c,e,n)}function vy(t){return yn(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^ma()).toString(36)),t}function PG(t){return t instanceof lu?Ss(t):new lu(t,void 0)}function RG(t,e,n,r){var i=new lu(null,void 0);return t&&_d(i,t),e&&wd(i,e),n&&Ed(i,n),r&&(i.a=r),i}function zf(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Cf(t,e,n){return Hr(t)?(t=encodeURI(t).replace(e,OG),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function OG(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Q2=/[#\/\?@]/g,DG=/[#\?:]/g,LG=/[#\?]/g,MG=/[#\?@]/g,FG=/#/g;function Sd(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function mu(t){t.a||(t.a=new Al,t.b=0,t.c&&kG(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}Le=Sd.prototype;Le.add=function(t,e){mu(this),this.c=null,t=mh(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this};function fM(t,e){mu(t),e=mh(t,e),ha(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,cM(t.a,e))}function dM(t,e){return mu(t),e=mh(t,e),ha(t.a.b,e)}Le.forEach=function(t,e){mu(this),this.a.forEach(function(n,r){ay(n,function(i){t.call(e,i,r,this)},this)},this)};Le.K=function(){mu(this);for(var t=this.a.C(),e=this.a.K(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n};Le.C=function(t){mu(this);var e=[];if(Hr(t))dM(this,t)&&(e=B2(e,this.a.get(mh(this,t))));else{t=this.a.C();for(var n=0;n<t.length;n++)e=B2(e,t[n])}return e};Le.set=function(t,e){return mu(this),this.c=null,t=mh(this,t),dM(this,t)&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this};Le.get=function(t,e){return t?(t=this.C(t),0<t.length?String(t[0]):e):e};function pM(t,e,n){fM(t,e),0<n.length&&(t.c=null,t.a.set(mh(t,e),lT(n)),t.b+=n.length)}Le.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.K(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.C(r);for(var o=0;o<r.length;o++){var u=i;r[o]!==""&&(u+="="+encodeURIComponent(String(r[o]))),t.push(u)}}return this.c=t.join("&")};function gM(t){var e=new Sd;return e.c=t.c,t.a&&(e.a=new Al(t.a),e.b=t.b),e}function mh(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function jG(t,e){e&&!t.f&&(mu(t),t.c=null,t.a.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(fM(this,r),pM(this,i,n))},t)),t.f=e}function UG(){}function VG(){}Lr(VG,UG);function vM(t){this.a=t,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}Le=vM.prototype;Le.M=null;function mM(t){var e=t.a.F.a;if(e!=null)an(),e?(an(),Td(t.a,t,!1)):(an(),Td(t.a,t,!0));else{t.b=new Nl(t,void 0,void 0),t.b.h=t.h,e=t.a,e=Ey(e,e.Y()?t.f:null,t.i),an(),im(e,"TYPE","xmlhttp");var n=t.a.j,r=t.a.I;n&&r&&yn(e,n,r),bT(t.b,e,!1,t.f)}}Le.$=function(t){return this.a.$(t)};Le.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1};Le.Ca=function(){return!1};Le.Fa=function(t,e){if(this.c=t.o,this.M==0){if(!this.a.o&&(t=t.a)){var n=bd(t,"X-Client-Wire-Protocol");this.l=n||null,this.a.j&&(t=bd(t,"X-HTTP-Session-Id"))&&(this.a.I=t)}if(e){try{var r=this.a.ja.a.parse(e)}catch{e=this.a,e.m=this.c,fs(e,2);return}this.f=r[0]}else e=this.a,e.m=this.c,fs(e,2)}else this.M==1&&(this.g?an():e=="11111"?(an(),this.g=!0,(!ca||10<=Number(uy))&&(this.c=200,this.b.cancel(),an(),Td(this.a,this,!0))):(an(),this.g=!1))};Le.na=function(){if(this.c=this.b.o,this.b.b)this.M==0?(this.M=1,mM(this)):this.M==1&&(this.g?(an(),Td(this.a,this,!0)):(an(),Td(this.a,this,!1)));else{(this.M==0||this.M==1)&&an();var t=this.a;t.m=this.c,fs(t,2)}};Le.Y=function(){return this.a.Y()};Le.ma=function(){return this.a.ma()};function BG(){this.a=this.b=null}function my(){this.a=new Al}function om(t){var e=typeof t;return e=="object"&&t||e=="function"?"o"+(t[em]||(t[em]=++PL)):e.charAt(0)+t}my.prototype.add=function(t){this.a.set(om(t),t)};my.prototype.C=function(){return this.a.C()};function zG(t,e){this.b=t,this.a=e}function yM(t){this.g=t||qG,wt.PerformanceNavigationTiming?(t=wt.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(wt.ka&&wt.ka.Da&&wt.ka.Da()&&wt.ka.Da().zb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new my),this.b=null,this.c=[]}var qG=10;function _M(t,e){!t.a&&(Ar(e,"spdy")||Ar(e,"quic")||Ar(e,"h2"))&&(t.f=t.g,t.a=new my,t.b&&(CT(t,t.b),t.b=null))}function wM(t){return t.b?!0:t.a?t.a.a.c>=t.f:!1}function EM(t){return t.b?1:t.a?t.a.a.c:0}function lS(t,e){return t.b?t=t.b==e:t.a?(e=om(e),t=ha(t.a.a.b,e)):t=!1,t}function CT(t,e){t.a?t.a.add(e):t.b=e}function SM(t,e){if(t.b&&t.b==e)t.b=null;else{var n;(n=t.a)&&(n=om(e),n=ha(t.a.a.b,n)),n&&cM(t.a.a,om(e))}}yM.prototype.cancel=function(){this.c=bM(this),this.b?(this.b.cancel(),this.b=null):this.a&&this.a.a.c!=0&&(ay(this.a.C(),function(t){t.cancel()}),AG(this.a.a))};function bM(t){if(t.b!=null)return t.c.concat(t.b.j);if(t.a!=null&&t.a.a.c!=0){var e=t.c;return ay(t.a.C(),function(n){e=e.concat(n.j)}),e}return lT(t.c)}function xT(){}xT.prototype.stringify=function(t){return wt.JSON.stringify(t,void 0)};xT.prototype.parse=function(t){return wt.JSON.parse(t,void 0)};function WG(){this.a=new xT}function GG(t,e,n){var r=n||"";try{TT(t,function(i,o){var u=i;np(i)&&(u=qL(i)),e.push(r+o+"="+encodeURIComponent(u))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function $G(t,e){var n=new IG;if(wt.Image){var r=new Image;r.onload=If(Pg,n,r,"TestLoadImage: loaded",!0,e),r.onerror=If(Pg,n,r,"TestLoadImage: error",!1,e),r.onabort=If(Pg,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=If(Pg,n,r,"TestLoadImage: timeout",!1,e),wt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Pg(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}var HG=wt.JSON.parse;function fr(t){Hi.call(this),this.headers=new Al,this.H=t||null,this.b=!1,this.s=this.a=null,this.A="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.I=KG,this.D=this.F=!1}Lr(fr,Hi);var KG="",YG=/^https?$/i,QG=["POST","PUT"];Le=fr.prototype;Le.ca=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.A+"; newUri="+t);e=e?e.toUpperCase():"GET",this.A=t,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?Y2(this.H):Y2(iM),this.a.onreadystatechange=Rr(this.Ea,this);try{this.w=!0,this.a.open(e,String(t),!0),this.w=!1}catch(o){X2(this,o);return}t=n||"";var i=new Al(this.headers);r&&TT(r,function(o,u){i.set(u,o)}),r=lG(i.K()),n=wt.FormData&&t instanceof wt.FormData,!(0<=RL(QG,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(o,u){this.a.setRequestHeader(u,o)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{CM(this),0<this.o&&((this.D=XG(this.a))?(this.a.timeout=this.o,this.a.ontimeout=Rr(this.Ba,this)):this.m=wT(this.Ba,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){X2(this,o)}};function XG(t){return ca&&jL(9)&&sy(t.timeout)&&t.ontimeout!==void 0}function JG(t){return t.toLowerCase()=="content-type"}Le.Ba=function(){typeof uT<"u"&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))};function X2(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,TM(t),yy(t)}function TM(t){t.v||(t.v=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}Le.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),yy(this))};Le.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),yy(this,!0)),fr.N.G.call(this)};Le.Ea=function(){this.j||(this.w||this.l||this.g?IM(this):this.Za())};Le.Za=function(){IM(this)};function IM(t){if(t.b&&typeof uT<"u"&&(!t.s[1]||Ga(t)!=4||t.T()!=2)){if(t.l&&Ga(t)==4)wT(t.Ea,0,t);else if(t.dispatchEvent("readystatechange"),Ga(t)==4){t.b=!1;try{var e=t.T();e:switch(e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break e;default:n=!1}var r;if(!(r=n)){var i;if(i=e===0){var o=String(t.A).match(hM)[1]||null;if(!o&&wt.self&&wt.self.location){var u=wt.self.location.protocol;o=u.substr(0,u.length-1)}i=!YG.test(o?o.toLowerCase():"")}r=i}if(r)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var h=2<Ga(t)?t.a.statusText:""}catch{h=""}t.f=h+" ["+t.T()+"]",TM(t)}}finally{yy(t)}}}}function yy(t,e){if(t.a){CM(t);var n=t.a,r=t.s[0]?Zv:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch{}}}function CM(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(wt.clearTimeout(t.m),t.m=null)}function Ga(t){return t.a?t.a.readyState:0}Le.T=function(){try{return 2<Ga(this)?this.a.status:-1}catch{return-1}};Le.aa=function(){try{return this.a?this.a.responseText:""}catch{return""}};Le.Ua=function(t){if(this.a){var e=this.a.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),HG(e)}};function bd(t,e){return t.a?t.a.getResponseHeader(e):null}Le.ya=function(){return this.h};Le.Xa=function(){return Hr(this.f)?this.f:String(this.f)};function ZG(t){var e="";return cT(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function _y(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}if(r)return t;if(n=ZG(n),Hr(t)){if(e=encodeURIComponent(String(e)),n=n!=null?"="+encodeURIComponent(String(n)):"",e+=n){if(n=t.indexOf("#"),0>n&&(n=t.length),r=t.indexOf("?"),0>r||r>n){r=n;var i=""}else i=t.substring(r+1,n);t=[t.substr(0,r),i,t.substr(n)],n=t[1],t[1]=e?n?n+"&"+e:e:n,t=t[0]+(t[1]?"?"+t[1]:"")+t[2]}return t}return yn(t,e,n),t}function xM(t){this.f=[],this.F=new BG,this.ga=this.pa=this.B=this.ha=this.a=this.I=this.j=this.V=this.g=this.J=this.i=null,this.Qa=this.P=0,this.Oa=!!gc("internalChannelParams.failFast",t),this.ia=this.w=this.s=this.l=this.h=this.c=null,this.oa=!0,this.m=this.ra=this.O=-1,this.S=this.v=this.A=0,this.Na=gc("internalChannelParams.baseRetryDelayMs",t)||5e3,this.Ra=gc("internalChannelParams.retryDelaySeedMs",t)||1e4,this.Pa=gc("internalChannelParams.forwardChannelMaxRetries",t)||2,this.qa=gc("internalChannelParams.forwardChannelRequestTimeoutMs",t)||2e4,this.Ka=t&&t.Ab||void 0,this.D=void 0,this.R=t&&t.supportsCrossDomainXhr||!1,this.H="",this.b=new yM(t&&t.concurrentRequestLimit),this.ja=new WG,this.o=t&&t.backgroundChannelTest!==void 0?t.backgroundChannelTest:!0,(this.W=t&&t.fastHandshake||!1)&&!this.o&&(this.o=!0),t&&t.forceLongPolling&&(this.oa=!1),this.fa=void 0}Le=xM.prototype;Le.wa=8;Le.u=1;function NT(t){if(NM(t),t.u==3){var e=t.P++,n=Ss(t.B);yn(n,"SID",t.H),yn(n,"RID",e),yn(n,"TYPE","terminate"),sp(t,n),e=new Nl(t,e,void 0),e.F=2,e.f=vy(Ss(n)),n=!1,wt.navigator&&wt.navigator.sendBeacon&&(n=wt.navigator.sendBeacon(e.f.toString(),"")),!n&&wt.Image&&(new Image().src=e.f,n=!0),n||(e.a=e.g.$(null),e.a.ca(e.f)),e.v=ma(),op(e)}RM(t)}function NM(t){t.w&&(t.w.abort(),t.w=null),t.a&&(t.a.cancel(),t.a=null),t.l&&(wt.clearTimeout(t.l),t.l=null),sm(t),t.b.cancel(),t.h&&(sy(t.h)&&wt.clearTimeout(t.h),t.h=null)}function Qw(t,e){t.f.push(new zG(t.Qa++,e)),t.u==3&&wy(t)}Le.Ca=function(){return this.u==0};function wy(t){wM(t.b)||t.h||(t.h=!0,HL(t.Ha,t),t.A=0)}function e7(t,e){return EM(t.b)>=t.b.f-(t.h?1:0)?!1:t.h?(t.f=e.j.concat(t.f),!0):t.u==1||t.u==2||t.A>=(t.Oa?0:t.Pa)?!1:(t.h=dy(Rr(t.Ha,t,e),PM(t,t.A)),t.A++,!0)}Le.Ha=function(t){if(this.h)if(this.h=null,this.u==1){if(!t){this.P=Math.floor(1e5*Math.random()),t=this.P++;var e=new Nl(this,t,void 0),n=this.i;this.J&&(n?(n=OL(n),DL(n,this.J)):n=this.J),this.g===null&&(e.h=n);var r;if(this.W)e:{for(var i=r=0;i<this.f.length;i++){t:{var o=this.f[i];if("__data__"in o.a&&(o=o.a.__data__,Hr(o))){o=o.length;break t}o=void 0}if(o===void 0)break;if(r+=o,4096<r){r=i;break e}if(r===4096||i===this.f.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=AM(this,e,r),i=Ss(this.B),yn(i,"RID",t),yn(i,"CVER",22),this.o&&this.j&&yn(i,"X-HTTP-Session-Id",this.j),sp(this,i),this.g&&n&&_y(i,this.g,n),CT(this.b,e),this.W?(yn(i,"$req",r),yn(i,"SID","null"),e.S=!0,sS(e,i,null)):sS(e,i,r),this.u=2}}else this.u==3&&(t?J2(this,t):this.f.length==0||wM(this.b)||J2(this))};function J2(t,e){var n;e?n=e.W:n=t.P++;var r=Ss(t.B);yn(r,"SID",t.H),yn(r,"RID",n),yn(r,"AID",t.O),sp(t,r),t.g&&t.i&&_y(r,t.g,t.i),n=new Nl(t,n,t.A+1),t.g===null&&(n.h=t.i),e&&(t.f=e.j.concat(t.f)),e=AM(t,n,1e3),n.setTimeout(Math.round(.5*t.qa)+Math.round(.5*t.qa*Math.random())),CT(t.b,n),sS(n,r,e)}function sp(t,e){t.c&&TT({},function(n,r){yn(e,r,n)})}function AM(t,e,n){n=Math.min(t.f.length,n);var r=t.c?Rr(t.c.Sa,t.c,t):null;e:for(var i=t.f,o=-1;;){var u=["count="+n];o==-1?0<n?(o=i[0].b,u.push("ofs="+o)):o=0:u.push("ofs="+o);for(var h=!0,f=0;f<n;f++){var v=i[f].b,_=i[f].a;if(v-=o,0>v)o=Math.max(0,i[f].b-100),h=!1;else try{GG(_,u,"req"+v+"_")}catch{r&&r(_)}}if(h){r=u.join("&");break e}}return t=t.f.splice(0,n),e.j=t,r}function kM(t){t.a||t.l||(t.S=1,HL(t.Ga,t),t.v=0)}function AT(t){return t.a||t.l||3<=t.v?!1:(t.S++,t.l=dy(Rr(t.Ga,t),PM(t,t.v)),t.v++,!0)}Le.Ga=function(){this.l=null,this.a=new Nl(this,"rpc",this.S),this.g===null&&(this.a.h=this.i),this.a.J=0;var t=Ss(this.pa);yn(t,"RID","rpc"),yn(t,"SID",this.H),yn(t,"CI",this.ia?"0":"1"),yn(t,"AID",this.O),sp(this,t),yn(t,"TYPE","xmlhttp"),this.g&&this.i&&_y(t,this.g,this.i),this.D&&this.a.setTimeout(this.D),bT(this.a,t,!0,this.ga)};function Td(t,e,n){var r=e.l;r&&_M(t.b,r),t.ia=t.oa&&n,t.m=e.c,t.B=Ey(t,null,t.ha),wy(t)}Le.Fa=function(t,e){if(this.u!=0&&(this.a==t||lS(this.b,t))){if(this.m=t.o,!t.s&&lS(this.b,t)&&this.u==3){try{var n=this.ja.a.parse(e)}catch{n=null}if(vh(n)&&n.length==3){if(e=n,e[0]==0){e:if(!this.l){if(this.a)if(this.a.v+3e3<t.v)sm(this),this.a.cancel(),this.a=null;else break e;AT(this),an()}}else this.ra=e[1],0<this.ra-this.O&&37500>e[2]&&this.ia&&this.v==0&&!this.s&&(this.s=dy(Rr(this.Ya,this),6e3));if(1>=EM(this.b)&&this.fa){try{this.fa()}catch{}this.fa=void 0}}else fs(this,11)}else if((t.s||this.a==t)&&sm(this),!tm(e))for(e=n=this.ja.a.parse(e),n=0;n<e.length;n++){var r=e[n];if(this.O=r[0],r=r[1],this.u==2)if(r[0]=="c"){this.H=r[1],this.ga=r[2];var i=r[3];i!=null&&(this.wa=i),r=r[5],r!=null&&sy(r)&&0<r&&(this.D=1.5*r),this.o&&(r=t.a)&&((i=bd(r,"X-Client-Wire-Protocol"))&&_M(this.b,i),this.j&&(r=bd(r,"X-HTTP-Session-Id")))&&(this.I=r,yn(this.B,this.j,r)),this.u=3,this.c&&this.c.va(),r=t,this.pa=Ey(this,this.Y()?this.ga:null,this.ha),r.s?(SM(this.b,r),(i=this.D)&&r.setTimeout(i),r.i&&(gy(r),op(r)),this.a=r):kM(this),0<this.f.length&&wy(this)}else r[0]!="stop"&&r[0]!="close"||fs(this,7);else this.u==3&&(r[0]=="stop"||r[0]=="close"?r[0]=="stop"?fs(this,7):NT(this):r[0]!="noop"&&this.c&&this.c.ua(r),this.v=0)}}};Le.Ya=function(){this.s!=null&&(this.s=null,this.a.cancel(),this.a=null,AT(this),an())};function sm(t){t.s!=null&&(wt.clearTimeout(t.s),t.s=null)}Le.na=function(t){var e=null;if(this.a==t){sm(this),this.a=null;var n=2}else if(lS(this.b,t))e=t.j,SM(this.b,t),n=1;else return;if(this.m=t.o,this.u!=0)if(t.b)n==1?(e=ma()-t.v,rh.dispatchEvent(new eM(rh,t.l?t.l.length:0,e,this.A)),wy(this)):kM(this);else{var r=t.c;if(r==3||r==0&&0<this.m||!(n==1&&e7(this,t)||n==2&&AT(this)))switch(e&&0<e.length&&(t=this.b,t.c=t.c.concat(e)),r){case 1:fs(this,5);break;case 4:fs(this,10);break;case 3:fs(this,6);break;default:fs(this,2)}}};function PM(t,e){var n=t.Na+Math.floor(Math.random()*t.Ra);return t.ma()||(n*=2),n*e}function fs(t,e){if(e==2){var n=null;t.c&&(n=null);var r=Rr(t.eb,t);n||(n=new lu("//www.google.com/images/cleardot.gif"),wt.location&&wt.location.protocol=="http"||_d(n,"https"),vy(n)),$G(n.toString(),r)}else an();t.u=0,t.c&&t.c.ta(e),RM(t),NM(t)}Le.eb=function(t){an()};function RM(t){t.u=0,t.m=-1,t.c&&((bM(t.b).length!=0||t.f.length!=0)&&(t.b.c.length=0,lT(t.f),t.f.length=0),t.c.sa())}function Ey(t,e,n){var r=PG(n);if(r.b!="")e&&wd(r,e+"."+r.b),Ed(r,r.i);else{var i=wt.location,o;e?o=e+"."+i.hostname:o=i.hostname,r=RG(i.protocol,o,+i.port,n)}return t.V&&cT(t.V,function(u,h){yn(r,h,u)}),e=t.j,n=t.I,e&&n&&yn(r,e,n),yn(r,"VER",t.wa),sp(t,r),r}Le.$=function(t){if(t&&!this.R)throw Error("Can't create secondary domain capable XhrIo object.");return t=new fr(this.Ka),t.F=this.R,t};Le.ma=function(){return!!this.c&&!0};Le.Y=function(){return this.R};function OM(){}Le=OM.prototype;Le.va=function(){};Le.ua=function(){};Le.ta=function(){};Le.sa=function(){};Le.Sa=function(){};function t7(t){for(var e=arguments[0],n=1;n<arguments.length;n++){var r=arguments[n];if(r.lastIndexOf("/",0)==0)e=r;else{var i;(i=e=="")||(i=e.length-1,i=0<=i&&e.indexOf("/",i)==i),i?e+=r:e+="/"+r}}return e}function am(){if(ca&&!(10<=Number(uy)))throw Error("Environmental error: no available transport.")}am.prototype.a=function(t,e){return new mo(t,e)};function mo(t,e){Hi.call(this),this.a=new xM(e),this.g=t,this.m=e&&e.fb?e.fb:t7(this.g,"test"),this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.i=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.xa&&(t?t["X-WebChannel-Client-Profile"]=e.xa:t={"X-WebChannel-Client-Profile":e.xa}),this.a.J=t,(t=e&&e.httpHeadersOverwriteParam)&&!tm(t)&&(this.a.g=t),this.l=e&&e.supportsCrossDomainXhr||!1,this.h=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!tm(e)&&(this.a.j=e,t=this.b,t!==null&&e in t&&(t=this.b,e in t&&delete t[e])),this.f=new yh(this)}Lr(mo,Hi);Le=mo.prototype;Le.addEventListener=function(t,e,n,r){mo.N.addEventListener.call(this,t,e,n,r)};Le.removeEventListener=function(t,e,n,r){mo.N.removeEventListener.call(this,t,e,n,r)};Le.Va=function(){this.a.c=this.f,this.l&&(this.a.R=!0);var t=this.a,e=this.m,n=this.g,r=this.b||void 0;an(),t.ha=n,t.V=r||{},t.o&&(t.F.b=[],t.F.a=!1),t.w=new vM(t),t.g===null&&(t.w.h=t.i),n=e,t.g&&t.i&&(n=_y(e,t.g,t.i)),t=t.w,t.i=n,e=Ey(t.a,null,t.i),an(),n=t.a.F.b,n!=null?(t.f=n[0],t.M=1,mM(t)):(im(e,"MODE","init"),!t.a.o&&t.a.j&&im(e,"X-HTTP-Session-Id",t.a.j),t.b=new Nl(t,void 0,void 0),t.b.h=t.h,bT(t.b,e,!1,null),t.M=0)};Le.close=function(){NT(this.a)};Le.Wa=function(t){if(Hr(t)){var e={};e.__data__=t,Qw(this.a,e)}else this.h?(e={},e.__data__=qL(t),Qw(this.a,e)):Qw(this.a,t)};Le.G=function(){this.a.c=null,delete this.f,NT(this.a),delete this.a,mo.N.G.call(this)};function DM(t){ET.call(this);var e=t.__sm__;if(e){e:{for(var n in e){t=n;break e}t=void 0}(this.c=t)?(t=this.c,this.data=e!==null&&t in e?e[t]:void 0):this.data=e}else this.data=t}Lr(DM,ET);function LM(){ST.call(this),this.status=1}Lr(LM,ST);function yh(t){this.a=t}Lr(yh,OM);yh.prototype.va=function(){this.a.dispatchEvent("a")};yh.prototype.ua=function(t){this.a.dispatchEvent(new DM(t))};yh.prototype.ta=function(t){this.a.dispatchEvent(new LM)};yh.prototype.sa=function(){this.a.dispatchEvent("b")};var n7=If(function(t,e){function n(){}n.prototype=t.prototype;var r=new n;return t.apply(r,Array.prototype.slice.call(arguments,1)),r},am);am.prototype.createWebChannel=am.prototype.a;mo.prototype.send=mo.prototype.Wa;mo.prototype.open=mo.prototype.Va;mo.prototype.close=mo.prototype.close;py.NO_ERROR=0;py.TIMEOUT=8;py.HTTP_ERROR=6;tM.COMPLETE="complete";rM.EventType=ip;ip.OPEN="a";ip.CLOSE="b";ip.ERROR="c";ip.MESSAGE="d";Hi.prototype.listen=Hi.prototype.za;fr.prototype.listenOnce=fr.prototype.Aa;fr.prototype.getLastError=fr.prototype.Xa;fr.prototype.getLastErrorCode=fr.prototype.ya;fr.prototype.getStatus=fr.prototype.T;fr.prototype.getResponseJson=fr.prototype.Ua;fr.prototype.getResponseText=fr.prototype.aa;fr.prototype.send=fr.prototype.ca;var ap={createWebChannelTransport:n7,ErrorCode:py,EventType:tM,WebChannel:rM,XhrIo:fr},r7=ap.createWebChannelTransport,Xw=ap.ErrorCode,i7=ap.EventType,Rg=ap.WebChannel,o7=ap.XhrIo;/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Sy=ze.SDK_VERSION,uo=function(){function t(e){this.uid=e}return t.prototype.t=function(){return this.uid!=null},t.prototype.s=function(){return this.t()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(e){return e.uid===this.uid},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */uo.UNAUTHENTICATED=new uo(null),uo.i=new uo("google-credentials-uid"),uo.o=new uo("first-party-uid");/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ie=function(t){function e(n,r){var i=this;return(i=t.call(this,r)||this).code=n,i.message=r,i.name="FirebaseError",i.toString=function(){return i.name+": [code="+i.code+"]: "+i.message},i}return Et(e,t),e}(Error),s7=function(t,e){this.user=e,this.type="OAuth",this.h={},this.h.Authorization="Bearer "+t},Z2=function(){function t(){this.u=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype._=function(){},t.prototype.l=function(e){this.u=e,e(uo.UNAUTHENTICATED)},t.prototype.T=function(){this.u=null},t}(),a7=function(){function t(e){var n=this;this.m=null,this.currentUser=uo.UNAUTHENTICATED,this.I=!1,this.R=0,this.u=null,this.forceRefresh=!1,this.m=function(){n.R++,n.currentUser=n.A(),n.I=!0,n.u&&n.u(n.currentUser)},this.R=0,this.auth=e.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.m):(this.m(null),e.get().then(function(r){n.auth=r,n.m&&n.auth.addAuthTokenListener(n.m)},function(){}))}return t.prototype.getToken=function(){var e=this,n=this.R,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(function(i){if(e.R!==n)throw new Ie(pe.ABORTED,"getToken aborted due to token change.");return i?(at(typeof i.accessToken=="string","Invalid tokenData returned from getToken():"+i),new s7(i.accessToken,e.currentUser)):null}):Promise.resolve(null)},t.prototype._=function(){this.forceRefresh=!0},t.prototype.l=function(e){this.u=e,this.I&&e(this.currentUser)},t.prototype.T=function(){this.auth&&this.auth.removeAuthTokenListener(this.m),this.m=null,this.u=null},t.prototype.A=function(){var e=this.auth&&this.auth.getUid();return at(e===null||typeof e=="string","Received invalid UID: "+e),new uo(e)},t}(),u7=function(){function t(e,n){this.P=e,this.V=n,this.type="FirstParty",this.user=uo.o}return Object.defineProperty(t.prototype,"h",{get:function(){var e={"X-Goog-AuthUser":this.V},n=this.P.auth.g([]);return n&&(e.Authorization=n),e},enumerable:!0,configurable:!0}),t}(),l7=function(){function t(e,n){this.P=e,this.V=n}return t.prototype.getToken=function(){return Promise.resolve(new u7(this.P,this.V))},t.prototype.l=function(e){e(uo.o)},t.prototype.T=function(){},t.prototype._=function(){},t}(),xi=function(){function t(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ie(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ie(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Ie(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ie(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.p=function(e){return this.seconds===e.seconds?kt(this.nanoseconds,e.nanoseconds):kt(this.seconds,e.seconds)},t.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.valueOf=function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Nt=function(){function t(e){this.timestamp=e}return t.v=function(e){return new t(e)},t.S=function(){return t.MIN},t.prototype.D=function(e){return this.timestamp.p(e.timestamp)},t.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},t.prototype.C=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.k=function(){return this.timestamp},t}();Nt.MIN=new Nt(new xi(0,0));var MM=function(){function t(e,n,r){n===void 0?n=0:n>e.length&&We("offset "+n+" out of range "+e.length),r===void 0?r=e.length-n:r>e.length-n&&We("length "+r+" out of range "+(e.length-n)),this.segments=e,this.offset=n,this.N=r}return Object.defineProperty(t.prototype,"length",{get:function(){return this.N},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return t.F(this,e)===0},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(r){n.push(r)}):n.push(e),this.$(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.M=function(e){return e=e===void 0?1:e,this.$(this.segments,this.offset+e,this.length-e)},t.prototype.L=function(){return this.$(this.segments,this.offset,this.length-1)},t.prototype.O=function(){return this.segments[this.offset]},t.prototype.B=function(){return this.get(this.length-1)},t.prototype.get=function(e){return this.segments[this.offset+e]},t.prototype.U=function(){return this.length===0},t.prototype.q=function(e){if(e.length<this.length)return!1;for(var n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0},t.prototype.W=function(e){if(this.length+1!==e.length)return!1;for(var n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0},t.prototype.forEach=function(e){for(var n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])},t.prototype.j=function(){return this.segments.slice(this.offset,this.limit())},t.F=function(e,n){for(var r=Math.min(e.length,n.length),i=0;i<r;i++){var o=e.get(i),u=n.get(i);if(o<u)return-1;if(o>u)return 1}return e.length<n.length?-1:e.length>n.length?1:0},t}(),dn=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return Et(e,t),e.prototype.$=function(n,r,i){return new e(n,r,i)},e.prototype.K=function(){return this.j().join("/")},e.prototype.toString=function(){return this.K()},e.G=function(n){if(n.indexOf("//")>=0)throw new Ie(pe.INVALID_ARGUMENT,"Invalid path ("+n+"). Paths must not contain // in them.");return new e(n.split("/").filter(function(r){return r.length>0}))},e}(MM);dn.H=new dn([]);var c7=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Dn=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return Et(e,t),e.prototype.$=function(n,r,i){return new e(n,r,i)},e.J=function(n){return c7.test(n)},e.prototype.K=function(){return this.j().map(function(n){return n=n.replace("\\","\\\\").replace("`","\\`"),e.J(n)||(n="`"+n+"`"),n}).join(".")},e.prototype.toString=function(){return this.K()},e.prototype.Y=function(){return this.length===1&&this.get(0)==="__name__"},e.X=function(){return new e(["__name__"])},e.Z=function(n){for(var r=[],i="",o=0,u=function(){if(i.length===0)throw new Ie(pe.INVALID_ARGUMENT,"Invalid field path ("+n+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");r.push(i),i=""},h=!1;o<n.length;){var f=n[o];if(f==="\\"){if(o+1===n.length)throw new Ie(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+n);var v=n[o+1];if(v!=="\\"&&v!=="."&&v!=="`")throw new Ie(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+n);i+=v,o+=2}else f==="`"?(h=!h,o++):f!=="."||h?(i+=f,o++):(u(),o++)}if(u(),h)throw new Ie(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+n);return new e(r)},e}(MM);Dn.H=new Dn([]);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ct=function(){function t(e){this.path=e}return t.tt=function(e){return new t(dn.G(e).M(5))},t.prototype.et=function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e},t.prototype.isEqual=function(e){return e!==null&&dn.F(this.path,e.path)===0},t.prototype.toString=function(){return this.path.toString()},t.F=function(e,n){return dn.F(e.path,n.path)},t.st=function(e){return e.length%2==0},t.nt=function(e){return new t(new dn(e.slice()))},t}();ct.EMPTY=new ct(new dn([]));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ui=function(){function t(e,n){this.F=e,this.root=n||Va.EMPTY}return t.prototype.it=function(e,n){return new t(this.F,this.root.it(e,n,this.F).rt(null,null,Va.ot,null,null))},t.prototype.remove=function(e){return new t(this.F,this.root.remove(e,this.F).rt(null,null,Va.ot,null,null))},t.prototype.get=function(e){for(var n=this.root;!n.U();){var r=this.F(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null},t.prototype.indexOf=function(e){for(var n=0,r=this.root;!r.U();){var i=this.F(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1},t.prototype.U=function(){return this.root.U()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),t.prototype.ht=function(){return this.root.ht()},t.prototype.at=function(){return this.root.at()},t.prototype.ut=function(e){return this.root.ut(e)},t.prototype.forEach=function(e){this.ut(function(n,r){return e(n,r),!1})},t.prototype.toString=function(){var e=[];return this.ut(function(n,r){return e.push(n+":"+r),!1}),"{"+e.join(", ")+"}"},t.prototype.ct=function(e){return this.root.ct(e)},t.prototype._t=function(){return new Og(this.root,null,this.F,!1)},t.prototype.lt=function(e){return new Og(this.root,e,this.F,!1)},t.prototype.dt=function(){return new Og(this.root,null,this.F,!0)},t.prototype.ft=function(e){return new Og(this.root,e,this.F,!0)},t}(),Og=function(){function t(e,n,r,i){this.Tt=i,this.wt=[];for(var o=1;!e.U();)if(o=n?r(e.key,n):1,i&&(o*=-1),o<0)e=this.Tt?e.left:e.right;else{if(o===0){this.wt.push(e);break}this.wt.push(e),e=this.Tt?e.right:e.left}}return t.prototype.Et=function(){var e=this.wt.pop(),n={key:e.key,value:e.value};if(this.Tt)for(e=e.left;!e.U();)this.wt.push(e),e=e.right;else for(e=e.right;!e.U();)this.wt.push(e),e=e.left;return n},t.prototype.It=function(){return this.wt.length>0},t.prototype.Rt=function(){if(this.wt.length===0)return null;var e=this.wt[this.wt.length-1];return{key:e.key,value:e.value}},t}(),Va=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.rt=function(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)},t.prototype.U=function(){return!1},t.prototype.ut=function(e){return this.left.ut(e)||e(this.key,this.value)||this.right.ut(e)},t.prototype.ct=function(e){return this.right.ct(e)||e(this.key,this.value)||this.left.ct(e)},t.prototype.min=function(){return this.left.U()?this:this.left.min()},t.prototype.ht=function(){return this.min().key},t.prototype.at=function(){return this.right.U()?this.key:this.right.at()},t.prototype.it=function(e,n,r){var i=this,o=r(e,i.key);return(i=o<0?i.rt(null,null,null,i.left.it(e,n,r),null):o===0?i.rt(null,n,null,null,null):i.rt(null,null,null,null,i.right.it(e,n,r))).At()},t.prototype.Pt=function(){if(this.left.U())return t.EMPTY;var e=this;return e.left.Vt()||e.left.left.Vt()||(e=e.gt()),(e=e.rt(null,null,null,e.left.Pt(),null)).At()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.U()||i.left.Vt()||i.left.left.Vt()||(i=i.gt()),i=i.rt(null,null,null,i.left.remove(e,n),null);else{if(i.left.Vt()&&(i=i.pt()),i.right.U()||i.right.Vt()||i.right.left.Vt()||(i=i.yt()),n(e,i.key)===0){if(i.right.U())return t.EMPTY;r=i.right.min(),i=i.rt(r.key,r.value,null,null,i.right.Pt())}i=i.rt(null,null,null,null,i.right.remove(e,n))}return i.At()},t.prototype.Vt=function(){return this.color},t.prototype.At=function(){var e=this;return e.right.Vt()&&!e.left.Vt()&&(e=e.bt()),e.left.Vt()&&e.left.left.Vt()&&(e=e.pt()),e.left.Vt()&&e.right.Vt()&&(e=e.vt()),e},t.prototype.gt=function(){var e=this.vt();return e.right.left.Vt()&&(e=(e=(e=e.rt(null,null,null,null,e.right.pt())).bt()).vt()),e},t.prototype.yt=function(){var e=this.vt();return e.left.left.Vt()&&(e=(e=e.pt()).vt()),e},t.prototype.bt=function(){var e=this.rt(null,null,t.RED,null,this.right.left);return this.right.rt(null,null,this.color,e,null)},t.prototype.pt=function(){var e=this.rt(null,null,t.RED,this.left.right,null);return this.left.rt(null,null,this.color,null,e)},t.prototype.vt=function(){var e=this.left.rt(null,null,!this.left.color,null,null),n=this.right.rt(null,null,!this.right.color,null,null);return this.rt(null,null,!this.color,e,n)},t.prototype.St=function(){var e=this.Dt();return Math.pow(2,e)<=this.size+1},t.prototype.Dt=function(){if(this.Vt()&&this.left.Vt())throw We("Red node has red child("+this.key+","+this.value+")");if(this.right.Vt())throw We("Right child of ("+this.key+","+this.value+") is red");var e=this.left.Dt();if(e!==this.right.Dt())throw We("Black depths differ");return e+(this.Vt()?0:1)},t}();Va.EMPTY=null,Va.RED=!0,Va.ot=!1,Va.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw We("LLRBEmptyNode has no key.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw We("LLRBEmptyNode has no value.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw We("LLRBEmptyNode has no color.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw We("LLRBEmptyNode has no left child.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw We("LLRBEmptyNode has no right child.")},enumerable:!0,configurable:!0}),t.prototype.rt=function(e,n,r,i,o){return this},t.prototype.it=function(e,n,r){return new Va(e,n)},t.prototype.remove=function(e,n){return this},t.prototype.U=function(){return!0},t.prototype.ut=function(e){return!1},t.prototype.ct=function(e){return!1},t.prototype.ht=function(){return null},t.prototype.at=function(){return null},t.prototype.Vt=function(){return!1},t.prototype.St=function(){return!0},t.prototype.Dt=function(){return 0},t}());/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var En=function(){function t(e){this.F=e,this.data=new ui(this.F)}return t.prototype.has=function(e){return this.data.get(e)!==null},t.prototype.first=function(){return this.data.ht()},t.prototype.last=function(){return this.data.at()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),t.prototype.indexOf=function(e){return this.data.indexOf(e)},t.prototype.forEach=function(e){this.data.ut(function(n,r){return e(n),!1})},t.prototype.Ct=function(e,n){for(var r=this.data.lt(e[0]);r.It();){var i=r.Et();if(this.F(i.key,e[1])>=0)return;n(i.key)}},t.prototype.kt=function(e,n){var r;for(r=n!==void 0?this.data.lt(n):this.data._t();r.It();)if(!e(r.Et().key))return},t.prototype.Nt=function(e){var n=this.data.lt(e);return n.It()?n.Et().key:null},t.prototype._t=function(){return new ek(this.data._t())},t.prototype.lt=function(e){return new ek(this.data.lt(e))},t.prototype.add=function(e){return this.rt(this.data.remove(e).it(e,!0))},t.prototype.delete=function(e){return this.has(e)?this.rt(this.data.remove(e)):this},t.prototype.U=function(){return this.data.U()},t.prototype.Ft=function(e){var n=this;return n.size<e.size&&(n=e,e=this),e.forEach(function(r){n=n.add(r)}),n},t.prototype.isEqual=function(e){if(!(e instanceof t)||this.size!==e.size)return!1;for(var n=this.data._t(),r=e.data._t();n.It();){var i=n.Et().key,o=r.Et().key;if(this.F(i,o)!==0)return!1}return!0},t.prototype.j=function(){var e=[];return this.forEach(function(n){e.push(n)}),e},t.prototype.toString=function(){var e=[];return this.forEach(function(n){return e.push(n)}),"SortedSet("+e.toString()+")"},t.prototype.rt=function(e){var n=new t(this.F);return n.data=e,n},t}(),ek=function(){function t(e){this.$t=e}return t.prototype.Et=function(){return this.$t.Et().key},t.prototype.It=function(){return this.$t.It()},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tk(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function fl(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function FM(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hr=function(){function t(e){this.Mt=e}return t.fromBase64String=function(e){return new t(vl.Lt().atob(e))},t.fromUint8Array=function(e){return new t(function(n){for(var r="",i=0;i<n.length;++i)r+=String.fromCharCode(n[i]);return r}(e))},t.prototype.toBase64=function(){return vl.Lt().btoa(this.Mt)},t.prototype.toUint8Array=function(){return function(e){for(var n=new Uint8Array(e.length),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.Mt)},t.prototype.Ot=function(){return 2*this.Mt.length},t.prototype.D=function(e){return kt(this.Mt,e.Mt)},t.prototype.isEqual=function(e){return this.Mt===e.Mt},t}();function dl(t){return t==null}function um(t){return t===-0&&1/t==-1/0}function jM(t){return typeof t=="number"&&Number.isInteger(t)&&!um(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kT(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Id(t){var e=cu(t.mapValue.fields.__local_write_time__.timestampValue);return new xi(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hr.xt=new hr("");var h7=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fa(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?kT(t)?4:10:We("Invalid value type: "+JSON.stringify(t))}function Yo(t,e){var n=fa(t);if(n!==fa(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Id(t).isEqual(Id(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;var o=cu(r.timestampValue),u=cu(i.timestampValue);return o.seconds===u.seconds&&o.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return ih(r.bytesValue).isEqual(ih(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return _r(r.geoPointValue.latitude)===_r(i.geoPointValue.latitude)&&_r(r.geoPointValue.longitude)===_r(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return _r(r.integerValue)===_r(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){var o=_r(r.doubleValue),u=_r(i.doubleValue);return o===u?um(o)===um(u):isNaN(o)&&isNaN(u)}return!1}(t,e);case 9:return ah(t.arrayValue.values||[],e.arrayValue.values||[],Yo);case 10:return function(r,i){var o=r.mapValue.fields||{},u=i.mapValue.fields||{};if(tk(o)!==tk(u))return!1;for(var h in o)if(o.hasOwnProperty(h)&&(u[h]===void 0||!Yo(o[h],u[h])))return!1;return!0}(t,e);default:return We("Unexpected value type: "+JSON.stringify(t))}}function PT(t,e){return(t.values||[]).find(function(n){return Yo(n,e)})!==void 0}function Cd(t,e){var n=fa(t),r=fa(e);if(n!==r)return kt(n,r);switch(n){case 0:return 0;case 1:return kt(t.booleanValue,e.booleanValue);case 2:return function(i,o){var u=_r(i.integerValue||i.doubleValue),h=_r(o.integerValue||o.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(t,e);case 3:return nk(t.timestampValue,e.timestampValue);case 4:return nk(Id(t),Id(e));case 5:return kt(t.stringValue,e.stringValue);case 6:return function(i,o){var u=ih(i),h=ih(o);return u.D(h)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){for(var u=i.split("/"),h=o.split("/"),f=0;f<u.length&&f<h.length;f++){var v=kt(u[f],h[f]);if(v!==0)return v}return kt(u.length,h.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){var u=kt(_r(i.latitude),_r(o.latitude));return u!==0?u:kt(_r(i.longitude),_r(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,o){for(var u=i.values||[],h=o.values||[],f=0;f<u.length&&f<h.length;++f){var v=Cd(u[f],h[f]);if(v)return v}return kt(u.length,h.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,o){var u=i.fields||{},h=Object.keys(u),f=o.fields||{},v=Object.keys(f);h.sort(),v.sort();for(var _=0;_<h.length&&_<v.length;++_){var b=kt(h[_],v[_]);if(b!==0)return b;var S=Cd(u[h[_]],f[v[_]]);if(S!==0)return S}return kt(h.length,v.length)}(t.mapValue,e.mapValue);default:throw We("Invalid value type: "+n)}}function nk(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return kt(t,e);var n=cu(t),r=cu(e),i=kt(n.seconds,r.seconds);return i!==0?i:kt(n.nanos,r.nanos)}function cS(t){return function e(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(o){var u=cu(o);return"time("+u.seconds+","+u.nanos+")"}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?ih(n.bytesValue).toBase64():"referenceValue"in n?(i=n.referenceValue,ct.tt(i).toString()):"geoPointValue"in n?"geo("+(r=n.geoPointValue).latitude+","+r.longitude+")":"arrayValue"in n?function(o){for(var u="[",h=!0,f=0,v=o.values||[];f<v.length;f++){var _=v[f];h?h=!1:u+=",",u+=e(_)}return u+"]"}(n.arrayValue):"mapValue"in n?function(o){for(var u="{",h=!0,f=0,v=Object.keys(o.fields||{}).sort();f<v.length;f++){var _=v[f];h?h=!1:u+=",",u+=_+":"+e(o.fields[_])}return u+"}"}(n.mapValue):We("Invalid value type: "+JSON.stringify(n));var r,i}(t)}function cu(t){if(at(!!t,"Cannot normalize null or undefined timestamp."),typeof t=="string"){var e=0,n=h7.exec(t);if(at(!!n,"invalid timestamp: "+t),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:_r(t.seconds),nanos:_r(t.nanos)}}function _r(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ih(t){return typeof t=="string"?hr.fromBase64String(t):hr.fromUint8Array(t)}function Dg(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.K()}}function Jw(t){return!!t&&"integerValue"in t}function RT(t){return!!t&&"arrayValue"in t}function UM(t){return!!t&&"nullValue"in t}function VM(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function BM(t){return!!t&&"mapValue"in t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xd=function(){function t(){}return t.prototype.Bt=function(e,n){return function(r,i){var o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e)},t.prototype.Ut=function(e,n){return n},t.prototype.qt=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t},t}();xd.instance=new xd;var hS=function(){function t(e){this.elements=e}return t.prototype.Bt=function(e,n){return this.apply(e)},t.prototype.Ut=function(e,n){return this.apply(e)},t.prototype.apply=function(e){for(var n=zM(e),r=function(u){n.some(function(h){return Yo(h,u)})||n.push(u)},i=0,o=this.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}},t.prototype.qt=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t&&ah(this.elements,e.elements,Yo)},t}(),fS=function(){function t(e){this.elements=e}return t.prototype.Bt=function(e,n){return this.apply(e)},t.prototype.Ut=function(e,n){return this.apply(e)},t.prototype.apply=function(e){for(var n=zM(e),r=function(u){n=n.filter(function(h){return!Yo(h,u)})},i=0,o=this.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}},t.prototype.qt=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t&&ah(this.elements,e.elements,Yo)},t}(),dS=function(){function t(e,n){this.serializer=e,this.Qt=n}return t.prototype.Bt=function(e,n){var r=this.qt(e),i=this.asNumber(r)+this.asNumber(this.Qt);return Jw(r)&&Jw(this.Qt)?this.serializer.Wt(i):this.serializer.jt(i)},t.prototype.Ut=function(e,n){return n},t.prototype.qt=function(e){return Jw(n=e)||function(r){return!!r&&"doubleValue"in r}(n)?e:{integerValue:0};var n},t.prototype.isEqual=function(e){return e instanceof t&&Yo(this.Qt,e.Qt)},t.prototype.asNumber=function(e){return _r(e.integerValue||e.doubleValue)},t}();function zM(t){return RT(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ac=function(){function t(e){this.fields=e}return t.Kt=function(e){return new t(e)},t.Gt=function(e){var n=new En(Dn.F);return e.forEach(function(r){return n=n.add(r)}),new t(n)},t.prototype.zt=function(e){var n=!1;return this.fields.forEach(function(r){r.q(e)&&(n=!0)}),n},t.prototype.isEqual=function(e){return this.fields.isEqual(e.fields)},t}(),xf=function(){function t(e,n){this.field=e,this.transform=n}return t.prototype.isEqual=function(e){return this.field.isEqual(e.field)&&this.transform.isEqual(e.transform)},t}(),f7=function(t,e){this.version=t,this.transformResults=e},Er=function(){function t(e,n){this.updateTime=e,this.exists=n}return t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"Ht",{get:function(){return this.updateTime===void 0&&this.exists===void 0},enumerable:!0,configurable:!0}),t.prototype.Jt=function(e){return this.updateTime!==void 0?e instanceof Gt&&e.version.isEqual(this.updateTime):this.exists===void 0||this.exists===e instanceof Gt},t.prototype.isEqual=function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)},t}();Er.NONE=new Er;var pl=function(){function t(){}return t.prototype.Yt=function(e){},t.Xt=function(e){return e instanceof Gt?e.version:Nt.MIN},t}(),pS=function(t){function e(n,r,i){var o=this;return(o=t.call(this)||this).key=n,o.value=r,o.Zt=i,o.type=0,o}return Et(e,t),e.prototype.Ut=function(n,r){this.Yt(n);var i=r.version;return new Gt(this.key,i,this.value,{hasCommittedMutations:!0})},e.prototype.Bt=function(n,r,i){if(this.Yt(n),!this.Zt.Jt(n))return n;var o=pl.Xt(n);return new Gt(this.key,o,this.value,{te:!0})},e.prototype.ee=function(n){return null},e.prototype.isEqual=function(n){return n instanceof e&&this.key.isEqual(n.key)&&this.value.isEqual(n.value)&&this.Zt.isEqual(n.Zt)},e}(pl),oh=function(t){function e(n,r,i,o){var u=this;return(u=t.call(this)||this).key=n,u.data=r,u.se=i,u.Zt=o,u.type=1,u}return Et(e,t),e.prototype.Ut=function(n,r){if(this.Yt(n),!this.Zt.Jt(n))return new cm(this.key,r.version);var i=this.ne(n);return new Gt(this.key,r.version,i,{hasCommittedMutations:!0})},e.prototype.Bt=function(n,r,i){if(this.Yt(n),!this.Zt.Jt(n))return n;var o=pl.Xt(n),u=this.ne(n);return new Gt(this.key,o,u,{te:!0})},e.prototype.ee=function(n){return null},e.prototype.isEqual=function(n){return n instanceof e&&this.key.isEqual(n.key)&&this.se.isEqual(n.se)&&this.Zt.isEqual(n.Zt)},e.prototype.ne=function(n){var r;return r=n instanceof Gt?n.data():Vi.EMPTY,this.ie(r)},e.prototype.ie=function(n){var r=this,i=n.re();return this.se.fields.forEach(function(o){if(!o.U()){var u=r.data.field(o);u!==null?i.set(o,u):i.delete(o)}}),i.oe()},e}(pl),lm=function(t){function e(n,r){var i=this;return(i=t.call(this)||this).key=n,i.fieldTransforms=r,i.type=2,i.Zt=Er.exists(!0),i}return Et(e,t),e.prototype.Ut=function(n,r){if(this.Yt(n),at(r.transformResults!=null,"Transform results missing for TransformMutation."),!this.Zt.Jt(n))return new cm(this.key,r.version);var i=this.he(n),o=this.ae(n,r.transformResults),u=r.version,h=this.ue(i.data(),o);return new Gt(this.key,u,h,{hasCommittedMutations:!0})},e.prototype.Bt=function(n,r,i){if(this.Yt(n),!this.Zt.Jt(n))return n;var o=this.he(n),u=this.ce(i,n,r),h=this.ue(o.data(),u);return new Gt(this.key,o.version,h,{te:!0})},e.prototype.ee=function(n){for(var r=null,i=0,o=this.fieldTransforms;i<o.length;i++){var u=o[i],h=n instanceof Gt?n.field(u.field):void 0,f=u.transform.qt(h||null);f!=null&&(r=r==null?Vi._e().set(u.field,f):r.set(u.field,f))}return r?r.oe():null},e.prototype.isEqual=function(n){return n instanceof e&&this.key.isEqual(n.key)&&ah(this.fieldTransforms,n.fieldTransforms,function(r,i){return r.isEqual(i)})&&this.Zt.isEqual(n.Zt)},e.prototype.he=function(n){return n},e.prototype.ae=function(n,r){var i=[];at(this.fieldTransforms.length===r.length,"server transform result count ("+r.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var o=0;o<r.length;o++){var u=this.fieldTransforms[o],h=u.transform,f=null;n instanceof Gt&&(f=n.field(u.field)),i.push(h.Ut(f,r[o]))}return i},e.prototype.ce=function(n,r,i){for(var o=[],u=0,h=this.fieldTransforms;u<h.length;u++){var f=h[u],v=f.transform,_=null;r instanceof Gt&&(_=r.field(f.field)),_===null&&i instanceof Gt&&(_=i.field(f.field)),o.push(v.Bt(_,n))}return o},e.prototype.ue=function(n,r){for(var i=n.re(),o=0;o<this.fieldTransforms.length;o++){var u=this.fieldTransforms[o].field;i.set(u,r[o])}return i.oe()},e}(pl),Nd=function(t){function e(n,r){var i=this;return(i=t.call(this)||this).key=n,i.Zt=r,i.type=3,i}return Et(e,t),e.prototype.Ut=function(n,r){return this.Yt(n),new br(this.key,r.version,{hasCommittedMutations:!0})},e.prototype.Bt=function(n,r,i){return this.Yt(n),this.Zt.Jt(n)?new br(this.key,Nt.S()):n},e.prototype.ee=function(n){return null},e.prototype.isEqual=function(n){return n instanceof e&&this.key.isEqual(n.key)&&this.Zt.isEqual(n.Zt)},e}(pl),gS=function(t){function e(n,r){var i=this;return(i=t.call(this)||this).key=n,i.Zt=r,i.type=4,i}return Et(e,t),e.prototype.Ut=function(n,r){We("VerifyMutation should only be used in Transactions.")},e.prototype.Bt=function(n,r,i){We("VerifyMutation should only be used in Transactions.")},e.prototype.ee=function(n){We("VerifyMutation should only be used in Transactions.")},e.prototype.isEqual=function(n){return n instanceof e&&this.key.isEqual(n.key)&&this.Zt.isEqual(n.Zt)},e}(pl),Vi=function(){function t(e){this.proto=e}return t._e=function(){return t.EMPTY.re()},t.prototype.field=function(e){if(e.U())return this.proto;for(var n=this.proto,r=0;r<e.length-1;++r)if(!n.mapValue.fields||!BM(n=n.mapValue.fields[e.get(r)]))return null;return(n=(n.mapValue.fields||{})[e.B()])||null},t.prototype.se=function(){return this.le(this.proto.mapValue)},t.prototype.le=function(e){var n=this,r=new En(Dn.F);return fl(e.fields||{},function(i,o){var u=new Dn([i]);if(fa(o)===10){var h=n.le(o.mapValue).fields;h.U()?r=r.add(u):h.forEach(function(f){r=r.add(u.child(f))})}else r=r.add(u)}),Ac.Kt(r)},t.prototype.isEqual=function(e){return Yo(this.proto,e.proto)},t.prototype.re=function(){return new d7(this)},t}();Vi.EMPTY=new Vi({mapValue:{}});var d7=function(){function t(e){this.de=e,this.fe=new Map}return t.prototype.set=function(e,n){return this.Te(e,n),this},t.prototype.delete=function(e){return this.Te(e,null),this},t.prototype.Te=function(e,n){for(var r=this.fe,i=0;i<e.length-1;++i){var o=e.get(i),u=r.get(o);u instanceof Map?r=u:u&&fa(u)===10?(u=new Map(Object.entries(u.mapValue.fields||{})),r.set(o,u),r=u):(u=new Map,r.set(o,u),r=u)}r.set(e.B(),n)},t.prototype.oe=function(){var e=this.me(Dn.H,this.fe);return e!=null?new Vi(e):this.de},t.prototype.me=function(e,n){var r=this,i=!1,o=this.de.field(e),u=BM(o)?Object.assign({},o.mapValue.fields):{};return n.forEach(function(h,f){if(h instanceof Map){var v=r.me(e.child(f),h);v!=null&&(u[f]=v,i=!0)}else h!==null?(u[f]=h,i=!0):u.hasOwnProperty(f)&&(delete u[f],i=!0)}),i?{mapValue:{fields:u}}:null},t}(),OT=function(){function t(e,n){this.key=e,this.version=n}return t.we=function(e,n){return ct.F(e.key,n.key)},t}(),Gt=function(t){function e(n,r,i,o){var u=this;return(u=t.call(this,n,r)||this).Ee=i,u.te=!!o.te,u.hasCommittedMutations=!!o.hasCommittedMutations,u}return Et(e,t),e.prototype.field=function(n){return this.Ee.field(n)},e.prototype.data=function(){return this.Ee},e.prototype.Ie=function(){return this.Ee.proto},e.prototype.isEqual=function(n){return n instanceof e&&this.key.isEqual(n.key)&&this.version.isEqual(n.version)&&this.te===n.te&&this.hasCommittedMutations===n.hasCommittedMutations&&this.Ee.isEqual(n.Ee)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.Ee.toString()+", {hasLocalMutations: "+this.te+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.te||this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.Re=function(n,r,i){var o=r.field(n),u=i.field(n);return o!==null&&u!==null?Cd(o,u):We("Trying to compare documents on fields that don't exist")},e}(OT),br=function(t){function e(n,r,i){var o=this;return(o=t.call(this,n,r)||this).hasCommittedMutations=!(!i||!i.hasCommittedMutations),o}return Et(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(n){return n instanceof e&&n.hasCommittedMutations===this.hasCommittedMutations&&n.version.isEqual(this.version)&&n.key.isEqual(this.key)},e}(OT),cm=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return Et(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(n){return n instanceof e&&n.version.isEqual(this.version)&&n.key.isEqual(this.key)},e}(OT),rk=function(){function t(e,n,r,i,o,u,h){n===void 0&&(n=null),r===void 0&&(r=[]),i===void 0&&(i=[]),o===void 0&&(o=null),u===void 0&&(u=null),h===void 0&&(h=null),this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=u,this.endAt=h,this.Ae=null}return t.prototype.canonicalId=function(){if(this.Ae===null){var e=this.path.K();this.collectionGroup!==null&&(e+="|cg:"+this.collectionGroup),e+="|f:",e+=this.filters.map(function(n){return n.canonicalId()}).join(","),e+="|ob:",e+=this.orderBy.map(function(n){return n.canonicalId()}).join(","),dl(this.limit)||(e+="|l:",e+=this.limit),this.startAt&&(e+="|lb:",e+=this.startAt.canonicalId()),this.endAt&&(e+="|ub:",e+=this.endAt.canonicalId()),this.Ae=e}return this.Ae},t.prototype.toString=function(){var e=this.path.K();return this.collectionGroup!==null&&(e+=" collectionGroup="+this.collectionGroup),this.filters.length>0&&(e+=", filters: ["+this.filters.join(", ")+"]"),dl(this.limit)||(e+=", limit: "+this.limit),this.orderBy.length>0&&(e+=", orderBy: ["+this.orderBy.join(", ")+"]"),this.startAt&&(e+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(e+=", endAt: "+this.endAt.canonicalId()),"Target("+e+")"},t.prototype.isEqual=function(e){if(this.limit!==e.limit||this.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<this.orderBy.length;n++)if(!this.orderBy[n].isEqual(e.orderBy[n]))return!1;if(this.filters.length!==e.filters.length)return!1;for(var r=0;r<this.filters.length;r++)if(!this.filters[r].isEqual(e.filters[r]))return!1;return this.collectionGroup===e.collectionGroup&&!!this.path.isEqual(e.path)&&!!(this.startAt!==null?this.startAt.isEqual(e.startAt):e.startAt===null)&&(this.endAt!==null?this.endAt.isEqual(e.endAt):e.endAt===null)},t.prototype.Pe=function(){return ct.st(this.path)&&this.collectionGroup===null&&this.filters.length===0},t}(),gl=function(){function t(e,n,r,i,o,u,h,f){n===void 0&&(n=null),r===void 0&&(r=[]),i===void 0&&(i=[]),o===void 0&&(o=null),u===void 0&&(u="F"),h===void 0&&(h=null),f===void 0&&(f=null),this.path=e,this.collectionGroup=n,this.Ve=r,this.filters=i,this.limit=o,this.ge=u,this.startAt=h,this.endAt=f,this.pe=null,this.ye=null,this.startAt&&this.be(this.startAt),this.endAt&&this.be(this.endAt)}return t.ve=function(e){return new t(e)},Object.defineProperty(t.prototype,"orderBy",{get:function(){if(this.pe===null){var e=this.Se(),n=this.De();if(e!==null&&n===null)e.Y()?this.pe=[Zw]:this.pe=[new sh(e),Zw];else{this.pe=[];for(var r=!1,i=0,o=this.Ve;i<o.length;i++){var u=o[i];this.pe.push(u),u.field.Y()&&(r=!0)}if(!r){var h=this.Ve.length>0?this.Ve[this.Ve.length-1].dir:qn.ASCENDING;this.pe.push(h===qn.ASCENDING?Zw:_7)}}}return this.pe},enumerable:!0,configurable:!0}),t.prototype.Ce=function(e){var n=this.filters.concat([e]);return new t(this.path,this.collectionGroup,this.Ve.slice(),n,this.limit,this.ge,this.startAt,this.endAt)},t.prototype.ke=function(e){var n=this.Ve.concat([e]);return new t(this.path,this.collectionGroup,n,this.filters.slice(),this.limit,this.ge,this.startAt,this.endAt)},t.prototype.Ne=function(e){return new t(this.path,this.collectionGroup,this.Ve.slice(),this.filters.slice(),e,"F",this.startAt,this.endAt)},t.prototype.Fe=function(e){return new t(this.path,this.collectionGroup,this.Ve.slice(),this.filters.slice(),e,"L",this.startAt,this.endAt)},t.prototype.$e=function(e){return new t(this.path,this.collectionGroup,this.Ve.slice(),this.filters.slice(),this.limit,this.ge,e,this.endAt)},t.prototype.Me=function(e){return new t(this.path,this.collectionGroup,this.Ve.slice(),this.filters.slice(),this.limit,this.ge,this.startAt,e)},t.prototype.Le=function(e){return new t(e,null,this.Ve.slice(),this.filters.slice(),this.limit,this.ge,this.startAt,this.endAt)},t.prototype.Oe=function(){return this.filters.length===0&&this.limit===null&&this.startAt==null&&this.endAt==null&&(this.Ve.length===0||this.Ve.length===1&&this.Ve[0].field.Y())},t.prototype.canonicalId=function(){return this.xe().canonicalId()+"|lt:"+this.ge},t.prototype.toString=function(){return"Query(target="+this.xe().toString()+"; limitType="+this.ge+")"},t.prototype.isEqual=function(e){return this.xe().isEqual(e.xe())&&this.ge===e.ge},t.prototype.Be=function(e,n){for(var r=!1,i=0,o=this.orderBy;i<o.length;i++){var u=o[i],h=u.compare(e,n);if(h!==0)return h;r=r||u.field.Y()}return 0},t.prototype.matches=function(e){return this.Ue(e)&&this.qe(e)&&this.Qe(e)&&this.We(e)},t.prototype.je=function(){return!dl(this.limit)&&this.ge==="F"},t.prototype.Ke=function(){return!dl(this.limit)&&this.ge==="L"},t.prototype.De=function(){return this.Ve.length>0?this.Ve[0].field:null},t.prototype.Se=function(){for(var e=0,n=this.filters;e<n.length;e++){var r=n[e];if(r instanceof Bi&&r.Ge())return r.field}return null},t.prototype.ze=function(e){for(var n=0,r=this.filters;n<r.length;n++){var i=r[n];if(i instanceof Bi&&e.indexOf(i.op)>=0)return i.op}return null},t.prototype.Pe=function(){return this.xe().Pe()},t.prototype.He=function(){return this.collectionGroup!==null},t.prototype.xe=function(){if(!this.ye)if(this.ge==="F")this.ye=new rk(this.path,this.collectionGroup,this.orderBy,this.filters,this.limit,this.startAt,this.endAt);else{for(var e=[],n=0,r=this.orderBy;n<r.length;n++){var i=r[n],o=i.dir===qn.DESCENDING?qn.ASCENDING:qn.DESCENDING;e.push(new sh(i.field,o))}var u=this.endAt?new Ad(this.endAt.position,!this.endAt.before):null,h=this.startAt?new Ad(this.startAt.position,!this.startAt.before):null;this.ye=new rk(this.path,this.collectionGroup,e,this.filters,this.limit,u,h)}return this.ye},t.prototype.Ue=function(e){var n=e.key.path;return this.collectionGroup!==null?e.key.et(this.collectionGroup)&&this.path.q(n):ct.st(this.path)?this.path.isEqual(n):this.path.W(n)},t.prototype.qe=function(e){for(var n=0,r=this.Ve;n<r.length;n++){var i=r[n];if(!i.field.Y()&&e.field(i.field)===null)return!1}return!0},t.prototype.Qe=function(e){for(var n=0,r=this.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0},t.prototype.We=function(e){return!(this.startAt&&!this.startAt.Je(this.orderBy,e)||this.endAt&&this.endAt.Je(this.orderBy,e))},t.prototype.be=function(e){},t}(),Qe=function(){function t(e){this.name=e}return t.G=function(e){switch(e){case"<":return t.LESS_THAN;case"<=":return t.LESS_THAN_OR_EQUAL;case"==":return t.EQUAL;case">=":return t.GREATER_THAN_OR_EQUAL;case">":return t.GREATER_THAN;case"array-contains":return t.ARRAY_CONTAINS;case"in":return t.IN;case"array-contains-any":return t.ARRAY_CONTAINS_ANY;default:return We("Unknown FieldFilter operator: "+e)}},t.prototype.toString=function(){return this.name},t.prototype.isEqual=function(e){return this.name===e.name},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qe.LESS_THAN=new Qe("<"),Qe.LESS_THAN_OR_EQUAL=new Qe("<="),Qe.EQUAL=new Qe("=="),Qe.GREATER_THAN=new Qe(">"),Qe.GREATER_THAN_OR_EQUAL=new Qe(">="),Qe.ARRAY_CONTAINS=new Qe("array-contains"),Qe.IN=new Qe("in"),Qe.ARRAY_CONTAINS_ANY=new Qe("array-contains-any");var Bi=function(t){function e(n,r,i){var o=this;return(o=t.call(this)||this).field=n,o.op=r,o.value=i,o}return Et(e,t),e.create=function(n,r,i){if(n.Y())return r===Qe.IN?new g7(n,i):new p7(n,r,i);if(UM(i)){if(r!==Qe.EQUAL)throw new Ie(pe.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new e(n,r,i)}if(VM(i)){if(r!==Qe.EQUAL)throw new Ie(pe.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new e(n,r,i)}return r===Qe.ARRAY_CONTAINS?new v7(n,i):r===Qe.IN?new m7(n,i):r===Qe.ARRAY_CONTAINS_ANY?new y7(n,i):new e(n,r,i)},e.prototype.matches=function(n){var r=n.field(this.field);return r!==null&&fa(this.value)===fa(r)&&this.Ye(Cd(r,this.value))},e.prototype.Ye=function(n){switch(this.op){case Qe.LESS_THAN:return n<0;case Qe.LESS_THAN_OR_EQUAL:return n<=0;case Qe.EQUAL:return n===0;case Qe.GREATER_THAN:return n>0;case Qe.GREATER_THAN_OR_EQUAL:return n>=0;default:return We("Unknown FieldFilter operator: "+this.op)}},e.prototype.Ge=function(){return[Qe.LESS_THAN,Qe.LESS_THAN_OR_EQUAL,Qe.GREATER_THAN,Qe.GREATER_THAN_OR_EQUAL].indexOf(this.op)>=0},e.prototype.canonicalId=function(){return this.field.K()+this.op.toString()+cS(this.value)},e.prototype.isEqual=function(n){return n instanceof e&&this.op.isEqual(n.op)&&this.field.isEqual(n.field)&&Yo(this.value,n.value)},e.prototype.toString=function(){return this.field.K()+" "+this.op+" "+cS(this.value)},e}(function(){}),p7=function(t){function e(n,r,i){var o=this;return(o=t.call(this,n,r,i)||this).key=ct.tt(i.referenceValue),o}return Et(e,t),e.prototype.matches=function(n){var r=ct.F(n.key,this.key);return this.Ye(r)},e}(Bi),g7=function(t){function e(n,r){var i=this;return(i=t.call(this,n,Qe.IN,r)||this).keys=(r.arrayValue.values||[]).map(function(o){return ct.tt(o.referenceValue)}),i}return Et(e,t),e.prototype.matches=function(n){return this.keys.some(function(r){return r.isEqual(n.key)})},e}(Bi),v7=function(t){function e(n,r){return t.call(this,n,Qe.ARRAY_CONTAINS,r)||this}return Et(e,t),e.prototype.matches=function(n){var r=n.field(this.field);return RT(r)&&PT(r.arrayValue,this.value)},e}(Bi),m7=function(t){function e(n,r){return t.call(this,n,Qe.IN,r)||this}return Et(e,t),e.prototype.matches=function(n){var r=n.field(this.field);return r!==null&&PT(this.value.arrayValue,r)},e}(Bi),y7=function(t){function e(n,r){return t.call(this,n,Qe.ARRAY_CONTAINS_ANY,r)||this}return Et(e,t),e.prototype.matches=function(n){var r=this,i=n.field(this.field);return!(!RT(i)||!i.arrayValue.values)&&i.arrayValue.values.some(function(o){return PT(r.value.arrayValue,o)})},e}(Bi),qn=function(){function t(e){this.name=e}return t.prototype.toString=function(){return this.name},t}();qn.ASCENDING=new qn("asc"),qn.DESCENDING=new qn("desc");var Yn,Wt,Ad=function(){function t(e,n){this.position=e,this.before=n}return t.prototype.canonicalId=function(){return(this.before?"b":"a")+":"+this.position.map(function(e){return cS(e)}).join(",")},t.prototype.Je=function(e,n){for(var r=0,i=0;i<this.position.length;i++){var o=e[i],u=this.position[i];if(r=o.field.Y()?ct.F(ct.tt(u.referenceValue),n.key):Cd(u,n.field(o.field)),o.dir===qn.DESCENDING&&(r*=-1),r!==0)break}return this.before?r<=0:r<0},t.prototype.isEqual=function(e){if(e===null||this.before!==e.before||this.position.length!==e.position.length)return!1;for(var n=0;n<this.position.length;n++)if(!Yo(this.position[n],e.position[n]))return!1;return!0},t}(),sh=function(){function t(e,n){this.field=e,n===void 0&&(n=qn.ASCENDING),this.dir=n,this.Xe=e.Y()}return t.prototype.compare=function(e,n){var r=this.Xe?Gt.we(e,n):Gt.Re(this.field,e,n);switch(this.dir){case qn.ASCENDING:return r;case qn.DESCENDING:return-1*r;default:return We("Unknown direction: "+this.dir)}},t.prototype.canonicalId=function(){return this.field.K()+this.dir.toString()},t.prototype.toString=function(){return this.field.K()+" ("+this.dir+")"},t.prototype.isEqual=function(e){return this.dir===e.dir&&this.field.isEqual(e.field)},t}(),Zw=new sh(Dn.X(),qn.ASCENDING),_7=new sh(Dn.X(),qn.DESCENDING),by=function(){function t(e,n,r,i,o,u,h){o===void 0&&(o=Nt.MIN),u===void 0&&(u=Nt.MIN),h===void 0&&(h=hr.xt),this.target=e,this.targetId=n,this.Ze=r,this.sequenceNumber=i,this.ts=o,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h}return t.prototype.es=function(e){return new t(this.target,this.targetId,this.Ze,e,this.ts,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.ss=function(e,n){return new t(this.target,this.targetId,this.Ze,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.ns=function(e){return new t(this.target,this.targetId,this.Ze,this.sequenceNumber,this.ts,e,this.resumeToken)},t}(),w7=function(t){this.count=t};function vS(t){switch(t){case pe.OK:return We("Treated status OK as error");case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0;default:return We("Unknown status code: "+t)}}function qM(t){if(t===void 0)return Gn("GRPC error has no .code"),pe.UNKNOWN;switch(t){case Yn.OK:return pe.OK;case Yn.CANCELLED:return pe.CANCELLED;case Yn.UNKNOWN:return pe.UNKNOWN;case Yn.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case Yn.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case Yn.INTERNAL:return pe.INTERNAL;case Yn.UNAVAILABLE:return pe.UNAVAILABLE;case Yn.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case Yn.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case Yn.NOT_FOUND:return pe.NOT_FOUND;case Yn.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case Yn.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case Yn.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case Yn.ABORTED:return pe.ABORTED;case Yn.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case Yn.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case Yn.DATA_LOSS:return pe.DATA_LOSS;default:return We("Unknown status code: "+t)}}(Wt=Yn||(Yn={}))[Wt.OK=0]="OK",Wt[Wt.CANCELLED=1]="CANCELLED",Wt[Wt.UNKNOWN=2]="UNKNOWN",Wt[Wt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Wt[Wt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Wt[Wt.NOT_FOUND=5]="NOT_FOUND",Wt[Wt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Wt[Wt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Wt[Wt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Wt[Wt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Wt[Wt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Wt[Wt.ABORTED=10]="ABORTED",Wt[Wt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Wt[Wt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Wt[Wt.INTERNAL=13]="INTERNAL",Wt[Wt.UNAVAILABLE=14]="UNAVAILABLE",Wt[Wt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var E7=new ui(ct.F);function hu(){return E7}function hm(){return hu()}var S7=new ui(ct.F);function kd(){return S7}var b7=new ui(ct.F);function WM(){return b7}var T7=new En(ct.F);function sn(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=T7,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var I7=new En(kt);function Ty(){return I7}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var GM=function(){function t(e){this.F=e?function(n,r){return e(n,r)||ct.F(n.key,r.key)}:function(n,r){return ct.F(n.key,r.key)},this.rs=kd(),this.os=new ui(this.F)}return t.hs=function(e){return new t(e.F)},t.prototype.has=function(e){return this.rs.get(e)!=null},t.prototype.get=function(e){return this.rs.get(e)},t.prototype.first=function(){return this.os.ht()},t.prototype.last=function(){return this.os.at()},t.prototype.U=function(){return this.os.U()},t.prototype.indexOf=function(e){var n=this.rs.get(e);return n?this.os.indexOf(n):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.os.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(e){this.os.ut(function(n,r){return e(n),!1})},t.prototype.add=function(e){var n=this.delete(e.key);return n.rt(n.rs.it(e.key,e),n.os.it(e,null))},t.prototype.delete=function(e){var n=this.get(e);return n?this.rt(this.rs.remove(e),this.os.remove(n)):this},t.prototype.isEqual=function(e){if(!(e instanceof t)||this.size!==e.size)return!1;for(var n=this.os._t(),r=e.os._t();n.It();){var i=n.Et().key,o=r.Et().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var e=[];return this.forEach(function(n){e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`},t.prototype.rt=function(e,n){var r=new t;return r.F=this.F,r.rs=e,r.os=n,r},t}(),ik=function(){function t(){this.as=new ui(ct.F)}return t.prototype.track=function(e){var n=e.doc.key,r=this.as.get(n);r?e.type!==0&&r.type===3?this.as=this.as.it(n,e):e.type===3&&r.type!==1?this.as=this.as.it(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.as=this.as.it(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.as=this.as.it(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.as=this.as.remove(n):e.type===1&&r.type===2?this.as=this.as.it(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.as=this.as.it(n,{type:2,doc:e.doc}):We("unsupported combination of changes: "+JSON.stringify(e)+" after "+JSON.stringify(r)):this.as=this.as.it(n,e)},t.prototype.us=function(){var e=[];return this.as.ut(function(n,r){e.push(r)}),e},t}(),fm=function(){function t(e,n,r,i,o,u,h,f){this.query=e,this.docs=n,this.cs=r,this.docChanges=i,this._s=o,this.fromCache=u,this.ls=h,this.ds=f}return t.fs=function(e,n,r,i){var o=[];return n.forEach(function(u){o.push({type:0,doc:u})}),new t(e,n,GM.hs(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this._s.U()},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){if(!(this.fromCache===e.fromCache&&this.ls===e.ls&&this._s.isEqual(e._s)&&this.query.isEqual(e.query)&&this.docs.isEqual(e.docs)&&this.cs.isEqual(e.cs)))return!1;var n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0},t}(),mS=function(){function t(e,n,r,i,o){this.ts=e,this.Ts=n,this.ms=r,this.ws=i,this.Es=o}return t.Is=function(e,n){var r=new Map;return r.set(e,DT.Rs(e,n)),new t(Nt.MIN,r,Ty(),hu(),sn())},t}(),DT=function(){function t(e,n,r,i,o){this.resumeToken=e,this.As=n,this.Ps=r,this.Vs=i,this.gs=o}return t.Rs=function(e,n){return new t(hr.xt,n,sn(),sn(),sn())},t}(),cv=function(t,e,n,r){this.ps=t,this.removedTargetIds=e,this.key=n,this.ys=r},$M=function(t,e){this.targetId=t,this.bs=e},HM=function(t,e,n,r){n===void 0&&(n=hr.xt),r===void 0&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},ok=function(){function t(){this.vs=0,this.Ss=ak(),this.Ds=hr.xt,this.Cs=!1,this.ks=!0}return Object.defineProperty(t.prototype,"As",{get:function(){return this.Cs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.Ds},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Ns",{get:function(){return this.vs!==0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Fs",{get:function(){return this.ks},enumerable:!0,configurable:!0}),t.prototype.$s=function(e){e.Ot()>0&&(this.ks=!0,this.Ds=e)},t.prototype.Ms=function(){var e=sn(),n=sn(),r=sn();return this.Ss.forEach(function(i,o){switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:We("Encountered invalid change type: "+o)}}),new DT(this.Ds,this.Cs,e,n,r)},t.prototype.Ls=function(){this.ks=!1,this.Ss=ak()},t.prototype.Os=function(e,n){this.ks=!0,this.Ss=this.Ss.it(e,n)},t.prototype.xs=function(e){this.ks=!0,this.Ss=this.Ss.remove(e)},t.prototype.Bs=function(){this.vs+=1},t.prototype.Us=function(){this.vs-=1},t.prototype.qs=function(){this.ks=!0,this.Cs=!0},t}(),C7=function(){function t(e){this.Qs=e,this.Ws=new Map,this.js=hu(),this.Ks=sk(),this.Gs=new En(kt)}return t.prototype.zs=function(e){for(var n=0,r=e.ps;n<r.length;n++){var i=r[n];e.ys instanceof Gt?this.Hs(i,e.ys):e.ys instanceof br&&this.Js(i,e.key,e.ys)}for(var o=0,u=e.removedTargetIds;o<u.length;o++){var h=u[o];this.Js(h,e.key,e.ys)}},t.prototype.Ys=function(e){var n=this;this.Xs(e,function(r){var i=n.Zs(r);switch(e.state){case 0:n.tn(r)&&i.$s(e.resumeToken);break;case 1:i.Us(),i.Ns||i.Ls(),i.$s(e.resumeToken);break;case 2:i.Us(),i.Ns||n.removeTarget(r);break;case 3:n.tn(r)&&(i.qs(),i.$s(e.resumeToken));break;case 4:n.tn(r)&&(n.en(r),i.$s(e.resumeToken));break;default:We("Unknown target watch change state: "+e.state)}})},t.prototype.Xs=function(e,n){var r=this;e.targetIds.length>0?e.targetIds.forEach(n):this.Ws.forEach(function(i,o){r.tn(o)&&n(o)})},t.prototype.sn=function(e){var n=e.targetId,r=e.bs.count,i=this.nn(n);if(i){var o=i.target;if(o.Pe())if(r===0){var u=new ct(o.path);this.Js(n,u,new br(u,Nt.S()))}else at(r===1,"Single document existence filter with count: "+r);else this.in(n)!==r&&(this.en(n),this.Gs=this.Gs.add(n))}},t.prototype.rn=function(e){var n=this,r=new Map;this.Ws.forEach(function(u,h){var f=n.nn(h);if(f){if(u.As&&f.target.Pe()){var v=new ct(f.target.path);n.js.get(v)!==null||n.on(h,v)||n.Js(h,v,new br(v,e))}u.Fs&&(r.set(h,u.Ms()),u.Ls())}});var i=sn();this.Ks.forEach(function(u,h){var f=!0;h.kt(function(v){var _=n.nn(v);return!_||_.Ze===2||(f=!1,!1)}),f&&(i=i.add(u))});var o=new mS(e,r,this.Gs,this.js,i);return this.js=hu(),this.Ks=sk(),this.Gs=new En(kt),o},t.prototype.Hs=function(e,n){if(this.tn(e)){var r=this.on(e,n.key)?2:0;this.Zs(e).Os(n.key,r),this.js=this.js.it(n.key,n),this.Ks=this.Ks.it(n.key,this.hn(n.key).add(e))}},t.prototype.Js=function(e,n,r){if(this.tn(e)){var i=this.Zs(e);this.on(e,n)?i.Os(n,1):i.xs(n),this.Ks=this.Ks.it(n,this.hn(n).delete(e)),r&&(this.js=this.js.it(n,r))}},t.prototype.removeTarget=function(e){this.Ws.delete(e)},t.prototype.in=function(e){var n=this.Zs(e).Ms();return this.Qs.an(e).size+n.Ps.size-n.gs.size},t.prototype.Bs=function(e){this.Zs(e).Bs()},t.prototype.Zs=function(e){var n=this.Ws.get(e);return n||(n=new ok,this.Ws.set(e,n)),n},t.prototype.hn=function(e){var n=this.Ks.get(e);return n||(n=new En(kt),this.Ks=this.Ks.it(e,n)),n},t.prototype.tn=function(e){var n=this.nn(e)!==null;return n||Ke("WatchChangeAggregator","Detected inactive target",e),n},t.prototype.nn=function(e){var n=this.Ws.get(e);return n&&n.Ns?null:this.Qs.un(e)},t.prototype.en=function(e){var n=this;this.Ws.set(e,new ok),this.Qs.an(e).forEach(function(r){n.Js(e,r,null)})},t.prototype.on=function(e,n){return this.Qs.an(e).has(n)},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sk(){return new ui(ct.F)}function ak(){return new ui(ct.F)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var x7=function(){var t={};return t[qn.ASCENDING.name]="ASCENDING",t[qn.DESCENDING.name]="DESCENDING",t}(),N7=function(){var t={};return t[Qe.LESS_THAN.name]="LESS_THAN",t[Qe.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",t[Qe.GREATER_THAN.name]="GREATER_THAN",t[Qe.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",t[Qe.EQUAL.name]="EQUAL",t[Qe.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",t[Qe.IN.name]="IN",t[Qe.ARRAY_CONTAINS_ANY.name]="ARRAY_CONTAINS_ANY",t}(),KM=function(){function t(e,n){this.cn=e,this.options=n}return t.prototype._n=function(e){var n=e.code===void 0?pe.UNKNOWN:qM(e.code);return new Ie(n,e.message||"")},t.prototype.ln=function(e){return this.options.dn||dl(e)?e:{value:e}},t.prototype.fn=function(e){var n;return dl(n=typeof e=="object"?e.value:e)?null:n},t.prototype.Wt=function(e){return{integerValue:""+e}},t.prototype.jt=function(e){if(this.options.dn){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:um(e)?"-0":e}},t.prototype.Tn=function(e){return jM(e)?this.Wt(e):this.jt(e)},t.prototype.k=function(e){return this.options.dn?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}},t.prototype.v=function(e){var n=cu(e);return new xi(n.seconds,n.nanos)},t.prototype.mn=function(e){return this.options.dn?e.toBase64():e.toUint8Array()},t.prototype.wn=function(e){return this.options.dn?(at(e===void 0||typeof e=="string","value must be undefined or a string when using proto3 Json"),hr.fromBase64String(e||"")):(at(e===void 0||e instanceof Uint8Array,"value must be undefined or Uint8Array"),hr.fromUint8Array(e||new Uint8Array))},t.prototype.toVersion=function(e){return this.k(e.k())},t.prototype.fromVersion=function(e){return at(!!e,"Trying to deserialize version that isn't set"),Nt.v(this.v(e))},t.prototype.En=function(e,n){return this.In(n||this.cn).child("documents").child(e).K()},t.prototype.Rn=function(e){var n=dn.G(e);return at(YM(n),"Tried to deserialize invalid key "+n.toString()),n},t.prototype.An=function(e){return this.En(e.path)},t.prototype.tt=function(e){var n=this.Rn(e);return at(n.get(1)===this.cn.projectId,"Tried to deserialize key from different project: "+n.get(1)+" vs "+this.cn.projectId),at(!n.get(3)&&!this.cn.database||n.get(3)===this.cn.database,"Tried to deserialize key from different database: "+n.get(3)+" vs "+this.cn.database),new ct(this.Pn(n))},t.prototype.Vn=function(e){return this.En(e)},t.prototype.gn=function(e){var n=this.Rn(e);return n.length===4?dn.H:this.Pn(n)},Object.defineProperty(t.prototype,"pn",{get:function(){return new dn(["projects",this.cn.projectId,"databases",this.cn.database]).K()},enumerable:!0,configurable:!0}),t.prototype.In=function(e){return new dn(["projects",e.projectId,"databases",e.database])},t.prototype.Pn=function(e){return at(e.length>4&&e.get(4)==="documents","tried to deserialize invalid key "+e.toString()),e.M(5)},t.prototype.yn=function(e,n){return{name:this.An(e),fields:n.proto.mapValue.fields}},t.prototype.bn=function(e){return{name:this.An(e.key),fields:e.Ie().mapValue.fields,updateTime:this.k(e.version.k())}},t.prototype.vn=function(e,n){var r=this.tt(e.name),i=this.fromVersion(e.updateTime),o=new Vi({mapValue:{fields:e.fields}});return new Gt(r,i,o,{hasCommittedMutations:!!n})},t.prototype.Sn=function(e){at(!!e.found,"Tried to deserialize a found document from a missing document."),e.found.name,e.found.updateTime;var n=this.tt(e.found.name),r=this.fromVersion(e.found.updateTime),i=new Vi({mapValue:{fields:e.found.fields}});return new Gt(n,r,i,{})},t.prototype.Dn=function(e){at(!!e.missing,"Tried to deserialize a missing document from a found document."),at(!!e.readTime,"Tried to deserialize a missing document without a read time.");var n=this.tt(e.missing),r=this.fromVersion(e.readTime);return new br(n,r)},t.prototype.Cn=function(e){return"found"in e?this.Sn(e):"missing"in e?this.Dn(e):We("invalid batch get response: "+JSON.stringify(e))},t.prototype.kn=function(e){var n;if("targetChange"in e){e.targetChange;var r=this.Nn(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=this.wn(e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&this._n(u);n=new HM(r,i,o,h||null)}else if("documentChange"in e){e.documentChange;var f=e.documentChange;f.document,f.document.name,f.document.updateTime;var v=this.tt(f.document.name),_=this.fromVersion(f.document.updateTime),b=new Vi({mapValue:{fields:f.document.fields}}),S=new Gt(v,_,b,{}),I=f.targetIds||[],M=f.removedTargetIds||[];n=new cv(I,M,S.key,S)}else if("documentDelete"in e){e.documentDelete;var D=e.documentDelete;D.document;var ne=this.tt(D.document),z=D.readTime?this.fromVersion(D.readTime):Nt.S(),Y=new br(ne,z),K=D.removedTargetIds||[];n=new cv([],K,Y.key,Y)}else if("documentRemove"in e){e.documentRemove;var ue=e.documentRemove;ue.document;var oe=this.tt(ue.document),fe=ue.removedTargetIds||[];n=new cv([],fe,oe,null)}else{if(!("filter"in e))return We("Unknown change type "+JSON.stringify(e));e.filter;var me=e.filter;me.targetId;var he=me.count||0,Z=new w7(he),Se=me.targetId;n=new $M(Se,Z)}return n},t.prototype.Nn=function(e){return e==="NO_CHANGE"?0:e==="ADD"?1:e==="REMOVE"?2:e==="CURRENT"?3:e==="RESET"?4:We("Got unexpected TargetChange.state: "+e)},t.prototype.Fn=function(e){if(!("targetChange"in e))return Nt.MIN;var n=e.targetChange;return n.targetIds&&n.targetIds.length?Nt.MIN:n.readTime?this.fromVersion(n.readTime):Nt.MIN},t.prototype.$n=function(e){var n,r=this;if(e instanceof pS)n={update:this.yn(e.key,e.value)};else if(e instanceof Nd)n={delete:this.An(e.key)};else if(e instanceof oh)n={update:this.yn(e.key,e.data),updateMask:this.Mn(e.se)};else if(e instanceof lm)n={transform:{document:this.An(e.key),fieldTransforms:e.fieldTransforms.map(function(i){return r.Ln(i)})}};else{if(!(e instanceof gS))return We("Unknown mutation type "+e.type);n={verify:this.An(e.key)}}return e.Zt.Ht||(n.currentDocument=this.On(e.Zt)),n},t.prototype.xn=function(e){var n=this,r=e.currentDocument?this.Bn(e.currentDocument):Er.NONE;if(e.update){e.update.name;var i=this.tt(e.update.name),o=new Vi({mapValue:{fields:e.update.fields}});if(e.updateMask){var u=this.Un(e.updateMask);return new oh(i,o,u,r)}return new pS(i,o,r)}if(e.delete){var h=this.tt(e.delete);return new Nd(h,r)}if(e.transform){var f=this.tt(e.transform.document),v=e.transform.fieldTransforms.map(function(b){return n.qn(b)});return at(r.exists===!0,'Transforms only support precondition "exists == true"'),new lm(f,v)}if(e.verify){var _=this.tt(e.verify);return new gS(_,r)}return We("unknown mutation proto: "+JSON.stringify(e))},t.prototype.On=function(e){return e.updateTime!==void 0?{updateTime:this.toVersion(e.updateTime)}:e.exists!==void 0?{exists:e.exists}:We("Unknown precondition")},t.prototype.Bn=function(e){return e.updateTime!==void 0?Er.updateTime(this.fromVersion(e.updateTime)):e.exists!==void 0?Er.exists(e.exists):Er.NONE},t.prototype.Qn=function(e,n){var r=e.updateTime?this.fromVersion(e.updateTime):this.fromVersion(n);r.isEqual(Nt.MIN)&&(r=this.fromVersion(n));var i=null;return e.transformResults&&e.transformResults.length>0&&(i=e.transformResults),new f7(r,i)},t.prototype.Wn=function(e,n){var r=this;return e&&e.length>0?(at(n!==void 0,"Received a write result without a commit time"),e.map(function(i){return r.Qn(i,n)})):[]},t.prototype.Ln=function(e){var n=e.transform;if(n instanceof xd)return{fieldPath:e.field.K(),setToServerValue:"REQUEST_TIME"};if(n instanceof hS)return{fieldPath:e.field.K(),appendMissingElements:{values:n.elements}};if(n instanceof fS)return{fieldPath:e.field.K(),removeAllFromArray:{values:n.elements}};if(n instanceof dS)return{fieldPath:e.field.K(),increment:n.Qt};throw We("Unknown transform: "+e.transform)},t.prototype.qn=function(e){var n=null;if("setToServerValue"in e)at(e.setToServerValue==="REQUEST_TIME","Unknown server value transform proto: "+JSON.stringify(e)),n=xd.instance;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new hS(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new fS(i)}else"increment"in e?n=new dS(this,e.increment):We("Unknown transform proto: "+JSON.stringify(e));var o=Dn.Z(e.fieldPath);return new xf(o,n)},t.prototype.jn=function(e){return{documents:[this.Vn(e.path)]}},t.prototype.Kn=function(e){var n=e.documents.length;at(n===1,"DocumentsTarget contained other than 1 document: "+n);var r=e.documents[0];return gl.ve(this.gn(r)).xe()},t.prototype.Gn=function(e){var n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=this.Vn(r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=this.Vn(r.L()),n.structuredQuery.from=[{collectionId:r.B()}]);var i=this.zn(e.filters);i&&(n.structuredQuery.where=i);var o=this.Hn(e.orderBy);o&&(n.structuredQuery.orderBy=o);var u=this.ln(e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=this.Jn(e.startAt)),e.endAt&&(n.structuredQuery.endAt=this.Jn(e.endAt)),n},t.prototype.Yn=function(e){var n=this.gn(e.parent),r=e.structuredQuery,i=r.from?r.from.length:0,o=null;if(i>0){at(i===1,"StructuredQuery.from with more than one collection is not supported.");var u=r.from[0];u.allDescendants?o=u.collectionId:n=n.child(u.collectionId)}var h=[];r.where&&(h=this.Xn(r.where));var f=[];r.orderBy&&(f=this.Zn(r.orderBy));var v=null;r.limit&&(v=this.fn(r.limit));var _=null;r.startAt&&(_=this.ti(r.startAt));var b=null;return r.endAt&&(b=this.ti(r.endAt)),new gl(n,o,f,h,v,"F",_,b).xe()},t.prototype.ei=function(e){var n=this.si(e.Ze);return n==null?null:{"goog-listen-tags":n}},t.prototype.si=function(e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return We("Unrecognized query purpose: "+e)}},t.prototype.xe=function(e){var n,r=e.target;return(n=r.Pe()?{documents:this.jn(r)}:{query:this.Gn(r)}).targetId=e.targetId,e.resumeToken.Ot()>0&&(n.resumeToken=this.mn(e.resumeToken)),n},t.prototype.zn=function(e){var n=this;if(e.length!==0){var r=e.map(function(i){return i instanceof Bi?n.ni(i):We("Unrecognized filter: "+JSON.stringify(i))});return r.length===1?r[0]:{compositeFilter:{op:"AND",filters:r}}}},t.prototype.Xn=function(e){var n=this;return e?e.unaryFilter!==void 0?[this.ii(e)]:e.fieldFilter!==void 0?[this.ri(e)]:e.compositeFilter!==void 0?e.compositeFilter.filters.map(function(r){return n.Xn(r)}).reduce(function(r,i){return r.concat(i)}):We("Unknown filter: "+JSON.stringify(e)):[]},t.prototype.Hn=function(e){var n=this;if(e.length!==0)return e.map(function(r){return n.oi(r)})},t.prototype.Zn=function(e){var n=this;return e.map(function(r){return n.hi(r)})},t.prototype.Jn=function(e){return{before:e.before,values:e.position}},t.prototype.ti=function(e){var n=!!e.before,r=e.values||[];return new Ad(r,n)},t.prototype.ai=function(e){return x7[e.name]},t.prototype.ui=function(e){switch(e){case"ASCENDING":return qn.ASCENDING;case"DESCENDING":return qn.DESCENDING;default:return}},t.prototype.ci=function(e){return N7[e.name]},t.prototype._i=function(e){switch(e){case"EQUAL":return Qe.EQUAL;case"GREATER_THAN":return Qe.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return Qe.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return Qe.LESS_THAN;case"LESS_THAN_OR_EQUAL":return Qe.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return Qe.ARRAY_CONTAINS;case"IN":return Qe.IN;case"ARRAY_CONTAINS_ANY":return Qe.ARRAY_CONTAINS_ANY;case"OPERATOR_UNSPECIFIED":return We("Unspecified operator");default:return We("Unknown operator")}},t.prototype.li=function(e){return{fieldPath:e.K()}},t.prototype.di=function(e){return Dn.Z(e.fieldPath)},t.prototype.oi=function(e){return{field:this.li(e.field),direction:this.ai(e.dir)}},t.prototype.hi=function(e){return new sh(this.di(e.field),this.ui(e.direction))},t.prototype.ri=function(e){return Bi.create(this.di(e.fieldFilter.field),this._i(e.fieldFilter.op),e.fieldFilter.value)},t.prototype.ni=function(e){if(e.op===Qe.EQUAL){if(VM(e.value))return{unaryFilter:{field:this.li(e.field),op:"IS_NAN"}};if(UM(e.value))return{unaryFilter:{field:this.li(e.field),op:"IS_NULL"}}}return{fieldFilter:{field:this.li(e.field),op:this.ci(e.op),value:e.value}}},t.prototype.ii=function(e){switch(e.unaryFilter.op){case"IS_NAN":var n=this.di(e.unaryFilter.field);return Bi.create(n,Qe.EQUAL,{doubleValue:NaN});case"IS_NULL":var r=this.di(e.unaryFilter.field);return Bi.create(r,Qe.EQUAL,{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return We("Unspecified filter");default:return We("Unknown filter")}},t.prototype.Mn=function(e){var n=[];return e.fields.forEach(function(r){return n.push(r.K())}),{fieldPaths:n}},t.prototype.Un=function(e){var n=(e.fieldPaths||[]).map(function(r){return Dn.Z(r)});return Ac.Gt(n)},t}();function YM(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vl=function(){function t(){}return t.fi=function(e){t.platform&&We("Platform already defined"),t.platform=e},t.Lt=function(){return t.platform||We("Platform not set"),t.platform},t}(),ru=new dh("@firebase/firestore");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dm(){return ru.logLevel}function eE(t){ru.logLevel=t}function Ke(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ru.logLevel<=yt.DEBUG){var r=e.map(QM);ru.debug.apply(ru,Wi(["Firestore ("+Sy+"): "+t],r))}}function Gn(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ru.logLevel<=yt.ERROR){var r=e.map(QM);ru.error.apply(ru,Wi(["Firestore ("+Sy+"): "+t],r))}}function QM(t){if(typeof t=="string")return t;var e=vl.Lt();try{return e.Ti(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function We(t){var e="FIRESTORE ("+Sy+") INTERNAL ASSERTION FAILED: "+t;throw Gn(e),new Error(e)}function at(t,e){t||We(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var XM=function(){function t(){}return t.mi=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="",r=0;r<20;r++)n+=e.charAt(Math.floor(Math.random()*e.length));return n},t}();function kt(t,e){return t<e?-1:t>e?1:0}function ah(t,e,n){return t.length===e.length&&t.every(function(r,i){return n(r,e[i])})}function JM(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var A7=function(t,e,n,r,i){this.cn=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i},yS=function(){function t(e,n){this.projectId=e,this.database=n||"(default)"}return Object.defineProperty(t.prototype,"wi",{get:function(){return this.database==="(default)"},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.D=function(e){return kt(this.projectId,e.projectId)||kt(this.database,e.database)},t}(),_h=function(){function t(e){this.Ei=e,this.Ii={}}return t.prototype.get=function(e){var n=this.Ei(e),r=this.Ii[n];if(r!==void 0)for(var i=0,o=r;i<o.length;i++){var u=o[i],h=u[0],f=u[1];if(h.isEqual(e))return f}},t.prototype.has=function(e){return this.get(e)!==void 0},t.prototype.set=function(e,n){var r=this.Ei(e),i=this.Ii[r];if(i!==void 0){for(var o=0;o<i.length;o++)if(i[o][0].isEqual(e))return void(i[o]=[e,n]);i.push([e,n])}else this.Ii[r]=[[e,n]]},t.prototype.delete=function(e){var n=this.Ei(e),r=this.Ii[n];if(r===void 0)return!1;for(var i=0;i<r.length;i++)if(r[i][0].isEqual(e))return r.length===1?delete this.Ii[n]:r.splice(i,1),!0;return!1},t.prototype.forEach=function(e){fl(this.Ii,function(n,r){for(var i=0,o=r;i<o.length;i++){var u=o[i],h=u[0],f=u[1];e(h,f)}})},t.prototype.U=function(){return FM(this.Ii)},t}(),LT=function(){function t(e,n,r,i){this.batchId=e,this.Ri=n,this.baseMutations=r,this.mutations=i}return t.prototype.Ut=function(e,n,r){for(var i=r.Ai,o=0;o<this.mutations.length;o++){var u=this.mutations[o];if(u.key.isEqual(e)){var h=i[o];n=u.Ut(n,h)}}return n},t.prototype.Bt=function(e,n){for(var r=0,i=this.baseMutations;r<i.length;r++){var o=i[r];o.key.isEqual(e)&&(n=o.Bt(n,n,this.Ri))}for(var u=n,h=0,f=this.mutations;h<f.length;h++){var v=f[h];v.key.isEqual(e)&&(n=v.Bt(n,u,this.Ri))}return n},t.prototype.Pi=function(e){var n=this,r=e;return this.mutations.forEach(function(i){var o=n.Bt(i.key,e.get(i.key));o&&(r=r.it(i.key,o))}),r},t.prototype.keys=function(){return this.mutations.reduce(function(e,n){return e.add(n.key)},sn())},t.prototype.isEqual=function(e){return this.batchId===e.batchId&&ah(this.mutations,e.mutations,function(n,r){return n.isEqual(r)})&&ah(this.baseMutations,e.baseMutations,function(n,r){return n.isEqual(r)})},t}(),k7=function(){function t(e,n,r,i,o){this.batch=e,this.Vi=n,this.Ai=r,this.streamToken=i,this.gi=o}return t.from=function(e,n,r,i){at(e.mutations.length===r.length,"Mutations sent "+e.mutations.length+" must equal results received "+r.length);for(var o=WM(),u=e.mutations,h=0;h<u.length;h++)o=o.it(u[h].key,r[h].version);return new t(e,n,r,i,o)},t}(),MT=function(){function t(){this.pi=new En(vr.we),this.yi=new En(vr.bi)}return t.prototype.U=function(){return this.pi.U()},t.prototype.vi=function(e,n){var r=new vr(e,n);this.pi=this.pi.add(r),this.yi=this.yi.add(r)},t.prototype.Si=function(e,n){var r=this;e.forEach(function(i){return r.vi(i,n)})},t.prototype.Di=function(e,n){this.Ci(new vr(e,n))},t.prototype.ki=function(e,n){var r=this;e.forEach(function(i){return r.Di(i,n)})},t.prototype.Ni=function(e){var n=this,r=ct.EMPTY,i=new vr(r,e),o=new vr(r,e+1),u=[];return this.yi.Ct([i,o],function(h){n.Ci(h),u.push(h.key)}),u},t.prototype.Fi=function(){var e=this;this.pi.forEach(function(n){return e.Ci(n)})},t.prototype.Ci=function(e){this.pi=this.pi.delete(e),this.yi=this.yi.delete(e)},t.prototype.$i=function(e){var n=ct.EMPTY,r=new vr(n,e),i=new vr(n,e+1),o=sn();return this.yi.Ct([r,i],function(u){o=o.add(u.key)}),o},t.prototype.Mi=function(e){var n=new vr(e,0),r=this.pi.Nt(n);return r!==null&&e.isEqual(r.key)},t}(),vr=function(){function t(e,n){this.key=e,this.Li=n}return t.we=function(e,n){return ct.F(e.key,n.key)||kt(e.Li,n.Li)},t.bi=function(e,n){return kt(e.Li,n.Li)||ct.F(e.key,n.key)},t}(),Pe=function(){function t(e){var n=this;this.Oi=null,this.xi=null,this.result=void 0,this.error=void 0,this.Bi=!1,this.Ui=!1,e(function(r){n.Bi=!0,n.result=r,n.Oi&&n.Oi(r)},function(r){n.Bi=!0,n.error=r,n.xi&&n.xi(r)})}return t.prototype.catch=function(e){return this.next(void 0,e)},t.prototype.next=function(e,n){var r=this;return this.Ui&&We("Called next() or catch() twice for PersistencePromise"),this.Ui=!0,this.Bi?this.error?this.qi(n,this.error):this.Qi(e,this.result):new t(function(i,o){r.Oi=function(u){r.Qi(e,u).next(i,o)},r.xi=function(u){r.qi(n,u).next(i,o)}})},t.prototype.Wi=function(){var e=this;return new Promise(function(n,r){e.next(n,r)})},t.prototype.ji=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(r){return t.reject(r)}},t.prototype.Qi=function(e,n){return e?this.ji(function(){return e(n)}):t.resolve(n)},t.prototype.qi=function(e,n){return e?this.ji(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(n,r){n(e)})},t.reject=function(e){return new t(function(n,r){r(e)})},t.Ki=function(e){return new t(function(n,r){var i=0,o=0,u=!1;e.forEach(function(h){++i,h.next(function(){++o,u&&o===i&&n()},function(f){return r(f)})}),u=!0,o===i&&n()})},t.Gi=function(e){for(var n=t.resolve(!1),r=function(u){n=n.next(function(h){return h?t.resolve(h):u()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(e,n){var r=this,i=[];return e.forEach(function(o,u){i.push(n.call(r,o,u))}),this.Ki(i)},t}(),ZM=function(){function t(){this.zi=new _h(function(e){return e.toString()}),this.Hi=!1}return Object.defineProperty(t.prototype,"readTime",{get:function(){return this.Ji},set:function(e){this.Ji=e},enumerable:!0,configurable:!0}),t.prototype.Yi=function(e,n){this.Xi(),this.readTime=n,this.zi.set(e.key,e)},t.prototype.Zi=function(e,n){this.Xi(),n&&(this.readTime=n),this.zi.set(e,null)},t.prototype.tr=function(e,n){this.Xi();var r=this.zi.get(n);return r!==void 0?Pe.resolve(r):this.er(e,n)},t.prototype.getEntries=function(e,n){return this.sr(e,n)},t.prototype.apply=function(e){return this.Xi(),this.Hi=!0,this.nr(e)},t.prototype.Xi=function(){},t}(),eF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",tF=function(){function t(){this.ir=[]}return t.prototype.rr=function(e){this.ir.push(e)},t.prototype.or=function(){this.ir.forEach(function(e){return e()})},t}(),uk=function(){function t(e,n,r){this.hr=e,this.ar=n,this.ur=r}return t.prototype.cr=function(e,n){var r=this;return this.ar._r(e,n).next(function(i){return r.lr(e,n,i)})},t.prototype.lr=function(e,n,r){return this.hr.tr(e,n).next(function(i){for(var o=0,u=r;o<u.length;o++)i=u[o].Bt(n,i);return i})},t.prototype.dr=function(e,n,r){var i=hm();return n.forEach(function(o,u){for(var h=0,f=r;h<f.length;h++)u=f[h].Bt(o,u);i=i.it(o,u)}),i},t.prototype.Tr=function(e,n){var r=this;return this.hr.getEntries(e,n).next(function(i){return r.mr(e,i)})},t.prototype.mr=function(e,n){var r=this;return this.ar.wr(e,n).next(function(i){var o=r.dr(e,n,i),u=hu();return o.forEach(function(h,f){f||(f=new br(h,Nt.S())),u=u.it(h,f)}),u})},t.prototype.Er=function(e,n,r){return n.Pe()?this.Ir(e,n.path):n.He()?this.Rr(e,n,r):this.Ar(e,n,r)},t.prototype.Ir=function(e,n){return this.cr(e,new ct(n)).next(function(r){var i=kd();return r instanceof Gt&&(i=i.it(r.key,r)),i})},t.prototype.Rr=function(e,n,r){var i=this,o=n.collectionGroup,u=kd();return this.ur.Pr(e,o).next(function(h){return Pe.forEach(h,function(f){var v=n.Le(f.child(o));return i.Ar(e,v,r).next(function(_){_.forEach(function(b,S){u=u.it(b,S)})})}).next(function(){return u})})},t.prototype.Ar=function(e,n,r){var i,o,u=this;return this.hr.Er(e,n,r).next(function(h){return i=h,u.ar.Vr(e,n)}).next(function(h){return o=h,u.gr(e,o,i).next(function(f){i=f;for(var v=0,_=o;v<_.length;v++)for(var b=_[v],S=0,I=b.mutations;S<I.length;S++){var M=I[S],D=M.key,ne=i.get(D),z=M.Bt(ne,ne,b.Ri);i=z instanceof Gt?i.it(D,z):i.remove(D)}})}).next(function(){return i.forEach(function(h,f){n.matches(f)||(i=i.remove(h))}),i})},t.prototype.gr=function(e,n,r){for(var i=sn(),o=0,u=n;o<u.length;o++)for(var h=0,f=u[o].mutations;h<f.length;h++){var v=f[h];v instanceof oh&&r.get(v.key)===null&&(i=i.add(v.key))}var _=r;return this.hr.getEntries(e,i).next(function(b){return b.forEach(function(S,I){I!==null&&I instanceof Gt&&(_=_.it(S,I))}),_})},t}(),P7=function(){function t(e,n,r,i){this.targetId=e,this.fromCache=n,this.pr=r,this.yr=i}return t.br=function(e,n){for(var r=sn(),i=sn(),o=0,u=n.docChanges;o<u.length;o++){var h=u[o];switch(h.type){case 0:r=r.add(h.doc.key);break;case 1:i=i.add(h.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),zo=function(){function t(e,n){var r=this;this.previousValue=e,n&&(n.vr=function(i){return r.Sr(i)},this.Dr=function(i){return n.Cr(i)})}return t.prototype.Sr=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},t.prototype.next=function(){var e=++this.previousValue;return this.Dr&&this.Dr(e),e},t}();zo.kr=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ba=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},R7=function(){function t(e,n,r,i,o){this.Nr=e,this.Fr=n,this.$r=r,this.op=i,this.Mr=o,this.Lr=new Ba,this.then=this.Lr.promise.then.bind(this.Lr.promise),this.catch=this.Lr.promise.catch.bind(this.Lr.promise),this.Lr.promise.catch(function(u){})}return t.Or=function(e,n,r,i,o){var u=new t(e,n,Date.now()+r,i,o);return u.start(r),u},t.prototype.start=function(e){var n=this;this.xr=setTimeout(function(){return n.Br()},e)},t.prototype.Ur=function(){return this.Br()},t.prototype.cancel=function(e){this.xr!==null&&(this.clearTimeout(),this.Lr.reject(new Ie(pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},t.prototype.Br=function(){var e=this;this.Nr.qr(function(){return e.xr!==null?(e.clearTimeout(),e.op().then(function(n){return e.Lr.resolve(n)})):Promise.resolve()})},t.prototype.clearTimeout=function(){this.xr!==null&&(this.Mr(this),clearTimeout(this.xr),this.xr=null)},t}(),O7=function(){function t(){this.Qr=Promise.resolve(),this.Wr=!1,this.jr=[],this.Kr=null,this.Gr=!1,this.zr=[]}return Object.defineProperty(t.prototype,"Hr",{get:function(){return this.Wr},enumerable:!0,configurable:!0}),t.prototype.qr=function(e){this.enqueue(e)},t.prototype.Jr=function(e){this.Yr(),this.Xr(e)},t.prototype.Zr=function(e){return this.Yr(),this.Xr(e)},t.prototype.to=function(e){return Ee(this,void 0,void 0,function(){return we(this,function(n){switch(n.label){case 0:return this.Yr(),this.Wr?[3,2]:(this.Wr=!0,[4,this.Zr(e)]);case 1:n.sent(),n.label=2;case 2:return[2]}})})},t.prototype.enqueue=function(e){return this.Yr(),this.Wr?new Promise(function(n){}):this.Xr(e)},t.prototype.Xr=function(e){var n=this,r=this.Qr.then(function(){return n.Gr=!0,e().catch(function(i){throw n.Kr=i,n.Gr=!1,Gn("INTERNAL UNHANDLED ERROR: ",i.stack||i.message||""),i}).then(function(i){return n.Gr=!1,i})});return this.Qr=r,r},t.prototype.eo=function(e,n,r){var i=this;this.Yr(),this.zr.indexOf(e)>-1&&(n=0);var o=R7.Or(this,e,n,r,function(u){return i.so(u)});return this.jr.push(o),o},t.prototype.Yr=function(){this.Kr&&We("AsyncQueue is already failed: "+(this.Kr.stack||this.Kr.message))},t.prototype.no=function(){},t.prototype.io=function(){return Ee(this,void 0,void 0,function(){var e;return we(this,function(n){switch(n.label){case 0:return[4,e=this.Qr];case 1:n.sent(),n.label=2;case 2:if(e!==this.Qr)return[3,0];n.label=3;case 3:return[2]}})})},t.prototype.ro=function(e){for(var n=0,r=this.jr;n<r.length;n++)if(r[n].Fr===e)return!0;return!1},t.prototype.oo=function(e){var n=this;return this.io().then(function(){n.jr.sort(function(u,h){return u.$r-h.$r});for(var r=0,i=n.jr;r<i.length;r++){var o=i[r];if(o.Ur(),e!=="all"&&o.Fr===e)break}return n.io()})},t.prototype.ho=function(e){this.zr.push(e)},t.prototype.so=function(e){var n=this.jr.indexOf(e);this.jr.splice(n,1)},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lk(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],u=kt(n,i);return u===0?kt(r,o):u}var D7=function(){function t(e){this.ao=e,this.buffer=new En(lk),this.uo=0}return t.prototype.co=function(){return++this.uo},t.prototype._o=function(e){var n=[e,this.co()];if(this.buffer.size<this.ao)this.buffer=this.buffer.add(n);else{var r=this.buffer.last();lk(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),t}(),ck={lo:!1,do:0,fo:0,To:0},Qn=function(){function t(e,n,r){this.mo=e,this.wo=n,this.Eo=r}return t.Io=function(e){return new t(e,t.Ro,t.Ao)},t}();Qn.Po=-1,Qn.Vo=1048576,Qn.po=41943040,Qn.Ro=10,Qn.Ao=1e3,Qn.yo=new Qn(Qn.po,Qn.Ro,Qn.Ao),Qn.DISABLED=new Qn(Qn.Po,0,0);var L7=function(){function t(e,n){this.bo=e,this.Nr=n,this.vo=!1,this.So=null}return t.prototype.start=function(e){this.bo.Do.mo!==Qn.Po&&this.Co(e)},t.prototype.stop=function(){this.So&&(this.So.cancel(),this.So=null)},Object.defineProperty(t.prototype,"ko",{get:function(){return this.So!==null},enumerable:!0,configurable:!0}),t.prototype.Co=function(e){var n=this,r=this.vo?3e5:6e4;Ke("LruGarbageCollector","Garbage collection scheduled in "+r+"ms"),this.So=this.Nr.eo("lru_garbage_collection",r,function(){return n.So=null,n.vo=!0,e.No(n.bo).then(function(){return n.Co(e)}).catch(qs)})},t}(),M7=function(){function t(e,n){this.Fo=e,this.Do=n}return t.prototype.$o=function(e,n){return this.Fo.Mo(e).next(function(r){return Math.floor(n/100*r)})},t.prototype.Lo=function(e,n){var r=this;if(n===0)return Pe.resolve(zo.kr);var i=new D7(n);return this.Fo.Xs(e,function(o){return i._o(o.sequenceNumber)}).next(function(){return r.Fo.Oo(e,function(o){return i._o(o)})}).next(function(){return i.maxValue})},t.prototype.xo=function(e,n,r){return this.Fo.xo(e,n,r)},t.prototype.Bo=function(e,n){return this.Fo.Bo(e,n)},t.prototype.Uo=function(e,n){var r=this;return this.Do.mo===Qn.Po?(Ke("LruGarbageCollector","Garbage collection skipped; disabled"),Pe.resolve(ck)):this.qo(e).next(function(i){return i<r.Do.mo?(Ke("LruGarbageCollector","Garbage collection skipped; Cache size "+i+" is lower than threshold "+r.Do.mo),ck):r.Qo(e,n)})},t.prototype.qo=function(e){return this.Fo.qo(e)},t.prototype.Qo=function(e,n){var r,i,o,u,h,f,v,_=this,b=Date.now();return this.$o(e,this.Do.wo).next(function(S){return S>_.Do.Eo?(Ke("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+_.Do.Eo+" from "+S),i=_.Do.Eo):i=S,u=Date.now(),_.Lo(e,i)}).next(function(S){return r=S,h=Date.now(),_.xo(e,r,n)}).next(function(S){return o=S,f=Date.now(),_.Bo(e,r)}).next(function(S){return v=Date.now(),dm()<=yt.DEBUG&&Ke("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in `+(u-b)+`ms
	Determined least recently used `+i+" in "+(h-u)+`ms
	Removed `+o+" targets in "+(f-h)+`ms
	Removed `+S+" documents in "+(v-f)+`ms
Total Duration: `+(v-b)+"ms"),Pe.resolve({lo:!0,do:i,fo:o,To:S})})},t}(),FT=function(){function t(e,n,r){this.persistence=e,this.Wo=n,this.jo=new MT,this.Ko=new ui(kt),this.Go=new _h(function(i){return i.canonicalId()}),this.zo=Nt.MIN,this.persistence.Jo.Ho(this.jo),this.ar=e.Yo(r),this.Xo=e.Zo(),this.th=e.eh(),this.sh=new uk(this.Xo,this.ar,this.persistence.nh()),this.Wo.ih(this.sh)}return t.prototype.start=function(){return this.rh()},t.prototype.oh=function(e){return Ee(this,void 0,void 0,function(){var n,r,i,o=this;return we(this,function(u){switch(u.label){case 0:return n=this.ar,r=this.sh,[4,this.persistence.runTransaction("Handle user change","readonly",function(h){var f;return o.ar.hh(h).next(function(v){return f=v,n=o.persistence.Yo(e),r=new uk(o.Xo,n,o.persistence.nh()),n.hh(h)}).next(function(v){for(var _=[],b=[],S=sn(),I=0,M=f;I<M.length;I++){var D=M[I];_.push(D.batchId);for(var ne=0,z=D.mutations;ne<z.length;ne++){var Y=z[ne];S=S.add(Y.key)}}for(var K=0,ue=v;K<ue.length;K++){var oe=ue[K];b.push(oe.batchId);for(var fe=0,me=oe.mutations;fe<me.length;fe++){var he=me[fe];S=S.add(he.key)}}return r.Tr(h,S).next(function(Z){return{ah:Z,uh:_,_h:b}})})})];case 1:return i=u.sent(),[2,(this.ar=n,this.sh=r,this.Wo.ih(this.sh),i)]}})})},t.prototype.lh=function(e){var n,r=this,i=xi.now(),o=e.reduce(function(u,h){return u.add(h.key)},sn());return this.persistence.runTransaction("Locally write mutations","readwrite",function(u){return r.sh.Tr(u,o).next(function(h){n=h;for(var f=[],v=0,_=e;v<_.length;v++){var b=_[v],S=b.ee(n.get(b.key));S!=null&&f.push(new oh(b.key,S,S.se(),Er.exists(!0)))}return r.ar.dh(u,i,f,e)})}).then(function(u){var h=u.Pi(n);return{batchId:u.batchId,zi:h}})},t.prototype.fh=function(e){var n=this;return this.persistence.runTransaction("Lookup mutation documents","readonly",function(r){return n.ar.Th(r,e).next(function(i){return i?n.sh.Tr(r,i):Pe.resolve(null)})})},t.prototype.mh=function(e){var n=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(r){var i=e.batch.keys(),o=n.Xo.wh({Eh:!0});return n.ar.mh(r,e.batch,e.streamToken).next(function(){return n.Ih(r,e,o)}).next(function(){return o.apply(r)}).next(function(){return n.ar.Rh(r)}).next(function(){return n.sh.Tr(r,i)})})},t.prototype.Ah=function(e){var n=this;return this.persistence.runTransaction("Reject batch","readwrite-primary",function(r){var i;return n.ar.Ph(r,e).next(function(o){return at(o!==null,"Attempt to reject nonexistent batch!"),i=o.keys(),n.ar.Vh(r,o)}).next(function(){return n.ar.Rh(r)}).next(function(){return n.sh.Tr(r,i)})})},t.prototype.gh=function(){var e=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(n){return e.ar.gh(n)})},t.prototype.ph=function(){var e=this;return this.persistence.runTransaction("Get last stream token","readonly",function(n){return e.ar.ph(n)})},t.prototype.yh=function(e){var n=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary",function(r){return n.ar.yh(r,e)})},t.prototype.bh=function(){var e=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly",function(n){return e.th.bh(n)})},t.prototype.vh=function(e){var n=this,r=e.ts,i=this.Ko;return this.persistence.runTransaction("Apply remote event","readwrite-primary",function(o){var u=n.Xo.wh({Eh:!0});i=n.Ko;var h=[];e.Ts.forEach(function(b,S){var I=i.get(S);if(I){h.push(n.th.Sh(o,b.gs,S).next(function(){return n.th.Dh(o,b.Ps,S)}));var M=b.resumeToken;if(M.Ot()>0){var D=I.ss(M,r).es(o.Ch);i=i.it(S,D),t.kh(I,D,b)&&h.push(n.th.Nh(o,D))}}});var f=hu(),v=sn();if(e.ws.forEach(function(b,S){v=v.add(b)}),h.push(u.getEntries(o,v).next(function(b){e.ws.forEach(function(S,I){var M=b.get(S);I instanceof br&&I.version.isEqual(Nt.MIN)?(u.Zi(S,r),f=f.it(S,I)):M==null||I.version.D(M.version)>0||I.version.D(M.version)===0&&M.hasPendingWrites?(u.Yi(I,r),f=f.it(S,I)):Ke("LocalStore","Ignoring outdated watch update for ",S,". Current version:",M.version," Watch version:",I.version),e.Es.has(S)&&h.push(n.persistence.Jo.Fh(o,S))})})),!r.isEqual(Nt.MIN)){var _=n.th.bh(o).next(function(b){return n.th.$h(o,o.Ch,r)});h.push(_)}return Pe.Ki(h).next(function(){return u.apply(o)}).next(function(){return n.sh.mr(o,f)})}).then(function(o){return n.Ko=i,o})},t.kh=function(e,n,r){return at(n.resumeToken.Ot()>0,"Attempted to persist target data with no resume token"),e.resumeToken.Ot()===0||n.ts.C()-e.ts.C()>=this.Mh||r.Ps.size+r.Vs.size+r.gs.size>0},t.prototype.Lh=function(e){for(var n=this,r=0,i=e;r<i.length;r++){var o=i[r],u=o.targetId;if(this.jo.Si(o.pr,u),this.jo.ki(o.yr,u),!o.fromCache){var h=this.Ko.get(u),f=h.ts,v=h.ns(f);this.Ko=this.Ko.it(u,v)}}return this.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(_){return Pe.forEach(e,function(b){return Pe.forEach(b.yr,function(S){return n.persistence.Jo.Di(_,S)})})})},t.prototype.Oh=function(e){var n=this;return this.persistence.runTransaction("Get next mutation batch","readonly",function(r){return e===void 0&&(e=-1),n.ar.xh(r,e)})},t.prototype.Bh=function(e){var n=this;return this.persistence.runTransaction("read document","readonly",function(r){return n.sh.cr(r,e)})},t.prototype.Uh=function(e){var n=this;return this.persistence.runTransaction("Allocate target","readwrite",function(r){var i;return n.th.qh(r,e).next(function(o){return o?(i=o,Pe.resolve(i)):n.th.Qh(r).next(function(u){return i=new by(e,u,0,r.Ch),n.th.Wh(r,i).next(function(){return i})})})}).then(function(r){return n.Ko.get(r.targetId)===null&&(n.Ko=n.Ko.it(r.targetId,r),n.Go.set(e,r.targetId)),r})},t.prototype.qh=function(e,n){var r=this.Go.get(n);return r!==void 0?Pe.resolve(this.Ko.get(r)):this.th.qh(e,n)},t.prototype.jh=function(e,n){var r=this,i=this.Ko.get(e),o=n?"readwrite":"readwrite-primary";return this.persistence.runTransaction("Release target",o,function(u){var h=r.jo.Ni(e);return n?Pe.resolve():Pe.forEach(h,function(f){return r.persistence.Jo.Di(u,f)}).next(function(){r.persistence.Jo.removeTarget(u,i)})}).then(function(){r.Ko=r.Ko.remove(e),r.Go.delete(i.target)})},t.prototype.Kh=function(e,n){var r=this,i=Nt.MIN,o=sn();return this.persistence.runTransaction("Execute query","readonly",function(u){return r.qh(u,e.xe()).next(function(h){if(h)return i=h.lastLimboFreeSnapshotVersion,r.th.Gh(u,h.targetId).next(function(f){o=f})}).next(function(){return r.Wo.Er(u,e,n?i:Nt.MIN,n?o:sn())}).next(function(h){return{documents:h,zh:o}})})},t.prototype.Hh=function(e){var n=this;return this.persistence.runTransaction("Remote document keys","readonly",function(r){return n.th.Gh(r,e)})},t.prototype.Jh=function(){return this.persistence.Jh()},t.prototype.Yh=function(e){this.ar.Xh(e)},t.prototype.Zh=function(e){this.persistence.Zh(e)},t.prototype.Ih=function(e,n,r){var i=this,o=n.batch,u=o.keys(),h=Pe.resolve();return u.forEach(function(f){h=h.next(function(){return r.tr(e,f)}).next(function(v){var _=v,b=n.gi.get(f);at(b!==null,"ackVersions should contain every doc in the write."),(!_||_.version.D(b)<0)&&(_=o.Ut(f,_,n))&&r.Yi(_,n.Vi)})}),h.next(function(){return i.ar.Vh(e,o)})},t.prototype.No=function(e){var n=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(r){return e.Uo(r,n.Ko)})},t.prototype.ta=function(e){var n=this,r=this.Ko.get(e);return r?Promise.resolve(r.target):this.persistence.runTransaction("Get target data","readonly",function(i){return n.th.un(i,e).next(function(o){return o?o.target:null})})},t.prototype.ea=function(){var e=this;return this.persistence.runTransaction("Get new document changes","readonly",function(n){return e.Xo.ea(n,e.zo)}).then(function(n){var r=n.sa,i=n.readTime;return e.zo=i,r})},t.prototype.rh=function(){return Ee(this,void 0,void 0,function(){var e,n=this;return we(this,function(r){switch(r.label){case 0:return e=this,[4,this.persistence.runTransaction("Synchronize last document change read time","readonly",function(i){return n.Xo.na(i)})];case 1:return e.zo=r.sent(),[2]}})})},t}();function qs(t){return Ee(this,void 0,void 0,function(){return we(this,function(e){if(t.code!==pe.FAILED_PRECONDITION||t.message!==eF)throw t;return Ke("LocalStore","Unexpectedly lost primary lease"),[2]})})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hk(t,e){if(e.length!==0)throw new Ie(pe.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+ml(e.length,"argument")+".")}function mn(t,e,n){if(e.length!==n)throw new Ie(pe.INVALID_ARGUMENT,"Function "+t+"() requires "+ml(n,"argument")+", but was called with "+ml(e.length,"argument")+".")}function ea(t,e,n){if(e.length<n)throw new Ie(pe.INVALID_ARGUMENT,"Function "+t+"() requires at least "+ml(n,"argument")+", but was called with "+ml(e.length,"argument")+".")}function po(t,e,n,r){if(e.length<n||e.length>r)throw new Ie(pe.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+ml(e.length,"argument")+".")}function Vn(t,e,n,r){iF(t,e,up(n)+" argument",r)}function Bc(t,e,n,r){r!==void 0&&Vn(t,e,n,r)}function nF(t,e,n,r){iF(t,e,n+" option",r)}function $s(t,e,n,r){r!==void 0&&nF(t,e,n,r)}function rF(t,e,n,r,i){r!==void 0&&function(o,u,h,f,v){for(var _=[],b=0,S=v;b<S.length;b++){var I=S[b];if(I===f)return;_.push(bs(I))}var M=bs(f);throw new Ie(pe.INVALID_ARGUMENT,"Invalid value "+M+" provided to function "+o+'() for option "'+h+'". Acceptable values: '+_.join(", "))}(t,0,n,r,i)}function iF(t,e,n,r){if(!(e==="object"?oF(r):e==="non-empty string"?typeof r=="string"&&r!=="":typeof r===e)){var i=bs(r);throw new Ie(pe.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function oF(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function bs(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";var e=function(n){if(n.constructor){var r=/function\s+([^\s(]+)\s*\(/.exec(n.constructor.toString());if(r&&r.length>1)return r[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return typeof t=="function"?"a function":We("Unknown wrong type: "+typeof t)}function fk(t,e,n){if(n===void 0)throw new Ie(pe.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+up(e)+" argument, but it was undefined.")}function kl(t,e,n){fl(e,function(r,i){if(n.indexOf(r)<0)throw new Ie(pe.INVALID_ARGUMENT,"Unknown option '"+r+"' passed to function "+t+"(). Available options: "+n.join(", "))})}function Pl(t,e,n,r){var i=bs(r);return new Ie(pe.INVALID_ARGUMENT,"Function "+t+"() requires its "+up(n)+" argument to be a "+e+", but it was: "+i)}function dk(t,e,n){if(n<=0)throw new Ie(pe.INVALID_ARGUMENT,'Function "'+t+'()" requires its '+up(e)+" argument to be a positive number, but it was: "+n+".")}function up(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function ml(t,e){return t+" "+e+(t===1?"":"s")}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jo(t,e){function n(){var r="This constructor is private.";throw e&&(r+=" ",r+=e),new Ie(pe.INVALID_ARGUMENT,r)}return n.prototype=t.prototype,Object.assign(n,t),n}function pk(){if(typeof Uint8Array>"u")throw new Ie(pe.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function tE(){if(!vl.Lt().ia)throw new Ie(pe.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}FT.Mh=3e8;var Iy=function(){function t(e){tE(),this.ra=e}return t.fromBase64String=function(e){mn("Blob.fromBase64String",arguments,1),Vn("Blob.fromBase64String","string",1,e),tE();try{return new t(hr.fromBase64String(e))}catch(n){throw new Ie(pe.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+n)}},t.fromUint8Array=function(e){if(mn("Blob.fromUint8Array",arguments,1),pk(),!(e instanceof Uint8Array))throw Pl("Blob.fromUint8Array","Uint8Array",1,e);return new t(hr.fromUint8Array(e))},t.prototype.toBase64=function(){return mn("Blob.toBase64",arguments,0),tE(),this.ra.toBase64()},t.prototype.toUint8Array=function(){return mn("Blob.toUint8Array",arguments,0),pk(),this.ra.toUint8Array()},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(e){return this.ra.isEqual(e.ra)},t}(),F7=Jo(Iy,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),Qo=function(){function t(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];(function(i,o,u,h){if(!(o instanceof Array)||o.length<1)throw new Ie(pe.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+ml(1,"element")+".")})(0,e);for(var r=0;r<e.length;++r)if(Vn("FieldPath","string",r,e[r]),e[r].length===0)throw new Ie(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.oa=new Dn(e)}return t.documentId=function(){return t.ha},t.prototype.isEqual=function(e){if(!(e instanceof t))throw Pl("isEqual","FieldPath",1,e);return this.oa.isEqual(e.oa)},t}();Qo.ha=new Qo(Dn.X().K());var j7=new RegExp("[~\\*/\\[\\]]"),yu=function(){function t(e){this.aa=e}return t.delete=function(){return hk("FieldValue.delete",arguments),zc.instance},t.serverTimestamp=function(){return hk("FieldValue.serverTimestamp",arguments),pm.instance},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return ea("FieldValue.arrayUnion",arguments,1),new sF(e)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return ea("FieldValue.arrayRemove",arguments,1),new aF(e)},t.increment=function(e){return Vn("FieldValue.increment","number",1,e),mn("FieldValue.increment",arguments,1),new uF(e)},t.prototype.isEqual=function(e){return this===e},t}(),zc=function(t){function e(){return t.call(this,"FieldValue.delete")||this}return Et(e,t),e}(yu);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zc.instance=new zc;var pm=function(t){function e(){return t.call(this,"FieldValue.serverTimestamp")||this}return Et(e,t),e}(yu);pm.instance=new pm;var sF=function(t){function e(n){var r=this;return(r=t.call(this,"FieldValue.arrayUnion")||this).ua=n,r}return Et(e,t),e}(yu),aF=function(t){function e(n){var r=this;return(r=t.call(this,"FieldValue.arrayRemove")||this).ua=n,r}return Et(e,t),e}(yu),uF=function(t){function e(n){var r=this;return(r=t.call(this,"FieldValue.increment")||this).ca=n,r}return Et(e,t),e}(yu),U7=Jo(yu,"Use FieldValue.<field>() instead."),Cy=function(){function t(e,n){if(mn("GeoPoint",arguments,2),Vn("GeoPoint","number",1,e),Vn("GeoPoint","number",2,n),!isFinite(e)||e<-90||e>90)throw new Ie(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ie(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._a=e,this.la=n}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._a},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.la},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return this._a===e._a&&this.la===e.la},t.prototype.p=function(e){return kt(this._a,e._a)||kt(this.la,e.la)},t}(),V7=/^__.*__$/,gk=function(){function t(e,n,r){this.data=e,this.se=n,this.fieldTransforms=r}return t.prototype.da=function(e,n){var r=[];return this.se!==null?r.push(new oh(e,this.data,this.se,n)):r.push(new pS(e,this.data,n)),this.fieldTransforms.length>0&&r.push(new lm(e,this.fieldTransforms)),r},t}(),vk=function(){function t(e,n,r){this.data=e,this.se=n,this.fieldTransforms=r}return t.prototype.da=function(e,n){var r=[new oh(e,this.data,this.se,n)];return this.fieldTransforms.length>0&&r.push(new lm(e,this.fieldTransforms)),r},t}();function lF(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw We("Unexpected case for UserDataSource: "+t)}}var oc=function(){function t(e,n,r,i,o,u){this.fa=e,this.methodName=n,this.path=r,this.Ta=i,o===void 0&&this.ma(),this.Ta=i!==void 0&&i,this.fieldTransforms=o||[],this.se=u||[]}return t.prototype.wa=function(e){var n=this.path==null?null:this.path.child(e),r=new t(this.fa,this.methodName,n,!1,this.fieldTransforms,this.se);return r.Ea(e),r},t.prototype.Ia=function(e){var n=this.path==null?null:this.path.child(e),r=new t(this.fa,this.methodName,n,!1,this.fieldTransforms,this.se);return r.ma(),r},t.prototype.Ra=function(e){return new t(this.fa,this.methodName,null,!0,this.fieldTransforms,this.se)},t.prototype.Aa=function(e){var n=this.path===null||this.path.U()?"":" (found in field "+this.path.toString()+")";return new Ie(pe.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+e+n)},t.prototype.contains=function(e){return this.se.find(function(n){return e.q(n)})!==void 0||this.fieldTransforms.find(function(n){return e.q(n.field)})!==void 0},t.prototype.ma=function(){if(this.path!==null)for(var e=0;e<this.path.length;e++)this.Ea(this.path.get(e))},t.prototype.Ea=function(e){if(e.length===0)throw this.Aa("Document fields must not be empty");if(lF(this.fa)&&V7.test(e))throw this.Aa('Document fields cannot begin and end with "__"')},t}(),jT=function(t,e){this.cn=t,this.key=e},B7=function(){function t(e,n){this.serializer=e,this.Pa=n}return t.prototype.Va=function(e,n){var r=new oc(0,e,Dn.H);Lg("Data must be an object, but it was:",r,n);var i=this.ga(n,r);return new gk(new Vi(i),null,r.fieldTransforms)},t.prototype.pa=function(e,n,r){var i=new oc(2,e,Dn.H);Lg("Data must be an object, but it was:",i,n);var o,u,h=this.ga(n,i);if(r){for(var f=new En(Dn.F),v=0,_=r;v<_.length;v++){var b=_[v],S=void 0;if(b instanceof Qo)S=b.oa;else{if(typeof b!="string")throw We("Expected stringOrFieldPath to be a string or a FieldPath");S=_S(e,b)}if(!i.contains(S))throw new Ie(pe.INVALID_ARGUMENT,"Field '"+S+"' is specified in your field mask but missing from your input data.");f=f.add(S)}o=Ac.Kt(f),u=i.fieldTransforms.filter(function(I){return o.zt(I.field)})}else o=Ac.Gt(i.se),u=i.fieldTransforms;return new gk(new Vi(h),o,u)},t.prototype.ya=function(e,n){var r=this,i=new oc(1,e,Dn.H);Lg("Data must be an object, but it was:",i,n);var o=new En(Dn.F),u=Vi._e();fl(n,function(f,v){var _=_S(e,f),b=i.Ia(_);if((v=r.ba(v,b))instanceof zc)o=o.add(_);else{var S=r.va(v,b);S!=null&&(o=o.add(_),u.set(_,S))}});var h=Ac.Kt(o);return new vk(u.oe(),h,i.fieldTransforms)},t.prototype.Sa=function(e,n,r,i){var o=new oc(1,e,Dn.H),u=[Pd(e,n)],h=[r];if(i.length%2!=0)throw new Ie(pe.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var f=0;f<i.length;f+=2)u.push(Pd(e,i[f])),h.push(i[f+1]);for(var v=new En(Dn.F),_=Vi._e(),b=0;b<u.length;++b){var S=u[b],I=o.Ia(S),M=this.ba(h[b],I);if(M instanceof zc)v=v.add(S);else{var D=this.va(M,I);D!=null&&(v=v.add(S),_.set(S,D))}}var ne=Ac.Kt(v);return new vk(_.oe(),ne,o.fieldTransforms)},t.prototype.Da=function(e,n,r){r===void 0&&(r=!1);var i=new oc(r?4:3,e,Dn.H);return this.va(n,i)},t.prototype.ba=function(e,n){try{return this.Pa(e)}catch(i){var r=hF(i);throw n.Aa(r)}},t.prototype.va=function(e,n){if(cF(e=this.ba(e,n)))return Lg("Unsupported field value:",n,e),this.ga(e,n);if(e instanceof yu)return this.Ca(e,n),null;if(n.path&&n.se.push(n.path),e instanceof Array){if(n.Ta&&n.fa!==4)throw n.Aa("Nested arrays are not supported");return this.ka(e,n)}return this.Na(e,n)},t.prototype.ga=function(e,n){var r=this,i={};return FM(e)?n.path&&n.path.length>0&&n.se.push(n.path):fl(e,function(o,u){var h=r.va(u,n.wa(o));h!=null&&(i[o]=h)}),{mapValue:{fields:i}}},t.prototype.ka=function(e,n){for(var r=[],i=0,o=0,u=e;o<u.length;o++){var h=u[o],f=this.va(h,n.Ra(i));f==null&&(f={nullValue:"NULL_VALUE"}),r.push(f),i++}return{arrayValue:{values:r}}},t.prototype.Ca=function(e,n){if(!lF(n.fa))throw n.Aa(e.aa+"() can only be used with update() and set()");if(n.path===null)throw n.Aa(e.aa+"() is not currently supported inside arrays");if(e instanceof zc){if(n.fa!==2)throw n.fa===1?n.Aa("FieldValue.delete() can only appear at the top level of your update data"):n.Aa("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");n.se.push(n.path)}else if(e instanceof pm)n.fieldTransforms.push(new xf(n.path,xd.instance));else if(e instanceof sF){var r=this.Fa(e.aa,e.ua),i=new hS(r);n.fieldTransforms.push(new xf(n.path,i))}else if(e instanceof aF){var o=this.Fa(e.aa,e.ua),u=new fS(o);n.fieldTransforms.push(new xf(n.path,u))}else if(e instanceof uF){var h=this.Da("FieldValue.increment",e.ca),f=new dS(this.serializer,h);n.fieldTransforms.push(new xf(n.path,f))}else We("Unknown FieldValue type: "+e)},t.prototype.Na=function(e,n){if(e===null)return{nullValue:"NULL_VALUE"};if(typeof e=="number")return this.serializer.Tn(e);if(typeof e=="boolean")return{booleanValue:e};if(typeof e=="string")return{stringValue:e};if(e instanceof Date){var r=xi.fromDate(e);return{timestampValue:this.serializer.k(r)}}if(e instanceof xi){var i=new xi(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:this.serializer.k(i)}}if(e instanceof Cy)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Iy)return{bytesValue:this.serializer.mn(e)};if(e instanceof jT)return{referenceValue:this.serializer.En(e.key.path,e.cn)};throw n.Aa("Unsupported field value: "+bs(e))},t.prototype.Fa=function(e,n){var r=this;return n.map(function(i,o){var u=new oc(3,e,Dn.H);return r.va(i,u.Ra(o))})},t}();function cF(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof xi||t instanceof Cy||t instanceof Iy||t instanceof jT||t instanceof yu)}function Lg(t,e,n){if(!cF(n)||!oF(n)){var r=bs(n);throw r==="an object"?e.Aa(t+" a custom object"):e.Aa(t+" "+r)}}function Pd(t,e){if(e instanceof Qo)return e.oa;if(typeof e=="string")return _S(t,e);throw new Ie(pe.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function _S(t,e){try{return function(r){if(r.search(j7)>=0)throw new Ie(pe.INVALID_ARGUMENT,"Invalid field path ("+r+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(Qo.bind.apply(Qo,Wi([void 0],r.split("."))))}catch{throw new Ie(pe.INVALID_ARGUMENT,"Invalid field path ("+r+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e).oa}catch(r){var n=hF(r);throw new Ie(pe.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. "+n)}}function hF(t){return t instanceof Error?t.message:t.toString()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fF=function(){function t(e,n,r,i,o){r===void 0&&(r=1e3),i===void 0&&(i=1.5),o===void 0&&(o=6e4),this.$a=e,this.Fr=n,this.Ma=r,this.La=i,this.Oa=o,this.xa=0,this.Ba=null,this.Ua=Date.now(),this.reset()}return t.prototype.reset=function(){this.xa=0},t.prototype.qa=function(){this.xa=this.Oa},t.prototype.Qa=function(e){var n=this;this.cancel();var r=Math.floor(this.xa+this.Wa()),i=Math.max(0,Date.now()-this.Ua),o=Math.max(0,r-i);this.xa>0&&Ke("ExponentialBackoff","Backing off for "+o+" ms (base delay: "+this.xa+" ms, delay with jitter: "+r+" ms, last attempt: "+i+" ms ago)"),this.Ba=this.$a.eo(this.Fr,o,function(){return n.Ua=Date.now(),e()}),this.xa*=this.La,this.xa<this.Ma&&(this.xa=this.Ma),this.xa>this.Oa&&(this.xa=this.Oa)},t.prototype.cancel=function(){this.Ba!==null&&(this.Ba.cancel(),this.Ba=null)},t.prototype.Wa=function(){return(Math.random()-.5)*this.xa},t}(),dF=function(){function t(e,n,r,i,o,u){this.$a=e,this.ja=r,this.Ka=i,this.Ga=o,this.listener=u,this.state=0,this.za=0,this.Ha=null,this.stream=null,this.Ja=new fF(e,n)}return t.prototype.Ya=function(){return this.state===1||this.state===2||this.state===4},t.prototype.Xa=function(){return this.state===2},t.prototype.start=function(){this.state!==3?this.auth():this.Za()},t.prototype.stop=function(){return Ee(this,void 0,void 0,function(){return we(this,function(e){switch(e.label){case 0:return this.Ya()?[4,this.close(0)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},t.prototype.tu=function(){this.state=0,this.Ja.reset()},t.prototype.eu=function(){var e=this;this.Xa()&&this.Ha===null&&(this.Ha=this.$a.eo(this.ja,6e4,function(){return e.su()}))},t.prototype.nu=function(e){this.iu(),this.stream.send(e)},t.prototype.su=function(){return Ee(this,void 0,void 0,function(){return we(this,function(e){return this.Xa()?[2,this.close(0)]:[2]})})},t.prototype.iu=function(){this.Ha&&(this.Ha.cancel(),this.Ha=null)},t.prototype.close=function(e,n){return Ee(this,void 0,void 0,function(){return we(this,function(r){switch(r.label){case 0:return this.iu(),this.Ja.cancel(),this.za++,e!==3?this.Ja.reset():n&&n.code===pe.RESOURCE_EXHAUSTED?(Gn(n.toString()),Gn("Using maximum backoff delay to prevent overloading the backend."),this.Ja.qa()):n&&n.code===pe.UNAUTHENTICATED&&this.Ga._(),this.stream!==null&&(this.ru(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.ou(n)];case 1:return r.sent(),[2]}})})},t.prototype.ru=function(){},t.prototype.auth=function(){var e=this;this.state=1;var n=this.hu(this.za),r=this.za;this.Ga.getToken().then(function(i){e.za===r&&e.au(i)},function(i){n(function(){var o=new Ie(pe.UNKNOWN,"Fetching auth token failed: "+i.message);return e.uu(o)})})},t.prototype.au=function(e){var n=this,r=this.hu(this.za);this.stream=this.cu(e),this.stream._u(function(){r(function(){return n.state=2,n.listener._u()})}),this.stream.ou(function(i){r(function(){return n.uu(i)})}),this.stream.onMessage(function(i){r(function(){return n.onMessage(i)})})},t.prototype.Za=function(){var e=this;this.state=4,this.Ja.Qa(function(){return Ee(e,void 0,void 0,function(){return we(this,function(n){return this.state=0,this.start(),[2]})})})},t.prototype.uu=function(e){return Ke("PersistentStream","close with error: "+e),this.stream=null,this.close(3,e)},t.prototype.hu=function(e){var n=this;return function(r){n.$a.qr(function(){return n.za===e?r():(Ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),z7=function(t){function e(n,r,i,o,u){var h=this;return(h=t.call(this,n,"listen_stream_connection_backoff","listen_stream_idle",r,i,u)||this).serializer=o,h}return Et(e,t),e.prototype.cu=function(n){return this.Ka.lu("Listen",n)},e.prototype.onMessage=function(n){this.Ja.reset();var r=this.serializer.kn(n),i=this.serializer.Fn(n);return this.listener.du(r,i)},e.prototype.fu=function(n){var r={};r.database=this.serializer.pn,r.addTarget=this.serializer.xe(n);var i=this.serializer.ei(n);i&&(r.labels=i),this.nu(r)},e.prototype.Tu=function(n){var r={};r.database=this.serializer.pn,r.removeTarget=n,this.nu(r)},e}(dF),q7=function(t){function e(n,r,i,o,u){var h=this;return(h=t.call(this,n,"write_stream_connection_backoff","write_stream_idle",r,i,u)||this).serializer=o,h.mu=!1,h.lastStreamToken=hr.xt,h}return Et(e,t),Object.defineProperty(e.prototype,"wu",{get:function(){return this.mu},enumerable:!0,configurable:!0}),e.prototype.start=function(){this.mu=!1,t.prototype.start.call(this)},e.prototype.ru=function(){this.mu&&this.Eu([])},e.prototype.cu=function(n){return this.Ka.lu("Write",n)},e.prototype.onMessage=function(n){if(at(!!n.streamToken,"Got a write response without a stream token"),this.lastStreamToken=this.serializer.wn(n.streamToken),this.mu){this.Ja.reset();var r=this.serializer.Wn(n.writeResults,n.commitTime),i=this.serializer.fromVersion(n.commitTime);return this.listener.Iu(i,r)}return at(!n.writeResults||n.writeResults.length===0,"Got mutation results for handshake"),this.mu=!0,this.listener.Ru()},e.prototype.Au=function(){var n={};n.database=this.serializer.pn,this.nu(n)},e.prototype.Eu=function(n){var r=this,i={streamToken:this.serializer.mn(this.lastStreamToken),writes:n.map(function(o){return r.serializer.$n(o)})};this.nu(i)},e}(dF),W7=function(){function t(e,n,r,i){this.$a=e,this.Ka=n,this.credentials=r,this.serializer=i}return t.prototype.Pu=function(e){return new q7(this.$a,this.Ka,this.credentials,this.serializer,e)},t.prototype.Vu=function(e){return new z7(this.$a,this.Ka,this.credentials,this.serializer,e)},t.prototype.commit=function(e){var n=this,r={database:this.serializer.pn,writes:e.map(function(i){return n.serializer.$n(i)})};return this.gu("Commit",r).then(function(i){return n.serializer.Wn(i.writeResults,i.commitTime)})},t.prototype.pu=function(e){var n=this,r={database:this.serializer.pn,documents:e.map(function(i){return n.serializer.An(i)})};return this.yu("BatchGetDocuments",r).then(function(i){var o=hu();i.forEach(function(h){var f=n.serializer.Cn(h);o=o.it(f.key,f)});var u=[];return e.forEach(function(h){var f=o.get(h);at(!!f,"Missing entity in write response for "+h),u.push(f)}),u})},t.prototype.gu=function(e,n){var r=this;return this.credentials.getToken().then(function(i){return r.Ka.gu(e,n,i)}).catch(function(i){throw i.code===pe.UNAUTHENTICATED&&r.credentials._(),i})},t.prototype.yu=function(e,n){var r=this;return this.credentials.getToken().then(function(i){return r.Ka.yu(e,n,i)}).catch(function(i){throw i.code===pe.UNAUTHENTICATED&&r.credentials._(),i})},t}(),G7=function(){function t(e){this.bu=e,this.vu=WM(),this.mutations=[],this.Su=!1,this.Du=null,this.Cu=new Set}return t.prototype.pu=function(e){return Ee(this,void 0,void 0,function(){var n,r=this;return we(this,function(i){switch(i.label){case 0:if(this.ku(),this.mutations.length>0)throw new Ie(pe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,this.bu.pu(e)];case 1:return[2,((n=i.sent()).forEach(function(o){o instanceof br||o instanceof Gt?r.Nu(o):We("Document in a transaction was a "+o.constructor.name)}),n)]}})})},t.prototype.set=function(e,n){this.write(n.da(e,this.Zt(e))),this.Cu.add(e)},t.prototype.update=function(e,n){try{this.write(n.da(e,this.Fu(e)))}catch(r){this.Du=r}this.Cu.add(e)},t.prototype.delete=function(e){this.write([new Nd(e,this.Zt(e))]),this.Cu.add(e)},t.prototype.commit=function(){return Ee(this,void 0,void 0,function(){var e,n=this;return we(this,function(r){switch(r.label){case 0:if(this.ku(),this.Du)throw this.Du;return e=this.vu,this.mutations.forEach(function(i){e=e.remove(i.key)}),e.forEach(function(i,o){n.mutations.push(new gS(i,n.Zt(i)))}),[4,this.bu.commit(this.mutations)];case 1:return r.sent(),this.Su=!0,[2]}})})},t.prototype.Nu=function(e){var n;if(e instanceof Gt)n=e.version;else{if(!(e instanceof br))throw We("Document in a transaction was a "+e.constructor.name);n=Nt.S()}var r=this.vu.get(e.key);if(r!==null){if(!n.isEqual(r))throw new Ie(pe.ABORTED,"Document version changed between two reads.")}else this.vu=this.vu.it(e.key,n)},t.prototype.Zt=function(e){var n=this.vu.get(e);return!this.Cu.has(e)&&n?Er.updateTime(n):Er.NONE},t.prototype.Fu=function(e){var n=this.vu.get(e);if(!this.Cu.has(e)&&n){if(n.isEqual(Nt.S()))throw new Ie(pe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Er.updateTime(n)}return Er.exists(!0)},t.prototype.write=function(e){this.ku(),this.mutations=this.mutations.concat(e)},t.prototype.ku=function(){},t}(),$7=function(){function t(e,n){this.Nr=e,this.$u=n,this.state="Unknown",this.Mu=0,this.Lu=null,this.Ou=!0}return t.prototype.xu=function(){var e=this;this.Mu===0&&(this.Bu("Unknown"),this.Lu=this.Nr.eo("online_state_timeout",1e4,function(){return e.Lu=null,e.Uu("Backend didn't respond within 10 seconds."),e.Bu("Offline"),Promise.resolve()}))},t.prototype.qu=function(e){this.state==="Online"?this.Bu("Unknown"):(this.Mu++,this.Mu>=1&&(this.Qu(),this.Uu("Connection failed 1 times. Most recent error: "+e.toString()),this.Bu("Offline")))},t.prototype.set=function(e){this.Qu(),this.Mu=0,e==="Online"&&(this.Ou=!1),this.Bu(e)},t.prototype.Bu=function(e){e!==this.state&&(this.state=e,this.$u(e))},t.prototype.Uu=function(e){var n="Could not reach Cloud Firestore backend. "+e+`
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Ou?(Gn(n),this.Ou=!1):Ke("OnlineStateTracker",n)},t.prototype.Qu=function(){this.Lu!==null&&(this.Lu.cancel(),this.Lu=null)},t}(),pF=function(){function t(e,n,r,i,o){var u=this;this.Wu=e,this.bu=n,this.ju=[],this.Ku=new Map,this.Gu=null,this.networkEnabled=!1,this.isPrimary=!1,this.zu=o,this.zu.Hu(function(h){r.qr(function(){return Ee(u,void 0,void 0,function(){return we(this,function(f){switch(f.label){case 0:return this.Ju()?(Ke("RemoteStore","Restarting streams for network reachability change."),[4,this.Yu()]):[3,2];case 1:f.sent(),f.label=2;case 2:return[2]}})})})}),this.Xu=new $7(r,i),this.Zu=this.bu.Vu({_u:this.tc.bind(this),ou:this.ec.bind(this),du:this.sc.bind(this)}),this.nc=this.bu.Pu({_u:this.ic.bind(this),ou:this.rc.bind(this),Ru:this.oc.bind(this),Iu:this.Iu.bind(this)})}return t.prototype.start=function(){return this.enableNetwork()},t.prototype.enableNetwork=function(){return Ee(this,void 0,void 0,function(){var e;return we(this,function(n){switch(n.label){case 0:return this.networkEnabled=!0,this.Ju()?(e=this.nc,[4,this.Wu.ph()]):[3,3];case 1:return e.lastStreamToken=n.sent(),this.hc()?this.ac():this.Xu.set("Unknown"),[4,this.uc()];case 2:n.sent(),n.label=3;case 3:return[2]}})})},t.prototype.disableNetwork=function(){return Ee(this,void 0,void 0,function(){return we(this,function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.cc()];case 1:return e.sent(),this.Xu.set("Offline"),[2]}})})},t.prototype.cc=function(){return Ee(this,void 0,void 0,function(){return we(this,function(e){switch(e.label){case 0:return[4,this.nc.stop()];case 1:return e.sent(),[4,this.Zu.stop()];case 2:return e.sent(),this.ju.length>0&&(Ke("RemoteStore","Stopping write stream with "+this.ju.length+" pending writes"),this.ju=[]),this._c(),[2]}})})},t.prototype.lc=function(){return Ee(this,void 0,void 0,function(){return we(this,function(e){switch(e.label){case 0:return Ke("RemoteStore","RemoteStore shutting down."),this.networkEnabled=!1,[4,this.cc()];case 1:return e.sent(),this.zu.lc(),this.Xu.set("Unknown"),[2]}})})},t.prototype.listen=function(e){this.Ku.has(e.targetId)||(this.Ku.set(e.targetId,e),this.hc()?this.ac():this.Zu.Xa()&&this.dc(e))},t.prototype.fc=function(e){this.Ku.delete(e),this.Zu.Xa()&&this.Tc(e),this.Ku.size===0&&(this.Zu.Xa()?this.Zu.eu():this.Ju()&&this.Xu.set("Unknown"))},t.prototype.un=function(e){return this.Ku.get(e)||null},t.prototype.an=function(e){return this.mc.an(e)},t.prototype.dc=function(e){this.Gu.Bs(e.targetId),this.Zu.fu(e)},t.prototype.Tc=function(e){this.Gu.Bs(e),this.Zu.Tu(e)},t.prototype.ac=function(){this.Gu=new C7(this),this.Zu.start(),this.Xu.xu()},t.prototype.hc=function(){return this.Ju()&&!this.Zu.Ya()&&this.Ku.size>0},t.prototype.Ju=function(){return this.isPrimary&&this.networkEnabled},t.prototype._c=function(){this.Gu=null},t.prototype.tc=function(){return Ee(this,void 0,void 0,function(){var e=this;return we(this,function(n){return this.Ku.forEach(function(r,i){e.dc(r)}),[2]})})},t.prototype.ec=function(e){return Ee(this,void 0,void 0,function(){return we(this,function(n){return this._c(),this.hc()?(this.Xu.qu(e),this.ac()):this.Xu.set("Unknown"),[2]})})},t.prototype.sc=function(e,n){return Ee(this,void 0,void 0,function(){var r;return we(this,function(i){switch(i.label){case 0:return this.Xu.set("Online"),e instanceof HM&&e.state===2&&e.cause?[2,this.wc(e)]:(e instanceof cv?this.Gu.zs(e):e instanceof $M?this.Gu.sn(e):this.Gu.Ys(e),n.isEqual(Nt.MIN)?[3,4]:[4,this.Wu.bh()]);case 1:return r=i.sent(),n.D(r)>=0?[4,this.Ec(n)]:[3,3];case 2:i.sent(),i.label=3;case 3:i.label=4;case 4:return[2]}})})},t.prototype.Ec=function(e){var n=this,r=this.Gu.rn(e);return r.Ts.forEach(function(i,o){if(i.resumeToken.Ot()>0){var u=n.Ku.get(o);u&&n.Ku.set(o,u.ss(i.resumeToken,e))}}),r.ms.forEach(function(i){var o=n.Ku.get(i);if(o){n.Ku.set(i,o.ss(hr.xt,o.ts)),n.Tc(i);var u=new by(o.target,i,1,o.sequenceNumber);n.dc(u)}}),this.mc.vh(r)},t.prototype.wc=function(e){var n=this,r=e.cause,i=Promise.resolve();return e.targetIds.forEach(function(o){i=i.then(function(){return Ee(n,void 0,void 0,function(){return we(this,function(u){return this.Ku.has(o)?[2,(this.Ku.delete(o),this.Gu.removeTarget(o),this.mc.Ic(o,r))]:[2]})})})}),i},t.prototype.uc=function(){return Ee(this,void 0,void 0,function(){var e,n;return we(this,function(r){switch(r.label){case 0:return this.Rc()?(e=this.ju.length>0?this.ju[this.ju.length-1].batchId:-1,[4,this.Wu.Oh(e)]):[3,5];case 1:return(n=r.sent())!==null?[3,2]:(this.ju.length===0&&this.nc.eu(),[3,4]);case 2:return this.Ac(n),[4,this.uc()];case 3:r.sent(),r.label=4;case 4:r.label=5;case 5:return this.Pc()&&this.Vc(),[2]}})})},t.prototype.Rc=function(){return this.Ju()&&this.ju.length<10},t.prototype.gc=function(){return this.ju.length},t.prototype.Ac=function(e){this.ju.push(e),this.nc.Xa()&&this.nc.wu&&this.nc.Eu(e.mutations)},t.prototype.Pc=function(){return this.Ju()&&!this.nc.Ya()&&this.ju.length>0},t.prototype.Vc=function(){this.nc.start()},t.prototype.ic=function(){return Ee(this,void 0,void 0,function(){return we(this,function(e){return this.nc.Au(),[2]})})},t.prototype.oc=function(){var e=this;return this.Wu.yh(this.nc.lastStreamToken).then(function(){for(var n=0,r=e.ju;n<r.length;n++){var i=r[n];e.nc.Eu(i.mutations)}}).catch(qs)},t.prototype.Iu=function(e,n){var r=this,i=this.ju.shift(),o=k7.from(i,e,n,this.nc.lastStreamToken);return this.mc.pc(o).then(function(){return r.uc()})},t.prototype.rc=function(e){return Ee(this,void 0,void 0,function(){var n,r=this;return we(this,function(i){return e&&this.ju.length>0?[2,(n=this.nc.wu?this.yc(e):this.bc(e),n.then(function(){r.Pc()&&r.Vc()}))]:[2]})})},t.prototype.bc=function(e){return Ee(this,void 0,void 0,function(){return we(this,function(n){return vS(e.code)?[2,(Ke("RemoteStore","RemoteStore error before completed handshake; resetting stream token: ",this.nc.lastStreamToken),this.nc.lastStreamToken=hr.xt,this.Wu.yh(hr.xt).catch(qs))]:[2]})})},t.prototype.yc=function(e){return Ee(this,void 0,void 0,function(){var n,r,i=this;return we(this,function(o){return vS(r=e.code)&&r!==pe.ABORTED?(n=this.ju.shift(),[2,(this.nc.tu(),this.mc.vc(n.batchId,e).then(function(){return i.uc()}))]):[2]})})},t.prototype.Sc=function(){return new G7(this.bu)},t.prototype.Yu=function(){return Ee(this,void 0,void 0,function(){return we(this,function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.cc()];case 1:return e.sent(),this.Xu.set("Unknown"),[4,this.enableNetwork()];case 2:return e.sent(),[2]}})})},t.prototype.Dc=function(){return Ee(this,void 0,void 0,function(){return we(this,function(e){switch(e.label){case 0:return this.Ju()?(Ke("RemoteStore","RemoteStore restarting streams for new credential"),[4,this.Yu()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},t.prototype.Cc=function(e){return Ee(this,void 0,void 0,function(){return we(this,function(n){switch(n.label){case 0:return this.isPrimary=e,e&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return n.sent(),[3,5];case 2:return e?[3,4]:[4,this.cc()];case 3:n.sent(),this.Xu.set("Unknown"),n.label=4;case 4:n.label=5;case 5:return[2]}})})},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mk(t,e){return"firestore_clients_"+t+"_"+e}function yk(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.t()&&(r+="_"+e.uid),r}function nE(t,e){return"firestore_targets_"+t+"_"+e}var _k=function(){function t(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}return t.kc=function(e,n,r){var i=JSON.parse(r),o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object"),u=void 0;return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string")&&(u=new Ie(i.error.code,i.error.message)),o?new t(e,n,i.state,u):(Gn("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Nc=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},t}(),rE=function(){function t(e,n,r){this.targetId=e,this.state=n,this.error=r}return t.kc=function(e,n){var r=JSON.parse(n),i=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object"),o=void 0;return i&&r.error&&(i=typeof r.error.message=="string"&&typeof r.error.code=="string")&&(o=new Ie(r.error.code,r.error.message)),i?new t(e,r.state,o):(Gn("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Nc=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},t}(),wk=function(){function t(e,n){this.clientId=e,this.activeTargetIds=n}return t.kc=function(e,n){for(var r=JSON.parse(n),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=Ty(),u=0;i&&u<r.activeTargetIds.length;++u)i=jM(r.activeTargetIds[u]),o=o.add(r.activeTargetIds[u]);return i?new t(e,o):(Gn("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),H7=function(){function t(e,n){this.clientId=e,this.onlineState=n}return t.kc=function(e){var n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(Gn("SharedClientState","Failed to parse online state: "+e),null)},t}(),wS=function(){function t(){this.activeTargetIds=Ty()}return t.prototype.Fc=function(e){this.activeTargetIds=this.activeTargetIds.add(e)},t.prototype.$c=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},t.prototype.Nc=function(){var e={activeTargetIds:this.activeTargetIds.j(),updateTimeMs:Date.now()};return JSON.stringify(e)},t}(),Ek=function(){function t(e,n,r,i,o){if(this.$a=e,this.platform=n,this.persistenceKey=r,this.Mc=i,this.mc=null,this.$u=null,this.vr=null,this.Lc={},this.Oc=this.xc.bind(this),this.ko=!1,this.Bc=[],!t.Uc(this.platform))throw new Ie(pe.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=o,this.qc=mk(this.persistenceKey,this.Mc),this.Qc=function(h){return"firestore_sequence_number_"+h}(this.persistenceKey),this.Lc[this.Mc]=new wS,this.Wc=new RegExp("^firestore_clients_"+u+"_([^_]*)$"),this.jc=new RegExp("^firestore_mutations_"+u+"_(\\d+)(?:_(.*))?$"),this.Kc=new RegExp("^firestore_targets_"+u+"_(\\d+)$"),this.Gc=function(h){return"firestore_online_state_"+h}(this.persistenceKey),this.platform.window.addEventListener("storage",this.Oc)}return t.Uc=function(e){return!(!e.window||e.window.localStorage==null)},t.prototype.start=function(){return Ee(this,void 0,void 0,function(){var e,n,r,i,o,u,h,f,v,_,b,S=this;return we(this,function(I){switch(I.label){case 0:return[4,this.mc.Jh()];case 1:for(e=I.sent(),n=0,r=e;n<r.length;n++)(i=r[n])!==this.Mc&&(o=this.getItem(mk(this.persistenceKey,i)))&&(u=wk.kc(i,o))&&(this.Lc[u.clientId]=u);for(this.zc(),(h=this.storage.getItem(this.Gc))&&(f=this.Hc(h))&&this.Jc(f),v=0,_=this.Bc;v<_.length;v++)b=_[v],this.xc(b);return this.Bc=[],this.platform.window.addEventListener("unload",function(){return S.lc()}),this.ko=!0,[2]}})})},t.prototype.Cr=function(e){this.setItem(this.Qc,JSON.stringify(e))},t.prototype.Yc=function(){var e=Ty();return fl(this.Lc,function(n,r){e=e.Ft(r.activeTargetIds)}),e},t.prototype.Xc=function(e){for(var n in this.Lc)if(this.Lc.hasOwnProperty(n)&&this.Lc[n].activeTargetIds.has(e))return!0;return!1},t.prototype.Zc=function(e){this.t_(e,"pending")},t.prototype.e_=function(e,n,r){this.t_(e,n,r),this.s_(e)},t.prototype.n_=function(e){var n="not-current";if(this.Xc(e)){var r=this.storage.getItem(nE(this.persistenceKey,e));if(r){var i=rE.kc(e,r);i&&(n=i.state)}}return this.i_.Fc(e),this.zc(),n},t.prototype.r_=function(e){this.i_.$c(e),this.zc()},t.prototype.o_=function(e){return this.i_.activeTargetIds.has(e)},t.prototype.h_=function(e){this.removeItem(nE(this.persistenceKey,e))},t.prototype.a_=function(e,n,r){this.u_(e,n,r)},t.prototype.oh=function(e,n,r){var i=this;n.forEach(function(o){i.s_(o)}),this.currentUser=e,r.forEach(function(o){i.Zc(o)})},t.prototype.c_=function(e){this.__(e)},t.prototype.lc=function(){this.ko&&(this.platform.window.removeEventListener("storage",this.Oc),this.removeItem(this.qc),this.ko=!1)},t.prototype.getItem=function(e){var n=this.storage.getItem(e);return Ke("SharedClientState","READ",e,n),n},t.prototype.setItem=function(e,n){Ke("SharedClientState","SET",e,n),this.storage.setItem(e,n)},t.prototype.removeItem=function(e){Ke("SharedClientState","REMOVE",e),this.storage.removeItem(e)},t.prototype.xc=function(e){var n=this;if(e.storageArea===this.storage){if(Ke("SharedClientState","EVENT",e.key,e.newValue),e.key===this.qc)return void Gn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.$a.qr(function(){return Ee(n,void 0,void 0,function(){var r,i,o,u,h,f;return we(this,function(v){if(this.ko){if(e.key!==null)if(this.Wc.test(e.key)){if(e.newValue==null)return r=this.l_(e.key),[2,this.d_(r,null)];if(i=this.f_(e.key,e.newValue))return[2,this.d_(i.clientId,i)]}else if(this.jc.test(e.key)){if(e.newValue!==null&&(o=this.T_(e.key,e.newValue)))return[2,this.m_(o)]}else if(this.Kc.test(e.key)){if(e.newValue!==null&&(u=this.w_(e.key,e.newValue)))return[2,this.E_(u)]}else if(e.key===this.Gc){if(e.newValue!==null&&(h=this.Hc(e.newValue)))return[2,this.Jc(h)]}else e.key===this.Qc&&(f=function(_){var b=zo.kr;if(_!=null)try{var S=JSON.parse(_);at(typeof S=="number","Found non-numeric sequence number"),b=S}catch(I){Gn("SharedClientState","Failed to read sequence number from WebStorage",I)}return b}(e.newValue))!==zo.kr&&this.vr(f)}else this.Bc.push(e);return[2]})})})}},Object.defineProperty(t.prototype,"i_",{get:function(){return this.Lc[this.Mc]},enumerable:!0,configurable:!0}),t.prototype.zc=function(){this.setItem(this.qc,this.i_.Nc())},t.prototype.t_=function(e,n,r){var i=new _k(this.currentUser,e,n,r),o=yk(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Nc())},t.prototype.s_=function(e){var n=yk(this.persistenceKey,this.currentUser,e);this.removeItem(n)},t.prototype.__=function(e){var n={clientId:this.Mc,onlineState:e};this.storage.setItem(this.Gc,JSON.stringify(n))},t.prototype.u_=function(e,n,r){var i=nE(this.persistenceKey,e),o=new rE(e,n,r);this.setItem(i,o.Nc())},t.prototype.l_=function(e){var n=this.Wc.exec(e);return n?n[1]:null},t.prototype.f_=function(e,n){var r=this.l_(e);return wk.kc(r,n)},t.prototype.T_=function(e,n){var r=this.jc.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return _k.kc(new uo(o),i,n)},t.prototype.w_=function(e,n){var r=this.Kc.exec(e),i=Number(r[1]);return rE.kc(i,n)},t.prototype.Hc=function(e){return H7.kc(e)},t.prototype.m_=function(e){return Ee(this,void 0,void 0,function(){return we(this,function(n){return e.user.uid===this.currentUser.uid?[2,this.mc.I_(e.batchId,e.state,e.error)]:(Ke("SharedClientState","Ignoring mutation for non-active user "+e.user.uid),[2])})})},t.prototype.E_=function(e){return this.mc.R_(e.targetId,e.state,e.error)},t.prototype.d_=function(e,n){var r=this,i=this.Yc();n?this.Lc[e]=n:delete this.Lc[e];var o=this.Yc(),u=[],h=[];return o.forEach(function(f){return Ee(r,void 0,void 0,function(){return we(this,function(v){return i.has(f)||u.push(f),[2]})})}),i.forEach(function(f){return Ee(r,void 0,void 0,function(){return we(this,function(v){return o.has(f)||h.push(f),[2]})})}),this.mc.A_(u,h)},t.prototype.Jc=function(e){this.Lc[e.clientId]&&this.$u(e.onlineState)},t}(),gF=function(){function t(){this.P_=new wS,this.V_={},this.mc=null,this.$u=null,this.vr=null}return t.prototype.Zc=function(e){},t.prototype.e_=function(e,n,r){},t.prototype.n_=function(e){return this.P_.Fc(e),this.V_[e]||"not-current"},t.prototype.a_=function(e,n,r){this.V_[e]=n},t.prototype.r_=function(e){this.P_.$c(e)},t.prototype.o_=function(e){return this.P_.activeTargetIds.has(e)},t.prototype.h_=function(e){delete this.V_[e]},t.prototype.Yc=function(){return this.P_.activeTargetIds},t.prototype.Xc=function(e){return this.P_.activeTargetIds.has(e)},t.prototype.start=function(){return this.P_=new wS,Promise.resolve()},t.prototype.oh=function(e,n,r){},t.prototype.c_=function(e){},t.prototype.lc=function(){},t.prototype.Cr=function(e){},t}(),gm=function(){function t(e){this.g_=e}return t.prototype.next=function(){return this.g_+=2,this.g_},t.p_=function(){return new t(0)},t.y_=function(){return new t(-1)},t}(),vF=function(t){this.key=t},mF=function(t){this.key=t},yF=function(){function t(e,n){this.query=e,this.b_=n,this.v_=null,this.As=!1,this.S_=sn(),this._s=sn(),this.D_=new GM(e.Be.bind(e))}return Object.defineProperty(t.prototype,"C_",{get:function(){return this.b_},enumerable:!0,configurable:!0}),t.prototype.k_=function(e,n){var r=this,i=n?n.N_:new ik,o=n?n.D_:this.D_,u=n?n._s:this._s,h=o,f=!1,v=this.query.je()&&o.size===this.query.limit?o.last():null,_=this.query.Ke()&&o.size===this.query.limit?o.first():null;if(e.ut(function(S,I){var M=o.get(S),D=I instanceof Gt?I:null;D&&(D=r.query.matches(D)?D:null);var ne=!!M&&r._s.has(M.key),z=!!D&&(D.te||r._s.has(D.key)&&D.hasCommittedMutations),Y=!1;M&&D?M.data().isEqual(D.data())?ne!==z&&(i.track({type:3,doc:D}),Y=!0):r.F_(M,D)||(i.track({type:2,doc:D}),Y=!0,(v&&r.query.Be(D,v)>0||_&&r.query.Be(D,_)<0)&&(f=!0)):!M&&D?(i.track({type:0,doc:D}),Y=!0):M&&!D&&(i.track({type:1,doc:M}),Y=!0,(v||_)&&(f=!0)),Y&&(D?(h=h.add(D),u=z?u.add(S):u.delete(S)):(h=h.delete(S),u=u.delete(S)))}),this.query.je()||this.query.Ke())for(;h.size>this.query.limit;){var b=this.query.je()?h.last():h.first();h=h.delete(b.key),u=u.delete(b.key),i.track({type:1,doc:b})}return{D_:h,N_:i,M_:f,_s:u}},t.prototype.F_=function(e,n){return e.te&&n.hasCommittedMutations&&!n.te},t.prototype.nr=function(e,n,r){var i=this,o=this.D_;this.D_=e.D_,this._s=e._s;var u=e.N_.us();u.sort(function(_,b){return function(S,I){var M=function(D){switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return We("Unknown ChangeType: "+D)}};return M(S)-M(I)}(_.type,b.type)||i.query.Be(_.doc,b.doc)}),this.L_(r);var h=n?this.O_():[],f=this.S_.size===0&&this.As?1:0,v=f!==this.v_;return this.v_=f,u.length!==0||v?{snapshot:new fm(this.query,e.D_,o,u,e._s,f===0,v,!1),x_:h}:{x_:h}},t.prototype.B_=function(e){return this.As&&e==="Offline"?(this.As=!1,this.nr({D_:this.D_,N_:new ik,_s:this._s,M_:!1},!1)):{x_:[]}},t.prototype.U_=function(e){return!this.b_.has(e)&&!!this.D_.has(e)&&!this.D_.get(e).te},t.prototype.L_=function(e){var n=this;e&&(e.Ps.forEach(function(r){return n.b_=n.b_.add(r)}),e.Vs.forEach(function(r){}),e.gs.forEach(function(r){return n.b_=n.b_.delete(r)}),this.As=e.As)},t.prototype.O_=function(){var e=this;if(!this.As)return[];var n=this.S_;this.S_=sn(),this.D_.forEach(function(i){e.U_(i.key)&&(e.S_=e.S_.add(i.key))});var r=[];return n.forEach(function(i){e.S_.has(i)||r.push(new mF(i))}),this.S_.forEach(function(i){n.has(i)||r.push(new vF(i))}),r},t.prototype.q_=function(e){this.b_=e.zh,this.S_=sn();var n=this.k_(e.documents);return this.nr(n,!0)},t.prototype.Q_=function(){return fm.fs(this.query,this.D_,this._s,this.v_===0)},t}(),K7=function(){function t(e,n,r,i){this.Nr=e,this.W_=n,this.updateFunction=r,this.Lr=i,this.j_=5,this.Ja=new fF(this.Nr,"retry_transaction")}return t.prototype.K_=function(){this.G_()},t.prototype.G_=function(){var e=this;this.Ja.Qa(function(){return Ee(e,void 0,void 0,function(){var n,r,i=this;return we(this,function(o){return n=this.W_.Sc(),(r=this.z_(n))&&r.then(function(u){i.Nr.qr(function(){return n.commit().then(function(){i.Lr.resolve(u)}).catch(function(h){i.H_(h)})})}).catch(function(u){i.H_(u)}),[2]})})})},t.prototype.z_=function(e){try{var n=this.updateFunction(e);return!dl(n)&&n.catch&&n.then?n:(this.Lr.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.Lr.reject(r),null}},t.prototype.H_=function(e){var n=this;this.j_>0&&this.J_(e)?(this.j_-=1,this.Nr.qr(function(){return n.G_(),Promise.resolve()})):this.Lr.reject(e)},t.prototype.J_=function(e){if(e.name==="FirebaseError"){var n=e.code;return n==="aborted"||n==="failed-precondition"||!vS(n)}return!1},t}(),Y7=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Q7=function(t){this.key=t,this.Y_=!1},_F=function(){function t(e,n,r,i,o){this.Wu=e,this.W_=n,this.X_=r,this.currentUser=i,this.Z_=o,this.tl=null,this.el=new _h(function(u){return u.canonicalId()}),this.sl=new Map,this.nl=[],this.il=new ui(ct.F),this.rl=new Map,this.ol=new MT,this.hl={},this.al=new Map,this.ul=gm.y_(),this.isPrimary=void 0,this.onlineState="Unknown"}return Object.defineProperty(t.prototype,"cl",{get:function(){return this.isPrimary===!0},enumerable:!0,configurable:!0}),t.prototype.subscribe=function(e){this.tl=e},t.prototype.listen=function(e){return Ee(this,void 0,void 0,function(){var n,r,i,o,u;return we(this,function(h){switch(h.label){case 0:return this._l("listen()"),(i=this.el.get(e))?(n=i.targetId,this.X_.n_(n),r=i.view.Q_(),[3,4]):[3,1];case 1:return[4,this.Wu.Uh(e.xe())];case 2:return o=h.sent(),u=this.X_.n_(o.targetId),n=o.targetId,[4,this.ll(e,n,u==="current")];case 3:r=h.sent(),this.isPrimary&&this.W_.listen(o),h.label=4;case 4:return[2,(this.tl.du([r]),n)]}})})},t.prototype.ll=function(e,n,r){return Ee(this,void 0,void 0,function(){var i,o,u,h,f,v;return we(this,function(_){switch(_.label){case 0:return[4,this.Wu.Kh(e,!0)];case 1:return i=_.sent(),o=new yF(e,i.zh),u=o.k_(i.documents),h=DT.Rs(n,r&&this.onlineState!=="Offline"),f=o.nr(u,this.isPrimary===!0,h),v=new Y7(e,n,o),[2,(this.el.set(e,v),this.sl.has(n)?this.sl.get(n).push(e):this.sl.set(n,[e]),f.snapshot)]}})})},t.prototype.dl=function(e){return Ee(this,void 0,void 0,function(){var n,r;return we(this,function(i){switch(i.label){case 0:return[4,this.Wu.Kh(e.query,!0)];case 1:return n=i.sent(),r=e.view.q_(n),[2,(this.isPrimary&&this.fl(e.targetId,r.x_),r)]}})})},t.prototype.fc=function(e){return Ee(this,void 0,void 0,function(){var n,r,i=this;return we(this,function(o){switch(o.label){case 0:return this._l("unlisten()"),n=this.el.get(e),(r=this.sl.get(n.targetId)).length>1?[2,(this.sl.set(n.targetId,r.filter(function(u){return!u.isEqual(e)})),void this.el.delete(e))]:this.isPrimary?(this.X_.r_(n.targetId),this.X_.Xc(n.targetId)?[3,2]:[4,this.Wu.jh(n.targetId,!1).then(function(){i.X_.h_(n.targetId),i.W_.fc(n.targetId),i.Tl(n.targetId)}).catch(qs)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return this.Tl(n.targetId),[4,this.Wu.jh(n.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})},t.prototype.write=function(e,n){return Ee(this,void 0,void 0,function(){var r;return we(this,function(i){switch(i.label){case 0:return this._l("write()"),[4,this.Wu.lh(e)];case 1:return r=i.sent(),this.X_.Zc(r.batchId),this.ml(r.batchId,n),[4,this.wl(r.zi)];case 2:return i.sent(),[4,this.W_.uc()];case 3:return i.sent(),[2]}})})},t.prototype.runTransaction=function(e,n,r){new K7(e,this.W_,n,r).K_()},t.prototype.vh=function(e){return Ee(this,void 0,void 0,function(){var n,r=this;return we(this,function(i){switch(i.label){case 0:this._l("applyRemoteEvent()"),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this.Wu.vh(e)];case 2:return n=i.sent(),e.Ts.forEach(function(o,u){var h=r.rl.get(u);h&&(at(o.Ps.size+o.Vs.size+o.gs.size<=1,"Limbo resolution for single document contains multiple changes."),o.Ps.size>0?h.Y_=!0:o.Vs.size>0?at(h.Y_,"Received change for limbo target document without add."):o.gs.size>0&&(at(h.Y_,"Received remove for limbo target document without add."),h.Y_=!1))}),[4,this.wl(n,e)];case 3:return i.sent(),[3,6];case 4:return[4,qs(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})},t.prototype.B_=function(e,n){if(this.isPrimary&&n===0||!this.isPrimary&&n===1){this._l("applyOnlineStateChange()");var r=[];this.el.forEach(function(i,o){var u=o.view.B_(e);u.snapshot&&r.push(u.snapshot)}),this.tl.El(e),this.tl.du(r),this.onlineState=e,this.isPrimary&&this.X_.c_(e)}},t.prototype.Ic=function(e,n){return Ee(this,void 0,void 0,function(){var r,i,o,u,h,f=this;return we(this,function(v){switch(v.label){case 0:return this._l("rejectListens()"),this.X_.a_(e,"rejected",n),r=this.rl.get(e),(i=r&&r.key)?(this.il=this.il.remove(i),this.rl.delete(e),this.Il(),o=(o=new ui(ct.F)).it(i,new br(i,Nt.S())),u=sn().add(i),h=new mS(Nt.MIN,new Map,new En(kt),o,u),[2,this.vh(h)]):[4,this.Wu.jh(e,!1).then(function(){return f.Tl(e,n)}).catch(qs)];case 1:return v.sent(),[2]}})})},t.prototype.I_=function(e,n,r){return Ee(this,void 0,void 0,function(){var i;return we(this,function(o){switch(o.label){case 0:return this._l("applyBatchState()"),[4,this.Wu.fh(e)];case 1:return(i=o.sent())===null?[3,6]:n!=="pending"?[3,3]:[4,this.W_.uc()];case 2:return o.sent(),[3,4];case 3:n==="acknowledged"||n==="rejected"?(this.Rl(e,r||null),this.Wu.Yh(e)):We("Unknown batchState: "+n),o.label=4;case 4:return[4,this.wl(i)];case 5:return o.sent(),[3,7];case 6:Ke("SyncEngine","Cannot apply mutation batch with id: "+e),o.label=7;case 7:return[2]}})})},t.prototype.pc=function(e){return Ee(this,void 0,void 0,function(){var n,r;return we(this,function(i){switch(i.label){case 0:this._l("applySuccessfulWrite()"),n=e.batch.batchId,this.Rl(n,null),this.Al(n),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this.Wu.mh(e)];case 2:return r=i.sent(),this.X_.e_(n,"acknowledged"),[4,this.wl(r)];case 3:return i.sent(),[3,6];case 4:return[4,qs(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})},t.prototype.vc=function(e,n){return Ee(this,void 0,void 0,function(){var r;return we(this,function(i){switch(i.label){case 0:this._l("rejectFailedWrite()"),this.Rl(e,n),this.Al(e),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this.Wu.Ah(e)];case 2:return r=i.sent(),this.X_.e_(e,"rejected",n),[4,this.wl(r)];case 3:return i.sent(),[3,6];case 4:return[4,qs(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})},t.prototype.Pl=function(e){return Ee(this,void 0,void 0,function(){var n,r;return we(this,function(i){switch(i.label){case 0:return this.W_.Ju()||Ke("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),[4,this.Wu.gh()];case 1:return(n=i.sent())===-1?[2,void e.resolve()]:((r=this.al.get(n)||[]).push(e),this.al.set(n,r),[2])}})})},t.prototype.Al=function(e){(this.al.get(e)||[]).forEach(function(n){n.resolve()}),this.al.delete(e)},t.prototype.Vl=function(e){this.al.forEach(function(n){n.forEach(function(r){r.reject(new Ie(pe.CANCELLED,e))})}),this.al.clear()},t.prototype.ml=function(e,n){var r=this.hl[this.currentUser.s()];r||(r=new ui(kt)),r=r.it(e,n),this.hl[this.currentUser.s()]=r},t.prototype.Rl=function(e,n){var r=this.hl[this.currentUser.s()];if(r){var i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),this.hl[this.currentUser.s()]=r}},t.prototype.Tl=function(e,n){var r=this;n===void 0&&(n=null),this.X_.r_(e);for(var i=0,o=this.sl.get(e);i<o.length;i++){var u=o[i];this.el.delete(u),n&&this.tl.gl(u,n)}if(this.sl.delete(e),this.isPrimary){var h=this.ol.$i(e);this.ol.Ni(e),h.forEach(function(f){r.ol.Mi(f)||r.pl(f)})}},t.prototype.pl=function(e){var n=this.il.get(e);n!==null&&(this.W_.fc(n),this.il=this.il.remove(e),this.rl.delete(n),this.Il())},t.prototype.fl=function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof vF?(this.ol.vi(o.key,e),this.yl(o)):o instanceof mF?(Ke("SyncEngine","Document no longer in limbo: "+o.key),this.ol.Di(o.key,e),this.ol.Mi(o.key)||this.pl(o.key)):We("Unknown limbo change: "+JSON.stringify(o))}},t.prototype.yl=function(e){var n=e.key;this.il.get(n)||(Ke("SyncEngine","New document in limbo: "+n),this.nl.push(n),this.Il())},t.prototype.Il=function(){for(;this.nl.length>0&&this.il.size<this.Z_;){var e=this.nl.shift(),n=this.ul.next();this.rl.set(n,new Q7(e)),this.il=this.il.it(e,n),this.W_.listen(new by(gl.ve(e.path).xe(),n,2,zo.kr))}},t.prototype.bl=function(){return this.il},t.prototype.vl=function(){return this.nl},t.prototype.wl=function(e,n){return Ee(this,void 0,void 0,function(){var r,i,o,u=this;return we(this,function(h){switch(h.label){case 0:return r=[],i=[],o=[],this.el.forEach(function(f,v){o.push(Promise.resolve().then(function(){var _=v.view.k_(e);return _.M_?u.Wu.Kh(v.query,!1).then(function(b){var S=b.documents;return v.view.k_(S,_)}):_}).then(function(_){var b=n&&n.Ts.get(v.targetId),S=v.view.nr(_,u.isPrimary===!0,b);if(u.fl(v.targetId,S.x_),S.snapshot){u.isPrimary&&u.X_.a_(v.targetId,S.snapshot.fromCache?"not-current":"current"),r.push(S.snapshot);var I=P7.br(v.targetId,S.snapshot);i.push(I)}}))}),[4,Promise.all(o)];case 1:return h.sent(),this.tl.du(r),[4,this.Wu.Lh(i)];case 2:return h.sent(),[2]}})})},t.prototype._l=function(e){},t.prototype.Dc=function(e){return Ee(this,void 0,void 0,function(){var n,r;return we(this,function(i){switch(i.label){case 0:return n=!this.currentUser.isEqual(e),this.currentUser=e,n?(this.Vl("'waitForPendingWrites' promise is rejected due to a user change."),[4,this.Wu.oh(e)]):[3,3];case 1:return r=i.sent(),this.X_.oh(e,r.uh,r._h),[4,this.wl(r.ah)];case 2:i.sent(),i.label=3;case 3:return[4,this.W_.Dc()];case 4:return i.sent(),[2]}})})},t.prototype.Cc=function(e){return Ee(this,void 0,void 0,function(){var n,r,i,o,u,h,f,v=this;return we(this,function(_){switch(_.label){case 0:return e!==!0||this.isPrimary===!0?[3,3]:(this.isPrimary=!0,[4,this.W_.Cc(!0)]);case 1:return _.sent(),n=this.X_.Yc(),[4,this.Sl(n.j())];case 2:for(r=_.sent(),i=0,o=r;i<o.length;i++)u=o[i],this.W_.listen(u);return[3,7];case 3:return e!==!1||this.isPrimary===!1?[3,7]:(this.isPrimary=!1,h=[],f=Promise.resolve(),this.sl.forEach(function(b,S){v.X_.o_(S)?h.push(S):f=f.then(function(){return v.Tl(S),v.Wu.jh(S,!0)}),v.W_.fc(S)}),[4,f]);case 4:return _.sent(),[4,this.Sl(h)];case 5:return _.sent(),this.Dl(),[4,this.W_.Cc(!1)];case 6:_.sent(),_.label=7;case 7:return[2]}})})},t.prototype.Dl=function(){var e=this;this.rl.forEach(function(n,r){e.W_.fc(r)}),this.ol.Fi(),this.rl=new Map,this.il=new ui(ct.F)},t.prototype.Sl=function(e){return Ee(this,void 0,void 0,function(){var n,r,i,o,u,h,f,v,_,b,S,I,M;return we(this,function(D){switch(D.label){case 0:n=[],r=[],i=0,o=e,D.label=1;case 1:return i<o.length?(u=o[i],h=void 0,(f=this.sl.get(u))&&f.length!==0?[4,this.Wu.jh(u,!0)]:[3,8]):[3,14];case 2:return D.sent(),[4,this.Wu.Uh(f[0].xe())];case 3:h=D.sent(),v=0,_=f,D.label=4;case 4:return v<_.length?(b=_[v],S=this.el.get(b),[4,this.dl(S)]):[3,7];case 5:(I=D.sent()).snapshot&&r.push(I.snapshot),D.label=6;case 6:return v++,[3,4];case 7:return[3,12];case 8:return[4,this.Wu.ta(u)];case 9:return M=D.sent(),[4,this.Wu.Uh(M)];case 10:return h=D.sent(),[4,this.ll(this.Cl(M),u,!1)];case 11:D.sent(),D.label=12;case 12:n.push(h),D.label=13;case 13:return i++,[3,1];case 14:return[2,(this.tl.du(r),n)]}})})},t.prototype.Cl=function(e){return new gl(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)},t.prototype.Jh=function(){return this.Wu.Jh()},t.prototype.R_=function(e,n,r){return Ee(this,void 0,void 0,function(){var i,o;return we(this,function(u){switch(u.label){case 0:return this.isPrimary?(Ke("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!this.sl.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,this.Wu.ea()];case 3:return i=u.sent(),o=mS.Is(e,n==="current"),[4,this.wl(i,o)];case 4:return u.sent(),[3,8];case 5:return[4,this.Wu.jh(e,!0)];case 6:return u.sent(),this.Tl(e,r),[3,8];case 7:We("Unexpected target state: "+n),u.label=8;case 8:return[2]}})})},t.prototype.A_=function(e,n){return Ee(this,void 0,void 0,function(){var r,i,o,u,h,f,v,_,b,S,I=this;return we(this,function(M){switch(M.label){case 0:if(!this.isPrimary)return[3,10];r=0,i=e,M.label=1;case 1:return r<i.length?(o=i[r],[4,this.Wu.ta(o)]):[3,6];case 2:return u=M.sent(),[4,this.Wu.Uh(u)];case 3:return h=M.sent(),[4,this.ll(this.Cl(u),h.targetId,!1)];case 4:M.sent(),this.W_.listen(h),M.label=5;case 5:return r++,[3,1];case 6:f=function(D){return we(this,function(ne){switch(ne.label){case 0:return v.sl.has(D)?[4,v.Wu.jh(D,!1).then(function(){I.W_.fc(D),I.Tl(D)}).catch(qs)]:[3,2];case 1:ne.sent(),ne.label=2;case 2:return[2]}})},v=this,_=0,b=n,M.label=7;case 7:return _<b.length?(S=b[_],[5,f(S)]):[3,10];case 8:M.sent(),M.label=9;case 9:return _++,[3,7];case 10:return[2]}})})},t.prototype.enableNetwork=function(){return this.Wu.Zh(!0),this.W_.enableNetwork()},t.prototype.disableNetwork=function(){return this.Wu.Zh(!1),this.W_.disableNetwork()},t.prototype.an=function(e){var n=this.rl.get(e);if(n&&n.Y_)return sn().add(n.key);var r=sn(),i=this.sl.get(e);if(!i)return r;for(var o=0,u=i;o<u.length;o++){var h=u[o],f=this.el.get(h);r=r.Ft(f.view.C_)}return r},t}(),X7=function(){this.kl=null,this.targetId=0,this.Nl=[]},wF=function(){function t(e){this.mc=e,this.Fl=new _h(function(n){return n.canonicalId()}),this.onlineState="Unknown",this.$l=new Set,this.mc.subscribe(this)}return t.prototype.listen=function(e){var n=e.query,r=!1,i=this.Fl.get(n);return i||(r=!0,i=new X7,this.Fl.set(n,i)),i.Nl.push(e),e.B_(this.onlineState),i.kl&&e.Ml(i.kl)&&this.Ll(),r?this.mc.listen(n).then(function(o){return i.targetId=o,o}):Promise.resolve(i.targetId)},t.prototype.fc=function(e){return Ee(this,void 0,void 0,function(){var n,r,i,o;return we(this,function(u){return n=e.query,r=!1,(i=this.Fl.get(n))&&(o=i.Nl.indexOf(e))>=0&&(i.Nl.splice(o,1),r=i.Nl.length===0),r?[2,(this.Fl.delete(n),this.mc.fc(n))]:[2]})})},t.prototype.du=function(e){for(var n=!1,r=0,i=e;r<i.length;r++){var o=i[r],u=o.query,h=this.Fl.get(u);if(h){for(var f=0,v=h.Nl;f<v.length;f++)v[f].Ml(o)&&(n=!0);h.kl=o}}n&&this.Ll()},t.prototype.gl=function(e,n){var r=this.Fl.get(e);if(r)for(var i=0,o=r.Nl;i<o.length;i++)o[i].onError(n);this.Fl.delete(e)},t.prototype.El=function(e){this.onlineState=e;var n=!1;this.Fl.forEach(function(r,i){for(var o=0,u=i.Nl;o<u.length;o++)u[o].B_(e)&&(n=!0)}),n&&this.Ll()},t.prototype.Ol=function(e){this.$l.add(e),e.next()},t.prototype.xl=function(e){this.$l.delete(e)},t.prototype.Ll=function(){this.$l.forEach(function(e){e.next()})},t}(),J7=function(){function t(e,n,r){this.query=e,this.Bl=n,this.Ul=!1,this.ql=null,this.onlineState="Unknown",this.options=r||{}}return t.prototype.Ml=function(e){if(!this.options.includeMetadataChanges){for(var n=[],r=0,i=e.docChanges;r<i.length;r++){var o=i[r];o.type!==3&&n.push(o)}e=new fm(e.query,e.docs,e.cs,n,e._s,e.fromCache,e.ls,!0)}var u=!1;return this.Ul?this.Ql(e)&&(this.Bl.next(e),u=!0):this.Wl(e,this.onlineState)&&(this.jl(e),u=!0),this.ql=e,u},t.prototype.onError=function(e){this.Bl.error(e)},t.prototype.B_=function(e){this.onlineState=e;var n=!1;return this.ql&&!this.Ul&&this.Wl(this.ql,e)&&(this.jl(this.ql),n=!0),n},t.prototype.Wl=function(e,n){if(!e.fromCache)return!0;var r=n!=="Offline";return!(this.options.Kl&&r||e.docs.U()&&n!=="Offline")},t.prototype.Ql=function(e){if(e.docChanges.length>0)return!0;var n=this.ql&&this.ql.hasPendingWrites!==e.hasPendingWrites;return!(!e.ls&&!n)&&this.options.includeMetadataChanges===!0},t.prototype.jl=function(e){e=fm.fs(e.query,e.docs,e._s,e.fromCache),this.Ul=!0,this.Bl.next(e)},t}(),EF=function(){function t(){}return t.prototype.ih=function(e){this.Gl=e},t.prototype.Er=function(e,n,r,i){var o=this;return n.Oe()||r.isEqual(Nt.MIN)?this.zl(e,n):this.Gl.Tr(e,i).next(function(u){var h=o.Hl(n,u);return(n.je()||n.Ke())&&o.M_(n.ge,h,i,r)?o.zl(e,n):(dm()<=yt.DEBUG&&Ke("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),n.toString()),o.Gl.Er(e,n,r).next(function(f){return h.forEach(function(v){f=f.it(v.key,v)}),f}))})},t.prototype.Hl=function(e,n){var r=new En(function(i,o){return e.Be(i,o)});return n.forEach(function(i,o){o instanceof Gt&&e.matches(o)&&(r=r.add(o))}),r},t.prototype.M_=function(e,n,r,i){if(r.size!==n.size)return!0;var o=e==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.D(i)>0)},t.prototype.zl=function(e,n){return dm()<=yt.DEBUG&&Ke("IndexFreeQueryEngine","Using full collection scan to execute query: %s",n.toString()),this.Gl.Er(e,n,Nt.MIN)},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $o(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Sk(e)),e=Z7(t.get(n),e);return Sk(e)}function Z7(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function Sk(t){return t+""}function ta(t){var e=t.length;if(at(e>=2,"Invalid path "+t),e===2)return at(t.charAt(0)===""&&t.charAt(1)==="","Non-empty path "+t+" had length 2"),dn.H;for(var n=e-2,r=[],i="",o=0;o<e;){var u=t.indexOf("",o);switch((u<0||u>n)&&We('Invalid encoded resource path: "'+t+'"'),t.charAt(u+1)){case"":var h=t.substring(o,u),f=void 0;i.length===0?f=h:(f=i+=h,i=""),r.push(f);break;case"":i+=t.substring(o,u),i+="\0";break;case"":i+=t.substring(o,u+1);break;default:We('Invalid encoded resource path: "'+t+'"')}o=u+2}return new dn(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kc=function(){function t(e){this.db=e,t.Jl(q1())===12.2&&Gn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.Yl=function(e,n,r){return Ke("SimpleDb","Opening database:",e),new Pe(function(i,o){var u=window.indexedDB.open(e,n);u.onsuccess=function(h){var f=h.target.result;i(new t(f))},u.onblocked=function(){o(new Ie(pe.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=function(h){var f=h.target.error;f.name==="VersionError"?o(new Ie(pe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o(f)},u.onupgradeneeded=function(h){Ke("SimpleDb",'Database "'+e+'" requires upgrade from version:',h.oldVersion);var f=h.target.result;r.createOrUpgrade(f,u.transaction,h.oldVersion,mm).next(function(){Ke("SimpleDb","Database upgrade to version "+mm+" complete")})}}).Wi()},t.delete=function(e){return Ke("SimpleDb","Removing database:",e),Hu(window.indexedDB.deleteDatabase(e)).Wi()},t.Uc=function(){if(typeof window>"u"||window.indexedDB==null)return!1;if(t.Xl())return!0;if(window.navigator===void 0)return!1;var e=q1(),n=t.Jl(e),r=0<n&&n<10,i=t.Zl(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.Xl=function(){var e;return typeof __PRIVATE_process<"u"&&((e=__PRIVATE_process.__PRIVATE_env)===null||e===void 0?void 0:e.td)==="YES"},t.ed=function(e,n){return e.store(n)},t.Jl=function(e){var n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)},t.Zl=function(e){var n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)},t.prototype.sd=function(e){this.db.onversionchange=function(n){return e(n)}},t.prototype.runTransaction=function(e,n,r){return Ee(this,void 0,void 0,function(){var i,o,u,h,f;return we(this,function(v){switch(v.label){case 0:i=e==="readonly",o=0,u=function(){var _,b,S,I,M;return we(this,function(D){switch(D.label){case 0:++o,_=SF.open(h.db,i?"readonly":"readwrite",n),D.label=1;case 1:return D.trys.push([1,3,,4]),b=r(_).catch(function(ne){return _.abort(ne),Pe.reject(ne)}).Wi(),S={},b.catch(function(){}),[4,_.nd];case 2:return[2,(S.value=(D.sent(),b),S)];case 3:return I=D.sent(),M=I.name!=="FirebaseError"&&o<3,Ke("SimpleDb","Transaction failed with error: %s. Retrying: %s.",I.message,M),M?[3,4]:[2,{value:Promise.reject(I)}];case 4:return[2]}})},h=this,v.label=1;case 1:return[5,u()];case 2:if(typeof(f=v.sent())=="object")return[2,f.value];v.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db.close()},t}(),e$=function(){function t(e){this.rd=e,this.od=!1,this.hd=null}return Object.defineProperty(t.prototype,"Bi",{get:function(){return this.od},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ad",{get:function(){return this.hd},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(e){this.rd=e},enumerable:!0,configurable:!0}),t.prototype.done=function(){this.od=!0},t.prototype.ud=function(e){this.hd=e},t.prototype.delete=function(){return Hu(this.rd.delete())},t}(),SF=function(){function t(e){var n=this;this.transaction=e,this.aborted=!1,this._d=new Ba,this.transaction.oncomplete=function(){n._d.resolve()},this.transaction.onabort=function(){e.error?n._d.reject(e.error):n._d.resolve()},this.transaction.onerror=function(r){var i=UT(r.target.error);n._d.reject(i)}}return t.open=function(e,n,r){return new t(e.transaction(r,n))},Object.defineProperty(t.prototype,"nd",{get:function(){return this._d.promise},enumerable:!0,configurable:!0}),t.prototype.abort=function(e){e&&this._d.reject(e),this.aborted||(Ke("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(e){var n=this.transaction.objectStore(e);return new t$(n)},t}(),t$=function(){function t(e){this.store=e}return t.prototype.put=function(e,n){var r;return n!==void 0?(Ke("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(Ke("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Hu(r)},t.prototype.add=function(e){return Ke("SimpleDb","ADD",this.store.name,e,e),Hu(this.store.add(e))},t.prototype.get=function(e){var n=this;return Hu(this.store.get(e)).next(function(r){return r===void 0&&(r=null),Ke("SimpleDb","GET",n.store.name,e,r),r})},t.prototype.delete=function(e){return Ke("SimpleDb","DELETE",this.store.name,e),Hu(this.store.delete(e))},t.prototype.count=function(){return Ke("SimpleDb","COUNT",this.store.name),Hu(this.store.count())},t.prototype.ld=function(e,n){var r=this.cursor(this.options(e,n)),i=[];return this.dd(r,function(o,u){i.push(u)}).next(function(){return i})},t.prototype.fd=function(e,n){Ke("SimpleDb","DELETE ALL",this.store.name);var r=this.options(e,n);r.Td=!1;var i=this.cursor(r);return this.dd(i,function(o,u,h){return h.delete()})},t.prototype.md=function(e,n){var r;n?r=e:(r={},n=e);var i=this.cursor(r);return this.dd(i,n)},t.prototype.wd=function(e){var n=this.cursor({});return new Pe(function(r,i){n.onerror=function(o){var u=UT(o.target.error);i(u)},n.onsuccess=function(o){var u=o.target.result;u?e(u.primaryKey,u.value).next(function(h){h?u.continue():r()}):r()}})},t.prototype.dd=function(e,n){var r=[];return new Pe(function(i,o){e.onerror=function(u){o(u.target.error)},e.onsuccess=function(u){var h=u.target.result;if(h){var f=new e$(h),v=n(h.primaryKey,h.value,f);if(v instanceof Pe){var _=v.catch(function(b){return f.done(),Pe.reject(b)});r.push(_)}f.Bi?i():f.ad===null?h.continue():h.continue(f.ad)}else i()}}).next(function(){return Pe.Ki(r)})},t.prototype.options=function(e,n){var r=void 0;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}},t.prototype.cursor=function(e){var n="next";if(e.reverse&&(n="prev"),e.index){var r=this.store.index(e.index);return e.Td?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)},t}();function Hu(t){return new Pe(function(e,n){t.onsuccess=function(r){var i=r.target.result;e(i)},t.onerror=function(r){var i=UT(r.target.error);n(i)}})}var bk=!1;function UT(t){var e=kc.Jl(q1());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Ie("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return bk||(bk=!0,setTimeout(function(){throw r},0)),r}}return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var n$=function(){function t(e,n,r,i){this.userId=e,this.serializer=n,this.ur=r,this.Jo=i,this.Ed={}}return t.Id=function(e,n,r,i){return at(e.uid!=="","UserID must not be an empty string."),new t(e.t()?e.uid:"",n,r,i)},t.prototype.Rd=function(e){var n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Pa(e).md({index:hn.userMutationsIndex,range:r},function(i,o,u){n=!1,u.done()}).next(function(){return n})},t.prototype.mh=function(e,n,r){return this.Ad(e).next(function(i){return i.lastStreamToken=r.toBase64(),hv(e).put(i)})},t.prototype.ph=function(e){return this.Ad(e).next(function(n){return hr.fromBase64String(n.lastStreamToken)})},t.prototype.yh=function(e,n){return this.Ad(e).next(function(r){return r.lastStreamToken=n.toBase64(),hv(e).put(r)})},t.prototype.dh=function(e,n,r,i){var o=this,u=vc(e),h=Pa(e);return h.add({}).next(function(f){at(typeof f=="number","Auto-generated key is not a number");for(var v=new LT(f,n,r,i),_=o.serializer.Pd(o.userId,v),b=[],S=new En(function(z,Y){return kt(z.K(),Y.K())}),I=0,M=i;I<M.length;I++){var D=M[I],ne=Vr.key(o.userId,D.key.path,f);S=S.add(D.key.path.L()),b.push(h.put(_)),b.push(u.put(ne,Vr.PLACEHOLDER))}return S.forEach(function(z){b.push(o.ur.Vd(e,z))}),e.rr(function(){o.Ed[f]=v.keys()}),Pe.Ki(b).next(function(){return v})})},t.prototype.Ph=function(e,n){var r=this;return Pa(e).get(n).next(function(i){return i?(at(i.userId===r.userId,"Unexpected user '"+i.userId+"' for mutation batch "+n),r.serializer.gd(i)):null})},t.prototype.Th=function(e,n){var r=this;return this.Ed[n]?Pe.resolve(this.Ed[n]):this.Ph(e,n).next(function(i){if(i){var o=i.keys();return r.Ed[n]=o,o}return null})},t.prototype.xh=function(e,n){var r=this,i=n+1,o=IDBKeyRange.lowerBound([this.userId,i]),u=null;return Pa(e).md({index:hn.userMutationsIndex,range:o},function(h,f,v){f.userId===r.userId&&(at(f.batchId>=i,"Should have found mutation after "+i),u=r.serializer.gd(f)),v.done()}).next(function(){return u})},t.prototype.gh=function(e){var n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Pa(e).md({index:hn.userMutationsIndex,range:n,reverse:!0},function(i,o,u){r=o.batchId,u.done()}).next(function(){return r})},t.prototype.hh=function(e){var n=this,r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Pa(e).ld(hn.userMutationsIndex,r).next(function(i){return i.map(function(o){return n.serializer.gd(o)})})},t.prototype._r=function(e,n){var r=this,i=Vr.prefixForPath(this.userId,n.path),o=IDBKeyRange.lowerBound(i),u=[];return vc(e).md({range:o},function(h,f,v){var _=h[0],b=h[1],S=h[2],I=ta(b);if(_===r.userId&&n.path.isEqual(I))return Pa(e).get(S).next(function(M){if(!M)throw We("Dangling document-mutation reference found: "+h+" which points to "+S);at(M.userId===r.userId,"Unexpected user '"+M.userId+"' for mutation batch "+S),u.push(r.serializer.gd(M))});v.done()}).next(function(){return u})},t.prototype.wr=function(e,n){var r=this,i=new En(kt),o=[];return n.forEach(function(u){var h=Vr.prefixForPath(r.userId,u.path),f=IDBKeyRange.lowerBound(h),v=vc(e).md({range:f},function(_,b,S){var I=_[0],M=_[1],D=_[2],ne=ta(M);I===r.userId&&u.path.isEqual(ne)?i=i.add(D):S.done()});o.push(v)}),Pe.Ki(o).next(function(){return r.pd(e,i)})},t.prototype.Vr=function(e,n){var r=this,i=n.path,o=i.length+1,u=Vr.prefixForPath(this.userId,i),h=IDBKeyRange.lowerBound(u),f=new En(kt);return vc(e).md({range:h},function(v,_,b){var S=v[0],I=v[1],M=v[2],D=ta(I);S===r.userId&&i.q(D)?D.length===o&&(f=f.add(M)):b.done()}).next(function(){return r.pd(e,f)})},t.prototype.pd=function(e,n){var r=this,i=[],o=[];return n.forEach(function(u){o.push(Pa(e).get(u).next(function(h){if(h===null)throw We("Dangling document-mutation reference found, which points to "+u);at(h.userId===r.userId,"Unexpected user '"+h.userId+"' for mutation batch "+u),i.push(r.serializer.gd(h))}))}),Pe.Ki(o).next(function(){return i})},t.prototype.Vh=function(e,n){var r=this;return TF(e.yd,this.userId,n).next(function(i){return e.rr(function(){r.Xh(n.batchId)}),Pe.forEach(i,function(o){return r.Jo.bd(e,o)})})},t.prototype.Xh=function(e){delete this.Ed[e]},t.prototype.Rh=function(e){var n=this;return this.Rd(e).next(function(r){if(!r)return Pe.resolve();var i=IDBKeyRange.lowerBound(Vr.prefixForUser(n.userId)),o=[];return vc(e).md({range:i},function(u,h,f){if(u[0]===n.userId){var v=ta(u[1]);o.push(v)}else f.done()}).next(function(){at(o.length===0,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+o.map(function(u){return u.K()}))})})},t.prototype.Mi=function(e,n){return bF(e,this.userId,n)},t.prototype.Ad=function(e){var n=this;return hv(e).get(this.userId).next(function(r){return r||new iu(n.userId,-1,"")})},t}();function bF(t,e,n){var r=Vr.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),u=!1;return vc(t).md({range:o,Td:!0},function(h,f,v){var _=h[0],b=h[1];h[2],_===e&&b===i&&(u=!0),v.done()}).next(function(){return u})}function TF(t,e,n){var r=t.store(hn.store),i=t.store(Vr.store),o=[],u=IDBKeyRange.only(n.batchId),h=0,f=r.md({range:u},function(M,D,ne){return h++,ne.delete()});o.push(f.next(function(){at(h===1,"Dangling document-mutation reference found: Missing batch "+n.batchId)}));for(var v=[],_=0,b=n.mutations;_<b.length;_++){var S=b[_],I=Vr.key(e,S.key.path,n.batchId);o.push(i.delete(I)),v.push(S.key)}return Pe.Ki(o).next(function(){return v})}function Pa(t){return Si.ed(t,hn.store)}function vc(t){return Si.ed(t,Vr.store)}function hv(t){return Si.ed(t,iu.store)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var r$=function(){function t(e,n){this.Jo=e,this.serializer=n}return t.prototype.Qh=function(e){var n=this;return this.vd(e).next(function(r){var i=new gm(r.highestTargetId);return r.highestTargetId=i.next(),n.Sd(e,r).next(function(){return r.highestTargetId})})},t.prototype.bh=function(e){return this.vd(e).next(function(n){return Nt.v(new xi(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.Dd=function(e){return VT(e.yd)},t.prototype.$h=function(e,n,r){var i=this;return this.vd(e).next(function(o){return o.highestListenSequenceNumber=n,r&&(o.lastRemoteSnapshotVersion=r.k()),n>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=n),i.Sd(e,o)})},t.prototype.Wh=function(e,n){var r=this;return this.Cd(e,n).next(function(){return r.vd(e).next(function(i){return i.targetCount+=1,r.kd(n,i),r.Sd(e,i)})})},t.prototype.Nh=function(e,n){return this.Cd(e,n)},t.prototype.Nd=function(e,n){var r=this;return this.Fd(e,n.targetId).next(function(){return sc(e).delete(n.targetId)}).next(function(){return r.vd(e)}).next(function(i){return at(i.targetCount>0,"Removing from an empty target cache"),i.targetCount-=1,r.Sd(e,i)})},t.prototype.xo=function(e,n,r){var i=this,o=0,u=[];return sc(e).md(function(h,f){var v=i.serializer.$d(f);v.sequenceNumber<=n&&r.get(v.targetId)===null&&(o++,u.push(i.Nd(e,v)))}).next(function(){return Pe.Ki(u)}).next(function(){return o})},t.prototype.Xs=function(e,n){var r=this;return sc(e).md(function(i,o){var u=r.serializer.$d(o);n(u)})},t.prototype.vd=function(e){return IF(e.yd)},t.prototype.Sd=function(e,n){return(r=e,Si.ed(r,zi.store)).put(zi.key,n);var r},t.prototype.Cd=function(e,n){return sc(e).put(this.serializer.Md(n))},t.prototype.kd=function(e,n){var r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r},t.prototype.Ld=function(e){return this.vd(e).next(function(n){return n.targetCount})},t.prototype.qh=function(e,n){var r=this,i=n.canonicalId(),o=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]),u=null;return sc(e).md({range:o,index:Ei.queryTargetsIndexName},function(h,f,v){var _=r.serializer.$d(f);n.isEqual(_.target)&&(u=_,v.done())}).next(function(){return u})},t.prototype.Dh=function(e,n,r){var i=this,o=[],u=za(e);return n.forEach(function(h){var f=$o(h.path);o.push(u.put(new kr(r,f))),o.push(i.Jo.vi(e,h))}),Pe.Ki(o)},t.prototype.Sh=function(e,n,r){var i=this,o=za(e);return Pe.forEach(n,function(u){var h=$o(u.path);return Pe.Ki([o.delete([r,h]),i.Jo.Di(e,u)])})},t.prototype.Fd=function(e,n){var r=za(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)},t.prototype.Gh=function(e,n){var r=IDBKeyRange.bound([n],[n+1],!1,!0),i=za(e),o=sn();return i.md({range:r,Td:!0},function(u,h,f){var v=ta(u[1]),_=new ct(v);o=o.add(_)}).next(function(){return o})},t.prototype.Mi=function(e,n){var r=$o(n.path),i=IDBKeyRange.bound([r],[JM(r)],!1,!0),o=0;return za(e).md({index:kr.documentTargetsIndex,Td:!0,range:i},function(u,h,f){var v=u[0];u[1],v!==0&&(o++,f.done())}).next(function(){return o>0})},t.prototype.un=function(e,n){var r=this;return sc(e).get(n).next(function(i){return i?r.serializer.$d(i):null})},t}();function sc(t){return Si.ed(t,Ei.store)}function IF(t){return kc.ed(t,zi.store).get(zi.key).next(function(e){return at(e!==null,"Missing metadata row."),e})}function VT(t){return IF(t).next(function(e){return e.highestListenSequenceNumber})}function za(t){return Si.ed(t,kr.store)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var CF=function(){function t(e,n){this.serializer=e,this.ur=n}return t.prototype.Yi=function(e,n,r){return Ra(e).put(Mg(n),r)},t.prototype.Zi=function(e,n){var r=Ra(e),i=Mg(n);return r.delete(i)},t.prototype.updateMetadata=function(e,n){var r=this;return this.getMetadata(e).next(function(i){return i.byteSize+=n,r.Od(e,i)})},t.prototype.tr=function(e,n){var r=this;return Ra(e).get(Mg(n)).next(function(i){return r.xd(i)})},t.prototype.Bd=function(e,n){var r=this;return Ra(e).get(Mg(n)).next(function(i){var o=r.xd(i);return o?{Ud:o,size:vm(i)}:null})},t.prototype.getEntries=function(e,n){var r=this,i=hm();return this.qd(e,n,function(o,u){var h=r.xd(u);i=i.it(o,h)}).next(function(){return i})},t.prototype.Qd=function(e,n){var r=this,i=hm(),o=new ui(ct.F);return this.qd(e,n,function(u,h){var f=r.xd(h);f?(i=i.it(u,f),o=o.it(u,vm(h))):(i=i.it(u,null),o=o.it(u,0))}).next(function(){return{Wd:i,jd:o}})},t.prototype.qd=function(e,n,r){if(n.U())return Pe.resolve();var i=IDBKeyRange.bound(n.first().path.j(),n.last().path.j()),o=n._t(),u=o.Et();return Ra(e).md({range:i},function(h,f,v){for(var _=ct.nt(h);u&&ct.F(u,_)<0;)r(u,null),u=o.Et();u&&u.isEqual(_)&&(r(u,f),u=o.It()?o.Et():null),u?v.ud(u.path.j()):v.done()}).next(function(){for(;u;)r(u,null),u=o.It()?o.Et():null})},t.prototype.Er=function(e,n,r){var i=this,o=kd(),u=n.path.length+1,h={};if(r.isEqual(Nt.MIN)){var f=n.path.j();h.range=IDBKeyRange.lowerBound(f)}else{var v=n.path.j(),_=this.serializer.Kd(r);h.range=IDBKeyRange.lowerBound([v,_],!0),h.index=Ln.collectionReadTimeIndex}return Ra(e).md(h,function(b,S,I){if(b.length===u){var M=i.serializer.Gd(S);n.path.q(M.key.path)?M instanceof Gt&&n.matches(M)&&(o=o.it(M.key,M)):I.done()}}).next(function(){return o})},t.prototype.ea=function(e,n){var r=this,i=hu(),o=this.serializer.Kd(n),u=Ra(e),h=IDBKeyRange.lowerBound(o,!0);return u.md({index:Ln.readTimeIndex,range:h},function(f,v){var _=r.serializer.Gd(v);i=i.it(_.key,_),o=v.readTime}).next(function(){return{sa:i,readTime:r.serializer.zd(o)}})},t.prototype.na=function(e){var n=this,r=Ra(e),i=Nt.MIN;return r.md({index:Ln.readTimeIndex,reverse:!0},function(o,u,h){u.readTime&&(i=n.serializer.zd(u.readTime)),h.done()}).next(function(){return i})},t.prototype.wh=function(e){return new t.Hd(this,!!e&&e.Eh)},t.prototype.Jd=function(e){return this.getMetadata(e).next(function(n){return n.byteSize})},t.prototype.getMetadata=function(e){return Tk(e).get(ds.key).next(function(n){return at(!!n,"Missing document cache metadata"),n})},t.prototype.Od=function(e,n){return Tk(e).put(ds.key,n)},t.prototype.xd=function(e){if(e){var n=this.serializer.Gd(e);return n instanceof br&&n.version.isEqual(Nt.S())?null:n}return null},t}();function Tk(t){return Si.ed(t,ds.store)}function Ra(t){return Si.ed(t,Ln.store)}function Mg(t){return t.path.j()}function vm(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw We("Unknown remote document type");e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */CF.Hd=function(t){function e(n,r){var i=this;return(i=t.call(this)||this).Yd=n,i.Eh=r,i.Xd=new _h(function(o){return o.toString()}),i}return Et(e,t),e.prototype.nr=function(n){var r=this,i=[],o=0,u=new En(function(h,f){return kt(h.K(),f.K())});return this.zi.forEach(function(h,f){var v=r.Xd.get(h);if(f){var _=r.Yd.serializer.Zd(f,r.readTime);u=u.add(h.path.L());var b=vm(_);o+=b-v,i.push(r.Yd.Yi(n,h,_))}else if(o-=v,r.Eh){var S=r.Yd.serializer.Zd(new br(h,Nt.S()),r.readTime);i.push(r.Yd.Yi(n,h,S))}else i.push(r.Yd.Zi(n,h))}),u.forEach(function(h){i.push(r.Yd.ur.Vd(n,h))}),i.push(this.Yd.updateMetadata(n,o)),Pe.Ki(i)},e.prototype.er=function(n,r){var i=this;return this.Yd.Bd(n,r).next(function(o){return o===null?(i.Xd.set(r,0),null):(i.Xd.set(r,o.size),o.Ud)})},e.prototype.sr=function(n,r){var i=this;return this.Yd.Qd(n,r).next(function(o){var u=o.Wd;return o.jd.forEach(function(h,f){i.Xd.set(h,f)}),u})},e}(ZM);var i$=function(){function t(){this.tf=new BT}return t.prototype.Vd=function(e,n){return this.tf.add(n),Pe.resolve()},t.prototype.Pr=function(e,n){return Pe.resolve(this.tf.getEntries(n))},t}(),BT=function(){function t(){this.index={}}return t.prototype.add=function(e){var n=e.B(),r=e.L(),i=this.index[n]||new En(dn.F),o=!i.has(r);return this.index[n]=i.add(r),o},t.prototype.has=function(e){var n=e.B(),r=e.L(),i=this.index[n];return i&&i.has(r)},t.prototype.getEntries=function(e){return(this.index[e]||new En(dn.F)).j()},t}(),mm=10,o$=function(){function t(e){this.serializer=e}return t.prototype.createOrUpgrade=function(e,n,r,i){var o=this;at(r<i&&r>=0&&i<=mm,"Unexpected schema upgrade from v"+r+" to v"+i+".");var u=new SF(n);r<1&&i>=1&&(function(f){f.createObjectStore(Di.store)}(e),function(f){f.createObjectStore(iu.store,{keyPath:iu.keyPath}),f.createObjectStore(hn.store,{keyPath:hn.keyPath,autoIncrement:!0}).createIndex(hn.userMutationsIndex,hn.userMutationsKeyPath,{unique:!0}),f.createObjectStore(Vr.store)}(e),Ik(e),function(f){f.createObjectStore(Ln.store)}(e));var h=Pe.resolve();return r<3&&i>=3&&(r!==0&&(function(f){f.deleteObjectStore(kr.store),f.deleteObjectStore(Ei.store),f.deleteObjectStore(zi.store)}(e),Ik(e)),h=h.next(function(){return function(f){var v=f.store(zi.store),_=new zi(0,0,Nt.MIN.k(),0);return v.put(zi.key,_)}(u)})),r<4&&i>=4&&(r!==0&&(h=h.next(function(){return function(f,v){return v.store(hn.store).ld().next(function(_){f.deleteObjectStore(hn.store),f.createObjectStore(hn.store,{keyPath:hn.keyPath,autoIncrement:!0}).createIndex(hn.userMutationsIndex,hn.userMutationsKeyPath,{unique:!0});var b=v.store(hn.store),S=_.map(function(I){return b.put(I)});return Pe.Ki(S)})}(e,u)})),h=h.next(function(){(function(f){f.createObjectStore(ps.store,{keyPath:ps.keyPath})})(e)})),r<5&&i>=5&&(h=h.next(function(){return o.removeAcknowledgedMutations(u)})),r<6&&i>=6&&(h=h.next(function(){return function(f){f.createObjectStore(ds.store)}(e),o.addDocumentGlobal(u)})),r<7&&i>=7&&(h=h.next(function(){return o.ensureSequenceNumbers(u)})),r<8&&i>=8&&(h=h.next(function(){return o.createCollectionParentIndex(e,u)})),r<9&&i>=9&&(h=h.next(function(){(function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")})(e),function(f){var v=f.objectStore(Ln.store);v.createIndex(Ln.readTimeIndex,Ln.readTimeIndexPath,{unique:!1}),v.createIndex(Ln.collectionReadTimeIndex,Ln.collectionReadTimeIndexPath,{unique:!1})}(n)})),r<10&&i>=10&&(h=h.next(function(){return o.rewriteCanonicalIds(u)})),h},t.prototype.addDocumentGlobal=function(e){var n=0;return e.store(Ln.store).md(function(r,i){n+=vm(i)}).next(function(){var r=new ds(n);return e.store(ds.store).put(ds.key,r)})},t.prototype.removeAcknowledgedMutations=function(e){var n=this,r=e.store(iu.store),i=e.store(hn.store);return r.ld().next(function(o){return Pe.forEach(o,function(u){var h=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return i.ld(hn.userMutationsIndex,h).next(function(f){return Pe.forEach(f,function(v){at(v.userId===u.userId,"Cannot process batch "+v.batchId+" from unexpected user");var _=n.serializer.gd(v);return TF(e,u.userId,_).next(function(){})})})})})},t.prototype.ensureSequenceNumbers=function(e){var n=e.store(kr.store),r=e.store(Ln.store);return VT(e).next(function(i){var o=[];return r.md(function(u,h){var f=new dn(u),v=function(_){return[0,$o(_)]}(f);o.push(n.get(v).next(function(_){return _?Pe.resolve():function(b){return n.put(new kr(0,$o(b),i))}(f)}))}).next(function(){return Pe.Ki(o)})})},t.prototype.createCollectionParentIndex=function(e,n){e.createObjectStore(il.store,{keyPath:il.keyPath});var r=n.store(il.store),i=new BT,o=function(u){if(i.add(u)){var h=u.B(),f=u.L();return r.put({collectionId:h,parent:$o(f)})}};return n.store(Ln.store).md({Td:!0},function(u,h){var f=new dn(u);return o(f.L())}).next(function(){return n.store(Vr.store).md({Td:!0},function(u,h){u[0];var f=u[1],v=(u[2],ta(f));return o(v.L())})})},t.prototype.rewriteCanonicalIds=function(e){var n=this,r=e.store(Ei.store);return r.md(function(i,o){var u=n.serializer.$d(o),h=n.serializer.Md(u);return r.put(h)})},t}(),s$=function(t,e){this.seconds=t,this.nanoseconds=e},Di=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Di.store="owner",Di.key="owner";var iu=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};iu.store="mutationQueues",iu.keyPath="userId";var hn=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};hn.store="mutations",hn.keyPath="batchId",hn.userMutationsIndex="userMutationsIndex",hn.userMutationsKeyPath=["userId","batchId"];var Vr=function(){function t(){}return t.prefixForUser=function(e){return[e]},t.prefixForPath=function(e,n){return[e,$o(n)]},t.key=function(e,n,r){return[e,$o(n),r]},t}();Vr.store="documentMutations",Vr.PLACEHOLDER=new Vr;var a$=function(t,e){this.path=t,this.readTime=e},u$=function(t,e){this.path=t,this.version=e},Ln=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Ln.store="remoteDocuments",Ln.readTimeIndex="readTimeIndex",Ln.readTimeIndexPath="readTime",Ln.collectionReadTimeIndex="collectionReadTimeIndex",Ln.collectionReadTimeIndexPath=["parentPath","readTime"];var ds=function(t){this.byteSize=t};ds.store="remoteDocumentGlobal",ds.key="remoteDocumentGlobalKey";var Ei=function(t,e,n,r,i,o,u){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=u};Ei.store="targets",Ei.keyPath="targetId",Ei.queryTargetsIndexName="queryTargetsIndex",Ei.queryTargetsKeyPath=["canonicalId","targetId"];var kr=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};kr.store="targetDocuments",kr.keyPath=["targetId","path"],kr.documentTargetsIndex="documentTargetsIndex",kr.documentTargetsKeyPath=["path","targetId"];var zi=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};zi.key="targetGlobalKey",zi.store="targetGlobal";var il=function(t,e){this.collectionId=t,this.parent=e};function Ik(t){t.createObjectStore(kr.store,{keyPath:kr.keyPath}).createIndex(kr.documentTargetsIndex,kr.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Ei.store,{keyPath:Ei.keyPath}).createIndex(Ei.queryTargetsIndexName,Ei.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(zi.store)}il.store="collectionParents",il.keyPath=["collectionId","parent"];var ps=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};ps.store="clientMetadata",ps.keyPath="clientId";var Ck=Wi(Wi(Wi([iu.store,hn.store,Vr.store,Ln.store,Ei.store,Di.store,zi.store,kr.store],[ps.store]),[ds.store]),[il.store]),l$=function(){function t(){this.ef=new BT}return t.prototype.Vd=function(e,n){var r=this;if(!this.ef.has(n)){var i=n.B(),o=n.L();e.rr(function(){r.ef.add(n)});var u={collectionId:i,parent:$o(o)};return xk(e).put(u)}return Pe.resolve()},t.prototype.Pr=function(e,n){var r=[],i=IDBKeyRange.bound([n,""],[JM(n),""],!1,!0);return xk(e).ld(i).next(function(o){for(var u=0,h=o;u<h.length;u++){var f=h[u];if(f.collectionId!==n)break;r.push(ta(f.parent))}return r})},t}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xk(t){return Si.ed(t,il.store)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var c$=function(){function t(e){this.sf=e}return t.prototype.Gd=function(e){if(e.document)return this.sf.vn(e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=ct.nt(e.noDocument.path),r=this.nf(e.noDocument.readTime);return new br(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=ct.nt(e.unknownDocument.path),o=this.nf(e.unknownDocument.version);return new cm(i,o)}return We("Unexpected DbRemoteDocument")},t.prototype.Zd=function(e,n){var r=this.Kd(n),i=e.key.path.L().j();if(e instanceof Gt){var o=this.sf.bn(e),u=e.hasCommittedMutations;return new Ln(null,null,o,u,r,i)}if(e instanceof br){var h=e.key.path.j(),f=this.if(e.version),v=e.hasCommittedMutations;return new Ln(null,new a$(h,f),null,v,r,i)}if(e instanceof cm){var _=e.key.path.j(),b=this.if(e.version);return new Ln(new u$(_,b),null,null,!0,r,i)}return We("Unexpected MaybeDocument")},t.prototype.Kd=function(e){var n=e.k();return[n.seconds,n.nanoseconds]},t.prototype.zd=function(e){var n=new xi(e[0],e[1]);return Nt.v(n)},t.prototype.if=function(e){var n=e.k();return new s$(n.seconds,n.nanoseconds)},t.prototype.nf=function(e){var n=new xi(e.seconds,e.nanoseconds);return Nt.v(n)},t.prototype.Pd=function(e,n){var r=this,i=n.baseMutations.map(function(u){return r.sf.$n(u)}),o=n.mutations.map(function(u){return r.sf.$n(u)});return new hn(e,n.batchId,n.Ri.toMillis(),i,o)},t.prototype.gd=function(e){var n=this,r=(e.baseMutations||[]).map(function(u){return n.sf.xn(u)}),i=e.mutations.map(function(u){return n.sf.xn(u)}),o=xi.fromMillis(e.localWriteTimeMs);return new LT(e.batchId,o,r,i)},t.prototype.$d=function(e){var n,r=this.nf(e.readTime),i=e.lastLimboFreeSnapshotVersion!==void 0?this.nf(e.lastLimboFreeSnapshotVersion):Nt.MIN;return n=e.query.documents!==void 0?this.sf.Kn(e.query):this.sf.Yn(e.query),new by(n,e.targetId,0,e.lastListenSequenceNumber,r,i,hr.fromBase64String(e.resumeToken))},t.prototype.Md=function(e){var n,r=this.if(e.ts),i=this.if(e.lastLimboFreeSnapshotVersion);n=e.target.Pe()?this.sf.jn(e.target):this.sf.Gn(e.target);var o=e.resumeToken.toBase64();return new Ei(e.targetId,e.target.canonicalId(),r,o,e.sequenceNumber,i,n)},t}(),Nk="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.",Ak=function(t){function e(n,r){var i=this;return(i=t.call(this)||this).yd=n,i.Ch=r,i}return Et(e,t),e}(tF),Si=function(){function t(e,n,r,i,o,u,h,f){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.$a=u,this.rf=f,this.hf=!1,this.isPrimary=!1,this.networkEnabled=!0,this.af=null,this.inForeground=!1,this.uf=null,this.cf=null,this._f=Number.NEGATIVE_INFINITY,this.lf=function(v){return Promise.resolve()},this.Jo=new h$(this,o),this.df=n+t.ff,this.serializer=new c$(h),this.document=i.document,this.th=new r$(this.Jo,this.serializer),this.ur=new l$,this.hr=new CF(this.serializer,this.ur),!i.window||!i.window.localStorage)throw new Ie(pe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=i.window,this.Tf=this.window.localStorage}return t.ed=function(e,n){if(e instanceof Ak)return kc.ed(e.yd,n);throw We("IndexedDbPersistence must use instances of IndexedDbTransaction")},t.mf=function(e){return Ee(this,void 0,void 0,function(){var n;return we(this,function(r){switch(r.label){case 0:if(!t.Uc())throw new Ie(pe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");return[4,(n=new t(e.allowTabSynchronization,e.persistenceKey,e.clientId,e.platform,e.wf,e.$a,e.serializer,e.rf)).start()];case 1:return[2,(r.sent(),n)]}})})},t.prototype.start=function(){var e=this;return kc.Yl(this.df,mm,new o$(this.serializer)).then(function(n){return e.Ef=n,e.If()}).then(function(){return e.Rf(),e.Af(),e.Pf(),e.Ef.runTransaction("readonly",[zi.store],function(n){return VT(n)})}).then(function(n){e.Vf=new zo(n,e.rf)}).then(function(){e.hf=!0}).catch(function(n){return e.Ef&&e.Ef.close(),Promise.reject(n)})},t.prototype.gf=function(e){var n=this;return this.lf=function(r){return Ee(n,void 0,void 0,function(){return we(this,function(i){return this.ko?[2,e(r)]:[2]})})},e(this.isPrimary)},t.prototype.pf=function(e){var n=this;this.Ef.sd(function(r){return Ee(n,void 0,void 0,function(){return we(this,function(i){switch(i.label){case 0:return r.newVersion===null?[4,e()]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})})},t.prototype.Zh=function(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.$a.qr(function(){return Ee(n,void 0,void 0,function(){return we(this,function(r){switch(r.label){case 0:return this.ko?[4,this.If()]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}})})}))},t.prototype.If=function(){var e=this;return this.Ef.runTransaction("readwrite",Ck,function(n){return Fg(n).put(new ps(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next(function(){if(e.isPrimary)return e.yf(n).next(function(r){r||(e.isPrimary=!1,e.$a.qr(function(){return e.lf(!1)}))})}).next(function(){return e.bf(n)}).next(function(r){return e.isPrimary&&!r?e.vf(n).next(function(){return!1}):!!r&&e.Sf(n).next(function(){return!0})})}).catch(function(n){if(!e.allowTabSynchronization)throw n;return Ke("IndexedDbPersistence","Releasing owner lease after error during lease refresh",n),!1}).then(function(n){e.isPrimary!==n&&e.$a.qr(function(){return e.lf(n)}),e.isPrimary=n})},t.prototype.yf=function(e){var n=this;return gf(e).get(Di.key).next(function(r){return Pe.resolve(n.Df(r))})},t.prototype.Cf=function(e){return Fg(e).delete(this.clientId)},t.prototype.kf=function(){return Ee(this,void 0,void 0,function(){var e=this;return we(this,function(n){switch(n.label){case 0:return!this.isPrimary||this.Nf(this._f,18e5)?[3,2]:(this._f=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(r){var i=t.ed(r,ps.store);return i.ld().next(function(o){var u=e.Ff(o,18e5),h=o.filter(function(f){return u.indexOf(f)===-1});return Pe.forEach(h,function(f){return i.delete(f.clientId)}).next(function(){return h})})}).catch(function(){return[]})]);case 1:n.sent().forEach(function(r){e.window.localStorage.removeItem(e.$f(r.clientId))}),n.label=2;case 2:return[2]}})})},t.prototype.Pf=function(){var e=this;this.cf=this.$a.eo("client_metadata_refresh",4e3,function(){return e.If().then(function(){return e.kf()}).then(function(){return e.Pf()})})},t.prototype.Df=function(e){return!!e&&e.ownerId===this.clientId},t.prototype.bf=function(e){var n=this;return gf(e).get(Di.key).next(function(r){if(r!==null&&n.Nf(r.leaseTimestampMs,5e3)&&!n.Mf(r.ownerId)){if(n.Df(r)&&n.networkEnabled)return!0;if(!n.Df(r)){if(!r.allowTabSynchronization)throw new Ie(pe.FAILED_PRECONDITION,Nk);return!1}}return!(!n.networkEnabled||!n.inForeground)||Fg(e).ld().next(function(i){return n.Ff(i,5e3).find(function(o){if(n.clientId!==o.clientId){var u=!n.networkEnabled&&o.networkEnabled,h=!n.inForeground&&o.inForeground,f=n.networkEnabled===o.networkEnabled;if(u||h&&f)return!0}return!1})===void 0})}).next(function(r){return n.isPrimary!==r&&Ke("IndexedDbPersistence","Client "+(r?"is":"is not")+" eligible for a primary lease."),r})},t.prototype.lc=function(){return Ee(this,void 0,void 0,function(){var e=this;return we(this,function(n){switch(n.label){case 0:return this.hf=!1,this.Lf(),this.cf&&(this.cf.cancel(),this.cf=null),this.Of(),this.xf(),[4,this.Ef.runTransaction("readwrite",[Di.store,ps.store],function(r){return e.vf(r).next(function(){return e.Cf(r)})})];case 1:return n.sent(),this.Ef.close(),this.Bf(),[2]}})})},t.prototype.Ff=function(e,n){var r=this;return e.filter(function(i){return r.Nf(i.updateTimeMs,n)&&!r.Mf(i.clientId)})},t.prototype.Jh=function(){var e=this;return this.Ef.runTransaction("readonly",[ps.store],function(n){return Fg(n).ld().next(function(r){return e.Ff(r,18e5).map(function(i){return i.clientId})})})},t.clearPersistence=function(e){return Ee(this,void 0,void 0,function(){var n;return we(this,function(r){switch(r.label){case 0:return t.Uc()?(n=e+t.ff,[4,kc.delete(n)]):[2,Promise.resolve()];case 1:return r.sent(),[2]}})})},Object.defineProperty(t.prototype,"ko",{get:function(){return this.hf},enumerable:!0,configurable:!0}),t.prototype.Yo=function(e){return n$.Id(e,this.serializer,this.ur,this.Jo)},t.prototype.eh=function(){return this.th},t.prototype.Zo=function(){return this.hr},t.prototype.nh=function(){return this.ur},t.prototype.runTransaction=function(e,n,r){var i=this;Ke("IndexedDbPersistence","Starting transaction:",e);var o,u=n==="readonly"?"readonly":"readwrite";return this.Ef.runTransaction(u,Ck,function(h){return o=new Ak(h,i.Vf.next()),n==="readwrite-primary"?i.yf(h).next(function(f){return!!f||i.bf(h)}).next(function(f){if(!f)throw Gn("Failed to obtain primary lease for action '"+e+"'."),i.isPrimary=!1,i.$a.qr(function(){return i.lf(!1)}),new Ie(pe.FAILED_PRECONDITION,eF);return r(o)}).next(function(f){return i.Sf(h).next(function(){return f})}):i.Uf(h).next(function(){return r(o)})}).then(function(h){return o.or(),h})},t.prototype.Uf=function(e){var n=this;return gf(e).get(Di.key).next(function(r){if(r!==null&&n.Nf(r.leaseTimestampMs,5e3)&&!n.Mf(r.ownerId)&&!n.Df(r)&&!r.allowTabSynchronization)throw new Ie(pe.FAILED_PRECONDITION,Nk)})},t.prototype.Sf=function(e){var n=new Di(this.clientId,this.allowTabSynchronization,Date.now());return gf(e).put(Di.key,n)},t.Uc=function(){return kc.Uc()},t.qf=function(e){var n=e.cn.projectId;return e.cn.wi||(n+="."+e.cn.database),"firestore/"+e.persistenceKey+"/"+n+"/"},t.prototype.vf=function(e){var n=this,r=gf(e);return r.get(Di.key).next(function(i){return n.Df(i)?(Ke("IndexedDbPersistence","Releasing primary lease."),r.delete(Di.key)):Pe.resolve()})},t.prototype.Nf=function(e,n){var r=Date.now();return!(e<r-n||e>r&&(Gn("Detected an update time that is in the future: "+e+" > "+r),1))},t.prototype.Rf=function(){var e=this;this.document!==null&&typeof this.document.addEventListener=="function"&&(this.uf=function(){e.$a.qr(function(){return e.inForeground=e.document.visibilityState==="visible",e.If()})},this.document.addEventListener("visibilitychange",this.uf),this.inForeground=this.document.visibilityState==="visible")},t.prototype.Of=function(){this.uf&&(this.document.removeEventListener("visibilitychange",this.uf),this.uf=null)},t.prototype.Af=function(){var e=this;typeof this.window.addEventListener=="function"&&(this.af=function(){e.Lf(),e.$a.qr(function(){return e.lc()})},this.window.addEventListener("unload",this.af))},t.prototype.xf=function(){this.af&&(this.window.removeEventListener("unload",this.af),this.af=null)},t.prototype.Mf=function(e){try{var n=this.Tf.getItem(this.$f(e))!==null;return Ke("IndexedDbPersistence","Client '"+e+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(r){return Gn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}},t.prototype.Lf=function(){try{this.Tf.setItem(this.$f(this.clientId),String(Date.now()))}catch(e){Gn("Failed to set zombie client id.",e)}},t.prototype.Bf=function(){try{this.Tf.removeItem(this.$f(this.clientId))}catch{}},t.prototype.$f=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gf(t){return t.store(Di.store)}function Fg(t){return t.store(ps.store)}Si.ff="main";var h$=function(){function t(e,n){this.db=e,this.Qf=null,this.bo=new M7(this,n)}return t.prototype.Mo=function(e){var n=this.Wf(e);return this.db.eh().Ld(e).next(function(r){return n.next(function(i){return r+i})})},t.prototype.Wf=function(e){var n=0;return this.Oo(e,function(r){n++}).next(function(){return n})},t.prototype.Xs=function(e,n){return this.db.eh().Xs(e,n)},t.prototype.Oo=function(e,n){return this.jf(e,function(r,i){return n(i)})},t.prototype.Ho=function(e){this.Qf=e},t.prototype.vi=function(e,n){return jg(e,n)},t.prototype.Di=function(e,n){return jg(e,n)},t.prototype.xo=function(e,n,r){return this.db.eh().xo(e,n,r)},t.prototype.bd=function(e,n){return jg(e,n)},t.prototype.Kf=function(e,n){return this.Qf.Mi(n)?Pe.resolve(!0):function(r,i){var o=!1;return hv(r).wd(function(u){return bF(r,u,i).next(function(h){return h&&(o=!0),Pe.resolve(!h)})}).next(function(){return o})}(e,n)},t.prototype.Bo=function(e,n){var r=this,i=this.db.Zo().wh(),o=[],u=0;return this.jf(e,function(h,f){if(f<=n){var v=r.Kf(e,h).next(function(_){if(!_)return u++,i.tr(e,h).next(function(){return i.Zi(h),za(e).delete([0,$o(h.path)])})});o.push(v)}}).next(function(){return Pe.Ki(o)}).next(function(){return i.apply(e)}).next(function(){return u})},t.prototype.removeTarget=function(e,n){var r=n.es(e.Ch);return this.db.eh().Nh(e,r)},t.prototype.Fh=function(e,n){return jg(e,n)},t.prototype.jf=function(e,n){var r,i=za(e),o=zo.kr;return i.md({index:kr.documentTargetsIndex},function(u,h){var f=u[0],v=(u[1],h.path),_=h.sequenceNumber;f===0?(o!==zo.kr&&n(new ct(ta(r)),o),o=_,r=v):o=zo.kr}).next(function(){o!==zo.kr&&n(new ct(ta(r)),o)})},t.prototype.qo=function(e){return this.db.Zo().Jd(e)},t}();function jg(t,e){return za(t).put(function(n,r){return new kr(0,$o(n.path),r)}(e,t.Ch))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var f$=function(){function t(e,n){this.ur=e,this.Jo=n,this.ar=[],this.Gf=1,this.lastStreamToken=hr.xt,this.zf=new En(vr.we)}return t.prototype.Rd=function(e){return Pe.resolve(this.ar.length===0)},t.prototype.mh=function(e,n,r){var i=n.batchId,o=this.Hf(i,"acknowledged");return at(o===0,"Can only acknowledge the first batch in the mutation queue"),this.ar[o],this.lastStreamToken=r,Pe.resolve()},t.prototype.ph=function(e){return Pe.resolve(this.lastStreamToken)},t.prototype.yh=function(e,n){return this.lastStreamToken=n,Pe.resolve()},t.prototype.dh=function(e,n,r,i){var o=this.Gf;this.Gf++,this.ar.length>0&&this.ar[this.ar.length-1];var u=new LT(o,n,r,i);this.ar.push(u);for(var h=0,f=i;h<f.length;h++){var v=f[h];this.zf=this.zf.add(new vr(v.key,o)),this.ur.Vd(e,v.key.path.L())}return Pe.resolve(u)},t.prototype.Ph=function(e,n){return Pe.resolve(this.Jf(n))},t.prototype.Th=function(e,n){var r=this.Jf(n);return Pe.resolve(r.keys())},t.prototype.xh=function(e,n){var r=n+1,i=this.Yf(r),o=i<0?0:i;return Pe.resolve(this.ar.length>o?this.ar[o]:null)},t.prototype.gh=function(){return Pe.resolve(this.ar.length===0?-1:this.Gf-1)},t.prototype.hh=function(e){return Pe.resolve(this.ar.slice())},t.prototype._r=function(e,n){var r=this,i=new vr(n,0),o=new vr(n,Number.POSITIVE_INFINITY),u=[];return this.zf.Ct([i,o],function(h){var f=r.Jf(h.Li);u.push(f)}),Pe.resolve(u)},t.prototype.wr=function(e,n){var r=this,i=new En(kt);return n.forEach(function(o){var u=new vr(o,0),h=new vr(o,Number.POSITIVE_INFINITY);r.zf.Ct([u,h],function(f){i=i.add(f.Li)})}),Pe.resolve(this.Xf(i))},t.prototype.Vr=function(e,n){var r=n.path,i=r.length+1,o=r;ct.st(o)||(o=o.child(""));var u=new vr(new ct(o),0),h=new En(kt);return this.zf.kt(function(f){var v=f.key.path;return!!r.q(v)&&(v.length===i&&(h=h.add(f.Li)),!0)},u),Pe.resolve(this.Xf(h))},t.prototype.Xf=function(e){var n=this,r=[];return e.forEach(function(i){var o=n.Jf(i);o!==null&&r.push(o)}),r},t.prototype.Vh=function(e,n){var r=this;at(this.Hf(n.batchId,"removed")===0,"Can only remove the first entry of the mutation queue"),this.ar.shift();var i=this.zf;return Pe.forEach(n.mutations,function(o){var u=new vr(o.key,n.batchId);return i=i.delete(u),r.Jo.bd(e,o.key)}).next(function(){r.zf=i})},t.prototype.Xh=function(e){},t.prototype.Mi=function(e,n){var r=new vr(n,0),i=this.zf.Nt(r);return Pe.resolve(n.isEqual(i&&i.key))},t.prototype.Rh=function(e){return this.ar.length,Pe.resolve()},t.prototype.Hf=function(e,n){return this.Yf(e)},t.prototype.Yf=function(e){return this.ar.length===0?0:e-this.ar[0].batchId},t.prototype.Jf=function(e){var n=this.Yf(e);return n<0||n>=this.ar.length?null:this.ar[n]},t}(),xF=function(){function t(e,n){this.ur=e,this.Zf=n,this.docs=new ui(ct.F),this.size=0}return t.prototype.Yi=function(e,n,r){var i=n.key,o=this.docs.get(i),u=o?o.size:0,h=this.Zf(n);return this.docs=this.docs.it(i,{Ud:n,size:h,readTime:r}),this.size+=h-u,this.ur.Vd(e,i.path.L())},t.prototype.Zi=function(e){var n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)},t.prototype.tr=function(e,n){var r=this.docs.get(n);return Pe.resolve(r?r.Ud:null)},t.prototype.getEntries=function(e,n){var r=this,i=hm();return n.forEach(function(o){var u=r.docs.get(o);i=i.it(o,u?u.Ud:null)}),Pe.resolve(i)},t.prototype.Er=function(e,n,r){for(var i=kd(),o=new ct(n.path.child("")),u=this.docs.lt(o);u.It();){var h=u.Et(),f=h.key,v=h.value,_=v.Ud,b=v.readTime;if(!n.path.q(f.path))break;b.D(r)<=0||_ instanceof Gt&&n.matches(_)&&(i=i.it(_.key,_))}return Pe.resolve(i)},t.prototype.tT=function(e,n){return Pe.forEach(this.docs,function(r){return n(r)})},t.prototype.ea=function(e,n){throw new Error("getNewDocumentChanges() is not supported with MemoryPersistence")},t.prototype.na=function(e){return Pe.resolve(Nt.MIN)},t.prototype.wh=function(e){return new t.Hd(this)},t.prototype.Jd=function(e){return Pe.resolve(this.size)},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xF.Hd=function(t){function e(n){var r=this;return(r=t.call(this)||this).Yd=n,r}return Et(e,t),e.prototype.nr=function(n){var r=this,i=[];return this.zi.forEach(function(o,u){u?i.push(r.Yd.Yi(n,u,r.readTime)):r.Yd.Zi(o)}),Pe.Ki(i)},e.prototype.er=function(n,r){return this.Yd.tr(n,r)},e.prototype.sr=function(n,r){return this.Yd.getEntries(n,r)},e}(ZM);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var d$=function(){function t(e){this.persistence=e,this.eT=new _h(function(n){return n.canonicalId()}),this.lastRemoteSnapshotVersion=Nt.MIN,this.highestTargetId=0,this.sT=0,this.nT=new MT,this.targetCount=0,this.iT=gm.p_()}return t.prototype.Xs=function(e,n){return this.eT.forEach(function(r,i){return n(i)}),Pe.resolve()},t.prototype.bh=function(e){return Pe.resolve(this.lastRemoteSnapshotVersion)},t.prototype.Dd=function(e){return Pe.resolve(this.sT)},t.prototype.Qh=function(e){return this.highestTargetId=this.iT.next(),Pe.resolve(this.highestTargetId)},t.prototype.$h=function(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.sT&&(this.sT=n),Pe.resolve()},t.prototype.Cd=function(e){this.eT.set(e.target,e);var n=e.targetId;n>this.highestTargetId&&(this.iT=new gm(n),this.highestTargetId=n),e.sequenceNumber>this.sT&&(this.sT=e.sequenceNumber)},t.prototype.Wh=function(e,n){return this.Cd(n),this.targetCount+=1,Pe.resolve()},t.prototype.Nh=function(e,n){return this.Cd(n),Pe.resolve()},t.prototype.Nd=function(e,n){return this.eT.delete(n.target),this.nT.Ni(n.targetId),this.targetCount-=1,Pe.resolve()},t.prototype.xo=function(e,n,r){var i=this,o=0,u=[];return this.eT.forEach(function(h,f){f.sequenceNumber<=n&&r.get(f.targetId)===null&&(i.eT.delete(h),u.push(i.Fd(e,f.targetId)),o++)}),Pe.Ki(u).next(function(){return o})},t.prototype.Ld=function(e){return Pe.resolve(this.targetCount)},t.prototype.qh=function(e,n){var r=this.eT.get(n)||null;return Pe.resolve(r)},t.prototype.un=function(e,n){return We("Not yet implemented.")},t.prototype.Dh=function(e,n,r){this.nT.Si(n,r);var i=this.persistence.Jo,o=[];return i&&n.forEach(function(u){o.push(i.vi(e,u))}),Pe.Ki(o)},t.prototype.Sh=function(e,n,r){this.nT.ki(n,r);var i=this.persistence.Jo,o=[];return i&&n.forEach(function(u){o.push(i.Di(e,u))}),Pe.Ki(o)},t.prototype.Fd=function(e,n){return this.nT.Ni(n),Pe.resolve()},t.prototype.Gh=function(e,n){var r=this.nT.$i(n);return Pe.resolve(r)},t.prototype.Mi=function(e,n){return Pe.resolve(this.nT.Mi(n))},t}(),p$=function(){function t(e,n){var r=this;this.clientId=e,this.rT={},this.Vf=new zo(0),this.hf=!1,this.hf=!0,this.Jo=n(this),this.th=new d$(this),this.ur=new i$,this.hr=new xF(this.ur,function(i){return r.Jo.oT(i)})}return t.prototype.lc=function(){return this.hf=!1,Promise.resolve()},Object.defineProperty(t.prototype,"ko",{get:function(){return this.hf},enumerable:!0,configurable:!0}),t.prototype.Jh=function(){return Ee(this,void 0,void 0,function(){return we(this,function(e){return[2,[this.clientId]]})})},t.prototype.gf=function(e){return e(!0)},t.prototype.pf=function(){},t.prototype.Zh=function(e){},t.prototype.nh=function(){return this.ur},t.prototype.Yo=function(e){var n=this.rT[e.s()];return n||(n=new f$(this.ur,this.Jo),this.rT[e.s()]=n),n},t.prototype.eh=function(){return this.th},t.prototype.Zo=function(){return this.hr},t.prototype.runTransaction=function(e,n,r){var i=this;Ke("MemoryPersistence","Starting transaction:",e);var o=new g$(this.Vf.next());return this.Jo.hT(),r(o).next(function(u){return i.Jo.aT(o).next(function(){return u})}).Wi().then(function(u){return o.or(),u})},t.prototype.uT=function(e,n){return Pe.Gi(Object.values(this.rT).map(function(r){return function(){return r.Mi(e,n)}}))},t}(),g$=function(t){function e(n){var r=this;return(r=t.call(this)||this).Ch=n,r}return Et(e,t),e}(tF),v$=function(){function t(e){this.persistence=e,this.Qf=null,this.cT=null}return t._T=function(e){return new t(e)},Object.defineProperty(t.prototype,"lT",{get:function(){if(this.cT)return this.cT;throw We("orphanedDocuments is only valid during a transaction.")},enumerable:!0,configurable:!0}),t.prototype.Ho=function(e){this.Qf=e},t.prototype.vi=function(e,n){return this.lT.delete(n),Pe.resolve()},t.prototype.Di=function(e,n){return this.lT.add(n),Pe.resolve()},t.prototype.bd=function(e,n){return this.lT.add(n),Pe.resolve()},t.prototype.removeTarget=function(e,n){var r=this,i=this.persistence.eh();return i.Gh(e,n.targetId).next(function(o){o.forEach(function(u){return r.lT.add(u)})}).next(function(){return i.Nd(e,n)})},t.prototype.hT=function(){this.cT=new Set},t.prototype.aT=function(e){var n=this,r=this.persistence.Zo().wh();return Pe.forEach(this.lT,function(i){return n.dT(e,i).next(function(o){o||r.Zi(i)})}).next(function(){return n.cT=null,r.apply(e)})},t.prototype.Fh=function(e,n){var r=this;return this.dT(e,n).next(function(i){i?r.lT.delete(n):r.lT.add(n)})},t.prototype.oT=function(e){return 0},t.prototype.dT=function(e,n){var r=this;return Pe.Gi([function(){return r.persistence.eh().Mi(e,n)},function(){return r.persistence.uT(e,n)},function(){return Pe.resolve(r.Qf.Mi(n))}])},t}(),m$=function(){function t(){}return t.prototype.initialize=function(e,n,r,i,o,u,h,f){return Ee(this,void 0,void 0,function(){var v,_,b,S,I=this;return we(this,function(M){switch(M.label){case 0:if(v=Si.qf(n),_=r.fT(n.cn),!Ek.Uc(r))throw new Ie(pe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return this.X_=f.synchronizeTabs?new Ek(e,r,v,o,u):new gF,this.X_.$u=function(D){return I.mc.B_(D,1)},b=this,[4,Si.mf({allowTabSynchronization:f.synchronizeTabs,persistenceKey:v,clientId:o,platform:r,$a:e,serializer:_,wf:Qn.Io(f.cacheSizeBytes),rf:this.X_})];case 1:return b.persistence=M.sent(),S=this.persistence.Jo.bo,this.TT=new L7(S,e),this.Wu=new FT(this.persistence,new EF,u),this.W_=new pF(this.Wu,i,e,function(D){return I.mc.B_(D,0)},r.mT()),this.mc=new _F(this.Wu,this.W_,this.X_,u,h),this.wT=new wF(this.mc),this.W_.mc=this.mc,this.X_.mc=this.mc,[4,this.X_.start()];case 2:return M.sent(),[4,this.W_.start()];case 3:return M.sent(),[4,this.Wu.start()];case 4:return M.sent(),[4,this.persistence.gf(function(D){return Ee(I,void 0,void 0,function(){return we(this,function(ne){switch(ne.label){case 0:return[4,this.mc.Cc(D)];case 1:return ne.sent(),D&&!this.TT.ko?this.TT.start(this.Wu):D||this.TT.stop(),[2]}})})})];case 5:return M.sent(),[2]}})})},t.prototype.clearPersistence=function(e){var n=Si.qf(e);return Si.clearPersistence(n)},t}(),kk="You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.",ES=function(){function t(e){e===void 0&&(e=v$._T),this.ET=e}return t.prototype.initialize=function(e,n,r,i,o,u,h,f){return Ee(this,void 0,void 0,function(){var v=this;return we(this,function(_){switch(_.label){case 0:if(f.IT)throw new Ie(pe.FAILED_PRECONDITION,kk);return this.persistence=new p$(o,this.ET),this.TT=null,this.X_=new gF,this.Wu=new FT(this.persistence,new EF,u),this.W_=new pF(this.Wu,i,e,function(b){return v.mc.B_(b,0)},r.mT()),this.mc=new _F(this.Wu,this.W_,this.X_,u,h),this.wT=new wF(this.mc),this.W_.mc=this.mc,[4,this.W_.start()];case 1:return _.sent(),[4,this.W_.Cc(!0)];case 2:return _.sent(),[4,this.mc.Cc(!0)];case 3:return _.sent(),[2]}})})},t.prototype.clearPersistence=function(){throw new Ie(pe.FAILED_PRECONDITION,kk)},t}(),y$=function(){function t(e,n,r,i){this.platform=e,this.RT=n,this.credentials=r,this.Nr=i,this.clientId=XM.mi()}return t.prototype.start=function(e,n){var r=this;this.AT();var i=new Ba,o=new Ba,u=!1;return this.credentials.l(function(h){if(!u)return u=!0,Ke("FirestoreClient","Initializing. user=",h.uid),r.PT(e,n,h,o).then(i.resolve,i.reject);r.Nr.qr(function(){return r.Dc(h)})}),this.Nr.qr(function(){return i.promise}),o.promise},t.prototype.enableNetwork=function(){var e=this;return this.AT(),this.Nr.enqueue(function(){return e.mc.enableNetwork()})},t.prototype.PT=function(e,n,r,i){return Ee(this,void 0,void 0,function(){var o,u,h,f,v=this;return we(this,function(_){switch(_.label){case 0:return _.trys.push([0,3,,4]),[4,this.platform.VT(this.RT)];case 1:return o=_.sent(),u=this.platform.fT(this.RT.cn),h=new W7(this.Nr,o,this.credentials,u),[4,e.initialize(this.Nr,this.RT,this.platform,h,this.clientId,r,100,n)];case 2:return _.sent(),this.persistence=e.persistence,this.X_=e.X_,this.Wu=e.Wu,this.W_=e.W_,this.mc=e.mc,this.TT=e.TT,this.gT=e.wT,this.persistence.pf(function(){return Ee(v,void 0,void 0,function(){return we(this,function(b){switch(b.label){case 0:return[4,this.terminate()];case 1:return b.sent(),[2]}})})}),i.resolve(),[3,4];case 3:if(f=_.sent(),i.reject(f),!this.pT(f))throw f;return[2,(console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+f),this.PT(new ES,{IT:!1},r,i))];case 4:return[2]}})})},t.prototype.pT=function(e){return e.name==="FirebaseError"?e.code===pe.FAILED_PRECONDITION||e.code===pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11},t.prototype.AT=function(){if(this.Nr.Hr)throw new Ie(pe.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.Dc=function(e){return this.Nr.no(),Ke("FirestoreClient","Credential Changed. Current user: "+e.uid),this.mc.Dc(e)},t.prototype.disableNetwork=function(){var e=this;return this.AT(),this.Nr.enqueue(function(){return e.mc.disableNetwork()})},t.prototype.terminate=function(){var e=this;return this.Nr.to(function(){return Ee(e,void 0,void 0,function(){return we(this,function(n){switch(n.label){case 0:return this.TT&&this.TT.stop(),[4,this.W_.lc()];case 1:return n.sent(),[4,this.X_.lc()];case 2:return n.sent(),[4,this.persistence.lc()];case 3:return n.sent(),this.credentials.T(),[2]}})})})},t.prototype.waitForPendingWrites=function(){var e=this;this.AT();var n=new Ba;return this.Nr.qr(function(){return e.mc.Pl(n)}),n.promise},t.prototype.listen=function(e,n,r){var i=this;this.AT();var o=new J7(e,n,r);return this.Nr.qr(function(){return i.gT.listen(o)}),o},t.prototype.fc=function(e){var n=this;this.yT||this.Nr.qr(function(){return n.gT.fc(e)})},t.prototype.bT=function(e){var n=this;return this.AT(),this.Nr.enqueue(function(){return n.Wu.Bh(e)}).then(function(r){if(r instanceof Gt)return r;if(r instanceof br)return null;throw new Ie(pe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")})},t.prototype.vT=function(e){var n=this;return this.AT(),this.Nr.enqueue(function(){return Ee(n,void 0,void 0,function(){var r,i,o;return we(this,function(u){switch(u.label){case 0:return[4,this.Wu.Kh(e,!0)];case 1:return r=u.sent(),i=new yF(e,r.zh),o=i.k_(r.documents),[2,i.nr(o,!1).snapshot]}})})})},t.prototype.write=function(e){var n=this;this.AT();var r=new Ba;return this.Nr.qr(function(){return n.mc.write(e,r)}),r.promise},t.prototype.cn=function(){return this.RT.cn},t.prototype.Ol=function(e){var n=this;this.AT(),this.Nr.qr(function(){return n.gT.Ol(e),Promise.resolve()})},t.prototype.xl=function(e){this.yT||this.gT.xl(e)},Object.defineProperty(t.prototype,"yT",{get:function(){return this.Nr.Hr},enumerable:!0,configurable:!0}),t.prototype.transaction=function(e){var n=this;this.AT();var r=new Ba;return this.Nr.qr(function(){return n.mc.runTransaction(n.Nr,e,r),Promise.resolve()}),r.promise},t}(),zT=function(){function t(e){this.observer=e,this.muted=!1}return t.prototype.next=function(e){this.ST(this.observer.next,e)},t.prototype.error=function(e){this.ST(this.observer.error,e)},t.prototype.DT=function(){this.muted=!0},t.prototype.ST=function(e,n){var r=this;this.muted||setTimeout(function(){r.muted||e(n)},0)},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rd(t){return function(e,n){if(typeof e!="object"||e===null)return!1;for(var r=e,i=0,o=["next","error","complete"];i<o.length;i++){var u=o[i];if(u in r&&typeof r[u]=="function")return!0}return!1}(t)}var Pk=function(){function t(e,n,r,i){this.firestore=e,this.timestampsInSnapshots=n,this.CT=r,this.converter=i}return t.prototype.kT=function(e){switch(fa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _r(e.integerValue||e.doubleValue);case 3:return this.NT(e.timestampValue);case 4:return this.FT(e);case 5:return e.stringValue;case 6:return new Iy(ih(e.bytesValue));case 7:return this.$T(e.referenceValue);case 8:return new Cy(e.geoPointValue.latitude,e.geoPointValue.longitude);case 9:return this.MT(e.arrayValue);case 10:return this.LT(e.mapValue);default:throw We("Invalid value type: "+JSON.stringify(e))}},t.prototype.LT=function(e){var n=this,r={};return fl(e.fields||{},function(i,o){r[i]=n.kT(o)}),r},t.prototype.MT=function(e){var n=this;return(e.values||[]).map(function(r){return n.kT(r)})},t.prototype.FT=function(e){switch(this.CT){case"previous":var n=function r(i){var o=i.mapValue.fields.__previous_value__;return kT(o)?r(o):o}(e);return n==null?null:this.kT(n);case"estimate":return this.NT(Id(e));default:return null}},t.prototype.NT=function(e){var n=cu(e),r=new xi(n.seconds,n.nanos);return this.timestampsInSnapshots?r:r.toDate()},t.prototype.$T=function(e){var n=dn.G(e);at(YM(n),"ReferenceValue is not valid "+e);var r=new yS(n.get(1),n.get(3)),i=new ct(n.M(5));return r.isEqual(this.firestore.OT)||Gn("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+this.firestore.OT.projectId+"/"+this.firestore.OT.database+") instead."),new da(i,this.firestore,this.converter)},t}(),NF=Qn.Po,Rk=function(){function t(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ie(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else nF("settings","non-empty string","host",e.host),this.host=e.host,$s("settings","boolean","ssl",e.ssl),this.ssl=(n=e.ssl)===null||n===void 0||n;if(kl("settings",e,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling"]),$s("settings","object","credentials",e.credentials),this.credentials=e.credentials,$s("settings","boolean","timestampsInSnapshots",e.timestampsInSnapshots),e.timestampsInSnapshots===!0?Gn("The setting 'timestampsInSnapshots: true' is no longer required and should be removed."):e.timestampsInSnapshots===!1&&Gn("Support for 'timestampsInSnapshots: false' will be removed soon. You must update your code to handle Timestamp objects."),this.timestampsInSnapshots=(r=e.timestampsInSnapshots)===null||r===void 0||r,$s("settings","number","cacheSizeBytes",e.cacheSizeBytes),e.cacheSizeBytes===void 0)this.cacheSizeBytes=Qn.po;else{if(e.cacheSizeBytes!==NF&&e.cacheSizeBytes<Qn.Vo)throw new Ie(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+Qn.Vo);this.cacheSizeBytes=e.cacheSizeBytes}$s("settings","boolean","experimentalForceLongPolling",e.experimentalForceLongPolling),this.forceLongPolling=e.experimentalForceLongPolling!==void 0&&e.experimentalForceLongPolling}return t.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.timestampsInSnapshots===e.timestampsInSnapshots&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.forceLongPolling===e.forceLongPolling},t}(),qT=function(){function t(e,n,r){var i=this;if(r===void 0&&(r=new ES),this.xT=null,this.BT=new O7,this.INTERNAL={delete:function(){return Ee(i,void 0,void 0,function(){return we(this,function(h){switch(h.label){case 0:return this.UT(),[4,this.qT.terminate()];case 1:return h.sent(),[2]}})})}},typeof e.options=="object"){var o=e;this.xT=o,this.OT=t.QT(o),this.WT=o.name,this.jT=new a7(n)}else{var u=e;if(!u.projectId)throw new Ie(pe.INVALID_ARGUMENT,"Must provide projectId");this.OT=new yS(u.projectId,u.database),this.WT="[DEFAULT]",this.jT=new Z2}this.KT=r,this.GT=new Rk({}),this.zT=this.HT(this.OT)}return t.prototype.settings=function(e){mn("Firestore.settings",arguments,1),Vn("Firestore.settings","object",1,e);var n=new Rk(e);if(this.qT&&!this.GT.isEqual(n))throw new Ie(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this.GT=n,n.credentials!==void 0&&(this.jT=function(r){if(!r)return new Z2;switch(r.type){case"gapi":var i=r.JT;return at(!(typeof i!="object"||i===null||!i.auth||!i.auth.getAuthHeaderValueForFirstParty),"unexpected gapi interface"),new l7(i,r.V||"0");case"provider":return r.JT;default:throw new Ie(pe.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(n.credentials))},t.prototype.enableNetwork=function(){return this.UT(),this.qT.enableNetwork()},t.prototype.disableNetwork=function(){return this.UT(),this.qT.disableNetwork()},t.prototype.enablePersistence=function(e){var n,r;if(this.qT)throw new Ie(pe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var i=!1;return e&&(e.experimentalTabSynchronization!==void 0&&Gn("The 'experimentalTabSynchronization' setting will be removed. Use 'synchronizeTabs' instead."),i=(r=(n=e.synchronizeTabs)!==null&&n!==void 0?n:e.experimentalTabSynchronization)!==null&&r!==void 0&&r),this.YT(this.KT,{IT:!0,cacheSizeBytes:this.GT.cacheSizeBytes,synchronizeTabs:i})},t.prototype.clearPersistence=function(){return Ee(this,void 0,void 0,function(){var e,n=this;return we(this,function(r){if(this.qT!==void 0&&!this.qT.yT)throw new Ie(pe.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return e=new Ba,[2,(this.BT.Jr(function(){return Ee(n,void 0,void 0,function(){var i,o;return we(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),i=this.XT(),[4,this.KT.clearPersistence(i)];case 1:return u.sent(),e.resolve(),[3,3];case 2:return o=u.sent(),e.reject(o),[3,3];case 3:return[2]}})})}),e.promise)]})})},t.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(t.prototype,"ZT",{get:function(){return this.UT(),this.qT.yT},enumerable:!0,configurable:!0}),t.prototype.waitForPendingWrites=function(){return this.UT(),this.qT.waitForPendingWrites()},t.prototype.onSnapshotsInSync=function(e){if(this.UT(),Rd(e))return this.tm(e);Vn("Firestore.onSnapshotsInSync","function",1,e);var n={next:e};return this.tm(n)},t.prototype.tm=function(e){var n=this,r=new zT({next:function(){e.next&&e.next()},error:function(i){throw We("Uncaught Error in onSnapshotsInSync")}});return this.qT.Ol(r),function(){r.DT(),n.qT.xl(r)}},t.prototype.UT=function(){return this.qT||this.YT(new ES,{IT:!1}),this.qT},t.prototype.XT=function(){return new A7(this.OT,this.WT,this.GT.host,this.GT.ssl,this.GT.forceLongPolling)},t.prototype.YT=function(e,n){var r=this.XT();return this.qT=new y$(vl.Lt(),r,this.jT,this.BT),this.qT.start(e,n)},t.prototype.HT=function(e){var n=new KM(e,{dn:vl.Lt().dn});return new B7(n,function(r){if(r instanceof da){var i=e,o=r.firestore.OT;if(!o.isEqual(i))throw new Ie(pe.INVALID_ARGUMENT,"Document reference is for database "+o.projectId+"/"+o.database+" but should be for database "+i.projectId+"/"+i.database);return new jT(e,r.em)}return r})},t.QT=function(e){if(n=e.options,!Object.prototype.hasOwnProperty.call(n,"projectId"))throw new Ie(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n,r=e.options.projectId;if(!r||typeof r!="string")throw new Ie(pe.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new yS(r)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.xT)throw new Ie(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.xT},enumerable:!0,configurable:!0}),t.prototype.collection=function(e){return mn("Firestore.collection",arguments,1),Vn("Firestore.collection","non-empty string",1,e),this.UT(),new ym(dn.G(e),this)},t.prototype.doc=function(e){return mn("Firestore.doc",arguments,1),Vn("Firestore.doc","non-empty string",1,e),this.UT(),da.sm(dn.G(e),this)},t.prototype.collectionGroup=function(e){if(mn("Firestore.collectionGroup",arguments,1),Vn("Firestore.collectionGroup","non-empty string",1,e),e.indexOf("/")>=0)throw new Ie(pe.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.UT(),new xy(new gl(dn.H,e),this)},t.prototype.runTransaction=function(e){var n=this;return mn("Firestore.runTransaction",arguments,1),Vn("Firestore.runTransaction","function",1,e),this.UT().transaction(function(r){return e(new AF(n,r))})},t.prototype.batch=function(){return this.UT(),new kF(this)},Object.defineProperty(t,"logLevel",{get:function(){switch(dm()){case yt.DEBUG:return"debug";case yt.SILENT:return"silent";default:return"error"}},enumerable:!0,configurable:!0}),t.setLogLevel=function(e){switch(mn("Firestore.setLogLevel",arguments,1),Vn("Firestore.setLogLevel","non-empty string",1,e),e){case"debug":eE(yt.DEBUG);break;case"error":eE(yt.ERROR);break;case"silent":eE(yt.SILENT);break;default:throw new Ie(pe.INVALID_ARGUMENT,"Invalid log level: "+e)}},t.prototype.nm=function(){return this.GT.timestampsInSnapshots},t}(),AF=function(){function t(e,n){this.im=e,this.rm=n}return t.prototype.get=function(e){var n=this;mn("Transaction.get",arguments,1);var r=Hs("Transaction.get",e,this.im);return this.rm.pu([r.em]).then(function(i){if(!i||i.length!==1)return We("Mismatch in docs returned from document lookup.");var o=i[0];if(o instanceof br)return new yl(n.im,r.em,null,!1,!1,r.om);if(o instanceof Gt)return new yl(n.im,r.em,o,!1,!1,r.om);throw We("BatchGetDocumentsRequest returned unexpected document type: "+o.constructor.name)})},t.prototype.set=function(e,n,r){po("Transaction.set",arguments,2,3);var i=Hs("Transaction.set",e,this.im);r=WT("Transaction.set",r);var o=GT(i.om,n,"Transaction.set"),u=o[0],h=o[1],f=r.merge||r.mergeFields?this.im.zT.pa(h,u,r.mergeFields):this.im.zT.Va(h,u);return this.rm.set(i.em,f),this},t.prototype.update=function(e,n,r){for(var i,o,u=[],h=3;h<arguments.length;h++)u[h-3]=arguments[h];return typeof n=="string"||n instanceof Qo?(ea("Transaction.update",arguments,3),i=Hs("Transaction.update",e,this.im),o=this.im.zT.Sa("Transaction.update",n,r,u)):(mn("Transaction.update",arguments,2),i=Hs("Transaction.update",e,this.im),o=this.im.zT.ya("Transaction.update",n)),this.rm.update(i.em,o),this},t.prototype.delete=function(e){mn("Transaction.delete",arguments,1);var n=Hs("Transaction.delete",e,this.im);return this.rm.delete(n.em),this},t}(),kF=function(){function t(e){this.im=e,this.hm=[],this.am=!1}return t.prototype.set=function(e,n,r){po("WriteBatch.set",arguments,2,3),this.um();var i=Hs("WriteBatch.set",e,this.im);r=WT("WriteBatch.set",r);var o=GT(i.om,n,"WriteBatch.set"),u=o[0],h=o[1],f=r.merge||r.mergeFields?this.im.zT.pa(h,u,r.mergeFields):this.im.zT.Va(h,u);return this.hm=this.hm.concat(f.da(i.em,Er.NONE)),this},t.prototype.update=function(e,n,r){for(var i,o,u=[],h=3;h<arguments.length;h++)u[h-3]=arguments[h];return this.um(),typeof n=="string"||n instanceof Qo?(ea("WriteBatch.update",arguments,3),i=Hs("WriteBatch.update",e,this.im),o=this.im.zT.Sa("WriteBatch.update",n,r,u)):(mn("WriteBatch.update",arguments,2),i=Hs("WriteBatch.update",e,this.im),o=this.im.zT.ya("WriteBatch.update",n)),this.hm=this.hm.concat(o.da(i.em,Er.exists(!0))),this},t.prototype.delete=function(e){mn("WriteBatch.delete",arguments,1),this.um();var n=Hs("WriteBatch.delete",e,this.im);return this.hm=this.hm.concat(new Nd(n.em,Er.NONE)),this},t.prototype.commit=function(){return this.um(),this.am=!0,this.hm.length>0?this.im.UT().write(this.hm):Promise.resolve()},t.prototype.um=function(){if(this.am)throw new Ie(pe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),da=function(){function t(e,n,r){this.em=e,this.firestore=n,this.om=r,this.qT=this.firestore.UT()}return t.sm=function(e,n,r){if(e.length%2!=0)throw new Ie(pe.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.K()+" has "+e.length);return new t(new ct(e),n,r)},Object.defineProperty(t.prototype,"id",{get:function(){return this.em.path.B()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new ym(this.em.path.L(),this.firestore,this.om)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.em.path.K()},enumerable:!0,configurable:!0}),t.prototype.collection=function(e){if(mn("DocumentReference.collection",arguments,1),Vn("DocumentReference.collection","non-empty string",1,e),!e)throw new Ie(pe.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var n=dn.G(e);return new ym(this.em.path.child(n),this.firestore)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw Pl("isEqual","DocumentReference",1,e);return this.firestore===e.firestore&&this.em.isEqual(e.em)&&this.om===e.om},t.prototype.set=function(e,n){po("DocumentReference.set",arguments,1,2),n=WT("DocumentReference.set",n);var r=GT(this.om,e,"DocumentReference.set"),i=r[0],o=r[1],u=n.merge||n.mergeFields?this.firestore.zT.pa(o,i,n.mergeFields):this.firestore.zT.Va(o,i);return this.qT.write(u.da(this.em,Er.NONE))},t.prototype.update=function(e,n){for(var r,i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];return typeof e=="string"||e instanceof Qo?(ea("DocumentReference.update",arguments,2),r=this.firestore.zT.Sa("DocumentReference.update",e,n,i)):(mn("DocumentReference.update",arguments,1),r=this.firestore.zT.ya("DocumentReference.update",e)),this.qT.write(r.da(this.em,Er.exists(!0)))},t.prototype.delete=function(){return mn("DocumentReference.delete",arguments,0),this.qT.write([new Nd(this.em,Er.NONE)])},t.prototype.onSnapshot=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];po("DocumentReference.onSnapshot",arguments,1,4);var r,i={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||Rd(e[o])||(kl("DocumentReference.onSnapshot",i=e[o],["includeMetadataChanges"]),$s("DocumentReference.onSnapshot","boolean","includeMetadataChanges",i.includeMetadataChanges),o++);var u={includeMetadataChanges:i.includeMetadataChanges};return Rd(e[o])?r=e[o]:(Vn("DocumentReference.onSnapshot","function",o,e[o]),Bc("DocumentReference.onSnapshot","function",o+1,e[o+1]),Bc("DocumentReference.onSnapshot","function",o+2,e[o+2]),r={next:e[o],error:e[o+1],complete:e[o+2]}),this.cm(u,r)},t.prototype.cm=function(e,n){var r=this,i=function(h){console.error("Uncaught Error in onSnapshot:",h)};n.error&&(i=n.error.bind(n));var o=new zT({next:function(h){if(n.next){var f=h.docs.get(r.em);n.next(new yl(r.firestore,r.em,f,h.fromCache,h.hasPendingWrites,r.om))}},error:i}),u=this.qT.listen(gl.ve(this.em.path),o,e);return function(){o.DT(),r.qT.fc(u)}},t.prototype.get=function(e){var n=this;return po("DocumentReference.get",arguments,0,1),RF("DocumentReference.get",e),new Promise(function(r,i){e&&e.source==="cache"?n.firestore.UT().bT(n.em).then(function(o){r(new yl(n.firestore,n.em,o,!0,o instanceof Gt&&o.te,n.om))},i):n._m(r,i,e)})},t.prototype._m=function(e,n,r){var i=this.cm({includeMetadataChanges:!0,Kl:!0},{next:function(o){i(),!o.exists&&o.metadata.fromCache?n(new Ie(pe.UNAVAILABLE,"Failed to get document because the client is offline.")):o.exists&&o.metadata.fromCache&&r&&r.source==="server"?n(new Ie(pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):e(o)},error:n})},t.prototype.withConverter=function(e){return new t(this.em,this.firestore,e)},t}(),PF=function(){function t(e,n){this.hasPendingWrites=e,this.fromCache=n}return t.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},t}(),yl=function(){function t(e,n,r,i,o,u){this.im=e,this.em=n,this.lm=r,this.dm=i,this.fm=o,this.om=u}return t.prototype.data=function(e){if(po("DocumentSnapshot.data",arguments,0,1),e=Ok("DocumentSnapshot.data",e),this.lm){if(this.om){var n=new qf(this.im,this.em,this.lm,this.dm,this.fm);return this.om.fromFirestore(n,e)}return new Pk(this.im,this.im.nm(),e.serverTimestamps,void 0).kT(this.lm.Ie())}},t.prototype.get=function(e,n){if(po("DocumentSnapshot.get",arguments,1,2),n=Ok("DocumentSnapshot.get",n),this.lm){var r=this.lm.data().field(Pd("DocumentSnapshot.get",e));if(r!==null)return new Pk(this.im,this.im.nm(),n.serverTimestamps,this.om).kT(r)}},Object.defineProperty(t.prototype,"id",{get:function(){return this.em.path.B()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new da(this.em,this.im,this.om)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this.lm!==null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new PF(this.fm,this.dm)},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){if(!(e instanceof t))throw Pl("isEqual","DocumentSnapshot",1,e);return this.im===e.im&&this.dm===e.dm&&this.em.isEqual(e.em)&&(this.lm===null?e.lm===null:this.lm.isEqual(e.lm))&&this.om===e.om},t}(),qf=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return Et(e,t),e.prototype.data=function(n){return t.prototype.data.call(this,n)},e}(yl),xy=function(){function t(e,n,r){this.Tm=e,this.firestore=n,this.om=r}return t.prototype.where=function(e,n,r){var i;mn("Query.where",arguments,3),fk("Query.where",3,r),function(S,I,M,D){if(!I.some(function(ne){return ne===D}))throw new Ie(pe.INVALID_ARGUMENT,"Invalid value "+bs(D)+" provided to function Query.where() for its "+up(2)+" argument. Acceptable values: "+I.join(", "))}(0,["<","<=","==",">=",">","array-contains","in","array-contains-any"],0,n);var o=Pd("Query.where",e),u=Qe.G(n);if(o.Y()){if(u===Qe.ARRAY_CONTAINS||u===Qe.ARRAY_CONTAINS_ANY)throw new Ie(pe.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+u.toString()+"' queries on FieldPath.documentId().");if(u===Qe.IN){this.mm(r,u);for(var h=[],f=0,v=r;f<v.length;f++){var _=v[f];h.push(this.wm(_))}i={arrayValue:{values:h}}}else i=this.wm(r)}else u!==Qe.IN&&u!==Qe.ARRAY_CONTAINS_ANY||this.mm(r,u),i=this.firestore.zT.Da("Query.where",r,u===Qe.IN);var b=Bi.create(o,u,i);return this.Em(b),new t(this.Tm.Ce(b),this.firestore,this.om)},t.prototype.orderBy=function(e,n){var r;if(po("Query.orderBy",arguments,1,2),Bc("Query.orderBy","non-empty string",2,n),n===void 0||n==="asc")r=qn.ASCENDING;else{if(n!=="desc")throw new Ie(pe.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r=qn.DESCENDING}if(this.Tm.startAt!==null)throw new Ie(pe.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(this.Tm.endAt!==null)throw new Ie(pe.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var i=Pd("Query.orderBy",e),o=new sh(i,r);return this.Im(o),new t(this.Tm.ke(o),this.firestore,this.om)},t.prototype.limit=function(e){return mn("Query.limit",arguments,1),Vn("Query.limit","number",1,e),dk("Query.limit",1,e),new t(this.Tm.Ne(e),this.firestore,this.om)},t.prototype.limitToLast=function(e){return mn("Query.limitToLast",arguments,1),Vn("Query.limitToLast","number",1,e),dk("Query.limitToLast",1,e),new t(this.Tm.Fe(e),this.firestore,this.om)},t.prototype.startAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];ea("Query.startAt",arguments,1);var i=this.Rm("Query.startAt",e,n,!0);return new t(this.Tm.$e(i),this.firestore,this.om)},t.prototype.startAfter=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];ea("Query.startAfter",arguments,1);var i=this.Rm("Query.startAfter",e,n,!1);return new t(this.Tm.$e(i),this.firestore,this.om)},t.prototype.endBefore=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];ea("Query.endBefore",arguments,1);var i=this.Rm("Query.endBefore",e,n,!0);return new t(this.Tm.Me(i),this.firestore,this.om)},t.prototype.endAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];ea("Query.endAt",arguments,1);var i=this.Rm("Query.endAt",e,n,!1);return new t(this.Tm.Me(i),this.firestore,this.om)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw Pl("isEqual","Query",1,e);return this.firestore===e.firestore&&this.Tm.isEqual(e.Tm)},t.prototype.withConverter=function(e){return new t(this.Tm,this.firestore,e)},t.prototype.Rm=function(e,n,r,i){if(fk(e,1,n),n instanceof yl){if(r.length>0)throw new Ie(pe.INVALID_ARGUMENT,"Too many arguments provided to "+e+"().");var o=n;if(!o.exists)throw new Ie(pe.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+e+"().");return this.Am(o.lm,i)}var u=[n].concat(r);return this.Pm(e,u,i)},t.prototype.Am=function(e,n){for(var r=[],i=0,o=this.Tm.orderBy;i<o.length;i++){var u=o[i];if(u.field.Y())r.push(Dg(this.firestore.OT,e.key));else{var h=e.field(u.field);if(kT(h))throw new Ie(pe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){var f=u.field.K();throw new Ie(pe.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+f+"' (used as the orderBy) does not exist.")}r.push(h)}}return new Ad(r,n)},t.prototype.Pm=function(e,n,r){var i=this.Tm.Ve;if(n.length>i.length)throw new Ie(pe.INVALID_ARGUMENT,"Too many arguments provided to "+e+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var o=[],u=0;u<n.length;u++){var h=n[u];if(i[u].field.Y()){if(typeof h!="string")throw new Ie(pe.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+e+"(), but got a "+typeof h);if(!this.Tm.He()&&h.indexOf("/")!==-1)throw new Ie(pe.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+e+"() must be a plain document ID, but '"+h+"' contains a slash.");var f=this.Tm.path.child(dn.G(h));if(!ct.st(f))throw new Ie(pe.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+e+"() must result in a valid document path, but '"+f+"' is not because it contains an odd number of segments.");var v=new ct(f);o.push(Dg(this.firestore.OT,v))}else{var _=this.firestore.zT.Da(e,h);o.push(_)}}return new Ad(o,r)},t.prototype.onSnapshot=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];po("Query.onSnapshot",arguments,1,4);var r,i={},o=0;return typeof e[o]!="object"||Rd(e[o])||(kl("Query.onSnapshot",i=e[o],["includeMetadataChanges"]),$s("Query.onSnapshot","boolean","includeMetadataChanges",i.includeMetadataChanges),o++),Rd(e[o])?r=e[o]:(Vn("Query.onSnapshot","function",o,e[o]),Bc("Query.onSnapshot","function",o+1,e[o+1]),Bc("Query.onSnapshot","function",o+2,e[o+2]),r={next:e[o],error:e[o+1],complete:e[o+2]}),this.Vm(this.Tm),this.cm(i,r)},t.prototype.cm=function(e,n){var r=this,i=function(f){console.error("Uncaught Error in onSnapshot:",f)};n.error&&(i=n.error.bind(n));var o=new zT({next:function(f){n.next&&n.next(new SS(r.firestore,r.Tm,f,r.om))},error:i}),u=this.firestore.UT(),h=u.listen(this.Tm,o,e);return function(){o.DT(),u.fc(h)}},t.prototype.Vm=function(e){if(e.Ke()&&e.Ve.length===0)throw new Ie(pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")},t.prototype.get=function(e){var n=this;return po("Query.get",arguments,0,1),RF("Query.get",e),this.Vm(this.Tm),new Promise(function(r,i){e&&e.source==="cache"?n.firestore.UT().vT(n.Tm).then(function(o){r(new SS(n.firestore,n.Tm,o,n.om))},i):n._m(r,i,e)})},t.prototype._m=function(e,n,r){var i=this.cm({includeMetadataChanges:!0,Kl:!0},{next:function(o){i(),o.metadata.fromCache&&r&&r.source==="server"?n(new Ie(pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):e(o)},error:n})},t.prototype.wm=function(e){if(typeof e=="string"){if(e==="")throw new Ie(pe.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this.Tm.He()&&e.indexOf("/")!==-1)throw new Ie(pe.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+e+"' contains a '/' character.");var n=this.Tm.path.child(dn.G(e));if(!ct.st(n))throw new Ie(pe.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+n+"' is not because it has an odd number of segments ("+n.length+").");return Dg(this.firestore.OT,new ct(n))}if(e instanceof da){var r=e;return Dg(this.firestore.OT,r.em)}throw new Ie(pe.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+bs(e)+".")},t.prototype.mm=function(e,n){if(!Array.isArray(e)||e.length===0)throw new Ie(pe.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+n.toString()+"' filters.");if(e.length>10)throw new Ie(pe.INVALID_ARGUMENT,"Invalid Query. '"+n.toString()+"' filters support a maximum of 10 elements in the value array.");if(e.indexOf(null)>=0)throw new Ie(pe.INVALID_ARGUMENT,"Invalid Query. '"+n.toString()+"' filters cannot contain 'null' in the value array.");if(e.filter(function(r){return Number.isNaN(r)}).length>0)throw new Ie(pe.INVALID_ARGUMENT,"Invalid Query. '"+n.toString()+"' filters cannot contain 'NaN' in the value array.")},t.prototype.Em=function(e){if(e instanceof Bi){var n=[Qe.ARRAY_CONTAINS,Qe.ARRAY_CONTAINS_ANY],r=[Qe.IN,Qe.ARRAY_CONTAINS_ANY],i=n.indexOf(e.op)>=0,o=r.indexOf(e.op)>=0;if(e.Ge()){var u=this.Tm.Se();if(u!==null&&!u.isEqual(e.field))throw new Ie(pe.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+u.toString()+"' and '"+e.field.toString()+"'");var h=this.Tm.De();h!==null&&this.gm(e.field,h)}else if(o||i){var f=null;if(o&&(f=this.Tm.ze(r)),f===null&&i&&(f=this.Tm.ze(n)),f!=null)throw f===e.op?new Ie(pe.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new Ie(pe.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+f.toString()+"' filters.")}}},t.prototype.Im=function(e){if(this.Tm.De()===null){var n=this.Tm.Se();n!==null&&this.gm(n,e.field)}},t.prototype.gm=function(e,n){if(!n.isEqual(e))throw new Ie(pe.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+n.toString()+"' instead.")},t}(),SS=function(){function t(e,n,r,i){this.im=e,this.pm=n,this.ym=r,this.om=i,this.bm=null,this.vm=null,this.metadata=new PF(r.hasPendingWrites,r.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var e=[];return this.forEach(function(n){return e.push(n)}),e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this.ym.docs.U()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.ym.docs.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(e,n){var r=this;po("QuerySnapshot.forEach",arguments,1,2),Vn("QuerySnapshot.forEach","function",1,e),this.ym.docs.forEach(function(i){e.call(n,r.Sm(i))})},Object.defineProperty(t.prototype,"query",{get:function(){return new xy(this.pm,this.im,this.om)},enumerable:!0,configurable:!0}),t.prototype.docChanges=function(e){e&&(kl("QuerySnapshot.docChanges",e,["includeMetadataChanges"]),$s("QuerySnapshot.docChanges","boolean","includeMetadataChanges",e.includeMetadataChanges));var n=!(!e||!e.includeMetadataChanges);if(n&&this.ym.ds)throw new Ie(pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.bm&&this.vm===n||(this.bm=function(r,i,o,u){if(o.cs.U()){var h=0;return o.docChanges.map(function(v){var _=new qf(r,v.doc.key,v.doc,o.fromCache,o._s.has(v.doc.key),u);return v.doc,{type:"added",doc:_,oldIndex:-1,newIndex:h++}})}var f=o.cs;return o.docChanges.filter(function(v){return i||v.type!==3}).map(function(v){var _=new qf(r,v.doc.key,v.doc,o.fromCache,o._s.has(v.doc.key),u),b=-1,S=-1;return v.type!==0&&(b=f.indexOf(v.doc.key),f=f.delete(v.doc.key)),v.type!==1&&(S=(f=f.add(v.doc)).indexOf(v.doc.key)),{type:_$(v.type),doc:_,oldIndex:b,newIndex:S}})}(this.im,n,this.ym,this.om),this.vm=n),this.bm},t.prototype.isEqual=function(e){if(!(e instanceof t))throw Pl("isEqual","QuerySnapshot",1,e);return this.im===e.im&&this.pm.isEqual(e.pm)&&this.ym.isEqual(e.ym)&&this.om===e.om},t.prototype.Sm=function(e){return new qf(this.im,e.key,e,this.metadata.fromCache,this.ym._s.has(e.key),this.om)},t}(),ym=function(t){function e(n,r,i){var o=this;if((o=t.call(this,gl.ve(n),r,i)||this).Dm=n,n.length%2!=1)throw new Ie(pe.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+n.K()+" has "+n.length);return o}return Et(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.Tm.path.B()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var n=this.Tm.path.L();return n.U()?null:new da(new ct(n),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.Tm.path.K()},enumerable:!0,configurable:!0}),e.prototype.doc=function(n){if(po("CollectionReference.doc",arguments,0,1),arguments.length===0&&(n=XM.mi()),Vn("CollectionReference.doc","non-empty string",1,n),n==="")throw new Ie(pe.INVALID_ARGUMENT,"Document path must be a non-empty string");var r=dn.G(n);return da.sm(this.Tm.path.child(r),this.firestore,this.om)},e.prototype.add=function(n){mn("CollectionReference.add",arguments,1),Vn("CollectionReference.add","object",1,this.om?this.om.toFirestore(n):n);var r=this.doc();return r.set(n).then(function(){return r})},e.prototype.withConverter=function(n){return new e(this.Dm,this.firestore,n)},e}(xy);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WT(t,e){if(e===void 0)return{merge:!1};if(kl(t,e,["merge","mergeFields"]),$s(t,"boolean","merge",e.merge),function(n,r,i,o,u){o!==void 0&&function(h,f,v,_,b){if(!(_ instanceof Array))throw new Ie(pe.INVALID_ARGUMENT,"Function "+h+"() requires its "+f+" option to be an array, but it was: "+bs(_));for(var S=0;S<_.length;++S)if(!b(_[S]))throw new Ie(pe.INVALID_ARGUMENT,"Function "+h+"() requires all "+f+" elements to be "+v+", but the value at index "+S+" was: "+bs(_[S]))}(n,r,i,o,u)}(t,"mergeFields","a string or a FieldPath",e.mergeFields,function(n){return typeof n=="string"||n instanceof Qo}),e.mergeFields!==void 0&&e.merge!==void 0)throw new Ie(pe.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Ok(t,e){return e===void 0?{}:(kl(t,e,["serverTimestamps"]),rF(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function RF(t,e){Bc(t,"object",1,e),e&&(kl(t,e,["source"]),rF(t,0,"source",e.source,["default","server","cache"]))}function Hs(t,e,n){if(e instanceof da){if(e.firestore!==n)throw new Ie(pe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw Pl(t,"DocumentReference",1,e)}function _$(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return We("Unknown change type: "+t)}}function GT(t,e,n){var r;return t?(r=t.toFirestore(e),n="toFirestore() in "+n):r=e,[r,n]}var w$=Jo(qT,"Use firebase.firestore() instead."),E$=Jo(AF,"Use firebase.firestore().runTransaction() instead."),S$=Jo(kF,"Use firebase.firestore().batch() instead."),b$=Jo(da,"Use firebase.firestore().doc() instead."),T$=Jo(yl),I$=Jo(qf),C$=Jo(xy),x$=Jo(SS),N$=Jo(ym,"Use firebase.firestore().collection() instead."),A$={Firestore:w$,GeoPoint:Cy,Timestamp:xi,Blob:F7,Transaction:E$,WriteBatch:S$,DocumentReference:b$,DocumentSnapshot:T$,Query:C$,QueryDocumentSnapshot:I$,QuerySnapshot:x$,CollectionReference:N$,FieldPath:Qo,FieldValue:U7,setLogLevel:qT.setLogLevel,CACHE_SIZE_UNLIMITED:NF},k$=function(){function t(){}return t.prototype.Hu=function(e){},t.prototype.lc=function(){},t}(),Dk=function(){function t(){var e=this;this.Cm=function(){return e.km()},this.Nm=function(){return e.Fm()},this.$m=[],this.Mm()}return t.prototype.Hu=function(e){this.$m.push(e)},t.prototype.lc=function(){window.removeEventListener("online",this.Cm),window.removeEventListener("offline",this.Nm)},t.prototype.Mm=function(){window.addEventListener("online",this.Cm),window.addEventListener("offline",this.Nm)},t.prototype.km=function(){Ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var e=0,n=this.$m;e<n.length;e++)(0,n[e])(0)},t.prototype.Fm=function(){Ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var e=0,n=this.$m;e<n.length;e++)(0,n[e])(1)},t.Uc=function(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0},t}(),P$=function(){function t(e){this.Lm=e.Lm,this.Om=e.Om}return t.prototype._u=function(e){this.xm=e},t.prototype.ou=function(e){this.Bm=e},t.prototype.onMessage=function(e){this.Um=e},t.prototype.close=function(){this.Om()},t.prototype.send=function(e){this.Lm(e)},t.prototype.qm=function(){this.xm()},t.prototype.Qm=function(e){this.Bm(e)},t.prototype.Wm=function(e){this.Um(e)},t}(),R$={BatchGetDocuments:"batchGet",Commit:"commit"},O$="gl-js/ fire/"+Sy,D$=function(){function t(e){this.cn=e.cn;var n=e.ssl?"https":"http";this.jm=n+"://"+e.host,this.forceLongPolling=e.forceLongPolling}return t.prototype.Km=function(e,n){if(n)for(var r in n.h)n.h.hasOwnProperty(r)&&(e[r]=n.h[r]);e["X-Goog-Api-Client"]=O$},t.prototype.gu=function(e,n,r){var i=this,o=this.Gm(e);return new Promise(function(u,h){var f=new o7;f.listenOnce(i7.COMPLETE,function(){try{switch(f.getLastErrorCode()){case Xw.NO_ERROR:var S=f.getResponseJson();Ke("Connection","XHR received:",JSON.stringify(S)),u(S);break;case Xw.TIMEOUT:Ke("Connection",'RPC "'+e+'" timed out'),h(new Ie(pe.DEADLINE_EXCEEDED,"Request time out"));break;case Xw.HTTP_ERROR:var I=f.getStatus();if(Ke("Connection",'RPC "'+e+'" failed with status:',I,"response text:",f.getResponseText()),I>0){var M=f.getResponseJson().error;if(M&&M.status&&M.message){var D=function(ne){var z=ne.toLowerCase().replace("_","-");return Object.values(pe).indexOf(z)>=0?z:pe.UNKNOWN}(M.status);h(new Ie(D,M.message))}else h(new Ie(pe.UNKNOWN,"Server responded with status "+f.getStatus()))}else Ke("Connection",'RPC "'+e+'" failed'),h(new Ie(pe.UNAVAILABLE,"Connection failed."));break;default:We('RPC "'+e+'" failed with unanticipated webchannel error '+f.getLastErrorCode()+": "+f.getLastError()+", giving up.")}}finally{Ke("Connection",'RPC "'+e+'" completed.')}});var v=Object.assign({},n);delete v.database;var _=JSON.stringify(v);Ke("Connection","XHR sending: ",o+" "+_);var b={"Content-Type":"text/plain"};i.Km(b,r),f.send(o,"POST",_,b,15)})},t.prototype.yu=function(e,n,r){return this.gu(e,n,r)},t.prototype.lu=function(e,n){var r=[this.jm,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=r7(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.cn.projectId+"/databases/"+this.cn.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.Km(o.initMessageHeaders,n),Hb()||BD()||vq()||mq()||yq()||gq()||(o.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");Ke("Connection","Creating WebChannel: "+u+" "+o);var h=i.createWebChannel(u,o),f=!1,v=!1,_=new P$({Lm:function(S){v?Ke("Connection","Not sending because WebChannel is closed:",S):(f||(Ke("Connection","Opening WebChannel transport."),h.open(),f=!0),Ke("Connection","WebChannel sending:",S),h.send(S))},Om:function(){return h.close()}}),b=function(S,I){h.listen(S,function(M){try{I(M)}catch(D){setTimeout(function(){throw D},0)}})};return b(Rg.EventType.OPEN,function(){v||Ke("Connection","WebChannel transport opened.")}),b(Rg.EventType.CLOSE,function(){v||(v=!0,Ke("Connection","WebChannel transport closed"),_.Qm())}),b(Rg.EventType.ERROR,function(S){v||(v=!0,Ke("Connection","WebChannel transport errored:",S),_.Qm(new Ie(pe.UNAVAILABLE,"The operation could not be completed")))}),b(Rg.EventType.MESSAGE,function(S){var I;if(!v){var M=S.data[0];at(!!M,"Got a webchannel message without data.");var D=M,ne=D.error||((I=D[0])===null||I===void 0?void 0:I.error);if(ne){Ke("Connection","WebChannel received error:",ne);var z=ne.status,Y=function(ue){var oe=Yn[ue];if(oe!==void 0)return qM(oe)}(z),K=ne.message;Y===void 0&&(Y=pe.INTERNAL,K="Unknown error status: "+z+" with message "+ne.message),v=!0,_.Qm(new Ie(Y,K)),h.close()}else Ke("Connection","WebChannel received:",M),_.Wm(M)}}),setTimeout(function(){_.qm()},0),_},t.prototype.Gm=function(e){var n=R$[e];return this.jm+"/v1/projects/"+this.cn.projectId+"/databases/"+this.cn.database+"/documents:"+n},t}();/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L$(t){(function(e,n){e.INTERNAL.registerComponent(new Es("firestore",function(r){return function(i,o){return new qT(i,o,new m$)}(r.getProvider("app").getImmediate(),r.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},A$)))})(t),t.registerVersion("@firebase/firestore","1.14.0")}vl.fi(new(function(){function t(){this.dn=!0,this.ia=typeof atob<"u"}return Object.defineProperty(t.prototype,"document",{get:function(){return typeof document<"u"?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"window",{get:function(){return typeof window<"u"?window:null},enumerable:!0,configurable:!0}),t.prototype.VT=function(e){return Promise.resolve(new D$(e))},t.prototype.mT=function(){return Dk.Uc()?new Dk:new k$},t.prototype.fT=function(e){return new KM(e,{dn:!0})},t.prototype.Ti=function(e){return JSON.stringify(e)},t.prototype.atob=function(e){return atob(e)},t.prototype.btoa=function(e){return btoa(e)},t}())),L$(ze);/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lk={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},qc=function(t){Et(e,t);function e(n,r,i){var o=t.call(this,r)||this;return Object.setPrototypeOf(o,e.prototype),o.code=n,o.details=i,o}return e}(Error);function M$(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function F$(t,e,n){var r=M$(t),i=r,o=void 0;try{var u=e&&e.error;if(u){var h=u.status;if(typeof h=="string"){if(!Lk[h])return new qc("internal","internal");r=Lk[h],i=h}var f=u.message;typeof f=="string"&&(i=f),o=u.details,o!==void 0&&(o=n.decode(o))}}catch{}return r==="ok"?null:new qc(r,i,o)}var j$=function(){function t(e,n){var r=this;this.auth=null,this.messaging=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(function(i){return r.auth=i},function(){}),this.messaging||n.get().then(function(i){return r.messaging=i},function(){})}return t.prototype.getAuthToken=function(){return Ee(this,void 0,void 0,function(){var e;return we(this,function(n){switch(n.label){case 0:if(!this.auth)return[2,void 0];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return e=n.sent(),e?[2,e.accessToken]:[2,void 0];case 3:return n.sent(),[2,void 0];case 4:return[2]}})})},t.prototype.getInstanceIdToken=function(){return Ee(this,void 0,void 0,function(){return we(this,function(e){if(!this.messaging||!("Notification"in self)||Notification.permission!=="granted")return[2,void 0];try{return[2,this.messaging.getToken()]}catch{return[2,void 0]}return[2]})})},t.prototype.getContext=function(){return Ee(this,void 0,void 0,function(){var e,n;return we(this,function(r){switch(r.label){case 0:return[4,this.getAuthToken()];case 1:return e=r.sent(),[4,this.getInstanceIdToken()];case 2:return n=r.sent(),[2,{authToken:e,instanceIdToken:n}]}})})},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var U$="type.googleapis.com/google.protobuf.Int64Value",V$="type.googleapis.com/google.protobuf.UInt64Value";function Mk(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var B$=function(){function t(){}return t.prototype.encode=function(e){var n=this;if(e==null)return null;if(e instanceof Number&&(e=e.valueOf()),typeof e=="number"&&isFinite(e)||e===!0||e===!1||Object.prototype.toString.call(e)==="[object String]")return e;if(Array.isArray(e))return e.map(function(r){return n.encode(r)});if(typeof e=="function"||typeof e=="object")return Mk(e,function(r){return n.encode(r)});throw new Error("Data cannot be encoded in JSON: "+e)},t.prototype.decode=function(e){var n=this;if(e==null)return e;if(e["@type"])switch(e["@type"]){case U$:case V$:{var r=Number(e.value);if(isNaN(r))throw new Error("Data cannot be decoded from JSON: "+e);return r}default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(function(i){return n.decode(i)}):typeof e=="function"||typeof e=="object"?Mk(e,function(i){return n.decode(i)}):e},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z$(t){return new Promise(function(e,n){setTimeout(function(){n(new qc("deadline-exceeded","deadline-exceeded"))},t)})}var OF=function(){function t(e,n,r,i){var o=this;i===void 0&&(i="us-central1"),this.app_=e,this.region_=i,this.serializer=new B$,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return o.deleteService()}},this.contextProvider=new j$(n,r),this.cancelAllRequests=new Promise(function(u){o.deleteService=function(){return u()}})}return Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),t.prototype._url=function(e){var n=this.app_.options.projectId,r=this.region_;if(this.emulatorOrigin!==null){var i=this.emulatorOrigin;return i+"/"+n+"/"+r+"/"+e}return"https://"+r+"-"+n+".cloudfunctions.net/"+e},t.prototype.useFunctionsEmulator=function(e){this.emulatorOrigin=e},t.prototype.httpsCallable=function(e,n){var r=this;return function(i){return r.call(e,i,n||{})}},t.prototype.postJSON=function(e,n,r){return Ee(this,void 0,void 0,function(){var i,o;return we(this,function(u){switch(u.label){case 0:r.append("Content-Type","application/json"),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,fetch(e,{method:"POST",body:JSON.stringify(n),headers:r})];case 2:return i=u.sent(),[3,4];case 3:return u.sent(),[2,{status:0,json:null}];case 4:o=null,u.label=5;case 5:return u.trys.push([5,7,,8]),[4,i.json()];case 6:return o=u.sent(),[3,8];case 7:return u.sent(),[3,8];case 8:return[2,{status:i.status,json:o}]}})})},t.prototype.call=function(e,n,r){return Ee(this,void 0,void 0,function(){var i,o,u,h,f,v,_,b,S;return we(this,function(I){switch(I.label){case 0:return i=this._url(e),n=this.serializer.encode(n),o={data:n},u=new Headers,[4,this.contextProvider.getContext()];case 1:return h=I.sent(),h.authToken&&u.append("Authorization","Bearer "+h.authToken),h.instanceIdToken&&u.append("Firebase-Instance-ID-Token",h.instanceIdToken),f=r.timeout||7e4,[4,Promise.race([this.postJSON(i,o,u),z$(f),this.cancelAllRequests])];case 2:if(v=I.sent(),!v)throw new qc("cancelled","Firebase Functions instance was deleted.");if(_=F$(v.status,v.json,this.serializer),_)throw _;if(!v.json)throw new qc("internal","Response is not valid JSON object.");if(b=v.json.data,typeof b>"u"&&(b=v.json.result),typeof b>"u")throw new qc("internal","Response is missing data field.");return S=this.serializer.decode(b),[2,{data:S}]}})})},t}();/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var q$="functions";function W$(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("messaging");return new OF(n,r,i,e)}function G$(t){var e={Functions:OF};t.INTERNAL.registerComponent(new Es(q$,W$,"PUBLIC").setServiceProps(e).setMultipleInstances(!0))}var $$="@firebase/functions",H$="0.4.40";/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */G$(ze);ze.registerVersion($$,H$);function K$(t){return Array.prototype.slice.call(t)}function DF(t){return new Promise(function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function Ny(t,e,n){var r,i=new Promise(function(o,u){r=t[e].apply(t,n),DF(r).then(o,u)});return i.request=r,i}function Y$(t,e,n){var r=Ny(t,e,n);return r.then(function(i){if(i)return new Od(i,r.request)})}function wh(t,e,n){n.forEach(function(r){Object.defineProperty(t.prototype,r,{get:function(){return this[e][r]},set:function(i){this[e][r]=i}})})}function $T(t,e,n,r){r.forEach(function(i){i in n.prototype&&(t.prototype[i]=function(){return Ny(this[e],i,arguments)})})}function Ay(t,e,n,r){r.forEach(function(i){i in n.prototype&&(t.prototype[i]=function(){return this[e][i].apply(this[e],arguments)})})}function LF(t,e,n,r){r.forEach(function(i){i in n.prototype&&(t.prototype[i]=function(){return Y$(this[e],i,arguments)})})}function Rl(t){this._index=t}wh(Rl,"_index",["name","keyPath","multiEntry","unique"]);$T(Rl,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]);LF(Rl,"_index",IDBIndex,["openCursor","openKeyCursor"]);function Od(t,e){this._cursor=t,this._request=e}wh(Od,"_cursor",["direction","key","primaryKey","value"]);$T(Od,"_cursor",IDBCursor,["update","delete"]);["advance","continue","continuePrimaryKey"].forEach(function(t){t in IDBCursor.prototype&&(Od.prototype[t]=function(){var e=this,n=arguments;return Promise.resolve().then(function(){return e._cursor[t].apply(e._cursor,n),DF(e._request).then(function(r){if(r)return new Od(r,e._request)})})})});function Is(t){this._store=t}Is.prototype.createIndex=function(){return new Rl(this._store.createIndex.apply(this._store,arguments))};Is.prototype.index=function(){return new Rl(this._store.index.apply(this._store,arguments))};wh(Is,"_store",["name","keyPath","indexNames","autoIncrement"]);$T(Is,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]);LF(Is,"_store",IDBObjectStore,["openCursor","openKeyCursor"]);Ay(Is,"_store",IDBObjectStore,["deleteIndex"]);function lp(t){this._tx=t,this.complete=new Promise(function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}})}lp.prototype.objectStore=function(){return new Is(this._tx.objectStore.apply(this._tx,arguments))};wh(lp,"_tx",["objectStoreNames","mode"]);Ay(lp,"_tx",IDBTransaction,["abort"]);function ky(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new lp(n)}ky.prototype.createObjectStore=function(){return new Is(this._db.createObjectStore.apply(this._db,arguments))};wh(ky,"_db",["name","version","objectStoreNames"]);Ay(ky,"_db",IDBDatabase,["deleteObjectStore","close"]);function Py(t){this._db=t}Py.prototype.transaction=function(){return new lp(this._db.transaction.apply(this._db,arguments))};wh(Py,"_db",["name","version","objectStoreNames"]);Ay(Py,"_db",IDBDatabase,["close"]);["openCursor","openKeyCursor"].forEach(function(t){[Is,Rl].forEach(function(e){t in e.prototype&&(e.prototype[t.replace("open","iterate")]=function(){var n=K$(arguments),r=n[n.length-1],i=this._store||this._index,o=i[t].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})})});[Rl,Is].forEach(function(t){t.prototype.getAll||(t.prototype.getAll=function(e,n){var r=this,i=[];return new Promise(function(o){r.iterateCursor(e,function(u){if(!u){o(i);return}if(i.push(u.value),n!==void 0&&i.length==n){o(i);return}u.continue()})})})});function HT(t,e,n){var r=Ny(indexedDB,"open",[t,e]),i=r.request;return i&&(i.onupgradeneeded=function(o){n&&n(new ky(i.result,o.oldVersion,i.transaction))}),r.then(function(o){return new Py(o)})}function iE(t){return Ny(indexedDB,"deleteDatabase",[t])}var Q$="@firebase/installations",MF="0.4.7";/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var FF=1e4,jF="w:"+MF,UF="FIS_v2",X$="https://firebaseinstallations.googleapis.com/v1",J$=60*60*1e3,Z$="installations",eH="Installations";/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oa,tH=(Oa={},Oa["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',Oa["not-registered"]="Firebase Installation is not registered.",Oa["installation-not-found"]="Firebase Installation not found.",Oa["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',Oa["app-offline"]="Could not process request. Application offline.",Oa["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",Oa),pa=new Kd(Z$,eH,tH);function VF(t){return t instanceof $b&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KT(t){var e=t.projectId;return X$+"/projects/"+e+"/installations"}function BF(t){return{token:t.token,requestStatus:2,expiresIn:nH(t.expiresIn),creationTime:Date.now()}}function YT(t,e){return Ee(this,void 0,void 0,function(){var n,r;return we(this,function(i){switch(i.label){case 0:return[4,e.json()];case 1:return n=i.sent(),r=n.error,[2,pa.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}})})}function zF(t){var e=t.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function qF(t,e){var n=e.refreshToken,r=zF(t);return r.append("Authorization",rH(n)),r}function QT(t){return Ee(this,void 0,void 0,function(){var e;return we(this,function(n){switch(n.label){case 0:return[4,t()];case 1:return e=n.sent(),e.status>=500&&e.status<600?[2,t()]:[2,e]}})})}function nH(t){return Number(t.replace("s","000"))}function rH(t){return UF+" "+t}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iH(t,e){var n=e.fid;return Ee(this,void 0,void 0,function(){var r,i,o,u,h,f,v;return we(this,function(_){switch(_.label){case 0:return r=KT(t),i=zF(t),o={fid:n,authVersion:UF,appId:t.appId,sdkVersion:jF},u={method:"POST",headers:i,body:JSON.stringify(o)},[4,QT(function(){return fetch(r,u)})];case 1:return h=_.sent(),h.ok?[4,h.json()]:[3,3];case 2:return f=_.sent(),v={fid:f.fid||n,registrationStatus:2,refreshToken:f.refreshToken,authToken:BF(f.authToken)},[2,v];case 3:return[4,YT("Create Installation",h)];case 4:throw _.sent()}})})}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WF(t){return new Promise(function(e){setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oH(t){var e=btoa(String.fromCharCode.apply(String,va(t)));return e.replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sH=/^[cdef][\w-]{21}$/,bS="";function aH(){try{var t=new Uint8Array(17),e=self.crypto||self.msCrypto;e.getRandomValues(t),t[0]=112+t[0]%16;var n=uH(t);return sH.test(n)?n:bS}catch{return bS}}function uH(t){var e=oH(t);return e.substr(0,22)}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eh(t){return t.appName+"!"+t.appId}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var uh=new Map;function GF(t,e){var n=Eh(t);$F(n,e),hH(n,e)}function lH(t,e){HF();var n=Eh(t),r=uh.get(n);r||(r=new Set,uh.set(n,r)),r.add(e)}function cH(t,e){var n=Eh(t),r=uh.get(n);r&&(r.delete(e),r.size===0&&uh.delete(n),KF())}function $F(t,e){var n,r,i=uh.get(t);if(i)try{for(var o=zn(i),u=o.next();!u.done;u=o.next()){var h=u.value;h(e)}}catch(f){n={error:f}}finally{try{u&&!u.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}function hH(t,e){var n=HF();n&&n.postMessage({key:t,fid:e}),KF()}var Zu=null;function HF(){return!Zu&&"BroadcastChannel"in self&&(Zu=new BroadcastChannel("[Firebase] FID Change"),Zu.onmessage=function(t){$F(t.data.key,t.data.fid)}),Zu}function KF(){uh.size===0&&Zu&&(Zu.close(),Zu=null)}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fH="firebase-installations-database",dH=1,_l="firebase-installations-store",oE=null;function XT(){return oE||(oE=HT(fH,dH,function(t){switch(t.oldVersion){case 0:t.createObjectStore(_l)}})),oE}function _m(t,e){return Ee(this,void 0,void 0,function(){var n,r,i,o,u;return we(this,function(h){switch(h.label){case 0:return n=Eh(t),[4,XT()];case 1:return r=h.sent(),i=r.transaction(_l,"readwrite"),o=i.objectStore(_l),[4,o.get(n)];case 2:return u=h.sent(),[4,o.put(e,n)];case 3:return h.sent(),[4,i.complete];case 4:return h.sent(),(!u||u.fid!==e.fid)&&GF(t,e.fid),[2,e]}})})}function JT(t){return Ee(this,void 0,void 0,function(){var e,n,r;return we(this,function(i){switch(i.label){case 0:return e=Eh(t),[4,XT()];case 1:return n=i.sent(),r=n.transaction(_l,"readwrite"),[4,r.objectStore(_l).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}})})}function cp(t,e){return Ee(this,void 0,void 0,function(){var n,r,i,o,u,h;return we(this,function(f){switch(f.label){case 0:return n=Eh(t),[4,XT()];case 1:return r=f.sent(),i=r.transaction(_l,"readwrite"),o=i.objectStore(_l),[4,o.get(n)];case 2:return u=f.sent(),h=e(u),h!==void 0?[3,4]:[4,o.delete(n)];case 3:return f.sent(),[3,6];case 4:return[4,o.put(h,n)];case 5:f.sent(),f.label=6;case 6:return[4,i.complete];case 7:return f.sent(),h&&(!u||u.fid!==h.fid)&&GF(t,h.fid),[2,h]}})})}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZT(t){return Ee(this,void 0,void 0,function(){var e,n,r;return we(this,function(i){switch(i.label){case 0:return[4,cp(t,function(o){var u=pH(o),h=gH(t,u);return e=h.registrationPromise,h.installationEntry})];case 1:return n=i.sent(),n.fid!==bS?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}})})}function pH(t){var e=t||{fid:aH(),registrationStatus:0};return YF(e)}function gH(t,e){if(e.registrationStatus===0){if(!navigator.onLine){var n=Promise.reject(pa.create("app-offline"));return{installationEntry:e,registrationPromise:n}}var r={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=vH(t,r);return{installationEntry:r,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:mH(t)}:{installationEntry:e}}function vH(t,e){return Ee(this,void 0,void 0,function(){var n,r;return we(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,iH(t,e)];case 1:return n=i.sent(),[2,_m(t,n)];case 2:return r=i.sent(),VF(r)&&r.serverCode===409?[4,JT(t)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,_m(t,{fid:e.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}})})}function mH(t){return Ee(this,void 0,void 0,function(){var e,n,r,i;return we(this,function(o){switch(o.label){case 0:return[4,Fk(t)];case 1:e=o.sent(),o.label=2;case 2:return e.registrationStatus!==1?[3,5]:[4,WF(100)];case 3:return o.sent(),[4,Fk(t)];case 4:return e=o.sent(),[3,2];case 5:return e.registrationStatus!==0?[3,7]:[4,ZT(t)];case 6:return n=o.sent(),r=n.installationEntry,i=n.registrationPromise,i?[2,i]:[2,r];case 7:return[2,e]}})})}function Fk(t){return cp(t,function(e){if(!e)throw pa.create("installation-not-found");return YF(e)})}function YF(t){return yH(t)?{fid:t.fid,registrationStatus:0}:t}function yH(t){return t.registrationStatus===1&&t.registrationTime+FF<Date.now()}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _H(t,e){var n=t.appConfig,r=t.platformLoggerProvider;return Ee(this,void 0,void 0,function(){var i,o,u,h,f,v,_,b;return we(this,function(S){switch(S.label){case 0:return i=wH(n,e),o=qF(n,e),u=r.getImmediate({optional:!0}),u&&o.append("x-firebase-client",u.getPlatformInfoString()),h={installation:{sdkVersion:jF}},f={method:"POST",headers:o,body:JSON.stringify(h)},[4,QT(function(){return fetch(i,f)})];case 1:return v=S.sent(),v.ok?[4,v.json()]:[3,3];case 2:return _=S.sent(),b=BF(_),[2,b];case 3:return[4,YT("Generate Auth Token",v)];case 4:throw S.sent()}})})}function wH(t,e){var n=e.fid;return KT(t)+"/"+n+"/authTokens:generate"}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eI(t,e){return e===void 0&&(e=!1),Ee(this,void 0,void 0,function(){var n,r,i,o;return we(this,function(u){switch(u.label){case 0:return[4,cp(t.appConfig,function(h){if(!QF(h))throw pa.create("not-registered");var f=h.authToken;if(!e&&bH(f))return h;if(f.requestStatus===1)return n=EH(t,e),h;if(!navigator.onLine)throw pa.create("app-offline");var v=IH(h);return n=SH(t,v),v})];case 1:return r=u.sent(),n?[4,n]:[3,3];case 2:return o=u.sent(),[3,4];case 3:o=r.authToken,u.label=4;case 4:return i=o,[2,i]}})})}function EH(t,e){return Ee(this,void 0,void 0,function(){var n,r;return we(this,function(i){switch(i.label){case 0:return[4,jk(t.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return n.authToken.requestStatus!==1?[3,5]:[4,WF(100)];case 3:return i.sent(),[4,jk(t.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return r=n.authToken,r.requestStatus===0?[2,eI(t,e)]:[2,r]}})})}function jk(t){return cp(t,function(e){if(!QF(e))throw pa.create("not-registered");var n=e.authToken;return CH(n)?wn(wn({},e),{authToken:{requestStatus:0}}):e})}function SH(t,e){return Ee(this,void 0,void 0,function(){var n,i,r,i;return we(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,_H(t,e)];case 1:return n=o.sent(),i=wn(wn({},e),{authToken:n}),[4,_m(t.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return r=o.sent(),VF(r)&&(r.serverCode===401||r.serverCode===404)?[4,JT(t.appConfig)]:[3,5];case 4:return o.sent(),[3,7];case 5:return i=wn(wn({},e),{authToken:{requestStatus:0}}),[4,_m(t.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}})})}function QF(t){return t!==void 0&&t.registrationStatus===2}function bH(t){return t.requestStatus===2&&!TH(t)}function TH(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+J$}function IH(t){var e={requestStatus:1,requestTime:Date.now()};return wn(wn({},t),{authToken:e})}function CH(t){return t.requestStatus===1&&t.requestTime+FF<Date.now()}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xH(t){return Ee(this,void 0,void 0,function(){var e,n,r;return we(this,function(i){switch(i.label){case 0:return[4,ZT(t.appConfig)];case 1:return e=i.sent(),n=e.installationEntry,r=e.registrationPromise,r?r.catch(console.error):eI(t).catch(console.error),[2,n.fid]}})})}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NH(t,e){return e===void 0&&(e=!1),Ee(this,void 0,void 0,function(){var n;return we(this,function(r){switch(r.label){case 0:return[4,AH(t.appConfig)];case 1:return r.sent(),[4,eI(t,e)];case 2:return n=r.sent(),[2,n.token]}})})}function AH(t){return Ee(this,void 0,void 0,function(){var e;return we(this,function(n){switch(n.label){case 0:return[4,ZT(t)];case 1:return e=n.sent().registrationPromise,e?[4,e]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}})})}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kH(t,e){return Ee(this,void 0,void 0,function(){var n,r,i,o;return we(this,function(u){switch(u.label){case 0:return n=PH(t,e),r=qF(t,e),i={method:"DELETE",headers:r},[4,QT(function(){return fetch(n,i)})];case 1:return o=u.sent(),o.ok?[3,3]:[4,YT("Delete Installation",o)];case 2:throw u.sent();case 3:return[2]}})})}function PH(t,e){var n=e.fid;return KT(t)+"/"+n}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RH(t){return Ee(this,void 0,void 0,function(){var e,n;return we(this,function(r){switch(r.label){case 0:return e=t.appConfig,[4,cp(e,function(i){if(!(i&&i.registrationStatus===0))return i})];case 1:if(n=r.sent(),!n)return[3,6];if(n.registrationStatus!==1)return[3,2];throw pa.create("delete-pending-registration");case 2:if(n.registrationStatus!==2)return[3,6];if(navigator.onLine)return[3,3];throw pa.create("app-offline");case 3:return[4,kH(e,n)];case 4:return r.sent(),[4,JT(e)];case 5:r.sent(),r.label=6;case 6:return[2]}})})}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OH(t,e){var n=t.appConfig;return lH(n,e),function(){cH(n,e)}}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DH(t){var e,n;if(!t||!t.options)throw sE("App Configuration");if(!t.name)throw sE("App Name");var r=["projectId","apiKey","appId"];try{for(var i=zn(r),o=i.next();!o.done;o=i.next()){var u=o.value;if(!t.options[u])throw sE(u)}}catch(h){e={error:h}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function sE(t){return pa.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LH(t){var e="installations";t.INTERNAL.registerComponent(new Es(e,function(n){var r=n.getProvider("app").getImmediate(),i=DH(r),o=n.getProvider("platform-logger"),u={appConfig:i,platformLoggerProvider:o},h={app:r,getId:function(){return xH(u)},getToken:function(f){return NH(u,f)},delete:function(){return RH(u)},onIdChange:function(f){return OH(u,f)}};return h},"PUBLIC")),t.registerVersion(Q$,MF)}LH(ze);/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sr,MH=(sr={},sr["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',sr["only-available-in-window"]="This method is available in a Window context.",sr["only-available-in-sw"]="This method is available in a service worker context.",sr["permission-default"]="The notification permission was not granted and dismissed instead.",sr["permission-blocked"]="The notification permission was not granted and blocked instead.",sr["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",sr["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",sr["token-subscribe-failed"]="A problem occured while subscribing the user to FCM: {$errorInfo}",sr["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",sr["token-unsubscribe-failed"]="A problem occured while unsubscribing the user from FCM: {$errorInfo}",sr["token-update-failed"]="A problem occured while updating the user from FCM: {$errorInfo}",sr["token-update-no-token"]="FCM returned no token when updating the user to push.",sr["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",sr["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",sr["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",sr["invalid-vapid-key"]="The public VAPID key must be a string.",sr["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",sr),nn=new Kd("messaging","Messaging",MH);/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FH(t){var e,n;if(!t||!t.options)throw aE("App Configuration Object");if(!t.name)throw aE("App Name");var r=["projectId","apiKey","appId","messagingSenderId"],i=t.options;try{for(var o=zn(r),u=o.next();!u.done;u=o.next()){var h=u.value;if(!i[h])throw aE(h)}}catch(f){e={error:f}}finally{try{u&&!u.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return{appName:t.name,projectId:i.projectId,apiKey:i.apiKey,appId:i.appId,senderId:i.messagingSenderId}}function aE(t){return nn.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vs(t){var e=new Uint8Array(t),n=btoa(String.fromCharCode.apply(String,va(e)));return n.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function jH(t){for(var e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length),o=0;o<r.length;++o)i[o]=r.charCodeAt(o);return i}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var uE="fcm_token_details_db",UH=5,Uk="fcm_token_object_Store";function VH(t){return Ee(this,void 0,void 0,function(){var e,n,r,i,o=this;return we(this,function(u){switch(u.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(e=u.sent(),n=e.map(function(h){return h.name}),!n.includes(uE))return[2,null];u.label=2;case 2:return r=null,[4,HT(uE,UH,function(h){return Ee(o,void 0,void 0,function(){var f,v,_,_,_,b;return we(this,function(S){switch(S.label){case 0:return h.oldVersion<2?[2]:h.objectStoreNames.contains(Uk)?(f=h.transaction.objectStore(Uk),[4,f.index("fcmSenderId").get(t)]):[2];case 1:return v=S.sent(),[4,f.clear()];case 2:if(S.sent(),!v)return[2];if(h.oldVersion===2){if(_=v,!_.auth||!_.p256dh||!_.endpoint)return[2];r={token:_.fcmToken,createTime:(b=_.createTime)!==null&&b!==void 0?b:Date.now(),subscriptionOptions:{auth:_.auth,p256dh:_.p256dh,endpoint:_.endpoint,swScope:_.swScope,vapidKey:typeof _.vapidKey=="string"?_.vapidKey:Vs(_.vapidKey)}}}else h.oldVersion===3?(_=v,r={token:_.fcmToken,createTime:_.createTime,subscriptionOptions:{auth:Vs(_.auth),p256dh:Vs(_.p256dh),endpoint:_.endpoint,swScope:_.swScope,vapidKey:Vs(_.vapidKey)}}):h.oldVersion===4&&(_=v,r={token:_.fcmToken,createTime:_.createTime,subscriptionOptions:{auth:Vs(_.auth),p256dh:Vs(_.p256dh),endpoint:_.endpoint,swScope:_.swScope,vapidKey:Vs(_.vapidKey)}});return[2]}})})})];case 3:return i=u.sent(),i.close(),[4,iE(uE)];case 4:return u.sent(),[4,iE("fcm_vapid_details_db")];case 5:return u.sent(),[4,iE("undefined")];case 6:return u.sent(),[2,BH(r)?r:null]}})})}function BH(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zH="firebase-messaging-database",qH=1,wl="firebase-messaging-store",lE=null;function tI(){return lE||(lE=HT(zH,qH,function(t){switch(t.oldVersion){case 0:t.createObjectStore(wl)}})),lE}function wm(t){return Ee(this,void 0,void 0,function(){var e,n,r,i;return we(this,function(o){switch(o.label){case 0:return e=rI(t),[4,tI()];case 1:return n=o.sent(),[4,n.transaction(wl).objectStore(wl).get(e)];case 2:return r=o.sent(),r?[2,r]:[3,3];case 3:return[4,VH(t.appConfig.senderId)];case 4:return i=o.sent(),i?[4,nI(t,i)]:[3,6];case 5:return o.sent(),[2,i];case 6:return[2]}})})}function nI(t,e){return Ee(this,void 0,void 0,function(){var n,r,i;return we(this,function(o){switch(o.label){case 0:return n=rI(t),[4,tI()];case 1:return r=o.sent(),i=r.transaction(wl,"readwrite"),[4,i.objectStore(wl).put(e,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,e]}})})}function WH(t){return Ee(this,void 0,void 0,function(){var e,n,r;return we(this,function(i){switch(i.label){case 0:return e=rI(t),[4,tI()];case 1:return n=i.sent(),r=n.transaction(wl,"readwrite"),[4,r.objectStore(wl).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}})})}function rI(t){var e=t.appConfig;return e.appId}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var GH="/firebase-messaging-sw.js",$H="/firebase-cloud-messaging-push-scope",Em="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",HH="https://fcmregistrations.googleapis.com/v1",XF="FCM_MSG",JF="google.c.a.c_id",KH="google.c.a.c_l",YH="google.c.a.ts",QH="google.c.a.e";/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XH(t,e){return Ee(this,void 0,void 0,function(){var n,r,i,o,u,h,f;return we(this,function(v){switch(v.label){case 0:return[4,oI(t)];case 1:n=v.sent(),r=e3(e),i={method:"POST",headers:n,body:JSON.stringify(r)},v.label=2;case 2:return v.trys.push([2,5,,6]),[4,fetch(iI(t.appConfig),i)];case 3:return u=v.sent(),[4,u.json()];case 4:return o=v.sent(),[3,6];case 5:throw h=v.sent(),nn.create("token-subscribe-failed",{errorInfo:h});case 6:if(o.error)throw f=o.error.message,nn.create("token-subscribe-failed",{errorInfo:f});if(!o.token)throw nn.create("token-subscribe-no-token");return[2,o.token]}})})}function JH(t,e){return Ee(this,void 0,void 0,function(){var n,r,i,o,u,h,f;return we(this,function(v){switch(v.label){case 0:return[4,oI(t)];case 1:n=v.sent(),r=e3(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},v.label=2;case 2:return v.trys.push([2,5,,6]),[4,fetch(iI(t.appConfig)+"/"+e.token,i)];case 3:return u=v.sent(),[4,u.json()];case 4:return o=v.sent(),[3,6];case 5:throw h=v.sent(),nn.create("token-update-failed",{errorInfo:h});case 6:if(o.error)throw f=o.error.message,nn.create("token-update-failed",{errorInfo:f});if(!o.token)throw nn.create("token-update-no-token");return[2,o.token]}})})}function ZF(t,e){return Ee(this,void 0,void 0,function(){var n,r,i,o,u,h;return we(this,function(f){switch(f.label){case 0:return[4,oI(t)];case 1:n=f.sent(),r={method:"DELETE",headers:n},f.label=2;case 2:return f.trys.push([2,5,,6]),[4,fetch(iI(t.appConfig)+"/"+e,r)];case 3:return i=f.sent(),[4,i.json()];case 4:if(o=f.sent(),o.error)throw u=o.error.message,nn.create("token-unsubscribe-failed",{errorInfo:u});return[3,6];case 5:throw h=f.sent(),nn.create("token-unsubscribe-failed",{errorInfo:h});case 6:return[2]}})})}function iI(t){var e=t.projectId;return HH+"/projects/"+e+"/registrations"}function oI(t){var e=t.appConfig,n=t.installations;return Ee(this,void 0,void 0,function(){var r;return we(this,function(i){switch(i.label){case 0:return[4,n.getToken()];case 1:return r=i.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":"FIS "+r})]}})})}function e3(t){var e=t.p256dh,n=t.auth,r=t.endpoint,i=t.vapidKey,o={web:{endpoint:r,auth:n,p256dh:e}};return i!==Em&&(o.web.applicationPubKey=i),o}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ZH=7*24*60*60*1e3;function TS(t,e,n){return Ee(this,void 0,void 0,function(){var r,i,o,u;return we(this,function(h){switch(h.label){case 0:if(Notification.permission!=="granted")throw nn.create("permission-blocked");return[4,tK(e,n)];case 1:return r=h.sent(),[4,wm(t)];case 2:return i=h.sent(),o={vapidKey:n,swScope:e.scope,endpoint:r.endpoint,auth:Vs(r.getKey("auth")),p256dh:Vs(r.getKey("p256dh"))},i?[3,3]:[2,Vk(t,o)];case 3:if(nK(i.subscriptionOptions,o))return[3,8];h.label=4;case 4:return h.trys.push([4,6,,7]),[4,ZF(t,i.token)];case 5:return h.sent(),[3,7];case 6:return u=h.sent(),console.warn(u),[3,7];case 7:return[2,Vk(t,o)];case 8:return Date.now()>=i.createTime+ZH?[2,eK({token:i.token,createTime:Date.now(),subscriptionOptions:o},t,e)]:[2,i.token];case 9:return[2]}})})}function Wf(t,e){return Ee(this,void 0,void 0,function(){var n,r;return we(this,function(i){switch(i.label){case 0:return[4,wm(t)];case 1:return n=i.sent(),n?[4,ZF(t,n.token)]:[3,4];case 2:return i.sent(),[4,WH(t)];case 3:i.sent(),i.label=4;case 4:return[4,e.pushManager.getSubscription()];case 5:return r=i.sent(),r?[2,r.unsubscribe()]:[2,!0]}})})}function eK(t,e,n){return Ee(this,void 0,void 0,function(){var r,i,o;return we(this,function(u){switch(u.label){case 0:return u.trys.push([0,3,,5]),[4,JH(e,t)];case 1:return r=u.sent(),i=wn({token:r,createTime:Date.now()},t),[4,nI(e,i)];case 2:return u.sent(),[2,r];case 3:return o=u.sent(),[4,Wf(e,n)];case 4:throw u.sent(),o;case 5:return[2]}})})}function Vk(t,e){return Ee(this,void 0,void 0,function(){var n,r;return we(this,function(i){switch(i.label){case 0:return[4,XH(t,e)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:e},[4,nI(t,r)];case 2:return i.sent(),[2,r.token]}})})}function tK(t,e){return Ee(this,void 0,void 0,function(){var n;return we(this,function(r){switch(r.label){case 0:return[4,t.pushManager.getSubscription()];case 1:return n=r.sent(),n?[2,n]:[2,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:jH(e)})]}})})}function nK(t,e){var n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,i=e.auth===t.auth,o=e.p256dh===t.p256dh;return n&&r&&i&&o}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var El;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(El||(El={}));/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t3(t){return typeof t=="object"&&!!t&&JF in t}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rK=function(){function t(e){var n=this;this.firebaseDependencies=e,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",function(r){return n.messageEventListener(r)})}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!0,configurable:!0}),t.prototype.getToken=function(){return Ee(this,void 0,void 0,function(){var e;return we(this,function(n){switch(n.label){case 0:return this.vapidKey||(this.vapidKey=Em),[4,this.getServiceWorkerRegistration()];case 1:return e=n.sent(),Notification.permission!=="default"?[3,3]:[4,Notification.requestPermission()];case 2:n.sent(),n.label=3;case 3:if(Notification.permission!=="granted")throw nn.create("permission-blocked");return[2,TS(this.firebaseDependencies,e,this.vapidKey)]}})})},t.prototype.deleteToken=function(){return Ee(this,void 0,void 0,function(){var e;return we(this,function(n){switch(n.label){case 0:return[4,this.getServiceWorkerRegistration()];case 1:return e=n.sent(),[2,Wf(this.firebaseDependencies,e)]}})})},t.prototype.requestPermission=function(){return Ee(this,void 0,void 0,function(){var e;return we(this,function(n){switch(n.label){case 0:return Notification.permission==="granted"?[2]:[4,Notification.requestPermission()];case 1:if(e=n.sent(),e==="granted")return[2];throw e==="denied"?nn.create("permission-blocked"):nn.create("permission-default")}})})},t.prototype.usePublicVapidKey=function(e){if(this.vapidKey!==null)throw nn.create("use-vapid-key-after-get-token");if(typeof e!="string"||e.length===0)throw nn.create("invalid-vapid-key");this.vapidKey=e},t.prototype.useServiceWorker=function(e){if(!(e instanceof ServiceWorkerRegistration))throw nn.create("invalid-sw-registration");if(this.swRegistration)throw nn.create("use-sw-after-get-token");this.swRegistration=e},t.prototype.onMessage=function(e){var n=this;return this.onMessageCallback=typeof e=="function"?e:e.next,function(){n.onMessageCallback=null}},t.prototype.setBackgroundMessageHandler=function(){throw nn.create("only-available-in-sw")},t.prototype.onTokenRefresh=function(){return function(){}},t.prototype.getServiceWorkerRegistration=function(){return Ee(this,void 0,void 0,function(){var e,n;return we(this,function(r){switch(r.label){case 0:if(this.swRegistration)return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),e=this,[4,navigator.serviceWorker.register(GH,{scope:$H})];case 2:return e.swRegistration=r.sent(),this.swRegistration.update().catch(function(){}),[3,4];case 3:throw n=r.sent(),nn.create("failed-service-worker-registration",{browserErrorMessage:n.message});case 4:return[2,this.swRegistration]}})})},t.prototype.messageEventListener=function(e){var n;return Ee(this,void 0,void 0,function(){var r,i,o,u;return we(this,function(h){switch(h.label){case 0:return!((n=e.data)===null||n===void 0)&&n.firebaseMessaging?(r=e.data.firebaseMessaging,i=r.type,o=r.payload,this.onMessageCallback&&i===El.PUSH_RECEIVED&&this.onMessageCallback(o),u=o.data,t3(u)&&u[QH]==="1"?[4,this.logEvent(i,u)]:[3,2]):[2];case 1:h.sent(),h.label=2;case 2:return[2]}})})},t.prototype.logEvent=function(e,n){return Ee(this,void 0,void 0,function(){var r,i;return we(this,function(o){switch(o.label){case 0:return r=iK(e),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return i=o.sent(),i.logEvent(r,{message_id:n[JF],message_name:n[KH],message_time:n[YH],message_device_time:Math.floor(Date.now()/1e3)}),[2]}})})},t}();function iK(t){switch(t){case El.NOTIFICATION_CLICKED:return"notification_open";case El.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oK(t){return new Promise(function(e){setTimeout(e,t)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sK=function(){function t(e){var n=this;this.firebaseDependencies=e,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",function(r){r.waitUntil(n.onPush(r))}),self.addEventListener("pushsubscriptionchange",function(r){r.waitUntil(n.onSubChange(r))}),self.addEventListener("notificationclick",function(r){r.waitUntil(n.onNotificationClick(r))})}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!0,configurable:!0}),t.prototype.setBackgroundMessageHandler=function(e){if(!e||typeof e!="function")throw nn.create("invalid-bg-handler");this.bgMessageHandler=e},t.prototype.getToken=function(){var e,n;return Ee(this,void 0,void 0,function(){var r;return we(this,function(i){switch(i.label){case 0:return this.vapidKey?[3,2]:[4,wm(this.firebaseDependencies)];case 1:r=i.sent(),this.vapidKey=(n=(e=r==null?void 0:r.subscriptionOptions)===null||e===void 0?void 0:e.vapidKey)!==null&&n!==void 0?n:Em,i.label=2;case 2:return[2,TS(this.firebaseDependencies,self.registration,this.vapidKey)]}})})},t.prototype.deleteToken=function(){return Wf(this.firebaseDependencies,self.registration)},t.prototype.requestPermission=function(){throw nn.create("only-available-in-window")},t.prototype.usePublicVapidKey=function(e){if(this.vapidKey!==null)throw nn.create("use-vapid-key-after-get-token");if(typeof e!="string"||e.length===0)throw nn.create("invalid-vapid-key");this.vapidKey=e},t.prototype.useServiceWorker=function(){throw nn.create("only-available-in-window")},t.prototype.onMessage=function(){throw nn.create("only-available-in-window")},t.prototype.onTokenRefresh=function(){throw nn.create("only-available-in-window")},t.prototype.onPush=function(e){return Ee(this,void 0,void 0,function(){var n,r,i;return we(this,function(o){switch(o.label){case 0:return n=aK(e),n?[4,n3()]:[2];case 1:return r=o.sent(),cK(r)?[2,hK(r,n)]:(i=uK(n),i?[4,fK(i)]:[3,3]);case 2:return o.sent(),[3,5];case 3:return this.bgMessageHandler?[4,this.bgMessageHandler(n)]:[3,5];case 4:o.sent(),o.label=5;case 5:return[2]}})})},t.prototype.onSubChange=function(e){var n,r;return Ee(this,void 0,void 0,function(){var i,o;return we(this,function(u){switch(u.label){case 0:return i=e.newSubscription,i?[3,2]:[4,Wf(this.firebaseDependencies,self.registration)];case 1:return u.sent(),[2];case 2:return[4,wm(this.firebaseDependencies)];case 3:return o=u.sent(),[4,Wf(this.firebaseDependencies,self.registration)];case 4:return u.sent(),[4,TS(this.firebaseDependencies,self.registration,(r=(n=o==null?void 0:o.subscriptionOptions)===null||n===void 0?void 0:n.vapidKey)!==null&&r!==void 0?r:Em)];case 5:return u.sent(),[2]}})})},t.prototype.onNotificationClick=function(e){var n,r;return Ee(this,void 0,void 0,function(){var i,o,u,h;return we(this,function(f){switch(f.label){case 0:if(i=(r=(n=e.notification)===null||n===void 0?void 0:n.data)===null||r===void 0?void 0:r[XF],i){if(e.action)return[2]}else return[2];return e.stopImmediatePropagation(),e.notification.close(),o=dK(i),o?[4,lK(o)]:[2];case 1:return u=f.sent(),u?[3,4]:[4,self.clients.openWindow(o)];case 2:return u=f.sent(),[4,oK(3e3)];case 3:return f.sent(),[3,6];case 4:return[4,u.focus()];case 5:u=f.sent(),f.label=6;case 6:return u?(h=r3(El.NOTIFICATION_CLICKED,i),[2,u.postMessage(h)]):[2]}})})},t}();function aK(t){var e=t.data;if(!e)return null;try{return e.json()}catch{return null}}function uK(t){var e;if(!(!t||typeof t.notification!="object")){var n=wn({},t.notification);return n.data=wn(wn({},t.notification.data),(e={},e[XF]=t,e)),n}}function lK(t){return Ee(this,void 0,void 0,function(){var e,n,r,i,o,u,h,f;return we(this,function(v){switch(v.label){case 0:return e=new URL(t,self.location.href).href,[4,n3()];case 1:n=v.sent();try{for(r=zn(n),i=r.next();!i.done;i=r.next())if(o=i.value,u=new URL(o.url,self.location.href).href,u===e)return[2,o]}catch(_){h={error:_}}finally{try{i&&!i.done&&(f=r.return)&&f.call(r)}finally{if(h)throw h.error}}return[2,null]}})})}function cK(t){return t.some(function(e){return e.visibilityState==="visible"&&!e.url.startsWith("chrome-extension://")})}function hK(t,e){var n,r,i=r3(El.PUSH_RECEIVED,e);try{for(var o=zn(t),u=o.next();!u.done;u=o.next()){var h=u.value;h.postMessage(i)}}catch(f){n={error:f}}finally{try{u&&!u.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}function n3(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function r3(t,e){return{firebaseMessaging:{type:t,payload:e}}}function fK(t){var e,n=(e=t.title)!==null&&e!==void 0?e:"",r=t.actions,i=Notification.maxActions;return r&&i&&r.length>i&&console.warn("This browser only supports "+i+" actions. The remaining actions will not be displayed."),self.registration.showNotification(n,t)}function dK(t){var e,n,r,i=(n=(e=t.fcmOptions)===null||e===void 0?void 0:e.link)!==null&&n!==void 0?n:(r=t.notification)===null||r===void 0?void 0:r.click_action;return i||(t3(t.data)?self.location.origin:null)}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pK="messaging";function gK(t){var e=t.getProvider("app").getImmediate(),n=FH(e),r=t.getProvider("installations").getImmediate(),i=t.getProvider("analytics-internal"),o={app:e,appConfig:n,installations:r,analyticsProvider:i};if(!i3())throw nn.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new sK(o):new rK(o)}var vK={isSupported:i3};ze.INTERNAL.registerComponent(new Es(pK,gK,"PUBLIC").setServiceProps(vK));function i3(){return self&&"ServiceWorkerGlobalScope"in self?yK():mK()}function mK(){return"indexedDB"in window&&indexedDB!==null&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function yK(){return"indexedDB"in self&&indexedDB!==null&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var o3="firebasestorage.googleapis.com",s3="storageBucket",_K=2*60*1e3,wK=10*60*1e3,EK=-9007199254740991;/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dr=function(){function t(e,n){this.code_=Bk(e),this.message_="Firebase Storage: "+n,this.serverResponse_=null,this.name_="FirebaseError"}return t.prototype.codeProp=function(){return this.code},t.prototype.codeEquals=function(e){return Bk(e)===this.codeProp()},t.prototype.serverResponseProp=function(){return this.serverResponse_},t.prototype.setServerResponseProp=function(e){this.serverResponse_=e},Object.defineProperty(t.prototype,"name",{get:function(){return this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"code",{get:function(){return this.code_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"message",{get:function(){return this.message_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!0,configurable:!0}),t}(),$n={UNKNOWN:"unknown",OBJECT_NOT_FOUND:"object-not-found",BUCKET_NOT_FOUND:"bucket-not-found",PROJECT_NOT_FOUND:"project-not-found",QUOTA_EXCEEDED:"quota-exceeded",UNAUTHENTICATED:"unauthenticated",UNAUTHORIZED:"unauthorized",RETRY_LIMIT_EXCEEDED:"retry-limit-exceeded",INVALID_CHECKSUM:"invalid-checksum",CANCELED:"canceled",INVALID_EVENT_NAME:"invalid-event-name",INVALID_URL:"invalid-url",INVALID_DEFAULT_BUCKET:"invalid-default-bucket",NO_DEFAULT_BUCKET:"no-default-bucket",CANNOT_SLICE_BLOB:"cannot-slice-blob",SERVER_FILE_WRONG_SIZE:"server-file-wrong-size",NO_DOWNLOAD_URL:"no-download-url",INVALID_ARGUMENT:"invalid-argument",INVALID_ARGUMENT_COUNT:"invalid-argument-count",APP_DELETED:"app-deleted",INVALID_ROOT_OPERATION:"invalid-root-operation",INVALID_FORMAT:"invalid-format",INTERNAL_ERROR:"internal-error"};function Bk(t){return"storage/"+t}function sI(){var t="An unknown error occurred, please check the error payload for server response.";return new dr($n.UNKNOWN,t)}function SK(t){return new dr($n.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function bK(t){return new dr($n.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function TK(){var t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new dr($n.UNAUTHENTICATED,t)}function IK(t){return new dr($n.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function CK(){return new dr($n.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function a3(){return new dr($n.CANCELED,"User canceled the upload/download.")}function xK(t){return new dr($n.INVALID_URL,"Invalid URL '"+t+"'.")}function NK(t){return new dr($n.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function AK(){return new dr($n.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+s3+"' property when initializing the app?")}function u3(){return new dr($n.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function kK(){return new dr($n.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function PK(){return new dr($n.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function zk(t,e,n){return new dr($n.INVALID_ARGUMENT,"Invalid argument in `"+e+"` at index "+t+": "+n)}function RK(t,e,n,r){var i,o;return t===e?(i=t,o=t===1?"argument":"arguments"):(i="between "+t+" and "+e,o="arguments"),new dr($n.INVALID_ARGUMENT_COUNT,"Invalid argument count in `"+n+"`: Expected "+i+" "+o+", received "+r+".")}function IS(){return new dr($n.APP_DELETED,"The Firebase app was deleted.")}function OK(t){return new dr($n.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Gf(t,e){return new dr($n.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Ug(t){throw new dr($n.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};function DK(t){switch(t){case Jn.RAW:case Jn.BASE64:case Jn.BASE64URL:case Jn.DATA_URL:return;default:throw"Expected one of the event types: ["+Jn.RAW+", "+Jn.BASE64+", "+Jn.BASE64URL+", "+Jn.DATA_URL+"]."}}var cE=function(){function t(e,n){this.data=e,this.contentType=n||null}return t}();function l3(t,e){switch(t){case Jn.RAW:return new cE(c3(e));case Jn.BASE64:case Jn.BASE64URL:return new cE(h3(t,e));case Jn.DATA_URL:return new cE(MK(e),FK(e))}throw sI()}function c3(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296){var i=n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320;if(!i)e.push(239,191,189);else{var o=r,u=t.charCodeAt(++n);r=65536|(o&1023)<<10|u&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function LK(t){var e;try{e=decodeURIComponent(t)}catch{throw Gf(Jn.DATA_URL,"Malformed data URL.")}return c3(e)}function h3(t,e){switch(t){case Jn.BASE64:{var n=e.indexOf("-")!==-1,r=e.indexOf("_")!==-1;if(n||r){var i=n?"-":"_";throw Gf(t,"Invalid character '"+i+"' found: is it base64url encoded?")}break}case Jn.BASE64URL:{var o=e.indexOf("+")!==-1,u=e.indexOf("/")!==-1;if(o||u){var i=o?"+":"/";throw Gf(t,"Invalid character '"+i+"' found: is it base64 encoded?")}e=e.replace(/-/g,"+").replace(/_/g,"/");break}}var h;try{h=atob(e)}catch{throw Gf(t,"Invalid character found")}for(var f=new Uint8Array(h.length),v=0;v<h.length;v++)f[v]=h.charCodeAt(v);return f}var f3=function(){function t(e){this.base64=!1,this.contentType=null;var n=e.match(/^data:([^,]+)?,/);if(n===null)throw Gf(Jn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;r!=null&&(this.base64=jK(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}return t}();function MK(t){var e=new f3(t);return e.base64?h3(Jn.BASE64,e.rest):LK(e.rest)}function FK(t){var e=new f3(t);return e.contentType}function jK(t,e){var n=t.length>=e.length;return n?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var CS={STATE_CHANGED:"state_changed"},bt={RUNNING:"running",PAUSING:"pausing",PAUSED:"paused",SUCCESS:"success",CANCELING:"canceling",CANCELED:"canceled",ERROR:"error"},oi={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function hE(t){switch(t){case bt.RUNNING:case bt.PAUSING:case bt.CANCELING:return oi.RUNNING;case bt.PAUSED:return oi.PAUSED;case bt.SUCCESS:return oi.SUCCESS;case bt.CANCELED:return oi.CANCELED;case bt.ERROR:return oi.ERROR;default:return oi.ERROR}}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qo(t){return t!=null}function Ma(t){return t!==void 0}function d3(t){return typeof t=="function"}function Dd(t){return typeof t=="object"}function UK(t){return Dd(t)&&t!==null}function VK(t){return Dd(t)&&!Array.isArray(t)}function Sh(t){return typeof t=="string"||t instanceof String}function BK(t){return p3(t)&&Number.isInteger(t)}function p3(t){return typeof t=="number"||t instanceof Number}function qk(t){return Ry()&&t instanceof Blob}function Ry(){return typeof Blob<"u"}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ol;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ol||(ol={}));/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zK=function(){function t(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=ol.NO_ERROR,this.sendPromise_=new Promise(function(n){e.xhr_.addEventListener("abort",function(){e.errorCode_=ol.ABORT,n(e)}),e.xhr_.addEventListener("error",function(){e.errorCode_=ol.NETWORK_ERROR,n(e)}),e.xhr_.addEventListener("load",function(){n(e)})})}return t.prototype.send=function(e,n,r,i){if(this.sent_)throw Ug("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),qo(i))for(var o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return qo(r)?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw Ug("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw Ug("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw Ug("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(e){return this.xhr_.getResponseHeader(e)},t.prototype.addUploadProgressListener=function(e){qo(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",e)},t.prototype.removeUploadProgressListener=function(e){qo(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",e)},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qK=function(){function t(){}return t.prototype.createXhrIo=function(){return new zK},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WK(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function GK(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=WK();if(n!==void 0){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}else{if(Ry())return new Blob(t);throw Error("This browser doesn't seem to support creating Blobs")}}function $K(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xS=function(){function t(e,n){var r=0,i="";qk(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(qk(this.data_)){var r=this.data_,i=$K(r,e,n);return i===null?null:new t(i)}else{var o=new Uint8Array(this.data_.buffer,e,n-e);return new t(o,!0)}},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(Ry()){var r=e.map(function(f){return f instanceof t?f.data_:f});return new t(GK.apply(null,r))}else{var i=e.map(function(f){return Sh(f)?l3(Jn.RAW,f).data:f.data_}),o=0;i.forEach(function(f){o+=f.byteLength});var u=new Uint8Array(o),h=0;return i.forEach(function(f){for(var v=0;v<f.length;v++)u[h++]=f[v]}),new t(u,!0)}},t.prototype.uploadData=function(){return this.data_},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lo=function(){function t(e,n){this.bucket=e,this.path_=n}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return this.path.length===0},enumerable:!0,configurable:!0}),t.prototype.fullServerUrl=function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)},t.prototype.bucketOnlyServerUrl=function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o"},t.makeFromBucketSpec=function(e){var n;try{n=t.makeFromUrl(e)}catch{return new t(e,"")}if(n.path==="")return n;throw NK(e)},t.makeFromUrl=function(e){var n=null,r="([A-Za-z0-9.\\-_]+)";function i(he){he.path.charAt(he.path.length-1)==="/"&&(he.path_=he.path_.slice(0,-1))}var o="(/(.*))?$",u=new RegExp("^gs://"+r+o,"i"),h={bucket:1,path:3};function f(he){he.path_=decodeURIComponent(he.path)}for(var v="v[A-Za-z0-9_]+",_=o3.replace(/[.]/g,"\\."),b="(/([^?#]*).*)?$",S=new RegExp("^https?://"+_+"/"+v+"/b/"+r+"/o"+b,"i"),I={bucket:1,path:3},M="(?:storage.googleapis.com|storage.cloud.google.com)",D="([^?#]*)",ne=new RegExp("^https?://"+M+"/"+r+"/"+D,"i"),z={bucket:1,path:2},Y=[{regex:u,indices:h,postModify:i},{regex:S,indices:I,postModify:f},{regex:ne,indices:z,postModify:f}],K=0;K<Y.length;K++){var ue=Y[K],oe=ue.regex.exec(e);if(oe){var fe=oe[ue.indices.bucket],me=oe[ue.indices.path];me||(me=""),n=new t(fe,me),ue.postModify(n);break}}if(n==null)throw xK(e);return n},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aI(t){var e;try{e=JSON.parse(t)}catch{return null}return VK(e)?e:null}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HK(t){if(t.length===0)return null;var e=t.lastIndexOf("/");if(e===-1)return"";var n=t.slice(0,e);return n}function KK(t,e){var n=e.split("/").filter(function(r){return r.length>0}).join("/");return t.length===0?n:t+"/"+n}function g3(t){var e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _u(t){return"https://"+o3+"/v0"+t}function v3(t){var e=encodeURIComponent,n="?";for(var r in t)if(t.hasOwnProperty(r)){var i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YK(t,e){return e}var Jr=function(){function t(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||YK}return t}(),Vg=null;function QK(t){return!Sh(t)||t.length<2?t:g3(t)}function XK(){if(Vg)return Vg;var t=[];t.push(new Jr("bucket")),t.push(new Jr("generation")),t.push(new Jr("metageneration")),t.push(new Jr("name","fullPath",!0));function e(o,u){return QK(u)}var n=new Jr("name");n.xform=e,t.push(n);function r(o,u){return qo(u)?Number(u):u}var i=new Jr("size");return i.xform=r,t.push(i),t.push(new Jr("timeCreated")),t.push(new Jr("updated")),t.push(new Jr("md5Hash",null,!0)),t.push(new Jr("cacheControl",null,!0)),t.push(new Jr("contentDisposition",null,!0)),t.push(new Jr("contentEncoding",null,!0)),t.push(new Jr("contentLanguage",null,!0)),t.push(new Jr("contentType",null,!0)),t.push(new Jr("metadata","customMetadata",!0)),Vg=t,Vg}function JK(t,e){function n(){var r=t.bucket,i=t.fullPath,o=new lo(r,i);return e.makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function ZK(t,e,n){var r={};r.type="file";for(var i=n.length,o=0;o<i;o++){var u=n[o];r[u.local]=u.xform(r,e[u.server])}return JK(r,t),r}function m3(t,e,n){var r=aI(e);if(r===null)return null;var i=r;return ZK(t,i,n)}function eY(t,e){var n=aI(e);if(n===null||!Sh(n.downloadTokens))return null;var r=n.downloadTokens;if(r.length===0)return null;var i=encodeURIComponent,o=r.split(","),u=o.map(function(h){var f=t.bucket,v=t.fullPath,_="/b/"+i(f)+"/o/"+i(v),b=_u(_),S=v3({alt:"media",token:h});return b+S});return u[0]}function uI(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}function tY(t){if(!Dd(t)||!t)throw"Expected Metadata object.";for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];if(e==="customMetadata"){if(!Dd(n))throw"Expected object for 'customMetadata' mapping."}else if(UK(n))throw"Mapping for '"+e+"' cannot be an object."}}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bg="maxResults",nY=1e3,fE="pageToken",Wk="prefixes",Gk="items";function rY(t,e){var n={prefixes:[],items:[],nextPageToken:e.nextPageToken},r=t.bucket();if(r===null)throw AK();if(e[Wk])for(var i=0,o=e[Wk];i<o.length;i++){var u=o[i],h=u.replace(/\/$/,""),f=t.makeStorageReference(new lo(r,h));n.prefixes.push(f)}if(e[Gk])for(var v=0,_=e[Gk];v<_.length;v++){var b=_[v],f=t.makeStorageReference(new lo(r,b.name));n.items.push(f)}return n}function iY(t,e){var n=aI(e);if(n===null)return null;var r=n;return rY(t,r)}function oY(t){if(!Dd(t)||!t)throw"Expected ListOptions object.";for(var e in t)if(e===Bg){if(!BK(t[Bg])||t[Bg]<=0)throw"Expected maxResults to be a positive number.";if(t[Bg]>1e3)throw"Expected maxResults to be less than or equal to "+nY+"."}else if(e===fE){if(t[fE]&&!Sh(t[fE]))throw"Expected pageToken to be string."}else throw"Unknown option: "+e}var _a=function(){function t(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}return t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ys(t){if(!t)throw sI()}function Oy(t,e){function n(r,i){var o=m3(t,i,e);return ys(o!==null),o}return n}function sY(t){function e(n,r){var i=iY(t,r);return ys(i!==null),i}return e}function aY(t,e){function n(r,i){var o=m3(t,i,e);return ys(o!==null),eY(o,i)}return n}function bh(t){function e(n,r){var i;return n.getStatus()===401?i=TK():n.getStatus()===402?i=bK(t.bucket):n.getStatus()===403?i=IK(t.path):i=r,i.setServerResponseProp(r.serverResponseProp()),i}return e}function Dy(t){var e=bh(t);function n(r,i){var o=e(r,i);return r.getStatus()===404&&(o=SK(t.path)),o.setServerResponseProp(i.serverResponseProp()),o}return n}function y3(t,e,n){var r=e.fullServerUrl(),i=_u(r),o="GET",u=t.maxOperationRetryTime(),h=new _a(i,o,Oy(t,n),u);return h.errorHandler=Dy(e),h}function uY(t,e,n,r,i){var o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var u=e.bucketOnlyServerUrl(),h=_u(u),f="GET",v=t.maxOperationRetryTime(),_=new _a(h,f,sY(t),v);return _.urlParams=o,_.errorHandler=bh(e),_}function lY(t,e,n){var r=e.fullServerUrl(),i=_u(r),o="GET",u=t.maxOperationRetryTime(),h=new _a(i,o,aY(t,n),u);return h.errorHandler=Dy(e),h}function cY(t,e,n,r){var i=e.fullServerUrl(),o=_u(i),u="PATCH",h=uI(n,r),f={"Content-Type":"application/json; charset=utf-8"},v=t.maxOperationRetryTime(),_=new _a(o,u,Oy(t,r),v);return _.headers=f,_.body=h,_.errorHandler=Dy(e),_}function hY(t,e){var n=e.fullServerUrl(),r=_u(n),i="DELETE",o=t.maxOperationRetryTime();function u(f,v){}var h=new _a(r,i,u,o);return h.successCodes=[200,204],h.errorHandler=Dy(e),h}function fY(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function _3(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=fY(null,e)),r}function dY(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"};function h(){for(var K="",ue=0;ue<2;ue++)K=K+Math.random().toString().slice(2);return K}var f=h();u["Content-Type"]="multipart/related; boundary="+f;var v=_3(e,r,i),_=uI(v,n),b="--"+f+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+_+`\r
--`+f+`\r
Content-Type: `+v.contentType+`\r
\r
`,S=`\r
--`+f+"--",I=xS.getBlob(b,r,S);if(I===null)throw u3();var M={name:v.fullPath},D=_u(o),ne="POST",z=t.maxUploadRetryTime(),Y=new _a(D,ne,Oy(t,n),z);return Y.urlParams=M,Y.headers=u,Y.body=I.uploadData(),Y.errorHandler=bh(e),Y}var Sm=function(){function t(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}return t}();function lI(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{ys(!1)}var r=e||["active"];return ys(!!n&&r.indexOf(n)!==-1),n}function pY(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),u=_3(e,r,i),h={name:u.fullPath},f=_u(o),v="POST",_={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":u.contentType,"Content-Type":"application/json; charset=utf-8"},b=uI(u,n),S=t.maxUploadRetryTime();function I(D){lI(D);var ne;try{ne=D.getResponseHeader("X-Goog-Upload-URL")}catch{ys(!1)}return ys(Sh(ne)),ne}var M=new _a(f,v,I,S);return M.urlParams=h,M.headers=_,M.body=b,M.errorHandler=bh(e),M}function gY(t,e,n,r){var i={"X-Goog-Upload-Command":"query"};function o(v){var _=lI(v,["active","final"]),b=null;try{b=v.getResponseHeader("X-Goog-Upload-Size-Received")}catch{ys(!1)}b||ys(!1);var S=Number(b);return ys(!isNaN(S)),new Sm(S,r.size(),_==="final")}var u="POST",h=t.maxUploadRetryTime(),f=new _a(n,u,o,h);return f.headers=i,f.errorHandler=bh(e),f}var $k=256*1024;function vY(t,e,n,r,i,o,u,h){var f=new Sm(0,0);if(u?(f.current=u.current,f.total=u.total):(f.current=0,f.total=r.size()),r.size()!==f.total)throw kK();var v=f.total-f.current,_=v;i>0&&(_=Math.min(_,i));var b=f.current,S=b+_,I=_===v?"upload, finalize":"upload",M={"X-Goog-Upload-Command":I,"X-Goog-Upload-Offset":f.current},D=r.slice(b,S);if(D===null)throw u3();function ne(ue,oe){var fe=lI(ue,["active","final"]),me=f.current+_,he=r.size(),Z;return fe==="final"?Z=Oy(e,o)(ue,oe):Z=null,new Sm(me,he,fe==="final",Z)}var z="POST",Y=e.maxUploadRetryTime(),K=new _a(n,z,ne,Y);return K.headers=M,K.body=D.uploadData(),K.progressCallback=h||null,K.errorHandler=bh(t),K}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mY=function(){function t(e,n,r){var i=d3(e)||qo(n)||qo(r);if(i)this.next=e,this.error=n||null,this.complete=r||null;else{var o=e;this.next=o.next||null,this.error=o.error||null,this.complete=o.complete||null}}return t}(),yY=function(){function t(e,n,r,i,o,u){this.bytesTransferred=e,this.totalBytes=n,this.state=r,this.metadata=i,this.task=o,this.ref=u}return t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ar(t,e,n){for(var r=e.length,i=e.length,o=0;o<e.length;o++)if(e[o].optional){r=o;break}var u=r<=n.length&&n.length<=i;if(!u)throw RK(r,i,t,n.length);for(var o=0;o<n.length;o++)try{e[o].validator(n[o])}catch(f){throw f instanceof Error?zk(o,t,f.message):zk(o,t,f)}}var Ol=function(){function t(e,n){var r=this;this.validator=function(i){r.optional&&!Ma(i)||e(i)},this.optional=!!n}return t}();function _Y(t,e){return function(n){t(n),e(n)}}function Wc(t,e){function n(i){if(!Sh(i))throw"Expected string."}var r;return t?r=_Y(n,t):r=n,new Ol(r,e)}function wY(){function t(e){var n=e instanceof Uint8Array||e instanceof ArrayBuffer||Ry()&&e instanceof Blob;if(!n)throw"Expected Blob or File."}return new Ol(t)}function dE(t){return new Ol(tY,t)}function EY(t){return new Ol(oY,t)}function Hk(){function t(e){var n=p3(e)&&e>=0;if(!n)throw"Expected a number 0 or greater."}return new Ol(t)}function pE(t,e){function n(r){var i=r===null||qo(r)&&r instanceof Object;if(!i)throw"Expected an Object.";t!=null&&t(r)}return new Ol(n,e)}function vf(t){function e(n){var r=n===null||d3(n);if(!r)throw"Expected a Function."}return new Ol(e,t)}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ac(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then(function(){return t.apply(void 0,e)})}}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kk=function(){function t(e,n,r,i,o,u){var h=this;u===void 0&&(u=null),this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=e,this.authWrapper_=n,this.location_=r,this.blob_=o,this.metadata_=u,this.mappings_=i,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_=bt.RUNNING,this.errorHandler_=function(f){h.request_=null,h.chunkMultiplier_=1,f.codeEquals($n.CANCELED)?(h.needToFetchStatus_=!0,h.completeTransitions_()):(h.error_=f,h.transition_(bt.ERROR))},this.metadataErrorHandler_=function(f){h.request_=null,f.codeEquals($n.CANCELED)?h.completeTransitions_():(h.error_=f,h.transition_(bt.ERROR))},this.promise_=new Promise(function(f,v){h.resolve_=f,h.reject_=v,h.start_()}),this.promise_.then(null,function(){})}return t.prototype.makeProgressCallback_=function(){var e=this,n=this.transferred_;return function(r){return e.updateProgress_(n+r)}},t.prototype.shouldDoResumable_=function(e){return e.size()>256*1024},t.prototype.start_=function(){this.state_===bt.RUNNING&&this.request_===null&&(this.resumable_?this.uploadUrl_===null?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},t.prototype.resolveToken_=function(e){var n=this;this.authWrapper_.getAuthToken().then(function(r){switch(n.state_){case bt.RUNNING:e(r);break;case bt.CANCELING:n.transition_(bt.CANCELED);break;case bt.PAUSING:n.transition_(bt.PAUSED);break}})},t.prototype.createResumable_=function(){var e=this;this.resolveToken_(function(n){var r=pY(e.authWrapper_,e.location_,e.mappings_,e.blob_,e.metadata_),i=e.authWrapper_.makeRequest(r,n);e.request_=i,i.getPromise().then(function(o){e.request_=null,e.uploadUrl_=o,e.needToFetchStatus_=!1,e.completeTransitions_()},e.errorHandler_)})},t.prototype.fetchStatus_=function(){var e=this,n=this.uploadUrl_;this.resolveToken_(function(r){var i=gY(e.authWrapper_,e.location_,n,e.blob_),o=e.authWrapper_.makeRequest(i,r);e.request_=o,o.getPromise().then(function(u){u=u,e.request_=null,e.updateProgress_(u.current),e.needToFetchStatus_=!1,u.finalized&&(e.needToFetchMetadata_=!0),e.completeTransitions_()},e.errorHandler_)})},t.prototype.continueUpload_=function(){var e=this,n=$k*this.chunkMultiplier_,r=new Sm(this.transferred_,this.blob_.size()),i=this.uploadUrl_;this.resolveToken_(function(o){var u;try{u=vY(e.location_,e.authWrapper_,i,e.blob_,n,e.mappings_,r,e.makeProgressCallback_())}catch(f){e.error_=f,e.transition_(bt.ERROR);return}var h=e.authWrapper_.makeRequest(u,o);e.request_=h,h.getPromise().then(function(f){e.increaseMultiplier_(),e.request_=null,e.updateProgress_(f.current),f.finalized?(e.metadata_=f.metadata,e.transition_(bt.SUCCESS)):e.completeTransitions_()},e.errorHandler_)})},t.prototype.increaseMultiplier_=function(){var e=$k*this.chunkMultiplier_;e<32*1024*1024&&(this.chunkMultiplier_*=2)},t.prototype.fetchMetadata_=function(){var e=this;this.resolveToken_(function(n){var r=y3(e.authWrapper_,e.location_,e.mappings_),i=e.authWrapper_.makeRequest(r,n);e.request_=i,i.getPromise().then(function(o){e.request_=null,e.metadata_=o,e.transition_(bt.SUCCESS)},e.metadataErrorHandler_)})},t.prototype.oneShotUpload_=function(){var e=this;this.resolveToken_(function(n){var r=dY(e.authWrapper_,e.location_,e.mappings_,e.blob_,e.metadata_),i=e.authWrapper_.makeRequest(r,n);e.request_=i,i.getPromise().then(function(o){e.request_=null,e.metadata_=o,e.updateProgress_(e.blob_.size()),e.transition_(bt.SUCCESS)},e.errorHandler_)})},t.prototype.updateProgress_=function(e){var n=this.transferred_;this.transferred_=e,this.transferred_!==n&&this.notifyObservers_()},t.prototype.transition_=function(e){if(this.state_!==e)switch(e){case bt.CANCELING:this.state_=e,this.request_!==null&&this.request_.cancel();break;case bt.PAUSING:this.state_=e,this.request_!==null&&this.request_.cancel();break;case bt.RUNNING:var n=this.state_===bt.PAUSED;this.state_=e,n&&(this.notifyObservers_(),this.start_());break;case bt.PAUSED:this.state_=e,this.notifyObservers_();break;case bt.CANCELED:this.error_=a3(),this.state_=e,this.notifyObservers_();break;case bt.ERROR:this.state_=e,this.notifyObservers_();break;case bt.SUCCESS:this.state_=e,this.notifyObservers_();break}},t.prototype.completeTransitions_=function(){switch(this.state_){case bt.PAUSING:this.transition_(bt.PAUSED);break;case bt.CANCELING:this.transition_(bt.CANCELED);break;case bt.RUNNING:this.start_();break}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var e=hE(this.state_);return new yY(this.transferred_,this.blob_.size(),e,this.metadata_,this,this.ref_)},enumerable:!0,configurable:!0}),t.prototype.on=function(e,n,r,i){function o(){if(e!==CS.STATE_CHANGED)throw"Expected one of the event types: ["+CS.STATE_CHANGED+"]."}var u="Expected a function or an Object with one of `next`, `error`, `complete` properties.",h=vf(!0).validator,f=pE(null,!0).validator;function v(ne){try{h(ne);return}catch{}try{f(ne);var z=Ma(ne.next)||Ma(ne.error)||Ma(ne.complete);if(!z)throw"";return}catch{throw u}}var _=[Wc(o),pE(v,!0),vf(!0),vf(!0)];ar("on",_,arguments);var b=this;function S(ne){function z(Y,K,ue){ne!==null&&ar("on",ne,arguments);var oe=new mY(Y,K,i);return b.addObserver_(oe),function(){b.removeObserver_(oe)}}return z}function I(ne){if(ne===null)throw u;v(ne)}var M=[pE(I),vf(!0),vf(!0)],D=!(Ma(n)||Ma(r)||Ma(i));return D?S(M):S(null)(n,r,i)},t.prototype.then=function(e,n){return this.promise_.then(e,n)},t.prototype.catch=function(e){return this.then(null,e)},t.prototype.addObserver_=function(e){this.observers_.push(e),this.notifyObserver_(e)},t.prototype.removeObserver_=function(e){var n=this.observers_.indexOf(e);n!==-1&&this.observers_.splice(n,1)},t.prototype.notifyObservers_=function(){var e=this;this.finishPromise_();var n=this.observers_.slice();n.forEach(function(r){e.notifyObserver_(r)})},t.prototype.finishPromise_=function(){if(this.resolve_!==null){var e=!0;switch(hE(this.state_)){case oi.SUCCESS:ac(this.resolve_.bind(null,this.snapshot))();break;case oi.CANCELED:case oi.ERROR:var n=this.reject_;ac(n.bind(null,this.error_))();break;default:e=!1;break}e&&(this.resolve_=null,this.reject_=null)}},t.prototype.notifyObserver_=function(e){var n=hE(this.state_);switch(n){case oi.RUNNING:case oi.PAUSED:e.next&&ac(e.next.bind(e,this.snapshot))();break;case oi.SUCCESS:e.complete&&ac(e.complete.bind(e))();break;case oi.CANCELED:case oi.ERROR:e.error&&ac(e.error.bind(e,this.error_))();break;default:e.error&&ac(e.error.bind(e,this.error_))()}},t.prototype.resume=function(){ar("resume",[],arguments);var e=this.state_===bt.PAUSED||this.state_===bt.PAUSING;return e&&this.transition_(bt.RUNNING),e},t.prototype.pause=function(){ar("pause",[],arguments);var e=this.state_===bt.RUNNING;return e&&this.transition_(bt.PAUSING),e},t.prototype.cancel=function(){ar("cancel",[],arguments);var e=this.state_===bt.RUNNING||this.state_===bt.PAUSING;return e&&this.transition_(bt.CANCELING),e},t}();/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fv=function(){function t(e,n){this.authWrapper=e,n instanceof lo?this.location=n:this.location=lo.makeFromUrl(n)}return t.prototype.toString=function(){return ar("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},t.prototype.newRef=function(e,n){return new t(e,n)},t.prototype.mappings=function(){return XK()},t.prototype.child=function(e){ar("child",[Wc()],arguments);var n=KK(this.location.path,e),r=new lo(this.location.bucket,n);return this.newRef(this.authWrapper,r)},Object.defineProperty(t.prototype,"parent",{get:function(){var e=HK(this.location.path);if(e===null)return null;var n=new lo(this.location.bucket,e);return this.newRef(this.authWrapper,n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){var e=new lo(this.location.bucket,"");return this.newRef(this.authWrapper,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return g3(this.location.path)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this.authWrapper.service()},enumerable:!0,configurable:!0}),t.prototype.put=function(e,n){return n===void 0&&(n=null),ar("put",[wY(),dE(!0)],arguments),this.throwIfRoot_("put"),new Kk(this,this.authWrapper,this.location,this.mappings(),new xS(e),n)},t.prototype.putString=function(e,n,r){n===void 0&&(n=Jn.RAW),ar("putString",[Wc(),Wc(DK,!0),dE(!0)],arguments),this.throwIfRoot_("putString");var i=l3(n,e),o=Object.assign({},r);return!qo(o.contentType)&&qo(i.contentType)&&(o.contentType=i.contentType),new Kk(this,this.authWrapper,this.location,this.mappings(),new xS(i.data,!0),o)},t.prototype.delete=function(){var e=this;return ar("delete",[],arguments),this.throwIfRoot_("delete"),this.authWrapper.getAuthToken().then(function(n){var r=hY(e.authWrapper,e.location);return e.authWrapper.makeRequest(r,n).getPromise()})},t.prototype.listAll=function(){ar("listAll",[],arguments);var e={prefixes:[],items:[]};return this.listAllHelper(e).then(function(){return e})},t.prototype.listAllHelper=function(e,n){return Ee(this,void 0,void 0,function(){var r,i,o,u;return we(this,function(h){switch(h.label){case 0:return r={pageToken:n},[4,this.list(r)];case 1:return i=h.sent(),(o=e.prefixes).push.apply(o,i.prefixes),(u=e.items).push.apply(u,i.items),i.nextPageToken==null?[3,3]:[4,this.listAllHelper(e,i.nextPageToken)];case 2:h.sent(),h.label=3;case 3:return[2]}})})},t.prototype.list=function(e){ar("list",[EY(!0)],arguments);var n=this;return this.authWrapper.getAuthToken().then(function(r){var i=e||{},o=uY(n.authWrapper,n.location,"/",i.pageToken,i.maxResults);return n.authWrapper.makeRequest(o,r).getPromise()})},t.prototype.getMetadata=function(){var e=this;return ar("getMetadata",[],arguments),this.throwIfRoot_("getMetadata"),this.authWrapper.getAuthToken().then(function(n){var r=y3(e.authWrapper,e.location,e.mappings());return e.authWrapper.makeRequest(r,n).getPromise()})},t.prototype.updateMetadata=function(e){var n=this;return ar("updateMetadata",[dE()],arguments),this.throwIfRoot_("updateMetadata"),this.authWrapper.getAuthToken().then(function(r){var i=cY(n.authWrapper,n.location,e,n.mappings());return n.authWrapper.makeRequest(i,r).getPromise()})},t.prototype.getDownloadURL=function(){var e=this;return ar("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL"),this.authWrapper.getAuthToken().then(function(n){var r=lY(e.authWrapper,e.location,e.mappings());return e.authWrapper.makeRequest(r,n).getPromise().then(function(i){if(i===null)throw PK();return i})})},t.prototype.throwIfRoot_=function(e){if(this.location.path==="")throw OK(e)},t}(),SY=function(){function t(e){this.promise_=Promise.reject(e)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(e){},t}(),bY=function(){function t(){this.map=new Map,this.id=EK}return t.prototype.addRequest=function(e){var n=this,r=this.id;this.id++,this.map.set(r,e),e.getPromise().then(function(){return n.map.delete(r)},function(){return n.map.delete(r)})},t.prototype.clear=function(){this.map.forEach(function(e){e&&e.cancel(!0)}),this.map.clear()},t}(),TY=function(){function t(e,n,r,i,o,u){var h;if(this.bucket_=null,this.appId_=null,this.deleted_=!1,this.app_=e,this.app_!==null){var f=this.app_.options;qo(f)&&(this.bucket_=t.extractBucket_(f),this.appId_=(h=f.appId)!==null&&h!==void 0?h:null)}this.authProvider_=n,this.storageRefMaker_=r,this.requestMaker_=i,this.pool_=u,this.service_=o,this.maxOperationRetryTime_=_K,this.maxUploadRetryTime_=wK,this.requestMap_=new bY}return t.extractBucket_=function(e){var n=e[s3]||null;if(n==null)return null;var r=lo.makeFromBucketSpec(n);return r.bucket},t.prototype.getAuthToken=function(){var e=this.authProvider_.getImmediate({optional:!0});return e?e.getToken().then(function(n){return n!==null?n.accessToken:null},function(){return null}):Promise.resolve(null)},t.prototype.bucket=function(){if(this.deleted_)throw IS();return this.bucket_},t.prototype.service=function(){return this.service_},t.prototype.makeStorageReference=function(e){return this.storageRefMaker_(this,e)},t.prototype.makeRequest=function(e,n){if(this.deleted_)return new SY(IS());var r=this.requestMaker_(e,this.appId_,n,this.pool_);return this.requestMap_.addRequest(r),r},t.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requestMap_.clear()},t.prototype.maxUploadRetryTime=function(){return this.maxUploadRetryTime_},t.prototype.setMaxUploadRetryTime=function(e){this.maxUploadRetryTime_=e},t.prototype.maxOperationRetryTime=function(){return this.maxOperationRetryTime_},t.prototype.setMaxOperationRetryTime=function(e){this.maxOperationRetryTime_=e},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IY(t,e,n){var r=1,i=null,o=!1,u=0;function h(){return u===2}var f=!1;function v(){for(var M=[],D=0;D<arguments.length;D++)M[D]=arguments[D];f||(f=!0,e.apply(null,M))}function _(M){i=setTimeout(function(){i=null,t(b,h())},M)}function b(M){for(var D=[],ne=1;ne<arguments.length;ne++)D[ne-1]=arguments[ne];if(!f){if(M){v.call.apply(v,Wi([null,M],D));return}var z=h()||o;if(z){v.call.apply(v,Wi([null,M],D));return}r<64&&(r*=2);var Y;u===1?(u=2,Y=0):Y=(r+Math.random())*1e3,_(Y)}}var S=!1;function I(M){S||(S=!0,!f&&(i!==null?(M||(u=2),clearTimeout(i),_(0)):M||(u=1)))}return _(0),setTimeout(function(){o=!0,I(!0)},n),I}function CY(t){t(!1)}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xY=function(){function t(e,n,r,i,o,u,h,f,v,_,b){var S=this;this.pendingXhr_=null,this.backoffId_=null,this.resolve_=null,this.reject_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=o.slice(),this.additionalRetryCodes_=u.slice(),this.callback_=h,this.errorCallback_=f,this.progressCallback_=_,this.timeout_=v,this.pool_=b,this.promise_=new Promise(function(I,M){S.resolve_=I,S.reject_=M,S.start_()})}return t.prototype.start_=function(){var e=this;function n(i,o){if(o){i(!1,new zg(!1,null,!0));return}var u=e.pool_.createXhrIo();e.pendingXhr_=u;function h(f){var v=f.loaded,_=f.lengthComputable?f.total:-1;e.progressCallback_!==null&&e.progressCallback_(v,_)}e.progressCallback_!==null&&u.addUploadProgressListener(h),u.send(e.url_,e.method_,e.body_,e.headers_).then(function(f){e.progressCallback_!==null&&f.removeUploadProgressListener(h),e.pendingXhr_=null,f=f;var v=f.getErrorCode()===ol.NO_ERROR,_=f.getStatus();if(!v||e.isRetryStatusCode_(_)){var b=f.getErrorCode()===ol.ABORT;i(!1,new zg(!1,null,b));return}var S=e.successCodes_.indexOf(_)!==-1;i(!0,new zg(S,f))})}function r(i,o){var u=e.resolve_,h=e.reject_,f=o.xhr;if(o.wasSuccessCode)try{var v=e.callback_(f,f.getResponseText());Ma(v)?u(v):u()}catch(b){h(b)}else if(f!==null){var _=sI();_.setServerResponseProp(f.getResponseText()),e.errorCallback_?h(e.errorCallback_(f,_)):h(_)}else if(o.canceled){var _=e.appDelete_?IS():a3();h(_)}else{var _=CK();h(_)}}this.canceled_?r(!1,new zg(!1,null,!0)):this.backoffId_=IY(n,r,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&CY(this.backoffId_),this.pendingXhr_!==null&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(e){var n=e>=500&&e<600,r=[408,429],i=r.indexOf(e)!==-1,o=this.additionalRetryCodes_.indexOf(e)!==-1;return n||i||o},t}(),zg=function(){function t(e,n,r){this.wasSuccessCode=e,this.xhr=n,this.canceled=!!r}return t}();function NY(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function AY(t){var e=typeof ze<"u"?ze.SDK_VERSION:"AppManager";t["X-Firebase-Storage-Version"]="webjs/"+e}function kY(t,e){e&&(t["X-Firebase-GMPID"]=e)}function PY(t,e,n,r){var i=v3(t.urlParams),o=t.url+i,u=Object.assign({},t.headers);return kY(u,e),NY(u,n),AY(u),new xY(o,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r)}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var w3=function(){function t(e,n,r,i){this.bucket_=null;function o(h,f){return new fv(h,f)}if(this.authWrapper_=new TY(e,n,o,PY,this,r),this.app_=e,i!=null)this.bucket_=lo.makeFromBucketSpec(i);else{var u=this.authWrapper_.bucket();u!=null&&(this.bucket_=new lo(u,""))}this.internals_=new RY(this)}return t.prototype.ref=function(e){function n(i){if(typeof i!="string")throw"Path is not a string.";if(/^[A-Za-z]+:\/\//.test(i))throw"Expected child path but got a URL, use refFromURL instead."}if(ar("ref",[Wc(n,!0)],arguments),this.bucket_==null)throw new Error("No Storage Bucket defined in Firebase Options.");var r=new fv(this.authWrapper_,this.bucket_);return e!=null?r.child(e):r},t.prototype.refFromURL=function(e){function n(r){if(typeof r!="string")throw"Path is not a string.";if(!/^[A-Za-z]+:\/\//.test(r))throw"Expected full URL but got a child path, use ref instead.";try{lo.makeFromUrl(r)}catch{throw"Expected valid full URL but got an invalid one."}}return ar("refFromURL",[Wc(n,!1)],arguments),new fv(this.authWrapper_,e)},Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this.authWrapper_.maxUploadRetryTime()},enumerable:!0,configurable:!0}),t.prototype.setMaxUploadRetryTime=function(e){ar("setMaxUploadRetryTime",[Hk()],arguments),this.authWrapper_.setMaxUploadRetryTime(e)},t.prototype.setMaxOperationRetryTime=function(e){ar("setMaxOperationRetryTime",[Hk()],arguments),this.authWrapper_.setMaxOperationRetryTime(e)},Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!0,configurable:!0}),t}(),RY=function(){function t(e){this.service_=e}return t.prototype.delete=function(){return this.service_.authWrapper_.deleteApp(),Promise.resolve()},t}(),OY="@firebase/storage",DY="0.3.31";/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var LY="storage";function MY(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return new w3(n,r,new qK,e)}function FY(t){var e={TaskState:oi,TaskEvent:CS,StringFormat:Jn,Storage:w3,Reference:fv};t.INTERNAL.registerComponent(new Es(LY,MY,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion(OY,DY)}FY(ze);var jY="@firebase/performance",E3="0.3.0";/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var S3=E3,UY="FB-PERF-TRACE-START",VY="FB-PERF-TRACE-STOP",NS="FB-PERF-TRACE-MEASURE",b3="_wt_",T3="_fp",I3="_fcp",C3="_fid",x3="@firebase/performance/config",N3="@firebase/performance/configexpire",BY="performance",A3="Performance";/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zr,zY=(Zr={},Zr["trace started"]="Trace {$traceName} was started before.",Zr["trace stopped"]="Trace {$traceName} is not running.",Zr["no window"]="Window is not available.",Zr["no app id"]="App id is not available.",Zr["no project id"]="Project id is not available.",Zr["no api key"]="Api key is not available.",Zr["invalid cc log"]="Attempted to queue invalid cc event",Zr["FB not default"]="Performance can only start when Firebase app instance is the default one.",Zr["RC response not ok"]="RC response is not ok",Zr["invalid attribute name"]="Attribute name {$attributeName} is invalid.",Zr["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",Zr["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",Zr["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",Zr),_i=new Kd(BY,A3,zY);/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gE,k3,Wr=function(){function t(e){if(this.window=e,!e)throw _i.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}return t.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},t.prototype.mark=function(e){!this.performance||!this.performance.mark||this.performance.mark(e)},t.prototype.measure=function(e,n,r){!this.performance||!this.performance.measure||this.performance.measure(e,n,r)},t.prototype.getEntriesByType=function(e){return!this.performance||!this.performance.getEntriesByType?[]:this.performance.getEntriesByType(e)},t.prototype.getEntriesByName=function(e){return!this.performance||!this.performance.getEntriesByName?[]:this.performance.getEntriesByName(e)},t.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},t.prototype.requiredApisAvailable=function(){return!!(fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled)},t.prototype.setupObserver=function(e,n){if(this.PerformanceObserver){var r=new this.PerformanceObserver(function(i){for(var o=0,u=i.getEntries();o<u.length;o++){var h=u[o];n(h)}});r.observe({entryTypes:[e]})}},t.getInstance=function(){return gE===void 0&&(gE=new t(k3)),gE},t}();function qY(t){k3=t}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yk(t,e){var n=t.length-e.length;if(n<0||n>1)throw _i.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vE,nr=function(){function t(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=Yk("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=Yk("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.shouldSendToFl=!1,this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return t.prototype.getAppId=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!e)throw _i.create("no app id");return e},t.prototype.getProjectId=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!e)throw _i.create("no project id");return e},t.prototype.getApiKey=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!e)throw _i.create("no api key");return e},t.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},t.getInstance=function(){return vE===void 0&&(vE=new t),vE},t}();/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var P3;function WY(){var t=nr.getInstance().installationsService.getId();return t.then(function(e){P3=e}),t}function cI(){return P3}function GY(){var t=nr.getInstance().installationsService.getToken();return t.then(function(e){}),t}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gc;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.VISIBLE=1]="VISIBLE",t[t.HIDDEN=2]="HIDDEN"})(Gc||(Gc={}));var $Y=["firebase_","google_","ga_"],HY=new RegExp("^[a-zA-Z]\\w*$"),KY=40,YY=100;function QY(){var t=Wr.getInstance().navigator;return"serviceWorker"in t?t.serviceWorker.controller?2:3:1}function R3(){var t=Wr.getInstance().document,e=t.visibilityState;switch(e){case"visible":return Gc.VISIBLE;case"hidden":return Gc.HIDDEN;default:return Gc.UNKNOWN}}function XY(){var t=Wr.getInstance().navigator,e=t.connection,n=e&&e.effectiveType;switch(n){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function JY(t){if(t.length===0||t.length>KY)return!1;var e=$Y.some(function(n){return t.startsWith(n)});return!e&&!!t.match(HY)}function ZY(t){return t.length!==0&&t.length<=YY}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Sl=new dh(A3);Sl.logLevel=yt.INFO;/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var eQ="0.0.1",Qk={loggingEnabled:!0,shouldSendToFl:!0},tQ={shouldSendToFl:!1},nQ="FIREBASE_INSTALLATIONS_AUTH";function rQ(t){var e=iQ();return e?(Xk(t,e),Promise.resolve()):aQ(t).then(function(n){return Xk(t,n)}).then(function(n){return oQ(n)},function(){})}function iQ(){var t=Wr.getInstance().localStorage;if(t){var e=t.getItem(N3);if(!(!e||!uQ(e))){var n=t.getItem(x3);if(n)try{var r=JSON.parse(n);return r}catch{return}}}}function oQ(t){var e=Wr.getInstance().localStorage;!t||!e||(e.setItem(x3,JSON.stringify(t)),e.setItem(N3,String(Date.now()+nr.getInstance().configTimeToLive*60*60*1e3)))}var sQ="Could not fetch config, will use default configs";function aQ(t){return GY().then(function(e){var n=nr.getInstance().getProjectId(),r="https://firebaseremoteconfig.googleapis.com/v1/projects/"+n+"/namespaces/fireperf:fetch?key="+nr.getInstance().getApiKey(),i=new Request(r,{method:"POST",headers:{Authorization:nQ+" "+e},body:JSON.stringify({app_instance_id:t,app_instance_id_token:e,app_id:nr.getInstance().getAppId(),app_version:S3,sdk_version:eQ})});return fetch(i).then(function(o){if(o.ok)return o.json();throw _i.create("RC response not ok")})}).catch(function(){Sl.info(sQ)})}function Xk(t,e){if(!e)return e;var n=nr.getInstance(),r=e.entries||{},i=e.state;return r.fpr_enabled!==void 0?n.loggingEnabled=String(r.fpr_enabled)==="true":n.loggingEnabled=Qk.loggingEnabled,r.fpr_log_source&&(n.logSource=Number(r.fpr_log_source)),r.fpr_log_endpoint_url&&(n.logEndPointUrl=r.fpr_log_endpoint_url),r.fpr_log_transport_key&&(n.transportKey=r.fpr_log_transport_key),i===void 0||i==="INSTANCE_STATE_UNSPECIFIED"||i==="NO_TEMPLATE"?n.shouldSendToFl=tQ.shouldSendToFl:r.fpr_log_transport_web_percent?n.shouldSendToFl=lQ(t,Number(r.fpr_log_transport_web_percent)):n.shouldSendToFl=Qk.shouldSendToFl,r.fpr_vc_network_request_sampling_rate!==void 0&&(n.networkRequestsSamplingRate=Number(r.fpr_vc_network_request_sampling_rate)),r.fpr_vc_trace_sampling_rate!==void 0&&(n.tracesSamplingRate=Number(r.fpr_vc_trace_sampling_rate)),n.logTraceAfterSampling=Jk(n.tracesSamplingRate),n.logNetworkAfterSampling=Jk(n.networkRequestsSamplingRate),e}function uQ(t){return Number(t)>Date.now()}function Jk(t){return Math.random()<=t}function lQ(t,e){return t.length===0?!1:cQ(t)<e}function cQ(t){for(var e=0,n=0;n<t.length;n++)e=(e<<3)+e-t.charCodeAt(n);return e=Math.abs(e%100),e}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hI=1,mE;function O3(){return hI=2,mE=mE||fQ(),mE}function hQ(){return hI===3}function fQ(){return dQ().then(function(){return WY()}).then(function(t){return rQ(t)}).then(function(){return Zk()},function(){return Zk()})}function dQ(){var t=Wr.getInstance().document;return new Promise(function(e){if(t&&t.readyState!=="complete"){var n=function(){t.readyState==="complete"&&(t.removeEventListener("readystatechange",n),e())};t.addEventListener("readystatechange",n)}else e()})}function Zk(){hI=3}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ld=10*1e3,pQ=5.5*1e3,fI=3,Md=fI,na=[],eP=!1;function gQ(){eP||(hp(pQ),eP=!0)}function hp(t){setTimeout(function(){if(Md!==0){if(!na.length)return hp(Ld);vQ()}},t)}function vQ(){var t=Wi(na);na=[];var e=t.map(function(r){return{source_extension_json_proto3:r.message,event_time_ms:String(r.eventTime)}}),n={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:nr.getInstance().logSource,log_event:e};mQ(n,t).catch(function(){na=Wi(t,na),Md--,Sl.info("Tries left: "+Md+"."),hp(Ld)})}function mQ(t,e){return nr.getInstance().shouldSendToFl?yQ(t,e):_Q(t)}function yQ(t,e){return wQ(t).then(function(n){return n.ok||Sl.info("Call to Firebase backend failed."),n.json()}).then(function(n){var r=Number(n.nextRequestWaitMillis),i=Ld;isNaN(r)||(i=Math.max(r,i));var o=n.logResponseDetails;Array.isArray(o)&&o.length>0&&o[0].responseAction==="RETRY_REQUEST_LATER"&&(na=Wi(e,na),Sl.info("Retry transport request later.")),Md=fI,hp(i)})}function _Q(t){return fetch(nr.getInstance().logEndPointUrl,{method:"POST",body:JSON.stringify(t)}).then(function(e){return e.ok||Sl.info("Call to Firebase backend failed."),e.json()}).then(function(e){var n=Number(e.next_request_wait_millis),r=isNaN(n)?Ld:Math.max(Ld,n);Md=fI,hp(r)})}function wQ(t){var e=nr.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}function EQ(t){if(!t.eventTime||!t.message)throw _i.create("invalid cc log");na=Wi(na,[t])}function SQ(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=t.apply(void 0,e);EQ({message:r,eventTime:Date.now()})}}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yE;function D3(t,e){yE||(yE=SQ(TQ)),yE(t,e)}function qg(t){var e=nr.getInstance();!e.instrumentationEnabled&&t.isAuto||!e.dataCollectionEnabled&&!t.isAuto||Wr.getInstance().requiredApisAvailable()&&(t.isAuto&&R3()!==Gc.VISIBLE||!e.loggingEnabled||!e.logTraceAfterSampling||(hQ()?_E(t):O3().then(function(){return _E(t)},function(){return _E(t)})))}function _E(t){cI()&&setTimeout(function(){return D3(t,1)},0)}function bQ(t){var e=nr.getInstance();if(e.instrumentationEnabled){var n=t.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];n===r||n===i||!e.loggingEnabled||!e.logNetworkAfterSampling||setTimeout(function(){return D3(t,0)},0)}}function TQ(t,e){return e===0?IQ(t):CQ(t)}function IQ(t){var e={url:t.url,http_method:t.httpMethod||0,http_response_code:200,response_payload_bytes:t.responsePayloadBytes,client_start_time_us:t.startTimeUs,time_to_response_initiated_us:t.timeToResponseInitiatedUs,time_to_response_completed_us:t.timeToResponseCompletedUs},n={application_info:L3(),network_request_metric:e};return JSON.stringify(n)}function CQ(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};Object.keys(t.counters).length!==0&&(e.counters=t.counters);var n=t.getAttributes();Object.keys(n).length!==0&&(e.custom_attributes=n);var r={application_info:L3(),trace_metric:e};return JSON.stringify(r)}function L3(){return{google_app_id:nr.getInstance().getAppId(),app_instance_id:cI(),web_app_info:{sdk_version:S3,page_url:Wr.getInstance().getUrl(),service_worker_status:QY(),visibility_state:R3(),effective_connection_type:XY()},application_process_state:0}}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xQ=100,NQ="_",AQ=[T3,I3,C3];function kQ(t,e){return t.length===0||t.length>xQ?!1:e&&e.startsWith(b3)&&AQ.indexOf(t)>-1||!t.startsWith(NQ)}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $f=function(){function t(e,n,r){n===void 0&&(n=!1),this.name=e,this.isAuto=n,this.state=1,this.customAttributes={},this.counters={},this.api=Wr.getInstance(),this.randomId=Math.floor(Math.random()*1e6),this.isAuto||(this.traceStartMark=UY+"-"+this.randomId+"-"+this.name,this.traceStopMark=VY+"-"+this.randomId+"-"+this.name,this.traceMeasure=r||NS+"-"+this.randomId+"-"+this.name,r&&this.calculateTraceMetrics())}return t.prototype.start=function(){if(this.state!==1)throw _i.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},t.prototype.stop=function(){if(this.state!==2)throw _i.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),qg(this)},t.prototype.record=function(e,n,r){if(this.durationUs=Math.floor(n*1e3),this.startTimeUs=Math.floor(e*1e3),r&&r.attributes&&(this.customAttributes=wn({},r.attributes)),r&&r.metrics)for(var i=0,o=Object.keys(r.metrics);i<o.length;i++){var u=o[i];isNaN(Number(r.metrics[u]))||(this.counters[u]=Number(Math.floor(r.metrics[u])))}qg(this)},t.prototype.incrementMetric=function(e,n){n===void 0&&(n=1),this.counters[e]===void 0&&this.putMetric(e,0),this.counters[e]+=n},t.prototype.putMetric=function(e,n){if(kQ(e,this.name))this.counters[e]=n;else throw _i.create("invalid custom metric name",{customMetricName:e})},t.prototype.getMetric=function(e){return this.counters[e]||0},t.prototype.putAttribute=function(e,n){var r=JY(e),i=ZY(n);if(r&&i){this.customAttributes[e]=n;return}if(!r)throw _i.create("invalid attribute name",{attributeName:e});if(!i)throw _i.create("invalid attribute value",{attributeValue:n})},t.prototype.getAttribute=function(e){return this.customAttributes[e]},t.prototype.removeAttribute=function(e){this.customAttributes[e]!==void 0&&delete this.customAttributes[e]},t.prototype.getAttributes=function(){return wn({},this.customAttributes)},t.prototype.setStartTime=function(e){this.startTimeUs=e},t.prototype.setDuration=function(e){this.durationUs=e},t.prototype.calculateTraceMetrics=function(){var e=this.api.getEntriesByName(this.traceMeasure),n=e&&e[0];n&&(this.durationUs=Math.floor(n.duration*1e3),this.startTimeUs=Math.floor((n.startTime+this.api.getTimeOrigin())*1e3))},t.createOobTrace=function(e,n,r){var i=Wr.getInstance().getUrl();if(i){var o=new t(b3+i,!0),u=Math.floor(Wr.getInstance().getTimeOrigin()*1e3);o.setStartTime(u),e&&e[0]&&(o.setDuration(Math.floor(e[0].duration*1e3)),o.putMetric("domInteractive",Math.floor(e[0].domInteractive*1e3)),o.putMetric("domContentLoadedEventEnd",Math.floor(e[0].domContentLoadedEventEnd*1e3)),o.putMetric("loadEventEnd",Math.floor(e[0].loadEventEnd*1e3)));var h="first-paint",f="first-contentful-paint";if(n){var v=n.find(function(b){return b.name===h});v&&v.startTime&&o.putMetric(T3,Math.floor(v.startTime*1e3));var _=n.find(function(b){return b.name===f});_&&_.startTime&&o.putMetric(I3,Math.floor(_.startTime*1e3)),r&&o.putMetric(C3,Math.floor(r*1e3))}qg(o)}},t.createUserTimingTrace=function(e){var n=new t(e,!1,e);qg(n)},t}();/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tP(t){var e=t;if(!(!e||e.responseStart===void 0)){var n=Wr.getInstance().getTimeOrigin(),r=Math.floor((e.startTime+n)*1e3),i=e.responseStart?Math.floor((e.responseStart-e.startTime)*1e3):void 0,o=Math.floor((e.responseEnd-e.startTime)*1e3),u=e.name&&e.name.split("?")[0],h={url:u,responsePayloadBytes:e.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o};bQ(h)}}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var PQ=5e3;function nP(){cI()&&(setTimeout(function(){return OQ()},0),setTimeout(function(){return RQ()},0),setTimeout(function(){return DQ()},0))}function RQ(){for(var t=Wr.getInstance(),e=t.getEntriesByType("resource"),n=0,r=e;n<r.length;n++){var i=r[n];tP(i)}t.setupObserver("resource",tP)}function OQ(){var t=Wr.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");if(t.onFirstInputDelay){var r=setTimeout(function(){$f.createOobTrace(e,n),r=void 0},PQ);t.onFirstInputDelay(function(i){r&&(clearTimeout(r),$f.createOobTrace(e,n,i))})}else $f.createOobTrace(e,n)}function DQ(){for(var t=Wr.getInstance(),e=t.getEntriesByType("measure"),n=0,r=e;n<r.length;n++){var i=r[n];rP(i)}t.setupObserver("measure",rP)}function rP(t){var e=t.name;e.substring(0,NS.length)!==NS&&$f.createUserTimingTrace(e)}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var LQ=function(){function t(e){this.app=e,Wr.getInstance().requiredApisAvailable()?(gQ(),O3().then(nP,nP)):Sl.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled.")}return t.prototype.trace=function(e){return new $f(e)},Object.defineProperty(t.prototype,"instrumentationEnabled",{get:function(){return nr.getInstance().instrumentationEnabled},set:function(e){nr.getInstance().instrumentationEnabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataCollectionEnabled",{get:function(){return nr.getInstance().dataCollectionEnabled},set:function(e){nr.getInstance().dataCollectionEnabled=e},enumerable:!0,configurable:!0}),t}();/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var MQ="[DEFAULT]";function FQ(t){var e=function(n,r){if(n.name!==MQ)throw _i.create("FB not default");if(typeof window>"u")throw _i.create("no window");return qY(window),nr.getInstance().firebaseAppInstance=n,nr.getInstance().installationsService=r,new LQ(n)};t.INTERNAL.registerComponent(new Es("performance",function(n){var r=n.getProvider("app").getImmediate(),i=n.getProvider("installations").getImmediate();return e(r,i)},"PUBLIC")),t.registerVersion(jY,E3)}FQ(ze);/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dI="measurementId",jQ="firebase_id",UQ="origin",M3="https://www.googletagmanager.com/gtag/js",ai;(function(t){t.EVENT="event",t.SET="set",t.CONFIG="config"})(ai||(ai={}));var AS;(function(t){t.ADD_SHIPPING_INFO="add_shipping_info",t.ADD_PAYMENT_INFO="add_payment_info",t.ADD_TO_CART="add_to_cart",t.ADD_TO_WISHLIST="add_to_wishlist",t.BEGIN_CHECKOUT="begin_checkout",t.CHECKOUT_PROGRESS="checkout_progress",t.EXCEPTION="exception",t.GENERATE_LEAD="generate_lead",t.LOGIN="login",t.PAGE_VIEW="page_view",t.PURCHASE="purchase",t.REFUND="refund",t.REMOVE_FROM_CART="remove_from_cart",t.SCREEN_VIEW="screen_view",t.SEARCH="search",t.SELECT_CONTENT="select_content",t.SELECT_ITEM="select_item",t.SELECT_PROMOTION="select_promotion",t.SET_CHECKOUT_OPTION="set_checkout_option",t.SHARE="share",t.SIGN_UP="sign_up",t.TIMING_COMPLETE="timing_complete",t.VIEW_CART="view_cart",t.VIEW_ITEM="view_item",t.VIEW_ITEM_LIST="view_item_list",t.VIEW_PROMOTION="view_promotion",t.VIEW_SEARCH_RESULTS="view_search_results"})(AS||(AS={}));/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VQ(t,e,n,r,i){var o=r||{};(!i||!i.global)&&(o=wn(wn({},r),{send_to:e})),t(ai.EVENT,n,o||{})}function BQ(t,e,n,r){r&&r.global?t(ai.SET,{screen_name:n}):t(ai.CONFIG,e,{update:!0,screen_name:n})}function zQ(t,e,n,r){r&&r.global?t(ai.SET,{user_id:n}):t(ai.CONFIG,e,{update:!0,user_id:n})}function qQ(t,e,n,r){if(r&&r.global){for(var i={},o=0,u=Object.keys(n);o<u.length;o++){var h=u[o];i["user_properties."+h]=n[h]}t(ai.SET,i)}else t(ai.CONFIG,e,{update:!0,user_properties:n})}function WQ(t,e){window["ga-disable-"+t]=!e}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var iP=new dh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GQ(t,e,n){return Ee(this,void 0,void 0,function(){var r,i;return we(this,function(o){switch(o.label){case 0:return[4,e.getId()];case 1:return r=o.sent(),n("js",new Date),n(ai.CONFIG,t.options[dI],(i={},i[jQ]=r,i[UQ]="firebase",i.update=!0,i)),[2]}})})}function $Q(t){var e=document.createElement("script");e.src=M3+"?l="+t,e.async=!0,document.head.appendChild(e)}function HQ(t){var e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}function KQ(t,e){return function(n,r,i){if(n===ai.EVENT){var o=[];if(i&&i.send_to){var u=i.send_to;Array.isArray(u)||(u=[u]);for(var h=0,f=u;h<f.length;h++){var v=f[h],_=e[v];if(_)o.push(_);else{o=[];break}}}if(o.length===0)for(var b=0,S=Object.values(e);b<S.length;b++){var I=S[b];o.push(I)}Promise.all(o).then(function(){return t(ai.EVENT,r,i||{})}).catch(function(D){return iP.error(D)})}else if(n===ai.CONFIG){var M=e[r]||Promise.resolve();M.then(function(){t(ai.CONFIG,r,i)}).catch(function(D){return iP.error(D)})}else t(ai.SET,r)}}function YQ(t,e,n){var r=function(){window[e].push(arguments)};return window[n]&&typeof window[n]=="function"&&(r=window[n]),window[n]=KQ(r,t),{gtagCore:r,wrappedGtag:window[n]}}function QQ(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(M3))return r}return null}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var uc,XQ=(uc={},uc["no-ga-id"]='"'+dI+'" field is empty in Firebase config. Firebase Analytics requires this field to contain a valid measurement ID.',uc["already-exists"]="A Firebase Analytics instance with the measurement ID ${id}  already exists. Only one Firebase Analytics instance can be created for each measurement ID.",uc["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",uc["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate",uc),bm=new Kd("analytics","Analytics",XQ);/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wE={},dv="dataLayer",F3="gtag",oP,mf,kS=!1;function JQ(t){if(kS)throw bm.create("already-initialized");t.dataLayerName&&(dv=t.dataLayerName),t.gtagName&&(F3=t.gtagName)}function ZQ(t,e){var n=t.options[dI];if(!n)throw bm.create("no-ga-id");if(wE[n]!=null)throw bm.create("already-exists",{id:n});if(!kS){QQ()||$Q(dv),HQ(dv);var r=YQ(wE,dv,F3),i=r.wrappedGtag,o=r.gtagCore;mf=i,oP=o,kS=!0}wE[n]=GQ(t,e,oP);var u={app:t,logEvent:function(h,f,v){return VQ(mf,n,h,f,v)},setCurrentScreen:function(h,f){return BQ(mf,n,h,f)},setUserId:function(h,f){return zQ(mf,n,h,f)},setUserProperties:function(h,f){return qQ(mf,n,h,f)},setAnalyticsCollectionEnabled:function(h){return WQ(n,h)}};return u}var eX="@firebase/analytics",tX="0.3.2";/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sP="analytics";function nX(t){t.INTERNAL.registerComponent(new Es(sP,function(n){var r=n.getProvider("app").getImmediate(),i=n.getProvider("installations").getImmediate();return ZQ(r,i)},"PUBLIC").setServiceProps({settings:JQ,EventName:AS})),t.INTERNAL.registerComponent(new Es("analytics-internal",e,"PRIVATE")),t.registerVersion(eX,tX);function e(n){try{var r=n.getProvider(sP).getImmediate();return{logEvent:r.logEvent}}catch(i){throw bm.create("interop-component-reg-failed",{reason:i})}}}nX(ze);/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rX=function(){function t(e,n,r,i){this.client=e,this.storage=n,this.storageCache=r,this.logger=i}return t.prototype.isCachedDataFresh=function(e,n){if(!n)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var r=Date.now()-n,i=r<=e;return this.logger.debug("Config fetch cache check."+(" Cache age millis: "+r+".")+(" Cache max age millis (minimumFetchIntervalMillis setting): "+e+".")+(" Is cache hit: "+i+".")),i},t.prototype.fetch=function(e){return Ee(this,void 0,void 0,function(){var n,r,i,o,u;return we(this,function(h){switch(h.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return n=h.sent(),r=n[0],i=n[1],i&&this.isCachedDataFresh(e.cacheMaxAgeMillis,r)?[2,i]:(e.eTag=i&&i.eTag,[4,this.client.fetch(e)]);case 2:return o=h.sent(),u=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],o.status===200&&u.push(this.storage.setLastSuccessfulFetchResponse(o)),[4,Promise.all(u)];case 3:return h.sent(),[2,o]}})})},t}();/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ei,iX=(ei={},ei["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",ei["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",ei["registration-api-key"]="Undefined API key. Check Firebase app initialization.",ei["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",ei["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",ei["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",ei["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",ei["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",ei["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",ei["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',ei["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',ei["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",ei["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",ei),ho=new Kd("remoteconfig","Remote Config",iX);function oX(t,e){return t instanceof $b&&t.code.indexOf(e)!==-1}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sX(t){return t===void 0&&(t=navigator),t.languages&&t.languages[0]||t.language}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var aX=function(){function t(e,n,r,i,o,u){this.firebaseInstallations=e,this.sdkVersion=n,this.namespace=r,this.projectId=i,this.apiKey=o,this.appId=u}return t.prototype.fetch=function(e){return Ee(this,void 0,void 0,function(){var n,r,i,o,u,h,f,v,_,b,S,I,M,D,ne,z,Y,K,ue;return we(this,function(oe){switch(oe.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:n=oe.sent(),r=n[0],i=n[1],o=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",u=o+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,h={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},f={sdk_version:this.sdkVersion,app_instance_id:r,app_instance_id_token:i,app_id:this.appId,language_code:sX()},v={method:"POST",headers:h,body:JSON.stringify(f)},_=fetch(u,v),b=new Promise(function(fe,me){e.signal.addEventListener(function(){var he=new Error("The operation was aborted.");he.name="AbortError",me(he)})}),oe.label=2;case 2:return oe.trys.push([2,5,,6]),[4,Promise.race([_,b])];case 3:return oe.sent(),[4,_];case 4:return S=oe.sent(),[3,6];case 5:throw I=oe.sent(),M="fetch-client-network",I.name==="AbortError"&&(M="fetch-timeout"),ho.create(M,{originalErrorMessage:I.message});case 6:if(D=S.status,ne=S.headers.get("ETag")||void 0,S.status!==200)return[3,11];K=void 0,oe.label=7;case 7:return oe.trys.push([7,9,,10]),[4,S.json()];case 8:return K=oe.sent(),[3,10];case 9:throw ue=oe.sent(),ho.create("fetch-client-parse",{originalErrorMessage:ue.message});case 10:z=K.entries,Y=K.state,oe.label=11;case 11:if(Y==="INSTANCE_STATE_UNSPECIFIED"?D=500:Y==="NO_CHANGE"?D=304:(Y==="NO_TEMPLATE"||Y==="EMPTY_CONFIG")&&(z={}),D!==304&&D!==200)throw ho.create("fetch-status",{httpStatus:D});return[2,{status:D,eTag:ne,config:z}]}})})},t}();/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var uX=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(e){this.listeners.push(e)},t.prototype.abort=function(){this.listeners.forEach(function(e){return e()})},t}();/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lX=!1,cX="",aP=0,hX=["1","true","t","yes","y","on"],EE=function(){function t(e,n){n===void 0&&(n=cX),this._source=e,this._value=n}return t.prototype.asString=function(){return this._value},t.prototype.asBoolean=function(){return this._source==="static"?lX:hX.indexOf(this._value.toLowerCase())>=0},t.prototype.asNumber=function(){if(this._source==="static")return aP;var e=Number(this._value);return isNaN(e)&&(e=aP),e},t.prototype.getSource=function(){return this._source},t}();/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fX=60*1e3,dX=12*60*60*1e3,pX=function(){function t(e,n,r,i,o){this.app=e,this._client=n,this._storageCache=r,this._storage=i,this._logger=o,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:fX,minimumFetchIntervalMillis:dX},this.defaultConfig={}}return t.prototype.setLogLevel=function(e){switch(e){case"debug":this._logger.logLevel=yt.DEBUG;break;case"silent":this._logger.logLevel=yt.SILENT;break;default:this._logger.logLevel=yt.ERROR}},Object.defineProperty(t.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!0,configurable:!0}),t.prototype.activate=function(){return Ee(this,void 0,void 0,function(){var e,n,r;return we(this,function(i){switch(i.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return e=i.sent(),n=e[0],r=e[1],!n||!n.config||!n.eTag||n.eTag===r?[2,!1]:[4,Promise.all([this._storageCache.setActiveConfig(n.config),this._storage.setActiveConfigEtag(n.eTag)])];case 2:return i.sent(),[2,!0]}})})},t.prototype.ensureInitialized=function(){var e=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then(function(){e._isInitializationComplete=!0})),this._initializePromise},t.prototype.fetch=function(){return Ee(this,void 0,void 0,function(){var e,n,r,i=this;return we(this,function(o){switch(o.label){case 0:e=new uX,setTimeout(function(){return Ee(i,void 0,void 0,function(){return we(this,function(u){return e.abort(),[2]})})},this.settings.fetchTimeoutMillis),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:e})];case 2:return o.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return o.sent(),[3,6];case 4:return n=o.sent(),r=oX(n,"fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(r)];case 5:throw o.sent(),n;case 6:return[2]}})})},t.prototype.fetchAndActivate=function(){return Ee(this,void 0,void 0,function(){return we(this,function(e){switch(e.label){case 0:return[4,this.fetch()];case 1:return e.sent(),[2,this.activate()]}})})},t.prototype.getAll=function(){var e=this;return gX(this._storageCache.getActiveConfig(),this.defaultConfig).reduce(function(n,r){return n[r]=e.getValue(r),n},{})},t.prototype.getBoolean=function(e){return this.getValue(e).asBoolean()},t.prototype.getNumber=function(e){return this.getValue(e).asNumber()},t.prototype.getString=function(e){return this.getValue(e).asString()},t.prototype.getValue=function(e){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+e+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var n=this._storageCache.getActiveConfig();return n&&n[e]!==void 0?new EE("remote",n[e]):this.defaultConfig&&this.defaultConfig[e]!==void 0?new EE("default",String(this.defaultConfig[e])):(this._logger.debug('Returning static value for key "'+e+'". Define a default or remote value if this is unintentional.'),new EE("static"))},t}();function gX(t,e){return t===void 0&&(t={}),e===void 0&&(e={}),Object.keys(wn(wn({},t),e))}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pv(t,e){var n=t.target.error||void 0;return ho.create(e,{originalErrorMessage:n&&n.message})}var Gu="app_namespace_store",vX="firebase_remote_config",mX=1;function yX(){return new Promise(function(t,e){var n=indexedDB.open(vX,mX);n.onerror=function(r){e(pv(r,"storage-open"))},n.onsuccess=function(r){t(r.target.result)},n.onupgradeneeded=function(r){var i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Gu,{keyPath:"compositeKey"})}}})}var _X=function(){function t(e,n,r,i){i===void 0&&(i=yX()),this.appId=e,this.appName=n,this.namespace=r,this.openDbPromise=i}return t.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},t.prototype.setLastFetchStatus=function(e){return this.set("last_fetch_status",e)},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},t.prototype.setLastSuccessfulFetchTimestampMillis=function(e){return this.set("last_successful_fetch_timestamp_millis",e)},t.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},t.prototype.setLastSuccessfulFetchResponse=function(e){return this.set("last_successful_fetch_response",e)},t.prototype.getActiveConfig=function(){return this.get("active_config")},t.prototype.setActiveConfig=function(e){return this.set("active_config",e)},t.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},t.prototype.setActiveConfigEtag=function(e){return this.set("active_config_etag",e)},t.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},t.prototype.setThrottleMetadata=function(e){return this.set("throttle_metadata",e)},t.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},t.prototype.get=function(e){return Ee(this,void 0,void 0,function(){var n,r=this;return we(this,function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise(function(o,u){var h=n.transaction([Gu],"readonly"),f=h.objectStore(Gu),v=r.createCompositeKey(e);try{var _=f.get(v);_.onerror=function(b){u(pv(b,"storage-get"))},_.onsuccess=function(b){var S=b.target.result;o(S?S.value:void 0)}}catch(b){u(ho.create("storage-get",{originalErrorMessage:b&&b.message}))}})]}})})},t.prototype.set=function(e,n){return Ee(this,void 0,void 0,function(){var r,i=this;return we(this,function(o){switch(o.label){case 0:return[4,this.openDbPromise];case 1:return r=o.sent(),[2,new Promise(function(u,h){var f=r.transaction([Gu],"readwrite"),v=f.objectStore(Gu),_=i.createCompositeKey(e);try{var b=v.put({compositeKey:_,value:n});b.onerror=function(S){h(pv(S,"storage-set"))},b.onsuccess=function(){u()}}catch(S){h(ho.create("storage-set",{originalErrorMessage:S&&S.message}))}})]}})})},t.prototype.delete=function(e){return Ee(this,void 0,void 0,function(){var n,r=this;return we(this,function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise(function(o,u){var h=n.transaction([Gu],"readwrite"),f=h.objectStore(Gu),v=r.createCompositeKey(e);try{var _=f.delete(v);_.onerror=function(b){u(pv(b,"storage-delete"))},_.onsuccess=function(){o()}}catch(b){u(ho.create("storage-delete",{originalErrorMessage:b&&b.message}))}})]}})})},t.prototype.createCompositeKey=function(e){return[this.appId,this.appName,this.namespace,e].join()},t}();/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wX=function(){function t(e){this.storage=e}return t.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},t.prototype.getActiveConfig=function(){return this.activeConfig},t.prototype.loadFromStorage=function(){return Ee(this,void 0,void 0,function(){var e,n,r,i,o,u;return we(this,function(h){switch(h.label){case 0:return e=this.storage.getLastFetchStatus(),n=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),[4,e];case 1:return i=h.sent(),i&&(this.lastFetchStatus=i),[4,n];case 2:return o=h.sent(),o&&(this.lastSuccessfulFetchTimestampMillis=o),[4,r];case 3:return u=h.sent(),u&&(this.activeConfig=u),[2]}})})},t.prototype.setLastFetchStatus=function(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)},t.prototype.setLastSuccessfulFetchTimestampMillis=function(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)},t.prototype.setActiveConfig=function(e){return this.activeConfig=e,this.storage.setActiveConfig(e)},t}();/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var EX=1e3,SX=2,bX=4*60*60*1e3,TX=.5;function IX(t){var e=EX*Math.pow(SX,t),n=Math.round(TX*e*(Math.random()-.5)*2);return Math.min(bX,e+n)}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CX(t,e){return new Promise(function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener(function(){clearTimeout(o),r(ho.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function xX(t){if(!(t instanceof $b))return!1;var e=Number(t.httpStatus);return e===429||e===500||e===503||e===504}var NX=function(){function t(e,n){this.client=e,this.storage=n}return t.prototype.fetch=function(e){return Ee(this,void 0,void 0,function(){var n;return we(this,function(r){switch(r.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return n=r.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(e,n)]}})})},t.prototype.attemptFetch=function(e,n){var r=n.throttleEndTimeMillis,i=n.backoffCount;return Ee(this,void 0,void 0,function(){var o,u,h;return we(this,function(f){switch(f.label){case 0:return[4,CX(e.signal,r)];case 1:f.sent(),f.label=2;case 2:return f.trys.push([2,5,,7]),[4,this.client.fetch(e)];case 3:return o=f.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return f.sent(),[2,o];case 5:if(u=f.sent(),!xX(u))throw u;return h={throttleEndTimeMillis:Date.now()+IX(i),backoffCount:i+1},[4,this.storage.setThrottleMetadata(h)];case 6:return f.sent(),[2,this.attemptFetch(e,h)];case 7:return[2]}})})},t}(),uP="@firebase/remote-config",AX="0.1.18";/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kX(t){t.INTERNAL.registerComponent(new Es("remoteConfig",e,"PUBLIC").setMultipleInstances(!0)),t.registerVersion(uP,AX);function e(n,r){var i=n.getProvider("app").getImmediate(),o=n.getProvider("installations").getImmediate();if(typeof window>"u")throw ho.create("registration-window");var u=i.options,h=u.projectId,f=u.apiKey,v=u.appId;if(!h)throw ho.create("registration-project-id");if(!f)throw ho.create("registration-api-key");if(!v)throw ho.create("registration-app-id");r=r||"firebase";var _=new _X(v,i.name,r),b=new wX(_),S=new dh(uP);S.logLevel=yt.ERROR;var I=new aX(o,t.SDK_VERSION,r,h,f,v),M=new NX(I,_),D=new rX(M,_,b,S),ne=new pX(i,D,b,_,S);return ne.ensureInitialized(),ne}}kX(ze);var PX="firebase",RX="7.14.0";/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ze.registerVersion(PX,RX,"app");var OX="firebase",DX="7.14.0";/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */console.warn(`
It looks like you're using the development build of the Firebase JS SDK.
When deploying Firebase apps to production, it is advisable to only import
the individual SDK components you intend to use.

For the module builds, these are available in the following manner
(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):

CommonJS Modules:
const firebase = require('firebase/app');
require('firebase/<PACKAGE>');

ES Modules:
import firebase from 'firebase/app';
import 'firebase/<PACKAGE>';

Typescript:
import * as firebase from 'firebase/app';
import 'firebase/<PACKAGE>';
`);ze.registerVersion(OX,DX);ze.initializeApp({apiKey:"AIzaSyAHOemftrTSOUjtoA6K3VR2hkOU5H-ScSI",authDomain:"amstangram.firebaseapp.com",databaseURL:"https://amstangram.firebaseio.com",projectId:"amstangram",storageBucket:"amstangram.appspot.com",messagingSenderId:"1075176148116",appId:"1:1075176148116:web:e61e6512cd983a75533881",measurementId:"G-PLH3BSWLM2"});const LX=t=>{const e=document.createElement("textarea");e.value=t,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)},MX=t=>{let e=t.length,n,r;for(;e!==0;)r=Math.floor(Math.random()*e),e-=1,n=t[e],t[e]=t[r],t[r]=n;return t},FX=Ts(Te,{css:{fontSize:3,p:2,borderRadius:1,bg:"notificationBackground",color:"dialogText",animation:`${ao/2}ms fadeIn both`,boxShadow:"0px 0px 10px #00000080"}}),_o=ee.createContext(null),jX=({children:t})=>{const e=ee.useRef(),[n,r]=ee.useState(null),i=ee.useCallback(o=>{r(u=>(u&&clearTimeout(u.timeoutId),{content:o,timeoutId:setTimeout(()=>{r(null)},2e3)}))},[]);return F.jsxs(_o.Provider,{value:i,children:[t,n&&Ab.createPortal(F.jsx(Te,{css:{position:"fixed",top:0,left:0,bottom:0,right:0,pointerEvents:"none",alignItems:"center",justifyContent:"center"},children:F.jsx(FX,{ref:e,children:n.content})}),document.getElementById("notificationContainer"))]})},Mr=ee.createContext(null),UX=({children:t})=>{const[e,n]=ee.useState(void 0),[r,i]=ee.useState(null),[o,u]=ee.useState(!1);ee.useEffect(()=>{e!==void 0&&r!==null&&u(!0)},[e,r]),ee.useEffect(()=>ze.auth().onAuthStateChanged(async S=>{if(!S)n(null);else{const M=(await ze.firestore().collection("users").doc(S.uid).get()).data();n({uid:S.uid,...M,firebaseUser:S})}}),[]),ee.useEffect(()=>ze.firestore().collection("users").onSnapshot(S=>{const I={};for(const M of S.docs){const D=M.data();I[M.id]=D}i(I)}),[]);const h=ee.useCallback(async(b,S)=>{await b.firebaseUser.updateProfile({displayName:S}),await ze.firestore().collection("users").doc(b.uid).update({username:S}),n({...b,username:S})},[]),f=ee.useCallback(async(b,S,I)=>{const M=ze.auth.EmailAuthProvider.credential(b.firebaseUser.email,S);await b.firebaseUser.reauthenticateWithCredential(M),await b.firebaseUser.updatePassword(I)},[]),v=ee.useCallback(async(b,S,I)=>{const M=ze.auth.EmailAuthProvider.credential(b.firebaseUser.email,I);await b.firebaseUser.reauthenticateWithCredential(M),await b.firebaseUser.updateEmail(S)},[]),_=ee.useMemo(()=>({initialized:o,currentUser:e,usersMetadata:r,updateUsername:h,updatePassword:f,updateEmail:v}),[o,e,r,h,f,v]);return F.jsx(Mr.Provider,{value:_,children:t})},VX=(t,e)=>e.edges===t.edges?e.length-t.length:e.edges-t.edges,BX=(t,e)=>jf.indexOf(t.emoji)-jf.indexOf(e.emoji),zX=(t,e)=>Uf.indexOf(t.emoji)-Uf.indexOf(e.emoji),wu=ee.createContext([]),qX=({children:t})=>{const{currentUser:e}=ee.useContext(Mr),[n,r]=ee.useState(null);ee.useEffect(()=>ze.firestore().collection("tangrams").onSnapshot(u=>{const h=[];for(const f of u.docs){const v=f.id,{..._}=f.data();h.push({id:v,..._})}r(h)}),[]);const i=ee.useMemo(()=>{if(!n)return{initialized:!1,approvedTangrams:null,pendingTangrams:null,approvedTangramsByCategory:null};const o=[],u=[];for(const h of n)h.approved?o.push(h):e&&(e.isAdmin||h.uid===e.uid)&&u.push(h);return{initialized:!0,approvedTangrams:o,pendingTangrams:u}},[e,n]);return F.jsx(wu.Provider,{value:i,children:t})},Ni=ee.createContext(null),WX=({children:t})=>{const e=xn(),n=ee.useContext(_o),{currentUser:r}=ee.useContext(Mr),{approvedTangrams:i}=ee.useContext(wu),[o,u]=ee.useState(null),[h,f]=ee.useState(null),[v,_]=ee.useState(null),[b,S]=ee.useState(0),[I,M]=ee.useState(!1);ee.useEffect(()=>{o&&h&&M(!0)},[o,h]),ee.useEffect(()=>ze.firestore().collection("stats").onSnapshot(he=>{const Z={},Se={};for(const Ue of he.docs){const Ge=Ue.id,ft=Ue.data();Z[Ge]||(Z[Ge]={},Se[Ge]={});for(const Ae in ft)Z[Ge][Ae]=ft[Ae].completed,Se[Ge][Ae]=ft[Ae].starred}u(Z),f(Se)}),[]);const D=ee.useCallback(me=>!r||!h[me]?!1:h[me][r.uid]===!0,[r,h]),ne=ee.useCallback(me=>!r||!o[me]?!1:o[me][r.uid]!==void 0,[r,o]),z=ee.useCallback(me=>{let he=`${window.location.origin}/?tangrams=${me.map(({id:Z})=>Z).join(",")}`;r&&(he+=`&uid=${r.uid}`),LX(he),n(e.formatMessage({id:"Challenge link copied to clipboard"}))},[n,r,e]),Y=ee.useCallback(()=>{S(me=>me+1)},[]),K=ee.useCallback(me=>{const he=me?({id:Se,edges:Ue},{id:Ge,edges:ft})=>{const Ae=ne(Se),tt=ne(Ge);return!Ae&&!tt?ft-Ue:Ae-tt}:({id:Se},{id:Ue})=>{const Ge=ne(Se),ft=ne(Ue);return Ge-ft},Z=MX([...i]).sort(he);_(Z)},[i,ne]),ue=ee.useCallback(async(me,he)=>{r&&i.some(Z=>Z.id===me.id)&&!ne(me.id)&&await ze.firestore().collection("stats").doc(me.id).set({[r.uid]:{completed:he}},{merge:!0})},[i,r,ne]),oe=ee.useCallback(async me=>{if(r&&i.some(he=>he.id===me.id)){const he=D(me.id);await ze.firestore().collection("stats").doc(me.id).set({[r.uid]:{starred:!he}},{merge:!0})}},[i,r,D]),fe=ee.useMemo(()=>({initialized:I,requestSave:Y,saveRequestId:b,playlist:v,setPlaylist:_,shareTangrams:z,startRandomPlaylist:K,tangramsCompletedBy:o,tangramsStarredBy:h,toggleTangramStar:oe,markTangramAsComplete:ue,isTangramCompleted:ne,isTangramStarred:D}),[I,Y,b,v,z,K,o,h,oe,ue,ne,D]);return F.jsx(Ni.Provider,{value:fe,children:t})};var j3={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},lP=Xn.createContext&&Xn.createContext(j3),ou=function(){return ou=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},ou.apply(this,arguments)},GX=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function U3(t){return t&&t.map(function(e,n){return Xn.createElement(e.tag,ou({key:n},e.attr),U3(e.child))})}function di(t){return function(e){return Xn.createElement($X,ou({attr:ou({},t.attr)},e),U3(t.child))}}function $X(t){var e=function(n){var r=t.attr,i=t.size,o=t.title,u=GX(t,["attr","size","title"]),h=i||n.size||"1em",f;return n.className&&(f=n.className),t.className&&(f=(f?f+" ":"")+t.className),Xn.createElement("svg",ou({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,u,{className:f,style:ou(ou({color:t.color||n.color},n.style),t.style),height:h,width:h,xmlns:"http://www.w3.org/2000/svg"}),o&&Xn.createElement("title",null,o),t.children)};return lP!==void 0?Xn.createElement(lP.Consumer,null,function(n){return e(n)}):e(j3)}function V3(t){return di({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"8",r:"7"}},{tag:"polyline",attr:{points:"8.21 13.89 7 23 12 20 17 23 15.79 13.88"}}]})(t)}function HX(t){return di({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"}}]})(t)}function B3(t){return di({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"7",height:"7"}},{tag:"rect",attr:{x:"14",y:"3",width:"7",height:"7"}},{tag:"rect",attr:{x:"14",y:"14",width:"7",height:"7"}},{tag:"rect",attr:{x:"3",y:"14",width:"7",height:"7"}}]})(t)}function z3(t){return di({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"}},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"}},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"}}]})(t)}function KX(t){return di({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"}}]})(t)}function YX(t){return di({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"5 3 19 12 5 21 5 3"}}]})(t)}function q3(t){return di({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}},{tag:"polyline",attr:{points:"17 21 17 13 7 13 7 21"}},{tag:"polyline",attr:{points:"7 3 7 8 15 8"}}]})(t)}function W3(t){return di({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"}},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"}}]})(t)}function G3(t){return di({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"18",cy:"5",r:"3"}},{tag:"circle",attr:{cx:"6",cy:"12",r:"3"}},{tag:"circle",attr:{cx:"18",cy:"19",r:"3"}},{tag:"line",attr:{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}},{tag:"line",attr:{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"}}]})(t)}function fu(t){return di({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"}}]})(t)}function QX(t){return di({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"5"}},{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"3"}},{tag:"line",attr:{x1:"12",y1:"21",x2:"12",y2:"23"}},{tag:"line",attr:{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}},{tag:"line",attr:{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}},{tag:"line",attr:{x1:"1",y1:"12",x2:"3",y2:"12"}},{tag:"line",attr:{x1:"21",y1:"12",x2:"23",y2:"12"}},{tag:"line",attr:{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}},{tag:"line",attr:{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"}}]})(t)}function $3(t){return di({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"}}]})(t)}function XX(t){return di({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"}},{tag:"path",attr:{d:"M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"}}]})(t)}function JX(t){return di({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"}},{tag:"line",attr:{x1:"23",y1:"9",x2:"17",y2:"15"}},{tag:"line",attr:{x1:"17",y1:"9",x2:"23",y2:"15"}}]})(t)}function H3(t){return di({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"}},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"}}]})(t)}const ZX="modulepreload",eJ=function(t){return"/"+t},cP={},tJ=function(e,n,r){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(o=>{if(o=eJ(o),o in cP)return;cP[o]=!0;const u=o.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(!!r)for(let _=i.length-1;_>=0;_--){const b=i[_];if(b.href===o&&(!u||b.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${h}`))return;const v=document.createElement("link");if(v.rel=u?"stylesheet":ZX,u||(v.as="script",v.crossOrigin=""),v.href=o,document.head.appendChild(v),u)return new Promise((_,b)=>{v.addEventListener("load",_),v.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>e()).catch(o=>{const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=o,window.dispatchEvent(u),!u.defaultPrevented)throw o})};function Tm(){return Tm=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Tm.apply(this,arguments)}function nJ(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function rJ(t){ee.useEffect(t,[])}function lc(t,e){e===void 0&&(e={});var n=e,r=n.volume,i=r===void 0?1:r,o=n.playbackRate,u=o===void 0?1:o,h=n.soundEnabled,f=h===void 0?!0:h,v=n.interrupt,_=v===void 0?!1:v,b=n.onload,S=nJ(n,["id","volume","playbackRate","soundEnabled","interrupt","onload"]),I=Xn.useRef(null),M=Xn.useRef(!1),D=Xn.useState(null),ne=D[0],z=D[1],Y=Xn.useState(null),K=Y[0],ue=Y[1],oe=function(){typeof b=="function"&&b.call(this),M.current&&z(this.duration()*1e3),ue(this)};rJ(function(){return tJ(()=>import("./howler-tvANAFLq.js").then(Se=>Se.h),__vite__mapDeps([])).then(function(Se){if(!M.current){var Ue;I.current=(Ue=Se.Howl)!==null&&Ue!==void 0?Ue:Se.default.Howl,M.current=!0,new I.current(Tm({src:Array.isArray(t)?t:[t],volume:i,rate:u,onload:oe},S))}}),function(){M.current=!1}}),Xn.useEffect(function(){I.current&&K&&ue(new I.current(Tm({src:Array.isArray(t)?t:[t],volume:i,onload:oe},S)))},[JSON.stringify(t)]),Xn.useEffect(function(){K&&(K.volume(i),K.rate(u))},[i,u]);var fe=Xn.useCallback(function(Se){typeof Se>"u"&&(Se={}),!(!K||!f&&!Se.forceSoundEnabled)&&(_&&K.stop(),Se.playbackRate&&K.rate(Se.playbackRate),K.play(Se.id))},[K,f,_]),me=Xn.useCallback(function(Se){K&&K.stop(Se)},[K]),he=Xn.useCallback(function(Se){K&&K.pause(Se)},[K]),Z=[fe,{sound:K,stop:me,pause:he,duration:ne}];return Z}const iJ="/assets/star-wql4oqhK.wav",hP="/assets/button-J_WJeIQM.wav",oJ="/assets/card-xj0x2Eh2.wav",sJ="/assets/pop-DwoHE_6m.wav",aJ="/assets/victory-gnOqf9qL.wav",wo=ee.createContext([!0,()=>{}]),uJ=({children:t})=>{const[e,n]=ee.useState(!0),[r]=lc(iJ,{soundEnabled:e}),[i]=lc(hP,{soundEnabled:e}),[o]=lc(hP,{soundEnabled:e}),[u]=lc(oJ,{soundEnabled:e}),[h]=lc(sJ,{soundEnabled:e}),[f]=lc(aJ,{soundEnabled:e});ee.useEffect(()=>{n(window.localStorage.getItem("sound")!=="off")},[]);const v=ee.useCallback(()=>{const b=!e;n(b),window.localStorage.setItem("sound",b?"on":"off")},[e]),_=ee.useMemo(()=>({soundEnabled:e,toggleSound:v,playButton:i,playToggle:o,playCard:u,playStar:r,playTangram:h,playVictory:f}),[e,v,i,o,u,r,h,f]);return F.jsx(wo.Provider,{value:_,children:t})},pI=Wd("button",({css:t,onClick:e,mute:n,...r})=>{const{playButton:i}=ee.useContext(wo);return{css:{borderRadius:2,minWidth:0,minHeight:0,flex:"none",fontWeight:"bold",border:"none",fontSize:"inherit",color:"inherit",background:"none",cursor:"pointer",p:3,"&:disabled":{opacity:.3,cursor:"not-allowed"},"&:focus":{outline:"none"},...t},onClick:o=>{n||i(),e&&e(o)},...r}}),lJ=Ts(pI,{css:{border:"2px solid",borderRadius:2}}),cJ=Ts(pI,{css:{border:"2px solid",color:"errorText"}}),li=Ts(pI,({css:t,...e})=>({css:{animation:`${Bv({0:{bg:"pieces.lt2"},14:{bg:"pieces.rh"},28:{bg:"pieces.st2"},42:{bg:"pieces.mt1"},57:{bg:"pieces.st1"},71:{bg:"pieces.lt1"},85:{bg:"pieces.sq"},100:{bg:"pieces.lt2"}})} 20s linear infinite both`,color:"#FFFFFFDD",...t},...e})),Ly=({uid:t,size:e="badge",css:n,onClick:r,...i})=>{const{playButton:o}=ee.useContext(wo),u=ee.useContext(Xo),h=ee.useMemo(()=>{const f=Object.values(u.colors.pieces);return f[t.charCodeAt(0)%f.length].slice(1)},[u,t]);return F.jsx(Te,{as:"img",src:`https://api.dicebear.com/7.x/croodles-neutral/svg?seed=${t}&backgroundColor=${encodeURIComponent(h)}`,css:{m:"2px",boxShadow:`0 0 0 2px ${u.colors.dialogText}`,borderRadius:"50%",backgroundColor:h,size:e,...n},onClick:r?f=>{o(),r(f)}:void 0,...i})},hJ=(t,e)=>{const[n,r]=ee.useState(null),i=h=>{if(n&&h.touches&&h.touches.length!==1)clearTimeout(n.timeoutId);else{const f=h.touches?h.touches.item(0):h;r({timeoutId:setTimeout(t,e),startEvent:{clientX:f.clientX,clientY:f.clientY}})}},o=h=>{if(!n)return;let f=h.touches?h.touches.item(0):h;Math.sqrt(Math.pow(f.clientX-n.startEvent.clientX,2)+Math.pow(f.clientY-n.startEvent.clientY,2))>10&&clearTimeout(n.timeoutId)},u=()=>{n&&clearTimeout(n.timeoutId)};return{onMouseDown:i,onMouseUp:u,onMouseMove:o,onMouseLeave:u,onTouchStart:i,onTouchEnd:u,onTouchMove:o}},fJ=t=>t.edges>16?0:t.edges>8?1:2,fp=({showStroke:t,tangram:e,completed:n,selected:r,css:i,onBadgeClick:o,onClick:u,onLongPress:h,hideBadge:f,...v})=>{const{path:_,width:b,height:S,uid:I,approved:M,emoji:D}=e,ne=ee.useMemo(()=>fJ(e),[e]),{playCard:z}=ee.useContext(wo),K=ee.useContext(Xo).colors.difficulties[ne],ue=ee.useCallback(()=>{h&&h(e)},[h,e]),oe=hJ(ue,1e3);return F.jsx(Te,{css:i,onClick:u?()=>{z(),u(e)}:void 0,...oe,...v,children:F.jsxs(Te,{css:{opacity:I&&M===!1?.5:1,borderRadius:5,boxShadow:r?`0px 0px 0px 4px ${K}`:"0px 0px 0px 1px rgba(0, 0, 0, 0.1)",m:1,bg:"background",transition:`background-color ${qv}ms`,p:3,textAlign:"center",position:"relative",cursor:u||h?"pointer":void 0,width:128,height:178},deps:[K,r,I,M],children:[F.jsx(Te,{as:"svg",css:{flex:"1",justifyContent:"center",fill:K,stroke:t?"lime":void 0,strokeWidth:t?8:void 0},deps:[t,K],viewBox:`0 0 ${b} ${S}`,dangerouslySetInnerHTML:{__html:`<path d="${_}" />`}}),n&&F.jsx(Te,{css:{position:"absolute",top:1,left:1,fontSize:"30px"},children:D}),I&&!f&&F.jsx(Ly,{uid:I,css:{position:"absolute",bottom:1,right:1,cursor:o?"pointer":void 0},onClick:o?fe=>{fe.stopPropagation(),o(I)}:void 0})]})})},Cs=({children:t,title:e,onClose:n,big:r,css:i,...o})=>{const{playButton:u}=ee.useContext(wo);return Ab.createPortal(F.jsx(Te,{onClick:n,css:{position:"fixed",top:0,left:0,right:0,bottom:0,bg:"#00000080",alignItems:"center",justifyContent:"center",animation:`${ao/2}ms fadeIn ease both`,p:3},children:F.jsxs(Te,{css:{flex:"0 1 auto",bg:"dialogBackground",color:"dialogText",borderRadius:3,transition:`background-color ${qv}ms, color ${qv}ms`,fontSize:3,p:3,gap:3,maxWidth:"95vw",width:r?"568px":"400px"},onClick:h=>h.stopPropagation(),children:[F.jsxs(Te,{css:{flexDirection:"row",gap:3,alignItems:"center",justifyContent:"space-between",zIndex:1},children:[e,F.jsx(Te,{as:H3,css:{cursor:"pointer",size:"badge",ml:e?void 0:"auto"},onClick:()=>{u(),n()}})]}),F.jsx(Te,{css:{overflow:"auto",flex:"1",maxWidth:"100%",...i},...o,children:t})]})}),document.getElementById("dialogContainer"))},vt=Wd("div",{css:{display:"inline",minWidth:0,minHeight:0,flex:"none"}}),bi=Ts(vt,{css:{fontSize:2,color:"errorText"}}),Ks=Ts(vt,{css:{fontSize:2,opacity:.75}}),Gi=Ts(vt,{css:{fontSize:4,fontWeight:"bold"}}),cc=Ts(vt,{css:{fontSize:3,fontWeight:"bold"}}),fP=Wd("a",{css:{cursor:"pointer",textDecoration:"underline",color:"inherit","&:visited":{color:"inherit"}}}),Ho=Ts(vt,{css:{cursor:"pointer",textDecoration:"underline"}}),vi=({icon:t,css:e})=>F.jsx(vt,{as:t,css:{position:"relative",top:"0.1em",size:"0.9em",...e}}),dJ=({uid:t,tangrams:e,deferred:n})=>{const r=xn(),{usersMetadata:i}=ee.useContext(Mr),{setPlaylist:o}=ee.useContext(Ni),u=i[t]?i[t].username:null;return F.jsxs(Cs,{big:!0,title:F.jsx(Gi,{children:u?r.formatMessage({id:"{username} challenged you"},{username:u}):r.formatMessage({id:"Rise to the challenge"},{username:u})}),onClose:()=>n.reject(Zn),css:{gap:3,overflow:"initial",maxWidth:"568px"},children:[F.jsx(Te,{css:{flex:"1",overflow:"auto",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",m:-1},children:e.map(h=>F.jsx(fp,{selected:!0,tangram:h,css:{m:1}},h.id))}),F.jsx(li,{onClick:()=>{o(e),n.resolve()},children:r.formatMessage({id:"Let's go!"})})]})},Wn=Wd("input",{type:"text",css:{color:"inherit",fontSize:"inherit",bg:"inputBackground",border:"none",borderRadius:2,borderColor:"currentColor",p:2,"&:disabled":{opacity:.5,cursor:"not-allowed"},"&:focus":{outline:"none"}}}),pJ=Ts(Te,({css:t,...e})=>({css:{p:3,alignItems:"center",position:"sticky",top:0,zIndex:1,background:`linear-gradient(0deg, rgba(0,0,0,0) 0%, ${ee.useContext(Xo).colors.dialogBackground} 50%)`,...t},...e})),gJ=({deferred:t})=>{const e=xn(),{currentUser:n}=ee.useContext(Mr),{pendingTangrams:r,approvedTangrams:i}=ee.useContext(wu),{showProfile:o,showTangram:u}=ee.useContext(pp),{setPlaylist:h,shareTangrams:f,startRandomPlaylist:v,isTangramCompleted:_,isTangramStarred:b}=ee.useContext(Ni),[S,I]=ee.useState([]),[M,D]=ee.useState(()=>{const fe=window.localStorage.getItem("selectedGalleryFilter");return["all","uncompleted","starred","pending"].includes(fe)?fe:"all"}),ne=fe=>{D(fe.target.value),window.localStorage.setItem("selectedGalleryFilter",fe.target.value)},z=ee.useCallback(fe=>{I(me=>me.some(he=>he.id===fe.id)?me.filter(he=>he.id!==fe.id):[...me,fe])},[]),Y=()=>{S.length?h(S):v(),t.resolve()},K=()=>t.reject(Zn),ue=ee.useMemo(()=>{const fe=M==="pending"?r:i,me={};for(const Z of fe)M==="uncompleted"&&_(Z.id)||M==="starred"&&!b(Z.id)||(me[Z.category]||(me[Z.category]=[]),me[Z.category].push(Z));const he={};for(const Z of Object.keys(me).sort())he[Z]=me[Z].sort(Z==="letters"?zX:Z==="digits"?BX:VX);return he},[r,i,M,_,b]),oe=Object.keys(ue);return F.jsx(F.Fragment,{children:F.jsx(Cs,{big:!0,title:F.jsx(Gi,{children:e.formatMessage({id:"Tangram gallery"})}),css:{gap:3,width:"568px"},onClose:K,children:F.jsxs(F.Fragment,{children:[F.jsxs(Wn,{as:"select",value:M,onChange:ne,children:[F.jsx("option",{value:"all",children:e.formatMessage({id:"All tangrams"})}),F.jsx("option",{value:"uncompleted",children:e.formatMessage({id:"Uncompleted tangrams"})}),F.jsx("option",{value:"starred",children:e.formatMessage({id:" Starred tangrams"})}),F.jsx("option",{value:"pending",children:e.formatMessage({id:"Pending approbation tangrams"})})]}),F.jsx(Te,{css:{flex:"1",overflow:"auto",gap:3},children:oe.length===0?F.jsx(Te,{css:{gap:3,alignItems:"center"},children:M==="uncompleted"?F.jsxs(F.Fragment,{children:[F.jsx(vt,{css:{fontSize:"8em"},children:""}),F.jsxs(Te,{css:{gap:2,alignItems:"center",px:3},children:[F.jsx(cc,{css:{textAlign:"center"},children:F.jsx(Qt,{id:"You've completed all tangrams"})}),F.jsx(Ks,{children:F.jsx(Qt,{id:"Come back later for more or create your own tangrams"})})]})]}):M==="pending"?n&&n.isAdmin?F.jsxs(F.Fragment,{children:[F.jsx(vt,{css:{fontSize:"8em"},children:""}),F.jsxs(Te,{css:{gap:2,alignItems:"center",px:3},children:[F.jsx(cc,{css:{textAlign:"center"},children:F.jsx(Qt,{id:"No tangram left to approve"})}),F.jsx(Ks,{children:F.jsx(Qt,{id:"Good job moderator {username}!",values:{username:n.username}})})]})]}):F.jsxs(F.Fragment,{children:[F.jsx(vt,{css:{fontSize:"8em"},children:""}),F.jsxs(Te,{css:{gap:2,alignItems:"center",px:3},children:[F.jsx(cc,{css:{textAlign:"center"},children:F.jsx(Qt,{id:"All your tangrams have been approved"})}),F.jsx(Ks,{children:F.jsx(Qt,{id:"Create more tangrams and earn <starIcon></starIcon>",values:{starIcon:()=>F.jsx(vi,{icon:fu,css:{fill:"currentColor"}})}})})]})]}):M==="starred"?F.jsxs(F.Fragment,{children:[F.jsx(vt,{css:{fontSize:"8em"},children:""}),F.jsxs(Te,{css:{gap:2,alignItems:"center",px:3},children:[F.jsx(cc,{css:{textAlign:"center"},children:F.jsx(Qt,{id:"No starred tangrams yet"})}),F.jsx(Ks,{children:F.jsx(Qt,{id:"Press <starIcon></starIcon> to star a tangram and show your love",values:{starIcon:()=>F.jsx(vi,{icon:fu,css:{fill:"currentColor"}})}})})]})]}):F.jsxs(F.Fragment,{children:[F.jsx(vt,{css:{fontSize:"8em"},children:""}),F.jsxs(Te,{css:{gap:2,alignItems:"center",px:3},children:[F.jsx(cc,{css:{textAlign:"center"},children:F.jsx(Qt,{id:"Nothing to see here"})}),F.jsx(Ks,{children:F.jsx(Qt,{id:"Something might have gone wrong"})})]})]})},"noresult"):F.jsx(Te,{css:{flex:"1",overflow:"auto",gap:3},children:oe.map(fe=>F.jsxs(Te,{children:[F.jsx(pJ,{children:F.jsx(cc,{children:e.formatMessage({id:fe})})}),F.jsx(Te,{css:{display:"grid",gridTemplateColumns:"repeat(auto-fill, 136px)",gridColumnGap:2,gridRowGap:2,justifyContent:"center",justifyItems:"center",alignItems:"center"},children:ue[fe].map(me=>F.jsx(fp,{showStroke:M==="pending"&&n&&n.isAdmin,tangram:me,completed:_(me.id),selected:S.some(he=>he.id===me.id),onClick:z,onBadgeClick:o,onLongPress:u},me.id))})]},fe))},"results")}),F.jsxs(Te,{css:{flexDirection:"row",gap:2},children:[F.jsx(li,{onClick:Y,css:{flex:"1"},children:S.length===0?e.formatMessage({id:"Play now!"}):S.length===1?e.formatMessage({id:"Start 1 tangram!"}):e.formatMessage({id:"Start {count} tangrams!"},{count:S.length})}),F.jsx(li,{disabled:S.length===0,onClick:()=>f(S),children:F.jsx(Te,{as:G3,css:{size:"icon",m:"-2px"}})})]})]})})})},vJ=({deferred:t})=>{const e=xn(),{showProfile:n}=ee.useContext(pp),{currentUser:r,usersMetadata:i}=ee.useContext(Mr),{approvedTangrams:o}=ee.useContext(wu),{tangramsStarredBy:u,tangramsCompletedBy:h}=ee.useContext(Ni),[f,v]=ee.useState(()=>{const M=window.localStorage.getItem("selectedLeaderboard");return["stars","completed","created"].includes(M)?M:"stars"}),_=M=>{v(M.target.value),window.localStorage.setItem("selectedLeaderboard",M.target.value)},b=M=>{n(M)},S=ee.useMemo(()=>{const M={},D={},ne={};for(const{id:z,uid:Y}of o){D[Y]||(D[Y]=0,M[Y]=0);for(const K in u[z])K!==Y&&u[z][K]&&(M[Y]+=1);D[Y]+=1;for(const K in h[z])ne[K]||(ne[K]=0),ne[K]+=1}return Object.keys(i).map(z=>{const Y=i[z];return{uid:z,...Y,stars:M[z]||0,completed:ne[z]||0,created:D[z]||0}})},[o,u,h,i]),I=ee.useMemo(()=>{if(S)return S.sort((M,D)=>D[f]-M[f])},[S,f]);return F.jsx(Cs,{title:F.jsx(Gi,{children:e.formatMessage({id:"Leaderboard"})}),onClose:()=>t.reject(Zn),css:{gap:3},children:F.jsxs(F.Fragment,{children:[F.jsxs(Wn,{as:"select",value:f,onChange:_,children:[F.jsx("option",{value:"stars",children:e.formatMessage({id:"Stars earned"})}),F.jsx("option",{value:"completed",children:e.formatMessage({id:"Completed tangrams"})}),F.jsx("option",{value:"created",children:e.formatMessage({id:"Created tangrams"})})]}),F.jsx(Te,{css:{flex:"1",overflow:"auto",gap:2},children:I.map(({uid:M,username:D,...ne},z)=>F.jsxs(Te,{css:{flexDirection:"row",gap:2,alignItems:"center",fontSize:z===0?"1.6em":z===1?"1.4em":z===2?"1.2em":void 0},deps:[z],children:[F.jsx(Ly,{uid:M,size:"badge",onClick:()=>b(M)}),F.jsx(vt,{css:{flex:"1",fontWeight:r&&r.uid===M?"bold":void 0},deps:[r,M],children:D}),F.jsxs(vt,{children:[ne[f],f==="stars"&&F.jsxs(F.Fragment,{children:[" ",F.jsx(vi,{icon:fu,css:{fill:"currentColor"}})]})]})]},M))})]})})};var dp=t=>t.type==="checkbox",Pc=t=>t instanceof Date,mi=t=>t==null;const K3=t=>typeof t=="object";var Dr=t=>!mi(t)&&!Array.isArray(t)&&K3(t)&&!Pc(t),mJ=t=>Dr(t)&&t.target?dp(t.target)?t.target.checked:t.target.value:t,yJ=t=>t.substring(0,t.search(/.\d/))||t,_J=(t,e)=>[...t].some(n=>yJ(e)===n),Fd=t=>(t||[]).filter(Boolean),Nr=t=>t===void 0,st=(t,e,n)=>{if(Dr(t)&&e){const r=Fd(e.split(/[,[\].]+?/)).reduce((i,o)=>mi(i)?i:i[o],t);return Nr(r)||r===t?Nr(t[e])?n:t[e]:r}};const wJ={BLUR:"blur",CHANGE:"change"},jo={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Fs={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};var gI=(t,e)=>{const n=Object.assign({},t);return delete n[e],n};ee.createContext(null);var EJ=(t,e,n,r=!0)=>{function i(u){return()=>{if(u in t)return e[u]!==jo.all&&(e[u]=!r||jo.all),n&&(n[u]=!0),t[u]}}const o={};for(const u in t)Object.defineProperty(o,u,{get:i(u)});return o},Li=t=>Dr(t)&&!Object.keys(t).length,SJ=(t,e,n)=>{const r=gI(t,"name");return Li(r)||Object.keys(r).length>=Object.keys(e).length||Object.keys(r).find(i=>e[i]===(!n||jo.all))},SE=t=>Array.isArray(t)?t:[t];function bJ(t){const e=ee.useRef(t);e.current=t,ee.useEffect(()=>{const n=i=>{i&&i.unsubscribe()},r=!t.disabled&&e.current.subject.subscribe({next:e.current.callback});return()=>n(r)},[t.disabled])}var gs=t=>typeof t=="string",TJ=(t,e,n,r)=>{const i=Array.isArray(t);return gs(t)?(r&&e.watch.add(t),st(n,t)):i?t.map(o=>(r&&e.watch.add(o),st(n,o))):(r&&(e.watchAll=!0),n)},My=t=>typeof t=="function",Y3=t=>{for(const e in t)if(My(t[e]))return!0;return!1},IJ=(t,e,n,r,i)=>e?Object.assign(Object.assign({},n[t]),{types:Object.assign(Object.assign({},n[t]&&n[t].types?n[t].types:{}),{[r]:i||!0})}):{},vI=t=>/^\w*$/.test(t),Q3=t=>Fd(t.replace(/["|']|\]/g,"").split(/\.|\[/));function Un(t,e,n){let r=-1;const i=vI(e)?[e]:Q3(e),o=i.length,u=o-1;for(;++r<o;){const h=i[r];let f=n;if(r!==u){const v=t[h];f=Dr(v)||Array.isArray(v)?v:isNaN(+i[r+1])?{}:[]}t[h]=f,t=t[h]}return t}const PS=(t,e,n)=>{for(const r of n||Object.keys(t)){const i=st(t,r);if(i){const o=i._f,u=gI(i,"_f");if(o&&e(o.name)){if(o.ref.focus&&Nr(o.ref.focus()))break;if(o.refs){o.refs[0].focus();break}}else Dr(u)&&PS(u,e)}}};var dP=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));function Nf(t){let e;const n=Array.isArray(t);if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(n||Dr(t)){e=n?[]:{};for(const r in t){if(My(t[r])){e=t;break}e[r]=Nf(t[r])}}else return t;return e}function bE(){let t=[];return{get observers(){return t},next:i=>{for(const o of t)o.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(o=>o!==i)}}),unsubscribe:()=>{t=[]}}}var Im=t=>mi(t)||!K3(t);function Rc(t,e){if(Im(t)||Im(e))return t===e;if(Pc(t)&&Pc(e))return t.getTime()===e.getTime();const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const i of n){const o=t[i];if(!r.includes(i))return!1;if(i!=="ref"){const u=e[i];if(Pc(o)&&Pc(u)||Dr(o)&&Dr(u)||Array.isArray(o)&&Array.isArray(u)?!Rc(o,u):o!==u)return!1}}return!0}var pP=t=>({isOnSubmit:!t||t===jo.onSubmit,isOnBlur:t===jo.onBlur,isOnChange:t===jo.onChange,isOnAll:t===jo.all,isOnTouch:t===jo.onTouched}),lh=t=>typeof t=="boolean",mI=t=>t.type==="file",RS=t=>t instanceof HTMLElement,X3=t=>t.type==="select-multiple",yI=t=>t.type==="radio",CJ=t=>yI(t)||dp(t),gP=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u",TE=t=>RS(t)&&document.contains(t);function xJ(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=Nr(t)?r++:t[e[r++]];return t}function ti(t,e){const n=vI(e)?[e]:Q3(e),r=n.length==1?t:xJ(t,n),i=n[n.length-1];let o;r&&delete r[i];for(let u=0;u<n.slice(0,-1).length;u++){let h=-1,f;const v=n.slice(0,-(u+1)),_=v.length-1;for(u>0&&(o=t);++h<v.length;){const b=v[h];f=f?f[b]:t[b],_===h&&(Dr(f)&&Li(f)||Array.isArray(f)&&!f.filter(S=>Dr(S)&&!Li(S)||lh(S)).length)&&(o?delete o[b]:delete t[b]),o=f}}return t}function Cm(t,e={}){const n=Array.isArray(t);if(Dr(t)||n)for(const r in t)Array.isArray(t[r])||Dr(t[r])&&!Y3(t[r])?(e[r]=Array.isArray(t[r])?[]:{},Cm(t[r],e[r])):mi(t[r])||(e[r]=!0);return e}function J3(t,e,n){const r=Array.isArray(t);if(Dr(t)||r)for(const i in t)Array.isArray(t[i])||Dr(t[i])&&!Y3(t[i])?Nr(e)||Im(n[i])?n[i]=Array.isArray(t[i])?Cm(t[i],[]):Object.assign({},Cm(t[i])):J3(t[i],mi(e)?{}:e[i],n[i]):n[i]=!Rc(t[i],e[i]);return n}var vP=(t,e)=>J3(t,e,Cm(e));const mP={value:!1,isValid:!1},yP={value:!0,isValid:!0};var Z3=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Nr(t[0].attributes.value)?Nr(t[0].value)||t[0].value===""?yP:{value:t[0].value,isValid:!0}:yP:mP}return mP},ej=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>Nr(t)?t:e?t===""?NaN:+t:n&&gs(t)?new Date(t):r?r(t):t;const _P={isValid:!1,value:null};var tj=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,_P):_P;function IE(t){const e=t.ref;if(!(t.refs?t.refs.every(n=>n.disabled):e.disabled))return mI(e)?e.files:yI(e)?tj(t.refs).value:X3(e)?[...e.selectedOptions].map(({value:n})=>n):dp(e)?Z3(t.refs).value:ej(Nr(e.value)?t.ref.value:e.value,t)}var NJ=(t,e,n,r)=>{const i={};for(const o of t){const u=st(e,o);u&&Un(i,o,u._f)}return{criteriaMode:n,names:[...t],fields:i,shouldUseNativeValidation:r}},xm=t=>t instanceof RegExp,yf=t=>Nr(t)?void 0:xm(t)?t.source:Dr(t)?xm(t.value)?t.value.source:t.value:t,AJ=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate);function wP(t,e,n){const r=st(t,n);if(r||vI(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const o=i.join("."),u=st(e,o),h=st(t,o);if(u&&!Array.isArray(u)&&n!==o)return{name:n};if(h&&h.type)return{name:o,error:h};i.pop()}return{name:n}}var kJ=(t,e,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(e||t):(n?r.isOnBlur:i.isOnBlur)?!t:(n?r.isOnChange:i.isOnChange)?t:!0,EP=(t,e)=>!Fd(st(t,e)).length&&ti(t,e),gv=t=>gs(t)||ee.isValidElement(t);function SP(t,e,n="validate"){if(gv(t)||Array.isArray(t)&&t.every(gv)||lh(t)&&!t)return{type:n,message:gv(t)?t:"",ref:e}}var hc=t=>Dr(t)&&!xm(t)?t:{value:t,message:""},bP=async(t,e,n,r)=>{const{ref:i,refs:o,required:u,maxLength:h,minLength:f,min:v,max:_,pattern:b,validate:S,name:I,valueAsNumber:M,mount:D,disabled:ne}=t._f;if(!D||ne)return{};const z=o?o[0]:i,Y=Se=>{r&&z.reportValidity&&(z.setCustomValidity(lh(Se)?"":Se||" "),z.reportValidity())},K={},ue=yI(i),oe=dp(i),fe=ue||oe,me=(M||mI(i))&&!i.value||e===""||Array.isArray(e)&&!e.length,he=IJ.bind(null,I,n,K),Z=(Se,Ue,Ge,ft=Fs.maxLength,Ae=Fs.minLength)=>{const tt=Se?Ue:Ge;K[I]=Object.assign({type:Se?ft:Ae,message:tt,ref:i},he(Se?ft:Ae,tt))};if(u&&(!fe&&(me||mi(e))||lh(e)&&!e||oe&&!Z3(o).isValid||ue&&!tj(o).isValid)){const{value:Se,message:Ue}=gv(u)?{value:!!u,message:u}:hc(u);if(Se&&(K[I]=Object.assign({type:Fs.required,message:Ue,ref:z},he(Fs.required,Ue)),!n))return Y(Ue),K}if(!me&&(!mi(v)||!mi(_))){let Se,Ue;const Ge=hc(_),ft=hc(v);if(isNaN(e)){const Ae=i.valueAsDate||new Date(e);gs(Ge.value)&&(Se=Ae>new Date(Ge.value)),gs(ft.value)&&(Ue=Ae<new Date(ft.value))}else{const Ae=i.valueAsNumber||parseFloat(e);mi(Ge.value)||(Se=Ae>Ge.value),mi(ft.value)||(Ue=Ae<ft.value)}if((Se||Ue)&&(Z(!!Se,Ge.message,ft.message,Fs.max,Fs.min),!n))return Y(K[I].message),K}if((h||f)&&!me&&gs(e)){const Se=hc(h),Ue=hc(f),Ge=!mi(Se.value)&&e.length>Se.value,ft=!mi(Ue.value)&&e.length<Ue.value;if((Ge||ft)&&(Z(Ge,Se.message,Ue.message),!n))return Y(K[I].message),K}if(b&&!me&&gs(e)){const{value:Se,message:Ue}=hc(b);if(xm(Se)&&!e.match(Se)&&(K[I]=Object.assign({type:Fs.pattern,message:Ue,ref:i},he(Fs.pattern,Ue)),!n))return Y(Ue),K}if(S){if(My(S)){const Se=await S(e),Ue=SP(Se,z);if(Ue&&(K[I]=Object.assign(Object.assign({},Ue),he(Fs.validate,Ue.message)),!n))return Y(Ue.message),K}else if(Dr(S)){let Se={};for(const Ue in S){if(!Li(Se)&&!n)break;const Ge=SP(await S[Ue](e),z,Ue);Ge&&(Se=Object.assign(Object.assign({},Ge),he(Ue,Ge.message)),Y(Ge.message),n&&(K[I]=Se))}if(!Li(Se)&&(K[I]=Object.assign({ref:z},Se),!n))return K}}return Y(!0),K};const PJ={mode:jo.onSubmit,reValidateMode:jo.onChange,shouldFocusError:!0};function RJ(t={}){let e=Object.assign(Object.assign({},PJ),t),n={isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}},r={},i=e.defaultValues||{},o=e.shouldUnregister?{}:Nf(i),u={action:!1,mount:!1,watch:!1},h={mount:new Set,unMount:new Set,array:new Set,watch:new Set},f,v=0,_={};const b={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},S={watch:bE(),array:bE(),state:bE()},I=pP(e.mode),M=pP(e.reValidateMode),D=e.criteriaMode===jo.all,ne=(ce,ve)=>(..._e)=>{clearTimeout(v),v=window.setTimeout(()=>ce(..._e),ve)},z=async ce=>{let ve=!1;return b.isValid&&(ve=e.resolver?Li((await me()).errors):await Z(r,!0),!ce&&ve!==n.isValid&&(n.isValid=ve,S.state.next({isValid:ve}))),ve},Y=(ce,ve,_e,je=[],De=!0,Ve=!0)=>{if(u.action=!0,Ve&&st(r,ce)){const He=ve(st(r,ce),_e.argA,_e.argB);De&&Un(r,ce,He)}if(Array.isArray(st(n.errors,ce))){const He=ve(st(n.errors,ce),_e.argA,_e.argB);De&&Un(n.errors,ce,He),EP(n.errors,ce)}if(b.touchedFields&&st(n.touchedFields,ce)){const He=ve(st(n.touchedFields,ce),_e.argA,_e.argB);De&&Un(n.touchedFields,ce,He),EP(n.touchedFields,ce)}(b.dirtyFields||b.isDirty)&&(n.dirtyFields=vP(i,o)),S.state.next({isDirty:Ue(ce,je),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})},K=(ce,ve)=>(Un(n.errors,ce,ve),S.state.next({errors:n.errors})),ue=(ce,ve,_e)=>{const je=st(r,ce);if(je){const De=st(o,ce,st(i,ce));Nr(De)||_e&&_e.defaultChecked||ve?Un(o,ce,ve?De:IE(je._f)):Ae(ce,De)}u.mount&&z()},oe=(ce,ve,_e,je=!0)=>{let De=!1;const Ve={name:ce},He=st(n.touchedFields,ce);if(b.isDirty){const Vt=n.isDirty;n.isDirty=Ve.isDirty=Ue(),De=Vt!==Ve.isDirty}if(b.dirtyFields&&!_e){const Vt=st(n.dirtyFields,ce);Rc(st(i,ce),ve)?ti(n.dirtyFields,ce):Un(n.dirtyFields,ce,!0),Ve.dirtyFields=n.dirtyFields,De=De||Vt!==st(n.dirtyFields,ce)}return _e&&!He&&(Un(n.touchedFields,ce,_e),Ve.touchedFields=n.touchedFields,De=De||b.touchedFields&&He!==_e),De&&je&&S.state.next(Ve),De?Ve:{}},fe=async(ce,ve,_e,je,De)=>{const Ve=st(n.errors,ve),He=b.isValid&&n.isValid!==_e;if(t.delayError&&je?(f=f||ne(K,t.delayError),f(ve,je)):(clearTimeout(v),je?Un(n.errors,ve,je):ti(n.errors,ve)),((je?!Rc(Ve,je):Ve)||!Li(De)||He)&&!ce){const Vt=Object.assign(Object.assign(Object.assign({},De),He?{isValid:_e}:{}),{errors:n.errors,name:ve});n=Object.assign(Object.assign({},n),Vt),S.state.next(Vt)}_[ve]--,b.isValidating&&!_[ve]&&(S.state.next({isValidating:!1}),_={})},me=async ce=>e.resolver?await e.resolver(Object.assign({},o),e.context,NJ(ce||h.mount,r,e.criteriaMode,e.shouldUseNativeValidation)):{},he=async ce=>{const{errors:ve}=await me();if(ce)for(const _e of ce){const je=st(ve,_e);je?Un(n.errors,_e,je):ti(n.errors,_e)}else n.errors=ve;return ve},Z=async(ce,ve,_e={valid:!0})=>{for(const je in ce){const De=ce[je];if(De){const Ve=De._f,He=gI(De,"_f");if(Ve){const Vt=await bP(De,st(o,Ve.name),D,e.shouldUseNativeValidation);if(Vt[Ve.name]&&(_e.valid=!1,ve))break;ve||(Vt[Ve.name]?Un(n.errors,Ve.name,Vt[Ve.name]):ti(n.errors,Ve.name))}He&&await Z(He,ve,_e)}}return _e.valid},Se=()=>{for(const ce of h.unMount){const ve=st(r,ce);ve&&(ve._f.refs?ve._f.refs.every(_e=>!TE(_e)):!TE(ve._f.ref))&&Kt(ce)}h.unMount=new Set},Ue=(ce,ve)=>(ce&&ve&&Un(o,ce,ve),!Rc(Ne(),i)),Ge=(ce,ve,_e)=>{const je=Object.assign({},u.mount?o:Nr(ve)?i:gs(ce)?{[ce]:ve}:ve);return TJ(ce,h,je,_e)},ft=ce=>st(u.mount?o:i,ce,t.shouldUnregister?st(i,ce,[]):[]),Ae=(ce,ve,_e={})=>{const je=st(r,ce);let De=ve;if(je){const Ve=je._f;Ve&&(Un(o,ce,ej(ve,Ve)),De=gP&&RS(Ve.ref)&&mi(ve)?"":ve,X3(Ve.ref)?[...Ve.ref.options].forEach(He=>He.selected=De.includes(He.value)):Ve.refs?dp(Ve.ref)?Ve.refs.length>1?Ve.refs.forEach(He=>He.checked=Array.isArray(De)?!!De.find(Vt=>Vt===He.value):De===He.value):Ve.refs[0].checked=!!De:Ve.refs.forEach(He=>He.checked=He.value===De):mI(Ve.ref)||(Ve.ref.value=De))}(_e.shouldDirty||_e.shouldTouch)&&oe(ce,De,_e.shouldTouch),_e.shouldValidate&&Fe(ce)},tt=(ce,ve,_e)=>{for(const je in ve){const De=ve[je],Ve=`${ce}.${je}`,He=st(r,Ve);(h.array.has(ce)||!Im(De)||He&&!He._f)&&!Pc(De)?tt(Ve,De,_e):Ae(Ve,De,_e)}},Ce=(ce,ve,_e={})=>{const je=st(r,ce),De=h.array.has(ce);Un(o,ce,ve),De?(S.array.next({name:ce,values:o}),(b.isDirty||b.dirtyFields)&&_e.shouldDirty&&(n.dirtyFields=vP(i,o),S.state.next({name:ce,dirtyFields:n.dirtyFields,isDirty:Ue(ce,ve)}))):je&&!je._f&&!mi(ve)?tt(ce,ve,_e):Ae(ce,ve,_e),dP(ce,h)&&S.state.next({}),S.watch.next({name:ce})},Ut=async ce=>{const ve=ce.target;let _e=ve.name;const je=st(r,_e);if(je){let De,Ve;const He=ve.type?IE(je._f):mJ(ce),Vt=ce.type===wJ.BLUR,Kr=!AJ(je._f)&&!e.resolver&&!st(n.errors,_e)&&!je._f.deps||kJ(Vt,st(n.touchedFields,_e),n.isSubmitted,M,I),Xi=dP(_e,h,Vt);Vt?je._f.onBlur&&je._f.onBlur(ce):je._f.onChange&&je._f.onChange(ce),Un(o,_e,He);const Eo=oe(_e,He,Vt,!1),Sn=!Li(Eo)||Xi;if(!Vt&&S.watch.next({name:_e,type:ce.type}),Kr)return Sn&&S.state.next(Object.assign({name:_e},Xi?{}:Eo));if(!Vt&&Xi&&S.state.next({}),_[_e]=(_[_e],1),b.isValidating&&S.state.next({isValidating:!0}),e.resolver){const{errors:wa}=await me([_e]),un=wP(n.errors,r,_e),Eu=wP(wa,r,un.name||_e);De=Eu.error,_e=Eu.name,Ve=Li(wa)}else De=(await bP(je,st(o,_e),D,e.shouldUseNativeValidation))[_e],Ve=await z(!0);je._f.deps&&Fe(je._f.deps),fe(!1,_e,Ve,De,Eo)}},Fe=async(ce,ve={})=>{let _e,je;const De=SE(ce);if(S.state.next({isValidating:!0}),e.resolver){const Ve=await he(Nr(ce)?ce:De);_e=Li(Ve),je=ce?!De.some(He=>st(Ve,He)):_e}else ce?(je=(await Promise.all(De.map(async Ve=>{const He=st(r,Ve);return await Z(He&&He._f?{[Ve]:He}:He)}))).every(Boolean),!(!je&&!n.isValid)&&z()):je=_e=await Z(r);return S.state.next(Object.assign(Object.assign(Object.assign({},!gs(ce)||b.isValid&&_e!==n.isValid?{}:{name:ce}),e.resolver?{isValid:_e}:{}),{errors:n.errors,isValidating:!1})),ve.shouldFocus&&!je&&PS(r,Ve=>st(n.errors,Ve),ce?De:h.mount),je},Ne=ce=>{const ve=Object.assign(Object.assign({},i),u.mount?o:{});return Nr(ce)?ve:gs(ce)?st(ve,ce):ce.map(_e=>st(ve,_e))},qe=ce=>{ce?SE(ce).forEach(ve=>ti(n.errors,ve)):n.errors={},S.state.next({errors:n.errors,isValid:!0})},Pt=(ce,ve,_e)=>{const je=(st(r,ce,{_f:{}})._f||{}).ref;Un(n.errors,ce,Object.assign(Object.assign({},ve),{ref:je})),S.state.next({name:ce,errors:n.errors,isValid:!1}),_e&&_e.shouldFocus&&je&&je.focus&&je.focus()},rt=(ce,ve)=>My(ce)?S.watch.subscribe({next:_e=>ce(Ge(void 0,ve),_e)}):Ge(ce,ve,!0),Kt=(ce,ve={})=>{for(const _e of ce?SE(ce):h.mount)h.mount.delete(_e),h.array.delete(_e),st(r,_e)&&(ve.keepValue||(ti(r,_e),ti(o,_e)),!ve.keepError&&ti(n.errors,_e),!ve.keepDirty&&ti(n.dirtyFields,_e),!ve.keepTouched&&ti(n.touchedFields,_e),!e.shouldUnregister&&!ve.keepDefaultValue&&ti(i,_e));S.watch.next({}),S.state.next(Object.assign(Object.assign({},n),ve.keepDirty?{isDirty:Ue()}:{})),!ve.keepIsValid&&z()},It=(ce,ve={})=>{let _e=st(r,ce);return Un(r,ce,{_f:Object.assign(Object.assign(Object.assign({},_e&&_e._f?_e._f:{ref:{name:ce}}),{name:ce,mount:!0}),ve)}),h.mount.add(ce),!Nr(ve.value)&&!ve.disabled&&Un(o,ce,st(o,ce,ve.value)),_e?lh(ve.disabled)&&Un(o,ce,ve.disabled?void 0:st(o,ce,IE(_e._f))):ue(ce,!0),Object.assign(Object.assign(Object.assign({},lh(ve.disabled)?{disabled:ve.disabled}:{}),e.shouldUseNativeValidation?{required:!!ve.required,min:yf(ve.min),max:yf(ve.max),minLength:yf(ve.minLength),maxLength:yf(ve.maxLength),pattern:yf(ve.pattern)}:{}),{name:ce,onChange:Ut,onBlur:Ut,ref:je=>{if(je){It(ce,ve),_e=st(r,ce);const De=Nr(je.value)&&je.querySelectorAll&&je.querySelectorAll("input,select,textarea")[0]||je,Ve=CJ(De);if(De===_e._f.ref||Ve&&Fd(_e._f.refs).find(He=>He===De))return;Un(r,ce,{_f:Ve?Object.assign(Object.assign({},_e._f),{refs:[...Fd(_e._f.refs).filter(TE),De],ref:{type:De.type,name:ce}}):Object.assign(Object.assign({},_e._f),{ref:De})}),!ve.disabled&&ue(ce,!1,De)}else _e=st(r,ce,{}),_e._f&&(_e._f.mount=!1),(e.shouldUnregister||ve.shouldUnregister)&&!(_J(h.array,ce)&&u.action)&&h.unMount.add(ce)}})};return{control:{register:It,unregister:Kt,_executeSchema:me,_getWatch:Ge,_getDirty:Ue,_updateValid:z,_removeUnmounted:Se,_updateFieldArray:Y,_getFieldArray:ft,_subjects:S,_proxyFormState:b,get _fields(){return r},set _fields(ce){r=ce},get _formValues(){return o},set _formValues(ce){o=ce},get _stateFlags(){return u},set _stateFlags(ce){u=ce},get _defaultValues(){return i},set _defaultValues(ce){i=ce},get _names(){return h},set _names(ce){h=ce},get _formState(){return n},set _formState(ce){n=ce},get _options(){return e},set _options(ce){e=Object.assign(Object.assign({},e),ce)}},trigger:Fe,register:It,handleSubmit:(ce,ve)=>async _e=>{_e&&(_e.preventDefault&&_e.preventDefault(),_e.persist&&_e.persist());let je=!0,De=e.shouldUnregister?Nf(o):Object.assign({},o);S.state.next({isSubmitting:!0});try{if(e.resolver){const{errors:Ve,values:He}=await me();n.errors=Ve,De=He}else await Z(r);Li(n.errors)&&Object.keys(n.errors).every(Ve=>st(De,Ve))?(S.state.next({errors:{},isSubmitting:!0}),await ce(De,_e)):(ve&&await ve(n.errors,_e),e.shouldFocusError&&PS(r,Ve=>st(n.errors,Ve),h.mount))}catch(Ve){throw je=!1,Ve}finally{n.isSubmitted=!0,S.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Li(n.errors)&&je,submitCount:n.submitCount+1,errors:n.errors})}},watch:rt,setValue:Ce,getValues:Ne,reset:(ce,ve={})=>{const _e=ce||i,je=Nf(_e),De=Li(ce)?i:je;if(ve.keepDefaultValues||(i=_e),!ve.keepValues){if(gP)for(const Ve of h.mount){const He=st(r,Ve);if(He&&He._f){const Vt=Array.isArray(He._f.refs)?He._f.refs[0]:He._f.ref;try{RS(Vt)&&Vt.closest("form").reset();break}catch{}}}o=t.shouldUnregister?ve.keepDefaultValues?Nf(i):{}:je,r={},S.watch.next({values:De}),S.array.next({values:De})}h={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},S.state.next({submitCount:ve.keepSubmitCount?n.submitCount:0,isDirty:ve.keepDirty?n.isDirty:ve.keepDefaultValues?!Rc(ce,i):!1,isSubmitted:ve.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:ve.keepDirty?n.dirtyFields:ve.keepDefaultValues&&ce?Object.entries(ce).reduce((Ve,[He,Vt])=>Object.assign(Object.assign({},Ve),{[He]:Vt!==st(i,He)}),{}):{},touchedFields:ve.keepTouched?n.touchedFields:{},errors:ve.keepErrors?n.errors:{},isSubmitting:!1,isSubmitSuccessful:!1}),u.mount=!b.isValid||!!ve.keepIsValid,u.watch=!!t.shouldUnregister},resetField:(ce,ve={})=>{Nr(ve.defaultValue)?Ce(ce,st(i,ce)):(Ce(ce,ve.defaultValue),Un(i,ce,ve.defaultValue)),ve.keepTouched||ti(n.touchedFields,ce),ve.keepDirty||(ti(n.dirtyFields,ce),n.isDirty=ve.defaultValue?Ue(ce,st(i,ce)):Ue()),ve.keepError||(ti(n.errors,ce),b.isValid&&z()),S.state.next(Object.assign({},n))},clearErrors:qe,unregister:Kt,setError:Pt,setFocus:ce=>{const ve=st(r,ce)._f;(ve.ref.focus?ve.ref:ve.refs[0]).focus()}}}function Dl(t={}){const e=ee.useRef(),[n,r]=ee.useState({isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}});e.current?e.current.control._options=t:e.current=Object.assign(Object.assign({},RJ(t)),{formState:n});const i=e.current.control;return bJ({subject:i._subjects.state,callback:o=>{SJ(o,i._proxyFormState,!0)&&(i._formState=Object.assign(Object.assign({},i._formState),o),r(Object.assign({},i._formState)))}}),ee.useEffect(()=>{i._stateFlags.mount||(i._proxyFormState.isValid&&i._updateValid(),i._stateFlags.mount=!0),i._stateFlags.watch&&(i._stateFlags.watch=!1,i._subjects.state.next({})),i._removeUnmounted()}),e.current.formState=EJ(n,i._proxyFormState),e.current}const OJ=({setTab:t})=>{const e=xn(),n=ee.useContext(_o),{handleSubmit:r,register:i,setError:o,formState:u}=Dl(),h=ee.useCallback(async({email:f})=>{try{await ze.auth().sendPasswordResetEmail(f),t("signin"),n(e.formatMessage({id:"Reset password email sent"}))}catch(v){switch(v.code){case"auth/invalid-email":case"auth/user-not-found":case"auth/user-disabled":o("email",{type:"invalid",message:e.formatMessage({id:"Unknown email address"})});break;default:n(e.formatMessage({id:"An error occured, please retry later"},{email:f}))}}},[o,e,n,t]);return F.jsxs(Te,{as:"form",name:"reset",onSubmit:r(h),css:{gap:4},children:[F.jsxs(Te,{css:{gap:2},children:[F.jsx("label",{children:e.formatMessage({id:"Email address"})}),F.jsx(Wn,{type:"email",...i("email",{required:e.formatMessage({id:"Email address is required"})})}),u.errors.email&&F.jsx(bi,{children:u.errors.email.message})]}),F.jsxs(Te,{css:{gap:3},children:[F.jsx(li,{type:"submit",disabled:u.isSubmitting,children:e.formatMessage({id:"Send the reset mail!"})}),F.jsx(Te,{css:{alignItems:"center"},children:F.jsx(Ho,{onClick:()=>t("signin"),children:e.formatMessage({id:"Back"})})})]})]})},DJ=({onSignUp:t,setTab:e})=>{const n=xn(),{handleSubmit:r,register:i,watch:o,setError:u,formState:h}=Dl(),f=o("password"),v=ee.useCallback(async({email:_,username:b,password:S})=>{try{const{user:I}=await ze.auth().createUserWithEmailAndPassword(_,S),M={username:b,signupDate:Date.now()};await ze.firestore().collection("users").doc(I.uid).set(M),t({uid:I.uid,...M,firebaseUser:I})}catch(I){switch(I.code){case"auth/weak-password":u("password",{type:"weakPassword",message:n.formatMessage({id:"Password is too weak"})});break;case"auth/email-already-in-use":u("email",{type:"alreadyExists",message:n.formatMessage({id:"Email address already in use"})});break;case"auth/invalid-email":u("email",{type:"invalid",message:n.formatMessage({id:"Invalid email address"})});break;default:return}}},[t,u,n]);return F.jsxs(Te,{as:"form",name:"signup",autoComplete:"off",onSubmit:r(v),css:{gap:4},children:[F.jsxs(Te,{css:{gap:3},children:[F.jsxs(Te,{css:{gap:2},children:[F.jsx("label",{children:n.formatMessage({id:"Username"})}),F.jsx(Wn,{...i("username",{required:n.formatMessage({id:"Username is required"})})}),h.errors.username&&F.jsx(bi,{children:h.errors.username.message})]}),F.jsxs(Te,{css:{gap:2},children:[F.jsx("label",{children:n.formatMessage({id:"Email address"})}),F.jsx(Wn,{type:"email",...i("email",{required:n.formatMessage({id:"Email address is required"})})}),h.errors.email&&F.jsx(bi,{children:h.errors.email.message})]}),F.jsxs(Te,{css:{gap:2},children:[F.jsx("label",{children:n.formatMessage({id:"Password"})}),F.jsx(Wn,{autoComplete:"new-password",type:"password",...i("password",{required:n.formatMessage({id:"Password is required"})})}),h.errors.password&&F.jsx(bi,{children:h.errors.password.message})]}),F.jsxs(Te,{css:{gap:2},children:[F.jsx("label",{children:n.formatMessage({id:"Confirm password"})}),F.jsx(Wn,{autoComplete:"off",type:"password",...i("passwordConfirm",{required:"Password is required",validate:_=>_===f||n.formatMessage({id:"Passwords must match"})})}),h.errors.passwordConfirm&&F.jsx(bi,{children:h.errors.passwordConfirm.message})]})]}),F.jsxs(Te,{css:{gap:3},children:[F.jsx(li,{disabled:h.isSubmitting,type:"submit",children:n.formatMessage({id:"Sign me up!"})}),F.jsx(Te,{css:{alignItems:"center"},children:F.jsx(Ho,{onClick:()=>e("signin"),children:n.formatMessage({id:"I already have an account"})})})]})]})},LJ=({onSignIn:t,setTab:e})=>{const n=xn(),{handleSubmit:r,register:i,setError:o,formState:u}=Dl(),h=ee.useCallback(async({email:f,password:v})=>{try{const{user:_}=await ze.auth().signInWithEmailAndPassword(f,v),S=(await ze.firestore().collection("users").doc(_.uid).get()).data();t({uid:_.uid,...S,firebaseUser:_})}catch(_){switch(_.code){case"auth/invalid-email":case"auth/user-not-found":case"auth/user-disabled":o("email",{type:"invalid",message:n.formatMessage({id:"Unknown email address"})});break;case"auth/wrong-password":o("password",{type:"mismatch",message:n.formatMessage({id:"Incorrect password"})});break;default:return}}},[t,o,n]);return F.jsxs(Te,{as:"form",name:"signin",onSubmit:r(h),css:{gap:4},children:[F.jsxs(Te,{css:{gap:3},children:[F.jsxs(Te,{css:{gap:2},children:[F.jsx("label",{children:n.formatMessage({id:"Email address"})}),F.jsx(Wn,{type:"email",...i("email",{required:n.formatMessage({id:"Email address is required"})})}),u.errors.email&&F.jsx(bi,{children:u.errors.email.message})]}),F.jsxs(Te,{css:{gap:2},children:[F.jsx("label",{children:n.formatMessage({id:"Password"})}),F.jsx(Wn,{type:"password",...i("password",{required:n.formatMessage({id:"Password is required"})})}),u.errors.password&&F.jsx(bi,{children:u.errors.password.message}),F.jsx(Ho,{css:{alignSelf:"flex-end",fontSize:2},onClick:()=>e("reset"),children:n.formatMessage({id:"Forgot password?"})})]})]}),F.jsxs(Te,{css:{gap:3},children:[F.jsx(li,{type:"submit",disabled:u.isSubmitting,children:n.formatMessage({id:"Sign me in!"})}),F.jsx(Te,{css:{alignItems:"center"},children:F.jsx(Ho,{onClick:()=>e("signup"),children:n.formatMessage({id:"I don't have an account"})})})]})]})},MJ=({deferred:t})=>{const e=xn(),n=ee.useContext(_o),[r,i]=ee.useState("signup"),o=u=>{t.resolve(u),n(e.formatMessage({id:"Logged in as {username}"},{username:u.username}))};return F.jsx(Cs,{title:r==="signup"?F.jsx(Gi,{children:e.formatMessage({id:"Create your account"})}):r==="signin"?F.jsx(Gi,{children:e.formatMessage({id:"Connect to your account"})}):F.jsx(Gi,{children:e.formatMessage({id:"Reset your password"})}),onClose:()=>t.reject(Zn),children:r==="signup"?F.jsx(DJ,{onSignUp:o,setTab:i}):r==="signin"?F.jsx(LJ,{onSignIn:o,setTab:i}):F.jsx(OJ,{setTab:i})})},FJ={Amstangram:"Amstangram",Language:"Language",en:"English",fr:"French",Theme:"Theme","Logged in as {username}":"Logged in as {username}",Settings:"Settings",Difficulty:"Difficulty",Easy:"Easy",Hard:"Hard","Tangram approved":"Tangram approved","You can't save an invalid tangram":"You can't save an invalid tangram","You can't save such an easy tangram":"You can't save such an easy tangram","Tangram submitted for review":"Tangram submitted for review","Logged out":"Logged out","Tangram gallery":"Tangram gallery","All tangrams":"All tangrams","Uncompleted tangrams":"Uncompleted tangrams"," Starred tangrams":" Starred tangrams","Pending approbation tangrams":"Pending approbation tangrams","You've completed all tangrams":"You've completed all tangrams","Come back later for more or create your own tangrams":"Come back later for more or create your own tangrams","No tangram left to approve":"No tangram left to approve","Good job moderator {username}!":"Good job moderator {username}!","All your tangrams have been approved":"All your tangrams have been approved","Create more tangrams and earn <starIcon></starIcon>":"Create more tangrams and earn <starIcon></starIcon>","No starred tangrams yet":"No starred tangrams yet","Press <starIcon></starIcon> to star a tangram and show your love":"Press <starIcon></starIcon> to star a tangram and show your love","Nothing to see here":"Nothing to see here","Something might have gone wrong":"Something might have gone wrong","Play now!":"Play now !","Start 1 tangram!":"Start 1 tangram !","Start {count} tangrams!":"Start {count} tangrams !","Password is too weak":"Password is too weak","Email address already in use":"Email address already in use","Invalid email address":"Invalid email address","Email address":"Email address","Email address is required":"Email address is required",Username:"Username","Username is required":"Username is required",Password:"Password","Password is required":"Password is required","Confirm password":"Confirm password","Passwords must match":"Passwords must match","Sign me up!":"Sign me up!","I already have an account":"I already have an account","Unknown email address":"Unknown email address","Incorrect password":"Incorrect password","Sign me in!":"Sign me in!","I don't have an account":"I don't have an account","Create your account":"Create your account","Connect to your account":"Connect to your account","A moderator will have to approve your tangram. It can be deleted or edited at any time.":"A moderator will have to approve your tangram.<br></br>It can be deleted or edited at any time.","Submit your tangram":"Submit your tangram","Edit your tangram":"Edit your tangram",Path:"Path","Invalid path":"Invalid path",Category:"Category","Victory emoji":"Victory emoji","Leave empty for random emoji":"Leave empty for random emoji",Order:"Order","Submit!":"Submit!","Edit!":"Edit!","Or delete tangram":"Or delete tangram",animals:"Animals",geometric:"Geometric",digits:"Digits",letters:"Alphabet",people:"People",stuff:"Stuff","Joined {signupDate}":"Joined {signupDate}","Log out":"Log out","Are you sure you want to log out?":"Are you sure you want to log out?","Change email address":"Change email address","Change username":"Change username","Change password":"Change password",Back:"Back","Confirm new password":"Confirm new password","New password":"New password","Current password":"Current password","Password changed successfuly":"Password changed successfuly","New username":"New username","Username updated successfuly":"Username updated successfuly","Email address updated successfuly":"Email address updated successfuly","New email address":"New email address","An error occured, please retry later":"An error occured, please retry later",Sounds:"Sounds","Are you sure you want to delete this tangram?":"Are you sure you want to delete this tangram?","Tangram deleted successfuly":"Tangram deleted successfuly","Tangram modified successfuly":"Tangram modified successfuly","Challenge link copied to clipboard":"Challenge link copied to clipboard","{username} challenged you":"{username} challenged you","Rise to the challenge":"Rise to the challenge","Let's go!":"Let's go!",Leaderboard:"Leaderboard","Completed {completed}/{total} tangrams":"Completed {completed}/{total} tangrams","Created {created} tangrams":"Created {created} tangrams","Earned {stars}":"Earned {stars} <starIcon></starIcon>","Stars earned":"Stars earned","Completed tangrams":"Completed tangrams","Created tangrams":"Created tangrams","Random tip":"Random tip","Got it!":"Got it!","Welcome to Amstangram":"Welcome to Amstangram","tips.welcome":"Reproduce the black shape by moving the pieces, you can rotate a piece by pressing it.<br></br><br></br>Have fun !","tips.menu":"You can access the tangram gallery {galleryIcon}, settings {settingsIcon} and more by pressing {menuIcon}","tips.account1":"You can create an account by pressing {accountIcon} in the menu {menuIcon}","tips.account2":"Signup in order to save your progression and create your very own tangrams","tips.gallery":"You can create your own tangram playlist by selecting tangrams in the gallery {galleryIcon}","tips.share":"You can share playlist with your friends by pressing {shareIcon} in the gallery {galleryIcon}","tips.create":"You can create your own tangrams by pressing {createIcon} in the menu {menuIcon}","tips.stars":"Did you liked this tangram?<br></br>Give a star to its creator by pressing {starIcon}","tips.difficulty":"Having it too easy?<br></br>You can change difficulty by pressing {settingsIcon} in the menu {menuIcon}","tips.theme":"Too bright for your eyes?<br></br>You can toggle dark mode by pressing {settingsIcon} in the menu {menuIcon}","tips.sound":"Too much noise?<br></br>You can disable sounds by pressing {settingsIcon} in the menu {menuIcon}","tips.card":"You can acces tangram details or edit your own tangrams by long pressing a card in the gallery {galleryIcon}","tips.leaderboard":"Check the leaderboard to see who's the best by pressing {leaderboardIcon} in the menu {menuIcon}","tips.particles":"Disable particle effects by pressing {settingsIcon} in the menu {menuIcon}. It can improve performances.","I don't want to see tips anymore":"I don't want to see tips anymore","Show tips":"Show tips","Show particles":"Show particles",Yes:"Yes",No:"No","Reset tips":"Reset tips","Tips reseted successfuly":"Tips reseted successfuly","Loading...":"Loading...",Approve:"Approve",Next:"Next",Quit:"Quit","See my profile":"See my profile","Log in":"Log in","Save tangram":"Save tangram","Contact ":"Contact ","A word about Amstangram":"A word about Amstangram","Version {code}":"Version {code}","Forgot password?":"Forgot password?","Reset your password":"Reset your password","Send the reset mail!":"Send the reset mail!","Reset password email sent":"Reset password email sent"},jJ={Amstangram:"Amstangram",Language:"Langage",en:"Anglais",fr:"Francais",Theme:"Thme","Logged in as {username}":"Connect en tant que {username}",Settings:"Rglages",Difficulty:"Difficult",Easy:"Facile",Hard:"Difficile","Tangram approved":"Tangram approuv","You can't save an invalid tangram":"Tangram invalide","You can't save such an easy tangram":"Tangram trop facile","Tangram submitted for review":"Tangram soumis pour vrification","Logged out":"Dconnect.e","Tangram gallery":"Galerie des tangrams","All tangrams":"Tous les tangrams","Uncompleted tangrams":"Tangrams non complts"," Starred tangrams":"Tangrams toils ","Pending approbation tangrams":"Tangrams en attente d'approbation","You've completed all tangrams":"Tu as complt tous les tangrams","Come back later for more or create your own tangrams":"Reviens plus tard ou crs tes propres tangrams","No tangram left to approve":"Il ne reste plus de tangram  approuver","Good job moderator {username}!":"Bon boulot modrateur {username} !","All your tangrams have been approved":"Tous tes tangrams ont t approuvs","Create more tangrams and earn <starIcon></starIcon>":"Crs d'autres tangrams et gagne des <starIcon></starIcon>","No starred tangrams yet":"Tu n'as pas encore donn d'toile","Press <starIcon></starIcon> to star a tangram and show your love":"Appuie sur <starIcon></starIcon> pour donner une toile et montrer que tu aimes un tangram","Nothing to see here":"Rien  voir","Something might have gone wrong":"Il semble y avoir un problme","Play now!":"Commencer  jouer !","Start 1 tangram!":"Lancer 1 tangram","Start {count} tangrams!":"Lancer {count} tangrams","Password is too weak":"Mot de passe trop faible","Email address already in use":"Adresse email dj prise","Invalid email address":"Adresse email invalide","Email address":"Adresse Email","Email address is required":"Adresse email requise",Username:"Nom d'utilisateur","Username is required":"Nom d'utilisateur requis",Password:"Mot de passe","Password is required":"Mot de passe requis","Confirm password":"Confirmer le mot de passe","Passwords must match":"Les mots de passe doivent correspondre","Sign me up!":"Je cr mon compte !","I already have an account":"J'ai dj un compte","Unknown email address":"Adresse email inconnu","Incorrect password":"Mot de passe incorrect","Sign me in!":"Je me connecte !","I don't have an account":"Je n'ai pas de compte","Create your account":"Crer un compte","Connect to your account":"Se connecter","Submit your tangram":"Envoyer votre tangram","Edit your tangram":"diter votre tangram",Category:"Catgorie",Path:"Chemin","Invalid path":"Chemin invalide","Victory emoji":"Emoji de succs","Leave empty for random emoji":"Laisser vide pour un emoji au hasard",Order:"Ordre","A moderator will have to approve your tangram. It can be deleted or edited at any time.":"Un modrateur doit approuver votre tangram.<br></br>Il peut tre supprim ou modifi n'importe quand.","Submit!":"Envoyer !","Edit!":"diter !","Or delete tangram":"Ou supprimer le tangram",animals:"Animaux",geometric:"Gomtrique",digits:"Chiffres",letters:"Alphabet",people:"Personnes",stuff:"Trucs","Joined {signupDate}":"Inscrit le {signupDate}","Log out":"Se dconnecter","Are you sure you want to log out?":"Es-tu sr.e de vouloir te dconnecter ?","Change email address":"Modifier l'adresse email","Change username":"Modifier le nom d'utilisateur","Change password":"Modifier le mot de passe",Back:"Retour","Confirm new password":"Confirmer le nouveau mot de passe","New password":"Nouveau mot de passe","Current password":"Mot de passe actuel","Password changed successfuly":"Mot de passe chang avec succs","New username":"Nouveau nom d'utilisateur","Username updated successfuly":"Nom d'utilisateur chang avec succs","Email address updated successfuly":"Adresse email chang avec succs","New email address":"Nouvelle adresse email","An error occured, please retry later":"Une erreur est survenue, veuillez ressayer plus tard",Sounds:"Sons","Are you sure you want to delete this tangram?":"Es-tu sr.e de vouloir supprimer ce tangram ?","Tangram deleted successfuly":"Tangram supprim avec succs","Tangram modified successfuly":"Tangram modifi avec succs","Challenge link copied to clipboard":"Lien de dfi copi dans le presse papier","{username} challenged you":"{username} te met au dfi","Rise to the challenge":"Relevez le dfi","Let's go!":"C'est parti !",Leaderboard:"Classement","Completed {completed}/{total} tangrams":"{completed}/{total} tangrams complts","Created {created} tangrams":"{created} tangrams crs","Earned {stars}":"{stars} <starIcon></starIcon> gagnes","Stars earned":"toiles gagnes","Completed tangrams":"Tangrams complts","Created tangrams":"Tangrams crs","Random tip":"Astuce","Got it!":"J'ai compris !","Welcome to Amstangram":"Bienvenue sur Amstangram","tips.welcome":"Reproduis la forme noire en dplaant les pices, tu peux faire tourner une pice en appuyant dessus.<br></br><br></br>Amuse-toi bien !","tips.menu":"Tu peux accder  la galerie des tangrams {galleryIcon}, aux rglages {settingsIcon} et plus encore en appuyant sur {menuIcon}","tips.account1":"Crer ton compte utilisateur en appuyant sur {accountIcon} dans le menu {menuIcon}","tips.account2":"Crer ton compte utilisateur pour sauvegarder ta progression crer tes propres tangrams","tips.gallery":"Tu peux crer ta propre playlist en slectionnant les tangrams dans la galerie {galleryIcon}","tips.share":"Tu peux partager ta playlist avec tes amis en appuyant sur {shareIcon} dans la galerie {galleryIcon}","tips.create":"Tu peux crer tes propres tangrams en appuyant sur {createIcon} dans le menu {menuIcon}","tips.stars":"T'as aim ce tangram ?<br></br>Envoie une toile  son crateur en appuyant sur {starIcon}","tips.difficulty":"Trop facile pour toi ?<br></br>Essayes le mode difficile en appuyant sur {settingsIcon} dans le menu {menuIcon}","tips.theme":"Envie de passer du ct obscur ?<br></br>Tu peux activer le mode sombre en appuyant sur {settingsIcon} dans le menu {menuIcon}","tips.sound":"Trop de bruits ?<br></br>Tu peux dsactiver les sons en appuyant sur {settingsIcon} dans le menu {menuIcon}","tips.card":"Tu peux accder aux dtails d'un tangram ou mme diter les tiens en faisant un appui long sur une carte dans la galerie {galleryIcon}","tips.leaderboard":"Jette un oeil au classement pour savoir qui est le meilleur en appuyant sur {leaderboardIcon} dans le menu {menuIcon}","tips.particles":"Dsactive les effets de particule en appuyant sur {settingsIcon} dans le menu {menuIcon}. Cela peut amliorer les performances.","I don't want to see tips anymore":"Je ne veux plus voir les astuces","Show tips":"Afficher les astuces","Show particles":"Afficher les particles",Yes:"Oui",No:"Non","Reset tips":"Rinitialiser les astuces","Tips reseted successfuly":"Astuces rinitilises avec succs","Loading...":"Chargement...",Approve:"Approuver",Next:"Suivant",Quit:"Quitter","See my profile":"Voir mon profil","Log in":"Se connecter","Save tangram":"Sauvegarder le tangram","Contact ":"Contact ","A word about Amstangram":"Quelques mots  propos d'Amstangram","Version {code}":"Version {code}","Forgot password?":"Mot de passe oubli ?","Reset your password":"Rinitialiser le mot de passe","Send the reset mail!":"Envoyer le mail de rinitialisation","Reset password email sent":"Email de rinitialisation envoy"},UJ={en:FJ,fr:jJ},_I="fr",OS=["en","fr"],wI=ee.createContext({language:_I,setLanguage:()=>{}}),VJ=()=>{const t=localStorage.getItem("language");if(OS.includes(t))return t;const e=navigator.languages;for(const n of e){const r=OS.find(i=>n.includes(i));if(r)return r}return _I},BJ=({children:t})=>{const[e,n]=ee.useState(_I);ee.useEffect(()=>{const i=VJ();n(i)},[]);const r=ee.useMemo(()=>({language:e,setLanguage:i=>{n(i),localStorage.setItem("language",i)}}),[e]);return F.jsx(n8,{locale:e,messages:UJ[e],onError:console.warn,children:F.jsx(wI.Provider,{value:r,children:t})})},zJ=({currentUser:t,onClose:e})=>{const n=xn(),{updateEmail:r}=ee.useContext(Mr),i=ee.useContext(_o),{handleSubmit:o,register:u,setError:h,formState:f}=Dl(),v=ee.useCallback(async({password:_,newEmail:b})=>{try{await r(t,_,b),i(n.formatMessage({id:"Email address updated successfuly"})),e()}catch(S){switch(S.code){case"auth/email-already-in-use":h("newEmail",{type:"alreadyExists",message:n.formatMessage({id:"Email address already in use"})});break;case"auth/invalid-email":h("newEmail",{type:"invalid",message:n.formatMessage({id:"Invalid email address"})});break;case"auth/wrong-password":h("password",{type:"mismatch",message:n.formatMessage({id:"Incorrect password"})});break;default:throw i(n.formatMessage({id:"An error occured, please retry later"})),S}}},[t,r,h,e,i,n]);return F.jsxs(Te,{as:"form",onSubmit:o(v),css:{flex:"1",gap:4},children:[F.jsxs(Te,{css:{gap:3,overflow:"auto",flex:"1"},children:[F.jsxs(Te,{css:{gap:2},children:[F.jsx("label",{children:n.formatMessage({id:"Password"})}),F.jsx(Wn,{type:"password",...u("password",{required:n.formatMessage({id:"Password is required"})})}),f.errors.password&&F.jsx(bi,{children:f.errors.password.message})]}),F.jsxs(Te,{css:{gap:2},children:[F.jsx("label",{children:n.formatMessage({id:"New email address"})}),F.jsx(Wn,{type:"email",...u("newEmail",{required:n.formatMessage({id:"Email address is required"})})}),f.errors.newEmail&&F.jsx(bi,{children:f.errors.newEmail.message})]})]}),F.jsxs(Te,{css:{gap:3},children:[F.jsx(li,{disabled:f.isSubmitting,type:"submit",children:n.formatMessage({id:"Change email address"})}),F.jsx(Te,{css:{alignItems:"center"},children:F.jsx(Ho,{onClick:e,children:n.formatMessage({id:"Back"})})})]})]})},qJ=({currentUser:t,onClose:e})=>{const n=xn(),{updateUsername:r}=ee.useContext(Mr),i=ee.useContext(_o),{handleSubmit:o,register:u,formState:h}=Dl(),f=ee.useCallback(async({newUsername:v})=>{try{await r(t,v),i(n.formatMessage({id:"Username updated successfuly"})),e()}catch(_){throw i(n.formatMessage({id:"An error occured, please retry later"})),_}},[t,r,e,i,n]);return F.jsxs(Te,{as:"form",onSubmit:o(f),css:{flex:"1",gap:4},children:[F.jsx(Te,{css:{gap:3,overflow:"auto",flex:"1"},children:F.jsxs(Te,{css:{gap:2},children:[F.jsx("label",{children:n.formatMessage({id:"New username"})}),F.jsx(Wn,{type:"text",...u("newUsername",{required:n.formatMessage({id:"Username is required"})})}),h.errors.newUsername&&F.jsx(bi,{children:h.errors.newUsername.message})]})}),F.jsxs(Te,{css:{gap:3},children:[F.jsx(li,{disabled:h.isSubmitting,type:"submit",children:n.formatMessage({id:"Change username"})}),F.jsx(Te,{css:{alignItems:"center"},children:F.jsx(Ho,{onClick:e,children:n.formatMessage({id:"Back"})})})]})]})},WJ=({currentUser:t,onClose:e})=>{const n=xn(),{updateUsername:r}=ee.useContext(Mr),i=ee.useContext(_o),{handleSubmit:o,register:u,watch:h,setError:f,formState:v}=Dl(),_=h("newPassword"),b=ee.useCallback(async({password:S,newPassword:I})=>{try{await r(t,S,I),i(n.formatMessage({id:"Password changed successfuly"})),e()}catch(M){switch(M.code){case"auth/weak-password":f("newPassword",{type:"weakPassword",message:n.formatMessage({id:"Password is too weak"})});break;case"auth/wrong-password":f("password",{type:"mismatch",message:n.formatMessage({id:"Incorrect password"})});break;default:i(n.formatMessage({id:"An error occured, please retry later"}));return}}},[t,r,e,f,i,n]);return F.jsxs(Te,{as:"form",onSubmit:o(b),css:{flex:"1",gap:4},children:[F.jsxs(Te,{css:{gap:3,overflow:"auto",flex:"1"},children:[F.jsxs(Te,{css:{gap:2},children:[F.jsx("label",{children:n.formatMessage({id:"Current password"})}),F.jsx(Wn,{type:"password",...u("password",{required:n.formatMessage({id:"Password is required"})})}),v.errors.password&&F.jsx(bi,{children:v.errors.password.message})]}),F.jsxs(Te,{css:{gap:2},children:[F.jsx("label",{children:n.formatMessage({id:"New password"})}),F.jsx(Wn,{type:"password",autoComplete:"new-password",...u("newPassword",{required:n.formatMessage({id:"Password is required"})})}),v.errors.newPassword&&F.jsx(bi,{children:v.errors.newPassword.message})]}),F.jsxs(Te,{css:{gap:2},children:[F.jsx("label",{children:n.formatMessage({id:"Confirm new password"})}),F.jsx(Wn,{type:"password",...u("newPasswordConfirm",{required:"Password is required",validate:S=>S===_||n.formatMessage({id:"Passwords must match"})})}),v.errors.newPasswordConfirm&&F.jsx(bi,{children:v.errors.newPasswordConfirm.message})]})]}),F.jsxs(Te,{css:{gap:3},children:[F.jsx(li,{disabled:v.isSubmitting,type:"submit",children:n.formatMessage({id:"Change password"})}),F.jsx(Te,{css:{alignItems:"center"},children:F.jsx(Ho,{onClick:e,children:n.formatMessage({id:"Back"})})})]})]})},GJ=({uid:t,deferred:e})=>{const n=xn(),r=ee.useContext(_o),{language:i}=ee.useContext(wI),{currentUser:o,usersMetadata:u}=ee.useContext(Mr),{username:h,signupDate:f}=u[t],[v,_]=ee.useState(!1),[b,S]=ee.useState(!1),[I,M]=ee.useState(!1),{approvedTangrams:D}=ee.useContext(wu),{tangramsStarredBy:ne,tangramsCompletedBy:z}=ee.useContext(Ni),{stars:Y,completed:K,created:ue}=ee.useMemo(()=>{let fe=0,me=0,he=0;for(const Z of D){if(Z.uid===t){me++;for(const Se in ne[Z.id])Se!==t&&ne[Z.id][Se]&&(fe+=1)}for(const Se in z[Z.id])Se===t&&(he+=1)}return{stars:fe,completed:he,created:me}},[D,z,ne,t]),oe=async()=>{window.confirm(n.formatMessage({id:"Are you sure you want to log out?"}))&&(await ze.auth().signOut(),e.reject(Zn),r(n.formatMessage({id:"Logged out"})))};return F.jsx(Cs,{onClose:()=>e.reject(Zn),css:{overflow:"auto",pt:4,mt:-4,gap:3},children:v?F.jsx(zJ,{currentUser:o,onClose:()=>_(!1)}):b?F.jsx(qJ,{currentUser:o,onClose:()=>S(!1)}):I?F.jsx(WJ,{currentUser:o,onClose:()=>M(!1)}):F.jsxs(Te,{css:{gap:4,mt:-4},children:[F.jsxs(Te,{css:{gap:3,alignItems:"center"},children:[F.jsx(Ly,{uid:t,size:"badgeBig"}),F.jsx(Gi,{children:h}),F.jsxs(Te,{css:{gap:2,fontSize:2,alignItems:"center"},children:[o&&t===o.uid&&F.jsx(vt,{children:o.firebaseUser.email}),F.jsx(vt,{children:n.formatMessage({id:"Joined {signupDate}"},{signupDate:new Intl.DateTimeFormat(i).format(f)})}),F.jsx(vt,{children:n.formatMessage({id:"Completed {completed}/{total} tangrams"},{completed:K,total:D.length})}),F.jsx(vt,{children:n.formatMessage({id:"Created {created} tangrams"},{created:ue})}),F.jsx(vt,{children:F.jsx(Qt,{id:"Earned {stars}",values:{stars:Y,starIcon:()=>F.jsx(vi,{icon:fu,css:{fill:"currentColor"}})}})})]})]}),o&&o.uid===t&&F.jsxs(F.Fragment,{children:[F.jsxs(Te,{css:{gap:3,alignItems:"center"},children:[F.jsx(Ho,{onClick:()=>_(!0),children:n.formatMessage({id:"Change email address"})}),F.jsx(Ho,{onClick:()=>S(!0),children:n.formatMessage({id:"Change username"})}),F.jsx(Ho,{onClick:()=>M(!0),children:n.formatMessage({id:"Change password"})})]}),F.jsx(cJ,{onClick:oe,children:n.formatMessage({id:"Log out"})})]})]})})},TP=["","","","","","","","","",""],IP=()=>TP[Math.floor(Math.random()*TP.length)];var nj={exports:{}};const $J={},HJ=Object.freeze(Object.defineProperty({__proto__:null,default:$J},Symbol.toStringTag,{value:"Module"})),CP=DS(HJ);/*!
 * Paper.js v0.12.17 - The Swiss Army Knife of Vector Graphics Scripting.
 * http://paperjs.org/
 *
 * Copyright (c) 2011 - 2020, Jrg Lehni & Jonathan Puckey
 * http://juerglehni.com/ & https://puckey.studio/
 *
 * Distributed under the MIT license. See LICENSE file for details.
 *
 * All rights reserved.
 *
 * Date: Thu Nov 3 21:15:36 2022 +0100
 *
 ***
 *
 * Straps.js - Class inheritance library with support for bean-style accessors
 *
 * Copyright (c) 2006 - 2020 Jrg Lehni
 * http://juerglehni.com/
 *
 * Distributed under the MIT license.
 *
 ***
 *
 * Acorn.js
 * https://marijnhaverbeke.nl/acorn/
 *
 * Acorn is a tiny, fast JavaScript parser written in JavaScript,
 * created by Marijn Haverbeke and released under an MIT license.
 *
 */(function(t){(function(e,n){e=e||CP;var r=e.window,i=e.document,o=new function(){var a=/^(statics|enumerable|beans|preserve)$/,c=[],d=c.slice,g=Object.create,m=Object.getOwnPropertyDescriptor,w=Object.defineProperty,T=c.forEach||function(P,A){for(var U=0,W=this.length;U<W;U++)P.call(A,this[U],U,this)},E=function(P,A){for(var U in this)this.hasOwnProperty(U)&&P.call(A,this[U],U,this)},C=Object.assign||function(P){for(var A=1,U=arguments.length;A<U;A++){var W=arguments[A];for(var H in W)W.hasOwnProperty(H)&&(P[H]=W[H])}return P},N=function(P,A,U){if(P){var W=m(P,"length");(W&&typeof W.value=="number"?T:E).call(P,A,U=U||P)}return U};function R(P,A,U,W,H){var V={};function B(Q,X){X=X||(X=m(A,Q))&&(X.get?X:X.value),typeof X=="string"&&X[0]==="#"&&(X=P[X.substring(1)]||X);var J=typeof X=="function",te=X,se=H||J&&!X.base?X&&X.get?Q in P:P[Q]:null,ie;(!H||!se)&&(J&&se&&(X.base=se),J&&W!==!1&&(ie=Q.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(V[ie[3].toLowerCase()+ie[4]]=ie[2]),(!te||J||!te.get||typeof te.get!="function"||!O.isPlainObject(te))&&(te={value:te,writable:!0}),(m(P,Q)||{configurable:!0}).configurable&&(te.configurable=!0,te.enumerable=U??!ie),w(P,Q,te))}if(A){for(var k in A)A.hasOwnProperty(k)&&!a.test(k)&&B(k);for(var k in V){var L=V[k],q=P["set"+L],$=P["get"+L]||q&&P["is"+L];$&&(W===!0||$.length===0)&&B(k,{get:$,set:q})}}return P}function O(){for(var P=0,A=arguments.length;P<A;P++){var U=arguments[P];U&&C(this,U)}return this}return R(O,{inject:function(P){if(P){var A=P.statics===!0?P:P.statics,U=P.beans,W=P.preserve;A!==P&&R(this.prototype,P,P.enumerable,U,W),R(this,A,null,U,W)}for(var H=1,V=arguments.length;H<V;H++)this.inject(arguments[H]);return this},extend:function(){for(var P=this,A,U,W=0,H,V=arguments.length;W<V&&!(A&&U);W++)H=arguments[W],A=A||H.initialize,U=U||H.prototype;return A=A||function(){P.apply(this,arguments)},U=A.prototype=U||g(this.prototype),w(U,"constructor",{value:A,writable:!0,configurable:!0}),R(A,this),arguments.length&&this.inject.apply(A,arguments),A.base=P,A}}).inject({enumerable:!1,initialize:O,set:O,inject:function(){for(var P=0,A=arguments.length;P<A;P++){var U=arguments[P];U&&R(this,U,U.enumerable,U.beans,U.preserve)}return this},extend:function(){var P=g(this);return P.inject.apply(P,arguments)},each:function(P,A){return N(this,P,A)},clone:function(){return new this.constructor(this)},statics:{set:C,each:N,create:g,define:w,describe:m,clone:function(P){return C(new P.constructor,P)},isPlainObject:function(P){var A=P!=null&&P.constructor;return A&&(A===Object||A===O||A.name==="Object")},pick:function(P,A){return P!==n?P:A},slice:function(P,A,U){return d.call(P,A,U)}}})};t.exports=o,o.inject({enumerable:!1,toString:function(){return this._id!=null?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+o.each(this,function(a,c){if(!/^_/.test(c)){var d=typeof a;this.push(c+": "+(d==="number"?_.instance.number(a):d==="string"?"'"+a+"'":a))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(a){return o.importJSON(a,this)},exportJSON:function(a){return o.exportJSON(this,a)},toJSON:function(){return o.serialize(this)},set:function(a,c){return a&&o.filter(this,a,c,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function a(){var c=a.base.apply(this,arguments),d=c.prototype._class;return d&&!o.exports[d]&&(o.exports[d]=c),c},equals:function(a,c){if(a===c)return!0;if(a&&a.equals)return a.equals(c);if(c&&c.equals)return c.equals(a);if(a&&c&&typeof a=="object"&&typeof c=="object"){if(Array.isArray(a)&&Array.isArray(c)){var d=a.length;if(d!==c.length)return!1;for(;d--;)if(!o.equals(a[d],c[d]))return!1}else{var g=Object.keys(a),d=g.length;if(d!==Object.keys(c).length)return!1;for(;d--;){var m=g[d];if(!(c.hasOwnProperty(m)&&o.equals(a[m],c[m])))return!1}}return!0}return!1},read:function(a,c,d,g){if(this===o){var m=this.peek(a,c);return a.__index++,m}var w=this.prototype,T=w._readIndex,E=c||T&&a.__index||0,C=a.length,N=a[E];if(g=g||C-E,N instanceof this||d&&d.readNull&&N==null&&g<=1)return T&&(a.__index=E+1),N&&d&&d.clone?N.clone():N;if(N=o.create(w),T&&(N.__read=!0),N=N.initialize.apply(N,E>0||E+g<C?o.slice(a,E,E+g):a)||N,T){a.__index=E+N.__read;var R=N.__filtered;R&&(a.__filtered=R,N.__filtered=n),N.__read=n}return N},peek:function(a,c){return a[a.__index=c||a.__index||0]},remain:function(a){return a.length-(a.__index||0)},readList:function(a,c,d,g){for(var m=[],w,T=c||0,E=g?T+g:a.length,C=T;C<E;C++)m.push(Array.isArray(w=a[C])?this.read(w,0,d):this.read(a,C,d,1));return m},readNamed:function(a,c,d,g,m){var w=this.getNamed(a,c),T=w!==n;if(T){var E=a.__filtered;if(!E){var C=this.getSource(a);E=a.__filtered=o.create(C),E.__unfiltered=C}E[c]=n}return this.read(T?[w]:a,d,g,m)},readSupported:function(a,c){var d=this.getSource(a),g=this,m=!1;return d&&Object.keys(d).forEach(function(w){if(w in c){var T=g.readNamed(a,w);T!==n&&(c[w]=T),m=!0}}),m},getSource:function(a){var c=a.__source;if(c===n){var d=a.length===1&&a[0];c=a.__source=d&&o.isPlainObject(d)?d:null}return c},getNamed:function(a,c){var d=this.getSource(a);if(d)return c?d[c]:a.__filtered||d},hasNamed:function(a,c){return!!this.getNamed(a,c)},filter:function(a,c,d,g){var m;function w(R){if(!(d&&R in d)&&!(m&&R in m)){var O=c[R];O!==n&&(a[R]=O)}}if(g){for(var T={},E=0,C,N=g.length;E<N;E++)(C=g[E])in c&&(w(C),T[C]=!0);m=T}return Object.keys(c.__unfiltered||c).forEach(w),a},isPlainValue:function(a,c){return o.isPlainObject(a)||Array.isArray(a)||c&&typeof a=="string"},serialize:function(a,c,d,g){c=c||{};var m=!g,w;if(m&&(c.formatter=new _(c.precision),g={length:0,definitions:{},references:{},add:function(O,P){var A="#"+O._id,U=this.references[A];if(!U){this.length++;var W=P.call(O),H=O._class;H&&W[0]!==H&&W.unshift(H),this.definitions[A]=W,U=this.references[A]=[A]}return U}}),a&&a._serialize){w=a._serialize(c,g);var T=a._class;T&&!a._compactSerialize&&(m||!d)&&w[0]!==T&&w.unshift(T)}else if(Array.isArray(a)){w=[];for(var E=0,C=a.length;E<C;E++)w[E]=o.serialize(a[E],c,d,g)}else if(o.isPlainObject(a)){w={};for(var N=Object.keys(a),E=0,C=N.length;E<C;E++){var R=N[E];w[R]=o.serialize(a[R],c,d,g)}}else typeof a=="number"?w=c.formatter.number(a,c.precision):w=a;return m&&g.length>0?[["dictionary",g.definitions],w]:w},deserialize:function(a,c,d,g,m){var w=a,T=!d,E=T&&a&&a.length&&a[0][0]==="dictionary";if(d=d||{},Array.isArray(a)){var C=a[0],N=C==="dictionary";if(a.length==1&&/^#/.test(C))return d.dictionary[C];C=o.exports[C],w=[];for(var R=C?1:0,O=a.length;R<O;R++)w.push(o.deserialize(a[R],c,d,N,E));if(C){var P=w;c?w=c(C,P,T||m):w=new C(P)}}else if(o.isPlainObject(a)){w={},g&&(d.dictionary=w);for(var A in a)w[A]=o.deserialize(a[A],c,d)}return E?w[1]:w},exportJSON:function(a,c){var d=o.serialize(a,c);return c&&c.asString==!1?d:JSON.stringify(d)},importJSON:function(a,c){return o.deserialize(typeof a=="string"?JSON.parse(a):a,function(d,g,m){var w=m&&c&&c.constructor===d,T=w?c:o.create(d.prototype);if(g.length===1&&T instanceof fe&&(w||!(T instanceof he))){var E=g[0];o.isPlainObject(E)&&(E.insert=!1,w&&(g=g.concat([fe.INSERT])))}return(w?T.set:d).apply(T,g),w&&(c=null),T})},push:function(a,c){var d=c.length;if(d<4096)a.push.apply(a,c);else{var g=a.length;a.length+=d;for(var m=0;m<d;m++)a[g+m]=c[m]}return a},splice:function(a,c,d,g){var m=c&&c.length,w=d===n;d=w?a.length:d,d>a.length&&(d=a.length);for(var T=0;T<m;T++)c[T]._index=d+T;if(w)return o.push(a,c),[];var E=[d,g];c&&o.push(E,c);for(var C=a.splice.apply(a,E),T=0,N=C.length;T<N;T++)C[T]._index=n;for(var T=d+m,N=a.length;T<N;T++)a[T]._index=T;return C},capitalize:function(a){return a.replace(/\b[a-z]/g,function(c){return c.toUpperCase()})},camelize:function(a){return a.replace(/-(.)/g,function(c,d){return d.toUpperCase()})},hyphenate:function(a){return a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var u={on:function(a,c){if(typeof a!="string")o.each(a,function(w,T){this.on(T,w)},this);else{var d=this._eventTypes,g=d&&d[a],m=this._callbacks=this._callbacks||{};m=m[a]=m[a]||[],m.indexOf(c)===-1&&(m.push(c),g&&g.install&&m.length===1&&g.install.call(this,a))}return this},off:function(a,c){if(typeof a!="string"){o.each(a,function(T,E){this.off(E,T)},this);return}var d=this._eventTypes,g=d&&d[a],m=this._callbacks&&this._callbacks[a],w;return m&&(!c||(w=m.indexOf(c))!==-1&&m.length===1?(g&&g.uninstall&&g.uninstall.call(this,a),delete this._callbacks[a]):w!==-1&&m.splice(w,1)),this},once:function(a,c){return this.on(a,function d(){c.apply(this,arguments),this.off(a,d)})},emit:function(a,c){var d=this._callbacks&&this._callbacks[a];if(!d)return!1;var g=o.slice(arguments,1),m=c&&c.target&&!c.currentTarget;d=d.slice(),m&&(c.currentTarget=this);for(var w=0,T=d.length;w<T;w++)if(d[w].apply(this,g)==!1){c&&c.stop&&c.stop();break}return m&&delete c.currentTarget,!0},responds:function(a){return!!(this._callbacks&&this._callbacks[a])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(a){var c=this._eventTypes,d=this._callbacks,g=a?"install":"uninstall";if(c){for(var m in d)if(d[m].length>0){var w=c[m],T=w&&w[g];T&&T.call(this,m)}}},statics:{inject:function a(c){var d=c._events;if(d){var g={};o.each(d,function(m,w){var T=typeof m=="string",E=T?m:w,C=o.capitalize(E),N=E.substring(2).toLowerCase();g[N]=T?{}:m,E="_"+E,c["get"+C]=function(){return this[E]},c["set"+C]=function(R){var O=this[E];O&&this.off(N,O),R&&this.on(N,R),this[E]=R}}),c._eventTypes=g}return a.base.apply(this,arguments)}}},h=o.extend({_class:"PaperScope",initialize:function a(){At=this,this.settings=new o({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=a._id++,a._scopes[this._id]=this;var c=a.prototype;if(!this.support){var d=Sn.getContext(1,1)||{};c.support={nativeDash:"setLineDash"in d||"mozDash"in d,nativeBlendModes:wa.nativeModes},Sn.release(d)}if(!this.agent){var g=e.navigator.userAgent.toLowerCase(),m=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(g)||[])[0],w=m==="darwin"?"mac":m,T=c.agent=c.browser={platform:w};w&&(T[w]=!0),g.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(E,C,N,R,O){if(!T.chrome){var P=C==="opera"?R:/^(node|trident)$/.test(C)?O:N;T.version=P,T.versionNumber=parseFloat(P),C={trident:"msie",jsdom:"node"}[C]||C,T.name=C,T[C]=!0}}),T.chrome&&delete T.webkit,T.atom&&delete T.chrome}},version:"0.12.17",getView:function(){var a=this.project;return a&&a._view},getPaper:function(){return this},execute:function(a,c){},install:function(a){var c=this;o.each(["project","view","tool"],function(g){o.define(a,g,{configurable:!0,get:function(){return c[g]}})});for(var d in this)!/^_/.test(d)&&this[d]&&(a[d]=this[d])},setup:function(a){return At=this,this.project=new oe(a),this},createCanvas:function(a,c){return Sn.getCanvas(a,c)},activate:function(){At=this},clear:function(){for(var a=this.projects,c=this.tools,d=a.length-1;d>=0;d--)a[d].remove();for(var d=c.length-1;d>=0;d--)c[d].remove()},remove:function(){this.clear(),delete h._scopes[this._id]},statics:new function(){function a(c){return c+="Attribute",function(d,g){return d[c](g)||d[c]("data-paper-"+g)}}return{_scopes:{},_id:0,get:function(c){return this._scopes[c]||null},getAttribute:a("get"),hasAttribute:a("has")}}}),f=o.extend(u,{initialize:function(a){this._scope=At,this._index=this._scope[this._list].push(this)-1,(a||!this._scope[this._reference])&&this.activate()},activate:function(){if(!this._scope)return!1;var a=this._scope[this._reference];return a&&a!==this&&a.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",a),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return this._index==null?!1:(o.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),v={findItemBoundsCollisions:function(a,c,d){function g(T){for(var E=new Array(T.length),C=0;C<T.length;C++){var N=T[C].getBounds();E[C]=[N.left,N.top,N.right,N.bottom]}return E}var m=g(a),w=!c||c===a?m:g(c);return this.findBoundsCollisions(m,w,d||0)},findCurveBoundsCollisions:function(a,c,d,g){function m(P){for(var A=Math.min,U=Math.max,W=new Array(P.length),H=0;H<P.length;H++){var V=P[H];W[H]=[A(V[0],V[2],V[4],V[6]),A(V[1],V[3],V[5],V[7]),U(V[0],V[2],V[4],V[6]),U(V[1],V[3],V[5],V[7])]}return W}var w=m(a),T=!c||c===a?w:m(c);if(g){for(var E=this.findBoundsCollisions(w,T,d||0,!1,!0),C=this.findBoundsCollisions(w,T,d||0,!0,!0),N=[],R=0,O=E.length;R<O;R++)N[R]={hor:E[R],ver:C[R]};return N}return this.findBoundsCollisions(w,T,d||0)},findBoundsCollisions:function(a,c,d,g,m){var w=!c||a===c,T=w?a:a.concat(c),E=a.length,C=T.length;function N(Me,Be,lt){for(var nt=0,et=Me.length;nt<et;){var Ze=et+nt>>>1;T[Me[Ze]][Be]<lt?nt=Ze+1:et=Ze}return nt-1}for(var R=g?1:0,O=R+2,P=g?0:1,A=P+2,U=new Array(C),W=0;W<C;W++)U[W]=W;U.sort(function(Me,Be){return T[Me][R]-T[Be][R]});for(var H=[],V=new Array(E),W=0;W<C;W++){var B=U[W],k=T[B],L=w?B:B-E,q=B<E,$=w||!q,Q=q?[]:null;if(H.length){var X=N(H,O,k[R]-d)+1;if(H.splice(0,X),w&&m){Q=Q.concat(H);for(var J=0;J<H.length;J++){var te=H[J];V[te].push(L)}}else for(var se=k[A],ie=k[P],J=0;J<H.length;J++){var te=H[J],ae=T[te],le=te<E,de=w||te>=E;(m||(q&&de||$&&le)&&se>=ae[P]-d&&ie<=ae[A]+d)&&(q&&de&&Q.push(w?te:te-E),$&&le&&V[te].push(L))}}if(q&&(a===c&&Q.push(B),V[B]=Q),H.length){var ge=k[O],ye=N(H,O,ge);H.splice(ye+1,0,B)}else H.push(B)}for(var W=0;W<V.length;W++){var ke=V[W];ke&&ke.sort(function(Be,lt){return Be-lt})}return V}},_=o.extend({initialize:function(a){this.precision=o.pick(a,5),this.multiplier=Math.pow(10,this.precision)},number:function(a){return this.precision<16?Math.round(a*this.multiplier)/this.multiplier:a},pair:function(a,c,d){return this.number(a)+(d||",")+this.number(c)},point:function(a,c){return this.number(a.x)+(c||",")+this.number(a.y)},size:function(a,c){return this.number(a.width)+(c||",")+this.number(a.height)},rectangle:function(a,c){return this.point(a,c)+(c||",")+this.size(a,c)}});_.instance=new _;var b=new function(){var a=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],c=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],d=Math.abs,g=Math.sqrt,m=Math.pow,w=Math.log2||function(O){return Math.log(O)*Math.LOG2E},T=1e-12,E=112e-18;function C(O,P,A){return O<P?P:O>A?A:O}function N(O,P,A){function U(X){var J=X*134217729,te=X-J,se=te+J,ie=X-se;return[se,ie]}var W=P*P-O*A,H=P*P+O*A;if(d(W)*3<H){var V=U(O),B=U(P),k=U(A),L=P*P,q=B[0]*B[0]-L+2*B[0]*B[1]+B[1]*B[1],$=O*A,Q=V[0]*k[0]-$+V[0]*k[1]+V[1]*k[0]+V[1]*k[1];W=L-$+(q-Q)}return W}function R(){var O=Math.max.apply(Math,arguments);return O&&(O<1e-8||O>1e8)?m(2,-Math.round(w(O))):0}return{EPSILON:T,MACHINE_EPSILON:E,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,ANGULAR_EPSILON:1e-5,KAPPA:4*(g(2)-1)/3,isZero:function(O){return O>=-T&&O<=T},isMachineZero:function(O){return O>=-E&&O<=E},clamp:C,integrate:function(O,P,A,U){for(var W=a[U-2],H=c[U-2],V=(A-P)*.5,B=V+P,k=0,L=U+1>>1,q=U&1?H[k++]*O(B):0;k<L;){var $=V*W[k];q+=H[k++]*(O(B+$)+O(B-$))}return V*q},findRoot:function(O,P,A,U,W,H,V){for(var B=0;B<H;B++){var k=O(A),L=k/P(A),q=A-L;if(d(L)<V){A=q;break}k>0?(W=A,A=q<=U?(U+W)*.5:q):(U=A,A=q>=W?(U+W)*.5:q)}return C(A,U,W)},solveQuadratic:function(O,P,A,U,W,H){var V,B=1/0;if(d(O)<T){if(d(P)<T)return d(A)<T?-1:0;V=-A/P}else{P*=-.5;var k=N(O,P,A);if(k&&d(k)<E){var L=R(d(O),d(P),d(A));L&&(O*=L,P*=L,A*=L,k=N(O,P,A))}if(k>=-E){var q=k<0?0:g(k),$=P+(P<0?-q:q);$===0?(V=A/O,B=-V):(V=$/O,B=A/$)}}var Q=0,X=W==null,J=W-T,te=H+T;return isFinite(V)&&(X||V>J&&V<te)&&(U[Q++]=X?V:C(V,W,H)),B!==V&&isFinite(B)&&(X||B>J&&B<te)&&(U[Q++]=X?B:C(B,W,H)),Q},solveCubic:function(O,P,A,U,W,H,V){var B=R(d(O),d(P),d(A),d(U)),k,L,q,$,Q;B&&(O*=B,P*=B,A*=B,U*=B);function X(ye){k=ye;var ke=O*k;L=ke+P,q=L*k+A,$=(ke+L)*k+q,Q=q*k+U}if(d(O)<T)O=P,L=A,q=U,k=1/0;else if(d(U)<T)L=P,q=A,k=0;else{X(-(P/O)/3);var J=Q/O,te=m(d(J),1/3),se=J<0?-1:1,ie=-$/O,ae=ie>0?1.324717957244746*Math.max(te,g(ie)):te,le=k-se*ae;if(le!==k){do X(le),le=$===0?k:k-Q/$/(1+E);while(se*le>se*k);d(O)*k*k>d(U/k)&&(q=-U/k,L=(q-A)/k)}}var de=b.solveQuadratic(O,L,q,W,H,V),ge=H==null;return isFinite(k)&&(de===0||de>0&&k!==W[0]&&k!==W[1])&&(ge||k>H-T&&k<V+T)&&(W[de++]=ge?k:C(k,H,V)),de}}},S={_id:1,_pools:{},get:function(a){if(a){var c=this._pools[a];return c||(c=this._pools[a]={_id:1}),c._id++}else return this._id++}},I=o.extend({_class:"Point",_readIndex:!0,initialize:function(c,d){var g=typeof c,m=this.__read,w=0;if(g==="number"){var T=typeof d=="number";this._set(c,T?d:c),m&&(w=T?2:1)}else if(g==="undefined"||c===null)this._set(0,0),m&&(w=c===null?1:0);else{var E=g==="string"?c.split(/[\s,]+/)||[]:c;w=1,Array.isArray(E)?this._set(+E[0],+(E.length>1?E[1]:E[0])):"x"in E?this._set(E.x||0,E.y||0):"width"in E?this._set(E.width||0,E.height||0):"angle"in E?(this._set(E.length||0,0),this.setAngle(E.angle||0)):(this._set(0,0),w=0)}return m&&(this.__read=w),this},set:"#initialize",_set:function(a,c){return this.x=a,this.y=c,this},equals:function(a){return this===a||a&&(this.x===a.x&&this.y===a.y||Array.isArray(a)&&this.x===a[0]&&this.y===a[1])||!1},clone:function(){return new I(this.x,this.y)},toString:function(){var a=_.instance;return"{ x: "+a.number(this.x)+", y: "+a.number(this.y)+" }"},_serialize:function(a){var c=a.formatter;return[c.number(this.x),c.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(a){if(this.isZero()){var c=this._angle||0;this._set(Math.cos(c)*a,Math.sin(c)*a)}else{var d=a/this.getLength();b.isZero(d)&&this.getAngle(),this._set(this.x*d,this.y*d)}},getAngle:function(){return this.getAngleInRadians.apply(this,arguments)*180/Math.PI},setAngle:function(a){this.setAngleInRadians.call(this,a*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var a=I.read(arguments),c=this.getLength()*a.getLength();if(b.isZero(c))return NaN;var d=this.dot(a)/c;return Math.acos(d<-1?-1:d>1?1:d)}else return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(a){if(this._angle=a,!this.isZero()){var c=this.getLength();this._set(Math.cos(a)*c,Math.sin(a)*c)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var a=I.read(arguments);return Math.atan2(this.cross(a),this.dot(a))*180/Math.PI},getDistance:function(){var a=arguments,c=I.read(a),d=c.x-this.x,g=c.y-this.y,m=d*d+g*g,w=o.read(a);return w?m:Math.sqrt(m)},normalize:function(a){a===n&&(a=1);var c=this.getLength(),d=c!==0?a/c:0,g=new I(this.x*d,this.y*d);return d>=0&&(g._angle=this._angle),g},rotate:function(a,c){if(a===0)return this.clone();a=a*Math.PI/180;var d=c?this.subtract(c):this,g=Math.sin(a),m=Math.cos(a);return d=new I(d.x*m-d.y*g,d.x*g+d.y*m),c?d.add(c):d},transform:function(a){return a?a._transformPoint(this):this},add:function(){var a=I.read(arguments);return new I(this.x+a.x,this.y+a.y)},subtract:function(){var a=I.read(arguments);return new I(this.x-a.x,this.y-a.y)},multiply:function(){var a=I.read(arguments);return new I(this.x*a.x,this.y*a.y)},divide:function(){var a=I.read(arguments);return new I(this.x/a.x,this.y/a.y)},modulo:function(){var a=I.read(arguments);return new I(this.x%a.x,this.y%a.y)},negate:function(){return new I(-this.x,-this.y)},isInside:function(){return z.read(arguments).contains(this)},isClose:function(){var a=arguments,c=I.read(a),d=o.read(a);return this.getDistance(c)<=d},isCollinear:function(){var a=I.read(arguments);return I.isCollinear(this.x,this.y,a.x,a.y)},isColinear:"#isCollinear",isOrthogonal:function(){var a=I.read(arguments);return I.isOrthogonal(this.x,this.y,a.x,a.y)},isZero:function(){var a=b.isZero;return a(this.x)&&a(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(a){return this.x*(a>1&&a<4?-1:1)>=0&&this.y*(a>2?-1:1)>=0},dot:function(){var a=I.read(arguments);return this.x*a.x+this.y*a.y},cross:function(){var a=I.read(arguments);return this.x*a.y-this.y*a.x},project:function(){var a=I.read(arguments),c=a.isZero()?0:this.dot(a)/a.dot(a);return new I(a.x*c,a.y*c)},statics:{min:function(){var a=arguments,c=I.read(a),d=I.read(a);return new I(Math.min(c.x,d.x),Math.min(c.y,d.y))},max:function(){var a=arguments,c=I.read(a),d=I.read(a);return new I(Math.max(c.x,d.x),Math.max(c.y,d.y))},random:function(){return new I(Math.random(),Math.random())},isCollinear:function(a,c,d,g){return Math.abs(a*g-c*d)<=Math.sqrt((a*a+c*c)*(d*d+g*g))*1e-8},isOrthogonal:function(a,c,d,g){return Math.abs(a*d+c*g)<=Math.sqrt((a*a+c*c)*(d*d+g*g))*1e-8}}},o.each(["round","ceil","floor","abs"],function(a){var c=Math[a];this[a]=function(){return new I(c(this.x),c(this.y))}},{})),M=I.extend({initialize:function(c,d,g,m){this._x=c,this._y=d,this._owner=g,this._setter=m},_set:function(a,c,d){return this._x=a,this._y=c,d||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(a){this._x=a,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(a){this._y=a,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(a){this._owner._changeSelection(this._getSelection(),a)},_getSelection:function(){return this._setter==="setPosition"?4:0}}),D=o.extend({_class:"Size",_readIndex:!0,initialize:function(c,d){var g=typeof c,m=this.__read,w=0;if(g==="number"){var T=typeof d=="number";this._set(c,T?d:c),m&&(w=T?2:1)}else if(g==="undefined"||c===null)this._set(0,0),m&&(w=c===null?1:0);else{var E=g==="string"?c.split(/[\s,]+/)||[]:c;w=1,Array.isArray(E)?this._set(+E[0],+(E.length>1?E[1]:E[0])):"width"in E?this._set(E.width||0,E.height||0):"x"in E?this._set(E.x||0,E.y||0):(this._set(0,0),w=0)}return m&&(this.__read=w),this},set:"#initialize",_set:function(a,c){return this.width=a,this.height=c,this},equals:function(a){return a===this||a&&(this.width===a.width&&this.height===a.height||Array.isArray(a)&&this.width===a[0]&&this.height===a[1])||!1},clone:function(){return new D(this.width,this.height)},toString:function(){var a=_.instance;return"{ width: "+a.number(this.width)+", height: "+a.number(this.height)+" }"},_serialize:function(a){var c=a.formatter;return[c.number(this.width),c.number(this.height)]},add:function(){var a=D.read(arguments);return new D(this.width+a.width,this.height+a.height)},subtract:function(){var a=D.read(arguments);return new D(this.width-a.width,this.height-a.height)},multiply:function(){var a=D.read(arguments);return new D(this.width*a.width,this.height*a.height)},divide:function(){var a=D.read(arguments);return new D(this.width/a.width,this.height/a.height)},modulo:function(){var a=D.read(arguments);return new D(this.width%a.width,this.height%a.height)},negate:function(){return new D(-this.width,-this.height)},isZero:function(){var a=b.isZero;return a(this.width)&&a(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(a,c){return new D(Math.min(a.width,c.width),Math.min(a.height,c.height))},max:function(a,c){return new D(Math.max(a.width,c.width),Math.max(a.height,c.height))},random:function(){return new D(Math.random(),Math.random())}}},o.each(["round","ceil","floor","abs"],function(a){var c=Math[a];this[a]=function(){return new D(c(this.width),c(this.height))}},{})),ne=D.extend({initialize:function(c,d,g,m){this._width=c,this._height=d,this._owner=g,this._setter=m},_set:function(a,c,d){return this._width=a,this._height=c,d||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(a){this._width=a,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(a){this._height=a,this._owner[this._setter](this)}}),z=o.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(c,d,g,m){var w=arguments,T=typeof c,E;if(T==="number"?(this._set(c,d,g,m),E=4):T==="undefined"||c===null?(this._set(0,0,0,0),E=c===null?1:0):w.length===1&&(Array.isArray(c)?(this._set.apply(this,c),E=1):c.x!==n||c.width!==n?(this._set(c.x||0,c.y||0,c.width||0,c.height||0),E=1):c.from===n&&c.to===n&&(this._set(0,0,0,0),o.readSupported(w,this)&&(E=1))),E===n){var C=I.readNamed(w,"from"),N=o.peek(w),R=C.x,O=C.y,P,A;if(N&&N.x!==n||o.hasNamed(w,"to")){var U=I.readNamed(w,"to");P=U.x-R,A=U.y-O,P<0&&(R=U.x,P=-P),A<0&&(O=U.y,A=-A)}else{var W=D.read(w);P=W.width,A=W.height}this._set(R,O,P,A),E=w.__index}var H=w.__filtered;return H&&(this.__filtered=H),this.__read&&(this.__read=E),this},set:"#initialize",_set:function(a,c,d,g){return this.x=a,this.y=c,this.width=d,this.height=g,this},clone:function(){return new z(this.x,this.y,this.width,this.height)},equals:function(a){var c=o.isPlainValue(a)?z.read(arguments):a;return c===this||c&&this.x===c.x&&this.y===c.y&&this.width===c.width&&this.height===c.height||!1},toString:function(){var a=_.instance;return"{ x: "+a.number(this.x)+", y: "+a.number(this.y)+", width: "+a.number(this.width)+", height: "+a.number(this.height)+" }"},_serialize:function(a){var c=a.formatter;return[c.number(this.x),c.number(this.y),c.number(this.width),c.number(this.height)]},getPoint:function(a){var c=a?I:M;return new c(this.x,this.y,this,"setPoint")},setPoint:function(){var a=I.read(arguments);this.x=a.x,this.y=a.y},getSize:function(a){var c=a?D:ne;return new c(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var a=D.read(arguments),c=this._sx,d=this._sy,g=a.width,m=a.height;c&&(this.x+=(this.width-g)*c),d&&(this.y+=(this.height-m)*d),this.width=g,this.height=m,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(a){if(!this._fw){var c=a-this.x;this.width-=this._sx===.5?c*2:c}this.x=a,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(a){if(!this._fh){var c=a-this.y;this.height-=this._sy===.5?c*2:c}this.y=a,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(a){if(!this._fw){var c=a-this.x;this.width=this._sx===.5?c*2:c}this.x=a-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(a){if(!this._fh){var c=a-this.y;this.height=this._sy===.5?c*2:c}this.y=a-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(a){this._fw||this._sx===.5?this.x=a-this.width/2:(this._sx&&(this.x+=(a-this.x)*2*this._sx),this.width=(a-this.x)*2),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(a){this._fh||this._sy===.5?this.y=a-this.height/2:(this._sy&&(this.y+=(a-this.y)*2*this._sy),this.height=(a-this.y)*2),this._sy=.5,this._fh=0},getCenter:function(a){var c=a?I:M;return new c(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var a=I.read(arguments);return this.setCenterX(a.x),this.setCenterY(a.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return this.width===0||this.height===0},contains:function(a){return a&&a.width!==n||(Array.isArray(a)?a:arguments).length===4?this._containsRectangle(z.read(arguments)):this._containsPoint(I.read(arguments))},_containsPoint:function(a){var c=a.x,d=a.y;return c>=this.x&&d>=this.y&&c<=this.x+this.width&&d<=this.y+this.height},_containsRectangle:function(a){var c=a.x,d=a.y;return c>=this.x&&d>=this.y&&c+a.width<=this.x+this.width&&d+a.height<=this.y+this.height},intersects:function(){var a=z.read(arguments),c=o.read(arguments)||0;return a.x+a.width>this.x-c&&a.y+a.height>this.y-c&&a.x<this.x+this.width+c&&a.y<this.y+this.height+c},intersect:function(){var a=z.read(arguments),c=Math.max(this.x,a.x),d=Math.max(this.y,a.y),g=Math.min(this.x+this.width,a.x+a.width),m=Math.min(this.y+this.height,a.y+a.height);return new z(c,d,g-c,m-d)},unite:function(){var a=z.read(arguments),c=Math.min(this.x,a.x),d=Math.min(this.y,a.y),g=Math.max(this.x+this.width,a.x+a.width),m=Math.max(this.y+this.height,a.y+a.height);return new z(c,d,g-c,m-d)},include:function(){var a=I.read(arguments),c=Math.min(this.x,a.x),d=Math.min(this.y,a.y),g=Math.max(this.x+this.width,a.x),m=Math.max(this.y+this.height,a.y);return new z(c,d,g-c,m-d)},expand:function(){var a=D.read(arguments),c=a.width,d=a.height;return new z(this.x-c/2,this.y-d/2,this.width+c,this.height+d)},scale:function(a,c){return this.expand(this.width*a-this.width,this.height*(c===n?a:c)-this.height)}},o.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(a,c){var d=a.join(""),g=/^[RL]/.test(d);c>=4&&(a[1]+=g?"Y":"X");var m=a[g?0:1],w=a[g?1:0],T="get"+m,E="get"+w,C="set"+m,N="set"+w,R="get"+d,O="set"+d;this[R]=function(P){var A=P?I:M;return new A(this[T](),this[E](),this,O)},this[O]=function(){var P=I.read(arguments);this[C](P.x),this[N](P.y)}},{beans:!0})),Y=z.extend({initialize:function(c,d,g,m,w,T){this._set(c,d,g,m,!0),this._owner=w,this._setter=T},_set:function(a,c,d,g,m){return this._x=a,this._y=c,this._width=d,this._height=g,m||this._owner[this._setter](this),this}},new function(){var a=z.prototype;return o.each(["x","y","width","height"],function(c){var d=o.capitalize(c),g="_"+c;this["get"+d]=function(){return this[g]},this["set"+d]=function(m){this[g]=m,this._dontNotify||this._owner[this._setter](this)}},o.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(c){var d="set"+c;this[d]=function(){this._dontNotify=!0,a[d].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(this._owner._selection&2)},setSelected:function(c){var d=this._owner;d._changeSelection&&d._changeSelection(2,c)}}))}),K=o.extend({_class:"Matrix",initialize:function a(c,d){var g=arguments,m=g.length,w=!0;if(m>=6?this._set.apply(this,g):m===1||m===2?c instanceof a?this._set(c._a,c._b,c._c,c._d,c._tx,c._ty,d):Array.isArray(c)?this._set.apply(this,d?c.concat([d]):c):w=!1:m?w=!1:this.reset(),!w)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(a,c,d,g,m,w,T){return this._a=a,this._b=c,this._c=d,this._d=g,this._tx=m,this._ty=w,T||this._changed(),this},_serialize:function(a,c){return o.serialize(this.getValues(),a,!0,c)},_changed:function(){var a=this._owner;a&&(a._applyMatrix?a.transform(null,!0):a._changed(25))},clone:function(){return new K(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(a){return a===this||a&&this._a===a._a&&this._b===a._b&&this._c===a._c&&this._d===a._d&&this._tx===a._tx&&this._ty===a._ty},toString:function(){var a=_.instance;return"[["+[a.number(this._a),a.number(this._c),a.number(this._tx)].join(", ")+"], ["+[a.number(this._b),a.number(this._d),a.number(this._ty)].join(", ")+"]]"},reset:function(a){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,a||this._changed(),this},apply:function(a,c){var d=this._owner;return d?(d.transform(null,o.pick(a,!0),c),this.isIdentity()):!1},translate:function(){var a=I.read(arguments),c=a.x,d=a.y;return this._tx+=c*this._a+d*this._c,this._ty+=c*this._b+d*this._d,this._changed(),this},scale:function(){var a=arguments,c=I.read(a),d=I.read(a,0,{readNull:!0});return d&&this.translate(d),this._a*=c.x,this._b*=c.x,this._c*=c.y,this._d*=c.y,d&&this.translate(d.negate()),this._changed(),this},rotate:function(a){a*=Math.PI/180;var c=I.read(arguments,1),d=c.x,g=c.y,m=Math.cos(a),w=Math.sin(a),T=d-d*m+g*w,E=g-d*w-g*m,C=this._a,N=this._b,R=this._c,O=this._d;return this._a=m*C+w*R,this._b=m*N+w*O,this._c=-w*C+m*R,this._d=-w*N+m*O,this._tx+=T*C+E*R,this._ty+=T*N+E*O,this._changed(),this},shear:function(){var a=arguments,c=I.read(a),d=I.read(a,0,{readNull:!0});d&&this.translate(d);var g=this._a,m=this._b;return this._a+=c.y*this._c,this._b+=c.y*this._d,this._c+=c.x*g,this._d+=c.x*m,d&&this.translate(d.negate()),this._changed(),this},skew:function(){var a=arguments,c=I.read(a),d=I.read(a,0,{readNull:!0}),g=Math.PI/180,m=new I(Math.tan(c.x*g),Math.tan(c.y*g));return this.shear(m,d)},append:function(a,c){if(a){var d=this._a,g=this._b,m=this._c,w=this._d,T=a._a,E=a._c,C=a._b,N=a._d,R=a._tx,O=a._ty;this._a=T*d+C*m,this._c=E*d+N*m,this._b=T*g+C*w,this._d=E*g+N*w,this._tx+=R*d+O*m,this._ty+=R*g+O*w,c||this._changed()}return this},prepend:function(a,c){if(a){var d=this._a,g=this._b,m=this._c,w=this._d,T=this._tx,E=this._ty,C=a._a,N=a._c,R=a._b,O=a._d,P=a._tx,A=a._ty;this._a=C*d+N*g,this._c=C*m+N*w,this._b=R*d+O*g,this._d=R*m+O*w,this._tx=C*T+N*E+P,this._ty=R*T+O*E+A,c||this._changed()}return this},appended:function(a){return this.clone().append(a)},prepended:function(a){return this.clone().prepend(a)},invert:function(){var a=this._a,c=this._b,d=this._c,g=this._d,m=this._tx,w=this._ty,T=a*g-c*d,E=null;return T&&!isNaN(T)&&isFinite(m)&&isFinite(w)&&(this._a=g/T,this._b=-c/T,this._c=-d/T,this._d=a/T,this._tx=(d*w-g*m)/T,this._ty=(c*m-a*w)/T,E=this),E},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new K(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return this._a===1&&this._b===0&&this._c===0&&this._d===1&&this._tx===0&&this._ty===0},isInvertible:function(){var a=this._a*this._d-this._c*this._b;return a&&!isNaN(a)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(a,c,d){return arguments.length<3?this._transformPoint(I.read(arguments)):this._transformCoordinates(a,c,d)},_transformPoint:function(a,c,d){var g=a.x,m=a.y;return c||(c=new I),c._set(g*this._a+m*this._c+this._tx,g*this._b+m*this._d+this._ty,d)},_transformCoordinates:function(a,c,d){for(var g=0,m=2*d;g<m;g+=2){var w=a[g],T=a[g+1];c[g]=w*this._a+T*this._c+this._tx,c[g+1]=w*this._b+T*this._d+this._ty}return c},_transformCorners:function(a){var c=a.x,d=a.y,g=c+a.width,m=d+a.height,w=[c,d,g,d,g,m,c,m];return this._transformCoordinates(w,w,4)},_transformBounds:function(a,c,d){for(var g=this._transformCorners(a),m=g.slice(0,2),w=m.slice(),T=2;T<8;T++){var E=g[T],C=T&1;E<m[C]?m[C]=E:E>w[C]&&(w[C]=E)}return c||(c=new z),c._set(m[0],m[1],w[0]-m[0],w[1]-m[1],d)},inverseTransform:function(){return this._inverseTransform(I.read(arguments))},_inverseTransform:function(a,c,d){var g=this._a,m=this._b,w=this._c,T=this._d,E=this._tx,C=this._ty,N=g*T-m*w,R=null;if(N&&!isNaN(N)&&isFinite(E)&&isFinite(C)){var O=a.x-this._tx,P=a.y-this._ty;c||(c=new I),R=c._set((O*T-P*w)/N,(P*g-O*m)/N,d)}return R},decompose:function(){var a=this._a,c=this._b,d=this._c,g=this._d,m=a*g-c*d,w=Math.sqrt,T=Math.atan2,E=180/Math.PI,C,N,R;if(a!==0||c!==0){var O=w(a*a+c*c);C=Math.acos(a/O)*(c>0?1:-1),N=[O,m/O],R=[T(a*d+c*g,O*O),0]}else if(d!==0||g!==0){var P=w(d*d+g*g);C=Math.asin(d/P)*(g>0?1:-1),N=[m/P,P],R=[0,T(a*d+c*g,P*P)]}else C=0,R=N=[0,0];return{translation:this.getTranslation(),rotation:C*E,scaling:new I(N),skewing:new I(R[0]*E,R[1]*E)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new I(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(a){this.isIdentity()||a.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},o.each(["a","b","c","d","tx","ty"],function(a){var c=o.capitalize(a),d="_"+a;this["get"+c]=function(){return this[d]},this["set"+c]=function(g){this[d]=g,this._changed()}},{})),ue=o.extend({_class:"Line",initialize:function(c,d,g,m,w){var T=!1;arguments.length>=4?(this._px=c,this._py=d,this._vx=g,this._vy=m,T=w):(this._px=c.x,this._py=c.y,this._vx=d.x,this._vy=d.y,T=g),T||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new I(this._px,this._py)},getVector:function(){return new I(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(a,c){return ue.intersect(this._px,this._py,this._vx,this._vy,a._px,a._py,a._vx,a._vy,!0,c)},getSide:function(a,c){return ue.getSide(this._px,this._py,this._vx,this._vy,a.x,a.y,!0,c)},getDistance:function(a){return Math.abs(this.getSignedDistance(a))},getSignedDistance:function(a){return ue.getSignedDistance(this._px,this._py,this._vx,this._vy,a.x,a.y,!0)},isCollinear:function(a){return I.isCollinear(this._vx,this._vy,a._vx,a._vy)},isOrthogonal:function(a){return I.isOrthogonal(this._vx,this._vy,a._vx,a._vy)},statics:{intersect:function(a,c,d,g,m,w,T,E,C,N){C||(d-=a,g-=c,T-=m,E-=w);var R=d*E-g*T;if(!b.isMachineZero(R)){var O=a-m,P=c-w,A=(T*P-E*O)/R,U=(d*P-g*O)/R,W=1e-12,H=-W,V=1+W;if(N||H<A&&A<V&&H<U&&U<V)return N||(A=A<=0?0:A>=1?1:A),new I(a+A*d,c+A*g)}},getSide:function(a,c,d,g,m,w,T,E){T||(d-=a,g-=c);var C=m-a,N=w-c,R=C*g-N*d;return!E&&b.isMachineZero(R)&&(R=(C*d+C*d)/(d*d+g*g),R>=0&&R<=1&&(R=0)),R<0?-1:R>0?1:0},getSignedDistance:function(a,c,d,g,m,w,T){return T||(d-=a,g-=c),d===0?g>0?m-a:a-m:g===0?d<0?w-c:c-w:((m-a)*g-(w-c)*d)/(g>d?g*Math.sqrt(1+d*d/(g*g)):d*Math.sqrt(1+g*g/(d*d)))},getDistance:function(a,c,d,g,m,w,T){return Math.abs(ue.getSignedDistance(a,c,d,g,m,w,T))}}}),oe=f.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(c){f.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new xs(null,null,this),this._view=_e.create(this,c||Sn.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(a,c){return o.serialize(this._children,a,!0,c)},_changed:function(a,c){if(a&1){var d=this._view;d&&(d._needsUpdate=!0,!d._requested&&d._autoUpdate&&d.requestUpdate())}var g=this._changes;if(g&&c){var m=this._changesById,w=c._id,T=m[w];T?T.flags|=a:g.push(m[w]={item:c,flags:a})}},clear:function(){for(var a=this._children,c=a.length-1;c>=0;c--)a[c].remove()},isEmpty:function(){return!this._children.length},remove:function a(){return a.base.call(this)?(this._view&&this._view.remove(),!0):!1},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(a){this._currentStyle.set(a)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new he({project:this,insert:!0})},getSymbolDefinitions:function(){var a=[],c={};return this.getItems({class:Ue,match:function(d){var g=d._definition,m=g._id;return c[m]||(c[m]=!0,a.push(g)),!1}}),a},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var a=this._selectionItems,c=[];for(var d in a){var g=a[d],m=g._selection;m&1&&g.isInserted()?c.push(g):m||this._updateSelection(g)}return c},_updateSelection:function(a){var c=a._id,d=this._selectionItems;a._selection?d[c]!==a&&(this._selectionCount++,d[c]=a):d[c]===a&&(this._selectionCount--,delete d[c])},selectAll:function(){for(var a=this._children,c=0,d=a.length;c<d;c++)a[c].setFullySelected(!0)},deselectAll:function(){var a=this._selectionItems;for(var c in a)a[c].setFullySelected(!1)},addLayer:function(a){return this.insertLayer(n,a)},insertLayer:function(a,c){if(c instanceof he){c._remove(!1,!0),o.splice(this._children,[c],a,0),c._setProject(this,!0);var d=c._name;d&&c.setName(d),this._changes&&c._changed(5),this._activeLayer||(this._activeLayer=c)}else c=null;return c},_insertItem:function(a,c,d){return c=this.insertLayer(a,c)||(this._activeLayer||this._insertItem(n,new he(fe.NO_INSERT),!0)).insertChild(a,c),d&&c.activate&&c.activate(),c},getItems:function(a){return fe._getItems(this,a)},getItem:function(a){return fe._getItems(this,a,null,null,!0)[0]||null},importJSON:function(a){this.activate();var c=this._activeLayer;return o.importJSON(a,c&&c.isEmpty()&&c)},removeOn:function(a){var c=this._removeSets;if(c){a==="mouseup"&&(c.mousedrag=null);var d=c[a];if(d){for(var g in d){var m=d[g];for(var w in c){var T=c[w];T&&T!=d&&delete T[m._id]}m.remove()}c[a]=null}}},draw:function(a,c,d){this._updateVersion++,a.save(),c.applyToContext(a);for(var g=this._children,m=new o({offset:new I(0,0),pixelRatio:d,viewMatrix:c.isIdentity()?null:c,matrices:[new K],updateMatrix:!0}),w=0,T=g.length;w<T;w++)g[w].draw(a,m);if(a.restore(),this._selectionCount>0){a.save(),a.strokeWidth=1;var E=this._selectionItems,C=this._scope.settings.handleSize,N=this._updateVersion;for(var R in E)E[R]._drawSelection(a,c,C,E,N);a.restore()}}}),fe=o.extend(u,{statics:{extend:function a(c){return c._serializeFields&&(c._serializeFields=o.set({},this.prototype._serializeFields,c._serializeFields)),a.base.apply(this,arguments)},INSERT:{insert:!0},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new K,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var a=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return o.each(a,function(c){this._events[c]={install:function(d){this.getView()._countItemEvent(d,1)},uninstall:function(d){this.getView()._countItemEvent(d,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:a}})},{initialize:function(){},_initialize:function(a,c){var d=a&&o.isPlainObject(a),g=d&&a.internal===!0,m=this._matrix=new K,w=d&&a.project||At.project,T=At.settings;return this._id=g?null:S.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&T.applyMatrix,c&&m.translate(c),m._owner=this,this._style=new xs(w._currentStyle,this,w),g||d&&a.insert==!1||!T.insertItems&&!(d&&a.insert==!0)?this._setProject(w):(d&&a.parent||w)._insertItem(n,this,!0),d&&a!==fe.NO_INSERT&&a!==fe.INSERT&&this.set(a,{internal:!0,insert:!0,project:!0,parent:!0}),d},_serialize:function(a,c){var d={},g=this;function m(w){for(var T in w){var E=g[T];o.equals(E,T==="leading"?w.fontSize*1.2:w[T])||(d[T]=o.serialize(E,a,T!=="data",c))}}return m(this._serializeFields),this instanceof me||m(this._style._defaults),[this._class,d]},_changed:function(a){var c=this._symbol,d=this._parent||c,g=this._project;a&8&&(this._bounds=this._position=this._decomposed=n),a&16&&(this._globalMatrix=n),d&&a&72&&fe._clearBoundsCache(d),a&2&&fe._clearBoundsCache(this),g&&g._changed(a,this),c&&c._changed(a)},getId:function(){return this._id},getName:function(){return this._name},setName:function(a){if(this._name&&this._removeNamed(),a===+a+"")throw new Error("Names consisting only of numbers are not supported.");var c=this._getOwner();if(a&&c){var d=c._children,g=c._namedChildren;(g[a]=g[a]||[]).push(this),a in d||(d[a]=this)}this._name=a||n,this._changed(256)},getStyle:function(){return this._style},setStyle:function(a){this.getStyle().set(a)}},o.each(["locked","visible","blendMode","opacity","guide"],function(a){var c=o.capitalize(a),d="_"+a,g={locked:256,visible:265};this["get"+c]=function(){return this[d]},this["set"+c]=function(m){m!=this[d]&&(this[d]=m,this._changed(g[a]||257))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(a){if(a!==this._selection){this._selection=a;var c=this._project;c&&(c._updateSelection(this),this._changed(257))}},_changeSelection:function(a,c){var d=this._selection;this.setSelection(c?d|a:d&~a)},isSelected:function(){if(this._selectChildren){for(var a=this._children,c=0,d=a.length;c<d;c++)if(a[c].isSelected())return!0}return!!(this._selection&1)},setSelected:function(a){if(this._selectChildren)for(var c=this._children,d=0,g=c.length;d<g;d++)c[d].setSelected(a);this._changeSelection(1,a)},isFullySelected:function(){var a=this._children,c=!!(this._selection&1);if(a&&c){for(var d=0,g=a.length;d<g;d++)if(!a[d].isFullySelected())return!1;return!0}return c},setFullySelected:function(a){var c=this._children;if(c)for(var d=0,g=c.length;d<g;d++)c[d].setFullySelected(a);this._changeSelection(1,a)},isClipMask:function(){return this._clipMask},setClipMask:function(a){this._clipMask!=(a=!!a)&&(this._clipMask=a,a&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(a){this._data=a},getPosition:function(a){var c=a?I:M,d=this._position||(this._position=this._getPositionFromBounds());return new c(d.x,d.y,this,"setPosition")},setPosition:function(){this.translate(I.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(a){return this._pivot?this._matrix._transformPoint(this._pivot):(a||this.getBounds()).getCenter(!0)},getPivot:function(){var a=this._pivot;return a?new M(a.x,a.y,this,"setPivot"):null},setPivot:function(){this._pivot=I.read(arguments,0,{clone:!0,readNull:!0}),this._position=n}},o.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(a,c){this[c]=function(d){return this.getBounds(d,a)}},{beans:!0,getBounds:function(a,c){var d=c||a instanceof K,g=o.set({},d?c:a,this._boundsOptions);(!g.stroke||this.getStrokeScaling())&&(g.cacheItem=this);var m=this._getCachedBounds(d&&a,g).rect;return arguments.length?m:new Y(m.x,m.y,m.width,m.height,this,"setBounds")},setBounds:function(){var a=z.read(arguments),c=this.getBounds(),d=this._matrix,g=new K,m=a.getCenter();g.translate(m),(a.width!=c.width||a.height!=c.height)&&(d.isInvertible()||(d.set(d._backup||new K().translate(d.getTranslation())),c=this.getBounds()),g.scale(c.width!==0?a.width/c.width:0,c.height!==0?a.height/c.height:0)),m=c.getCenter(),g.translate(-m.x,-m.y),this.transform(g)},_getBounds:function(a,c){var d=this._children;return!d||!d.length?new z:(fe._updateBoundsCache(this,c.cacheItem),fe._getBounds(d,a,c))},_getBoundsCacheKey:function(a,c){return[a.stroke?1:0,a.handle?1:0,c?1:0].join("")},_getCachedBounds:function(a,c,d){a=a&&a._orNullIfIdentity();var g=c.internal&&!d,m=c.cacheItem,w=g?null:this._matrix._orNullIfIdentity(),T=m&&(!a||a.equals(w))&&this._getBoundsCacheKey(c,g),E=this._bounds;if(fe._updateBoundsCache(this._parent||this._symbol,m),T&&E&&T in E){var C=E[T];return{rect:C.rect.clone(),nonscaling:C.nonscaling}}var N=this._getBounds(a||w,c),R=N.rect||N,O=this._style,P=N.nonscaling||O.hasStroke()&&!O.getStrokeScaling();if(T){E||(this._bounds=E={});var C=E[T]={rect:R.clone(),nonscaling:P,internal:g}}return{rect:R,nonscaling:P}},_getStrokeMatrix:function(a,c){var d=this.getStrokeScaling()?null:c&&c.internal?this:this._parent||this._symbol&&this._symbol._item,g=d?d.getViewMatrix().invert():a;return g&&g._shiftless()},statics:{_updateBoundsCache:function(a,c){if(a&&c){var d=c._id,g=a._boundsCache=a._boundsCache||{ids:{},list:[]};g.ids[d]||(g.list.push(c),g.ids[d]=c)}},_clearBoundsCache:function(a){var c=a._boundsCache;if(c){a._bounds=a._position=a._boundsCache=n;for(var d=0,g=c.list,m=g.length;d<m;d++){var w=g[d];w!==a&&(w._bounds=w._position=n,w._boundsCache&&fe._clearBoundsCache(w))}}},_getBounds:function(a,c,d){var g=1/0,m=-g,w=g,T=m,E=!1;d=d||{};for(var C=0,N=a.length;C<N;C++){var R=a[C];if(R._visible&&!R.isEmpty(!0)){var O=R._getCachedBounds(c&&c.appended(R._matrix),d,!0),P=O.rect;g=Math.min(P.x,g),w=Math.min(P.y,w),m=Math.max(P.x+P.width,m),T=Math.max(P.y+P.height,T),O.nonscaling&&(E=!0)}}return{rect:isFinite(g)?new z(g,w,m-g,T-w):new z,nonscaling:E}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var a=this._decompose();return a?a.rotation:0},setRotation:function(a){var c=this.getRotation();if(c!=null&&a!=null){var d=this._decomposed;this.rotate(a-c),d&&(d.rotation=a,this._decomposed=d)}},getScaling:function(){var a=this._decompose(),c=a&&a.scaling;return new M(c?c.x:1,c?c.y:1,this,"setScaling")},setScaling:function(){var a=this.getScaling(),c=I.read(arguments,0,{clone:!0,readNull:!0});if(a&&c&&!a.equals(c)){var d=this.getRotation(),g=this._decomposed,m=new K,w=b.isZero;if(w(a.x)||w(a.y))m.translate(g.translation),d&&m.rotate(d),m.scale(c.x,c.y),this._matrix.set(m);else{var T=this.getPosition(!0);m.translate(T),d&&m.rotate(d),m.scale(c.x/a.x,c.y/a.y),d&&m.rotate(-d),m.translate(T.negate()),this.transform(m)}g&&(g.scaling=c,this._decomposed=g)}},getMatrix:function(){return this._matrix},setMatrix:function(){var a=this._matrix;a.set.apply(a,arguments)},getGlobalMatrix:function(a){var c=this._globalMatrix;if(c)for(var d=this._parent,g=[];d;){if(!d._globalMatrix){c=null;for(var m=0,w=g.length;m<w;m++)g[m]._globalMatrix=null;break}g.push(d),d=d._parent}if(!c){c=this._globalMatrix=this._matrix.clone();var d=this._parent;d&&c.prepend(d.getGlobalMatrix(!0))}return a?c:c.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(a){(this._applyMatrix=this._canApplyMatrix&&!!a)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(a,c){if(this._project!==a){this._project&&this._installEvents(!1),this._project=a;for(var d=this._children,g=0,m=d&&d.length;g<m;g++)d[g]._setProject(a);c=!0}c&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function a(c){a.base.call(this,c);for(var d=this._children,g=0,m=d&&d.length;g<m;g++)d[g]._installEvents(c)},getLayer:function(){for(var a=this;a=a._parent;)if(a instanceof he)return a;return null},getParent:function(){return this._parent},setParent:function(a){return a.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(a){this.removeChildren(),this.addChildren(a)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var a=this._getOwner();return a&&a._children[this._index+1]||null},getPreviousSibling:function(){var a=this._getOwner();return a&&a._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(a){return a===this||a&&this._class===a._class&&this._style.equals(a._style)&&this._matrix.equals(a._matrix)&&this._locked===a._locked&&this._visible===a._visible&&this._blendMode===a._blendMode&&this._opacity===a._opacity&&this._clipMask===a._clipMask&&this._guide===a._guide&&this._equals(a)||!1},_equals:function(a){return o.equals(this._children,a._children)},clone:function(a){var c=new this.constructor(fe.NO_INSERT),d=this._children,g=o.pick(a?a.insert:n,a===n||a===!0),m=o.pick(a?a.deep:n,!0);d&&c.copyAttributes(this),(!d||m)&&c.copyContent(this),d||c.copyAttributes(this),g&&c.insertAbove(this);var w=this._name,T=this._parent;if(w&&T){for(var d=T._children,E=w,C=1;d[w];)w=E+" "+C++;w!==E&&c.setName(w)}return c},copyContent:function(a){for(var c=a._children,d=0,g=c&&c.length;d<g;d++)this.addChild(c[d].clone(!1),!0)},copyAttributes:function(a,c){this.setStyle(a._style);for(var d=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],g=0,m=d.length;g<m;g++){var w=d[g];a.hasOwnProperty(w)&&(this[w]=a[w])}c||this._matrix.set(a._matrix,!0),this.setApplyMatrix(a._applyMatrix),this.setPivot(a._pivot),this.setSelection(a._selection);var T=a._data,E=a._name;this._data=T?o.clone(T):null,E&&this.setName(E)},rasterize:function(a,c){var d,g,m;o.isPlainObject(a)?(d=a.resolution,g=a.insert,m=a.raster):(d=a,g=c),m||(m=new Se(fe.NO_INSERT));var w=this.getStrokeBounds(),T=(d||this.getView().getResolution())/72,E=w.getTopLeft().floor(),C=w.getBottomRight().ceil(),N=new D(C.subtract(E)),R=N.multiply(T);if(m.setSize(R,!0),!R.isZero()){var O=m.getContext(!0),P=new K().scale(T).translate(E.negate());O.save(),P.applyToContext(O),this.draw(O,new o({matrices:[P]})),O.restore()}return m._matrix.set(new K().translate(E.add(N.divide(2))).scale(1/T)),(g===n||g)&&m.insertAbove(this),m},contains:function(){var a=this._matrix;return a.isInvertible()&&!!this._contains(a._inverseTransform(I.read(arguments)))},_contains:function(a){var c=this._children;if(c){for(var d=c.length-1;d>=0;d--)if(c[d].contains(a))return!0;return!1}return a.isInside(this.getInternalBounds())},isInside:function(){return z.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new Ne.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(a,c){return a instanceof fe?this._asPathItem().getIntersections(a._asPathItem(),null,c,!0).length>0:!1}},new function(){function a(){var g=arguments;return this._hitTest(I.read(g),ft.getOptions(g))}function c(){var g=arguments,m=I.read(g),w=ft.getOptions(g),T=[];return this._hitTest(m,new o({all:T},w)),T}function d(g,m,w,T){var E=this._children;if(E)for(var C=E.length-1;C>=0;C--){var N=E[C],R=N!==T&&N._hitTest(g,m,w);if(R&&!m.all)return R}return null}return oe.inject({hitTest:a,hitTestAll:c,_hitTest:d}),{hitTest:a,hitTestAll:c,_hitTestChildren:d}},{_hitTest:function(a,c,d){if(this._locked||!this._visible||this._guide&&!c.guides||this.isEmpty())return null;var g=this._matrix,m=d?d.appended(g):this.getGlobalMatrix().prepend(this.getView()._matrix),w=Math.max(c.tolerance,1e-12),T=c._tolerancePadding=new D(Ne._getStrokePadding(w,g._shiftless().invert()));if(a=g._inverseTransform(a),!a||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(T.multiply(2))._containsPoint(a))return null;var E=!(c.guides&&!this._guide||c.selected&&!this.isSelected()||c.type&&c.type!==o.hyphenate(this._class)||c.class&&!(this instanceof c.class)),C=c.match,N=this,R,O;function P(k){return k&&C&&!C(k)&&(k=null),k&&c.all&&c.all.push(k),k}function A(k,L){var q=L?R["get"+L]():N.getPosition();if(a.subtract(q).divide(T).length<=1)return new ft(k,N,{name:L?o.hyphenate(L):k,point:q})}var U=c.position,W=c.center,H=c.bounds;if(E&&this._parent&&(U||W||H)){if((W||H)&&(R=this.getInternalBounds()),O=U&&A("position")||W&&A("center","Center"),!O&&H)for(var V=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],B=0;B<8&&!O;B++)O=A("bounds",V[B]);O=P(O)}return O||(O=this._hitTestChildren(a,c,m)||E&&P(this._hitTestSelf(a,c,m,this.getStrokeScaling()?null:m._shiftless().invert()))||null),O&&O.point&&(O.point=g.transform(O.point)),O},_hitTestSelf:function(a,c){if(c.fill&&this.hasFill()&&this._contains(a))return new ft("fill",this)},matches:function(a,c){function d(T,E){for(var C in T)if(T.hasOwnProperty(C)){var N=T[C],R=E[C];if(o.isPlainObject(N)&&o.isPlainObject(R)){if(!d(N,R))return!1}else if(!o.equals(N,R))return!1}return!0}var g=typeof a;if(g==="object"){for(var m in a)if(a.hasOwnProperty(m)&&!this.matches(m,a[m]))return!1;return!0}else{if(g==="function")return a(this);if(a==="match")return c(this);var w=/^(empty|editable)$/.test(a)?this["is"+o.capitalize(a)]():a==="type"?o.hyphenate(this._class):this[a];if(a==="class"){if(typeof c=="function")return this instanceof c;w=this._class}if(typeof c=="function")return!!c(w);if(c){if(c.test)return c.test(w);if(o.isPlainObject(c))return d(c,w)}return o.equals(w,c)}},getItems:function(a){return fe._getItems(this,a,this._matrix)},getItem:function(a){return fe._getItems(this,a,this._matrix,null,!0)[0]||null},statics:{_getItems:function a(c,d,g,m,w){if(!m){var T=typeof d=="object"&&d,E=T&&T.overlapping,C=T&&T.inside,N=E||C,P=N&&z.read([N]);m={items:[],recursive:T&&T.recursive!==!1,inside:!!C,overlapping:!!E,rect:P,path:E&&new Ne.Rectangle({rectangle:P,insert:!1})},T&&(d=o.filter({},d,{recursive:!0,inside:!0,overlapping:!0}))}var R=c._children,O=m.items,P=m.rect;g=P&&(g||new K);for(var A=0,U=R&&R.length;A<U;A++){var W=R[A],H=g&&g.appended(W._matrix),V=!0;if(P){var N=W.getBounds(H);if(!P.intersects(N))continue;P.contains(N)||m.overlapping&&(N.contains(P)||m.path.intersects(W,H))||(V=!1)}if(V&&W.matches(d)&&(O.push(W),w)||(m.recursive!==!1&&a(W,d,H,m,w),w&&O.length>0))break}return O}}},{importJSON:function(a){var c=o.importJSON(a,this);return c!==this?this.addChild(c):c},addChild:function(a){return this.insertChild(n,a)},insertChild:function(a,c){var d=c?this.insertChildren(a,[c]):null;return d&&d[0]},addChildren:function(a){return this.insertChildren(this._children.length,a)},insertChildren:function(a,c){var d=this._children;if(d&&c&&c.length>0){c=o.slice(c);for(var g={},m=c.length-1;m>=0;m--){var w=c[m],T=w&&w._id;!w||g[T]?c.splice(m,1):(w._remove(!1,!0),g[T]=!0)}o.splice(d,c,a,0);for(var E=this._project,C=E._changes,m=0,N=c.length;m<N;m++){var w=c[m],R=w._name;w._parent=this,w._setProject(E,!0),R&&w.setName(R),C&&w._changed(5)}this._changed(11)}else c=null;return c},_insertItem:"#insertChild",_insertAt:function(a,c){var d=a&&a._getOwner(),g=a!==this&&d?this:null;return g&&(g._remove(!1,!0),d._insertItem(a._index+c,g)),g},insertAbove:function(a){return this._insertAt(a,1)},insertBelow:function(a){return this._insertAt(a,0)},sendToBack:function(){var a=this._getOwner();return a?a._insertItem(0,this):null},bringToFront:function(){var a=this._getOwner();return a?a._insertItem(n,this):null},appendTop:"#addChild",appendBottom:function(a){return this.insertChild(0,a)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(a){return a._insertItem(n,this)},copyTo:function(a){return this.clone(!1).addTo(a)},reduce:function(a){var c=this._children;if(c&&c.length===1){var d=c[0].reduce(a);return this._parent?(d.insertAbove(this),this.remove()):d.remove(),d}return this},_removeNamed:function(){var a=this._getOwner();if(a){var c=a._children,d=a._namedChildren,g=this._name,m=d[g],w=m?m.indexOf(this):-1;w!==-1&&(c[g]==this&&delete c[g],m.splice(w,1),m.length?c[g]=m[0]:delete d[g])}},_remove:function(a,c){var d=this._getOwner(),g=this._project,m=this._index;return this._style&&this._style._dispose(),d?(this._name&&this._removeNamed(),m!=null&&(g._activeLayer===this&&(g._activeLayer=this.getNextSibling()||this.getPreviousSibling()),o.splice(d._children,null,m,1)),this._installEvents(!1),a&&g._changes&&this._changed(5),c&&d._changed(11,this),this._parent=null,!0):!1},remove:function(){return this._remove(!0,!0)},replaceWith:function(a){var c=a&&a.insertBelow(this);return c&&this.remove(),c},removeChildren:function(a,c){if(!this._children)return null;a=a||0,c=o.pick(c,this._children.length);for(var d=o.splice(this._children,null,a,c-a),g=d.length-1;g>=0;g--)d[g]._remove(!0,!1);return d.length>0&&this._changed(11),d},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var a=0,c=this._children.length;a<c;a++)this._children[a]._index=a;this._changed(11)}},isEmpty:function(a){var c=this._children,d=c?c.length:0;if(a){for(var g=0;g<d;g++)if(!c[g].isEmpty(a))return!1;return!0}return!d},isEditable:function(){for(var a=this;a;){if(!a._visible||a._locked)return!1;a=a._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(a){function c(T){var E=[];do E.unshift(T);while(T=T._parent);return E}for(var d=c(this),g=c(a),m=0,w=Math.min(d.length,g.length);m<w;m++)if(d[m]!=g[m])return d[m]._index<g[m]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return this._parent?this._parent.isInserted():!1},isAbove:function(a){return this._getOrder(a)===-1},isBelow:function(a){return this._getOrder(a)===1},isParent:function(a){return this._parent===a},isChild:function(a){return a&&a._parent===this},isDescendant:function(a){for(var c=this;c=c._parent;)if(c===a)return!0;return!1},isAncestor:function(a){return a?a.isDescendant(this):!1},isSibling:function(a){return this._parent===a._parent},isGroupedWith:function(a){for(var c=this._parent;c;){if(c._parent&&/^(Group|Layer|CompoundPath)$/.test(c._class)&&a.isDescendant(c))return!0;c=c._parent}return!1}},o.each(["rotate","scale","shear","skew"],function(a){var c=a==="rotate";this[a]=function(){var d=arguments,g=(c?o:I).read(d),m=I.read(d,0,{readNull:!0});return this.transform(new K()[a](g,m||this.getPosition(!0)))}},{translate:function(){var a=new K;return this.transform(a.translate.apply(a,arguments))},transform:function(a,c,d){var g=this._matrix,m=a&&!a.isIdentity(),w=d&&this._canApplyMatrix||this._applyMatrix&&(m||!g.isIdentity()||c&&this._children);if(!m&&!w)return this;if(m){!a.isInvertible()&&g.isInvertible()&&(g._backup=g.getValues()),g.prepend(a,!0);var T=this._style,E=T.getFillColor(!0),C=T.getStrokeColor(!0);E&&E.transform(a),C&&C.transform(a)}if(w&&(w=this._transformContent(g,c,d))){var N=this._pivot;N&&g._transformPoint(N,N,!0),g.reset(!0),d&&this._canApplyMatrix&&(this._applyMatrix=!0)}var R=this._bounds,O=this._position;(m||w)&&this._changed(25);var P=m&&R&&a.decompose();if(P&&P.skewing.isZero()&&P.rotation%90===0){for(var A in R){var U=R[A];if(U.nonscaling)delete R[A];else if(w||!U.internal){var W=U.rect;a._transformBounds(W,W)}}this._bounds=R;var H=R[this._getBoundsCacheKey(this._boundsOptions||{})];H&&(this._position=this._getPositionFromBounds(H.rect))}else m&&O&&this._pivot&&(this._position=a._transformPoint(O,O));return this},_transformContent:function(a,c,d){var g=this._children;if(g){for(var m=0,w=g.length;m<w;m++)g[m].transform(a,c,d);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(I.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(I.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(I.read(arguments))},localToParent:function(){return this._matrix._transformPoint(I.read(arguments))},fitBounds:function(a,c){a=z.read(arguments);var d=this.getBounds(),g=d.height/d.width,m=a.height/a.width,w=(c?g>m:g<m)?a.width/d.width:a.height/d.height,T=new z(new I,new D(d.width*w,d.height*w));T.setCenter(a.getCenter()),this.setBounds(T)}}),{_setStyles:function(a,c,d){var g=this._style,m=this._matrix;if(g.hasFill()&&(a.fillStyle=g.getFillColor().toCanvasStyle(a,m)),g.hasStroke()){a.strokeStyle=g.getStrokeColor().toCanvasStyle(a,m),a.lineWidth=g.getStrokeWidth();var w=g.getStrokeJoin(),T=g.getStrokeCap(),E=g.getMiterLimit();if(w&&(a.lineJoin=w),T&&(a.lineCap=T),E&&(a.miterLimit=E),At.support.nativeDash){var C=g.getDashArray(),N=g.getDashOffset();C&&C.length&&("setLineDash"in a?(a.setLineDash(C),a.lineDashOffset=N):(a.mozDash=C,a.mozDashOffset=N))}}if(g.hasShadow()){var R=c.pixelRatio||1,O=d._shiftless().prepend(new K().scale(R,R)),P=O.transform(new I(g.getShadowBlur(),0)),A=O.transform(this.getShadowOffset());a.shadowColor=g.getShadowColor().toCanvasStyle(a),a.shadowBlur=P.getLength(),a.shadowOffsetX=A.x,a.shadowOffsetY=A.y}},draw:function(a,c,d){if(this._updateVersion=this._project._updateVersion,!(!this._visible||this._opacity===0)){var g=c.matrices,m=c.viewMatrix,w=this._matrix,T=g[g.length-1].appended(w);if(T.isInvertible()){m=m?m.appended(T):T,g.push(T),c.updateMatrix&&(this._globalMatrix=T);var E=this._blendMode,C=b.clamp(this._opacity,0,1),N=E==="normal",R=wa.nativeModes[E],O=N&&C===1||c.dontStart||c.clip||(R||N&&C<1)&&this._canComposite(),P=c.pixelRatio||1,A,U,W;if(!O){var H=this.getStrokeBounds(m);if(!H.width||!H.height){g.pop();return}W=c.offset,U=c.offset=H.getTopLeft().floor(),A=a,a=Sn.getContext(H.getSize().ceil().add(1).multiply(P)),P!==1&&a.scale(P,P)}a.save();var V=d?d.appended(w):this._canScaleStroke&&!this.getStrokeScaling(!0)&&m,B=!O&&c.clipItem,k=!V||B;if(O?(a.globalAlpha=C,R&&(a.globalCompositeOperation=E)):k&&a.translate(-U.x,-U.y),k&&(O?w:m).applyToContext(a),B&&c.clipItem.draw(a,c.extend({clip:!0})),V){a.setTransform(P,0,0,P,0,0);var L=c.offset;L&&a.translate(-L.x,-L.y)}this._draw(a,c,m,V),a.restore(),g.pop(),c.clip&&!c.dontFinish&&a.clip(this.getFillRule()),O||(wa.process(E,a,A,C,U.subtract(W).multiply(P)),Sn.release(a),c.offset=W)}}},_isUpdated:function(a){var c=this._parent;if(c instanceof qe)return c._isUpdated(a);var d=this._updateVersion===a;return!d&&c&&c._visible&&c._isUpdated(a)&&(this._updateVersion=a,d=!0),d},_drawSelection:function(a,c,d,g,m){var w=this._selection,T=w&1,E=w&2||T&&this._selectBounds,C=w&4;if(this._drawSelected||(T=!1),(T||E||C)&&this._isUpdated(m)){var N,R=this.getSelectedColor(!0)||(N=this.getLayer())&&N.getSelectedColor(!0),O=c.appended(this.getGlobalMatrix(!0)),P=d/2;if(a.strokeStyle=a.fillStyle=R?R.toCanvasStyle(a):"#009dec",T&&this._drawSelected(a,O,g),C){var A=this.getPosition(!0),U=this._parent,W=U?U.localToGlobal(A):A,H=W.x,V=W.y;a.beginPath(),a.arc(H,V,P,0,Math.PI*2,!0),a.stroke();for(var B=[[0,-1],[1,0],[0,1],[-1,0]],k=P,L=d+1,q=0;q<4;q++){var $=B[q],Q=$[0],X=$[1];a.moveTo(H+Q*k,V+X*k),a.lineTo(H+Q*L,V+X*L),a.stroke()}}if(E){var J=O._transformCorners(this.getInternalBounds());a.beginPath();for(var q=0;q<8;q++)a[q?"lineTo":"moveTo"](J[q],J[++q]);a.closePath(),a.stroke();for(var q=0;q<8;q++)a.fillRect(J[q]-P,J[++q]-P,d,d)}}},_canComposite:function(){return!1}},o.each(["down","drag","up","move"],function(a){this["removeOn"+o.capitalize(a)]=function(){var c={};return c[a]=!0,this.removeOn(c)}},{removeOn:function(a){for(var c in a)if(a[c]){var d="mouse"+c,g=this._project,m=g._removeSets=g._removeSets||{};m[d]=m[d]||{},m[d][this._id]=this}return this}}),{tween:function(a,c,d){d||(d=c,c=a,a=null,d||(d=c,c=null));var g=d&&d.easing,m=d&&d.start,w=d!=null&&(typeof d=="number"?d:d.duration),T=new Xi(this,a,c,w,g,m);function E(C){T._handleFrame(C.time*1e3),T.running||this.off("frame",E)}return w&&this.on("frame",E),T},tweenTo:function(a,c){return this.tween(null,a,c)},tweenFrom:function(a,c){return this.tween(a,null,c)}}),me=fe.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(c){this._children=[],this._namedChildren={},this._initialize(c)||this.addChildren(Array.isArray(c)?c:arguments)},_changed:function a(c){a.base.call(this,c),c&2050&&(this._clipItem=n)},_getClipItem:function(){var a=this._clipItem;if(a===n){a=null;for(var c=this._children,d=0,g=c.length;d<g;d++)if(c[d]._clipMask){a=c[d];break}this._clipItem=a}return a},isClipped:function(){return!!this._getClipItem()},setClipped:function(a){var c=this.getFirstChild();c&&c.setClipMask(a)},_getBounds:function a(c,d){var g=this._getClipItem();return g?g._getCachedBounds(g._matrix.prepended(c),o.set({},d,{stroke:!1})):a.base.call(this,c,d)},_hitTestChildren:function a(c,d,g){var m=this._getClipItem();return(!m||m.contains(c))&&a.base.call(this,c,d,g,m)},_draw:function(a,c){var d=c.clip,g=!d&&this._getClipItem();c=c.extend({clipItem:g,clip:!1}),d?(a.beginPath(),c.dontStart=c.dontFinish=!0):g&&g.draw(a,c.extend({clip:!0}));for(var m=this._children,w=0,T=m.length;w<T;w++){var E=m[w];E!==g&&E.draw(a,c)}}}),he=me.extend({_class:"Layer",initialize:function(){me.apply(this,arguments)},_getOwner:function(){return this._parent||this._index!=null&&this._project},isInserted:function a(){return this._parent?a.base.call(this):this._index!=null},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),Z=fe.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(c,d){this._initialize(c,d)},_equals:function(a){return this._type===a._type&&this._size.equals(a._size)&&o.equals(this._radius,a._radius)},copyContent:function(a){this.setType(a._type),this.setSize(a._size),this.setRadius(a._radius)},getType:function(){return this._type},setType:function(a){this._type=a},getShape:"#getType",setShape:"#setType",getSize:function(){var a=this._size;return new ne(a.width,a.height,this,"setSize")},setSize:function(){var a=D.read(arguments);if(!this._size)this._size=a.clone();else if(!this._size.equals(a)){var c=this._type,d=a.width,g=a.height;c==="rectangle"?this._radius.set(D.min(this._radius,a.divide(2).abs())):c==="circle"?(d=g=(d+g)/2,this._radius=d/2):c==="ellipse"&&this._radius._set(d/2,g/2),this._size._set(d,g),this._changed(9)}},getRadius:function(){var a=this._radius;return this._type==="circle"?a:new ne(a.width,a.height,this,"setRadius")},setRadius:function(a){var c=this._type;if(c==="circle"){if(a===this._radius)return;var d=a*2;this._radius=a,this._size._set(d,d)}else if(a=D.read(arguments),!this._radius)this._radius=a.clone();else{if(this._radius.equals(a))return;if(this._radius.set(a),c==="rectangle"){var d=D.max(this._size,a.multiply(2));this._size.set(d)}else c==="ellipse"&&this._size._set(a.width*2,a.height*2)}this._changed(9)},isEmpty:function(){return!1},toPath:function(a){var c=new Ne[o.capitalize(this._type)]({center:new I,size:this._size,radius:this._radius,insert:!1});return c.copyAttributes(this),At.settings.applyMatrix&&c.setApplyMatrix(!0),(a===n||a)&&c.insertAbove(this),c},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(a,c,d,g){var m=this._style,w=m.hasFill(),T=m.hasStroke(),E=c.dontFinish||c.clip,C=!g;if(w||T||E){var N=this._type,R=this._radius,O=N==="circle";if(c.dontStart||a.beginPath(),C&&O)a.arc(0,0,R,0,Math.PI*2,!0);else{var P=O?R:R.width,A=O?R:R.height,U=this._size,W=U.width,H=U.height;if(C&&N==="rectangle"&&P===0&&A===0)a.rect(-W/2,-H/2,W,H);else{var V=W/2,B=H/2,k=1-.5522847498307936,L=P*k,q=A*k,$=[-V,-B+A,-V,-B+q,-V+L,-B,-V+P,-B,V-P,-B,V-L,-B,V,-B+q,V,-B+A,V,B-A,V,B-q,V-L,B,V-P,B,-V+P,B,-V+L,B,-V,B-q,-V,B-A];g&&g.transform($,$,32),a.moveTo($[0],$[1]),a.bezierCurveTo($[2],$[3],$[4],$[5],$[6],$[7]),V!==P&&a.lineTo($[8],$[9]),a.bezierCurveTo($[10],$[11],$[12],$[13],$[14],$[15]),B!==A&&a.lineTo($[16],$[17]),a.bezierCurveTo($[18],$[19],$[20],$[21],$[22],$[23]),V!==P&&a.lineTo($[24],$[25]),a.bezierCurveTo($[26],$[27],$[28],$[29],$[30],$[31])}}a.closePath()}!E&&(w||T)&&(this._setStyles(a,c,d),w&&(a.fill(m.getFillRule()),a.shadowColor="rgba(0,0,0,0)"),T&&a.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(a,c){var d=new z(this._size).setCenter(0,0),g=this._style,m=c.stroke&&g.hasStroke()&&g.getStrokeWidth();return a&&(d=a._transformBounds(d)),m?d.expand(Ne._getStrokePadding(m,this._getStrokeMatrix(a,c))):d}},new function(){function a(d,g,m){var w=d._radius;if(!w.isZero())for(var T=d._size.divide(2),E=1;E<=4;E++){var C=new I(E>1&&E<4?-1:1,E>2?-1:1),N=C.multiply(T),R=N.subtract(C.multiply(w)),O=new z(m?N.add(C.multiply(m)):N,R);if(O.contains(g))return{point:R,quadrant:E}}}function c(d,g,m,w){var T=d.divide(g);return(!w||T.isInQuadrant(w))&&T.subtract(T.normalize()).multiply(g).divide(m).length<=1}return{_contains:function d(g){if(this._type==="rectangle"){var m=a(this,g);return m?g.subtract(m.point).divide(this._radius).getLength()<=1:d.base.call(this,g)}else return g.divide(this.size).getLength()<=.5},_hitTestSelf:function d(g,m,w,T){var E=!1,C=this._style,N=m.stroke&&C.hasStroke(),R=m.fill&&C.hasFill();if(N||R){var O=this._type,P=this._radius,A=N?C.getStrokeWidth()/2:0,U=m._tolerancePadding.add(Ne._getStrokePadding(A,!C.getStrokeScaling()&&T));if(O==="rectangle"){var W=U.multiply(2),H=a(this,g,W);if(H)E=c(g.subtract(H.point),P,U,H.quadrant);else{var V=new z(this._size).setCenter(0,0),B=V.expand(W),k=V.expand(W.negate());E=B._containsPoint(g)&&!k._containsPoint(g)}}else E=c(g,P,U)}return E?new ft(N?"stroke":"fill",this):d.base.apply(this,arguments)}}},{statics:new function(){function a(c,d,g,m,w){var T=o.create(Z.prototype);return T._type=c,T._size=g,T._radius=m,T._initialize(o.getNamed(w),d),T}return{Circle:function(){var c=arguments,d=I.readNamed(c,"center"),g=o.readNamed(c,"radius");return a("circle",d,new D(g*2),g,c)},Rectangle:function(){var c=arguments,d=z.readNamed(c,"rectangle"),g=D.min(D.readNamed(c,"radius"),d.getSize(!0).divide(2));return a("rectangle",d.getCenter(!0),d.getSize(!0),g,c)},Ellipse:function(){var c=arguments,d=Z._readEllipse(c),g=d.radius;return a("ellipse",d.center,g.multiply(2),g,c)},_readEllipse:function(c){var d,g;if(o.hasNamed(c,"radius"))d=I.readNamed(c,"center"),g=D.readNamed(c,"radius");else{var m=z.readNamed(c,"rectangle");d=m.getCenter(!0),g=m.getSize(!0).divide(2)}return{center:d,radius:g}}}}}),Se=fe.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:"low",beans:!0,initialize:function(c,d){if(!this._initialize(c,d!==n&&I.read(arguments))){var g,m=typeof c,w=m==="string"?i.getElementById(c):m==="object"?c:null;if(w&&w!==fe.NO_INSERT){if(w.getContext||w.naturalHeight!=null)g=w;else if(w){var T=D.read(arguments);T.isZero()||(g=Sn.getCanvas(T))}}g?this.setImage(g):this.setSource(c)}this._size||(this._size=new D,this._loaded=!1)},_equals:function(a){return this.getSource()===a.getSource()},copyContent:function(a){var c=a._image,d=a._canvas;if(c)this._setImage(c);else if(d){var g=Sn.getCanvas(a._size);g.getContext("2d").drawImage(d,0,0),this._setImage(g)}this._crossOrigin=a._crossOrigin},getSize:function(){var a=this._size;return new ne(a?a.width:0,a?a.height:0,this,"setSize")},setSize:function(a,c){var d=D.read(arguments);if(d.equals(this._size))c&&this.clear();else if(d.width>0&&d.height>0){var g=!c&&this.getElement();this._setImage(Sn.getCanvas(d)),g&&this.getContext(!0).drawImage(g,0,0,d.width,d.height)}else this._canvas&&Sn.release(this._canvas),this._size=d.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(a){this.setSize(a,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(a){this.setSize(this.getWidth(),a)},getLoaded:function(){return this._loaded},isEmpty:function(){var a=this._size;return!a||a.width===0&&a.height===0},getResolution:function(){var a=this._matrix,c=new I(0,0).transform(a),d=new I(1,0).transform(a).subtract(c),g=new I(0,1).transform(a).subtract(c);return new D(72/d.getLength(),72/g.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(a){var c=this;function d(g){var m=c.getView(),w=g&&g.type||"load";m&&c.responds(w)&&(At=m._scope,c.emit(w,new De(g)))}this._setImage(a),this._loaded?setTimeout(d,0):a&&ve.add(a,{load:function(g){c._setImage(a),d(g)},error:d})},_setImage:function(a){this._canvas&&Sn.release(this._canvas),a&&a.getContext?(this._image=null,this._canvas=a,this._loaded=!0):(this._image=a,this._canvas=null,this._loaded=!!(a&&a.src&&a.complete)),this._size=new D(a?a.naturalWidth||a.width:0,a?a.naturalHeight||a.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var a=Sn.getContext(this._size);try{this._image&&a.drawImage(this._image,0,0),this._canvas=a.canvas}catch{Sn.release(a)}}return this._canvas},setCanvas:"#setImage",getContext:function(a){return this._context||(this._context=this.getCanvas().getContext("2d")),a&&(this._image=null,this._changed(1025)),this._context},setContext:function(a){this._context=a},getSource:function(){var a=this._image;return a&&a.src||this.toDataURL()},setSource:function(a){var c=new e.Image,d=this._crossOrigin;d&&(c.crossOrigin=d),a&&(c.src=a),this.setImage(c)},getCrossOrigin:function(){var a=this._image;return a&&a.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(a){this._crossOrigin=a;var c=this._image;c&&(c.crossOrigin=a)},getSmoothing:function(){return this._smoothing},setSmoothing:function(a){this._smoothing=typeof a=="string"?a:a?"low":"off",this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var a=z.read(arguments),c=Sn.getContext(a.getSize());return c.drawImage(this.getCanvas(),a.x,a.y,a.width,a.height,0,0,a.width,a.height),c.canvas},getSubRaster:function(){var a=z.read(arguments),c=new Se(fe.NO_INSERT);return c._setImage(this.getSubCanvas(a)),c.translate(a.getCenter().subtract(this.getSize().divide(2))),c._matrix.prepend(this._matrix),c.insertAbove(this),c},toDataURL:function(){var a=this._image,c=a&&a.src;if(/^data:/.test(c))return c;var d=this.getCanvas();return d?d.toDataURL.apply(d,arguments):null},drawImage:function(a){var c=I.read(arguments,1);this.getContext(!0).drawImage(a,c.x,c.y)},getAverageColor:function(a){var c,d;if(a?a instanceof Fe?(d=a,c=a.getBounds()):typeof a=="object"&&("width"in a?c=new z(a):"x"in a&&(c=new z(a.x-.5,a.y-.5,1,1))):c=this.getBounds(),!c)return null;var g=32,m=Math.min(c.width,g),w=Math.min(c.height,g),T=Se._sampleContext;T?T.clearRect(0,0,g+1,g+1):T=Se._sampleContext=Sn.getContext(new D(g)),T.save();var E=new K().scale(m/c.width,w/c.height).translate(-c.x,-c.y);E.applyToContext(T),d&&d.draw(T,new o({clip:!0,matrices:[E]})),this._matrix.applyToContext(T);var C=this.getElement(),N=this._size;C&&T.drawImage(C,-N.width/2,-N.height/2),T.restore();for(var R=T.getImageData(.5,.5,Math.ceil(m),Math.ceil(w)).data,O=[0,0,0],P=0,A=0,U=R.length;A<U;A+=4){var W=R[A+3];P+=W,W/=255,O[0]+=R[A]*W,O[1]+=R[A+1]*W,O[2]+=R[A+2]*W}for(var A=0;A<3;A++)O[A]/=P;return P?zt.read(O):null},getPixel:function(){var a=I.read(arguments),c=this.getContext().getImageData(a.x,a.y,1,1).data;return new zt("rgb",[c[0]/255,c[1]/255,c[2]/255],c[3]/255)},setPixel:function(){var a=arguments,c=I.read(a),d=zt.read(a),g=d._convert("rgb"),m=d._alpha,w=this.getContext(!0),T=w.createImageData(1,1),E=T.data;E[0]=g[0]*255,E[1]=g[1]*255,E[2]=g[2]*255,E[3]=m!=null?m*255:255,w.putImageData(T,c.x,c.y)},clear:function(){var a=this._size;this.getContext(!0).clearRect(0,0,a.width+1,a.height+1)},createImageData:function(){var a=D.read(arguments);return this.getContext().createImageData(a.width,a.height)},getImageData:function(){var a=z.read(arguments);return a.isEmpty()&&(a=new z(this._size)),this.getContext().getImageData(a.x,a.y,a.width,a.height)},putImageData:function(a){var c=I.read(arguments,1);this.getContext(!0).putImageData(a,c.x,c.y)},setImageData:function(a){this.setSize(a),this.getContext(!0).putImageData(a,0,0)},_getBounds:function(a,c){var d=new z(this._size).setCenter(0,0);return a?a._transformBounds(d):d},_hitTestSelf:function(a){if(this._contains(a)){var c=this;return new ft("pixel",c,{offset:a.add(c._size.divide(2)).round(),color:{get:function(){return c.getPixel(this.offset)}}})}},_draw:function(a,c,d){var g=this.getElement();if(g&&g.width>0&&g.height>0){a.globalAlpha=b.clamp(this._opacity,0,1),this._setStyles(a,c,d);var m=this._smoothing,w=m==="off";ce.setPrefixed(a,w?"imageSmoothingEnabled":"imageSmoothingQuality",w?!1:m),a.drawImage(g,-this._size.width/2,-this._size.height/2)}},_canComposite:function(){return!0}}),Ue=fe.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(c,d){this._initialize(c,d!==n&&I.read(arguments,1))||this.setDefinition(c instanceof Ge?c:new Ge(c))},_equals:function(a){return this._definition===a._definition},copyContent:function(a){this.setDefinition(a._definition)},getDefinition:function(){return this._definition},setDefinition:function(a){this._definition=a,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(a,c){var d=this._definition._item;return d._getCachedBounds(d._matrix.prepended(a),c)},_hitTestSelf:function(a,c,d){var g=c.extend({all:!1}),m=this._definition._item._hitTest(a,g,d);return m&&(m.item=this),m},_draw:function(a,c){this._definition._item.draw(a,c)}}),Ge=o.extend({_class:"SymbolDefinition",initialize:function(c,d){this._id=S.get(),this.project=At.project,c&&this.setItem(c,d)},_serialize:function(a,c){return c.add(this,function(){return o.serialize([this._class,this._item],a,!1,c)})},_changed:function(a){a&8&&fe._clearBoundsCache(this),a&1&&this.project._changed(a)},getItem:function(){return this._item},setItem:function(a,c){a._symbol&&(a=a.clone()),this._item&&(this._item._symbol=null),this._item=a,a.remove(),a.setSelected(!1),c||a.setPosition(new I),a._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(a){return new Ue(this,a)},clone:function(){return new Ge(this._item.clone(!1))},equals:function(a){return a===this||a&&this._item.equals(a._item)||!1}}),ft=o.extend({_class:"HitResult",initialize:function(c,d,g){this.type=c,this.item=d,g&&this.inject(g)},statics:{getOptions:function(a){var c=a&&o.read(a);return new o({type:null,tolerance:At.settings.hitTolerance,fill:!c,stroke:!c,segments:!c,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},c)}}}),Ae=o.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(c,d,g,m,w,T){var E=arguments.length,C,N,R,O;E>0&&(c==null||typeof c=="object"?E===1&&c&&"point"in c?(C=c.point,N=c.handleIn,R=c.handleOut,O=c.selection):(C=c,N=d,R=g,O=m):(C=[c,d],N=g!==n?[g,m]:null,R=w!==n?[w,T]:null)),new tt(C,this,"_point"),new tt(N,this,"_handleIn"),new tt(R,this,"_handleOut"),O&&this.setSelection(O)},_serialize:function(a,c){var d=this._point,g=this._selection,m=g||this.hasHandles()?[d,this._handleIn,this._handleOut]:d;return g&&m.push(g),o.serialize(m,a,!0,c)},_changed:function(a){var c=this._path;if(c){var d=c._curves,g=this._index,m;d&&((!a||a===this._point||a===this._handleIn)&&(m=g>0?d[g-1]:c._closed?d[d.length-1]:null)&&m._changed(),(!a||a===this._point||a===this._handleOut)&&(m=d[g])&&m._changed()),c._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(I.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(I.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(I.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var a=this._handleIn,c=this._handleOut;return!a.isZero()&&!c.isZero()&&a.isCollinear(c)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(a){var c=this._selection,d=this._path;this._selection=a=a||0,d&&a!==c&&(d._updateSelection(this,c,a),d._changed(257))},_changeSelection:function(a,c){var d=this._selection;this.setSelection(c?d|a:d&~a)},isSelected:function(){return!!(this._selection&7)},setSelected:function(a){this._changeSelection(7,a)},getIndex:function(){return this._index!==n?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var a=this._path,c=this._index;return a?(c>0&&!a._closed&&c===a._segments.length-1&&c--,a.getCurves()[c]||null):null},getLocation:function(){var a=this.getCurve();return a?new Ut(a,this===a._segment1?0:1):null},getNext:function(){var a=this._path&&this._path._segments;return a&&(a[this._index+1]||this._path._closed&&a[0])||null},smooth:function(a,c,d){var g=a||{},m=g.type,w=g.factor,T=this.getPrevious(),E=this.getNext(),C=(T||this)._point,N=this._point,R=(E||this)._point,O=C.getDistance(N),P=N.getDistance(R);if(!m||m==="catmull-rom"){var A=w===n?.5:w,U=Math.pow(O,A),W=U*U,H=Math.pow(P,A),V=H*H;if(!c&&T){var B=2*V+3*H*U+W,k=3*H*(H+U);this.setHandleIn(k!==0?new I((V*C._x+B*N._x-W*R._x)/k-N._x,(V*C._y+B*N._y-W*R._y)/k-N._y):new I)}if(!d&&E){var B=2*W+3*U*H+V,k=3*U*(U+H);this.setHandleOut(k!==0?new I((W*R._x+B*N._x-V*C._x)/k-N._x,(W*R._y+B*N._y-V*C._y)/k-N._y):new I)}}else if(m==="geometric"){if(T&&E){var L=C.subtract(R),q=w===n?.4:w,$=q*O/(O+P);c||this.setHandleIn(L.multiply($)),d||this.setHandleOut(L.multiply($-q))}}else throw new Error("Smoothing method '"+m+"' not supported.")},getPrevious:function(){var a=this._path&&this._path._segments;return a&&(a[this._index-1]||this._path._closed&&a[a.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var a=this._path;return a&&this._index===a._segments.length-1||!1},reverse:function(){var a=this._handleIn,c=this._handleOut,d=a.clone();a.set(c),c.set(d)},reversed:function(){return new Ae(this._point,this._handleOut,this._handleIn)},remove:function(){return this._path?!!this._path.removeSegment(this._index):!1},clone:function(){return new Ae(this._point,this._handleIn,this._handleOut)},equals:function(a){return a===this||a&&this._class===a._class&&this._point.equals(a._point)&&this._handleIn.equals(a._handleIn)&&this._handleOut.equals(a._handleOut)||!1},toString:function(){var a=["point: "+this._point];return this._handleIn.isZero()||a.push("handleIn: "+this._handleIn),this._handleOut.isZero()||a.push("handleOut: "+this._handleOut),"{ "+a.join(", ")+" }"},transform:function(a){this._transformCoordinates(a,new Array(6),!0),this._changed()},interpolate:function(a,c,d){var g=1-d,m=d,w=a._point,T=c._point,E=a._handleIn,C=c._handleIn,N=c._handleOut,R=a._handleOut;this._point._set(g*w._x+m*T._x,g*w._y+m*T._y,!0),this._handleIn._set(g*E._x+m*C._x,g*E._y+m*C._y,!0),this._handleOut._set(g*R._x+m*N._x,g*R._y+m*N._y,!0),this._changed()},_transformCoordinates:function(a,c,d){var g=this._point,m=!d||!this._handleIn.isZero()?this._handleIn:null,w=!d||!this._handleOut.isZero()?this._handleOut:null,T=g._x,E=g._y,C=2;return c[0]=T,c[1]=E,m&&(c[C++]=m._x+T,c[C++]=m._y+E),w&&(c[C++]=w._x+T,c[C++]=w._y+E),a&&(a._transformCoordinates(c,c,C/2),T=c[0],E=c[1],d?(g._x=T,g._y=E,C=2,m&&(m._x=c[C++]-T,m._y=c[C++]-E),w&&(w._x=c[C++]-T,w._y=c[C++]-E)):(m||(c[C++]=T,c[C++]=E),w||(c[C++]=T,c[C++]=E))),c}}),tt=I.extend({initialize:function(c,d,g){var m,w,T;if(!c)m=w=0;else if((m=c[0])!==n)w=c[1];else{var E=c;(m=E.x)===n&&(E=I.read(arguments),m=E.x),w=E.y,T=E.selected}this._x=m,this._y=w,this._owner=d,d[g]=this,T&&this.setSelected(!0)},_set:function(a,c){return this._x=a,this._y=c,this._owner._changed(this),this},getX:function(){return this._x},setX:function(a){this._x=a,this._owner._changed(this)},getY:function(){return this._y},setY:function(a){this._y=a,this._owner._changed(this)},isZero:function(){var a=b.isZero;return a(this._x)&&a(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(a){this._owner._changeSelection(this._getSelection(),a)},_getSelection:function(){var a=this._owner;return this===a._point?1:this===a._handleIn?2:this===a._handleOut?4:0}}),Ce=o.extend({_class:"Curve",beans:!0,initialize:function(c,d,g,m,w,T,E,C){var N=arguments.length,R,O,P,A,U,W;N===3?(this._path=c,R=d,O=g):N?N===1?"segment1"in c?(R=new Ae(c.segment1),O=new Ae(c.segment2)):"point1"in c?(P=c.point1,U=c.handle1,W=c.handle2,A=c.point2):Array.isArray(c)&&(P=[c[0],c[1]],A=[c[6],c[7]],U=[c[2]-c[0],c[3]-c[1]],W=[c[4]-c[6],c[5]-c[7]]):N===2?(R=new Ae(c),O=new Ae(d)):N===4?(P=c,U=d,W=g,A=m):N===8&&(P=[c,d],A=[E,C],U=[g-c,m-d],W=[w-E,T-C]):(R=new Ae,O=new Ae),this._segment1=R||new Ae(P,null,U),this._segment2=O||new Ae(A,W,null)},_serialize:function(a,c){return o.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],a,!0,c)},_changed:function(){this._length=this._bounds=n},clone:function(){return new Ce(this._segment1,this._segment2)},toString:function(){var a=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||a.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||a.push("handle2: "+this._segment2._handleIn),a.push("point2: "+this._segment2._point),"{ "+a.join(", ")+" }"},classify:function(){return Ce.classify(this.getValues())},remove:function(){var a=!1;if(this._path){var c=this._segment2,d=c._handleOut;a=c.remove(),a&&this._segment1._handleOut.set(d)}return a},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(I.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(I.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(I.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(I.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var a=this._path&&this._path._curves;return a&&(a[this._segment1._index+1]||this._path._closed&&a[0])||null},getPrevious:function(){var a=this._path&&this._path._curves;return a&&(a[this._segment1._index-1]||this._path._closed&&a[a.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var a=this._path;return a&&this._segment1._index===a._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(a){this.getPoint1().setSelected(a),this.getHandle1().setSelected(a),this.getHandle2().setSelected(a),this.getPoint2().setSelected(a)},getValues:function(a){return Ce.getValues(this._segment1,this._segment2,a)},getPoints:function(){for(var a=this.getValues(),c=[],d=0;d<8;d+=2)c.push(new I(a[d],a[d+1]));return c}},{getLength:function(){return this._length==null&&(this._length=Ce.getLength(this.getValues(),0,1)),this._length},getArea:function(){return Ce.getArea(this.getValues())},getLine:function(){return new ue(this._segment1._point,this._segment2._point)},getPart:function(a,c){return new Ce(Ce.getPart(this.getValues(),a,c))},getPartLength:function(a,c){return Ce.getLength(this.getValues(),a,c)},divideAt:function(a){return this.divideAtTime(a&&a.curve===this?a.time:this.getTimeAt(a))},divideAtTime:function(a,c){var d=1e-8,g=1-d,m=null;if(a>=d&&a<=g){var w=Ce.subdivide(this.getValues(),a),T=w[0],E=w[1],C=c||this.hasHandles(),N=this._segment1,R=this._segment2,O=this._path;C&&(N._handleOut._set(T[2]-T[0],T[3]-T[1]),R._handleIn._set(E[4]-E[6],E[5]-E[7]));var P=T[6],A=T[7],U=new Ae(new I(P,A),C&&new I(T[4]-P,T[5]-A),C&&new I(E[2]-P,E[3]-A));O?(O.insert(N._index+1,U),m=this.getNext()):(this._segment2=U,this._changed(),m=new Ce(U,R))}return m},splitAt:function(a){var c=this._path;return c?c.splitAt(a):null},splitAtTime:function(a){return this.splitAt(this.getLocationAtTime(a))},divide:function(a,c){return this.divideAtTime(a===n?.5:c?a:this.getTimeAt(a))},split:function(a,c){return this.splitAtTime(a===n?.5:c?a:this.getTimeAt(a))},reversed:function(){return new Ce(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(a,c,d,g){var m=a._point,w=a._handleOut,T=c._handleIn,E=c._point,C=m.x,N=m.y,R=E.x,O=E.y,P=g?[C,N,C,N,R,O,R,O]:[C,N,C+w._x,N+w._y,R+T._x,O+T._y,R,O];return d&&d._transformCoordinates(P,P,4),P},subdivide:function(a,c){var d=a[0],g=a[1],m=a[2],w=a[3],T=a[4],E=a[5],C=a[6],N=a[7];c===n&&(c=.5);var R=1-c,O=R*d+c*m,P=R*g+c*w,A=R*m+c*T,U=R*w+c*E,W=R*T+c*C,H=R*E+c*N,V=R*O+c*A,B=R*P+c*U,k=R*A+c*W,L=R*U+c*H,q=R*V+c*k,$=R*B+c*L;return[[d,g,O,P,V,B,q,$],[q,$,k,L,W,H,C,N]]},getMonoCurves:function(a,c){var d=[],g=c?0:1,m=a[g+0],w=a[g+2],T=a[g+4],E=a[g+6];if(m>=w==w>=T&&w>=T==T>=E||Ce.isStraight(a))d.push(a);else{var C=3*(w-T)-m+E,N=2*(m+T)-4*w,R=w-m,O=1e-8,P=1-O,A=[],U=b.solveQuadratic(C,N,R,A,O,P);if(!U)d.push(a);else{A.sort();var W=A[0],H=Ce.subdivide(a,W);d.push(H[0]),U>1&&(W=(A[1]-W)/(1-W),H=Ce.subdivide(H[1],W),d.push(H[0])),d.push(H[1])}}return d},solveCubic:function(a,c,d,g,m,w){var T=a[c],E=a[c+2],C=a[c+4],N=a[c+6],R=0;if(!(T<d&&N<d&&E<d&&C<d||T>d&&N>d&&E>d&&C>d)){var O=3*(E-T),P=3*(C-E)-O,A=N-T-O-P;R=b.solveCubic(A,P,O,T-d,g,m,w)}return R},getTimeOf:function(a,c){var d=new I(a[0],a[1]),g=new I(a[6],a[7]),m=1e-12,w=1e-7,T=c.isClose(d,m)?0:c.isClose(g,m)?1:null;if(T===null)for(var E=[c.x,c.y],C=[],N=0;N<2;N++)for(var R=Ce.solveCubic(a,N,E[N],C,0,1),O=0;O<R;O++){var P=C[O];if(c.isClose(Ce.getPoint(a,P),w))return P}return c.isClose(d,w)?0:c.isClose(g,w)?1:null},getNearestTime:function(a,c){if(Ce.isStraight(a)){var d=a[0],g=a[1],m=a[6],w=a[7],T=m-d,E=w-g,C=T*T+E*E;if(C===0)return 0;var N=((c.x-d)*T+(c.y-g)*E)/C;return N<1e-12?0:N>.999999999999?1:Ce.getTimeOf(a,new I(d+N*T,g+N*E))}var R=100,O=1/0,P=0;function A(H){if(H>=0&&H<=1){var V=c.getDistance(Ce.getPoint(a,H),!0);if(V<O)return O=V,P=H,!0}}for(var U=0;U<=R;U++)A(U/R);for(var W=1/(R*2);W>1e-8;)!A(P-W)&&!A(P+W)&&(W/=2);return P},getPart:function(a,c,d){var g=c>d;if(g){var m=c;c=d,d=m}return c>0&&(a=Ce.subdivide(a,c)[1]),d<1&&(a=Ce.subdivide(a,(d-c)/(1-c))[0]),g?[a[6],a[7],a[4],a[5],a[2],a[3],a[0],a[1]]:a},isFlatEnough:function(a,c){var d=a[0],g=a[1],m=a[2],w=a[3],T=a[4],E=a[5],C=a[6],N=a[7],R=3*m-2*d-C,O=3*w-2*g-N,P=3*T-2*C-d,A=3*E-2*N-g;return Math.max(R*R,P*P)+Math.max(O*O,A*A)<=16*c*c},getArea:function(a){var c=a[0],d=a[1],g=a[2],m=a[3],w=a[4],T=a[5],E=a[6],C=a[7];return 3*((C-d)*(g+w)-(E-c)*(m+T)+m*(c-w)-g*(d-T)+C*(w+c/3)-E*(T+d/3))/20},getBounds:function(a){for(var c=a.slice(0,2),d=c.slice(),g=[0,0],m=0;m<2;m++)Ce._addBounds(a[m],a[m+2],a[m+4],a[m+6],m,0,c,d,g);return new z(c[0],c[1],d[0]-c[0],d[1]-c[1])},_addBounds:function(a,c,d,g,m,w,T,E,C){function N(q,$){var Q=q-$,X=q+$;Q<T[m]&&(T[m]=Q),X>E[m]&&(E[m]=X)}w/=2;var R=T[m]+w,O=E[m]-w;if(a<R||c<R||d<R||g<R||a>O||c>O||d>O||g>O)if(c<a!=c<g&&d<a!=d<g)N(a,0),N(g,0);else{var P=3*(c-d)-a+g,A=2*(a+d)-4*c,U=c-a,W=b.solveQuadratic(P,A,U,C),H=1e-8,V=1-H;N(g,0);for(var B=0;B<W;B++){var k=C[B],L=1-k;H<=k&&k<=V&&N(L*L*L*a+3*L*L*k*c+3*L*k*k*d+k*k*k*g,w)}}}}},o.each(["getBounds","getStrokeBounds","getHandleBounds"],function(a){this[a]=function(){this._bounds||(this._bounds={});var c=this._bounds[a];return c||(c=this._bounds[a]=Ne[a]([this._segment1,this._segment2],!1,this._path)),c.clone()}},{}),o.each({isStraight:function(a,c,d,g){if(c.isZero()&&d.isZero())return!0;var m=g.subtract(a);if(m.isZero())return!1;if(m.isCollinear(c)&&m.isCollinear(d)){var w=new ue(a,g),T=1e-7;if(w.getDistance(a.add(c))<T&&w.getDistance(g.add(d))<T){var E=m.dot(m),C=m.dot(c)/E,N=m.dot(d)/E;return C>=0&&C<=1&&N<=0&&N>=-1}}return!1},isLinear:function(a,c,d,g){var m=g.subtract(a).divide(3);return c.equals(m)&&d.negate().equals(m)}},function(a,c){this[c]=function(d){var g=this._segment1,m=this._segment2;return a(g._point,g._handleOut,m._handleIn,m._point,d)},this.statics[c]=function(d,g){var m=d[0],w=d[1],T=d[6],E=d[7];return a(new I(m,w),new I(d[2]-m,d[3]-w),new I(d[4]-T,d[5]-E),new I(T,E),g)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(a){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(a||0)},isCollinear:function(a){return a&&this.isStraight()&&a.isStraight()&&this.getLine().isCollinear(a.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(a,c){return this.getLocationAtTime(c?a:this.getTimeAt(a))},getLocationAtTime:function(a){return a!=null&&a>=0&&a<=1?new Ut(this,a):null},getTimeAt:function(a,c){return Ce.getTimeAt(this.getValues(),a,c)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var a=I.read(arguments);return a.isZero()?[]:Ce.getTimesWithTangent(this.getValues(),a)},getOffsetAtTime:function(a){return this.getPartLength(0,a)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(I.read(arguments)))},getOffsetOf:function(){var a=this.getLocationOf.apply(this,arguments);return a?a.getOffset():null},getTimeOf:function(){return Ce.getTimeOf(this.getValues(),I.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var a=I.read(arguments),c=this.getValues(),d=Ce.getNearestTime(c,a),g=Ce.getPoint(c,d);return new Ut(this,d,g,null,a.getDistance(g))},getNearestPoint:function(){var a=this.getNearestLocation.apply(this,arguments);return a&&a.getPoint()}},new function(){var a=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return o.each(a,function(c){this[c+"At"]=function(d,g){var m=this.getValues();return Ce[c](m,g?d:Ce.getTimeAt(m,d))},this[c+"AtTime"]=function(d){return Ce[c](this.getValues(),d)}},{statics:{_evaluateMethods:a}})},new function(){function a(g){var m=g[0],w=g[1],T=g[2],E=g[3],C=g[4],N=g[5],R=g[6],O=g[7],P=9*(T-C)+3*(R-m),A=6*(m+C)-12*T,U=3*(T-m),W=9*(E-N)+3*(O-w),H=6*(w+N)-12*E,V=3*(E-w);return function(B){var k=(P*B+A)*B+U,L=(W*B+H)*B+V;return Math.sqrt(k*k+L*L)}}function c(g,m){return Math.max(2,Math.min(16,Math.ceil(Math.abs(m-g)*32)))}function d(g,m,w,T){if(m==null||m<0||m>1)return null;var E=g[0],C=g[1],N=g[2],R=g[3],O=g[4],P=g[5],A=g[6],U=g[7],W=b.isZero;W(N-E)&&W(R-C)&&(N=E,R=C),W(O-A)&&W(P-U)&&(O=A,P=U);var H=3*(N-E),V=3*(O-N)-H,B=A-E-H-V,k=3*(R-C),L=3*(P-R)-k,q=U-C-k-L,$,Q;if(w===0)$=m===0?E:m===1?A:((B*m+V)*m+H)*m+E,Q=m===0?C:m===1?U:((q*m+L)*m+k)*m+C;else{var X=1e-8,J=1-X;if(m<X?($=H,Q=k):m>J?($=3*(A-O),Q=3*(U-P)):($=(3*B*m+2*V)*m+H,Q=(3*q*m+2*L)*m+k),T){$===0&&Q===0&&(m<X||m>J)&&($=O-N,Q=P-R);var te=Math.sqrt($*$+Q*Q);te&&($/=te,Q/=te)}if(w===3){var O=6*B*m+2*V,P=6*q*m+2*L,se=Math.pow($*$+Q*Q,3/2);$=se!==0?($*P-Q*O)/se:0,Q=0}}return w===2?new I(Q,-$):new I($,Q)}return{statics:{classify:function(g){var m=g[0],w=g[1],T=g[2],E=g[3],C=g[4],N=g[5],R=g[6],O=g[7],P=m*(O-N)+w*(C-R)+R*N-O*C,A=T*(w-O)+E*(R-m)+m*O-w*R,U=C*(E-w)+N*(m-T)+T*w-E*m,W=3*U,H=W-A,V=H-A+P,B=Math.sqrt(V*V+H*H+W*W),k=B!==0?1/B:0,L=b.isZero,q="serpentine";V*=k,H*=k,W*=k;function $(te,se,ie){var ae=se!==n,le=ae&&se>0&&se<1,de=ae&&ie>0&&ie<1;return ae&&(!(le||de)||te==="loop"&&!(le&&de))&&(te="arch",le=de=!1),{type:te,roots:le||de?le&&de?se<ie?[se,ie]:[ie,se]:[le?se:ie]:null}}if(L(V))return L(H)?$(L(W)?"line":"quadratic"):$(q,W/(3*H));var Q=3*H*H-4*V*W;if(L(Q))return $("cusp",H/(2*V));var X=Q>0?Math.sqrt(Q/3):Math.sqrt(-Q),J=2*V;return $(Q>0?q:"loop",(H+X)/J,(H-X)/J)},getLength:function(g,m,w,T){if(m===n&&(m=0),w===n&&(w=1),Ce.isStraight(g)){var E=g;w<1&&(E=Ce.subdivide(E,w)[0],m/=w),m>0&&(E=Ce.subdivide(E,m)[1]);var C=E[6]-E[0],N=E[7]-E[1];return Math.sqrt(C*C+N*N)}return b.integrate(T||a(g),m,w,c(m,w))},getTimeAt:function(g,m,w){if(w===n&&(w=m<0?1:0),m===0)return w;var T=Math.abs,E=1e-12,C=m>0,N=C?w:0,R=C?1:w,O=a(g),P=Ce.getLength(g,N,R,O),A=T(m)-P;if(T(A)<E)return C?R:N;if(A>E)return null;var U=m/P,W=0;function H(V){return W+=b.integrate(O,w,V,c(w,V)),w=V,W-m}return b.findRoot(H,O,w+U,N,R,32,1e-12)},getPoint:function(g,m){return d(g,m,0,!1)},getTangent:function(g,m){return d(g,m,1,!0)},getWeightedTangent:function(g,m){return d(g,m,1,!1)},getNormal:function(g,m){return d(g,m,2,!0)},getWeightedNormal:function(g,m){return d(g,m,2,!1)},getCurvature:function(g,m){return d(g,m,3,!1).x},getPeaks:function(g){var m=g[0],w=g[1],T=g[2],E=g[3],C=g[4],N=g[5],R=g[6],O=g[7],P=-m+3*T-3*C+R,A=3*m-6*T+3*C,U=-3*m+3*T,W=-w+3*E-3*N+O,H=3*w-6*E+3*N,V=-3*w+3*E,B=1e-8,k=1-B,L=[];return b.solveCubic(9*(P*P+W*W),9*(P*A+H*W),2*(A*A+H*H)+3*(U*P+V*W),U*A+H*V,L,B,k),L.sort()}}}},new function(){function a(A,U,W,H,V,B,k){var L=!k&&W.getPrevious()===V,q=!k&&W!==V&&W.getNext()===V,$=1e-8,Q=1-$;if(H!==null&&H>=(L?$:0)&&H<=(q?Q:1)&&B!==null&&B>=(q?$:0)&&B<=(L?Q:1)){var X=new Ut(W,H,null,k),J=new Ut(V,B,null,k);X._intersection=J,J._intersection=X,(!U||U(X))&&Ut.insert(A,X,!0)}}function c(A,U,W,H,V,B,k,L,q,$,Q,X,J){if(++q>=4096||++L>=40)return q;var te=1e-9,se=U[0],ie=U[1],ae=U[6],le=U[7],de=ue.getSignedDistance,ge=de(se,ie,ae,le,U[2],U[3]),ye=de(se,ie,ae,le,U[4],U[5]),ke=ge*ye>0?3/4:4/9,Me=ke*Math.min(0,ge,ye),Be=ke*Math.max(0,ge,ye),lt=de(se,ie,ae,le,A[0],A[1]),nt=de(se,ie,ae,le,A[2],A[3]),et=de(se,ie,ae,le,A[4],A[5]),Ze=de(se,ie,ae,le,A[6],A[7]),pt=d(lt,nt,et,Ze),ot=pt[0],_t=pt[1],Tt,Ot;if(ge===0&&ye===0&&lt===0&&nt===0&&et===0&&Ze===0||(Tt=g(ot,_t,Me,Be))==null||(Ot=g(ot.reverse(),_t.reverse(),Me,Be))==null)return q;var Dt=$+(Q-$)*Tt,Ct=$+(Q-$)*Ot;if(Math.max(J-X,Ct-Dt)<te){var rr=(Dt+Ct)/2,Hn=(X+J)/2;a(V,B,k?H:W,k?Hn:rr,k?W:H,k?rr:Hn)}else{A=Ce.getPart(A,Tt,Ot);var pr=J-X;if(Ot-Tt>.8)if(Ct-Dt>pr){var An=Ce.subdivide(A,.5),rr=(Dt+Ct)/2;q=c(U,An[0],H,W,V,B,!k,L,q,X,J,Dt,rr),q=c(U,An[1],H,W,V,B,!k,L,q,X,J,rr,Ct)}else{var An=Ce.subdivide(U,.5),Hn=(X+J)/2;q=c(An[0],A,H,W,V,B,!k,L,q,X,Hn,Dt,Ct),q=c(An[1],A,H,W,V,B,!k,L,q,Hn,J,Dt,Ct)}else pr===0||pr>=te?q=c(U,A,H,W,V,B,!k,L,q,X,J,Dt,Ct):q=c(A,U,W,H,V,B,k,L,q,Dt,Ct,X,J)}return q}function d(A,U,W,H){var V=[0,A],B=[1/3,U],k=[2/3,W],L=[1,H],q=U-(2*A+H)/3,$=W-(A+2*H)/3,Q;if(q*$<0)Q=[[V,B,L],[V,k,L]];else{var X=q/$;Q=[X>=2?[V,B,L]:X<=.5?[V,k,L]:[V,B,k,L],[V,L]]}return(q||$)<0?Q.reverse():Q}function g(A,U,W,H){return A[0][1]<W?m(A,!0,W):U[0][1]>H?m(U,!1,H):A[0][0]}function m(A,U,W){for(var H=A[0][0],V=A[0][1],B=1,k=A.length;B<k;B++){var L=A[B][0],q=A[B][1];if(U?q>=W:q<=W)return q===W?L:H+(W-V)*(L-H)/(q-V);H=L,V=q}return null}function w(A,U,W,H,V){var B=b.isZero;if(B(H)&&B(V)){var k=Ce.getTimeOf(A,new I(U,W));return k===null?[]:[k]}for(var L=Math.atan2(-V,H),q=Math.sin(L),$=Math.cos(L),Q=[],X=[],J=0;J<8;J+=2){var te=A[J]-U,se=A[J+1]-W;Q.push(te*$-se*q,te*q+se*$)}return Ce.solveCubic(Q,1,0,X,0,1),X}function T(A,U,W,H,V,B,k){for(var L=U[0],q=U[1],$=U[6],Q=U[7],X=w(A,L,q,$-L,Q-q),J=0,te=X.length;J<te;J++){var se=X[J],ie=Ce.getPoint(A,se),ae=Ce.getTimeOf(U,ie);ae!==null&&a(V,B,k?H:W,k?ae:se,k?W:H,k?se:ae)}}function E(A,U,W,H,V,B){var k=ue.intersect(A[0],A[1],A[6],A[7],U[0],U[1],U[6],U[7]);k&&a(V,B,W,Ce.getTimeOf(A,k),H,Ce.getTimeOf(U,k))}function C(A,U,W,H,V,B){var k=1e-12,L=Math.min,q=Math.max;if(q(A[0],A[2],A[4],A[6])+k>L(U[0],U[2],U[4],U[6])&&L(A[0],A[2],A[4],A[6])-k<q(U[0],U[2],U[4],U[6])&&q(A[1],A[3],A[5],A[7])+k>L(U[1],U[3],U[5],U[7])&&L(A[1],A[3],A[5],A[7])-k<q(U[1],U[3],U[5],U[7])){var $=O(A,U);if($)for(var Q=0;Q<2;Q++){var X=$[Q];a(V,B,W,X[0],H,X[1],!0)}else{var J=Ce.isStraight(A),te=Ce.isStraight(U),se=J&&te,ie=J&&!te,ae=V.length;if((se?E:J||te?T:c)(ie?U:A,ie?A:U,ie?H:W,ie?W:H,V,B,ie,0,0,0,1,0,1),!se||V.length===ae)for(var Q=0;Q<4;Q++){var le=Q>>1,de=Q&1,ge=le*6,ye=de*6,ke=new I(A[ge],A[ge+1]),Me=new I(U[ye],U[ye+1]);ke.isClose(Me,k)&&a(V,B,W,le,H,de)}}}return V}function N(A,U,W,H){var V=Ce.classify(A);if(V.type==="loop"){var B=V.roots;a(W,H,U,B[0],U,B[1])}return W}function R(A,U,W,H,V,B){var k=1e-7,L=!U;L&&(U=A);for(var q=A.length,$=U.length,Q=new Array(q),X=L?Q:new Array($),J=[],te=0;te<q;te++)Q[te]=A[te].getValues(H);if(!L)for(var te=0;te<$;te++)X[te]=U[te].getValues(V);for(var se=v.findCurveBoundsCollisions(Q,X,k),ie=0;ie<q;ie++){var ae=A[ie],le=Q[ie];L&&N(le,ae,J,W);var de=se[ie];if(de)for(var ge=0;ge<de.length;ge++){if(B&&J.length)return J;var ye=de[ge];if(!L||ye>ie){var ke=U[ye],Me=X[ye];C(le,Me,ae,ke,J,W)}}}return J}function O(A,U){function W(Ze){var pt=Ze[6]-Ze[0],ot=Ze[7]-Ze[1];return pt*pt+ot*ot}var H=Math.abs,V=ue.getDistance,B=1e-8,k=1e-7,L=Ce.isStraight(A),q=Ce.isStraight(U),$=L&&q,Q=W(A)<W(U),X=Q?U:A,J=Q?A:U,te=X[0],se=X[1],ie=X[6]-te,ae=X[7]-se;if(V(te,se,ie,ae,J[0],J[1],!0)<k&&V(te,se,ie,ae,J[6],J[7],!0)<k)!$&&V(te,se,ie,ae,X[2],X[3],!0)<k&&V(te,se,ie,ae,X[4],X[5],!0)<k&&V(te,se,ie,ae,J[2],J[3],!0)<k&&V(te,se,ie,ae,J[4],J[5],!0)<k&&(L=q=$=!0);else if($)return null;if(L^q)return null;for(var le=[A,U],de=[],ge=0;ge<4&&de.length<2;ge++){var ye=ge&1,ke=ye^1,Me=ge>>1,Be=Ce.getTimeOf(le[ye],new I(le[ke][Me?6:0],le[ke][Me?7:1]));if(Be!=null){var lt=ye?[Me,Be]:[Be,Me];(!de.length||H(lt[0]-de[0][0])>B&&H(lt[1]-de[0][1])>B)&&de.push(lt)}if(ge>2&&!de.length)break}if(de.length!==2)de=null;else if(!$){var nt=Ce.getPart(A,de[0][0],de[1][0]),et=Ce.getPart(U,de[0][1],de[1][1]);(H(et[2]-nt[2])>k||H(et[3]-nt[3])>k||H(et[4]-nt[4])>k||H(et[5]-nt[5])>k)&&(de=null)}return de}function P(A,U){var W=A[0],H=A[1],V=A[2],B=A[3],k=A[4],L=A[5],q=A[6],$=A[7],Q=U.normalize(),X=Q.x,J=Q.y,te=3*q-9*k+9*V-3*W,se=3*$-9*L+9*B-3*H,ie=6*k-12*V+6*W,ae=6*L-12*B+6*H,le=3*V-3*W,de=3*B-3*H,ge=2*te*J-2*se*X,ye=[];if(Math.abs(ge)<b.CURVETIME_EPSILON){var ke=te*de-se*le,ge=te*ae-se*ie;if(ge!=0){var Me=-ke/ge;Me>=0&&Me<=1&&ye.push(Me)}}else{var Be=(ie*ie-4*te*le)*J*J+(-2*ie*ae+4*se*le+4*te*de)*X*J+(ae*ae-4*se*de)*X*X,lt=ie*J-ae*X;if(Be>=0&&ge!=0){var nt=Math.sqrt(Be),et=-(lt+nt)/ge,Ze=(-lt+nt)/ge;et>=0&&et<=1&&ye.push(et),Ze>=0&&Ze<=1&&ye.push(Ze)}}return ye}return{getIntersections:function(A){var U=this.getValues(),W=A&&A!==this&&A.getValues();return W?C(U,W,this,A,[]):N(U,this,[])},statics:{getOverlaps:O,getIntersections:R,getCurveLineIntersections:w,getTimesWithTangent:P}}}),Ut=o.extend({_class:"CurveLocation",initialize:function(c,d,g,m,w){if(d>=.99999999){var T=c.getNext();T&&(d=0,c=T)}this._setCurve(c),this._time=d,this._point=g||c.getPointAtTime(d),this._overlap=m,this._distance=w,this._intersection=this._next=this._previous=null},_setPath:function(a){this._path=a,this._version=a?a._version:0},_setCurve:function(a){this._setPath(a._path),this._curve=a,this._segment=null,this._segment1=a._segment1,this._segment2=a._segment2},_setSegment:function(a){var c=a.getCurve();c?this._setCurve(c):(this._setPath(a._path),this._segment1=a,this._segment2=null),this._segment=a,this._time=a===this._segment1?0:1,this._point=a._point.clone()},getSegment:function(){var a=this._segment;if(!a){var c=this.getCurve(),d=this.getTime();d===0?a=c._segment1:d===1?a=c._segment2:d!=null&&(a=c.getPartLength(0,d)<c.getPartLength(d,1)?c._segment1:c._segment2),this._segment=a}return a},getCurve:function(){var a=this._path,c=this;a&&a._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null);function d(g){var m=g&&g.getCurve();if(m&&(c._time=m.getTimeOf(c._point))!=null)return c._setCurve(m),m}return this._curve||d(this._segment)||d(this._segment1)||d(this._segment2.getPrevious())},getPath:function(){var a=this.getCurve();return a&&a._path},getIndex:function(){var a=this.getCurve();return a&&a.getIndex()},getTime:function(){var a=this.getCurve(),c=this._time;return a&&c==null?this._time=a.getTimeOf(this._point):c},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var a=this._offset;if(a==null){a=0;var c=this.getPath(),d=this.getIndex();if(c&&d!=null)for(var g=c.getCurves(),m=0;m<d;m++)a+=g[m].getLength();this._offset=a+=this.getCurveOffset()}return a},getCurveOffset:function(){var a=this._curveOffset;if(a==null){var c=this.getCurve(),d=this.getTime();this._curveOffset=a=d!=null&&c&&c.getPartLength(0,d)}return a},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var a=this.getCurve(),c=a&&a.divideAtTime(this.getTime());return c&&this._setSegment(c._segment1),c},split:function(){var a=this.getCurve(),c=a._path,d=a&&a.splitAtTime(this.getTime());return d&&this._setSegment(c.getLastSegment()),d},equals:function(a,c){var d=this===a;if(!d&&a instanceof Ut){var g=this.getCurve(),m=a.getCurve(),w=g._path,T=m._path;if(w===T){var E=Math.abs,C=1e-7,N=E(this.getOffset()-a.getOffset()),R=!c&&this._intersection,O=!c&&a._intersection;d=(N<C||w&&E(w.getLength()-N)<C)&&(!R&&!O||R&&O&&R.equals(O,!0))}}return d},toString:function(){var a=[],c=this.getPoint(),d=_.instance;c&&a.push("point: "+c);var g=this.getIndex();g!=null&&a.push("index: "+g);var m=this.getTime();return m!=null&&a.push("time: "+d.number(m)),this._distance!=null&&a.push("distance: "+d.number(this._distance)),"{ "+a.join(", ")+" }"},isTouching:function(){var a=this._intersection;if(a&&this.getTangent().isCollinear(a.getTangent())){var c=this.getCurve(),d=a.getCurve();return!(c.isStraight()&&d.isStraight()&&c.getLine().intersect(d.getLine()))}return!1},isCrossing:function(){var a=this._intersection;if(!a)return!1;var c=this.getTime(),d=a.getTime(),g=1e-8,m=1-g,w=c>=g&&c<=m,T=d>=g&&d<=m;if(w&&T)return!this.isTouching();var E=this.getCurve(),C=E&&c<g?E.getPrevious():E,N=a.getCurve(),R=N&&d<g?N.getPrevious():N;if(c>m&&(E=E.getNext()),d>m&&(N=N.getNext()),!C||!E||!R||!N)return!1;var O=[];function P(X,J){var te=X.getValues(),se=Ce.classify(te).roots||Ce.getPeaks(te),ie=se.length,ae=Ce.getLength(te,J&&ie?se[ie-1]:0,!J&&ie?se[0]:1);O.push(ie?ae:ae/32)}function A(X,J,te){return J<te?X>J&&X<te:X>J||X<te}w||(P(C,!0),P(E,!1)),T||(P(R,!0),P(N,!1));var U=this.getPoint(),W=Math.min.apply(Math,O),H=w?E.getTangentAtTime(c):E.getPointAt(W).subtract(U),V=w?H.negate():C.getPointAt(-W).subtract(U),B=T?N.getTangentAtTime(d):N.getPointAt(W).subtract(U),k=T?B.negate():R.getPointAt(-W).subtract(U),L=V.getAngle(),q=H.getAngle(),$=k.getAngle(),Q=B.getAngle();return!!(w?A(L,$,Q)^A(q,$,Q)&&A(L,Q,$)^A(q,Q,$):A($,L,q)^A(Q,L,q)&&A($,q,L)^A(Q,q,L))},hasOverlap:function(){return!!this._overlap}},o.each(Ce._evaluateMethods,function(a){var c=a+"At";this[a]=function(){var d=this.getCurve(),g=this.getTime();return g!=null&&d&&d[c](g,!0)}},{preserve:!0}),new function(){function a(c,d,g){var m=c.length,w=0,T=m-1;function E(U,W){for(var H=U+W;H>=-1&&H<=m;H+=W){var V=c[(H%m+m)%m];if(!d.getPoint().isClose(V.getPoint(),1e-7))break;if(d.equals(V))return V}return null}for(;w<=T;){var C=w+T>>>1,N=c[C],R;if(g&&(R=d.equals(N)?N:E(C,-1)||E(C,1)))return d._overlap&&(R._overlap=R._intersection._overlap=!0),R;var O=d.getPath(),P=N.getPath(),A=O!==P?O._id-P._id:d.getIndex()+d.getTime()-(N.getIndex()+N.getTime());A<0?T=C-1:w=C+1}return c.splice(w,0,d),d}return{statics:{insert:a,expand:function(c){for(var d=c.slice(),g=c.length-1;g>=0;g--)a(d,c[g]._intersection,!1);return d}}}}),Fe=fe.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(a){var c,d,g;if(o.isPlainObject(a)?(d=a.segments,c=a.pathData):Array.isArray(a)?d=a:typeof a=="string"&&(c=a),d){var m=d[0];g=m&&Array.isArray(m[0])}else c&&(g=(c.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(c));var w=g?qe:Ne;return new w(a)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(a){this.isClockwise()!=(a=!!a)&&this.reverse()},setPathData:function(a){var c=a&&a.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/ig),d,g=!1,m,w,T=new I,E=new I;function C(k,L){var q=+d[k];return g&&(q+=T[L]),q}function N(k){return new I(C(k,"x"),C(k+1,"y"))}this.clear();for(var R=0,O=c&&c.length;R<O;R++){var P=c[R],A=P[0],U=A.toLowerCase();d=P.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g);var W=d&&d.length;switch(g=A===U,m==="z"&&!/[mz]/.test(U)&&this.moveTo(T),U){case"m":case"l":for(var H=U==="m",V=0;V<W;V+=2)this[H?"moveTo":"lineTo"](T=N(V)),H&&(E=T,H=!1);w=T;break;case"h":case"v":var B=U==="h"?"x":"y";T=T.clone();for(var V=0;V<W;V++)T[B]=C(V,B),this.lineTo(T);w=T;break;case"c":for(var V=0;V<W;V+=6)this.cubicCurveTo(N(V),w=N(V+2),T=N(V+4));break;case"s":for(var V=0;V<W;V+=4)this.cubicCurveTo(/[cs]/.test(m)?T.multiply(2).subtract(w):T,w=N(V),T=N(V+2)),m=U;break;case"q":for(var V=0;V<W;V+=4)this.quadraticCurveTo(w=N(V),T=N(V+2));break;case"t":for(var V=0;V<W;V+=2)this.quadraticCurveTo(w=/[qt]/.test(m)?T.multiply(2).subtract(w):T,T=N(V)),m=U;break;case"a":for(var V=0;V<W;V+=7)this.arcTo(T=N(V+5),new D(+d[V],+d[V+1]),+d[V+2],+d[V+4],+d[V+3]);break;case"z":this.closePath(1e-12),T=E;break}m=U}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(a){var c=a.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(a):{};return c.onPath||!!(this.getFillRule()==="evenodd"?c.windingL&1||c.windingR&1:c.winding)},getIntersections:function(a,c,d,g){var m=this===a||!a,w=this._matrix._orNullIfIdentity(),T=m?w:(d||a._matrix)._orNullIfIdentity();return m||this.getBounds(w).intersects(a.getBounds(T),1e-12)?Ce.getIntersections(this.getCurves(),!m&&a.getCurves(),c,w,T,g):[]},getCrossings:function(a){return this.getIntersections(a,function(c){return c.isCrossing()})},getNearestLocation:function(){for(var a=I.read(arguments),c=this.getCurves(),d=1/0,g=null,m=0,w=c.length;m<w;m++){var T=c[m].getNearestLocation(a);T._distance<d&&(d=T._distance,g=T)}return g},getNearestPoint:function(){var a=this.getNearestLocation.apply(this,arguments);return a&&a.getPoint()},interpolate:function(a,c,d){var g=!this._children,m=g?"_segments":"_children",w=a[m],T=c[m],E=this[m];if(!w||!T||w.length!==T.length)throw new Error("Invalid operands in interpolate() call: "+a+", "+c);var C=E.length,N=T.length;if(C<N)for(var R=g?Ae:Ne,O=C;O<N;O++)this.add(new R);else C>N&&this[g?"removeSegments":"removeChildren"](N,C);for(var O=0;O<N;O++)E[O].interpolate(w[O],T[O],d);g&&(this.setClosed(a._closed),this._changed(9))},compare:function(a){var c=!1;if(a){var d=this._children||[this],g=a._children?a._children.slice():[a],m=d.length,w=g.length,T=[],E=0;c=!0;for(var C=v.findItemBoundsCollisions(d,g,b.GEOMETRIC_EPSILON),N=m-1;N>=0&&c;N--){var R=d[N];c=!1;var O=C[N];if(O)for(var P=O.length-1;P>=0&&!c;P--)R.compare(g[O[P]])&&(T[O[P]]||(T[O[P]]=!0,E++),c=!0)}c=c&&E===w}return c}}),Ne=Fe.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(c){this._closed=!1,this._segments=[],this._version=0;var d=arguments,g=Array.isArray(c)?typeof c[0]=="object"?c:d:c&&c.size===n&&(c.x!==n||c.point!==n)?d:null;g&&g.length>0?this.setSegments(g):(this._curves=n,this._segmentSelection=0,!g&&typeof c=="string"&&(this.setPathData(c),c=null)),this._initialize(!g&&c)},_equals:function(a){return this._closed===a._closed&&o.equals(this._segments,a._segments)},copyContent:function(a){this.setSegments(a._segments),this._closed=a._closed},_changed:function a(c){if(a.base.call(this,c),c&8){if(this._length=this._area=n,c&32)this._version++;else if(this._curves)for(var d=0,g=this._curves.length;d<g;d++)this._curves[d]._changed()}else c&64&&(this._bounds=n)},getStyle:function(){var a=this._parent;return(a instanceof qe?a:this)._style},getSegments:function(){return this._segments},setSegments:function(a){var c=this.isFullySelected(),d=a&&a.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=n,d){var g=a[d-1];typeof g=="boolean"&&(this.setClosed(g),d--),this._add(Ae.readList(a,0,{},d))}c&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var a=this._curves,c=this._segments;if(!a){var d=this._countCurves();a=this._curves=new Array(d);for(var g=0;g<d;g++)a[g]=new Ce(this,c[g],c[g+1]||c[0])}return a},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var a=this.getCurves();return a[a.length-1]},isClosed:function(){return this._closed},setClosed:function(a){if(this._closed!=(a=!!a)){if(this._closed=a,this._curves){var c=this._curves.length=this._countCurves();a&&(this._curves[c-1]=new Ce(this,this._segments[c-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(a,c){var d=this._segments,g=d.length,m=new _(c),w=new Array(6),T=!0,E,C,N,R,O,P,A,U,W=[];function H(B,k){if(B._transformCoordinates(a,w),E=w[0],C=w[1],T)W.push("M"+m.pair(E,C)),T=!1;else if(O=w[2],P=w[3],O===E&&P===C&&A===N&&U===R){if(!k){var L=E-N,q=C-R;W.push(L===0?"v"+m.number(q):q===0?"h"+m.number(L):"l"+m.pair(L,q))}}else W.push("c"+m.pair(A-N,U-R)+" "+m.pair(O-N,P-R)+" "+m.pair(E-N,C-R));N=E,R=C,A=w[4],U=w[5]}if(!g)return"";for(var V=0;V<g;V++)H(d[V]);return this._closed&&g>0&&(H(d[0],!0),W.push("z")),W.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(a){for(var c=this._segments,d=new Array(6),g=0,m=c.length;g<m;g++)c[g]._transformCoordinates(a,d,!0);return!0},_add:function(a,T){for(var d=this._segments,g=this._curves,m=a.length,w=T==null,T=w?d.length:T,E=0;E<m;E++){var C=a[E];C._path&&(C=a[E]=C.clone()),C._path=this,C._index=T+E,C._selection&&this._updateSelection(C,0,C._selection)}if(w)o.push(d,a);else{d.splice.apply(d,[T,0].concat(a));for(var E=T+m,N=d.length;E<N;E++)d[E]._index=E}if(g){var R=this._countCurves(),O=T>0&&T+m-1===R?T-1:T,P=O,A=Math.min(O+m,R);a._curves&&(g.splice.apply(g,[O,0].concat(a._curves)),P+=a._curves.length);for(var E=P;E<A;E++)g.splice(E,0,new Ce(this,null,null));this._adjustCurves(O,A)}return this._changed(41),a},_adjustCurves:function(a,c){for(var d=this._segments,g=this._curves,m,w=a;w<c;w++)m=g[w],m._path=this,m._segment1=d[w],m._segment2=d[w+1]||d[0],m._changed();(m=g[this._closed&&!a?d.length-1:a-1])&&(m._segment2=d[a]||d[0],m._changed()),(m=g[c])&&(m._segment1=d[c],m._changed())},_countCurves:function(){var a=this._segments.length;return!this._closed&&a>0?a-1:a},add:function(a){var c=arguments;return c.length>1&&typeof a!="number"?this._add(Ae.readList(c)):this._add([Ae.read(c)])[0]},insert:function(a,c){var d=arguments;return d.length>2&&typeof c!="number"?this._add(Ae.readList(d,1),a):this._add([Ae.read(d,1)],a)[0]},addSegment:function(){return this._add([Ae.read(arguments)])[0]},insertSegment:function(a){return this._add([Ae.read(arguments,1)],a)[0]},addSegments:function(a){return this._add(Ae.readList(a))},insertSegments:function(a,c){return this._add(Ae.readList(c),a)},removeSegment:function(a){return this.removeSegments(a,a+1)[0]||null},removeSegments:function(a,c,d){a=a||0,c=o.pick(c,this._segments.length);var g=this._segments,m=this._curves,w=g.length,T=g.splice(a,c-a),E=T.length;if(!E)return T;for(var C=0;C<E;C++){var N=T[C];N._selection&&this._updateSelection(N,N._selection,0),N._index=N._path=null}for(var C=a,R=g.length;C<R;C++)g[C]._index=C;if(m){for(var O=a>0&&c===w+(this._closed?1:0)?a-1:a,m=m.splice(O,E),C=m.length-1;C>=0;C--)m[C]._path=null;d&&(T._curves=m.slice(1)),this._adjustCurves(O,O)}return this._changed(41),T},clear:"#removeSegments",hasHandles:function(){for(var a=this._segments,c=0,d=a.length;c<d;c++)if(a[c].hasHandles())return!0;return!1},clearHandles:function(){for(var a=this._segments,c=0,d=a.length;c<d;c++)a[c].clearHandles()},getLength:function(){if(this._length==null){for(var a=this.getCurves(),c=0,d=0,g=a.length;d<g;d++)c+=a[d].getLength();this._length=c}return this._length},getArea:function(){var a=this._area;if(a==null){var c=this._segments,d=this._closed;a=0;for(var g=0,m=c.length;g<m;g++){var w=g+1===m;a+=Ce.getArea(Ce.getValues(c[g],c[w?0:g+1],null,w&&!d))}this._area=a}return a},isFullySelected:function(){var a=this._segments.length;return this.isSelected()&&a>0&&this._segmentSelection===a*7},setFullySelected:function(a){a&&this._selectSegments(!0),this.setSelected(a)},setSelection:function a(c){c&1||this._selectSegments(!1),a.base.call(this,c)},_selectSegments:function(a){var c=this._segments,d=c.length,g=a?7:0;this._segmentSelection=g*d;for(var m=0;m<d;m++)c[m]._selection=g},_updateSelection:function(a,c,d){a._selection=d;var g=this._segmentSelection+=d-c;g>0&&this.setSelected(!0)},divideAt:function(a){var c=this.getLocationAt(a),d;return c&&(d=c.getCurve().divideAt(c.getCurveOffset()))?d._segment1:null},splitAt:function(a){var c=this.getLocationAt(a),d=c&&c.index,g=c&&c.time,m=1e-8,w=1-m;g>w&&(d++,g=0);var T=this.getCurves();if(d>=0&&d<T.length){g>=m&&T[d++].divideAtTime(g);var E=this.removeSegments(d,this._segments.length,!0),C;return this._closed?(this.setClosed(!1),C=this):(C=new Ne(fe.NO_INSERT),C.insertAbove(this),C.copyAttributes(this)),C._add(E,0),this.addSegment(E[0]),C}return null},split:function(a,c){var d,g=c===n?a:(d=this.getCurves()[a])&&d.getLocationAtTime(c);return g!=null?this.splitAt(g):null},join:function(a,c){var d=c||0;if(a&&a!==this){var g=a._segments,m=this.getLastSegment(),w=a.getLastSegment();if(!w)return this;m&&m._point.isClose(w._point,d)&&a.reverse();var T=a.getFirstSegment();if(m&&m._point.isClose(T._point,d))m.setHandleOut(T._handleOut),this._add(g.slice(1));else{var E=this.getFirstSegment();E&&E._point.isClose(T._point,d)&&a.reverse(),w=a.getLastSegment(),E&&E._point.isClose(w._point,d)?(E.setHandleIn(w._handleIn),this._add(g.slice(0,g.length-1),0)):this._add(g.slice())}a._closed&&this._add([g[0]]),a.remove()}var C=this.getFirstSegment(),N=this.getLastSegment();return C!==N&&C._point.isClose(N._point,d)&&(C.setHandleIn(N._handleIn),N.remove(),this.setClosed(!0)),this},reduce:function(a){for(var c=this.getCurves(),d=a&&a.simplify,g=d?1e-7:0,m=c.length-1;m>=0;m--){var w=c[m];!w.hasHandles()&&(!w.hasLength(g)||d&&w.isCollinear(w.getNext()))&&w.remove()}return this},reverse:function(){this._segments.reverse();for(var a=0,c=this._segments.length;a<c;a++){var d=this._segments[a],g=d._handleIn;d._handleIn=d._handleOut,d._handleOut=g,d._index=a}this._curves=null,this._changed(9)},flatten:function(a){for(var c=new Pt(this,a||.25,256,!0),d=c.parts,g=d.length,m=[],w=0;w<g;w++)m.push(new Ae(d[w].curve.slice(0,2)));!this._closed&&g>0&&m.push(new Ae(d[g-1].curve.slice(6))),this.setSegments(m)},simplify:function(a){var c=new rt(this).fit(a||2.5);return c&&this.setSegments(c),!!c},smooth:function(a){var c=this,d=a||{},g=d.type||"asymmetric",m=this._segments,w=m.length,T=this._closed;function E(ot,_t){var Tt=ot&&ot.index;if(Tt!=null){var Ot=ot.path;if(Ot&&Ot!==c)throw new Error(ot._class+" "+Tt+" of "+Ot+" is not part of "+c);_t&&ot instanceof Ce&&Tt++}else Tt=typeof ot=="number"?ot:_t;return Math.min(Tt<0&&T?Tt%w:Tt<0?Tt+w:Tt,w-1)}var C=T&&d.from===n&&d.to===n,N=E(d.from,0),R=E(d.to,w-1);if(N>R)if(T)N-=w;else{var O=N;N=R,R=O}if(/^(?:asymmetric|continuous)$/.test(g)){var P=g==="asymmetric",A=Math.min,U=R-N+1,W=U-1,H=C?A(U,4):1,V=H,B=H,k=[];if(T||(V=A(1,N),B=A(1,w-R-1)),W+=V+B,W<=1)return;for(var L=0,q=N-V;L<=W;L++,q++)k[L]=m[(q<0?q+w:q)%w]._point;for(var $=k[0]._x+2*k[1]._x,Q=k[0]._y+2*k[1]._y,X=2,J=W-1,te=[$],se=[Q],ie=[X],ae=[],le=[],L=1;L<W;L++){var de=L<J,ge=de||P?1:2,ye=de?4:P?2:7,ke=de?4:P?3:8,Me=de?2:P?0:1,Be=ge/X;X=ie[L]=ye-Be,$=te[L]=ke*k[L]._x+Me*k[L+1]._x-Be*$,Q=se[L]=ke*k[L]._y+Me*k[L+1]._y-Be*Q}ae[J]=te[J]/ie[J],le[J]=se[J]/ie[J];for(var L=W-2;L>=0;L--)ae[L]=(te[L]-ae[L+1])/ie[L],le[L]=(se[L]-le[L+1])/ie[L];ae[W]=(3*k[W]._x-ae[J])/2,le[W]=(3*k[W]._y-le[J])/2;for(var L=V,lt=W-B,q=N;L<=lt;L++,q++){var nt=m[q<0?q+w:q],et=nt._point,Ze=ae[L]-et._x,pt=le[L]-et._y;(C||L<lt)&&nt.setHandleOut(Ze,pt),(C||L>V)&&nt.setHandleIn(-Ze,-pt)}}else for(var L=N;L<=R;L++)m[L<0?L+w:L].smooth(d,!C&&L===N,!C&&L===R)},toShape:function(a){if(!this._closed)return null;var c=this._segments,d,g,m,w;function T(P,A){var U=c[P],W=U.getNext(),H=c[A],V=H.getNext();return U._handleOut.isZero()&&W._handleIn.isZero()&&H._handleOut.isZero()&&V._handleIn.isZero()&&W._point.subtract(U._point).isCollinear(V._point.subtract(H._point))}function E(P){var A=c[P],U=A.getPrevious(),W=A.getNext();return U._handleOut.isZero()&&A._handleIn.isZero()&&A._handleOut.isZero()&&W._handleIn.isZero()&&A._point.subtract(U._point).isOrthogonal(W._point.subtract(A._point))}function C(P){var A=c[P],U=A.getNext(),W=A._handleOut,H=U._handleIn,V=.5522847498307936;if(W.isOrthogonal(H)){var B=A._point,k=U._point,L=new ue(B,W,!0).intersect(new ue(k,H,!0),!0);return L&&b.isZero(W.getLength()/L.subtract(B).getLength()-V)&&b.isZero(H.getLength()/L.subtract(k).getLength()-V)}return!1}function N(P,A){return c[P]._point.getDistance(c[A]._point)}if(!this.hasHandles()&&c.length===4&&T(0,2)&&T(1,3)&&E(1)?(d=Z.Rectangle,g=new D(N(0,3),N(0,1)),w=c[1]._point.add(c[2]._point).divide(2)):c.length===8&&C(0)&&C(2)&&C(4)&&C(6)&&T(1,5)&&T(3,7)?(d=Z.Rectangle,g=new D(N(1,6),N(0,3)),m=g.subtract(new D(N(0,7),N(1,2))).divide(2),w=c[3]._point.add(c[4]._point).divide(2)):c.length===4&&C(0)&&C(1)&&C(2)&&C(3)&&(b.isZero(N(0,2)-N(1,3))?(d=Z.Circle,m=N(0,2)/2):(d=Z.Ellipse,m=new D(N(2,0)/2,N(3,1)/2)),w=c[1]._point),d){var R=this.getPosition(!0),O=new d({center:R,size:g,radius:m,insert:!1});return O.copyAttributes(this,!0),O._matrix.prepend(this._matrix),O.rotate(w.subtract(R).getAngle()+90),(a===n||a)&&O.insertAbove(this),O}return null},toPath:"#clone",compare:function a(c){if(!c||c instanceof qe)return a.base.call(this,c);var d=this.getCurves(),g=c.getCurves(),m=d.length,w=g.length;if(!m||!w)return m==w;for(var T=d[0].getValues(),E=[],C=0,N,R=0,O,P=0;P<w;P++){var H=g[P].getValues();E.push(H);var A=Ce.getOverlaps(T,H);if(A){N=!P&&A[0][0]>0?w-1:P,O=A[0][1];break}}for(var U=Math.abs,W=1e-8,H=E[N],V;T&&H;){var A=Ce.getOverlaps(T,H);if(A){var B=A[0][0];if(U(B-R)<W){R=A[1][0],R===1&&(T=++C<m?d[C].getValues():null,R=0);var k=A[0][1];if(U(k-O)<W){if(V||(V=[N,k]),O=A[1][1],O===1&&(++N>=w&&(N=0),H=E[N]||g[N].getValues(),O=0),!T)return V[0]===N&&V[1]===O;continue}}}break}return!1},_hitTestSelf:function(a,c,d,g){var m=this,w=this.getStyle(),T=this._segments,E=T.length,C=this._closed,N=c._tolerancePadding,R=N,O,P,A,U,W,H,V=c.stroke&&w.hasStroke(),B=c.fill&&w.hasFill(),k=c.curves,L=V?w.getStrokeWidth()/2:B&&c.tolerance>0||k?0:null;L!==null&&(L>0?(O=w.getStrokeJoin(),P=w.getStrokeCap(),A=w.getMiterLimit(),R=R.add(Ne._getStrokePadding(L,g))):O=P="round");function q(ae,le){return a.subtract(ae).divide(le).length<=1}function $(ae,le,de){if(!c.selected||le.isSelected()){var ge=ae._point;if(le!==ge&&(le=le.add(ge)),q(le,R))return new ft(de,m,{segment:ae,point:le})}}function Q(ae,le){return(le||c.segments)&&$(ae,ae._point,"segment")||!le&&c.handles&&($(ae,ae._handleIn,"handle-in")||$(ae,ae._handleOut,"handle-out"))}function X(ae){U.add(ae)}function J(ae){var le=C||ae._index>0&&ae._index<E-1;if((le?O:P)==="round")return q(ae._point,R);if(U=new Ne({internal:!0,closed:!0}),le?ae.isSmooth()||Ne._addBevelJoin(ae,O,L,A,null,g,X,!0):P==="square"&&Ne._addSquareCap(ae,P,L,null,g,X,!0),!U.isEmpty()){var de;return U.contains(a)||(de=U.getNearestLocation(a))&&q(de.getPoint(),N)}}if(c.ends&&!c.segments&&!C){if(H=Q(T[0],!0)||Q(T[E-1],!0))return H}else if(c.segments||c.handles){for(var te=0;te<E;te++)if(H=Q(T[te]))return H}if(L!==null){if(W=this.getNearestLocation(a),W){var se=W.getTime();se===0||se===1&&E>1?J(W.getSegment())||(W=null):q(W.getPoint(),R)||(W=null)}if(!W&&O==="miter"&&E>1)for(var te=0;te<E;te++){var ie=T[te];if(a.getDistance(ie._point)<=A*L&&J(ie)){W=ie.getLocation();break}}}return!W&&B&&this._contains(a)||W&&!V&&!k?new ft("fill",this):W?new ft(V?"stroke":"curve",this,{location:W,point:W.getPoint()}):null}},o.each(Ce._evaluateMethods,function(a){this[a+"At"]=function(c){var d=this.getLocationAt(c);return d&&d[a]()}},{beans:!1,getLocationOf:function(){for(var a=I.read(arguments),c=this.getCurves(),d=0,g=c.length;d<g;d++){var m=c[d].getLocationOf(a);if(m)return m}return null},getOffsetOf:function(){var a=this.getLocationOf.apply(this,arguments);return a?a.getOffset():null},getLocationAt:function(a){if(typeof a=="number"){for(var c=this.getCurves(),d=0,g=0,m=c.length;g<m;g++){var w=d,T=c[g];if(d+=T.getLength(),d>a)return T.getLocationAt(a-w)}if(c.length>0&&a<=this.getLength())return new Ut(c[c.length-1],1)}else if(a&&a.getPath&&a.getPath()===this)return a;return null},getOffsetsWithTangent:function(){var a=I.read(arguments);if(a.isZero())return[];for(var c=[],d=0,g=this.getCurves(),m=0,w=g.length;m<w;m++){for(var T=g[m],E=T.getTimesWithTangent(a),C=0,N=E.length;C<N;C++){var R=d+T.getOffsetAtTime(E[C]);c.indexOf(R)<0&&c.push(R)}d+=T.length}return c}}),new function(){function a(d,g,m,w){if(w<=0)return;var T=w/2,E=w-2,C=T-1,N=new Array(6),R,O;function P(B){var k=N[B],L=N[B+1];(R!=k||O!=L)&&(d.beginPath(),d.moveTo(R,O),d.lineTo(k,L),d.stroke(),d.beginPath(),d.arc(k,L,T,0,Math.PI*2,!0),d.fill())}for(var A=0,U=g.length;A<U;A++){var W=g[A],H=W._selection;if(W._transformCoordinates(m,N),R=N[0],O=N[1],H&2&&P(2),H&4&&P(4),d.fillRect(R-T,O-T,w,w),E>0&&!(H&1)){var V=d.fillStyle;d.fillStyle="#ffffff",d.fillRect(R-C,O-C,E,E),d.fillStyle=V}}}function c(d,g,m){var w=g._segments,T=w.length,E=new Array(6),C=!0,N,R,O,P,A,U,W,H;function V(k){if(m)k._transformCoordinates(m,E),N=E[0],R=E[1];else{var L=k._point;N=L._x,R=L._y}if(C)d.moveTo(N,R),C=!1;else{if(m)A=E[2],U=E[3];else{var q=k._handleIn;A=N+q._x,U=R+q._y}A===N&&U===R&&W===O&&H===P?d.lineTo(N,R):d.bezierCurveTo(W,H,A,U,N,R)}if(O=N,P=R,m)W=E[4],H=E[5];else{var q=k._handleOut;W=O+q._x,H=P+q._y}}for(var B=0;B<T;B++)V(w[B]);g._closed&&T>0&&V(w[0])}return{_draw:function(d,g,m,w){var T=g.dontStart,E=g.dontFinish||g.clip,C=this.getStyle(),N=C.hasFill(),R=C.hasStroke(),O=C.getDashArray(),P=!At.support.nativeDash&&R&&O&&O.length;T||d.beginPath(),(N||R&&!P||E)&&(c(d,this,w),this._closed&&d.closePath());function A(k){return O[(k%P+P)%P]}if(!E&&(N||R)&&(this._setStyles(d,g,m),N&&(d.fill(C.getFillRule()),d.shadowColor="rgba(0,0,0,0)"),R)){if(P){T||d.beginPath();for(var U=new Pt(this,.25,32,!1,w),W=U.length,H=-C.getDashOffset(),V,B=0;H>0;)H-=A(B--)+A(B--);for(;H<W;)V=H+A(B++),(H>0||V>0)&&U.drawPart(d,Math.max(H,0),Math.max(V,0)),H=V+A(B++)}d.stroke()}},_drawSelected:function(d,g){d.beginPath(),c(d,this,g),d.stroke(),a(d,this._segments,g,At.settings.handleSize)}}},new function(){function a(c){var d=c._segments;if(!d.length)throw new Error("Use a moveTo() command first");return d[d.length-1]}return{moveTo:function(){var c=this._segments;c.length===1&&this.removeSegment(0),c.length||this._add([new Ae(I.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new Ae(I.read(arguments))])},cubicCurveTo:function(){var c=arguments,d=I.read(c),g=I.read(c),m=I.read(c),w=a(this);w.setHandleOut(d.subtract(w._point)),this._add([new Ae(m,g.subtract(m))])},quadraticCurveTo:function(){var c=arguments,d=I.read(c),g=I.read(c),m=a(this)._point;this.cubicCurveTo(d.add(m.subtract(d).multiply(1/3)),d.add(g.subtract(d).multiply(1/3)),g)},curveTo:function(){var c=arguments,d=I.read(c),g=I.read(c),m=o.pick(o.read(c),.5),w=1-m,T=a(this)._point,E=d.subtract(T.multiply(w*w)).subtract(g.multiply(m*m)).divide(2*m*w);if(E.isNaN())throw new Error("Cannot put a curve through points with parameter = "+m);this.quadraticCurveTo(E,g)},arcTo:function(){var c=arguments,d=Math.abs,g=Math.sqrt,m=a(this),w=m._point,T=I.read(c),E,C=o.peek(c),N=o.pick(C,!0),R,O,P,A;if(typeof N=="boolean")var U=w.add(T).divide(2),E=U.add(U.subtract(w).rotate(N?-90:90));else if(o.remain(c)<=2)E=T,T=I.read(c);else if(!w.equals(T)){var W=D.read(c),H=b.isZero;if(H(W.width)||H(W.height))return this.lineTo(T);var V=o.read(c),N=!!o.read(c),B=!!o.read(c),U=w.add(T).divide(2),k=w.subtract(U).rotate(-V),L=k.x,q=k.y,$=d(W.width),Q=d(W.height),X=$*$,J=Q*Q,te=L*L,se=q*q,ie=g(te/X+se/J);if(ie>1&&($*=ie,Q*=ie,X=$*$,J=Q*Q),ie=(X*J-X*se-J*te)/(X*se+J*te),d(ie)<1e-12&&(ie=0),ie<0)throw new Error("Cannot create an arc with the given arguments");R=new I($*q/Q,-Q*L/$).multiply((B===N?-1:1)*g(ie)).rotate(V).add(U),A=new K().translate(R).rotate(V).scale($,Q),P=A._inverseTransform(w),O=P.getDirectedAngle(A._inverseTransform(T)),!N&&O>0?O-=360:N&&O<0&&(O+=360)}if(E){var ae=new ue(w.add(E).divide(2),E.subtract(w).rotate(90),!0),le=new ue(E.add(T).divide(2),T.subtract(E).rotate(90),!0),de=new ue(w,T),ge=de.getSide(E);if(R=ae.intersect(le,!0),!R){if(!ge)return this.lineTo(T);throw new Error("Cannot create an arc with the given arguments")}P=w.subtract(R),O=P.getDirectedAngle(T.subtract(R));var ye=de.getSide(R,!0);ye===0?O=ge*d(O):ge===ye&&(O+=O<0?360:-360)}if(O){for(var ke=1e-5,Me=d(O),Be=Me>=360?4:Math.ceil((Me-ke)/90),lt=O/Be,nt=lt*Math.PI/360,et=4/3*Math.sin(nt)/(1+Math.cos(nt)),Ze=[],pt=0;pt<=Be;pt++){var k=T,ot=null;if(pt<Be&&(ot=P.rotate(90).multiply(et),A?(k=A._transformPoint(P),ot=A._transformPoint(P.add(ot)).subtract(k)):k=R.add(P)),!pt)m.setHandleOut(ot);else{var _t=P.rotate(-90).multiply(et);A&&(_t=A._transformPoint(P.add(_t)).subtract(k)),Ze.push(new Ae(k,_t,ot))}P=P.rotate(lt)}this._add(Ze)}},lineBy:function(){var c=I.read(arguments),d=a(this)._point;this.lineTo(d.add(c))},curveBy:function(){var c=arguments,d=I.read(c),g=I.read(c),m=o.read(c),w=a(this)._point;this.curveTo(w.add(d),w.add(g),m)},cubicCurveBy:function(){var c=arguments,d=I.read(c),g=I.read(c),m=I.read(c),w=a(this)._point;this.cubicCurveTo(w.add(d),w.add(g),w.add(m))},quadraticCurveBy:function(){var c=arguments,d=I.read(c),g=I.read(c),m=a(this)._point;this.quadraticCurveTo(m.add(d),m.add(g))},arcBy:function(){var c=arguments,d=a(this)._point,g=d.add(I.read(c)),m=o.pick(o.peek(c),!0);typeof m=="boolean"?this.arcTo(g,m):this.arcTo(g,d.add(I.read(c)))},closePath:function(c){this.setClosed(!0),this.join(this,c)}}},{_getBounds:function(a,c){var d=c.handle?"getHandleBounds":c.stroke?"getStrokeBounds":"getBounds";return Ne[d](this._segments,this._closed,this,a,c)},statics:{getBounds:function(a,c,d,g,m,w){var T=a[0];if(!T)return new z;var E=new Array(6),C=T._transformCoordinates(g,new Array(6)),N=C.slice(0,2),R=N.slice(),O=new Array(2);function P(W){W._transformCoordinates(g,E);for(var H=0;H<2;H++)Ce._addBounds(C[H],C[H+4],E[H+2],E[H],H,w?w[H]:0,N,R,O);var V=C;C=E,E=V}for(var A=1,U=a.length;A<U;A++)P(a[A]);return c&&P(T),new z(N[0],N[1],R[0]-N[0],R[1]-N[1])},getStrokeBounds:function(a,c,d,g,m){var w=d.getStyle(),T=w.hasStroke(),E=w.getStrokeWidth(),C=T&&d._getStrokeMatrix(g,m),N=T&&Ne._getStrokePadding(E,C),R=Ne.getBounds(a,c,d,g,m,N);if(!T)return R;var O=E/2,P=w.getStrokeJoin(),A=w.getStrokeCap(),U=w.getMiterLimit(),W=new z(new D(N));function H($){R=R.include($)}function V($){R=R.unite(W.setCenter($._point.transform(g)))}function B($,Q){Q==="round"||$.isSmooth()?V($):Ne._addBevelJoin($,Q,O,U,g,C,H)}function k($,Q){Q==="round"?V($):Ne._addSquareCap($,Q,O,g,C,H)}var L=a.length-(c?0:1);if(L>0){for(var q=1;q<L;q++)B(a[q],P);c?B(a[0],P):(k(a[0],A),k(a[a.length-1],A))}return R},_getStrokePadding:function(a,c){if(!c)return[a,a];var d=new I(a,0).transform(c),g=new I(0,a).transform(c),m=d.getAngleInRadians(),w=d.getLength(),T=g.getLength(),E=Math.sin(m),C=Math.cos(m),N=Math.tan(m),R=Math.atan2(T*N,w),O=Math.atan2(T,N*w);return[Math.abs(w*Math.cos(R)*C+T*Math.sin(R)*E),Math.abs(T*Math.sin(O)*C+w*Math.cos(O)*E)]},_addBevelJoin:function(a,c,d,g,m,w,T,E){var C=a.getCurve(),N=C.getPrevious(),R=C.getPoint1().transform(m),O=N.getNormalAtTime(1).multiply(d).transform(w),P=C.getNormalAtTime(0).multiply(d).transform(w),A=O.getDirectedAngle(P);if((A<0||A>=180)&&(O=O.negate(),P=P.negate()),E&&T(R),T(R.add(O)),c==="miter"){var U=new ue(R.add(O),new I(-O.y,O.x),!0).intersect(new ue(R.add(P),new I(-P.y,P.x),!0),!0);U&&R.getDistance(U)<=g*d&&T(U)}T(R.add(P))},_addSquareCap:function(a,c,d,g,m,w,T){var E=a._point.transform(g),C=a.getLocation(),N=C.getNormal().multiply(C.getTime()===0?d:-d).transform(m);c==="square"&&(T&&(w(E.subtract(N)),w(E.add(N))),E=E.add(N.rotate(-90))),w(E.add(N)),w(E.subtract(N))},getHandleBounds:function(a,c,d,g,m){var w=d.getStyle(),T=m.stroke&&w.hasStroke(),E,C;if(T){var N=d._getStrokeMatrix(g,m),R=w.getStrokeWidth()/2,O=R;w.getStrokeJoin()==="miter"&&(O=R*w.getMiterLimit()),w.getStrokeCap()==="square"&&(O=Math.max(O,R*Math.SQRT2)),E=Ne._getStrokePadding(R,N),C=Ne._getStrokePadding(O,N)}for(var P=new Array(6),A=1/0,U=-A,W=A,H=U,V=0,B=a.length;V<B;V++){var k=a[V];k._transformCoordinates(g,P);for(var L=0;L<6;L+=2){var q=L?E:C,$=q?q[0]:0,Q=q?q[1]:0,X=P[L],J=P[L+1],te=X-$,se=X+$,ie=J-Q,ae=J+Q;te<A&&(A=te),se>U&&(U=se),ie<W&&(W=ie),ae>H&&(H=ae)}}return new z(A,W,U-A,H-W)}}});Ne.inject({statics:new function(){var a=.5522847498307936,c=[new Ae([-1,0],[0,a],[0,-a]),new Ae([0,-1],[-a,0],[a,0]),new Ae([1,0],[0,-a],[0,a]),new Ae([0,1],[a,0],[-a,0])];function d(m,w,T){var E=o.getNamed(T),C=new Ne(E&&(E.insert==!0?fe.INSERT:E.insert==!1?fe.NO_INSERT:null));return C._add(m),C._closed=w,C.set(E,fe.INSERT)}function g(m,w,T){for(var E=new Array(4),C=0;C<4;C++){var N=c[C];E[C]=new Ae(N._point.multiply(w).add(m),N._handleIn.multiply(w),N._handleOut.multiply(w))}return d(E,!0,T)}return{Line:function(){var m=arguments;return d([new Ae(I.readNamed(m,"from")),new Ae(I.readNamed(m,"to"))],!1,m)},Circle:function(){var m=arguments,w=I.readNamed(m,"center"),T=o.readNamed(m,"radius");return g(w,new D(T),m)},Rectangle:function(){var m=arguments,w=z.readNamed(m,"rectangle"),T=D.readNamed(m,"radius",0,{readNull:!0}),E=w.getBottomLeft(!0),C=w.getTopLeft(!0),N=w.getTopRight(!0),R=w.getBottomRight(!0),O;if(!T||T.isZero())O=[new Ae(E),new Ae(C),new Ae(N),new Ae(R)];else{T=D.min(T,w.getSize(!0).divide(2));var P=T.width,A=T.height,U=P*a,W=A*a;O=[new Ae(E.add(P,0),null,[-U,0]),new Ae(E.subtract(0,A),[0,W]),new Ae(C.add(0,A),null,[0,-W]),new Ae(C.add(P,0),[-U,0],null),new Ae(N.subtract(P,0),null,[U,0]),new Ae(N.add(0,A),[0,-W],null),new Ae(R.subtract(0,A),null,[0,W]),new Ae(R.subtract(P,0),[U,0])]}return d(O,!0,m)},RoundRectangle:"#Rectangle",Ellipse:function(){var m=arguments,w=Z._readEllipse(m);return g(w.center,w.radius,m)},Oval:"#Ellipse",Arc:function(){var m=arguments,w=I.readNamed(m,"from"),T=I.readNamed(m,"through"),E=I.readNamed(m,"to"),C=o.getNamed(m),N=new Ne(C&&C.insert==!1&&fe.NO_INSERT);return N.moveTo(w),N.arcTo(T,E),N.set(C)},RegularPolygon:function(){for(var m=arguments,w=I.readNamed(m,"center"),T=o.readNamed(m,"sides"),E=o.readNamed(m,"radius"),C=360/T,N=T%3===0,R=new I(0,N?-E:E),O=N?-1:.5,P=new Array(T),A=0;A<T;A++)P[A]=new Ae(w.add(R.rotate((A+O)*C)));return d(P,!0,m)},Star:function(){for(var m=arguments,w=I.readNamed(m,"center"),T=o.readNamed(m,"points")*2,E=o.readNamed(m,"radius1"),C=o.readNamed(m,"radius2"),N=360/T,R=new I(0,-1),O=new Array(T),P=0;P<T;P++)O[P]=new Ae(w.add(R.rotate(N*P).multiply(P%2?C:E)));return d(O,!0,m)}}}});var qe=Fe.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(c){this._children=[],this._namedChildren={},this._initialize(c)||(typeof c=="string"?this.setPathData(c):this.addChildren(Array.isArray(c)?c:arguments))},insertChildren:function a(c,d){var g=d,m=g[0];m&&typeof m[0]=="number"&&(g=[g]);for(var w=d.length-1;w>=0;w--){var T=g[w];g===d&&!(T instanceof Ne)&&(g=o.slice(g)),Array.isArray(T)?g[w]=new Ne({segments:T,insert:!1}):T instanceof qe&&(g.splice.apply(g,[w,1].concat(T.removeChildren())),T.remove())}return a.base.call(this,c,g)},reduce:function a(c){for(var d=this._children,g=d.length-1;g>=0;g--){var m=d[g].reduce(c);m.isEmpty()&&m.remove()}if(!d.length){var m=new Ne(fe.NO_INSERT);return m.copyAttributes(this),m.insertAbove(this),this.remove(),m}return a.base.call(this)},isClosed:function(){for(var a=this._children,c=0,d=a.length;c<d;c++)if(!a[c]._closed)return!1;return!0},setClosed:function(a){for(var c=this._children,d=0,g=c.length;d<g;d++)c[d].setClosed(a)},getFirstSegment:function(){var a=this.getFirstChild();return a&&a.getFirstSegment()},getLastSegment:function(){var a=this.getLastChild();return a&&a.getLastSegment()},getCurves:function(){for(var a=this._children,c=[],d=0,g=a.length;d<g;d++)o.push(c,a[d].getCurves());return c},getFirstCurve:function(){var a=this.getFirstChild();return a&&a.getFirstCurve()},getLastCurve:function(){var a=this.getLastChild();return a&&a.getLastCurve()},getArea:function(){for(var a=this._children,c=0,d=0,g=a.length;d<g;d++)c+=a[d].getArea();return c},getLength:function(){for(var a=this._children,c=0,d=0,g=a.length;d<g;d++)c+=a[d].getLength();return c},getPathData:function(a,c){for(var d=this._children,g=[],m=0,w=d.length;m<w;m++){var T=d[m],E=T._matrix;g.push(T.getPathData(a&&!E.isIdentity()?a.appended(E):a,c))}return g.join("")},_hitTestChildren:function a(c,d,g){return a.base.call(this,c,d.class===Ne||d.type==="path"?d:o.set({},d,{fill:!1}),g)},_draw:function(a,c,d,g){var m=this._children;if(m.length){c=c.extend({dontStart:!0,dontFinish:!0}),a.beginPath();for(var w=0,T=m.length;w<T;w++)m[w].draw(a,c,g);if(!c.clip){this._setStyles(a,c,d);var E=this._style;E.hasFill()&&(a.fill(E.getFillRule()),a.shadowColor="rgba(0,0,0,0)"),E.hasStroke()&&a.stroke()}}},_drawSelected:function(a,c,d){for(var g=this._children,m=0,w=g.length;m<w;m++){var T=g[m],E=T._matrix;d[T._id]||T._drawSelected(a,E.isIdentity()?c:c.appended(E))}}},new function(){function a(c,d){var g=c._children;if(d&&!g.length)throw new Error("Use a moveTo() command first");return g[g.length-1]}return o.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(c){this[c]=function(){var d=a(this,!0);d[c].apply(d,arguments)}},{moveTo:function(){var c=a(this),d=c&&c.isEmpty()?c:new Ne(fe.NO_INSERT);d!==c&&this.addChild(d),d.moveTo.apply(d,arguments)},moveBy:function(){var c=a(this,!0),d=c&&c.getLastSegment(),g=I.read(arguments);this.moveTo(d?g.add(d._point):g)},closePath:function(c){a(this,!0).closePath(c)}})},o.each(["reverse","flatten","simplify","smooth"],function(a){this[a]=function(c){for(var d=this._children,g,m=0,w=d.length;m<w;m++)g=d[m][a](c)||g;return g}},{}));Fe.inject(new function(){var a=Math.min,c=Math.max,d=Math.abs,g={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};function m(V){return V._children||[V]}function w(V,B){var k=V.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);if(B){for(var L=m(k),q=0,$=L.length;q<$;q++){var V=L[q];!V._closed&&!V.isEmpty()&&(V.closePath(1e-12),V.getFirstSegment().setHandleIn(0,0),V.getLastSegment().setHandleOut(0,0))}k=k.resolveCrossings().reorient(k.getFillRule()==="nonzero",!0)}return k}function T(V,B,k,L,q){var $=new qe(fe.NO_INSERT);return $.addChildren(V,!0),$=$.reduce({simplify:B}),q&&q.insert==!1||$.insertAbove(L&&k.isSibling(L)&&k.getIndex()<L.getIndex()?L:k),$.copyAttributes(k,!0),$}function E(V){return V.hasOverlap()||V.isCrossing()}function C(V,B,k,L){if(L&&(L.trace==!1||L.stroke)&&/^(subtract|intersect)$/.test(k))return N(V,B,k);var q=w(V,!0),$=B&&V!==B&&w(B,!0),Q=g[k];Q[k]=!0,$&&(Q.subtract||Q.exclude)^($.isClockwise()^q.isClockwise())&&$.reverse();var X=A(Ut.expand(q.getIntersections($,E))),J=m(q),te=$&&m($),se=[],ie=[],ae;function le(ot){for(var _t=0,Tt=ot.length;_t<Tt;_t++){var Ot=ot[_t];o.push(se,Ot._segments),o.push(ie,Ot.getCurves()),Ot._overlapsOnly=!0}}function de(ot){for(var _t=[],Tt=0,Ot=ot&&ot.length;Tt<Ot;Tt++)_t.push(ie[ot[Tt]]);return _t}if(X.length){le(J),te&&le(te);for(var ge=new Array(ie.length),ye=0,ke=ie.length;ye<ke;ye++)ge[ye]=ie[ye].getValues();for(var Me=v.findCurveBoundsCollisions(ge,ge,0,!0),Be={},ye=0;ye<ie.length;ye++){var lt=ie[ye],nt=lt._path._id,et=Be[nt]=Be[nt]||{};et[lt.getIndex()]={hor:de(Me[ye].hor),ver:de(Me[ye].ver)}}for(var ye=0,ke=X.length;ye<ke;ye++)W(X[ye]._segment,q,$,Be,Q);for(var ye=0,ke=se.length;ye<ke;ye++){var Ze=se[ye],pt=Ze._intersection;Ze._winding||W(Ze,q,$,Be,Q),pt&&pt._overlap||(Ze._path._overlapsOnly=!1)}ae=H(se,Q)}else ae=P(te?J.concat(te):J.slice(),function(ot){return!!Q[ot]});return T(ae,!0,V,B,L)}function N(V,B,k){var L=w(V),q=w(B),$=L.getIntersections(q,E),Q=k==="subtract",X=k==="divide",J={},te=[];function se(le){if(!J[le._id]&&(X||q.contains(le.getPointAt(le.getLength()/2))^Q))return te.unshift(le),J[le._id]=!0}for(var ie=$.length-1;ie>=0;ie--){var ae=$[ie].split();ae&&(se(ae)&&ae.getFirstSegment().setHandleIn(0,0),L.getLastSegment().setHandleOut(0,0))}return se(L),T(te,!1,V,B)}function R(V,B){for(var k=V;k;){if(k===B)return;k=k._previous}for(;V._next&&V._next!==B;)V=V._next;if(!V._next){for(;B._previous;)B=B._previous;V._next=B,B._previous=V}}function O(V){for(var B=V.length-1;B>=0;B--)V[B].clearHandles()}function P(V,B,k){var L=V&&V.length;if(L){var q=o.each(V,function(Me,Be){this[Me._id]={container:null,winding:Me.isClockwise()?1:-1,index:Be}},{}),$=V.slice().sort(function(Me,Be){return d(Be.getArea())-d(Me.getArea())}),Q=$[0],X=v.findItemBoundsCollisions($,null,b.GEOMETRIC_EPSILON);k==null&&(k=Q.isClockwise());for(var J=0;J<L;J++){var te=$[J],se=q[te._id],ie=0,ae=X[J];if(ae){for(var le=null,de=ae.length-1;de>=0;de--)if(ae[de]<J){le=le||te.getInteriorPoint();var ge=$[ae[de]];if(ge.contains(le)){var ye=q[ge._id];ie=ye.winding,se.winding+=ie,se.container=ye.exclude?ye.container:ge;break}}}if(B(se.winding)===B(ie))se.exclude=!0,V[se.index]=null;else{var ke=se.container;te.setClockwise(ke?!ke.isClockwise():k)}}}return V}function A(V,B,k){var L=B&&[],q=1e-8,$=1-q,Q=!1,X=k||[],J=k&&{},te,se,ie;function ae(_t){return _t._path._id+"."+_t._segment1._index}for(var le=(k&&k.length)-1;le>=0;le--){var de=k[le];de._path&&(J[ae(de)]=!0)}for(var le=V.length-1;le>=0;le--){var ge=V[le],ye=ge._time,ke=ye,Me=B&&!B(ge),de=ge._curve,Be;if(de&&(de!==se?(Q=!de.hasHandles()||J&&J[ae(de)],te=[],ie=null,se=de):ie>=q&&(ye/=ie)),Me){te&&te.push(ge);continue}else B&&L.unshift(ge);if(ie=ke,ye<q)Be=de._segment1;else if(ye>$)Be=de._segment2;else{var lt=de.divideAtTime(ye,!0);Q&&X.push(de,lt),Be=lt._segment1;for(var nt=te.length-1;nt>=0;nt--){var et=te[nt];et._time=(et._time-ye)/(1-ye)}}ge._setSegment(Be);var Ze=Be._intersection,pt=ge._intersection;if(Ze){R(Ze,pt);for(var ot=Ze;ot;)R(ot._intersection,Ze),ot=ot._next}else Be._intersection=pt}return k||O(X),L||V}function U(V,B,k,L,q){var $=Array.isArray(B)?B:B[k?"hor":"ver"],Q=k?1:0,X=Q^1,J=[V.x,V.y],te=J[Q],se=J[X],ie=1e-9,ae=1e-6,le=te-ie,de=te+ie,ge=0,ye=0,ke=0,Me=0,Be=!1,lt=!1,nt=1,et=[],Ze,pt;function ot(Yt){var Kn=Yt[X+0],pi=Yt[X+6];if(!(se<a(Kn,pi)||se>c(Kn,pi))){var rn=Yt[Q+0],Zo=Yt[Q+2],So=Yt[Q+4],bo=Yt[Q+6];if(Kn===pi){(rn<de&&bo>le||bo<de&&rn>le)&&(Be=!0);return}var es=se===Kn?0:se===pi||le>c(rn,Zo,So,bo)||de<a(rn,Zo,So,bo)?1:Ce.solveCubic(Yt,X,se,et,0,1)>0?et[0]:1,ki=es===0?rn:es===1?bo:Ce.getPoint(Yt,es)[k?"y":"x"],Ji=Kn>pi?1:-1,Ns=Ze[X]>Ze[X+6]?1:-1,As=Ze[Q+6];return se!==Kn?(ki<le?ke+=Ji:ki>de?Me+=Ji:Be=!0,ki>te-ae&&ki<te+ae&&(nt/=2)):(Ji!==Ns?rn<le?ke+=Ji:rn>de&&(Me+=Ji):rn!=As&&(As<de&&ki>de?(Me+=Ji,Be=!0):As>le&&ki<le&&(ke+=Ji,Be=!0)),nt/=4),Ze=Yt,!q&&ki>le&&ki<de&&Ce.getTangent(Yt,es)[k?"x":"y"]===0&&U(V,B,!k,L,!0)}}function _t(Yt){var Kn=Yt[X+0],pi=Yt[X+2],rn=Yt[X+4],Zo=Yt[X+6];if(se<=c(Kn,pi,rn,Zo)&&se>=a(Kn,pi,rn,Zo)){for(var So=Yt[Q+0],bo=Yt[Q+2],es=Yt[Q+4],ki=Yt[Q+6],Ji=le>c(So,bo,es,ki)||de<a(So,bo,es,ki)?[Yt]:Ce.getMonoCurves(Yt,k),Ns,As=0,gp=Ji.length;As<gp;As++)if(Ns=ot(Ji[As]))return Ns}}for(var Tt=0,Ot=$.length;Tt<Ot;Tt++){var Dt=$[Tt],Ct=Dt._path,rr=Dt.getValues(),Hn;if((!Tt||$[Tt-1]._path!==Ct)&&(Ze=null,Ct._closed||(pt=Ce.getValues(Ct.getLastCurve().getSegment2(),Dt.getSegment1(),null,!L),pt[X]!==pt[X+6]&&(Ze=pt)),!Ze)){Ze=rr;for(var pr=Ct.getLastCurve();pr&&pr!==Dt;){var An=pr.getValues();if(An[X]!==An[X+6]){Ze=An;break}pr=pr.getPrevious()}}if(Hn=_t(rr))return Hn;if(Tt+1===Ot||$[Tt+1]._path!==Ct){if(pt&&(Hn=_t(pt)))return Hn;Be&&!ke&&!Me&&(ke=Me=Ct.isClockwise(L)^k?1:-1),ge+=ke,ye+=Me,ke=Me=0,Be&&(lt=!0,Be=!1),pt=null}}return ge=d(ge),ye=d(ye),{winding:c(ge,ye),windingL:ge,windingR:ye,quality:nt,onPath:lt}}function W(V,B,k,L,q){var $=[],Q=V,X=0,ie;do{var J=V.getCurve();if(J){var te=J.getLength();$.push({segment:V,curve:J,length:te}),X+=te}V=V.getNext()}while(V&&!V._intersection&&V!==Q);for(var se=[.5,.25,.75],ie={winding:0,quality:-1},ae=.001,le=1-ae,de=0;de<se.length&&ie.quality<.5;de++)for(var te=X*se[de],ge=0,ye=$.length;ge<ye;ge++){var ke=$[ge],Me=ke.length;if(te<=Me){var J=ke.curve,Be=J._path,lt=Be._parent,nt=lt instanceof qe?lt:Be,et=b.clamp(J.getTimeAt(te),ae,le),Ze=J.getPointAtTime(et),pt=d(J.getTangentAtTime(et).y)<Math.SQRT1_2,ot=null;if(q.subtract&&k){var _t=nt===B?k:B,Tt=_t._getWinding(Ze,pt,!0);if(nt===B&&Tt.winding||nt===k&&!Tt.winding){if(Tt.quality<1)continue;ot={winding:0,quality:1}}}ot=ot||U(Ze,L[Be._id][J.getIndex()],pt,!0),ot.quality>ie.quality&&(ie=ot);break}te-=Me}for(var ge=$.length-1;ge>=0;ge--)$[ge].segment._winding=ie}function H(V,B){var k=[],L;function q(Ot){var Dt;return!!(Ot&&!Ot._visited&&(!B||B[(Dt=Ot._winding||{}).winding]&&!(B.unite&&Dt.winding===2&&Dt.windingL&&Dt.windingR)))}function $(Ot){if(Ot){for(var Dt=0,Ct=L.length;Dt<Ct;Dt++)if(Ot===L[Dt])return!0}return!1}function Q(Ot){for(var Dt=Ot._segments,Ct=0,rr=Dt.length;Ct<rr;Ct++)Dt[Ct]._visited=!0}function X(Ot,Dt){var Ct=Ot._intersection,rr=Ct,Hn=[];Dt&&(L=[Ot]);function pr(An,Yt){for(;An&&An!==Yt;){var Kn=An._segment,pi=Kn&&Kn._path;if(pi){var rn=Kn.getNext()||pi.getFirstSegment(),Zo=rn._intersection;Kn!==Ot&&($(Kn)||$(rn)||rn&&q(Kn)&&(q(rn)||Zo&&q(Zo._segment)))&&Hn.push(Kn),Dt&&L.push(Kn)}An=An._next}}if(Ct){for(pr(Ct);Ct&&Ct._previous;)Ct=Ct._previous;pr(Ct,rr)}return Hn}V.sort(function(Ot,Dt){var Ct=Ot._intersection,rr=Dt._intersection,Hn=!!(Ct&&Ct._overlap),pr=!!(rr&&rr._overlap),An=Ot._path,Yt=Dt._path;return Hn^pr?Hn?1:-1:!Ct^!rr?Ct?1:-1:An!==Yt?An._id-Yt._id:Ot._index-Dt._index});for(var J=0,te=V.length;J<te;J++){var se=V[J],ie=q(se),ae=null,le=!1,de=!0,ge=[],ye,ke,Me;if(ie&&se._path._overlapsOnly){var Be=se._path,lt=se._intersection._segment._path;Be.compare(lt)&&(Be.getArea()&&k.push(Be.clone(!1)),Q(Be),Q(lt),ie=!1)}for(;ie;){var nt=!ae,et=X(se,nt),Ze=et.shift(),le=!nt&&($(se)||$(Ze)),pt=!le&&Ze;if(nt&&(ae=new Ne(fe.NO_INSERT),ye=null),le){(se.isFirst()||se.isLast())&&(de=se._path._closed),se._visited=!0;break}if(pt&&ye&&(ge.push(ye),ye=null),ye||(pt&&et.push(se),ye={start:ae._segments.length,crossings:et,visited:ke=[],handleIn:Me}),pt&&(se=Ze),!q(se)){ae.removeSegments(ye.start);for(var ot=0,_t=ke.length;ot<_t;ot++)ke[ot]._visited=!1;ke.length=0;do se=ye&&ye.crossings.shift(),(!se||!se._path)&&(se=null,ye=ge.pop(),ye&&(ke=ye.visited,Me=ye.handleIn));while(ye&&!q(se));if(!se)break}var Tt=se.getNext();ae.add(new Ae(se._point,Me,Tt&&se._handleOut)),se._visited=!0,ke.push(se),se=Tt||se._path.getFirstSegment(),Me=Tt&&Tt._handleIn}le&&(de&&(ae.getFirstSegment().setHandleIn(Me),ae.setClosed(de)),ae.getArea()!==0&&k.push(ae))}return k}return{_getWinding:function(V,B,k){return U(V,this.getCurves(),B,k)},unite:function(V,B){return C(this,V,"unite",B)},intersect:function(V,B){return C(this,V,"intersect",B)},subtract:function(V,B){return C(this,V,"subtract",B)},exclude:function(V,B){return C(this,V,"exclude",B)},divide:function(V,B){return B&&(B.trace==!1||B.stroke)?N(this,V,"divide"):T([this.subtract(V,B),this.intersect(V,B)],!0,this,V,B)},resolveCrossings:function(){var V=this._children,B=V||[this];function k(ye,ke){var Me=ye&&ye._intersection;return Me&&Me._overlap&&Me._path===ke}var L=!1,q=!1,$=this.getIntersections(null,function(ye){return ye.hasOverlap()&&(L=!0)||ye.isCrossing()&&(q=!0)}),Q=L&&q&&[];if($=Ut.expand($),L)for(var X=A($,function(ye){return ye.hasOverlap()},Q),J=X.length-1;J>=0;J--){var te=X[J],se=te._path,ie=te._segment,ae=ie.getPrevious(),le=ie.getNext();k(ae,se)&&k(le,se)&&(ie.remove(),ae._handleOut._set(0,0),le._handleIn._set(0,0),ae!==ie&&!ae.getCurve().hasLength()&&(le._handleIn.set(ae._handleIn),ae.remove()))}q&&(A($,L&&function(ye){var ke=ye.getCurve(),Me=ye.getSegment(),Be=ye._intersection,lt=Be._curve,nt=Be._segment;if(ke&&lt&&ke._path&&lt._path)return!0;Me&&(Me._intersection=null),nt&&(nt._intersection=null)},Q),Q&&O(Q),B=H(o.each(B,function(ye){o.push(this,ye._segments)},[])));var de=B.length,ge;return de>1&&V?(B!==V&&this.setChildren(B),ge=this):de===1&&!V&&(B[0]!==this&&this.setSegments(B[0].removeSegments()),ge=this),ge||(ge=new qe(fe.NO_INSERT),ge.addChildren(B),ge=ge.reduce(),ge.copyAttributes(this),this.replaceWith(ge)),ge},reorient:function(V,B){var k=this._children;return k&&k.length?this.setChildren(P(this.removeChildren(),function(L){return!!(V?L:L&1)},B)):B!==n&&this.setClockwise(B),this},getInteriorPoint:function(){var V=this.getBounds(),B=V.getCenter(!0);if(!this.contains(B)){for(var k=this.getCurves(),L=B.y,q=[],$=[],Q=0,X=k.length;Q<X;Q++){var J=k[Q].getValues(),te=J[1],se=J[3],ie=J[5],ae=J[7];if(L>=a(te,se,ie,ae)&&L<=c(te,se,ie,ae))for(var le=Ce.getMonoCurves(J),de=0,ge=le.length;de<ge;de++){var ye=le[de],ke=ye[1],Me=ye[7];if(ke!==Me&&(L>=ke&&L<=Me||L>=Me&&L<=ke)){var Be=L===ke?ye[0]:L===Me?ye[6]:Ce.solveCubic(ye,1,L,$,0,1)===1?Ce.getPoint(ye,$[0]).x:(ye[0]+ye[6])/2;q.push(Be)}}}q.length>1&&(q.sort(function(lt,nt){return lt-nt}),B.x=(q[0]+q[1])/2)}return B}}});var Pt=o.extend({_class:"PathFlattener",initialize:function(a,c,d,g,m){var w=[],T=[],E=0,C=1/(d||32),N=a._segments,R=N[0],O;function P(H,V){var B=Ce.getValues(H,V,m);w.push(B),A(B,H._index,0,1)}function A(H,V,B,k){if(k-B>C&&!(g&&Ce.isStraight(H))&&!Ce.isFlatEnough(H,c||.25)){var L=Ce.subdivide(H,.5),q=(B+k)/2;A(L[0],V,B,q),A(L[1],V,q,k)}else{var $=H[6]-H[0],Q=H[7]-H[1],X=Math.sqrt($*$+Q*Q);X>0&&(E+=X,T.push({offset:E,curve:H,index:V,time:k}))}}for(var U=1,W=N.length;U<W;U++)O=N[U],P(R,O),R=O;a._closed&&P(O||R,N[0]),this.curves=w,this.parts=T,this.length=E,this.index=0},_get:function(a){for(var c=this.parts,d=c.length,g,m=this.index;g=m,!(!m||c[--m].offset<a););for(;g<d;g++){var w=c[g];if(w.offset>=a){this.index=g;var T=c[g-1],E=T&&T.index===w.index?T.time:0,C=T?T.offset:0;return{index:w.index,time:E+(w.time-E)*(a-C)/(w.offset-C)}}}return{index:c[d-1].index,time:1}},drawPart:function(a,c,d){for(var g=this._get(c),m=this._get(d),w=g.index,T=m.index;w<=T;w++){var E=Ce.getPart(this.curves[w],w===g.index?g.time:0,w===m.index?m.time:1);w===g.index&&a.moveTo(E[0],E[1]),a.bezierCurveTo.apply(a,E.slice(2))}}},o.each(Ce._evaluateMethods,function(a){this[a+"At"]=function(c){var d=this._get(c);return Ce[a](this.curves[d.index],d.time)}},{})),rt=o.extend({initialize:function(a){for(var c=this.points=[],d=a._segments,g=a._closed,m=0,w,T=d.length;m<T;m++){var E=d[m].point;(!w||!w.equals(E))&&c.push(w=E.clone())}g&&(c.unshift(c[c.length-1]),c.push(c[1])),this.closed=g},fit:function(a){var c=this.points,d=c.length,g=null;return d>0&&(g=[new Ae(c[0])],d>1&&(this.fitCubic(g,a,0,d-1,c[1].subtract(c[0]),c[d-2].subtract(c[d-1])),this.closed&&(g.shift(),g.pop()))),g},fitCubic:function(a,c,d,g,m,w){var T=this.points;if(g-d===1){var E=T[d],C=T[g],N=E.getDistance(C)/3;this.addCurve(a,[E,E.add(m.normalize(N)),C.add(w.normalize(N)),C]);return}for(var R=this.chordLengthParameterize(d,g),O=Math.max(c,c*c),P,A=!0,U=0;U<=4;U++){var W=this.generateBezier(d,g,R,m,w),H=this.findMaxError(d,g,W,R);if(H.error<c&&A){this.addCurve(a,W);return}if(P=H.index,H.error>=O)break;A=this.reparameterize(d,g,R,W),O=H.error}var V=T[P-1].subtract(T[P+1]);this.fitCubic(a,c,d,P,m,V),this.fitCubic(a,c,P,g,V.negate(),w)},addCurve:function(a,c){var d=a[a.length-1];d.setHandleOut(c[1].subtract(c[0])),a.push(new Ae(c[3],c[2].subtract(c[3])))},generateBezier:function(a,c,d,g,m){for(var w=1e-12,T=Math.abs,E=this.points,C=E[a],N=E[c],R=[[0,0],[0,0]],O=[0,0],P=0,A=c-a+1;P<A;P++){var U=d[P],W=1-U,H=3*U*W,V=W*W*W,B=H*W,k=H*U,L=U*U*U,q=g.normalize(B),$=m.normalize(k),Q=E[a+P].subtract(C.multiply(V+B)).subtract(N.multiply(k+L));R[0][0]+=q.dot(q),R[0][1]+=q.dot($),R[1][0]=R[0][1],R[1][1]+=$.dot($),O[0]+=q.dot(Q),O[1]+=$.dot(Q)}var X=R[0][0]*R[1][1]-R[1][0]*R[0][1],J,te;if(T(X)>w){var se=R[0][0]*O[1]-R[1][0]*O[0],ie=O[0]*R[1][1]-O[1]*R[0][1];J=ie/X,te=se/X}else{var ae=R[0][0]+R[0][1],le=R[1][0]+R[1][1];J=te=T(ae)>w?O[0]/ae:T(le)>w?O[1]/le:0}var de=N.getDistance(C),ge=w*de,ye,ke;if(J<ge||te<ge)J=te=de/3;else{var Me=N.subtract(C);ye=g.normalize(J),ke=m.normalize(te),ye.dot(Me)-ke.dot(Me)>de*de&&(J=te=de/3,ye=ke=null)}return[C,C.add(ye||g.normalize(J)),N.add(ke||m.normalize(te)),N]},reparameterize:function(a,c,d,g){for(var m=a;m<=c;m++)d[m-a]=this.findRoot(g,this.points[m],d[m-a]);for(var m=1,w=d.length;m<w;m++)if(d[m]<=d[m-1])return!1;return!0},findRoot:function(a,c,d){for(var g=[],m=[],w=0;w<=2;w++)g[w]=a[w+1].subtract(a[w]).multiply(3);for(var w=0;w<=1;w++)m[w]=g[w+1].subtract(g[w]).multiply(2);var T=this.evaluate(3,a,d),E=this.evaluate(2,g,d),C=this.evaluate(1,m,d),N=T.subtract(c),R=E.dot(E)+N.dot(C);return b.isMachineZero(R)?d:d-N.dot(E)/R},evaluate:function(a,c,d){for(var g=c.slice(),m=1;m<=a;m++)for(var w=0;w<=a-m;w++)g[w]=g[w].multiply(1-d).add(g[w+1].multiply(d));return g[0]},chordLengthParameterize:function(a,c){for(var d=[0],g=a+1;g<=c;g++)d[g-a]=d[g-a-1]+this.points[g].getDistance(this.points[g-1]);for(var g=1,m=c-a;g<=m;g++)d[g]/=d[m];return d},findMaxError:function(a,c,d,g){for(var m=Math.floor((c-a+1)/2),w=0,T=a+1;T<c;T++){var E=this.evaluate(3,d,g[T-a]),C=E.subtract(this.points[T]),N=C.x*C.x+C.y*C.y;N>=w&&(w=N,m=T)}return{error:w,index:m}}}),Kt=fe.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(c){this._content="",this._lines=[];var d=c&&o.isPlainObject(c)&&c.x===n&&c.y===n;this._initialize(d&&c,!d&&I.read(arguments))},_equals:function(a){return this._content===a._content},copyContent:function(a){this.setContent(a._content)},getContent:function(){return this._content},setContent:function(a){this._content=""+a,this._lines=this._content.split(/\r\n|\n|\r/mg),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),It=Kt.extend({_class:"PointText",initialize:function(){Kt.apply(this,arguments)},getPoint:function(){var a=this._matrix.getTranslation();return new M(a.x,a.y,this,"setPoint")},setPoint:function(){var a=I.read(arguments);this.translate(a.subtract(this._matrix.getTranslation()))},_draw:function(a,c,d){if(this._content){this._setStyles(a,c,d);var g=this._lines,m=this._style,w=m.hasFill(),T=m.hasStroke(),E=m.getLeading(),C=a.shadowColor;a.font=m.getFontStyle(),a.textAlign=m.getJustification();for(var N=0,R=g.length;N<R;N++){a.shadowColor=C;var O=g[N];w&&(a.fillText(O,0,0),a.shadowColor="rgba(0,0,0,0)"),T&&a.strokeText(O,0,0),a.translate(0,E)}}},_getBounds:function(a,c){var d=this._style,g=this._lines,m=g.length,w=d.getJustification(),T=d.getLeading(),E=this.getView().getTextWidth(d.getFontStyle(),g),C=0;w!=="left"&&(C-=E/(w==="center"?2:1));var N=new z(C,m?-.75*T:0,E,m*T);return a?a._transformBounds(N,N):N}}),zt=o.extend(new function(){var a={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},c={},d={transparent:[0,0,0,0]},g;function m(E){var C=E.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||E.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),N="rgb",R;if(C){var O=C[4]?4:3;R=new Array(O);for(var P=0;P<O;P++){var A=C[P+1];R[P]=parseInt(A.length==1?A+A:A,16)/255}}else if(C=E.match(/^(rgb|hsl)a?\((.*)\)$/)){N=C[1],R=C[2].trim().split(/[,\s]+/g);for(var U=N==="hsl",P=0,W=Math.min(R.length,4);P<W;P++){var H=R[P],A=parseFloat(H);if(U)if(P===0){var V=H.match(/([a-z]*)$/)[1];A*={turn:360,rad:180/Math.PI,grad:.9}[V]||1}else P<3&&(A/=100);else P<3&&(A/=/%$/.test(H)?100:255);R[P]=A}}else{var B=d[E];if(!B)if(r){g||(g=Sn.getContext(1,1,{willReadFrequently:!0}),g.globalCompositeOperation="copy"),g.fillStyle="rgba(0,0,0,0)",g.fillStyle=E,g.fillRect(0,0,1,1);var k=g.getImageData(0,0,1,1).data;B=d[E]=[k[0]/255,k[1]/255,k[2]/255]}else B=[0,0,0];R=B.slice()}return[N,R]}var w=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],T={"rgb-hsb":function(E,C,N){var R=Math.max(E,C,N),O=Math.min(E,C,N),P=R-O,A=P===0?0:(R==E?(C-N)/P+(C<N?6:0):R==C?(N-E)/P+2:(E-C)/P+4)*60;return[A,R===0?0:P/R,R]},"hsb-rgb":function(E,C,N){E=(E/60%6+6)%6;var O=Math.floor(E),R=E-O,O=w[O],P=[N,N*(1-C),N*(1-C*R),N*(1-C*(1-R))];return[P[O[0]],P[O[1]],P[O[2]]]},"rgb-hsl":function(E,C,N){var R=Math.max(E,C,N),O=Math.min(E,C,N),P=R-O,A=P===0,U=A?0:(R==E?(C-N)/P+(C<N?6:0):R==C?(N-E)/P+2:(E-C)/P+4)*60,W=(R+O)/2,H=A?0:W<.5?P/(R+O):P/(2-R-O);return[U,H,W]},"hsl-rgb":function(E,C,N){if(E=(E/360%1+1)%1,C===0)return[N,N,N];for(var R=[E+1/3,E,E-1/3],O=N<.5?N*(1+C):N+C-N*C,P=2*N-O,A=[],U=0;U<3;U++){var W=R[U];W<0&&(W+=1),W>1&&(W-=1),A[U]=6*W<1?P+(O-P)*6*W:2*W<1?O:3*W<2?P+(O-P)*(2/3-W)*6:P}return A},"rgb-gray":function(E,C,N){return[E*.2989+C*.587+N*.114]},"gray-rgb":function(E){return[E,E,E]},"gray-hsb":function(E){return[0,0,E]},"gray-hsl":function(E){return[0,0,E]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return o.each(a,function(E,C){c[C]=[],o.each(E,function(N,R){var O=o.capitalize(N),P=/^(hue|saturation)$/.test(N),A=c[C][R]=C==="gradient"?N==="gradient"?function(U){var W=this._components[0];return U=Nn.read(Array.isArray(U)?U:arguments,0,{readNull:!0}),W!==U&&(W&&W._removeOwner(this),U&&U._addOwner(this)),U}:function(){return I.read(arguments,0,{readNull:N==="highlight",clone:!0})}:function(U){return U==null||isNaN(U)?0:+U};this["get"+O]=function(){return this._type===C||P&&/^hs[bl]$/.test(this._type)?this._components[R]:this._convert(C)[R]},this["set"+O]=function(U){this._type!==C&&!(P&&/^hs[bl]$/.test(this._type))&&(this._components=this._convert(C),this._properties=a[C],this._type=C),this._components[R]=A.call(this,U),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function E(C){var N=arguments,R=this.__read,O=0,P,A,U,W;Array.isArray(C)&&(N=C,C=N[0]);var H=C!=null&&typeof C;if(H==="string"&&C in a&&(P=C,C=N[1],Array.isArray(C)?(A=C,U=N[2]):(R&&(O=1),N=o.slice(N,1),H=typeof C)),!A){if(W=H==="number"?N:H==="object"&&C.length!=null?C:null,W){P||(P=W.length>=3?"rgb":"gray");var V=a[P].length;U=W[V],R&&(O+=W===arguments?V+(U!=null?1:0):1),W.length>V&&(W=o.slice(W,0,V))}else if(H==="string"){var B=m(C);P=B[0],A=B[1],A.length===4&&(U=A[3],A.length--)}else if(H==="object")if(C.constructor===E){if(P=C._type,A=C._components.slice(),U=C._alpha,P==="gradient")for(var k=1,L=A.length;k<L;k++){var q=A[k];q&&(A[k]=q.clone())}}else if(C.constructor===Nn)P="gradient",W=N;else{P="hue"in C?"lightness"in C?"hsl":"hsb":"gradient"in C||"stops"in C||"radial"in C?"gradient":"gray"in C?"gray":"rgb";var $=a[P],Q=c[P];this._components=A=[];for(var k=0,L=$.length;k<L;k++){var X=C[$[k]];X==null&&!k&&P==="gradient"&&"stops"in C&&(X={stops:C.stops,radial:C.radial}),X=Q[k].call(this,X),X!=null&&(A[k]=X)}U=C.alpha}R&&P&&(O=1)}if(this._type=P||"rgb",!A){this._components=A=[];for(var Q=c[this._type],k=0,L=Q.length;k<L;k++){var X=Q[k].call(this,W&&W[k]);X!=null&&(A[k]=X)}}return this._components=A,this._properties=a[this._type],this._alpha=U,R&&(this.__read=O),this},set:"#initialize",_serialize:function(E,C){var N=this.getComponents();return o.serialize(/^(gray|rgb)$/.test(this._type)?N:[this._type].concat(N),E,!0,C)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(E){var C;return this._type===E?this._components.slice():(C=T[this._type+"-"+E])?C.apply(this,this._components):T["rgb-"+E].apply(this,T[this._type+"-rgb"].apply(this,this._components))},convert:function(E){return new zt(E,this._convert(E),this._alpha)},getType:function(){return this._type},setType:function(E){this._components=this._convert(E),this._properties=a[E],this._type=E},getComponents:function(){var E=this._components.slice();return this._alpha!=null&&E.push(this._alpha),E},getAlpha:function(){return this._alpha!=null?this._alpha:1},setAlpha:function(E){this._alpha=E==null?null:Math.min(Math.max(E,0),1),this._changed()},hasAlpha:function(){return this._alpha!=null},equals:function(E){var C=o.isPlainValue(E,!0)?zt.read(arguments):E;return C===this||C&&this._class===C._class&&this._type===C._type&&this.getAlpha()===C.getAlpha()&&o.equals(this._components,C._components)||!1},toString:function(){for(var E=this._properties,C=[],N=this._type==="gradient",R=_.instance,O=0,P=E.length;O<P;O++){var A=this._components[O];A!=null&&C.push(E[O]+": "+(N?A:R.number(A)))}return this._alpha!=null&&C.push("alpha: "+R.number(this._alpha)),"{ "+C.join(", ")+" }"},toCSS:function(E){var C=this._convert("rgb"),N=E||this._alpha==null?1:this._alpha;function R(O){return Math.round((O<0?0:O>1?1:O)*255)}return C=[R(C[0]),R(C[1]),R(C[2])],N<1&&C.push(N<0?0:N),E?"#"+((1<<24)+(C[0]<<16)+(C[1]<<8)+C[2]).toString(16).slice(1):(C.length==4?"rgba(":"rgb(")+C.join(",")+")"},toCanvasStyle:function(E,C){if(this._canvasStyle)return this._canvasStyle;if(this._type!=="gradient")return this._canvasStyle=this.toCSS();var N=this._components,R=N[0],O=R._stops,P=N[1],A=N[2],U=N[3],W=C&&C.inverted(),H;if(W&&(P=W._transformPoint(P),A=W._transformPoint(A),U&&(U=W._transformPoint(U))),R._radial){var V=A.getDistance(P);if(U){var B=U.subtract(P);B.getLength()>V&&(U=P.add(B.normalize(V-.1)))}var k=U||P;H=E.createRadialGradient(k.x,k.y,0,P.x,P.y,V)}else H=E.createLinearGradient(P.x,P.y,A.x,A.y);for(var L=0,q=O.length;L<q;L++){var $=O[L],Q=$._offset;H.addColorStop(Q??L/(q-1),$._color.toCanvasStyle())}return this._canvasStyle=H},transform:function(E){if(this._type==="gradient"){for(var C=this._components,N=1,R=C.length;N<R;N++){var O=C[N];E._transformPoint(O,O,!0)}this._changed()}},statics:{_types:a,random:function(){var E=Math.random;return new zt(E(),E(),E())},_setOwner:function(E,C,N){return E&&(E._owner&&C&&E._owner!==C&&(E=E.clone()),!E._owner^!C&&(E._owner=C||null,E._setter=N||null)),E}}})},new function(){var a={add:function(c,d){return c+d},subtract:function(c,d){return c-d},multiply:function(c,d){return c*d},divide:function(c,d){return c/d}};return o.each(a,function(c,d){this[d]=function(g){g=zt.read(arguments);for(var m=this._type,w=this._components,T=g._convert(m),E=0,C=w.length;E<C;E++)T[E]=c(w[E],T[E]);return new zt(m,T,this._alpha!=null?c(this._alpha,g.getAlpha()):null)}},{})}),Nn=o.extend({_class:"Gradient",initialize:function(c,d){this._id=S.get(),c&&o.isPlainObject(c)&&(this.set(c),c=d=null),this._stops==null&&this.setStops(c||["white","black"]),this._radial==null&&this.setRadial(typeof d=="string"&&d==="radial"||d||!1)},_serialize:function(a,c){return c.add(this,function(){return o.serialize([this._stops,this._radial],a,!0,c)})},_changed:function(){for(var a=0,c=this._owners&&this._owners.length;a<c;a++)this._owners[a]._changed()},_addOwner:function(a){this._owners||(this._owners=[]),this._owners.push(a)},_removeOwner:function(a){var c=this._owners?this._owners.indexOf(a):-1;c!=-1&&(this._owners.splice(c,1),this._owners.length||(this._owners=n))},clone:function(){for(var a=[],c=0,d=this._stops.length;c<d;c++)a[c]=this._stops[c].clone();return new Nn(a,this._radial)},getStops:function(){return this._stops},setStops:function(a){if(a.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var c=this._stops;if(c)for(var d=0,g=c.length;d<g;d++)c[d]._owner=n;c=this._stops=Rt.readList(a,0,{clone:!0});for(var d=0,g=c.length;d<g;d++)c[d]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(a){this._radial=a,this._changed()},equals:function(a){if(a===this)return!0;if(a&&this._class===a._class){var c=this._stops,d=a._stops,g=c.length;if(g===d.length){for(var m=0;m<g;m++)if(!c[m].equals(d[m]))return!1;return!0}}return!1}}),Rt=o.extend({_class:"GradientStop",initialize:function(c,d){var g=c,m=d;typeof c=="object"&&d===n&&(Array.isArray(c)&&typeof c[0]!="number"?(g=c[0],m=c[1]):("color"in c||"offset"in c||"rampPoint"in c)&&(g=c.color,m=c.offset||c.rampPoint||0)),this.setColor(g),this.setOffset(m)},clone:function(){return new Rt(this._color.clone(),this._offset)},_serialize:function(a,c){var d=this._color,g=this._offset;return o.serialize(g==null?[d]:[d,g],a,!0,c)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(a){this._offset=a,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){zt._setOwner(this._color,null),this._color=zt._setOwner(zt.read(arguments,0),this,"setColor"),this._changed()},equals:function(a){return a===this||a&&this._class===a._class&&this._color.equals(a._color)&&this._offset==a._offset||!1}}),xs=o.extend(new function(){var a={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new I,selectedColor:null},c=o.set({},a,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),d=o.set({},c,{fillColor:new zt}),g={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},m={beans:!0},w={_class:"Style",beans:!0,initialize:function(E,C,N){this._values={},this._owner=C,this._project=C&&C._project||N||At.project,this._defaults=!C||C instanceof me?c:C instanceof Kt?d:a,E&&this.set(E)}};return o.each(c,function(T,E){var C=/Color$/.test(E),N=E==="shadowOffset",R=o.capitalize(E),O=g[E],P="set"+R,A="get"+R;w[P]=function(U){var W=this._owner,H=W&&W._children,V=H&&H.length>0&&!(W instanceof qe);if(V)for(var B=0,k=H.length;B<k;B++)H[B]._style[P](U);if((E==="selectedColor"||!V)&&E in this._defaults){var L=this._values[E];L!==U&&(C&&(L&&(zt._setOwner(L,null),L._canvasStyle=null),U&&U.constructor===zt&&(U=zt._setOwner(U,W,V&&P))),this._values[E]=U,W&&W._changed(O||129))}},w[A]=function(U){var W=this._owner,H=W&&W._children,V=H&&H.length>0&&!(W instanceof qe),B;if(V&&!U)for(var k=0,L=H.length;k<L;k++){var q=H[k]._style[A]();if(!k)B=q;else if(!o.equals(B,q))return n}else if(E in this._defaults){var B=this._values[E];if(B===n)B=this._defaults[E],B&&B.clone&&(B=B.clone());else{var $=C?zt:N?I:null;$&&!(B&&B.constructor===$)&&(this._values[E]=B=$.read([B],0,{readNull:!0,clone:!0}))}}return B&&C&&(B=zt._setOwner(B,W,V&&P)),B},m[A]=function(U){return this._style[A](U)},m[P]=function(U){this._style[P](U)}}),o.each({Font:"FontFamily",WindingRule:"FillRule"},function(T,E){var C="get"+E,N="set"+E;w[C]=m[C]="#get"+T,w[N]=m[N]="#set"+T}),fe.inject(m),w},{set:function(a){var c=a instanceof xs,d=c?a._values:a;if(d){for(var g in d)if(g in this._defaults){var m=d[g];this[g]=m&&c&&m.clone?m.clone():m}}},equals:function(a){function c(d,g,m){var w=d._values,T=g._values,E=g._defaults;for(var C in w){var N=w[C],R=T[C];if(!(m&&C in T)&&!o.equals(N,R===n?E[C]:R))return!1}return!0}return a===this||a&&this._class===a._class&&c(this,a)&&c(a,this,!0)||!1},_dispose:function(){var a;a=this.getFillColor(),a&&(a._canvasStyle=null),a=this.getStrokeColor(),a&&(a._canvasStyle=null),a=this.getShadowColor(),a&&(a._canvasStyle=null)},hasFill:function(){var a=this.getFillColor();return!!a&&a.alpha>0},hasStroke:function(){var a=this.getStrokeColor();return!!a&&a.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var a=this.getShadowColor();return!!a&&a.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var a=this.getFontSize();return this.getFontWeight()+" "+a+(/[a-z]/i.test(a+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function a(){var c=a.base.call(this),d=this.getFontSize();return/pt|em|%|px/.test(d)&&(d=this.getView().getPixelSize(d)),c??d*1.2}}),ce=new function(){function a(c,d,g,m){for(var w=["","webkit","moz","Moz","ms","o"],T=d[0].toUpperCase()+d.substring(1),E=0;E<6;E++){var C=w[E],N=C?C+T:d;if(N in c){if(g)c[N]=m;else return c[N];break}}}return{getStyles:function(c){var d=c&&c.nodeType!==9?c.ownerDocument:c,g=d&&d.defaultView;return g&&g.getComputedStyle(c,"")},getBounds:function(c,d){var g=c.ownerDocument,m=g.body,w=g.documentElement,T;try{T=c.getBoundingClientRect()}catch{T={left:0,top:0,width:0,height:0}}var E=T.left-(w.clientLeft||m.clientLeft||0),C=T.top-(w.clientTop||m.clientTop||0);if(!d){var N=g.defaultView;E+=N.pageXOffset||w.scrollLeft||m.scrollLeft,C+=N.pageYOffset||w.scrollTop||m.scrollTop}return new z(E,C,T.width,T.height)},getViewportBounds:function(c){var d=c.ownerDocument,g=d.defaultView,m=d.documentElement;return new z(0,0,g.innerWidth||m.clientWidth,g.innerHeight||m.clientHeight)},getOffset:function(c,d){return ce.getBounds(c,d).getPoint()},getSize:function(c){return ce.getBounds(c,!0).getSize()},isInvisible:function(c){return ce.getSize(c).equals(new D(0,0))},isInView:function(c){return!ce.isInvisible(c)&&ce.getViewportBounds(c).intersects(ce.getBounds(c,!0))},isInserted:function(c){return i.body.contains(c)},getPrefixed:function(c,d){return c&&a(c,d)},setPrefixed:function(c,d,g){if(typeof d=="object")for(var m in d)a(c,m,!0,d[m]);else a(c,d,!0,g)}}},ve={add:function(a,c){if(a)for(var d in c)for(var g=c[d],m=d.split(/[\s,]+/g),w=0,T=m.length;w<T;w++){var E=m[w],C=a===i&&(E==="touchstart"||E==="touchmove")?{passive:!1}:!1;a.addEventListener(E,g,C)}},remove:function(a,c){if(a)for(var d in c)for(var g=c[d],m=d.split(/[\s,]+/g),w=0,T=m.length;w<T;w++)a.removeEventListener(m[w],g,!1)},getPoint:function(a){var c=a.targetTouches?a.targetTouches.length?a.targetTouches[0]:a.changedTouches[0]:a;return new I(c.pageX||c.clientX+i.documentElement.scrollLeft,c.pageY||c.clientY+i.documentElement.scrollTop)},getTarget:function(a){return a.target||a.srcElement},getRelatedTarget:function(a){return a.relatedTarget||a.toElement},getOffset:function(a,c){return ve.getPoint(a).subtract(ce.getOffset(c||ve.getTarget(a)))}};ve.requestAnimationFrame=new function(){var a=ce.getPrefixed(r,"requestAnimationFrame"),c=!1,d=[],g;function m(){var w=d;d=[];for(var T=0,E=w.length;T<E;T++)w[T]();c=a&&d.length,c&&a(m)}return function(w){d.push(w),a?c||(a(m),c=!0):g||(g=setInterval(m,1e3/60))}};var _e=o.extend(u,{_class:"View",initialize:function a(c,d){function g(O){return d[O]||parseInt(d.getAttribute(O),10)}function m(){var O=ce.getSize(d);return O.isNaN()||O.isZero()?new D(g("width"),g("height")):O}var w;if(r&&d){this._id=d.getAttribute("id"),this._id==null&&d.setAttribute("id",this._id="paper-view-"+a._id++),ve.add(d,this._viewEvents);var T="none";if(ce.setPrefixed(d.style,{userDrag:T,userSelect:T,touchCallout:T,contentZooming:T,tapHighlightColor:"rgba(0,0,0,0)"}),h.hasAttribute(d,"resize")){var E=this;ve.add(r,this._windowEvents={resize:function(){E.setViewSize(m())}})}if(w=m(),h.hasAttribute(d,"stats")&&typeof Stats<"u"){this._stats=new Stats;var C=this._stats.domElement,N=C.style,R=ce.getOffset(d);N.position="absolute",N.left=R.x+"px",N.top=R.y+"px",i.body.appendChild(C)}}else w=new D(d),d=null;this._project=c,this._scope=c._scope,this._element=d,this._pixelRatio||(this._pixelRatio=r&&r.devicePixelRatio||1),this._setElementSize(w.width,w.height),this._viewSize=w,a._views.push(this),a._viewsById[this._id]=this,(this._matrix=new K)._owner=this,a._focused||(a._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!At.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;_e._focused===this&&(_e._focused=null),_e._views.splice(_e._views.indexOf(this),1),delete _e._viewsById[this._id];var a=this._project;return a._view===this&&(a._view=null),ve.remove(this._element,this._viewEvents),ve.remove(r,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:o.each(fe._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(a){this[a]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(a){this._autoUpdate=a,a&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var a=this;ve.requestAnimationFrame(function(){if(a._requested=!1,a._animate){a.requestUpdate();var c=a._element;(!ce.getPrefixed(i,"hidden")||h.getAttribute(c,"keepalive")==="true")&&ce.isInView(c)&&a._handleFrame()}a._autoUpdate&&a.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){At=this._scope;var a=Date.now()/1e3,c=this._last?a-this._last:0;this._last=a,this.emit("frame",new o({delta:c,time:this._time+=c,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(a,c){var d=this._frameItems;c?(d[a._id]={item:a,time:0,count:0},++this._frameItemCount===1&&this.on("frame",this._handleFrameItems)):(delete d[a._id],--this._frameItemCount===0&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(a){for(var c in this._frameItems){var d=this._frameItems[c];d.item.emit("frame",new o(a,{time:d.time+=a.delta,count:d.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=n},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return this._pixelRatio*72},getViewSize:function(){var a=this._viewSize;return new ne(a.width,a.height,this,"setViewSize")},setViewSize:function(){var a=D.read(arguments),c=a.subtract(this._viewSize);c.isZero()||(this._setElementSize(a.width,a.height),this._viewSize.set(a),this._changed(),this.emit("resize",{size:a,delta:c}),this._autoUpdate&&this.update())},_setElementSize:function(a,c){var d=this._element;d&&(d.width!==a&&(d.width=a),d.height!==c&&(d.height=c))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new z(new I,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return ce.isInView(this._element)},isInserted:function(){return ce.isInserted(this._element)},getPixelSize:function(a){var c=this._element,d;if(c){var g=c.parentNode,m=i.createElement("div");m.style.fontSize=a,g.appendChild(m),d=parseFloat(ce.getStyles(m).fontSize),g.removeChild(m)}else d=parseFloat(d);return d},getTextWidth:function(a,c){return 0}},o.each(["rotate","scale","shear","skew"],function(a){var c=a==="rotate";this[a]=function(){var d=arguments,g=(c?o:I).read(d),m=I.read(d,0,{readNull:!0});return this.transform(new K()[a](g,m||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var a=new K;return this.transform(a.translate.apply(a,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var a=I.read(arguments);this.translate(this.getCenter().subtract(a))},getZoom:function(){var a=this._decompose().scaling;return(a.x+a.y)/2},setZoom:function(a){this.transform(new K().scale(a/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(a){var c=this.getRotation();c!=null&&a!=null&&this.rotate(a-c)},getScaling:function(){var a=this._decompose().scaling;return new M(a.x,a.y,this,"setScaling")},setScaling:function(){var a=this.getScaling(),c=I.read(arguments,0,{clone:!0,readNull:!0});a&&c&&this.scale(c.x/a.x,c.y/a.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var a=this._matrix;a.set.apply(a,arguments)},transform:function(a){this._matrix.append(a)},scrollBy:function(){this.translate(I.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(I.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(I.read(arguments))},getEventPoint:function(a){return this.viewToProject(ve.getOffset(a,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(a,c){i&&typeof c=="string"&&(c=i.getElementById(c));var d=r?je:_e;return new d(a,c)}}},new function(){if(!r)return;var a,c,d=!1,g=!1;function m(ie){var ae=ve.getTarget(ie);return ae.getAttribute&&_e._viewsById[ae.getAttribute("id")]}function w(){var ie=_e._focused;if(!ie||!ie.isVisible()){for(var ae=0,le=_e._views.length;ae<le;ae++)if((ie=_e._views[ae]).isVisible()){_e._focused=c=ie;break}}}function T(ie,ae,le){ie._handleMouseEvent("mousemove",ae,le)}var E=r.navigator,C,N,R;E.pointerEnabled||E.msPointerEnabled?(C="pointerdown MSPointerDown",N="pointermove MSPointerMove",R="pointerup pointercancel MSPointerUp MSPointerCancel"):(C="touchstart",N="touchmove",R="touchend touchcancel","ontouchstart"in r&&E.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(C+=" mousedown",N+=" mousemove",R+=" mouseup"));var O={},P={mouseout:function(ie){var ae=_e._focused,le=ve.getRelatedTarget(ie);if(ae&&(!le||le.nodeName==="HTML")){var de=ve.getOffset(ie,ae._element),ge=de.x,ye=Math.abs,ke=ye(ge),Me=1<<25,Be=ke-Me;de.x=ye(Be)<ke?Be*(ge<0?-1:1):ge,T(ae,ie,ae.viewToProject(de))}},scroll:w};O[C]=function(ie){var ae=_e._focused=m(ie);d||(d=!0,ae._handleMouseEvent("mousedown",ie))},P[N]=function(ie){var ae=_e._focused;if(!g){var le=m(ie);le?ae!==le&&(ae&&T(ae,ie),a||(a=ae),ae=_e._focused=c=le):c&&c===ae&&(a&&!a.isInserted()&&(a=null),ae=_e._focused=a,a=null,w())}ae&&T(ae,ie)},P[C]=function(){g=!0},P[R]=function(ie){var ae=_e._focused;ae&&d&&ae._handleMouseEvent("mouseup",ie),g=d=!1},ve.add(i,P),ve.add(r,{load:w});var A=!1,U=!1,W={doubleclick:"click",mousedrag:"mousemove"},H=!1,V,B,k,L,q,$,Q,X;function J(ie,ae,le,de,ge,ye,ke){var Me=!1,Be;function lt(nt,et){if(nt.responds(et)){if(Be||(Be=new Vt(et,de,ge,ae||nt,ye?ge.subtract(ye):null)),nt.emit(et,Be)&&(A=!0,Be.prevented&&(U=!0),Be.stopped))return Me=!0}else{var Ze=W[et];if(Ze)return lt(nt,Ze)}}for(;ie&&ie!==ke&&!lt(ie,le);)ie=ie._parent;return Me}function te(ie,ae,le,de,ge,ye){return ie._project.removeOn(le),U=A=!1,q&&J(q,null,le,de,ge,ye)||ae&&ae!==q&&!ae.isDescendant(q)&&J(ae,null,le==="mousedrag"?"mousemove":le,de,ge,ye,q)||J(ie,q||ae||ie,le,de,ge,ye)}var se={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:O,_handleMouseEvent:function(ie,ae,le){var de=this._itemEvents,ge=de.native[ie],ye=ie==="mousemove",ke=this._scope.tool,Me=this;function Be(_t){return de.virtual[_t]||Me.responds(_t)||ke&&ke.responds(_t)}ye&&d&&Be("mousedrag")&&(ie="mousedrag"),le||(le=this.getEventPoint(ae));var lt=this.getBounds().contains(le),nt=ge&&lt&&Me._project.hitTest(le,{tolerance:0,fill:!0,stroke:!0}),et=nt&&nt.item||null,Ze=!1,pt={};if(pt[ie.substr(5)]=!0,ge&&et!==L&&(L&&J(L,null,"mouseleave",ae,le),et&&J(et,null,"mouseenter",ae,le),L=et),H^lt&&(J(this,null,lt?"mouseenter":"mouseleave",ae,le),Ze=!0),(lt||pt.drag)&&!le.equals(B)&&(te(this,et,ye?ie:"mousemove",ae,le,B),Ze=!0),H=lt,pt.down&&lt||pt.up&&V){if(te(this,et,ie,ae,le,V),pt.down){if(X=et===$&&Date.now()-Q<300,k=$=et,!U&&et){for(var ot=et;ot&&!ot.responds("mousedrag");)ot=ot._parent;ot&&(q=et)}V=le}else pt.up&&(!U&&et===k&&(Q=Date.now(),te(this,et,X?"doubleclick":"click",ae,le,V),X=!1),k=q=null);H=!1,Ze=!0}B=le,Ze&&ke&&(A=ke._handleMouseEvent(ie,ae,le,pt)||A),ae.cancelable!==!1&&(A&&!pt.move||pt.down&&Be("mouseup"))&&ae.preventDefault()},_handleKeyEvent:function(ie,ae,le,de){var ge=this._scope,ye=ge.tool,ke;function Me(Be){Be.responds(ie)&&(At=ge,Be.emit(ie,ke=ke||new Ve(ie,ae,le,de)))}this.isVisible()&&(Me(this),ye&&ye.responds(ie)&&Me(ye))},_countItemEvent:function(ie,ae){var le=this._itemEvents,de=le.native,ge=le.virtual;for(var ye in se)de[ye]=(de[ye]||0)+(se[ye][ie]||0)*ae;ge[ie]=(ge[ie]||0)+ae},statics:{updateFocus:w,_resetState:function(){d=g=A=H=!1,a=c=V=B=k=L=q=$=Q=X=null}}}}),je=_e.extend({_class:"CanvasView",initialize:function(c,d){if(!(d instanceof r.HTMLCanvasElement)){var g=D.read(arguments,1);if(g.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+o.slice(arguments,1));d=Sn.getCanvas(g)}var m=this._context=d.getContext("2d");if(m.save(),this._pixelRatio=1,!/^off|false$/.test(h.getAttribute(d,"hidpi"))){var w=r.devicePixelRatio||1,T=ce.getPrefixed(m,"backingStorePixelRatio")||1;this._pixelRatio=w/T}_e.call(this,c,d),this._needsUpdate=!0},remove:function a(){return this._context.restore(),a.base.call(this)},_setElementSize:function a(c,d){var g=this._pixelRatio;if(a.base.call(this,c*g,d*g),g!==1){var m=this._element,w=this._context;if(!h.hasAttribute(m,"resize")){var T=m.style;T.width=c+"px",T.height=d+"px"}w.restore(),w.save(),w.scale(g,g)}},getContext:function(){return this._context},getPixelSize:function a(c){var d=At.agent,g;if(d&&d.firefox)g=a.base.call(this,c);else{var m=this._context,w=m.font;m.font=c+" serif",g=parseFloat(m.font),m.font=w}return g},getTextWidth:function(a,c){var d=this._context,g=d.font,m=0;d.font=a;for(var w=0,T=c.length;w<T;w++)m=Math.max(m,d.measureText(c[w]).width);return d.font=g,m},update:function(){if(!this._needsUpdate)return!1;var a=this._project,c=this._context,d=this._viewSize;return c.clearRect(0,0,d.width+1,d.height+1),a&&a.draw(c,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),De=o.extend({_class:"Event",initialize:function(c){this.event=c,this.type=c&&c.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return He.modifiers}}),Ve=De.extend({_class:"KeyEvent",initialize:function(c,d,g,m){this.type=c,this.event=d,this.key=g,this.character=m},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),He=new function(){var a={"	":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},c={tab:"	",space:" ",enter:"\r"},d={},g={},m,w,T=new o({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var N=At&&At.agent;return N&&N.mac?this.meta:this.control}}});function E(N){var R=N.key||N.keyIdentifier;return R=/^U\+/.test(R)?String.fromCharCode(parseInt(R.substr(2),16)):/^Arrow[A-Z]/.test(R)?R.substr(5):R==="Unidentified"||R===n?String.fromCharCode(N.keyCode):R,a[R]||(R.length>1?o.hyphenate(R):R.toLowerCase())}function C(N,R,O,P){var A=_e._focused,U;if(d[R]=N,N?g[R]=O:delete g[R],R.length>1&&(U=o.camelize(R))in T){T[U]=N;var W=At&&At.agent;if(U==="meta"&&W&&W.mac)if(N)m={};else{for(var H in m)H in g&&C(!1,H,m[H],P);m=null}}else N&&m&&(m[R]=O);A&&A._handleKeyEvent(N?"keydown":"keyup",P,R,O)}return ve.add(i,{keydown:function(N){var R=E(N),O=At&&At.agent;R.length>1||O&&O.chrome&&(N.altKey||O.mac&&N.metaKey||!O.mac&&N.ctrlKey)?C(!0,R,c[R]||(R.length>1?"":R),N):w=R},keypress:function(N){if(w){var R=E(N),O=N.charCode,P=O>=32?String.fromCharCode(O):R.length>1?"":R;R!==w&&(R=P.toLowerCase()),C(!0,R,P,N),w=null}},keyup:function(N){var R=E(N);R in g&&C(!1,R,g[R],N)}}),ve.add(r,{blur:function(N){for(var R in g)C(!1,R,g[R],N)}}),{modifiers:T,isDown:function(N){return!!d[N]}}},Vt=De.extend({_class:"MouseEvent",initialize:function(c,d,g,m,w){this.type=c,this.event=d,this.point=g,this.target=m,this.delta=w},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),Kr=De.extend({_class:"ToolEvent",_item:null,initialize:function(c,d,g){this.tool=c,this.type=d,this.event=g},_choosePoint:function(a,c){return a||(c?c.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(a){this._point=a},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(a){this._lastPoint=a},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(a){this._downPoint=a},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(a){this._middlePoint=a},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(a){this._delta=a},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(a){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=a},getItem:function(){if(!this._item){var a=this.tool._scope.project.hitTest(this.getPoint());if(a){for(var c=a.item,d=c._parent;/^(Group|CompoundPath)$/.test(d._class);)c=d,d=d._parent;this._item=c}}return this._item},setItem:function(a){this._item=a},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}});f.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(c){f.call(this),this._moveCount=-1,this._downCount=-1,this.set(c)},getMinDistance:function(){return this._minDistance},setMinDistance:function(a){this._minDistance=a,a!=null&&this._maxDistance!=null&&a>this._maxDistance&&(this._maxDistance=a)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(a){this._maxDistance=a,this._minDistance!=null&&a!=null&&a<this._minDistance&&(this._minDistance=a)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(a){this._minDistance=this._maxDistance=a},_handleMouseEvent:function(a,c,d,g){At=this._scope,g.drag&&!this.responds(a)&&(a="mousemove");var m=g.move||g.drag,w=this.responds(a),T=this.minDistance,E=this.maxDistance,C=!1,N=this;function R(P,A){var U=d,W=m?N._point:N._downPoint||U;if(m){if(N._moveCount>=0&&U.equals(W))return!1;if(W&&(P!=null||A!=null)){var H=U.subtract(W),V=H.getLength();if(V<(P||0))return!1;A&&(U=W.add(H.normalize(Math.min(V,A))))}N._moveCount++}return N._point=U,N._lastPoint=W||U,g.down&&(N._moveCount=-1,N._downPoint=U,N._downCount++),!0}function O(){w&&(C=N.emit(a,new Kr(N,a,c))||C)}if(g.down)R(),O();else if(g.up)R(null,E),O();else if(w)for(;R(T,E);)O();return C}});var Xi=o.extend(u,{_class:"Tween",statics:{easings:new o({linear:function(a){return a},easeInQuad:function(a){return a*a},easeOutQuad:function(a){return a*(2-a)},easeInOutQuad:function(a){return a<.5?2*a*a:-1+2*(2-a)*a},easeInCubic:function(a){return a*a*a},easeOutCubic:function(a){return--a*a*a+1},easeInOutCubic:function(a){return a<.5?4*a*a*a:(a-1)*(2*a-2)*(2*a-2)+1},easeInQuart:function(a){return a*a*a*a},easeOutQuart:function(a){return 1- --a*a*a*a},easeInOutQuart:function(a){return a<.5?8*a*a*a*a:1-8*--a*a*a*a},easeInQuint:function(a){return a*a*a*a*a},easeOutQuint:function(a){return 1+--a*a*a*a*a},easeInOutQuint:function(a){return a<.5?16*a*a*a*a*a:1+16*--a*a*a*a*a}})},initialize:function a(c,d,g,m,w,T){this.object=c;var E=typeof w,C=E==="function";this.type=C?E:E==="string"?w:"linear",this.easing=C?w:a.easings[this.type],this.duration=m,this.running=!1,this._then=null,this._startTime=null;var N=d||g;this._keys=N?Object.keys(N):[],this._parsedKeys=this._parseKeys(this._keys),this._from=N&&this._getState(d),this._to=N&&this._getState(g),T!==!1&&this.start()},then:function(a){return this._then=a,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(a){if(this.running){a>=1&&(a=1,this.running=!1);for(var c=this.easing(a),d=this._keys,g=function(R){return typeof R=="function"?R(c,a):R},m=0,w=d&&d.length;m<w;m++){var T=d[m],E=g(this._from[T]),C=g(this._to[T]),N=E&&C&&E.__add&&C.__add?C.__subtract(E).__multiply(c).__add(E):(C-E)*c+E;this._setProperty(this._parsedKeys[T],N)}this.responds("update")&&this.emit("update",new o({progress:a,factor:c})),!this.running&&this._then&&this._then(this.object)}return this},_events:{onUpdate:{}},_handleFrame:function(a){var c=this._startTime,d=c?(a-c)/this.duration:0;c||(this._startTime=a),this.update(d)},_getState:function(a){for(var c=this._keys,d={},g=0,m=c.length;g<m;g++){var w=c[g],T=this._parsedKeys[w],E=this._getProperty(T),C;if(a){var N=this._resolveValue(E,a[w]);this._setProperty(T,N),C=this._getProperty(T),C=C&&C.clone?C.clone():C,this._setProperty(T,E)}else C=E&&E.clone?E.clone():E;d[w]=C}return d},_resolveValue:function(a,c){if(c){if(Array.isArray(c)&&c.length===2){var d=c[0];return d&&d.match&&d.match(/^[+\-\*\/]=/)?this._calculate(a,d[0],c[1]):c}else if(typeof c=="string"){var g=c.match(/^[+\-*/]=(.*)/);if(g){var m=JSON.parse(g[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(a,c[0],m)}}}return c},_calculate:function(a,c,d){return At.PaperScript.calculateBinary(a,c,d)},_parseKeys:function(a){for(var c={},d=0,g=a.length;d<g;d++){var m=a[d],w=m.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");c[m]=w.split("/")}return c},_getProperty:function(a,c){for(var d=this.object,g=0,m=a.length-(c||0);g<m&&d;g++)d=d[a[g]];return d},_setProperty:function(a,c){var d=this._getProperty(a,1);d&&(d[a[a.length-1]]=c)}}),Eo={request:function(a){var c=new e.XMLHttpRequest;return c.open((a.method||"get").toUpperCase(),a.url,o.pick(a.async,!0)),a.mimeType&&c.overrideMimeType(a.mimeType),c.onload=function(){var d=c.status;d===0||d===200?a.onLoad&&a.onLoad.call(c,c.responseText):c.onerror()},c.onerror=function(){var d=c.status,g='Could not load "'+a.url+'" (Status: '+d+")";if(a.onError)a.onError(g,d);else throw new Error(g)},c.send(null)}},Sn=o.exports.CanvasProvider={canvases:[],getCanvas:function(a,c,d){if(!r)return null;var g,m=!0;typeof a=="object"&&(c=a.height,a=a.width),this.canvases.length?g=this.canvases.pop():(g=i.createElement("canvas"),m=!1);var w=g.getContext("2d",d||{});if(!w)throw new Error("Canvas "+g+" is unable to provide a 2D context.");return g.width===a&&g.height===c?m&&w.clearRect(0,0,a+1,c+1):(g.width=a,g.height=c),w.save(),g},getContext:function(a,c,d){var g=this.getCanvas(a,c,d);return g?g.getContext("2d",d||{}):null},release:function(a){var c=a&&a.canvas?a.canvas:a;c&&c.getContext&&(c.getContext("2d").restore(),this.canvases.push(c))}},wa=new function(){var a=Math.min,c=Math.max,d=Math.abs,g,m,w,T,E,C,N,R,O,P,A;function U(q,$,Q){return .2989*q+.587*$+.114*Q}function W(q,$,Q,te){var J=te-U(q,$,Q);O=q+J,P=$+J,A=Q+J;var te=U(O,P,A),se=a(O,P,A),ie=c(O,P,A);if(se<0){var ae=te-se;O=te+(O-te)*te/ae,P=te+(P-te)*te/ae,A=te+(A-te)*te/ae}if(ie>255){var le=255-te,de=ie-te;O=te+(O-te)*le/de,P=te+(P-te)*le/de,A=te+(A-te)*le/de}}function H(q,$,Q){return c(q,$,Q)-a(q,$,Q)}function V(q,$,Q,X){var J=[q,$,Q],te=c(q,$,Q),se=a(q,$,Q),ie;se=se===q?0:se===$?1:2,te=te===q?0:te===$?1:2,ie=a(se,te)===0?c(se,te)===1?2:1:0,J[te]>J[se]?(J[ie]=(J[ie]-J[se])*X/(J[te]-J[se]),J[te]=X):J[ie]=J[te]=0,J[se]=0,O=J[0],P=J[1],A=J[2]}var B={multiply:function(){O=E*g/255,P=C*m/255,A=N*w/255},screen:function(){O=E+g-E*g/255,P=C+m-C*m/255,A=N+w-N*w/255},overlay:function(){O=E<128?2*E*g/255:255-2*(255-E)*(255-g)/255,P=C<128?2*C*m/255:255-2*(255-C)*(255-m)/255,A=N<128?2*N*w/255:255-2*(255-N)*(255-w)/255},"soft-light":function(){var q=g*E/255;O=q+E*(255-(255-E)*(255-g)/255-q)/255,q=m*C/255,P=q+C*(255-(255-C)*(255-m)/255-q)/255,q=w*N/255,A=q+N*(255-(255-N)*(255-w)/255-q)/255},"hard-light":function(){O=g<128?2*g*E/255:255-2*(255-g)*(255-E)/255,P=m<128?2*m*C/255:255-2*(255-m)*(255-C)/255,A=w<128?2*w*N/255:255-2*(255-w)*(255-N)/255},"color-dodge":function(){O=E===0?0:g===255?255:a(255,255*E/(255-g)),P=C===0?0:m===255?255:a(255,255*C/(255-m)),A=N===0?0:w===255?255:a(255,255*N/(255-w))},"color-burn":function(){O=E===255?255:g===0?0:c(0,255-(255-E)*255/g),P=C===255?255:m===0?0:c(0,255-(255-C)*255/m),A=N===255?255:w===0?0:c(0,255-(255-N)*255/w)},darken:function(){O=E<g?E:g,P=C<m?C:m,A=N<w?N:w},lighten:function(){O=E>g?E:g,P=C>m?C:m,A=N>w?N:w},difference:function(){O=E-g,O<0&&(O=-O),P=C-m,P<0&&(P=-P),A=N-w,A<0&&(A=-A)},exclusion:function(){O=E+g*(255-E-E)/255,P=C+m*(255-C-C)/255,A=N+w*(255-N-N)/255},hue:function(){V(g,m,w,H(E,C,N)),W(O,P,A,U(E,C,N))},saturation:function(){V(E,C,N,H(g,m,w)),W(O,P,A,U(E,C,N))},luminosity:function(){W(E,C,N,U(g,m,w))},color:function(){W(g,m,w,U(E,C,N))},add:function(){O=a(E+g,255),P=a(C+m,255),A=a(N+w,255)},subtract:function(){O=c(E-g,0),P=c(C-m,0),A=c(N-w,0)},average:function(){O=(E+g)/2,P=(C+m)/2,A=(N+w)/2},negation:function(){O=255-d(255-g-E),P=255-d(255-m-C),A=255-d(255-w-N)}},k=this.nativeModes=o.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(q){this[q]=!0},{}),L=Sn.getContext(1,1,{willReadFrequently:!0});L&&(o.each(B,function(q,$){var Q=$==="darken",X=!1;L.save();try{L.fillStyle=Q?"#300":"#a00",L.fillRect(0,0,1,1),L.globalCompositeOperation=$,L.globalCompositeOperation===$&&(L.fillStyle=Q?"#a00":"#300",L.fillRect(0,0,1,1),X=L.getImageData(0,0,1,1).data[0]!==Q?170:51)}catch{}L.restore(),k[$]=X}),Sn.release(L)),this.process=function(q,$,Q,X,J){var te=$.canvas,se=q==="normal";if(se||k[q])Q.save(),Q.setTransform(1,0,0,1,0,0),Q.globalAlpha=X,se||(Q.globalCompositeOperation=q),Q.drawImage(te,J.x,J.y),Q.restore();else{var ie=B[q];if(!ie)return;for(var ae=Q.getImageData(J.x,J.y,te.width,te.height),le=ae.data,de=$.getImageData(0,0,te.width,te.height).data,ge=0,ye=le.length;ge<ye;ge+=4){g=de[ge],E=le[ge],m=de[ge+1],C=le[ge+1],w=de[ge+2],N=le[ge+2],T=de[ge+3],R=le[ge+3],ie();var ke=T*X/255,Me=1-ke;le[ge]=ke*O+Me*E,le[ge+1]=ke*P+Me*C,le[ge+2]=ke*A+Me*N,le[ge+3]=T*X+Me*R}Q.putImageData(ae,J.x,J.y)}}},un=new function(){var a="http://www.w3.org/2000/svg",c="http://www.w3.org/2000/xmlns",d="http://www.w3.org/1999/xlink",g={href:d,xlink:c,xmlns:c+"/","xmlns:xlink":c+"/"};function m(E,C,N){return T(i.createElementNS(a,E),C,N)}function w(E,C){var N=g[C],R=N?E.getAttributeNS(N,C):E.getAttribute(C);return R==="null"?null:R}function T(E,C,N){for(var R in C){var O=C[R],P=g[R];typeof O=="number"&&N&&(O=N.number(O)),P?E.setAttributeNS(P,R,O):E.setAttribute(R,O)}return E}return{svg:a,xmlns:c,xlink:d,create:m,get:w,set:T}},Eu=o.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(a,c){return!c&&(a instanceof Fe||a instanceof Z||a instanceof Kt)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(a,c){var d=o.capitalize(c),g=a[2];this[c]={type:a[1],property:c,attribute:a[0],toSVG:g,fromSVG:g&&o.each(g,function(m,w){this[m]=w},{}),exportFilter:a[3],get:"get"+d,set:"set"+d}},{});new function(){var a;function c(B,k,L){var q=new o,$=B.getTranslation();if(k){var Q;B.isInvertible()?(B=B._shiftless(),Q=B._inverseTransform($),$=null):Q=new I,q[L?"cx":"x"]=Q.x,q[L?"cy":"y"]=Q.y}if(!B.isIdentity()){var X=B.decompose();if(X){var J=[],te=X.rotation,se=X.scaling,ie=X.skewing;$&&!$.isZero()&&J.push("translate("+a.point($)+")"),te&&J.push("rotate("+a.number(te)+")"),(!b.isZero(se.x-1)||!b.isZero(se.y-1))&&J.push("scale("+a.point(se)+")"),ie.x&&J.push("skewX("+a.number(ie.x)+")"),ie.y&&J.push("skewY("+a.number(ie.y)+")"),q.transform=J.join(" ")}else q.transform="matrix("+B.getValues().join(",")+")"}return q}function d(B,k){for(var L=c(B._matrix),q=B._children,$=un.create("g",L,a),Q=0,X=q.length;Q<X;Q++){var J=q[Q],te=H(J,k);if(te)if(J.isClipMask()){var se=un.create("clipPath");se.appendChild(te),U(J,se,"clip"),un.set($,{"clip-path":"url(#"+se.id+")"})}else $.appendChild(te)}return $}function g(B,k){var L=c(B._matrix,!0),q=B.getSize(),$=B.getImage();return L.x-=q.width/2,L.y-=q.height/2,L.width=q.width,L.height=q.height,L.href=k.embedImages==!1&&$&&$.src||B.toDataURL(),un.create("image",L,a)}function m(B,k){var L=k.matchShapes;if(L){var q=B.toShape(!1);if(q)return w(q)}var $=B._segments,Q=$.length,X,J=c(B._matrix);if(L&&Q>=2&&!B.hasHandles())if(Q>2){X=B._closed?"polygon":"polyline";for(var te=[],se=0;se<Q;se++)te.push(a.point($[se]._point));J.points=te.join(" ")}else{X="line";var ie=$[0]._point,ae=$[1]._point;J.set({x1:ie.x,y1:ie.y,x2:ae.x,y2:ae.y})}else X="path",J.d=B.getPathData(null,k.precision);return un.create(X,J,a)}function w(B){var k=B._type,L=B._radius,q=c(B._matrix,!0,k!=="rectangle");if(k==="rectangle"){k="rect";var $=B._size,Q=$.width,X=$.height;q.x-=Q/2,q.y-=X/2,q.width=Q,q.height=X,L.isZero()&&(L=null)}return L&&(k==="circle"?q.r=L:(q.rx=L.width,q.ry=L.height)),un.create(k,q,a)}function T(B,k){var L=c(B._matrix),q=B.getPathData(null,k.precision);return q&&(L.d=q),un.create("path",L,a)}function E(B,k){var L=c(B._matrix,!0),q=B._definition,$=A(q,"symbol"),Q=q._item,X=Q.getStrokeBounds();return $||($=un.create("symbol",{viewBox:a.rectangle(X)}),$.appendChild(H(Q,k)),U(q,$,"symbol")),L.href="#"+$.id,L.x+=X.x,L.y+=X.y,L.width=X.width,L.height=X.height,L.overflow="visible",un.create("use",L,a)}function C(B){var k=A(B,"color");if(!k){var L=B.getGradient(),q=L._radial,$=B.getOrigin(),Q=B.getDestination(),X;if(q){X={cx:$.x,cy:$.y,r:$.getDistance(Q)};var J=B.getHighlight();J&&(X.fx=J.x,X.fy=J.y)}else X={x1:$.x,y1:$.y,x2:Q.x,y2:Q.y};X.gradientUnits="userSpaceOnUse",k=un.create((q?"radial":"linear")+"Gradient",X,a);for(var te=L._stops,se=0,ie=te.length;se<ie;se++){var ae=te[se],le=ae._color,de=le.getAlpha(),ge=ae._offset;X={offset:ge??se/(ie-1)},le&&(X["stop-color"]=le.toCSS(!0)),de<1&&(X["stop-opacity"]=de),k.appendChild(un.create("stop",X,a))}U(B,k,"color")}return"url(#"+k.id+")"}function N(B){var k=un.create("text",c(B._matrix,!0),a);return k.textContent=B._content,k}var R={Group:d,Layer:d,Raster:g,Path:m,Shape:w,CompoundPath:T,SymbolItem:E,PointText:N};function O(B,k,L){var q={},$=!L&&B.getParent(),Q=[];return B._name!=null&&(q.id=B._name),o.each(Eu,function(X){var J=X.get,te=X.type,se=B[J]();if(X.exportFilter?X.exportFilter(B,se):!$||!o.equals($[J](),se)){if(te==="color"&&se!=null){var ie=se.getAlpha();ie<1&&(q[X.attribute+"-opacity"]=ie)}te==="style"?Q.push(X.attribute+": "+se):q[X.attribute]=se==null?"none":te==="color"?se.gradient?C(se):se.toCSS(!0):te==="array"?se.join(","):te==="lookup"?X.toSVG[se]:se}}),Q.length&&(q.style=Q.join(";")),q.opacity===1&&delete q.opacity,B._visible||(q.visibility="hidden"),un.set(k,q,a)}var P;function A(B,k){return P||(P={ids:{},svgs:{}}),B&&P.svgs[k+"-"+(B._id||B.__id||(B.__id=S.get("svg")))]}function U(B,k,L){P||A();var q=P.ids[L]=(P.ids[L]||0)+1;k.id=L+"-"+q,P.svgs[L+"-"+(B._id||B.__id)]=k}function W(B,k){var L=B,q=null;if(P){L=B.nodeName.toLowerCase()==="svg"&&B;for(var $ in P.svgs)q||(L||(L=un.create("svg"),L.appendChild(B)),q=L.insertBefore(un.create("defs"),L.firstChild)),q.appendChild(P.svgs[$]);P=null}return k.asString?new e.XMLSerializer().serializeToString(L):L}function H(B,k,L){var q=R[B._class],$=q&&q(B,k);if($){var Q=k.onExport;Q&&($=Q(B,$,k)||$);var X=JSON.stringify(B._data);X&&X!=="{}"&&X!=="null"&&$.setAttribute("data-paper-data",X)}return $&&O(B,$,L)}function V(B){return B||(B={}),a=new _(B.precision),B}fe.inject({exportSVG:function(B){return B=V(B),W(H(this,B,!0),B)}}),oe.inject({exportSVG:function(B){B=V(B);var k=this._children,L=this.getView(),q=o.pick(B.bounds,"view"),$=B.matrix||q==="view"&&L._matrix,Q=$&&K.read([$]),X=q==="view"?new z([0,0],L.getViewSize()):q==="content"?fe._getBounds(k,Q,{stroke:!0}).rect:z.read([q],0,{readNull:!0}),J={version:"1.1",xmlns:un.svg,"xmlns:xlink":un.xlink};X&&(J.width=X.width,J.height=X.height,(X.x||X.x===0||X.y||X.y===0)&&(J.viewBox=a.rectangle(X)));var te=un.create("svg",J,a),se=te;Q&&!Q.isIdentity()&&(se=te.appendChild(un.create("g",c(Q),a)));for(var ie=0,ae=k.length;ie<ae;ie++)se.appendChild(H(k[ie],B,!0));return W(te,B)}})},new function(){var a={},c;function d(k,L,q,$,Q,X){var J=un.get(k,L)||X,te=J==null?$?null:q?"":0:q?J:parseFloat(J);return/%\s*$/.test(J)?te/100*(Q?1:c[/x|^width/.test(L)?"width":"height"]):te}function g(k,L,q,$,Q,X,J){return L=d(k,L||"x",!1,$,Q,X),q=d(k,q||"y",!1,$,Q,J),$&&(L==null||q==null)?null:new I(L,q)}function m(k,L,q,$,Q){return L=d(k,L||"width",!1,$,Q),q=d(k,q||"height",!1,$,Q),$&&(L==null||q==null)?null:new D(L,q)}function w(k,L,q){return k==="none"?null:L==="number"?parseFloat(k):L==="array"?k?k.split(/[\s,]+/g).map(parseFloat):[]:L==="color"?H(k)||k:L==="lookup"?q[k]:k}function T(k,L,q,$){var Q=k.childNodes,X=L==="clippath",J=L==="defs",te=new me,se=te._project,ie=se._currentStyle,ae=[];if(!X&&!J&&(te=W(te,k,$),se._currentStyle=te._style.clone()),$)for(var le=k.querySelectorAll("defs"),de=0,ge=le.length;de<ge;de++)V(le[de],q,!1);for(var de=0,ge=Q.length;de<ge;de++){var ye=Q[de],ke;ye.nodeType===1&&!/^defs$/i.test(ye.nodeName)&&(ke=V(ye,q,!1))&&!(ke instanceof Ge)&&ae.push(ke)}return te.addChildren(ae),X&&(te=W(te.reduce(),k,$)),se._currentStyle=ie,(X||J)&&(te.remove(),te=null),te}function E(k,L){for(var q=k.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),$=[],Q=0,X=q.length;Q<X;Q+=2)$.push(new I(parseFloat(q[Q]),parseFloat(q[Q+1])));var J=new Ne($);return L==="polygon"&&J.closePath(),J}function C(k){return Fe.create(k.getAttribute("d"))}function N(k,L){var q=(d(k,"href",!0)||"").substring(1),$=L==="radialgradient",Q;if(q)Q=a[q].getGradient(),Q._radial^$&&(Q=Q.clone(),Q._radial=$);else{for(var X=k.childNodes,J=[],te=0,se=X.length;te<se;te++){var ie=X[te];ie.nodeType===1&&J.push(W(new Rt,ie))}Q=new Nn(J,$)}var ae,le,de,ge=d(k,"gradientUnits",!0)!=="userSpaceOnUse";$?(ae=g(k,"cx","cy",!1,ge,"50%","50%"),le=ae.add(d(k,"r",!1,!1,ge,"50%"),0),de=g(k,"fx","fy",!0,ge)):(ae=g(k,"x1","y1",!1,ge,"0%","0%"),le=g(k,"x2","y2",!1,ge,"100%","0%"));var ye=W(new zt(Q,ae,le,de),k);return ye._scaleToBounds=ge,null}var R={"#document":function(k,L,q,$){for(var Q=k.childNodes,X=0,J=Q.length;X<J;X++){var te=Q[X];if(te.nodeType===1)return V(te,q,$)}},g:T,svg:T,clippath:T,polygon:E,polyline:E,path:C,lineargradient:N,radialgradient:N,image:function(k){var L=new Se(d(k,"href",!0));return L.on("load",function(){var q=m(k);this.setSize(q);var $=g(k).add(q.divide(2));this._matrix.append(new K().translate($))}),L},symbol:function(k,L,q,$){return new Ge(T(k,L,q,$),!0)},defs:T,use:function(k){var L=(d(k,"href",!0)||"").substring(1),q=a[L],$=g(k);return q?q instanceof Ge?q.place($):q.clone().translate($):null},circle:function(k){return new Z.Circle(g(k,"cx","cy"),d(k,"r"))},ellipse:function(k){return new Z.Ellipse({center:g(k,"cx","cy"),radius:m(k,"rx","ry")})},rect:function(k){return new Z.Rectangle(new z(g(k),m(k)),m(k,"rx","ry"))},line:function(k){return new Ne.Line(g(k,"x1","y1"),g(k,"x2","y2"))},text:function(k){var L=new It(g(k).add(g(k,"dx","dy")));return L.setContent(k.textContent.trim()||""),L},switch:T};function O(k,L,q,$){if(k.transform){for(var Q=($.getAttribute(q)||"").split(/\)\s*/g),X=new K,J=0,te=Q.length;J<te;J++){var se=Q[J];if(!se)break;for(var ie=se.split(/\(\s*/),ae=ie[0],le=ie[1].split(/[\s,]+/g),de=0,ge=le.length;de<ge;de++)le[de]=parseFloat(le[de]);switch(ae){case"matrix":X.append(new K(le[0],le[1],le[2],le[3],le[4],le[5]));break;case"rotate":X.rotate(le[0],le[1]||0,le[2]||0);break;case"translate":X.translate(le[0],le[1]||0);break;case"scale":X.scale(le);break;case"skewX":X.skew(le[0],0);break;case"skewY":X.skew(0,le[0]);break}}k.transform(X)}}function P(k,L,q){var $=q==="fill-opacity"?"getFillColor":"getStrokeColor",Q=k[$]&&k[$]();Q&&Q.setAlpha(parseFloat(L))}var A=o.set(o.each(Eu,function(k){this[k.attribute]=function(L,q){if(L[k.set]&&(L[k.set](w(q,k.type,k.fromSVG)),k.type==="color")){var $=L[k.get]();if($&&$._scaleToBounds){var Q=L.getBounds();$.transform(new K().translate(Q.getPoint()).scale(Q.getSize()))}}}},{}),{id:function(k,L){a[L]=k,k.setName&&k.setName(L)},"clip-path":function(k,L){var q=H(L);if(q)if(q=q.clone(),q.setClipMask(!0),k instanceof me)k.insertChild(0,q);else return new me(q,k)},gradientTransform:O,transform:O,"fill-opacity":P,"stroke-opacity":P,visibility:function(k,L){k.setVisible&&k.setVisible(L==="visible")},display:function(k,L){k.setVisible&&k.setVisible(L!==null)},"stop-color":function(k,L){k.setColor&&k.setColor(L)},"stop-opacity":function(k,L){k._color&&k._color.setAlpha(parseFloat(L))},offset:function(k,L){if(k.setOffset){var q=L.match(/(.*)%$/);k.setOffset(q?q[1]/100:parseFloat(L))}},viewBox:function(k,L,q,$,Q){var X=new z(w(L,"array")),J=m($,null,null,!0),te,se;if(k instanceof me){var ie=J?J.divide(X.getSize()):1,se=new K().scale(ie).translate(X.getPoint().negate());te=k}else k instanceof Ge&&(J&&X.setSize(J),te=k._item);if(te){if(U($,"overflow",Q)!=="visible"){var ae=new Z.Rectangle(X);ae.setClipMask(!0),te.addChild(ae)}se&&te.transform(se)}}});function U(k,L,q){var $=k.attributes[L],Q=$&&$.value;if(!Q&&k.style){var X=o.camelize(L);Q=k.style[X],!Q&&q.node[X]!==q.parent[X]&&(Q=q.node[X])}return Q?Q==="none"?null:Q:n}function W(k,L,q){var $=L.parentNode,Q={node:ce.getStyles(L)||{},parent:!q&&!/^defs$/i.test($.tagName)&&ce.getStyles($)||{}};return o.each(A,function(X,J){var te=U(L,J,Q);k=te!==n&&X(k,te,J,L,Q)||k}),k}function H(k){var L=k&&k.match(/\((?:["'#]*)([^"')]+)/),q=L&&L[1],$=q&&a[r?q.replace(r.location.href.split("#")[0]+"#",""):q];return $&&$._scaleToBounds&&($=$.clone(),$._scaleToBounds=!0),$}function V(k,L,q){var $=k.nodeName.toLowerCase(),Q=$!=="#document",X=i.body,J,te,se;q&&Q&&(c=At.getView().getSize(),c=m(k,null,null,!0)||c,J=un.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),te=k.parentNode,se=k.nextSibling,J.appendChild(k),X.appendChild(J));var ie=At.settings,ae=ie.applyMatrix,le=ie.insertItems;ie.applyMatrix=!1,ie.insertItems=!1;var de=R[$],ge=de&&de(k,$,L,q)||null;if(ie.insertItems=le,ie.applyMatrix=ae,ge){Q&&!(ge instanceof me)&&(ge=W(ge,k,q));var ye=L.onImport,ke=Q&&k.getAttribute("data-paper-data");ye&&(ge=ye(k,ge,L)||ge),L.expandShapes&&ge instanceof Z&&(ge.remove(),ge=ge.toPath()),ke&&(ge._data=JSON.parse(ke))}return J&&(X.removeChild(J),te&&(se?te.insertBefore(k,se):te.appendChild(k))),q&&(a={},ge&&o.pick(L.applyMatrix,ae)&&ge.matrix.apply(!0,!0)),ge}function B(k,L,q){if(!k)return null;L=typeof L=="function"?{onLoad:L}:L||{};var $=At,Q=null;function X(ie){try{var ae=typeof ie=="object"?ie:new e.DOMParser().parseFromString(ie.trim(),"image/svg+xml");if(!ae.nodeName)throw ae=null,new Error("Unsupported SVG source: "+k);At=$,Q=V(ae,L,!0),(!L||L.insert!==!1)&&q._insertItem(n,Q);var le=L.onLoad;le&&le(Q,ie)}catch(de){J(de)}}function J(ie,ae){var le=L.onError;if(le)le(ie,ae);else throw new Error(ie)}if(typeof k=="string"&&!/^[\s\S]*</.test(k)){var te=i.getElementById(k);te?X(te):Eo.request({url:k,async:!0,onLoad:X,onError:J})}else if(typeof File<"u"&&k instanceof File){var se=new FileReader;return se.onload=function(){X(se.result)},se.onerror=function(){J(se.error)},se.readAsText(k)}else X(k);return Q}fe.inject({importSVG:function(k,L){return B(k,L,this)}}),oe.inject({importSVG:function(k,L){return this.activate(),B(k,L,this)}})};var At=new(h.inject(o.exports,{Base:o,Numerical:b,Key:He,DomEvent:ve,DomElement:ce,document:i,window:r,Symbol:Ge,PlacedSymbol:Ue}));return At.agent.node&&CP(At),typeof n=="function"&&n.amd?n("paper",At):t&&(t.exports=At),At}).call(OP,typeof self=="object"?self:null)})(nj);var KJ=nj.exports;const ut=DP(KJ),YJ=t=>{const e=ut.project.importSVG(`<path d="${t}" />`,{applyMatrix:!0,insert:!1}),n={path:e.exportSVG().getAttribute("d"),edges:e.curves.length,height:Math.round(e.bounds.height),width:Math.round(e.bounds.width),length:Math.round(e.length)};if(e.remove(),n.edges<3||n.edges>23)throw new Error("Invalid path");return n},QJ=({tangram:t,deferred:e})=>{const{tangramsStarredBy:n}=ee.useContext(Ni),r=ee.useMemo(()=>{let i=0;for(const o in n[t.id])n[t.id][o]&&(i+=1);return i},[t,n]);return F.jsx(Cs,{onClose:()=>e.reject(Zn),css:{gap:3},children:F.jsxs(Te,{css:{gap:3,overflow:"auto",flex:"1",alignItems:"center"},children:[F.jsx(fp,{selected:!0,tangram:t}),F.jsx(vt,{css:{fontSize:2},children:F.jsx(Qt,{id:"Earned {stars}",values:{stars:r,starIcon:()=>F.jsx(vi,{icon:fu,css:{fill:"currentColor"}})}})})]})})},XJ=({tangram:t,deferred:e})=>{const n=xn(),r=ee.useContext(_o),{currentUser:i}=ee.useContext(Mr),[o,u]=ee.useState(()=>({...t})),{tangramsStarredBy:h}=ee.useContext(Ni),f=i&&!t.id,v=ee.useMemo(()=>({path:t.path,category:t.category,emoji:t.category!=="digits"&&t.category!=="letters"?t.emoji:IP(),letterIndex:t.category==="letters"?Uf.indexOf(t.emoji):void 0,digitIndex:t.category==="digits"?jf.indexOf(t.emoji):void 0}),[t]),{handleSubmit:_,register:b,watch:S,setError:I,clearError:M,formState:D}=Dl({defaultValues:v}),{path:ne,category:z,emoji:Y,letterIndex:K,digitIndex:ue}=S();ee.useEffect(()=>{try{const he=YJ(ne);u(Z=>({...Z,...he})),M("path")}catch{I("path",{type:"invalid",message:n.formatMessage({id:"Invalid path"})})}},[ne,I,M,n]),ee.useEffect(()=>{const he=z==="letters"?Uf[K]:z==="digits"?jf[ue]:Y||IP();u(Z=>({...Z,emoji:he}))},[z,Y,K,ue]),ee.useEffect(()=>{u(he=>({...he,category:z}))},[z]);const oe=async()=>{window.confirm(n.formatMessage({id:"Are you sure you want to delete this tangram?"}))&&(await ze.firestore().collection("tangrams").doc(t.id).delete(),r(n.formatMessage({id:"Tangram deleted successfuly"})),e.resolve())},fe=async()=>{f?(await ze.firestore().collection("tangrams").add({...o,uid:i.uid,approved:!1}),r(n.formatMessage({id:"Tangram submitted for review"}))):(await ze.firestore().collection("tangrams").doc(t.id).update(o),r(n.formatMessage({id:"Tangram modified successfuly"}))),e.resolve()},me=ee.useMemo(()=>{if(!t.approved)return 0;let he=0;for(const Z in h[t.id])h[t.id][Z]&&(he+=1);return he},[t,h]);return F.jsxs(Cs,{title:F.jsx(Gi,{children:f?n.formatMessage({id:"Submit your tangram"}):n.formatMessage({id:"Edit your tangram"})}),onClose:()=>e.reject(Zn),as:"form",onSubmit:_(fe),css:{gap:3},children:[F.jsxs(Te,{css:{gap:3,overflow:"auto",flex:"1"},children:[F.jsx(fp,{showStroke:i.isAdmin,selected:!0,completed:!0,tangram:o,css:{alignSelf:"center"}}),t.approved&&F.jsx(vt,{css:{alignSelf:"center",fontSize:2},children:F.jsx(Qt,{id:"Earned {stars}",values:{stars:me,starIcon:()=>F.jsx(vi,{icon:fu,css:{fill:"currentColor"}})}})}),f&&!i.isAdmin&&F.jsx(Ks,{children:F.jsx(Qt,{id:"A moderator will have to approve your tangram. It can be deleted or edited at any time.",values:{br:()=>F.jsx("br",{})}})}),i&&i.isAdmin&&F.jsx(F.Fragment,{children:F.jsxs(Te,{css:{gap:2},children:[F.jsx("label",{children:n.formatMessage({id:"Path"})}),F.jsx(Wn,{as:"textarea",...b("path")}),D.errors.path&&F.jsx(bi,{children:D.errors.path.message})]})}),F.jsxs(Te,{css:{gap:2},children:[F.jsx("label",{children:n.formatMessage({id:"Category"})}),F.jsx(Wn,{as:"select",...b("category"),children:c8.map(he=>F.jsx("option",{value:he,children:n.formatMessage({id:he})},he))})]}),z==="digits"?F.jsxs(Te,{css:{gap:2},children:[F.jsx("label",{children:n.formatMessage({id:"Victory emoji"})}),F.jsx(Wn,{as:"select",...b("digitIndex"),children:jf.map((he,Z)=>F.jsx("option",{value:Z,children:he},Z))})]}):z==="letters"?F.jsxs(Te,{css:{gap:2},children:[F.jsx("label",{children:n.formatMessage({id:"Victory emoji"})}),F.jsx(Wn,{as:"select",...b("letterIndex"),children:Uf.map((he,Z)=>F.jsx("option",{value:Z,children:he},Z))})]}):F.jsxs(Te,{css:{gap:2},children:[F.jsx("label",{children:n.formatMessage({id:"Victory emoji"})}),F.jsx(Wn,{...b("emoji")}),F.jsx(Ks,{children:n.formatMessage({id:"Leave empty for random emoji"})})]})]}),F.jsx(li,{type:"submit",children:f?n.formatMessage({id:"Submit!"}):n.formatMessage({id:"Edit!"})}),!f&&F.jsx(Te,{css:{alignItems:"center"},children:F.jsx(Ho,{onClick:oe,children:n.formatMessage({id:"Or delete tangram"})})})]})},JJ=({tangram:t,deferred:e})=>{const{currentUser:n}=ee.useContext(Mr);return n&&(n.isAdmin||!t.id||t.uid===n.uid)?F.jsx(XJ,{tangram:t,deferred:e}):F.jsx(QJ,{tangram:t,deferred:e})};class Bs{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}const rj=ee.createContext([!0,()=>{}]),EI=()=>ee.useContext(rj),ZJ=({children:t})=>{const[e,n]=ee.useState(!0);ee.useEffect(()=>{const o=window.localStorage.getItem("showBackgroundPattern");if(o===null){n(!0);return}try{const u=JSON.parse(o);n(!!JSON.parse(u))}catch{window.localStorage.removeItem("showBackgroundPattern")}},[]);const r=ee.useCallback(()=>{const o=!e;n(o),window.localStorage.setItem("showBackgroundPattern",JSON.stringify(o))},[e]),i=ee.useMemo(()=>[e,r],[e,r]);return F.jsx(rj.Provider,{value:i,children:t})},ij=ee.createContext(["",()=>{}]),oj=()=>ee.useContext(ij),xP="css-system-theme",NP={breakpoints:{s:"40em",m:"52em",l:"64em"},space:[0,4,8,16,32,64,128,256,512],sizes:{menu:40,inline:16,logo:128,icon:24,badge:32,badgeBig:86},borderWidths:{loader:8},radii:[0,4,8,16,32],fontSizes:[10,12,14,18,22,30,46,62,70]},Wg={light:{...NP,colors:{pieces:{st1:"#FECA57",st2:"#48DBFB",mt1:"#1DD1A1",lt1:"#FF6B6B",lt2:"#8557E0",sq:"#FF9FF3",rh:"#54A0FF"},difficulties:["#10ac84","#2e86de","#ee5253"],shape:"#121212",background:"#fff",dialogBackground:"#d9d9d9",dialogText:"#303030",inputBackground:"#fff",errorText:"#bd0808",notificationBackground:"#FFFFFFdd"}},dark:{...NP,colors:{pieces:{st1:"#CE9518",st2:"#1CACCB",mt1:"#0CA57C",lt1:"#C33B3B",lt2:"#5C2DB9",sq:"#C95EBC",rh:"#2E75CF"},difficulties:["#0b8767","#1a6cbd","#ce3737"],shape:"#595959",background:"#15141a",dialogBackground:"#383838",dialogText:"#d8d8d8",inputBackground:"#595959",errorText:"#e63c3c",notificationBackground:"#000000dd"}}},eZ="light",tZ=({children:t})=>{const[e,n]=ee.useState(eZ);ee.useEffect(()=>{const o=window.localStorage.getItem(xP);Wg[o]&&n(o)},[]);const r=ee.useCallback(o=>{Wg[o]&&(n(o),window.localStorage.setItem(xP,o))},[Wg]),i=ee.useMemo(()=>[e,r],[e,r]);return F.jsx(ij.Provider,{value:i,children:F.jsx(Xo.Provider,{value:Wg[e],children:t})})},SI=ee.createContext(),nZ=({deferred:t,tip:{id:e,title:n=F.jsx(Gi,{children:F.jsx(Qt,{id:"Random tip"})}),content:r}})=>{const i=xn(),[o,u]=ee.useState(!1);return F.jsxs(Cs,{onClose:()=>t.reject(Zn),title:n,css:{gap:3},children:[r,F.jsx(li,{onClick:()=>t.resolve(o),children:i.formatMessage({id:"Got it!"})}),e!=="welcome"&&F.jsxs(Te,{as:"label",css:{gap:1,flexDirection:"row",cursor:"pointer",alignItems:"flex-end"},children:[F.jsx("input",{type:"checkbox",checked:o,onChange:()=>u(!o)}),F.jsx(vt,{as:"small",children:i.formatMessage({id:"I don't want to see tips anymore"})})]})]})},ni={settingsIcon:F.jsx(vi,{icon:W3}),accountIcon:F.jsx(vi,{icon:$3}),menuIcon:F.jsx(vi,{icon:z3}),galleryIcon:F.jsx(vi,{icon:B3}),shareIcon:F.jsx(vi,{icon:G3}),createIcon:F.jsx(vi,{icon:q3}),leaderboardIcon:F.jsx(vi,{icon:V3}),starIcon:F.jsx(vi,{icon:fu}),br:()=>F.jsx("br",{})},rZ=[{id:"particles",predicate:({particles:t})=>t,content:F.jsx(vt,{css:{textAlign:"justify"},children:F.jsx(Qt,{id:"tips.particles",values:ni})})},{id:"menu",content:F.jsx(vt,{css:{textAlign:"justify"},children:F.jsx(Qt,{id:"tips.menu",values:ni})})},{id:"gallery",content:F.jsx(vt,{css:{textAlign:"justify"},children:F.jsx(Qt,{id:"tips.gallery",values:ni})})},{id:"difficulty",predicate:({showBackgroundPattern:t})=>t,content:F.jsx(vt,{css:{textAlign:"justify"},children:F.jsx(Qt,{id:"tips.difficulty",values:ni})})},{id:"theme",predicate:({themeKey:t})=>t!=="dark",content:F.jsx(vt,{css:{textAlign:"justify"},children:F.jsx(Qt,{id:"tips.theme",values:ni})})},{id:"sound",predicate:({soundEnabled:t})=>t,content:F.jsx(vt,{css:{textAlign:"justify"},children:F.jsx(Qt,{id:"tips.sound",values:ni})})},{id:"account1",predicate:({currentUser:t})=>!t,content:F.jsx(vt,{css:{textAlign:"justify"},children:F.jsx(Qt,{id:"tips.account1",values:ni})})},{id:"account2",predicate:({currentUser:t})=>!t,content:F.jsx(vt,{css:{textAlign:"justify"},children:F.jsx(Qt,{id:"tips.account2",values:ni})})},{id:"stars",predicate:({currentUser:t})=>t,content:F.jsx(vt,{css:{textAlign:"justify"},children:F.jsx(Qt,{id:"tips.stars",values:ni})})},{id:"create",predicate:({currentUser:t,approvedTangrams:e,isTangramCompleted:n})=>{if(t){let r=0;for(const{id:i}of e)if(n(i)&&(r+=1,r===10))return!0}return!1},content:F.jsx(vt,{css:{textAlign:"justify"},children:F.jsx(Qt,{id:"tips.create",values:ni})})},{id:"share",content:F.jsx(vt,{css:{textAlign:"justify"},children:F.jsx(Qt,{id:"tips.share",values:ni})})},{id:"card",content:F.jsx(vt,{css:{textAlign:"justify"},children:F.jsx(Qt,{id:"tips.card",values:ni})})},{id:"leaderboard",content:F.jsx(vt,{css:{textAlign:"justify"},children:F.jsx(Qt,{id:"tips.leaderboard",values:ni})})}],iZ=({children:t})=>{const e=xn(),n=ee.useContext(_o),[r,i]=ee.useState(null),[o,u]=ee.useState(!0),{soundEnabled:h}=ee.useContext(wo),[f]=oj(),[v]=EI(),{currentUser:_}=ee.useContext(Mr),{approvedTangrams:b}=ee.useContext(wu),{isTangramCompleted:S}=ee.useContext(Ni);ee.useEffect(()=>{u(window.localStorage.getItem("hideTips")===null)},[]),ee.useEffect(()=>{o?window.localStorage.removeItem("hideTips"):window.localStorage.setItem("hideTips",!0)},[o]);const I=()=>{let ue=[];const oe=localStorage.getItem("seenTips");if(oe)try{const fe=JSON.parse(oe);if(!Array.isArray(fe))throw new Error("Invalid data for seenTips : "+fe);ue=fe}catch{localStorage.removeItem("seenTips")}return ue},M=ee.useCallback(ue=>{const oe=I(),fe=new Bs;return i({deferred:fe,tip:ue}),fe.promise.then(me=>{me&&u(!1)}).finally(()=>{localStorage.setItem("seenTips",JSON.stringify([...oe,ue.id])),i(null)})},[]),D=ee.useCallback(()=>{!o||I().includes("welcome")||(!_||!b.some(oe=>S(oe.id)))&&M({id:"welcome",title:F.jsx(Gi,{children:F.jsx(Qt,{id:"Welcome to Amstangram",values:ni})}),content:F.jsx(vt,{css:{textAlign:"justify"},children:F.jsx(Qt,{id:"tips.welcome",values:ni})})})},[M,o,_,b,S]),ne=ee.useCallback(()=>{if(!o)return;const ue=I(),oe=rZ.filter(({id:me,predicate:he=()=>!0})=>!ue.includes(me)&&he({themeKey:f,showBackgroundPattern:v,currentUser:_,approvedTangrams:b,isTangramCompleted:S,soundEnabled:h}));if(!oe.length)return;const fe=oe[0];M(fe)},[M,b,S,f,_,v,h,o]),z=ee.useCallback(()=>{u(ue=>!ue)},[]),Y=ee.useCallback(()=>{u(!0),window.localStorage.removeItem("seenTips"),n(e.formatMessage({id:"Tips reseted successfuly"}))},[n,e]),K=ee.useMemo(()=>({showRandomTip:ne,showWelcome:D,tipsEnabled:o,toggleTips:z,resetTips:Y}),[ne,D,o,z,Y]);return F.jsxs(SI.Provider,{value:K,children:[t,r&&F.jsx(nZ,{...r})]})},Gg=20,_f=({leftComponent:t,leftValue:e,rightComponent:n,rightValue:r,value:i,onChange:o,invertSounds:u})=>{const{playToggle:h,soundEnabled:f}=ee.useContext(wo),v=ee.useContext(Xo),_=ee.useMemo(()=>i===r?"right":"left",[i,r]),b=()=>{u?f||h({forceSoundEnabled:!0}):h()},S=()=>{o((_==="left"?"right":"left")==="right"?r:e),b()},I=M=>{M!==_&&(o(M==="right"?r:e),b())};return F.jsxs(Te,{css:{flexDirection:"row",justifyContent:"center",alignItems:"center",gap:3},children:[F.jsx(Te,{css:{cursor:"pointer",flex:"1",alignItems:"flex-end"},onClick:()=>I("left"),children:t}),F.jsx(Te,{onClick:S,css:{cursor:"pointer",position:"relative",bg:"inputBackground",width:`${2*Gg}px`,height:`${Gg}px`,borderRadius:"99999px"},children:F.jsx(Te,{css:{position:"absolute",size:`${Gg}px`,borderRadius:"99999px",bg:"dialogText",boxShadow:`0 0 0 2px ${v.colors.inputBackground}`,transition:"left 250ms ease-in-out"},style:{left:_==="left"?0:Gg}})}),F.jsx(Te,{css:{cursor:"pointer",flex:"1",alignItems:"flex-start"},onClick:()=>I("right"),children:n})]})},sj=ee.createContext([!0,()=>{}]),aj=()=>ee.useContext(sj),oZ=({children:t})=>{const[e,n]=ee.useState(!0);ee.useEffect(()=>{const o=window.localStorage.getItem("showParticles");if(o===null){n(!0);return}try{const u=JSON.parse(o);n(!!JSON.parse(u))}catch{window.localStorage.removeItem("showParticles")}},[]);const r=ee.useCallback(()=>{const o=!e;n(o),window.localStorage.setItem("showParticles",JSON.stringify(o))},[e]),i=ee.useMemo(()=>[e,r],[e,r]);return F.jsx(sj.Provider,{value:i,children:t})},sZ=({deferred:t})=>{const{soundEnabled:e,toggleSound:n}=ee.useContext(wo),{tipsEnabled:r,toggleTips:i,resetTips:o}=ee.useContext(SI),[u,h]=EI(),[f,v]=aj(),{language:_,setLanguage:b}=ee.useContext(wI),S=xn(),[I,M]=oj(),D=ne=>{b(ne.target.value)};return F.jsxs(Cs,{title:F.jsx(Gi,{children:S.formatMessage({id:"Settings"})}),onClose:()=>t.reject(Zn),css:{gap:4},children:[F.jsxs(Te,{css:{gap:3},children:[F.jsxs(Te,{css:{gap:2},children:[F.jsx("label",{children:S.formatMessage({id:"Language"})}),F.jsx(Wn,{as:"select",onChange:D,value:_,children:OS.map(ne=>F.jsx("option",{value:ne,children:S.formatMessage({id:ne})},ne))})]}),F.jsxs(Te,{css:{gap:2},children:[F.jsx("label",{children:S.formatMessage({id:"Difficulty"})}),F.jsx(_f,{value:u,onChange:h,leftComponent:F.jsx(vt,{children:S.formatMessage({id:"Easy"})}),leftValue:!0,rightComponent:F.jsx(vt,{children:S.formatMessage({id:"Hard"})}),rightValue:!1})]}),F.jsxs(Te,{css:{gap:2},children:[F.jsx("label",{children:S.formatMessage({id:"Theme"})}),F.jsx(_f,{value:I,onChange:M,leftComponent:F.jsx(Te,{as:QX,css:{size:"icon"}}),leftValue:"light",rightComponent:F.jsx(Te,{as:KX,css:{size:"icon"}}),rightValue:"dark"})]}),F.jsxs(Te,{css:{gap:2},children:[F.jsx("label",{children:S.formatMessage({id:"Sounds"})}),F.jsx(_f,{invertSounds:!0,value:e,onChange:n,leftComponent:F.jsx(Te,{as:JX,css:{size:"icon"}}),leftValue:!1,rightComponent:F.jsx(Te,{as:XX,css:{size:"icon"}}),rightValue:!0})]}),F.jsxs(Te,{css:{gap:2},children:[F.jsx("label",{children:S.formatMessage({id:"Show particles"})}),F.jsx(_f,{value:f,onChange:v,leftComponent:F.jsx(vt,{children:S.formatMessage({id:"Yes"})}),leftValue:!0,rightComponent:F.jsx(vt,{children:S.formatMessage({id:"No"})}),rightValue:!1})]}),F.jsxs(Te,{css:{gap:2},children:[F.jsx("label",{children:S.formatMessage({id:"Show tips"})}),F.jsx(_f,{value:r,onChange:i,leftComponent:F.jsx(vt,{children:S.formatMessage({id:"Yes"})}),leftValue:!0,rightComponent:F.jsx(vt,{children:S.formatMessage({id:"No"})}),rightValue:!1})]})]}),F.jsx(lJ,{onClick:o,children:S.formatMessage({id:"Reset tips"})})]})},pp=ee.createContext(),aZ=({children:t})=>{const{initialized:e}=ee.useContext(Mr),{playlist:n,startRandomPlaylist:r,initialized:i}=ee.useContext(Ni),{initialized:o,approvedTangrams:u}=ee.useContext(wu),[h,f]=ee.useState(!1),[v,_]=ee.useState(null),b=ee.useCallback(async Ae=>{const tt=new Bs;_({uid:Ae,deferred:tt});try{await tt.promise}catch(Ce){if(Ce!==Zn)throw Ce}finally{_(null)}},[]),[S,I]=ee.useState(null),M=ee.useCallback(async()=>{const Ae=new Bs;I(Ae);try{await Ae.promise}catch(tt){if(tt!==Zn)throw tt}finally{I(null)}},[]),[D,ne]=ee.useState(null),z=ee.useCallback(async()=>{const Ae=new Bs;ne(Ae);try{await Ae.promise}catch(tt){if(tt!==Zn)throw tt}finally{ne(null)}},[]),[Y,K]=ee.useState(null),ue=ee.useCallback(async()=>{const Ae=new Bs;K(Ae);try{await Ae.promise}catch(tt){if(tt!==Zn)throw tt}finally{K(null)}},[]),[oe,fe]=ee.useState(null),me=ee.useCallback(async Ae=>{const tt=new Bs;fe({deferred:tt,tangram:Ae});try{await tt.promise}catch(Ce){if(Ce!==Zn)throw Ce}finally{fe(null)}},[]),[he,Z]=ee.useState(null),Se=ee.useCallback(async()=>{const Ae=new Bs;Z(Ae);try{await Ae.promise}catch(tt){if(tt!==Zn)throw tt}finally{Z(null)}},[]),[Ue,Ge]=ee.useState(null);ee.useEffect(()=>{(async()=>{if(o&&i&&e&&!h){let tt=!1;if(!n&&window.location.search){const Ce=new URLSearchParams(window.location.search);if(Ce.has("tangrams")){const Ut=Ce.get("tangrams").split(","),Fe=Ce.get("uid"),Ne=u.filter(qe=>Ut.includes(qe.id));if(Ne.length){tt=!0,window.history.replaceState({},document.title,window.location.origin);const qe=new Bs;Ge({deferred:qe,tangrams:Ne,uid:Fe});try{await qe.promise,r(!0)}catch(Pt){if(Pt!==Zn)throw Pt}finally{Ge(null)}}}}tt||r(!0),f(!0)}})()},[o,i,e,h]);const ft=ee.useMemo(()=>({showProfile:b,showLeaderboard:M,showGallery:z,showLogin:ue,showTangram:me,showSettings:Se}),[b,M,z,ue,me,Se]);return F.jsxs(pp.Provider,{value:ft,children:[t,Y&&F.jsx(MJ,{deferred:Y}),D&&F.jsx(gJ,{deferred:D}),oe&&F.jsx(JJ,{...oe}),v&&F.jsx(GJ,{...v}),S&&F.jsx(vJ,{deferred:S}),Ue&&F.jsx(dJ,{...Ue}),he&&F.jsx(sZ,{deferred:he})]})},fc=({action:t,icon:e,text:n})=>{const{playButton:r}=ee.useContext(wo);return F.jsxs(Te,{css:{alignItems:"center",flexDirection:"row",gap:3,cursor:"pointer",py:3},onClick:()=>{r(),t()},children:[F.jsx(Te,{as:e,css:{size:"icon"}}),F.jsx(vt,{css:{fontSize:3},children:n})]})},uZ=()=>{const{playlist:t,saveRequestId:e}=ee.useContext(Ni),{currentUser:n}=ee.useContext(Mr),{playButton:r}=ee.useContext(wo),i=xn(),{showLeaderboard:o,showGallery:u,showLogin:h,showProfile:f,showSettings:v}=ee.useContext(pp),[_,b]=ee.useState();ee.useEffect(()=>{_&&_.reject(Zn)},[t,e]);const{requestSave:S}=ee.useContext(Ni),I=async()=>{r();const ne=new Bs;b(ne);try{await ne.promise}catch(z){if(z!==Zn)throw z}finally{b(null)}},M=Bv({0:{color:"pieces.lt2"},14:{color:"pieces.rh"},28:{color:"pieces.st2"},42:{color:"pieces.mt1"},57:{color:"pieces.st1"},71:{color:"pieces.lt1"},85:{color:"pieces.sq"},100:{color:"pieces.lt2"}}),D=Bv({from:{transform:"translate(0, 0)"},to:{transform:"translate(30px, -30px)"}});return F.jsxs(F.Fragment,{children:[F.jsx(Te,{css:{position:"fixed",top:3,left:3,animation:`${M} 20s linear infinite both`},children:F.jsx(Te,{as:z3,css:{size:"menu",cursor:"pointer"},onClick:I})}),_&&F.jsxs(Cs,{onClose:()=>_.reject(Zn),title:F.jsxs(Te,{css:{flexDirection:"row",gap:3,alignItems:"center"},children:[F.jsx(LD,{css:{size:"badge",ml:"-2px",mr:"-6px",overflow:"visible","& > g":{animation:`${D} ${ao}ms ${U1}ms ease both`}}}),F.jsx(Gi,{children:i.formatMessage({id:"Amstangram"})})]}),css:{gap:3,overflow:"initial"},children:[F.jsxs(Te,{children:[n?F.jsx(fc,{action:()=>f(n.uid),icon:()=>F.jsx(Ly,{css:{mx:-1},uid:n.uid,size:"badge"}),text:i.formatMessage({id:"See my profile"})}):F.jsx(fc,{action:h,icon:$3,text:i.formatMessage({id:"Log in"})}),F.jsx(fc,{action:u,icon:B3,text:i.formatMessage({id:"Tangram gallery"})}),F.jsx(fc,{action:S,icon:q3,text:i.formatMessage({id:"Save tangram"})}),F.jsx(fc,{action:o,icon:V3,text:i.formatMessage({id:"Leaderboard"})}),F.jsx(fc,{action:v,icon:W3,text:i.formatMessage({id:"Settings"})})]}),F.jsxs(Te,{css:{flexDirection:"row",alignItems:"baseline",justifyContent:"space-between"},children:[F.jsx(Ks,{as:fP,href:`mailto:millagou.benjamin@gmail.com?subject=${i.formatMessage({id:"A word about Amstangram"})}`,target:"_blank",rel:"noopener, noreferrer",children:i.formatMessage({id:"Contact "})}),F.jsx(Ks,{as:fP,href:"https://github.com/myagoo/amstangram",target:"_blank",rel:"noopener, noreferrer",children:i.formatMessage({id:"Version {code}"},{code:".."})})]})]})]})},jd=(t,e)=>{const n=new window.ClipperLib.ClipperOffset,r=new window.ClipperLib.Paths;if(n.AddPaths([t.map(({x:i,y:o})=>({X:i,Y:o}))],window.ClipperLib.JoinType.jtMiter,window.ClipperLib.EndType.etClosedPolygon),n.MiterLimit=0,n.ArcTolerance=0,n.Execute(r,e),r.length)return r[0].map(({X:i,Y:o})=>new ut.Point(i,o))},lZ=t=>{const e=t[1].getDistance(t[2]),n=t[0].getDistance(t[2]),r=t[0].getDistance(t[1]),i=e+n+r,o=(t[0].x*e+t[1].x*n+t[2].x*r)/i,u=(t[0].y*e+t[1].y*n+t[2].y*r)/i;return new ut.Point(o,u)},wf=(t,e)=>{const n=[new ut.Point(0,0),new ut.Point(t*2,0),new ut.Point(t,t)],r=new ut.Path({name:"display",segments:n,closed:!0}),i=new ut.Path({name:"collision",segments:jd(n,-Xu),closed:!0}),o=new ut.Path({name:"insetBorder",segments:jd(n,-Gs),closed:!0,strokeWidth:Gs}),u=lZ(n),h=new ut.Point(ut.view.center.x+u.x-r.bounds.width/2,ut.view.center.y+u.y-r.bounds.height/2);return new ut.Group({children:[r,i,o],position:ut.view.center,pivot:h,data:{id:e,collisions:new Set},applyMatrix:!0})},cZ=(t,e)=>{const n=[new ut.Point(0,0),new ut.Point(t*2,0),new ut.Point(t*3,t),new ut.Point(t,t)],r=new ut.Path({name:"display",segments:n,closed:!0}),i=new ut.Path({name:"collision",segments:jd(n,-Xu),closed:!0,strokeWidth:Xu}),o=new ut.Path({name:"insetBorder",segments:jd(n,-Gs),closed:!0,strokeWidth:Gs});return new ut.Group({children:[r,i,o],position:ut.view.center,data:{id:e,collisions:new Set},applyMatrix:!0})},hZ=(t,e)=>{const n=new ut.Path.Rectangle({name:"display",point:[0,0],size:[t,t]}),r=new ut.Path.Rectangle({name:"collision",point:[Xu,Xu],size:[t-Xu*2,t-Xu*2]}),i=new ut.Path.Rectangle({name:"insetBorder",point:[Gs,Gs],size:[t-Gs*2,t-Gs*2],strokeWidth:Gs});return new ut.Group({children:[n,r,i],position:ut.view.center,data:{id:e,collisions:new Set},applyMatrix:!0,rotation:Math.round(Math.random()*7)*45})},fZ=()=>{const t=i8,e=Math.sqrt(Math.pow(t,2)*2),n=Math.sqrt(Math.pow(e,2)*2);return new ut.Group([wf(t,"st1"),wf(t,"st2"),wf(e,"mt1"),wf(n,"lt1"),wf(n,"lt2"),hZ(e,"sq"),cZ(t,"rh")])},dZ=(t,e)=>{let n;for(const f of t.children){const v=f.children.display;n?n=n.unite(v,{insert:!1}):n=v}n.scale(1/e),n.position=new ut.Point(n.bounds.width/2,n.bounds.height/2);const r=n.exportSVG().getAttribute("d"),i=n.curves.length,o=Math.round(n.bounds.width),u=Math.round(n.bounds.height),h=Math.round(n.length);return n.remove(),{width:o,height:u,length:h,path:r,edges:i}},AP=(t,e,n)=>{const r={x:n.x-e.x,y:n.y-e.y},i={x:t.x-e.x,y:t.y-e.y},o=r.x*r.x+r.y*r.y;let u=i.x*r.x+i.y*r.y;const h=Math.min(1,Math.max(0,u/o));return u=(n.x-e.x)*(t.y-e.y)-(n.y-e.y)*(t.x-e.x),new ut.Point(e.x+r.x*h,e.y+r.y*h)},kP=(t,e,n)=>{for(const r of e)for(const{point:i}of r.segments)for(const{point:o}of t.segments){const u=o.getDistance(i);u<n.distance&&(n.distance=u,n.shape=r,n.vector=i.subtract(o))}if(!n.vector)for(const r of e){for(const{point:i}of t.segments)for(const{point:o,next:{point:u}}of r.segments){const h=AP(i,o,u),f=h.getDistance(i);f<n.distance&&(n.distance=f,n.vector=h.subtract(i),n.shape=r,n.segment=[o,u],n.point=i)}for(const{point:i}of r.segments)for(const{point:o,next:{point:u}}of t.segments){const h=AP(i,o,u),f=h.getDistance(i);f<n.distance&&(n.distance=f,n.vector=i.subtract(h),n.shape=t,n.segment=[o,u])}}return n},PP=(t,e,n)=>{if(n.segment){let r=n.maxDistance,i;const[o,u]=n.segment,h=Math.atan2(u.y-o.y,u.x-o.x),f=Math.atan2(o.y-u.y,o.x-u.x);for(const v of[h,f])for(const{point:_}of t.segments){if(_===n.point)continue;const b=_.add(n.vector),S=new ut.Point(b.x+n.maxDistance*Math.cos(v),b.y+n.maxDistance*Math.sin(v)),I=new ut.Path.Line({from:b,to:S,insert:!1});for(const M of e){const D=I.getIntersections(M);for(const{point:ne}of D){const z=ne.subtract(b).add(n.vector);z.length<n.maxDistance&&z.length<=r&&(r=z.length,i=z)}}}i&&(n.vector=i)}},pZ=(t,e,n,r)=>{let i={maxDistance:t,distance:t};return kP(e,n,i),r&&kP(e,r,i),PP(e,n.filter(o=>o.shape!==i.shape),i),r&&PP(e,r,i),i.vector},gZ=(t,e,n)=>{let r=t;for(const i of e.children){if(i.data.collisions.size>0)return;r=r.unite(new ut.Path({segments:jd(i.children.display.segments.map(({point:o})=>o),-n),closed:!0,insert:!1}),{insert:!1})}return Math.round(r.length*1e3)===Math.round(t.length*1e3)},vZ=t=>{for(const e of t.children)if(e.data.collisions.size>0)return!1;return!0},$g=(t,e)=>{const n=t.pivot?t.pivot.subtract(t.bounds.center):new ut.Point;t.bounds.x<0&&(t.position.x=t.bounds.width/2+n.x),t.bounds.y<0&&(t.position.y=t.bounds.height/2+n.y),t.bounds.x+t.bounds.width>e.width/window.devicePixelRatio&&(t.position.x=e.width/window.devicePixelRatio-t.bounds.width/2+n.x),t.bounds.y+t.bounds.height>e.height/window.devicePixelRatio&&(t.position.y=e.height/window.devicePixelRatio-t.bounds.height/2+n.y)},mZ=(t,e)=>{const n=new ut.Point(ut.project.view.bounds.width,ut.project.view.bounds.height).subtract(c2*2);if(t.position=ut.Point.random().multiply(n).add(c2),t.data.id==="rh"){const r=Math.round(Math.random()*3)*45;t.rotation=r,t.data.rotation=r}else t.rotation=Math.round(Math.random()*7)*45},RP=(t,e)=>e.segments.every(n=>t.contains(n.point)),CE=(t,e)=>{for(const r of e.children){if(r===t)continue;const i=t.children.collision,o=r.children.collision;i.intersects(o)||RP(i,o)||RP(o,i)?(t.data.collisions.add(r.data.id),r.data.collisions.add(t.data.id)):(t.data.collisions.delete(r.data.id),r.data.collisions.delete(t.data.id))}let n=!0;for(const r of e.children)r.data.collisions.size>0?(n=!1,r.children.display.opacity=o8):r.children.display.opacity=1;return n},yZ=({tangram:t,onStop:e,onNext:n,onApprove:r,onStarToggle:i})=>{const o=xn(),[u,h]=ee.useState(!1),{playStar:f}=ee.useContext(wo),{tangramsStarredBy:v,isTangramStarred:_}=ee.useContext(Ni),b=ee.useMemo(()=>{let D=0;for(const ne in v[t.id])v[t.id][ne]&&(D+=1);return D},[t,v]),S=_(t.id),I=Bv({0:{opacity:"0",transform:"rotate(0) scale(0)"},100:{opacity:1,transform:`rotate(${360*5}deg) scale(1)`}}),M=()=>{setTimeout(()=>h(!0),1e3)};return F.jsx(Te,{css:{position:"absolute",top:0,left:0,right:0,bottom:0,alignItems:"center",justifyContent:"center",gap:3},children:F.jsxs(Te,{css:{position:"relative"},children:[F.jsx(Te,{onAnimationEnd:M,css:{textShadow:"0px 5px 10px #00000080",fontSize:"30vmin",animation:`2000ms ${I} cubic-bezier(.6,1.56,.58,.92) forwards`},children:t.emoji},"emojiSpin"),u&&F.jsxs(Te,{css:{mt:3,position:"absolute",top:"100%",left:"50%",transform:"translateX(-50%)",flexDirection:"row",gap:3,animation:`${ao}ms fadeIn ease both`},children:[r&&F.jsxs(Te,{as:li,onClick:r,css:{boxShadow:"0px 5px 10px #00000080",flexDirection:"row",gap:2,alignItems:"flex-end"},children:[F.jsx(Te,{as:HX,css:{size:"icon"}}),F.jsx(vt,{children:o.formatMessage({id:"Approve"})})]}),i&&F.jsxs(Te,{as:li,mute:!0,onClick:()=>{f(),i()},css:{boxShadow:"0px 5px 10px #00000080",flexDirection:"row",gap:2,alignItems:"flex-end"},children:[F.jsx(vt,{children:b}),F.jsx(Te,{as:fu,css:{size:"icon",fill:S?"currentColor":void 0},deps:[S]})]}),n?F.jsxs(Te,{as:li,onClick:n,css:{boxShadow:"0px 5px 10px #00000080",flexDirection:"row",gap:2,alignItems:"flex-end"},children:[F.jsx(Te,{as:YX,css:{size:"icon"}}),F.jsx(vt,{children:o.formatMessage({id:"Next"})})]}):F.jsxs(Te,{as:li,onClick:e,css:{boxShadow:"0px 5px 10px #00000080",flexDirection:"row",gap:2,alignItems:"flex-end"},children:[F.jsx(Te,{as:H3,css:{size:"icon"}}),F.jsx(vt,{children:o.formatMessage({id:"Quit"})})]})]})]})})},_Z=()=>{const t=xn(),{showRandomTip:e,showWelcome:n}=ee.useContext(SI),{showLogin:r,showTangram:i}=ee.useContext(pp),{playTangram:o,playVictory:u}=ee.useContext(wo),h=ee.useRef();h.current={tangram:o,victory:u};const{currentUser:f}=ee.useContext(Mr),v=ee.useRef();v.current=f;const _=ee.useContext(Xo),b=ee.useContext(_o),[S]=EI(),[I]=aj(),{saveRequestId:M,playlist:D,setPlaylist:ne,markTangramAsComplete:z,toggleTangramStar:Y}=ee.useContext(Ni),K=ee.useRef();K.current=z;const[ue,oe]=ee.useState(0),[fe,me]=ee.useState(!1),he=ee.useRef(),Z=ee.useRef(),Se=ee.useRef(),Ue=ee.useRef(),Ge=ee.useRef(),ft=ee.useRef(),Ae=ee.useRef(),tt=ee.useMemo(()=>D&&D[ue],[D,ue]),Ce=()=>{me(!1),oe(ue+1),e()},Ut=()=>{me(!1),ne(null),e()},Fe=async()=>{await ze.firestore().collection("tangrams").doc(tt.id).update({approved:!0}),b(t.formatMessage({id:"Tangram approved"}))};return ee.useEffect(()=>{oe(0)},[D]),ee.useEffect(()=>{if(M){if(!vZ(Se.current)){b(t.formatMessage({id:"You can't save an invalid tangram"}));return}const Ne=dZ(Se.current,Z.current);if(Ne.edges===23){b(t.formatMessage({id:"You can't save such an easy tangram"}));return}(async()=>{f||await r(),await i(Ne)})()}},[M]),ee.useEffect(()=>{const Ne=()=>{if(he.current&&Se.current)for(const qe of Se.current.children)$g(qe,he.current)};return window.addEventListener("resize",Ne),()=>window.removeEventListener("resize",Ne)},[]),ee.useLayoutEffect(()=>{const Ne=Date.now(),qe=rt=>{let Kt=null,It=null,zt=null,Nn=null;const Rt=je=>{document.activeElement===he.current&&(document.body.style.cursor="pointer")},xs=je=>{document.body.style.cursor="default"},ce=je=>{zt=Date.now(),Nn=je.point,Kt=je.point.subtract(rt.position),It=rt.clone({insert:!1,deep:!0}),rt.bringToFront()},ve=je=>{document.body.style.cursor="move";const Ve=je.point.subtract(rt.position).subtract(Kt);It.position=rt.position.add(Ve);const He=It.children["display 1"],Vt=Se.current.children.filter(Eo=>Eo!==rt).map(({children:Eo})=>Eo.display),Kr=ft.current&&Ge.current?Ge.current.children?Ge.current.children:[Ge.current]:null,Xi=pZ(l2,He,Vt,Kr);Xi&&(It.position.x+=Xi.x,It.position.y+=Xi.y),$g(It,he.current),rt.position=It.position,CE(rt,Se.current)},_e=je=>{if(document.body.style.cursor="pointer",je.point.subtract(Nn).length<l2&&Date.now()-zt<u8&&(rt.rotation+=45,rt.data.id==="rh"&&(rt.data.rotation+=45,rt.data.rotation===180&&(rt.data.rotation=0,rt.scale(-1,1))),h.current.tangram(),$g(rt,he.current),CE(rt,Se.current),zt=null,Nn=null),Kt=null,It&&It.remove(),It=null,!!Ge.current&&(ft.current===!1&&(Ge.current.position=Se.current.position),gZ(Ge.current,Se.current,ft.current?s8:a8))){K.current(tt,Date.now()-Ne);for(const De of Se.current.children)De.data.removeListeners();if(document.body.style.cursor="default",!Ae.current){h.current.victory(),me(!0);return}ut.project.activeLayer.tween({opacity:0},{duration:Cg,easing:"easeInCubic"});for(const De of Ue.current)De.data.animation.stop(),De.tween({"position.x":Se.current.position.x,"position.y":Se.current.position.y,opacity:p2},{duration:Cg,easing:"easeInCubic"});setTimeout(()=>{h.current.victory(),ut.project.activeLayer.tween({opacity:1},{duration:ao,easing:"easeOutCubic"});const De=Math.max(ut.view.bounds.width,ut.view.bounds.height)/2;for(const Ve of Ue.current){Ve.data.animation.stop();const He=Math.random()*Math.PI*2,Vt=Math.random()*De;Ve.tween({"position.x":Ve.position.x+Vt*Math.cos(He),"position.y":Ve.position.y+Vt*Math.sin(He),opacity:0},{duration:Cg,easing:"easeOutCubic"})}me(!0)},Cg)}};rt.on({mouseenter:Rt,mouseleave:xs,mousedown:ce,mousedrag:ve,mouseup:_e}),rt.data.removeListeners=()=>rt.off({mouseenter:Rt,mouseleave:xs,mousedown:ce,mousedrag:ve,mouseup:_e})};return(()=>{ut.setup(he.current),Se.current=fZ(),tt&&(Ge.current=ut.project.importSVG(`<path d="${tt.path}" />`,{applyMatrix:!0}),Ge.current.sendToBack(),Ge.current.fillRule="evenodd",Ge.current.closed=!0);const rt=ut.project.view.bounds,Kt=Ge.current?Ge.current.bounds:Se.current.children[3].bounds.scale(2);rt.width>rt.height?Z.current=Math.min(2,Math.min(rt.width*.6,700)/Kt.width,Math.min(rt.height*.8,600)/Kt.height):Z.current=Math.min(2,Math.min(rt.width*.8,600)/Kt.width,Math.min(rt.height*.6,700)/Kt.height),Ge.current&&(Ge.current.scale(Z.current),Ge.current.position=ut.view.center);for(const It of Se.current.children)It.scale(Z.current),mZ(It,he.current),qe(It),$g(It,he.current),CE(It,Se.current)})(),()=>{ut.project.remove(),Ue.current=null,Se.current=null,Ge.current=null}},[tt]),ee.useLayoutEffect(()=>{ft.current=S,Ge.current&&(S?(Ge.current.fillColor=_.colors.shape,Ge.current.position=ut.view.center):Ge.current.fillColor="transparent")},[tt,S,_]),ee.useLayoutEffect(()=>{if(Ae.current=I,!I)return;const Ne=new ut.Group;Ne.sendToBack();const qe=new ut.Point(he.current.width,he.current.height).divide(window.devicePixelRatio),Pt=()=>Math.random()*(l8-f2)+f2,rt=()=>Math.random()*(p2-d2)+d2;Ue.current=new Array(h2);for(let Kt=0;Kt<h2;Kt++){const It=new ut.Path.Circle({center:ut.Point.random().multiply(qe),radius:Pt(),opacity:rt(),parent:Ne,data:{index:Kt}}),zt=()=>{const Nn={radius:Pt(),opacity:rt(),"position.x":Math.min(he.current.width/window.devicePixelRatio,Math.max(0,It.position.x+Math.random()*200-100)),"position.y":Math.min(he.current.height/window.devicePixelRatio,Math.max(0,It.position.y+Math.random()*200-100))};It.data.animation=It.tween(Nn,{duration:Math.random()*1e4+5e3,easing:"easeInOutQuad"}).then(zt)};zt(),Ue.current[Kt]=It}return()=>{Ne.remove(),Ue.current=null}},[tt,I]),ee.useLayoutEffect(()=>{for(const qe of Se.current.children)qe.children.display.fillColor=_.colors.pieces[qe.data.id],qe.children.insetBorder.strokeColor=_.colors.pieces[qe.data.id];const Ne=Object.values(_.colors.pieces);if(I)for(const qe of Ue.current)qe.fillColor=Ne[Math.floor(Math.random()*Ne.length)]},[_.colors,tt,I]),ee.useEffect(()=>{n()},[]),F.jsxs(Te,{css:{flex:"1",position:"relative",color:"dialogText",animation:`${ao}ms fadeIn ease`},children:[tt&&S===!1&&F.jsx(Te,{css:{zIndex:-1,position:"absolute",top:3,right:3,cursor:"pointer"},children:F.jsx(fp,{tangram:tt,selected:!0,hideBadge:!0})}),F.jsx(Te,{as:"canvas",ref:he,css:{minHeight:"auto",flex:1}}),tt&&fe&&F.jsx(yZ,{tangram:tt,onStop:Ut,onNext:ue<D.length-1?Ce:void 0,onApprove:f&&f.isAdmin&&!tt.approved?Fe:void 0,onStarToggle:f&&tt.approved?()=>Y(tt):void 0})]})},wZ=()=>{const t=xn(),e=ee.useContext(_o),[n,r]=ee.useState(!1),[i,o]=ee.useState(!1),[u,h]=ee.useState(!1),[f,v]=ee.useState(!1),{initialized:_}=ee.useContext(wu),{playlist:b,initialized:S}=ee.useContext(Ni),{currentUser:I,initialized:M}=ee.useContext(Mr),D=M&&_&&S&&b;if(ee.useEffect(()=>{setTimeout(()=>r(!0),ao*2),h(setTimeout(()=>o(!0),ao*2))},[]),ee.useEffect(()=>{D&&(clearTimeout(u),o(!1))},[D]),f)return F.jsxs(F.Fragment,{children:[F.jsx(_Z,{}),F.jsx(uZ,{})]});const ne=()=>{v(!0),I&&e(t.formatMessage({id:"Logged in as {username}"},{username:I.username}))};return F.jsxs(Te,{css:{flex:"1",alignItems:"center",justifyContent:"center",gap:3,animation:D&&n?`${ao}ms fadeIn ease ${U1}ms reverse`:void 0},deps:[D,n],onAnimationEnd:z=>{z.currentTarget===z.target&&ne()},children:[F.jsx(Te,{css:{animation:`${ao}ms fadeIn ease ${U1}ms both`},children:F.jsx(LD,{css:{size:"logo",overflow:"visible","& > g":{transition:`all ${ao}ms ease`,transform:D&&n?"translate(30px, -30px)":"translate(0, 0)"}},deps:[D,n]})}),F.jsx(Gi,{css:{transition:`opacity ${ao}ms ease`,opacity:i?1:0},deps:[i],children:t.formatMessage({id:"Loading..."})})]})},EZ=()=>(ee.useEffect(()=>{matchMedia("hover: none").matches&&(window.oncontextmenu=function(){return!1})},[]),IB({body:{m:0,bg:"background",fontFamily:`-apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto",
        "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans",
        "Helvetica Neue", sans-serif`,"-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale",transition:`background-color ${qv}ms`},"body, html, #root":{height:"100%"},"#root":{display:"flex",flexDirection:"column",padding:`
        env(safe-area-inset-top, 0)
        env(safe-area-inset-right, 0)
        env(safe-area-inset-bottom, 0)
        env(safe-area-inset-left, 0)
      `},"*":{boxSizing:"border-box",userSelect:"none","-moz-user-select":"none","-khtml-user-select":"none","-webkit-user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)"},"input, textarea":{"-webkit-user-select":"initial","-moz-user-select":"initial","-ms-user-select":"initial",userSelect:"initial"}}),F.jsx(tZ,{children:F.jsx(uJ,{children:F.jsx(BJ,{children:F.jsx(jX,{children:F.jsx(UX,{children:F.jsx(qX,{children:F.jsx(ZJ,{children:F.jsx(oZ,{children:F.jsx(WX,{children:F.jsx(iZ,{children:F.jsx(aZ,{children:F.jsx(Te,{css:{flex:"1",color:"dialogText",fontSize:3},children:F.jsx(wZ,{})})})})})})})})})})})})}));xE.createRoot(document.getElementById("root")).render(F.jsx(EZ,{}));export{OP as c,DP as g};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}