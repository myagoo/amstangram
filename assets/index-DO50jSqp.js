(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var CP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function NP(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Q1(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var AP={exports:{}},by={},kP={exports:{}},Bt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sp=Symbol.for("react.element"),Q6=Symbol.for("react.portal"),J6=Symbol.for("react.fragment"),Z6=Symbol.for("react.strict_mode"),eB=Symbol.for("react.profiler"),tB=Symbol.for("react.provider"),nB=Symbol.for("react.context"),rB=Symbol.for("react.forward_ref"),iB=Symbol.for("react.suspense"),oB=Symbol.for("react.memo"),sB=Symbol.for("react.lazy"),ck=Symbol.iterator;function aB(t){return t===null||typeof t!="object"?null:(t=ck&&t[ck]||t["@@iterator"],typeof t=="function"?t:null)}var RP={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},OP=Object.assign,PP={};function Gh(t,e,n){this.props=t,this.context=e,this.refs=PP,this.updater=n||RP}Gh.prototype.isReactComponent={};Gh.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Gh.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function DP(){}DP.prototype=Gh.prototype;function J1(t,e,n){this.props=t,this.context=e,this.refs=PP,this.updater=n||RP}var Z1=J1.prototype=new DP;Z1.constructor=J1;OP(Z1,Gh.prototype);Z1.isPureReactComponent=!0;var hk=Array.isArray,LP=Object.prototype.hasOwnProperty,eT={current:null},MP={key:!0,ref:!0,__self:!0,__source:!0};function FP(t,e,n){var r,i={},o=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)LP.call(e,r)&&!MP.hasOwnProperty(r)&&(i[r]=e[r]);var c=arguments.length-2;if(c===1)i.children=n;else if(1<c){for(var f=Array(c),v=0;v<c;v++)f[v]=arguments[v+2];i.children=f}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)i[r]===void 0&&(i[r]=c[r]);return{$$typeof:Sp,type:t,key:o,ref:a,props:i,_owner:eT.current}}function uB(t,e){return{$$typeof:Sp,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function tT(t){return typeof t=="object"&&t!==null&&t.$$typeof===Sp}function lB(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var fk=/\/+/g;function tE(t,e){return typeof t=="object"&&t!==null&&t.key!=null?lB(""+t.key):e.toString(36)}function Mg(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Sp:case Q6:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+tE(a,0):r,hk(i)?(n="",t!=null&&(n=t.replace(fk,"$&/")+"/"),Mg(i,e,n,"",function(v){return v})):i!=null&&(tT(i)&&(i=uB(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(fk,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",hk(t))for(var c=0;c<t.length;c++){o=t[c];var f=r+tE(o,c);a+=Mg(o,e,n,f,i)}else if(f=aB(t),typeof f=="function")for(t=f.call(t),c=0;!(o=t.next()).done;)o=o.value,f=r+tE(o,c++),a+=Mg(o,e,n,f,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function $v(t,e,n){if(t==null)return t;var r=[],i=0;return Mg(t,r,"","",function(o){return e.call(n,o,i++)}),r}function cB(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var wi={current:null},Fg={transition:null},hB={ReactCurrentDispatcher:wi,ReactCurrentBatchConfig:Fg,ReactCurrentOwner:eT};Bt.Children={map:$v,forEach:function(t,e,n){$v(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return $v(t,function(){e++}),e},toArray:function(t){return $v(t,function(e){return e})||[]},only:function(t){if(!tT(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Bt.Component=Gh;Bt.Fragment=J6;Bt.Profiler=eB;Bt.PureComponent=J1;Bt.StrictMode=Z6;Bt.Suspense=iB;Bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hB;Bt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=OP({},t.props),i=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=eT.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(f in e)LP.call(e,f)&&!MP.hasOwnProperty(f)&&(r[f]=e[f]===void 0&&c!==void 0?c[f]:e[f])}var f=arguments.length-2;if(f===1)r.children=n;else if(1<f){c=Array(f);for(var v=0;v<f;v++)c[v]=arguments[v+2];r.children=c}return{$$typeof:Sp,type:t.type,key:i,ref:o,props:r,_owner:a}};Bt.createContext=function(t){return t={$$typeof:nB,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:tB,_context:t},t.Consumer=t};Bt.createElement=FP;Bt.createFactory=function(t){var e=FP.bind(null,t);return e.type=t,e};Bt.createRef=function(){return{current:null}};Bt.forwardRef=function(t){return{$$typeof:rB,render:t}};Bt.isValidElement=tT;Bt.lazy=function(t){return{$$typeof:sB,_payload:{_status:-1,_result:t},_init:cB}};Bt.memo=function(t,e){return{$$typeof:oB,type:t,compare:e===void 0?null:e}};Bt.startTransition=function(t){var e=Fg.transition;Fg.transition={};try{t()}finally{Fg.transition=e}};Bt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Bt.useCallback=function(t,e){return wi.current.useCallback(t,e)};Bt.useContext=function(t){return wi.current.useContext(t)};Bt.useDebugValue=function(){};Bt.useDeferredValue=function(t){return wi.current.useDeferredValue(t)};Bt.useEffect=function(t,e){return wi.current.useEffect(t,e)};Bt.useId=function(){return wi.current.useId()};Bt.useImperativeHandle=function(t,e,n){return wi.current.useImperativeHandle(t,e,n)};Bt.useInsertionEffect=function(t,e){return wi.current.useInsertionEffect(t,e)};Bt.useLayoutEffect=function(t,e){return wi.current.useLayoutEffect(t,e)};Bt.useMemo=function(t,e){return wi.current.useMemo(t,e)};Bt.useReducer=function(t,e,n){return wi.current.useReducer(t,e,n)};Bt.useRef=function(t){return wi.current.useRef(t)};Bt.useState=function(t){return wi.current.useState(t)};Bt.useSyncExternalStore=function(t,e,n){return wi.current.useSyncExternalStore(t,e,n)};Bt.useTransition=function(){return wi.current.useTransition()};Bt.version="18.2.0";kP.exports=Bt;var ee=kP.exports;const rr=NP(ee);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fB=ee,dB=Symbol.for("react.element"),pB=Symbol.for("react.fragment"),vB=Object.prototype.hasOwnProperty,gB=fB.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,mB={key:!0,ref:!0,__self:!0,__source:!0};function jP(t,e,n){var r,i={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)vB.call(e,r)&&!mB.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:dB,type:t,key:o,ref:a,props:i,_owner:gB.current}}by.Fragment=pB;by.jsx=jP;by.jsxs=jP;AP.exports=by;var F=AP.exports;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Mb=function(t,e){return Mb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},Mb(t,e)};function Sy(t,e){Mb(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var an=function(){return an=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},an.apply(this,arguments)};function dk(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function sm(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o}function pl(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(sm(arguments[e]));return t}var _a;(function(t){t.Ok="ok",t.Exited="exited",t.Crashed="crashed",t.Abnormal="abnormal"})(_a||(_a={}));var pk;(function(t){t.Ok="ok",t.Errored="errored",t.Crashed="crashed"})(pk||(pk={}));var Ds;(function(t){t.Fatal="fatal",t.Error="error",t.Warning="warning",t.Log="log",t.Info="info",t.Debug="debug",t.Critical="critical"})(Ds||(Ds={}));(function(t){function e(n){switch(n){case"debug":return t.Debug;case"info":return t.Info;case"warn":case"warning":return t.Warning;case"error":return t.Error;case"fatal":return t.Fatal;case"critical":return t.Critical;case"log":default:return t.Log}}t.fromString=e})(Ds||(Ds={}));var kl;(function(t){t.Unknown="unknown",t.Skipped="skipped",t.Success="success",t.RateLimit="rate_limit",t.Invalid="invalid",t.Failed="failed"})(kl||(kl={}));(function(t){function e(n){return n>=200&&n<300?t.Success:n===429?t.RateLimit:n>=400&&n<500?t.Invalid:n>=500?t.Failed:t.Unknown}t.fromHttpCode=e})(kl||(kl={}));var ns;(function(t){t.BeforeSend="before_send",t.EventProcessor="event_processor",t.NetworkError="network_error",t.QueueOverflow="queue_overflow",t.RateLimitBackoff="ratelimit_backoff",t.SampleRate="sample_rate"})(ns||(ns={}));/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function yB(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o}function _B(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(yB(arguments[e]));return t}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ht=function(){return ht=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},ht.apply(this,arguments)};function wB(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o}function Uc(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(wB(arguments[e]));return t}function EB(t){t.then(null,function(e){console.error(e)})}function nT(){return Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function bB(t,e){return t.require(e)}var SB={};function kn(){return nT()?global:typeof window<"u"?window:typeof self<"u"?self:SB}function UP(t){switch(Object.prototype.toString.call(t)){case"[object Error]":return!0;case"[object Exception]":return!0;case"[object DOMException]":return!0;default:return xu(t,Error)}}function VP(t){return Object.prototype.toString.call(t)==="[object ErrorEvent]"}function vk(t){return Object.prototype.toString.call(t)==="[object DOMError]"}function TB(t){return Object.prototype.toString.call(t)==="[object DOMException]"}function Th(t){return Object.prototype.toString.call(t)==="[object String]"}function Ty(t){return t===null||typeof t!="object"&&typeof t!="function"}function Ih(t){return Object.prototype.toString.call(t)==="[object Object]"}function rT(t){return typeof Event<"u"&&xu(t,Event)}function gk(t){return typeof Element<"u"&&xu(t,Element)}function IB(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function iT(t){return!!(t&&t.then&&typeof t.then=="function")}function xB(t){return Ih(t)&&"nativeEvent"in t&&"preventDefault"in t&&"stopPropagation"in t}function xu(t,e){try{return t instanceof e}catch{return!1}}function am(t,e){try{for(var n=t,r=5,i=80,o=[],a=0,c=0,f=" > ",v=f.length,y=void 0;n&&a++<r&&(y=CB(n,e),!(y==="html"||a>1&&c+o.length*v+y.length>=i));)o.push(y),c+=y.length,n=n.parentNode;return o.reverse().join(f)}catch{return"<unknown>"}}function CB(t,e){var n,r,i=t,o=[],a,c,f,v,y;if(!i||!i.tagName)return"";o.push(i.tagName.toLowerCase());var b=!((n=e)===null||n===void 0)&&n.length?e.filter(function(I){return i.getAttribute(I)}).map(function(I){return[I,i.getAttribute(I)]}):null;if(!((r=b)===null||r===void 0)&&r.length)b.forEach(function(I){o.push("["+I[0]+'="'+I[1]+'"]')});else if(i.id&&o.push("#"+i.id),a=i.className,a&&Th(a))for(c=a.split(/\s+/),y=0;y<c.length;y++)o.push("."+c[y]);var E=["type","name","title","alt"];for(y=0;y<E.length;y++)f=E[y],v=i.getAttribute(f),v&&o.push("["+f+'="'+v+'"]');return o.join("")}function NB(){var t=kn();try{return t.document.location.href}catch{return""}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Fb=function(t,e){return Fb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},Fb(t,e)};function AB(t,e){Fb(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var wo=function(){return wo=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},wo.apply(this,arguments)};function BP(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function kB(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o}var RB=Object.setPrototypeOf||({__proto__:[]}instanceof Array?OB:PB);function OB(t,e){return t.__proto__=e,t}function PB(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n]);return t}var ir=function(t){AB(e,t);function e(n){var r=this.constructor,i=t.call(this,n)||this;return i.message=n,i.name=r.prototype.constructor.name,RB(i,r.prototype),i}return e}(Error),DB=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+))?@)([\w.-]+)(?::(\d+))?\/(.+)/,jf="Invalid Dsn",zP=function(){function t(e){typeof e=="string"?this._fromString(e):this._fromComponents(e),this._validate()}return t.prototype.toString=function(e){e===void 0&&(e=!1);var n=this,r=n.host,i=n.path,o=n.pass,a=n.port,c=n.projectId,f=n.protocol,v=n.publicKey;return f+"://"+v+(e&&o?":"+o:"")+("@"+r+(a?":"+a:"")+"/"+(i&&i+"/")+c)},t.prototype._fromString=function(e){var n=DB.exec(e);if(!n)throw new ir(jf);var r=kB(n.slice(1),6),i=r[0],o=r[1],a=r[2],c=a===void 0?"":a,f=r[3],v=r[4],y=v===void 0?"":v,b=r[5],E="",I=b,L=I.split("/");if(L.length>1&&(E=L.slice(0,-1).join("/"),I=L.pop()),I){var D=I.match(/^\d+/);D&&(I=D[0])}this._fromComponents({host:f,pass:c,path:E,projectId:I,port:y,protocol:i,publicKey:o})},t.prototype._fromComponents=function(e){"user"in e&&!("publicKey"in e)&&(e.publicKey=e.user),this.user=e.publicKey||"",this.protocol=e.protocol,this.publicKey=e.publicKey||"",this.pass=e.pass||"",this.host=e.host,this.port=e.port||"",this.path=e.path||"",this.projectId=e.projectId},t.prototype._validate=function(){var e=this;if(["protocol","publicKey","host","projectId"].forEach(function(n){if(!e[n])throw new ir(jf+": "+n+" missing")}),!this.projectId.match(/^\d+$/))throw new ir(jf+": Invalid projectId "+this.projectId);if(this.protocol!=="http"&&this.protocol!=="https")throw new ir(jf+": Invalid protocol "+this.protocol);if(this.port&&isNaN(parseInt(this.port,10)))throw new ir(jf+": Invalid port "+this.port)},t}(),Sl=kn(),nE="Sentry Logger ";function jg(t){var e=kn(),n=["debug","info","warn","error","log","assert"];if(!("console"in e))return t();var r=e.console,i={};n.forEach(function(a){a in e.console&&r[a].__sentry_original__&&(i[a]=r[a],r[a]=r[a].__sentry_original__)});var o=t();return Object.keys(i).forEach(function(a){r[a]=i[a]}),o}var LB=function(){function t(){this._enabled=!1}return t.prototype.disable=function(){this._enabled=!1},t.prototype.enable=function(){this._enabled=!0},t.prototype.log=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._enabled&&jg(function(){Sl.console.log(nE+"[Log]: "+e.join(" "))})},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._enabled&&jg(function(){Sl.console.warn(nE+"[Warn]: "+e.join(" "))})},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._enabled&&jg(function(){Sl.console.error(nE+"[Error]: "+e.join(" "))})},t}();Sl.__SENTRY__=Sl.__SENTRY__||{};var Ut=Sl.__SENTRY__.logger||(Sl.__SENTRY__.logger=new LB),MB=function(){function t(){this._hasWeakSet=typeof WeakSet=="function",this._inner=this._hasWeakSet?new WeakSet:[]}return t.prototype.memoize=function(e){if(this._hasWeakSet)return this._inner.has(e)?!0:(this._inner.add(e),!1);for(var n=0;n<this._inner.length;n++){var r=this._inner[n];if(r===e)return!0}return this._inner.push(e),!1},t.prototype.unmemoize=function(e){if(this._hasWeakSet)this._inner.delete(e);else for(var n=0;n<this._inner.length;n++)if(this._inner[n]===e){this._inner.splice(n,1);break}},t}(),rE="<anonymous>";function Qa(t){try{return!t||typeof t!="function"?rE:t.name||rE}catch{return rE}}function hd(t,e){return e===void 0&&(e=0),typeof t!="string"||e===0||t.length<=e?t:t.substr(0,e)+"..."}function mk(t,e){if(!Array.isArray(t))return"";for(var n=[],r=0;r<t.length;r++){var i=t[r];try{n.push(String(i))}catch{n.push("[value cannot be serialized]")}}return n.join(e)}function iE(t,e){return Th(t)?IB(e)?e.test(t):typeof e=="string"?t.indexOf(e)!==-1:!1:!1}function $r(t,e,n){if(e in t){var r=t[e],i=n(r);if(typeof i=="function")try{i.prototype=i.prototype||{},Object.defineProperties(i,{__sentry_original__:{enumerable:!1,value:r}})}catch{}t[e]=i}}function FB(t){return Object.keys(t).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&")}function qP(t){if(UP(t)){var e=t,n={message:e.message,name:e.name,stack:e.stack};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}if(rT(t)){var i=t,o={};o.type=i.type;try{o.target=gk(i.target)?am(i.target):Object.prototype.toString.call(i.target)}catch{o.target="<unknown>"}try{o.currentTarget=gk(i.currentTarget)?am(i.currentTarget):Object.prototype.toString.call(i.currentTarget)}catch{o.currentTarget="<unknown>"}typeof CustomEvent<"u"&&xu(t,CustomEvent)&&(o.detail=i.detail);for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(o[a]=i[a]);return o}return t}function jB(t){return~-encodeURI(t).split(/%..|./).length}function UB(t){return jB(JSON.stringify(t))}function WP(t,e,n){e===void 0&&(e=3),n===void 0&&(n=100*1024);var r=Vc(t,e);return UB(r)>n?WP(t,e-1,n):r}function VB(t){var e=Object.prototype.toString.call(t);if(typeof t=="string")return t;if(e==="[object Object]")return"[Object]";if(e==="[object Array]")return"[Array]";var n=GP(t);return Ty(n)?n:e}function GP(t,e){return e==="domain"&&t&&typeof t=="object"&&t._events?"[Domain]":e==="domainEmitter"?"[DomainEmitter]":typeof global<"u"&&t===global?"[Global]":typeof window<"u"&&t===window?"[Window]":typeof document<"u"&&t===document?"[Document]":xB(t)?"[SyntheticEvent]":typeof t=="number"&&t!==t?"[NaN]":t===void 0?"[undefined]":typeof t=="function"?"[Function: "+Qa(t)+"]":typeof t=="symbol"?"["+String(t)+"]":typeof t=="bigint"?"[BigInt: "+String(t)+"]":t}function $P(t,e,n,r){if(n===void 0&&(n=1/0),r===void 0&&(r=new MB),n===0)return VB(e);if(e!=null&&typeof e.toJSON=="function")return e.toJSON();var i=GP(e,t);if(Ty(i))return i;var o=qP(e),a=Array.isArray(e)?[]:{};if(r.memoize(e))return"[Circular ~]";for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(a[c]=$P(c,o[c],n-1,r));return r.unmemoize(e),a}function Vc(t,e){try{return JSON.parse(JSON.stringify(t,function(n,r){return $P(n,r,e)}))}catch{return"**non-serializable**"}}function BB(t,e){e===void 0&&(e=40);var n=Object.keys(qP(t));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=e)return hd(n[0],e);for(var r=n.length;r>0;r--){var i=n.slice(0,r).join(", ");if(!(i.length>e))return r===n.length?i:hd(i,e)}return""}function um(t){var e,n;if(Ih(t)){var r=t,i={};try{for(var o=BP(Object.keys(r)),a=o.next();!a.done;a=o.next()){var c=a.value;typeof r[c]<"u"&&(i[c]=um(r[c]))}}catch(f){e={error:f}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return i}return Array.isArray(t)?t.map(um):t}function Iy(){if(!("fetch"in kn()))return!1;try{return new Headers,new Request(""),new Response,!0}catch{return!1}}function jb(t){return t&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}function zB(){if(!Iy())return!1;var t=kn();if(jb(t.fetch))return!0;var e=!1,n=t.document;if(n&&typeof n.createElement=="function")try{var r=n.createElement("iframe");r.hidden=!0,n.head.appendChild(r),r.contentWindow&&r.contentWindow.fetch&&(e=jb(r.contentWindow.fetch)),n.head.removeChild(r)}catch(i){Ut.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",i)}return e}function qB(){if(!Iy())return!1;try{return new Request("_",{referrerPolicy:"origin"}),!0}catch{return!1}}function WB(){var t=kn(),e=t.chrome,n=e&&e.app&&e.app.runtime,r="history"in t&&!!t.history.pushState&&!!t.history.replaceState;return!n&&r}var En=kn(),fd={},yk={};function GB(t){if(!yk[t])switch(yk[t]=!0,t){case"console":$B();break;case"dom":tz();break;case"xhr":XB();break;case"fetch":HB();break;case"history":QB();break;case"error":nz();break;case"unhandledrejection":rz();break;default:Ut.warn("unknown instrumentation type:",t)}}function tu(t){!t||typeof t.type!="string"||typeof t.callback!="function"||(fd[t.type]=fd[t.type]||[],fd[t.type].push(t.callback),GB(t.type))}function rs(t,e){var n,r;if(!(!t||!fd[t]))try{for(var i=BP(fd[t]||[]),o=i.next();!o.done;o=i.next()){var a=o.value;try{a(e)}catch(c){Ut.error(`Error while triggering instrumentation handler.
Type: `+t+`
Name: `+Qa(a)+`
Error: `+c)}}}catch(c){n={error:c}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function $B(){"console"in En&&["debug","info","warn","error","log","assert"].forEach(function(t){t in En.console&&$r(En.console,t,function(e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];rs("console",{args:n,level:t}),e&&Function.prototype.apply.call(e,En.console,n)}})})}function HB(){zB()&&$r(En,"fetch",function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r={args:e,fetchData:{method:KB(e),url:YB(e)},startTimestamp:Date.now()};return rs("fetch",wo({},r)),t.apply(En,e).then(function(i){return rs("fetch",wo(wo({},r),{endTimestamp:Date.now(),response:i})),i},function(i){throw rs("fetch",wo(wo({},r),{endTimestamp:Date.now(),error:i})),i})}})}function KB(t){return t===void 0&&(t=[]),"Request"in En&&xu(t[0],Request)&&t[0].method?String(t[0].method).toUpperCase():t[1]&&t[1].method?String(t[1].method).toUpperCase():"GET"}function YB(t){return t===void 0&&(t=[]),typeof t[0]=="string"?t[0]:"Request"in En&&xu(t[0],Request)?t[0].url:String(t[0])}function XB(){if("XMLHttpRequest"in En){var t=[],e=[],n=XMLHttpRequest.prototype;$r(n,"open",function(r){return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var a=this,c=i[1];a.__sentry_xhr__={method:Th(i[0])?i[0].toUpperCase():i[0],url:i[1]},Th(c)&&a.__sentry_xhr__.method==="POST"&&c.match(/sentry_key/)&&(a.__sentry_own_request__=!0);var f=function(){if(a.readyState===4){try{a.__sentry_xhr__&&(a.__sentry_xhr__.status_code=a.status)}catch{}try{var v=t.indexOf(a);if(v!==-1){t.splice(v);var y=e.splice(v)[0];a.__sentry_xhr__&&y[0]!==void 0&&(a.__sentry_xhr__.body=y[0])}}catch{}rs("xhr",{args:i,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:a})}};return"onreadystatechange"in a&&typeof a.onreadystatechange=="function"?$r(a,"onreadystatechange",function(v){return function(){for(var y=[],b=0;b<arguments.length;b++)y[b]=arguments[b];return f(),v.apply(a,y)}}):a.addEventListener("readystatechange",f),r.apply(a,i)}}),$r(n,"send",function(r){return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return t.push(this),e.push(i),rs("xhr",{args:i,startTimestamp:Date.now(),xhr:this}),r.apply(this,i)}})}}var Hv;function QB(){if(!WB())return;var t=En.onpopstate;En.onpopstate=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=En.location.href,o=Hv;if(Hv=i,rs("history",{from:o,to:i}),t)try{return t.apply(this,n)}catch{}};function e(n){return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=r.length>2?r[2]:void 0;if(o){var a=Hv,c=String(o);Hv=c,rs("history",{from:a,to:c})}return n.apply(this,r)}}$r(En.history,"pushState",e),$r(En.history,"replaceState",e)}var JB=1e3,Kv,Yv;function ZB(t,e){if(!t||t.type!==e.type)return!0;try{if(t.target!==e.target)return!0}catch{}return!1}function ez(t){if(t.type!=="keypress")return!1;try{var e=t.target;if(!e||!e.tagName)return!0;if(e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable)return!1}catch{}return!0}function _k(t,e){return e===void 0&&(e=!1),function(n){if(!(!n||Yv===n)&&!ez(n)){var r=n.type==="keypress"?"input":n.type;Kv===void 0?(t({event:n,name:r,global:e}),Yv=n):ZB(Yv,n)&&(t({event:n,name:r,global:e}),Yv=n),clearTimeout(Kv),Kv=En.setTimeout(function(){Kv=void 0},JB)}}}function tz(){if("document"in En){var t=rs.bind(null,"dom"),e=_k(t,!0);En.document.addEventListener("click",e,!1),En.document.addEventListener("keypress",e,!1),["EventTarget","Node"].forEach(function(n){var r=En[n]&&En[n].prototype;!r||!r.hasOwnProperty||!r.hasOwnProperty("addEventListener")||($r(r,"addEventListener",function(i){return function(o,a,c){if(o==="click"||o=="keypress")try{var f=this,v=f.__sentry_instrumentation_handlers__=f.__sentry_instrumentation_handlers__||{},y=v[o]=v[o]||{refCount:0};if(!y.handler){var b=_k(t);y.handler=b,i.call(this,o,b,c)}y.refCount+=1}catch{}return i.call(this,o,a,c)}}),$r(r,"removeEventListener",function(i){return function(o,a,c){if(o==="click"||o=="keypress")try{var f=this,v=f.__sentry_instrumentation_handlers__||{},y=v[o];y&&(y.refCount-=1,y.refCount<=0&&(i.call(this,o,y.handler,c),y.handler=void 0,delete v[o]),Object.keys(v).length===0&&delete f.__sentry_instrumentation_handlers__)}catch{}return i.call(this,o,a,c)}}))})}}var oE=null;function nz(){oE=En.onerror,En.onerror=function(t,e,n,r,i){return rs("error",{column:r,error:i,line:n,msg:t,url:e}),oE?oE.apply(this,arguments):!1}}var sE=null;function rz(){sE=En.onunhandledrejection,En.onunhandledrejection=function(t){return rs("unhandledrejection",t),sE?sE.apply(this,arguments):!0}}function lh(){var t=kn(),e=t.crypto||t.msCrypto;if(e!==void 0&&e.getRandomValues){var n=new Uint16Array(8);e.getRandomValues(n),n[3]=n[3]&4095|16384,n[4]=n[4]&16383|32768;var r=function(i){for(var o=i.toString(16);o.length<4;)o="0"+o;return o};return r(n[0])+r(n[1])+r(n[2])+r(n[3])+r(n[4])+r(n[5])+r(n[6])+r(n[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(i){var o=Math.random()*16|0,a=i==="x"?o:o&3|8;return a.toString(16)})}function aE(t){if(!t)return{};var e=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};var n=e[6]||"",r=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],relative:e[5]+n+r}}function cl(t){if(t.message)return t.message;if(t.exception&&t.exception.values&&t.exception.values[0]){var e=t.exception.values[0];return e.type&&e.value?e.type+": "+e.value:e.type||e.value||t.event_id||"<unknown>"}return t.event_id||"<unknown>"}function Ub(t,e,n){t.exception=t.exception||{},t.exception.values=t.exception.values||[],t.exception.values[0]=t.exception.values[0]||{},t.exception.values[0].value=t.exception.values[0].value||e||"",t.exception.values[0].type=t.exception.values[0].type||n||"Error"}function xh(t,e){var n;if(!(!t.exception||!t.exception.values)){var r=t.exception.values[0],i={type:"generic",handled:!0},o=r.mechanism;if(r.mechanism=wo(wo(wo({},i),o),e),e&&"data"in e){var a=wo(wo({},(n=o)===null||n===void 0?void 0:n.data),e.data);r.mechanism.data=a}}}var wk=60*1e3;function iz(t,e){if(!e)return wk;var n=parseInt(""+e,10);if(!isNaN(n))return n*1e3;var r=Date.parse(""+e);return isNaN(r)?wk:r-t}function Ek(t){var e;if(!((e=t)===null||e===void 0)&&e.__sentry_captured__)return!0;try{Object.defineProperty(t,"__sentry_captured__",{value:!0})}catch{}return!1}var Ai=function(){function t(e){var n=this;this._state="PENDING",this._handlers=[],this._resolve=function(r){n._setResult("RESOLVED",r)},this._reject=function(r){n._setResult("REJECTED",r)},this._setResult=function(r,i){if(n._state==="PENDING"){if(iT(i)){i.then(n._resolve,n._reject);return}n._state=r,n._value=i,n._executeHandlers()}},this._attachHandler=function(r){n._handlers=n._handlers.concat(r),n._executeHandlers()},this._executeHandlers=function(){if(n._state!=="PENDING"){var r=n._handlers.slice();n._handlers=[],r.forEach(function(i){i.done||(n._state==="RESOLVED"&&i.onfulfilled&&i.onfulfilled(n._value),n._state==="REJECTED"&&i.onrejected&&i.onrejected(n._value),i.done=!0)})}};try{e(this._resolve,this._reject)}catch(r){this._reject(r)}}return t.resolve=function(e){return new t(function(n){n(e)})},t.reject=function(e){return new t(function(n,r){r(e)})},t.all=function(e){return new t(function(n,r){if(!Array.isArray(e)){r(new TypeError("Promise.all requires an array as input."));return}if(e.length===0){n([]);return}var i=e.length,o=[];e.forEach(function(a,c){t.resolve(a).then(function(f){o[c]=f,i-=1,i===0&&n(o)}).then(null,r)})})},t.prototype.then=function(e,n){var r=this;return new t(function(i,o){r._attachHandler({done:!1,onfulfilled:function(a){if(!e){i(a);return}try{i(e(a));return}catch(c){o(c);return}},onrejected:function(a){if(!n){o(a);return}try{i(n(a));return}catch(c){o(c);return}}})})},t.prototype.catch=function(e){return this.then(function(n){return n},e)},t.prototype.finally=function(e){var n=this;return new t(function(r,i){var o,a;return n.then(function(c){a=!1,o=c,e&&e()},function(c){a=!0,o=c,e&&e()}).then(function(){if(a){i(o);return}r(o)})})},t.prototype.toString=function(){return"[object SyncPromise]"},t}(),oz=function(){function t(e){this._limit=e,this._buffer=[]}return t.prototype.isReady=function(){return this._limit===void 0||this.length()<this._limit},t.prototype.add=function(e){var n=this;if(!this.isReady())return Ai.reject(new ir("Not adding Promise due to buffer limit reached."));var r=e();return this._buffer.indexOf(r)===-1&&this._buffer.push(r),r.then(function(){return n.remove(r)}).then(null,function(){return n.remove(r).then(null,function(){})}),r},t.prototype.remove=function(e){var n=this._buffer.splice(this._buffer.indexOf(e),1)[0];return n},t.prototype.length=function(){return this._buffer.length},t.prototype.drain=function(e){var n=this;return new Ai(function(r){var i=setTimeout(function(){e&&e>0&&r(!1)},e);Ai.all(n._buffer).then(function(){clearTimeout(i),r(!0)}).then(null,function(){r(!0)})})},t}(),Vb={nowSeconds:function(){return Date.now()/1e3}};function sz(){var t=kn().performance;if(!(!t||!t.now)){var e=Date.now()-t.now();return{now:function(){return t.now()},timeOrigin:e}}}function az(){try{var t=bB(module,"perf_hooks");return t.performance}catch{return}}var uE=nT()?az():sz(),bk=uE===void 0?Vb:{nowSeconds:function(){return(uE.timeOrigin+uE.now())/1e3}},xy=Vb.nowSeconds.bind(Vb),Sk=bk.nowSeconds.bind(bk);(function(){var t=kn().performance;if(!(!t||!t.now)){var e=3600*1e3,n=t.now(),r=Date.now(),i=t.timeOrigin?Math.abs(t.timeOrigin+n-r):e,o=i<e,a=t.timing&&t.timing.navigationStart,c=typeof a=="number",f=c?Math.abs(a+n-r):e,v=f<e;return o||v?i<=f?t.timeOrigin:a:r}})();var Tk=100,lm=function(){function t(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._user={},this._tags={},this._extra={},this._contexts={}}return t.clone=function(e){var n=new t;return e&&(n._breadcrumbs=Uc(e._breadcrumbs),n._tags=ht({},e._tags),n._extra=ht({},e._extra),n._contexts=ht({},e._contexts),n._user=e._user,n._level=e._level,n._span=e._span,n._session=e._session,n._transactionName=e._transactionName,n._fingerprint=e._fingerprint,n._eventProcessors=Uc(e._eventProcessors),n._requestSession=e._requestSession),n},t.prototype.addScopeListener=function(e){this._scopeListeners.push(e)},t.prototype.addEventProcessor=function(e){return this._eventProcessors.push(e),this},t.prototype.setUser=function(e){return this._user=e||{},this._session&&this._session.update({user:e}),this._notifyScopeListeners(),this},t.prototype.getUser=function(){return this._user},t.prototype.getRequestSession=function(){return this._requestSession},t.prototype.setRequestSession=function(e){return this._requestSession=e,this},t.prototype.setTags=function(e){return this._tags=ht(ht({},this._tags),e),this._notifyScopeListeners(),this},t.prototype.setTag=function(e,n){var r;return this._tags=ht(ht({},this._tags),(r={},r[e]=n,r)),this._notifyScopeListeners(),this},t.prototype.setExtras=function(e){return this._extra=ht(ht({},this._extra),e),this._notifyScopeListeners(),this},t.prototype.setExtra=function(e,n){var r;return this._extra=ht(ht({},this._extra),(r={},r[e]=n,r)),this._notifyScopeListeners(),this},t.prototype.setFingerprint=function(e){return this._fingerprint=e,this._notifyScopeListeners(),this},t.prototype.setLevel=function(e){return this._level=e,this._notifyScopeListeners(),this},t.prototype.setTransactionName=function(e){return this._transactionName=e,this._notifyScopeListeners(),this},t.prototype.setTransaction=function(e){return this.setTransactionName(e)},t.prototype.setContext=function(e,n){var r;return n===null?delete this._contexts[e]:this._contexts=ht(ht({},this._contexts),(r={},r[e]=n,r)),this._notifyScopeListeners(),this},t.prototype.setSpan=function(e){return this._span=e,this._notifyScopeListeners(),this},t.prototype.getSpan=function(){return this._span},t.prototype.getTransaction=function(){var e,n,r,i,o=this.getSpan();if(!((e=o)===null||e===void 0)&&e.transaction)return(n=o)===null||n===void 0?void 0:n.transaction;if(!((i=(r=o)===null||r===void 0?void 0:r.spanRecorder)===null||i===void 0)&&i.spans[0])return o.spanRecorder.spans[0]},t.prototype.setSession=function(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this},t.prototype.getSession=function(){return this._session},t.prototype.update=function(e){if(!e)return this;if(typeof e=="function"){var n=e(this);return n instanceof t?n:this}return e instanceof t?(this._tags=ht(ht({},this._tags),e._tags),this._extra=ht(ht({},this._extra),e._extra),this._contexts=ht(ht({},this._contexts),e._contexts),e._user&&Object.keys(e._user).length&&(this._user=e._user),e._level&&(this._level=e._level),e._fingerprint&&(this._fingerprint=e._fingerprint),e._requestSession&&(this._requestSession=e._requestSession)):Ih(e)&&(e=e,this._tags=ht(ht({},this._tags),e.tags),this._extra=ht(ht({},this._extra),e.extra),this._contexts=ht(ht({},this._contexts),e.contexts),e.user&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint&&(this._fingerprint=e.fingerprint),e.requestSession&&(this._requestSession=e.requestSession)),this},t.prototype.clear=function(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this},t.prototype.addBreadcrumb=function(e,n){var r=typeof n=="number"?Math.min(n,Tk):Tk;if(r<=0)return this;var i=ht({timestamp:xy()},e);return this._breadcrumbs=Uc(this._breadcrumbs,[i]).slice(-r),this._notifyScopeListeners(),this},t.prototype.clearBreadcrumbs=function(){return this._breadcrumbs=[],this._notifyScopeListeners(),this},t.prototype.applyToEvent=function(e,n){var r;if(this._extra&&Object.keys(this._extra).length&&(e.extra=ht(ht({},this._extra),e.extra)),this._tags&&Object.keys(this._tags).length&&(e.tags=ht(ht({},this._tags),e.tags)),this._user&&Object.keys(this._user).length&&(e.user=ht(ht({},this._user),e.user)),this._contexts&&Object.keys(this._contexts).length&&(e.contexts=ht(ht({},this._contexts),e.contexts)),this._level&&(e.level=this._level),this._transactionName&&(e.transaction=this._transactionName),this._span){e.contexts=ht({trace:this._span.getTraceContext()},e.contexts);var i=(r=this._span.transaction)===null||r===void 0?void 0:r.name;i&&(e.tags=ht({transaction:i},e.tags))}return this._applyFingerprint(e),e.breadcrumbs=Uc(e.breadcrumbs||[],this._breadcrumbs),e.breadcrumbs=e.breadcrumbs.length>0?e.breadcrumbs:void 0,this._notifyEventProcessors(Uc(HP(),this._eventProcessors),e,n)},t.prototype._notifyEventProcessors=function(e,n,r,i){var o=this;return i===void 0&&(i=0),new Ai(function(a,c){var f=e[i];if(n===null||typeof f!="function")a(n);else{var v=f(ht({},n),r);iT(v)?v.then(function(y){return o._notifyEventProcessors(e,y,r,i+1).then(a)}).then(null,c):o._notifyEventProcessors(e,v,r,i+1).then(a).then(null,c)}})},t.prototype._notifyScopeListeners=function(){var e=this;this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(function(n){n(e)}),this._notifyingListeners=!1)},t.prototype._applyFingerprint=function(e){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],this._fingerprint&&(e.fingerprint=e.fingerprint.concat(this._fingerprint)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint},t}();function HP(){var t=kn();return t.__SENTRY__=t.__SENTRY__||{},t.__SENTRY__.globalEventProcessors=t.__SENTRY__.globalEventProcessors||[],t.__SENTRY__.globalEventProcessors}function Cy(t){HP().push(t)}var uz=function(){function t(e){this.errors=0,this.sid=lh(),this.duration=0,this.status=_a.Ok,this.init=!0,this.ignoreDuration=!1;var n=Sk();this.timestamp=n,this.started=n,e&&this.update(e)}return t.prototype.update=function(e){if(e===void 0&&(e={}),e.user&&(!this.ipAddress&&e.user.ip_address&&(this.ipAddress=e.user.ip_address),!this.did&&!e.did&&(this.did=e.user.id||e.user.email||e.user.username)),this.timestamp=e.timestamp||Sk(),e.ignoreDuration&&(this.ignoreDuration=e.ignoreDuration),e.sid&&(this.sid=e.sid.length===32?e.sid:lh()),e.init!==void 0&&(this.init=e.init),!this.did&&e.did&&(this.did=""+e.did),typeof e.started=="number"&&(this.started=e.started),this.ignoreDuration)this.duration=void 0;else if(typeof e.duration=="number")this.duration=e.duration;else{var n=this.timestamp-this.started;this.duration=n>=0?n:0}e.release&&(this.release=e.release),e.environment&&(this.environment=e.environment),!this.ipAddress&&e.ipAddress&&(this.ipAddress=e.ipAddress),!this.userAgent&&e.userAgent&&(this.userAgent=e.userAgent),typeof e.errors=="number"&&(this.errors=e.errors),e.status&&(this.status=e.status)},t.prototype.close=function(e){e?this.update({status:e}):this.status===_a.Ok?this.update({status:_a.Exited}):this.update()},t.prototype.toJSON=function(){return um({sid:""+this.sid,init:this.init,started:new Date(this.started*1e3).toISOString(),timestamp:new Date(this.timestamp*1e3).toISOString(),status:this.status,errors:this.errors,did:typeof this.did=="number"||typeof this.did=="string"?""+this.did:void 0,duration:this.duration,attrs:um({release:this.release,environment:this.environment,ip_address:this.ipAddress,user_agent:this.userAgent})})},t}(),oT=4,lz=100,sT=function(){function t(e,n,r){n===void 0&&(n=new lm),r===void 0&&(r=oT),this._version=r,this._stack=[{}],this.getStackTop().scope=n,e&&this.bindClient(e)}return t.prototype.isOlderThan=function(e){return this._version<e},t.prototype.bindClient=function(e){var n=this.getStackTop();n.client=e,e&&e.setupIntegrations&&e.setupIntegrations()},t.prototype.pushScope=function(){var e=lm.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:e}),e},t.prototype.popScope=function(){return this.getStack().length<=1?!1:!!this.getStack().pop()},t.prototype.withScope=function(e){var n=this.pushScope();try{e(n)}finally{this.popScope()}},t.prototype.getClient=function(){return this.getStackTop().client},t.prototype.getScope=function(){return this.getStackTop().scope},t.prototype.getStack=function(){return this._stack},t.prototype.getStackTop=function(){return this._stack[this._stack.length-1]},t.prototype.captureException=function(e,n){var r=this._lastEventId=lh(),i=n;if(!n){var o=void 0;try{throw new Error("Sentry syntheticException")}catch(a){o=a}i={originalException:e,syntheticException:o}}return this._invokeClient("captureException",e,ht(ht({},i),{event_id:r})),r},t.prototype.captureMessage=function(e,n,r){var i=this._lastEventId=lh(),o=r;if(!r){var a=void 0;try{throw new Error(e)}catch(c){a=c}o={originalException:e,syntheticException:a}}return this._invokeClient("captureMessage",e,n,ht(ht({},o),{event_id:i})),i},t.prototype.captureEvent=function(e,n){var r=lh();return e.type!=="transaction"&&(this._lastEventId=r),this._invokeClient("captureEvent",e,ht(ht({},n),{event_id:r})),r},t.prototype.lastEventId=function(){return this._lastEventId},t.prototype.addBreadcrumb=function(e,n){var r=this.getStackTop(),i=r.scope,o=r.client;if(!(!i||!o)){var a=o.getOptions&&o.getOptions()||{},c=a.beforeBreadcrumb,f=c===void 0?null:c,v=a.maxBreadcrumbs,y=v===void 0?lz:v;if(!(y<=0)){var b=xy(),E=ht({timestamp:b},e),I=f?jg(function(){return f(E,n)}):E;I!==null&&i.addBreadcrumb(I,y)}}},t.prototype.setUser=function(e){var n=this.getScope();n&&n.setUser(e)},t.prototype.setTags=function(e){var n=this.getScope();n&&n.setTags(e)},t.prototype.setExtras=function(e){var n=this.getScope();n&&n.setExtras(e)},t.prototype.setTag=function(e,n){var r=this.getScope();r&&r.setTag(e,n)},t.prototype.setExtra=function(e,n){var r=this.getScope();r&&r.setExtra(e,n)},t.prototype.setContext=function(e,n){var r=this.getScope();r&&r.setContext(e,n)},t.prototype.configureScope=function(e){var n=this.getStackTop(),r=n.scope,i=n.client;r&&i&&e(r)},t.prototype.run=function(e){var n=Ik(this);try{e(this)}finally{Ik(n)}},t.prototype.getIntegration=function(e){var n=this.getClient();if(!n)return null;try{return n.getIntegration(e)}catch{return Ut.warn("Cannot retrieve integration "+e.id+" from the current Hub"),null}},t.prototype.startSpan=function(e){return this._callExtensionMethod("startSpan",e)},t.prototype.startTransaction=function(e,n){return this._callExtensionMethod("startTransaction",e,n)},t.prototype.traceHeaders=function(){return this._callExtensionMethod("traceHeaders")},t.prototype.captureSession=function(e){if(e===void 0&&(e=!1),e)return this.endSession();this._sendSessionUpdate()},t.prototype.endSession=function(){var e,n,r,i,o;(r=(n=(e=this.getStackTop())===null||e===void 0?void 0:e.scope)===null||n===void 0?void 0:n.getSession())===null||r===void 0||r.close(),this._sendSessionUpdate(),(o=(i=this.getStackTop())===null||i===void 0?void 0:i.scope)===null||o===void 0||o.setSession()},t.prototype.startSession=function(e){var n=this.getStackTop(),r=n.scope,i=n.client,o=i&&i.getOptions()||{},a=o.release,c=o.environment,f=kn(),v=(f.navigator||{}).userAgent,y=new uz(ht(ht(ht({release:a,environment:c},r&&{user:r.getUser()}),v&&{userAgent:v}),e));if(r){var b=r.getSession&&r.getSession();b&&b.status===_a.Ok&&b.update({status:_a.Exited}),this.endSession(),r.setSession(y)}return y},t.prototype._sendSessionUpdate=function(){var e=this.getStackTop(),n=e.scope,r=e.client;if(n){var i=n.getSession&&n.getSession();i&&r&&r.captureSession&&r.captureSession(i)}},t.prototype._invokeClient=function(e){for(var n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var o=this.getStackTop(),a=o.scope,c=o.client;c&&c[e]&&(n=c)[e].apply(n,Uc(r,[a]))},t.prototype._callExtensionMethod=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=Ny(),o=i.__SENTRY__;if(o&&o.extensions&&typeof o.extensions[e]=="function")return o.extensions[e].apply(this,n);Ut.warn("Extension method "+e+" couldn't be found, doing nothing.")},t}();function Ny(){var t=kn();return t.__SENTRY__=t.__SENTRY__||{extensions:{},hub:void 0},t}function Ik(t){var e=Ny(),n=nu(e);return aT(e,t),n}function Hr(){var t=Ny();return(!KP(t)||nu(t).isOlderThan(oT))&&aT(t,new sT),nT()?cz(t):nu(t)}function cz(t){var e,n,r;try{var i=(r=(n=(e=Ny().__SENTRY__)===null||e===void 0?void 0:e.extensions)===null||n===void 0?void 0:n.domain)===null||r===void 0?void 0:r.active;if(!i)return nu(t);if(!KP(i)||nu(i).isOlderThan(oT)){var o=nu(t).getStackTop();aT(i,new sT(o.client,lm.clone(o.scope)))}return nu(i)}catch{return nu(t)}}function KP(t){return!!(t&&t.__SENTRY__&&t.__SENTRY__.hub)}function nu(t){return t&&t.__SENTRY__&&t.__SENTRY__.hub||(t.__SENTRY__=t.__SENTRY__||{},t.__SENTRY__.hub=new sT),t.__SENTRY__.hub}function aT(t,e){return t?(t.__SENTRY__=t.__SENTRY__||{},t.__SENTRY__.hub=e,!0):!1}function YP(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=Hr();if(r&&r[t])return r[t].apply(r,_B(e));throw new Error("No hub defined or "+t+" was not found on the hub, please open a bug report.")}function hz(t,e){var n;try{throw new Error("Sentry syntheticException")}catch(r){n=r}return YP("captureException",t,{captureContext:e,originalException:t,syntheticException:n})}function fz(t){YP("withScope",t)}var xk="7",XP=function(){function t(e,n,r){n===void 0&&(n={}),this.dsn=e,this._dsnObject=new zP(e),this.metadata=n,this._tunnel=r}return t.prototype.getDsn=function(){return this._dsnObject},t.prototype.forceEnvelope=function(){return!!this._tunnel},t.prototype.getBaseApiEndpoint=function(){var e=this.getDsn(),n=e.protocol?e.protocol+":":"",r=e.port?":"+e.port:"";return n+"//"+e.host+r+(e.path?"/"+e.path:"")+"/api/"},t.prototype.getStoreEndpoint=function(){return this._getIngestEndpoint("store")},t.prototype.getStoreEndpointWithUrlEncodedAuth=function(){return this.getStoreEndpoint()+"?"+this._encodedAuth()},t.prototype.getEnvelopeEndpointWithUrlEncodedAuth=function(){return this.forceEnvelope()?this._tunnel:this._getEnvelopeEndpoint()+"?"+this._encodedAuth()},t.prototype.getStoreEndpointPath=function(){var e=this.getDsn();return(e.path?"/"+e.path:"")+"/api/"+e.projectId+"/store/"},t.prototype.getRequestHeaders=function(e,n){var r=this.getDsn(),i=["Sentry sentry_version="+xk];return i.push("sentry_client="+e+"/"+n),i.push("sentry_key="+r.publicKey),r.pass&&i.push("sentry_secret="+r.pass),{"Content-Type":"application/json","X-Sentry-Auth":i.join(", ")}},t.prototype.getReportDialogEndpoint=function(e){e===void 0&&(e={});var n=this.getDsn(),r=this.getBaseApiEndpoint()+"embed/error-page/",i=[];i.push("dsn="+n.toString());for(var o in e)if(o!=="dsn")if(o==="user"){if(!e.user)continue;e.user.name&&i.push("name="+encodeURIComponent(e.user.name)),e.user.email&&i.push("email="+encodeURIComponent(e.user.email))}else i.push(encodeURIComponent(o)+"="+encodeURIComponent(e[o]));return i.length?r+"?"+i.join("&"):r},t.prototype._getEnvelopeEndpoint=function(){return this._getIngestEndpoint("envelope")},t.prototype._getIngestEndpoint=function(e){if(this._tunnel)return this._tunnel;var n=this.getBaseApiEndpoint(),r=this.getDsn();return""+n+r.projectId+"/"+e+"/"},t.prototype._encodedAuth=function(){var e=this.getDsn(),n={sentry_key:e.publicKey,sentry_version:xk};return FB(n)},t}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Dr=function(){return Dr=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Dr.apply(this,arguments)};function dz(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function pz(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function vz(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o}function xs(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(vz(arguments[e]));return t}var Ck=[];function Nk(t){return t.reduce(function(e,n){return e.every(function(r){return n.name!==r.name})&&e.push(n),e},[])}function gz(t){var e=t.defaultIntegrations&&xs(t.defaultIntegrations)||[],n=t.integrations,r=xs(Nk(e));Array.isArray(n)?r=xs(r.filter(function(a){return n.every(function(c){return c.name!==a.name})}),Nk(n)):typeof n=="function"&&(r=n(r),r=Array.isArray(r)?r:[r]);var i=r.map(function(a){return a.name}),o="Debug";return i.indexOf(o)!==-1&&r.push.apply(r,xs(r.splice(i.indexOf(o),1))),r}function mz(t){Ck.indexOf(t.name)===-1&&(t.setupOnce(Cy,Hr),Ck.push(t.name),Ut.log("Integration installed: "+t.name))}function yz(t){var e={};return gz(t).forEach(function(n){e[n.name]=n,mz(n)}),Object.defineProperty(e,"initialized",{value:!0}),e}var Ak="Not capturing exception because it's already been captured.",_z=function(){function t(e,n){this._integrations={},this._numProcessing=0,this._backend=new e(n),this._options=n,n.dsn&&(this._dsn=new zP(n.dsn))}return t.prototype.captureException=function(e,n,r){var i=this;if(Ek(e)){Ut.log(Ak);return}var o=n&&n.event_id;return this._process(this._getBackend().eventFromException(e,n).then(function(a){return i._captureEvent(a,n,r)}).then(function(a){o=a})),o},t.prototype.captureMessage=function(e,n,r,i){var o=this,a=r&&r.event_id,c=Ty(e)?this._getBackend().eventFromMessage(String(e),n,r):this._getBackend().eventFromException(e,r);return this._process(c.then(function(f){return o._captureEvent(f,r,i)}).then(function(f){a=f})),a},t.prototype.captureEvent=function(e,n,r){var i;if(!((i=n)===null||i===void 0)&&i.originalException&&Ek(n.originalException)){Ut.log(Ak);return}var o=n&&n.event_id;return this._process(this._captureEvent(e,n,r).then(function(a){o=a})),o},t.prototype.captureSession=function(e){if(!this._isEnabled()){Ut.warn("SDK not enabled, will not capture session.");return}typeof e.release!="string"?Ut.warn("Discarded session because of missing or non-string release"):(this._sendSession(e),e.update({init:!1}))},t.prototype.getDsn=function(){return this._dsn},t.prototype.getOptions=function(){return this._options},t.prototype.getTransport=function(){return this._getBackend().getTransport()},t.prototype.flush=function(e){var n=this;return this._isClientDoneProcessing(e).then(function(r){return n.getTransport().close(e).then(function(i){return r&&i})})},t.prototype.close=function(e){var n=this;return this.flush(e).then(function(r){return n.getOptions().enabled=!1,r})},t.prototype.setupIntegrations=function(){this._isEnabled()&&!this._integrations.initialized&&(this._integrations=yz(this._options))},t.prototype.getIntegration=function(e){try{return this._integrations[e.id]||null}catch{return Ut.warn("Cannot retrieve integration "+e.id+" from the current Client"),null}},t.prototype._updateSessionFromEvent=function(e,n){var r,i,o=!1,a=!1,c=n.exception&&n.exception.values;if(c){a=!0;try{for(var f=pz(c),v=f.next();!v.done;v=f.next()){var y=v.value,b=y.mechanism;if(b&&b.handled===!1){o=!0;break}}}catch(L){r={error:L}}finally{try{v&&!v.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}}var E=e.status===_a.Ok,I=E&&e.errors===0||E&&o;I&&(e.update(Dr(Dr({},o&&{status:_a.Crashed}),{errors:e.errors||Number(a||o)})),this.captureSession(e))},t.prototype._sendSession=function(e){this._getBackend().sendSession(e)},t.prototype._isClientDoneProcessing=function(e){var n=this;return new Ai(function(r){var i=0,o=1,a=setInterval(function(){n._numProcessing==0?(clearInterval(a),r(!0)):(i+=o,e&&i>=e&&(clearInterval(a),r(!1)))},o)})},t.prototype._getBackend=function(){return this._backend},t.prototype._isEnabled=function(){return this.getOptions().enabled!==!1&&this._dsn!==void 0},t.prototype._prepareEvent=function(e,n,r){var i=this,o=this.getOptions().normalizeDepth,a=o===void 0?3:o,c=Dr(Dr({},e),{event_id:e.event_id||(r&&r.event_id?r.event_id:lh()),timestamp:e.timestamp||xy()});this._applyClientOptions(c),this._applyIntegrationsMetadata(c);var f=n;r&&r.captureContext&&(f=lm.clone(f).update(r.captureContext));var v=Ai.resolve(c);return f&&(v=f.applyToEvent(c,r)),v.then(function(y){return typeof a=="number"&&a>0?i._normalizeEvent(y,a):y})},t.prototype._normalizeEvent=function(e,n){if(!e)return null;var r=Dr(Dr(Dr(Dr(Dr({},e),e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(function(a){return Dr(Dr({},a),a.data&&{data:Vc(a.data,n)})})}),e.user&&{user:Vc(e.user,n)}),e.contexts&&{contexts:Vc(e.contexts,n)}),e.extra&&{extra:Vc(e.extra,n)});e.contexts&&e.contexts.trace&&(r.contexts.trace=e.contexts.trace);var i=this.getOptions()._experiments,o=i===void 0?{}:i;return o.ensureNoCircularStructures?Vc(r):r},t.prototype._applyClientOptions=function(e){var n=this.getOptions(),r=n.environment,i=n.release,o=n.dist,a=n.maxValueLength,c=a===void 0?250:a;"environment"in e||(e.environment="environment"in n?r:"production"),e.release===void 0&&i!==void 0&&(e.release=i),e.dist===void 0&&o!==void 0&&(e.dist=o),e.message&&(e.message=hd(e.message,c));var f=e.exception&&e.exception.values&&e.exception.values[0];f&&f.value&&(f.value=hd(f.value,c));var v=e.request;v&&v.url&&(v.url=hd(v.url,c))},t.prototype._applyIntegrationsMetadata=function(e){var n=Object.keys(this._integrations);n.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=xs(e.sdk.integrations||[],n))},t.prototype._sendEvent=function(e){this._getBackend().sendEvent(e)},t.prototype._captureEvent=function(e,n,r){return this._processEvent(e,n,r).then(function(i){return i.event_id},function(i){Ut.error(i)})},t.prototype._processEvent=function(e,n,r){var i=this,o,a,c=this.getOptions(),f=c.beforeSend,v=c.sampleRate,y=this.getTransport();if(!this._isEnabled())return Ai.reject(new ir("SDK not enabled, will not capture event."));var b=e.type==="transaction";return!b&&typeof v=="number"&&Math.random()>v?((a=(o=y).recordLostEvent)===null||a===void 0||a.call(o,ns.SampleRate,"event"),Ai.reject(new ir("Discarding event because it's not included in the random sample (sampling rate = "+v+")"))):this._prepareEvent(e,r,n).then(function(E){var I,L;if(E===null)throw(L=(I=y).recordLostEvent)===null||L===void 0||L.call(I,ns.EventProcessor,e.type||"event"),new ir("An event processor returned null, will not send event.");var D=n&&n.data&&n.data.__sentry__===!0;if(D||b||!f)return E;var te=f(E,n);return i._ensureBeforeSendRv(te)}).then(function(E){var I,L;if(E===null)throw(L=(I=y).recordLostEvent)===null||L===void 0||L.call(I,ns.BeforeSend,e.type||"event"),new ir("`beforeSend` returned `null`, will not send event.");var D=r&&r.getSession&&r.getSession();return!b&&D&&i._updateSessionFromEvent(D,E),i._sendEvent(E),E}).then(null,function(E){throw E instanceof ir?E:(i.captureException(E,{data:{__sentry__:!0},originalException:E}),new ir(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: `+E))})},t.prototype._process=function(e){var n=this;this._numProcessing+=1,e.then(function(r){return n._numProcessing-=1,r},function(r){return n._numProcessing-=1,r})},t.prototype._ensureBeforeSendRv=function(e){var n="`beforeSend` method has to return `null` or a valid event.";if(iT(e))return e.then(function(r){if(!(Ih(r)||r===null))throw new ir(n);return r},function(r){throw new ir("beforeSend rejected with "+r)});if(!(Ih(e)||e===null))throw new ir(n);return e},t}(),wz=function(){function t(){}return t.prototype.sendEvent=function(e){return Ai.resolve({reason:"NoopTransport: Event has been skipped because no Dsn is configured.",status:kl.Skipped})},t.prototype.close=function(e){return Ai.resolve(!0)},t}(),Ez=function(){function t(e){this._options=e,this._options.dsn||Ut.warn("No DSN provided, backend will not do anything."),this._transport=this._setupTransport()}return t.prototype.eventFromException=function(e,n){throw new ir("Backend has to implement `eventFromException` method")},t.prototype.eventFromMessage=function(e,n,r){throw new ir("Backend has to implement `eventFromMessage` method")},t.prototype.sendEvent=function(e){this._transport.sendEvent(e).then(null,function(n){Ut.error("Error while sending event: "+n)})},t.prototype.sendSession=function(e){if(!this._transport.sendSession){Ut.warn("Dropping session because custom transport doesn't implement sendSession");return}this._transport.sendSession(e).then(null,function(n){Ut.error("Error while sending session: "+n)})},t.prototype.getTransport=function(){return this._transport},t.prototype._setupTransport=function(){return new wz},t}();function QP(t){if(!(!t.metadata||!t.metadata.sdk)){var e=t.metadata.sdk,n=e.name,r=e.version;return{name:n,version:r}}}function bz(t,e){return e&&(t.sdk=t.sdk||{},t.sdk.name=t.sdk.name||e.name,t.sdk.version=t.sdk.version||e.version,t.sdk.integrations=xs(t.sdk.integrations||[],e.integrations||[]),t.sdk.packages=xs(t.sdk.packages||[],e.packages||[])),t}function JP(t,e){var n=QP(e),r=JSON.stringify(Dr(Dr({sent_at:new Date().toISOString()},n&&{sdk:n}),e.forceEnvelope()&&{dsn:e.getDsn().toString()})),i="aggregates"in t?"sessions":"session",o=JSON.stringify({type:i});return{body:r+`
`+o+`
`+JSON.stringify(t),type:i,url:e.getEnvelopeEndpointWithUrlEncodedAuth()}}function ZP(t,e){var n=QP(e),r=t.type||"event",i=r==="transaction"||e.forceEnvelope(),o=t.debug_meta||{},a=o.transactionSampling,c=dz(o,["transactionSampling"]),f=a||{},v=f.method,y=f.rate;Object.keys(c).length===0?delete t.debug_meta:t.debug_meta=c;var b={body:JSON.stringify(n?bz(t,e.metadata.sdk):t),type:r,url:i?e.getEnvelopeEndpointWithUrlEncodedAuth():e.getStoreEndpointWithUrlEncodedAuth()};if(i){var E=JSON.stringify(Dr(Dr({event_id:t.event_id,sent_at:new Date().toISOString()},n&&{sdk:n}),e.forceEnvelope()&&{dsn:e.getDsn().toString()})),I=JSON.stringify({type:r,sample_rates:[{id:v,rate:y}]}),L=E+`
`+I+`
`+b.body;b.body=L}return b}function Sz(t,e){var n;e.debug===!0&&Ut.enable();var r=Hr();(n=r.getScope())===null||n===void 0||n.update(e.initialScope);var i=new t(e);r.bindClient(i)}var kk="6.16.0",Rk,Tz=function(){function t(){this.name=t.id}return t.prototype.setupOnce=function(){Rk=Function.prototype.toString,Function.prototype.toString=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=this.__sentry_original__||this;return Rk.apply(r,e)}},t.id="FunctionToString",t}(),Iz=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],xz=function(){function t(e){e===void 0&&(e={}),this._options=e,this.name=t.id}return t.prototype.setupOnce=function(){Cy(function(e){var n=Hr();if(!n)return e;var r=n.getIntegration(t);if(r){var i=n.getClient(),o=i?i.getOptions():{},a=typeof r._mergeOptions=="function"?r._mergeOptions(o):{};return typeof r._shouldDropEvent!="function"?e:r._shouldDropEvent(e,a)?null:e}return e})},t.prototype._shouldDropEvent=function(e,n){return this._isSentryError(e,n)?(Ut.warn(`Event dropped due to being internal Sentry Error.
Event: `+cl(e)),!0):this._isIgnoredError(e,n)?(Ut.warn("Event dropped due to being matched by `ignoreErrors` option.\nEvent: "+cl(e)),!0):this._isDeniedUrl(e,n)?(Ut.warn("Event dropped due to being matched by `denyUrls` option.\nEvent: "+cl(e)+`.
Url: `+this._getEventFilterUrl(e)),!0):this._isAllowedUrl(e,n)?!1:(Ut.warn("Event dropped due to not being matched by `allowUrls` option.\nEvent: "+cl(e)+`.
Url: `+this._getEventFilterUrl(e)),!0)},t.prototype._isSentryError=function(e,n){if(!n.ignoreInternal)return!1;try{return e&&e.exception&&e.exception.values&&e.exception.values[0]&&e.exception.values[0].type==="SentryError"||!1}catch{return!1}},t.prototype._isIgnoredError=function(e,n){return!n.ignoreErrors||!n.ignoreErrors.length?!1:this._getPossibleEventMessages(e).some(function(r){return n.ignoreErrors.some(function(i){return iE(r,i)})})},t.prototype._isDeniedUrl=function(e,n){if(!n.denyUrls||!n.denyUrls.length)return!1;var r=this._getEventFilterUrl(e);return r?n.denyUrls.some(function(i){return iE(r,i)}):!1},t.prototype._isAllowedUrl=function(e,n){if(!n.allowUrls||!n.allowUrls.length)return!0;var r=this._getEventFilterUrl(e);return r?n.allowUrls.some(function(i){return iE(r,i)}):!0},t.prototype._mergeOptions=function(e){return e===void 0&&(e={}),{allowUrls:xs(this._options.whitelistUrls||[],this._options.allowUrls||[],e.whitelistUrls||[],e.allowUrls||[]),denyUrls:xs(this._options.blacklistUrls||[],this._options.denyUrls||[],e.blacklistUrls||[],e.denyUrls||[]),ignoreErrors:xs(this._options.ignoreErrors||[],e.ignoreErrors||[],Iz),ignoreInternal:typeof this._options.ignoreInternal<"u"?this._options.ignoreInternal:!0}},t.prototype._getPossibleEventMessages=function(e){if(e.message)return[e.message];if(e.exception)try{var n=e.exception.values&&e.exception.values[0]||{},r=n.type,i=r===void 0?"":r,o=n.value,a=o===void 0?"":o;return[""+a,i+": "+a]}catch{return Ut.error("Cannot extract message for event "+cl(e)),[]}return[]},t.prototype._getLastValidUrl=function(e){e===void 0&&(e=[]);for(var n,r,i=e.length-1;i>=0;i--){var o=e[i];if(((n=o)===null||n===void 0?void 0:n.filename)!=="<anonymous>"&&((r=o)===null||r===void 0?void 0:r.filename)!=="[native code]")return o.filename||null}return null},t.prototype._getEventFilterUrl=function(e){try{if(e.stacktrace){var n=e.stacktrace.frames;return this._getLastValidUrl(n)}if(e.exception){var r=e.exception.values&&e.exception.values[0].stacktrace&&e.exception.values[0].stacktrace.frames;return this._getLastValidUrl(r)}return null}catch{return Ut.error("Cannot extract url for event "+cl(e)),null}},t.id="InboundFilters",t}(),$c="?",Cz=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Nz=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|capacitor).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Az=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,kz=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Rz=/\((\S*)(?::(\d+))(?::(\d+))\)/,Oz=/Minified React error #\d+;/i;function ch(t){var e=null,n=0;t&&(typeof t.framesToPop=="number"?n=t.framesToPop:Oz.test(t.message)&&(n=1));try{if(e=Dz(t),e)return Pk(e,n)}catch{}try{if(e=Pz(t),e)return Pk(e,n)}catch{}return{message:uT(t),name:t&&t.name,stack:[],failed:!0}}function Pz(t){var e,n;if(!t||!t.stack)return null;for(var r=[],i=t.stack.split(`
`),o,a,c,f,v=0;v<i.length;++v){if(c=Cz.exec(i[v])){var y=c[2]&&c[2].indexOf("native")===0;o=c[2]&&c[2].indexOf("eval")===0,o&&(a=Rz.exec(c[2]))&&(c[2]=a[1],c[3]=a[2],c[4]=a[3]);var b=c[2]&&c[2].indexOf("address at ")===0?c[2].substr(11):c[2],E=c[1]||$c;e=sm(Ok(E,b),2),E=e[0],b=e[1],f={url:b,func:E,args:y?[c[2]]:[],line:c[3]?+c[3]:null,column:c[4]?+c[4]:null}}else if(c=Az.exec(i[v]))f={url:c[2],func:c[1]||$c,args:[],line:+c[3],column:c[4]?+c[4]:null};else if(c=Nz.exec(i[v])){o=c[3]&&c[3].indexOf(" > eval")>-1,o&&(a=kz.exec(c[3]))?(c[1]=c[1]||"eval",c[3]=a[1],c[4]=a[2],c[5]=""):v===0&&!c[5]&&t.columnNumber!==void 0&&(r[0].column=t.columnNumber+1);var b=c[3],E=c[1]||$c;n=sm(Ok(E,b),2),E=n[0],b=n[1],f={url:b,func:E,args:c[2]?c[2].split(","):[],line:c[4]?+c[4]:null,column:c[5]?+c[5]:null}}else continue;!f.func&&f.line&&(f.func=$c),r.push(f)}return r.length?{message:uT(t),name:t.name,stack:r}:null}function Dz(t){if(!t||!t.stacktrace)return null;for(var e=t.stacktrace,n=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,r=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\((.*)\))? in (.*):\s*$/i,i=e.split(`
`),o=[],a,c=0;c<i.length;c+=2){var f=null;(a=n.exec(i[c]))?f={url:a[2],func:a[3],args:[],line:+a[1],column:null}:(a=r.exec(i[c]))&&(f={url:a[6],func:a[3]||a[4],args:a[5]?a[5].split(","):[],line:+a[1],column:+a[2]}),f&&(!f.func&&f.line&&(f.func=$c),o.push(f))}return o.length?{message:uT(t),name:t.name,stack:o}:null}var Ok=function(t,e){var n=t.indexOf("safari-extension")!==-1,r=t.indexOf("safari-web-extension")!==-1;return n||r?[t.indexOf("@")!==-1?t.split("@")[0]:$c,n?"safari-extension:"+e:"safari-web-extension:"+e]:[t,e]};function Pk(t,e){try{return an(an({},t),{stack:t.stack.slice(e)})}catch{return t}}function uT(t){var e=t&&t.message;return e?e.error&&typeof e.error.message=="string"?e.error.message:e:"No error message"}var Lz=50;function eD(t){var e=lT(t.stack),n={type:t.name,value:t.message};return e&&e.length&&(n.stacktrace={frames:e}),n.type===void 0&&n.value===""&&(n.value="Unrecoverable error caught"),n}function Mz(t,e,n){var r={exception:{values:[{type:rT(t)?t.constructor.name:n?"UnhandledRejection":"Error",value:"Non-Error "+(n?"promise rejection":"exception")+" captured with keys: "+BB(t)}]},extra:{__serialized__:WP(t)}};if(e){var i=ch(e),o=lT(i.stack);r.stacktrace={frames:o}}return r}function lE(t){var e=eD(t);return{exception:{values:[e]}}}function lT(t){if(!t||!t.length)return[];var e=t,n=e[0].func||"",r=e[e.length-1].func||"";return(n.indexOf("captureMessage")!==-1||n.indexOf("captureException")!==-1)&&(e=e.slice(1)),r.indexOf("sentryWrapped")!==-1&&(e=e.slice(0,-1)),e.slice(0,Lz).map(function(i){return{colno:i.column===null?void 0:i.column,filename:i.url||e[0].url,function:i.func||"?",in_app:!0,lineno:i.line===null?void 0:i.line}}).reverse()}function Fz(t,e,n){var r=n&&n.syntheticException||void 0,i=Bb(e,r,{attachStacktrace:t.attachStacktrace});return xh(i),i.level=Ds.Error,n&&n.event_id&&(i.event_id=n.event_id),Ai.resolve(i)}function jz(t,e,n,r){n===void 0&&(n=Ds.Info);var i=r&&r.syntheticException||void 0,o=zb(e,i,{attachStacktrace:t.attachStacktrace});return o.level=n,r&&r.event_id&&(o.event_id=r.event_id),Ai.resolve(o)}function Bb(t,e,n){n===void 0&&(n={});var r;if(VP(t)&&t.error){var i=t;return t=i.error,r=lE(ch(t)),r}if(vk(t)||TB(t)){var o=t;if("stack"in t)r=lE(ch(t));else{var a=o.name||(vk(o)?"DOMError":"DOMException"),c=o.message?a+": "+o.message:a;r=zb(c,e,n),Ub(r,c)}return"code"in o&&(r.tags=an(an({},r.tags),{"DOMException.code":""+o.code})),r}if(UP(t))return r=lE(ch(t)),r;if(Ih(t)||rT(t)){var f=t;return r=Mz(f,e,n.rejection),xh(r,{synthetic:!0}),r}return r=zb(t,e,n),Ub(r,""+t,void 0),xh(r,{synthetic:!0}),r}function zb(t,e,n){n===void 0&&(n={});var r={message:t};if(n.attachStacktrace&&e){var i=ch(e),o=lT(i.stack);r.stacktrace={frames:o}}return r}var $o=kn(),Xv;function tD(){var t,e;if(Xv)return Xv;if(jb($o.fetch))return Xv=$o.fetch.bind($o);var n=$o.document,r=$o.fetch;if(typeof((t=n)===null||t===void 0?void 0:t.createElement)=="function")try{var i=n.createElement("iframe");i.hidden=!0,n.head.appendChild(i),!((e=i.contentWindow)===null||e===void 0)&&e.fetch&&(r=i.contentWindow.fetch),n.head.removeChild(i)}catch(o){Ut.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",o)}return Xv=r.bind($o)}function Uz(t,e){var n=Object.prototype.toString.call($o&&$o.navigator)==="[object Navigator]",r=n&&typeof $o.navigator.sendBeacon=="function";if(r){var i=$o.navigator.sendBeacon.bind($o.navigator);return i(t,e)}if(Iy()){var o=tD();return EB(o(t,{body:e,method:"POST",credentials:"omit",keepalive:!0}))}}var Dk={event:"error",transaction:"transaction",session:"session",attachment:"attachment"},cE=kn(),nD=function(){function t(e){var n=this;this.options=e,this._buffer=new oz(30),this._rateLimits={},this._outcomes={},this._api=new XP(e.dsn,e._metadata,e.tunnel),this.url=this._api.getStoreEndpointWithUrlEncodedAuth(),this.options.sendClientReports&&cE.document&&cE.document.addEventListener("visibilitychange",function(){cE.document.visibilityState==="hidden"&&n._flushOutcomes()})}return t.prototype.sendEvent=function(e){throw new ir("Transport Class has to implement `sendEvent` method")},t.prototype.close=function(e){return this._buffer.drain(e)},t.prototype.recordLostEvent=function(e,n){var r;if(this.options.sendClientReports){var i=Dk[n]+":"+e;Ut.log("Adding outcome: "+i),this._outcomes[i]=(r=this._outcomes[i],(r??0)+1)}},t.prototype._flushOutcomes=function(){if(this.options.sendClientReports){var e=this._outcomes;if(this._outcomes={},!Object.keys(e).length){Ut.log("No outcomes to flush");return}Ut.log(`Flushing outcomes:
`+JSON.stringify(e,null,2));var n=this._api.getEnvelopeEndpointWithUrlEncodedAuth(),r=JSON.stringify(an({},this.options.tunnel&&{dsn:this._api.getDsn().toString()})),i=JSON.stringify({type:"client_report"}),o=JSON.stringify({timestamp:xy(),discarded_events:Object.keys(e).map(function(c){var f=sm(c.split(":"),2),v=f[0],y=f[1];return{reason:y,category:v,quantity:e[c]}})}),a=r+`
`+i+`
`+o;try{Uz(n,a)}catch(c){Ut.error(c)}}},t.prototype._handleResponse=function(e){var n=e.requestType,r=e.response,i=e.headers,o=e.resolve,a=e.reject,c=kl.fromHttpCode(r.status),f=this._handleRateLimit(i);if(f&&Ut.warn("Too many "+n+" requests, backing off until: "+this._disabledUntil(n)),c===kl.Success){o({status:c});return}a(r)},t.prototype._disabledUntil=function(e){var n=Dk[e];return this._rateLimits[n]||this._rateLimits.all},t.prototype._isRateLimited=function(e){return this._disabledUntil(e)>new Date(Date.now())},t.prototype._handleRateLimit=function(e){var n,r,i,o,a=Date.now(),c=e["x-sentry-rate-limits"],f=e["retry-after"];if(c){try{for(var v=dk(c.trim().split(",")),y=v.next();!y.done;y=v.next()){var b=y.value,E=b.split(":",2),I=parseInt(E[0],10),L=(isNaN(I)?60:I)*1e3;try{for(var D=(i=void 0,dk(E[1].split(";"))),te=D.next();!te.done;te=D.next()){var z=te.value;this._rateLimits[z||"all"]=new Date(a+L)}}catch(Y){i={error:Y}}finally{try{te&&!te.done&&(o=D.return)&&o.call(D)}finally{if(i)throw i.error}}}}catch(Y){n={error:Y}}finally{try{y&&!y.done&&(r=v.return)&&r.call(v)}finally{if(n)throw n.error}}return!0}else if(f)return this._rateLimits.all=new Date(a+iz(a,f)),!0;return!1},t}(),Vz=function(t){Sy(e,t);function e(n,r){r===void 0&&(r=tD());var i=t.call(this,n)||this;return i._fetch=r,i}return e.prototype.sendEvent=function(n){return this._sendRequest(ZP(n,this._api),n)},e.prototype.sendSession=function(n){return this._sendRequest(JP(n,this._api),n)},e.prototype._sendRequest=function(n,r){var i=this;if(this._isRateLimited(n.type))return this.recordLostEvent(ns.RateLimitBackoff,n.type),Promise.reject({event:r,type:n.type,reason:"Transport for "+n.type+" requests locked till "+this._disabledUntil(n.type)+" due to too many requests.",status:429});var o={body:n.body,method:"POST",referrerPolicy:qB()?"origin":""};return this.options.fetchParameters!==void 0&&Object.assign(o,this.options.fetchParameters),this.options.headers!==void 0&&(o.headers=this.options.headers),this._buffer.add(function(){return new Ai(function(a,c){i._fetch(n.url,o).then(function(f){var v={"x-sentry-rate-limits":f.headers.get("X-Sentry-Rate-Limits"),"retry-after":f.headers.get("Retry-After")};i._handleResponse({requestType:n.type,response:f,headers:v,resolve:a,reject:c})}).catch(c)})}).then(void 0,function(a){throw a instanceof ir?i.recordLostEvent(ns.QueueOverflow,n.type):i.recordLostEvent(ns.NetworkError,n.type),a})},e}(nD),Bz=function(t){Sy(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.sendEvent=function(n){return this._sendRequest(ZP(n,this._api),n)},e.prototype.sendSession=function(n){return this._sendRequest(JP(n,this._api),n)},e.prototype._sendRequest=function(n,r){var i=this;return this._isRateLimited(n.type)?(this.recordLostEvent(ns.RateLimitBackoff,n.type),Promise.reject({event:r,type:n.type,reason:"Transport for "+n.type+" requests locked till "+this._disabledUntil(n.type)+" due to too many requests.",status:429})):this._buffer.add(function(){return new Ai(function(o,a){var c=new XMLHttpRequest;c.onreadystatechange=function(){if(c.readyState===4){var v={"x-sentry-rate-limits":c.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":c.getResponseHeader("Retry-After")};i._handleResponse({requestType:n.type,response:c,headers:v,resolve:o,reject:a})}},c.open("POST",n.url);for(var f in i.options.headers)Object.prototype.hasOwnProperty.call(i.options.headers,f)&&c.setRequestHeader(f,i.options.headers[f]);c.send(n.body)})}).then(void 0,function(o){throw o instanceof ir?i.recordLostEvent(ns.QueueOverflow,n.type):i.recordLostEvent(ns.NetworkError,n.type),o})},e}(nD),zz=function(t){Sy(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.eventFromException=function(n,r){return Fz(this._options,n,r)},e.prototype.eventFromMessage=function(n,r,i){return r===void 0&&(r=Ds.Info),jz(this._options,n,r,i)},e.prototype._setupTransport=function(){if(!this._options.dsn)return t.prototype._setupTransport.call(this);var n=an(an({},this._options.transportOptions),{dsn:this._options.dsn,tunnel:this._options.tunnel,sendClientReports:this._options.sendClientReports,_metadata:this._options._metadata});return this._options.transport?new this._options.transport(n):Iy()?new Vz(n):new Bz(n)},e}(Ez),Qv=kn(),qb=0;function Lk(){return qb>0}function qz(){qb+=1,setTimeout(function(){qb-=1})}function Bc(t,e,n){if(e===void 0&&(e={}),typeof t!="function")return t;try{if(t.__sentry__)return t;if(t.__sentry_wrapped__)return t.__sentry_wrapped__}catch{return t}var r=function(){var a=Array.prototype.slice.call(arguments);try{n&&typeof n=="function"&&n.apply(this,arguments);var c=a.map(function(f){return Bc(f,e)});return t.handleEvent?t.handleEvent.apply(this,c):t.apply(this,c)}catch(f){throw qz(),fz(function(v){v.addEventProcessor(function(y){var b=an({},y);return e.mechanism&&(Ub(b,void 0,void 0),xh(b,e.mechanism)),b.extra=an(an({},b.extra),{arguments:a}),b}),hz(f)}),f}};try{for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}catch{}t.prototype=t.prototype||{},r.prototype=t.prototype,Object.defineProperty(t,"__sentry_wrapped__",{enumerable:!1,value:r}),Object.defineProperties(r,{__sentry__:{enumerable:!1,value:!0},__sentry_original__:{enumerable:!1,value:t}});try{var o=Object.getOwnPropertyDescriptor(r,"name");o.configurable&&Object.defineProperty(r,"name",{get:function(){return t.name}})}catch{}return r}function Wz(t){if(t===void 0&&(t={}),!!Qv.document){if(!t.eventId){Ut.error("Missing eventId option in showReportDialog call");return}if(!t.dsn){Ut.error("Missing dsn option in showReportDialog call");return}var e=Qv.document.createElement("script");e.async=!0,e.src=new XP(t.dsn).getReportDialogEndpoint(t),t.onLoad&&(e.onload=t.onLoad);var n=Qv.document.head||Qv.document.body;n&&n.appendChild(e)}}var Gz=function(){function t(e){this.name=t.id,this._onErrorHandlerInstalled=!1,this._onUnhandledRejectionHandlerInstalled=!1,this._options=an({onerror:!0,onunhandledrejection:!0},e)}return t.prototype.setupOnce=function(){Error.stackTraceLimit=50,this._options.onerror&&(Ut.log("Global Handler attached: onerror"),this._installGlobalOnErrorHandler()),this._options.onunhandledrejection&&(Ut.log("Global Handler attached: onunhandledrejection"),this._installGlobalOnUnhandledRejectionHandler())},t.prototype._installGlobalOnErrorHandler=function(){var e=this;this._onErrorHandlerInstalled||(tu({callback:function(n){var r=n.error,i=Hr(),o=i.getIntegration(t),a=r&&r.__sentry_own_request__===!0;if(!(!o||Lk()||a)){var c=i.getClient(),f=r===void 0&&Th(n.msg)?e._eventFromIncompleteOnError(n.msg,n.url,n.line,n.column):e._enhanceEventWithInitialFrame(Bb(r||n.msg,void 0,{attachStacktrace:c&&c.getOptions().attachStacktrace,rejection:!1}),n.url,n.line,n.column);xh(f,{handled:!1,type:"onerror"}),i.captureEvent(f,{originalException:r})}},type:"error"}),this._onErrorHandlerInstalled=!0)},t.prototype._installGlobalOnUnhandledRejectionHandler=function(){var e=this;this._onUnhandledRejectionHandlerInstalled||(tu({callback:function(n){var r=n;try{"reason"in n?r=n.reason:"detail"in n&&"reason"in n.detail&&(r=n.detail.reason)}catch{}var i=Hr(),o=i.getIntegration(t),a=r&&r.__sentry_own_request__===!0;if(!o||Lk()||a)return!0;var c=i.getClient(),f=Ty(r)?e._eventFromRejectionWithPrimitive(r):Bb(r,void 0,{attachStacktrace:c&&c.getOptions().attachStacktrace,rejection:!0});f.level=Ds.Error,xh(f,{handled:!1,type:"onunhandledrejection"}),i.captureEvent(f,{originalException:r})},type:"unhandledrejection"}),this._onUnhandledRejectionHandlerInstalled=!0)},t.prototype._eventFromIncompleteOnError=function(e,n,r,i){var o=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i,a=VP(e)?e.message:e,c,f=a.match(o);f&&(c=f[1],a=f[2]);var v={exception:{values:[{type:c||"Error",value:a}]}};return this._enhanceEventWithInitialFrame(v,n,r,i)},t.prototype._eventFromRejectionWithPrimitive=function(e){return{exception:{values:[{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: "+String(e)}]}}},t.prototype._enhanceEventWithInitialFrame=function(e,n,r,i){e.exception=e.exception||{},e.exception.values=e.exception.values||[],e.exception.values[0]=e.exception.values[0]||{},e.exception.values[0].stacktrace=e.exception.values[0].stacktrace||{},e.exception.values[0].stacktrace.frames=e.exception.values[0].stacktrace.frames||[];var o=isNaN(parseInt(i,10))?void 0:i,a=isNaN(parseInt(r,10))?void 0:r,c=Th(n)&&n.length>0?n:NB();return e.exception.values[0].stacktrace.frames.length===0&&e.exception.values[0].stacktrace.frames.push({colno:o,filename:c,function:"?",in_app:!0,lineno:a}),e},t.id="GlobalHandlers",t}(),$z=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Hz=function(){function t(e){this.name=t.id,this._options=an({XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0},e)}return t.prototype.setupOnce=function(){var e=kn();if(this._options.setTimeout&&$r(e,"setTimeout",this._wrapTimeFunction.bind(this)),this._options.setInterval&&$r(e,"setInterval",this._wrapTimeFunction.bind(this)),this._options.requestAnimationFrame&&$r(e,"requestAnimationFrame",this._wrapRAF.bind(this)),this._options.XMLHttpRequest&&"XMLHttpRequest"in e&&$r(XMLHttpRequest.prototype,"send",this._wrapXHR.bind(this)),this._options.eventTarget){var n=Array.isArray(this._options.eventTarget)?this._options.eventTarget:$z;n.forEach(this._wrapEventTarget.bind(this))}},t.prototype._wrapTimeFunction=function(e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=n[0];return n[0]=Bc(i,{mechanism:{data:{function:Qa(e)},handled:!0,type:"instrument"}}),e.apply(this,n)}},t.prototype._wrapRAF=function(e){return function(n){return e.call(this,Bc(n,{mechanism:{data:{function:"requestAnimationFrame",handler:Qa(e)},handled:!0,type:"instrument"}}))}},t.prototype._wrapEventTarget=function(e){var n=kn(),r=n[e]&&n[e].prototype;!r||!r.hasOwnProperty||!r.hasOwnProperty("addEventListener")||($r(r,"addEventListener",function(i){return function(o,a,c){try{typeof a.handleEvent=="function"&&(a.handleEvent=Bc(a.handleEvent.bind(a),{mechanism:{data:{function:"handleEvent",handler:Qa(a),target:e},handled:!0,type:"instrument"}}))}catch{}return i.call(this,o,Bc(a,{mechanism:{data:{function:"addEventListener",handler:Qa(a),target:e},handled:!0,type:"instrument"}}),c)}}),$r(r,"removeEventListener",function(i){return function(o,a,c){var f,v=a;try{var y=(f=v)===null||f===void 0?void 0:f.__sentry_wrapped__;y&&i.call(this,o,y,c)}catch{}return i.call(this,o,v,c)}}))},t.prototype._wrapXHR=function(e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=this,o=["onload","onerror","onprogress","onreadystatechange"];return o.forEach(function(a){a in i&&typeof i[a]=="function"&&$r(i,a,function(c){var f={mechanism:{data:{function:a,handler:Qa(c)},handled:!0,type:"instrument"}};return c.__sentry_original__&&(f.mechanism.data.handler=Qa(c.__sentry_original__)),Bc(c,f)})}),e.apply(this,n)}},t.id="TryCatch",t}(),rD=function(){function t(e){this.name=t.id,this._options=an({console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0},e)}return t.prototype.addSentryBreadcrumb=function(e){this._options.sentry&&Hr().addBreadcrumb({category:"sentry."+(e.type==="transaction"?"transaction":"event"),event_id:e.event_id,level:e.level,message:cl(e)},{event:e})},t.prototype.setupOnce=function(){var e=this;this._options.console&&tu({callback:function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];e._consoleBreadcrumb.apply(e,pl(n))},type:"console"}),this._options.dom&&tu({callback:function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];e._domBreadcrumb.apply(e,pl(n))},type:"dom"}),this._options.xhr&&tu({callback:function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];e._xhrBreadcrumb.apply(e,pl(n))},type:"xhr"}),this._options.fetch&&tu({callback:function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];e._fetchBreadcrumb.apply(e,pl(n))},type:"fetch"}),this._options.history&&tu({callback:function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];e._historyBreadcrumb.apply(e,pl(n))},type:"history"})},t.prototype._consoleBreadcrumb=function(e){var n={category:"console",data:{arguments:e.args,logger:"console"},level:Ds.fromString(e.level),message:mk(e.args," ")};if(e.level==="assert")if(e.args[0]===!1)n.message="Assertion failed: "+(mk(e.args.slice(1)," ")||"console.assert"),n.data.arguments=e.args.slice(1);else return;Hr().addBreadcrumb(n,{input:e.args,level:e.level})},t.prototype._domBreadcrumb=function(e){var n,r=typeof this._options.dom=="object"?this._options.dom.serializeAttribute:void 0;typeof r=="string"&&(r=[r]);try{n=e.event.target?am(e.event.target,r):am(e.event,r)}catch{n="<unknown>"}n.length!==0&&Hr().addBreadcrumb({category:"ui."+e.name,message:n},{event:e.event,name:e.name,global:e.global})},t.prototype._xhrBreadcrumb=function(e){if(e.endTimestamp){if(e.xhr.__sentry_own_request__)return;var n=e.xhr.__sentry_xhr__||{},r=n.method,i=n.url,o=n.status_code,a=n.body;Hr().addBreadcrumb({category:"xhr",data:{method:r,url:i,status_code:o},type:"http"},{xhr:e.xhr,input:a});return}},t.prototype._fetchBreadcrumb=function(e){e.endTimestamp&&(e.fetchData.url.match(/sentry_key/)&&e.fetchData.method==="POST"||(e.error?Hr().addBreadcrumb({category:"fetch",data:e.fetchData,level:Ds.Error,type:"http"},{data:e.error,input:e.args}):Hr().addBreadcrumb({category:"fetch",data:an(an({},e.fetchData),{status_code:e.response.status}),type:"http"},{input:e.args,response:e.response})))},t.prototype._historyBreadcrumb=function(e){var n=kn(),r=e.from,i=e.to,o=aE(n.location.href),a=aE(r),c=aE(i);a.path||(a=o),o.protocol===c.protocol&&o.host===c.host&&(i=c.relative),o.protocol===a.protocol&&o.host===a.host&&(r=a.relative),Hr().addBreadcrumb({category:"navigation",data:{from:r,to:i}})},t.id="Breadcrumbs",t}(),Kz="cause",Yz=5,Xz=function(){function t(e){e===void 0&&(e={}),this.name=t.id,this._key=e.key||Kz,this._limit=e.limit||Yz}return t.prototype.setupOnce=function(){Cy(function(e,n){var r=Hr().getIntegration(t);if(r){var i=r._handler&&r._handler.bind(r);return typeof i=="function"?i(e,n):e}return e})},t.prototype._handler=function(e,n){if(!e.exception||!e.exception.values||!n||!xu(n.originalException,Error))return e;var r=this._walkErrorTree(n.originalException,this._key);return e.exception.values=pl(r,e.exception.values),e},t.prototype._walkErrorTree=function(e,n,r){if(r===void 0&&(r=[]),!xu(e[n],Error)||r.length+1>=this._limit)return r;var i=ch(e[n]),o=eD(i);return this._walkErrorTree(e[n],n,pl([o],r))},t.id="LinkedErrors",t}(),Cc=kn(),Qz=function(){function t(){this.name=t.id}return t.prototype.setupOnce=function(){Cy(function(e){var n,r,i;if(Hr().getIntegration(t)){if(!Cc.navigator&&!Cc.location&&!Cc.document)return e;var o=((n=e.request)===null||n===void 0?void 0:n.url)||((r=Cc.location)===null||r===void 0?void 0:r.href),a=(Cc.document||{}).referrer,c=(Cc.navigator||{}).userAgent,f=an(an(an({},(i=e.request)===null||i===void 0?void 0:i.headers),a&&{Referer:a}),c&&{"User-Agent":c}),v=an(an({},o&&{url:o}),{headers:f});return an(an({},e),{request:v})}return e})},t.id="UserAgent",t}(),Jz=function(){function t(){this.name=t.id}return t.prototype.setupOnce=function(e,n){e(function(r){var i=n().getIntegration(t);if(i){try{if(i._shouldDropEvent(r,i._previousEvent))return Ut.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{return i._previousEvent=r}return i._previousEvent=r}return r})},t.prototype._shouldDropEvent=function(e,n){return n?!!(this._isSameMessageEvent(e,n)||this._isSameExceptionEvent(e,n)):!1},t.prototype._isSameMessageEvent=function(e,n){var r=e.message,i=n.message;return!(!r&&!i||r&&!i||!r&&i||r!==i||!this._isSameFingerprint(e,n)||!this._isSameStacktrace(e,n))},t.prototype._getFramesFromEvent=function(e){var n=e.exception;if(n)try{return n.values[0].stacktrace.frames}catch{return}else if(e.stacktrace)return e.stacktrace.frames},t.prototype._isSameStacktrace=function(e,n){var r=this._getFramesFromEvent(e),i=this._getFramesFromEvent(n);if(!r&&!i)return!0;if(r&&!i||!r&&i||(r=r,i=i,i.length!==r.length))return!1;for(var o=0;o<i.length;o++){var a=i[o],c=r[o];if(a.filename!==c.filename||a.lineno!==c.lineno||a.colno!==c.colno||a.function!==c.function)return!1}return!0},t.prototype._getExceptionFromEvent=function(e){return e.exception&&e.exception.values&&e.exception.values[0]},t.prototype._isSameExceptionEvent=function(e,n){var r=this._getExceptionFromEvent(n),i=this._getExceptionFromEvent(e);return!(!r||!i||r.type!==i.type||r.value!==i.value||!this._isSameFingerprint(e,n)||!this._isSameStacktrace(e,n))},t.prototype._isSameFingerprint=function(e,n){var r=e.fingerprint,i=n.fingerprint;if(!r&&!i)return!0;if(r&&!i||!r&&i)return!1;r=r,i=i;try{return r.join("")===i.join("")}catch{return!1}},t.id="Dedupe",t}(),Zz=function(t){Sy(e,t);function e(n){n===void 0&&(n={});var r=this;return n._metadata=n._metadata||{},n._metadata.sdk=n._metadata.sdk||{name:"sentry.javascript.browser",packages:[{name:"npm:@sentry/browser",version:kk}],version:kk},r=t.call(this,zz,n)||this,r}return e.prototype.showReportDialog=function(n){n===void 0&&(n={});var r=kn().document;if(r){if(!this._isEnabled()){Ut.error("Trying to call showReportDialog with Sentry Client disabled");return}Wz(an(an({},n),{dsn:n.dsn||this.getDsn()}))}},e.prototype._prepareEvent=function(n,r,i){return n.platform=n.platform||"javascript",t.prototype._prepareEvent.call(this,n,r,i)},e.prototype._sendEvent=function(n){var r=this.getIntegration(rD);r&&r.addSentryBreadcrumb(n),t.prototype._sendEvent.call(this,n)},e}(_z),e8=[new xz,new Tz,new Hz,new rD,new Gz,new Xz,new Jz,new Qz];function t8(t){if(t===void 0&&(t={}),t.defaultIntegrations===void 0&&(t.defaultIntegrations=e8),t.release===void 0){var e=kn();e.SENTRY_RELEASE&&e.SENTRY_RELEASE.id&&(t.release=e.SENTRY_RELEASE.id)}t.autoSessionTracking===void 0&&(t.autoSessionTracking=!0),t.sendClientReports===void 0&&(t.sendClientReports=!0),Sz(Zz,t),t.autoSessionTracking&&n8()}function n8(){var t=kn(),e=t.document;if(typeof e>"u"){Ut.warn("Session tracking in non-browser environment with @sentry/browser is not supported.");return}var n=Hr();typeof n.startSession!="function"||typeof n.captureSession!="function"||(n.startSession({ignoreDuration:!0}),n.captureSession(),tu({callback:function(r){var i=r.from,o=r.to;i===void 0||i===o||(n.startSession({ignoreDuration:!0}),n.captureSession())},type:"history"}))}const r8=50,i8=.25,ml=1,sa=4,o8=2,s8=5,Mk=10,a8=300,Jv=1500,Fk=100,cm=250,go=1e3,Wb=500,Gn="DIALOG_CLOSED_REASON",jk=60,u8=5,Uk=2,Vk=.25,Bk=.75,l8=["animals","letters","digits","people","geometric","stuff"],dd=["0","1","2","3","4","5","6","7","8","9"],pd=["","","","","","","","","","","","","","","","","","","","","","","","","",""];{let t=function(){dataLayer.push(arguments)};window.dataLayer=window.dataLayer||[],t("js",new Date),t("config","G-F7R3KZMTTS",{anonymize_ip:!0,cookie_expires:0})}t8({dsn:"https://1b2f34262d80460298da419637b59901@o375098.ingest.sentry.io/5194058",environment:"production",enabled:!0,beforeSend:(t,e)=>e.originalException===Gn?null:t});var c8={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Gb=function(t,e){return Gb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},Gb(t,e)};function iD(t,e){Gb(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var $i=function(){return $i=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},$i.apply(this,arguments)};function Rd(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Ch(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],a=0,c=o.length;a<c;a++,i++)r[i]=o[a];return r}function h8(t,e){for(;t.length<e;)t="0"+t;return t}function Js(t,e){var n,r,i;if(e.length===0)return t;for(n=0,i=e.length;n<i;n++)r=e.charCodeAt(n),t=(t<<5)-t+r,t|=0;return t<0?t*-2:t}function f8(t,e,n){return Object.keys(e).sort().reduce(r,t);function r(i,o){return oD(i,e[o],o,n)}}function oD(t,e,n,r){var i=Js(Js(Js(t,n),d8(e)),typeof e);if(e===null)return Js(i,"null");if(e===void 0)return Js(i,"undefined");if(typeof e=="object"||typeof e=="function"){if(r.indexOf(e)!==-1)return Js(i,"[Circular]"+n);r.push(e);var o=f8(i,e,r);if(!("valueOf"in e)||typeof e.valueOf!="function")return o;try{return Js(o,String(e.valueOf()))}catch(a){return Js(o,"[valueOf exception]"+(a.stack||a.message))}}return Js(i,e.toString())}function d8(t){return Object.prototype.toString.call(t)}function p8(t){return h8(oD(0,t,"",[]).toString(16),8)}var cT=p8,v8={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},g8={bg:"backgroundColor",m:"margin",mt:"marginTop",mr:"marginRight",mb:"marginBottom",ml:"marginLeft",mx:"marginX",my:"marginY",p:"padding",pt:"paddingTop",pr:"paddingRight",pb:"paddingBottom",pl:"paddingLeft",px:"paddingX",py:"paddingY"},m8={marginX:["marginLeft","marginRight"],marginY:["marginTop","marginBottom"],paddingX:["paddingLeft","paddingRight"],paddingY:["paddingTop","paddingBottom"],size:["width","height"]},y8={color:"colors",backgroundColor:"colors",borderColor:"colors",margin:"space",marginTop:"space",marginRight:"space",marginBottom:"space",marginLeft:"space",marginX:"space",marginY:"space",padding:"space",paddingTop:"space",paddingRight:"space",paddingBottom:"space",paddingLeft:"space",paddingX:"space",paddingY:"space",top:"space",right:"space",bottom:"space",left:"space",gridGap:"space",gridColumnGap:"space",gridRowGap:"space",gap:"space",columnGap:"space",rowGap:"space",fontFamily:"fonts",fontSize:"fontSizes",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",border:"borders",borderTop:"borders",borderRight:"borders",borderBottom:"borders",borderLeft:"borders",borderWidth:"borderWidths",borderStyle:"borderStyles",borderRadius:"radii",borderTopRightRadius:"radii",borderTopLeftRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",borderTopWidth:"borderWidths",borderTopColor:"colors",borderTopStyle:"borderStyles",borderBottomWidth:"borderWidths",borderBottomColor:"colors",borderBottomStyle:"borderStyles",borderLeftWidth:"borderWidths",borderLeftColor:"colors",borderLeftStyle:"borderStyles",borderRightWidth:"borderWidths",borderRightColor:"colors",borderRightStyle:"borderStyles",outlineColor:"colors",boxShadow:"shadows",textShadow:"shadows",zIndex:"zIndices",width:"sizes",minWidth:"sizes",maxWidth:"sizes",height:"sizes",minHeight:"sizes",maxHeight:"sizes",flexBasis:"sizes",size:"sizes",fill:"colors",stroke:"colors"},_8={margin:1,marginTop:1,marginRight:1,marginBottom:1,marginLeft:1,marginX:1,marginY:1,top:1,bottom:1,left:1,right:1},Ko={unitlessProperties:v8,propertyAliases:g8,multiplePropertyAliases:m8,propertyScales:y8,negativeProperties:_8},Hi=function(t,e,n){for(var r=t,i=typeof e=="string"?e.split("."):[e],o=0,a=i;o<a.length;o++){var c=a[o];r=r?r[c]:void 0}return r===void 0?n:r},sD=function(t,e){if(typeof e!="number"||e>=0)return Hi(t,e,e);var n=Math.abs(e),r=Hi(t,n,n);return typeof r=="string"?"-"+r:r*-1},$b=function(t,e){return e==null||typeof e=="boolean"||e===""?"":typeof e=="number"&&e!==0&&!(t in Ko.unitlessProperties)?e+"px":String(e).trim()},Hb=function(t){return t.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()})},w8=function(t,e){var n={},r=Hi(e,"breakpoints"),i=Object.entries(r).reduce(function(I,L,D){var te,z=L[0],Y=L[1];return $i($i({},I),(te={},te[z]="@media screen and (min-width: #"+D+"#"+Y+")",te))},{_:null});for(var o in t){var a=t[o],c=typeof a;if(a!=null){if(o.includes("&")||o.startsWith("@")||c==="string"||c==="number"){n[o]=a;continue}for(var f=Object.keys(a),v=0,y=f;v<y.length;v++){var b=y[v],E=i[b];if(!E){n[o]=a[b];continue}n[E]=n[E]||{},a[b]!=null&&(n[E][o]=a[b])}}}return n},hT=function(t,e){var n={},r=w8(t,e);for(var i in r){var o=r[i];if(o&&typeof o=="object"){n[i]=hT(o,e);continue}var a=Hi(Ko.propertyAliases,i,i),c=Hi(Ko.propertyScales,a),f=Hi(e,c,Hi(e,a,{})),v=a in Ko.negativeProperties?sD(f,o):Hi(f,o,o);if(Ko.multiplePropertyAliases[a])for(var y=Ko.multiplePropertyAliases[a],b=0;b<y.length;b++)n[y[b]]=v;else n[a]=v}return n},Kb=function(t,e,n){Object.keys(e).forEach(function(r){var i=e[r];typeof i=="string"||typeof i=="number"?(n[t]||(n[t]=""),n[t]+=Hb(r)+":"+$b(r,i)+";"):typeof i=="object"&&(r.startsWith("@media")||r.startsWith("@supports")?(n[r]||(n[r]={}),Kb(t,i,n[r])):Kb(r.replace(/&/g,t),i,n))})},aD=function(t){var e={};return Kb("&",t,e),e},fT=[],fu="global",hm="data-css-system-id",Yb="data-css-system-ids",Xb=" ",E8=typeof process=="object"&&c8&&!1,Qb=function(){function t(e){var n=this;this.createdIds={};var r=document.querySelector("style["+hm+'="'+e+'"]');if(r===null)r=document.createElement("style"),r.setAttribute(hm,e),document.head.appendChild(r);else{var i=r.getAttribute(Yb);i!==null&&i.split(Xb).forEach(function(o){return n.createdIds[o]=!0})}this.element=r}return t.prototype.insertRule=function(e){var n=this.element.sheet;n.insertRule(e,n.cssRules.length)},t.prototype.remove=function(){this.element.remove()},t}(),zk=function(t){iD(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.insertRule=function(n){this.element.textContent+=n+`
`},e}(Qb),uD=function(){function t(){var e;this.styleSheets=(e={},e[fu]=new Qb(fu),e)}return t.prototype.getGlobalStyleSheet=function(){return this.styleSheets[fu]},t.prototype.createStyleSheet=function(e){return this.styleSheets[e]=new Qb(e),this.styleSheets[e]},t.prototype.removeStyleSheet=function(e){this.styleSheets[e]&&(this.styleSheets[e].remove(),delete this.styleSheets[e])},t}(),b8=function(t){iD(e,t);function e(){var n,r=t!==null&&t.apply(this,arguments)||this;return r.styleSheets=(n={},n[fu]=new zk(fu),n),r}return e.prototype.createStyleSheet=function(n){return this.styleSheets[n]=new zk(n),this.styleSheets[n]},e}(uD),qk=function(){function t(e){this.rules=[],this.createdIds={},this.id=e}return t.prototype.insertRule=function(e){this.rules.push(e)},t.prototype.getStyleTag=function(){return"<style "+hm+'="'+this.id+'" '+Yb+'="'+Object.keys(this.createdIds).join(Xb)+'">'+this.rules.join(`
`)+"</style>"},t.prototype.getStyleComponent=function(){var e;return ee.createElement("style",(e={},e[hm]=this.id,e[Yb]=Object.keys(this.createdIds).join(Xb),e.dangerouslySetInnerHTML={__html:this.rules.join(`
`)},e))},t}(),S8=function(){function t(){var e;this.styleSheets=(e={},e[fu]=new qk(fu),e)}return t.prototype.getGlobalStyleSheet=function(){return this.styleSheets[fu]},t.prototype.createStyleSheet=function(e){return this.styleSheets[e]=new qk(e),this.styleSheets[e]},t.prototype.removeStyleSheet=function(e){delete this.styleSheets[e]},t.prototype.getStyleTags=function(){return Object.values(this.styleSheets).map(function(e){return e.getStyleTag()}).join(`
`)},t.prototype.getStyleComponents=function(){return Object.values(this.styleSheets).map(function(e){return e.getStyleComponent()})},t}(),T8=typeof document<"u",dT=ee.createContext(T8?E8?new b8:new uD:new S8),I8={breakpoints:{s:"40em",m:"52em",l:"64em"},space:[0,4,8,16,32,64,128,256,512],fontSizes:[12,14,16,20,24,32,48,64,72]},hs=ee.createContext(I8),x8=function(t,e){e===void 0&&(e=fT);var n=ee.useContext(dT),r=ee.useContext(hs),i=ee.useMemo(function(){var o=hT(t,r),a=cT(o),c="style-"+a,f=n.getGlobalStyleSheet();if(!f.createdIds[c]){for(var v=aD(o),y=Object.keys(v).sort(function(ue,oe){return ue<oe?-1:ue>oe?1:0}),b=0,E=y;b<E.length;b++){var I=E[b];if(typeof v[I]=="string"){var L=I.replace(/&/g,"."+c),D=v[I];f.insertRule(L+"{"+D+"}")}else{var te=I,z=v[te],Y="";for(var K in z){var L=K.replace(/&/g,"."+c),D=z[K];Y+=L+"{"+D+"}"}f.insertRule(te.replace(/#\d#/,"")+"{"+Y+"}")}}f.createdIds[c]=!0}return c},Ch([r],e));return i},C8=function(t,e){e===void 0&&(e=fT);var n=ee.useContext(dT),r=ee.useContext(hs),i=ee.useMemo(function(){var o=cT({systemObject:t,theme:r}),a=n.createStyleSheet(o);for(var c in t)for(var f=hT(t[c],r),v=aD(f),y=Object.keys(v).sort(function(ue,oe){return ue<oe?-1:ue>oe?1:0}),b=0,E=y;b<E.length;b++){var I=E[b];if(typeof v[I]=="string"){var L=I.replace(/&/g,c).replace(/#\d#/,""),D=v[I];a.insertRule(L+"{"+D+"}")}else{var te=I,z=v[te],Y="";for(var K in z){var L=K.replace(/&/g,c),D=z[K];Y+=L+"{"+D+"}"}a.insertRule(te.replace(/#\d#/,"")+"{"+Y+"}")}}return o},Ch([r],e));ee.useEffect(function(){return function(){return n.removeStyleSheet(i)}},Ch([i,r],e))},N8=function(t,e){var n="";for(var r in t){var i=t[r],o=Hi(Ko.propertyAliases,r,r),a=Hi(Ko.propertyScales,o),c=Hi(e,a,Hi(e,o,{})),f=o in Ko.negativeProperties?sD(c,i):Hi(c,i,i);if(Ko.multiplePropertyAliases[o])for(var v=Ko.multiplePropertyAliases[o],y=0;y<v.length;y++)n+=Hb(v[y])+":"+$b(o,f)+";";else n+=Hb(o)+":"+$b(o,f)+";"}return n},fm=function(t,e){e===void 0&&(e=fT);var n=ee.useContext(dT),r=ee.useContext(hs),i=ee.useMemo(function(){var o="keyframes-"+cT({keyframesObject:t,theme:r}),a=n.getGlobalStyleSheet();if(!a.createdIds[o]){var c="";for(var f in t){var v=t[f],y=isNaN(f)?f:f+"%",b=N8(v,r);c+=y+"{"+b+"}"}a.insertRule("@keyframes "+o+"{"+c+"}"),a.createdIds[o]=!0}return o},Ch([r],e));return i},lD=function(t){var e=t.css,n=Rd(t,["css"]);return function(r){var i=r.css,o=Rd(r,["css"]);return $i($i($i({},n),{css:$i($i({},e),i)}),o)}},Tp=function(t,e){var n=typeof e=="function"?e:lD(e);return rr.forwardRef(function(r,i){var o=n(r),a=o.as,c=a===void 0?t:a,f=o.css,v=o.deps,y=o.className,b=Rd(o,["as","css","deps","className"]),E=x8(f,v),I=y?y+" "+E:E;return rr.createElement(c,$i({ref:i},b,{className:I}))})},Vs=function(t,e){var n=typeof e=="function"?e:lD(e);return rr.forwardRef(function(r,i){var o=n(r),a=o.css,c=Rd(o,["css"]);return rr.createElement(t,$i({ref:i,css:a},c))})},A8=function(t){var e=t.gap,n=Rd(t,["gap"]),r=n.flexDirection,i=ee.useContext(hs),o=ee.useMemo(function(){var a;if(e&&r){if(typeof r=="string"){var c=r==="column"||r==="column-reverse";return{"& > * + *":(a={},a[c?"mt":"ml"]=e,a)}}for(var f=void 0,v=void 0,y=typeof e=="object"?e:{_:e},b=r,E=new Set(Ch(Object.keys(b),Object.keys(y))),I={},L={},D=Ch(["_"],Object.keys(i.breakpoints)),te=0,z=D;te<z.length;te++){var Y=z[te];if(E.has(Y)!==!1){var K=Y,ue=b[K]!=null?b[K]:f;f=ue;var oe=y[K]!=null?y[K]:v;v=oe;var c=ue==="column"||ue==="column-reverse";c?(I[K]=oe,L[K]=0):(L[K]=oe,I[K]=0)}}return{"& > * + *":{mt:I,ml:L}}}},[e,r,i]);return e?$i($i({},n),o):n},Jb={},cD={exports:{}},io={},hD={exports:{}},fD={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Fe,Ne){var qe=Fe.length;Fe.push(Ne);e:for(;0<qe;){var Ct=qe-1>>>1,tt=Fe[Ct];if(0<i(tt,Ne))Fe[Ct]=Ne,Fe[qe]=tt,qe=Ct;else break e}}function n(Fe){return Fe.length===0?null:Fe[0]}function r(Fe){if(Fe.length===0)return null;var Ne=Fe[0],qe=Fe.pop();if(qe!==Ne){Fe[0]=qe;e:for(var Ct=0,tt=Fe.length,Xt=tt>>>1;Ct<Xt;){var Nt=2*(Ct+1)-1,Wt=Fe[Nt],Pn=Nt+1,Dt=Fe[Pn];if(0>i(Wt,qe))Pn<tt&&0>i(Dt,Wt)?(Fe[Ct]=Dt,Fe[Pn]=qe,Ct=Pn):(Fe[Ct]=Wt,Fe[Nt]=qe,Ct=Nt);else if(Pn<tt&&0>i(Dt,qe))Fe[Ct]=Dt,Fe[Pn]=qe,Ct=Pn;else break e}}return Ne}function i(Fe,Ne){var qe=Fe.sortIndex-Ne.sortIndex;return qe!==0?qe:Fe.id-Ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var f=[],v=[],y=1,b=null,E=3,I=!1,L=!1,D=!1,te=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function K(Fe){for(var Ne=n(v);Ne!==null;){if(Ne.callback===null)r(v);else if(Ne.startTime<=Fe)r(v),Ne.sortIndex=Ne.expirationTime,e(f,Ne);else break;Ne=n(v)}}function ue(Fe){if(D=!1,K(Fe),!L)if(n(f)!==null)L=!0,xe(oe);else{var Ne=n(v);Ne!==null&&_t(ue,Ne.startTime-Fe)}}function oe(Fe,Ne){L=!1,D&&(D=!1,z(he),he=-1),I=!0;var qe=E;try{for(K(Ne),b=n(f);b!==null&&(!(b.expirationTime>Ne)||Fe&&!Ue());){var Ct=b.callback;if(typeof Ct=="function"){b.callback=null,E=b.priorityLevel;var tt=Ct(b.expirationTime<=Ne);Ne=t.unstable_now(),typeof tt=="function"?b.callback=tt:b===n(f)&&r(f),K(Ne)}else r(f);b=n(f)}if(b!==null)var Xt=!0;else{var Nt=n(v);Nt!==null&&_t(ue,Nt.startTime-Ne),Xt=!1}return Xt}finally{b=null,E=qe,I=!1}}var fe=!1,me=null,he=-1,Z=5,be=-1;function Ue(){return!(t.unstable_now()-be<Z)}function Ge(){if(me!==null){var Fe=t.unstable_now();be=Fe;var Ne=!0;try{Ne=me(!0,Fe)}finally{Ne?ft():(fe=!1,me=null)}}else fe=!1}var ft;if(typeof Y=="function")ft=function(){Y(Ge)};else if(typeof MessageChannel<"u"){var Le=new MessageChannel,it=Le.port2;Le.port1.onmessage=Ge,ft=function(){it.postMessage(null)}}else ft=function(){te(Ge,0)};function xe(Fe){me=Fe,fe||(fe=!0,ft())}function _t(Fe,Ne){he=te(function(){Fe(t.unstable_now())},Ne)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Fe){Fe.callback=null},t.unstable_continueExecution=function(){L||I||(L=!0,xe(oe))},t.unstable_forceFrameRate=function(Fe){0>Fe||125<Fe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Z=0<Fe?Math.floor(1e3/Fe):5},t.unstable_getCurrentPriorityLevel=function(){return E},t.unstable_getFirstCallbackNode=function(){return n(f)},t.unstable_next=function(Fe){switch(E){case 1:case 2:case 3:var Ne=3;break;default:Ne=E}var qe=E;E=Ne;try{return Fe()}finally{E=qe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Fe,Ne){switch(Fe){case 1:case 2:case 3:case 4:case 5:break;default:Fe=3}var qe=E;E=Fe;try{return Ne()}finally{E=qe}},t.unstable_scheduleCallback=function(Fe,Ne,qe){var Ct=t.unstable_now();switch(typeof qe=="object"&&qe!==null?(qe=qe.delay,qe=typeof qe=="number"&&0<qe?Ct+qe:Ct):qe=Ct,Fe){case 1:var tt=-1;break;case 2:tt=250;break;case 5:tt=1073741823;break;case 4:tt=1e4;break;default:tt=5e3}return tt=qe+tt,Fe={id:y++,callback:Ne,priorityLevel:Fe,startTime:qe,expirationTime:tt,sortIndex:-1},qe>Ct?(Fe.sortIndex=qe,e(v,Fe),n(f)===null&&Fe===n(v)&&(D?(z(he),he=-1):D=!0,_t(ue,qe-Ct))):(Fe.sortIndex=tt,e(f,Fe),L||I||(L=!0,xe(oe))),Fe},t.unstable_shouldYield=Ue,t.unstable_wrapCallback=function(Fe){var Ne=E;return function(){var qe=E;E=Ne;try{return Fe.apply(this,arguments)}finally{E=qe}}}})(fD);hD.exports=fD;var k8=hD.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dD=ee,no=k8;function Re(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var pD=new Set,Od={};function Kl(t,e){Nh(t,e),Nh(t+"Capture",e)}function Nh(t,e){for(Od[t]=e,t=0;t<e.length;t++)pD.add(e[t])}var Ea=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zb=Object.prototype.hasOwnProperty,R8=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Wk={},Gk={};function O8(t){return Zb.call(Gk,t)?!0:Zb.call(Wk,t)?!1:R8.test(t)?Gk[t]=!0:(Wk[t]=!0,!1)}function P8(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function D8(t,e,n,r){if(e===null||typeof e>"u"||P8(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ei(t,e,n,r,i,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var Vr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Vr[t]=new Ei(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Vr[e]=new Ei(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Vr[t]=new Ei(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Vr[t]=new Ei(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Vr[t]=new Ei(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Vr[t]=new Ei(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Vr[t]=new Ei(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Vr[t]=new Ei(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Vr[t]=new Ei(t,5,!1,t.toLowerCase(),null,!1,!1)});var pT=/[\-:]([a-z])/g;function vT(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(pT,vT);Vr[e]=new Ei(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(pT,vT);Vr[e]=new Ei(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(pT,vT);Vr[e]=new Ei(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Vr[t]=new Ei(t,1,!1,t.toLowerCase(),null,!1,!1)});Vr.xlinkHref=new Ei("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Vr[t]=new Ei(t,1,!1,t.toLowerCase(),null,!0,!0)});function gT(t,e,n,r){var i=Vr.hasOwnProperty(e)?Vr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(D8(e,n,i,r)&&(n=null),r||i===null?O8(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Oa=dD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Zv=Symbol.for("react.element"),Hc=Symbol.for("react.portal"),Kc=Symbol.for("react.fragment"),mT=Symbol.for("react.strict_mode"),eS=Symbol.for("react.profiler"),vD=Symbol.for("react.provider"),gD=Symbol.for("react.context"),yT=Symbol.for("react.forward_ref"),tS=Symbol.for("react.suspense"),nS=Symbol.for("react.suspense_list"),_T=Symbol.for("react.memo"),Ja=Symbol.for("react.lazy"),mD=Symbol.for("react.offscreen"),$k=Symbol.iterator;function Uf(t){return t===null||typeof t!="object"?null:(t=$k&&t[$k]||t["@@iterator"],typeof t=="function"?t:null)}var Rn=Object.assign,hE;function rd(t){if(hE===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);hE=e&&e[1]||""}return`
`+hE+t}var fE=!1;function dE(t,e){if(!t||fE)return"";fE=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(v){var r=v}Reflect.construct(t,[],e)}else{try{e.call()}catch(v){r=v}t.call(e.prototype)}else{try{throw Error()}catch(v){r=v}t()}}catch(v){if(v&&r&&typeof v.stack=="string"){for(var i=v.stack.split(`
`),o=r.stack.split(`
`),a=i.length-1,c=o.length-1;1<=a&&0<=c&&i[a]!==o[c];)c--;for(;1<=a&&0<=c;a--,c--)if(i[a]!==o[c]){if(a!==1||c!==1)do if(a--,c--,0>c||i[a]!==o[c]){var f=`
`+i[a].replace(" at new "," at ");return t.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",t.displayName)),f}while(1<=a&&0<=c);break}}}finally{fE=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?rd(t):""}function L8(t){switch(t.tag){case 5:return rd(t.type);case 16:return rd("Lazy");case 13:return rd("Suspense");case 19:return rd("SuspenseList");case 0:case 2:case 15:return t=dE(t.type,!1),t;case 11:return t=dE(t.type.render,!1),t;case 1:return t=dE(t.type,!0),t;default:return""}}function rS(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Kc:return"Fragment";case Hc:return"Portal";case eS:return"Profiler";case mT:return"StrictMode";case tS:return"Suspense";case nS:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case gD:return(t.displayName||"Context")+".Consumer";case vD:return(t._context.displayName||"Context")+".Provider";case yT:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case _T:return e=t.displayName||null,e!==null?e:rS(t.type)||"Memo";case Ja:e=t._payload,t=t._init;try{return rS(t(e))}catch{}}return null}function M8(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return rS(e);case 8:return e===mT?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Cu(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function yD(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function F8(t){var e=yD(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function eg(t){t._valueTracker||(t._valueTracker=F8(t))}function _D(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=yD(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function dm(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function iS(t,e){var n=e.checked;return Rn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Hk(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Cu(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function wD(t,e){e=e.checked,e!=null&&gT(t,"checked",e,!1)}function oS(t,e){wD(t,e);var n=Cu(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?sS(t,e.type,n):e.hasOwnProperty("defaultValue")&&sS(t,e.type,Cu(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Kk(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function sS(t,e,n){(e!=="number"||dm(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var id=Array.isArray;function hh(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Cu(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function aS(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Re(91));return Rn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Yk(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Re(92));if(id(n)){if(1<n.length)throw Error(Re(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Cu(n)}}function ED(t,e){var n=Cu(e.value),r=Cu(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Xk(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function bD(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function uS(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?bD(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var tg,SD=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(tg=tg||document.createElement("div"),tg.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=tg.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Pd(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var vd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},j8=["Webkit","ms","Moz","O"];Object.keys(vd).forEach(function(t){j8.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),vd[e]=vd[t]})});function TD(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||vd.hasOwnProperty(t)&&vd[t]?(""+e).trim():e+"px"}function ID(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=TD(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var U8=Rn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function lS(t,e){if(e){if(U8[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Re(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Re(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Re(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Re(62))}}function cS(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hS=null;function wT(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var fS=null,fh=null,dh=null;function Qk(t){if(t=Cp(t)){if(typeof fS!="function")throw Error(Re(280));var e=t.stateNode;e&&(e=Py(e),fS(t.stateNode,t.type,e))}}function xD(t){fh?dh?dh.push(t):dh=[t]:fh=t}function CD(){if(fh){var t=fh,e=dh;if(dh=fh=null,Qk(t),e)for(t=0;t<e.length;t++)Qk(e[t])}}function ND(t,e){return t(e)}function AD(){}var pE=!1;function kD(t,e,n){if(pE)return t(e,n);pE=!0;try{return ND(t,e,n)}finally{pE=!1,(fh!==null||dh!==null)&&(AD(),CD())}}function Dd(t,e){var n=t.stateNode;if(n===null)return null;var r=Py(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Re(231,e,typeof n));return n}var dS=!1;if(Ea)try{var Vf={};Object.defineProperty(Vf,"passive",{get:function(){dS=!0}}),window.addEventListener("test",Vf,Vf),window.removeEventListener("test",Vf,Vf)}catch{dS=!1}function V8(t,e,n,r,i,o,a,c,f){var v=Array.prototype.slice.call(arguments,3);try{e.apply(n,v)}catch(y){this.onError(y)}}var gd=!1,pm=null,vm=!1,pS=null,B8={onError:function(t){gd=!0,pm=t}};function z8(t,e,n,r,i,o,a,c,f){gd=!1,pm=null,V8.apply(B8,arguments)}function q8(t,e,n,r,i,o,a,c,f){if(z8.apply(this,arguments),gd){if(gd){var v=pm;gd=!1,pm=null}else throw Error(Re(198));vm||(vm=!0,pS=v)}}function Yl(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function RD(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Jk(t){if(Yl(t)!==t)throw Error(Re(188))}function W8(t){var e=t.alternate;if(!e){if(e=Yl(t),e===null)throw Error(Re(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Jk(i),t;if(o===r)return Jk(i),e;o=o.sibling}throw Error(Re(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,c=i.child;c;){if(c===n){a=!0,n=i,r=o;break}if(c===r){a=!0,r=i,n=o;break}c=c.sibling}if(!a){for(c=o.child;c;){if(c===n){a=!0,n=o,r=i;break}if(c===r){a=!0,r=o,n=i;break}c=c.sibling}if(!a)throw Error(Re(189))}}if(n.alternate!==r)throw Error(Re(190))}if(n.tag!==3)throw Error(Re(188));return n.stateNode.current===n?t:e}function OD(t){return t=W8(t),t!==null?PD(t):null}function PD(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=PD(t);if(e!==null)return e;t=t.sibling}return null}var DD=no.unstable_scheduleCallback,Zk=no.unstable_cancelCallback,G8=no.unstable_shouldYield,$8=no.unstable_requestPaint,Hn=no.unstable_now,H8=no.unstable_getCurrentPriorityLevel,ET=no.unstable_ImmediatePriority,LD=no.unstable_UserBlockingPriority,gm=no.unstable_NormalPriority,K8=no.unstable_LowPriority,MD=no.unstable_IdlePriority,Ay=null,Rs=null;function Y8(t){if(Rs&&typeof Rs.onCommitFiberRoot=="function")try{Rs.onCommitFiberRoot(Ay,t,void 0,(t.current.flags&128)===128)}catch{}}var is=Math.clz32?Math.clz32:J8,X8=Math.log,Q8=Math.LN2;function J8(t){return t>>>=0,t===0?32:31-(X8(t)/Q8|0)|0}var ng=64,rg=4194304;function od(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function mm(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var c=a&~i;c!==0?r=od(c):(o&=a,o!==0&&(r=od(o)))}else a=n&~i,a!==0?r=od(a):o!==0&&(r=od(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-is(e),i=1<<n,r|=t[n],e&=~i;return r}function Z8(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function eq(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-is(o),c=1<<a,f=i[a];f===-1?(!(c&n)||c&r)&&(i[a]=Z8(c,e)):f<=e&&(t.expiredLanes|=c),o&=~c}}function vS(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function FD(){var t=ng;return ng<<=1,!(ng&4194240)&&(ng=64),t}function vE(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ip(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-is(e),t[e]=n}function tq(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-is(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function bT(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-is(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Zt=0;function jD(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var UD,ST,VD,BD,zD,gS=!1,ig=[],du=null,pu=null,vu=null,Ld=new Map,Md=new Map,ru=[],nq="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function e2(t,e){switch(t){case"focusin":case"focusout":du=null;break;case"dragenter":case"dragleave":pu=null;break;case"mouseover":case"mouseout":vu=null;break;case"pointerover":case"pointerout":Ld.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Md.delete(e.pointerId)}}function Bf(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=Cp(e),e!==null&&ST(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function rq(t,e,n,r,i){switch(e){case"focusin":return du=Bf(du,t,e,n,r,i),!0;case"dragenter":return pu=Bf(pu,t,e,n,r,i),!0;case"mouseover":return vu=Bf(vu,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Ld.set(o,Bf(Ld.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Md.set(o,Bf(Md.get(o)||null,t,e,n,r,i)),!0}return!1}function qD(t){var e=yl(t.target);if(e!==null){var n=Yl(e);if(n!==null){if(e=n.tag,e===13){if(e=RD(n),e!==null){t.blockedOn=e,zD(t.priority,function(){VD(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ug(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=mS(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);hS=r,n.target.dispatchEvent(r),hS=null}else return e=Cp(n),e!==null&&ST(e),t.blockedOn=n,!1;e.shift()}return!0}function t2(t,e,n){Ug(t)&&n.delete(e)}function iq(){gS=!1,du!==null&&Ug(du)&&(du=null),pu!==null&&Ug(pu)&&(pu=null),vu!==null&&Ug(vu)&&(vu=null),Ld.forEach(t2),Md.forEach(t2)}function zf(t,e){t.blockedOn===e&&(t.blockedOn=null,gS||(gS=!0,no.unstable_scheduleCallback(no.unstable_NormalPriority,iq)))}function Fd(t){function e(i){return zf(i,t)}if(0<ig.length){zf(ig[0],t);for(var n=1;n<ig.length;n++){var r=ig[n];r.blockedOn===t&&(r.blockedOn=null)}}for(du!==null&&zf(du,t),pu!==null&&zf(pu,t),vu!==null&&zf(vu,t),Ld.forEach(e),Md.forEach(e),n=0;n<ru.length;n++)r=ru[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ru.length&&(n=ru[0],n.blockedOn===null);)qD(n),n.blockedOn===null&&ru.shift()}var ph=Oa.ReactCurrentBatchConfig,ym=!0;function oq(t,e,n,r){var i=Zt,o=ph.transition;ph.transition=null;try{Zt=1,TT(t,e,n,r)}finally{Zt=i,ph.transition=o}}function sq(t,e,n,r){var i=Zt,o=ph.transition;ph.transition=null;try{Zt=4,TT(t,e,n,r)}finally{Zt=i,ph.transition=o}}function TT(t,e,n,r){if(ym){var i=mS(t,e,n,r);if(i===null)IE(t,e,r,_m,n),e2(t,r);else if(rq(i,t,e,n,r))r.stopPropagation();else if(e2(t,r),e&4&&-1<nq.indexOf(t)){for(;i!==null;){var o=Cp(i);if(o!==null&&UD(o),o=mS(t,e,n,r),o===null&&IE(t,e,r,_m,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else IE(t,e,r,null,n)}}var _m=null;function mS(t,e,n,r){if(_m=null,t=wT(r),t=yl(t),t!==null)if(e=Yl(t),e===null)t=null;else if(n=e.tag,n===13){if(t=RD(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return _m=t,null}function WD(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(H8()){case ET:return 1;case LD:return 4;case gm:case K8:return 16;case MD:return 536870912;default:return 16}default:return 16}}var lu=null,IT=null,Vg=null;function GD(){if(Vg)return Vg;var t,e=IT,n=e.length,r,i="value"in lu?lu.value:lu.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[o-r];r++);return Vg=i.slice(t,1<r?1-r:void 0)}function Bg(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function og(){return!0}function n2(){return!1}function oo(t){function e(n,r,i,o,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(o):o[c]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?og:n2,this.isPropagationStopped=n2,this}return Rn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=og)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=og)},persist:function(){},isPersistent:og}),e}var $h={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xT=oo($h),xp=Rn({},$h,{view:0,detail:0}),aq=oo(xp),gE,mE,qf,ky=Rn({},xp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:CT,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==qf&&(qf&&t.type==="mousemove"?(gE=t.screenX-qf.screenX,mE=t.screenY-qf.screenY):mE=gE=0,qf=t),gE)},movementY:function(t){return"movementY"in t?t.movementY:mE}}),r2=oo(ky),uq=Rn({},ky,{dataTransfer:0}),lq=oo(uq),cq=Rn({},xp,{relatedTarget:0}),yE=oo(cq),hq=Rn({},$h,{animationName:0,elapsedTime:0,pseudoElement:0}),fq=oo(hq),dq=Rn({},$h,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),pq=oo(dq),vq=Rn({},$h,{data:0}),i2=oo(vq),gq={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mq={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yq={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _q(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=yq[t])?!!e[t]:!1}function CT(){return _q}var wq=Rn({},xp,{key:function(t){if(t.key){var e=gq[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Bg(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?mq[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:CT,charCode:function(t){return t.type==="keypress"?Bg(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Bg(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Eq=oo(wq),bq=Rn({},ky,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),o2=oo(bq),Sq=Rn({},xp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:CT}),Tq=oo(Sq),Iq=Rn({},$h,{propertyName:0,elapsedTime:0,pseudoElement:0}),xq=oo(Iq),Cq=Rn({},ky,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Nq=oo(Cq),Aq=[9,13,27,32],NT=Ea&&"CompositionEvent"in window,md=null;Ea&&"documentMode"in document&&(md=document.documentMode);var kq=Ea&&"TextEvent"in window&&!md,$D=Ea&&(!NT||md&&8<md&&11>=md),s2=" ",a2=!1;function HD(t,e){switch(t){case"keyup":return Aq.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function KD(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Yc=!1;function Rq(t,e){switch(t){case"compositionend":return KD(e);case"keypress":return e.which!==32?null:(a2=!0,s2);case"textInput":return t=e.data,t===s2&&a2?null:t;default:return null}}function Oq(t,e){if(Yc)return t==="compositionend"||!NT&&HD(t,e)?(t=GD(),Vg=IT=lu=null,Yc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return $D&&e.locale!=="ko"?null:e.data;default:return null}}var Pq={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function u2(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Pq[t.type]:e==="textarea"}function YD(t,e,n,r){xD(r),e=wm(e,"onChange"),0<e.length&&(n=new xT("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var yd=null,jd=null;function Dq(t){sL(t,0)}function Ry(t){var e=Jc(t);if(_D(e))return t}function Lq(t,e){if(t==="change")return e}var XD=!1;if(Ea){var _E;if(Ea){var wE="oninput"in document;if(!wE){var l2=document.createElement("div");l2.setAttribute("oninput","return;"),wE=typeof l2.oninput=="function"}_E=wE}else _E=!1;XD=_E&&(!document.documentMode||9<document.documentMode)}function c2(){yd&&(yd.detachEvent("onpropertychange",QD),jd=yd=null)}function QD(t){if(t.propertyName==="value"&&Ry(jd)){var e=[];YD(e,jd,t,wT(t)),kD(Dq,e)}}function Mq(t,e,n){t==="focusin"?(c2(),yd=e,jd=n,yd.attachEvent("onpropertychange",QD)):t==="focusout"&&c2()}function Fq(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ry(jd)}function jq(t,e){if(t==="click")return Ry(e)}function Uq(t,e){if(t==="input"||t==="change")return Ry(e)}function Vq(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var us=typeof Object.is=="function"?Object.is:Vq;function Ud(t,e){if(us(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Zb.call(e,i)||!us(t[i],e[i]))return!1}return!0}function h2(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function f2(t,e){var n=h2(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=h2(n)}}function JD(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?JD(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ZD(){for(var t=window,e=dm();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=dm(t.document)}return e}function AT(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Bq(t){var e=ZD(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&JD(n.ownerDocument.documentElement,n)){if(r!==null&&AT(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=f2(n,o);var a=f2(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var zq=Ea&&"documentMode"in document&&11>=document.documentMode,Xc=null,yS=null,_d=null,_S=!1;function d2(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;_S||Xc==null||Xc!==dm(r)||(r=Xc,"selectionStart"in r&&AT(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),_d&&Ud(_d,r)||(_d=r,r=wm(yS,"onSelect"),0<r.length&&(e=new xT("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Xc)))}function sg(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Qc={animationend:sg("Animation","AnimationEnd"),animationiteration:sg("Animation","AnimationIteration"),animationstart:sg("Animation","AnimationStart"),transitionend:sg("Transition","TransitionEnd")},EE={},eL={};Ea&&(eL=document.createElement("div").style,"AnimationEvent"in window||(delete Qc.animationend.animation,delete Qc.animationiteration.animation,delete Qc.animationstart.animation),"TransitionEvent"in window||delete Qc.transitionend.transition);function Oy(t){if(EE[t])return EE[t];if(!Qc[t])return t;var e=Qc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in eL)return EE[t]=e[n];return t}var tL=Oy("animationend"),nL=Oy("animationiteration"),rL=Oy("animationstart"),iL=Oy("transitionend"),oL=new Map,p2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Du(t,e){oL.set(t,e),Kl(e,[t])}for(var bE=0;bE<p2.length;bE++){var SE=p2[bE],qq=SE.toLowerCase(),Wq=SE[0].toUpperCase()+SE.slice(1);Du(qq,"on"+Wq)}Du(tL,"onAnimationEnd");Du(nL,"onAnimationIteration");Du(rL,"onAnimationStart");Du("dblclick","onDoubleClick");Du("focusin","onFocus");Du("focusout","onBlur");Du(iL,"onTransitionEnd");Nh("onMouseEnter",["mouseout","mouseover"]);Nh("onMouseLeave",["mouseout","mouseover"]);Nh("onPointerEnter",["pointerout","pointerover"]);Nh("onPointerLeave",["pointerout","pointerover"]);Kl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Kl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Kl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Kl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Kl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Kl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Gq=new Set("cancel close invalid load scroll toggle".split(" ").concat(sd));function v2(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,q8(r,e,void 0,t),t.currentTarget=null}function sL(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var a=r.length-1;0<=a;a--){var c=r[a],f=c.instance,v=c.currentTarget;if(c=c.listener,f!==o&&i.isPropagationStopped())break e;v2(i,c,v),o=f}else for(a=0;a<r.length;a++){if(c=r[a],f=c.instance,v=c.currentTarget,c=c.listener,f!==o&&i.isPropagationStopped())break e;v2(i,c,v),o=f}}}if(vm)throw t=pS,vm=!1,pS=null,t}function fn(t,e){var n=e[TS];n===void 0&&(n=e[TS]=new Set);var r=t+"__bubble";n.has(r)||(aL(e,t,2,!1),n.add(r))}function TE(t,e,n){var r=0;e&&(r|=4),aL(n,t,r,e)}var ag="_reactListening"+Math.random().toString(36).slice(2);function Vd(t){if(!t[ag]){t[ag]=!0,pD.forEach(function(n){n!=="selectionchange"&&(Gq.has(n)||TE(n,!1,t),TE(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ag]||(e[ag]=!0,TE("selectionchange",!1,e))}}function aL(t,e,n,r){switch(WD(e)){case 1:var i=oq;break;case 4:i=sq;break;default:i=TT}n=i.bind(null,e,n,t),i=void 0,!dS||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function IE(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var c=r.stateNode.containerInfo;if(c===i||c.nodeType===8&&c.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var f=a.tag;if((f===3||f===4)&&(f=a.stateNode.containerInfo,f===i||f.nodeType===8&&f.parentNode===i))return;a=a.return}for(;c!==null;){if(a=yl(c),a===null)return;if(f=a.tag,f===5||f===6){r=o=a;continue e}c=c.parentNode}}r=r.return}kD(function(){var v=o,y=wT(n),b=[];e:{var E=oL.get(t);if(E!==void 0){var I=xT,L=t;switch(t){case"keypress":if(Bg(n)===0)break e;case"keydown":case"keyup":I=Eq;break;case"focusin":L="focus",I=yE;break;case"focusout":L="blur",I=yE;break;case"beforeblur":case"afterblur":I=yE;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=r2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=lq;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=Tq;break;case tL:case nL:case rL:I=fq;break;case iL:I=xq;break;case"scroll":I=aq;break;case"wheel":I=Nq;break;case"copy":case"cut":case"paste":I=pq;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=o2}var D=(e&4)!==0,te=!D&&t==="scroll",z=D?E!==null?E+"Capture":null:E;D=[];for(var Y=v,K;Y!==null;){K=Y;var ue=K.stateNode;if(K.tag===5&&ue!==null&&(K=ue,z!==null&&(ue=Dd(Y,z),ue!=null&&D.push(Bd(Y,ue,K)))),te)break;Y=Y.return}0<D.length&&(E=new I(E,L,null,n,y),b.push({event:E,listeners:D}))}}if(!(e&7)){e:{if(E=t==="mouseover"||t==="pointerover",I=t==="mouseout"||t==="pointerout",E&&n!==hS&&(L=n.relatedTarget||n.fromElement)&&(yl(L)||L[ba]))break e;if((I||E)&&(E=y.window===y?y:(E=y.ownerDocument)?E.defaultView||E.parentWindow:window,I?(L=n.relatedTarget||n.toElement,I=v,L=L?yl(L):null,L!==null&&(te=Yl(L),L!==te||L.tag!==5&&L.tag!==6)&&(L=null)):(I=null,L=v),I!==L)){if(D=r2,ue="onMouseLeave",z="onMouseEnter",Y="mouse",(t==="pointerout"||t==="pointerover")&&(D=o2,ue="onPointerLeave",z="onPointerEnter",Y="pointer"),te=I==null?E:Jc(I),K=L==null?E:Jc(L),E=new D(ue,Y+"leave",I,n,y),E.target=te,E.relatedTarget=K,ue=null,yl(y)===v&&(D=new D(z,Y+"enter",L,n,y),D.target=K,D.relatedTarget=te,ue=D),te=ue,I&&L)t:{for(D=I,z=L,Y=0,K=D;K;K=Nc(K))Y++;for(K=0,ue=z;ue;ue=Nc(ue))K++;for(;0<Y-K;)D=Nc(D),Y--;for(;0<K-Y;)z=Nc(z),K--;for(;Y--;){if(D===z||z!==null&&D===z.alternate)break t;D=Nc(D),z=Nc(z)}D=null}else D=null;I!==null&&g2(b,E,I,D,!1),L!==null&&te!==null&&g2(b,te,L,D,!0)}}e:{if(E=v?Jc(v):window,I=E.nodeName&&E.nodeName.toLowerCase(),I==="select"||I==="input"&&E.type==="file")var oe=Lq;else if(u2(E))if(XD)oe=Uq;else{oe=Fq;var fe=Mq}else(I=E.nodeName)&&I.toLowerCase()==="input"&&(E.type==="checkbox"||E.type==="radio")&&(oe=jq);if(oe&&(oe=oe(t,v))){YD(b,oe,n,y);break e}fe&&fe(t,E,v),t==="focusout"&&(fe=E._wrapperState)&&fe.controlled&&E.type==="number"&&sS(E,"number",E.value)}switch(fe=v?Jc(v):window,t){case"focusin":(u2(fe)||fe.contentEditable==="true")&&(Xc=fe,yS=v,_d=null);break;case"focusout":_d=yS=Xc=null;break;case"mousedown":_S=!0;break;case"contextmenu":case"mouseup":case"dragend":_S=!1,d2(b,n,y);break;case"selectionchange":if(zq)break;case"keydown":case"keyup":d2(b,n,y)}var me;if(NT)e:{switch(t){case"compositionstart":var he="onCompositionStart";break e;case"compositionend":he="onCompositionEnd";break e;case"compositionupdate":he="onCompositionUpdate";break e}he=void 0}else Yc?HD(t,n)&&(he="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(he="onCompositionStart");he&&($D&&n.locale!=="ko"&&(Yc||he!=="onCompositionStart"?he==="onCompositionEnd"&&Yc&&(me=GD()):(lu=y,IT="value"in lu?lu.value:lu.textContent,Yc=!0)),fe=wm(v,he),0<fe.length&&(he=new i2(he,t,null,n,y),b.push({event:he,listeners:fe}),me?he.data=me:(me=KD(n),me!==null&&(he.data=me)))),(me=kq?Rq(t,n):Oq(t,n))&&(v=wm(v,"onBeforeInput"),0<v.length&&(y=new i2("onBeforeInput","beforeinput",null,n,y),b.push({event:y,listeners:v}),y.data=me))}sL(b,e)})}function Bd(t,e,n){return{instance:t,listener:e,currentTarget:n}}function wm(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Dd(t,n),o!=null&&r.unshift(Bd(t,o,i)),o=Dd(t,e),o!=null&&r.push(Bd(t,o,i))),t=t.return}return r}function Nc(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function g2(t,e,n,r,i){for(var o=e._reactName,a=[];n!==null&&n!==r;){var c=n,f=c.alternate,v=c.stateNode;if(f!==null&&f===r)break;c.tag===5&&v!==null&&(c=v,i?(f=Dd(n,o),f!=null&&a.unshift(Bd(n,f,c))):i||(f=Dd(n,o),f!=null&&a.push(Bd(n,f,c)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var $q=/\r\n?/g,Hq=/\u0000|\uFFFD/g;function m2(t){return(typeof t=="string"?t:""+t).replace($q,`
`).replace(Hq,"")}function ug(t,e,n){if(e=m2(e),m2(t)!==e&&n)throw Error(Re(425))}function Em(){}var wS=null,ES=null;function bS(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var SS=typeof setTimeout=="function"?setTimeout:void 0,Kq=typeof clearTimeout=="function"?clearTimeout:void 0,y2=typeof Promise=="function"?Promise:void 0,Yq=typeof queueMicrotask=="function"?queueMicrotask:typeof y2<"u"?function(t){return y2.resolve(null).then(t).catch(Xq)}:SS;function Xq(t){setTimeout(function(){throw t})}function xE(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Fd(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Fd(e)}function gu(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function _2(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Hh=Math.random().toString(36).slice(2),Is="__reactFiber$"+Hh,zd="__reactProps$"+Hh,ba="__reactContainer$"+Hh,TS="__reactEvents$"+Hh,Qq="__reactListeners$"+Hh,Jq="__reactHandles$"+Hh;function yl(t){var e=t[Is];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ba]||n[Is]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=_2(t);t!==null;){if(n=t[Is])return n;t=_2(t)}return e}t=n,n=t.parentNode}return null}function Cp(t){return t=t[Is]||t[ba],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Jc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Re(33))}function Py(t){return t[zd]||null}var IS=[],Zc=-1;function Lu(t){return{current:t}}function vn(t){0>Zc||(t.current=IS[Zc],IS[Zc]=null,Zc--)}function un(t,e){Zc++,IS[Zc]=t.current,t.current=e}var Nu={},ei=Lu(Nu),Di=Lu(!1),Rl=Nu;function Ah(t,e){var n=t.type.contextTypes;if(!n)return Nu;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Li(t){return t=t.childContextTypes,t!=null}function bm(){vn(Di),vn(ei)}function w2(t,e,n){if(ei.current!==Nu)throw Error(Re(168));un(ei,e),un(Di,n)}function uL(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Re(108,M8(t)||"Unknown",i));return Rn({},n,r)}function Sm(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Nu,Rl=ei.current,un(ei,t),un(Di,Di.current),!0}function E2(t,e,n){var r=t.stateNode;if(!r)throw Error(Re(169));n?(t=uL(t,e,Rl),r.__reactInternalMemoizedMergedChildContext=t,vn(Di),vn(ei),un(ei,t)):vn(Di),un(Di,n)}var ia=null,Dy=!1,CE=!1;function lL(t){ia===null?ia=[t]:ia.push(t)}function Zq(t){Dy=!0,lL(t)}function Mu(){if(!CE&&ia!==null){CE=!0;var t=0,e=Zt;try{var n=ia;for(Zt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ia=null,Dy=!1}catch(i){throw ia!==null&&(ia=ia.slice(t+1)),DD(ET,Mu),i}finally{Zt=e,CE=!1}}return null}var eh=[],th=0,Tm=null,Im=0,mo=[],yo=0,Ol=null,ha=1,fa="";function hl(t,e){eh[th++]=Im,eh[th++]=Tm,Tm=t,Im=e}function cL(t,e,n){mo[yo++]=ha,mo[yo++]=fa,mo[yo++]=Ol,Ol=t;var r=ha;t=fa;var i=32-is(r)-1;r&=~(1<<i),n+=1;var o=32-is(e)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,ha=1<<32-is(e)+i|n<<i|r,fa=o+t}else ha=1<<o|n<<i|r,fa=t}function kT(t){t.return!==null&&(hl(t,1),cL(t,1,0))}function RT(t){for(;t===Tm;)Tm=eh[--th],eh[th]=null,Im=eh[--th],eh[th]=null;for(;t===Ol;)Ol=mo[--yo],mo[yo]=null,fa=mo[--yo],mo[yo]=null,ha=mo[--yo],mo[yo]=null}var Zi=null,Yi=null,_n=!1,Ho=null;function hL(t,e){var n=bo(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function b2(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Zi=t,Yi=gu(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Zi=t,Yi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ol!==null?{id:ha,overflow:fa}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=bo(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Zi=t,Yi=null,!0):!1;default:return!1}}function xS(t){return(t.mode&1)!==0&&(t.flags&128)===0}function CS(t){if(_n){var e=Yi;if(e){var n=e;if(!b2(t,e)){if(xS(t))throw Error(Re(418));e=gu(n.nextSibling);var r=Zi;e&&b2(t,e)?hL(r,n):(t.flags=t.flags&-4097|2,_n=!1,Zi=t)}}else{if(xS(t))throw Error(Re(418));t.flags=t.flags&-4097|2,_n=!1,Zi=t}}}function S2(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Zi=t}function lg(t){if(t!==Zi)return!1;if(!_n)return S2(t),_n=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!bS(t.type,t.memoizedProps)),e&&(e=Yi)){if(xS(t))throw fL(),Error(Re(418));for(;e;)hL(t,e),e=gu(e.nextSibling)}if(S2(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Re(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Yi=gu(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Yi=null}}else Yi=Zi?gu(t.stateNode.nextSibling):null;return!0}function fL(){for(var t=Yi;t;)t=gu(t.nextSibling)}function kh(){Yi=Zi=null,_n=!1}function OT(t){Ho===null?Ho=[t]:Ho.push(t)}var eW=Oa.ReactCurrentBatchConfig;function qo(t,e){if(t&&t.defaultProps){e=Rn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var xm=Lu(null),Cm=null,nh=null,PT=null;function DT(){PT=nh=Cm=null}function LT(t){var e=xm.current;vn(xm),t._currentValue=e}function NS(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function vh(t,e){Cm=t,PT=nh=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ki=!0),t.firstContext=null)}function xo(t){var e=t._currentValue;if(PT!==t)if(t={context:t,memoizedValue:e,next:null},nh===null){if(Cm===null)throw Error(Re(308));nh=t,Cm.dependencies={lanes:0,firstContext:t}}else nh=nh.next=t;return e}var _l=null;function MT(t){_l===null?_l=[t]:_l.push(t)}function dL(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,MT(e)):(n.next=i.next,i.next=n),e.interleaved=n,Sa(t,r)}function Sa(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Za=!1;function FT(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function pL(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function wa(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function mu(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Kt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Sa(t,n)}return i=r.interleaved,i===null?(e.next=e,MT(r)):(e.next=i.next,i.next=e),r.interleaved=e,Sa(t,n)}function zg(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,bT(t,n)}}function T2(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Nm(t,e,n,r){var i=t.updateQueue;Za=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,c=i.shared.pending;if(c!==null){i.shared.pending=null;var f=c,v=f.next;f.next=null,a===null?o=v:a.next=v,a=f;var y=t.alternate;y!==null&&(y=y.updateQueue,c=y.lastBaseUpdate,c!==a&&(c===null?y.firstBaseUpdate=v:c.next=v,y.lastBaseUpdate=f))}if(o!==null){var b=i.baseState;a=0,y=v=f=null,c=o;do{var E=c.lane,I=c.eventTime;if((r&E)===E){y!==null&&(y=y.next={eventTime:I,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var L=t,D=c;switch(E=e,I=n,D.tag){case 1:if(L=D.payload,typeof L=="function"){b=L.call(I,b,E);break e}b=L;break e;case 3:L.flags=L.flags&-65537|128;case 0:if(L=D.payload,E=typeof L=="function"?L.call(I,b,E):L,E==null)break e;b=Rn({},b,E);break e;case 2:Za=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,E=i.effects,E===null?i.effects=[c]:E.push(c))}else I={eventTime:I,lane:E,tag:c.tag,payload:c.payload,callback:c.callback,next:null},y===null?(v=y=I,f=b):y=y.next=I,a|=E;if(c=c.next,c===null){if(c=i.shared.pending,c===null)break;E=c,c=E.next,E.next=null,i.lastBaseUpdate=E,i.shared.pending=null}}while(!0);if(y===null&&(f=b),i.baseState=f,i.firstBaseUpdate=v,i.lastBaseUpdate=y,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Dl|=a,t.lanes=a,t.memoizedState=b}}function I2(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Re(191,i));i.call(r)}}}var vL=new dD.Component().refs;function AS(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Rn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ly={isMounted:function(t){return(t=t._reactInternals)?Yl(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=_i(),i=_u(t),o=wa(r,i);o.payload=e,n!=null&&(o.callback=n),e=mu(t,o,i),e!==null&&(os(e,t,i,r),zg(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=_i(),i=_u(t),o=wa(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=mu(t,o,i),e!==null&&(os(e,t,i,r),zg(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=_i(),r=_u(t),i=wa(n,r);i.tag=2,e!=null&&(i.callback=e),e=mu(t,i,r),e!==null&&(os(e,t,r,n),zg(e,t,r))}};function x2(t,e,n,r,i,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,a):e.prototype&&e.prototype.isPureReactComponent?!Ud(n,r)||!Ud(i,o):!0}function gL(t,e,n){var r=!1,i=Nu,o=e.contextType;return typeof o=="object"&&o!==null?o=xo(o):(i=Li(e)?Rl:ei.current,r=e.contextTypes,o=(r=r!=null)?Ah(t,i):Nu),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ly,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function C2(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ly.enqueueReplaceState(e,e.state,null)}function kS(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=vL,FT(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=xo(o):(o=Li(e)?Rl:ei.current,i.context=Ah(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(AS(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Ly.enqueueReplaceState(i,i.state,null),Nm(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Wf(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Re(309));var r=n.stateNode}if(!r)throw Error(Re(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var c=i.refs;c===vL&&(c=i.refs={}),a===null?delete c[o]:c[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(Re(284));if(!n._owner)throw Error(Re(290,t))}return t}function cg(t,e){throw t=Object.prototype.toString.call(e),Error(Re(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function N2(t){var e=t._init;return e(t._payload)}function mL(t){function e(z,Y){if(t){var K=z.deletions;K===null?(z.deletions=[Y],z.flags|=16):K.push(Y)}}function n(z,Y){if(!t)return null;for(;Y!==null;)e(z,Y),Y=Y.sibling;return null}function r(z,Y){for(z=new Map;Y!==null;)Y.key!==null?z.set(Y.key,Y):z.set(Y.index,Y),Y=Y.sibling;return z}function i(z,Y){return z=wu(z,Y),z.index=0,z.sibling=null,z}function o(z,Y,K){return z.index=K,t?(K=z.alternate,K!==null?(K=K.index,K<Y?(z.flags|=2,Y):K):(z.flags|=2,Y)):(z.flags|=1048576,Y)}function a(z){return t&&z.alternate===null&&(z.flags|=2),z}function c(z,Y,K,ue){return Y===null||Y.tag!==6?(Y=DE(K,z.mode,ue),Y.return=z,Y):(Y=i(Y,K),Y.return=z,Y)}function f(z,Y,K,ue){var oe=K.type;return oe===Kc?y(z,Y,K.props.children,ue,K.key):Y!==null&&(Y.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===Ja&&N2(oe)===Y.type)?(ue=i(Y,K.props),ue.ref=Wf(z,Y,K),ue.return=z,ue):(ue=Kg(K.type,K.key,K.props,null,z.mode,ue),ue.ref=Wf(z,Y,K),ue.return=z,ue)}function v(z,Y,K,ue){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==K.containerInfo||Y.stateNode.implementation!==K.implementation?(Y=LE(K,z.mode,ue),Y.return=z,Y):(Y=i(Y,K.children||[]),Y.return=z,Y)}function y(z,Y,K,ue,oe){return Y===null||Y.tag!==7?(Y=Il(K,z.mode,ue,oe),Y.return=z,Y):(Y=i(Y,K),Y.return=z,Y)}function b(z,Y,K){if(typeof Y=="string"&&Y!==""||typeof Y=="number")return Y=DE(""+Y,z.mode,K),Y.return=z,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case Zv:return K=Kg(Y.type,Y.key,Y.props,null,z.mode,K),K.ref=Wf(z,null,Y),K.return=z,K;case Hc:return Y=LE(Y,z.mode,K),Y.return=z,Y;case Ja:var ue=Y._init;return b(z,ue(Y._payload),K)}if(id(Y)||Uf(Y))return Y=Il(Y,z.mode,K,null),Y.return=z,Y;cg(z,Y)}return null}function E(z,Y,K,ue){var oe=Y!==null?Y.key:null;if(typeof K=="string"&&K!==""||typeof K=="number")return oe!==null?null:c(z,Y,""+K,ue);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case Zv:return K.key===oe?f(z,Y,K,ue):null;case Hc:return K.key===oe?v(z,Y,K,ue):null;case Ja:return oe=K._init,E(z,Y,oe(K._payload),ue)}if(id(K)||Uf(K))return oe!==null?null:y(z,Y,K,ue,null);cg(z,K)}return null}function I(z,Y,K,ue,oe){if(typeof ue=="string"&&ue!==""||typeof ue=="number")return z=z.get(K)||null,c(Y,z,""+ue,oe);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case Zv:return z=z.get(ue.key===null?K:ue.key)||null,f(Y,z,ue,oe);case Hc:return z=z.get(ue.key===null?K:ue.key)||null,v(Y,z,ue,oe);case Ja:var fe=ue._init;return I(z,Y,K,fe(ue._payload),oe)}if(id(ue)||Uf(ue))return z=z.get(K)||null,y(Y,z,ue,oe,null);cg(Y,ue)}return null}function L(z,Y,K,ue){for(var oe=null,fe=null,me=Y,he=Y=0,Z=null;me!==null&&he<K.length;he++){me.index>he?(Z=me,me=null):Z=me.sibling;var be=E(z,me,K[he],ue);if(be===null){me===null&&(me=Z);break}t&&me&&be.alternate===null&&e(z,me),Y=o(be,Y,he),fe===null?oe=be:fe.sibling=be,fe=be,me=Z}if(he===K.length)return n(z,me),_n&&hl(z,he),oe;if(me===null){for(;he<K.length;he++)me=b(z,K[he],ue),me!==null&&(Y=o(me,Y,he),fe===null?oe=me:fe.sibling=me,fe=me);return _n&&hl(z,he),oe}for(me=r(z,me);he<K.length;he++)Z=I(me,z,he,K[he],ue),Z!==null&&(t&&Z.alternate!==null&&me.delete(Z.key===null?he:Z.key),Y=o(Z,Y,he),fe===null?oe=Z:fe.sibling=Z,fe=Z);return t&&me.forEach(function(Ue){return e(z,Ue)}),_n&&hl(z,he),oe}function D(z,Y,K,ue){var oe=Uf(K);if(typeof oe!="function")throw Error(Re(150));if(K=oe.call(K),K==null)throw Error(Re(151));for(var fe=oe=null,me=Y,he=Y=0,Z=null,be=K.next();me!==null&&!be.done;he++,be=K.next()){me.index>he?(Z=me,me=null):Z=me.sibling;var Ue=E(z,me,be.value,ue);if(Ue===null){me===null&&(me=Z);break}t&&me&&Ue.alternate===null&&e(z,me),Y=o(Ue,Y,he),fe===null?oe=Ue:fe.sibling=Ue,fe=Ue,me=Z}if(be.done)return n(z,me),_n&&hl(z,he),oe;if(me===null){for(;!be.done;he++,be=K.next())be=b(z,be.value,ue),be!==null&&(Y=o(be,Y,he),fe===null?oe=be:fe.sibling=be,fe=be);return _n&&hl(z,he),oe}for(me=r(z,me);!be.done;he++,be=K.next())be=I(me,z,he,be.value,ue),be!==null&&(t&&be.alternate!==null&&me.delete(be.key===null?he:be.key),Y=o(be,Y,he),fe===null?oe=be:fe.sibling=be,fe=be);return t&&me.forEach(function(Ge){return e(z,Ge)}),_n&&hl(z,he),oe}function te(z,Y,K,ue){if(typeof K=="object"&&K!==null&&K.type===Kc&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case Zv:e:{for(var oe=K.key,fe=Y;fe!==null;){if(fe.key===oe){if(oe=K.type,oe===Kc){if(fe.tag===7){n(z,fe.sibling),Y=i(fe,K.props.children),Y.return=z,z=Y;break e}}else if(fe.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===Ja&&N2(oe)===fe.type){n(z,fe.sibling),Y=i(fe,K.props),Y.ref=Wf(z,fe,K),Y.return=z,z=Y;break e}n(z,fe);break}else e(z,fe);fe=fe.sibling}K.type===Kc?(Y=Il(K.props.children,z.mode,ue,K.key),Y.return=z,z=Y):(ue=Kg(K.type,K.key,K.props,null,z.mode,ue),ue.ref=Wf(z,Y,K),ue.return=z,z=ue)}return a(z);case Hc:e:{for(fe=K.key;Y!==null;){if(Y.key===fe)if(Y.tag===4&&Y.stateNode.containerInfo===K.containerInfo&&Y.stateNode.implementation===K.implementation){n(z,Y.sibling),Y=i(Y,K.children||[]),Y.return=z,z=Y;break e}else{n(z,Y);break}else e(z,Y);Y=Y.sibling}Y=LE(K,z.mode,ue),Y.return=z,z=Y}return a(z);case Ja:return fe=K._init,te(z,Y,fe(K._payload),ue)}if(id(K))return L(z,Y,K,ue);if(Uf(K))return D(z,Y,K,ue);cg(z,K)}return typeof K=="string"&&K!==""||typeof K=="number"?(K=""+K,Y!==null&&Y.tag===6?(n(z,Y.sibling),Y=i(Y,K),Y.return=z,z=Y):(n(z,Y),Y=DE(K,z.mode,ue),Y.return=z,z=Y),a(z)):n(z,Y)}return te}var Rh=mL(!0),yL=mL(!1),Np={},Os=Lu(Np),qd=Lu(Np),Wd=Lu(Np);function wl(t){if(t===Np)throw Error(Re(174));return t}function jT(t,e){switch(un(Wd,e),un(qd,t),un(Os,Np),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:uS(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=uS(e,t)}vn(Os),un(Os,e)}function Oh(){vn(Os),vn(qd),vn(Wd)}function _L(t){wl(Wd.current);var e=wl(Os.current),n=uS(e,t.type);e!==n&&(un(qd,t),un(Os,n))}function UT(t){qd.current===t&&(vn(Os),vn(qd))}var Nn=Lu(0);function Am(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var NE=[];function VT(){for(var t=0;t<NE.length;t++)NE[t]._workInProgressVersionPrimary=null;NE.length=0}var qg=Oa.ReactCurrentDispatcher,AE=Oa.ReactCurrentBatchConfig,Pl=0,An=null,pr=null,Sr=null,km=!1,wd=!1,Gd=0,tW=0;function Wr(){throw Error(Re(321))}function BT(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!us(t[n],e[n]))return!1;return!0}function zT(t,e,n,r,i,o){if(Pl=o,An=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,qg.current=t===null||t.memoizedState===null?oW:sW,t=n(r,i),wd){o=0;do{if(wd=!1,Gd=0,25<=o)throw Error(Re(301));o+=1,Sr=pr=null,e.updateQueue=null,qg.current=aW,t=n(r,i)}while(wd)}if(qg.current=Rm,e=pr!==null&&pr.next!==null,Pl=0,Sr=pr=An=null,km=!1,e)throw Error(Re(300));return t}function qT(){var t=Gd!==0;return Gd=0,t}function bs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Sr===null?An.memoizedState=Sr=t:Sr=Sr.next=t,Sr}function Co(){if(pr===null){var t=An.alternate;t=t!==null?t.memoizedState:null}else t=pr.next;var e=Sr===null?An.memoizedState:Sr.next;if(e!==null)Sr=e,pr=t;else{if(t===null)throw Error(Re(310));pr=t,t={memoizedState:pr.memoizedState,baseState:pr.baseState,baseQueue:pr.baseQueue,queue:pr.queue,next:null},Sr===null?An.memoizedState=Sr=t:Sr=Sr.next=t}return Sr}function $d(t,e){return typeof e=="function"?e(t):e}function kE(t){var e=Co(),n=e.queue;if(n===null)throw Error(Re(311));n.lastRenderedReducer=t;var r=pr,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var c=a=null,f=null,v=o;do{var y=v.lane;if((Pl&y)===y)f!==null&&(f=f.next={lane:0,action:v.action,hasEagerState:v.hasEagerState,eagerState:v.eagerState,next:null}),r=v.hasEagerState?v.eagerState:t(r,v.action);else{var b={lane:y,action:v.action,hasEagerState:v.hasEagerState,eagerState:v.eagerState,next:null};f===null?(c=f=b,a=r):f=f.next=b,An.lanes|=y,Dl|=y}v=v.next}while(v!==null&&v!==o);f===null?a=r:f.next=c,us(r,e.memoizedState)||(ki=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=f,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,An.lanes|=o,Dl|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function RE(t){var e=Co(),n=e.queue;if(n===null)throw Error(Re(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do o=t(o,a.action),a=a.next;while(a!==i);us(o,e.memoizedState)||(ki=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function wL(){}function EL(t,e){var n=An,r=Co(),i=e(),o=!us(r.memoizedState,i);if(o&&(r.memoizedState=i,ki=!0),r=r.queue,WT(TL.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||Sr!==null&&Sr.memoizedState.tag&1){if(n.flags|=2048,Hd(9,SL.bind(null,n,r,i,e),void 0,null),Nr===null)throw Error(Re(349));Pl&30||bL(n,e,i)}return i}function bL(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=An.updateQueue,e===null?(e={lastEffect:null,stores:null},An.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function SL(t,e,n,r){e.value=n,e.getSnapshot=r,IL(e)&&xL(t)}function TL(t,e,n){return n(function(){IL(e)&&xL(t)})}function IL(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!us(t,n)}catch{return!0}}function xL(t){var e=Sa(t,1);e!==null&&os(e,t,1,-1)}function A2(t){var e=bs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$d,lastRenderedState:t},e.queue=t,t=t.dispatch=iW.bind(null,An,t),[e.memoizedState,t]}function Hd(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=An.updateQueue,e===null?(e={lastEffect:null,stores:null},An.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function CL(){return Co().memoizedState}function Wg(t,e,n,r){var i=bs();An.flags|=t,i.memoizedState=Hd(1|e,n,void 0,r===void 0?null:r)}function My(t,e,n,r){var i=Co();r=r===void 0?null:r;var o=void 0;if(pr!==null){var a=pr.memoizedState;if(o=a.destroy,r!==null&&BT(r,a.deps)){i.memoizedState=Hd(e,n,o,r);return}}An.flags|=t,i.memoizedState=Hd(1|e,n,o,r)}function k2(t,e){return Wg(8390656,8,t,e)}function WT(t,e){return My(2048,8,t,e)}function NL(t,e){return My(4,2,t,e)}function AL(t,e){return My(4,4,t,e)}function kL(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function RL(t,e,n){return n=n!=null?n.concat([t]):null,My(4,4,kL.bind(null,e,t),n)}function GT(){}function OL(t,e){var n=Co();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&BT(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function PL(t,e){var n=Co();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&BT(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function DL(t,e,n){return Pl&21?(us(n,e)||(n=FD(),An.lanes|=n,Dl|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ki=!0),t.memoizedState=n)}function nW(t,e){var n=Zt;Zt=n!==0&&4>n?n:4,t(!0);var r=AE.transition;AE.transition={};try{t(!1),e()}finally{Zt=n,AE.transition=r}}function LL(){return Co().memoizedState}function rW(t,e,n){var r=_u(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ML(t))FL(e,n);else if(n=dL(t,e,n,r),n!==null){var i=_i();os(n,t,r,i),jL(n,e,r)}}function iW(t,e,n){var r=_u(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ML(t))FL(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,c=o(a,n);if(i.hasEagerState=!0,i.eagerState=c,us(c,a)){var f=e.interleaved;f===null?(i.next=i,MT(e)):(i.next=f.next,f.next=i),e.interleaved=i;return}}catch{}finally{}n=dL(t,e,i,r),n!==null&&(i=_i(),os(n,t,r,i),jL(n,e,r))}}function ML(t){var e=t.alternate;return t===An||e!==null&&e===An}function FL(t,e){wd=km=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function jL(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,bT(t,n)}}var Rm={readContext:xo,useCallback:Wr,useContext:Wr,useEffect:Wr,useImperativeHandle:Wr,useInsertionEffect:Wr,useLayoutEffect:Wr,useMemo:Wr,useReducer:Wr,useRef:Wr,useState:Wr,useDebugValue:Wr,useDeferredValue:Wr,useTransition:Wr,useMutableSource:Wr,useSyncExternalStore:Wr,useId:Wr,unstable_isNewReconciler:!1},oW={readContext:xo,useCallback:function(t,e){return bs().memoizedState=[t,e===void 0?null:e],t},useContext:xo,useEffect:k2,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Wg(4194308,4,kL.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Wg(4194308,4,t,e)},useInsertionEffect:function(t,e){return Wg(4,2,t,e)},useMemo:function(t,e){var n=bs();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=bs();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=rW.bind(null,An,t),[r.memoizedState,t]},useRef:function(t){var e=bs();return t={current:t},e.memoizedState=t},useState:A2,useDebugValue:GT,useDeferredValue:function(t){return bs().memoizedState=t},useTransition:function(){var t=A2(!1),e=t[0];return t=nW.bind(null,t[1]),bs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=An,i=bs();if(_n){if(n===void 0)throw Error(Re(407));n=n()}else{if(n=e(),Nr===null)throw Error(Re(349));Pl&30||bL(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,k2(TL.bind(null,r,o,t),[t]),r.flags|=2048,Hd(9,SL.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=bs(),e=Nr.identifierPrefix;if(_n){var n=fa,r=ha;n=(r&~(1<<32-is(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Gd++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=tW++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},sW={readContext:xo,useCallback:OL,useContext:xo,useEffect:WT,useImperativeHandle:RL,useInsertionEffect:NL,useLayoutEffect:AL,useMemo:PL,useReducer:kE,useRef:CL,useState:function(){return kE($d)},useDebugValue:GT,useDeferredValue:function(t){var e=Co();return DL(e,pr.memoizedState,t)},useTransition:function(){var t=kE($d)[0],e=Co().memoizedState;return[t,e]},useMutableSource:wL,useSyncExternalStore:EL,useId:LL,unstable_isNewReconciler:!1},aW={readContext:xo,useCallback:OL,useContext:xo,useEffect:WT,useImperativeHandle:RL,useInsertionEffect:NL,useLayoutEffect:AL,useMemo:PL,useReducer:RE,useRef:CL,useState:function(){return RE($d)},useDebugValue:GT,useDeferredValue:function(t){var e=Co();return pr===null?e.memoizedState=t:DL(e,pr.memoizedState,t)},useTransition:function(){var t=RE($d)[0],e=Co().memoizedState;return[t,e]},useMutableSource:wL,useSyncExternalStore:EL,useId:LL,unstable_isNewReconciler:!1};function Ph(t,e){try{var n="",r=e;do n+=L8(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function OE(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function RS(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var uW=typeof WeakMap=="function"?WeakMap:Map;function UL(t,e,n){n=wa(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Pm||(Pm=!0,BS=r),RS(t,e)},n}function VL(t,e,n){n=wa(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){RS(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){RS(t,e),typeof r!="function"&&(yu===null?yu=new Set([this]):yu.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function R2(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new uW;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=bW.bind(null,t,e,n),e.then(t,t))}function O2(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function P2(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=wa(-1,1),e.tag=2,mu(n,e,1))),n.lanes|=1),t)}var lW=Oa.ReactCurrentOwner,ki=!1;function di(t,e,n,r){e.child=t===null?yL(e,null,n,r):Rh(e,t.child,n,r)}function D2(t,e,n,r,i){n=n.render;var o=e.ref;return vh(e,i),r=zT(t,e,n,r,o,i),n=qT(),t!==null&&!ki?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ta(t,e,i)):(_n&&n&&kT(e),e.flags|=1,di(t,e,r,i),e.child)}function L2(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!ZT(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,BL(t,e,o,r,i)):(t=Kg(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:Ud,n(a,r)&&t.ref===e.ref)return Ta(t,e,i)}return e.flags|=1,t=wu(o,r),t.ref=e.ref,t.return=e,e.child=t}function BL(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(Ud(o,r)&&t.ref===e.ref)if(ki=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(ki=!0);else return e.lanes=t.lanes,Ta(t,e,i)}return OS(t,e,n,r,i)}function zL(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},un(ih,qi),qi|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,un(ih,qi),qi|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,un(ih,qi),qi|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,un(ih,qi),qi|=r;return di(t,e,i,n),e.child}function qL(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function OS(t,e,n,r,i){var o=Li(n)?Rl:ei.current;return o=Ah(e,o),vh(e,i),n=zT(t,e,n,r,o,i),r=qT(),t!==null&&!ki?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ta(t,e,i)):(_n&&r&&kT(e),e.flags|=1,di(t,e,n,i),e.child)}function M2(t,e,n,r,i){if(Li(n)){var o=!0;Sm(e)}else o=!1;if(vh(e,i),e.stateNode===null)Gg(t,e),gL(e,n,r),kS(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,c=e.memoizedProps;a.props=c;var f=a.context,v=n.contextType;typeof v=="object"&&v!==null?v=xo(v):(v=Li(n)?Rl:ei.current,v=Ah(e,v));var y=n.getDerivedStateFromProps,b=typeof y=="function"||typeof a.getSnapshotBeforeUpdate=="function";b||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==r||f!==v)&&C2(e,a,r,v),Za=!1;var E=e.memoizedState;a.state=E,Nm(e,r,a,i),f=e.memoizedState,c!==r||E!==f||Di.current||Za?(typeof y=="function"&&(AS(e,n,y,r),f=e.memoizedState),(c=Za||x2(e,n,c,r,E,f,v))?(b||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=f),a.props=r,a.state=f,a.context=v,r=c):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,pL(t,e),c=e.memoizedProps,v=e.type===e.elementType?c:qo(e.type,c),a.props=v,b=e.pendingProps,E=a.context,f=n.contextType,typeof f=="object"&&f!==null?f=xo(f):(f=Li(n)?Rl:ei.current,f=Ah(e,f));var I=n.getDerivedStateFromProps;(y=typeof I=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==b||E!==f)&&C2(e,a,r,f),Za=!1,E=e.memoizedState,a.state=E,Nm(e,r,a,i);var L=e.memoizedState;c!==b||E!==L||Di.current||Za?(typeof I=="function"&&(AS(e,n,I,r),L=e.memoizedState),(v=Za||x2(e,n,v,r,E,L,f)||!1)?(y||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,L,f),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,L,f)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&E===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&E===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=L),a.props=r,a.state=L,a.context=f,r=v):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&E===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&E===t.memoizedState||(e.flags|=1024),r=!1)}return PS(t,e,n,r,o,i)}function PS(t,e,n,r,i,o){qL(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&E2(e,n,!1),Ta(t,e,o);r=e.stateNode,lW.current=e;var c=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Rh(e,t.child,null,o),e.child=Rh(e,null,c,o)):di(t,e,c,o),e.memoizedState=r.state,i&&E2(e,n,!0),e.child}function WL(t){var e=t.stateNode;e.pendingContext?w2(t,e.pendingContext,e.pendingContext!==e.context):e.context&&w2(t,e.context,!1),jT(t,e.containerInfo)}function F2(t,e,n,r,i){return kh(),OT(i),e.flags|=256,di(t,e,n,r),e.child}var DS={dehydrated:null,treeContext:null,retryLane:0};function LS(t){return{baseLanes:t,cachePool:null,transitions:null}}function GL(t,e,n){var r=e.pendingProps,i=Nn.current,o=!1,a=(e.flags&128)!==0,c;if((c=a)||(c=t!==null&&t.memoizedState===null?!1:(i&2)!==0),c?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),un(Nn,i&1),t===null)return CS(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,o?(r=e.mode,o=e.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=Uy(a,r,0,null),t=Il(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=LS(n),e.memoizedState=DS,t):$T(e,a));if(i=t.memoizedState,i!==null&&(c=i.dehydrated,c!==null))return cW(t,e,a,r,c,i,n);if(o){o=r.fallback,a=e.mode,i=t.child,c=i.sibling;var f={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=f,e.deletions=null):(r=wu(i,f),r.subtreeFlags=i.subtreeFlags&14680064),c!==null?o=wu(c,o):(o=Il(o,a,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,a=t.child.memoizedState,a=a===null?LS(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=DS,r}return o=t.child,t=o.sibling,r=wu(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function $T(t,e){return e=Uy({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function hg(t,e,n,r){return r!==null&&OT(r),Rh(e,t.child,null,n),t=$T(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function cW(t,e,n,r,i,o,a){if(n)return e.flags&256?(e.flags&=-257,r=OE(Error(Re(422))),hg(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=Uy({mode:"visible",children:r.children},i,0,null),o=Il(o,i,a,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Rh(e,t.child,null,a),e.child.memoizedState=LS(a),e.memoizedState=DS,o);if(!(e.mode&1))return hg(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var c=r.dgst;return r=c,o=Error(Re(419)),r=OE(o,r,void 0),hg(t,e,a,r)}if(c=(a&t.childLanes)!==0,ki||c){if(r=Nr,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Sa(t,i),os(r,t,i,-1))}return JT(),r=OE(Error(Re(421))),hg(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=SW.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Yi=gu(i.nextSibling),Zi=e,_n=!0,Ho=null,t!==null&&(mo[yo++]=ha,mo[yo++]=fa,mo[yo++]=Ol,ha=t.id,fa=t.overflow,Ol=e),e=$T(e,r.children),e.flags|=4096,e)}function j2(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),NS(t.return,e,n)}function PE(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function $L(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(di(t,e,r.children,n),r=Nn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&j2(t,n,e);else if(t.tag===19)j2(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(un(Nn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Am(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),PE(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Am(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}PE(e,!0,n,null,o);break;case"together":PE(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Gg(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ta(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Dl|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Re(153));if(e.child!==null){for(t=e.child,n=wu(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=wu(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function hW(t,e,n){switch(e.tag){case 3:WL(e),kh();break;case 5:_L(e);break;case 1:Li(e.type)&&Sm(e);break;case 4:jT(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;un(xm,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(un(Nn,Nn.current&1),e.flags|=128,null):n&e.child.childLanes?GL(t,e,n):(un(Nn,Nn.current&1),t=Ta(t,e,n),t!==null?t.sibling:null);un(Nn,Nn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return $L(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),un(Nn,Nn.current),r)break;return null;case 22:case 23:return e.lanes=0,zL(t,e,n)}return Ta(t,e,n)}var HL,MS,KL,YL;HL=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};MS=function(){};KL=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,wl(Os.current);var o=null;switch(n){case"input":i=iS(t,i),r=iS(t,r),o=[];break;case"select":i=Rn({},i,{value:void 0}),r=Rn({},r,{value:void 0}),o=[];break;case"textarea":i=aS(t,i),r=aS(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Em)}lS(n,r);var a;n=null;for(v in i)if(!r.hasOwnProperty(v)&&i.hasOwnProperty(v)&&i[v]!=null)if(v==="style"){var c=i[v];for(a in c)c.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else v!=="dangerouslySetInnerHTML"&&v!=="children"&&v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(Od.hasOwnProperty(v)?o||(o=[]):(o=o||[]).push(v,null));for(v in r){var f=r[v];if(c=i!=null?i[v]:void 0,r.hasOwnProperty(v)&&f!==c&&(f!=null||c!=null))if(v==="style")if(c){for(a in c)!c.hasOwnProperty(a)||f&&f.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in f)f.hasOwnProperty(a)&&c[a]!==f[a]&&(n||(n={}),n[a]=f[a])}else n||(o||(o=[]),o.push(v,n)),n=f;else v==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,c=c?c.__html:void 0,f!=null&&c!==f&&(o=o||[]).push(v,f)):v==="children"?typeof f!="string"&&typeof f!="number"||(o=o||[]).push(v,""+f):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&(Od.hasOwnProperty(v)?(f!=null&&v==="onScroll"&&fn("scroll",t),o||c===f||(o=[])):(o=o||[]).push(v,f))}n&&(o=o||[]).push("style",n);var v=o;(e.updateQueue=v)&&(e.flags|=4)}};YL=function(t,e,n,r){n!==r&&(e.flags|=4)};function Gf(t,e){if(!_n)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Gr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function fW(t,e,n){var r=e.pendingProps;switch(RT(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gr(e),null;case 1:return Li(e.type)&&bm(),Gr(e),null;case 3:return r=e.stateNode,Oh(),vn(Di),vn(ei),VT(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(lg(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ho!==null&&(WS(Ho),Ho=null))),MS(t,e),Gr(e),null;case 5:UT(e);var i=wl(Wd.current);if(n=e.type,t!==null&&e.stateNode!=null)KL(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Re(166));return Gr(e),null}if(t=wl(Os.current),lg(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[Is]=e,r[zd]=o,t=(e.mode&1)!==0,n){case"dialog":fn("cancel",r),fn("close",r);break;case"iframe":case"object":case"embed":fn("load",r);break;case"video":case"audio":for(i=0;i<sd.length;i++)fn(sd[i],r);break;case"source":fn("error",r);break;case"img":case"image":case"link":fn("error",r),fn("load",r);break;case"details":fn("toggle",r);break;case"input":Hk(r,o),fn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},fn("invalid",r);break;case"textarea":Yk(r,o),fn("invalid",r)}lS(n,o),i=null;for(var a in o)if(o.hasOwnProperty(a)){var c=o[a];a==="children"?typeof c=="string"?r.textContent!==c&&(o.suppressHydrationWarning!==!0&&ug(r.textContent,c,t),i=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(o.suppressHydrationWarning!==!0&&ug(r.textContent,c,t),i=["children",""+c]):Od.hasOwnProperty(a)&&c!=null&&a==="onScroll"&&fn("scroll",r)}switch(n){case"input":eg(r),Kk(r,o,!0);break;case"textarea":eg(r),Xk(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Em)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=bD(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Is]=e,t[zd]=r,HL(t,e,!1,!1),e.stateNode=t;e:{switch(a=cS(n,r),n){case"dialog":fn("cancel",t),fn("close",t),i=r;break;case"iframe":case"object":case"embed":fn("load",t),i=r;break;case"video":case"audio":for(i=0;i<sd.length;i++)fn(sd[i],t);i=r;break;case"source":fn("error",t),i=r;break;case"img":case"image":case"link":fn("error",t),fn("load",t),i=r;break;case"details":fn("toggle",t),i=r;break;case"input":Hk(t,r),i=iS(t,r),fn("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Rn({},r,{value:void 0}),fn("invalid",t);break;case"textarea":Yk(t,r),i=aS(t,r),fn("invalid",t);break;default:i=r}lS(n,i),c=i;for(o in c)if(c.hasOwnProperty(o)){var f=c[o];o==="style"?ID(t,f):o==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,f!=null&&SD(t,f)):o==="children"?typeof f=="string"?(n!=="textarea"||f!=="")&&Pd(t,f):typeof f=="number"&&Pd(t,""+f):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Od.hasOwnProperty(o)?f!=null&&o==="onScroll"&&fn("scroll",t):f!=null&&gT(t,o,f,a))}switch(n){case"input":eg(t),Kk(t,r,!1);break;case"textarea":eg(t),Xk(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Cu(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?hh(t,!!r.multiple,o,!1):r.defaultValue!=null&&hh(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Em)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Gr(e),null;case 6:if(t&&e.stateNode!=null)YL(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Re(166));if(n=wl(Wd.current),wl(Os.current),lg(e)){if(r=e.stateNode,n=e.memoizedProps,r[Is]=e,(o=r.nodeValue!==n)&&(t=Zi,t!==null))switch(t.tag){case 3:ug(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ug(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Is]=e,e.stateNode=r}return Gr(e),null;case 13:if(vn(Nn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(_n&&Yi!==null&&e.mode&1&&!(e.flags&128))fL(),kh(),e.flags|=98560,o=!1;else if(o=lg(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(Re(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Re(317));o[Is]=e}else kh(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Gr(e),o=!1}else Ho!==null&&(WS(Ho),Ho=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Nn.current&1?gr===0&&(gr=3):JT())),e.updateQueue!==null&&(e.flags|=4),Gr(e),null);case 4:return Oh(),MS(t,e),t===null&&Vd(e.stateNode.containerInfo),Gr(e),null;case 10:return LT(e.type._context),Gr(e),null;case 17:return Li(e.type)&&bm(),Gr(e),null;case 19:if(vn(Nn),o=e.memoizedState,o===null)return Gr(e),null;if(r=(e.flags&128)!==0,a=o.rendering,a===null)if(r)Gf(o,!1);else{if(gr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Am(t),a!==null){for(e.flags|=128,Gf(o,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return un(Nn,Nn.current&1|2),e.child}t=t.sibling}o.tail!==null&&Hn()>Dh&&(e.flags|=128,r=!0,Gf(o,!1),e.lanes=4194304)}else{if(!r)if(t=Am(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Gf(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!_n)return Gr(e),null}else 2*Hn()-o.renderingStartTime>Dh&&n!==1073741824&&(e.flags|=128,r=!0,Gf(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Hn(),e.sibling=null,n=Nn.current,un(Nn,r?n&1|2:n&1),e):(Gr(e),null);case 22:case 23:return QT(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?qi&1073741824&&(Gr(e),e.subtreeFlags&6&&(e.flags|=8192)):Gr(e),null;case 24:return null;case 25:return null}throw Error(Re(156,e.tag))}function dW(t,e){switch(RT(e),e.tag){case 1:return Li(e.type)&&bm(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Oh(),vn(Di),vn(ei),VT(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return UT(e),null;case 13:if(vn(Nn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Re(340));kh()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return vn(Nn),null;case 4:return Oh(),null;case 10:return LT(e.type._context),null;case 22:case 23:return QT(),null;case 24:return null;default:return null}}var fg=!1,Kr=!1,pW=typeof WeakSet=="function"?WeakSet:Set,Ye=null;function rh(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){jn(t,e,r)}else n.current=null}function FS(t,e,n){try{n()}catch(r){jn(t,e,r)}}var U2=!1;function vW(t,e){if(wS=ym,t=ZD(),AT(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,c=-1,f=-1,v=0,y=0,b=t,E=null;t:for(;;){for(var I;b!==n||i!==0&&b.nodeType!==3||(c=a+i),b!==o||r!==0&&b.nodeType!==3||(f=a+r),b.nodeType===3&&(a+=b.nodeValue.length),(I=b.firstChild)!==null;)E=b,b=I;for(;;){if(b===t)break t;if(E===n&&++v===i&&(c=a),E===o&&++y===r&&(f=a),(I=b.nextSibling)!==null)break;b=E,E=b.parentNode}b=I}n=c===-1||f===-1?null:{start:c,end:f}}else n=null}n=n||{start:0,end:0}}else n=null;for(ES={focusedElem:t,selectionRange:n},ym=!1,Ye=e;Ye!==null;)if(e=Ye,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ye=t;else for(;Ye!==null;){e=Ye;try{var L=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(L!==null){var D=L.memoizedProps,te=L.memoizedState,z=e.stateNode,Y=z.getSnapshotBeforeUpdate(e.elementType===e.type?D:qo(e.type,D),te);z.__reactInternalSnapshotBeforeUpdate=Y}break;case 3:var K=e.stateNode.containerInfo;K.nodeType===1?K.textContent="":K.nodeType===9&&K.documentElement&&K.removeChild(K.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Re(163))}}catch(ue){jn(e,e.return,ue)}if(t=e.sibling,t!==null){t.return=e.return,Ye=t;break}Ye=e.return}return L=U2,U2=!1,L}function Ed(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&FS(e,n,o)}i=i.next}while(i!==r)}}function Fy(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function jS(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function XL(t){var e=t.alternate;e!==null&&(t.alternate=null,XL(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Is],delete e[zd],delete e[TS],delete e[Qq],delete e[Jq])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function QL(t){return t.tag===5||t.tag===3||t.tag===4}function V2(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||QL(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function US(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Em));else if(r!==4&&(t=t.child,t!==null))for(US(t,e,n),t=t.sibling;t!==null;)US(t,e,n),t=t.sibling}function VS(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(VS(t,e,n),t=t.sibling;t!==null;)VS(t,e,n),t=t.sibling}var Pr=null,Go=!1;function $a(t,e,n){for(n=n.child;n!==null;)JL(t,e,n),n=n.sibling}function JL(t,e,n){if(Rs&&typeof Rs.onCommitFiberUnmount=="function")try{Rs.onCommitFiberUnmount(Ay,n)}catch{}switch(n.tag){case 5:Kr||rh(n,e);case 6:var r=Pr,i=Go;Pr=null,$a(t,e,n),Pr=r,Go=i,Pr!==null&&(Go?(t=Pr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Pr.removeChild(n.stateNode));break;case 18:Pr!==null&&(Go?(t=Pr,n=n.stateNode,t.nodeType===8?xE(t.parentNode,n):t.nodeType===1&&xE(t,n),Fd(t)):xE(Pr,n.stateNode));break;case 4:r=Pr,i=Go,Pr=n.stateNode.containerInfo,Go=!0,$a(t,e,n),Pr=r,Go=i;break;case 0:case 11:case 14:case 15:if(!Kr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&FS(n,e,a),i=i.next}while(i!==r)}$a(t,e,n);break;case 1:if(!Kr&&(rh(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){jn(n,e,c)}$a(t,e,n);break;case 21:$a(t,e,n);break;case 22:n.mode&1?(Kr=(r=Kr)||n.memoizedState!==null,$a(t,e,n),Kr=r):$a(t,e,n);break;default:$a(t,e,n)}}function B2(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new pW),e.forEach(function(r){var i=TW.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Bo(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,a=e,c=a;e:for(;c!==null;){switch(c.tag){case 5:Pr=c.stateNode,Go=!1;break e;case 3:Pr=c.stateNode.containerInfo,Go=!0;break e;case 4:Pr=c.stateNode.containerInfo,Go=!0;break e}c=c.return}if(Pr===null)throw Error(Re(160));JL(o,a,i),Pr=null,Go=!1;var f=i.alternate;f!==null&&(f.return=null),i.return=null}catch(v){jn(i,e,v)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ZL(e,t),e=e.sibling}function ZL(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Bo(e,t),Es(t),r&4){try{Ed(3,t,t.return),Fy(3,t)}catch(D){jn(t,t.return,D)}try{Ed(5,t,t.return)}catch(D){jn(t,t.return,D)}}break;case 1:Bo(e,t),Es(t),r&512&&n!==null&&rh(n,n.return);break;case 5:if(Bo(e,t),Es(t),r&512&&n!==null&&rh(n,n.return),t.flags&32){var i=t.stateNode;try{Pd(i,"")}catch(D){jn(t,t.return,D)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,c=t.type,f=t.updateQueue;if(t.updateQueue=null,f!==null)try{c==="input"&&o.type==="radio"&&o.name!=null&&wD(i,o),cS(c,a);var v=cS(c,o);for(a=0;a<f.length;a+=2){var y=f[a],b=f[a+1];y==="style"?ID(i,b):y==="dangerouslySetInnerHTML"?SD(i,b):y==="children"?Pd(i,b):gT(i,y,b,v)}switch(c){case"input":oS(i,o);break;case"textarea":ED(i,o);break;case"select":var E=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var I=o.value;I!=null?hh(i,!!o.multiple,I,!1):E!==!!o.multiple&&(o.defaultValue!=null?hh(i,!!o.multiple,o.defaultValue,!0):hh(i,!!o.multiple,o.multiple?[]:"",!1))}i[zd]=o}catch(D){jn(t,t.return,D)}}break;case 6:if(Bo(e,t),Es(t),r&4){if(t.stateNode===null)throw Error(Re(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(D){jn(t,t.return,D)}}break;case 3:if(Bo(e,t),Es(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Fd(e.containerInfo)}catch(D){jn(t,t.return,D)}break;case 4:Bo(e,t),Es(t);break;case 13:Bo(e,t),Es(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(YT=Hn())),r&4&&B2(t);break;case 22:if(y=n!==null&&n.memoizedState!==null,t.mode&1?(Kr=(v=Kr)||y,Bo(e,t),Kr=v):Bo(e,t),Es(t),r&8192){if(v=t.memoizedState!==null,(t.stateNode.isHidden=v)&&!y&&t.mode&1)for(Ye=t,y=t.child;y!==null;){for(b=Ye=y;Ye!==null;){switch(E=Ye,I=E.child,E.tag){case 0:case 11:case 14:case 15:Ed(4,E,E.return);break;case 1:rh(E,E.return);var L=E.stateNode;if(typeof L.componentWillUnmount=="function"){r=E,n=E.return;try{e=r,L.props=e.memoizedProps,L.state=e.memoizedState,L.componentWillUnmount()}catch(D){jn(r,n,D)}}break;case 5:rh(E,E.return);break;case 22:if(E.memoizedState!==null){q2(b);continue}}I!==null?(I.return=E,Ye=I):q2(b)}y=y.sibling}e:for(y=null,b=t;;){if(b.tag===5){if(y===null){y=b;try{i=b.stateNode,v?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(c=b.stateNode,f=b.memoizedProps.style,a=f!=null&&f.hasOwnProperty("display")?f.display:null,c.style.display=TD("display",a))}catch(D){jn(t,t.return,D)}}}else if(b.tag===6){if(y===null)try{b.stateNode.nodeValue=v?"":b.memoizedProps}catch(D){jn(t,t.return,D)}}else if((b.tag!==22&&b.tag!==23||b.memoizedState===null||b===t)&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===t)break e;for(;b.sibling===null;){if(b.return===null||b.return===t)break e;y===b&&(y=null),b=b.return}y===b&&(y=null),b.sibling.return=b.return,b=b.sibling}}break;case 19:Bo(e,t),Es(t),r&4&&B2(t);break;case 21:break;default:Bo(e,t),Es(t)}}function Es(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(QL(n)){var r=n;break e}n=n.return}throw Error(Re(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Pd(i,""),r.flags&=-33);var o=V2(t);VS(t,o,i);break;case 3:case 4:var a=r.stateNode.containerInfo,c=V2(t);US(t,c,a);break;default:throw Error(Re(161))}}catch(f){jn(t,t.return,f)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function gW(t,e,n){Ye=t,eM(t)}function eM(t,e,n){for(var r=(t.mode&1)!==0;Ye!==null;){var i=Ye,o=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||fg;if(!a){var c=i.alternate,f=c!==null&&c.memoizedState!==null||Kr;c=fg;var v=Kr;if(fg=a,(Kr=f)&&!v)for(Ye=i;Ye!==null;)a=Ye,f=a.child,a.tag===22&&a.memoizedState!==null?W2(i):f!==null?(f.return=a,Ye=f):W2(i);for(;o!==null;)Ye=o,eM(o),o=o.sibling;Ye=i,fg=c,Kr=v}z2(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,Ye=o):z2(t)}}function z2(t){for(;Ye!==null;){var e=Ye;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Kr||Fy(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Kr)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:qo(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&I2(e,o,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}I2(e,a,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var f=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":f.autoFocus&&n.focus();break;case"img":f.src&&(n.src=f.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var v=e.alternate;if(v!==null){var y=v.memoizedState;if(y!==null){var b=y.dehydrated;b!==null&&Fd(b)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Re(163))}Kr||e.flags&512&&jS(e)}catch(E){jn(e,e.return,E)}}if(e===t){Ye=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ye=n;break}Ye=e.return}}function q2(t){for(;Ye!==null;){var e=Ye;if(e===t){Ye=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ye=n;break}Ye=e.return}}function W2(t){for(;Ye!==null;){var e=Ye;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Fy(4,e)}catch(f){jn(e,n,f)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(f){jn(e,i,f)}}var o=e.return;try{jS(e)}catch(f){jn(e,o,f)}break;case 5:var a=e.return;try{jS(e)}catch(f){jn(e,a,f)}}}catch(f){jn(e,e.return,f)}if(e===t){Ye=null;break}var c=e.sibling;if(c!==null){c.return=e.return,Ye=c;break}Ye=e.return}}var mW=Math.ceil,Om=Oa.ReactCurrentDispatcher,HT=Oa.ReactCurrentOwner,To=Oa.ReactCurrentBatchConfig,Kt=0,Nr=null,ar=null,jr=0,qi=0,ih=Lu(0),gr=0,Kd=null,Dl=0,jy=0,KT=0,bd=null,Ci=null,YT=0,Dh=1/0,ta=null,Pm=!1,BS=null,yu=null,dg=!1,cu=null,Dm=0,Sd=0,zS=null,$g=-1,Hg=0;function _i(){return Kt&6?Hn():$g!==-1?$g:$g=Hn()}function _u(t){return t.mode&1?Kt&2&&jr!==0?jr&-jr:eW.transition!==null?(Hg===0&&(Hg=FD()),Hg):(t=Zt,t!==0||(t=window.event,t=t===void 0?16:WD(t.type)),t):1}function os(t,e,n,r){if(50<Sd)throw Sd=0,zS=null,Error(Re(185));Ip(t,n,r),(!(Kt&2)||t!==Nr)&&(t===Nr&&(!(Kt&2)&&(jy|=n),gr===4&&iu(t,jr)),Mi(t,r),n===1&&Kt===0&&!(e.mode&1)&&(Dh=Hn()+500,Dy&&Mu()))}function Mi(t,e){var n=t.callbackNode;eq(t,e);var r=mm(t,t===Nr?jr:0);if(r===0)n!==null&&Zk(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Zk(n),e===1)t.tag===0?Zq(G2.bind(null,t)):lL(G2.bind(null,t)),Yq(function(){!(Kt&6)&&Mu()}),n=null;else{switch(jD(r)){case 1:n=ET;break;case 4:n=LD;break;case 16:n=gm;break;case 536870912:n=MD;break;default:n=gm}n=uM(n,tM.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function tM(t,e){if($g=-1,Hg=0,Kt&6)throw Error(Re(327));var n=t.callbackNode;if(gh()&&t.callbackNode!==n)return null;var r=mm(t,t===Nr?jr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Lm(t,r);else{e=r;var i=Kt;Kt|=2;var o=rM();(Nr!==t||jr!==e)&&(ta=null,Dh=Hn()+500,Tl(t,e));do try{wW();break}catch(c){nM(t,c)}while(!0);DT(),Om.current=o,Kt=i,ar!==null?e=0:(Nr=null,jr=0,e=gr)}if(e!==0){if(e===2&&(i=vS(t),i!==0&&(r=i,e=qS(t,i))),e===1)throw n=Kd,Tl(t,0),iu(t,r),Mi(t,Hn()),n;if(e===6)iu(t,r);else{if(i=t.current.alternate,!(r&30)&&!yW(i)&&(e=Lm(t,r),e===2&&(o=vS(t),o!==0&&(r=o,e=qS(t,o))),e===1))throw n=Kd,Tl(t,0),iu(t,r),Mi(t,Hn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Re(345));case 2:fl(t,Ci,ta);break;case 3:if(iu(t,r),(r&130023424)===r&&(e=YT+500-Hn(),10<e)){if(mm(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){_i(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=SS(fl.bind(null,t,Ci,ta),e);break}fl(t,Ci,ta);break;case 4:if(iu(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-is(r);o=1<<a,a=e[a],a>i&&(i=a),r&=~o}if(r=i,r=Hn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*mW(r/1960))-r,10<r){t.timeoutHandle=SS(fl.bind(null,t,Ci,ta),r);break}fl(t,Ci,ta);break;case 5:fl(t,Ci,ta);break;default:throw Error(Re(329))}}}return Mi(t,Hn()),t.callbackNode===n?tM.bind(null,t):null}function qS(t,e){var n=bd;return t.current.memoizedState.isDehydrated&&(Tl(t,e).flags|=256),t=Lm(t,e),t!==2&&(e=Ci,Ci=n,e!==null&&WS(e)),t}function WS(t){Ci===null?Ci=t:Ci.push.apply(Ci,t)}function yW(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!us(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function iu(t,e){for(e&=~KT,e&=~jy,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-is(e),r=1<<n;t[n]=-1,e&=~r}}function G2(t){if(Kt&6)throw Error(Re(327));gh();var e=mm(t,0);if(!(e&1))return Mi(t,Hn()),null;var n=Lm(t,e);if(t.tag!==0&&n===2){var r=vS(t);r!==0&&(e=r,n=qS(t,r))}if(n===1)throw n=Kd,Tl(t,0),iu(t,e),Mi(t,Hn()),n;if(n===6)throw Error(Re(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,fl(t,Ci,ta),Mi(t,Hn()),null}function XT(t,e){var n=Kt;Kt|=1;try{return t(e)}finally{Kt=n,Kt===0&&(Dh=Hn()+500,Dy&&Mu())}}function Ll(t){cu!==null&&cu.tag===0&&!(Kt&6)&&gh();var e=Kt;Kt|=1;var n=To.transition,r=Zt;try{if(To.transition=null,Zt=1,t)return t()}finally{Zt=r,To.transition=n,Kt=e,!(Kt&6)&&Mu()}}function QT(){qi=ih.current,vn(ih)}function Tl(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Kq(n)),ar!==null)for(n=ar.return;n!==null;){var r=n;switch(RT(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&bm();break;case 3:Oh(),vn(Di),vn(ei),VT();break;case 5:UT(r);break;case 4:Oh();break;case 13:vn(Nn);break;case 19:vn(Nn);break;case 10:LT(r.type._context);break;case 22:case 23:QT()}n=n.return}if(Nr=t,ar=t=wu(t.current,null),jr=qi=e,gr=0,Kd=null,KT=jy=Dl=0,Ci=bd=null,_l!==null){for(e=0;e<_l.length;e++)if(n=_l[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=i,r.next=a}n.pending=r}_l=null}return t}function nM(t,e){do{var n=ar;try{if(DT(),qg.current=Rm,km){for(var r=An.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}km=!1}if(Pl=0,Sr=pr=An=null,wd=!1,Gd=0,HT.current=null,n===null||n.return===null){gr=1,Kd=e,ar=null;break}e:{var o=t,a=n.return,c=n,f=e;if(e=jr,c.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){var v=f,y=c,b=y.tag;if(!(y.mode&1)&&(b===0||b===11||b===15)){var E=y.alternate;E?(y.updateQueue=E.updateQueue,y.memoizedState=E.memoizedState,y.lanes=E.lanes):(y.updateQueue=null,y.memoizedState=null)}var I=O2(a);if(I!==null){I.flags&=-257,P2(I,a,c,o,e),I.mode&1&&R2(o,v,e),e=I,f=v;var L=e.updateQueue;if(L===null){var D=new Set;D.add(f),e.updateQueue=D}else L.add(f);break e}else{if(!(e&1)){R2(o,v,e),JT();break e}f=Error(Re(426))}}else if(_n&&c.mode&1){var te=O2(a);if(te!==null){!(te.flags&65536)&&(te.flags|=256),P2(te,a,c,o,e),OT(Ph(f,c));break e}}o=f=Ph(f,c),gr!==4&&(gr=2),bd===null?bd=[o]:bd.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var z=UL(o,f,e);T2(o,z);break e;case 1:c=f;var Y=o.type,K=o.stateNode;if(!(o.flags&128)&&(typeof Y.getDerivedStateFromError=="function"||K!==null&&typeof K.componentDidCatch=="function"&&(yu===null||!yu.has(K)))){o.flags|=65536,e&=-e,o.lanes|=e;var ue=VL(o,c,e);T2(o,ue);break e}}o=o.return}while(o!==null)}oM(n)}catch(oe){e=oe,ar===n&&n!==null&&(ar=n=n.return);continue}break}while(!0)}function rM(){var t=Om.current;return Om.current=Rm,t===null?Rm:t}function JT(){(gr===0||gr===3||gr===2)&&(gr=4),Nr===null||!(Dl&268435455)&&!(jy&268435455)||iu(Nr,jr)}function Lm(t,e){var n=Kt;Kt|=2;var r=rM();(Nr!==t||jr!==e)&&(ta=null,Tl(t,e));do try{_W();break}catch(i){nM(t,i)}while(!0);if(DT(),Kt=n,Om.current=r,ar!==null)throw Error(Re(261));return Nr=null,jr=0,gr}function _W(){for(;ar!==null;)iM(ar)}function wW(){for(;ar!==null&&!G8();)iM(ar)}function iM(t){var e=aM(t.alternate,t,qi);t.memoizedProps=t.pendingProps,e===null?oM(t):ar=e,HT.current=null}function oM(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=dW(n,e),n!==null){n.flags&=32767,ar=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{gr=6,ar=null;return}}else if(n=fW(n,e,qi),n!==null){ar=n;return}if(e=e.sibling,e!==null){ar=e;return}ar=e=t}while(e!==null);gr===0&&(gr=5)}function fl(t,e,n){var r=Zt,i=To.transition;try{To.transition=null,Zt=1,EW(t,e,n,r)}finally{To.transition=i,Zt=r}return null}function EW(t,e,n,r){do gh();while(cu!==null);if(Kt&6)throw Error(Re(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Re(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(tq(t,o),t===Nr&&(ar=Nr=null,jr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||dg||(dg=!0,uM(gm,function(){return gh(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=To.transition,To.transition=null;var a=Zt;Zt=1;var c=Kt;Kt|=4,HT.current=null,vW(t,n),ZL(n,t),Bq(ES),ym=!!wS,ES=wS=null,t.current=n,gW(n),$8(),Kt=c,Zt=a,To.transition=o}else t.current=n;if(dg&&(dg=!1,cu=t,Dm=i),o=t.pendingLanes,o===0&&(yu=null),Y8(n.stateNode),Mi(t,Hn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Pm)throw Pm=!1,t=BS,BS=null,t;return Dm&1&&t.tag!==0&&gh(),o=t.pendingLanes,o&1?t===zS?Sd++:(Sd=0,zS=t):Sd=0,Mu(),null}function gh(){if(cu!==null){var t=jD(Dm),e=To.transition,n=Zt;try{if(To.transition=null,Zt=16>t?16:t,cu===null)var r=!1;else{if(t=cu,cu=null,Dm=0,Kt&6)throw Error(Re(331));var i=Kt;for(Kt|=4,Ye=t.current;Ye!==null;){var o=Ye,a=o.child;if(Ye.flags&16){var c=o.deletions;if(c!==null){for(var f=0;f<c.length;f++){var v=c[f];for(Ye=v;Ye!==null;){var y=Ye;switch(y.tag){case 0:case 11:case 15:Ed(8,y,o)}var b=y.child;if(b!==null)b.return=y,Ye=b;else for(;Ye!==null;){y=Ye;var E=y.sibling,I=y.return;if(XL(y),y===v){Ye=null;break}if(E!==null){E.return=I,Ye=E;break}Ye=I}}}var L=o.alternate;if(L!==null){var D=L.child;if(D!==null){L.child=null;do{var te=D.sibling;D.sibling=null,D=te}while(D!==null)}}Ye=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,Ye=a;else e:for(;Ye!==null;){if(o=Ye,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Ed(9,o,o.return)}var z=o.sibling;if(z!==null){z.return=o.return,Ye=z;break e}Ye=o.return}}var Y=t.current;for(Ye=Y;Ye!==null;){a=Ye;var K=a.child;if(a.subtreeFlags&2064&&K!==null)K.return=a,Ye=K;else e:for(a=Y;Ye!==null;){if(c=Ye,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Fy(9,c)}}catch(oe){jn(c,c.return,oe)}if(c===a){Ye=null;break e}var ue=c.sibling;if(ue!==null){ue.return=c.return,Ye=ue;break e}Ye=c.return}}if(Kt=i,Mu(),Rs&&typeof Rs.onPostCommitFiberRoot=="function")try{Rs.onPostCommitFiberRoot(Ay,t)}catch{}r=!0}return r}finally{Zt=n,To.transition=e}}return!1}function $2(t,e,n){e=Ph(n,e),e=UL(t,e,1),t=mu(t,e,1),e=_i(),t!==null&&(Ip(t,1,e),Mi(t,e))}function jn(t,e,n){if(t.tag===3)$2(t,t,n);else for(;e!==null;){if(e.tag===3){$2(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(yu===null||!yu.has(r))){t=Ph(n,t),t=VL(e,t,1),e=mu(e,t,1),t=_i(),e!==null&&(Ip(e,1,t),Mi(e,t));break}}e=e.return}}function bW(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=_i(),t.pingedLanes|=t.suspendedLanes&n,Nr===t&&(jr&n)===n&&(gr===4||gr===3&&(jr&130023424)===jr&&500>Hn()-YT?Tl(t,0):KT|=n),Mi(t,e)}function sM(t,e){e===0&&(t.mode&1?(e=rg,rg<<=1,!(rg&130023424)&&(rg=4194304)):e=1);var n=_i();t=Sa(t,e),t!==null&&(Ip(t,e,n),Mi(t,n))}function SW(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),sM(t,n)}function TW(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Re(314))}r!==null&&r.delete(e),sM(t,n)}var aM;aM=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Di.current)ki=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ki=!1,hW(t,e,n);ki=!!(t.flags&131072)}else ki=!1,_n&&e.flags&1048576&&cL(e,Im,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Gg(t,e),t=e.pendingProps;var i=Ah(e,ei.current);vh(e,n),i=zT(null,e,r,t,i,n);var o=qT();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Li(r)?(o=!0,Sm(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,FT(e),i.updater=Ly,e.stateNode=i,i._reactInternals=e,kS(e,r,t,n),e=PS(null,e,r,!0,o,n)):(e.tag=0,_n&&o&&kT(e),di(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Gg(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=xW(r),t=qo(r,t),i){case 0:e=OS(null,e,r,t,n);break e;case 1:e=M2(null,e,r,t,n);break e;case 11:e=D2(null,e,r,t,n);break e;case 14:e=L2(null,e,r,qo(r.type,t),n);break e}throw Error(Re(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:qo(r,i),OS(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:qo(r,i),M2(t,e,r,i,n);case 3:e:{if(WL(e),t===null)throw Error(Re(387));r=e.pendingProps,o=e.memoizedState,i=o.element,pL(t,e),Nm(e,r,null,n);var a=e.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Ph(Error(Re(423)),e),e=F2(t,e,r,n,i);break e}else if(r!==i){i=Ph(Error(Re(424)),e),e=F2(t,e,r,n,i);break e}else for(Yi=gu(e.stateNode.containerInfo.firstChild),Zi=e,_n=!0,Ho=null,n=yL(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(kh(),r===i){e=Ta(t,e,n);break e}di(t,e,r,n)}e=e.child}return e;case 5:return _L(e),t===null&&CS(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,a=i.children,bS(r,i)?a=null:o!==null&&bS(r,o)&&(e.flags|=32),qL(t,e),di(t,e,a,n),e.child;case 6:return t===null&&CS(e),null;case 13:return GL(t,e,n);case 4:return jT(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Rh(e,null,r,n):di(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:qo(r,i),D2(t,e,r,i,n);case 7:return di(t,e,e.pendingProps,n),e.child;case 8:return di(t,e,e.pendingProps.children,n),e.child;case 12:return di(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,a=i.value,un(xm,r._currentValue),r._currentValue=a,o!==null)if(us(o.value,a)){if(o.children===i.children&&!Di.current){e=Ta(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var c=o.dependencies;if(c!==null){a=o.child;for(var f=c.firstContext;f!==null;){if(f.context===r){if(o.tag===1){f=wa(-1,n&-n),f.tag=2;var v=o.updateQueue;if(v!==null){v=v.shared;var y=v.pending;y===null?f.next=f:(f.next=y.next,y.next=f),v.pending=f}}o.lanes|=n,f=o.alternate,f!==null&&(f.lanes|=n),NS(o.return,n,e),c.lanes|=n;break}f=f.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(Re(341));a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),NS(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}di(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,vh(e,n),i=xo(i),r=r(i),e.flags|=1,di(t,e,r,n),e.child;case 14:return r=e.type,i=qo(r,e.pendingProps),i=qo(r.type,i),L2(t,e,r,i,n);case 15:return BL(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:qo(r,i),Gg(t,e),e.tag=1,Li(r)?(t=!0,Sm(e)):t=!1,vh(e,n),gL(e,r,i),kS(e,r,i,n),PS(null,e,r,!0,t,n);case 19:return $L(t,e,n);case 22:return zL(t,e,n)}throw Error(Re(156,e.tag))};function uM(t,e){return DD(t,e)}function IW(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bo(t,e,n,r){return new IW(t,e,n,r)}function ZT(t){return t=t.prototype,!(!t||!t.isReactComponent)}function xW(t){if(typeof t=="function")return ZT(t)?1:0;if(t!=null){if(t=t.$$typeof,t===yT)return 11;if(t===_T)return 14}return 2}function wu(t,e){var n=t.alternate;return n===null?(n=bo(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Kg(t,e,n,r,i,o){var a=2;if(r=t,typeof t=="function")ZT(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Kc:return Il(n.children,i,o,e);case mT:a=8,i|=8;break;case eS:return t=bo(12,n,e,i|2),t.elementType=eS,t.lanes=o,t;case tS:return t=bo(13,n,e,i),t.elementType=tS,t.lanes=o,t;case nS:return t=bo(19,n,e,i),t.elementType=nS,t.lanes=o,t;case mD:return Uy(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case vD:a=10;break e;case gD:a=9;break e;case yT:a=11;break e;case _T:a=14;break e;case Ja:a=16,r=null;break e}throw Error(Re(130,t==null?t:typeof t,""))}return e=bo(a,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Il(t,e,n,r){return t=bo(7,t,r,e),t.lanes=n,t}function Uy(t,e,n,r){return t=bo(22,t,r,e),t.elementType=mD,t.lanes=n,t.stateNode={isHidden:!1},t}function DE(t,e,n){return t=bo(6,t,null,e),t.lanes=n,t}function LE(t,e,n){return e=bo(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function CW(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vE(0),this.expirationTimes=vE(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vE(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function eI(t,e,n,r,i,o,a,c,f){return t=new CW(t,e,n,c,f),e===1?(e=1,o===!0&&(e|=8)):e=0,o=bo(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},FT(o),t}function NW(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Hc,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function lM(t){if(!t)return Nu;t=t._reactInternals;e:{if(Yl(t)!==t||t.tag!==1)throw Error(Re(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Li(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Re(171))}if(t.tag===1){var n=t.type;if(Li(n))return uL(t,n,e)}return e}function cM(t,e,n,r,i,o,a,c,f){return t=eI(n,r,!0,t,i,o,a,c,f),t.context=lM(null),n=t.current,r=_i(),i=_u(n),o=wa(r,i),o.callback=e??null,mu(n,o,i),t.current.lanes=i,Ip(t,i,r),Mi(t,r),t}function Vy(t,e,n,r){var i=e.current,o=_i(),a=_u(i);return n=lM(n),e.context===null?e.context=n:e.pendingContext=n,e=wa(o,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=mu(i,e,a),t!==null&&(os(t,i,a,o),zg(t,i,a)),a}function Mm(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function H2(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function tI(t,e){H2(t,e),(t=t.alternate)&&H2(t,e)}function AW(){return null}var hM=typeof reportError=="function"?reportError:function(t){console.error(t)};function nI(t){this._internalRoot=t}By.prototype.render=nI.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Re(409));Vy(t,e,null,null)};By.prototype.unmount=nI.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ll(function(){Vy(null,t,null,null)}),e[ba]=null}};function By(t){this._internalRoot=t}By.prototype.unstable_scheduleHydration=function(t){if(t){var e=BD();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ru.length&&e!==0&&e<ru[n].priority;n++);ru.splice(n,0,t),n===0&&qD(t)}};function rI(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function zy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function K2(){}function kW(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var v=Mm(a);o.call(v)}}var a=cM(e,r,t,0,null,!1,!1,"",K2);return t._reactRootContainer=a,t[ba]=a.current,Vd(t.nodeType===8?t.parentNode:t),Ll(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var c=r;r=function(){var v=Mm(f);c.call(v)}}var f=eI(t,0,!1,null,null,!1,!1,"",K2);return t._reactRootContainer=f,t[ba]=f.current,Vd(t.nodeType===8?t.parentNode:t),Ll(function(){Vy(e,f,n,r)}),f}function qy(t,e,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if(typeof i=="function"){var c=i;i=function(){var f=Mm(a);c.call(f)}}Vy(e,a,t,i)}else a=kW(n,e,t,i,r);return Mm(a)}UD=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=od(e.pendingLanes);n!==0&&(bT(e,n|1),Mi(e,Hn()),!(Kt&6)&&(Dh=Hn()+500,Mu()))}break;case 13:Ll(function(){var r=Sa(t,1);if(r!==null){var i=_i();os(r,t,1,i)}}),tI(t,1)}};ST=function(t){if(t.tag===13){var e=Sa(t,134217728);if(e!==null){var n=_i();os(e,t,134217728,n)}tI(t,134217728)}};VD=function(t){if(t.tag===13){var e=_u(t),n=Sa(t,e);if(n!==null){var r=_i();os(n,t,e,r)}tI(t,e)}};BD=function(){return Zt};zD=function(t,e){var n=Zt;try{return Zt=t,e()}finally{Zt=n}};fS=function(t,e,n){switch(e){case"input":if(oS(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Py(r);if(!i)throw Error(Re(90));_D(r),oS(r,i)}}}break;case"textarea":ED(t,n);break;case"select":e=n.value,e!=null&&hh(t,!!n.multiple,e,!1)}};ND=XT;AD=Ll;var RW={usingClientEntryPoint:!1,Events:[Cp,Jc,Py,xD,CD,XT]},$f={findFiberByHostInstance:yl,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},OW={bundleType:$f.bundleType,version:$f.version,rendererPackageName:$f.rendererPackageName,rendererConfig:$f.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Oa.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=OD(t),t===null?null:t.stateNode},findFiberByHostInstance:$f.findFiberByHostInstance||AW,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pg.isDisabled&&pg.supportsFiber)try{Ay=pg.inject(OW),Rs=pg}catch{}}io.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=RW;io.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rI(e))throw Error(Re(200));return NW(t,e,null,n)};io.createRoot=function(t,e){if(!rI(t))throw Error(Re(299));var n=!1,r="",i=hM;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=eI(t,1,!1,null,null,n,!1,r,i),t[ba]=e.current,Vd(t.nodeType===8?t.parentNode:t),new nI(e)};io.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Re(188)):(t=Object.keys(t).join(","),Error(Re(268,t)));return t=OD(e),t=t===null?null:t.stateNode,t};io.flushSync=function(t){return Ll(t)};io.hydrate=function(t,e,n){if(!zy(e))throw Error(Re(200));return qy(null,t,e,!0,n)};io.hydrateRoot=function(t,e,n){if(!rI(t))throw Error(Re(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",a=hM;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=cM(e,null,t,1,n??null,i,!1,o,a),t[ba]=e.current,Vd(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new By(e)};io.render=function(t,e,n){if(!zy(e))throw Error(Re(200));return qy(null,t,e,!1,n)};io.unmountComponentAtNode=function(t){if(!zy(t))throw Error(Re(40));return t._reactRootContainer?(Ll(function(){qy(null,null,t,!1,function(){t._reactRootContainer=null,t[ba]=null})}),!0):!1};io.unstable_batchedUpdates=XT;io.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!zy(n))throw Error(Re(200));if(t==null||t._reactInternals===void 0)throw Error(Re(38));return qy(t,e,n,!1,r)};io.version="18.2.0-next-9e3b772b8-20220608";function fM(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(fM)}catch(t){console.error(t)}}fM(),cD.exports=io;var iI=cD.exports,Y2=iI;Jb.createRoot=Y2.createRoot,Jb.hydrateRoot=Y2.hydrateRoot;var GS=function(t,e){return GS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},GS(t,e)};function PW(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");GS(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var aa=function(){return aa=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},aa.apply(this,arguments)};function Yd(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function DW(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}var dM={exports:{}},en={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rr=typeof Symbol=="function"&&Symbol.for,oI=Rr?Symbol.for("react.element"):60103,sI=Rr?Symbol.for("react.portal"):60106,Wy=Rr?Symbol.for("react.fragment"):60107,Gy=Rr?Symbol.for("react.strict_mode"):60108,$y=Rr?Symbol.for("react.profiler"):60114,Hy=Rr?Symbol.for("react.provider"):60109,Ky=Rr?Symbol.for("react.context"):60110,aI=Rr?Symbol.for("react.async_mode"):60111,Yy=Rr?Symbol.for("react.concurrent_mode"):60111,Xy=Rr?Symbol.for("react.forward_ref"):60112,Qy=Rr?Symbol.for("react.suspense"):60113,LW=Rr?Symbol.for("react.suspense_list"):60120,Jy=Rr?Symbol.for("react.memo"):60115,Zy=Rr?Symbol.for("react.lazy"):60116,MW=Rr?Symbol.for("react.block"):60121,FW=Rr?Symbol.for("react.fundamental"):60117,jW=Rr?Symbol.for("react.responder"):60118,UW=Rr?Symbol.for("react.scope"):60119;function so(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case oI:switch(t=t.type,t){case aI:case Yy:case Wy:case $y:case Gy:case Qy:return t;default:switch(t=t&&t.$$typeof,t){case Ky:case Xy:case Zy:case Jy:case Hy:return t;default:return e}}case sI:return e}}}function pM(t){return so(t)===Yy}en.AsyncMode=aI;en.ConcurrentMode=Yy;en.ContextConsumer=Ky;en.ContextProvider=Hy;en.Element=oI;en.ForwardRef=Xy;en.Fragment=Wy;en.Lazy=Zy;en.Memo=Jy;en.Portal=sI;en.Profiler=$y;en.StrictMode=Gy;en.Suspense=Qy;en.isAsyncMode=function(t){return pM(t)||so(t)===aI};en.isConcurrentMode=pM;en.isContextConsumer=function(t){return so(t)===Ky};en.isContextProvider=function(t){return so(t)===Hy};en.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===oI};en.isForwardRef=function(t){return so(t)===Xy};en.isFragment=function(t){return so(t)===Wy};en.isLazy=function(t){return so(t)===Zy};en.isMemo=function(t){return so(t)===Jy};en.isPortal=function(t){return so(t)===sI};en.isProfiler=function(t){return so(t)===$y};en.isStrictMode=function(t){return so(t)===Gy};en.isSuspense=function(t){return so(t)===Qy};en.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Wy||t===Yy||t===$y||t===Gy||t===Qy||t===LW||typeof t=="object"&&t!==null&&(t.$$typeof===Zy||t.$$typeof===Jy||t.$$typeof===Hy||t.$$typeof===Ky||t.$$typeof===Xy||t.$$typeof===FW||t.$$typeof===jW||t.$$typeof===UW||t.$$typeof===MW)};en.typeOf=so;dM.exports=en;var VW=dM.exports,vM=VW,BW={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},zW={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},gM={};gM[vM.ForwardRef]=BW;gM[vM.Memo]=zW;function mM(t,e,n){if(n===void 0&&(n=Error),!t)throw new n(e)}var $S=function(t,e){return $S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},$S(t,e)};function Xl(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");$S(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Sn=function(){return Sn=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Sn.apply(this,arguments)};function Ac(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}var HS=function(t,e){return HS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},HS(t,e)};function e_(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");HS(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var ou=function(){return ou=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},ou.apply(this,arguments)};function ME(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}var Fm=function(){return Fm=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Fm.apply(this,arguments)};var qt;(function(t){t[t.EXPECT_ARGUMENT_CLOSING_BRACE=1]="EXPECT_ARGUMENT_CLOSING_BRACE",t[t.EMPTY_ARGUMENT=2]="EMPTY_ARGUMENT",t[t.MALFORMED_ARGUMENT=3]="MALFORMED_ARGUMENT",t[t.EXPECT_ARGUMENT_TYPE=4]="EXPECT_ARGUMENT_TYPE",t[t.INVALID_ARGUMENT_TYPE=5]="INVALID_ARGUMENT_TYPE",t[t.EXPECT_ARGUMENT_STYLE=6]="EXPECT_ARGUMENT_STYLE",t[t.INVALID_NUMBER_SKELETON=7]="INVALID_NUMBER_SKELETON",t[t.INVALID_DATE_TIME_SKELETON=8]="INVALID_DATE_TIME_SKELETON",t[t.EXPECT_NUMBER_SKELETON=9]="EXPECT_NUMBER_SKELETON",t[t.EXPECT_DATE_TIME_SKELETON=10]="EXPECT_DATE_TIME_SKELETON",t[t.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE=11]="UNCLOSED_QUOTE_IN_ARGUMENT_STYLE",t[t.EXPECT_SELECT_ARGUMENT_OPTIONS=12]="EXPECT_SELECT_ARGUMENT_OPTIONS",t[t.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE=13]="EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE",t[t.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE=14]="INVALID_PLURAL_ARGUMENT_OFFSET_VALUE",t[t.EXPECT_SELECT_ARGUMENT_SELECTOR=15]="EXPECT_SELECT_ARGUMENT_SELECTOR",t[t.EXPECT_PLURAL_ARGUMENT_SELECTOR=16]="EXPECT_PLURAL_ARGUMENT_SELECTOR",t[t.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT=17]="EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT",t[t.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT=18]="EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT",t[t.INVALID_PLURAL_ARGUMENT_SELECTOR=19]="INVALID_PLURAL_ARGUMENT_SELECTOR",t[t.DUPLICATE_PLURAL_ARGUMENT_SELECTOR=20]="DUPLICATE_PLURAL_ARGUMENT_SELECTOR",t[t.DUPLICATE_SELECT_ARGUMENT_SELECTOR=21]="DUPLICATE_SELECT_ARGUMENT_SELECTOR",t[t.MISSING_OTHER_CLAUSE=22]="MISSING_OTHER_CLAUSE",t[t.INVALID_TAG=23]="INVALID_TAG",t[t.INVALID_TAG_NAME=25]="INVALID_TAG_NAME",t[t.UNMATCHED_CLOSING_TAG=26]="UNMATCHED_CLOSING_TAG",t[t.UNCLOSED_TAG=27]="UNCLOSED_TAG"})(qt||(qt={}));var dn;(function(t){t[t.literal=0]="literal",t[t.argument=1]="argument",t[t.number=2]="number",t[t.date=3]="date",t[t.time=4]="time",t[t.select=5]="select",t[t.plural=6]="plural",t[t.pound=7]="pound",t[t.tag=8]="tag"})(dn||(dn={}));var Lh;(function(t){t[t.number=0]="number",t[t.dateTime=1]="dateTime"})(Lh||(Lh={}));function X2(t){return t.type===dn.literal}function qW(t){return t.type===dn.argument}function yM(t){return t.type===dn.number}function _M(t){return t.type===dn.date}function wM(t){return t.type===dn.time}function EM(t){return t.type===dn.select}function bM(t){return t.type===dn.plural}function WW(t){return t.type===dn.pound}function SM(t){return t.type===dn.tag}function TM(t){return!!(t&&typeof t=="object"&&t.type===Lh.number)}function KS(t){return!!(t&&typeof t=="object"&&t.type===Lh.dateTime)}var IM=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,GW=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;function $W(t){var e={};return t.replace(GW,function(n){var r=n.length;switch(n[0]){case"G":e.era=r===4?"long":r===5?"narrow":"short";break;case"y":e.year=r===2?"2-digit":"numeric";break;case"Y":case"u":case"U":case"r":throw new RangeError("`Y/u/U/r` (year) patterns are not supported, use `y` instead");case"q":case"Q":throw new RangeError("`q/Q` (quarter) patterns are not supported");case"M":case"L":e.month=["numeric","2-digit","short","long","narrow"][r-1];break;case"w":case"W":throw new RangeError("`w/W` (week) patterns are not supported");case"d":e.day=["numeric","2-digit"][r-1];break;case"D":case"F":case"g":throw new RangeError("`D/F/g` (day) patterns are not supported, use `d` instead");case"E":e.weekday=r===4?"short":r===5?"narrow":"short";break;case"e":if(r<4)throw new RangeError("`e..eee` (weekday) patterns are not supported");e.weekday=["short","long","narrow","short"][r-4];break;case"c":if(r<4)throw new RangeError("`c..ccc` (weekday) patterns are not supported");e.weekday=["short","long","narrow","short"][r-4];break;case"a":e.hour12=!0;break;case"b":case"B":throw new RangeError("`b/B` (period) patterns are not supported, use `a` instead");case"h":e.hourCycle="h12",e.hour=["numeric","2-digit"][r-1];break;case"H":e.hourCycle="h23",e.hour=["numeric","2-digit"][r-1];break;case"K":e.hourCycle="h11",e.hour=["numeric","2-digit"][r-1];break;case"k":e.hourCycle="h24",e.hour=["numeric","2-digit"][r-1];break;case"j":case"J":case"C":throw new RangeError("`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead");case"m":e.minute=["numeric","2-digit"][r-1];break;case"s":e.second=["numeric","2-digit"][r-1];break;case"S":case"A":throw new RangeError("`S/A` (second) patterns are not supported, use `s` instead");case"z":e.timeZoneName=r<4?"short":"long";break;case"Z":case"O":case"v":case"V":case"X":case"x":throw new RangeError("`Z/O/v/V/X/x` (timeZone) patterns are not supported, use `z` instead")}return""}),e}var Mn=function(){return Mn=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Mn.apply(this,arguments)};var HW=/[\t-\r \x85\u200E\u200F\u2028\u2029]/i;function KW(t){if(t.length===0)throw new Error("Number skeleton cannot be empty");for(var e=t.split(HW).filter(function(E){return E.length>0}),n=[],r=0,i=e;r<i.length;r++){var o=i[r],a=o.split("/");if(a.length===0)throw new Error("Invalid number skeleton");for(var c=a[0],f=a.slice(1),v=0,y=f;v<y.length;v++){var b=y[v];if(b.length===0)throw new Error("Invalid number skeleton")}n.push({stem:c,options:f})}return n}function YW(t){return t.replace(/^(.*?)-/,"")}var Q2=/^\.(?:(0+)(\*)?|(#+)|(0+)(#+))$/g,xM=/^(@+)?(\+|#+)?[rs]?$/g,XW=/(\*)(0+)|(#+)(0+)|(0+)/g,CM=/^(0+)$/;function J2(t){var e={};return t[t.length-1]==="r"?e.roundingPriority="morePrecision":t[t.length-1]==="s"&&(e.roundingPriority="lessPrecision"),t.replace(xM,function(n,r,i){return typeof i!="string"?(e.minimumSignificantDigits=r.length,e.maximumSignificantDigits=r.length):i==="+"?e.minimumSignificantDigits=r.length:r[0]==="#"?e.maximumSignificantDigits=r.length:(e.minimumSignificantDigits=r.length,e.maximumSignificantDigits=r.length+(typeof i=="string"?i.length:0)),""}),e}function NM(t){switch(t){case"sign-auto":return{signDisplay:"auto"};case"sign-accounting":case"()":return{currencySign:"accounting"};case"sign-always":case"+!":return{signDisplay:"always"};case"sign-accounting-always":case"()!":return{signDisplay:"always",currencySign:"accounting"};case"sign-except-zero":case"+?":return{signDisplay:"exceptZero"};case"sign-accounting-except-zero":case"()?":return{signDisplay:"exceptZero",currencySign:"accounting"};case"sign-never":case"+_":return{signDisplay:"never"}}}function QW(t){var e;if(t[0]==="E"&&t[1]==="E"?(e={notation:"engineering"},t=t.slice(2)):t[0]==="E"&&(e={notation:"scientific"},t=t.slice(1)),e){var n=t.slice(0,2);if(n==="+!"?(e.signDisplay="always",t=t.slice(2)):n==="+?"&&(e.signDisplay="exceptZero",t=t.slice(2)),!CM.test(t))throw new Error("Malformed concise eng/scientific notation");e.minimumIntegerDigits=t.length}return e}function Z2(t){var e={},n=NM(t);return n||e}function JW(t){for(var e={},n=0,r=t;n<r.length;n++){var i=r[n];switch(i.stem){case"percent":case"%":e.style="percent";continue;case"%x100":e.style="percent",e.scale=100;continue;case"currency":e.style="currency",e.currency=i.options[0];continue;case"group-off":case",_":e.useGrouping=!1;continue;case"precision-integer":case".":e.maximumFractionDigits=0;continue;case"measure-unit":case"unit":e.style="unit",e.unit=YW(i.options[0]);continue;case"compact-short":case"K":e.notation="compact",e.compactDisplay="short";continue;case"compact-long":case"KK":e.notation="compact",e.compactDisplay="long";continue;case"scientific":e=Mn(Mn(Mn({},e),{notation:"scientific"}),i.options.reduce(function(f,v){return Mn(Mn({},f),Z2(v))},{}));continue;case"engineering":e=Mn(Mn(Mn({},e),{notation:"engineering"}),i.options.reduce(function(f,v){return Mn(Mn({},f),Z2(v))},{}));continue;case"notation-simple":e.notation="standard";continue;case"unit-width-narrow":e.currencyDisplay="narrowSymbol",e.unitDisplay="narrow";continue;case"unit-width-short":e.currencyDisplay="code",e.unitDisplay="short";continue;case"unit-width-full-name":e.currencyDisplay="name",e.unitDisplay="long";continue;case"unit-width-iso-code":e.currencyDisplay="symbol";continue;case"scale":e.scale=parseFloat(i.options[0]);continue;case"integer-width":if(i.options.length>1)throw new RangeError("integer-width stems only accept a single optional option");i.options[0].replace(XW,function(f,v,y,b,E,I){if(v)e.minimumIntegerDigits=y.length;else{if(b&&E)throw new Error("We currently do not support maximum integer digits");if(I)throw new Error("We currently do not support exact integer digits")}return""});continue}if(CM.test(i.stem)){e.minimumIntegerDigits=i.stem.length;continue}if(Q2.test(i.stem)){if(i.options.length>1)throw new RangeError("Fraction-precision stems only accept a single optional option");i.stem.replace(Q2,function(f,v,y,b,E,I){return y==="*"?e.minimumFractionDigits=v.length:b&&b[0]==="#"?e.maximumFractionDigits=b.length:E&&I?(e.minimumFractionDigits=E.length,e.maximumFractionDigits=E.length+I.length):(e.minimumFractionDigits=v.length,e.maximumFractionDigits=v.length),""});var o=i.options[0];o==="w"?e=Mn(Mn({},e),{trailingZeroDisplay:"stripIfInteger"}):o&&(e=Mn(Mn({},e),J2(o)));continue}if(xM.test(i.stem)){e=Mn(Mn({},e),J2(i.stem));continue}var a=NM(i.stem);a&&(e=Mn(Mn({},e),a));var c=QW(i.stem);c&&(e=Mn(Mn({},e),c))}return e}var FE,ZW=new RegExp("^".concat(IM.source,"*")),e9=new RegExp("".concat(IM.source,"*$"));function Gt(t,e){return{start:t,end:e}}var t9=!!String.prototype.startsWith,n9=!!String.fromCodePoint,r9=!!Object.fromEntries,i9=!!String.prototype.codePointAt,o9=!!String.prototype.trimStart,s9=!!String.prototype.trimEnd,a9=!!Number.isSafeInteger,u9=a9?Number.isSafeInteger:function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t&&Math.abs(t)<=9007199254740991},YS=!0;try{var l9=kM("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");YS=((FE=l9.exec("a"))===null||FE===void 0?void 0:FE[0])==="a"}catch{YS=!1}var eR=t9?function(e,n,r){return e.startsWith(n,r)}:function(e,n,r){return e.slice(r,r+n.length)===n},XS=n9?String.fromCodePoint:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r="",i=e.length,o=0,a;i>o;){if(a=e[o++],a>1114111)throw RangeError(a+" is not a valid code point");r+=a<65536?String.fromCharCode(a):String.fromCharCode(((a-=65536)>>10)+55296,a%1024+56320)}return r},tR=r9?Object.fromEntries:function(e){for(var n={},r=0,i=e;r<i.length;r++){var o=i[r],a=o[0],c=o[1];n[a]=c}return n},AM=i9?function(e,n){return e.codePointAt(n)}:function(e,n){var r=e.length;if(!(n<0||n>=r)){var i=e.charCodeAt(n),o;return i<55296||i>56319||n+1===r||(o=e.charCodeAt(n+1))<56320||o>57343?i:(i-55296<<10)+(o-56320)+65536}},c9=o9?function(e){return e.trimStart()}:function(e){return e.replace(ZW,"")},h9=s9?function(e){return e.trimEnd()}:function(e){return e.replace(e9,"")};function kM(t,e){return new RegExp(t,e)}var QS;if(YS){var nR=kM("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");QS=function(e,n){var r;nR.lastIndex=n;var i=nR.exec(e);return(r=i[1])!==null&&r!==void 0?r:""}}else QS=function(e,n){for(var r=[];;){var i=AM(e,n);if(i===void 0||RM(i)||v9(i))break;r.push(i),n+=i>=65536?2:1}return XS.apply(void 0,r)};var f9=function(){function t(e,n){n===void 0&&(n={}),this.message=e,this.position={offset:0,line:1,column:1},this.ignoreTag=!!n.ignoreTag,this.requiresOtherClause=!!n.requiresOtherClause,this.shouldParseSkeletons=!!n.shouldParseSkeletons}return t.prototype.parse=function(){if(this.offset()!==0)throw Error("parser can only be used once");return this.parseMessage(0,"",!1)},t.prototype.parseMessage=function(e,n,r){for(var i=[];!this.isEOF();){var o=this.char();if(o===123){var a=this.parseArgument(e,r);if(a.err)return a;i.push(a.val)}else{if(o===125&&e>0)break;if(o===35&&(n==="plural"||n==="selectordinal")){var c=this.clonePosition();this.bump(),i.push({type:dn.pound,location:Gt(c,this.clonePosition())})}else if(o===60&&!this.ignoreTag&&this.peek()===47){if(r)break;return this.error(qt.UNMATCHED_CLOSING_TAG,Gt(this.clonePosition(),this.clonePosition()))}else if(o===60&&!this.ignoreTag&&JS(this.peek()||0)){var a=this.parseTag(e,n);if(a.err)return a;i.push(a.val)}else{var a=this.parseLiteral(e,n);if(a.err)return a;i.push(a.val)}}}return{val:i,err:null}},t.prototype.parseTag=function(e,n){var r=this.clonePosition();this.bump();var i=this.parseTagName();if(this.bumpSpace(),this.bumpIf("/>"))return{val:{type:dn.literal,value:"<".concat(i,"/>"),location:Gt(r,this.clonePosition())},err:null};if(this.bumpIf(">")){var o=this.parseMessage(e+1,n,!0);if(o.err)return o;var a=o.val,c=this.clonePosition();if(this.bumpIf("</")){if(this.isEOF()||!JS(this.char()))return this.error(qt.INVALID_TAG,Gt(c,this.clonePosition()));var f=this.clonePosition(),v=this.parseTagName();return i!==v?this.error(qt.UNMATCHED_CLOSING_TAG,Gt(f,this.clonePosition())):(this.bumpSpace(),this.bumpIf(">")?{val:{type:dn.tag,value:i,children:a,location:Gt(r,this.clonePosition())},err:null}:this.error(qt.INVALID_TAG,Gt(c,this.clonePosition())))}else return this.error(qt.UNCLOSED_TAG,Gt(r,this.clonePosition()))}else return this.error(qt.INVALID_TAG,Gt(r,this.clonePosition()))},t.prototype.parseTagName=function(){var e=this.offset();for(this.bump();!this.isEOF()&&p9(this.char());)this.bump();return this.message.slice(e,this.offset())},t.prototype.parseLiteral=function(e,n){for(var r=this.clonePosition(),i="";;){var o=this.tryParseQuote(n);if(o){i+=o;continue}var a=this.tryParseUnquoted(e,n);if(a){i+=a;continue}var c=this.tryParseLeftAngleBracket();if(c){i+=c;continue}break}var f=Gt(r,this.clonePosition());return{val:{type:dn.literal,value:i,location:f},err:null}},t.prototype.tryParseLeftAngleBracket=function(){return!this.isEOF()&&this.char()===60&&(this.ignoreTag||!d9(this.peek()||0))?(this.bump(),"<"):null},t.prototype.tryParseQuote=function(e){if(this.isEOF()||this.char()!==39)return null;switch(this.peek()){case 39:return this.bump(),this.bump(),"'";case 123:case 60:case 62:case 125:break;case 35:if(e==="plural"||e==="selectordinal")break;return null;default:return null}this.bump();var n=[this.char()];for(this.bump();!this.isEOF();){var r=this.char();if(r===39)if(this.peek()===39)n.push(39),this.bump();else{this.bump();break}else n.push(r);this.bump()}return XS.apply(void 0,n)},t.prototype.tryParseUnquoted=function(e,n){if(this.isEOF())return null;var r=this.char();return r===60||r===123||r===35&&(n==="plural"||n==="selectordinal")||r===125&&e>0?null:(this.bump(),XS(r))},t.prototype.parseArgument=function(e,n){var r=this.clonePosition();if(this.bump(),this.bumpSpace(),this.isEOF())return this.error(qt.EXPECT_ARGUMENT_CLOSING_BRACE,Gt(r,this.clonePosition()));if(this.char()===125)return this.bump(),this.error(qt.EMPTY_ARGUMENT,Gt(r,this.clonePosition()));var i=this.parseIdentifierIfPossible().value;if(!i)return this.error(qt.MALFORMED_ARGUMENT,Gt(r,this.clonePosition()));if(this.bumpSpace(),this.isEOF())return this.error(qt.EXPECT_ARGUMENT_CLOSING_BRACE,Gt(r,this.clonePosition()));switch(this.char()){case 125:return this.bump(),{val:{type:dn.argument,value:i,location:Gt(r,this.clonePosition())},err:null};case 44:return this.bump(),this.bumpSpace(),this.isEOF()?this.error(qt.EXPECT_ARGUMENT_CLOSING_BRACE,Gt(r,this.clonePosition())):this.parseArgumentOptions(e,n,i,r);default:return this.error(qt.MALFORMED_ARGUMENT,Gt(r,this.clonePosition()))}},t.prototype.parseIdentifierIfPossible=function(){var e=this.clonePosition(),n=this.offset(),r=QS(this.message,n),i=n+r.length;this.bumpTo(i);var o=this.clonePosition(),a=Gt(e,o);return{value:r,location:a}},t.prototype.parseArgumentOptions=function(e,n,r,i){var o,a=this.clonePosition(),c=this.parseIdentifierIfPossible().value,f=this.clonePosition();switch(c){case"":return this.error(qt.EXPECT_ARGUMENT_TYPE,Gt(a,f));case"number":case"date":case"time":{this.bumpSpace();var v=null;if(this.bumpIf(",")){this.bumpSpace();var y=this.clonePosition(),b=this.parseSimpleArgStyleIfPossible();if(b.err)return b;var E=h9(b.val);if(E.length===0)return this.error(qt.EXPECT_ARGUMENT_STYLE,Gt(this.clonePosition(),this.clonePosition()));var I=Gt(y,this.clonePosition());v={style:E,styleLocation:I}}var L=this.tryParseArgumentClose(i);if(L.err)return L;var D=Gt(i,this.clonePosition());if(v&&eR(v==null?void 0:v.style,"::",0)){var te=c9(v.style.slice(2));if(c==="number"){var b=this.parseNumberSkeletonFromString(te,v.styleLocation);return b.err?b:{val:{type:dn.number,value:r,location:D,style:b.val},err:null}}else{if(te.length===0)return this.error(qt.EXPECT_DATE_TIME_SKELETON,D);var E={type:Lh.dateTime,pattern:te,location:v.styleLocation,parsedOptions:this.shouldParseSkeletons?$W(te):{}},z=c==="date"?dn.date:dn.time;return{val:{type:z,value:r,location:D,style:E},err:null}}}return{val:{type:c==="number"?dn.number:c==="date"?dn.date:dn.time,value:r,location:D,style:(o=v==null?void 0:v.style)!==null&&o!==void 0?o:null},err:null}}case"plural":case"selectordinal":case"select":{var Y=this.clonePosition();if(this.bumpSpace(),!this.bumpIf(","))return this.error(qt.EXPECT_SELECT_ARGUMENT_OPTIONS,Gt(Y,Fm({},Y)));this.bumpSpace();var K=this.parseIdentifierIfPossible(),ue=0;if(c!=="select"&&K.value==="offset"){if(!this.bumpIf(":"))return this.error(qt.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,Gt(this.clonePosition(),this.clonePosition()));this.bumpSpace();var b=this.tryParseDecimalInteger(qt.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,qt.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE);if(b.err)return b;this.bumpSpace(),K=this.parseIdentifierIfPossible(),ue=b.val}var oe=this.tryParsePluralOrSelectOptions(e,c,n,K);if(oe.err)return oe;var L=this.tryParseArgumentClose(i);if(L.err)return L;var fe=Gt(i,this.clonePosition());return c==="select"?{val:{type:dn.select,value:r,options:tR(oe.val),location:fe},err:null}:{val:{type:dn.plural,value:r,options:tR(oe.val),offset:ue,pluralType:c==="plural"?"cardinal":"ordinal",location:fe},err:null}}default:return this.error(qt.INVALID_ARGUMENT_TYPE,Gt(a,f))}},t.prototype.tryParseArgumentClose=function(e){return this.isEOF()||this.char()!==125?this.error(qt.EXPECT_ARGUMENT_CLOSING_BRACE,Gt(e,this.clonePosition())):(this.bump(),{val:!0,err:null})},t.prototype.parseSimpleArgStyleIfPossible=function(){for(var e=0,n=this.clonePosition();!this.isEOF();){var r=this.char();switch(r){case 39:{this.bump();var i=this.clonePosition();if(!this.bumpUntil("'"))return this.error(qt.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE,Gt(i,this.clonePosition()));this.bump();break}case 123:{e+=1,this.bump();break}case 125:{if(e>0)e-=1;else return{val:this.message.slice(n.offset,this.offset()),err:null};break}default:this.bump();break}}return{val:this.message.slice(n.offset,this.offset()),err:null}},t.prototype.parseNumberSkeletonFromString=function(e,n){var r=[];try{r=KW(e)}catch{return this.error(qt.INVALID_NUMBER_SKELETON,n)}return{val:{type:Lh.number,tokens:r,location:n,parsedOptions:this.shouldParseSkeletons?JW(r):{}},err:null}},t.prototype.tryParsePluralOrSelectOptions=function(e,n,r,i){for(var o,a=!1,c=[],f=new Set,v=i.value,y=i.location;;){if(v.length===0){var b=this.clonePosition();if(n!=="select"&&this.bumpIf("=")){var E=this.tryParseDecimalInteger(qt.EXPECT_PLURAL_ARGUMENT_SELECTOR,qt.INVALID_PLURAL_ARGUMENT_SELECTOR);if(E.err)return E;y=Gt(b,this.clonePosition()),v=this.message.slice(b.offset,this.offset())}else break}if(f.has(v))return this.error(n==="select"?qt.DUPLICATE_SELECT_ARGUMENT_SELECTOR:qt.DUPLICATE_PLURAL_ARGUMENT_SELECTOR,y);v==="other"&&(a=!0),this.bumpSpace();var I=this.clonePosition();if(!this.bumpIf("{"))return this.error(n==="select"?qt.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT:qt.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT,Gt(this.clonePosition(),this.clonePosition()));var L=this.parseMessage(e+1,n,r);if(L.err)return L;var D=this.tryParseArgumentClose(I);if(D.err)return D;c.push([v,{value:L.val,location:Gt(I,this.clonePosition())}]),f.add(v),this.bumpSpace(),o=this.parseIdentifierIfPossible(),v=o.value,y=o.location}return c.length===0?this.error(n==="select"?qt.EXPECT_SELECT_ARGUMENT_SELECTOR:qt.EXPECT_PLURAL_ARGUMENT_SELECTOR,Gt(this.clonePosition(),this.clonePosition())):this.requiresOtherClause&&!a?this.error(qt.MISSING_OTHER_CLAUSE,Gt(this.clonePosition(),this.clonePosition())):{val:c,err:null}},t.prototype.tryParseDecimalInteger=function(e,n){var r=1,i=this.clonePosition();this.bumpIf("+")||this.bumpIf("-")&&(r=-1);for(var o=!1,a=0;!this.isEOF();){var c=this.char();if(c>=48&&c<=57)o=!0,a=a*10+(c-48),this.bump();else break}var f=Gt(i,this.clonePosition());return o?(a*=r,u9(a)?{val:a,err:null}:this.error(n,f)):this.error(e,f)},t.prototype.offset=function(){return this.position.offset},t.prototype.isEOF=function(){return this.offset()===this.message.length},t.prototype.clonePosition=function(){return{offset:this.position.offset,line:this.position.line,column:this.position.column}},t.prototype.char=function(){var e=this.position.offset;if(e>=this.message.length)throw Error("out of bound");var n=AM(this.message,e);if(n===void 0)throw Error("Offset ".concat(e," is at invalid UTF-16 code unit boundary"));return n},t.prototype.error=function(e,n){return{val:null,err:{kind:e,message:this.message,location:n}}},t.prototype.bump=function(){if(!this.isEOF()){var e=this.char();e===10?(this.position.line+=1,this.position.column=1,this.position.offset+=1):(this.position.column+=1,this.position.offset+=e<65536?1:2)}},t.prototype.bumpIf=function(e){if(eR(this.message,e,this.offset())){for(var n=0;n<e.length;n++)this.bump();return!0}return!1},t.prototype.bumpUntil=function(e){var n=this.offset(),r=this.message.indexOf(e,n);return r>=0?(this.bumpTo(r),!0):(this.bumpTo(this.message.length),!1)},t.prototype.bumpTo=function(e){if(this.offset()>e)throw Error("targetOffset ".concat(e," must be greater than or equal to the current offset ").concat(this.offset()));for(e=Math.min(e,this.message.length);;){var n=this.offset();if(n===e)break;if(n>e)throw Error("targetOffset ".concat(e," is at invalid UTF-16 code unit boundary"));if(this.bump(),this.isEOF())break}},t.prototype.bumpSpace=function(){for(;!this.isEOF()&&RM(this.char());)this.bump()},t.prototype.peek=function(){if(this.isEOF())return null;var e=this.char(),n=this.offset(),r=this.message.charCodeAt(n+(e>=65536?2:1));return r??null},t}();function JS(t){return t>=97&&t<=122||t>=65&&t<=90}function d9(t){return JS(t)||t===47}function p9(t){return t===45||t===46||t>=48&&t<=57||t===95||t>=97&&t<=122||t>=65&&t<=90||t==183||t>=192&&t<=214||t>=216&&t<=246||t>=248&&t<=893||t>=895&&t<=8191||t>=8204&&t<=8205||t>=8255&&t<=8256||t>=8304&&t<=8591||t>=11264&&t<=12271||t>=12289&&t<=55295||t>=63744&&t<=64975||t>=65008&&t<=65533||t>=65536&&t<=983039}function RM(t){return t>=9&&t<=13||t===32||t===133||t>=8206&&t<=8207||t===8232||t===8233}function v9(t){return t>=33&&t<=35||t===36||t>=37&&t<=39||t===40||t===41||t===42||t===43||t===44||t===45||t>=46&&t<=47||t>=58&&t<=59||t>=60&&t<=62||t>=63&&t<=64||t===91||t===92||t===93||t===94||t===96||t===123||t===124||t===125||t===126||t===161||t>=162&&t<=165||t===166||t===167||t===169||t===171||t===172||t===174||t===176||t===177||t===182||t===187||t===191||t===215||t===247||t>=8208&&t<=8213||t>=8214&&t<=8215||t===8216||t===8217||t===8218||t>=8219&&t<=8220||t===8221||t===8222||t===8223||t>=8224&&t<=8231||t>=8240&&t<=8248||t===8249||t===8250||t>=8251&&t<=8254||t>=8257&&t<=8259||t===8260||t===8261||t===8262||t>=8263&&t<=8273||t===8274||t===8275||t>=8277&&t<=8286||t>=8592&&t<=8596||t>=8597&&t<=8601||t>=8602&&t<=8603||t>=8604&&t<=8607||t===8608||t>=8609&&t<=8610||t===8611||t>=8612&&t<=8613||t===8614||t>=8615&&t<=8621||t===8622||t>=8623&&t<=8653||t>=8654&&t<=8655||t>=8656&&t<=8657||t===8658||t===8659||t===8660||t>=8661&&t<=8691||t>=8692&&t<=8959||t>=8960&&t<=8967||t===8968||t===8969||t===8970||t===8971||t>=8972&&t<=8991||t>=8992&&t<=8993||t>=8994&&t<=9e3||t===9001||t===9002||t>=9003&&t<=9083||t===9084||t>=9085&&t<=9114||t>=9115&&t<=9139||t>=9140&&t<=9179||t>=9180&&t<=9185||t>=9186&&t<=9254||t>=9255&&t<=9279||t>=9280&&t<=9290||t>=9291&&t<=9311||t>=9472&&t<=9654||t===9655||t>=9656&&t<=9664||t===9665||t>=9666&&t<=9719||t>=9720&&t<=9727||t>=9728&&t<=9838||t===9839||t>=9840&&t<=10087||t===10088||t===10089||t===10090||t===10091||t===10092||t===10093||t===10094||t===10095||t===10096||t===10097||t===10098||t===10099||t===10100||t===10101||t>=10132&&t<=10175||t>=10176&&t<=10180||t===10181||t===10182||t>=10183&&t<=10213||t===10214||t===10215||t===10216||t===10217||t===10218||t===10219||t===10220||t===10221||t===10222||t===10223||t>=10224&&t<=10239||t>=10240&&t<=10495||t>=10496&&t<=10626||t===10627||t===10628||t===10629||t===10630||t===10631||t===10632||t===10633||t===10634||t===10635||t===10636||t===10637||t===10638||t===10639||t===10640||t===10641||t===10642||t===10643||t===10644||t===10645||t===10646||t===10647||t===10648||t>=10649&&t<=10711||t===10712||t===10713||t===10714||t===10715||t>=10716&&t<=10747||t===10748||t===10749||t>=10750&&t<=11007||t>=11008&&t<=11055||t>=11056&&t<=11076||t>=11077&&t<=11078||t>=11079&&t<=11084||t>=11085&&t<=11123||t>=11124&&t<=11125||t>=11126&&t<=11157||t===11158||t>=11159&&t<=11263||t>=11776&&t<=11777||t===11778||t===11779||t===11780||t===11781||t>=11782&&t<=11784||t===11785||t===11786||t===11787||t===11788||t===11789||t>=11790&&t<=11798||t===11799||t>=11800&&t<=11801||t===11802||t===11803||t===11804||t===11805||t>=11806&&t<=11807||t===11808||t===11809||t===11810||t===11811||t===11812||t===11813||t===11814||t===11815||t===11816||t===11817||t>=11818&&t<=11822||t===11823||t>=11824&&t<=11833||t>=11834&&t<=11835||t>=11836&&t<=11839||t===11840||t===11841||t===11842||t>=11843&&t<=11855||t>=11856&&t<=11857||t===11858||t>=11859&&t<=11903||t>=12289&&t<=12291||t===12296||t===12297||t===12298||t===12299||t===12300||t===12301||t===12302||t===12303||t===12304||t===12305||t>=12306&&t<=12307||t===12308||t===12309||t===12310||t===12311||t===12312||t===12313||t===12314||t===12315||t===12316||t===12317||t>=12318&&t<=12319||t===12320||t===12336||t===64830||t===64831||t>=65093&&t<=65094}function ZS(t){t.forEach(function(e){if(delete e.location,EM(e)||bM(e))for(var n in e.options)delete e.options[n].location,ZS(e.options[n].value);else yM(e)&&TM(e.style)||(_M(e)||wM(e))&&KS(e.style)?delete e.style.location:SM(e)&&ZS(e.children)})}function g9(t,e){e===void 0&&(e={}),e=Fm({shouldParseSkeletons:!0,requiresOtherClause:!0},e);var n=new f9(t,e).parse();if(n.err){var r=SyntaxError(qt[n.err.kind]);throw r.location=n.err.location,r.originalMessage=n.err.message,r}return e!=null&&e.captureLocation||ZS(n.val),n.val}function Ss(t,e){var n=e&&e.cache?e.cache:b9,r=e&&e.serializer?e.serializer:E9,i=e&&e.strategy?e.strategy:y9;return i(t,{cache:n,serializer:r})}function m9(t){return t==null||typeof t=="number"||typeof t=="boolean"}function OM(t,e,n,r){var i=m9(r)?r:n(r),o=e.get(i);return typeof o>"u"&&(o=t.call(this,r),e.set(i,o)),o}function PM(t,e,n){var r=Array.prototype.slice.call(arguments,3),i=n(r),o=e.get(i);return typeof o>"u"&&(o=t.apply(this,r),e.set(i,o)),o}function uI(t,e,n,r,i){return n.bind(e,t,r,i)}function y9(t,e){var n=t.length===1?OM:PM;return uI(t,this,n,e.cache.create(),e.serializer)}function _9(t,e){return uI(t,this,PM,e.cache.create(),e.serializer)}function w9(t,e){return uI(t,this,OM,e.cache.create(),e.serializer)}var E9=function(){return JSON.stringify(arguments)};function lI(){this.cache=Object.create(null)}lI.prototype.get=function(t){return this.cache[t]};lI.prototype.set=function(t,e){this.cache[t]=e};var b9={create:function(){return new lI}},Ts={variadic:_9,monadic:w9},Ls;(function(t){t.MISSING_VALUE="MISSING_VALUE",t.INVALID_VALUE="INVALID_VALUE",t.MISSING_INTL_API="MISSING_INTL_API"})(Ls||(Ls={}));var Fu=function(t){e_(e,t);function e(n,r,i){var o=t.call(this,n)||this;return o.code=r,o.originalMessage=i,o}return e.prototype.toString=function(){return"[formatjs Error: ".concat(this.code,"] ").concat(this.message)},e}(Error),rR=function(t){e_(e,t);function e(n,r,i,o){return t.call(this,'Invalid values for "'.concat(n,'": "').concat(r,'". Options are "').concat(Object.keys(i).join('", "'),'"'),Ls.INVALID_VALUE,o)||this}return e}(Fu),S9=function(t){e_(e,t);function e(n,r,i){return t.call(this,'Value for "'.concat(n,'" must be of type ').concat(r),Ls.INVALID_VALUE,i)||this}return e}(Fu),T9=function(t){e_(e,t);function e(n,r){return t.call(this,'The intl string context variable "'.concat(n,'" was not provided to the string "').concat(r,'"'),Ls.MISSING_VALUE,r)||this}return e}(Fu),fi;(function(t){t[t.literal=0]="literal",t[t.object=1]="object"})(fi||(fi={}));function I9(t){return t.length<2?t:t.reduce(function(e,n){var r=e[e.length-1];return!r||r.type!==fi.literal||n.type!==fi.literal?e.push(n):r.value+=n.value,e},[])}function DM(t){return typeof t=="function"}function Yg(t,e,n,r,i,o,a){if(t.length===1&&X2(t[0]))return[{type:fi.literal,value:t[0].value}];for(var c=[],f=0,v=t;f<v.length;f++){var y=v[f];if(X2(y)){c.push({type:fi.literal,value:y.value});continue}if(WW(y)){typeof o=="number"&&c.push({type:fi.literal,value:n.getNumberFormat(e).format(o)});continue}var b=y.value;if(!(i&&b in i))throw new T9(b,a);var E=i[b];if(qW(y)){(!E||typeof E=="string"||typeof E=="number")&&(E=typeof E=="string"||typeof E=="number"?String(E):""),c.push({type:typeof E=="string"?fi.literal:fi.object,value:E});continue}if(_M(y)){var I=typeof y.style=="string"?r.date[y.style]:KS(y.style)?y.style.parsedOptions:void 0;c.push({type:fi.literal,value:n.getDateTimeFormat(e,I).format(E)});continue}if(wM(y)){var I=typeof y.style=="string"?r.time[y.style]:KS(y.style)?y.style.parsedOptions:void 0;c.push({type:fi.literal,value:n.getDateTimeFormat(e,I).format(E)});continue}if(yM(y)){var I=typeof y.style=="string"?r.number[y.style]:TM(y.style)?y.style.parsedOptions:void 0;I&&I.scale&&(E=E*(I.scale||1)),c.push({type:fi.literal,value:n.getNumberFormat(e,I).format(E)});continue}if(SM(y)){var L=y.children,D=y.value,te=i[D];if(!DM(te))throw new S9(D,"function",a);var z=Yg(L,e,n,r,i,o),Y=te(z.map(function(oe){return oe.value}));Array.isArray(Y)||(Y=[Y]),c.push.apply(c,Y.map(function(oe){return{type:typeof oe=="string"?fi.literal:fi.object,value:oe}}))}if(EM(y)){var K=y.options[E]||y.options.other;if(!K)throw new rR(y.value,E,Object.keys(y.options),a);c.push.apply(c,Yg(K.value,e,n,r,i));continue}if(bM(y)){var K=y.options["=".concat(E)];if(!K){if(!Intl.PluralRules)throw new Fu(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,Ls.MISSING_INTL_API,a);var ue=n.getPluralRules(e,{type:y.pluralType}).select(E-(y.offset||0));K=y.options[ue]||y.options.other}if(!K)throw new rR(y.value,E,Object.keys(y.options),a);c.push.apply(c,Yg(K.value,e,n,r,i,E-(y.offset||0)));continue}}return I9(c)}function x9(t,e){return e?ou(ou(ou({},t||{}),e||{}),Object.keys(t).reduce(function(n,r){return n[r]=ou(ou({},t[r]),e[r]||{}),n},{})):t}function C9(t,e){return e?Object.keys(t).reduce(function(n,r){return n[r]=x9(t[r],e[r]),n},ou({},t)):t}function jE(t){return{create:function(){return{get:function(e){return t[e]},set:function(e,n){t[e]=n}}}}}function N9(t){return t===void 0&&(t={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:Ss(function(){for(var e,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return new((e=Intl.NumberFormat).bind.apply(e,ME([void 0],n,!1)))},{cache:jE(t.number),strategy:Ts.variadic}),getDateTimeFormat:Ss(function(){for(var e,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return new((e=Intl.DateTimeFormat).bind.apply(e,ME([void 0],n,!1)))},{cache:jE(t.dateTime),strategy:Ts.variadic}),getPluralRules:Ss(function(){for(var e,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return new((e=Intl.PluralRules).bind.apply(e,ME([void 0],n,!1)))},{cache:jE(t.pluralRules),strategy:Ts.variadic})}}var LM=function(){function t(e,n,r,i){var o=this;if(n===void 0&&(n=t.defaultLocale),this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(a){var c=o.formatToParts(a);if(c.length===1)return c[0].value;var f=c.reduce(function(v,y){return!v.length||y.type!==fi.literal||typeof v[v.length-1]!="string"?v.push(y.value):v[v.length-1]+=y.value,v},[]);return f.length<=1?f[0]||"":f},this.formatToParts=function(a){return Yg(o.ast,o.locales,o.formatters,o.formats,a,void 0,o.message)},this.resolvedOptions=function(){return{locale:Intl.NumberFormat.supportedLocalesOf(o.locales)[0]}},this.getAst=function(){return o.ast},typeof e=="string"){if(this.message=e,!t.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");this.ast=t.__parse(e,{ignoreTag:i==null?void 0:i.ignoreTag})}else this.ast=e;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=C9(t.formats,r),this.locales=n,this.formatters=i&&i.formatters||N9(this.formatterCache)}return Object.defineProperty(t,"defaultLocale",{get:function(){return t.memoizedDefaultLocale||(t.memoizedDefaultLocale=new Intl.NumberFormat().resolvedOptions().locale),t.memoizedDefaultLocale},enumerable:!1,configurable:!0}),t.memoizedDefaultLocale=null,t.__parse=g9,t.formats={number:{integer:{maximumFractionDigits:0},currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},t}(),ti;(function(t){t.FORMAT_ERROR="FORMAT_ERROR",t.UNSUPPORTED_FORMATTER="UNSUPPORTED_FORMATTER",t.INVALID_CONFIG="INVALID_CONFIG",t.MISSING_DATA="MISSING_DATA",t.MISSING_TRANSLATION="MISSING_TRANSLATION"})(ti||(ti={}));var Ui=function(t){Xl(e,t);function e(n,r,i){var o=this,a=i?i instanceof Error?i:new Error(String(i)):void 0;return o=t.call(this,"[@formatjs/intl Error ".concat(n,"] ").concat(r,` 
`).concat(a?`
`.concat(a.message,`
`).concat(a.stack):""))||this,o.code=n,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(o,e),o}return e}(Error),A9=function(t){Xl(e,t);function e(n,r){return t.call(this,ti.UNSUPPORTED_FORMATTER,n,r)||this}return e}(Ui),k9=function(t){Xl(e,t);function e(n,r){return t.call(this,ti.INVALID_CONFIG,n,r)||this}return e}(Ui),iR=function(t){Xl(e,t);function e(n,r){return t.call(this,ti.MISSING_DATA,n,r)||this}return e}(Ui),cI=function(t){Xl(e,t);function e(n,r,i){return t.call(this,ti.FORMAT_ERROR,"".concat(n,` 
Locale: `).concat(r,`
`),i)||this}return e}(Ui),UE=function(t){Xl(e,t);function e(n,r,i,o){var a=t.call(this,"".concat(n,` 
MessageID: `).concat(i==null?void 0:i.id,`
Default Message: `).concat(i==null?void 0:i.defaultMessage,`
Description: `).concat(i==null?void 0:i.description,` 
`),r,o)||this;return a.descriptor=i,a}return e}(cI),R9=function(t){Xl(e,t);function e(n,r){var i=t.call(this,ti.MISSING_TRANSLATION,'Missing message: "'.concat(n.id,'" for locale "').concat(r,'", using ').concat(n.defaultMessage?"default message":"id"," as fallback."))||this;return i.descriptor=n,i}return e}(Ui);function Ql(t,e,n){return n===void 0&&(n={}),e.reduce(function(r,i){return i in t?r[i]=t[i]:i in n&&(r[i]=n[i]),r},{})}var O9=function(t){},MM={formats:{},messages:{},timeZone:void 0,defaultLocale:"en",defaultFormats:{},fallbackOnEmptyString:!0,onError:O9};function FM(){return{dateTime:{},number:{},message:{},relativeTime:{},pluralRules:{},list:{},displayNames:{}}}function ul(t){return{create:function(){return{get:function(e){return t[e]},set:function(e,n){t[e]=n}}}}}function P9(t){t===void 0&&(t=FM());var e=Intl.RelativeTimeFormat,n=Intl.ListFormat,r=Intl.DisplayNames,i=Ss(function(){for(var c,f=[],v=0;v<arguments.length;v++)f[v]=arguments[v];return new((c=Intl.DateTimeFormat).bind.apply(c,Ac([void 0],f,!1)))},{cache:ul(t.dateTime),strategy:Ts.variadic}),o=Ss(function(){for(var c,f=[],v=0;v<arguments.length;v++)f[v]=arguments[v];return new((c=Intl.NumberFormat).bind.apply(c,Ac([void 0],f,!1)))},{cache:ul(t.number),strategy:Ts.variadic}),a=Ss(function(){for(var c,f=[],v=0;v<arguments.length;v++)f[v]=arguments[v];return new((c=Intl.PluralRules).bind.apply(c,Ac([void 0],f,!1)))},{cache:ul(t.pluralRules),strategy:Ts.variadic});return{getDateTimeFormat:i,getNumberFormat:o,getMessageFormat:Ss(function(c,f,v,y){return new LM(c,f,v,Sn({formatters:{getNumberFormat:o,getDateTimeFormat:i,getPluralRules:a}},y||{}))},{cache:ul(t.message),strategy:Ts.variadic}),getRelativeTimeFormat:Ss(function(){for(var c=[],f=0;f<arguments.length;f++)c[f]=arguments[f];return new(e.bind.apply(e,Ac([void 0],c,!1)))},{cache:ul(t.relativeTime),strategy:Ts.variadic}),getPluralRules:a,getListFormat:Ss(function(){for(var c=[],f=0;f<arguments.length;f++)c[f]=arguments[f];return new(n.bind.apply(n,Ac([void 0],c,!1)))},{cache:ul(t.list),strategy:Ts.variadic}),getDisplayNames:Ss(function(){for(var c=[],f=0;f<arguments.length;f++)c[f]=arguments[f];return new(r.bind.apply(r,Ac([void 0],c,!1)))},{cache:ul(t.displayNames),strategy:Ts.variadic})}}function hI(t,e,n,r){var i=t&&t[e],o;if(i&&(o=i[n]),o)return o;r(new A9("No ".concat(e," format named: ").concat(n)))}function vg(t,e){return Object.keys(t).reduce(function(n,r){return n[r]=Sn({timeZone:e},t[r]),n},{})}function oR(t,e){var n=Object.keys(Sn(Sn({},t),e));return n.reduce(function(r,i){return r[i]=Sn(Sn({},t[i]||{}),e[i]||{}),r},{})}function sR(t,e){if(!e)return t;var n=LM.formats;return Sn(Sn(Sn({},n),t),{date:oR(vg(n.date,e),vg(t.date||{},e)),time:oR(vg(n.time,e),vg(t.time||{},e))})}function jM(t,e,n,r,i){var o=t.locale,a=t.formats,c=t.messages,f=t.defaultLocale,v=t.defaultFormats,y=t.fallbackOnEmptyString,b=t.onError,E=t.timeZone,I=t.defaultRichTextElements;n===void 0&&(n={id:""});var L=n.id,D=n.defaultMessage;mM(!!L,"[@formatjs/intl] An `id` must be provided to format a message. You can either:\n1. Configure your build toolchain with [babel-plugin-formatjs](https://formatjs.io/docs/tooling/babel-plugin)\nor [@formatjs/ts-transformer](https://formatjs.io/docs/tooling/ts-transformer) OR\n2. Configure your `eslint` config to include [eslint-plugin-formatjs](https://formatjs.io/docs/tooling/linter#enforce-id)\nto autofix this issue");var te=String(L),z=c&&Object.prototype.hasOwnProperty.call(c,te)&&c[te];if(Array.isArray(z)&&z.length===1&&z[0].type===dn.literal)return z[0].value;if(!r&&z&&typeof z=="string"&&!I)return z.replace(/'\{(.*?)\}'/gi,"{$1}");if(r=Sn(Sn({},I),r||{}),a=sR(a,E),v=sR(v,E),!z){if(y===!1&&z==="")return z;if((!D||o&&o.toLowerCase()!==f.toLowerCase())&&b(new R9(n,o)),D)try{var Y=e.getMessageFormat(D,f,v,i);return Y.format(r)}catch(K){return b(new UE('Error formatting default message for: "'.concat(te,'", rendering default message verbatim'),o,n,K)),typeof D=="string"?D:te}return te}try{var Y=e.getMessageFormat(z,o,a,Sn({formatters:e},i||{}));return Y.format(r)}catch(K){b(new UE('Error formatting message: "'.concat(te,'", using ').concat(D?"default message":"id"," as fallback."),o,n,K))}if(D)try{var Y=e.getMessageFormat(D,f,v,i);return Y.format(r)}catch(K){b(new UE('Error formatting the default message for: "'.concat(te,'", rendering message verbatim'),o,n,K))}return typeof z=="string"?z:typeof D=="string"?D:te}var UM=["localeMatcher","formatMatcher","timeZone","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName","hourCycle","dateStyle","timeStyle","calendar","numberingSystem"];function t_(t,e,n,r){var i=t.locale,o=t.formats,a=t.onError,c=t.timeZone;r===void 0&&(r={});var f=r.format,v=Sn(Sn({},c&&{timeZone:c}),f&&hI(o,e,f,a)),y=Ql(r,UM,v);return e==="time"&&!y.hour&&!y.minute&&!y.second&&!y.timeStyle&&!y.dateStyle&&(y=Sn(Sn({},y),{hour:"numeric",minute:"numeric"})),n(i,y)}function D9(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n[0],o=n[1],a=o===void 0?{}:o,c=typeof i=="string"?new Date(i||0):i;try{return t_(t,"date",e,a).format(c)}catch(f){t.onError(new Ui(ti.FORMAT_ERROR,"Error formatting date.",f))}return String(c)}function L9(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n[0],o=n[1],a=o===void 0?{}:o,c=typeof i=="string"?new Date(i||0):i;try{return t_(t,"time",e,a).format(c)}catch(f){t.onError(new Ui(ti.FORMAT_ERROR,"Error formatting time.",f))}return String(c)}function M9(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n[0],o=n[1],a=n[2],c=a===void 0?{}:a,f=t.timeZone,v=t.locale,y=t.onError,b=Ql(c,UM,f?{timeZone:f}:{});try{return e(v,b).formatRange(i,o)}catch(E){y(new Ui(ti.FORMAT_ERROR,"Error formatting date time range.",E))}return String(i)}function F9(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n[0],o=n[1],a=o===void 0?{}:o,c=typeof i=="string"?new Date(i||0):i;try{return t_(t,"date",e,a).formatToParts(c)}catch(f){t.onError(new Ui(ti.FORMAT_ERROR,"Error formatting date.",f))}return[]}function j9(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n[0],o=n[1],a=o===void 0?{}:o,c=typeof i=="string"?new Date(i||0):i;try{return t_(t,"time",e,a).formatToParts(c)}catch(f){t.onError(new Ui(ti.FORMAT_ERROR,"Error formatting time.",f))}return[]}var U9=["localeMatcher","style","type","fallback"];function V9(t,e,n,r){var i=t.locale,o=t.onError,a=Intl.DisplayNames;a||o(new Fu(`Intl.DisplayNames is not available in this environment.
Try polyfilling it using "@formatjs/intl-displaynames"
`,Ls.MISSING_INTL_API));var c=Ql(r,U9);try{return e(i,c).of(n)}catch(f){o(new Ui(ti.FORMAT_ERROR,"Error formatting display name.",f))}}var B9=["localeMatcher","type","style"],aR=Date.now();function z9(t){return"".concat(aR,"_").concat(t,"_").concat(aR)}function q9(t,e,n,r){r===void 0&&(r={});var i=VM(t,e,n,r).reduce(function(o,a){var c=a.value;return typeof c!="string"?o.push(c):typeof o[o.length-1]=="string"?o[o.length-1]+=c:o.push(c),o},[]);return i.length===1?i[0]:i}function VM(t,e,n,r){var i=t.locale,o=t.onError;r===void 0&&(r={});var a=Intl.ListFormat;a||o(new Fu(`Intl.ListFormat is not available in this environment.
Try polyfilling it using "@formatjs/intl-listformat"
`,Ls.MISSING_INTL_API));var c=Ql(r,B9);try{var f={},v=n.map(function(y,b){if(typeof y=="object"){var E=z9(b);return f[E]=y,E}return String(y)});return e(i,c).formatToParts(v).map(function(y){return y.type==="literal"?y:Sn(Sn({},y),{value:f[y.value]||y.value})})}catch(y){o(new Ui(ti.FORMAT_ERROR,"Error formatting list.",y))}return n}var W9=["localeMatcher","type"];function G9(t,e,n,r){var i=t.locale,o=t.onError;r===void 0&&(r={}),Intl.PluralRules||o(new Fu(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,Ls.MISSING_INTL_API));var a=Ql(r,W9);try{return e(i,a).select(n)}catch(c){o(new cI("Error formatting plural.",i,c))}return"other"}var $9=["numeric","style"];function H9(t,e,n){var r=t.locale,i=t.formats,o=t.onError;n===void 0&&(n={});var a=n.format,c=!!a&&hI(i,"relative",a,o)||{},f=Ql(n,$9,c);return e(r,f)}function K9(t,e,n,r,i){i===void 0&&(i={}),r||(r="second");var o=Intl.RelativeTimeFormat;o||t.onError(new Fu(`Intl.RelativeTimeFormat is not available in this environment.
Try polyfilling it using "@formatjs/intl-relativetimeformat"
`,Ls.MISSING_INTL_API));try{return H9(t,e,i).format(n,r)}catch(a){t.onError(new cI("Error formatting relative time.",t.locale,a))}return String(n)}var Y9=["localeMatcher","style","currency","currencyDisplay","unit","unitDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","currencyDisplay","currencySign","notation","signDisplay","unit","unitDisplay","numberingSystem"];function BM(t,e,n){var r=t.locale,i=t.formats,o=t.onError;n===void 0&&(n={});var a=n.format,c=a&&hI(i,"number",a,o)||{},f=Ql(n,Y9,c);return e(r,f)}function X9(t,e,n,r){r===void 0&&(r={});try{return BM(t,e,r).format(n)}catch(i){t.onError(new Ui(ti.FORMAT_ERROR,"Error formatting number.",i))}return String(n)}function Q9(t,e,n,r){r===void 0&&(r={});try{return BM(t,e,r).formatToParts(n)}catch(i){t.onError(new Ui(ti.FORMAT_ERROR,"Error formatting number.",i))}return[]}function J9(t){var e=t?t[Object.keys(t)[0]]:void 0;return typeof e=="string"}function Z9(t){t.defaultRichTextElements&&J9(t.messages||{})&&console.warn(`[@formatjs/intl] "defaultRichTextElements" was specified but "message" was not pre-compiled. 
Please consider using "@formatjs/cli" to pre-compile your messages for performance.
For more details see https://formatjs.io/docs/getting-started/message-distribution`)}function eG(t,e){var n=P9(e),r=Sn(Sn({},MM),t),i=r.locale,o=r.defaultLocale,a=r.onError;return i?!Intl.NumberFormat.supportedLocalesOf(i).length&&a?a(new iR('Missing locale data for locale: "'.concat(i,'" in Intl.NumberFormat. Using default locale: "').concat(o,'" as fallback. See https://formatjs.io/docs/react-intl#runtime-requirements for more details'))):!Intl.DateTimeFormat.supportedLocalesOf(i).length&&a&&a(new iR('Missing locale data for locale: "'.concat(i,'" in Intl.DateTimeFormat. Using default locale: "').concat(o,'" as fallback. See https://formatjs.io/docs/react-intl#runtime-requirements for more details'))):(a&&a(new k9('"locale" was not configured, using "'.concat(o,'" as fallback. See https://formatjs.io/docs/react-intl/api#intlshape for more details'))),r.locale=r.defaultLocale||"en"),Z9(r),Sn(Sn({},r),{formatters:n,formatNumber:X9.bind(null,r,n.getNumberFormat),formatNumberToParts:Q9.bind(null,r,n.getNumberFormat),formatRelativeTime:K9.bind(null,r,n.getRelativeTimeFormat),formatDate:D9.bind(null,r,n.getDateTimeFormat),formatDateToParts:F9.bind(null,r,n.getDateTimeFormat),formatTime:L9.bind(null,r,n.getDateTimeFormat),formatDateTimeRange:M9.bind(null,r,n.getDateTimeFormat),formatTimeToParts:j9.bind(null,r,n.getDateTimeFormat),formatPlural:G9.bind(null,r,n.getPluralRules),formatMessage:jM.bind(null,r,n),formatList:q9.bind(null,r,n.getListFormat),formatListToParts:VM.bind(null,r,n.getListFormat),formatDisplayName:V9.bind(null,r,n.getDisplayNames)})}function zM(t){mM(t,"[React Intl] Could not find required `intl` object. <IntlProvider> needs to exist in the component ancestry.")}var qM=aa(aa({},MM),{textComponent:ee.Fragment});function tG(t){return function(e){return t(ee.Children.toArray(e))}}function e1(t,e){if(t===e)return!0;if(!t||!e)return!1;var n=Object.keys(t),r=Object.keys(e),i=n.length;if(r.length!==i)return!1;for(var o=0;o<i;o++){var a=n[o];if(t[a]!==e[a]||!Object.prototype.hasOwnProperty.call(e,a))return!1}return!0}var fI=ee.createContext(null);fI.Consumer;var nG=fI.Provider,rG=nG,iG=fI;function On(){var t=ee.useContext(iG);return zM(t),t}var t1;(function(t){t.formatDate="FormattedDate",t.formatTime="FormattedTime",t.formatNumber="FormattedNumber",t.formatList="FormattedList",t.formatDisplayName="FormattedDisplayName"})(t1||(t1={}));var n1;(function(t){t.formatDate="FormattedDateParts",t.formatTime="FormattedTimeParts",t.formatNumber="FormattedNumberParts",t.formatList="FormattedListParts"})(n1||(n1={}));function WM(t){var e=function(n){var r=On(),i=n.value,o=n.children,a=Yd(n,["value","children"]),c=typeof i=="string"?new Date(i||0):i,f=t==="formatDate"?r.formatDateToParts(c,a):r.formatTimeToParts(c,a);return o(f)};return e.displayName=n1[t],e}function Ap(t){var e=function(n){var r=On(),i=n.value,o=n.children,a=Yd(n,["value","children"]),c=r[t](i,a);if(typeof o=="function")return o(c);var f=r.textComponent||ee.Fragment;return ee.createElement(f,null,c)};return e.displayName=t1[t],e}function VE(t){return{locale:t.locale,timeZone:t.timeZone,fallbackOnEmptyString:t.fallbackOnEmptyString,formats:t.formats,textComponent:t.textComponent,messages:t.messages,defaultLocale:t.defaultLocale,defaultFormats:t.defaultFormats,onError:t.onError,wrapRichTextChunksInFragment:t.wrapRichTextChunksInFragment,defaultRichTextElements:t.defaultRichTextElements}}function GM(t){return t&&Object.keys(t).reduce(function(e,n){var r=t[n];return e[n]=DM(r)?tG(r):r,e},{})}var oG=function(t,e,n,r){for(var i=[],o=4;o<arguments.length;o++)i[o-4]=arguments[o];var a=GM(r),c=jM.apply(void 0,DW([t,e,n,a],i,!1));return Array.isArray(c)?ee.Children.toArray(c):c},uR=function(t,e){var n=t.defaultRichTextElements,r=Yd(t,["defaultRichTextElements"]),i=GM(n),o=eG(aa(aa(aa({},qM),r),{defaultRichTextElements:i}),e);return aa(aa({},o),{formatMessage:oG.bind(null,{locale:o.locale,timeZone:o.timeZone,formats:o.formats,defaultLocale:o.defaultLocale,defaultFormats:o.defaultFormats,messages:o.messages,onError:o.onError,defaultRichTextElements:i},o.formatters)})},sG=function(t){PW(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.cache=FM(),n.state={cache:n.cache,intl:uR(VE(n.props),n.cache),prevConfig:VE(n.props)},n}return e.getDerivedStateFromProps=function(n,r){var i=r.prevConfig,o=r.cache,a=VE(n);return e1(i,a)?null:{intl:uR(a,o),prevConfig:a}},e.prototype.render=function(){return zM(this.state.intl),ee.createElement(rG,{value:this.state.intl},this.props.children)},e.displayName="IntlProvider",e.defaultProps=qM,e}(ee.PureComponent);const aG=sG;function uG(t,e){var n=t.values,r=Yd(t,["values"]),i=e.values,o=Yd(e,["values"]);return e1(i,n)&&e1(r,o)}function $M(t){var e=On(),n=e.formatMessage,r=e.textComponent,i=r===void 0?ee.Fragment:r,o=t.id,a=t.description,c=t.defaultMessage,f=t.values,v=t.children,y=t.tagName,b=y===void 0?i:y,E=t.ignoreTag,I={id:o,description:a,defaultMessage:c},L=n(I,f,{ignoreTag:E});return typeof v=="function"?v(Array.isArray(L)?L:[L]):b?ee.createElement(b,null,ee.Children.toArray(L)):ee.createElement(ee.Fragment,null,L)}$M.displayName="FormattedMessage";var HM=ee.memo($M,uG);HM.displayName="MemoizedFormattedMessage";const Jt=HM;Ap("formatDate");Ap("formatTime");Ap("formatNumber");Ap("formatList");Ap("formatDisplayName");WM("formatDate");WM("formatTime");const Te=Tp("div",({css:t,...e})=>({css:A8({display:"flex",minWidth:0,minHeight:0,flex:"none",alignSelf:"auto",alignItems:"stretch",flexDirection:"column",justifyContent:"flex-start",...t}),...e})),KM=t=>{const e=ee.useContext(hs);return F.jsxs(Te,{as:"svg",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 467.27 512",...t,children:[F.jsx("polygon",{fill:e.colors.shape,points:"352.33 159.67 432.16 239.45 432.16 399.13 319.29 512 93.55 512 159.67 445.87 0 286.25 319.29 286.25 272.55 239.45 272.55 79.84 352.33 0 465.26 112.87 352.33 112.87 352.33 159.67"}),F.jsxs("g",{children:[F.jsx("polygon",{fill:e.colors.pieces.mt1,points:"272.57 79.84 272.57 239.45 352.36 319.29 432.19 399.13 432.19 239.45 352.36 159.67 352.36 112.87 465.29 112.87 352.36 0 272.57 79.84"}),F.jsx("polygon",{fill:e.colors.pieces.st1,points:"93.58 512 319.32 512 432.19 399.13 319.32 286.25 93.58 512"}),F.jsx("polygon",{fill:e.colors.pieces.lt2,points:"159.67 445.87 239.48 366.05 319.31 286.24 0.03 286.24 159.67 445.87"})]})]})};var dI={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var r1=function(t,e){return r1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},r1(t,e)};function St(t,e){r1(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Tn=function(){return Tn=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Tn.apply(this,arguments)};function lG(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function cG(t,e,n,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(o=(i<3?a(o):i>3?a(e,n,o):a(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o}function hG(t,e){return function(n,r){e(n,r,t)}}function fG(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Ee(t,e,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function c(y){try{v(r.next(y))}catch(b){a(b)}}function f(y){try{v(r.throw(y))}catch(b){a(b)}}function v(y){y.done?o(y.value):i(y.value).then(c,f)}v((r=r.apply(t,e||[])).next())})}function we(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(v){return function(y){return f([v,y])}}function f(v){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=v[0]&2?i.return:v[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,v[1])).done)return o;switch(i=0,o&&(v=[v[0]&2,o.value]),v[0]){case 0:case 1:o=v;break;case 4:return n.label++,{value:v[1],done:!1};case 5:n.label++,i=v[1],v=[0];continue;case 7:v=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(v[0]===6||v[0]===2)){n=0;continue}if(v[0]===3&&(!o||v[1]>o[0]&&v[1]<o[3])){n.label=v[1];break}if(v[0]===6&&n.label<o[1]){n.label=o[1],o=v;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(v);break}o[2]&&n.ops.pop(),n.trys.pop();continue}v=e.call(t,n)}catch(y){v=[6,y],i=0}finally{r=o=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}}function dG(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function Kn(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Xd(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o}function Pa(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Xd(arguments[e]));return t}function eo(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],a=0,c=o.length;a<c;a++,i++)r[i]=o[a];return r}function Qd(t){return this instanceof Qd?(this.v=t,this):new Qd(t)}function pG(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(E){r[E]&&(i[E]=function(I){return new Promise(function(L,D){o.push([E,I,L,D])>1||c(E,I)})})}function c(E,I){try{f(r[E](I))}catch(L){b(o[0][3],L)}}function f(E){E.value instanceof Qd?Promise.resolve(E.value.v).then(v,y):b(o[0][2],E)}function v(E){c("next",E)}function y(E){c("throw",E)}function b(E,I){E(I),o.shift(),o.length&&c(o[0][0],o[0][1])}}function vG(t){var e,n;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,o){e[i]=t[i]?function(a){return(n=!n)?{value:Qd(t[i](a)),done:i==="return"}:o?o(a):a}:o}}function gG(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Kn=="function"?Kn(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(a){return new Promise(function(c,f){a=t[o](a),i(c,f,a.done,a.value)})}}function i(o,a,c,f){Promise.resolve(f).then(function(v){o({value:v,done:c})},a)}}function mG(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function yG(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function _G(t){return t&&t.__esModule?t:{default:t}}function wG(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function EG(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const bG=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Tn},__asyncDelegator:vG,__asyncGenerator:pG,__asyncValues:gG,__await:Qd,__awaiter:Ee,__classPrivateFieldGet:wG,__classPrivateFieldSet:EG,__decorate:cG,__exportStar:dG,__extends:St,__generator:we,__importDefault:_G,__importStar:yG,__makeTemplateObject:mG,__metadata:fG,__param:hG,__read:Xd,__rest:lG,__spread:Pa,__spreadArrays:eo,__values:Kn},Symbol.toStringTag,{value:"Module"})),pI=Q1(bG);var pt={};Object.defineProperty(pt,"__esModule",{value:!0});var SG=pI;/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jm={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var YM=function(t,e){if(!t)throw XM(e)},XM=function(t){return new Error("Firebase Database ("+jm.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var QM=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},TG=function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){var o=t[n++],a=t[n++],c=t[n++],f=((i&7)<<18|(o&63)<<12|(a&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{var o=t[n++],a=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|a&63)}}return e.join("")},vI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,c=a?t[i+1]:0,f=i+2<t.length,v=f?t[i+2]:0,y=o>>2,b=(o&3)<<4|c>>4,E=(c&15)<<2|v>>6,I=v&63;f||(I=64,a||(E=64)),r.push(n[y],n[b],n[E],n[I])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(QM(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):TG(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length,c=a?n[t.charAt(i)]:0;++i;var f=i<t.length,v=f?n[t.charAt(i)]:64;++i;var y=i<t.length,b=y?n[t.charAt(i)]:64;if(++i,o==null||c==null||v==null||b==null)throw Error();var E=o<<2|c>>4;if(r.push(E),v!==64){var I=c<<4&240|v>>2;if(r.push(I),b!==64){var L=v<<6&192|b;r.push(L)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},IG=function(t){var e=QM(t);return vI.encodeByteArray(e,!0)},i1=function(t){try{return vI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xG(t){return gI(void 0,t)}function gI(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:var n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(var r in e)e.hasOwnProperty(r)&&(t[r]=gI(t[r],e[r]));return t}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var CG=function(){function t(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(n,r){e.resolve=n,e.reject=r})}return t.prototype.wrapCallback=function(e){var n=this;return function(r,i){r?n.reject(r):n.resolve(i),typeof e=="function"&&(n.promise.catch(function(){}),e.length===1?e(r):e(r,i))}},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kp(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function NG(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(kp())}function AG(){try{return Object.prototype.toString.call(CP.process)==="[object process]"}catch{return!1}}function kG(){return typeof self=="object"&&self.self===self}function RG(){var t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function OG(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function PG(){return kp().indexOf("Electron/")>=0}function DG(){var t=kp();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function LG(){return kp().indexOf("MSAppHost/")>=0}function MG(){return jm.NODE_CLIENT===!0||jm.NODE_ADMIN===!0}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var FG="FirebaseError",JM=function(t){SG.__extends(e,t);function e(n,r){var i=t.call(this,r)||this;return i.code=n,i.name=FG,Object.setPrototypeOf(i,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,ZM.prototype.create),i}return e}(Error),ZM=function(){function t(e,n,r){this.service=e,this.serviceName=n,this.errors=r}return t.prototype.create=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];for(var i=n[0]||{},o=this.service+"/"+e,a=this.errors[e],c=a?jG(a,i):"Error",f=this.serviceName+": "+c+" ("+o+").",v=new JM(o,f),y=0,b=Object.keys(i);y<b.length;y++){var E=b[y];E.slice(-1)!=="_"&&(E in v&&console.warn('Overwriting FirebaseError base field "'+E+'" can cause unexpected behavior.'),v[E]=i[E])}return v},t}();function jG(t,e){return t.replace(UG,function(n,r){var i=e[r];return i!=null?i.toString():"<"+r+"?>"})}var UG=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1(t){return JSON.parse(t)}function VG(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rp=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=o1(i1(o[0])||""),n=o1(i1(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},BG=function(t){var e=Rp(t).claims,n=Math.floor(new Date().getTime()/1e3),r=0,i=0;return typeof e=="object"&&(e.hasOwnProperty("nbf")?r=e.nbf:e.hasOwnProperty("iat")&&(r=e.iat),e.hasOwnProperty("exp")?i=e.exp:i=r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},zG=function(t){var e=Rp(t).claims;return typeof e=="object"&&e.hasOwnProperty("iat")?e.iat:null},qG=function(t){var e=Rp(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},WG=function(t){var e=Rp(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GG(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function $G(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function HG(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function KG(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YG(t){for(var e=[],n=function(f,v){Array.isArray(v)?v.forEach(function(y){e.push(encodeURIComponent(f)+"="+encodeURIComponent(y))}):e.push(encodeURIComponent(f)+"="+encodeURIComponent(v))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r],a=o[0],c=o[1];n(a,c)}return e.length?"&"+e.join("&"):""}function XG(t){var e={},n=t.replace(/^\?/,"").split("&");return n.forEach(function(r){if(r){var i=r.split("=");e[i[0]]=i[1]}}),e}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var QG=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(e,n){n||(n=0);var r=this.W_;if(typeof e=="string")for(var i=0;i<16;i++)r[i]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(var i=0;i<16;i++)r[i]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(var i=16;i<80;i++){var o=r[i-3]^r[i-8]^r[i-14]^r[i-16];r[i]=(o<<1|o>>>31)&4294967295}for(var a=this.chain_[0],c=this.chain_[1],f=this.chain_[2],v=this.chain_[3],y=this.chain_[4],b,E,i=0;i<80;i++){i<40?i<20?(b=v^c&(f^v),E=1518500249):(b=c^f^v,E=1859775393):i<60?(b=c&f|v&(c|f),E=2400959708):(b=c^f^v,E=3395469782);var o=(a<<5|a>>>27)+b+y+E+r[i]&4294967295;y=v,v=f,f=(c<<30|c>>>2)&4294967295,c=a,a=o}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+c&4294967295,this.chain_[2]=this.chain_[2]+f&4294967295,this.chain_[3]=this.chain_[3]+v&4294967295,this.chain_[4]=this.chain_[4]+y&4294967295},t.prototype.update=function(e,n){if(e!=null){n===void 0&&(n=e.length);for(var r=n-this.blockSize,i=0,o=this.buf_,a=this.inbuf_;i<n;){if(a===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(o[a]=e.charCodeAt(i),++a,++i,a===this.blockSize){this.compress_(o),a=0;break}}else for(;i<n;)if(o[a]=e[i],++a,++i,a===this.blockSize){this.compress_(o),a=0;break}}this.inbuf_=a,this.total_+=n}},t.prototype.digest=function(){var e=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);for(var i=0,r=0;r<5;r++)for(var o=24;o>=0;o-=8)e[i]=this.chain_[r]>>o&255,++i;return e},t}();function JG(t,e){var n=new ZG(t,e);return n.subscribe.bind(n)}var ZG=function(){function t(e,n){var r=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(function(){e(r)}).catch(function(i){r.error(i)})}return t.prototype.next=function(e){this.forEachObserver(function(n){n.next(e)})},t.prototype.error=function(e){this.forEachObserver(function(n){n.error(e)}),this.close(e)},t.prototype.complete=function(){this.forEachObserver(function(e){e.complete()}),this.close()},t.prototype.subscribe=function(e,n,r){var i=this,o;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");t$(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:r},o.next===void 0&&(o.next=BE),o.error===void 0&&(o.error=BE),o.complete===void 0&&(o.complete=BE);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?o.error(i.finalError):o.complete()}catch{}}),this.observers.push(o),a},t.prototype.unsubscribeOne=function(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))},t.prototype.forEachObserver=function(e){if(!this.finalized)for(var n=0;n<this.observers.length;n++)this.sendOne(n,e)},t.prototype.sendOne=function(e,n){var r=this;this.task.then(function(){if(r.observers!==void 0&&r.observers[e]!==void 0)try{n(r.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})},t.prototype.close=function(e){var n=this;this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(function(){n.observers=void 0,n.onNoObservers=void 0}))},t}();function e$(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then(function(){t.apply(void 0,n)}).catch(function(i){e&&e(i)})}}function t$(t,e){if(typeof t!="object"||t===null)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&typeof t[i]=="function")return!0}return!1}function BE(){}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var n$=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=n===0?"none":"no more than "+n),i){var o=t+" failed: Was called with "+r+(r===1?" argument.":" arguments.")+" Expects "+i+".";throw new Error(o)}};function n_(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=t+" failed: ";return i+=r+" argument ",i}function r$(t,e,n,r){if(!(r&&!n)&&typeof n!="string")throw new Error(n_(t,e,r)+"must be a valid firebase namespace.")}function i$(t,e,n,r){if(!(r&&!n)&&typeof n!="function")throw new Error(n_(t,e,r)+"must be a valid function.")}function o$(t,e,n,r){if(!(r&&!n)&&(typeof n!="object"||n===null))throw new Error(n_(t,e,r)+"must be a valid context object.")}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var s$=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var o=i-55296;r++,YM(r<t.length,"Surrogate pair missing trail surrogate.");var a=t.charCodeAt(r)-56320;i=65536+(o<<10)+a}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},a$=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},Xg=pt.CONSTANTS=jm,Yo=pt.Deferred=CG,Op=pt.ErrorFactory=ZM,mI=pt.FirebaseError=JM,u$=pt.Sha1=QG,Oe=pt.assert=YM,Pp=pt.assertionError=XM;pt.async=e$;var l$=pt.base64=vI;pt.base64Decode=i1;var c$=pt.base64Encode=IG,Ao=pt.contains=GG;pt.createSubscribe=JG;pt.decode=Rp;var h$=pt.deepCopy=xG;pt.deepExtend=gI;var Ms=pt.errorPrefix=n_,s1=pt.getUA=kp,f$=pt.isAdmin=WG;pt.isBrowser=kG;var d$=pt.isBrowserExtension=RG,p$=pt.isElectron=PG,a1=pt.isEmpty=HG,v$=pt.isIE=DG,yI=pt.isMobileCordova=NG;pt.isNode=AG;var Ia=pt.isNodeSdk=MG,eF=pt.isReactNative=OG,g$=pt.isUWP=LG,m$=pt.isValidFormat=qG;pt.isValidTimestamp=BG;pt.issuedAtTime=zG;var _I=pt.jsonEval=o1,Um=pt.map=KG,y$=pt.querystring=YG;pt.querystringDecode=XG;var Qo=pt.safeGet=$G,Qg=pt.stringLength=a$,_$=pt.stringToByteArray=s$,xr=pt.stringify=VG,dt=pt.validateArgCount=n$,Tr=pt.validateCallback=i$,lR=pt.validateContextObject=o$;pt.validateNamespace=r$;var Dp={};Object.defineProperty(Dp,"__esModule",{value:!0});var Hf=pI,w$=pt,E$=function(){function t(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},t.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},t.prototype.setServiceProps=function(e){return this.serviceProps=e,this},t}();/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tF=function(){function t(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(e){e===void 0&&(e=zc);var n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){var r=new w$.Deferred;this.instancesDeferred.set(n,r);try{var i=this.getOrInitializeService(n);i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise},t.prototype.getImmediate=function(e){var n=Hf.__assign({identifier:zc,optional:!1},e),r=n.identifier,i=n.optional,o=this.normalizeInstanceIdentifier(r);try{var a=this.getOrInitializeService(o);if(!a){if(i)return null;throw Error("Service "+this.name+" is not available")}return a}catch(c){if(i)return null;throw c}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(e){var n,r;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,S$(e))try{this.getOrInitializeService(zc)}catch{}try{for(var i=Hf.__values(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=Hf.__read(o.value,2),c=a[0],f=a[1],v=this.normalizeInstanceIdentifier(c);try{var y=this.getOrInitializeService(v);f.resolve(y)}catch{}}}catch(b){n={error:b}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},t.prototype.clearInstance=function(e){e===void 0&&(e=zc),this.instancesDeferred.delete(e),this.instances.delete(e)},t.prototype.delete=function(){return Hf.__awaiter(this,void 0,void 0,function(){var e;return Hf.__generator(this,function(n){switch(n.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(e.filter(function(r){return"INTERNAL"in r}).map(function(r){return r.INTERNAL.delete()}))];case 1:return n.sent(),[2]}})})},t.prototype.isComponentSet=function(){return this.component!=null},t.prototype.getOrInitializeService=function(e){var n=this.instances.get(e);return!n&&this.component&&(n=this.component.instanceFactory(this.container,b$(e)),this.instances.set(e,n)),n||null},t.prototype.normalizeInstanceIdentifier=function(e){return this.component?this.component.multipleInstances?e:zc:e},t}();function b$(t){return t===zc?void 0:t}function S$(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var T$=function(){function t(e){this.name=e,this.providers=new Map}return t.prototype.addComponent=function(e){var n=this.getProvider(e.name);if(n.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);n.setComponent(e)},t.prototype.addOrOverwriteComponent=function(e){var n=this.getProvider(e.name);n.isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},t.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var n=new tF(e,this);return this.providers.set(e,n),n},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}(),Fs=Dp.Component=E$;Dp.ComponentContainer=T$;Dp.Provider=tF;/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function zo(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],a=0,c=o.length;a<c;a++,i++)r[i]=o[a];return r}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ll,wI=[],wt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(wt||(wt={}));var nF={debug:wt.DEBUG,verbose:wt.VERBOSE,info:wt.INFO,warn:wt.WARN,error:wt.ERROR,silent:wt.SILENT},I$=wt.INFO,x$=(ll={},ll[wt.DEBUG]="log",ll[wt.VERBOSE]="log",ll[wt.INFO]="info",ll[wt.WARN]="warn",ll[wt.ERROR]="error",ll),C$=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=new Date().toISOString(),o=x$[e];if(o)console[o].apply(console,zo(["["+i+"]  "+t.name+":"],n));else throw new Error("Attempted to log a message with an invalid logType (value: "+e+")")}},Kh=function(){function t(e){this.name=e,this._logLevel=I$,this._logHandler=C$,this._userLogHandler=null,wI.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in wt))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!0,configurable:!0}),t.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,zo([this,wt.DEBUG],e)),this._logHandler.apply(this,zo([this,wt.DEBUG],e))},t.prototype.log=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,zo([this,wt.VERBOSE],e)),this._logHandler.apply(this,zo([this,wt.VERBOSE],e))},t.prototype.info=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,zo([this,wt.INFO],e)),this._logHandler.apply(this,zo([this,wt.INFO],e))},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,zo([this,wt.WARN],e)),this._logHandler.apply(this,zo([this,wt.WARN],e))},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,zo([this,wt.ERROR],e)),this._logHandler.apply(this,zo([this,wt.ERROR],e))},t}();function N$(t){var e=typeof t=="string"?nF[t]:t;wI.forEach(function(n){n.logLevel=e})}function A$(t,e){for(var n=function(a){var c=null;e&&e.level&&(c=nF[e.level]),t===null?a.userLogHandler=null:a.userLogHandler=function(f,v){for(var y=[],b=2;b<arguments.length;b++)y[b-2]=arguments[b];var E=y.map(function(I){if(I==null)return null;if(typeof I=="string")return I;if(typeof I=="number"||typeof I=="boolean")return I.toString();if(I instanceof Error)return I.message;try{return JSON.stringify(I)}catch{return null}}).filter(function(I){return I}).join(" ");v>=(c??f.logLevel)&&t({level:wt[v].toLowerCase(),message:E,args:y,type:f.name})}},r=0,i=wI;r<i.length;r++){var o=i[r];n(o)}}const k$=Object.freeze(Object.defineProperty({__proto__:null,get LogLevel(){return wt},Logger:Kh,setLogLevel:N$,setUserLogHandler:A$},Symbol.toStringTag,{value:"Module"})),R$=Q1(k$);Object.defineProperty(dI,"__esModule",{value:!0});var Vm=pI,Jo=pt,Bm=Dp,u1=R$;/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ha,O$=(Ha={},Ha["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",Ha["bad-app-name"]="Illegal App name: '{$appName}",Ha["duplicate-app"]="Firebase App named '{$appName}' already exists",Ha["app-deleted"]="Firebase App named '{$appName}' already deleted",Ha["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",Ha["invalid-log-argument"]="First argument to `onLog` must be null or a function.",Ha),qc=new Jo.ErrorFactory("app","Firebase",O$),rF="@firebase/app",P$="0.6.1",D$="@firebase/analytics",L$="@firebase/auth",M$="@firebase/database",F$="@firebase/functions",j$="@firebase/installations",U$="@firebase/messaging",V$="@firebase/performance",B$="@firebase/remote-config",z$="@firebase/storage",q$="@firebase/firestore",W$="firebase-wrapper";/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var si,zm="[DEFAULT]",G$=(si={},si[rF]="fire-core",si[D$]="fire-analytics",si[L$]="fire-auth",si[M$]="fire-rtdb",si[F$]="fire-fn",si[j$]="fire-iid",si[U$]="fire-fcm",si[V$]="fire-perf",si[B$]="fire-rc",si[z$]="fire-gcs",si[q$]="fire-fst",si["fire-js"]="fire-js",si[W$]="fire-js-all",si);/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mh=new u1.Logger("@firebase/app");/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jg=function(){function t(e,n,r){var i,o,a=this;this.firebase_=r,this.isDeleted_=!1,this.name_=n.name,this.automaticDataCollectionEnabled_=n.automaticDataCollectionEnabled||!1,this.options_=Jo.deepCopy(e),this.container=new Bm.ComponentContainer(n.name),this._addComponent(new Bm.Component("app",function(){return a},"PUBLIC"));try{for(var c=Vm.__values(this.firebase_.INTERNAL.components.values()),f=c.next();!f.done;f=c.next()){var v=f.value;this._addComponent(v)}}catch(y){i={error:y}}finally{try{f&&!f.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),t.prototype.delete=function(){var e=this;return new Promise(function(n){e.checkDestroyed_(),n()}).then(function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map(function(n){return n.delete()}))}).then(function(){e.isDeleted_=!0})},t.prototype._getService=function(e,n){return n===void 0&&(n=zm),this.checkDestroyed_(),this.container.getProvider(e).getImmediate({identifier:n})},t.prototype._removeServiceInstance=function(e,n){n===void 0&&(n=zm),this.container.getProvider(e).clearInstance(n)},t.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(n){Mh.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,n)}},t.prototype._addOrOverwriteComponent=function(e){this.container.addOrOverwriteComponent(e)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw qc.create("app-deleted",{appName:this.name_})},t}();Jg.prototype.name&&Jg.prototype.options||Jg.prototype.delete||console.log("dc");var $$="7.13.2";/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H$(t){var e={},n=new Map,r={__esModule:!0,initializeApp:a,app:o,registerVersion:v,setLogLevel:u1.setLogLevel,onLog:y,apps:null,SDK_VERSION:$$,INTERNAL:{registerComponent:f,removeApp:i,components:n,useAsService:b}};r.default=r,Object.defineProperty(r,"apps",{get:c});function i(E){delete e[E]}function o(E){if(E=E||zm,!Jo.contains(e,E))throw qc.create("no-app",{appName:E});return e[E]}o.App=t;function a(E,I){if(I===void 0&&(I={}),typeof I!="object"||I===null){var L=I;I={name:L}}var D=I;D.name===void 0&&(D.name=zm);var te=D.name;if(typeof te!="string"||!te)throw qc.create("bad-app-name",{appName:String(te)});if(Jo.contains(e,te))throw qc.create("duplicate-app",{appName:te});var z=new t(E,D,r);return e[te]=z,z}function c(){return Object.keys(e).map(function(E){return e[E]})}function f(E){var I,L,D=E.name;if(n.has(D))return Mh.debug("There were multiple attempts to register component "+D+"."),E.type==="PUBLIC"?r[D]:null;if(n.set(D,E),E.type==="PUBLIC"){var te=function(ue){if(ue===void 0&&(ue=o()),typeof ue[D]!="function")throw qc.create("invalid-app-argument",{appName:D});return ue[D]()};E.serviceProps!==void 0&&Jo.deepExtend(te,E.serviceProps),r[D]=te,t.prototype[D]=function(){for(var ue=[],oe=0;oe<arguments.length;oe++)ue[oe]=arguments[oe];var fe=this._getService.bind(this,D);return fe.apply(this,E.multipleInstances?ue:[])}}try{for(var z=Vm.__values(Object.keys(e)),Y=z.next();!Y.done;Y=z.next()){var K=Y.value;e[K]._addComponent(E)}}catch(ue){I={error:ue}}finally{try{Y&&!Y.done&&(L=z.return)&&L.call(z)}finally{if(I)throw I.error}}return E.type==="PUBLIC"?r[D]:null}function v(E,I,L){var D,te=(D=G$[E])!==null&&D!==void 0?D:E;L&&(te+="-"+L);var z=te.match(/\s|\//),Y=I.match(/\s|\//);if(z||Y){var K=['Unable to register library "'+te+'" with version "'+I+'":'];z&&K.push('library name "'+te+'" contains illegal characters (whitespace or "/")'),z&&Y&&K.push("and"),Y&&K.push('version name "'+I+'" contains illegal characters (whitespace or "/")'),Mh.warn(K.join(" "));return}f(new Bm.Component(te+"-version",function(){return{library:te,version:I}},"VERSION"))}function y(E,I){if(E!==null&&typeof E!="function")throw qc.create("invalid-log-argument",{appName:name});u1.setUserLogHandler(E,I)}function b(E,I){if(I==="serverAuth")return null;var L=I;return L}return r}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iF(){var t=H$(Jg);t.INTERNAL=Vm.__assign(Vm.__assign({},t.INTERNAL),{createFirebaseNamespace:iF,extendNamespace:e,createSubscribe:Jo.createSubscribe,ErrorFactory:Jo.ErrorFactory,deepExtend:Jo.deepExtend});function e(n){Jo.deepExtend(t,n)}return t}var EI=iF();/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var K$=function(){function t(e){this.container=e}return t.prototype.getPlatformInfoString=function(){var e=this.container.getProviders();return e.map(function(n){if(Y$(n)){var r=n.getImmediate();return r.library+"/"+r.version}else return null}).filter(function(n){return n}).join(" ")},t}();function Y$(t){var e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X$(t,e){t.INTERNAL.registerComponent(new Bm.Component("platform-logger",function(n){return new K$(n)},"PRIVATE")),t.registerVersion(rF,P$,e),t.registerVersion("fire-js","")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(Jo.isBrowser()&&self.firebase!==void 0){Mh.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);var cR=self.firebase.SDK_VERSION;cR&&cR.indexOf("LITE")>=0&&Mh.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}var Q$=EI.initializeApp;EI.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Jo.isNode()&&Mh.warn(`
      Warning: This is a browser-targeted Firebase bundle but it appears it is being
      run in a Node environment.  If running in a Node environment, make sure you
      are using the bundle specified by the "main" field in package.json.
      
      If you are using Webpack, you can specify "main" as the first item in
      "resolve.mainFields":
      https://webpack.js.org/configuration/resolve/#resolvemainfields
      
      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"
      as the first item in "mainFields", e.g. ['main', 'module'].
      https://github.com/rollup/rollup-plugin-node-resolve
      `),Q$.apply(void 0,t)};var bI=EI;X$(bI);var ze=dI.default=bI;dI.firebase=bI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(s,l,p){s!=Array.prototype&&s!=Object.prototype&&(s[l]=p.value)};function n(s){s=[typeof window=="object"&&window,typeof self=="object"&&self,typeof global=="object"&&global,s];for(var l=0;l<s.length;++l){var p=s[l];if(p&&p.Math==Math)return p}return globalThis}var r=n(this);function i(s,l){if(l){var p=r;s=s.split(".");for(var _=0;_<s.length-1;_++){var C=s[_];C in p||(p[C]={}),p=p[C]}s=s[s.length-1],_=p[s],l=l(_),l!=_&&l!=null&&e(p,s,{configurable:!0,writable:!0,value:l})}}function o(s){var l=0;return function(){return l<s.length?{done:!1,value:s[l++]}:{done:!0}}}function a(s){var l=typeof Symbol<"u"&&Symbol.iterator&&s[Symbol.iterator];return l?l.call(s):{next:o(s)}}i("Promise",function(s){function l(G){this.b=0,this.c=void 0,this.a=[];var re=this.f();try{G(re.resolve,re.reject)}catch(Se){re.reject(Se)}}function p(){this.a=null}function _(G){return G instanceof l?G:new l(function(re){re(G)})}if(s)return s;p.prototype.b=function(G){if(this.a==null){this.a=[];var re=this;this.c(function(){re.g()})}this.a.push(G)};var C=r.setTimeout;p.prototype.c=function(G){C(G,0)},p.prototype.g=function(){for(;this.a&&this.a.length;){var G=this.a;this.a=[];for(var re=0;re<G.length;++re){var Se=G[re];G[re]=null;try{Se()}catch(Ce){this.f(Ce)}}}this.a=null},p.prototype.f=function(G){this.c(function(){throw G})},l.prototype.f=function(){function G(Ce){return function(gt){Se||(Se=!0,Ce.call(re,gt))}}var re=this,Se=!1;return{resolve:G(this.m),reject:G(this.g)}},l.prototype.m=function(G){if(G===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(G instanceof l)this.s(G);else{e:switch(typeof G){case"object":var re=G!=null;break e;case"function":re=!0;break e;default:re=!1}re?this.u(G):this.h(G)}},l.prototype.u=function(G){var re=void 0;try{re=G.then}catch(Se){this.g(Se);return}typeof re=="function"?this.w(re,G):this.h(G)},l.prototype.g=function(G){this.i(2,G)},l.prototype.h=function(G){this.i(1,G)},l.prototype.i=function(G,re){if(this.b!=0)throw Error("Cannot settle("+G+", "+re+"): Promise already settled in state"+this.b);this.b=G,this.c=re,this.l()},l.prototype.l=function(){if(this.a!=null){for(var G=0;G<this.a.length;++G)j.b(this.a[G]);this.a=null}};var j=new p;return l.prototype.s=function(G){var re=this.f();G.Oa(re.resolve,re.reject)},l.prototype.w=function(G,re){var Se=this.f();try{G.call(re,Se.resolve,Se.reject)}catch(Ce){Se.reject(Ce)}},l.prototype.then=function(G,re){function Se(Yt,Er){return typeof Yt=="function"?function(Qs){try{Ce(Yt(Qs))}catch(eE){gt(eE)}}:Er}var Ce,gt,rn=new l(function(Yt,Er){Ce=Yt,gt=Er});return this.Oa(Se(G,Ce),Se(re,gt)),rn},l.prototype.catch=function(G){return this.then(void 0,G)},l.prototype.Oa=function(G,re){function Se(){switch(Ce.b){case 1:G(Ce.c);break;case 2:re(Ce.c);break;default:throw Error("Unexpected state: "+Ce.b)}}var Ce=this;this.a==null?j.b(Se):this.a.push(Se)},l.resolve=_,l.reject=function(G){return new l(function(re,Se){Se(G)})},l.race=function(G){return new l(function(re,Se){for(var Ce=a(G),gt=Ce.next();!gt.done;gt=Ce.next())_(gt.value).Oa(re,Se)})},l.all=function(G){var re=a(G),Se=re.next();return Se.done?_([]):new l(function(Ce,gt){function rn(Qs){return function(eE){Yt[Qs]=eE,Er--,Er==0&&Ce(Yt)}}var Yt=[],Er=0;do Yt.push(void 0),Er++,_(Se.value).Oa(rn(Yt.length-1),gt),Se=re.next();while(!Se.done)})},l});var c=c||{},f=this||self,v=/^[\w+/_-]+[=]{0,2}$/,y=null;function b(){}function E(s){var l=typeof s;if(l=="object")if(s){if(s instanceof Array)return"array";if(s instanceof Object)return l;var p=Object.prototype.toString.call(s);if(p=="[object Window]")return"object";if(p=="[object Array]"||typeof s.length=="number"&&typeof s.splice<"u"&&typeof s.propertyIsEnumerable<"u"&&!s.propertyIsEnumerable("splice"))return"array";if(p=="[object Function]"||typeof s.call<"u"&&typeof s.propertyIsEnumerable<"u"&&!s.propertyIsEnumerable("call"))return"function"}else return"null";else if(l=="function"&&typeof s.call>"u")return"object";return l}function I(s){var l=E(s);return l=="array"||l=="object"&&typeof s.length=="number"}function L(s){return E(s)=="function"}function D(s){var l=typeof s;return l=="object"&&s!=null||l=="function"}function te(s){return Object.prototype.hasOwnProperty.call(s,z)&&s[z]||(s[z]=++Y)}var z="closure_uid_"+(1e9*Math.random()>>>0),Y=0;function K(s,l,p){return s.call.apply(s.bind,arguments)}function ue(s,l,p){if(!s)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,_),s.apply(l,C)}}return function(){return s.apply(l,arguments)}}function oe(s,l,p){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?oe=K:oe=ue,oe.apply(null,arguments)}function fe(s,l){var p=Array.prototype.slice.call(arguments,1);return function(){var _=p.slice();return _.push.apply(_,arguments),s.apply(this,_)}}var me=Date.now||function(){return+new Date};function he(s,l){function p(){}p.prototype=l.prototype,s.Za=l.prototype,s.prototype=new p,s.prototype.constructor=s}function Z(s,l,p){this.code=Ue+s,this.message=l||Ge[s]||"",this.a=p||null}he(Z,Error),Z.prototype.v=function(){var s={code:this.code,message:this.message};return this.a&&(s.serverResponse=this.a),s},Z.prototype.toJSON=function(){return this.v()};function be(s){var l=s&&s.code;return l?new Z(l.substring(Ue.length),s.message,s.serverResponse):null}var Ue="auth/",Ge={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},ft={hd:{Ra:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},pd:{Ra:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://securetoken.googleapis.com/v1/token",Ua:"https://identitytoolkit.googleapis.com/v2/",id:"p"},rd:{Ra:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},sd:{Ra:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Xa:"https://test-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function Le(s){for(var l in ft)if(ft[l].id===s)return s=ft[l],{firebaseEndpoint:s.Ra,secureTokenEndpoint:s.Xa,identityPlatformEndpoint:s.Ua};return null}var it;it=Le("__EID__")?"__EID__":void 0;function xe(s){if(!s)return!1;try{return!!s.$goog_Thenable}catch{return!1}}function _t(s){if(Error.captureStackTrace)Error.captureStackTrace(this,_t);else{var l=Error().stack;l&&(this.stack=l)}s&&(this.message=String(s))}he(_t,Error),_t.prototype.name="CustomError";function Fe(s,l){s=s.split("%s");for(var p="",_=s.length-1,C=0;C<_;C++)p+=s[C]+(C<l.length?l[C]:"%s");_t.call(this,p+s[_])}he(Fe,_t),Fe.prototype.name="AssertionError";function Ne(s,l){throw new Fe("Failure"+(s?": "+s:""),Array.prototype.slice.call(arguments,1))}function qe(s,l){this.c=s,this.f=l,this.b=0,this.a=null}qe.prototype.get=function(){if(0<this.b){this.b--;var s=this.a;this.a=s.next,s.next=null}else s=this.c();return s};function Ct(s,l){s.f(l),100>s.b&&(s.b++,l.next=s.a,s.a=l)}function tt(){this.b=this.a=null}var Xt=new qe(function(){return new Wt},function(s){s.reset()});tt.prototype.add=function(s,l){var p=Xt.get();p.set(s,l),this.b?this.b.next=p:this.a=p,this.b=p};function Nt(){var s=Kx,l=null;return s.a&&(l=s.a,s.a=s.a.next,s.a||(s.b=null),l.next=null),l}function Wt(){this.next=this.b=this.a=null}Wt.prototype.set=function(s,l){this.a=s,this.b=l,this.next=null},Wt.prototype.reset=function(){this.next=this.b=this.a=null};var Pn=Array.prototype.indexOf?function(s,l){return Array.prototype.indexOf.call(s,l,void 0)}:function(s,l){if(typeof s=="string")return typeof l!="string"||l.length!=1?-1:s.indexOf(l,0);for(var p=0;p<s.length;p++)if(p in s&&s[p]===l)return p;return-1},Dt=Array.prototype.forEach?function(s,l,p){Array.prototype.forEach.call(s,l,p)}:function(s,l,p){for(var _=s.length,C=typeof s=="string"?s.split(""):s,j=0;j<_;j++)j in C&&l.call(p,C[j],j,s)};function qs(s,l){for(var p=typeof s=="string"?s.split(""):s,_=s.length-1;0<=_;--_)_ in p&&l.call(void 0,p[_],_,s)}var ce=Array.prototype.filter?function(s,l){return Array.prototype.filter.call(s,l,void 0)}:function(s,l){for(var p=s.length,_=[],C=0,j=typeof s=="string"?s.split(""):s,G=0;G<p;G++)if(G in j){var re=j[G];l.call(void 0,re,G,s)&&(_[C++]=re)}return _},ge=Array.prototype.map?function(s,l){return Array.prototype.map.call(s,l,void 0)}:function(s,l){for(var p=s.length,_=Array(p),C=typeof s=="string"?s.split(""):s,j=0;j<p;j++)j in C&&(_[j]=l.call(void 0,C[j],j,s));return _},_e=Array.prototype.some?function(s,l){return Array.prototype.some.call(s,l,void 0)}:function(s,l){for(var p=s.length,_=typeof s=="string"?s.split(""):s,C=0;C<p;C++)if(C in _&&l.call(void 0,_[C],C,s))return!0;return!1};function je(s){e:{for(var l=R5,p=s.length,_=typeof s=="string"?s.split(""):s,C=0;C<p;C++)if(C in _&&l.call(void 0,_[C],C,s)){l=C;break e}l=-1}return 0>l?null:typeof s=="string"?s.charAt(l):s[l]}function Pe(s,l){return 0<=Pn(s,l)}function Ve(s,l){l=Pn(s,l);var p;return(p=0<=l)&&Array.prototype.splice.call(s,l,1),p}function He(s,l){var p=0;qs(s,function(_,C){l.call(void 0,_,C,s)&&Array.prototype.splice.call(s,C,1).length==1&&p++})}function zt(s){return Array.prototype.concat.apply([],arguments)}function ri(s){var l=s.length;if(0<l){for(var p=Array(l),_=0;_<l;_++)p[_]=s[_];return p}return[]}var ao=String.prototype.trim?function(s){return s.trim()}:function(s){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(s)[1]},Oo=/&/g,xn=/</g,Fa=/>/g,hn=/"/g,zu=/'/g,Ot=/\x00/g,u=/[\x00&<>"']/;function h(s,l){return s.indexOf(l)!=-1}function d(s,l){return s<l?-1:s>l?1:0}var g;e:{var m=f.navigator;if(m){var w=m.userAgent;if(w){g=w;break e}}g=""}function T(s){return h(g,s)}function S(s,l){for(var p in s)l.call(void 0,s[p],p,s)}function x(s){for(var l in s)return!1;return!0}function N(s){var l={},p;for(p in s)l[p]=s[p];return l}var O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(s,l){for(var p,_,C=1;C<arguments.length;C++){_=arguments[C];for(p in _)s[p]=_[p];for(var j=0;j<O.length;j++)p=O[j],Object.prototype.hasOwnProperty.call(_,p)&&(s[p]=_[p])}}function R(s,l){e:{try{var p=s&&s.ownerDocument,_=p&&(p.defaultView||p.parentWindow);if(_=_||f,_.Element&&_.Location){var C=_;break e}}catch{}C=null}if(C&&typeof C[l]<"u"&&(!s||!(s instanceof C[l])&&(s instanceof C.Location||s instanceof C.Element))){if(D(s))try{var j=s.constructor.displayName||s.constructor.name||Object.prototype.toString.call(s)}catch{j="<object could not be stringified>"}else j=s===void 0?"undefined":s===null?"null":typeof s;Ne("Argument is not a %s (or a non-Element, non-Location mock); got: %s",l,j)}}function A(s,l){this.a=s===H&&l||"",this.b=W}A.prototype.ra=!0,A.prototype.qa=function(){return this.a},A.prototype.toString=function(){return"Const{"+this.a+"}"};function U(s){return s instanceof A&&s.constructor===A&&s.b===W?s.a:(Ne("expected object of type Const, got '"+s+"'"),"type_error:Const")}var W={},H={},V=new A(H,"");function B(s,l){this.a=s===Q&&l||"",this.b=X}B.prototype.ra=!0,B.prototype.qa=function(){return this.a.toString()},B.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};function k(s){return s instanceof B&&s.constructor===B&&s.b===X?s.a:(Ne("expected object of type TrustedResourceUrl, got '"+s+"' of type "+E(s)),"type_error:TrustedResourceUrl")}function M(s,l){var p=U(s);if(!$.test(p))throw Error("Invalid TrustedResourceUrl format: "+p);return s=p.replace(q,function(_,C){if(!Object.prototype.hasOwnProperty.call(l,C))throw Error('Found marker, "'+C+'", in format string, "'+p+'", but no valid label mapping found in args: '+JSON.stringify(l));return _=l[C],_ instanceof A?U(_):encodeURIComponent(String(_))}),new B(Q,s)}var q=/%{(\w+)}/g,$=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,X={},Q={};function J(s,l){this.a=s===le&&l||"",this.b=ae}J.prototype.ra=!0,J.prototype.qa=function(){return this.a.toString()},J.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};function ne(s){return s instanceof J&&s.constructor===J&&s.b===ae?s.a:(Ne("expected object of type SafeUrl, got '"+s+"' of type "+E(s)),"type_error:SafeUrl")}var se=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function ie(s){return s instanceof J?s:(s=typeof s=="object"&&s.ra?s.qa():String(s),se.test(s)||(s="about:invalid#zClosurez"),new J(le,s))}var ae={},le={};function de(){this.a="",this.b=ye}de.prototype.ra=!0,de.prototype.qa=function(){return this.a.toString()},de.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};function ve(s){return s instanceof de&&s.constructor===de&&s.b===ye?s.a:(Ne("expected object of type SafeHtml, got '"+s+"' of type "+E(s)),"type_error:SafeHtml")}var ye={};function Ae(s){var l=new de;return l.a=s,l}Ae("<!DOCTYPE html>");var Me=Ae("");Ae("<br>");function Be(s){var l=new B(Q,U(V));R(s,"HTMLIFrameElement"),s.src=k(l).toString()}function lt(s,l){if(R(s,"HTMLScriptElement"),s.src=k(l),y===null)e:{if(l=f.document,(l=l.querySelector&&l.querySelector("script[nonce]"))&&(l=l.nonce||l.getAttribute("nonce"))&&v.test(l)){y=l;break e}y=""}l=y,l&&s.setAttribute("nonce",l)}function nt(s,l){for(var p=s.split("%s"),_="",C=Array.prototype.slice.call(arguments,1);C.length&&1<p.length;)_+=p.shift()+C.shift();return _+p.join("%s")}function et(s){return u.test(s)&&(s.indexOf("&")!=-1&&(s=s.replace(Oo,"&amp;")),s.indexOf("<")!=-1&&(s=s.replace(xn,"&lt;")),s.indexOf(">")!=-1&&(s=s.replace(Fa,"&gt;")),s.indexOf('"')!=-1&&(s=s.replace(hn,"&quot;")),s.indexOf("'")!=-1&&(s=s.replace(zu,"&#39;")),s.indexOf("\0")!=-1&&(s=s.replace(Ot,"&#0;"))),s}function Ze(s){return Ze[" "](s),s}Ze[" "]=b;function vt(s,l){var p=er;return Object.prototype.hasOwnProperty.call(p,s)?p[s]:p[s]=l(s)}var ot=T("Opera"),Et=T("Trident")||T("MSIE"),xt=T("Edge"),Lt=xt||Et,Mt=T("Gecko")&&!(h(g.toLowerCase(),"webkit")&&!T("Edge"))&&!(T("Trident")||T("MSIE"))&&!T("Edge"),At=h(g.toLowerCase(),"webkit")&&!T("Edge");function lr(){var s=f.document;return s?s.documentMode:void 0}var Zn;e:{var wr="",Dn=function(){var s=g;if(Mt)return/rv:([^\);]+)(\)|;)/.exec(s);if(xt)return/Edge\/([\d\.]+)/.exec(s);if(Et)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(s);if(At)return/WebKit\/(\S+)/.exec(s);if(ot)return/(?:Version)[ \/]?(\S+)/.exec(s)}();if(Dn&&(wr=Dn?Dn[1]:""),Et){var Qt=lr();if(Qt!=null&&Qt>parseFloat(wr)){Zn=String(Qt);break e}}Zn=wr}var er={};function Si(s){return vt(s,function(){for(var l=0,p=ao(String(Zn)).split("."),_=ao(String(s)).split("."),C=Math.max(p.length,_.length),j=0;l==0&&j<C;j++){var G=p[j]||"",re=_[j]||"";do{if(G=/(\d*)(\D*)(.*)/.exec(G)||["","","",""],re=/(\d*)(\D*)(.*)/.exec(re)||["","","",""],G[0].length==0&&re[0].length==0)break;l=d(G[1].length==0?0:parseInt(G[1],10),re[1].length==0?0:parseInt(re[1],10))||d(G[2].length==0,re[2].length==0)||d(G[2],re[2]),G=G[3],re=re[3]}while(l==0)}return 0<=l})}var sn;sn=f.document&&Et?lr():void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch{}var ds=!Et||9<=Number(sn);function Po(s){var l=document;return typeof s=="string"?l.getElementById(s):s}function Do(s,l){S(l,function(p,_){p&&typeof p=="object"&&p.ra&&(p=p.qa()),_=="style"?s.style.cssText=p:_=="class"?s.className=p:_=="for"?s.htmlFor=p:ps.hasOwnProperty(_)?s.setAttribute(ps[_],p):_.lastIndexOf("aria-",0)==0||_.lastIndexOf("data-",0)==0?s.setAttribute(_,p):s[_]=p})}var ps={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function Vi(s,l,p){var _=arguments,C=document,j=String(_[0]),G=_[1];if(!ds&&G&&(G.name||G.type)){if(j=["<",j],G.name&&j.push(' name="',et(G.name),'"'),G.type){j.push(' type="',et(G.type),'"');var re={};P(re,G),delete re.type,G=re}j.push(">"),j=j.join("")}return j=Ws(C,j),G&&(typeof G=="string"?j.className=G:Array.isArray(G)?j.className=G.join(" "):Do(j,G)),2<_.length&&uo(C,j,_),j}function uo(s,l,p){function _(G){G&&l.appendChild(typeof G=="string"?s.createTextNode(G):G)}for(var C=2;C<p.length;C++){var j=p[C];!I(j)||D(j)&&0<j.nodeType?_(j):Dt(Gs(j)?ri(j):j,_)}}function Ws(s,l){return l=String(l),s.contentType==="application/xhtml+xml"&&(l=l.toLowerCase()),s.createElement(l)}function Gs(s){if(s&&typeof s.length=="number"){if(D(s))return typeof s.item=="function"||typeof s.item=="string";if(L(s))return typeof s.item=="function"}return!1}function Zp(s){f.setTimeout(function(){throw s},0)}var F_;function E4(){var s=f.MessageChannel;if(typeof s>"u"&&typeof window<"u"&&window.postMessage&&window.addEventListener&&!T("Presto")&&(s=function(){var C=Ws(document,"IFRAME");C.style.display="none",Be(C),document.documentElement.appendChild(C);var j=C.contentWindow;C=j.document,C.open(),C.write(ve(Me)),C.close();var G="callImmediate"+Math.random(),re=j.location.protocol=="file:"?"*":j.location.protocol+"//"+j.location.host;C=oe(function(Se){(re=="*"||Se.origin==re)&&Se.data==G&&this.port1.onmessage()},this),j.addEventListener("message",C,!1),this.port1={},this.port2={postMessage:function(){j.postMessage(G,re)}}}),typeof s<"u"&&!T("Trident")&&!T("MSIE")){var l=new s,p={},_=p;return l.port1.onmessage=function(){if(p.next!==void 0){p=p.next;var C=p.Db;p.Db=null,C()}},function(C){_.next={Db:C},_=_.next,l.port2.postMessage(0)}}return function(C){f.setTimeout(C,0)}}function ev(s,l){tv||b4(),j_||(tv(),j_=!0),Kx.add(s,l)}var tv;function b4(){if(f.Promise&&f.Promise.resolve){var s=f.Promise.resolve(void 0);tv=function(){s.then(Yx)}}else tv=function(){var l=Yx;!L(f.setImmediate)||f.Window&&f.Window.prototype&&!T("Edge")&&f.Window.prototype.setImmediate==f.setImmediate?(F_||(F_=E4()),F_(l)):f.setImmediate(l)}}var j_=!1,Kx=new tt;function Yx(){for(var s;s=Nt();){try{s.a.call(s.b)}catch(l){Zp(l)}Ct(Xt,s)}j_=!1}function Ft(s,l){if(this.a=qu,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,s!=b)try{var p=this;s.call(l,function(_){Wu(p,sf,_)},function(_){if(!(_ instanceof sc))try{throw _ instanceof Error?_:Error("Promise rejected.")}catch{}Wu(p,$s,_)})}catch(_){Wu(this,$s,_)}}var qu=0,sf=2,$s=3;function Xx(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Xx.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Qx=new qe(function(){return new Xx},function(s){s.reset()});function U_(s,l,p){var _=Qx.get();return _.g=s,_.b=l,_.f=p,_}function rt(s){if(s instanceof Ft)return s;var l=new Ft(b);return Wu(l,sf,s),l}function mn(s){return new Ft(function(l,p){p(s)})}function Jx(s,l,p){nC(s,l,p,null)||ev(fe(l,s))}function S4(s){return new Ft(function(l,p){var _=s.length,C=[];if(_)for(var j=function(Ce,gt){_--,C[Ce]=gt,_==0&&l(C)},G=function(Ce){p(Ce)},re=0,Se;re<s.length;re++)Se=s[re],Jx(Se,fe(j,re),G);else l(C)})}function Zx(s){return new Ft(function(l){var p=s.length,_=[];if(p)for(var C=function(re,Se,Ce){p--,_[re]=Se?{Mb:!0,value:Ce}:{Mb:!1,reason:Ce},p==0&&l(_)},j=0,G;j<s.length;j++)G=s[j],Jx(G,fe(C,j,!0),fe(C,j,!1));else l(_)})}Ft.prototype.then=function(s,l,p){return tC(this,L(s)?s:null,L(l)?l:null,p)},Ft.prototype.$goog_Thenable=!0,t=Ft.prototype,t.ma=function(s,l){return s=U_(s,s,l),s.c=!0,V_(this,s),this},t.o=function(s,l){return tC(this,null,s,l)},t.cancel=function(s){if(this.a==qu){var l=new sc(s);ev(function(){eC(this,l)},this)}};function eC(s,l){if(s.a==qu)if(s.c){var p=s.c;if(p.b){for(var _=0,C=null,j=null,G=p.b;G&&(G.c||(_++,G.a==s&&(C=G),!(C&&1<_)));G=G.next)C||(j=G);C&&(p.a==qu&&_==1?eC(p,l):(j?(_=j,_.next==p.f&&(p.f=_),_.next=_.next.next):iC(p),oC(p,C,$s,l)))}s.c=null}else Wu(s,$s,l)}function V_(s,l){s.b||s.a!=sf&&s.a!=$s||rC(s),s.f?s.f.next=l:s.b=l,s.f=l}function tC(s,l,p,_){var C=U_(null,null,null);return C.a=new Ft(function(j,G){C.g=l?function(re){try{var Se=l.call(_,re);j(Se)}catch(Ce){G(Ce)}}:j,C.b=p?function(re){try{var Se=p.call(_,re);Se===void 0&&re instanceof sc?G(re):j(Se)}catch(Ce){G(Ce)}}:G}),C.a.c=s,V_(s,C),C.a}t.Yc=function(s){this.a=qu,Wu(this,sf,s)},t.Zc=function(s){this.a=qu,Wu(this,$s,s)};function Wu(s,l,p){s.a==qu&&(s===p&&(l=$s,p=new TypeError("Promise cannot resolve to itself")),s.a=1,nC(p,s.Yc,s.Zc,s)||(s.i=p,s.a=l,s.c=null,rC(s),l!=$s||p instanceof sc||I4(s,p)))}function nC(s,l,p,_){if(s instanceof Ft)return V_(s,U_(l||b,p||null,_)),!0;if(xe(s))return s.then(l,p,_),!0;if(D(s))try{var C=s.then;if(L(C))return T4(s,C,l,p,_),!0}catch(j){return p.call(_,j),!0}return!1}function T4(s,l,p,_,C){function j(Se){re||(re=!0,_.call(C,Se))}function G(Se){re||(re=!0,p.call(C,Se))}var re=!1;try{l.call(s,G,j)}catch(Se){j(Se)}}function rC(s){s.h||(s.h=!0,ev(s.ec,s))}function iC(s){var l=null;return s.b&&(l=s.b,s.b=l.next,l.next=null),s.b||(s.f=null),l}t.ec=function(){for(var s;s=iC(this);)oC(this,s,this.a,this.i);this.h=!1};function oC(s,l,p,_){if(p==$s&&l.b&&!l.c)for(;s&&s.g;s=s.c)s.g=!1;if(l.a)l.a.c=null,sC(l,p,_);else try{l.c?l.g.call(l.f):sC(l,p,_)}catch(C){aC.call(null,C)}Ct(Qx,l)}function sC(s,l,p){l==sf?s.g.call(s.f,p):s.b&&s.b.call(s.f,p)}function I4(s,l){s.g=!0,ev(function(){s.g&&aC.call(null,l)})}var aC=Zp;function sc(s){_t.call(this,s)}he(sc,_t),sc.prototype.name="cancel";function nv(){this.wa=this.wa,this.na=this.na}var x4=0;nv.prototype.wa=!1;function uC(s){!s.wa&&(s.wa=!0,s.Ba(),x4!=0)&&te(s)}nv.prototype.Ba=function(){if(this.na)for(;this.na.length;)this.na.shift()()};var C4=Object.freeze||function(s){return s},lC=!Et||9<=Number(sn),N4=Et&&!Si("9"),A4=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var s=!1,l=Object.defineProperty({},"passive",{get:function(){s=!0}});try{f.addEventListener("test",b,l),f.removeEventListener("test",b,l)}catch{}return s}();function lo(s,l){this.type=s,this.b=this.target=l,this.defaultPrevented=!1}lo.prototype.preventDefault=function(){this.defaultPrevented=!0};function Gu(s,l){if(lo.call(this,s?s.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,s){var p=this.type=s.type,_=s.changedTouches&&s.changedTouches.length?s.changedTouches[0]:null;if(this.target=s.target||s.srcElement,this.b=l,l=s.relatedTarget){if(Mt){e:{try{Ze(l.nodeName);var C=!0;break e}catch{}C=!1}C||(l=null)}}else p=="mouseover"?l=s.fromElement:p=="mouseout"&&(l=s.toElement);this.relatedTarget=l,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=s.clientX!==void 0?s.clientX:s.pageX,this.clientY=s.clientY!==void 0?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0),this.button=s.button,this.key=s.key||"",this.ctrlKey=s.ctrlKey,this.altKey=s.altKey,this.shiftKey=s.shiftKey,this.metaKey=s.metaKey,this.pointerId=s.pointerId||0,this.pointerType=typeof s.pointerType=="string"?s.pointerType:k4[s.pointerType]||"",this.a=s,s.defaultPrevented&&this.preventDefault()}}he(Gu,lo);var k4=C4({2:"touch",3:"pen",4:"mouse"});Gu.prototype.preventDefault=function(){Gu.Za.preventDefault.call(this);var s=this.a;if(s.preventDefault)s.preventDefault();else if(s.returnValue=!1,N4)try{(s.ctrlKey||112<=s.keyCode&&123>=s.keyCode)&&(s.keyCode=-1)}catch{}},Gu.prototype.f=function(){return this.a};var af="closure_listenable_"+(1e6*Math.random()|0),R4=0;function O4(s,l,p,_,C){this.listener=s,this.proxy=null,this.src=l,this.type=p,this.capture=!!_,this.Ta=C,this.key=++R4,this.ua=this.Na=!1}function rv(s){s.ua=!0,s.listener=null,s.proxy=null,s.src=null,s.Ta=null}function iv(s){this.src=s,this.a={},this.b=0}iv.prototype.add=function(s,l,p,_,C){var j=s.toString();s=this.a[j],s||(s=this.a[j]=[],this.b++);var G=z_(s,l,_,C);return-1<G?(l=s[G],p||(l.Na=!1)):(l=new O4(l,this.src,j,!!_,C),l.Na=p,s.push(l)),l};function B_(s,l){var p=l.type;p in s.a&&Ve(s.a[p],l)&&(rv(l),s.a[p].length==0&&(delete s.a[p],s.b--))}function z_(s,l,p,_){for(var C=0;C<s.length;++C){var j=s[C];if(!j.ua&&j.listener==l&&j.capture==!!p&&j.Ta==_)return C}return-1}var q_="closure_lm_"+(1e6*Math.random()|0),W_={};function Lo(s,l,p,_,C){if(_&&_.once)G_(s,l,p,_,C);else if(Array.isArray(l))for(var j=0;j<l.length;j++)Lo(s,l[j],p,_,C);else p=H_(p),s&&s[af]?vC(s,l,p,D(_)?!!_.capture:!!_,C):cC(s,l,p,!1,_,C)}function cC(s,l,p,_,C,j){if(!l)throw Error("Invalid event type");var G=D(C)?!!C.capture:!!C,re=ov(s);if(re||(s[q_]=re=new iv(s)),p=re.add(l,p,_,G,j),!p.proxy)if(_=P4(),p.proxy=_,_.src=s,_.listener=p,s.addEventListener)A4||(C=G),C===void 0&&(C=!1),s.addEventListener(l.toString(),_,C);else if(s.attachEvent)s.attachEvent(fC(l.toString()),_);else if(s.addListener&&s.removeListener)s.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.")}function P4(){var s=D4,l=lC?function(p){return s.call(l.src,l.listener,p)}:function(p){if(p=s.call(l.src,l.listener,p),!p)return p};return l}function G_(s,l,p,_,C){if(Array.isArray(l))for(var j=0;j<l.length;j++)G_(s,l[j],p,_,C);else p=H_(p),s&&s[af]?K_(s,l,p,D(_)?!!_.capture:!!_,C):cC(s,l,p,!0,_,C)}function co(s,l,p,_,C){if(Array.isArray(l))for(var j=0;j<l.length;j++)co(s,l[j],p,_,C);else _=D(_)?!!_.capture:!!_,p=H_(p),s&&s[af]?(s=s.u,l=String(l).toString(),l in s.a&&(j=s.a[l],p=z_(j,p,_,C),-1<p&&(rv(j[p]),Array.prototype.splice.call(j,p,1),j.length==0&&(delete s.a[l],s.b--)))):s&&(s=ov(s))&&(l=s.a[l.toString()],s=-1,l&&(s=z_(l,p,_,C)),(p=-1<s?l[s]:null)&&hC(p))}function hC(s){if(typeof s!="number"&&s&&!s.ua){var l=s.src;if(l&&l[af])B_(l.u,s);else{var p=s.type,_=s.proxy;l.removeEventListener?l.removeEventListener(p,_,s.capture):l.detachEvent?l.detachEvent(fC(p),_):l.addListener&&l.removeListener&&l.removeListener(_),(p=ov(l))?(B_(p,s),p.b==0&&(p.src=null,l[q_]=null)):rv(s)}}}function fC(s){return s in W_?W_[s]:W_[s]="on"+s}function dC(s,l,p,_){var C=!0;if((s=ov(s))&&(l=s.a[l.toString()]))for(l=l.concat(),s=0;s<l.length;s++){var j=l[s];j&&j.capture==p&&!j.ua&&(j=pC(j,_),C=C&&j!==!1)}return C}function pC(s,l){var p=s.listener,_=s.Ta||s.src;return s.Na&&hC(s),p.call(_,l)}function D4(s,l){if(s.ua)return!0;if(!lC){if(!l)e:{l=["window","event"];for(var p=f,_=0;_<l.length;_++)if(p=p[l[_]],p==null){l=null;break e}l=p}if(_=l,l=new Gu(_,this),p=!0,!(0>_.keyCode||_.returnValue!=null)){e:{var C=!1;if(_.keyCode==0)try{_.keyCode=-1;break e}catch{C=!0}(C||_.returnValue==null)&&(_.returnValue=!0)}for(_=[],C=l.b;C;C=C.parentNode)_.push(C);for(s=s.type,C=_.length-1;0<=C;C--){l.b=_[C];var j=dC(_[C],s,!0,l);p=p&&j}for(C=0;C<_.length;C++)l.b=_[C],j=dC(_[C],s,!1,l),p=p&&j}return p}return pC(s,new Gu(l,this))}function ov(s){return s=s[q_],s instanceof iv?s:null}var $_="__closure_events_fn_"+(1e9*Math.random()>>>0);function H_(s){return L(s)?s:(s[$_]||(s[$_]=function(l){return s.handleEvent(l)}),s[$_])}function ii(){nv.call(this),this.u=new iv(this),this.Yb=this,this.eb=null}he(ii,nv),ii.prototype[af]=!0,ii.prototype.addEventListener=function(s,l,p,_){Lo(this,s,l,p,_)},ii.prototype.removeEventListener=function(s,l,p,_){co(this,s,l,p,_)},ii.prototype.dispatchEvent=function(s){var l,p=this.eb;if(p)for(l=[];p;p=p.eb)l.push(p);p=this.Yb;var _=s.type||s;if(typeof s=="string")s=new lo(s,p);else if(s instanceof lo)s.target=s.target||p;else{var C=s;s=new lo(_,p),P(s,C)}if(C=!0,l)for(var j=l.length-1;0<=j;j--){var G=s.b=l[j];C=sv(G,_,!0,s)&&C}if(G=s.b=p,C=sv(G,_,!0,s)&&C,C=sv(G,_,!1,s)&&C,l)for(j=0;j<l.length;j++)G=s.b=l[j],C=sv(G,_,!1,s)&&C;return C},ii.prototype.Ba=function(){if(ii.Za.Ba.call(this),this.u){var s=this.u,l;for(l in s.a){for(var p=s.a[l],_=0;_<p.length;_++)rv(p[_]);delete s.a[l],s.b--}}this.eb=null};function vC(s,l,p,_,C){s.u.add(String(l),p,!1,_,C)}function K_(s,l,p,_,C){s.u.add(String(l),p,!0,_,C)}function sv(s,l,p,_){if(l=s.u.a[String(l)],!l)return!0;l=l.concat();for(var C=!0,j=0;j<l.length;++j){var G=l[j];if(G&&!G.ua&&G.capture==p){var re=G.listener,Se=G.Ta||G.src;G.Na&&B_(s.u,G),C=re.call(Se,_)!==!1&&C}}return C&&!_.defaultPrevented}function Y_(s,l,p){if(L(s))p&&(s=oe(s,p));else if(s&&typeof s.handleEvent=="function")s=oe(s.handleEvent,s);else throw Error("Invalid listener argument");return 2147483647<Number(l)?-1:f.setTimeout(s,l||0)}function ac(s){var l=null;return new Ft(function(p,_){l=Y_(function(){p(void 0)},s),l==-1&&_(Error("Failed to schedule timer."))}).o(function(p){throw f.clearTimeout(l),p})}function gC(s){if(s.V&&typeof s.V=="function")return s.V();if(typeof s=="string")return s.split("");if(I(s)){for(var l=[],p=s.length,_=0;_<p;_++)l.push(s[_]);return l}l=[],p=0;for(_ in s)l[p++]=s[_];return l}function mC(s){if(s.X&&typeof s.X=="function")return s.X();if(!s.V||typeof s.V!="function"){if(I(s)||typeof s=="string"){var l=[];s=s.length;for(var p=0;p<s;p++)l.push(p);return l}l=[],p=0;for(var _ in s)l[p++]=_;return l}}function L4(s,l){if(s.forEach&&typeof s.forEach=="function")s.forEach(l,void 0);else if(I(s)||typeof s=="string")Dt(s,l,void 0);else for(var p=mC(s),_=gC(s),C=_.length,j=0;j<C;j++)l.call(void 0,_[j],p&&p[j],s)}function uc(s,l){this.b={},this.a=[],this.c=0;var p=arguments.length;if(1<p){if(p%2)throw Error("Uneven number of arguments");for(var _=0;_<p;_+=2)this.set(arguments[_],arguments[_+1])}else if(s)if(s instanceof uc)for(p=s.X(),_=0;_<p.length;_++)this.set(p[_],s.get(p[_]));else for(_ in s)this.set(_,s[_])}t=uc.prototype,t.V=function(){X_(this);for(var s=[],l=0;l<this.a.length;l++)s.push(this.b[this.a[l]]);return s},t.X=function(){return X_(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0};function X_(s){if(s.c!=s.a.length){for(var l=0,p=0;l<s.a.length;){var _=s.a[l];$u(s.b,_)&&(s.a[p++]=_),l++}s.a.length=p}if(s.c!=s.a.length){var C={};for(p=l=0;l<s.a.length;)_=s.a[l],$u(C,_)||(s.a[p++]=_,C[_]=1),l++;s.a.length=p}}t.get=function(s,l){return $u(this.b,s)?this.b[s]:l},t.set=function(s,l){$u(this.b,s)||(this.c++,this.a.push(s)),this.b[s]=l},t.forEach=function(s,l){for(var p=this.X(),_=0;_<p.length;_++){var C=p[_],j=this.get(C);s.call(l,j,C,this)}};function $u(s,l){return Object.prototype.hasOwnProperty.call(s,l)}var yC=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/\\#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function M4(s,l){if(s){s=s.split("&");for(var p=0;p<s.length;p++){var _=s[p].indexOf("="),C=null;if(0<=_){var j=s[p].substring(0,_);C=s[p].substring(_+1)}else j=s[p];l(j,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function ja(s,l){this.b=this.i=this.f="",this.l=null,this.g=this.c="",this.h=!1;var p;s instanceof ja?(this.h=l!==void 0?l:s.h,av(this,s.f),this.i=s.i,this.b=s.b,Q_(this,s.l),this.c=s.c,J_(this,SC(s.a)),this.g=s.g):s&&(p=String(s).match(yC))?(this.h=!!l,av(this,p[1]||"",!0),this.i=uf(p[2]||""),this.b=uf(p[3]||"",!0),Q_(this,p[4]),this.c=uf(p[5]||"",!0),J_(this,p[6]||"",!0),this.g=uf(p[7]||"")):(this.h=!!l,this.a=new Hu(null,this.h))}ja.prototype.toString=function(){var s=[],l=this.f;l&&s.push(lf(l,wC,!0),":");var p=this.b;return(p||l=="file")&&(s.push("//"),(l=this.i)&&s.push(lf(l,wC,!0),"@"),s.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.l,p!=null&&s.push(":",String(p))),(p=this.c)&&(this.b&&p.charAt(0)!="/"&&s.push("/"),s.push(lf(p,p.charAt(0)=="/"?U4:j4,!0))),(p=this.a.toString())&&s.push("?",p),(p=this.g)&&s.push("#",lf(p,B4)),s.join("")},ja.prototype.resolve=function(s){var l=new ja(this),p=!!s.f;p?av(l,s.f):p=!!s.i,p?l.i=s.i:p=!!s.b,p?l.b=s.b:p=s.l!=null;var _=s.c;if(p)Q_(l,s.l);else if(p=!!s.c){if(_.charAt(0)!="/")if(this.b&&!this.c)_="/"+_;else{var C=l.c.lastIndexOf("/");C!=-1&&(_=l.c.substr(0,C+1)+_)}if(C=_,C==".."||C==".")_="";else if(h(C,"./")||h(C,"/.")){_=C.lastIndexOf("/",0)==0,C=C.split("/");for(var j=[],G=0;G<C.length;){var re=C[G++];re=="."?_&&G==C.length&&j.push(""):re==".."?((1<j.length||j.length==1&&j[0]!="")&&j.pop(),_&&G==C.length&&j.push("")):(j.push(re),_=!0)}_=j.join("/")}else _=C}return p?l.c=_:p=s.a.toString()!=="",p?J_(l,SC(s.a)):p=!!s.g,p&&(l.g=s.g),l};function av(s,l,p){s.f=p?uf(l,!0):l,s.f&&(s.f=s.f.replace(/:$/,""))}function Q_(s,l){if(l){if(l=Number(l),isNaN(l)||0>l)throw Error("Bad port number "+l);s.l=l}else s.l=null}function J_(s,l,p){l instanceof Hu?(s.a=l,z4(s.a,s.h)):(p||(l=lf(l,V4)),s.a=new Hu(l,s.h))}function Bn(s,l,p){s.a.set(l,p)}function ho(s,l){return s.a.get(l)}function Hs(s){return s instanceof ja?new ja(s):new ja(s,void 0)}function _C(s,l){var p=new ja(null,void 0);return av(p,"https"),s&&(p.b=s),l&&(p.c=l),p}function uf(s,l){return s?l?decodeURI(s.replace(/%25/g,"%2525")):decodeURIComponent(s):""}function lf(s,l,p){return typeof s=="string"?(s=encodeURI(s).replace(l,F4),p&&(s=s.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),s):null}function F4(s){return s=s.charCodeAt(0),"%"+(s>>4&15).toString(16)+(s&15).toString(16)}var wC=/[#\/\?@]/g,j4=/[#\?:]/g,U4=/[#\?]/g,V4=/[#\?@]/g,B4=/#/g;function Hu(s,l){this.b=this.a=null,this.c=s||null,this.f=!!l}function Ua(s){s.a||(s.a=new uc,s.b=0,s.c&&M4(s.c,function(l,p){s.add(decodeURIComponent(l.replace(/\+/g," ")),p)}))}function EC(s){var l=mC(s);if(typeof l>"u")throw Error("Keys are undefined");var p=new Hu(null,void 0);s=gC(s);for(var _=0;_<l.length;_++){var C=l[_],j=s[_];Array.isArray(j)?bC(p,C,j):p.add(C,j)}return p}t=Hu.prototype,t.add=function(s,l){Ua(this),this.c=null,s=lc(this,s);var p=this.a.get(s);return p||this.a.set(s,p=[]),p.push(l),this.b+=1,this};function vs(s,l){Ua(s),l=lc(s,l),$u(s.a.b,l)&&(s.c=null,s.b-=s.a.get(l).length,s=s.a,$u(s.b,l)&&(delete s.b[l],s.c--,s.a.length>2*s.c&&X_(s)))}t.clear=function(){this.a=this.c=null,this.b=0};function Z_(s,l){return Ua(s),l=lc(s,l),$u(s.a.b,l)}t.forEach=function(s,l){Ua(this),this.a.forEach(function(p,_){Dt(p,function(C){s.call(l,C,_,this)},this)},this)},t.X=function(){Ua(this);for(var s=this.a.V(),l=this.a.X(),p=[],_=0;_<l.length;_++)for(var C=s[_],j=0;j<C.length;j++)p.push(l[_]);return p},t.V=function(s){Ua(this);var l=[];if(typeof s=="string")Z_(this,s)&&(l=zt(l,this.a.get(lc(this,s))));else{s=this.a.V();for(var p=0;p<s.length;p++)l=zt(l,s[p])}return l},t.set=function(s,l){return Ua(this),this.c=null,s=lc(this,s),Z_(this,s)&&(this.b-=this.a.get(s).length),this.a.set(s,[l]),this.b+=1,this},t.get=function(s,l){return s?(s=this.V(s),0<s.length?String(s[0]):l):l};function bC(s,l,p){vs(s,l),0<p.length&&(s.c=null,s.a.set(lc(s,l),ri(p)),s.b+=p.length)}t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var s=[],l=this.a.X(),p=0;p<l.length;p++){var _=l[p],C=encodeURIComponent(String(_));_=this.V(_);for(var j=0;j<_.length;j++){var G=C;_[j]!==""&&(G+="="+encodeURIComponent(String(_[j]))),s.push(G)}}return this.c=s.join("&")};function SC(s){var l=new Hu;return l.c=s.c,s.a&&(l.a=new uc(s.a),l.b=s.b),l}function lc(s,l){return l=String(l),s.f&&(l=l.toLowerCase()),l}function z4(s,l){l&&!s.f&&(Ua(s),s.c=null,s.a.forEach(function(p,_){var C=_.toLowerCase();_!=C&&(vs(this,_),bC(this,C,p))},s)),s.f=l}function TC(s){var l=[];return e0(new q4,s,l),l.join("")}function q4(){}function e0(s,l,p){if(l==null)p.push("null");else{if(typeof l=="object"){if(Array.isArray(l)){var _=l;l=_.length,p.push("[");for(var C="",j=0;j<l;j++)p.push(C),e0(s,_[j],p),C=",";p.push("]");return}if(l instanceof String||l instanceof Number||l instanceof Boolean)l=l.valueOf();else{p.push("{"),C="";for(_ in l)Object.prototype.hasOwnProperty.call(l,_)&&(j=l[_],typeof j!="function"&&(p.push(C),xC(_,p),p.push(":"),e0(s,j,p),C=","));p.push("}");return}}switch(typeof l){case"string":xC(l,p);break;case"number":p.push(isFinite(l)&&!isNaN(l)?String(l):"null");break;case"boolean":p.push(String(l));break;case"function":p.push("null");break;default:throw Error("Unknown type: "+typeof l)}}}var IC={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\u000b"},W4=/\uffff/.test("")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function xC(s,l){l.push('"',s.replace(W4,function(p){var _=IC[p];return _||(_="\\u"+(p.charCodeAt(0)|65536).toString(16).substr(1),IC[p]=_),_}),'"')}function t0(){var s=Or();return Et&&!!sn&&sn==11||/Edge\/\d+/.test(s)}function cf(){return f.window&&f.window.location.href||self&&self.location&&self.location.href||""}function CC(s,l){l=l||f.window;var p="about:blank";s&&(p=ne(ie(s))),l.location.href=p}function NC(s,l){var p=[],_;for(_ in s)_ in l?typeof s[_]!=typeof l[_]?p.push(_):typeof s[_]=="object"&&s[_]!=null&&l[_]!=null?0<NC(s[_],l[_]).length&&p.push(_):s[_]!==l[_]&&p.push(_):p.push(_);for(_ in l)_ in s||p.push(_);return p}function G4(){var s=Or();return s=cc(s)!=OC?null:(s=s.match(/\sChrome\/(\d+)/i))&&s.length==2?parseInt(s[1],10):null,s&&30>s?!1:!Et||!sn||9<sn}function AC(s){return s=(s||Or()).toLowerCase(),!!(s.match(/android/)||s.match(/webos/)||s.match(/iphone|ipad|ipod/)||s.match(/blackberry/)||s.match(/windows phone/)||s.match(/iemobile/))}function Ku(s){s=s||f.window;try{s.close()}catch{}}function kC(s,l,p){var _=Math.floor(1e9*Math.random()).toString();l=l||500,p=p||600;var C=(window.screen.availHeight-p)/2,j=(window.screen.availWidth-l)/2;l={width:l,height:p,top:0<C?C:0,left:0<j?j:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},p=Or().toLowerCase(),_&&(l.target=_,h(p,"crios/")&&(l.target="_blank")),cc(Or())==o0&&(s=s||"http://localhost",l.scrollbars=!0),p=s||"",(s=l)||(s={}),_=window,l=p instanceof J?p:ie(typeof p.href<"u"?p.href:String(p)),p=s.target||p.target,C=[];for(G in s)switch(G){case"width":case"height":case"top":case"left":C.push(G+"="+s[G]);break;case"target":case"noopener":case"noreferrer":break;default:C.push(G+"="+(s[G]?1:0))}var G=C.join(",");if((T("iPhone")&&!T("iPod")&&!T("iPad")||T("iPad")||T("iPod"))&&_.navigator&&_.navigator.standalone&&p&&p!="_self"?(G=Ws(document,"A"),R(G,"HTMLAnchorElement"),l instanceof J||l instanceof J||(l=typeof l=="object"&&l.ra?l.qa():String(l),se.test(l)||(l="about:invalid#zClosurez"),l=new J(le,l)),G.href=ne(l),G.setAttribute("target",p),s.noreferrer&&G.setAttribute("rel","noreferrer"),s=document.createEvent("MouseEvent"),s.initMouseEvent("click",!0,!0,_,1),G.dispatchEvent(s),G={}):s.noreferrer?(G=_.open("",p,G),s=ne(l),G&&(Lt&&h(s,";")&&(s="'"+s.replace(/'/g,"%27")+"'"),G.opener=null,s=Ae('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+et(s)+'">'),_=G.document)&&(_.write(ve(s)),_.close())):(G=_.open(ne(l),p,G))&&s.noopener&&(G.opener=null),G)try{G.focus()}catch{}return G}function $4(s){return new Ft(function(l){function p(){ac(2e3).then(function(){if(!s||s.closed)l();else return p()})}return p()})}var H4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,K4=/^[^@]+@[^@]+$/;function n0(){var s=null;return new Ft(function(l){f.document.readyState=="complete"?l():(s=function(){l()},G_(window,"load",s))}).o(function(l){throw co(window,"load",s),l})}function Y4(){return r0(void 0)?n0().then(function(){return new Ft(function(s,l){var p=f.document,_=setTimeout(function(){l(Error("Cordova framework is not ready."))},1e3);p.addEventListener("deviceready",function(){clearTimeout(_),s()},!1)})}):mn(Error("Cordova must run in an Android or iOS file scheme."))}function r0(s){return s=s||Or(),!(fc()!=="file:"&&fc()!=="ionic:"||!s.toLowerCase().match(/iphone|ipad|ipod|android/))}function i0(){var s=f.window;try{return!(!s||s==s.top)}catch{return!1}}function Mo(){return typeof f.WorkerGlobalScope<"u"&&typeof f.importScripts=="function"}function gs(){return ze.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":ze.INTERNAL.hasOwnProperty("node")?"Node":Mo()?"Worker":"Browser"}function RC(){var s=gs();return s==="ReactNative"||s==="Node"}function X4(){for(var s=50,l=[];0<s;)l.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),s--;return l.join("")}var o0="Firefox",OC="Chrome";function cc(s){var l=s.toLowerCase();if(h(l,"opera/")||h(l,"opr/")||h(l,"opios/"))return"Opera";if(h(l,"iemobile"))return"IEMobile";if(h(l,"msie")||h(l,"trident/"))return"IE";if(h(l,"edge/"))return"Edge";if(h(l,"firefox/"))return o0;if(h(l,"silk/"))return"Silk";if(h(l,"blackberry"))return"Blackberry";if(h(l,"webos"))return"Webos";if(!h(l,"safari/")||h(l,"chrome/")||h(l,"crios/")||h(l,"android"))if(!h(l,"chrome/")&&!h(l,"crios/")||h(l,"edge/")){if(h(l,"android"))return"Android";if((s=s.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&s.length==2)return s[1]}else return OC;else return"Safari";return"Other"}var PC={jd:"FirebaseCore-web",ld:"FirebaseUI-web"};function hc(s,l){l=l||[];var p=[],_={},C;for(C in PC)_[PC[C]]=!0;for(C=0;C<l.length;C++)typeof _[l[C]]<"u"&&(delete _[l[C]],p.push(l[C]));return p.sort(),l=p,l.length||(l=["FirebaseCore-web"]),p=gs(),p==="Browser"?(_=Or(),p=cc(_)):p==="Worker"&&(_=Or(),p=cc(_)+"-"+p),p+"/JsCore/"+s+"/"+l.join(",")}function Or(){return f.navigator&&f.navigator.userAgent||""}function yn(s,l){s=s.split("."),l=l||f;for(var p=0;p<s.length&&typeof l=="object"&&l!=null;p++)l=l[s[p]];return p!=s.length&&(l=void 0),l}function s0(){try{var s=f.localStorage,l=Xu();if(s)return s.setItem(l,"1"),s.removeItem(l),t0()?!!f.indexedDB:!0}catch{return Mo()&&!!f.indexedDB}return!1}function Yu(){return(uv()||fc()==="chrome-extension:"||r0())&&!RC()&&s0()&&!Mo()}function uv(){return fc()==="http:"||fc()==="https:"}function fc(){return f.location&&f.location.protocol||null}function hf(s){return s=s||Or(),!(AC(s)||cc(s)==o0)}function ff(s){return typeof s>"u"?null:TC(s)}function DC(s){var l={},p;for(p in s)s.hasOwnProperty(p)&&s[p]!==null&&s[p]!==void 0&&(l[p]=s[p]);return l}function dc(s){if(s!==null)return JSON.parse(s)}function Xu(s){return s||Math.floor(1e9*Math.random()).toString()}function LC(s){return s=s||Or(),!(cc(s)=="Safari"||s.toLowerCase().match(/iphone|ipad|ipod/))}function MC(){var s=f.___jsl;if(s&&s.H){for(var l in s.H)if(s.H[l].r=s.H[l].r||[],s.H[l].L=s.H[l].L||[],s.H[l].r=s.H[l].L.concat(),s.CP)for(var p=0;p<s.CP.length;p++)s.CP[p]=null}}function Va(s,l){if(s>l)throw Error("Short delay should be less than long delay!");this.a=s,this.c=l,s=Or(),l=gs(),this.b=AC(s)||l==="ReactNative"}Va.prototype.get=function(){var s=f.navigator;return!(s&&typeof s.onLine=="boolean"&&(uv()||fc()==="chrome-extension:"||typeof s.connection<"u"))||s.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};function a0(){var s=f.document;return s&&typeof s.visibilityState<"u"?s.visibilityState=="visible":!0}function Q4(){var s=f.document,l=null;return a0()||!s?rt():new Ft(function(p){l=function(){a0()&&(s.removeEventListener("visibilitychange",l,!1),p())},s.addEventListener("visibilitychange",l,!1)}).o(function(p){throw s.removeEventListener("visibilitychange",l,!1),p})}function df(s){try{var l=new Date(parseInt(s,10));if(!isNaN(l.getTime())&&!/[^0-9]/.test(s))return l.toUTCString()}catch{}return null}function FC(){return!(!yn("fireauth.oauthhelper",f)&&!yn("fireauth.iframe",f))}function J4(){var s=f.navigator;return s&&s.serviceWorker&&s.serviceWorker.controller||null}function Z4(){var s=f.navigator;return s&&s.serviceWorker?rt().then(function(){return s.serviceWorker.ready}).then(function(l){return l.active||null}).o(function(){return null}):rt(null)}var jC={};function u0(s){jC[s]||(jC[s]=!0,typeof console<"u"&&typeof console.warn=="function"&&console.warn(s))}var l0;try{var c0={};Object.defineProperty(c0,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(c0,"abcd",{configurable:!0,enumerable:!0,value:2}),l0=c0.abcd==2}catch{l0=!1}function Qe(s,l,p){l0?Object.defineProperty(s,l,{configurable:!0,enumerable:!0,value:p}):s[l]=p}function oi(s,l){if(l)for(var p in l)l.hasOwnProperty(p)&&Qe(s,p,l[p])}function Ba(s){var l={};return oi(l,s),l}function e5(s){var l={},p;for(p in s)s.hasOwnProperty(p)&&(l[p]=s[p]);return l}function t5(s,l){if(!l||!l.length)return!0;if(!s)return!1;for(var p=0;p<l.length;p++){var _=s[l[p]];if(_==null||_==="")return!1}return!0}function h0(s){var l=s;if(typeof s=="object"&&s!=null){l="length"in s?[]:{};for(var p in s)Qe(l,p,h0(s[p]))}return l}function f0(s){var l=s&&(s[g0]?"phone":null);if(l&&s&&s[v0]){Qe(this,"uid",s[v0]),Qe(this,"displayName",s[UC]||null);var p=null;s[p0]&&(p=new Date(s[p0]).toUTCString()),Qe(this,"enrollmentTime",p),Qe(this,"factorId",l)}else throw new Z("internal-error","Internal assert: invalid MultiFactorInfo object")}f0.prototype.v=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};function d0(s){try{var l=new pf(s)}catch{l=null}return l}var UC="displayName",p0="enrolledAt",v0="mfaEnrollmentId",g0="phoneInfo";function pf(s){f0.call(this,s),Qe(this,"phoneNumber",s[g0])}he(pf,f0),pf.prototype.v=function(){var s=pf.Za.v.call(this);return s.phoneNumber=this.phoneNumber,s};function n5(s){var l={},p=s[r5],_=s[o5],C=s[s5];if(s=d0(s[i5]),!C||C!=lv&&C!=vf&&!p||C==vf&&!_||C==m0&&!s)throw Error("Invalid checkActionCode response!");C==vf?(l[BC]=p||null,l[zC]=p||null,l[VC]=_):(l[BC]=_||null,l[zC]=_||null,l[VC]=p||null),l[a5]=s||null,Qe(this,l5,C),Qe(this,u5,h0(l))}var m0="REVERT_SECOND_FACTOR_ADDITION",lv="EMAIL_SIGNIN",vf="VERIFY_AND_CHANGE_EMAIL",r5="email",i5="mfaInfo",o5="newEmail",s5="requestType",VC="email",BC="fromEmail",a5="multiFactorInfo",zC="previousEmail",u5="data",l5="operation";function y0(s){s=Hs(s);var l=ho(s,qC)||null,p=ho(s,WC)||null,_=ho(s,GC)||null;if(_=_&&d5[_]||null,!l||!p||!_)throw new Z("argument-error",qC+", "+WC+"and "+GC+" are required in a valid action code URL.");oi(this,{apiKey:l,operation:_,code:p,continueUrl:ho(s,c5)||null,languageCode:ho(s,h5)||null,tenantId:ho(s,f5)||null})}var qC="apiKey",WC="oobCode",c5="continueUrl",h5="languageCode",GC="mode",f5="tenantId",d5={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:m0,signIn:lv,verifyAndChangeEmail:vf,verifyEmail:"VERIFY_EMAIL"};function $C(s){try{return new y0(s)}catch{return null}}function cv(s){var l=s[p5];if(typeof l>"u")throw new Z("missing-continue-uri");if(typeof l!="string"||typeof l=="string"&&!l.length)throw new Z("invalid-continue-uri");this.h=l,this.b=this.a=null,this.g=!1;var p=s[HC];if(p&&typeof p=="object"){l=p[JC];var _=p[XC];if(p=p[QC],typeof l=="string"&&l.length){if(this.a=l,typeof _<"u"&&typeof _!="boolean")throw new Z("argument-error",XC+" property must be a boolean when specified.");if(this.g=!!_,typeof p<"u"&&(typeof p!="string"||typeof p=="string"&&!p.length))throw new Z("argument-error",QC+" property must be a non empty string when specified.");this.b=p||null}else{if(typeof l<"u")throw new Z("argument-error",JC+" property must be a non empty string when specified.");if(typeof _<"u"||typeof p<"u")throw new Z("missing-android-pkg-name")}}else if(typeof p<"u")throw new Z("argument-error",HC+" property must be a non null object when specified.");if(this.f=null,(l=s[YC])&&typeof l=="object"){if(l=l[ZC],typeof l=="string"&&l.length)this.f=l;else if(typeof l<"u")throw new Z("argument-error",ZC+" property must be a non empty string when specified.")}else if(typeof l<"u")throw new Z("argument-error",YC+" property must be a non null object when specified.");if(l=s[_0],typeof l<"u"&&typeof l!="boolean")throw new Z("argument-error",_0+" property must be a boolean when specified.");if(this.c=!!l,s=s[KC],typeof s<"u"&&(typeof s!="string"||typeof s=="string"&&!s.length))throw new Z("argument-error",KC+" property must be a non empty string when specified.");this.i=s||null}var HC="android",KC="dynamicLinkDomain",_0="handleCodeInApp",YC="iOS",p5="url",XC="installApp",QC="minimumVersion",JC="packageName",ZC="bundleId";function hv(s){var l={};l.continueUrl=s.h,l.canHandleCodeInApp=s.c,(l.androidPackageName=s.a)&&(l.androidMinimumVersion=s.b,l.androidInstallApp=s.g),l.iOSBundleId=s.f,l.dynamicLinkDomain=s.i;for(var p in l)l[p]===null&&delete l[p];return l}function v5(s){return ge(s,function(l){return l=l.toString(16),1<l.length?l:"0"+l}).join("")}var gf=null;function g5(s){var l="";return m5(s,function(p){l+=String.fromCharCode(p)}),l}function m5(s,l){function p(Se){for(;_<s.length;){var Ce=s.charAt(_++),gt=gf[Ce];if(gt!=null)return gt;if(!/^[\s\xa0]*$/.test(Ce))throw Error("Unknown base64 encoding at char: "+Ce)}return Se}y5();for(var _=0;;){var C=p(-1),j=p(0),G=p(64),re=p(64);if(re===64&&C===-1)break;l(C<<2|j>>4),G!=64&&(l(j<<4&240|G>>2),re!=64&&l(G<<6&192|re))}}function y5(){if(!gf){gf={};for(var s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),l=["+/=","+/","-_=","-_.","-_"],p=0;5>p;p++)for(var _=s.concat(l[p].split("")),C=0;C<_.length;C++){var j=_[C];gf[j]===void 0&&(gf[j]=C)}}}function fv(s){var l=eN(s);if(!(l&&l.sub&&l.iss&&l.aud&&l.exp))throw Error("Invalid JWT");this.g=s,this.c=l.exp,this.h=l.sub,this.a=l.provider_id||l.firebase&&l.firebase.sign_in_provider||null,this.f=l.firebase&&l.firebase.tenant||null,this.b=!!l.is_anonymous||this.a=="anonymous"}fv.prototype.S=function(){return this.f},fv.prototype.i=function(){return this.b},fv.prototype.toString=function(){return this.g};function dv(s){try{return new fv(s)}catch{return null}}function eN(s){if(!s||(s=s.split("."),s.length!=3))return null;s=s[1];for(var l=(4-s.length%4)%4,p=0;p<l;p++)s+=".";try{return JSON.parse(g5(s))}catch{}return null}var tN="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),pv=["client_id","response_type","scope","redirect_uri","state"],w0={kd:{Ha:"locale",ta:700,sa:600,ea:"facebook.com",Va:pv},md:{Ha:null,ta:500,sa:750,ea:"github.com",Va:pv},nd:{Ha:"hl",ta:515,sa:680,ea:"google.com",Va:pv},td:{Ha:"lang",ta:485,sa:705,ea:"twitter.com",Va:tN},gd:{Ha:"locale",ta:600,sa:600,ea:"apple.com",Va:[]}};function E0(s){for(var l in w0)if(w0[l].ea==s)return w0[l];return null}function nN(s){var l={};l["facebook.com"]=iN,l["google.com"]=sN,l["github.com"]=oN,l["twitter.com"]=aN;var p=s&&s[rN];try{if(p)return l[p]?new l[p](s):new ms(s);if(typeof s[b0]<"u")return new S0(s)}catch{}return null}var b0="idToken",rN="providerId";function S0(s){var l=s[rN];if(!l&&s[b0]){var p=dv(s[b0]);p&&p.a&&(l=p.a)}if(!l)throw Error("Invalid additional user info!");(l=="anonymous"||l=="custom")&&(l=null),p=!1,typeof s.isNewUser<"u"?p=!!s.isNewUser:s.kind==="identitytoolkit#SignupNewUserResponse"&&(p=!0),Qe(this,"providerId",l),Qe(this,"isNewUser",p)}function ms(s){S0.call(this,s),s=dc(s.rawUserInfo||"{}"),Qe(this,"profile",h0(s||{}))}he(ms,S0);function iN(s){if(ms.call(this,s),this.providerId!="facebook.com")throw Error("Invalid provider ID!")}he(iN,ms);function oN(s){if(ms.call(this,s),this.providerId!="github.com")throw Error("Invalid provider ID!");Qe(this,"username",this.profile&&this.profile.login||null)}he(oN,ms);function sN(s){if(ms.call(this,s),this.providerId!="google.com")throw Error("Invalid provider ID!")}he(sN,ms);function aN(s){if(ms.call(this,s),this.providerId!="twitter.com")throw Error("Invalid provider ID!");Qe(this,"username",s.screenName||null)}he(aN,ms);function uN(s){var l=Hs(s),p=ho(l,"link"),_=ho(Hs(p),"link");return l=ho(l,"deep_link_id"),ho(Hs(l),"link")||l||_||p||s}function vv(s,l){if(!s&&!l)throw new Z("internal-error","Internal assert: no raw session string available");if(s&&l)throw new Z("internal-error","Internal assert: unable to determine the session type");this.a=s||null,this.b=l||null,this.type=this.a?mf:gv}var mf="enroll",gv="signin";vv.prototype.Fa=function(){return this.a?rt(this.a):rt(this.b)},vv.prototype.v=function(){return this.type==mf?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}};function pc(){}pc.prototype.ia=function(){},pc.prototype.b=function(){},pc.prototype.c=function(){},pc.prototype.v=function(){};function vc(s,l){return s.then(function(p){if(p[Uo]){var _=dv(p[Uo]);if(!_||l!=_.h)throw new Z("user-mismatch");return p}throw new Z("user-mismatch")}).o(function(p){throw p&&p.code&&p.code==Ue+"user-not-found"?new Z("user-mismatch"):p})}function Qu(s,l){if(l)this.a=l;else throw new Z("internal-error","failed to construct a credential");Qe(this,"providerId",s),Qe(this,"signInMethod",s)}Qu.prototype.ia=function(s){return H0(s,T0(this))},Qu.prototype.b=function(s,l){var p=T0(this);return p.idToken=l,K0(s,p)},Qu.prototype.c=function(s,l){return vc(Y0(s,T0(this)),l)};function T0(s){return{pendingToken:s.a,requestUri:"http://localhost"}}Qu.prototype.v=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}};function _5(s){if(s&&s.providerId&&s.signInMethod&&s.providerId.indexOf("saml.")==0&&s.pendingToken)try{return new Qu(s.providerId,s.pendingToken)}catch{}return null}function Ks(s,l,p){if(this.a=null,l.idToken||l.accessToken)l.idToken&&Qe(this,"idToken",l.idToken),l.accessToken&&Qe(this,"accessToken",l.accessToken),l.nonce&&!l.pendingToken&&Qe(this,"nonce",l.nonce),l.pendingToken&&(this.a=l.pendingToken);else if(l.oauthToken&&l.oauthTokenSecret)Qe(this,"accessToken",l.oauthToken),Qe(this,"secret",l.oauthTokenSecret);else throw new Z("internal-error","failed to construct a credential");Qe(this,"providerId",s),Qe(this,"signInMethod",p)}Ks.prototype.ia=function(s){return H0(s,I0(this))},Ks.prototype.b=function(s,l){var p=I0(this);return p.idToken=l,K0(s,p)},Ks.prototype.c=function(s,l){var p=I0(this);return vc(Y0(s,p),l)};function I0(s){var l={};return s.idToken&&(l.id_token=s.idToken),s.accessToken&&(l.access_token=s.accessToken),s.secret&&(l.oauth_token_secret=s.secret),l.providerId=s.providerId,s.nonce&&!s.a&&(l.nonce=s.nonce),l={postBody:EC(l).toString(),requestUri:"http://localhost"},s.a&&(delete l.postBody,l.pendingToken=s.a),l}Ks.prototype.v=function(){var s={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(s.oauthIdToken=this.idToken),this.accessToken&&(s.oauthAccessToken=this.accessToken),this.secret&&(s.oauthTokenSecret=this.secret),this.nonce&&(s.nonce=this.nonce),this.a&&(s.pendingToken=this.a),s};function w5(s){if(s&&s.providerId&&s.signInMethod){var l={idToken:s.oauthIdToken,accessToken:s.oauthTokenSecret?null:s.oauthAccessToken,oauthTokenSecret:s.oauthTokenSecret,oauthToken:s.oauthTokenSecret&&s.oauthAccessToken,nonce:s.nonce,pendingToken:s.pendingToken};try{return new Ks(s.providerId,l,s.signInMethod)}catch{}}return null}function Ju(s,l){this.Oc=l||[],oi(this,{providerId:s,isOAuthProvider:!0}),this.Fb={},this.lb=(E0(s)||{}).Ha||null,this.kb=null}Ju.prototype.Ia=function(s){return this.Fb=N(s),this};function lN(s){if(typeof s!="string"||s.indexOf("saml.")!=0)throw new Z("argument-error",'SAML provider IDs must be prefixed with "saml."');Ju.call(this,s,[])}he(lN,Ju);function Bi(s){Ju.call(this,s,pv),this.a=[]}he(Bi,Ju),Bi.prototype.Aa=function(s){return Pe(this.a,s)||this.a.push(s),this},Bi.prototype.Nb=function(){return ri(this.a)},Bi.prototype.credential=function(s,l){var p;if(D(s)?p={idToken:s.idToken||null,accessToken:s.accessToken||null,nonce:s.rawNonce||null}:p={idToken:s||null,accessToken:l||null},!p.idToken&&!p.accessToken)throw new Z("argument-error","credential failed: must provide the ID token and/or the access token.");return new Ks(this.providerId,p,this.providerId)};function Zu(){Bi.call(this,"facebook.com")}he(Zu,Bi),Qe(Zu,"PROVIDER_ID","facebook.com"),Qe(Zu,"FACEBOOK_SIGN_IN_METHOD","facebook.com");function cN(s){if(!s)throw new Z("argument-error","credential failed: expected 1 argument (the OAuth access token).");var l=s;return D(s)&&(l=s.accessToken),new Zu().credential({accessToken:l})}function el(){Bi.call(this,"github.com")}he(el,Bi),Qe(el,"PROVIDER_ID","github.com"),Qe(el,"GITHUB_SIGN_IN_METHOD","github.com");function hN(s){if(!s)throw new Z("argument-error","credential failed: expected 1 argument (the OAuth access token).");var l=s;return D(s)&&(l=s.accessToken),new el().credential({accessToken:l})}function tl(){Bi.call(this,"google.com"),this.Aa("profile")}he(tl,Bi),Qe(tl,"PROVIDER_ID","google.com"),Qe(tl,"GOOGLE_SIGN_IN_METHOD","google.com");function fN(s,l){var p=s;return D(s)&&(p=s.idToken,l=s.accessToken),new tl().credential({idToken:p,accessToken:l})}function gc(){Ju.call(this,"twitter.com",tN)}he(gc,Ju),Qe(gc,"PROVIDER_ID","twitter.com"),Qe(gc,"TWITTER_SIGN_IN_METHOD","twitter.com");function dN(s,l){var p=s;if(D(p)||(p={oauthToken:s,oauthTokenSecret:l}),!p.oauthToken||!p.oauthTokenSecret)throw new Z("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new Ks("twitter.com",p,"twitter.com")}function za(s,l,p){this.a=s,this.f=l,Qe(this,"providerId","password"),Qe(this,"signInMethod",p===fo.EMAIL_LINK_SIGN_IN_METHOD?fo.EMAIL_LINK_SIGN_IN_METHOD:fo.EMAIL_PASSWORD_SIGN_IN_METHOD)}za.prototype.ia=function(s){return this.signInMethod==fo.EMAIL_LINK_SIGN_IN_METHOD?jt(s,iV,{email:this.a,oobCode:this.f}):jt(s,BN,{email:this.a,password:this.f})},za.prototype.b=function(s,l){return this.signInMethod==fo.EMAIL_LINK_SIGN_IN_METHOD?jt(s,oV,{idToken:l,email:this.a,oobCode:this.f}):jt(s,VN,{idToken:l,email:this.a,password:this.f})},za.prototype.c=function(s,l){return vc(this.ia(s),l)},za.prototype.v=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}};function E5(s){return s&&s.email&&s.password?new za(s.email,s.password,s.signInMethod):null}function fo(){oi(this,{providerId:"password",isOAuthProvider:!1})}function pN(s,l){if(l=x0(l),!l)throw new Z("argument-error","Invalid email link!");return new za(s,l.code,fo.EMAIL_LINK_SIGN_IN_METHOD)}function x0(s){return s=uN(s),(s=$C(s))&&s.operation===lv?s:null}oi(fo,{PROVIDER_ID:"password"}),oi(fo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),oi(fo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"});function qa(s){if(!(s.bb&&s.ab||s.Ja&&s.da))throw new Z("internal-error");this.a=s,Qe(this,"providerId","phone"),this.ea="phone",Qe(this,"signInMethod","phone")}qa.prototype.ia=function(s){return s.cb(yf(this))},qa.prototype.b=function(s,l){var p=yf(this);return p.idToken=l,jt(s,IV,p)},qa.prototype.c=function(s,l){var p=yf(this);return p.operation="REAUTH",s=jt(s,xV,p),vc(s,l)},qa.prototype.v=function(){var s={providerId:"phone"};return this.a.bb&&(s.verificationId=this.a.bb),this.a.ab&&(s.verificationCode=this.a.ab),this.a.Ja&&(s.temporaryProof=this.a.Ja),this.a.da&&(s.phoneNumber=this.a.da),s};function b5(s){if(s&&s.providerId==="phone"&&(s.verificationId&&s.verificationCode||s.temporaryProof&&s.phoneNumber)){var l={};return Dt(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(p){s[p]&&(l[p]=s[p])}),new qa(l)}return null}function yf(s){return s.a.Ja&&s.a.da?{temporaryProof:s.a.Ja,phoneNumber:s.a.da}:{sessionInfo:s.a.bb,code:s.a.ab}}function Ys(s){try{this.a=s||ze.auth()}catch{throw new Z("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}oi(this,{providerId:"phone",isOAuthProvider:!1})}Ys.prototype.cb=function(s,l){var p=this.a.b;return rt(l.verify()).then(function(_){if(typeof _!="string")throw new Z("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(l.type){case"recaptcha":var C=D(s)?s.session:null,j=D(s)?s.phoneNumber:s,G;return C&&C.type==mf?G=C.Fa().then(function(re){return Y5(p,{idToken:re,phoneEnrollmentInfo:{phoneNumber:j,recaptchaToken:_}})}):C&&C.type==gv?G=C.Fa().then(function(re){return X5(p,{mfaPendingCredential:re,mfaEnrollmentId:s.multiFactorHint&&s.multiFactorHint.uid||s.multiFactorUid,phoneSignInInfo:{recaptchaToken:_}})}):G=K5(p,{phoneNumber:j,recaptchaToken:_}),G.then(function(re){return typeof l.reset=="function"&&l.reset(),re},function(re){throw typeof l.reset=="function"&&l.reset(),re});default:throw new Z("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})};function vN(s,l){if(!s)throw new Z("missing-verification-id");if(!l)throw new Z("missing-verification-code");return new qa({bb:s,ab:l})}oi(Ys,{PROVIDER_ID:"phone"}),oi(Ys,{PHONE_SIGN_IN_METHOD:"phone"});function C0(s){if(s.temporaryProof&&s.phoneNumber)return new qa({Ja:s.temporaryProof,da:s.phoneNumber});var l=s&&s.providerId;if(!l||l==="password")return null;var p=s&&s.oauthAccessToken,_=s&&s.oauthTokenSecret,C=s&&s.nonce,j=s&&s.oauthIdToken,G=s&&s.pendingToken;try{switch(l){case"google.com":return fN(j,p);case"facebook.com":return cN(p);case"github.com":return hN(p);case"twitter.com":return dN(p,_);default:return p||_||j||G?G?l.indexOf("saml.")==0?new Qu(l,G):new Ks(l,{pendingToken:G,idToken:s.oauthIdToken,accessToken:s.oauthAccessToken},l):new Bi(l).credential({idToken:j,accessToken:p,rawNonce:C}):null}}catch{return null}}function N0(s){if(!s.isOAuthProvider)throw new Z("invalid-oauth-provider")}function Fo(s,l,p,_,C,j,G){if(this.c=s,this.b=l||null,this.g=p||null,this.f=_||null,this.i=j||null,this.h=G||null,this.a=C||null,this.g||this.a){if(this.g&&this.a)throw new Z("invalid-auth-event");if(this.g&&!this.f)throw new Z("invalid-auth-event")}else throw new Z("invalid-auth-event")}Fo.prototype.getUid=function(){var s=[];return s.push(this.c),this.b&&s.push(this.b),this.f&&s.push(this.f),this.h&&s.push(this.h),s.join("-")},Fo.prototype.S=function(){return this.h},Fo.prototype.v=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.v()}};function gN(s){return s=s||{},s.type?new Fo(s.type,s.eventId,s.urlResponse,s.sessionId,s.error&&be(s.error),s.postBody,s.tenantId):null}function S5(){this.b=null,this.a=[]}var A0=null;function T5(s){var l=A0;l.a.push(s),l.b||(l.b=function(p){for(var _=0;_<l.a.length;_++)l.a[_](p)},s=yn("universalLinks.subscribe",f),typeof s=="function"&&s(null,l.b))}function k0(s){var l="unauthorized-domain",p=void 0,_=Hs(s);s=_.b,_=_.f,_=="chrome-extension"?p=nt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",s):_=="http"||_=="https"?p=nt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",s):l="operation-not-supported-in-this-environment",Z.call(this,l,p)}he(k0,Z);function _f(s,l,p){Z.call(this,s,p),s=l||{},s.Gb&&Qe(this,"email",s.Gb),s.da&&Qe(this,"phoneNumber",s.da),s.credential&&Qe(this,"credential",s.credential),s.Wb&&Qe(this,"tenantId",s.Wb)}he(_f,Z),_f.prototype.v=function(){var s={code:this.code,message:this.message};this.email&&(s.email=this.email),this.phoneNumber&&(s.phoneNumber=this.phoneNumber),this.tenantId&&(s.tenantId=this.tenantId);var l=this.credential&&this.credential.v();return l&&P(s,l),s},_f.prototype.toJSON=function(){return this.v()};function mv(s){if(s.code){var l=s.code||"";l.indexOf(Ue)==0&&(l=l.substring(Ue.length));var p={credential:C0(s),Wb:s.tenantId};if(s.email)p.Gb=s.email;else if(s.phoneNumber)p.da=s.phoneNumber;else if(!p.credential)return new Z(l,s.message||void 0);return new _f(l,p,s.message)}return null}function wf(){}wf.prototype.c=null;function mN(s){return s.c||(s.c=s.b())}var R0;function yv(){}he(yv,wf),yv.prototype.a=function(){var s=yN(this);return s?new ActiveXObject(s):new XMLHttpRequest},yv.prototype.b=function(){var s={};return yN(this)&&(s[0]=!0,s[1]=!0),s};function yN(s){if(!s.f&&typeof XMLHttpRequest>"u"&&typeof ActiveXObject<"u"){for(var l=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],p=0;p<l.length;p++){var _=l[p];try{return new ActiveXObject(_),s.f=_}catch{}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return s.f}R0=new yv;function _v(){}he(_v,wf),_v.prototype.a=function(){var s=new XMLHttpRequest;if("withCredentials"in s)return s;if(typeof XDomainRequest<"u")return new _N;throw Error("Unsupported browser")},_v.prototype.b=function(){return{}};function _N(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=oe(this.oc,this),this.a.onerror=oe(this.Pb,this),this.a.onprogress=oe(this.pc,this),this.a.ontimeout=oe(this.tc,this)}t=_N.prototype,t.open=function(s,l,p){if(p!=null&&!p)throw Error("Only async requests are supported.");this.a.open(s,l)},t.send=function(s){if(s)if(typeof s=="string")this.a.send(s);else throw Error("Only string data is supported");else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(s){return s.toLowerCase()=="content-type"?this.a.contentType:""},t.oc=function(){this.status=200,this.response=this.responseText=this.a.responseText,O0(this,4)},t.Pb=function(){this.status=500,this.response=this.responseText="",O0(this,4)},t.tc=function(){this.Pb()},t.pc=function(){this.status=200,O0(this,1)};function O0(s,l){s.readyState=l,s.onreadystatechange&&s.onreadystatechange()}t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType};function P0(s,l,p){this.reset(s,l,p,void 0,void 0)}P0.prototype.a=null,P0.prototype.reset=function(s,l,p,_,C){delete this.a};function D0(s){this.f=s,this.b=this.c=this.a=null}function Ef(s,l){this.name=s,this.value=l}Ef.prototype.toString=function(){return this.name};var wN=new Ef("SEVERE",1e3),L0=new Ef("WARNING",900),I5=new Ef("CONFIG",700),x5=new Ef("FINE",500);function EN(s){return s.c?s.c:s.a?EN(s.a):(Ne("Root logger has no level set."),null)}D0.prototype.log=function(s,l,p){if(s.value>=EN(this).value)for(L(l)&&(l=l()),s=new P0(s,String(l),this.f),p&&(s.a=p),p=this;p;)p=p.a};var M0={},wv=null;function F0(s){wv||(wv=new D0(""),M0[""]=wv,wv.c=I5);var l;if(!(l=M0[s])){l=new D0(s);var p=s.lastIndexOf("."),_=s.substr(p+1);p=F0(s.substr(0,p)),p.b||(p.b={}),p.b[_]=l,l.a=p,M0[s]=l}return l}function po(s,l){s&&s.log(x5,l,void 0)}function Ev(s){this.f=s}he(Ev,wf),Ev.prototype.a=function(){return new j0(this.f)},Ev.prototype.b=function(s){return function(){return s}}({});function j0(s){ii.call(this),this.s=s,this.readyState=U0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=F0("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}he(j0,ii);var U0=0;t=j0.prototype,t.open=function(s,l){if(this.readyState!=U0)throw this.abort(),Error("Error reopening a connection");this.m=s,this.g=l,this.readyState=1,Sf(this)},t.send=function(s){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.a=!0;var l={headers:this.i,method:this.m,credentials:void 0,cache:void 0};s&&(l.body=s),this.s.fetch(new Request(this.g,l)).then(this.sc.bind(this),this.Sa.bind(this))},t.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&this.readyState!=4&&(this.a=!1,bf(this,!1)),this.readyState=U0},t.sc=function(s){this.a&&(this.f=s,this.b||(this.b=s.headers,this.readyState=2,Sf(this)),this.a&&(this.readyState=3,Sf(this),this.a&&(this.responseType==="arraybuffer"?s.arrayBuffer().then(this.qc.bind(this),this.Sa.bind(this)):typeof f.ReadableStream<"u"&&"body"in s?(this.response=this.responseText="",this.c=s.body.getReader(),this.l=new TextDecoder,bN(this)):s.text().then(this.rc.bind(this),this.Sa.bind(this)))))};function bN(s){s.c.read().then(s.nc.bind(s)).catch(s.Sa.bind(s))}t.nc=function(s){if(this.a){var l=this.l.decode(s.value?s.value:new Uint8Array(0),{stream:!s.done});l&&(this.response=this.responseText+=l),s.done?bf(this,!0):Sf(this),this.readyState==3&&bN(this)}},t.rc=function(s){this.a&&(this.response=this.responseText=s,bf(this,!0))},t.qc=function(s){this.a&&(this.response=s,bf(this,!0))},t.Sa=function(s){var l=this.h;l&&l.log(L0,"Failed to fetch url "+this.g,s instanceof Error?s:Error(s)),this.a&&bf(this,!0)};function bf(s,l){l&&s.f&&(s.status=s.f.status,s.statusText=s.f.statusText),s.readyState=4,s.f=null,s.c=null,s.l=null,Sf(s)}t.setRequestHeader=function(s,l){this.i.append(s,l)},t.getResponseHeader=function(s){return this.b?this.b.get(s.toLowerCase())||"":((s=this.h)&&s.log(L0,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var s=this.h;return s&&s.log(L0,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}s=[];for(var l=this.b.entries(),p=l.next();!p.done;)p=p.value,s.push(p[0]+": "+p[1]),p=l.next();return s.join(`\r
`)};function Sf(s){s.onreadystatechange&&s.onreadystatechange.call(s)}function Tf(s){ii.call(this),this.headers=new uc,this.D=s||null,this.c=!1,this.B=this.a=null,this.h=this.P=this.l="",this.f=this.O=this.i=this.N=!1,this.g=0,this.s=null,this.m=SN,this.w=this.R=!1}he(Tf,ii);var SN="";Tf.prototype.b=F0("goog.net.XhrIo");var C5=/^https?$/i,N5=["POST","PUT"];function A5(s,l,p,_,C){if(s.a)throw Error("[goog.net.XhrIo] Object is active with another request="+s.l+"; newUri="+l);p=p?p.toUpperCase():"GET",s.l=l,s.h="",s.P=p,s.N=!1,s.c=!0,s.a=s.D?s.D.a():R0.a(),s.B=s.D?mN(s.D):mN(R0),s.a.onreadystatechange=oe(s.Sb,s);try{po(s.b,Xs(s,"Opening Xhr")),s.O=!0,s.a.open(p,String(l),!0),s.O=!1}catch(G){po(s.b,Xs(s,"Error opening Xhr: "+G.message)),TN(s,G);return}l=_||"";var j=new uc(s.headers);C&&L4(C,function(G,re){j.set(re,G)}),C=je(j.X()),_=f.FormData&&l instanceof f.FormData,!Pe(N5,p)||C||_||j.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),j.forEach(function(G,re){this.a.setRequestHeader(re,G)},s),s.m&&(s.a.responseType=s.m),"withCredentials"in s.a&&s.a.withCredentials!==s.R&&(s.a.withCredentials=s.R);try{CN(s),0<s.g&&(s.w=k5(s.a),po(s.b,Xs(s,"Will abort after "+s.g+"ms if incomplete, xhr2 "+s.w)),s.w?(s.a.timeout=s.g,s.a.ontimeout=oe(s.Ka,s)):s.s=Y_(s.Ka,s.g,s)),po(s.b,Xs(s,"Sending request")),s.i=!0,s.a.send(l),s.i=!1}catch(G){po(s.b,Xs(s,"Send error: "+G.message)),TN(s,G)}}function k5(s){return Et&&Si(9)&&typeof s.timeout=="number"&&s.ontimeout!==void 0}function R5(s){return s.toLowerCase()=="content-type"}t=Tf.prototype,t.Ka=function(){typeof c<"u"&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",po(this.b,Xs(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))};function TN(s,l){s.c=!1,s.a&&(s.f=!0,s.a.abort(),s.f=!1),s.h=l,IN(s),bv(s)}function IN(s){s.N||(s.N=!0,s.dispatchEvent("complete"),s.dispatchEvent("error"))}t.abort=function(){this.a&&this.c&&(po(this.b,Xs(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),bv(this))},t.Ba=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),bv(this,!0)),Tf.Za.Ba.call(this)},t.Sb=function(){this.wa||(this.O||this.i||this.f?xN(this):this.Hc())},t.Hc=function(){xN(this)};function xN(s){if(s.c&&typeof c<"u"){if(s.B[1]&&If(s)==4&&Sv(s)==2)po(s.b,Xs(s,"Local request error detected and ignored"));else if(s.i&&If(s)==4)Y_(s.Sb,0,s);else if(s.dispatchEvent("readystatechange"),If(s)==4){po(s.b,Xs(s,"Request complete")),s.c=!1;try{var l=Sv(s);e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var _;if(!(_=p)){var C;if(C=l===0){var j=String(s.l).match(yC)[1]||null;if(!j&&f.self&&f.self.location){var G=f.self.location.protocol;j=G.substr(0,G.length-1)}C=!C5.test(j?j.toLowerCase():"")}_=C}if(_)s.dispatchEvent("complete"),s.dispatchEvent("success");else{try{var re=2<If(s)?s.a.statusText:""}catch(Se){po(s.b,"Can not get status: "+Se.message),re=""}s.h=re+" ["+Sv(s)+"]",IN(s)}}finally{bv(s)}}}}function bv(s,l){if(s.a){CN(s);var p=s.a,_=s.B[0]?b:null;s.a=null,s.B=null,l||s.dispatchEvent("ready");try{p.onreadystatechange=_}catch(C){(s=s.b)&&s.log(wN,"Problem encountered resetting onreadystatechange: "+C.message,void 0)}}}function CN(s){s.a&&s.w&&(s.a.ontimeout=null),s.s&&(f.clearTimeout(s.s),s.s=null)}function If(s){return s.a?s.a.readyState:0}function Sv(s){try{return 2<If(s)?s.a.status:-1}catch{return-1}}function O5(s){try{return s.a?s.a.responseText:""}catch(l){return po(s.b,"Can not get responseText: "+l.message),""}}t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case SN:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var s=this.b;return s&&s.log(wN,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(l){return po(this.b,"Can not get response: "+l.message),null}};function Xs(s,l){return l+" ["+s.P+" "+s.l+" "+Sv(s)+"]"}function nl(s){var l=L5;this.g=[],this.w=l,this.s=s||null,this.f=this.a=!1,this.c=void 0,this.u=this.B=this.i=!1,this.h=0,this.b=null,this.l=0}nl.prototype.cancel=function(s){if(this.a)this.c instanceof nl&&this.c.cancel();else{if(this.b){var l=this.b;delete this.b,s?l.cancel(s):(l.l--,0>=l.l&&l.cancel())}this.w?this.w.call(this.s,this):this.u=!0,this.a||(s=new Cf,Tv(this),xf(this,!1,s))}},nl.prototype.m=function(s,l){this.i=!1,xf(this,s,l)};function xf(s,l,p){s.a=!0,s.c=p,s.f=!l,AN(s)}function Tv(s){if(s.a){if(!s.u)throw new Iv;s.u=!1}}function P5(s,l){V0(s,null,l,void 0)}function V0(s,l,p,_){s.g.push([l,p,_]),s.a&&AN(s)}nl.prototype.then=function(s,l,p){var _,C,j=new Ft(function(G,re){_=G,C=re});return V0(this,_,function(G){G instanceof Cf?j.cancel():C(G)}),j.then(s,l,p)},nl.prototype.$goog_Thenable=!0;function NN(s){return _e(s.g,function(l){return L(l[1])})}function AN(s){if(s.h&&s.a&&NN(s)){var l=s.h,p=xv[l];p&&(f.clearTimeout(p.a),delete xv[l]),s.h=0}s.b&&(s.b.l--,delete s.b),l=s.c;for(var _=p=!1;s.g.length&&!s.i;){var C=s.g.shift(),j=C[0],G=C[1];if(C=C[2],j=s.f?G:j)try{var re=j.call(C||s.s,l);re!==void 0&&(s.f=s.f&&(re==l||re instanceof Error),s.c=l=re),(xe(l)||typeof f.Promise=="function"&&l instanceof f.Promise)&&(_=!0,s.i=!0)}catch(Se){l=Se,s.f=!0,NN(s)||(p=!0)}}s.c=l,_&&(re=oe(s.m,s,!0),_=oe(s.m,s,!1),l instanceof nl?(V0(l,re,_),l.B=!0):l.then(re,_)),p&&(l=new kN(l),xv[l.a]=l,s.h=l.a)}function Iv(){_t.call(this)}he(Iv,_t),Iv.prototype.message="Deferred has already fired",Iv.prototype.name="AlreadyCalledError";function Cf(){_t.call(this)}he(Cf,_t),Cf.prototype.message="Deferred was canceled",Cf.prototype.name="CanceledError";function kN(s){this.a=f.setTimeout(oe(this.c,this),0),this.b=s}kN.prototype.c=function(){throw delete xv[this.a],this.b};var xv={};function B0(s){var l={},p=l.document||document,_=k(s).toString(),C=Ws(document,"SCRIPT"),j={Tb:C,Ka:void 0},G=new nl(j),re=null,Se=l.timeout!=null?l.timeout:5e3;return 0<Se&&(re=window.setTimeout(function(){Cv(C,!0);var Ce=new z0(F5,"Timeout reached for loading script "+_);Tv(G),xf(G,!1,Ce)},Se),j.Ka=re),C.onload=C.onreadystatechange=function(){C.readyState&&C.readyState!="loaded"&&C.readyState!="complete"||(Cv(C,l.ud||!1,re),Tv(G),xf(G,!0,null))},C.onerror=function(){Cv(C,!0,re);var Ce=new z0(M5,"Error while loading script "+_);Tv(G),xf(G,!1,Ce)},j=l.attributes||{},P(j,{type:"text/javascript",charset:"UTF-8"}),Do(C,j),lt(C,s),D5(p).appendChild(C),G}function D5(s){var l;return(l=(s||document).getElementsByTagName("HEAD"))&&l.length!=0?l[0]:s.documentElement}function L5(){if(this&&this.Tb){var s=this.Tb;s&&s.tagName=="SCRIPT"&&Cv(s,!0,this.Ka)}}function Cv(s,l,p){p!=null&&f.clearTimeout(p),s.onload=b,s.onerror=b,s.onreadystatechange=b,l&&window.setTimeout(function(){s&&s.parentNode&&s.parentNode.removeChild(s)},0)}var M5=0,F5=1;function z0(s,l){var p="Jsloader error (code #"+s+")";l&&(p+=": "+l),_t.call(this,p),this.code=s}he(z0,_t);function Nv(s){this.f=s}he(Nv,wf),Nv.prototype.a=function(){return new this.f},Nv.prototype.b=function(){return{}};function jo(s,l,p){if(this.c=s,s=l||{},this.u=s.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=s.secureTokenTimeout||j5,this.g=N(s.secureTokenHeaders||U5),this.h=s.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.l=s.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.i=s.firebaseTimeout||V5,this.a=N(s.firebaseHeaders||B5),p&&(this.a["X-Client-Version"]=p,this.g["X-Client-Version"]=p),p=gs()=="Node",p=f.XMLHttpRequest||p&&ze.INTERNAL.node&&ze.INTERNAL.node.XMLHttpRequest,!p&&!Mo())throw new Z("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,Mo()?this.f=new Ev(self):RC()?this.f=new Nv(p):this.f=new _v,this.b=null}var q0,Uo="idToken",j5=new Va(3e4,6e4),U5={"Content-Type":"application/x-www-form-urlencoded"},V5=new Va(3e4,6e4),B5={"Content-Type":"application/json"};function RN(s,l){l?s.a["X-Firebase-Locale"]=l:delete s.a["X-Firebase-Locale"]}function ON(s,l){l?(s.a["X-Client-Version"]=l,s.g["X-Client-Version"]=l):(delete s.a["X-Client-Version"],delete s.g["X-Client-Version"])}jo.prototype.S=function(){return this.b};function PN(s,l,p,_,C,j,G){G4()||Mo()?s=oe(s.w,s):(q0||(q0=new Ft(function(re,Se){q5(re,Se)})),s=oe(s.s,s)),s(l,p,_,C,j,G)}jo.prototype.w=function(s,l,p,_,C,j){if(Mo()&&(typeof f.fetch>"u"||typeof f.Headers>"u"||typeof f.Request>"u"))throw new Z("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var G=new Tf(this.f);if(j){G.g=Math.max(0,j);var re=setTimeout(function(){G.dispatchEvent("timeout")},j)}vC(G,"complete",function(){re&&clearTimeout(re);var Se=null;try{Se=JSON.parse(O5(this))||null}catch{Se=null}l&&l(Se)}),K_(G,"ready",function(){re&&clearTimeout(re),uC(this)}),K_(G,"timeout",function(){re&&clearTimeout(re),uC(this),l&&l(null)}),A5(G,s,p,_,C)};var z5=new A(H,"https://apis.google.com/js/client.js?onload=%{onload}"),DN="__fcb"+Math.floor(1e6*Math.random()).toString();function q5(s,l){if(((window.gapi||{}).client||{}).request)s();else{f[DN]=function(){((window.gapi||{}).client||{}).request?s():l(Error("CORS_UNSUPPORTED"))};var p=M(z5,{onload:DN});P5(B0(p),function(){l(Error("CORS_UNSUPPORTED"))})}}jo.prototype.s=function(s,l,p,_,C){var j=this;q0.then(function(){window.gapi.client.setApiKey(j.c);var G=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:s,method:p,body:_,headers:C,authType:"none",callback:function(re){window.gapi.auth.setToken(G),l&&l(re)}})}).o(function(G){l&&l({error:{message:G&&G.message||"CORS_UNSUPPORTED"}})})};function W5(s,l){return new Ft(function(p,_){l.grant_type=="refresh_token"&&l.refresh_token||l.grant_type=="authorization_code"&&l.code?PN(s,s.u+"?key="+encodeURIComponent(s.c),function(C){C?C.error?_(Q0(C)):C.access_token&&C.refresh_token?p(C):_(new Z("internal-error")):_(new Z("network-request-failed"))},"POST",EC(l).toString(),s.g,s.m.get()):_(new Z("internal-error"))})}function LN(s,l,p,_,C,j,G){var re=Hs(l+p);Bn(re,"key",s.c),G&&Bn(re,"cb",me().toString());var Se=_=="GET";if(Se)for(var Ce in C)C.hasOwnProperty(Ce)&&Bn(re,Ce,C[Ce]);return new Ft(function(gt,rn){PN(s,re.toString(),function(Yt){Yt?Yt.error?rn(Q0(Yt,j||{})):gt(Yt):rn(new Z("network-request-failed"))},_,Se?void 0:TC(DC(C)),s.a,s.i.get())})}function rl(s){if(s=s.email,typeof s!="string"||!K4.test(s))throw new Z("invalid-email")}function MN(s){"email"in s&&rl(s)}function G5(s,l){return jt(s,tV,{identifier:l,continueUri:uv()?cf():"http://localhost"}).then(function(p){return p.signinMethods||[]})}function $5(s){return jt(s,dV,{}).then(function(l){return l.authorizedDomains||[]})}function Ti(s){if(!s[Uo])throw s.mfaPendingCredential?new Z("multi-factor-auth-required",null,N(s)):new Z("internal-error")}function W0(s){if(s.phoneNumber||s.temporaryProof){if(!s.phoneNumber||!s.temporaryProof)throw new Z("internal-error")}else{if(!s.sessionInfo)throw new Z("missing-verification-id");if(!s.code)throw new Z("missing-verification-code")}}jo.prototype.vb=function(){return jt(this,mV,{})},jo.prototype.xb=function(s,l){return jt(this,UN,{idToken:s,email:l})},jo.prototype.yb=function(s,l){return jt(this,VN,{idToken:s,password:l})};var H5={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};t=jo.prototype,t.zb=function(s,l){var p={idToken:s},_=[];return S(H5,function(C,j){var G=l[j];G===null?_.push(C):j in l&&(p[j]=G)}),_.length&&(p.deleteAttribute=_),jt(this,UN,p)},t.rb=function(s,l){return s={requestType:"PASSWORD_RESET",email:s},P(s,l),jt(this,fV,s)},t.sb=function(s,l){return s={requestType:"EMAIL_SIGNIN",email:s},P(s,l),jt(this,lV,s)},t.qb=function(s,l){return s={requestType:"VERIFY_EMAIL",idToken:s},P(s,l),jt(this,cV,s)},t.Ab=function(s,l,p){return s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:s,newEmail:l},P(s,p),jt(this,hV,s)};function K5(s,l){return jt(s,gV,l)}t.cb=function(s){return jt(this,TV,s)};function Y5(s,l){return jt(s,yV,l).then(function(p){return p.phoneSessionInfo.sessionInfo})}function FN(s){if(!s.phoneVerificationInfo)throw new Z("internal-error");if(!s.phoneVerificationInfo.sessionInfo)throw new Z("missing-verification-id");if(!s.phoneVerificationInfo.code)throw new Z("missing-verification-code")}function X5(s,l){return jt(s,_V,l).then(function(p){return p.phoneResponseInfo.sessionInfo})}function Q5(s,l,p){return jt(s,rV,{idToken:l,deleteProvider:p})}function G0(s){if(!s.requestUri||!s.sessionId&&!s.postBody&&!s.pendingToken)throw new Z("internal-error")}function $0(s,l){return l.oauthIdToken&&l.providerId&&l.providerId.indexOf("oidc.")==0&&!l.pendingToken&&(s.sessionId?l.nonce=s.sessionId:s.postBody&&(s=new Hu(s.postBody),Z_(s,"nonce")&&(l.nonce=s.get("nonce")))),l}function jN(s){var l=null;if(s.needConfirmation?(s.code="account-exists-with-different-credential",l=mv(s)):s.errorMessage=="FEDERATED_USER_ID_ALREADY_LINKED"?(s.code="credential-already-in-use",l=mv(s)):s.errorMessage=="EMAIL_EXISTS"?(s.code="email-already-in-use",l=mv(s)):s.errorMessage&&(l=zN(s.errorMessage)),l)throw l;Ti(s)}function H0(s,l){return l.returnIdpCredential=!0,jt(s,wV,l)}function K0(s,l){return l.returnIdpCredential=!0,jt(s,bV,l)}function Y0(s,l){return l.returnIdpCredential=!0,l.autoCreate=!1,jt(s,EV,l)}function X0(s){if(!s.oobCode)throw new Z("invalid-action-code")}t.jb=function(s,l){return jt(this,vV,{oobCode:s,newPassword:l})},t.Pa=function(s){return jt(this,Z5,{oobCode:s})},t.fb=function(s){return jt(this,J5,{oobCode:s})};var J5={endpoint:"setAccountInfo",A:X0,Y:"email",C:!0},Z5={endpoint:"resetPassword",A:X0,G:function(s){var l=s.requestType;if(!l||!s.email&&l!="EMAIL_SIGNIN"&&l!="VERIFY_AND_CHANGE_EMAIL")throw new Z("internal-error")},C:!0},eV={endpoint:"signupNewUser",A:function(s){if(rl(s),!s.password)throw new Z("weak-password")},G:Ti,U:!0,C:!0},tV={endpoint:"createAuthUri",C:!0},nV={endpoint:"deleteAccount",M:["idToken"]},rV={endpoint:"setAccountInfo",M:["idToken","deleteProvider"],A:function(s){if(E(s.deleteProvider)!="array")throw new Z("internal-error")}},iV={endpoint:"emailLinkSignin",M:["email","oobCode"],A:rl,G:Ti,U:!0,C:!0},oV={endpoint:"emailLinkSignin",M:["idToken","email","oobCode"],A:rl,G:Ti,U:!0},sV={endpoint:"accounts/mfaEnrollment:finalize",M:["idToken","phoneVerificationInfo"],A:FN,G:Ti,C:!0,La:!0},aV={endpoint:"accounts/mfaSignIn:finalize",M:["mfaPendingCredential","phoneVerificationInfo"],A:FN,G:Ti,C:!0,La:!0},uV={endpoint:"getAccountInfo"},lV={endpoint:"getOobConfirmationCode",M:["requestType"],A:function(s){if(s.requestType!="EMAIL_SIGNIN")throw new Z("internal-error");rl(s)},Y:"email",C:!0},cV={endpoint:"getOobConfirmationCode",M:["idToken","requestType"],A:function(s){if(s.requestType!="VERIFY_EMAIL")throw new Z("internal-error")},Y:"email",C:!0},hV={endpoint:"getOobConfirmationCode",M:["idToken","newEmail","requestType"],A:function(s){if(s.requestType!="VERIFY_AND_CHANGE_EMAIL")throw new Z("internal-error")},Y:"email",C:!0},fV={endpoint:"getOobConfirmationCode",M:["requestType"],A:function(s){if(s.requestType!="PASSWORD_RESET")throw new Z("internal-error");rl(s)},Y:"email",C:!0},dV={hb:!0,endpoint:"getProjectConfig",Rb:"GET"},pV={hb:!0,endpoint:"getRecaptchaParam",Rb:"GET",G:function(s){if(!s.recaptchaSiteKey)throw new Z("internal-error")}},vV={endpoint:"resetPassword",A:X0,Y:"email",C:!0},gV={endpoint:"sendVerificationCode",M:["phoneNumber","recaptchaToken"],Y:"sessionInfo",C:!0},UN={endpoint:"setAccountInfo",M:["idToken"],A:MN,U:!0},VN={endpoint:"setAccountInfo",M:["idToken"],A:function(s){if(MN(s),!s.password)throw new Z("weak-password")},G:Ti,U:!0},mV={endpoint:"signupNewUser",G:Ti,U:!0,C:!0},yV={endpoint:"accounts/mfaEnrollment:start",M:["idToken","phoneEnrollmentInfo"],A:function(s){if(!s.phoneEnrollmentInfo)throw new Z("internal-error");if(!s.phoneEnrollmentInfo.phoneNumber)throw new Z("missing-phone-number");if(!s.phoneEnrollmentInfo.recaptchaToken)throw new Z("missing-app-credential")},G:function(s){if(!s.phoneSessionInfo||!s.phoneSessionInfo.sessionInfo)throw new Z("internal-error")},C:!0,La:!0},_V={endpoint:"accounts/mfaSignIn:start",M:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(s){if(!s.phoneSignInInfo||!s.phoneSignInInfo.recaptchaToken)throw new Z("missing-app-credential")},G:function(s){if(!s.phoneResponseInfo||!s.phoneResponseInfo.sessionInfo)throw new Z("internal-error")},C:!0,La:!0},wV={endpoint:"verifyAssertion",A:G0,Wa:$0,G:jN,U:!0,C:!0},EV={endpoint:"verifyAssertion",A:G0,Wa:$0,G:function(s){if(s.errorMessage&&s.errorMessage=="USER_NOT_FOUND")throw new Z("user-not-found");if(s.errorMessage)throw zN(s.errorMessage);Ti(s)},U:!0,C:!0},bV={endpoint:"verifyAssertion",A:function(s){if(G0(s),!s.idToken)throw new Z("internal-error")},Wa:$0,G:jN,U:!0},SV={endpoint:"verifyCustomToken",A:function(s){if(!s.token)throw new Z("invalid-custom-token")},G:Ti,U:!0,C:!0},BN={endpoint:"verifyPassword",A:function(s){if(rl(s),!s.password)throw new Z("wrong-password")},G:Ti,U:!0,C:!0},TV={endpoint:"verifyPhoneNumber",A:W0,G:Ti,C:!0},IV={endpoint:"verifyPhoneNumber",A:function(s){if(!s.idToken)throw new Z("internal-error");W0(s)},G:function(s){if(s.temporaryProof)throw s.code="credential-already-in-use",mv(s);Ti(s)}},xV={Eb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:W0,G:Ti,C:!0},CV={endpoint:"accounts/mfaEnrollment:withdraw",M:["idToken","mfaEnrollmentId"],G:function(s){if(!!s[Uo]^!!s.refreshToken)throw new Z("internal-error")},C:!0,La:!0};function jt(s,l,p){if(!t5(p,l.M))return mn(new Z("internal-error"));var _=!!l.La,C=l.Rb||"POST",j;return rt(p).then(l.A).then(function(){return l.U&&(p.returnSecureToken=!0),l.C&&s.b&&typeof p.tenantId>"u"&&(p.tenantId=s.b),_?LN(s,s.l,l.endpoint,C,p,l.Eb,l.hb||!1):LN(s,s.h,l.endpoint,C,p,l.Eb,l.hb||!1)}).then(function(G){return j=G,l.Wa?l.Wa(p,j):j}).then(l.G).then(function(){if(!l.Y)return j;if(!(l.Y in j))throw new Z("internal-error");return j[l.Y]})}function zN(s){return Q0({error:{errors:[{message:s}],code:400,message:s}})}function Q0(s,l){var p=(s.error&&s.error.errors&&s.error.errors[0]||{}).reason||"",_={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(p=_[p]?new Z(_[p]):null)return p;p=s.error&&s.error.message||"",_={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},P(_,l||{}),l=(l=p.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<l.length?l[1]:void 0;for(var C in _)if(p.indexOf(C)===0)return new Z(_[C],l);return!l&&s&&(l=ff(s)),new Z("internal-error",l)}function NV(s){this.b=s,this.a=null,this.nb=AV(this)}function AV(s){return LV().then(function(){return new Ft(function(l,p){yn("gapi.iframes.getContext")().open({where:document.body,url:s.b,messageHandlersFilter:yn("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(_){function C(){clearTimeout(j),l()}s.a=_,s.a.restyle({setHideOnLeave:!1});var j=setTimeout(function(){p(Error("Network Error"))},DV.get());_.ping(C).then(C,function(){p(Error("Network Error"))})})})})}function kV(s,l){return s.nb.then(function(){return new Ft(function(p){s.a.send(l.type,l,p,yn("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}function RV(s,l){s.nb.then(function(){s.a.register("authEvent",l,yn("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}var OV=new A(H,"https://apis.google.com/js/api.js?onload=%{onload}"),PV=new Va(3e4,6e4),DV=new Va(5e3,15e3),Av=null;function LV(){return Av||(Av=new Ft(function(s,l){function p(){MC(),yn("gapi.load")("gapi.iframes",{callback:s,ontimeout:function(){MC(),l(Error("Network Error"))},timeout:PV.get()})}if(yn("gapi.iframes.Iframe"))s();else if(yn("gapi.load"))p();else{var _="__iframefcb"+Math.floor(1e6*Math.random()).toString();f[_]=function(){yn("gapi.load")?p():l(Error("Network Error"))},_=M(OV,{onload:_}),rt(B0(_)).o(function(){l(Error("Network Error"))})}}).o(function(s){throw Av=null,s}))}function qN(s,l,p){this.i=s,this.g=l,this.h=p,this.f=null,this.a=_C(this.i,"/__/auth/iframe"),Bn(this.a,"apiKey",this.g),Bn(this.a,"appName",this.h),this.b=null,this.c=[]}qN.prototype.toString=function(){return this.f?Bn(this.a,"v",this.f):vs(this.a.a,"v"),this.b?Bn(this.a,"eid",this.b):vs(this.a.a,"eid"),this.c.length?Bn(this.a,"fw",this.c.join(",")):vs(this.a.a,"fw"),this.a.toString()};function J0(s,l,p,_,C){this.s=s,this.m=l,this.c=p,this.u=_,this.i=this.g=this.l=null,this.a=C,this.h=this.f=null}J0.prototype.ub=function(s){return this.h=s,this},J0.prototype.toString=function(){var s=_C(this.s,"/__/auth/handler");if(Bn(s,"apiKey",this.m),Bn(s,"appName",this.c),Bn(s,"authType",this.u),this.a.isOAuthProvider){var l=this.a;try{var p=ze.app(this.c).auth().ja()}catch{p=null}l.kb=p,Bn(s,"providerId",this.a.providerId),l=this.a,p=DC(l.Fb);for(var _ in p)p[_]=p[_].toString();_=l.Oc,p=N(p);for(var C=0;C<_.length;C++){var j=_[C];j in p&&delete p[j]}l.lb&&l.kb&&!p[l.lb]&&(p[l.lb]=l.kb),x(p)||Bn(s,"customParameters",ff(p))}if(typeof this.a.Nb=="function"&&(l=this.a.Nb(),l.length&&Bn(s,"scopes",l.join(","))),this.l?Bn(s,"redirectUrl",this.l):vs(s.a,"redirectUrl"),this.g?Bn(s,"eventId",this.g):vs(s.a,"eventId"),this.i?Bn(s,"v",this.i):vs(s.a,"v"),this.b)for(var G in this.b)this.b.hasOwnProperty(G)&&!ho(s,G)&&Bn(s,G,this.b[G]);return this.h?Bn(s,"tid",this.h):vs(s.a,"tid"),this.f?Bn(s,"eid",this.f):vs(s.a,"eid"),G=Z0(this.c),G.length&&Bn(s,"fw",G.join(",")),s.toString()};function Z0(s){try{return ze.app(s).auth().Ea()}catch{return[]}}function WN(s,l,p,_,C){this.u=s,this.f=l,this.b=p,this.c=_||null,this.h=C||null,this.m=this.s=this.w=null,this.g=[],this.l=this.a=null}function GN(s){var l=cf();return $5(s).then(function(p){e:{var _=Hs(l),C=_.f;_=_.b;for(var j=0;j<p.length;j++){var G=p[j],re=_,Se=C;if(G.indexOf("chrome-extension://")==0?re=Hs(G).b==re&&Se=="chrome-extension":Se!="http"&&Se!="https"?re=!1:H4.test(G)?re=re==G:(G=G.split(".").join("\\."),re=new RegExp("^(.+\\."+G+"|"+G+")$","i").test(re)),re){p=!0;break e}}p=!1}if(!p)throw new k0(cf())})}function $N(s){return s.l||(s.l=n0().then(function(){if(!s.s){var l=s.c,p=s.h,_=Z0(s.b),C=new qN(s.u,s.f,s.b);C.f=l,C.b=p,C.c=ri(_||[]),s.s=C.toString()}s.i=new NV(s.s),MV(s)})),s.l}t=WN.prototype,t.Lb=function(s,l,p){var _=new Z("popup-closed-by-user"),C=new Z("web-storage-unsupported"),j=this,G=!1;return this.ka().then(function(){FV(j).then(function(re){re||(s&&Ku(s),l(C),G=!0)})}).o(function(){}).then(function(){if(!G)return $4(s)}).then(function(){if(!G)return ac(p).then(function(){l(_)})})},t.Ub=function(){var s=Or();return!hf(s)&&!LC(s)},t.Qb=function(){return!1},t.Jb=function(s,l,p,_,C,j,G,re){if(!s)return mn(new Z("popup-blocked"));if(G&&!hf())return this.ka().o(function(Ce){Ku(s),C(Ce)}),_(),rt();this.a||(this.a=GN(HN(this)));var Se=this;return this.a.then(function(){var Ce=Se.ka().o(function(gt){throw Ku(s),C(gt),gt});return _(),Ce}).then(function(){if(N0(p),!G){var Ce=Nf(Se.u,Se.f,Se.b,l,p,null,j,Se.c,void 0,Se.h,re);CC(Ce,s)}}).o(function(Ce){throw Ce.code=="auth/network-request-failed"&&(Se.a=null),Ce})};function HN(s){return s.m||(s.w=s.c?hc(s.c,Z0(s.b)):null,s.m=new jo(s.f,Le(s.h),s.w)),s.m}t.Kb=function(s,l,p,_){this.a||(this.a=GN(HN(this)));var C=this;return this.a.then(function(){N0(l);var j=Nf(C.u,C.f,C.b,s,l,cf(),p,C.c,void 0,C.h,_);CC(j)}).o(function(j){throw j.code=="auth/network-request-failed"&&(C.a=null),j})},t.ka=function(){var s=this;return $N(this).then(function(){return s.i.nb}).o(function(){throw s.a=null,new Z("network-request-failed")})},t.Xb=function(){return!0};function Nf(s,l,p,_,C,j,G,re,Se,Ce,gt){return s=new J0(s,l,p,_,C),s.l=j,s.g=G,s.i=re,s.b=N(Se||null),s.f=Ce,s.ub(gt).toString()}function MV(s){if(!s.i)throw Error("IfcHandler must be initialized!");RV(s.i,function(l){var p={};if(l&&l.authEvent){var _=!1;for(l=gN(l.authEvent),p=0;p<s.g.length;p++)_=s.g[p](l)||_;return p={},p.status=_?"ACK":"ERROR",rt(p)}return p.status="ERROR",rt(p)})}function FV(s){var l={type:"webStorageSupport"};return $N(s).then(function(){return kV(s.i,l)}).then(function(p){if(p&&p.length&&typeof p[0].webStorageSupport<"u")return p[0].webStorageSupport;throw Error()})}t.Ca=function(s){this.g.push(s)},t.Qa=function(s){He(this.g,function(l){return l==s})};function KN(s){if(this.a=s||ze.INTERNAL.reactNative&&ze.INTERNAL.reactNative.AsyncStorage,!this.a)throw new Z("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}t=KN.prototype,t.get=function(s){return rt(this.a.getItem(s)).then(function(l){return l&&dc(l)})},t.set=function(s,l){return rt(this.a.setItem(s,ff(l)))},t.T=function(s){return rt(this.a.removeItem(s))},t.ba=function(){},t.ha=function(){};function YN(s){this.b=s,this.a={},this.f=oe(this.c,this)}var XN=[];function jV(){var s=Mo()?self:null;if(Dt(XN,function(p){p.b==s&&(l=p)}),!l){var l=new YN(s);XN.push(l)}return l}YN.prototype.c=function(s){var l=s.data.eventType,p=s.data.eventId,_=this.a[l];if(_&&0<_.length){s.ports[0].postMessage({status:"ack",eventId:p,eventType:l,response:null});var C=[];Dt(_,function(j){C.push(rt().then(function(){return j(s.origin,s.data.data)}))}),Zx(C).then(function(j){var G=[];Dt(j,function(re){G.push({fulfilled:re.Mb,value:re.value,reason:re.reason?re.reason.message:void 0})}),Dt(G,function(re){for(var Se in re)typeof re[Se]>"u"&&delete re[Se]}),s.ports[0].postMessage({status:"done",eventId:p,eventType:l,response:G})})}};function QN(s,l,p){x(s.a)&&s.b.addEventListener("message",s.f),typeof s.a[l]>"u"&&(s.a[l]=[]),s.a[l].push(p)}function JN(s){this.a=s}JN.prototype.postMessage=function(s,l){this.a.postMessage(s,l)};function ZN(s){this.c=s,this.b=!1,this.a=[]}function eA(s,l,p,_){var C,j=p||{},G,re,Se,Ce=null;if(s.b)return mn(Error("connection_unavailable"));var gt=_?800:50,rn=typeof MessageChannel<"u"?new MessageChannel:null;return new Ft(function(Yt,Er){rn?(C=Math.floor(Math.random()*Math.pow(10,20)).toString(),rn.port1.start(),re=setTimeout(function(){Er(Error("unsupported_event"))},gt),G=function(Qs){Qs.data.eventId===C&&(Qs.data.status==="ack"?(clearTimeout(re),Se=setTimeout(function(){Er(Error("timeout"))},3e3)):Qs.data.status==="done"?(clearTimeout(Se),typeof Qs.data.response<"u"?Yt(Qs.data.response):Er(Error("unknown_error"))):(clearTimeout(re),clearTimeout(Se),Er(Error("invalid_response"))))},Ce={messageChannel:rn,onMessage:G},s.a.push(Ce),rn.port1.addEventListener("message",G),s.c.postMessage({eventType:l,eventId:C,data:j},[rn.port2])):Er(Error("connection_unavailable"))}).then(function(Yt){return ew(s,Ce),Yt}).o(function(Yt){throw ew(s,Ce),Yt})}function ew(s,l){if(l){var p=l.messageChannel,_=l.onMessage;p&&(p.port1.removeEventListener("message",_),p.port1.close()),He(s.a,function(C){return C==l})}}ZN.prototype.close=function(){for(;0<this.a.length;)ew(this,this.a[0]);this.b=!0};function tA(){if(!rA())throw new Z("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.u=f.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.s=!1,this.h=null;var s=this;Mo()&&self?(this.l=jV(),QN(this.l,"keyChanged",function(l,p){return oA(s).then(function(_){return 0<_.length&&Dt(s.a,function(C){C(_)}),{keyProcessed:Pe(_,p.key)}})}),QN(this.l,"ping",function(){return rt(["keyChanged"])})):Z4().then(function(l){(s.h=l)&&(s.g=new ZN(new JN(l)),eA(s.g,"ping",null,!0).then(function(p){p[0].fulfilled&&Pe(p[0].value,"keyChanged")&&(s.s=!0)}).o(function(){}))})}var tw;function UV(s){return new Ft(function(l,p){var _=s.u.deleteDatabase("firebaseLocalStorageDb");_.onsuccess=function(){l()},_.onerror=function(C){p(Error(C.target.error))}})}function nA(s){return new Ft(function(l,p){var _=s.u.open("firebaseLocalStorageDb",1);_.onerror=function(C){try{C.preventDefault()}catch{}p(Error(C.target.error))},_.onupgradeneeded=function(C){C=C.target.result;try{C.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(j){p(j)}},_.onsuccess=function(C){C=C.target.result,C.objectStoreNames.contains("firebaseLocalStorage")?l(C):UV(s).then(function(){return nA(s)}).then(function(j){l(j)}).o(function(j){p(j)})}})}function kv(s){return s.m||(s.m=nA(s)),s.m}function rA(){try{return!!f.indexedDB}catch{return!1}}function Af(s){return s.objectStore("firebaseLocalStorage")}function kf(s,l){return s.transaction(["firebaseLocalStorage"],l?"readwrite":"readonly")}function mc(s){return new Ft(function(l,p){s.onsuccess=function(_){_&&_.target?l(_.target.result):l()},s.onerror=function(_){p(_.target.error)}})}t=tA.prototype,t.set=function(s,l){var p=!1,_,C=this;return kv(this).then(function(j){return _=j,j=Af(kf(_,!0)),mc(j.get(s))}).then(function(j){var G=Af(kf(_,!0));return j?(j.value=l,mc(G.put(j))):(C.b++,p=!0,j={},j.fbase_key=s,j.value=l,mc(G.add(j)))}).then(function(){return C.c[s]=l,iA(C,s)}).ma(function(){p&&C.b--})};function iA(s,l){return s.g&&s.h&&J4()===s.h?eA(s.g,"keyChanged",{key:l},s.s).then(function(){}).o(function(){}):rt()}t.get=function(s){return kv(this).then(function(l){return mc(Af(kf(l,!1)).get(s))}).then(function(l){return l&&l.value})},t.T=function(s){var l=!1,p=this;return kv(this).then(function(_){return l=!0,p.b++,mc(Af(kf(_,!0)).delete(s))}).then(function(){return delete p.c[s],iA(p,s)}).ma(function(){l&&p.b--})};function oA(s){return kv(s).then(function(l){var p=Af(kf(l,!1));return p.getAll?mc(p.getAll()):new Ft(function(_,C){var j=[],G=p.openCursor();G.onsuccess=function(re){(re=re.target.result)?(j.push(re.value),re.continue()):_(j)},G.onerror=function(re){C(re.target.error)}})}).then(function(l){var p={},_=[];if(s.b==0){for(_=0;_<l.length;_++)p[l[_].fbase_key]=l[_].value;_=NC(s.c,p),s.c=p}return _})}t.ba=function(s){this.a.length==0&&VV(this),this.a.push(s)},t.ha=function(s){He(this.a,function(l){return l==s}),this.a.length==0&&sA(this)};function VV(s){function l(){s.f=setTimeout(function(){s.i=oA(s).then(function(p){0<p.length&&Dt(s.a,function(_){_(p)})}).then(function(){l()}).o(function(p){p.message!="STOP_EVENT"&&l()})},800)}sA(s),l()}function sA(s){s.i&&s.i.cancel("STOP_EVENT"),s.f&&(clearTimeout(s.f),s.f=null)}function aA(s){var l=this,p=null;this.a=[],this.type="indexedDB",this.c=s,this.b=rt().then(function(){if(rA()){var _=Xu(),C="__sak"+_;return tw||(tw=new tA),p=tw,p.set(C,_).then(function(){return p.get(C)}).then(function(j){if(j!==_)throw Error("indexedDB not supported!");return p.T(C)}).then(function(){return p}).o(function(){return l.c})}return l.c}).then(function(_){return l.type=_.type,_.ba(function(C){Dt(l.a,function(j){j(C)})}),_})}t=aA.prototype,t.get=function(s){return this.b.then(function(l){return l.get(s)})},t.set=function(s,l){return this.b.then(function(p){return p.set(s,l)})},t.T=function(s){return this.b.then(function(l){return l.T(s)})},t.ba=function(s){this.a.push(s)},t.ha=function(s){He(this.a,function(l){return l==s})};function Rf(){this.a={},this.type="inMemory"}t=Rf.prototype,t.get=function(s){return rt(this.a[s])},t.set=function(s,l){return this.a[s]=l,rt()},t.T=function(s){return delete this.a[s],rt()},t.ba=function(){},t.ha=function(){};function Rv(){if(!BV())throw gs()=="Node"?new Z("internal-error","The LocalStorage compatibility library was not found."):new Z("web-storage-unsupported");this.a=uA()||ze.INTERNAL.node.localStorage,this.type="localStorage"}function uA(){try{var s=f.localStorage,l=Xu();return s&&(s.setItem(l,"1"),s.removeItem(l)),s}catch{return null}}function BV(){var s=gs()=="Node";if(s=uA()||s&&ze.INTERNAL.node&&ze.INTERNAL.node.localStorage,!s)return!1;try{return s.setItem("__sak","1"),s.removeItem("__sak"),!0}catch{return!1}}t=Rv.prototype,t.get=function(s){var l=this;return rt().then(function(){var p=l.a.getItem(s);return dc(p)})},t.set=function(s,l){var p=this;return rt().then(function(){var _=ff(l);_===null?p.T(s):p.a.setItem(s,_)})},t.T=function(s){var l=this;return rt().then(function(){l.a.removeItem(s)})},t.ba=function(s){f.window&&Lo(f.window,"storage",s)},t.ha=function(s){f.window&&co(f.window,"storage",s)};function nw(){this.type="nullStorage"}t=nw.prototype,t.get=function(){return rt(null)},t.set=function(){return rt()},t.T=function(){return rt()},t.ba=function(){},t.ha=function(){};function rw(){if(!zV())throw gs()=="Node"?new Z("internal-error","The SessionStorage compatibility library was not found."):new Z("web-storage-unsupported");this.a=lA()||ze.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function lA(){try{var s=f.sessionStorage,l=Xu();return s&&(s.setItem(l,"1"),s.removeItem(l)),s}catch{return null}}function zV(){var s=gs()=="Node";if(s=lA()||s&&ze.INTERNAL.node&&ze.INTERNAL.node.sessionStorage,!s)return!1;try{return s.setItem("__sak","1"),s.removeItem("__sak"),!0}catch{return!1}}t=rw.prototype,t.get=function(s){var l=this;return rt().then(function(){var p=l.a.getItem(s);return dc(p)})},t.set=function(s,l){var p=this;return rt().then(function(){var _=ff(l);_===null?p.T(s):p.a.setItem(s,_)})},t.T=function(s){var l=this;return rt().then(function(){l.a.removeItem(s)})},t.ba=function(){},t.ha=function(){};function qV(){var s={};s.Browser=WV,s.Node=GV,s.ReactNative=$V,s.Worker=HV,this.a=s[gs()]}var iw,WV={F:Rv,$a:rw},GV={F:Rv,$a:rw},$V={F:KN,$a:nw},HV={F:Rv,$a:nw},yc={od:"local",NONE:"none",qd:"session"};function KV(s){var l=new Z("invalid-persistence-type"),p=new Z("unsupported-persistence-type");e:{for(_ in yc)if(yc[_]==s){var _=!0;break e}_=!1}if(!_||typeof s!="string")throw l;switch(gs()){case"ReactNative":if(s==="session")throw p;break;case"Node":if(s!=="none")throw p;break;default:if(!s0()&&s!=="none")throw p}}function cA(){var s=!!(!LC(Or())&&i0()),l=hf(),p=s0();this.m=s,this.h=l,this.l=p,this.a={},iw||(iw=new qV),s=iw;try{this.g=!t0()&&FC()||!f.indexedDB?new s.a.F:new aA(Mo()?new Rf:new s.a.F)}catch{this.g=new Rf,this.h=!0}try{this.i=new s.a.$a}catch{this.i=new Rf}this.u=new Rf,this.f=oe(this.Vb,this),this.b={}}var ow;function Of(){return ow||(ow=new cA),ow}function il(s,l){switch(l){case"session":return s.i;case"none":return s.u;default:return s.g}}function _c(s,l){return"firebase:"+s.name+(l?":"+l:"")}function YV(s,l,p){var _=_c(l,p),C=il(s,l.F);return s.get(l,p).then(function(j){var G=null;try{G=dc(f.localStorage.getItem(_))}catch{}if(G&&!j)return f.localStorage.removeItem(_),s.set(l,G,p);G&&j&&C.type!="localStorage"&&f.localStorage.removeItem(_)})}t=cA.prototype,t.get=function(s,l){return il(this,s.F).get(_c(s,l))};function wc(s,l,p){return p=_c(l,p),l.F=="local"&&(s.b[p]=null),il(s,l.F).T(p)}t.set=function(s,l,p){var _=_c(s,p),C=this,j=il(this,s.F);return j.set(_,l).then(function(){return j.get(_)}).then(function(G){s.F=="local"&&(C.b[_]=G)})},t.addListener=function(s,l,p){s=_c(s,l),this.l&&(this.b[s]=f.localStorage.getItem(s)),x(this.a)&&(il(this,"local").ba(this.f),this.h||(t0()||!FC())&&f.indexedDB||!this.l||XV(this)),this.a[s]||(this.a[s]=[]),this.a[s].push(p)},t.removeListener=function(s,l,p){s=_c(s,l),this.a[s]&&(He(this.a[s],function(_){return _==p}),this.a[s].length==0&&delete this.a[s]),x(this.a)&&(il(this,"local").ha(this.f),sw(this))};function XV(s){sw(s),s.c=setInterval(function(){for(var l in s.a){var p=f.localStorage.getItem(l),_=s.b[l];p!=_&&(s.b[l]=p,p=new Gu({type:"storage",key:l,target:window,oldValue:_,newValue:p,a:!0}),s.Vb(p))}},1e3)}function sw(s){s.c&&(clearInterval(s.c),s.c=null)}t.Vb=function(s){if(s&&s.f){var l=s.a.key;if(l==null)for(var p in this.a){var _=this.b[p];typeof _>"u"&&(_=null);var C=f.localStorage.getItem(p);C!==_&&(this.b[p]=C,this.ib(p))}else if(l.indexOf("firebase:")==0&&this.a[l]){if(typeof s.a.a<"u"?il(this,"local").ha(this.f):sw(this),this.m){if(p=f.localStorage.getItem(l),_=s.a.newValue,_!==p)_!==null?f.localStorage.setItem(l,_):f.localStorage.removeItem(l);else if(this.b[l]===_&&typeof s.a.a>"u")return}var j=this;p=function(){(typeof s.a.a<"u"||j.b[l]!==f.localStorage.getItem(l))&&(j.b[l]=f.localStorage.getItem(l),j.ib(l))},Et&&sn&&sn==10&&f.localStorage.getItem(l)!==s.a.newValue&&s.a.newValue!==s.a.oldValue?setTimeout(p,10):p()}}else Dt(s,oe(this.ib,this))},t.ib=function(s){this.a[s]&&Dt(this.a[s],function(l){l()})};function QV(s){this.a=s,this.b=Of()}var aw={name:"authEvent",F:"local"};function JV(s){return s.b.get(aw,s.a).then(function(l){return gN(l)})}function ZV(){this.a=Of()}function e6(){this.b=-1}function Ov(s,l){this.b=hA,this.f=f.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=s,this.h=l,this.l=f.Int32Array?new Int32Array(64):Array(64),Pv===void 0&&(f.Int32Array?Pv=new Int32Array(pA):Pv=pA),this.reset()}var Pv;he(Ov,e6);for(var hA=64,t6=hA-1,fA=[],uw=0;uw<t6;uw++)fA[uw]=0;var dA=zt(128,fA);Ov.prototype.reset=function(){this.g=this.c=0,this.a=f.Int32Array?new Int32Array(this.h):ri(this.h)};function lw(s){for(var l=s.f,p=s.l,_=0,C=0;C<l.length;)p[_++]=l[C]<<24|l[C+1]<<16|l[C+2]<<8|l[C+3],C=4*_;for(l=16;64>l;l++){C=p[l-15]|0,_=p[l-2]|0;var j=(p[l-16]|0)+((C>>>7|C<<25)^(C>>>18|C<<14)^C>>>3)|0,G=(p[l-7]|0)+((_>>>17|_<<15)^(_>>>19|_<<13)^_>>>10)|0;p[l]=j+G|0}_=s.a[0]|0,C=s.a[1]|0;var re=s.a[2]|0,Se=s.a[3]|0,Ce=s.a[4]|0,gt=s.a[5]|0,rn=s.a[6]|0;for(j=s.a[7]|0,l=0;64>l;l++){var Yt=((_>>>2|_<<30)^(_>>>13|_<<19)^(_>>>22|_<<10))+(_&C^_&re^C&re)|0;G=Ce&gt^~Ce&rn,j=j+((Ce>>>6|Ce<<26)^(Ce>>>11|Ce<<21)^(Ce>>>25|Ce<<7))|0,G=G+(Pv[l]|0)|0,G=j+(G+(p[l]|0)|0)|0,j=rn,rn=gt,gt=Ce,Ce=Se+G|0,Se=re,re=C,C=_,_=G+Yt|0}s.a[0]=s.a[0]+_|0,s.a[1]=s.a[1]+C|0,s.a[2]=s.a[2]+re|0,s.a[3]=s.a[3]+Se|0,s.a[4]=s.a[4]+Ce|0,s.a[5]=s.a[5]+gt|0,s.a[6]=s.a[6]+rn|0,s.a[7]=s.a[7]+j|0}function cw(s,l,p){p===void 0&&(p=l.length);var _=0,C=s.c;if(typeof l=="string")for(;_<p;)s.f[C++]=l.charCodeAt(_++),C==s.b&&(lw(s),C=0);else if(I(l))for(;_<p;){var j=l[_++];if(!(typeof j=="number"&&0<=j&&255>=j&&j==(j|0)))throw Error("message must be a byte array");s.f[C++]=j,C==s.b&&(lw(s),C=0)}else throw Error("message must be string or array");s.c=C,s.g+=p}var pA=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function vA(){Ov.call(this,8,n6)}he(vA,Ov);var n6=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function gA(s,l,p,_,C){this.u=s,this.i=l,this.l=p,this.m=_||null,this.s=C||null,this.h=l+":"+p,this.w=new ZV,this.g=new QV(this.h),this.f=null,this.b=[],this.a=this.c=null}function Dv(s){return new Z("invalid-cordova-configuration",s)}t=gA.prototype,t.ka=function(){return this.Ga?this.Ga:this.Ga=Y4().then(function(){if(typeof yn("universalLinks.subscribe",f)!="function")throw Dv("cordova-universal-links-plugin-fix is not installed");if(typeof yn("BuildInfo.packageName",f)>"u")throw Dv("cordova-plugin-buildinfo is not installed");if(typeof yn("cordova.plugins.browsertab.openUrl",f)!="function")throw Dv("cordova-plugin-browsertab is not installed");if(typeof yn("cordova.InAppBrowser.open",f)!="function")throw Dv("cordova-plugin-inappbrowser is not installed")},function(){throw new Z("cordova-not-ready")})};function r6(){for(var s=20,l=[];0<s;)l.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),s--;return l.join("")}function i6(s){var l=new vA;cw(l,s),s=[];var p=8*l.g;56>l.c?cw(l,dA,56-l.c):cw(l,dA,l.b-(l.c-56));for(var _=63;56<=_;_--)l.f[_]=p&255,p/=256;for(lw(l),_=p=0;_<l.i;_++)for(var C=24;0<=C;C-=8)s[p++]=l.a[_]>>C&255;return v5(s)}t.Lb=function(s,l){return l(new Z("operation-not-supported-in-this-environment")),rt()},t.Jb=function(){return mn(new Z("operation-not-supported-in-this-environment"))},t.Xb=function(){return!1},t.Ub=function(){return!0},t.Qb=function(){return!0},t.Kb=function(s,l,p,_){if(this.c)return mn(new Z("redirect-operation-pending"));var C=this,j=f.document,G=null,re=null,Se=null,Ce=null;return this.c=rt().then(function(){return N0(l),yA(C)}).then(function(){return o6(C,s,l,p,_)}).then(function(){return new Ft(function(gt,rn){re=function(){var Yt=yn("cordova.plugins.browsertab.close",f);return gt(),typeof Yt=="function"&&Yt(),C.a&&typeof C.a.close=="function"&&(C.a.close(),C.a=null),!1},C.Ca(re),Se=function(){G||(G=ac(2e3).then(function(){rn(new Z("redirect-cancelled-by-user"))}))},Ce=function(){a0()&&Se()},j.addEventListener("resume",Se,!1),Or().toLowerCase().match(/android/)||j.addEventListener("visibilitychange",Ce,!1)}).o(function(gt){return hw(C).then(function(){throw gt})})}).ma(function(){Se&&j.removeEventListener("resume",Se,!1),Ce&&j.removeEventListener("visibilitychange",Ce,!1),G&&G.cancel(),re&&C.Qa(re),C.c=null})};function o6(s,l,p,_,C){var j=r6(),G=new Fo(l,_,null,j,new Z("no-auth-event"),null,C),re=yn("BuildInfo.packageName",f);if(typeof re!="string")throw new Z("invalid-cordova-configuration");var Se=yn("BuildInfo.displayName",f),Ce={};if(Or().toLowerCase().match(/iphone|ipad|ipod/))Ce.ibi=re;else if(Or().toLowerCase().match(/android/))Ce.apn=re;else return mn(new Z("operation-not-supported-in-this-environment"));Se&&(Ce.appDisplayName=Se),j=i6(j),Ce.sessionId=j;var gt=Nf(s.u,s.i,s.l,l,p,null,_,s.m,Ce,s.s,C);return s.ka().then(function(){var rn=s.h;return s.w.a.set(aw,G.v(),rn)}).then(function(){var rn=yn("cordova.plugins.browsertab.isAvailable",f);if(typeof rn!="function")throw new Z("invalid-cordova-configuration");var Yt=null;rn(function(Er){if(Er){if(Yt=yn("cordova.plugins.browsertab.openUrl",f),typeof Yt!="function")throw new Z("invalid-cordova-configuration");Yt(gt)}else{if(Yt=yn("cordova.InAppBrowser.open",f),typeof Yt!="function")throw new Z("invalid-cordova-configuration");Er=Or(),s.a=Yt(gt,Er.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||Er.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}function mA(s,l){for(var p=0;p<s.b.length;p++)try{s.b[p](l)}catch{}}function yA(s){return s.f||(s.f=s.ka().then(function(){return new Ft(function(l){function p(_){return l(_),s.Qa(p),!1}s.Ca(p),s6(s)})})),s.f}function hw(s){var l=null;return JV(s.g).then(function(p){return l=p,p=s.g,wc(p.b,aw,p.a)}).then(function(){return l})}function s6(s){function l(G){_=!0,C&&C.cancel(),hw(s).then(function(re){var Se=p;if(re&&G&&G.url){var Ce=null;Se=uN(G.url),Se.indexOf("/__/auth/callback")!=-1&&(Ce=Hs(Se),Ce=dc(ho(Ce,"firebaseError")||null),Ce=(Ce=typeof Ce=="object"?be(Ce):null)?new Fo(re.c,re.b,null,null,Ce,null,re.S()):new Fo(re.c,re.b,Se,re.f,null,null,re.S())),Se=Ce||p}mA(s,Se)})}var p=new Fo("unknown",null,null,null,new Z("no-auth-event")),_=!1,C=ac(500).then(function(){return hw(s).then(function(){_||mA(s,p)})}),j=f.handleOpenURL;f.handleOpenURL=function(G){if(G.toLowerCase().indexOf(yn("BuildInfo.packageName",f).toLowerCase()+"://")==0&&l({url:G}),typeof j=="function")try{j(G)}catch(re){console.error(re)}},A0||(A0=new S5),T5(l)}t.Ca=function(s){this.b.push(s),yA(this).o(function(l){l.code==="auth/invalid-cordova-configuration"&&(l=new Fo("unknown",null,null,null,new Z("no-auth-event")),s(l))})},t.Qa=function(s){He(this.b,function(l){return l==s})};function a6(s){this.a=s,this.b=Of()}var fw={name:"pendingRedirect",F:"session"};function u6(s){return s.b.set(fw,"pending",s.a)}function dw(s){return wc(s.b,fw,s.a)}function l6(s){return s.b.get(fw,s.a).then(function(l){return l=="pending"})}function Lv(s,l,p){this.i={},this.w=0,this.D=s,this.u=l,this.m=p,this.h=[],this.f=!1,this.l=oe(this.s,this),this.b=new Mv,this.B=new AA,this.g=new a6(this.u+":"+this.m),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.B,this.c.linkViaPopup=this.B,this.c.reauthViaPopup=this.B,this.a=_A(this.D,this.u,this.m,it)}function _A(s,l,p,_){var C=ze.SDK_VERSION||null;return r0()?new gA(s,l,p,C,_):new WN(s,l,p,C,_)}Lv.prototype.reset=function(){this.f=!1,this.a.Qa(this.l),this.a=_A(this.D,this.u,this.m),this.i={}};function wA(s){s.f||(s.f=!0,s.a.Ca(s.l));var l=s.a;return s.a.ka().o(function(p){throw s.a==l&&s.reset(),p})}function EA(s){s.a.Ub()&&wA(s).o(function(l){var p=new Fo("unknown",null,null,null,new Z("operation-not-supported-in-this-environment"));vw(l)&&s.s(p)}),s.a.Qb()||CA(s.b)}function pw(s,l){Pe(s.h,l)||s.h.push(l),s.f||l6(s.g).then(function(p){p?dw(s.g).then(function(){wA(s).o(function(_){var C=new Fo("unknown",null,null,null,new Z("operation-not-supported-in-this-environment"));vw(_)&&s.s(C)})}):EA(s)}).o(function(){EA(s)})}function bA(s,l){He(s.h,function(p){return p==l})}Lv.prototype.s=function(s){if(!s)throw new Z("invalid-auth-event");if(6e5<=me()-this.w&&(this.i={},this.w=0),s&&s.getUid()&&this.i.hasOwnProperty(s.getUid()))return!1;for(var l=!1,p=0;p<this.h.length;p++){var _=this.h[p];if(_.Cb(s.c,s.b)){(l=this.c[s.c])&&(l.h(s,_),s&&(s.f||s.b)&&(this.i[s.getUid()]=!0,this.w=me())),l=!0;break}}return CA(this.b),l};var c6=new Va(2e3,1e4),h6=new Va(3e4,6e4);Lv.prototype.pa=function(){return this.b.pa()};function SA(s,l,p,_,C,j,G){return s.a.Jb(l,p,_,function(){s.f||(s.f=!0,s.a.Ca(s.l))},function(){s.reset()},C,j,G)}function vw(s){return!!(s&&s.code=="auth/cordova-not-ready")}function TA(s,l,p,_,C){var j;return u6(s.g).then(function(){return s.a.Kb(l,p,_,C).o(function(G){if(vw(G))throw new Z("operation-not-supported-in-this-environment");return j=G,dw(s.g).then(function(){throw j})}).then(function(){return s.a.Xb()?new Ft(function(){}):dw(s.g).then(function(){return s.pa()}).then(function(){}).o(function(){})})})}function IA(s,l,p,_,C){return s.a.Lb(_,function(j){l.la(p,null,j,C)},c6.get())}var gw={};function xA(s,l,p){var _=l+":"+p;return gw[_]||(gw[_]=new Lv(s,l,p)),gw[_]}function Mv(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}Mv.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Mv.prototype.h=function(s,l){if(s){this.reset(),this.g=!0;var p=s.c,_=s.b,C=s.a&&s.a.code=="auth/web-storage-unsupported",j=s.a&&s.a.code=="auth/operation-not-supported-in-this-environment";this.i=!(!C&&!j),p!="unknown"||C||j?s.a?(ol(this,!0,null,s.a),rt()):l.Da(p,_)?f6(this,s,l):mn(new Z("invalid-auth-event")):(ol(this,!1,null,null),rt())}else mn(new Z("invalid-auth-event"))};function CA(s){s.g||(s.g=!0,ol(s,!1,null,null))}function Fv(s){s.g&&!s.i&&ol(s,!1,null,null)}function f6(s,l,p){p=p.Da(l.c,l.b);var _=l.g,C=l.f,j=l.i,G=l.S(),re=!!l.c.match(/Redirect$/);p(_,C,G,j).then(function(Se){ol(s,re,Se,null)}).o(function(Se){ol(s,re,null,Se)})}function d6(s,l){if(s.b=function(){return mn(l)},s.c.length)for(var p=0;p<s.c.length;p++)s.c[p](l)}function NA(s,l){if(s.b=function(){return rt(l)},s.f.length)for(var p=0;p<s.f.length;p++)s.f[p](l)}function ol(s,l,p,_){l?_?d6(s,_):NA(s,p):NA(s,{user:null}),s.f=[],s.c=[]}Mv.prototype.pa=function(){var s=this;return new Ft(function(l,p){s.b?s.b().then(l,p):(s.f.push(l),s.c.push(p),p6(s))})};function p6(s){var l=new Z("timeout");s.a&&s.a.cancel(),s.a=ac(h6.get()).then(function(){s.b||(s.g=!0,ol(s,!0,null,l))})}function AA(){}AA.prototype.h=function(s,l){if(s){var p=s.c,_=s.b;s.a?(l.la(s.c,null,s.a,s.b),rt()):l.Da(p,_)?v6(s,l):mn(new Z("invalid-auth-event"))}else mn(new Z("invalid-auth-event"))};function v6(s,l){var p=s.b,_=s.c;l.Da(_,p)(s.g,s.f,s.S(),s.i).then(function(C){l.la(_,C,null,p)}).o(function(C){l.la(_,null,C,p)})}function kA(){this.Bb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.Bb},set:function(s){this.Bb=s},enumerable:!1})}function mw(s,l){this.a=l,Qe(this,"verificationId",s)}mw.prototype.confirm=function(s){return s=vN(this.verificationId,s),this.a(s)};function yw(s,l,p,_){return new Ys(s).cb(l,p).then(function(C){return new mw(C,_)})}function g6(s){var l=eN(s);if(!(l&&l.exp&&l.auth_time&&l.iat))throw new Z("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");oi(this,{token:s,expirationTime:df(1e3*l.exp),authTime:df(1e3*l.auth_time),issuedAtTime:df(1e3*l.iat),signInProvider:l.firebase&&l.firebase.sign_in_provider?l.firebase.sign_in_provider:null,signInSecondFactor:l.firebase&&l.firebase.sign_in_second_factor?l.firebase.sign_in_second_factor:null,claims:l})}function _w(s,l,p){var _=l&&l[OA];if(!_)throw new Z("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=s,this.f=N(l),this.g=p,this.c=new vv(null,_),this.b=[];var C=this;Dt(l[RA]||[],function(j){(j=d0(j))&&C.b.push(j)}),Qe(this,"auth",this.a),Qe(this,"session",this.c),Qe(this,"hints",this.b)}var RA="mfaInfo",OA="mfaPendingCredential";_w.prototype.Pc=function(s){var l=this;return s.ob(this.a.b,this.c).then(function(p){var _=N(l.f);return delete _[RA],delete _[OA],P(_,p),l.g(_)})};function ww(s,l,p,_){Z.call(this,"multi-factor-auth-required",_,l),this.b=new _w(s,l,p),Qe(this,"resolver",this.b)}he(ww,Z);function PA(s,l,p){if(s&&D(s.serverResponse)&&s.code==="auth/multi-factor-auth-required")try{return new ww(l,s.serverResponse,p,s.message)}catch{}return null}function DA(){}DA.prototype.ob=function(s,l,p){return l.type==mf?m6(this,s,l,p):y6(this,s,l)};function m6(s,l,p,_){return p.Fa().then(function(C){return C={idToken:C},typeof _<"u"&&(C.displayName=_),P(C,{phoneVerificationInfo:yf(s.a)}),jt(l,sV,C)})}function y6(s,l,p){return p.Fa().then(function(_){return _={mfaPendingCredential:_},P(_,{phoneVerificationInfo:yf(s.a)}),jt(l,aV,_)})}function Ew(s){Qe(this,"factorId",s.ea),this.a=s}he(Ew,DA);function LA(s){if(Ew.call(this,s),this.a.ea!=Ys.PROVIDER_ID)throw new Z("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}he(LA,Ew);function Ec(s,l){lo.call(this,s);for(var p in l)this[p]=l[p]}he(Ec,lo);function bw(s,l){this.a=s,this.b=[],this.c=oe(this.wc,this),Lo(this.a,"userReloaded",this.c);var p=[];l&&l.multiFactor&&l.multiFactor.enrolledFactors&&Dt(l.multiFactor.enrolledFactors,function(_){var C=null,j={};if(_){_.uid&&(j[v0]=_.uid),_.displayName&&(j[UC]=_.displayName),_.enrollmentTime&&(j[p0]=new Date(_.enrollmentTime).toISOString()),_.phoneNumber&&(j[g0]=_.phoneNumber);try{C=new pf(j)}catch{}_=C}else _=null;_&&p.push(_)}),jv(this,p)}function _6(s){var l=[];return Dt(s.mfaInfo||[],function(p){(p=d0(p))&&l.push(p)}),l}t=bw.prototype,t.wc=function(s){jv(this,_6(s.ed))};function jv(s,l){s.b=l,Qe(s,"enrolledFactors",l)}t.Ob=function(){return this.a.I().then(function(s){return new vv(s,null)})},t.dc=function(s,l){var p=this,_=this.a.a;return this.Ob().then(function(C){return s.ob(_,C,l)}).then(function(C){return ys(p.a,C),p.a.reload()})},t.$c=function(s){var l=this,p=typeof s=="string"?s:s.uid,_=this.a.a;return this.a.I().then(function(C){return jt(_,CV,{idToken:C,mfaEnrollmentId:p})}).then(function(C){var j=ce(l.b,function(G){return G.uid!=p});return jv(l,j),ys(l.a,C),l.a.reload().o(function(G){if(G.code!="auth/user-token-expired")throw G})})},t.v=function(){return{multiFactor:{enrolledFactors:ge(this.b,function(s){return s.v()})}}};function Sw(s,l,p){if(this.h=s,this.i=l,this.g=p,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}Sw.prototype.start=function(){this.a=this.c,Tw(this,!0)};function w6(s,l){return l?(s.a=s.c,s.g()):(l=s.a,s.a*=2,s.a>s.f&&(s.a=s.f),l)}function Tw(s,l){s.stop(),s.b=ac(w6(s,l)).then(function(){return Q4()}).then(function(){return s.h()}).then(function(){Tw(s,!0)}).o(function(p){s.i(p)&&Tw(s,!1)})}Sw.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)};function Iw(s){this.c=s,this.b=this.a=null}Iw.prototype.v=function(){return{apiKey:this.c.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:xw(this)}};function xw(s){return s.b&&1e3*s.b.c||0}function MA(s,l){var p=l.refreshToken;s.b=dv(l[Uo]||""),s.a=p}function E6(s,l){s.b=l.b,s.a=l.a}function b6(s,l){return W5(s.c,l).then(function(p){return s.b=dv(p.access_token),s.a=p.refresh_token,{accessToken:s.b.toString(),refreshToken:s.a}}).o(function(p){throw p.code=="auth/user-token-expired"&&(s.a=null),p})}Iw.prototype.getToken=function(s){return s=!!s,this.b&&!this.a?mn(new Z("user-token-expired")):s||!this.b||me()>xw(this)-3e4?this.a?b6(this,{grant_type:"refresh_token",refresh_token:this.a}):rt(null):rt({accessToken:this.b.toString(),refreshToken:this.a})};function Uv(s,l){this.a=s||null,this.b=l||null,oi(this,{lastSignInTime:df(l||null),creationTime:df(s||null)})}function S6(s){return new Uv(s.a,s.b)}Uv.prototype.v=function(){return{lastLoginAt:this.b,createdAt:this.a}};function T6(s,l,p,_,C,j){oi(this,{uid:s,displayName:_||null,photoURL:C||null,email:p||null,phoneNumber:j||null,providerId:l})}function zi(s,l,p){this.N=[],this.l=s.apiKey,this.m=s.appName,this.s=s.authDomain||null,s=ze.SDK_VERSION?hc(ze.SDK_VERSION):null,this.a=new jo(this.l,Le(it),s),this.b=new Iw(this.a),Rw(this,l[Uo]),MA(this.b,l),Qe(this,"refreshToken",this.b.a),jA(this,p||{}),ii.call(this),this.P=!1,this.s&&Yu()&&(this.i=xA(this.s,this.l,this.m)),this.R=[],this.h=null,this.B=I6(this),this.Z=oe(this.Ma,this);var _=this;this.oa=null,this.za=function(C){_.va(C.g)},this.aa=null,this.W=[],this.ya=function(C){Pf(_,C.c)},this.$=null,this.O=new bw(this,p),Qe(this,"multiFactor",this.O)}he(zi,ii),zi.prototype.va=function(s){this.oa=s,RN(this.a,s)},zi.prototype.ja=function(){return this.oa};function Cw(s,l){s.aa&&co(s.aa,"languageCodeChanged",s.za),(s.aa=l)&&Lo(l,"languageCodeChanged",s.za)}function Pf(s,l){s.W=l,ON(s.a,ze.SDK_VERSION?hc(ze.SDK_VERSION,s.W):null)}zi.prototype.Ea=function(){return ri(this.W)};function Nw(s,l){s.$&&co(s.$,"frameworkChanged",s.ya),(s.$=l)&&Lo(l,"frameworkChanged",s.ya)}zi.prototype.Ma=function(){this.B.b&&(this.B.stop(),this.B.start())};function Aw(s){try{return ze.app(s.m).auth()}catch{throw new Z("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+s.m+"'!")}}function I6(s){return new Sw(function(){return s.I(!0)},function(l){return!!(l&&l.code=="auth/network-request-failed")},function(){var l=xw(s.b)-me()-3e5;return 0<l?l:0})}function FA(s){s.D||s.B.b||(s.B.start(),co(s,"tokenChanged",s.Z),Lo(s,"tokenChanged",s.Z))}function kw(s){co(s,"tokenChanged",s.Z),s.B.stop()}function Rw(s,l){s.xa=l,Qe(s,"_lat",l)}function x6(s,l){He(s.R,function(p){return p==l})}function sl(s){for(var l=[],p=0;p<s.R.length;p++)l.push(s.R[p](s));return Zx(l).then(function(){return s})}function Df(s){s.i&&!s.P&&(s.P=!0,pw(s.i,s))}function jA(s,l){oi(s,{uid:l.uid,displayName:l.displayName||null,photoURL:l.photoURL||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,isAnonymous:l.isAnonymous||!1,tenantId:l.tenantId||null,metadata:new Uv(l.createdAt,l.lastLoginAt),providerData:[]}),s.a.b=s.tenantId}Qe(zi.prototype,"providerId","firebase");function UA(){}function Ow(s){return rt().then(function(){if(s.D)throw new Z("app-deleted")})}function Pw(s){return ge(s.providerData,function(l){return l.providerId})}function Dw(s,l){l&&(VA(s,l.providerId),s.providerData.push(l))}function VA(s,l){He(s.providerData,function(p){return p.providerId==l})}function Wa(s,l,p){(l!="uid"||p)&&s.hasOwnProperty(l)&&Qe(s,l,p)}function Vv(s,l){s!=l&&(oi(s,{uid:l.uid,displayName:l.displayName,photoURL:l.photoURL,email:l.email,emailVerified:l.emailVerified,phoneNumber:l.phoneNumber,isAnonymous:l.isAnonymous,tenantId:l.tenantId,providerData:[]}),l.metadata?Qe(s,"metadata",S6(l.metadata)):Qe(s,"metadata",new Uv),Dt(l.providerData,function(p){Dw(s,p)}),E6(s.b,l.b),Qe(s,"refreshToken",s.b.a),jv(s.O,l.O.b))}t=zi.prototype,t.reload=function(){var s=this;return cr(this,Ow(this).then(function(){return Lw(s).then(function(){return sl(s)}).then(UA)}))};function Lw(s){return s.I().then(function(l){var p=s.isAnonymous;return C6(s,l).then(function(){return p||Wa(s,"isAnonymous",!1),l})})}t.mc=function(s){return this.I(s).then(function(l){return new g6(l)})},t.I=function(s){var l=this;return cr(this,Ow(this).then(function(){return l.b.getToken(s)}).then(function(p){if(!p)throw new Z("internal-error");return p.accessToken!=l.xa&&(Rw(l,p.accessToken),l.dispatchEvent(new Ec("tokenChanged"))),Wa(l,"refreshToken",p.refreshToken),p.accessToken}))};function ys(s,l){l[Uo]&&s.xa!=l[Uo]&&(MA(s.b,l),s.dispatchEvent(new Ec("tokenChanged")),Rw(s,l[Uo]),Wa(s,"refreshToken",s.b.a))}function C6(s,l){return jt(s.a,uV,{idToken:l}).then(oe(s.Ic,s))}t.Ic=function(s){if(s=s.users,!s||!s.length)throw new Z("internal-error");s=s[0],jA(this,{uid:s.localId,displayName:s.displayName,photoURL:s.photoUrl,email:s.email,emailVerified:!!s.emailVerified,phoneNumber:s.phoneNumber,lastLoginAt:s.lastLoginAt,createdAt:s.createdAt,tenantId:s.tenantId});for(var l=N6(s),p=0;p<l.length;p++)Dw(this,l[p]);Wa(this,"isAnonymous",!(this.email&&s.passwordHash)&&!(this.providerData&&this.providerData.length)),this.dispatchEvent(new Ec("userReloaded",{ed:s}))};function N6(s){return(s=s.providerUserInfo)&&s.length?ge(s,function(l){return new T6(l.rawId,l.providerId,l.email,l.displayName,l.photoUrl,l.phoneNumber)}):[]}t.Jc=function(s){return u0("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.pb(s)},t.pb=function(s){var l=this,p=null;return cr(this,s.c(this.a,this.uid).then(function(_){return ys(l,_),p=Lf(l,_,"reauthenticate"),l.h=null,l.reload()}).then(function(){return p}),!0)};function Bv(s,l){return Lw(s).then(function(){if(Pe(Pw(s),l))return sl(s).then(function(){throw new Z("provider-already-linked")})})}t.Ac=function(s){return u0("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.mb(s)},t.mb=function(s){var l=this,p=null;return cr(this,Bv(this,s.providerId).then(function(){return l.I()}).then(function(_){return s.b(l.a,_)}).then(function(_){return p=Lf(l,_,"link"),BA(l,_)}).then(function(){return p}))},t.Bc=function(s,l){var p=this;return cr(this,Bv(this,"phone").then(function(){return yw(Aw(p),s,l,oe(p.mb,p))}))},t.Kc=function(s,l){var p=this;return cr(this,rt().then(function(){return yw(Aw(p),s,l,oe(p.pb,p))}),!0)};function Lf(s,l,p){var _=C0(l);return l=nN(l),Ba({user:s,credential:_,additionalUserInfo:l,operationType:p})}function BA(s,l){return ys(s,l),s.reload().then(function(){return s})}t.xb=function(s){var l=this;return cr(this,this.I().then(function(p){return l.a.xb(p,s)}).then(function(p){return ys(l,p),l.reload()}))},t.cd=function(s){var l=this;return cr(this,this.I().then(function(p){return s.b(l.a,p)}).then(function(p){return ys(l,p),l.reload()}))},t.yb=function(s){var l=this;return cr(this,this.I().then(function(p){return l.a.yb(p,s)}).then(function(p){return ys(l,p),l.reload()}))},t.zb=function(s){if(s.displayName===void 0&&s.photoURL===void 0)return Ow(this);var l=this;return cr(this,this.I().then(function(p){return l.a.zb(p,{displayName:s.displayName,photoUrl:s.photoURL})}).then(function(p){return ys(l,p),Wa(l,"displayName",p.displayName||null),Wa(l,"photoURL",p.photoUrl||null),Dt(l.providerData,function(_){_.providerId==="password"&&(Qe(_,"displayName",l.displayName),Qe(_,"photoURL",l.photoURL))}),sl(l)}).then(UA))},t.ad=function(s){var l=this;return cr(this,Lw(this).then(function(p){return Pe(Pw(l),s)?Q5(l.a,p,[s]).then(function(_){var C={};return Dt(_.providerUserInfo||[],function(j){C[j.providerId]=!0}),Dt(Pw(l),function(j){C[j]||VA(l,j)}),C[Ys.PROVIDER_ID]||Qe(l,"phoneNumber",null),sl(l)}):sl(l).then(function(){throw new Z("no-such-provider")})}))},t.delete=function(){var s=this;return cr(this,this.I().then(function(l){return jt(s.a,nV,{idToken:l})}).then(function(){s.dispatchEvent(new Ec("userDeleted"))})).then(function(){for(var l=0;l<s.N.length;l++)s.N[l].cancel("app-deleted");Cw(s,null),Nw(s,null),s.N=[],s.D=!0,kw(s),Qe(s,"refreshToken",null),s.i&&bA(s.i,s)})},t.Cb=function(s,l){return!!(s=="linkViaPopup"&&(this.g||null)==l&&this.f||s=="reauthViaPopup"&&(this.g||null)==l&&this.f||s=="linkViaRedirect"&&(this.fa||null)==l||s=="reauthViaRedirect"&&(this.fa||null)==l)},t.la=function(s,l,p,_){s!="linkViaPopup"&&s!="reauthViaPopup"||_!=(this.g||null)||(p&&this.w?this.w(p):l&&!p&&this.f&&this.f(l),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.w)},t.Da=function(s,l){return s=="linkViaPopup"&&l==(this.g||null)?oe(this.Hb,this):s=="reauthViaPopup"&&l==(this.g||null)?oe(this.Ib,this):s=="linkViaRedirect"&&(this.fa||null)==l?oe(this.Hb,this):s=="reauthViaRedirect"&&(this.fa||null)==l?oe(this.Ib,this):null},t.Cc=function(s){var l=this;return zA(this,"linkViaPopup",s,function(){return Bv(l,s.providerId).then(function(){return sl(l)})},!1)},t.Lc=function(s){return zA(this,"reauthViaPopup",s,function(){return rt()},!0)};function zA(s,l,p,_,C){if(!Yu())return mn(new Z("operation-not-supported-in-this-environment"));if(s.h&&!C)return mn(s.h);var j=E0(p.providerId),G=Xu(s.uid+":::"),re=null;(!hf()||i0())&&s.s&&p.isOAuthProvider&&(re=Nf(s.s,s.l,s.m,l,p,null,G,ze.SDK_VERSION||null,null,null,s.tenantId));var Se=kC(re,j&&j.ta,j&&j.sa);return _=_().then(function(){if(WA(s),!C)return s.I().then(function(){})}).then(function(){return SA(s.i,Se,l,p,G,!!re,s.tenantId)}).then(function(){return new Ft(function(Ce,gt){s.la(l,null,new Z("cancelled-popup-request"),s.g||null),s.f=Ce,s.w=gt,s.g=G,s.c=IA(s.i,s,l,Se,G)})}).then(function(Ce){return Se&&Ku(Se),Ce?Ba(Ce):null}).o(function(Ce){throw Se&&Ku(Se),Ce}),cr(s,_,C)}t.Dc=function(s){var l=this;return qA(this,"linkViaRedirect",s,function(){return Bv(l,s.providerId)},!1)},t.Mc=function(s){return qA(this,"reauthViaRedirect",s,function(){return rt()},!0)};function qA(s,l,p,_,C){if(!Yu())return mn(new Z("operation-not-supported-in-this-environment"));if(s.h&&!C)return mn(s.h);var j=null,G=Xu(s.uid+":::");return _=_().then(function(){if(WA(s),!C)return s.I().then(function(){})}).then(function(){return s.fa=G,sl(s)}).then(function(re){return s.ga&&(re=s.ga,re=re.b.set(Mw,s.v(),re.a)),re}).then(function(){return TA(s.i,l,p,G,s.tenantId)}).o(function(re){if(j=re,s.ga)return $A(s.ga);throw j}).then(function(){if(j)throw j}),cr(s,_,C)}function WA(s){if(!s.i||!s.P)throw s.i&&!s.P?new Z("internal-error"):new Z("auth-domain-config-required")}t.Hb=function(s,l,p,_){var C=this;this.c&&(this.c.cancel(),this.c=null);var j=null;return p=this.I().then(function(G){return K0(C.a,{requestUri:s,postBody:_,sessionId:l,idToken:G})}).then(function(G){return j=Lf(C,G,"link"),BA(C,G)}).then(function(){return j}),cr(this,p)},t.Ib=function(s,l,p,_){var C=this;this.c&&(this.c.cancel(),this.c=null);var j=null,G=rt().then(function(){return vc(Y0(C.a,{requestUri:s,sessionId:l,postBody:_,tenantId:p}),C.uid)}).then(function(re){return j=Lf(C,re,"reauthenticate"),ys(C,re),C.h=null,C.reload()}).then(function(){return j});return cr(this,G,!0)},t.qb=function(s){var l=this,p=null;return cr(this,this.I().then(function(_){return p=_,typeof s>"u"||x(s)?{}:hv(new cv(s))}).then(function(_){return l.a.qb(p,_)}).then(function(_){if(l.email!=_)return l.reload()}).then(function(){}))},t.Ab=function(s,l){var p=this,_=null;return cr(this,this.I().then(function(C){return _=C,typeof l>"u"||x(l)?{}:hv(new cv(l))}).then(function(C){return p.a.Ab(_,s,C)}).then(function(C){if(p.email!=C)return p.reload()}).then(function(){}))};function cr(s,l,p){var _=A6(s,l,p);return s.N.push(_),_.ma(function(){Ve(s.N,_)}),_.o(function(C){var j=null;throw C&&C.code==="auth/multi-factor-auth-required"&&(j=PA(C.v(),Aw(s),oe(s.hc,s))),j||C})}t.hc=function(s){var l=null,p=this;return s=vc(rt(s),p.uid).then(function(_){return l=Lf(p,_,"reauthenticate"),ys(p,_),p.h=null,p.reload()}).then(function(){return l}),cr(this,s,!0)};function A6(s,l,p){return s.h&&!p?(l.cancel(),mn(s.h)):l.o(function(_){throw!_||_.code!="auth/user-disabled"&&_.code!="auth/user-token-expired"||(s.h||s.dispatchEvent(new Ec("userInvalidated")),s.h=_),_})}t.toJSON=function(){return this.v()},t.v=function(){var s={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.v(),redirectEventId:this.fa||null};return this.metadata&&P(s,this.metadata.v()),Dt(this.providerData,function(l){s.providerData.push(e5(l))}),P(s,this.O.v()),s};function GA(s){if(!s.apiKey)return null;var l={apiKey:s.apiKey,authDomain:s.authDomain,appName:s.appName},p={};if(s.stsTokenManager&&s.stsTokenManager.accessToken)p[Uo]=s.stsTokenManager.accessToken,p.refreshToken=s.stsTokenManager.refreshToken||null;else return null;var _=new zi(l,p,s);return s.providerData&&Dt(s.providerData,function(C){C&&Dw(_,Ba(C))}),s.redirectEventId&&(_.fa=s.redirectEventId),_}function k6(s,l,p,_){var C=new zi(s,l);return p&&(C.ga=p),_&&Pf(C,_),C.reload().then(function(){return C})}function R6(s,l,p,_){var C=s.b,j={};return j[Uo]=C.b&&C.b.toString(),j.refreshToken=C.a,l=new zi(l||{apiKey:s.l,authDomain:s.s,appName:s.m},j),p&&(l.ga=p),_&&Pf(l,_),Vv(l,s),l}function O6(s){this.a=s,this.b=Of()}var Mw={name:"redirectUser",F:"session"};function $A(s){return wc(s.b,Mw,s.a)}function P6(s,l){return s.b.get(Mw,s.a).then(function(p){return p&&l&&(p.authDomain=l),GA(p||{})})}function Fw(s){this.a=s,this.b=Of(),this.c=null,this.f=D6(this),this.b.addListener(_s("local"),this.a,oe(this.g,this))}Fw.prototype.g=function(){var s=this,l=_s("local");bc(this,function(){return rt().then(function(){return s.c&&s.c.F!="local"?s.b.get(l,s.a):null}).then(function(p){if(p)return jw(s,"local").then(function(){s.c=l})})})};function jw(s,l){var p=[],_;for(_ in yc)yc[_]!==l&&p.push(wc(s.b,_s(yc[_]),s.a));return p.push(wc(s.b,Uw,s.a)),S4(p)}function D6(s){var l=_s("local"),p=_s("session"),_=_s("none");return YV(s.b,l,s.a).then(function(){return s.b.get(p,s.a)}).then(function(C){return C?p:s.b.get(_,s.a).then(function(j){return j?_:s.b.get(l,s.a).then(function(G){return G?l:s.b.get(Uw,s.a).then(function(re){return re?_s(re):l})})})}).then(function(C){return s.c=C,jw(s,C.F)}).o(function(){s.c||(s.c=l)})}var Uw={name:"persistence",F:"session"};function _s(s){return{name:"authUser",F:s}}Fw.prototype.tb=function(s){var l=null,p=this;return KV(s),bc(this,function(){return s!=p.c.F?p.b.get(p.c,p.a).then(function(_){return l=_,jw(p,s)}).then(function(){if(p.c=_s(s),l)return p.b.set(p.c,l,p.a)}):rt()})};function L6(s){return bc(s,function(){return s.b.set(Uw,s.c.F,s.a)})}function HA(s,l){return bc(s,function(){return s.b.set(s.c,l.v(),s.a)})}function KA(s){return bc(s,function(){return wc(s.b,s.c,s.a)})}function YA(s,l){return bc(s,function(){return s.b.get(s.c,s.a).then(function(p){return p&&l&&(p.authDomain=l),GA(p||{})})})}function bc(s,l){return s.f=s.f.then(l,l),s.f}function Vo(s){if(this.l=!1,Qe(this,"settings",new kA),Qe(this,"app",s),tn(this).options&&tn(this).options.apiKey)s=ze.SDK_VERSION?hc(ze.SDK_VERSION):null,this.b=new jo(tn(this).options&&tn(this).options.apiKey,Le(it),s);else throw new Z("invalid-api-key");this.P=[],this.m=[],this.O=[],this.$b=ze.INTERNAL.createSubscribe(oe(this.xc,this)),this.W=void 0,this.ac=ze.INTERNAL.createSubscribe(oe(this.yc,this)),Sc(this,null),this.i=new Fw(tn(this).options.apiKey+":"+tn(this).name),this.B=new O6(tn(this).options.apiKey+":"+tn(this).name),this.Z=Ln(this,V6(this)),this.h=Ln(this,B6(this)),this.aa=!1,this.oa=oe(this.Xc,this),this.Ma=oe(this.ca,this),this.xa=oe(this.jc,this),this.ya=oe(this.uc,this),this.za=oe(this.vc,this),this.a=null,F6(this),this.INTERNAL={},this.INTERNAL.delete=oe(this.delete,this),this.INTERNAL.logFramework=oe(this.Ec,this),this.s=0,ii.call(this),M6(this),this.N=[]}he(Vo,ii);function XA(s){lo.call(this,"languageCodeChanged"),this.g=s}he(XA,lo);function QA(s){lo.call(this,"frameworkChanged"),this.c=s}he(QA,lo),t=Vo.prototype,t.tb=function(s){return s=this.i.tb(s),Ln(this,s)},t.va=function(s){this.$===s||this.l||(this.$=s,RN(this.b,this.$),this.dispatchEvent(new XA(this.ja())))},t.ja=function(){return this.$},t.dd=function(){var s=f.navigator;this.va(s&&(s.languages&&s.languages[0]||s.language||s.userLanguage)||null)},t.Ec=function(s){this.N.push(s),ON(this.b,ze.SDK_VERSION?hc(ze.SDK_VERSION,this.N):null),this.dispatchEvent(new QA(this.N))},t.Ea=function(){return ri(this.N)},t.ub=function(s){this.R===s||this.l||(this.R=s,this.b.b=this.R)},t.S=function(){return this.R};function M6(s){Object.defineProperty(s,"lc",{get:function(){return this.ja()},set:function(l){this.va(l)},enumerable:!1}),s.$=null,Object.defineProperty(s,"ti",{get:function(){return this.S()},set:function(l){this.ub(l)},enumerable:!1}),s.R=null}t.toJSON=function(){return{apiKey:tn(this).options.apiKey,authDomain:tn(this).options.authDomain,appName:tn(this).name,currentUser:Tt(this)&&Tt(this).v()}};function Vw(s){return s.Zb||mn(new Z("auth-domain-config-required"))}function F6(s){var l=tn(s).options.authDomain,p=tn(s).options.apiKey;l&&Yu()&&(s.Zb=s.Z.then(function(){if(!s.l){if(s.a=xA(l,p,tn(s).name),pw(s.a,s),Tt(s)&&Df(Tt(s)),s.D){Df(s.D);var _=s.D;_.va(s.ja()),Cw(_,s),_=s.D,Pf(_,s.N),Nw(_,s),s.D=null}return s.a}}))}t.Cb=function(s,l){switch(s){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==l&&!!this.f;default:return!1}},t.la=function(s,l,p,_){s=="signInViaPopup"&&this.g==_&&(p&&this.w?this.w(p):l&&!p&&this.f&&this.f(l),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.w)},t.Da=function(s,l){return s=="signInViaRedirect"||s=="signInViaPopup"&&this.g==l&&this.f?oe(this.gc,this):null},t.gc=function(s,l,p,_){var C=this,j={requestUri:s,postBody:_,sessionId:l,tenantId:p};return this.c&&(this.c.cancel(),this.c=null),C.Z.then(function(){return al(C,H0(C.b,j))})},t.Vc=function(s){if(!Yu())return mn(new Z("operation-not-supported-in-this-environment"));var l=this,p=E0(s.providerId),_=Xu(),C=null;(!hf()||i0())&&tn(this).options.authDomain&&s.isOAuthProvider&&(C=Nf(tn(this).options.authDomain,tn(this).options.apiKey,tn(this).name,"signInViaPopup",s,null,_,ze.SDK_VERSION||null,null,null,this.S()));var j=kC(C,p&&p.ta,p&&p.sa);return p=Vw(this).then(function(G){return SA(G,j,"signInViaPopup",s,_,!!C,l.S())}).then(function(){return new Ft(function(G,re){l.la("signInViaPopup",null,new Z("cancelled-popup-request"),l.g),l.f=G,l.w=re,l.g=_,l.c=IA(l.a,l,"signInViaPopup",j,_)})}).then(function(G){return j&&Ku(j),G?Ba(G):null}).o(function(G){throw j&&Ku(j),G}),Ln(this,p)},t.Wc=function(s){if(!Yu())return mn(new Z("operation-not-supported-in-this-environment"));var l=this,p=Vw(this).then(function(){return L6(l.i)}).then(function(){return TA(l.a,"signInViaRedirect",s,void 0,l.S())});return Ln(this,p)};function JA(s){if(!Yu())return mn(new Z("operation-not-supported-in-this-environment"));var l=Vw(s).then(function(){return s.a.pa()}).then(function(p){return p?Ba(p):null});return Ln(s,l)}t.pa=function(){var s=this;return JA(this).then(function(l){return s.a&&Fv(s.a.b),l}).o(function(l){throw s.a&&Fv(s.a.b),l})},t.bd=function(s){if(!s)return mn(new Z("null-user"));if(this.R!=s.tenantId)return mn(new Z("tenant-id-mismatch"));var l=this,p={};p.apiKey=tn(this).options.apiKey,p.authDomain=tn(this).options.authDomain,p.appName=tn(this).name;var _=R6(s,p,l.B,l.Ea());return Ln(this,this.h.then(function(){if(tn(l).options.apiKey!=s.l)return _.reload()}).then(function(){return Tt(l)&&s.uid==Tt(l).uid?(Vv(Tt(l),s),l.ca(s)):(Sc(l,_),Df(_),l.ca(_))}).then(function(){Mf(l)}))};function j6(s,l){var p={};return p.apiKey=tn(s).options.apiKey,p.authDomain=tn(s).options.authDomain,p.appName=tn(s).name,s.Z.then(function(){return k6(p,l,s.B,s.Ea())}).then(function(_){return Tt(s)&&_.uid==Tt(s).uid?(Vv(Tt(s),_),s.ca(_)):(Sc(s,_),Df(_),s.ca(_))}).then(function(){Mf(s)})}function Sc(s,l){Tt(s)&&(x6(Tt(s),s.Ma),co(Tt(s),"tokenChanged",s.xa),co(Tt(s),"userDeleted",s.ya),co(Tt(s),"userInvalidated",s.za),kw(Tt(s))),l&&(l.R.push(s.Ma),Lo(l,"tokenChanged",s.xa),Lo(l,"userDeleted",s.ya),Lo(l,"userInvalidated",s.za),0<s.s&&FA(l)),Qe(s,"currentUser",l),l&&(l.va(s.ja()),Cw(l,s),Pf(l,s.N),Nw(l,s))}t.wb=function(){var s=this,l=this.h.then(function(){return s.a&&Fv(s.a.b),Tt(s)?(Sc(s,null),KA(s.i).then(function(){Mf(s)})):rt()});return Ln(this,l)};function U6(s){var l=P6(s.B,tn(s).options.authDomain).then(function(p){return(s.D=p)&&(p.ga=s.B),$A(s.B)});return Ln(s,l)}function V6(s){var l=tn(s).options.authDomain,p=U6(s).then(function(){return YA(s.i,l)}).then(function(_){return _?(_.ga=s.B,s.D&&(s.D.fa||null)==(_.fa||null)?_:_.reload().then(function(){return HA(s.i,_).then(function(){return _})}).o(function(C){return C.code=="auth/network-request-failed"?_:KA(s.i)})):null}).then(function(_){Sc(s,_||null)});return Ln(s,p)}function B6(s){return s.Z.then(function(){return JA(s)}).o(function(){}).then(function(){if(!s.l)return s.oa()}).o(function(){}).then(function(){if(!s.l){s.aa=!0;var l=s.i;l.b.addListener(_s("local"),l.a,s.oa)}})}t.Xc=function(){var s=this;return YA(this.i,tn(this).options.authDomain).then(function(l){if(!s.l){var p;if(p=Tt(s)&&l){p=Tt(s).uid;var _=l.uid;p=p==null||p===""||_===void 0||_===null||_===""?!1:p==_}if(p)return Vv(Tt(s),l),Tt(s).I();(Tt(s)||l)&&(Sc(s,l),l&&(Df(l),l.ga=s.B),s.a&&pw(s.a,s),Mf(s))}})},t.ca=function(s){return HA(this.i,s)},t.jc=function(){Mf(this),this.ca(Tt(this))},t.uc=function(){this.wb()},t.vc=function(){this.wb()};function al(s,l){var p=null,_=null;return Ln(s,l.then(function(C){return p=C0(C),_=nN(C),j6(s,C)},function(C){var j=null;throw C&&C.code==="auth/multi-factor-auth-required"&&(j=PA(C.v(),s,oe(s.ic,s))),j||C}).then(function(){return Ba({user:Tt(s),credential:p,additionalUserInfo:_,operationType:"signIn"})}))}t.ic=function(s){var l=this;return this.h.then(function(){return al(l,rt(s))})},t.xc=function(s){var l=this;this.addAuthTokenListener(function(){s.next(Tt(l))})},t.yc=function(s){var l=this;z6(this,function(){s.next(Tt(l))})},t.Gc=function(s,l,p){var _=this;return this.aa&&Promise.resolve().then(function(){L(s)?s(Tt(_)):L(s.next)&&s.next(Tt(_))}),this.$b(s,l,p)},t.Fc=function(s,l,p){var _=this;return this.aa&&Promise.resolve().then(function(){_.W=_.getUid(),L(s)?s(Tt(_)):L(s.next)&&s.next(Tt(_))}),this.ac(s,l,p)},t.kc=function(s){var l=this,p=this.h.then(function(){return Tt(l)?Tt(l).I(s).then(function(_){return{accessToken:_}}):null});return Ln(this,p)},t.Rc=function(s){var l=this;return this.h.then(function(){return al(l,jt(l.b,SV,{token:s}))}).then(function(p){var _=p.user;return Wa(_,"isAnonymous",!1),l.ca(_),p})},t.Sc=function(s,l){var p=this;return this.h.then(function(){return al(p,jt(p.b,BN,{email:s,password:l}))})},t.cc=function(s,l){var p=this;return this.h.then(function(){return al(p,jt(p.b,eV,{email:s,password:l}))})},t.Ya=function(s){var l=this;return this.h.then(function(){return al(l,s.ia(l.b))})},t.Qc=function(s){return u0("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Ya(s)},t.vb=function(){var s=this;return this.h.then(function(){var l=Tt(s);if(l&&l.isAnonymous){var p=Ba({providerId:null,isNewUser:!1});return Ba({user:l,credential:null,additionalUserInfo:p,operationType:"signIn"})}return al(s,s.b.vb()).then(function(_){var C=_.user;return Wa(C,"isAnonymous",!0),s.ca(C),_})})};function tn(s){return s.app}function Tt(s){return s.currentUser}t.getUid=function(){return Tt(this)&&Tt(this).uid||null};function zv(s){return Tt(s)&&Tt(s)._lat||null}function Mf(s){if(s.aa){for(var l=0;l<s.m.length;l++)s.m[l]&&s.m[l](zv(s));if(s.W!==s.getUid()&&s.O.length)for(s.W=s.getUid(),l=0;l<s.O.length;l++)s.O[l]&&s.O[l](zv(s))}}t.bc=function(s){this.addAuthTokenListener(s),this.s++,0<this.s&&Tt(this)&&FA(Tt(this))},t.Nc=function(s){var l=this;Dt(this.m,function(p){p==s&&l.s--}),0>this.s&&(this.s=0),this.s==0&&Tt(this)&&kw(Tt(this)),this.removeAuthTokenListener(s)},t.addAuthTokenListener=function(s){var l=this;this.m.push(s),Ln(this,this.h.then(function(){l.l||Pe(l.m,s)&&s(zv(l))}))},t.removeAuthTokenListener=function(s){He(this.m,function(l){return l==s})};function z6(s,l){s.O.push(l),Ln(s,s.h.then(function(){!s.l&&Pe(s.O,l)&&s.W!==s.getUid()&&(s.W=s.getUid(),l(zv(s)))}))}t.delete=function(){this.l=!0;for(var s=0;s<this.P.length;s++)this.P[s].cancel("app-deleted");return this.P=[],this.i&&(s=this.i,s.b.removeListener(_s("local"),s.a,this.oa)),this.a&&(bA(this.a,this),Fv(this.a.b)),Promise.resolve()};function Ln(s,l){return s.P.push(l),l.ma(function(){Ve(s.P,l)}),l}t.fc=function(s){return Ln(this,G5(this.b,s))},t.zc=function(s){return!!x0(s)},t.sb=function(s,l){var p=this;return Ln(this,rt().then(function(){var _=new cv(l);if(!_.c)throw new Z("argument-error",_0+" must be true when sending sign in link to email");return hv(_)}).then(function(_){return p.b.sb(s,_)}).then(function(){}))},t.fd=function(s){return this.Pa(s).then(function(l){return l.data.email})},t.jb=function(s,l){return Ln(this,this.b.jb(s,l).then(function(){}))},t.Pa=function(s){return Ln(this,this.b.Pa(s).then(function(l){return new n5(l)}))},t.fb=function(s){return Ln(this,this.b.fb(s).then(function(){}))},t.rb=function(s,l){var p=this;return Ln(this,rt().then(function(){return typeof l>"u"||x(l)?{}:hv(new cv(l))}).then(function(_){return p.b.rb(s,_)}).then(function(){}))},t.Uc=function(s,l){return Ln(this,yw(this,s,l,oe(this.Ya,this)))},t.Tc=function(s,l){var p=this;return Ln(this,rt().then(function(){var _=l||cf(),C=pN(s,_);if(_=x0(_),!_)throw new Z("argument-error","Invalid email link!");if(_.tenantId!==p.S())throw new Z("tenant-id-mismatch");return p.Ya(C)}))};function Ff(){}Ff.prototype.render=function(){},Ff.prototype.reset=function(){},Ff.prototype.getResponse=function(){},Ff.prototype.execute=function(){};function Tc(){this.a={},this.b=1e12}var Bw=null;Tc.prototype.render=function(s,l){return this.a[this.b.toString()]=new qv(s,l),this.b++},Tc.prototype.reset=function(s){var l=zw(this,s);s=ZA(s),l&&s&&(l.delete(),delete this.a[s])},Tc.prototype.getResponse=function(s){return(s=zw(this,s))?s.getResponse():null},Tc.prototype.execute=function(s){(s=zw(this,s))&&s.execute()};function zw(s,l){return(l=ZA(l))&&s.a[l]||null}function ZA(s){return(s=typeof s>"u"?1e12:s)?s.toString():null}function qv(s,l){this.g=!1,this.c=l,this.a=this.b=null,this.h=this.c.size!=="invisible",this.f=Po(s);var p=this;this.i=function(){p.execute()},this.h?this.execute():Lo(this.f,"click",this.i)}qv.prototype.getResponse=function(){return qw(this),this.b},qv.prototype.execute=function(){qw(this);var s=this;this.a||(this.a=setTimeout(function(){s.b=X4();var l=s.c.callback,p=s.c["expired-callback"];if(l)try{l(s.b)}catch{}s.a=setTimeout(function(){if(s.a=null,s.b=null,p)try{p()}catch{}s.h&&s.execute()},6e4)},500))},qv.prototype.delete=function(){qw(this),this.g=!0,clearTimeout(this.a),this.a=null,co(this.f,"click",this.i)};function qw(s){if(s.g)throw Error("reCAPTCHA mock was already deleted!")}function Ww(){}Qe(Ww,"FACTOR_ID","phone");function Gw(){}Gw.prototype.g=function(){return Bw||(Bw=new Tc),rt(Bw)},Gw.prototype.c=function(){};var $w=null;function Hw(){this.b=f.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var q6=new A(H,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),W6=new Va(3e4,6e4);Hw.prototype.g=function(s){var l=this;return new Ft(function(p,_){var C=setTimeout(function(){_(new Z("network-request-failed"))},W6.get());if(!f.grecaptcha||s!==l.f&&!l.b){f[l.a]=function(){if(f.grecaptcha){l.f=s;var G=f.grecaptcha.render;f.grecaptcha.render=function(re,Se){return re=G(re,Se),l.b++,re},clearTimeout(C),p(f.grecaptcha)}else clearTimeout(C),_(new Z("internal-error"));delete f[l.a]};var j=M(q6,{onload:l.a,hl:s||""});rt(B0(j)).o(function(){clearTimeout(C),_(new Z("internal-error","Unable to load external reCAPTCHA dependencies!"))})}else clearTimeout(C),p(f.grecaptcha)})},Hw.prototype.c=function(){this.b--};var Kw=null;function Yw(s,l,p,_,C,j,G){if(Qe(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.u=l,this.g=null,G?($w||($w=new Gw),G=$w):(Kw||(Kw=new Hw),G=Kw),this.m=G,this.a=p||{theme:"light",type:"image"},this.h=[],this.a[nk])throw new Z("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i=this.a[G6]==="invisible",!f.document)throw new Z("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!Po(l)||!this.i&&Po(l).hasChildNodes())throw new Z("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new jo(s,j||null,C||null),this.w=_||function(){return null};var re=this;this.l=[];var Se=this.a[ek];this.a[ek]=function(gt){if(rk(re,gt),typeof Se=="function")Se(gt);else if(typeof Se=="string"){var rn=yn(Se,f);typeof rn=="function"&&rn(gt)}};var Ce=this.a[tk];this.a[tk]=function(){if(rk(re,null),typeof Ce=="function")Ce();else if(typeof Ce=="string"){var gt=yn(Ce,f);typeof gt=="function"&&gt()}}}var ek="callback",tk="expired-callback",nk="sitekey",G6="size";function rk(s,l){for(var p=0;p<s.l.length;p++)try{s.l[p](l)}catch{}}function $6(s,l){He(s.l,function(p){return p==l})}function Xw(s,l){return s.h.push(l),l.ma(function(){Ve(s.h,l)}),l}t=Yw.prototype,t.Ga=function(){var s=this;return this.f?this.f:this.f=Xw(this,rt().then(function(){if(uv()&&!Mo())return n0();throw new Z("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return s.m.g(s.w())}).then(function(l){return s.g=l,jt(s.s,pV,{})}).then(function(l){s.a[nk]=l.recaptchaSiteKey}).o(function(l){throw s.f=null,l}))},t.render=function(){Wv(this);var s=this;return Xw(this,this.Ga().then(function(){if(s.c===null){var l=s.u;if(!s.i){var p=Po(l);l=Vi("DIV"),p.appendChild(l)}s.c=s.g.render(l,s.a)}return s.c}))},t.verify=function(){Wv(this);var s=this;return Xw(this,this.render().then(function(l){return new Ft(function(p){var _=s.g.getResponse(l);if(_)p(_);else{var C=function(j){j&&($6(s,C),p(j))};s.l.push(C),s.i&&s.g.execute(s.c)}})}))},t.reset=function(){Wv(this),this.c!==null&&this.g.reset(this.c)};function Wv(s){if(s.D)throw new Z("internal-error","RecaptchaVerifier instance has been destroyed.")}t.clear=function(){Wv(this),this.D=!0,this.m.c();for(var s=0;s<this.h.length;s++)this.h[s].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){s=Po(this.u);for(var l;l=s.firstChild;)s.removeChild(l)}};function Qw(s,l,p){var _=!1;try{this.b=p||ze.app()}catch{throw new Z("argument-error","No firebase.app.App instance is currently initialized.")}if(this.b.options&&this.b.options.apiKey)p=this.b.options.apiKey;else throw new Z("invalid-api-key");var C=this,j=null;try{j=this.b.auth().Ea()}catch{}try{_=this.b.auth().settings.appVerificationDisabledForTesting}catch{}j=ze.SDK_VERSION?hc(ze.SDK_VERSION,j):null,Yw.call(this,p,s,l,function(){try{var G=C.b.auth().ja()}catch{G=null}return G},j,Le(it),_)}he(Qw,Yw);function ik(s,l,p,_){e:{p=Array.prototype.slice.call(p);for(var C=0,j=!1,G=0;G<l.length;G++)if(l[G].optional)j=!0;else{if(j)throw new Z("internal-error","Argument validator encountered a required argument after an optional argument.");C++}if(j=l.length,p.length<C||j<p.length)_="Expected "+(C==j?C==1?"1 argument":C+" arguments":C+"-"+j+" arguments")+" but got "+p.length+".";else{for(C=0;C<p.length;C++)if(j=l[C].optional&&p[C]===void 0,!l[C].K(p[C])&&!j){if(l=l[C],0>C||C>=ok.length)throw new Z("internal-error","Argument validator received an unsupported number of arguments.");p=ok[C],_=(_?"":p+" argument ")+(l.name?'"'+l.name+'" ':"")+"must be "+l.J+".";break e}_=null}}if(_)throw new Z("argument-error",s+" failed: "+_)}var ok="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Je(s,l){return{name:s||"",J:"a valid string",optional:!!l,K:function(p){return typeof p=="string"}}}function Jw(s,l){return{name:s||"",J:"a boolean",optional:!!l,K:function(p){return typeof p=="boolean"}}}function hr(s,l){return{name:s||"",J:"a valid object",optional:!!l,K:D}}function Ic(s,l){return{name:s||"",J:"a function",optional:!!l,K:L}}function ws(s,l){return{name:s||"",J:"null",optional:!!l,K:function(p){return p===null}}}function H6(){return{name:"",J:"an HTML element",optional:!1,K:function(s){return!!(s&&s instanceof Element)}}}function K6(){return{name:"auth",J:"an instance of Firebase Auth",optional:!0,K:function(s){return!!(s&&s instanceof Vo)}}}function Y6(){return{name:"app",J:"an instance of Firebase App",optional:!0,K:function(s){return!!(s&&s instanceof ze.app.App)}}}function Ga(s){return{name:s?s+"Credential":"credential",J:s?"a valid "+s+" credential":"a valid credential",optional:!1,K:function(l){if(!l)return!1;var p=!s||l.providerId===s;return!(!l.ia||!p)}}}function sk(){return{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(s){return s?!!s.ob:!1}}}function xc(){return{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(s){return!!(s&&s.providerId&&s.hasOwnProperty&&s.hasOwnProperty("isOAuthProvider"))}}}function Zw(s,l){return D(s)&&typeof s.type=="string"&&s.type===l&&L(s.Fa)}function ak(s){return D(s)&&typeof s.uid=="string"}function Gv(){return{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(s){return!(!s||typeof s.type!="string"||!L(s.verify))}}}function zn(s,l,p,_){return{name:p||"",J:s.J+" or "+l.J,optional:!!_,K:function(C){return s.K(C)||l.K(C)}}}function Cn(s,l){for(var p in l){var _=l[p].name;s[_]=lk(_,s[p],l[p].j)}}function uk(s,l){for(var p in l){var _=l[p].name;_!==p&&Object.defineProperty(s,_,{get:fe(function(C){return this[C]},p),set:fe(function(C,j,G,re){ik(C,[G],[re],!0),this[j]=re},_,p,l[p].gb),enumerable:!0})}}function qn(s,l,p,_){s[l]=lk(l,p,_)}function lk(s,l,p){function _(){var G=Array.prototype.slice.call(arguments);return ik(C,p,G),l.apply(this,G)}if(!p)return l;var C=X6(s),j;for(j in l)_[j]=l[j];for(j in l.prototype)_.prototype[j]=l.prototype[j];return _}function X6(s){return s=s.split("."),s[s.length-1]}Cn(Vo.prototype,{fb:{name:"applyActionCode",j:[Je("code")]},Pa:{name:"checkActionCode",j:[Je("code")]},jb:{name:"confirmPasswordReset",j:[Je("code"),Je("newPassword")]},cc:{name:"createUserWithEmailAndPassword",j:[Je("email"),Je("password")]},fc:{name:"fetchSignInMethodsForEmail",j:[Je("email")]},pa:{name:"getRedirectResult",j:[]},zc:{name:"isSignInWithEmailLink",j:[Je("emailLink")]},Fc:{name:"onAuthStateChanged",j:[zn(hr(),Ic(),"nextOrObserver"),Ic("opt_error",!0),Ic("opt_completed",!0)]},Gc:{name:"onIdTokenChanged",j:[zn(hr(),Ic(),"nextOrObserver"),Ic("opt_error",!0),Ic("opt_completed",!0)]},rb:{name:"sendPasswordResetEmail",j:[Je("email"),zn(hr("opt_actionCodeSettings",!0),ws(null,!0),"opt_actionCodeSettings",!0)]},sb:{name:"sendSignInLinkToEmail",j:[Je("email"),hr("actionCodeSettings")]},tb:{name:"setPersistence",j:[Je("persistence")]},Qc:{name:"signInAndRetrieveDataWithCredential",j:[Ga()]},vb:{name:"signInAnonymously",j:[]},Ya:{name:"signInWithCredential",j:[Ga()]},Rc:{name:"signInWithCustomToken",j:[Je("token")]},Sc:{name:"signInWithEmailAndPassword",j:[Je("email"),Je("password")]},Tc:{name:"signInWithEmailLink",j:[Je("email"),Je("emailLink",!0)]},Uc:{name:"signInWithPhoneNumber",j:[Je("phoneNumber"),Gv()]},Vc:{name:"signInWithPopup",j:[xc()]},Wc:{name:"signInWithRedirect",j:[xc()]},bd:{name:"updateCurrentUser",j:[zn(function(s){return{name:"user",J:"an instance of Firebase User",optional:!!s,K:function(l){return!!(l&&l instanceof zi)}}}(),ws(),"user")]},wb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Je(null,!0)]},dd:{name:"useDeviceLanguage",j:[]},fd:{name:"verifyPasswordResetCode",j:[Je("code")]}}),uk(Vo.prototype,{lc:{name:"languageCode",gb:zn(Je(),ws(),"languageCode")},ti:{name:"tenantId",gb:zn(Je(),ws(),"tenantId")}}),Vo.Persistence=yc,Vo.Persistence.LOCAL="local",Vo.Persistence.SESSION="session",Vo.Persistence.NONE="none",Cn(zi.prototype,{delete:{name:"delete",j:[]},mc:{name:"getIdTokenResult",j:[Jw("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Jw("opt_forceRefresh",!0)]},Ac:{name:"linkAndRetrieveDataWithCredential",j:[Ga()]},mb:{name:"linkWithCredential",j:[Ga()]},Bc:{name:"linkWithPhoneNumber",j:[Je("phoneNumber"),Gv()]},Cc:{name:"linkWithPopup",j:[xc()]},Dc:{name:"linkWithRedirect",j:[xc()]},Jc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Ga()]},pb:{name:"reauthenticateWithCredential",j:[Ga()]},Kc:{name:"reauthenticateWithPhoneNumber",j:[Je("phoneNumber"),Gv()]},Lc:{name:"reauthenticateWithPopup",j:[xc()]},Mc:{name:"reauthenticateWithRedirect",j:[xc()]},reload:{name:"reload",j:[]},qb:{name:"sendEmailVerification",j:[zn(hr("opt_actionCodeSettings",!0),ws(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Je(null,!0)]},ad:{name:"unlink",j:[Je("provider")]},xb:{name:"updateEmail",j:[Je("email")]},yb:{name:"updatePassword",j:[Je("password")]},cd:{name:"updatePhoneNumber",j:[Ga("phone")]},zb:{name:"updateProfile",j:[hr("profile")]},Ab:{name:"verifyBeforeUpdateEmail",j:[Je("email"),zn(hr("opt_actionCodeSettings",!0),ws(null,!0),"opt_actionCodeSettings",!0)]}}),Cn(Tc.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Cn(Ff.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Cn(Ft.prototype,{ma:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),uk(kA.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",gb:Jw("appVerificationDisabledForTesting")}}),Cn(mw.prototype,{confirm:{name:"confirm",j:[Je("verificationCode")]}}),qn(pc,"fromJSON",function(s){s=typeof s=="string"?JSON.parse(s):s;for(var l,p=[w5,E5,b5,_5],_=0;_<p.length;_++)if(l=p[_](s))return l;return null},[zn(Je(),hr(),"json")]),qn(fo,"credential",function(s,l){return new za(s,l)},[Je("email"),Je("password")]),Cn(za.prototype,{v:{name:"toJSON",j:[Je(null,!0)]}}),Cn(Zu.prototype,{Aa:{name:"addScope",j:[Je("scope")]},Ia:{name:"setCustomParameters",j:[hr("customOAuthParameters")]}}),qn(Zu,"credential",cN,[zn(Je(),hr(),"token")]),qn(fo,"credentialWithLink",pN,[Je("email"),Je("emailLink")]),Cn(el.prototype,{Aa:{name:"addScope",j:[Je("scope")]},Ia:{name:"setCustomParameters",j:[hr("customOAuthParameters")]}}),qn(el,"credential",hN,[zn(Je(),hr(),"token")]),Cn(tl.prototype,{Aa:{name:"addScope",j:[Je("scope")]},Ia:{name:"setCustomParameters",j:[hr("customOAuthParameters")]}}),qn(tl,"credential",fN,[zn(Je(),zn(hr(),ws()),"idToken"),zn(Je(),ws(),"accessToken",!0)]),Cn(gc.prototype,{Ia:{name:"setCustomParameters",j:[hr("customOAuthParameters")]}}),qn(gc,"credential",dN,[zn(Je(),hr(),"token"),Je("secret",!0)]),Cn(Bi.prototype,{Aa:{name:"addScope",j:[Je("scope")]},credential:{name:"credential",j:[zn(Je(),zn(hr(),ws()),"optionsOrIdToken"),zn(Je(),ws(),"accessToken",!0)]},Ia:{name:"setCustomParameters",j:[hr("customOAuthParameters")]}}),Cn(Ks.prototype,{v:{name:"toJSON",j:[Je(null,!0)]}}),Cn(Qu.prototype,{v:{name:"toJSON",j:[Je(null,!0)]}}),qn(Ys,"credential",vN,[Je("verificationId"),Je("verificationCode")]),Cn(Ys.prototype,{cb:{name:"verifyPhoneNumber",j:[zn(Je(),function(s,l){return{name:s||"phoneInfoOptions",J:"valid phone info options",optional:!!l,K:function(p){return p?p.session&&p.phoneNumber?Zw(p.session,mf)&&typeof p.phoneNumber=="string":p.session&&p.multiFactorHint?Zw(p.session,gv)&&ak(p.multiFactorHint):p.session&&p.multiFactorUid?Zw(p.session,gv)&&typeof p.multiFactorUid=="string":p.phoneNumber?typeof p.phoneNumber=="string":!1:!1}}}(),"phoneInfoOptions"),Gv()]}}),Cn(qa.prototype,{v:{name:"toJSON",j:[Je(null,!0)]}}),Cn(Z.prototype,{toJSON:{name:"toJSON",j:[Je(null,!0)]}}),Cn(_f.prototype,{toJSON:{name:"toJSON",j:[Je(null,!0)]}}),Cn(k0.prototype,{toJSON:{name:"toJSON",j:[Je(null,!0)]}}),Cn(ww.prototype,{toJSON:{name:"toJSON",j:[Je(null,!0)]}}),Cn(_w.prototype,{Pc:{name:"resolveSignIn",j:[sk()]}}),Cn(bw.prototype,{Ob:{name:"getSession",j:[]},dc:{name:"enroll",j:[sk(),Je("displayName",!0)]},$c:{name:"unenroll",j:[zn({name:"multiFactorInfo",J:"a valid multiFactorInfo",optional:!1,K:ak},Je(),"multiFactorInfoIdentifier")]}}),Cn(Qw.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),qn(y0,"parseLink",$C,[Je("link")]),qn(Ww,"assertion",function(s){return new LA(s)},[Ga("phone")]),function(){if(typeof ze<"u"&&ze.INTERNAL&&ze.INTERNAL.registerComponent){var s={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:lv,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:m0,VERIFY_AND_CHANGE_EMAIL:vf,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:Vo,AuthCredential:pc,Error:Z};qn(s,"EmailAuthProvider",fo,[]),qn(s,"FacebookAuthProvider",Zu,[]),qn(s,"GithubAuthProvider",el,[]),qn(s,"GoogleAuthProvider",tl,[]),qn(s,"TwitterAuthProvider",gc,[]),qn(s,"OAuthProvider",Bi,[Je("providerId")]),qn(s,"SAMLAuthProvider",lN,[Je("providerId")]),qn(s,"PhoneAuthProvider",Ys,[K6()]),qn(s,"RecaptchaVerifier",Qw,[zn(Je(),H6(),"recaptchaContainer"),hr("recaptchaParameters",!0),Y6()]),qn(s,"ActionCodeURL",y0,[]),qn(s,"PhoneMultiFactorGenerator",Ww,[]),ze.INTERNAL.registerComponent({name:"auth",instanceFactory:function(l){return l=l.getProvider("app").getImmediate(),new Vo(l)},multipleInstances:!1,serviceProps:s,instantiationMode:"LAZY",type:"PUBLIC"}),ze.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(l){return l=l.getProvider("auth").getImmediate(),{getUid:oe(l.getUid,l),getToken:oe(l.kc,l),addAuthTokenListener:oe(l.bc,l),removeAuthTokenListener:oe(l.Nc,l)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),ze.registerVersion("@firebase/auth","0.14.2"),ze.INTERNAL.extendNamespace({User:zi})}else throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.")}()}).apply(typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{});var oF={};/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var J$=function(){function t(e){this.domStorage_=e,this.prefix_="firebase:"}return t.prototype.set=function(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),xr(n))},t.prototype.get=function(e){var n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:_I(n)},t.prototype.remove=function(e){this.domStorage_.removeItem(this.prefixedName_(e))},t.prototype.prefixedName_=function(e){return this.prefix_+e},t.prototype.toString=function(){return this.domStorage_.toString()},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Z$=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n},t.prototype.get=function(e){return Ao(this.cache_,e)?this.cache_[e]:null},t.prototype.remove=function(e){delete this.cache_[e]},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sF=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new J$(e)}}catch{}return new Z$},El=sF("localStorage"),l1=sF("sessionStorage");/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mh=new Kh("@firebase/database"),aF=function(){var t=1;return function(){return t++}}(),uF=function(t){var e=_$(t),n=new u$;n.update(e);var r=n.digest();return l$.encodeByteArray(r)},Lp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?n+=Lp.apply(null,i):typeof i=="object"?n+=xr(i):n+=i,n+=" "}return n},xl=null,hR=!0,lF=function(t,e){Oe(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(mh.logLevel=wt.VERBOSE,xl=mh.log.bind(mh),e&&l1.set("logging_enabled",!0)):typeof t=="function"?xl=t:(xl=null,l1.remove("logging_enabled"))},Xr=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(hR===!0&&(hR=!1,xl===null&&l1.get("logging_enabled")===!0&&lF(!0)),xl){var n=Lp.apply(null,t);xl(n)}},Mp=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Xr.apply(void 0,Pa([t],e))}},c1=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+Lp.apply(void 0,Pa(t));mh.error(n)},da=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+Lp.apply(void 0,Pa(t));throw mh.error(n),new Error(n)},Qr=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+Lp.apply(void 0,Pa(t));mh.warn(n)},e7=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Qr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},r_=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},t7=function(t){if(Ia()||document.readyState==="complete")t();else{var e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Ml="[MIN_NAME]",Au="[MAX_NAME]",Jl=function(t,e){if(t===e)return 0;if(t===Ml||e===Au)return-1;if(e===Ml||t===Au)return 1;var n=fR(t),r=fR(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1},n7=function(t,e){return t===e?0:t<e?-1:1},Kf=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+xr(e))},SI=function(t){if(typeof t!="object"||t===null)return xr(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)i!==0&&(r+=","),r+=xr(e[i]),r+=":",r+=SI(t[e[i]]);return r+="}",r},cF=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function vr(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var hF=function(t){Oe(!r_(t),"Invalid JSON number");var e=11,n=52,r=(1<<e-1)-1,i,o,a,c,f;t===0?(o=0,a=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(c=Math.min(Math.floor(Math.log(t)/Math.LN2),r),o=c+r,a=Math.round(t*Math.pow(2,n-c)-Math.pow(2,n))):(o=0,a=Math.round(t/Math.pow(2,1-r-n))));var v=[];for(f=n;f;f-=1)v.push(a%2?1:0),a=Math.floor(a/2);for(f=e;f;f-=1)v.push(o%2?1:0),o=Math.floor(o/2);v.push(i?1:0),v.reverse();var y=v.join(""),b="";for(f=0;f<64;f+=8){var E=parseInt(y.substr(f,8),2).toString(16);E.length===1&&(E="0"+E),b=b+E}return b.toLowerCase()},r7=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},i7=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},o7=function(t,e){var n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r},s7=new RegExp("^-?(0*)\\d{1,10}$"),fR=function(t){if(s7.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},Yh=function(t){try{t()}catch(e){setTimeout(function(){var n=e.stack||"";throw Qr("Exception was thrown by user callback.",n),e},Math.floor(0))}},a7=function(){var t=typeof window=="object"&&window.navigator&&window.navigator.userAgent||"";return t.search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Td=function(t,e){var n=setTimeout(t,e);return typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e=function(){function t(e,n){if(n===void 0){this.pieces_=e.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}return Object.defineProperty(t,"Empty",{get:function(){return new t("")},enumerable:!0,configurable:!0}),t.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},t.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},t.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new t(this.pieces_,e)},t.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},t.prototype.toString=function(){for(var e="",n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"},t.prototype.toUrlEncodedString=function(){for(var e="",n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(this.pieces_[n])));return e||"/"},t.prototype.slice=function(e){return e===void 0&&(e=0),this.pieces_.slice(this.pieceNum_+e)},t.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)e.push(this.pieces_[n]);return new t(e,0)},t.prototype.child=function(e){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r]);if(e instanceof t)for(var r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else for(var i=e.split("/"),r=0;r<i.length;r++)i[r].length>0&&n.push(i[r]);return new t(n,0)},t.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},t.relativePath=function(e,n){var r=e.getFront(),i=n.getFront();if(r===null)return n;if(r===i)return t.relativePath(e.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")},t.comparePaths=function(e,n){for(var r=e.slice(),i=n.slice(),o=0;o<r.length&&o<i.length;o++){var a=Jl(r[o],i[o]);if(a!==0)return a}return r.length===i.length?0:r.length<i.length?-1:1},t.prototype.equals=function(e){if(this.getLength()!==e.getLength())return!1;for(var n=this.pieceNum_,r=e.pieceNum_;n<=this.pieces_.length;n++,r++)if(this.pieces_[n]!==e.pieces_[r])return!1;return!0},t.prototype.contains=function(e){var n=this.pieceNum_,r=e.pieceNum_;if(this.getLength()>e.getLength())return!1;for(;n<this.pieces_.length;){if(this.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0},t}(),u7=function(){function t(e,n){this.errorPrefix_=n,this.parts_=e.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=Qg(this.parts_[r]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!0,configurable:!0}),t.prototype.push=function(e){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(e),this.byteLength_+=Qg(e),this.checkValid_()},t.prototype.pop=function(){var e=this.parts_.pop();this.byteLength_-=Qg(e),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return this.parts_.length===0?"":"in property '"+this.parts_.join(".")+"'"},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qm="5",fF="v",dF="s",pF="r",vF="f",gF="firebaseio.com",mF="ls",yF="websocket",_F="long_polling";/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wF=function(){function t(e,n,r,i,o,a){o===void 0&&(o=""),a===void 0&&(a=!1),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.host=e.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=El.get("host:"+e)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},t.prototype.isCacheableHost=function(){return this.internalHost.substr(0,2)==="s-"},t.prototype.isDemoHost=function(){return this.domain==="firebaseio-demo.com"},t.prototype.isCustomHost=function(){return this.domain!=="firebaseio.com"&&this.domain!=="firebaseio-demo.com"},t.prototype.updateHost=function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&El.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(e,n){Oe(typeof e=="string","typeof type must == string"),Oe(typeof n=="object","typeof params must == object");var r;if(e===yF)r=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else if(e===_F)r=(this.secure?"https://":"http://")+this.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);this.needsQueryParam()&&(n.ns=this.namespace);var i=[];return vr(n,function(o,a){i.push(o+"="+a)}),r+i.join("&")},t.prototype.toString=function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l7(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function c7(t){var e,n,r={};t.charAt(0)==="?"&&(t=t.substring(1));try{for(var i=Kn(t.split("&")),o=i.next();!o.done;o=i.next()){var a=o.value;if(a.length!==0){var c=a.split("=");c.length===2?r[decodeURIComponent(c[0])]=decodeURIComponent(c[1]):Qr("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(f){e={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}var h1=function(t){var e=h7(t),n=e.namespace;e.domain==="firebase"&&da(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!n||n==="undefined")&&e.domain!=="localhost"&&da("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||e7();var r=e.scheme==="ws"||e.scheme==="wss";return{repoInfo:new wF(e.host,e.secure,n,r,"",n!==e.subdomain),path:new $e(e.pathString)}},h7=function(t){var e="",n="",r="",i="",o="",a=!0,c="https",f=443;if(typeof t=="string"){var v=t.indexOf("//");v>=0&&(c=t.substring(0,v-1),t=t.substring(v+2));var y=t.indexOf("/");y===-1&&(y=t.length);var b=t.indexOf("?");b===-1&&(b=t.length),e=t.substring(0,Math.min(y,b)),y<b&&(i=l7(t.substring(y,b)));var E=c7(t.substring(Math.min(t.length,b)));v=e.indexOf(":"),v>=0?(a=c==="https"||c==="wss",f=parseInt(e.substring(v+1),10)):v=t.length;var I=e.split(".");I.length===3?(n=I[1],r=I[0].toLowerCase(),o=r):I.length===2?n=I[0]:I[0].slice(0,v).toLowerCase()==="localhost"&&(n="localhost"),"ns"in E&&(o=E.ns)}return{host:e,port:f,domain:n,subdomain:r,secure:a,scheme:c,pathString:i,namespace:o}};/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var f7=/[\[\].#$\/\u0000-\u001F\u007F]/,d7=/[\[\].#$\u0000-\u001F\u007F]/,zE=10*1024*1024,i_=function(t){return typeof t=="string"&&t.length!==0&&!f7.test(t)},EF=function(t){return typeof t=="string"&&t.length!==0&&!d7.test(t)},p7=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),EF(t)},Jd=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!r_(t)||t&&typeof t=="object"&&Ao(t,".sv")},Eu=function(t,e,n,r,i){i&&n===void 0||Fp(Ms(t,e,i),n,r)},Fp=function(t,e,n){var r=n instanceof $e?new u7(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+r.toErrorString());if(typeof e=="function")throw new Error(t+"contains a function "+r.toErrorString()+" with contents = "+e.toString());if(r_(e))throw new Error(t+"contains "+e.toString()+" "+r.toErrorString());if(typeof e=="string"&&e.length>zE/3&&Qg(e)>zE)throw new Error(t+"contains a string greater than "+zE+" utf8 bytes "+r.toErrorString()+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){var i=!1,o=!1;if(vr(e,function(a,c){if(a===".value")i=!0;else if(a!==".priority"&&a!==".sv"&&(o=!0,!i_(a)))throw new Error(t+" contains an invalid key ("+a+") "+r.toErrorString()+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);r.push(a),Fp(t,c,r),r.pop()}),i&&o)throw new Error(t+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},v7=function(t,e){var n,r;for(n=0;n<e.length;n++){r=e[n];for(var i=r.slice(),o=0;o<i.length;o++)if(!(i[o]===".priority"&&o===i.length-1)){if(!i_(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort($e.comparePaths);var a=null;for(n=0;n<e.length;n++){if(r=e[n],a!==null&&a.contains(r))throw new Error(t+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}},bF=function(t,e,n,r,i){if(!(i&&n===void 0)){var o=Ms(t,e,i);if(!(n&&typeof n=="object")||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var a=[];vr(n,function(c,f){var v=new $e(c);if(Fp(o,f,r.child(v)),v.getBack()===".priority"&&!Jd(f))throw new Error(o+"contains an invalid value for '"+v.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(v)}),v7(o,a)}},f1=function(t,e,n,r){if(!(r&&n===void 0)){if(r_(n))throw new Error(Ms(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Jd(n))throw new Error(Ms(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},qE=function(t,e,n,r){if(!(r&&n===void 0))switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Ms(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},WE=function(t,e,n,r){if(!(r&&n===void 0)&&!i_(n))throw new Error(Ms(t,e,r)+'was an invalid key = "'+n+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},Zd=function(t,e,n,r){if(!(r&&n===void 0)&&!EF(n))throw new Error(Ms(t,e,r)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},g7=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Zd(t,e,n,r)},vo=function(t,e){if(e.getFront()===".info")throw new Error(t+" failed = Can't modify data under /.info/")},SF=function(t,e,n){var r=n.path.toString();if(typeof n.repoInfo.host!="string"||n.repoInfo.host.length===0||!i_(n.repoInfo.namespace)&&n.repoInfo.host.split(":")[0]!=="localhost"||r.length!==0&&!p7(r))throw new Error(Ms(t,e,!1)+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)},m7=function(t,e,n,r){if(!(r&&n===void 0)&&typeof n!="boolean")throw new Error(Ms(t,e,r)+"must be a boolean.")};/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var y7=function(){function t(e,n){this.repo_=e,this.path_=n}return t.prototype.cancel=function(e){dt("OnDisconnect.cancel",0,1,arguments.length),Tr("OnDisconnect.cancel",1,e,!0);var n=new Yo;return this.repo_.onDisconnectCancel(this.path_,n.wrapCallback(e)),n.promise},t.prototype.remove=function(e){dt("OnDisconnect.remove",0,1,arguments.length),vo("OnDisconnect.remove",this.path_),Tr("OnDisconnect.remove",1,e,!0);var n=new Yo;return this.repo_.onDisconnectSet(this.path_,null,n.wrapCallback(e)),n.promise},t.prototype.set=function(e,n){dt("OnDisconnect.set",1,2,arguments.length),vo("OnDisconnect.set",this.path_),Eu("OnDisconnect.set",1,e,this.path_,!1),Tr("OnDisconnect.set",2,n,!0);var r=new Yo;return this.repo_.onDisconnectSet(this.path_,e,r.wrapCallback(n)),r.promise},t.prototype.setWithPriority=function(e,n,r){dt("OnDisconnect.setWithPriority",2,3,arguments.length),vo("OnDisconnect.setWithPriority",this.path_),Eu("OnDisconnect.setWithPriority",1,e,this.path_,!1),f1("OnDisconnect.setWithPriority",2,n,!1),Tr("OnDisconnect.setWithPriority",3,r,!0);var i=new Yo;return this.repo_.onDisconnectSetWithPriority(this.path_,e,n,i.wrapCallback(r)),i.promise},t.prototype.update=function(e,n){if(dt("OnDisconnect.update",1,2,arguments.length),vo("OnDisconnect.update",this.path_),Array.isArray(e)){for(var r={},i=0;i<e.length;++i)r[""+i]=e[i];e=r,Qr("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}bF("OnDisconnect.update",1,e,this.path_,!1),Tr("OnDisconnect.update",2,n,!0);var o=new Yo;return this.repo_.onDisconnectUpdate(this.path_,e,o.wrapCallback(n)),o.promise},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _7=function(){function t(e,n){this.committed=e,this.snapshot=n}return t.prototype.toJSON=function(){return dt("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var w7=function(){var t="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",e=0,n=[];return function(r){var i=r===e;e=r;var o,a=new Array(8);for(o=7;o>=0;o--)a[o]=t.charAt(r%64),r=Math.floor(r/64);Oe(r===0,"Cannot push at time == 0");var c=a.join("");if(i){for(o=11;o>=0&&n[o]===63;o--)n[o]=0;n[o]++}else for(o=0;o<12;o++)n[o]=Math.floor(Math.random()*64);for(o=0;o<12;o++)c+=t.charAt(n[o]);return Oe(c.length===20,"nextPushId: Length should be 20."),c}}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vt=function(){function t(e,n){this.name=e,this.node=n}return t.Wrap=function(e,n){return new t(e,n)},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var o_=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(e,n){var r=new Vt(Ml,e),i=new Vt(Ml,n);return this.compare(r,i)!==0},t.prototype.minPost=function(){return Vt.MIN},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gg,TF=function(t){St(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return gg},set:function(n){gg=n},enumerable:!0,configurable:!0}),e.prototype.compare=function(n,r){return Jl(n.name,r.name)},e.prototype.isDefinedOn=function(n){throw Pp("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(n,r){return!1},e.prototype.minPost=function(){return Vt.MIN},e.prototype.maxPost=function(){return new Vt(Au,gg)},e.prototype.makePost=function(n,r){return Oe(typeof n=="string","KeyIndex indexValue must always be a string."),new Vt(n,gg)},e.prototype.toString=function(){return".key"},e}(o_),bu=new TF;/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var d1;function E7(t){d1=t}var IF=function(t){return typeof t=="number"?"number:"+hF(t):"string:"+t},xF=function(t){if(t.isLeafNode()){var e=t.val();Oe(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Ao(e,".sv"),"Priority must be a string or number.")}else Oe(t===d1||t.isEmpty(),"priority of unexpected type.");Oe(t===d1||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dR,Fh=function(){function t(e,n){n===void 0&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Oe(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),xF(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return dR},set:function(e){dR=e},enumerable:!0,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return e===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return e.isEmpty()?this:e.getFront()===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(e,n){return null},t.prototype.updateImmediateChild=function(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=e.getFront();return r===null?n:n.isEmpty()&&r!==".priority"?this:(Oe(r!==".priority"||e.getLength()===1,".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(e.popFront(),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(e,n){return!1},t.prototype.val=function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(this.lazyHash_===null){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+IF(this.priorityNode_.val())+":");var n=typeof this.value_;e+=n+":",n==="number"?e+=hF(this.value_):e+=this.value_,this.lazyHash_=uF(e)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Oe(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),o=t.VALUE_TYPE_ORDER.indexOf(r);return Oe(i>=0,"Unknown leaf type: "+n),Oe(o>=0,"Unknown leaf type: "+r),i===o?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode()){var n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var CF,NF;function b7(t){CF=t}function S7(t){NF=t}var T7=function(t){St(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.compare=function(n,r){var i=n.node.getPriority(),o=r.node.getPriority(),a=i.compareTo(o);return a===0?Jl(n.name,r.name):a},e.prototype.isDefinedOn=function(n){return!n.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(n,r){return!n.getPriority().equals(r.getPriority())},e.prototype.minPost=function(){return Vt.MIN},e.prototype.maxPost=function(){return new Vt(Au,new Fh("[PRIORITY-POST]",NF))},e.prototype.makePost=function(n,r){var i=CF(n);return new Vt(r,new Fh("[PRIORITY-POST]",i))},e.prototype.toString=function(){return".priority"},e}(o_),nn=new T7;/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mg=function(){function t(e,n,r,i,o){o===void 0&&(o=null),this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];for(var a=1;!e.isEmpty();)if(e=e,a=n?r(e.key,n):1,i&&(a*=-1),a<0)this.isReverse_?e=e.left:e=e.right;else if(a===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}return t.prototype.getNext=function(){if(this.nodeStack_.length===0)return null;var e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(this.nodeStack_.length===0)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}},t}(),Wo=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??pa.EMPTY_NODE,this.right=o??pa.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)},t.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(e,n,r){var i=this,o=r(e,i.key);return o<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return pa.EMPTY_NODE;var e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()},t.prototype.remove=function(e,n){var r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return pa.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e},t.prototype.moveRedLeft_=function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e},t.prototype.moveRedRight_=function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)},t.prototype.checkMaxDepth_=function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),I7=function(){function t(){}return t.prototype.copy=function(e,n,r,i,o){return this},t.prototype.insert=function(e,n,r){return new Wo(e,n,null)},t.prototype.remove=function(e,n){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(e){return!1},t.prototype.reverseTraversal=function(e){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),pa=function(){function t(e,n){n===void 0&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Wo.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Wo.BLACK,null,null))},t.prototype.get=function(e){for(var n,r=this.root_;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null},t.prototype.getPredecessorKey=function(e){for(var n,r=this.root_,i=null;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(e){return this.root_.inorderTraversal(e)},t.prototype.reverseTraversal=function(e){return this.root_.reverseTraversal(e)},t.prototype.getIterator=function(e){return new mg(this.root_,null,this.comparator_,!1,e)},t.prototype.getIteratorFrom=function(e,n){return new mg(this.root_,e,this.comparator_,!1,n)},t.prototype.getReverseIteratorFrom=function(e,n){return new mg(this.root_,e,this.comparator_,!0,n)},t.prototype.getReverseIterator=function(e){return new mg(this.root_,null,this.comparator_,!0,e)},t.EMPTY_NODE=new I7,t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var x7=Math.log(2),C7=function(){function t(e){var n=function(o){return parseInt(Math.log(o)/x7,10)},r=function(o){return parseInt(Array(o+1).join("1"),2)};this.count=n(e+1),this.current_=this.count-1;var i=r(this.count);this.bits_=e+1&i}return t.prototype.nextBitIsOne=function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e},t}(),Wm=function(t,e,n,r){t.sort(e);var i=function(f,v){var y=v-f,b,E;if(y===0)return null;if(y===1)return b=t[f],E=n?n(b):b,new Wo(E,b.node,Wo.BLACK,null,null);var I=parseInt(y/2,10)+f,L=i(f,I),D=i(I+1,v);return b=t[I],E=n?n(b):b,new Wo(E,b.node,Wo.BLACK,L,D)},o=function(f){for(var v=null,y=null,b=t.length,E=function(z,Y){var K=b-z,ue=b;b-=z;var oe=i(K+1,ue),fe=t[K],me=n?n(fe):fe;I(new Wo(me,fe.node,Y,null,oe))},I=function(z){v?(v.left=z,v=z):(y=z,v=z)},L=0;L<f.count;++L){var D=f.nextBitIsOne(),te=Math.pow(2,f.count-(L+1));D?E(te,Wo.BLACK):(E(te,Wo.BLACK),E(te,Wo.RED))}return y},a=new C7(t.length),c=o(a);return new pa(r||e,c)};/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var GE,kc={},Gm=function(){function t(e,n){this.indexes_=e,this.indexSet_=n}return Object.defineProperty(t,"Default",{get:function(){return Oe(kc&&nn,"ChildrenNode.ts has not been loaded"),GE=GE||new t({".priority":kc},{".priority":nn}),GE},enumerable:!0,configurable:!0}),t.prototype.get=function(e){var n=Qo(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof pa?n:null},t.prototype.hasIndex=function(e){return Ao(this.indexSet_,e.toString())},t.prototype.addIndex=function(e,n){Oe(e!==bu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r=[],i=!1,o=n.getIterator(Vt.Wrap),a=o.getNext();a;)i=i||e.isDefinedOn(a.node),r.push(a),a=o.getNext();var c;i?c=Wm(r,e.getCompare()):c=kc;var f=e.toString(),v=Tn({},this.indexSet_);v[f]=e;var y=Tn({},this.indexes_);return y[f]=c,new t(y,v)},t.prototype.addToIndexes=function(e,n){var r=this,i=Um(this.indexes_,function(o,a){var c=Qo(r.indexSet_,a);if(Oe(c,"Missing index implementation for "+a),o===kc)if(c.isDefinedOn(e.node)){for(var f=[],v=n.getIterator(Vt.Wrap),y=v.getNext();y;)y.name!==e.name&&f.push(y),y=v.getNext();return f.push(e),Wm(f,c.getCompare())}else return kc;else{var b=n.get(e.name),E=o;return b&&(E=E.remove(new Vt(e.name,b))),E.insert(e,e.node)}});return new t(i,this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){var r=Um(this.indexes_,function(i){if(i===kc)return i;var o=n.get(e.name);return o?i.remove(new Vt(e.name,o)):i});return new t(r,this.indexSet_)},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N7(t,e){return Jl(t.name,e.name)}function TI(t,e){return Jl(t,e)}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yf,yt=function(){function t(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&xF(this.priorityNode_),this.children_.isEmpty()&&Oe(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return Yf||(Yf=new t(new pa(TI),null,Gm.Default))},enumerable:!0,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||Yf},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(e){if(e===".priority")return this.getPriority();var n=this.children_.get(e);return n===null?Yf:n},t.prototype.getChild=function(e){var n=e.getFront();return n===null?this:this.getImmediateChild(n).getChild(e.popFront())},t.prototype.hasChild=function(e){return this.children_.get(e)!==null},t.prototype.updateImmediateChild=function(e,n){if(Oe(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);var r=new Vt(e,n),i=void 0,o=void 0;n.isEmpty()?(i=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),o=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?Yf:this.priorityNode_;return new t(i,a,o)},t.prototype.updateChild=function(e,n){var r=e.getFront();if(r===null)return n;Oe(e.getFront()!==".priority"||e.getLength()===1,".priority must be the last token in a path");var i=this.getImmediateChild(r).updateChild(e.popFront(),n);return this.updateImmediateChild(r,i)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(nn,function(f,v){n[f]=v.val(e),r++,o&&t.INTEGER_REGEXP_.test(f)?i=Math.max(i,Number(f)):o=!1}),!e&&o&&i<2*r){var a=[];for(var c in n)a[c]=n[c];return a}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(this.lazyHash_===null){var e="";this.getPriority().isEmpty()||(e+="priority:"+IF(this.getPriority().val())+":"),this.forEachChild(nn,function(n,r){var i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":uF(e)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(e,n,r){var i=this.resolveIndex_(r);if(i){var o=i.getPredecessorKey(new Vt(e,n));return o?o.name:null}else return this.children_.getPredecessorKey(e)},t.prototype.getFirstChildName=function(e){var n=this.resolveIndex_(e);if(n){var r=n.minKey();return r&&r.name}else return this.children_.minKey()},t.prototype.getFirstChild=function(e){var n=this.getFirstChildName(e);return n?new Vt(n,this.children_.get(n)):null},t.prototype.getLastChildName=function(e){var n=this.resolveIndex_(e);if(n){var r=n.maxKey();return r&&r.name}else return this.children_.maxKey()},t.prototype.getLastChild=function(e){var n=this.getLastChildName(e);return n?new Vt(n,this.children_.get(n)):null},t.prototype.forEachChild=function(e,n){var r=this.resolveIndex_(e);return r?r.inorderTraversal(function(i){return n(i.name,i.node)}):this.children_.inorderTraversal(n)},t.prototype.getIterator=function(e){return this.getIteratorFrom(e.minPost(),e)},t.prototype.getIteratorFrom=function(e,n){var r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,function(a){return a});for(var i=this.children_.getIteratorFrom(e.name,Vt.Wrap),o=i.peek();o!=null&&n.compare(o,e)<0;)i.getNext(),o=i.peek();return i},t.prototype.getReverseIterator=function(e){return this.getReverseIteratorFrom(e.maxPost(),e)},t.prototype.getReverseIteratorFrom=function(e,n){var r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,function(a){return a});for(var i=this.children_.getReverseIteratorFrom(e.name,Vt.Wrap),o=i.peek();o!=null&&n.compare(o,e)>0;)i.getNext(),o=i.peek();return i},t.prototype.compareTo=function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===jp?-1:0},t.prototype.withIndex=function(e){if(e===bu||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(e){return e===bu||this.indexMap_.hasIndex(e)},t.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){for(var r=this.getIterator(nn),i=n.getIterator(nn),o=r.getNext(),a=i.getNext();o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=r.getNext(),a=i.getNext()}return o===null&&a===null}else return!1;else return!1},t.prototype.resolveIndex_=function(e){return e===bu?null:this.indexMap_.get(e.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),A7=function(t){St(e,t);function e(){return t.call(this,new pa(TI),yt.EMPTY_NODE,Gm.Default)||this}return e.prototype.compareTo=function(n){return n===this?0:1},e.prototype.equals=function(n){return n===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(n){return yt.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(yt),jp=new A7;Object.defineProperties(Vt,{MIN:{value:new Vt(Ml,yt.EMPTY_NODE)},MAX:{value:new Vt(Au,jp)}});TF.__EMPTY_NODE=yt.EMPTY_NODE;Fh.__childrenNodeConstructor=yt;E7(jp);S7(jp);/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var k7=!0;function Fn(t,e){if(e===void 0&&(e=null),t===null)return yt.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),Oe(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){var n=t;return new Fh(n,Fn(e))}if(!(t instanceof Array)&&k7){var r=[],i=!1,o=t;if(vr(o,function(v,y){if(v.substring(0,1)!=="."){var b=Fn(y);b.isEmpty()||(i=i||!b.getPriority().isEmpty(),r.push(new Vt(v,b)))}}),r.length===0)return yt.EMPTY_NODE;var a=Wm(r,N7,function(v){return v.name},TI);if(i){var c=Wm(r,nn.getCompare());return new yt(a,Fn(e),new Gm({".priority":c},{".priority":nn}))}else return new yt(a,Fn(e),Gm.Default)}else{var f=yt.EMPTY_NODE;return vr(t,function(v,y){if(Ao(t,v)&&v.substring(0,1)!=="."){var b=Fn(y);(b.isLeafNode()||!b.isEmpty())&&(f=f.updateImmediateChild(v,b))}}),f.updatePriority(Fn(e))}}b7(Fn);/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var R7=function(t){St(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.compare=function(n,r){var i=n.node.compareTo(r.node);return i===0?Jl(n.name,r.name):i},e.prototype.isDefinedOn=function(n){return!0},e.prototype.indexedValueChanged=function(n,r){return!n.equals(r)},e.prototype.minPost=function(){return Vt.MIN},e.prototype.maxPost=function(){return Vt.MAX},e.prototype.makePost=function(n,r){var i=Fn(n);return new Vt(r,i)},e.prototype.toString=function(){return".value"},e}(o_),p1=new R7;/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var v1=function(t){St(e,t);function e(n){var r=t.call(this)||this;return r.indexPath_=n,Oe(!n.isEmpty()&&n.getFront()!==".priority","Can't create PathIndex with empty path or .priority key"),r}return e.prototype.extractChild=function(n){return n.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(n){return!n.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(n,r){var i=this.extractChild(n.node),o=this.extractChild(r.node),a=i.compareTo(o);return a===0?Jl(n.name,r.name):a},e.prototype.makePost=function(n,r){var i=Fn(n),o=yt.EMPTY_NODE.updateChild(this.indexPath_,i);return new Vt(r,o)},e.prototype.maxPost=function(){var n=yt.EMPTY_NODE.updateChild(this.indexPath_,jp);return new Vt(Au,n)},e.prototype.toString=function(){return this.indexPath_.slice().join("/")},e}(o_);/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xh=function(){function t(e,n,r){this.node_=e,this.ref_=n,this.index_=r}return t.prototype.val=function(){return dt("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return dt("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return dt("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return dt("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){dt("DataSnapshot.child",0,1,arguments.length),e=String(e),Zd("DataSnapshot.child",1,e,!1);var n=new $e(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,nn)},t.prototype.hasChild=function(e){dt("DataSnapshot.hasChild",1,1,arguments.length),Zd("DataSnapshot.hasChild",1,e,!1);var n=new $e(e);return!this.node_.getChild(n).isEmpty()},t.prototype.getPriority=function(){return dt("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if(dt("DataSnapshot.forEach",1,1,arguments.length),Tr("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,function(i,o){return e(new t(o,n.ref_.child(i),nn))})},t.prototype.hasChildren=function(){return dt("DataSnapshot.hasChildren",0,0,arguments.length),this.node_.isLeafNode()?!1:!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!0,configurable:!0}),t.prototype.numChildren=function(){return dt("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return dt("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var AF=function(){function t(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}return t.prototype.getPath=function(){var e=this.snapshot.getRef();return this.eventType==="value"?e.path:e.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+xr(this.snapshot.exportVal())},t}(),kF=function(){function t(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pR=function(){function t(e,n,r){this.callback_=e,this.cancelCallback_=n,this.context_=r}return t.prototype.respondsTo=function(e){return e==="value"},t.prototype.createEvent=function(e,n){var r=n.getQueryParams().getIndex();return new AF("value",this,new Xh(e.snapshotNode,n.getRef(),r))},t.prototype.getEventRunner=function(e){var n=this.context_;if(e.getEventType()==="cancel"){Oe(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var r=this.cancelCallback_;return function(){r.call(n,e.error)}}else{var i=this.callback_;return function(){i.call(n,e.snapshot)}}},t.prototype.createCancelEvent=function(e,n){return this.cancelCallback_?new kF(this,e,n):null},t.prototype.matches=function(e){return e instanceof t?!e.callback_||!this.callback_?!0:e.callback_===this.callback_&&e.context_===this.context_:!1},t.prototype.hasAnyCallback=function(){return this.callback_!==null},t}(),vR=function(){function t(e,n,r){this.callbacks_=e,this.cancelCallback_=n,this.context_=r}return t.prototype.respondsTo=function(e){var n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,Ao(this.callbacks_,n)},t.prototype.createCancelEvent=function(e,n){return this.cancelCallback_?new kF(this,e,n):null},t.prototype.createEvent=function(e,n){Oe(e.childName!=null,"Child events should have a childName.");var r=n.getRef().child(e.childName),i=n.getQueryParams().getIndex();return new AF(e.type,this,new Xh(e.snapshotNode,r,i),e.prevName)},t.prototype.getEventRunner=function(e){var n=this.context_;if(e.getEventType()==="cancel"){Oe(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var r=this.cancelCallback_;return function(){r.call(n,e.error)}}else{var i=this.callbacks_[e.eventType];return function(){i.call(n,e.snapshot,e.prevName)}}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var r=Object.keys(e.callbacks_),i=Object.keys(this.callbacks_),o=r.length,a=i.length;if(o===a)if(o===1){var c=r[0],f=i[0];return f===c&&(!e.callbacks_[c]||!this.callbacks_[f]||e.callbacks_[c]===this.callbacks_[f])}else return i.every(function(v){return e.callbacks_[v]===n.callbacks_[v]})}}return!1},t.prototype.hasAnyCallback=function(){return this.callbacks_!==null},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $E,II=function(){function t(e,n,r,i){this.repo=e,this.path=n,this.queryParams_=r,this.orderByCalled_=i}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Oe($E,"Reference.ts has not been loaded"),$E},set:function(e){$E=e},enumerable:!0,configurable:!0}),t.validateQueryEndpoints_=function(e){var n=null,r=null;if(e.hasStart()&&(n=e.getIndexStartValue()),e.hasEnd()&&(r=e.getIndexEndValue()),e.getIndex()===bu){var i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",o="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(e.hasStart()){var a=e.getIndexStartName();if(a!==Ml)throw new Error(i);if(typeof n!="string")throw new Error(o)}if(e.hasEnd()){var c=e.getIndexEndName();if(c!==Au)throw new Error(i);if(typeof r!="string")throw new Error(o)}}else if(e.getIndex()===nn){if(n!=null&&!Jd(n)||r!=null&&!Jd(r))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Oe(e.getIndex()instanceof v1||e.getIndex()===p1,"unknown index type."),n!=null&&typeof n=="object"||r!=null&&typeof r=="object")throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},t.validateLimit_=function(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(e){if(this.orderByCalled_===!0)throw new Error(e+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return dt("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){dt("Query.on",2,4,arguments.length),qE("Query.on",1,e,!1),Tr("Query.on",2,n,!1);var o=t.getCancelAndContextArgs_("Query.on",r,i);if(e==="value")this.onValueEvent(n,o.cancel,o.context);else{var a={};a[e]=n,this.onChildEvent(a,o.cancel,o.context)}return n},t.prototype.onValueEvent=function(e,n,r){var i=new pR(e,n||null,r||null);this.repo.addEventCallbackForQuery(this,i)},t.prototype.onChildEvent=function(e,n,r){var i=new vR(e,n,r);this.repo.addEventCallbackForQuery(this,i)},t.prototype.off=function(e,n,r){dt("Query.off",0,3,arguments.length),qE("Query.off",1,e,!0),Tr("Query.off",2,n,!0),lR("Query.off",3,r,!0);var i=null,o=null;if(e==="value"){var a=n||null;i=new pR(a,null,r||null)}else e&&(n&&(o={},o[e]=n),i=new vR(o,null,r||null));this.repo.removeEventCallbackForQuery(this,i)},t.prototype.once=function(e,n,r,i){var o=this;dt("Query.once",1,4,arguments.length),qE("Query.once",1,e,!1),Tr("Query.once",2,n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),c=!0,f=new Yo;f.promise.catch(function(){});var v=function(y){c&&(c=!1,o.off(e,v),n&&n.bind(a.context)(y),f.resolve(y))};return this.on(e,v,function(y){o.off(e,v),a.cancel&&a.cancel.bind(a.context)(y),f.reject(y)}),f.promise},t.prototype.limitToFirst=function(e){if(dt("Query.limitToFirst",1,1,arguments.length),typeof e!="number"||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(dt("Query.limitToLast",1,1,arguments.length),typeof e!="number"||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(dt("Query.orderByChild",1,1,arguments.length),e==="$key")throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if(e==="$priority")throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if(e==="$value")throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');Zd("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new $e(e);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new v1(n),i=this.queryParams_.orderBy(r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){dt("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy(bu);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){dt("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy(nn);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){dt("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy(p1);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){e===void 0&&(e=null),dt("Query.startAt",0,2,arguments.length),Eu("Query.startAt",1,e,this.path,!0),WE("Query.startAt",2,n,!0);var r=this.queryParams_.startAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return e===void 0&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){e===void 0&&(e=null),dt("Query.endAt",0,2,arguments.length),Eu("Query.endAt",1,e,this.path,!0),WE("Query.endAt",2,n,!0);var r=this.queryParams_.endAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(e,n){if(dt("Query.equalTo",1,2,arguments.length),Eu("Query.equalTo",1,e,this.path,!1),WE("Query.equalTo",2,n,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(e,n).endAt(e,n)},t.prototype.toString=function(){return dt("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},t.prototype.toJSON=function(){return dt("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},t.prototype.queryIdentifier=function(){var e=this.queryObject(),n=SI(e);return n==="{}"?"default":n},t.prototype.isEqual=function(e){if(dt("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===e.repo,i=this.path.equals(e.path),o=this.queryIdentifier()===e.queryIdentifier();return r&&i&&o},t.getCancelAndContextArgs_=function(e,n,r){var i={cancel:null,context:null};if(n&&r)i.cancel=n,Tr(e,3,i.cancel,!0),i.context=r,lR(e,4,i.context,!0);else if(n)if(typeof n=="object"&&n!==null)i.context=n;else if(typeof n=="function")i.cancel=n;else throw new Error(Ms(e,3,!0)+" must either be a cancel callback or a context object.");return i},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var O7=function(){function t(e){this.node_=e}return t.prototype.getImmediateChild=function(e){var n=this.node_.getImmediateChild(e);return new t(n)},t.prototype.node=function(){return this.node_},t}(),P7=function(){function t(e,n){this.syncTree_=e,this.path_=n}return t.prototype.getImmediateChild=function(e){var n=this.path_.child(e);return new t(this.syncTree_,n)},t.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},t}(),D7=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},gR=function(t,e,n){if(!t||typeof t!="object")return t;if(Oe(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return L7(t[".sv"],e,n);if(typeof t[".sv"]=="object")return M7(t[".sv"],e);Oe(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},L7=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Oe(!1,"Unexpected server value: "+t)}},M7=function(t,e,n){t.hasOwnProperty("increment")||Oe(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;typeof r!="number"&&Oe(!1,"Unexpected increment value: "+r);var i=e.node();if(Oe(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var o=i,a=o.getValue();return typeof a!="number"?r:a+r},mR=function(t,e,n,r){return CI(e,new P7(n,t),r)},xI=function(t,e,n){return CI(t,new O7(e),n)};function CI(t,e,n){var r=t.getPriority().val(),i=gR(r,e.getImmediateChild(".priority"),n),o;if(t.isLeafNode()){var a=t,c=gR(a.getValue(),e,n);return c!==a.getValue()||i!==a.getPriority().val()?new Fh(c,Fn(i)):t}else{var f=t;return o=f,i!==f.getPriority().val()&&(o=o.updatePriority(new Fh(i))),f.forEachChild(nn,function(v,y){var b=CI(y,e.getImmediateChild(v),n);b!==y&&(o=o.updateImmediateChild(v,b))}),o}}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var HE=function(){function t(){this.value=null,this.children=new Map}return t.prototype.find=function(e){if(this.value!=null)return this.value.getChild(e);if(!e.isEmpty()&&this.children.size>0){var n=e.getFront();if(e=e.popFront(),this.children.has(n)){var r=this.children.get(n);return r.find(e)}else return null}else return null},t.prototype.remember=function(e,n){if(e.isEmpty())this.value=n,this.children.clear();else if(this.value!==null)this.value=this.value.updateChild(e,n);else{var r=e.getFront();this.children.has(r)||this.children.set(r,new t);var i=this.children.get(r);e=e.popFront(),i.remember(e,n)}},t.prototype.forget=function(e){if(e.isEmpty())return this.value=null,this.children.clear(),!0;if(this.value!==null){if(this.value.isLeafNode())return!1;var n=this.value;this.value=null;var r=this;return n.forEachChild(nn,function(a,c){r.remember(new $e(a),c)}),this.forget(e)}else if(this.children.size>0){var i=e.getFront();if(e=e.popFront(),this.children.has(i)){var o=this.children.get(i).forget(e);o&&this.children.delete(i)}return this.children.size===0}else return!0},t.prototype.forEachTree=function(e,n){this.value!==null?n(e,this.value):this.forEachChild(function(r,i){var o=new $e(e.toString()+"/"+r);i.forEachTree(o,n)})},t.prototype.forEachChild=function(e){this.children.forEach(function(n,r){e(r,n)})},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zo;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Zo||(Zo={}));var ea=function(){function t(e,n,r,i){this.fromUser=e,this.fromServer=n,this.queryId=r,this.tagged=i,Oe(!i||n,"Tagged queries must be from server.")}return t.User=new t(!0,!1,null,!1),t.Server=new t(!1,!0,null,!1),t.forServerTaggedQuery=function(e){return new t(!1,!0,e,!0)},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var F7=function(){function t(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Zo.ACK_USER_WRITE,this.source=ea.User}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(this.affectedTree.value!=null)return Oe(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new $e(e));return new t($e.Empty,n,this.revert)}else return Oe(this.path.getFront()===e,"operationForChild called for unrelated child."),new t(this.path.popFront(),this.affectedTree,this.revert)},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var KE,j7=function(){return KE||(KE=new pa(n7)),KE},Ki=function(){function t(e,n){n===void 0&&(n=j7()),this.value=e,this.children=n}return t.fromObject=function(e){var n=t.Empty;return vr(e,function(r,i){n=n.set(new $e(r),i)}),n},t.prototype.isEmpty=function(){return this.value===null&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(e,n){if(this.value!=null&&n(this.value))return{path:$e.Empty,value:this.value};if(e.isEmpty())return null;var r=e.getFront(),i=this.children.get(r);if(i!==null){var o=i.findRootMostMatchingPathAndValue(e.popFront(),n);if(o!=null){var a=new $e(r).child(o.path);return{path:a,value:o.value}}else return null}else return null},t.prototype.findRootMostValueAndPath=function(e){return this.findRootMostMatchingPathAndValue(e,function(){return!0})},t.prototype.subtree=function(e){if(e.isEmpty())return this;var n=e.getFront(),r=this.children.get(n);return r!==null?r.subtree(e.popFront()):t.Empty},t.prototype.set=function(e,n){if(e.isEmpty())return new t(n,this.children);var r=e.getFront(),i=this.children.get(r)||t.Empty,o=i.set(e.popFront(),n),a=this.children.insert(r,o);return new t(this.value,a)},t.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?t.Empty:new t(null,this.children);var n=e.getFront(),r=this.children.get(n);if(r){var i=r.remove(e.popFront()),o=void 0;return i.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,i),this.value===null&&o.isEmpty()?t.Empty:new t(this.value,o)}else return this},t.prototype.get=function(e){if(e.isEmpty())return this.value;var n=e.getFront(),r=this.children.get(n);return r?r.get(e.popFront()):null},t.prototype.setTree=function(e,n){if(e.isEmpty())return n;var r=e.getFront(),i=this.children.get(r)||t.Empty,o=i.setTree(e.popFront(),n),a=void 0;return o.isEmpty()?a=this.children.remove(r):a=this.children.insert(r,o),new t(this.value,a)},t.prototype.fold=function(e){return this.fold_($e.Empty,e)},t.prototype.fold_=function(e,n){var r={};return this.children.inorderTraversal(function(i,o){r[i]=o.fold_(e.child(i),n)}),n(e,this.value,r)},t.prototype.findOnPath=function(e,n){return this.findOnPath_(e,$e.Empty,n)},t.prototype.findOnPath_=function(e,n,r){var i=this.value?r(n,this.value):!1;if(i)return i;if(e.isEmpty())return null;var o=e.getFront(),a=this.children.get(o);return a?a.findOnPath_(e.popFront(),n.child(o),r):null},t.prototype.foreachOnPath=function(e,n){return this.foreachOnPath_(e,$e.Empty,n)},t.prototype.foreachOnPath_=function(e,n,r){if(e.isEmpty())return this;this.value&&r(n,this.value);var i=e.getFront(),o=this.children.get(i);return o?o.foreachOnPath_(e.popFront(),n.child(i),r):t.Empty},t.prototype.foreach=function(e){this.foreach_($e.Empty,e)},t.prototype.foreach_=function(e,n){this.children.inorderTraversal(function(r,i){i.foreach_(e.child(r),n)}),this.value&&n(e,this.value)},t.prototype.foreachChild=function(e){this.children.inorderTraversal(function(n,r){r.value&&e(n,r.value)})},t.Empty=new t(null),t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yR=function(){function t(e,n){this.source=e,this.path=n,this.type=Zo.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,$e.Empty):new t(this.source,this.path.popFront())},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zg=function(){function t(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Zo.OVERWRITE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,$e.Empty,this.snap.getImmediateChild(e)):new t(this.source,this.path.popFront(),this.snap)},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var YE=function(){function t(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Zo.MERGE}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){var n=this.children.subtree(new $e(e));return n.isEmpty()?null:n.value?new Zg(this.source,$e.Empty,n.value):new t(this.source,$e.Empty,n)}else return Oe(this.path.getFront()===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,this.path.popFront(),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var va=function(){function t(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(e){if(e.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var n=e.getFront();return this.isCompleteForChild(n)},t.prototype.isCompleteForChild=function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)},t.prototype.getNode=function(){return this.node_},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var RF=function(){function t(e,n){this.eventCache_=e,this.serverCache_=n}return t.prototype.updateEventSnap=function(e,n,r){return new t(new va(e,n,r),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,r){return new t(this.eventCache_,new va(e,n,r))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t.Empty=new t(new va(yt.EMPTY_NODE,!1,!1),new va(yt.EMPTY_NODE,!1,!1)),t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kt=function(){function t(e,n,r,i,o){this.type=e,this.snapshotNode=n,this.childName=r,this.oldSnap=i,this.prevName=o}return t.valueChange=function(e){return new t(t.VALUE,e)},t.childAddedChange=function(e,n){return new t(t.CHILD_ADDED,n,e)},t.childRemovedChange=function(e,n){return new t(t.CHILD_REMOVED,n,e)},t.childChangedChange=function(e,n,r){return new t(t.CHILD_CHANGED,n,e,r)},t.childMovedChange=function(e,n){return new t(t.CHILD_MOVED,n,e)},t.CHILD_ADDED="child_added",t.CHILD_REMOVED="child_removed",t.CHILD_CHANGED="child_changed",t.CHILD_MOVED="child_moved",t.VALUE="value",t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var NI=function(){function t(e){this.index_=e}return t.prototype.updateChild=function(e,n,r,i,o,a){Oe(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var c=e.getImmediateChild(n);return c.getChild(i).equals(r.getChild(i))&&c.isEmpty()===r.isEmpty()||(a!=null&&(r.isEmpty()?e.hasChild(n)?a.trackChildChange(kt.childRemovedChange(n,c)):Oe(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):c.isEmpty()?a.trackChildChange(kt.childAddedChange(n,r)):a.trackChildChange(kt.childChangedChange(n,r,c))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)},t.prototype.updateFullNode=function(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(nn,function(i,o){n.hasChild(i)||r.trackChildChange(kt.childRemovedChange(i,o))}),n.isLeafNode()||n.forEachChild(nn,function(i,o){if(e.hasChild(i)){var a=e.getImmediateChild(i);a.equals(o)||r.trackChildChange(kt.childChangedChange(i,o,a))}else r.trackChildChange(kt.childAddedChange(i,o))})),n.withIndex(this.index_)},t.prototype.updatePriority=function(e,n){return e.isEmpty()?yt.EMPTY_NODE:e.updatePriority(n)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var U7=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(e){var n=e.type,r=e.childName;Oe(n===kt.CHILD_ADDED||n===kt.CHILD_CHANGED||n===kt.CHILD_REMOVED,"Only child changes supported for tracking"),Oe(r!==".priority","Only non-priority child changes can be tracked.");var i=this.changeMap.get(r);if(i){var o=i.type;if(n===kt.CHILD_ADDED&&o===kt.CHILD_REMOVED)this.changeMap.set(r,kt.childChangedChange(r,e.snapshotNode,i.snapshotNode));else if(n===kt.CHILD_REMOVED&&o===kt.CHILD_ADDED)this.changeMap.delete(r);else if(n===kt.CHILD_REMOVED&&o===kt.CHILD_CHANGED)this.changeMap.set(r,kt.childRemovedChange(r,i.oldSnap));else if(n===kt.CHILD_CHANGED&&o===kt.CHILD_ADDED)this.changeMap.set(r,kt.childAddedChange(r,e.snapshotNode));else if(n===kt.CHILD_CHANGED&&o===kt.CHILD_CHANGED)this.changeMap.set(r,kt.childChangedChange(r,e.snapshotNode,i.oldSnap));else throw Pp("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var V7=function(){function t(){}return t.prototype.getCompleteChild=function(e){return null},t.prototype.getChildAfterChild=function(e,n,r){return null},t}(),_R=new V7,XE=function(){function t(e,n,r){r===void 0&&(r=null),this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}return t.prototype.getCompleteChild=function(e){var n=this.viewCache_.getEventCache();if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);var r=this.optCompleteServerCache_!=null?new va(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(e,r)},t.prototype.getChildAfterChild=function(e,n,r){var i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),o=this.writes_.calcIndexedSlice(i,n,1,r,e);return o.length===0?null:o[0]},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var B7=function(){function t(e,n){this.viewCache=e,this.changes=n}return t}(),z7=function(){function t(e){this.filter_=e}return t.prototype.assertIndexed=function(e){Oe(e.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),Oe(e.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,r,i){var o=new U7,a,c;if(n.type===Zo.OVERWRITE){var f=n;f.source.fromUser?a=this.applyUserOverwrite_(e,f.path,f.snap,r,i,o):(Oe(f.source.fromServer,"Unknown source."),c=f.source.tagged||e.getServerCache().isFiltered()&&!f.path.isEmpty(),a=this.applyServerOverwrite_(e,f.path,f.snap,r,i,c,o))}else if(n.type===Zo.MERGE){var v=n;v.source.fromUser?a=this.applyUserMerge_(e,v.path,v.children,r,i,o):(Oe(v.source.fromServer,"Unknown source."),c=v.source.tagged||e.getServerCache().isFiltered(),a=this.applyServerMerge_(e,v.path,v.children,r,i,c,o))}else if(n.type===Zo.ACK_USER_WRITE){var y=n;y.revert?a=this.revertUserWrite_(e,y.path,r,i,o):a=this.ackUserWrite_(e,y.path,y.affectedTree,r,i,o)}else if(n.type===Zo.LISTEN_COMPLETE)a=this.listenComplete_(e,n.path,r,o);else throw Pp("Unknown operation type: "+n.type);var b=o.getChanges();return t.maybeAddValueEvent_(e,a,b),new B7(a,b)},t.maybeAddValueEvent_=function(e,n,r){var i=n.getEventCache();if(i.isFullyInitialized()){var o=i.getNode().isLeafNode()||i.getNode().isEmpty(),a=e.getCompleteEventSnap();(r.length>0||!e.getEventCache().isFullyInitialized()||o&&!i.getNode().equals(a)||!i.getNode().getPriority().equals(a.getPriority()))&&r.push(kt.valueChange(n.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(e,n,r,i,o){var a=e.getEventCache();if(r.shadowingWrite(n)!=null)return e;var c=void 0,f=void 0;if(n.isEmpty())if(Oe(e.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),e.getServerCache().isFiltered()){var v=e.getCompleteServerSnap(),y=v instanceof yt?v:yt.EMPTY_NODE,b=r.calcCompleteEventChildren(y);c=this.filter_.updateFullNode(e.getEventCache().getNode(),b,o)}else{var E=r.calcCompleteEventCache(e.getCompleteServerSnap());c=this.filter_.updateFullNode(e.getEventCache().getNode(),E,o)}else{var I=n.getFront();if(I===".priority"){Oe(n.getLength()===1,"Can't have a priority with additional path components");var L=a.getNode();f=e.getServerCache().getNode();var D=r.calcEventCacheAfterServerOverwrite(n,L,f);D!=null?c=this.filter_.updatePriority(L,D):c=a.getNode()}else{var te=n.popFront(),z=void 0;if(a.isCompleteForChild(I)){f=e.getServerCache().getNode();var Y=r.calcEventCacheAfterServerOverwrite(n,a.getNode(),f);Y!=null?z=a.getNode().getImmediateChild(I).updateChild(te,Y):z=a.getNode().getImmediateChild(I)}else z=r.calcCompleteChild(I,e.getServerCache());z!=null?c=this.filter_.updateChild(a.getNode(),I,z,te,i,o):c=a.getNode()}}return e.updateEventSnap(c,a.isFullyInitialized()||n.isEmpty(),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(e,n,r,i,o,a,c){var f=e.getServerCache(),v,y=a?this.filter_:this.filter_.getIndexedFilter();if(n.isEmpty())v=y.updateFullNode(f.getNode(),r,null);else if(y.filtersNodes()&&!f.isFiltered()){var b=f.getNode().updateChild(n,r);v=y.updateFullNode(f.getNode(),b,null)}else{var E=n.getFront();if(!f.isCompleteForPath(n)&&n.getLength()>1)return e;var I=n.popFront(),L=f.getNode().getImmediateChild(E),D=L.updateChild(I,r);E===".priority"?v=y.updatePriority(f.getNode(),D):v=y.updateChild(f.getNode(),E,D,I,_R,null)}var te=e.updateServerSnap(v,f.isFullyInitialized()||n.isEmpty(),y.filtersNodes()),z=new XE(i,te,o);return this.generateEventCacheAfterServerEvent_(te,n,i,z,c)},t.prototype.applyUserOverwrite_=function(e,n,r,i,o,a){var c=e.getEventCache(),f,v,y=new XE(i,e,o);if(n.isEmpty())v=this.filter_.updateFullNode(e.getEventCache().getNode(),r,a),f=e.updateEventSnap(v,!0,this.filter_.filtersNodes());else{var b=n.getFront();if(b===".priority")v=this.filter_.updatePriority(e.getEventCache().getNode(),r),f=e.updateEventSnap(v,c.isFullyInitialized(),c.isFiltered());else{var E=n.popFront(),I=c.getNode().getImmediateChild(b),L=void 0;if(E.isEmpty())L=r;else{var D=y.getCompleteChild(b);D!=null?E.getBack()===".priority"&&D.getChild(E.parent()).isEmpty()?L=D:L=D.updateChild(E,r):L=yt.EMPTY_NODE}if(I.equals(L))f=e;else{var te=this.filter_.updateChild(c.getNode(),b,L,E,y,a);f=e.updateEventSnap(te,c.isFullyInitialized(),this.filter_.filtersNodes())}}}return f},t.cacheHasChild_=function(e,n){return e.getEventCache().isCompleteForChild(n)},t.prototype.applyUserMerge_=function(e,n,r,i,o,a){var c=this,f=e;return r.foreach(function(v,y){var b=n.child(v);t.cacheHasChild_(e,b.getFront())&&(f=c.applyUserOverwrite_(f,b,y,i,o,a))}),r.foreach(function(v,y){var b=n.child(v);t.cacheHasChild_(e,b.getFront())||(f=c.applyUserOverwrite_(f,b,y,i,o,a))}),f},t.prototype.applyMerge_=function(e,n){return n.foreach(function(r,i){e=e.updateChild(r,i)}),e},t.prototype.applyServerMerge_=function(e,n,r,i,o,a,c){var f=this;if(e.getServerCache().getNode().isEmpty()&&!e.getServerCache().isFullyInitialized())return e;var v=e,y;n.isEmpty()?y=r:y=Ki.Empty.setTree(n,r);var b=e.getServerCache().getNode();return y.children.inorderTraversal(function(E,I){if(b.hasChild(E)){var L=e.getServerCache().getNode().getImmediateChild(E),D=f.applyMerge_(L,I);v=f.applyServerOverwrite_(v,new $e(E),D,i,o,a,c)}}),y.children.inorderTraversal(function(E,I){var L=!e.getServerCache().isCompleteForChild(E)&&I.value==null;if(!b.hasChild(E)&&!L){var D=e.getServerCache().getNode().getImmediateChild(E),te=f.applyMerge_(D,I);v=f.applyServerOverwrite_(v,new $e(E),te,i,o,a,c)}}),v},t.prototype.ackUserWrite_=function(e,n,r,i,o,a){if(i.shadowingWrite(n)!=null)return e;var c=e.getServerCache().isFiltered(),f=e.getServerCache();if(r.value!=null){if(n.isEmpty()&&f.isFullyInitialized()||f.isCompleteForPath(n))return this.applyServerOverwrite_(e,n,f.getNode().getChild(n),i,o,c,a);if(n.isEmpty()){var v=Ki.Empty;return f.getNode().forEachChild(bu,function(b,E){v=v.set(new $e(b),E)}),this.applyServerMerge_(e,n,v,i,o,c,a)}else return e}else{var y=Ki.Empty;return r.foreach(function(b,E){var I=n.child(b);f.isCompleteForPath(I)&&(y=y.set(b,f.getNode().getChild(I)))}),this.applyServerMerge_(e,n,y,i,o,c,a)}},t.prototype.listenComplete_=function(e,n,r,i){var o=e.getServerCache(),a=e.updateServerSnap(o.getNode(),o.isFullyInitialized()||n.isEmpty(),o.isFiltered());return this.generateEventCacheAfterServerEvent_(a,n,r,_R,i)},t.prototype.revertUserWrite_=function(e,n,r,i,o){var a;if(r.shadowingWrite(n)!=null)return e;var c=new XE(r,e,i),f=e.getEventCache().getNode(),v=void 0;if(n.isEmpty()||n.getFront()===".priority"){var y=void 0;if(e.getServerCache().isFullyInitialized())y=r.calcCompleteEventCache(e.getCompleteServerSnap());else{var b=e.getServerCache().getNode();Oe(b instanceof yt,"serverChildren would be complete if leaf node"),y=r.calcCompleteEventChildren(b)}y=y,v=this.filter_.updateFullNode(f,y,o)}else{var E=n.getFront(),I=r.calcCompleteChild(E,e.getServerCache());I==null&&e.getServerCache().isCompleteForChild(E)&&(I=f.getImmediateChild(E)),I!=null?v=this.filter_.updateChild(f,E,I,n.popFront(),c,o):e.getEventCache().getNode().hasChild(E)?v=this.filter_.updateChild(f,E,yt.EMPTY_NODE,n.popFront(),c,o):v=f,v.isEmpty()&&e.getServerCache().isFullyInitialized()&&(a=r.calcCompleteEventCache(e.getCompleteServerSnap()),a.isLeafNode()&&(v=this.filter_.updateFullNode(v,a,o)))}return a=e.getServerCache().isFullyInitialized()||r.shadowingWrite($e.Empty)!=null,e.updateEventSnap(v,a,this.filter_.filtersNodes())},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var q7=function(){function t(e){this.query_=e,this.index_=this.query_.getQueryParams().getIndex()}return t.prototype.generateEventsForChanges=function(e,n,r){var i=this,o=[],a=[];return e.forEach(function(c){c.type===kt.CHILD_CHANGED&&i.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&a.push(kt.childMovedChange(c.childName,c.snapshotNode))}),this.generateEventsForType_(o,kt.CHILD_REMOVED,e,r,n),this.generateEventsForType_(o,kt.CHILD_ADDED,e,r,n),this.generateEventsForType_(o,kt.CHILD_MOVED,a,r,n),this.generateEventsForType_(o,kt.CHILD_CHANGED,e,r,n),this.generateEventsForType_(o,kt.VALUE,e,r,n),o},t.prototype.generateEventsForType_=function(e,n,r,i,o){var a=this,c=r.filter(function(f){return f.type===n});c.sort(this.compareChanges_.bind(this)),c.forEach(function(f){var v=a.materializeSingleChange_(f,o);i.forEach(function(y){y.respondsTo(f.type)&&e.push(y.createEvent(v,a.query_))})})},t.prototype.materializeSingleChange_=function(e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,this.index_)),e},t.prototype.compareChanges_=function(e,n){if(e.childName==null||n.childName==null)throw Pp("Should only compare child_ events.");var r=new Vt(e.childName,e.snapshotNode),i=new Vt(n.childName,n.snapshotNode);return this.index_.compare(r,i)},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var W7=function(){function t(e,n){this.query_=e,this.eventRegistrations_=[];var r=this.query_.getQueryParams(),i=new NI(r.getIndex()),o=r.getNodeFilter();this.processor_=new z7(o);var a=n.getServerCache(),c=n.getEventCache(),f=i.updateFullNode(yt.EMPTY_NODE,a.getNode(),null),v=o.updateFullNode(yt.EMPTY_NODE,c.getNode(),null),y=new va(f,a.isFullyInitialized(),i.filtersNodes()),b=new va(v,c.isFullyInitialized(),o.filtersNodes());this.viewCache_=new RF(b,y),this.eventGenerator_=new q7(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteServerCache=function(e){var n=this.viewCache_.getCompleteServerSnap();return n&&(this.query_.getQueryParams().loadsAllData()||!e.isEmpty()&&!n.getImmediateChild(e.getFront()).isEmpty())?n.getChild(e):null},t.prototype.isEmpty=function(){return this.eventRegistrations_.length===0},t.prototype.addEventRegistration=function(e){this.eventRegistrations_.push(e)},t.prototype.removeEventRegistration=function(e,n){var r=[];if(n){Oe(e==null,"A cancel should cancel all event registrations.");var i=this.query_.path;this.eventRegistrations_.forEach(function(f){n=n;var v=f.createCancelEvent(n,i);v&&r.push(v)})}if(e){for(var o=[],a=0;a<this.eventRegistrations_.length;++a){var c=this.eventRegistrations_[a];if(!c.matches(e))o.push(c);else if(e.hasAnyCallback()){o=o.concat(this.eventRegistrations_.slice(a+1));break}}this.eventRegistrations_=o}else this.eventRegistrations_=[];return r},t.prototype.applyOperation=function(e,n,r){e.type===Zo.MERGE&&e.source.queryId!==null&&(Oe(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),Oe(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var i=this.viewCache_,o=this.processor_.applyOperation(i,e,n,r);return this.processor_.assertIndexed(o.viewCache),Oe(o.viewCache.getServerCache().isFullyInitialized()||!i.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=o.viewCache,this.generateEventsForChanges_(o.changes,o.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(e){var n=this.viewCache_.getEventCache(),r=[];if(!n.getNode().isLeafNode()){var i=n.getNode();i.forEachChild(nn,function(o,a){r.push(kt.childAddedChange(o,a))})}return n.isFullyInitialized()&&r.push(kt.valueChange(n.getNode())),this.generateEventsForChanges_(r,n.getNode(),e)},t.prototype.generateEventsForChanges_=function(e,n,r){var i=r?[r]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(e,n,i)},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yg,OF=function(){function t(){this.views=new Map}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Oe(yg,"Reference.ts has not been loaded"),yg},set:function(e){Oe(!yg,"__referenceConstructor has already been defined"),yg=e},enumerable:!0,configurable:!0}),t.prototype.isEmpty=function(){return this.views.size===0},t.prototype.applyOperation=function(e,n,r){var i,o,a=e.source.queryId;if(a!==null){var c=this.views.get(a);return Oe(c!=null,"SyncTree gave us an op for an invalid query."),c.applyOperation(e,n,r)}else{var f=[];try{for(var v=Kn(this.views.values()),y=v.next();!y.done;y=v.next()){var c=y.value;f=f.concat(c.applyOperation(e,n,r))}}catch(b){i={error:b}}finally{try{y&&!y.done&&(o=v.return)&&o.call(v)}finally{if(i)throw i.error}}return f}},t.prototype.addEventRegistration=function(e,n,r,i,o){var a=e.queryIdentifier(),c=this.views.get(a);if(!c){var f=r.calcCompleteEventCache(o?i:null),v=!1;f?v=!0:i instanceof yt?(f=r.calcCompleteEventChildren(i),v=!1):(f=yt.EMPTY_NODE,v=!1);var y=new RF(new va(f,v,!1),new va(i,o,!1));c=new W7(e,y),this.views.set(a,c)}return c.addEventRegistration(n),c.getInitialEvents(n)},t.prototype.removeEventRegistration=function(e,n,r){var i,o,a=e.queryIdentifier(),c=[],f=[],v=this.hasCompleteView();if(a==="default")try{for(var y=Kn(this.views.entries()),b=y.next();!b.done;b=y.next()){var E=Xd(b.value,2),I=E[0],L=E[1];f=f.concat(L.removeEventRegistration(n,r)),L.isEmpty()&&(this.views.delete(I),L.getQuery().getQueryParams().loadsAllData()||c.push(L.getQuery()))}}catch(D){i={error:D}}finally{try{b&&!b.done&&(o=y.return)&&o.call(y)}finally{if(i)throw i.error}}else{var L=this.views.get(a);L&&(f=f.concat(L.removeEventRegistration(n,r)),L.isEmpty()&&(this.views.delete(a),L.getQuery().getQueryParams().loadsAllData()||c.push(L.getQuery())))}return v&&!this.hasCompleteView()&&c.push(new t.__referenceConstructor(e.repo,e.path)),{removed:c,events:f}},t.prototype.getQueryViews=function(){var e,n,r=[];try{for(var i=Kn(this.views.values()),o=i.next();!o.done;o=i.next()){var a=o.value;a.getQuery().getQueryParams().loadsAllData()||r.push(a)}}catch(c){e={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r},t.prototype.getCompleteServerCache=function(e){var n,r,i=null;try{for(var o=Kn(this.views.values()),a=o.next();!a.done;a=o.next()){var c=a.value;i=i||c.getCompleteServerCache(e)}}catch(f){n={error:f}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i},t.prototype.viewForQuery=function(e){var n=e.getQueryParams();if(n.loadsAllData())return this.getCompleteView();var r=e.queryIdentifier();return this.views.get(r)},t.prototype.viewExistsForQuery=function(e){return this.viewForQuery(e)!=null},t.prototype.hasCompleteView=function(){return this.getCompleteView()!=null},t.prototype.getCompleteView=function(){var e,n;try{for(var r=Kn(this.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;if(o.getQuery().getQueryParams().loadsAllData())return o}}catch(a){e={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wR=function(){function t(e){this.writeTree_=e}return t.prototype.addWrite=function(e,n){if(e.isEmpty())return new t(new Ki(n));var r=this.writeTree_.findRootMostValueAndPath(e);if(r!=null){var i=r.path,o=r.value,a=$e.relativePath(i,e);return o=o.updateChild(a,n),new t(this.writeTree_.set(i,o))}else{var c=new Ki(n),f=this.writeTree_.setTree(e,c);return new t(f)}},t.prototype.addWrites=function(e,n){var r=this;return vr(n,function(i,o){r=r.addWrite(e.child(i),o)}),r},t.prototype.removeWrite=function(e){if(e.isEmpty())return t.Empty;var n=this.writeTree_.setTree(e,Ki.Empty);return new t(n)},t.prototype.hasCompleteWrite=function(e){return this.getCompleteNode(e)!=null},t.prototype.getCompleteNode=function(e){var n=this.writeTree_.findRootMostValueAndPath(e);return n!=null?this.writeTree_.get(n.path).getChild($e.relativePath(n.path,e)):null},t.prototype.getCompleteChildren=function(){var e=[],n=this.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(nn,function(r,i){e.push(new Vt(r,i))}):this.writeTree_.children.inorderTraversal(function(r,i){i.value!=null&&e.push(new Vt(r,i.value))}),e},t.prototype.childCompoundWrite=function(e){if(e.isEmpty())return this;var n=this.getCompleteNode(e);return n!=null?new t(new Ki(n)):new t(this.writeTree_.subtree(e))},t.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},t.prototype.apply=function(e){return PF($e.Empty,this.writeTree_,e)},t.Empty=new t(new Ki(null)),t}();function PF(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal(function(i,o){i===".priority"?(Oe(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):n=PF(t.child(i),o,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(t.child(".priority"),r)),n}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var G7=function(){function t(){this.visibleWrites_=wR.Empty,this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(e){return new $7(e,this)},t.prototype.addOverwrite=function(e,n,r,i){Oe(r>this.lastWriteId_,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),this.allWrites_.push({path:e,snap:n,writeId:r,visible:i}),i&&(this.visibleWrites_=this.visibleWrites_.addWrite(e,n)),this.lastWriteId_=r},t.prototype.addMerge=function(e,n,r){Oe(r>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:e,children:n,writeId:r,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(e,n),this.lastWriteId_=r},t.prototype.getWrite=function(e){for(var n=0;n<this.allWrites_.length;n++){var r=this.allWrites_[n];if(r.writeId===e)return r}return null},t.prototype.removeWrite=function(e){var n=this,r=this.allWrites_.findIndex(function(y){return y.writeId===e});Oe(r>=0,"removeWrite called with nonexistent writeId.");var i=this.allWrites_[r];this.allWrites_.splice(r,1);for(var o=i.visible,a=!1,c=this.allWrites_.length-1;o&&c>=0;){var f=this.allWrites_[c];f.visible&&(c>=r&&this.recordContainsPath_(f,i.path)?o=!1:i.path.contains(f.path)&&(a=!0)),c--}if(o){if(a)return this.resetTree_(),!0;if(i.snap)this.visibleWrites_=this.visibleWrites_.removeWrite(i.path);else{var v=i.children;vr(v,function(y){n.visibleWrites_=n.visibleWrites_.removeWrite(i.path.child(y))})}return!0}else return!1},t.prototype.getCompleteWriteData=function(e){return this.visibleWrites_.getCompleteNode(e)},t.prototype.calcCompleteEventCache=function(e,n,r,i){if(!r&&!i){var o=this.visibleWrites_.getCompleteNode(e);if(o!=null)return o;var a=this.visibleWrites_.childCompoundWrite(e);if(a.isEmpty())return n;if(n==null&&!a.hasCompleteWrite($e.Empty))return null;var c=n||yt.EMPTY_NODE;return a.apply(c)}else{var f=this.visibleWrites_.childCompoundWrite(e);if(!i&&f.isEmpty())return n;if(!i&&n==null&&!f.hasCompleteWrite($e.Empty))return null;var v=function(E){return(E.visible||i)&&(!r||!~r.indexOf(E.writeId))&&(E.path.contains(e)||e.contains(E.path))},y=t.layerTree_(this.allWrites_,v,e),c=n||yt.EMPTY_NODE;return y.apply(c)}},t.prototype.calcCompleteEventChildren=function(e,n){var r=yt.EMPTY_NODE,i=this.visibleWrites_.getCompleteNode(e);if(i)return i.isLeafNode()||i.forEachChild(nn,function(c,f){r=r.updateImmediateChild(c,f)}),r;if(n){var o=this.visibleWrites_.childCompoundWrite(e);return n.forEachChild(nn,function(c,f){var v=o.childCompoundWrite(new $e(c)).apply(f);r=r.updateImmediateChild(c,v)}),o.getCompleteChildren().forEach(function(c){r=r.updateImmediateChild(c.name,c.node)}),r}else{var a=this.visibleWrites_.childCompoundWrite(e);return a.getCompleteChildren().forEach(function(c){r=r.updateImmediateChild(c.name,c.node)}),r}},t.prototype.calcEventCacheAfterServerOverwrite=function(e,n,r,i){Oe(r||i,"Either existingEventSnap or existingServerSnap must exist");var o=e.child(n);if(this.visibleWrites_.hasCompleteWrite(o))return null;var a=this.visibleWrites_.childCompoundWrite(o);return a.isEmpty()?i.getChild(n):a.apply(i.getChild(n))},t.prototype.calcCompleteChild=function(e,n,r){var i=e.child(n),o=this.visibleWrites_.getCompleteNode(i);if(o!=null)return o;if(r.isCompleteForChild(n)){var a=this.visibleWrites_.childCompoundWrite(i);return a.apply(r.getNode().getImmediateChild(n))}else return null},t.prototype.shadowingWrite=function(e){return this.visibleWrites_.getCompleteNode(e)},t.prototype.calcIndexedSlice=function(e,n,r,i,o,a){var c,f=this.visibleWrites_.childCompoundWrite(e),v=f.getCompleteNode($e.Empty);if(v!=null)c=v;else if(n!=null)c=f.apply(n);else return[];if(c=c.withIndex(a),!c.isEmpty()&&!c.isLeafNode()){for(var y=[],b=a.getCompare(),E=o?c.getReverseIteratorFrom(r,a):c.getIteratorFrom(r,a),I=E.getNext();I&&y.length<i;)b(I,r)!==0&&y.push(I),I=E.getNext();return y}else return[]},t.prototype.recordContainsPath_=function(e,n){if(e.snap)return e.path.contains(n);for(var r in e.children)if(e.children.hasOwnProperty(r)&&e.path.child(r).contains(n))return!0;return!1},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,$e.Empty),this.allWrites_.length>0?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},t.DefaultFilter_=function(e){return e.visible},t.layerTree_=function(e,n,r){for(var i=wR.Empty,o=0;o<e.length;++o){var a=e[o];if(n(a)){var c=a.path,f=void 0;if(a.snap)r.contains(c)?(f=$e.relativePath(r,c),i=i.addWrite(f,a.snap)):c.contains(r)&&(f=$e.relativePath(c,r),i=i.addWrite($e.Empty,a.snap.getChild(f)));else if(a.children){if(r.contains(c))f=$e.relativePath(r,c),i=i.addWrites(f,a.children);else if(c.contains(r))if(f=$e.relativePath(c,r),f.isEmpty())i=i.addWrites($e.Empty,a.children);else{var v=Qo(a.children,f.getFront());if(v){var y=v.getChild(f.popFront());i=i.addWrite($e.Empty,y)}}}else throw Pp("WriteRecord should have .snap or .children")}}return i},t}(),$7=function(){function t(e,n){this.treePath_=e,this.writeTree_=n}return t.prototype.calcCompleteEventCache=function(e,n,r){return this.writeTree_.calcCompleteEventCache(this.treePath_,e,n,r)},t.prototype.calcCompleteEventChildren=function(e){return this.writeTree_.calcCompleteEventChildren(this.treePath_,e)},t.prototype.calcEventCacheAfterServerOverwrite=function(e,n,r){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,e,n,r)},t.prototype.shadowingWrite=function(e){return this.writeTree_.shadowingWrite(this.treePath_.child(e))},t.prototype.calcIndexedSlice=function(e,n,r,i,o){return this.writeTree_.calcIndexedSlice(this.treePath_,e,n,r,i,o)},t.prototype.calcCompleteChild=function(e,n){return this.writeTree_.calcCompleteChild(this.treePath_,e,n)},t.prototype.child=function(e){return new t(this.treePath_.child(e),this.writeTree_)},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ER=function(){function t(e){this.listenProvider_=e,this.syncPointTree_=Ki.Empty,this.pendingWriteTree_=new G7,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return t.prototype.applyUserOverwrite=function(e,n,r,i){return this.pendingWriteTree_.addOverwrite(e,n,r,i),i?this.applyOperationToSyncPoints_(new Zg(ea.User,e,n)):[]},t.prototype.applyUserMerge=function(e,n,r){this.pendingWriteTree_.addMerge(e,n,r);var i=Ki.fromObject(n);return this.applyOperationToSyncPoints_(new YE(ea.User,e,i))},t.prototype.ackUserWrite=function(e,n){n===void 0&&(n=!1);var r=this.pendingWriteTree_.getWrite(e),i=this.pendingWriteTree_.removeWrite(e);if(i){var o=Ki.Empty;return r.snap!=null?o=o.set($e.Empty,!0):vr(r.children,function(a,c){o=o.set(new $e(a),c)}),this.applyOperationToSyncPoints_(new F7(r.path,o,n))}else return[]},t.prototype.applyServerOverwrite=function(e,n){return this.applyOperationToSyncPoints_(new Zg(ea.Server,e,n))},t.prototype.applyServerMerge=function(e,n){var r=Ki.fromObject(n);return this.applyOperationToSyncPoints_(new YE(ea.Server,e,r))},t.prototype.applyListenComplete=function(e){return this.applyOperationToSyncPoints_(new yR(ea.Server,e))},t.prototype.applyTaggedQueryOverwrite=function(e,n,r){var i=this.queryKeyForTag_(r);if(i!=null){var o=t.parseQueryKey_(i),a=o.path,c=o.queryId,f=$e.relativePath(a,e),v=new Zg(ea.forServerTaggedQuery(c),f,n);return this.applyTaggedOperation_(a,v)}else return[]},t.prototype.applyTaggedQueryMerge=function(e,n,r){var i=this.queryKeyForTag_(r);if(i){var o=t.parseQueryKey_(i),a=o.path,c=o.queryId,f=$e.relativePath(a,e),v=Ki.fromObject(n),y=new YE(ea.forServerTaggedQuery(c),f,v);return this.applyTaggedOperation_(a,y)}else return[]},t.prototype.applyTaggedListenComplete=function(e,n){var r=this.queryKeyForTag_(n);if(r){var i=t.parseQueryKey_(r),o=i.path,a=i.queryId,c=$e.relativePath(o,e),f=new yR(ea.forServerTaggedQuery(a),c);return this.applyTaggedOperation_(o,f)}else return[]},t.prototype.addEventRegistration=function(e,n){var r=e.path,i=null,o=!1;this.syncPointTree_.foreachOnPath(r,function(D,te){var z=$e.relativePath(D,r);i=i||te.getCompleteServerCache(z),o=o||te.hasCompleteView()});var a=this.syncPointTree_.get(r);a?(o=o||a.hasCompleteView(),i=i||a.getCompleteServerCache($e.Empty)):(a=new OF,this.syncPointTree_=this.syncPointTree_.set(r,a));var c;if(i!=null)c=!0;else{c=!1,i=yt.EMPTY_NODE;var f=this.syncPointTree_.subtree(r);f.foreachChild(function(D,te){var z=te.getCompleteServerCache($e.Empty);z&&(i=i.updateImmediateChild(D,z))})}var v=a.viewExistsForQuery(e);if(!v&&!e.getQueryParams().loadsAllData()){var y=t.makeQueryKey_(e);Oe(!this.queryToTagMap.has(y),"View does not exist, but we have a tag");var b=t.getNextQueryTag_();this.queryToTagMap.set(y,b),this.tagToQueryMap.set(b,y)}var E=this.pendingWriteTree_.childWrites(r),I=a.addEventRegistration(e,n,E,i,c);if(!v&&!o){var L=a.viewForQuery(e);I=I.concat(this.setupListener_(e,L))}return I},t.prototype.removeEventRegistration=function(e,n,r){var i=this,o=e.path,a=this.syncPointTree_.get(o),c=[];if(a&&(e.queryIdentifier()==="default"||a.viewExistsForQuery(e))){var f=a.removeEventRegistration(e,n,r);a.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var v=f.removed;c=f.events;var y=v.findIndex(function(K){return K.getQueryParams().loadsAllData()})!==-1,b=this.syncPointTree_.findOnPath(o,function(K,ue){return ue.hasCompleteView()});if(y&&!b){var E=this.syncPointTree_.subtree(o);if(!E.isEmpty())for(var I=this.collectDistinctViewsForSubTree_(E),L=0;L<I.length;++L){var D=I[L],te=D.getQuery(),z=this.createListenerForView_(D);this.listenProvider_.startListening(t.queryForListening_(te),this.tagForQuery_(te),z.hashFn,z.onComplete)}}if(!b&&v.length>0&&!r)if(y){var Y=null;this.listenProvider_.stopListening(t.queryForListening_(e),Y)}else v.forEach(function(K){var ue=i.queryToTagMap.get(t.makeQueryKey_(K));i.listenProvider_.stopListening(t.queryForListening_(K),ue)});this.removeTags_(v)}return c},t.prototype.calcCompleteEventCache=function(e,n){var r=!0,i=this.pendingWriteTree_,o=this.syncPointTree_.findOnPath(e,function(a,c){var f=$e.relativePath(a,e),v=c.getCompleteServerCache(f);if(v)return v});return i.calcCompleteEventCache(e,o,n,r)},t.prototype.collectDistinctViewsForSubTree_=function(e){return e.fold(function(n,r,i){if(r&&r.hasCompleteView()){var o=r.getCompleteView();return[o]}else{var a=[];return r&&(a=r.getQueryViews()),vr(i,function(c,f){a=a.concat(f)}),a}})},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=t.makeQueryKey_(r),o=this.queryToTagMap.get(i);this.queryToTagMap.delete(i),this.tagToQueryMap.delete(o)}}},t.queryForListening_=function(e){return e.getQueryParams().loadsAllData()&&!e.getQueryParams().isDefault()?e.getRef():e},t.prototype.setupListener_=function(e,n){var r=e.path,i=this.tagForQuery_(e),o=this.createListenerForView_(n),a=this.listenProvider_.startListening(t.queryForListening_(e),i,o.hashFn,o.onComplete),c=this.syncPointTree_.subtree(r);if(i)Oe(!c.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var f=c.fold(function(b,E,I){if(!b.isEmpty()&&E&&E.hasCompleteView())return[E.getCompleteView().getQuery()];var L=[];return E&&(L=L.concat(E.getQueryViews().map(function(D){return D.getQuery()}))),vr(I,function(D,te){L=L.concat(te)}),L}),v=0;v<f.length;++v){var y=f[v];this.listenProvider_.stopListening(t.queryForListening_(y),this.tagForQuery_(y))}return a},t.prototype.createListenerForView_=function(e){var n=this,r=e.getQuery(),i=this.tagForQuery_(r);return{hashFn:function(){var o=e.getServerCache()||yt.EMPTY_NODE;return o.hash()},onComplete:function(o){if(o==="ok")return i?n.applyTaggedListenComplete(r.path,i):n.applyListenComplete(r.path);var a=o7(o,r);return n.removeEventRegistration(r,null,a)}}},t.makeQueryKey_=function(e){return e.path.toString()+"$"+e.queryIdentifier()},t.parseQueryKey_=function(e){var n=e.indexOf("$");return Oe(n!==-1&&n<e.length-1,"Bad queryKey."),{queryId:e.substr(n+1),path:new $e(e.substr(0,n))}},t.prototype.queryKeyForTag_=function(e){return this.tagToQueryMap.get(e)},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return this.queryToTagMap.get(n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(e,n){var r=this.syncPointTree_.get(e);Oe(r,"Missing sync point for query tag that we're tracking");var i=this.pendingWriteTree_.childWrites(e);return r.applyOperation(n,i,null)},t.prototype.applyOperationToSyncPoints_=function(e){return this.applyOperationHelper_(e,this.syncPointTree_,null,this.pendingWriteTree_.childWrites($e.Empty))},t.prototype.applyOperationHelper_=function(e,n,r,i){if(e.path.isEmpty())return this.applyOperationDescendantsHelper_(e,n,r,i);var o=n.get($e.Empty);r==null&&o!=null&&(r=o.getCompleteServerCache($e.Empty));var a=[],c=e.path.getFront(),f=e.operationForChild(c),v=n.children.get(c);if(v&&f){var y=r?r.getImmediateChild(c):null,b=i.child(c);a=a.concat(this.applyOperationHelper_(f,v,y,b))}return o&&(a=a.concat(o.applyOperation(e,i,r))),a},t.prototype.applyOperationDescendantsHelper_=function(e,n,r,i){var o=this,a=n.get($e.Empty);r==null&&a!=null&&(r=a.getCompleteServerCache($e.Empty));var c=[];return n.children.inorderTraversal(function(f,v){var y=r?r.getImmediateChild(f):null,b=i.child(f),E=e.operationForChild(f);E&&(c=c.concat(o.applyOperationDescendantsHelper_(E,v,y,b)))}),a&&(c=c.concat(a.applyOperation(e,i,r))),c},t.nextQueryTag_=1,t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var H7=function(){function t(){this.rootNode_=yt.EMPTY_NODE}return t.prototype.getNode=function(e){return this.rootNode_.getChild(e)},t.prototype.updateSnapshot=function(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var K7=function(){function t(e,n){var r=this;this.app_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.get().then(function(i){return r.auth_=i})}return t.prototype.getToken=function(e){return this.auth_?this.auth_.getToken(e).catch(function(n){return n&&n.code==="auth/token-not-initialized"?(Xr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)}):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(e){this.auth_?this.auth_.addAuthTokenListener(e):(setTimeout(function(){return e(null)},0),this.authProvider_.get().then(function(n){return n.addAuthTokenListener(e)}))},t.prototype.removeTokenChangeListener=function(e){this.authProvider_.get().then(function(n){return n.removeAuthTokenListener(e)})},t.prototype.notifyForInvalidToken=function(){var e='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Qr(e)},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Y7=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(e,n){n===void 0&&(n=1),Ao(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n},t.prototype.get=function(){return h$(this.counters_)},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $m=function(){function t(){}return t.getCollection=function(e){var n=e.toString();return this.collections_[n]||(this.collections_[n]=new Y7),this.collections_[n]},t.getOrCreateReporter=function(e,n){var r=e.toString();return this.reporters_[r]||(this.reporters_[r]=n()),this.reporters_[r]},t.collections_={},t.reporters_={},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var DF=function(){function t(e){this.collection_=e,this.last_=null}return t.prototype.get=function(){var e=this.collection_.get(),n=Tn({},e);return this.last_&&vr(this.last_,function(r,i){n[r]=n[r]-i}),this.last_=e,n},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bR=10*1e3,X7=30*1e3,Q7=5*60*1e3,J7=function(){function t(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new DF(e);var r=bR+(X7-bR)*Math.random();Td(this.reportStats_.bind(this),Math.floor(r))}return t.prototype.includeStat=function(e){this.statsToReport_[e]=!0},t.prototype.reportStats_=function(){var e=this,n=this.statsListener_.get(),r={},i=!1;vr(n,function(o,a){a>0&&Ao(e.statsToReport_,o)&&(r[o]=a,i=!0)}),i&&this.server_.reportStats(r),Td(this.reportStats_.bind(this),Math.floor(Math.random()*2*Q7))},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Z7=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t.prototype.queueEvents=function(e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();n!==null&&!o.equals(n.getPath())&&(this.eventLists_.push(n),n=null),n===null&&(n=new eH(o)),n.add(i)}n&&this.eventLists_.push(n)},t.prototype.raiseEventsAtPath=function(e,n){this.queueEvents(n),this.raiseQueuedEventsMatchingPredicate_(function(r){return r.equals(e)})},t.prototype.raiseEventsForChangedPath=function(e,n){this.queueEvents(n),this.raiseQueuedEventsMatchingPredicate_(function(r){return r.contains(e)||e.contains(r)})},t.prototype.raiseQueuedEventsMatchingPredicate_=function(e){this.recursionDepth_++;for(var n=!0,r=0;r<this.eventLists_.length;r++){var i=this.eventLists_[r];if(i){var o=i.getPath();e(o)?(this.eventLists_[r].raise(),this.eventLists_[r]=null):n=!1}}n&&(this.eventLists_=[]),this.recursionDepth_--},t}(),eH=function(){function t(e){this.path_=e,this.events_=[]}return t.prototype.add=function(e){this.events_.push(e)},t.prototype.raise=function(){for(var e=0;e<this.events_.length;e++){var n=this.events_[e];if(n!==null){this.events_[e]=null;var r=n.getEventRunner();xl&&Xr("event: "+n.toString()),Yh(r)}}},t.prototype.getPath=function(){return this.path_},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var LF=function(){function t(e){this.allowedEvents_=e,this.listeners_={},Oe(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(Array.isArray(this.listeners_[e]))for(var i=Pa(this.listeners_[e]),o=0;o<i.length;o++)i[o].callback.apply(i[o].context,n)},t.prototype.on=function(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});var i=this.getInitialEvent(e);i&&n.apply(r,i)},t.prototype.off=function(e,n,r){this.validateEventType_(e);for(var i=this.listeners_[e]||[],o=0;o<i.length;o++)if(i[o].callback===n&&(!r||r===i[o].context)){i.splice(o,1);return}},t.prototype.validateEventType_=function(e){Oe(this.allowedEvents_.find(function(n){return n===e}),"Unknown event: "+e)},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tH=function(t){St(e,t);function e(){var n=t.call(this,["visible"])||this,r,i;return typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(i="visibilitychange",r="hidden"):typeof document.mozHidden<"u"?(i="mozvisibilitychange",r="mozHidden"):typeof document.msHidden<"u"?(i="msvisibilitychange",r="msHidden"):typeof document.webkitHidden<"u"&&(i="webkitvisibilitychange",r="webkitHidden")),n.visible_=!0,i&&document.addEventListener(i,function(){var o=!document[r];o!==n.visible_&&(n.visible_=o,n.trigger("visible",o))},!1),n}return e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(n){return Oe(n==="visible","Unknown event type: "+n),[this.visible_]},e}(LF);/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var SR=function(t){St(e,t);function e(){var n=t.call(this,["online"])||this;return n.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!yI()&&(window.addEventListener("online",function(){n.online_||(n.online_=!0,n.trigger("online",!0))},!1),window.addEventListener("offline",function(){n.online_&&(n.online_=!1,n.trigger("online",!1))},!1)),n}return e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(n){return Oe(n==="online","Unknown event type: "+n),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(LF);/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nH=function(){function t(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(e,n){var r=this;this.pendingResponses[e]=n;for(var i=function(){var c=o.pendingResponses[o.currentResponseNum];delete o.pendingResponses[o.currentResponseNum];for(var f=function(y){c[y]&&Yh(function(){r.onMessage_(c[y])})},v=0;v<c.length;++v)f(v);if(o.currentResponseNum===o.closeAfterResponse)return o.onClose&&(o.onClose(),o.onClose=null),"break";o.currentResponseNum++},o=this;this.pendingResponses[this.currentResponseNum];){var a=i();if(a==="break")break}},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var TR="start",rH="close",iH="pLPCommand",oH="pRTLPCB",MF="id",FF="pw",jF="ser",sH="cb",aH="seg",uH="ts",lH="d",cH="dframe",UF=1870,VF=30,hH=UF-VF,fH=25e3,dH=3e4,AI=function(){function t(e,n,r,i){this.connId=e,this.repoInfo=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Mp(e),this.stats_=$m.getCollection(n),this.urlFn=function(o){return n.connectionURL(_F,o)}}return t.prototype.open=function(e,n){var r=this;this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new nH(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){r.log_("Timed out trying to connect."),r.onClosed_(),r.connectTimeoutTimer_=null},Math.floor(dH)),t7(function(){if(!r.isClosed_){r.scriptTagHolder=new pH(function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];var f=Xd(a,5),v=f[0],y=f[1],b=f[2];if(f[3],f[4],r.incrementIncomingBytes_(a),!!r.scriptTagHolder)if(r.connectTimeoutTimer_&&(clearTimeout(r.connectTimeoutTimer_),r.connectTimeoutTimer_=null),r.everConnected_=!0,v===TR)r.id=y,r.password=b;else if(v===rH)y?(r.scriptTagHolder.sendNewPolls=!1,r.myPacketOrderer.closeAfter(y,function(){r.onClosed_()})):r.onClosed_();else throw new Error("Unrecognized command received: "+v)},function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];var f=Xd(a,2),v=f[0],y=f[1];r.incrementIncomingBytes_(a),r.myPacketOrderer.handleResponse(v,y)},function(){r.onClosed_()},r.urlFn);var i={};i[TR]="t",i[jF]=Math.floor(Math.random()*1e8),r.scriptTagHolder.uniqueCallbackIdentifier&&(i[sH]=r.scriptTagHolder.uniqueCallbackIdentifier),i[fF]=qm,r.transportSessionId&&(i[dF]=r.transportSessionId),r.lastSessionId&&(i[mF]=r.lastSessionId),typeof location<"u"&&location.href&&location.href.indexOf(gF)!==-1&&(i[pF]=vF);var o=r.urlFn(i);r.log_("Connecting via long-poll to "+o),r.scriptTagHolder.addTag(o,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return Ia()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!r7()&&!i7()},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(e){var n=xr(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);for(var r=c$(n),i=cF(r,hH),o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(e,n){if(!Ia()){this.myDisconnFrame=document.createElement("iframe");var r={};r[cH]="t",r[MF]=e,r[FF]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(e){var n=xr(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)},t}(),pH=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Ia())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=aF(),window[iH+this.uniqueCallbackIdentifier]=e,window[oH+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var o="";if(this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"){var a=document.domain;o='<script>document.domain="'+a+'";<\/script>'}var c="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(f){Xr("frame writing exception"),f.stack&&Xr(f.stack),Xr(f)}}}return t.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{var n=e.contentWindow.document;n||Xr("No IE domain setting required")}catch{var r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},t.prototype.close=function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){e.myIFrame!==null&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)},Math.floor(0)));var n=this.onDisconnect;n&&(this.onDisconnect=null,n())},t.prototype.startLongPoll=function(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e[MF]=this.myID,e[FF]=this.myPW,e[jF]=this.currentSerial;for(var n=this.urlFn(e),r="",i=0;this.pendingSegs.length>0;){var o=this.pendingSegs[0];if(o.d.length+VF+r.length<=UF){var a=this.pendingSegs.shift();r=r+"&"+aH+i+"="+a.seg+"&"+uH+i+"="+a.ts+"&"+lH+i+"="+a.d,i++}else break}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1},t.prototype.enqueueSegment=function(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(e,n){var r=this;this.outstandingRequests.add(n);var i=function(){r.outstandingRequests.delete(n),r.newRequest_()},o=setTimeout(i,Math.floor(fH)),a=function(){clearTimeout(o),i()};this.addTag(e,a)},t.prototype.addTag=function(e,n){var r=this;Ia()?this.doNodeLongPoll(e,n):setTimeout(function(){try{if(!r.sendNewPolls)return;var i=r.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){var o=i.readyState;(!o||o==="loaded"||o==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=function(){Xr("Long-poll script failed to load: "+e),r.sendNewPolls=!1,r.close()},r.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))},t}();/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kI="";function vH(t){kI=t}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gH=16384,mH=45e3,Id=null;typeof MozWebSocket<"u"?Id=MozWebSocket:typeof WebSocket<"u"&&(Id=WebSocket);var vl=function(){function t(e,n,r,i){this.connId=e,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Mp(this.connId),this.stats_=$m.getCollection(n),this.connURL=t.connectionURL_(n,r,i)}return t.connectionURL_=function(e,n,r){var i={};return i[fF]=qm,!Ia()&&typeof location<"u"&&location.href&&location.href.indexOf(gF)!==-1&&(i[pF]=vF),n&&(i[dF]=n),r&&(i[mF]=r),e.connectionURL(yF,i)},t.prototype.open=function(e,n){var r=this;this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,El.set("previous_websocket_failure",!0);try{if(Ia()){var i=Xg.NODE_ADMIN?"AdminNode":"Node",o={headers:{"User-Agent":"Firebase/"+qm+"/"+kI+"/"+process.platform+"/"+i}},a=oF,c=this.connURL.indexOf("wss://")===0?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;c&&(o.proxy={origin:c}),this.mySock=new Id(this.connURL,[],o)}else this.mySock=new Id(this.connURL)}catch(v){this.log_("Error instantiating WebSocket.");var f=v.message||v.data;f&&this.log_(f),this.onClosed_();return}this.mySock.onopen=function(){r.log_("Websocket connected."),r.everConnected_=!0},this.mySock.onclose=function(){r.log_("Websocket connection was disconnected."),r.mySock=null,r.onClosed_()},this.mySock.onmessage=function(v){r.handleIncomingFrame(v)},this.mySock.onerror=function(v){r.log_("WebSocket error.  Closing connection.");var y=v.message||v.data;y&&r.log_(y),r.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if(typeof navigator<"u"&&navigator.userAgent){var n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Id!==null&&!t.forceDisallow_},t.previouslyFailed=function(){return El.isInMemoryStorage||El.get("previous_websocket_failure")===!0},t.prototype.markConnectionHealthy=function(){El.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var n=this.frames.join("");this.frames=null;var r=_I(n);this.onMessage(r)}},t.prototype.handleNewFrameCount_=function(e){this.totalFrames=e,this.frames=[]},t.prototype.extractFrameCount_=function(e){if(Oe(this.frames===null,"We already have a frame buffer"),e.length<=6){var n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e},t.prototype.handleIncomingFrame=function(e){if(this.mySock!==null){var n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{var r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}},t.prototype.send=function(e){this.resetKeepAlive();var n=xr(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);var r=cF(n,gH);r.length>1&&this.sendString_(String(r.length));for(var i=0;i<r.length;i++)this.sendString_(r[i])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()},Math.floor(mH))},t.prototype.sendString_=function(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yH=function(){function t(e){this.initTransports_(e)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[AI,vl]},enumerable:!0,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=vl&&vl.isAvailable(),o=i&&!vl.previouslyFailed();if(e.webSocketOnly&&(i||Qr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[vl];else{var a=this.transports_=[];try{for(var c=Kn(t.ALL_TRANSPORTS),f=c.next();!f.done;f=c.next()){var v=f.value;v&&v.isAvailable()&&a.push(v)}}catch(y){n={error:y}}finally{try{f&&!f.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _H=6e4,wH=5e3,EH=10*1024,bH=100*1024,QE="t",IR="d",SH="s",xR="r",TH="e",CR="o",NR="a",AR="n",kR="p",IH="h",BF=function(){function t(e,n,r,i,o,a,c){this.id=e,this.repoInfo_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=a,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Mp("c:"+this.id+":"),this.transportManager_=new yH(n),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var e=this,n=this.transportManager_.initialTransport();this.conn_=new n(this.nextTransportId_(),this.repoInfo_,void 0,this.lastSessionId),this.primaryResponsesRequired_=n.responsesRequiredToBeHealthy||0;var r=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){e.conn_&&e.conn_.open(r,i)},Math.floor(0));var o=n.healthyTimeout||0;o>0&&(this.healthyTimeout_=Td(function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>bH?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>EH?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))},Math.floor(o)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(e){var n=this;return function(r){e===n.conn_?n.onConnectionLost_(r):e===n.secondaryConn_?(n.log_("Secondary connection lost."),n.onSecondaryConnectionLost_()):n.log_("closing an old connection")}},t.prototype.connReceiver_=function(e){var n=this;return function(r){n.state_!==2&&(e===n.rx_?n.onPrimaryMessageReceived_(r):e===n.secondaryConn_?n.onSecondaryMessageReceived_(r):n.log_("message on old connection"))}},t.prototype.sendRequest=function(e){var n={t:"d",d:e};this.sendData_(n)},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(e){if(QE in e){var n=e[QE];n===NR?this.upgradeIfSecondaryHealthy_():n===xR?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===CR&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(e){var n=Kf("t",e),r=Kf("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:kR,d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:NR,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:AR,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(e){var n=Kf("t",e),r=Kf("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)},t.prototype.onDataMessage_=function(e){this.onPrimaryResponse_(),this.onMessage_(e)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(e){var n=Kf(QE,e);if(IR in e){var r=e[IR];if(n===IH)this.onHandshake_(r);else if(n===AR){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===SH?this.onConnectionShutdown_(r):n===xR?this.onReset_(r):n===TH?c1("Server Error: "+r):n===CR?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):c1("Unknown control packet command: "+n)}},t.prototype.onHandshake_=function(e){var n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.updateHost(i),this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),qm!==r&&Qr("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)},t.prototype.startUpgrade_=function(e){var n=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var r=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(r,i),Td(function(){n.secondaryConn_&&(n.log_("Timed out trying to upgrade."),n.secondaryConn_.close())},Math.floor(_H))},t.prototype.onReset_=function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.updateHost(e),this.state_===1?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(e,n){var r=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Td(function(){r.sendPingOnPrimaryIfNecessary_()},Math.floor(wH))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:kR,d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()},t.prototype.onConnectionLost_=function(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(El.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()},t.prototype.onConnectionShutdown_=function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)},t.prototype.close=function(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zF=function(){function t(){}return t.prototype.put=function(e,n,r,i){},t.prototype.merge=function(e,n,r,i){},t.prototype.refreshAuthToken=function(e){},t.prototype.onDisconnectPut=function(e,n,r){},t.prototype.onDisconnectMerge=function(e,n,r){},t.prototype.onDisconnectCancel=function(e,n){},t.prototype.reportStats=function(e){},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xf=1e3,xH=60*5*1e3,RR=30*1e3,CH=1.3,NH=3e4,AH="server_kill",kH=3,Cl=function(t){St(e,t);function e(n,r,i,o,a,c){var f=t.call(this)||this;if(f.repoInfo_=n,f.onDataUpdate_=r,f.onConnectStatus_=i,f.onServerInfoUpdate_=o,f.authTokenProvider_=a,f.authOverride_=c,f.id=e.nextPersistentConnectionId_++,f.log_=Mp("p:"+f.id+":"),f.interruptReasons_={},f.listens=new Map,f.outstandingPuts_=[],f.outstandingPutCount_=0,f.onDisconnectRequestQueue_=[],f.connected_=!1,f.reconnectDelay_=Xf,f.maxReconnectDelay_=xH,f.securityDebugCallback_=null,f.lastSessionId=null,f.establishConnectionTimer_=null,f.visible_=!1,f.requestCBHash_={},f.requestNumber_=0,f.realtime_=null,f.authToken_=null,f.forceTokenRefresh_=!1,f.invalidAuthTokenCount_=0,f.firstConnection_=!0,f.lastConnectionAttemptTime_=null,f.lastConnectionEstablishedTime_=null,c&&!Ia())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return f.scheduleConnect_(0),tH.getInstance().on("visible",f.onVisible_,f),n.host.indexOf("fblocal")===-1&&SR.getInstance().on("online",f.onOnline_,f),f}return e.prototype.sendRequest=function(n,r,i){var o=++this.requestNumber_,a={r:o,a:n,b:r};this.log_(xr(a)),Oe(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(a),i&&(this.requestCBHash_[o]=i)},e.prototype.listen=function(n,r,i,o){var a=n.queryIdentifier(),c=n.path.toString();this.log_("Listen called for "+c+" "+a),this.listens.has(c)||this.listens.set(c,new Map),Oe(n.getQueryParams().isDefault()||!n.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),Oe(!this.listens.get(c).has(a),"listen() called twice for same path/queryId.");var f={onComplete:o,hashFn:r,query:n,tag:i};this.listens.get(c).set(a,f),this.connected_&&this.sendListen_(f)},e.prototype.sendListen_=function(n){var r=this,i=n.query,o=i.path.toString(),a=i.queryIdentifier();this.log_("Listen on "+o+" for "+a);var c={p:o},f="q";n.tag&&(c.q=i.queryObject(),c.t=n.tag),c.h=n.hashFn(),this.sendRequest(f,c,function(v){var y=v.d,b=v.s;e.warnOnListenWarnings_(y,i);var E=r.listens.get(o)&&r.listens.get(o).get(a);E===n&&(r.log_("listen response",v),b!=="ok"&&r.removeListen_(o,a),n.onComplete&&n.onComplete(b,y))})},e.warnOnListenWarnings_=function(n,r){if(n&&typeof n=="object"&&Ao(n,"w")){var i=Qo(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){var o='".indexOn": "'+r.getQueryParams().getIndex().toString()+'"',a=r.path.toString();Qr("Using an unspecified index. Your data will be downloaded and "+("filtered on the client. Consider adding "+o+" at ")+(a+" to your security rules for better performance."))}}},e.prototype.refreshAuthToken=function(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(n)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(n){var r=n&&n.length===40;(r||f$(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=RR)},e.prototype.tryAuth=function(){var n=this;if(this.connected_&&this.authToken_){var r=this.authToken_,i=m$(r)?"auth":"gauth",o={cred:r};this.authOverride_===null?o.noauth=!0:typeof this.authOverride_=="object"&&(o.authvar=this.authOverride_),this.sendRequest(i,o,function(a){var c=a.s,f=a.d||"error";n.authToken_===r&&(c==="ok"?n.invalidAuthTokenCount_=0:n.onAuthRevoked_(c,f))})}},e.prototype.unlisten=function(n,r){var i=n.path.toString(),o=n.queryIdentifier();this.log_("Unlisten called for "+i+" "+o),Oe(n.getQueryParams().isDefault()||!n.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query");var a=this.removeListen_(i,o);a&&this.connected_&&this.sendUnlisten_(i,o,n.queryObject(),r)},e.prototype.sendUnlisten_=function(n,r,i,o){this.log_("Unlisten on "+n+" for "+r);var a={p:n},c="n";o&&(a.q=i,a.t=o),this.sendRequest(c,a)},e.prototype.onDisconnectPut=function(n,r,i){this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})},e.prototype.onDisconnectMerge=function(n,r,i){this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})},e.prototype.onDisconnectCancel=function(n,r){this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})},e.prototype.sendOnDisconnect_=function(n,r,i,o){var a={p:r,d:i};this.log_("onDisconnect "+n,a),this.sendRequest(n,a,function(c){o&&setTimeout(function(){o(c.s,c.d)},Math.floor(0))})},e.prototype.put=function(n,r,i,o){this.putInternal("p",n,r,i,o)},e.prototype.merge=function(n,r,i,o){this.putInternal("m",n,r,i,o)},e.prototype.putInternal=function(n,r,i,o,a){var c={p:r,d:i};a!==void 0&&(c.h=a),this.outstandingPuts_.push({action:n,request:c,onComplete:o}),this.outstandingPutCount_++;var f=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(f):this.log_("Buffering put: "+r)},e.prototype.sendPut_=function(n){var r=this,i=this.outstandingPuts_[n].action,o=this.outstandingPuts_[n].request,a=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(i,o,function(c){r.log_(i+" response",c),delete r.outstandingPuts_[n],r.outstandingPutCount_--,r.outstandingPutCount_===0&&(r.outstandingPuts_=[]),a&&a(c.s,c.d)})},e.prototype.reportStats=function(n){var r=this;if(this.connected_){var i={c:n};this.log_("reportStats",i),this.sendRequest("s",i,function(o){var a=o.s;if(a!=="ok"){var c=o.d;r.log_("reportStats","Error sending stats: "+c)}})}},e.prototype.onDataMessage_=function(n){if("r"in n){this.log_("from server: "+xr(n));var r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}},e.prototype.onDataPush_=function(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):c1("Unrecognized action received from server: "+xr(n)+`
Are you using the latest client?`)},e.prototype.onReady_=function(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(n){var r=this;Oe(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){r.establishConnectionTimer_=null,r.establishConnection_()},Math.floor(n))},e.prototype.onVisible_=function(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Xf,this.realtime_||this.scheduleConnect_(0)),this.visible_=n},e.prototype.onOnline_=function(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Xf,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(!this.visible_)this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime();else if(this.lastConnectionEstablishedTime_){var n=new Date().getTime()-this.lastConnectionEstablishedTime_;n>NH&&(this.reconnectDelay_=Xf),this.lastConnectionEstablishedTime_=null}var r=new Date().getTime()-this.lastConnectionAttemptTime_,i=Math.max(0,this.reconnectDelay_-r);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*CH)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+e.nextConnectionId_++,a=this,c=this.lastSessionId,f=!1,v=null,y=function(){v?v.close():(f=!0,i())},b=function(I){Oe(v,"sendRequest call when we're not connected not allowed."),v.sendRequest(I)};this.realtime_={close:y,sendRequest:b};var E=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(E).then(function(I){f?Xr("getToken() completed but was canceled"):(Xr("getToken() completed. Creating connection."),a.authToken_=I&&I.accessToken,v=new BF(o,a.repoInfo_,n,r,i,function(L){Qr(L+" ("+a.repoInfo_.toString()+")"),a.interrupt(AH)},c))}).then(null,function(I){a.log_("Failed to get token: "+I),f||(Xg.NODE_ADMIN&&Qr(I),y())})}},e.prototype.interrupt=function(n){Xr("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(n){Xr("Resuming connection for reason: "+n),delete this.interruptReasons_[n],a1(this.interruptReasons_)&&(this.reconnectDelay_=Xf,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(n){var r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})},e.prototype.cancelSentTransactions_=function(){for(var n=0;n<this.outstandingPuts_.length;n++){var r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(n,r){var i;r?i=r.map(function(a){return SI(a)}).join("$"):i="default";var o=this.removeListen_(n,i);o&&o.onComplete&&o.onComplete("permission_denied")},e.prototype.removeListen_=function(n,r){var i=new $e(n).toString(),o;if(this.listens.has(i)){var a=this.listens.get(i);o=a.get(r),a.delete(r),a.size===0&&this.listens.delete(i)}else o=void 0;return o},e.prototype.onAuthRevoked_=function(n,r){Xr("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=kH&&(this.reconnectDelay_=RR,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))},e.prototype.restoreState_=function(){var n,r,i,o;this.tryAuth();try{for(var a=Kn(this.listens.values()),c=a.next();!c.done;c=a.next()){var f=c.value;try{for(var v=(i=void 0,Kn(f.values())),y=v.next();!y.done;y=v.next()){var b=y.value;this.sendListen_(b)}}catch(L){i={error:L}}finally{try{y&&!y.done&&(o=v.return)&&o.call(v)}finally{if(i)throw i.error}}}}catch(L){n={error:L}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}for(var E=0;E<this.outstandingPuts_.length;E++)this.outstandingPuts_[E]&&this.sendPut_(E);for(;this.onDisconnectRequestQueue_.length;){var I=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(I.action,I.pathString,I.data,I.onComplete)}},e.prototype.sendConnectStats_=function(){var n={},r="js";Xg.NODE_ADMIN?r="admin_node":Xg.NODE_CLIENT&&(r="node"),n["sdk."+r+"."+kI.replace(/\./g,"-")]=1,yI()?n["framework.cordova"]=1:eF()&&(n["framework.reactnative"]=1),this.reportStats(n)},e.prototype.shouldReconnect_=function(){var n=SR.getInstance().currentlyOnline();return a1(this.interruptReasons_)&&n},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(zF);/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var RH=function(t){St(e,t);function e(n,r,i){var o=t.call(this)||this;return o.repoInfo_=n,o.onDataUpdate_=r,o.authTokenProvider_=i,o.log_=Mp("p:rest:"),o.listens_={},o}return e.prototype.reportStats=function(n){throw new Error("Method not implemented.")},e.getListenId_=function(n,r){return r!==void 0?"tag$"+r:(Oe(n.getQueryParams().isDefault(),"should have a tag if it's not a default query."),n.path.toString())},e.prototype.listen=function(n,r,i,o){var a=this,c=n.path.toString();this.log_("Listen called for "+c+" "+n.queryIdentifier());var f=e.getListenId_(n,i),v={};this.listens_[f]=v;var y=n.getQueryParams().toRestQueryStringParameters();this.restRequest_(c+".json",y,function(b,E){var I=E;if(b===404&&(I=null,b=null),b===null&&a.onDataUpdate_(c,I,!1,i),Qo(a.listens_,f)===v){var L;b?b===401?L="permission_denied":L="rest_error:"+b:L="ok",o(L,null)}})},e.prototype.unlisten=function(n,r){var i=e.getListenId_(n,r);delete this.listens_[i]},e.prototype.refreshAuthToken=function(n){},e.prototype.restRequest_=function(n,r,i){var o=this;r===void 0&&(r={}),r.format="export",this.authTokenProvider_.getToken(!1).then(function(a){var c=a&&a.accessToken;c&&(r.auth=c);var f=(o.repoInfo_.secure?"https://":"http://")+o.repoInfo_.host+n+"?ns="+o.repoInfo_.namespace+y$(r);o.log_("Sending REST request for "+f);var v=new XMLHttpRequest;v.onreadystatechange=function(){if(i&&v.readyState===4){o.log_("REST Response for "+f+" received. status:",v.status,"response:",v.responseText);var y=null;if(v.status>=200&&v.status<300){try{y=_I(v.responseText)}catch{Qr("Failed to parse JSON response for "+f+": "+v.responseText)}i(null,y)}else v.status!==401&&v.status!==404&&Qr("Got unsuccessful REST response for "+f+" Status: "+v.status),i(v.status);i=null}},v.open("GET",f,!0),v.send()})},e}(zF);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var OR="repo_interrupt",kr=function(){function t(e,n,r,i){var o=this;this.repoInfo_=e,this.app=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Z7,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new HE,this.persistentConnection_=null;var a=new K7(r,i);if(this.stats_=$m.getCollection(e),n||a7())this.server_=new RH(this.repoInfo_,this.onDataUpdate_.bind(this),a),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var c=r.options.databaseAuthVariableOverride;if(typeof c<"u"&&c!==null){if(typeof c!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{xr(c)}catch(f){throw new Error("Invalid authOverride provided: "+f)}}this.persistentConnection_=new Cl(this.repoInfo_,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),a,c),this.server_=this.persistentConnection_}a.addTokenChangeListener(function(f){o.server_.refreshAuthToken(f)}),this.statsReporter_=$m.getOrCreateReporter(e,function(){return new J7(o.stats_,o.server_)}),this.transactionsInit_(),this.infoData_=new H7,this.infoSyncTree_=new ER({startListening:function(f,v,y,b){var E=[],I=o.infoData_.getNode(f.path);return I.isEmpty()||(E=o.infoSyncTree_.applyServerOverwrite(f.path,I),setTimeout(function(){b("ok")},0)),E},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new ER({startListening:function(f,v,y,b){return o.server_.listen(f,y,v,function(E,I){var L=b(E,I);o.eventQueue_.raiseEventsForChangedPath(f.path,L)}),[]},stopListening:function(f,v){o.server_.unlisten(f,v)}})}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var e=this.infoData_.getNode(new $e(".info/serverTimeOffset")),n=e.val()||0;return new Date().getTime()+n},t.prototype.generateServerValues=function(){return D7({timestamp:this.serverTime()})},t.prototype.onDataUpdate_=function(e,n,r,i){this.dataUpdateCount++;var o=new $e(e);n=this.interceptServerDataCallback_?this.interceptServerDataCallback_(e,n):n;var a=[];if(i)if(r){var c=Um(n,function(E){return Fn(E)});a=this.serverSyncTree_.applyTaggedQueryMerge(o,c,i)}else{var f=Fn(n);a=this.serverSyncTree_.applyTaggedQueryOverwrite(o,f,i)}else if(r){var v=Um(n,function(E){return Fn(E)});a=this.serverSyncTree_.applyServerMerge(o,v)}else{var y=Fn(n);a=this.serverSyncTree_.applyServerOverwrite(o,y)}var b=o;a.length>0&&(b=this.rerunTransactions_(o)),this.eventQueue_.raiseEventsForChangedPath(b,a)},t.prototype.interceptServerData_=function(e){this.interceptServerDataCallback_=e},t.prototype.onConnectStatus_=function(e){this.updateInfo_("connected",e),e===!1&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(e){var n=this;vr(e,function(r,i){n.updateInfo_(r,i)})},t.prototype.updateInfo_=function(e,n){var r=new $e("/.info/"+e),i=Fn(n);this.infoData_.updateSnapshot(r,i);var o=this.infoSyncTree_.applyServerOverwrite(r,i);this.eventQueue_.raiseEventsForChangedPath(r,o)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.setWithPriority=function(e,n,r,i){var o=this;this.log_("set",{path:e.toString(),value:n,priority:r});var a=this.generateServerValues(),c=Fn(n,r),f=this.serverSyncTree_.calcCompleteEventCache(e),v=xI(c,f,a),y=this.getNextWriteId_(),b=this.serverSyncTree_.applyUserOverwrite(e,v,y,!0);this.eventQueue_.queueEvents(b),this.server_.put(e.toString(),c.val(!0),function(I,L){var D=I==="ok";D||Qr("set at "+e+" failed: "+I);var te=o.serverSyncTree_.ackUserWrite(y,!D);o.eventQueue_.raiseEventsForChangedPath(e,te),o.callOnCompleteCallback(i,I,L)});var E=this.abortTransactions_(e);this.rerunTransactions_(E),this.eventQueue_.raiseEventsForChangedPath(E,[])},t.prototype.update=function(e,n,r){var i=this;this.log_("update",{path:e.toString(),value:n});var o=!0,a=this.generateServerValues(),c={};if(vr(n,function(y,b){o=!1,c[y]=mR(e.child(y),Fn(b),i.serverSyncTree_,a)}),o)Xr("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(r,"ok");else{var f=this.getNextWriteId_(),v=this.serverSyncTree_.applyUserMerge(e,c,f);this.eventQueue_.queueEvents(v),this.server_.merge(e.toString(),n,function(y,b){var E=y==="ok";E||Qr("update at "+e+" failed: "+y);var I=i.serverSyncTree_.ackUserWrite(f,!E),L=I.length>0?i.rerunTransactions_(e):e;i.eventQueue_.raiseEventsForChangedPath(L,I),i.callOnCompleteCallback(r,y,b)}),vr(n,function(y){var b=i.abortTransactions_(e.child(y));i.rerunTransactions_(b)}),this.eventQueue_.raiseEventsForChangedPath(e,[])}},t.prototype.runOnDisconnectEvents_=function(){var e=this;this.log_("onDisconnectEvents");var n=this.generateServerValues(),r=new HE;this.onDisconnect_.forEachTree($e.Empty,function(o,a){var c=mR(o,a,e.serverSyncTree_,n);r.remember(o,c)});var i=[];r.forEachTree($e.Empty,function(o,a){i=i.concat(e.serverSyncTree_.applyServerOverwrite(o,a));var c=e.abortTransactions_(o);e.rerunTransactions_(c)}),this.onDisconnect_=new HE,this.eventQueue_.raiseEventsForChangedPath($e.Empty,i)},t.prototype.onDisconnectCancel=function(e,n){var r=this;this.server_.onDisconnectCancel(e.toString(),function(i,o){i==="ok"&&r.onDisconnect_.forget(e),r.callOnCompleteCallback(n,i,o)})},t.prototype.onDisconnectSet=function(e,n,r){var i=this,o=Fn(n);this.server_.onDisconnectPut(e.toString(),o.val(!0),function(a,c){a==="ok"&&i.onDisconnect_.remember(e,o),i.callOnCompleteCallback(r,a,c)})},t.prototype.onDisconnectSetWithPriority=function(e,n,r,i){var o=this,a=Fn(n,r);this.server_.onDisconnectPut(e.toString(),a.val(!0),function(c,f){c==="ok"&&o.onDisconnect_.remember(e,a),o.callOnCompleteCallback(i,c,f)})},t.prototype.onDisconnectUpdate=function(e,n,r){var i=this;if(a1(n)){Xr("onDisconnect().update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(r,"ok");return}this.server_.onDisconnectMerge(e.toString(),n,function(o,a){o==="ok"&&vr(n,function(c,f){var v=Fn(f);i.onDisconnect_.remember(e.child(c),v)}),i.callOnCompleteCallback(r,o,a)})},t.prototype.addEventCallbackForQuery=function(e,n){var r;e.path.getFront()===".info"?r=this.infoSyncTree_.addEventRegistration(e,n):r=this.serverSyncTree_.addEventRegistration(e,n),this.eventQueue_.raiseEventsAtPath(e.path,r)},t.prototype.removeEventCallbackForQuery=function(e,n){var r;e.path.getFront()===".info"?r=this.infoSyncTree_.removeEventRegistration(e,n):r=this.serverSyncTree_.removeEventRegistration(e,n),this.eventQueue_.raiseEventsAtPath(e.path,r)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(OR)},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(OR)},t.prototype.stats=function(e){if(e===void 0&&(e=!1),!(typeof console>"u")){var n;e?(this.statsListener_||(this.statsListener_=new DF(this.stats_)),n=this.statsListener_.get()):n=this.stats_.get();var r=Object.keys(n).reduce(function(i,o){return Math.max(o.length,i)},0);vr(n,function(i,o){for(var a=i,c=i.length;c<r+2;c++)a+=" ";console.log(a+o)})}},t.prototype.statsIncrementCounter=function(e){this.stats_.incrementCounter(e),this.statsReporter_.includeStat(e)},t.prototype.log_=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r="";this.persistentConnection_&&(r=this.persistentConnection_.id+":"),Xr.apply(void 0,Pa([r],e))},t.prototype.callOnCompleteCallback=function(e,n,r){e&&Yh(function(){if(n==="ok")e(null);else{var i=(n||"error").toUpperCase(),o=i;r&&(o+=": "+r);var a=new Error(o);a.code=i,e(a)}})},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new OI(this))},enumerable:!0,configurable:!0}),t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qF=function(){function t(e){this.indexedFilter_=new NI(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0},t.prototype.updateChild=function(e,n,r,i,o,a){return this.matches(new Vt(n,r))||(r=yt.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,o,a)},t.prototype.updateFullNode=function(e,n,r){n.isLeafNode()&&(n=yt.EMPTY_NODE);var i=n.withIndex(this.index_);i=i.updatePriority(yt.EMPTY_NODE);var o=this;return n.forEachChild(nn,function(a,c){o.matches(new Vt(a,c))||(i=i.updateImmediateChild(a,yt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)},t.prototype.updatePriority=function(e,n){return e},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(e){if(e.hasStart()){var n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()},t.getEndPost_=function(e){if(e.hasEnd()){var n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var OH=function(){function t(e){this.rangedFilter_=new qF(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}return t.prototype.updateChild=function(e,n,r,i,o,a){return this.rangedFilter_.matches(new Vt(n,r))||(r=yt.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,o,a):this.fullLimitUpdateChild_(e,n,r,o,a)},t.prototype.updateFullNode=function(e,n,r){var i;if(n.isLeafNode()||n.isEmpty())i=yt.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=yt.EMPTY_NODE.withIndex(this.index_);var o=void 0;this.reverse_?o=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;o.hasNext()&&a<this.limit_;){var c=o.getNext(),f=void 0;if(this.reverse_?f=this.index_.compare(this.rangedFilter_.getStartPost(),c)<=0:f=this.index_.compare(c,this.rangedFilter_.getEndPost())<=0,f)i=i.updateImmediateChild(c.name,c.node),a++;else break}}else{i=n.withIndex(this.index_),i=i.updatePriority(yt.EMPTY_NODE);var v=void 0,y=void 0,b=void 0,o=void 0;if(this.reverse_){o=i.getReverseIterator(this.index_),v=this.rangedFilter_.getEndPost(),y=this.rangedFilter_.getStartPost();var E=this.index_.getCompare();b=function(te,z){return E(z,te)}}else o=i.getIterator(this.index_),v=this.rangedFilter_.getStartPost(),y=this.rangedFilter_.getEndPost(),b=this.index_.getCompare();for(var a=0,I=!1;o.hasNext();){var c=o.getNext();!I&&b(v,c)<=0&&(I=!0);var f=I&&a<this.limit_&&b(c,y)<=0;f?a++:i=i.updateImmediateChild(c.name,yt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)},t.prototype.updatePriority=function(e,n){return e},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(e,n,r,i,o){var a;if(this.reverse_){var c=this.index_.getCompare();a=function(Y,K){return c(K,Y)}}else a=this.index_.getCompare();var f=e;Oe(f.numChildren()===this.limit_,"");var v=new Vt(n,r),y=this.reverse_?f.getFirstChild(this.index_):f.getLastChild(this.index_),b=this.rangedFilter_.matches(v);if(f.hasChild(n)){for(var E=f.getImmediateChild(n),I=i.getChildAfterChild(this.index_,y,this.reverse_);I!=null&&(I.name===n||f.hasChild(I.name));)I=i.getChildAfterChild(this.index_,I,this.reverse_);var L=I==null?1:a(I,v),D=b&&!r.isEmpty()&&L>=0;if(D)return o!=null&&o.trackChildChange(kt.childChangedChange(n,r,E)),f.updateImmediateChild(n,r);o!=null&&o.trackChildChange(kt.childRemovedChange(n,E));var te=f.updateImmediateChild(n,yt.EMPTY_NODE),z=I!=null&&this.rangedFilter_.matches(I);return z?(o!=null&&o.trackChildChange(kt.childAddedChange(I.name,I.node)),te.updateImmediateChild(I.name,I.node)):te}else return r.isEmpty()?e:b&&a(y,v)>=0?(o!=null&&(o.trackChildChange(kt.childRemovedChange(y.name,y.node)),o.trackChildChange(kt.childAddedChange(n,r))),f.updateImmediateChild(n,r).updateImmediateChild(y.name,yt.EMPTY_NODE)):e},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var PH=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=nn}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.isViewFromLeft=function(){return this.viewFrom_===""?this.startSet_:this.viewFrom_===t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},t.prototype.getIndexStartValue=function(){return Oe(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Oe(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ml},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Oe(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Oe(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Au},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&this.viewFrom_!==""},t.prototype.getLimit=function(){return Oe(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.copy_=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t.prototype.limit=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="",n},t.prototype.limitToFirst=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},t.prototype.limitToLast=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},t.prototype.startAt=function(e,n){var r=this.copy_();return r.startSet_=!0,e===void 0&&(e=null),r.indexStartValue_=e,n!=null?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r},t.prototype.endAt=function(e,n){var r=this.copy_();return r.endSet_=!0,e===void 0&&(e=null),r.indexEndValue_=e,n!==void 0?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r},t.prototype.orderBy=function(e){var n=this.copy_();return n.index_=e,n},t.prototype.getQueryObject=function(){var e=t.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[e.LIMIT]=this.limit_;var r=this.viewFrom_;r===""&&(this.isViewFromLeft()?r=e.VIEW_FROM_LEFT:r=e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=r}return this.index_!==nn&&(n[e.INDEX]=this.index_.toString()),n},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===nn},t.prototype.getNodeFilter=function(){return this.loadsAllData()?new NI(this.getIndex()):this.hasLimit()?new OH(this):new qF(this)},t.prototype.toRestQueryStringParameters=function(){var e=t.REST_QUERY_CONSTANTS_,n={};if(this.isDefault())return n;var r;return this.index_===nn?r=e.PRIORITY_INDEX:this.index_===p1?r=e.VALUE_INDEX:this.index_===bu?r=e.KEY_INDEX:(Oe(this.index_ instanceof v1,"Unrecognized index type!"),r=this.index_.toString()),n[e.ORDER_BY]=xr(r),this.startSet_&&(n[e.START_AT]=xr(this.indexStartValue_),this.startNameSet_&&(n[e.START_AT]+=","+xr(this.indexStartName_))),this.endSet_&&(n[e.END_AT]=xr(this.indexEndValue_),this.endNameSet_&&(n[e.END_AT]+=","+xr(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?n[e.LIMIT_TO_FIRST]=this.limit_:n[e.LIMIT_TO_LAST]=this.limit_),n},t.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},t.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},t.DEFAULT=new t,t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xa=function(t){St(e,t);function e(n,r){var i=this;if(!(n instanceof kr))throw new Error("new Reference() no longer supported - use app.database().");return i=t.call(this,n,r,PH.DEFAULT,!1)||this,i}return e.prototype.getKey=function(){return dt("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},e.prototype.child=function(n){return dt("Reference.child",1,1,arguments.length),typeof n=="number"?n=String(n):n instanceof $e||(this.path.getFront()===null?g7("Reference.child",1,n,!1):Zd("Reference.child",1,n,!1)),new e(this.repo,this.path.child(n))},e.prototype.getParent=function(){dt("Reference.parent",0,0,arguments.length);var n=this.path.parent();return n===null?null:new e(this.repo,n)},e.prototype.getRoot=function(){dt("Reference.root",0,0,arguments.length);for(var n=this;n.getParent()!==null;)n=n.getParent();return n},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(n,r){dt("Reference.set",1,2,arguments.length),vo("Reference.set",this.path),Eu("Reference.set",1,n,this.path,!1),Tr("Reference.set",2,r,!0);var i=new Yo;return this.repo.setWithPriority(this.path,n,null,i.wrapCallback(r)),i.promise},e.prototype.update=function(n,r){if(dt("Reference.update",1,2,arguments.length),vo("Reference.update",this.path),Array.isArray(n)){for(var i={},o=0;o<n.length;++o)i[""+o]=n[o];n=i,Qr("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}bF("Reference.update",1,n,this.path,!1),Tr("Reference.update",2,r,!0);var a=new Yo;return this.repo.update(this.path,n,a.wrapCallback(r)),a.promise},e.prototype.setWithPriority=function(n,r,i){if(dt("Reference.setWithPriority",2,3,arguments.length),vo("Reference.setWithPriority",this.path),Eu("Reference.setWithPriority",1,n,this.path,!1),f1("Reference.setWithPriority",2,r,!1),Tr("Reference.setWithPriority",3,i,!0),this.getKey()===".length"||this.getKey()===".keys")throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var o=new Yo;return this.repo.setWithPriority(this.path,n,r,o.wrapCallback(i)),o.promise},e.prototype.remove=function(n){return dt("Reference.remove",0,1,arguments.length),vo("Reference.remove",this.path),Tr("Reference.remove",1,n,!0),this.set(null,n)},e.prototype.transaction=function(n,r,i){if(dt("Reference.transaction",1,3,arguments.length),vo("Reference.transaction",this.path),Tr("Reference.transaction",1,n,!1),Tr("Reference.transaction",2,r,!0),m7("Reference.transaction",3,i,!0),this.getKey()===".length"||this.getKey()===".keys")throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";i===void 0&&(i=!0);var o=new Yo;typeof r=="function"&&o.promise.catch(function(){});var a=function(c,f,v){c?o.reject(c):o.resolve(new _7(f,v)),typeof r=="function"&&r(c,f,v)};return this.repo.startTransaction(this.path,n,a,i),o.promise},e.prototype.setPriority=function(n,r){dt("Reference.setPriority",1,2,arguments.length),vo("Reference.setPriority",this.path),f1("Reference.setPriority",1,n,!1),Tr("Reference.setPriority",2,r,!0);var i=new Yo;return this.repo.setWithPriority(this.path.child(".priority"),n,null,i.wrapCallback(r)),i.promise},e.prototype.push=function(n,r){dt("Reference.push",0,2,arguments.length),vo("Reference.push",this.path),Eu("Reference.push",1,n,this.path,!0),Tr("Reference.push",2,r,!0);var i=this.repo.serverTime(),o=w7(i),a=this.child(o),c=this.child(o),f;return n!=null?f=a.set(n,r).then(function(){return c}):f=Promise.resolve(c),a.then=f.then.bind(f),a.catch=f.then.bind(f,void 0),typeof r=="function"&&f.catch(function(){}),a},e.prototype.onDisconnect=function(){return vo("Reference.onDisconnect",this.path),new y7(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!0,configurable:!0}),e}(II);II.__referenceConstructor=xa;OF.__referenceConstructor=xa;/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var PR=function(){function t(){this.children={},this.childCount=0,this.value=null}return t}(),DH=function(){function t(e,n,r){e===void 0&&(e=""),n===void 0&&(n=null),r===void 0&&(r=new PR),this.name_=e,this.parent_=n,this.node_=r}return t.prototype.subTree=function(e){for(var n=e instanceof $e?e:new $e(e),r=this,i=n.getFront();i!==null;){var o=Qo(r.node_.children,i)||new PR;r=new t(i,r,o),n=n.popFront(),i=n.getFront()}return r},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(e){Oe(typeof e<"u","Cannot set value to undefined"),this.node_.value=e,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return this.getValue()===null&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;vr(this.node_.children,function(r,i){e(new t(r,n,i))})},t.prototype.forEachDescendant=function(e,n,r){n&&!r&&e(this),this.forEachChild(function(i){i.forEachDescendant(e,!0,r)}),n&&r&&e(this)},t.prototype.forEachAncestor=function(e,n){for(var r=n?this:this.parent();r!==null;){if(e(r))return!0;r=r.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(e){this.forEachChild(function(n){n.getValue()!==null?e(n):n.forEachImmediateDescendantWithValue(e)})},t.prototype.path=function(){return new $e(this.parent_===null?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){this.parent_!==null&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(e,n){var r=n.isEmpty(),i=Ao(this.node_.children,e);r&&i?(delete this.node_.children[e],this.node_.childCount--,this.updateParents_()):!r&&!i&&(this.node_.children[e]=n.node_,this.node_.childCount++,this.updateParents_())},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sr;(function(t){t[t.RUN=0]="RUN",t[t.SENT=1]="SENT",t[t.COMPLETED=2]="COMPLETED",t[t.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",t[t.NEEDS_ABORT=4]="NEEDS_ABORT"})(sr||(sr={}));kr.MAX_TRANSACTION_RETRIES_=25;kr.prototype.transactionsInit_=function(){this.transactionQueueTree_=new DH};kr.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);var i=function(){},o=new xa(this,t);o.on("value",i);var a=function(){o.off("value",i)},c={path:t,update:e,onComplete:n,status:null,order:aF(),applyLocally:r,retryCount:0,unwatcher:a,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},f=this.getLatestState_(t);c.currentInputSnapshot=f;var v=c.update(f.val());if(v===void 0){if(c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete){var y=new Xh(c.currentInputSnapshot,new xa(this,c.path),nn);c.onComplete(null,!1,y)}}else{Fp("transaction failed: Data returned ",v,c.path),c.status=sr.RUN;var b=this.transactionQueueTree_.subTree(t),E=b.getValue()||[];E.push(c),b.setValue(E);var I=void 0;if(typeof v=="object"&&v!==null&&Ao(v,".priority"))I=Qo(v,".priority"),Oe(Jd(I),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else{var L=this.serverSyncTree_.calcCompleteEventCache(t)||yt.EMPTY_NODE;I=L.getPriority().val()}I=I;var D=this.generateServerValues(),te=Fn(v,I),z=xI(te,f,D);c.currentOutputSnapshotRaw=te,c.currentOutputSnapshotResolved=z,c.currentWriteId=this.getNextWriteId_();var Y=this.serverSyncTree_.applyUserOverwrite(t,z,c.currentWriteId,c.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,Y),this.sendReadyTransactions_()}};kr.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||yt.EMPTY_NODE};kr.prototype.sendReadyTransactions_=function(t){var e=this;if(t===void 0&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),t.getValue()!==null){var n=this.buildTransactionQueue_(t);Oe(n.length>0,"Sending zero length transaction queue");var r=n.every(function(i){return i.status===sr.RUN});r&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild(function(i){e.sendReadyTransactions_(i)})};kr.prototype.sendTransactionQueue_=function(t,e){for(var n=this,r=e.map(function(E){return E.currentWriteId}),i=this.getLatestState_(t,r),o=i,a=i.hash(),c=0;c<e.length;c++){var f=e[c];Oe(f.status===sr.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),f.status=sr.SENT,f.retryCount++;var v=$e.relativePath(t,f.path);o=o.updateChild(v,f.currentOutputSnapshotRaw)}var y=o.val(!0),b=t;this.server_.put(b.toString(),y,function(E){n.log_("transaction put response",{path:b.toString(),status:E});var I=[];if(E==="ok"){for(var L=[],D=0;D<e.length;D++){if(e[D].status=sr.COMPLETED,I=I.concat(n.serverSyncTree_.ackUserWrite(e[D].currentWriteId)),e[D].onComplete){var te=e[D].currentOutputSnapshotResolved,z=new xa(n,e[D].path),Y=new Xh(te,z,nn);L.push(e[D].onComplete.bind(null,null,!0,Y))}e[D].unwatcher()}n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(t,I);for(var D=0;D<L.length;D++)Yh(L[D])}else{if(E==="datastale")for(var D=0;D<e.length;D++)e[D].status===sr.SENT_NEEDS_ABORT?e[D].status=sr.NEEDS_ABORT:e[D].status=sr.RUN;else{Qr("transaction at "+b.toString()+" failed: "+E);for(var D=0;D<e.length;D++)e[D].status=sr.NEEDS_ABORT,e[D].abortReason=E}n.rerunTransactions_(t)}},a)};kr.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n};kr.prototype.rerunTransactionQueue_=function(t,e){if(t.length!==0){for(var n=[],r=[],i=t.filter(function(oe){return oe.status===sr.RUN}),o=i.map(function(oe){return oe.currentWriteId}),a=0;a<t.length;a++){var c=t[a],f=$e.relativePath(e,c.path),v=!1,y=void 0;if(Oe(f!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===sr.NEEDS_ABORT)v=!0,y=c.abortReason,r=r.concat(this.serverSyncTree_.ackUserWrite(c.currentWriteId,!0));else if(c.status===sr.RUN)if(c.retryCount>=kr.MAX_TRANSACTION_RETRIES_)v=!0,y="maxretry",r=r.concat(this.serverSyncTree_.ackUserWrite(c.currentWriteId,!0));else{var b=this.getLatestState_(c.path,o);c.currentInputSnapshot=b;var E=t[a].update(b.val());if(E!==void 0){Fp("transaction failed: Data returned ",E,c.path);var I=Fn(E),L=typeof E=="object"&&E!=null&&Ao(E,".priority");L||(I=I.updatePriority(b.getPriority()));var D=c.currentWriteId,te=this.generateServerValues(),z=xI(I,b,te);c.currentOutputSnapshotRaw=I,c.currentOutputSnapshotResolved=z,c.currentWriteId=this.getNextWriteId_(),o.splice(o.indexOf(D),1),r=r.concat(this.serverSyncTree_.applyUserOverwrite(c.path,z,c.currentWriteId,c.applyLocally)),r=r.concat(this.serverSyncTree_.ackUserWrite(D,!0))}else v=!0,y="nodata",r=r.concat(this.serverSyncTree_.ackUserWrite(c.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,r),r=[],v&&(t[a].status=sr.COMPLETED,function(oe){setTimeout(oe,Math.floor(0))}(t[a].unwatcher),t[a].onComplete))if(y==="nodata"){var Y=new xa(this,t[a].path),K=t[a].currentInputSnapshot,ue=new Xh(K,Y,nn);n.push(t[a].onComplete.bind(null,null,!1,ue))}else n.push(t[a].onComplete.bind(null,new Error(y),!1,null))}this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);for(var a=0;a<n.length;a++)Yh(n[a]);this.sendReadyTransactions_()}};kr.prototype.getAncestorTransactionNode_=function(t){var e,n=this.transactionQueueTree_;for(e=t.getFront();e!==null&&n.getValue()===null;)n=n.subTree(e),t=t.popFront(),e=t.getFront();return n};kr.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort(function(n,r){return n.order-r.order}),e};kr.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(r!==null)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild(function(o){n.aggregateTransactionQueuesForNode_(o,e)})};kr.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==sr.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(n.length>0?n:null)}t.forEachChild(function(o){e.pruneCompletedTransactionsBelowNode_(o)})};kr.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor(function(i){e.abortTransactionsOnNode_(i)}),this.abortTransactionsOnNode_(r),r.forEachDescendant(function(i){e.abortTransactionsOnNode_(i)}),n};kr.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(e!==null){for(var n=[],r=[],i=-1,o=0;o<e.length;o++)if(e[o].status!==sr.SENT_NEEDS_ABORT){if(e[o].status===sr.SENT)Oe(i===o-1,"All SENT items should be at beginning of queue."),i=o,e[o].status=sr.SENT_NEEDS_ABORT,e[o].abortReason="set";else if(Oe(e[o].status===sr.RUN,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId,!0)),e[o].onComplete){var a=null;n.push(e[o].onComplete.bind(null,new Error("set"),!1,a))}}i===-1?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r);for(var o=0;o<n.length;o++)Yh(n[o])}};/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var DR="databaseURL",LH="FIREBASE_DATABASE_EMULATOR_HOST",JE,RI=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return JE||(JE=new t),JE},t.prototype.interrupt=function(){var e,n,r,i;try{for(var o=Kn(Object.keys(this.repos_)),a=o.next();!a.done;a=o.next()){var c=a.value;try{for(var f=(r=void 0,Kn(Object.keys(this.repos_[c]))),v=f.next();!v.done;v=f.next()){var y=v.value;this.repos_[c][y].interrupt()}}catch(b){r={error:b}}finally{try{v&&!v.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}}}catch(b){e={error:b}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}},t.prototype.resume=function(){var e,n,r,i;try{for(var o=Kn(Object.keys(this.repos_)),a=o.next();!a.done;a=o.next()){var c=a.value;try{for(var f=(r=void 0,Kn(Object.keys(this.repos_[c]))),v=f.next();!v.done;v=f.next()){var y=v.value;this.repos_[c][y].resume()}}catch(b){r={error:b}}finally{try{v&&!v.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}}}catch(b){e={error:b}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}},t.prototype.databaseFromApp=function(e,n,r){var i=r||e.options[DR];i===void 0&&da("Can't determine Firebase Database URL.  Be sure to include "+DR+" option when calling firebase.initializeApp().");var o=h1(i),a=o.repoInfo,c=void 0;typeof process<"u"&&(c=oF[LH]),c&&(i="http://"+c+"?ns="+a.namespace,o=h1(i),a=o.repoInfo),SF("Invalid Firebase Database URL",1,o),o.path.isEmpty()||da("Database URL must point to the root of a Firebase Database (not including a child path).");var f=this.createRepo(a,e,n);return f.database},t.prototype.deleteRepo=function(e){var n=Qo(this.repos_,e.app.name);(!n||Qo(n,e.repoInfo_.toURLString())!==e)&&da("Database "+e.app.name+"("+e.repoInfo_+") has already been deleted."),e.interrupt(),delete n[e.repoInfo_.toURLString()]},t.prototype.createRepo=function(e,n,r){var i=Qo(this.repos_,n.name);i||(i={},this.repos_[n.name]=i);var o=Qo(i,e.toURLString());return o&&da("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new kr(e,this.useRestClient_,n,r),i[e.toURLString()]=o,o},t.prototype.forceRestClient=function(e){this.useRestClient_=e},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var OI=function(){function t(e){this.repo_=e,e instanceof kr||da("Don't call new Database() directly - please use firebase.database()."),this.root_=new xa(e,$e.Empty),this.INTERNAL=new MH(this)}return Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!0,configurable:!0}),t.prototype.ref=function(e){return this.checkDeleted_("ref"),dt("database.ref",0,1,arguments.length),e instanceof xa?this.refFromURL(e.toString()):e!==void 0?this.root_.child(e):this.root_},t.prototype.refFromURL=function(e){var n="database.refFromURL";this.checkDeleted_(n),dt(n,1,1,arguments.length);var r=h1(e);SF(n,1,r);var i=r.repoInfo;return i.host!==this.repo_.repoInfo_.host&&da(n+": Host name does not match the current database: (found "+i.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(r.path.toString())},t.prototype.checkDeleted_=function(e){this.repo_===null&&da("Cannot call "+e+" on a deleted database.")},t.prototype.goOffline=function(){dt("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){dt("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(e){return{".sv":{increment:e}}}},t}(),MH=function(){function t(e){this.database=e}return t.prototype.delete=function(){return Ee(this,void 0,void 0,function(){return we(this,function(e){return this.database.checkDeleted_("delete"),RI.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]})})},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var FH=function(){vl.forceDisallow(),AI.forceAllow()},jH=function(){AI.forceDisallow()},UH=function(){return vl.isAvailable()},VH=function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},BH=function(t,e){t.repo.stats(e)},zH=function(t,e){t.repo.statsIncrementCounter(e)},qH=function(t){return t.repo.dataUpdateCount},WH=function(t,e){return t.repo.interceptServerData_(e)},GH=Object.freeze({__proto__:null,forceLongPolling:FH,forceWebSockets:jH,isWebSocketsAvailable:UH,setSecurityDebugCallback:VH,stats:BH,statsIncrementCounter:zH,dataUpdateCount:qH,interceptServerData:WH});/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $H=Cl;Cl.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Cl.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var HH=BF,KH=function(t){var e=Cl.prototype.put;return Cl.prototype.put=function(n,r,i,o){o!==void 0&&(o=t()),e.call(this,n,r,i,o)},function(){Cl.prototype.put=e}},YH=wF,XH=function(t){return t.queryIdentifier()},QH=function(t){RI.getInstance().forceRestClient(t)},JH=Object.freeze({__proto__:null,DataConnection:$H,RealTimeConnection:HH,hijackHash:KH,ConnectionTarget:YH,queryIdentifier:XH,forceRestClient:QH}),ZH="@firebase/database",eK="0.6.0";/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tK=OI.ServerValue;function nK(t){vH(t.SDK_VERSION);var e=t.INTERNAL.registerComponent(new Fs("database",function(n,r){var i=n.getProvider("app").getImmediate(),o=n.getProvider("auth-internal");return RI.getInstance().databaseFromApp(i,o,r)},"PUBLIC").setServiceProps({Reference:xa,Query:II,Database:OI,DataSnapshot:Xh,enableLogging:lF,INTERNAL:GH,ServerValue:tK,TEST_ACCESS:JH}).setMultipleInstances(!0));t.registerVersion(ZH,eK),Ia()&&(module.exports=e)}nK(ze);var rK=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},De,PI=PI||{},bt=rK;function ni(t){return typeof t=="string"}function s_(t){return typeof t=="number"}function Wc(t,e){t=t.split("."),e=e||bt;for(var n=0;n<t.length;n++)if(e=e[t[n]],e==null)return null;return e}function Hm(){}function Up(t){var e=typeof t;if(e=="object")if(t){if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if(n=="[object Window]")return"object";if(n=="[object Array]"||typeof t.length=="number"&&typeof t.splice<"u"&&typeof t.propertyIsEnumerable<"u"&&!t.propertyIsEnumerable("splice"))return"array";if(n=="[object Function]"||typeof t.call<"u"&&typeof t.propertyIsEnumerable<"u"&&!t.propertyIsEnumerable("call"))return"function"}else return"null";else if(e=="function"&&typeof t.call>"u")return"object";return e}function Qh(t){return Up(t)=="array"}function g1(t){var e=Up(t);return e=="array"||e=="object"&&typeof t.length=="number"}function Vp(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}var Km="closure_uid_"+(1e9*Math.random()>>>0),WF=0;function iK(t,e,n){return t.call.apply(t.bind,arguments)}function oK(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Ur(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Ur=iK:Ur=oK,Ur.apply(null,arguments)}function ad(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}var Da=Date.now||function(){return+new Date};function zr(t,e){function n(){}n.prototype=e.prototype,t.N=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.yb=function(r,i,o){for(var a=Array(arguments.length-2),c=2;c<arguments.length;c++)a[c-2]=arguments[c];return e.prototype[i].apply(r,a)}}function La(){this.j=this.j,this.i=this.i}var sK=0;La.prototype.j=!1;La.prototype.la=function(){!this.j&&(this.j=!0,this.G(),sK!=0)&&(this[Km]||(this[Km]=++WF))};La.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var GF=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(ni(t))return ni(e)&&e.length==1?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},a_=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=ni(t)?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function aK(t){e:{for(var e=XK,n=t.length,r=ni(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break e}e=-1}return 0>e?null:ni(t)?t.charAt(e):t[e]}function LR(t){return Array.prototype.concat.apply([],arguments)}function DI(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Ym(t){return/^[\s\xa0]*$/.test(t)}var MR=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Mr(t,e){return t.indexOf(e)!=-1}function ZE(t,e){return t<e?-1:t>e?1:0}var vi;e:{var FR=bt.navigator;if(FR){var jR=FR.userAgent;if(jR){vi=jR;break e}}vi=""}function LI(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function $F(t){var e={},n;for(n in t)e[n]=t[n];return e}var UR="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function HF(t,e){for(var n,r,i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(var o=0;o<UR.length;o++)n=UR[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function MI(t){return MI[" "](t),t}MI[" "]=Hm;function uK(t,e){var n=hK;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var lK=Mr(vi,"Opera"),Ca=Mr(vi,"Trident")||Mr(vi,"MSIE"),KF=Mr(vi,"Edge"),m1=KF||Ca,YF=Mr(vi,"Gecko")&&!(Mr(vi.toLowerCase(),"webkit")&&!Mr(vi,"Edge"))&&!(Mr(vi,"Trident")||Mr(vi,"MSIE"))&&!Mr(vi,"Edge"),cK=Mr(vi.toLowerCase(),"webkit")&&!Mr(vi,"Edge");function XF(){var t=bt.document;return t?t.documentMode:void 0}var Xm;e:{var eb="",tb=function(){var t=vi;if(YF)return/rv:([^\);]+)(\)|;)/.exec(t);if(KF)return/Edge\/([\d\.]+)/.exec(t);if(Ca)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(cK)return/WebKit\/(\S+)/.exec(t);if(lK)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(tb&&(eb=tb?tb[1]:""),Ca){var nb=XF();if(nb!=null&&nb>parseFloat(eb)){Xm=String(nb);break e}}Xm=eb}var hK={};function QF(t){return uK(t,function(){for(var e=0,n=MR(String(Xm)).split("."),r=MR(String(t)).split("."),i=Math.max(n.length,r.length),o=0;e==0&&o<i;o++){var a=n[o]||"",c=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],a[0].length==0&&c[0].length==0)break;e=ZE(a[1].length==0?0:parseInt(a[1],10),c[1].length==0?0:parseInt(c[1],10))||ZE(a[2].length==0,c[2].length==0)||ZE(a[2],c[2]),a=a[3],c=c[3]}while(e==0)}return 0<=e})}var u_,VR=bt.document;u_=VR&&Ca?XF()||(VR.compatMode=="CSS1Compat"?parseInt(Xm,10):5):void 0;var FI=!Ca||9<=Number(u_),fK=Ca&&!QF("9"),dK=function(){if(!bt.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{bt.addEventListener("test",Hm,e),bt.removeEventListener("test",Hm,e)}catch{}return t}();function Jr(t,e){this.type=t,this.a=this.target=e,this.Ia=!0}Jr.prototype.b=function(){this.Ia=!1};function ep(t,e){if(Jr.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(YF){e:{try{MI(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=ni(t.pointerType)?t.pointerType:pK[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}zr(ep,Jr);var pK={2:"touch",3:"pen",4:"mouse"};ep.prototype.b=function(){ep.N.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,fK)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch{}};var Bp="closure_listenable_"+(1e6*Math.random()|0),vK=0;function gK(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.da=i,this.key=++vK,this.X=this.Z=!1}function l_(t){t.X=!0,t.listener=null,t.proxy=null,t.src=null,t.da=null}function c_(t){this.src=t,this.a={},this.b=0}c_.prototype.add=function(t,e,n,r,i){var o=t.toString();t=this.a[o],t||(t=this.a[o]=[],this.b++);var a=_1(t,e,r,i);return-1<a?(e=t[a],n||(e.Z=!1)):(e=new gK(e,this.src,o,!!r,i),e.Z=n,t.push(e)),e};function y1(t,e){var n=e.type;if(n in t.a){var r=t.a[n],i=GF(r,e),o;(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(l_(e),t.a[n].length==0&&(delete t.a[n],t.b--))}}function _1(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.X&&o.listener==e&&o.capture==!!n&&o.da==r)return i}return-1}var jI="closure_lm_"+(1e6*Math.random()|0),rb={};function UI(t,e,n,r,i){if(r&&r.once)return ZF(t,e,n,r,i);if(Qh(e)){for(var o=0;o<e.length;o++)UI(t,e[o],n,r,i);return null}return n=zI(n),t&&t[Bp]?t.za(e,n,Vp(r)?!!r.capture:!!r,i):JF(t,e,n,!1,r,i)}function JF(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=Vp(i)?!!i.capture:!!i;if(a&&!FI)return null;var c=BI(t);if(c||(t[jI]=c=new c_(t)),n=c.add(e,n,r,a,o),n.proxy)return n;if(r=mK(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)dK||(i=a),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(tj(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function mK(){var t=yK,e=FI?function(n){return t.call(e.src,e.listener,n)}:function(n){if(n=t.call(e.src,e.listener,n),!n)return n};return e}function ZF(t,e,n,r,i){if(Qh(e)){for(var o=0;o<e.length;o++)ZF(t,e[o],n,r,i);return null}return n=zI(n),t&&t[Bp]?t.Aa(e,n,Vp(r)?!!r.capture:!!r,i):JF(t,e,n,!0,r,i)}function ej(t,e,n,r,i){if(Qh(e))for(var o=0;o<e.length;o++)ej(t,e[o],n,r,i);else r=Vp(r)?!!r.capture:!!r,n=zI(n),t&&t[Bp]?(t=t.c,e=String(e).toString(),e in t.a&&(o=t.a[e],n=_1(o,n,r,i),-1<n&&(l_(o[n]),Array.prototype.splice.call(o,n,1),o.length==0&&(delete t.a[e],t.b--)))):t&&(t=BI(t))&&(e=t.a[e.toString()],t=-1,e&&(t=_1(e,n,r,i)),(n=-1<t?e[t]:null)&&VI(n))}function VI(t){if(!s_(t)&&t&&!t.X){var e=t.src;if(e&&e[Bp])y1(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(tj(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=BI(e))?(y1(n,t),n.b==0&&(n.src=null,e[jI]=null)):l_(t)}}}function tj(t){return t in rb?rb[t]:rb[t]="on"+t}function BR(t,e){var n=t.listener,r=t.da||t.src;return t.Z&&VI(t),n.call(r,e)}function yK(t,e){return t.X?!0:FI?BR(t,new ep(e,this)):(e=new ep(e||Wc("window.event"),this),BR(t,e))}function BI(t){return t=t[jI],t instanceof c_?t:null}var ib="__closure_events_fn_"+(1e9*Math.random()>>>0);function zI(t){return Up(t)=="function"?t:(t[ib]||(t[ib]=function(e){return t.handleEvent(e)}),t[ib])}function ro(){La.call(this),this.c=new c_(this),this.J=this,this.B=null}zr(ro,La);ro.prototype[Bp]=!0;De=ro.prototype;De.addEventListener=function(t,e,n,r){UI(this,t,e,n,r)};De.removeEventListener=function(t,e,n,r){ej(this,t,e,n,r)};De.dispatchEvent=function(t){var e,n=this.B;if(n)for(e=[];n;n=n.B)e.push(n);n=this.J;var r=t.type||t;if(ni(t))t=new Jr(t,n);else if(t instanceof Jr)t.target=t.target||n;else{var i=t;t=new Jr(r,n),HF(t,i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.a=e[o];i=_g(a,r,!0,t)&&i}if(a=t.a=n,i=_g(a,r,!0,t)&&i,i=_g(a,r,!1,t)&&i,e)for(o=0;o<e.length;o++)a=t.a=e[o],i=_g(a,r,!1,t)&&i;return i};De.G=function(){if(ro.N.G.call(this),this.c){var t=this.c,e;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)l_(n[r]);delete t.a[e],t.b--}}this.B=null};De.za=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)};De.Aa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};function _g(t,e,n,r){if(e=t.c.a[String(e)],!e)return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.X&&a.capture==n){var c=a.listener,f=a.da||a.src;a.Z&&y1(t.c,a),i=c.call(f,r)!==!1&&i}}return i&&r.Ia!=0}var nj=bt.JSON.stringify;function rj(t,e){this.c=t,this.f=e,this.b=0,this.a=null}rj.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};function ij(){this.b=this.a=null}var oj=new rj(function(){return new qI},function(t){t.reset()});ij.prototype.add=function(t,e){var n=oj.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n};function _K(){var t=aj,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function qI(){this.next=this.b=this.a=null}qI.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null};qI.prototype.reset=function(){this.next=this.b=this.a=null};function wK(t){bt.setTimeout(function(){throw t},0)}function sj(t,e){w1||EK(),E1||(w1(),E1=!0),aj.add(t,e)}var w1;function EK(){var t=bt.Promise.resolve(void 0);w1=function(){t.then(bK)}}var E1=!1,aj=new ij;function bK(){for(var t;t=_K();){try{t.a.call(t.b)}catch(n){wK(n)}var e=oj;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}E1=!1}function h_(t,e){ro.call(this),this.b=t||1,this.a=e||bt,this.f=Ur(this.gb,this),this.g=Da()}zr(h_,ro);De=h_.prototype;De.ba=!1;De.L=null;De.gb=function(){if(this.ba){var t=Da()-this.g;0<t&&t<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-t):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.ba&&(WI(this),this.start()))}};De.start=function(){this.ba=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=Da())};function WI(t){t.ba=!1,t.L&&(t.a.clearTimeout(t.L),t.L=null)}De.G=function(){h_.N.G.call(this),WI(this),delete this.a};function GI(t,e,n){if(Up(t)=="function")n&&(t=Ur(t,n));else if(t&&typeof t.handleEvent=="function")t=Ur(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:bt.setTimeout(t,e||0)}function f_(t,e,n){La.call(this),this.f=n!=null?Ur(t,n):t,this.c=e,this.b=Ur(this.$a,this),this.a=[]}zr(f_,La);De=f_.prototype;De.ea=!1;De.U=null;De.Ta=function(t){this.a=arguments,this.U?this.ea=!0:uj(this)};De.G=function(){f_.N.G.call(this),this.U&&(bt.clearTimeout(this.U),this.U=null,this.ea=!1,this.a=[])};De.$a=function(){this.U=null,this.ea&&(this.ea=!1,uj(this))};function uj(t){t.U=GI(t.b,t.c),t.f.apply(null,t.a)}function tp(t){La.call(this),this.b=t,this.a={}}zr(tp,La);var zR=[];function lj(t,e,n,r){Qh(n)||(n&&(zR[0]=n.toString()),n=zR);for(var i=0;i<n.length;i++){var o=UI(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function cj(t){LI(t.a,function(e,n){this.a.hasOwnProperty(n)&&VI(e)},t),t.a={}}tp.prototype.G=function(){tp.N.G.call(this),cj(this)};tp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function SK(){}var jh=new ro;function hj(t){Jr.call(this,"serverreachability",t)}zr(hj,Jr);function np(t){jh.dispatchEvent(new hj(jh))}function fj(t){Jr.call(this,"statevent",t)}zr(fj,Jr);function cn(t){jh.dispatchEvent(new fj(jh))}function dj(t){Jr.call(this,"timingevent",t)}zr(dj,Jr);function d_(t,e){if(Up(t)!="function")throw Error("Fn must not be null and must be a function");return bt.setTimeout(function(){t()},e)}var p_={NO_ERROR:0,hb:1,ob:2,nb:3,kb:4,mb:5,pb:6,La:7,TIMEOUT:8,sb:9},pj={jb:"complete",wb:"success",Ma:"error",La:"abort",ub:"ready",vb:"readystatechange",TIMEOUT:"timeout",qb:"incrementaldata",tb:"progress",lb:"downloadprogress",xb:"uploadprogress"};function vj(){}vj.prototype.a=null;function qR(t){var e;return(e=t.a)||(e=t.a={}),e}function gj(){}var zp={OPEN:"a",ib:"b",Ma:"c",rb:"d"};function $I(){Jr.call(this,"d")}zr($I,Jr);function HI(){Jr.call(this,"c")}zr(HI,Jr);var mj;function yj(){}zr(yj,vj);mj=new yj;function Zl(t,e,n){this.g=t,this.W=e,this.V=n||1,this.I=new tp(this),this.O=TK,t=m1?125:void 0,this.P=new h_(t),this.h=null,this.b=!1,this.l=this.D=this.f=this.F=this.v=this.R=this.i=null,this.j=[],this.a=null,this.A=0,this.c=this.w=null,this.o=-1,this.m=!1,this.J=0,this.B=null,this.s=this.S=this.H=!1}var TK=45e3,_j={},b1={};De=Zl.prototype;De.setTimeout=function(t){this.O=t};function S1(t,e,n){t.F=1,t.f=g_(js(e)),t.l=n,t.H=!0,wj(t,null)}function KI(t,e,n,r){t.F=1,t.f=g_(js(e)),t.l=null,t.H=n,wj(t,r)}function wj(t,e){t.v=Da(),qp(t),t.D=js(t.f),Jm(t.D,"t",t.V),t.A=0,t.a=t.g.$(t.g.Y()?e:null),0<t.J&&(t.B=new f_(Ur(t.Ja,t,t.a),t.J)),lj(t.I,t.a,"readystatechange",t.cb),e=t.h?$F(t.h):{},t.l?(t.w||(t.w="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ca(t.D,t.w,t.l,e)):(t.w="GET",t.a.ca(t.D,t.w,null,e)),np()}De.cb=function(t){t=t.target;var e=this.B;e&&hu(t)==3?e.Ta():this.Ja(t)};De.Ja=function(t){try{if(t==this.a)e:{var e=hu(this.a),n=this.a.ya(),r=this.a.T();if(!(3>e||e==3&&!m1&&!this.a.aa())){this.m||e!=4||n==7||(n==8||0>=r?np(3):np(2)),v_(this);var i=this.a.T();this.o=i;var o=this.a.aa();if(this.b=i==200){if(this.S&&!this.s){t:{if(this.a){var a=ap(this.a,"X-HTTP-Initial-Response");if(a&&!Ym(a)){var c=a;break t}}c=null}if(c)this.s=!0,T1(this,c);else{this.b=!1,this.c=3,cn(12),yh(this),Qm(this);break e}}this.H?(Ej(this,e,o),m1&&this.b&&e==3&&(lj(this.I,this.P,"tick",this.bb),this.P.start())):T1(this,o),e==4&&yh(this),this.b&&!this.m&&(e==4?this.g.na(this):(this.b=!1,qp(this)))}else i==400&&0<o.indexOf("Unknown SID")?(this.c=3,cn(12)):(this.c=0,cn(13)),yh(this),Qm(this)}}}catch{}finally{}};function Ej(t,e,n){for(var r=!0;!t.m&&t.A<n.length;){var i=IK(t,n);if(i==b1){e==4&&(t.c=4,cn(),r=!1);break}else if(i==_j){t.c=4,cn(),r=!1;break}else T1(t,i)}e==4&&n.length==0&&(t.c=1,cn(),r=!1),t.b=t.b&&r,r||(yh(t),Qm(t))}De.bb=function(){if(this.a){var t=hu(this.a),e=this.a.aa();this.A<e.length&&(v_(this),Ej(this,t,e),this.b&&t!=4&&qp(this))}};function IK(t,e){var n=t.A,r=e.indexOf(`
`,n);return r==-1?b1:(n=Number(e.substring(n,r)),isNaN(n)?_j:(r+=1,r+n>e.length?b1:(e=e.substr(r,n),t.A=r+n,e)))}De.cancel=function(){this.m=!0,yh(this)};function qp(t){t.R=Da()+t.O,bj(t,t.O)}function bj(t,e){if(t.i!=null)throw Error("WatchDog timer not null");t.i=d_(Ur(t.ab,t),e)}function v_(t){t.i&&(bt.clearTimeout(t.i),t.i=null)}De.ab=function(){this.i=null;var t=Da();0<=t-this.R?(this.F!=2&&(np(),cn()),yh(this),this.c=2,Qm(this)):bj(this,this.R-t)};function Qm(t){t.g.Ca()||t.m||t.g.na(t)}function yh(t){v_(t);var e=t.B;e&&typeof e.la=="function"&&e.la(),t.B=null,WI(t.P),cj(t.I),t.a&&(e=t.a,t.a=null,e.abort(),e.la())}function T1(t,e){try{t.g.Fa(t,e),np(4)}catch{}}function xK(t){if(t.C&&typeof t.C=="function")return t.C();if(ni(t))return t.split("");if(g1(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function YI(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(g1(t)||ni(t))a_(t,e,void 0);else{if(t.K&&typeof t.K=="function")var n=t.K();else if(t.C&&typeof t.C=="function")n=void 0;else if(g1(t)||ni(t)){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;r=xK(t),i=r.length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function ec(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof ec)for(n=t.K(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}De=ec.prototype;De.C=function(){XI(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t};De.K=function(){return XI(this),this.a.concat()};function CK(t){t.b={},t.a.length=0,t.c=0}function Sj(t,e){Na(t.b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&XI(t))}function XI(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Na(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)r=t.a[e],Na(i,r)||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}De.get=function(t,e){return Na(this.b,t)?this.b[t]:e};De.set=function(t,e){Na(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e};De.forEach=function(t,e){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};function Na(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var Tj=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function NK(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function ku(t,e){this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1;var n;t instanceof ku?(this.h=e!==void 0?e:t.h,rp(this,t.f),this.j=t.j,ip(this,t.b),op(this,t.i),this.a=t.a,I1(this,Nj(t.c)),this.g=t.g):t&&(n=String(t).match(Tj))?(this.h=!!e,rp(this,n[1]||"",!0),this.j=xd(n[2]||""),ip(this,n[3]||"",!0),op(this,n[4]),this.a=xd(n[5]||"",!0),I1(this,n[6]||"",!0),this.g=xd(n[7]||"")):(this.h=!!e,this.c=new sp(null,this.h))}ku.prototype.toString=function(){var t=[],e=this.f;e&&t.push(ud(e,WR,!0),":");var n=this.b;return(n||e=="file")&&(t.push("//"),(e=this.j)&&t.push(ud(e,WR,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.i,n!=null&&t.push(":",String(n))),(n=this.a)&&(this.b&&n.charAt(0)!="/"&&t.push("/"),t.push(ud(n,n.charAt(0)=="/"?PK:OK,!0))),(n=this.c.toString())&&t.push("?",n),(n=this.g)&&t.push("#",ud(n,LK)),t.join("")};ku.prototype.resolve=function(t){var e=js(this),n=!!t.f;n?rp(e,t.f):n=!!t.j,n?e.j=t.j:n=!!t.b,n?ip(e,t.b):n=t.i!=null;var r=t.a;if(n)op(e,t.i);else if(n=!!t.a){if(r.charAt(0)!="/")if(this.b&&!this.a)r="/"+r;else{var i=e.a.lastIndexOf("/");i!=-1&&(r=e.a.substr(0,i+1)+r)}if(i=r,i==".."||i==".")r="";else if(Mr(i,"./")||Mr(i,"/.")){r=i.lastIndexOf("/",0)==0,i=i.split("/");for(var o=[],a=0;a<i.length;){var c=i[a++];c=="."?r&&a==i.length&&o.push(""):c==".."?((1<o.length||o.length==1&&o[0]!="")&&o.pop(),r&&a==i.length&&o.push("")):(o.push(c),r=!0)}r=o.join("/")}else r=i}return n?e.a=r:n=t.c.toString()!=="",n?I1(e,Nj(t.c)):n=!!t.g,n&&(e.g=t.g),e};function js(t){return new ku(t)}function rp(t,e,n){t.f=n?xd(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function ip(t,e,n){t.b=n?xd(e,!0):e}function op(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.i=e}else t.i=null}function I1(t,e,n){e instanceof sp?(t.c=e,MK(t.c,t.h)):(n||(e=ud(e,DK)),t.c=new sp(e,t.h))}function bn(t,e,n){t.c.set(e,n)}function Jm(t,e,n){Qh(n)||(n=[String(n)]),Cj(t.c,e,n)}function g_(t){return bn(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Da()).toString(36)),t}function AK(t){return t instanceof ku?js(t):new ku(t,void 0)}function kK(t,e,n,r){var i=new ku(null,void 0);return t&&rp(i,t),e&&ip(i,e),n&&op(i,n),r&&(i.a=r),i}function xd(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ud(t,e,n){return ni(t)?(t=encodeURI(t).replace(e,RK),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function RK(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var WR=/[#\/\?@]/g,OK=/[#\?:]/g,PK=/[#\?]/g,DK=/[#\?@]/g,LK=/#/g;function sp(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function ju(t){t.a||(t.a=new ec,t.b=0,t.c&&NK(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}De=sp.prototype;De.add=function(t,e){ju(this),this.c=null,t=Jh(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this};function Ij(t,e){ju(t),e=Jh(t,e),Na(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Sj(t.a,e))}function xj(t,e){return ju(t),e=Jh(t,e),Na(t.a.b,e)}De.forEach=function(t,e){ju(this),this.a.forEach(function(n,r){a_(n,function(i){t.call(e,i,r,this)},this)},this)};De.K=function(){ju(this);for(var t=this.a.C(),e=this.a.K(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n};De.C=function(t){ju(this);var e=[];if(ni(t))xj(this,t)&&(e=LR(e,this.a.get(Jh(this,t))));else{t=this.a.C();for(var n=0;n<t.length;n++)e=LR(e,t[n])}return e};De.set=function(t,e){return ju(this),this.c=null,t=Jh(this,t),xj(this,t)&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this};De.get=function(t,e){return t?(t=this.C(t),0<t.length?String(t[0]):e):e};function Cj(t,e,n){Ij(t,e),0<n.length&&(t.c=null,t.a.set(Jh(t,e),DI(n)),t.b+=n.length)}De.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.K(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.C(r);for(var o=0;o<r.length;o++){var a=i;r[o]!==""&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};function Nj(t){var e=new sp;return e.c=t.c,t.a&&(e.a=new ec(t.a),e.b=t.b),e}function Jh(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function MK(t,e){e&&!t.f&&(ju(t),t.c=null,t.a.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(Ij(this,r),Cj(this,i,n))},t)),t.f=e}function FK(){}function jK(){}zr(jK,FK);function Aj(t){this.a=t,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}De=Aj.prototype;De.M=null;function kj(t){var e=t.a.F.a;if(e!=null)cn(),e?(cn(),up(t.a,t,!1)):(cn(),up(t.a,t,!0));else{t.b=new Zl(t,void 0,void 0),t.b.h=t.h,e=t.a,e=E_(e,e.Y()?t.f:null,t.i),cn(),Jm(e,"TYPE","xmlhttp");var n=t.a.j,r=t.a.I;n&&r&&bn(e,n,r),KI(t.b,e,!1,t.f)}}De.$=function(t){return this.a.$(t)};De.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1};De.Ca=function(){return!1};De.Fa=function(t,e){if(this.c=t.o,this.M==0){if(!this.a.o&&(t=t.a)){var n=ap(t,"X-Client-Wire-Protocol");this.l=n||null,this.a.j&&(t=ap(t,"X-HTTP-Session-Id"))&&(this.a.I=t)}if(e){try{var r=this.a.ja.a.parse(e)}catch{e=this.a,e.m=this.c,Cs(e,2);return}this.f=r[0]}else e=this.a,e.m=this.c,Cs(e,2)}else this.M==1&&(this.g?cn():e=="11111"?(cn(),this.g=!0,(!Ca||10<=Number(u_))&&(this.c=200,this.b.cancel(),cn(),up(this.a,this,!0))):(cn(),this.g=!1))};De.na=function(){if(this.c=this.b.o,this.b.b)this.M==0?(this.M=1,kj(this)):this.M==1&&(this.g?(cn(),up(this.a,this,!0)):(cn(),up(this.a,this,!1)));else{(this.M==0||this.M==1)&&cn();var t=this.a;t.m=this.c,Cs(t,2)}};De.Y=function(){return this.a.Y()};De.ma=function(){return this.a.ma()};function UK(){this.a=this.b=null}function m_(){this.a=new ec}function Zm(t){var e=typeof t;return e=="object"&&t||e=="function"?"o"+(t[Km]||(t[Km]=++WF)):e.charAt(0)+t}m_.prototype.add=function(t){this.a.set(Zm(t),t)};m_.prototype.C=function(){return this.a.C()};function VK(t,e){this.b=t,this.a=e}function Rj(t){this.g=t||BK,bt.PerformanceNavigationTiming?(t=bt.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(bt.ka&&bt.ka.Da&&bt.ka.Da()&&bt.ka.Da().zb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new m_),this.b=null,this.c=[]}var BK=10;function Oj(t,e){!t.a&&(Mr(e,"spdy")||Mr(e,"quic")||Mr(e,"h2"))&&(t.f=t.g,t.a=new m_,t.b&&(QI(t,t.b),t.b=null))}function Pj(t){return t.b?!0:t.a?t.a.a.c>=t.f:!1}function Dj(t){return t.b?1:t.a?t.a.a.c:0}function x1(t,e){return t.b?t=t.b==e:t.a?(e=Zm(e),t=Na(t.a.a.b,e)):t=!1,t}function QI(t,e){t.a?t.a.add(e):t.b=e}function Lj(t,e){if(t.b&&t.b==e)t.b=null;else{var n;(n=t.a)&&(n=Zm(e),n=Na(t.a.a.b,n)),n&&Sj(t.a.a,Zm(e))}}Rj.prototype.cancel=function(){this.c=Mj(this),this.b?(this.b.cancel(),this.b=null):this.a&&this.a.a.c!=0&&(a_(this.a.C(),function(t){t.cancel()}),CK(this.a.a))};function Mj(t){if(t.b!=null)return t.c.concat(t.b.j);if(t.a!=null&&t.a.a.c!=0){var e=t.c;return a_(t.a.C(),function(n){e=e.concat(n.j)}),e}return DI(t.c)}function JI(){}JI.prototype.stringify=function(t){return bt.JSON.stringify(t,void 0)};JI.prototype.parse=function(t){return bt.JSON.parse(t,void 0)};function zK(){this.a=new JI}function qK(t,e,n){var r=n||"";try{YI(t,function(i,o){var a=i;Vp(i)&&(a=nj(i)),e.push(r+o+"="+encodeURIComponent(a))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function WK(t,e){var n=new SK;if(bt.Image){var r=new Image;r.onload=ad(wg,n,r,"TestLoadImage: loaded",!0,e),r.onerror=ad(wg,n,r,"TestLoadImage: error",!1,e),r.onabort=ad(wg,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=ad(wg,n,r,"TestLoadImage: timeout",!1,e),bt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function wg(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}var GK=bt.JSON.parse;function yr(t){ro.call(this),this.headers=new ec,this.H=t||null,this.b=!1,this.s=this.a=null,this.A="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.I=$K,this.D=this.F=!1}zr(yr,ro);var $K="",HK=/^https?$/i,KK=["POST","PUT"];De=yr.prototype;De.ca=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.A+"; newUri="+t);e=e?e.toUpperCase():"GET",this.A=t,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?qR(this.H):qR(mj),this.a.onreadystatechange=Ur(this.Ea,this);try{this.w=!0,this.a.open(e,String(t),!0),this.w=!1}catch(o){GR(this,o);return}t=n||"";var i=new ec(this.headers);r&&YI(r,function(o,a){i.set(a,o)}),r=aK(i.K()),n=bt.FormData&&t instanceof bt.FormData,!(0<=GF(KK,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(o,a){this.a.setRequestHeader(a,o)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Uj(this),0<this.o&&((this.D=YK(this.a))?(this.a.timeout=this.o,this.a.ontimeout=Ur(this.Ba,this)):this.m=GI(this.Ba,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){GR(this,o)}};function YK(t){return Ca&&QF(9)&&s_(t.timeout)&&t.ontimeout!==void 0}function XK(t){return t.toLowerCase()=="content-type"}De.Ba=function(){typeof PI<"u"&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))};function GR(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Fj(t),y_(t)}function Fj(t){t.v||(t.v=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}De.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),y_(this))};De.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),y_(this,!0)),yr.N.G.call(this)};De.Ea=function(){this.j||(this.w||this.l||this.g?jj(this):this.Za())};De.Za=function(){jj(this)};function jj(t){if(t.b&&typeof PI<"u"&&(!t.s[1]||hu(t)!=4||t.T()!=2)){if(t.l&&hu(t)==4)GI(t.Ea,0,t);else if(t.dispatchEvent("readystatechange"),hu(t)==4){t.b=!1;try{var e=t.T();e:switch(e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break e;default:n=!1}var r;if(!(r=n)){var i;if(i=e===0){var o=String(t.A).match(Tj)[1]||null;if(!o&&bt.self&&bt.self.location){var a=bt.self.location.protocol;o=a.substr(0,a.length-1)}i=!HK.test(o?o.toLowerCase():"")}r=i}if(r)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var c=2<hu(t)?t.a.statusText:""}catch{c=""}t.f=c+" ["+t.T()+"]",Fj(t)}}finally{y_(t)}}}}function y_(t,e){if(t.a){Uj(t);var n=t.a,r=t.s[0]?Hm:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch{}}}function Uj(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(bt.clearTimeout(t.m),t.m=null)}function hu(t){return t.a?t.a.readyState:0}De.T=function(){try{return 2<hu(this)?this.a.status:-1}catch{return-1}};De.aa=function(){try{return this.a?this.a.responseText:""}catch{return""}};De.Ua=function(t){if(this.a){var e=this.a.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),GK(e)}};function ap(t,e){return t.a?t.a.getResponseHeader(e):null}De.ya=function(){return this.h};De.Xa=function(){return ni(this.f)?this.f:String(this.f)};function QK(t){var e="";return LI(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function __(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}if(r)return t;if(n=QK(n),ni(t)){if(e=encodeURIComponent(String(e)),n=n!=null?"="+encodeURIComponent(String(n)):"",e+=n){if(n=t.indexOf("#"),0>n&&(n=t.length),r=t.indexOf("?"),0>r||r>n){r=n;var i=""}else i=t.substring(r+1,n);t=[t.substr(0,r),i,t.substr(n)],n=t[1],t[1]=e?n?n+"&"+e:e:n,t=t[0]+(t[1]?"?"+t[1]:"")+t[2]}return t}return bn(t,e,n),t}function Vj(t){this.f=[],this.F=new UK,this.ga=this.pa=this.B=this.ha=this.a=this.I=this.j=this.V=this.g=this.J=this.i=null,this.Qa=this.P=0,this.Oa=!!Wc("internalChannelParams.failFast",t),this.ia=this.w=this.s=this.l=this.h=this.c=null,this.oa=!0,this.m=this.ra=this.O=-1,this.S=this.v=this.A=0,this.Na=Wc("internalChannelParams.baseRetryDelayMs",t)||5e3,this.Ra=Wc("internalChannelParams.retryDelaySeedMs",t)||1e4,this.Pa=Wc("internalChannelParams.forwardChannelMaxRetries",t)||2,this.qa=Wc("internalChannelParams.forwardChannelRequestTimeoutMs",t)||2e4,this.Ka=t&&t.Ab||void 0,this.D=void 0,this.R=t&&t.supportsCrossDomainXhr||!1,this.H="",this.b=new Rj(t&&t.concurrentRequestLimit),this.ja=new zK,this.o=t&&t.backgroundChannelTest!==void 0?t.backgroundChannelTest:!0,(this.W=t&&t.fastHandshake||!1)&&!this.o&&(this.o=!0),t&&t.forceLongPolling&&(this.oa=!1),this.fa=void 0}De=Vj.prototype;De.wa=8;De.u=1;function ZI(t){if(Bj(t),t.u==3){var e=t.P++,n=js(t.B);bn(n,"SID",t.H),bn(n,"RID",e),bn(n,"TYPE","terminate"),Wp(t,n),e=new Zl(t,e,void 0),e.F=2,e.f=g_(js(n)),n=!1,bt.navigator&&bt.navigator.sendBeacon&&(n=bt.navigator.sendBeacon(e.f.toString(),"")),!n&&bt.Image&&(new Image().src=e.f,n=!0),n||(e.a=e.g.$(null),e.a.ca(e.f)),e.v=Da(),qp(e)}Gj(t)}function Bj(t){t.w&&(t.w.abort(),t.w=null),t.a&&(t.a.cancel(),t.a=null),t.l&&(bt.clearTimeout(t.l),t.l=null),ey(t),t.b.cancel(),t.h&&(s_(t.h)&&bt.clearTimeout(t.h),t.h=null)}function ob(t,e){t.f.push(new VK(t.Qa++,e)),t.u==3&&w_(t)}De.Ca=function(){return this.u==0};function w_(t){Pj(t.b)||t.h||(t.h=!0,sj(t.Ha,t),t.A=0)}function JK(t,e){return Dj(t.b)>=t.b.f-(t.h?1:0)?!1:t.h?(t.f=e.j.concat(t.f),!0):t.u==1||t.u==2||t.A>=(t.Oa?0:t.Pa)?!1:(t.h=d_(Ur(t.Ha,t,e),Wj(t,t.A)),t.A++,!0)}De.Ha=function(t){if(this.h)if(this.h=null,this.u==1){if(!t){this.P=Math.floor(1e5*Math.random()),t=this.P++;var e=new Zl(this,t,void 0),n=this.i;this.J&&(n?(n=$F(n),HF(n,this.J)):n=this.J),this.g===null&&(e.h=n);var r;if(this.W)e:{for(var i=r=0;i<this.f.length;i++){t:{var o=this.f[i];if("__data__"in o.a&&(o=o.a.__data__,ni(o))){o=o.length;break t}o=void 0}if(o===void 0)break;if(r+=o,4096<r){r=i;break e}if(r===4096||i===this.f.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=zj(this,e,r),i=js(this.B),bn(i,"RID",t),bn(i,"CVER",22),this.o&&this.j&&bn(i,"X-HTTP-Session-Id",this.j),Wp(this,i),this.g&&n&&__(i,this.g,n),QI(this.b,e),this.W?(bn(i,"$req",r),bn(i,"SID","null"),e.S=!0,S1(e,i,null)):S1(e,i,r),this.u=2}}else this.u==3&&(t?$R(this,t):this.f.length==0||Pj(this.b)||$R(this))};function $R(t,e){var n;e?n=e.W:n=t.P++;var r=js(t.B);bn(r,"SID",t.H),bn(r,"RID",n),bn(r,"AID",t.O),Wp(t,r),t.g&&t.i&&__(r,t.g,t.i),n=new Zl(t,n,t.A+1),t.g===null&&(n.h=t.i),e&&(t.f=e.j.concat(t.f)),e=zj(t,n,1e3),n.setTimeout(Math.round(.5*t.qa)+Math.round(.5*t.qa*Math.random())),QI(t.b,n),S1(n,r,e)}function Wp(t,e){t.c&&YI({},function(n,r){bn(e,r,n)})}function zj(t,e,n){n=Math.min(t.f.length,n);var r=t.c?Ur(t.c.Sa,t.c,t):null;e:for(var i=t.f,o=-1;;){var a=["count="+n];o==-1?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var c=!0,f=0;f<n;f++){var v=i[f].b,y=i[f].a;if(v-=o,0>v)o=Math.max(0,i[f].b-100),c=!1;else try{qK(y,a,"req"+v+"_")}catch{r&&r(y)}}if(c){r=a.join("&");break e}}return t=t.f.splice(0,n),e.j=t,r}function qj(t){t.a||t.l||(t.S=1,sj(t.Ga,t),t.v=0)}function ex(t){return t.a||t.l||3<=t.v?!1:(t.S++,t.l=d_(Ur(t.Ga,t),Wj(t,t.v)),t.v++,!0)}De.Ga=function(){this.l=null,this.a=new Zl(this,"rpc",this.S),this.g===null&&(this.a.h=this.i),this.a.J=0;var t=js(this.pa);bn(t,"RID","rpc"),bn(t,"SID",this.H),bn(t,"CI",this.ia?"0":"1"),bn(t,"AID",this.O),Wp(this,t),bn(t,"TYPE","xmlhttp"),this.g&&this.i&&__(t,this.g,this.i),this.D&&this.a.setTimeout(this.D),KI(this.a,t,!0,this.ga)};function up(t,e,n){var r=e.l;r&&Oj(t.b,r),t.ia=t.oa&&n,t.m=e.c,t.B=E_(t,null,t.ha),w_(t)}De.Fa=function(t,e){if(this.u!=0&&(this.a==t||x1(this.b,t))){if(this.m=t.o,!t.s&&x1(this.b,t)&&this.u==3){try{var n=this.ja.a.parse(e)}catch{n=null}if(Qh(n)&&n.length==3){if(e=n,e[0]==0){e:if(!this.l){if(this.a)if(this.a.v+3e3<t.v)ey(this),this.a.cancel(),this.a=null;else break e;ex(this),cn()}}else this.ra=e[1],0<this.ra-this.O&&37500>e[2]&&this.ia&&this.v==0&&!this.s&&(this.s=d_(Ur(this.Ya,this),6e3));if(1>=Dj(this.b)&&this.fa){try{this.fa()}catch{}this.fa=void 0}}else Cs(this,11)}else if((t.s||this.a==t)&&ey(this),!Ym(e))for(e=n=this.ja.a.parse(e),n=0;n<e.length;n++){var r=e[n];if(this.O=r[0],r=r[1],this.u==2)if(r[0]=="c"){this.H=r[1],this.ga=r[2];var i=r[3];i!=null&&(this.wa=i),r=r[5],r!=null&&s_(r)&&0<r&&(this.D=1.5*r),this.o&&(r=t.a)&&((i=ap(r,"X-Client-Wire-Protocol"))&&Oj(this.b,i),this.j&&(r=ap(r,"X-HTTP-Session-Id")))&&(this.I=r,bn(this.B,this.j,r)),this.u=3,this.c&&this.c.va(),r=t,this.pa=E_(this,this.Y()?this.ga:null,this.ha),r.s?(Lj(this.b,r),(i=this.D)&&r.setTimeout(i),r.i&&(v_(r),qp(r)),this.a=r):qj(this),0<this.f.length&&w_(this)}else r[0]!="stop"&&r[0]!="close"||Cs(this,7);else this.u==3&&(r[0]=="stop"||r[0]=="close"?r[0]=="stop"?Cs(this,7):ZI(this):r[0]!="noop"&&this.c&&this.c.ua(r),this.v=0)}}};De.Ya=function(){this.s!=null&&(this.s=null,this.a.cancel(),this.a=null,ex(this),cn())};function ey(t){t.s!=null&&(bt.clearTimeout(t.s),t.s=null)}De.na=function(t){var e=null;if(this.a==t){ey(this),this.a=null;var n=2}else if(x1(this.b,t))e=t.j,Lj(this.b,t),n=1;else return;if(this.m=t.o,this.u!=0)if(t.b)n==1?(e=Da()-t.v,jh.dispatchEvent(new dj(jh,t.l?t.l.length:0,e,this.A)),w_(this)):qj(this);else{var r=t.c;if(r==3||r==0&&0<this.m||!(n==1&&JK(this,t)||n==2&&ex(this)))switch(e&&0<e.length&&(t=this.b,t.c=t.c.concat(e)),r){case 1:Cs(this,5);break;case 4:Cs(this,10);break;case 3:Cs(this,6);break;default:Cs(this,2)}}};function Wj(t,e){var n=t.Na+Math.floor(Math.random()*t.Ra);return t.ma()||(n*=2),n*e}function Cs(t,e){if(e==2){var n=null;t.c&&(n=null);var r=Ur(t.eb,t);n||(n=new ku("//www.google.com/images/cleardot.gif"),bt.location&&bt.location.protocol=="http"||rp(n,"https"),g_(n)),WK(n.toString(),r)}else cn();t.u=0,t.c&&t.c.ta(e),Gj(t),Bj(t)}De.eb=function(t){cn()};function Gj(t){t.u=0,t.m=-1,t.c&&((Mj(t.b).length!=0||t.f.length!=0)&&(t.b.c.length=0,DI(t.f),t.f.length=0),t.c.sa())}function E_(t,e,n){var r=AK(n);if(r.b!="")e&&ip(r,e+"."+r.b),op(r,r.i);else{var i=bt.location,o;e?o=e+"."+i.hostname:o=i.hostname,r=kK(i.protocol,o,+i.port,n)}return t.V&&LI(t.V,function(a,c){bn(r,c,a)}),e=t.j,n=t.I,e&&n&&bn(r,e,n),bn(r,"VER",t.wa),Wp(t,r),r}De.$=function(t){if(t&&!this.R)throw Error("Can't create secondary domain capable XhrIo object.");return t=new yr(this.Ka),t.F=this.R,t};De.ma=function(){return!!this.c&&!0};De.Y=function(){return this.R};function $j(){}De=$j.prototype;De.va=function(){};De.ua=function(){};De.ta=function(){};De.sa=function(){};De.Sa=function(){};function ZK(t){for(var e=arguments[0],n=1;n<arguments.length;n++){var r=arguments[n];if(r.lastIndexOf("/",0)==0)e=r;else{var i;(i=e=="")||(i=e.length-1,i=0<=i&&e.indexOf("/",i)==i),i?e+=r:e+="/"+r}}return e}function ty(){if(Ca&&!(10<=Number(u_)))throw Error("Environmental error: no available transport.")}ty.prototype.a=function(t,e){return new No(t,e)};function No(t,e){ro.call(this),this.a=new Vj(e),this.g=t,this.m=e&&e.fb?e.fb:ZK(this.g,"test"),this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.i=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.xa&&(t?t["X-WebChannel-Client-Profile"]=e.xa:t={"X-WebChannel-Client-Profile":e.xa}),this.a.J=t,(t=e&&e.httpHeadersOverwriteParam)&&!Ym(t)&&(this.a.g=t),this.l=e&&e.supportsCrossDomainXhr||!1,this.h=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ym(e)&&(this.a.j=e,t=this.b,t!==null&&e in t&&(t=this.b,e in t&&delete t[e])),this.f=new Zh(this)}zr(No,ro);De=No.prototype;De.addEventListener=function(t,e,n,r){No.N.addEventListener.call(this,t,e,n,r)};De.removeEventListener=function(t,e,n,r){No.N.removeEventListener.call(this,t,e,n,r)};De.Va=function(){this.a.c=this.f,this.l&&(this.a.R=!0);var t=this.a,e=this.m,n=this.g,r=this.b||void 0;cn(),t.ha=n,t.V=r||{},t.o&&(t.F.b=[],t.F.a=!1),t.w=new Aj(t),t.g===null&&(t.w.h=t.i),n=e,t.g&&t.i&&(n=__(e,t.g,t.i)),t=t.w,t.i=n,e=E_(t.a,null,t.i),cn(),n=t.a.F.b,n!=null?(t.f=n[0],t.M=1,kj(t)):(Jm(e,"MODE","init"),!t.a.o&&t.a.j&&Jm(e,"X-HTTP-Session-Id",t.a.j),t.b=new Zl(t,void 0,void 0),t.b.h=t.h,KI(t.b,e,!1,null),t.M=0)};De.close=function(){ZI(this.a)};De.Wa=function(t){if(ni(t)){var e={};e.__data__=t,ob(this.a,e)}else this.h?(e={},e.__data__=nj(t),ob(this.a,e)):ob(this.a,t)};De.G=function(){this.a.c=null,delete this.f,ZI(this.a),delete this.a,No.N.G.call(this)};function Hj(t){$I.call(this);var e=t.__sm__;if(e){e:{for(var n in e){t=n;break e}t=void 0}(this.c=t)?(t=this.c,this.data=e!==null&&t in e?e[t]:void 0):this.data=e}else this.data=t}zr(Hj,$I);function Kj(){HI.call(this),this.status=1}zr(Kj,HI);function Zh(t){this.a=t}zr(Zh,$j);Zh.prototype.va=function(){this.a.dispatchEvent("a")};Zh.prototype.ua=function(t){this.a.dispatchEvent(new Hj(t))};Zh.prototype.ta=function(t){this.a.dispatchEvent(new Kj)};Zh.prototype.sa=function(){this.a.dispatchEvent("b")};var eY=ad(function(t,e){function n(){}n.prototype=t.prototype;var r=new n;return t.apply(r,Array.prototype.slice.call(arguments,1)),r},ty);ty.prototype.createWebChannel=ty.prototype.a;No.prototype.send=No.prototype.Wa;No.prototype.open=No.prototype.Va;No.prototype.close=No.prototype.close;p_.NO_ERROR=0;p_.TIMEOUT=8;p_.HTTP_ERROR=6;pj.COMPLETE="complete";gj.EventType=zp;zp.OPEN="a";zp.CLOSE="b";zp.ERROR="c";zp.MESSAGE="d";ro.prototype.listen=ro.prototype.za;yr.prototype.listenOnce=yr.prototype.Aa;yr.prototype.getLastError=yr.prototype.Xa;yr.prototype.getLastErrorCode=yr.prototype.ya;yr.prototype.getStatus=yr.prototype.T;yr.prototype.getResponseJson=yr.prototype.Ua;yr.prototype.getResponseText=yr.prototype.aa;yr.prototype.send=yr.prototype.ca;var Gp={createWebChannelTransport:eY,ErrorCode:p_,EventType:pj,WebChannel:gj,XhrIo:yr},tY=Gp.createWebChannelTransport,sb=Gp.ErrorCode,nY=Gp.EventType,Eg=Gp.WebChannel,rY=Gp.XhrIo;/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var b_=ze.SDK_VERSION,_o=function(){function t(e){this.uid=e}return t.prototype.t=function(){return this.uid!=null},t.prototype.s=function(){return this.t()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(e){return e.uid===this.uid},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_o.UNAUTHENTICATED=new _o(null),_o.i=new _o("google-credentials-uid"),_o.o=new _o("first-party-uid");/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ie=function(t){function e(n,r){var i=this;return(i=t.call(this,r)||this).code=n,i.message=r,i.name="FirebaseError",i.toString=function(){return i.name+": [code="+i.code+"]: "+i.message},i}return St(e,t),e}(Error),iY=function(t,e){this.user=e,this.type="OAuth",this.h={},this.h.Authorization="Bearer "+t},HR=function(){function t(){this.u=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype._=function(){},t.prototype.l=function(e){this.u=e,e(_o.UNAUTHENTICATED)},t.prototype.T=function(){this.u=null},t}(),oY=function(){function t(e){var n=this;this.m=null,this.currentUser=_o.UNAUTHENTICATED,this.I=!1,this.R=0,this.u=null,this.forceRefresh=!1,this.m=function(){n.R++,n.currentUser=n.A(),n.I=!0,n.u&&n.u(n.currentUser)},this.R=0,this.auth=e.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.m):(this.m(null),e.get().then(function(r){n.auth=r,n.m&&n.auth.addAuthTokenListener(n.m)},function(){}))}return t.prototype.getToken=function(){var e=this,n=this.R,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(function(i){if(e.R!==n)throw new Ie(pe.ABORTED,"getToken aborted due to token change.");return i?(at(typeof i.accessToken=="string","Invalid tokenData returned from getToken():"+i),new iY(i.accessToken,e.currentUser)):null}):Promise.resolve(null)},t.prototype._=function(){this.forceRefresh=!0},t.prototype.l=function(e){this.u=e,this.I&&e(this.currentUser)},t.prototype.T=function(){this.auth&&this.auth.removeAuthTokenListener(this.m),this.m=null,this.u=null},t.prototype.A=function(){var e=this.auth&&this.auth.getUid();return at(e===null||typeof e=="string","Received invalid UID: "+e),new _o(e)},t}(),sY=function(){function t(e,n){this.P=e,this.V=n,this.type="FirstParty",this.user=_o.o}return Object.defineProperty(t.prototype,"h",{get:function(){var e={"X-Goog-AuthUser":this.V},n=this.P.auth.g([]);return n&&(e.Authorization=n),e},enumerable:!0,configurable:!0}),t}(),aY=function(){function t(e,n){this.P=e,this.V=n}return t.prototype.getToken=function(){return Promise.resolve(new sY(this.P,this.V))},t.prototype.l=function(e){e(_o.o)},t.prototype.T=function(){},t.prototype._=function(){},t}(),Fi=function(){function t(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ie(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ie(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Ie(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ie(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.p=function(e){return this.seconds===e.seconds?Pt(this.nanoseconds,e.nanoseconds):Pt(this.seconds,e.seconds)},t.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.valueOf=function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Rt=function(){function t(e){this.timestamp=e}return t.v=function(e){return new t(e)},t.S=function(){return t.MIN},t.prototype.D=function(e){return this.timestamp.p(e.timestamp)},t.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},t.prototype.C=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.k=function(){return this.timestamp},t}();Rt.MIN=new Rt(new Fi(0,0));var Yj=function(){function t(e,n,r){n===void 0?n=0:n>e.length&&We("offset "+n+" out of range "+e.length),r===void 0?r=e.length-n:r>e.length-n&&We("length "+r+" out of range "+(e.length-n)),this.segments=e,this.offset=n,this.N=r}return Object.defineProperty(t.prototype,"length",{get:function(){return this.N},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return t.F(this,e)===0},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(r){n.push(r)}):n.push(e),this.$(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.M=function(e){return e=e===void 0?1:e,this.$(this.segments,this.offset+e,this.length-e)},t.prototype.L=function(){return this.$(this.segments,this.offset,this.length-1)},t.prototype.O=function(){return this.segments[this.offset]},t.prototype.B=function(){return this.get(this.length-1)},t.prototype.get=function(e){return this.segments[this.offset+e]},t.prototype.U=function(){return this.length===0},t.prototype.q=function(e){if(e.length<this.length)return!1;for(var n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0},t.prototype.W=function(e){if(this.length+1!==e.length)return!1;for(var n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0},t.prototype.forEach=function(e){for(var n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])},t.prototype.j=function(){return this.segments.slice(this.offset,this.limit())},t.F=function(e,n){for(var r=Math.min(e.length,n.length),i=0;i<r;i++){var o=e.get(i),a=n.get(i);if(o<a)return-1;if(o>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0},t}(),gn=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return St(e,t),e.prototype.$=function(n,r,i){return new e(n,r,i)},e.prototype.K=function(){return this.j().join("/")},e.prototype.toString=function(){return this.K()},e.G=function(n){if(n.indexOf("//")>=0)throw new Ie(pe.INVALID_ARGUMENT,"Invalid path ("+n+"). Paths must not contain // in them.");return new e(n.split("/").filter(function(r){return r.length>0}))},e}(Yj);gn.H=new gn([]);var uY=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Un=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return St(e,t),e.prototype.$=function(n,r,i){return new e(n,r,i)},e.J=function(n){return uY.test(n)},e.prototype.K=function(){return this.j().map(function(n){return n=n.replace("\\","\\\\").replace("`","\\`"),e.J(n)||(n="`"+n+"`"),n}).join(".")},e.prototype.toString=function(){return this.K()},e.prototype.Y=function(){return this.length===1&&this.get(0)==="__name__"},e.X=function(){return new e(["__name__"])},e.Z=function(n){for(var r=[],i="",o=0,a=function(){if(i.length===0)throw new Ie(pe.INVALID_ARGUMENT,"Invalid field path ("+n+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");r.push(i),i=""},c=!1;o<n.length;){var f=n[o];if(f==="\\"){if(o+1===n.length)throw new Ie(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+n);var v=n[o+1];if(v!=="\\"&&v!=="."&&v!=="`")throw new Ie(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+n);i+=v,o+=2}else f==="`"?(c=!c,o++):f!=="."||c?(i+=f,o++):(a(),o++)}if(a(),c)throw new Ie(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+n);return new e(r)},e}(Yj);Un.H=new Un([]);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ct=function(){function t(e){this.path=e}return t.tt=function(e){return new t(gn.G(e).M(5))},t.prototype.et=function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e},t.prototype.isEqual=function(e){return e!==null&&gn.F(this.path,e.path)===0},t.prototype.toString=function(){return this.path.toString()},t.F=function(e,n){return gn.F(e.path,n.path)},t.st=function(e){return e.length%2==0},t.nt=function(e){return new t(new gn(e.slice()))},t}();ct.EMPTY=new ct(new gn([]));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mi=function(){function t(e,n){this.F=e,this.root=n||su.EMPTY}return t.prototype.it=function(e,n){return new t(this.F,this.root.it(e,n,this.F).rt(null,null,su.ot,null,null))},t.prototype.remove=function(e){return new t(this.F,this.root.remove(e,this.F).rt(null,null,su.ot,null,null))},t.prototype.get=function(e){for(var n=this.root;!n.U();){var r=this.F(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null},t.prototype.indexOf=function(e){for(var n=0,r=this.root;!r.U();){var i=this.F(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1},t.prototype.U=function(){return this.root.U()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),t.prototype.ht=function(){return this.root.ht()},t.prototype.at=function(){return this.root.at()},t.prototype.ut=function(e){return this.root.ut(e)},t.prototype.forEach=function(e){this.ut(function(n,r){return e(n,r),!1})},t.prototype.toString=function(){var e=[];return this.ut(function(n,r){return e.push(n+":"+r),!1}),"{"+e.join(", ")+"}"},t.prototype.ct=function(e){return this.root.ct(e)},t.prototype._t=function(){return new bg(this.root,null,this.F,!1)},t.prototype.lt=function(e){return new bg(this.root,e,this.F,!1)},t.prototype.dt=function(){return new bg(this.root,null,this.F,!0)},t.prototype.ft=function(e){return new bg(this.root,e,this.F,!0)},t}(),bg=function(){function t(e,n,r,i){this.Tt=i,this.wt=[];for(var o=1;!e.U();)if(o=n?r(e.key,n):1,i&&(o*=-1),o<0)e=this.Tt?e.left:e.right;else{if(o===0){this.wt.push(e);break}this.wt.push(e),e=this.Tt?e.right:e.left}}return t.prototype.Et=function(){var e=this.wt.pop(),n={key:e.key,value:e.value};if(this.Tt)for(e=e.left;!e.U();)this.wt.push(e),e=e.right;else for(e=e.right;!e.U();)this.wt.push(e),e=e.left;return n},t.prototype.It=function(){return this.wt.length>0},t.prototype.Rt=function(){if(this.wt.length===0)return null;var e=this.wt[this.wt.length-1];return{key:e.key,value:e.value}},t}(),su=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.rt=function(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)},t.prototype.U=function(){return!1},t.prototype.ut=function(e){return this.left.ut(e)||e(this.key,this.value)||this.right.ut(e)},t.prototype.ct=function(e){return this.right.ct(e)||e(this.key,this.value)||this.left.ct(e)},t.prototype.min=function(){return this.left.U()?this:this.left.min()},t.prototype.ht=function(){return this.min().key},t.prototype.at=function(){return this.right.U()?this.key:this.right.at()},t.prototype.it=function(e,n,r){var i=this,o=r(e,i.key);return(i=o<0?i.rt(null,null,null,i.left.it(e,n,r),null):o===0?i.rt(null,n,null,null,null):i.rt(null,null,null,null,i.right.it(e,n,r))).At()},t.prototype.Pt=function(){if(this.left.U())return t.EMPTY;var e=this;return e.left.Vt()||e.left.left.Vt()||(e=e.gt()),(e=e.rt(null,null,null,e.left.Pt(),null)).At()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.U()||i.left.Vt()||i.left.left.Vt()||(i=i.gt()),i=i.rt(null,null,null,i.left.remove(e,n),null);else{if(i.left.Vt()&&(i=i.pt()),i.right.U()||i.right.Vt()||i.right.left.Vt()||(i=i.yt()),n(e,i.key)===0){if(i.right.U())return t.EMPTY;r=i.right.min(),i=i.rt(r.key,r.value,null,null,i.right.Pt())}i=i.rt(null,null,null,null,i.right.remove(e,n))}return i.At()},t.prototype.Vt=function(){return this.color},t.prototype.At=function(){var e=this;return e.right.Vt()&&!e.left.Vt()&&(e=e.bt()),e.left.Vt()&&e.left.left.Vt()&&(e=e.pt()),e.left.Vt()&&e.right.Vt()&&(e=e.vt()),e},t.prototype.gt=function(){var e=this.vt();return e.right.left.Vt()&&(e=(e=(e=e.rt(null,null,null,null,e.right.pt())).bt()).vt()),e},t.prototype.yt=function(){var e=this.vt();return e.left.left.Vt()&&(e=(e=e.pt()).vt()),e},t.prototype.bt=function(){var e=this.rt(null,null,t.RED,null,this.right.left);return this.right.rt(null,null,this.color,e,null)},t.prototype.pt=function(){var e=this.rt(null,null,t.RED,this.left.right,null);return this.left.rt(null,null,this.color,null,e)},t.prototype.vt=function(){var e=this.left.rt(null,null,!this.left.color,null,null),n=this.right.rt(null,null,!this.right.color,null,null);return this.rt(null,null,!this.color,e,n)},t.prototype.St=function(){var e=this.Dt();return Math.pow(2,e)<=this.size+1},t.prototype.Dt=function(){if(this.Vt()&&this.left.Vt())throw We("Red node has red child("+this.key+","+this.value+")");if(this.right.Vt())throw We("Right child of ("+this.key+","+this.value+") is red");var e=this.left.Dt();if(e!==this.right.Dt())throw We("Black depths differ");return e+(this.Vt()?0:1)},t}();su.EMPTY=null,su.RED=!0,su.ot=!1,su.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw We("LLRBEmptyNode has no key.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw We("LLRBEmptyNode has no value.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw We("LLRBEmptyNode has no color.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw We("LLRBEmptyNode has no left child.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw We("LLRBEmptyNode has no right child.")},enumerable:!0,configurable:!0}),t.prototype.rt=function(e,n,r,i,o){return this},t.prototype.it=function(e,n,r){return new su(e,n)},t.prototype.remove=function(e,n){return this},t.prototype.U=function(){return!0},t.prototype.ut=function(e){return!1},t.prototype.ct=function(e){return!1},t.prototype.ht=function(){return null},t.prototype.at=function(){return null},t.prototype.Vt=function(){return!1},t.prototype.St=function(){return!0},t.prototype.Dt=function(){return 0},t}());/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var In=function(){function t(e){this.F=e,this.data=new mi(this.F)}return t.prototype.has=function(e){return this.data.get(e)!==null},t.prototype.first=function(){return this.data.ht()},t.prototype.last=function(){return this.data.at()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),t.prototype.indexOf=function(e){return this.data.indexOf(e)},t.prototype.forEach=function(e){this.data.ut(function(n,r){return e(n),!1})},t.prototype.Ct=function(e,n){for(var r=this.data.lt(e[0]);r.It();){var i=r.Et();if(this.F(i.key,e[1])>=0)return;n(i.key)}},t.prototype.kt=function(e,n){var r;for(r=n!==void 0?this.data.lt(n):this.data._t();r.It();)if(!e(r.Et().key))return},t.prototype.Nt=function(e){var n=this.data.lt(e);return n.It()?n.Et().key:null},t.prototype._t=function(){return new KR(this.data._t())},t.prototype.lt=function(e){return new KR(this.data.lt(e))},t.prototype.add=function(e){return this.rt(this.data.remove(e).it(e,!0))},t.prototype.delete=function(e){return this.has(e)?this.rt(this.data.remove(e)):this},t.prototype.U=function(){return this.data.U()},t.prototype.Ft=function(e){var n=this;return n.size<e.size&&(n=e,e=this),e.forEach(function(r){n=n.add(r)}),n},t.prototype.isEqual=function(e){if(!(e instanceof t)||this.size!==e.size)return!1;for(var n=this.data._t(),r=e.data._t();n.It();){var i=n.Et().key,o=r.Et().key;if(this.F(i,o)!==0)return!1}return!0},t.prototype.j=function(){var e=[];return this.forEach(function(n){e.push(n)}),e},t.prototype.toString=function(){var e=[];return this.forEach(function(n){return e.push(n)}),"SortedSet("+e.toString()+")"},t.prototype.rt=function(e){var n=new t(this.F);return n.data=e,n},t}(),KR=function(){function t(e){this.$t=e}return t.prototype.Et=function(){return this.$t.Et().key},t.prototype.It=function(){return this.$t.It()},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YR(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Fl(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Xj(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mr=function(){function t(e){this.Mt=e}return t.fromBase64String=function(e){return new t(Bl.Lt().atob(e))},t.fromUint8Array=function(e){return new t(function(n){for(var r="",i=0;i<n.length;++i)r+=String.fromCharCode(n[i]);return r}(e))},t.prototype.toBase64=function(){return Bl.Lt().btoa(this.Mt)},t.prototype.toUint8Array=function(){return function(e){for(var n=new Uint8Array(e.length),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.Mt)},t.prototype.Ot=function(){return 2*this.Mt.length},t.prototype.D=function(e){return Pt(this.Mt,e.Mt)},t.prototype.isEqual=function(e){return this.Mt===e.Mt},t}();function jl(t){return t==null}function ny(t){return t===-0&&1/t==-1/0}function Qj(t){return typeof t=="number"&&Number.isInteger(t)&&!ny(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tx(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function lp(t){var e=Ru(t.mapValue.fields.__local_write_time__.timestampValue);return new Fi(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mr.xt=new mr("");var lY=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Aa(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?tx(t)?4:10:We("Invalid value type: "+JSON.stringify(t))}function ls(t,e){var n=Aa(t);if(n!==Aa(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return lp(t).isEqual(lp(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;var o=Ru(r.timestampValue),a=Ru(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return Uh(r.bytesValue).isEqual(Uh(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return Ir(r.geoPointValue.latitude)===Ir(i.geoPointValue.latitude)&&Ir(r.geoPointValue.longitude)===Ir(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Ir(r.integerValue)===Ir(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){var o=Ir(r.doubleValue),a=Ir(i.doubleValue);return o===a?ny(o)===ny(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return zh(t.arrayValue.values||[],e.arrayValue.values||[],ls);case 10:return function(r,i){var o=r.mapValue.fields||{},a=i.mapValue.fields||{};if(YR(o)!==YR(a))return!1;for(var c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!ls(o[c],a[c])))return!1;return!0}(t,e);default:return We("Unexpected value type: "+JSON.stringify(t))}}function nx(t,e){return(t.values||[]).find(function(n){return ls(n,e)})!==void 0}function cp(t,e){var n=Aa(t),r=Aa(e);if(n!==r)return Pt(n,r);switch(n){case 0:return 0;case 1:return Pt(t.booleanValue,e.booleanValue);case 2:return function(i,o){var a=Ir(i.integerValue||i.doubleValue),c=Ir(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return XR(t.timestampValue,e.timestampValue);case 4:return XR(lp(t),lp(e));case 5:return Pt(t.stringValue,e.stringValue);case 6:return function(i,o){var a=Uh(i),c=Uh(o);return a.D(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){for(var a=i.split("/"),c=o.split("/"),f=0;f<a.length&&f<c.length;f++){var v=Pt(a[f],c[f]);if(v!==0)return v}return Pt(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){var a=Pt(Ir(i.latitude),Ir(o.latitude));return a!==0?a:Pt(Ir(i.longitude),Ir(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,o){for(var a=i.values||[],c=o.values||[],f=0;f<a.length&&f<c.length;++f){var v=cp(a[f],c[f]);if(v)return v}return Pt(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a=i.fields||{},c=Object.keys(a),f=o.fields||{},v=Object.keys(f);c.sort(),v.sort();for(var y=0;y<c.length&&y<v.length;++y){var b=Pt(c[y],v[y]);if(b!==0)return b;var E=cp(a[c[y]],f[v[y]]);if(E!==0)return E}return Pt(c.length,v.length)}(t.mapValue,e.mapValue);default:throw We("Invalid value type: "+n)}}function XR(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Pt(t,e);var n=Ru(t),r=Ru(e),i=Pt(n.seconds,r.seconds);return i!==0?i:Pt(n.nanos,r.nanos)}function C1(t){return function e(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(o){var a=Ru(o);return"time("+a.seconds+","+a.nanos+")"}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Uh(n.bytesValue).toBase64():"referenceValue"in n?(i=n.referenceValue,ct.tt(i).toString()):"geoPointValue"in n?"geo("+(r=n.geoPointValue).latitude+","+r.longitude+")":"arrayValue"in n?function(o){for(var a="[",c=!0,f=0,v=o.values||[];f<v.length;f++){var y=v[f];c?c=!1:a+=",",a+=e(y)}return a+"]"}(n.arrayValue):"mapValue"in n?function(o){for(var a="{",c=!0,f=0,v=Object.keys(o.fields||{}).sort();f<v.length;f++){var y=v[f];c?c=!1:a+=",",a+=y+":"+e(o.fields[y])}return a+"}"}(n.mapValue):We("Invalid value type: "+JSON.stringify(n));var r,i}(t)}function Ru(t){if(at(!!t,"Cannot normalize null or undefined timestamp."),typeof t=="string"){var e=0,n=lY.exec(t);if(at(!!n,"invalid timestamp: "+t),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ir(t.seconds),nanos:Ir(t.nanos)}}function Ir(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Uh(t){return typeof t=="string"?mr.fromBase64String(t):mr.fromUint8Array(t)}function Sg(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.K()}}function ab(t){return!!t&&"integerValue"in t}function rx(t){return!!t&&"arrayValue"in t}function Jj(t){return!!t&&"nullValue"in t}function Zj(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function e3(t){return!!t&&"mapValue"in t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hp=function(){function t(){}return t.prototype.Bt=function(e,n){return function(r,i){var o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e)},t.prototype.Ut=function(e,n){return n},t.prototype.qt=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t},t}();hp.instance=new hp;var N1=function(){function t(e){this.elements=e}return t.prototype.Bt=function(e,n){return this.apply(e)},t.prototype.Ut=function(e,n){return this.apply(e)},t.prototype.apply=function(e){for(var n=t3(e),r=function(a){n.some(function(c){return ls(c,a)})||n.push(a)},i=0,o=this.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}},t.prototype.qt=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t&&zh(this.elements,e.elements,ls)},t}(),A1=function(){function t(e){this.elements=e}return t.prototype.Bt=function(e,n){return this.apply(e)},t.prototype.Ut=function(e,n){return this.apply(e)},t.prototype.apply=function(e){for(var n=t3(e),r=function(a){n=n.filter(function(c){return!ls(c,a)})},i=0,o=this.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}},t.prototype.qt=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t&&zh(this.elements,e.elements,ls)},t}(),k1=function(){function t(e,n){this.serializer=e,this.Qt=n}return t.prototype.Bt=function(e,n){var r=this.qt(e),i=this.asNumber(r)+this.asNumber(this.Qt);return ab(r)&&ab(this.Qt)?this.serializer.Wt(i):this.serializer.jt(i)},t.prototype.Ut=function(e,n){return n},t.prototype.qt=function(e){return ab(n=e)||function(r){return!!r&&"doubleValue"in r}(n)?e:{integerValue:0};var n},t.prototype.isEqual=function(e){return e instanceof t&&ls(this.Qt,e.Qt)},t.prototype.asNumber=function(e){return Ir(e.integerValue||e.doubleValue)},t}();function t3(t){return rx(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oh=function(){function t(e){this.fields=e}return t.Kt=function(e){return new t(e)},t.Gt=function(e){var n=new In(Un.F);return e.forEach(function(r){return n=n.add(r)}),new t(n)},t.prototype.zt=function(e){var n=!1;return this.fields.forEach(function(r){r.q(e)&&(n=!0)}),n},t.prototype.isEqual=function(e){return this.fields.isEqual(e.fields)},t}(),ld=function(){function t(e,n){this.field=e,this.transform=n}return t.prototype.isEqual=function(e){return this.field.isEqual(e.field)&&this.transform.isEqual(e.transform)},t}(),cY=function(t,e){this.version=t,this.transformResults=e},Cr=function(){function t(e,n){this.updateTime=e,this.exists=n}return t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"Ht",{get:function(){return this.updateTime===void 0&&this.exists===void 0},enumerable:!0,configurable:!0}),t.prototype.Jt=function(e){return this.updateTime!==void 0?e instanceof Ht&&e.version.isEqual(this.updateTime):this.exists===void 0||this.exists===e instanceof Ht},t.prototype.isEqual=function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)},t}();Cr.NONE=new Cr;var Ul=function(){function t(){}return t.prototype.Yt=function(e){},t.Xt=function(e){return e instanceof Ht?e.version:Rt.MIN},t}(),R1=function(t){function e(n,r,i){var o=this;return(o=t.call(this)||this).key=n,o.value=r,o.Zt=i,o.type=0,o}return St(e,t),e.prototype.Ut=function(n,r){this.Yt(n);var i=r.version;return new Ht(this.key,i,this.value,{hasCommittedMutations:!0})},e.prototype.Bt=function(n,r,i){if(this.Yt(n),!this.Zt.Jt(n))return n;var o=Ul.Xt(n);return new Ht(this.key,o,this.value,{te:!0})},e.prototype.ee=function(n){return null},e.prototype.isEqual=function(n){return n instanceof e&&this.key.isEqual(n.key)&&this.value.isEqual(n.value)&&this.Zt.isEqual(n.Zt)},e}(Ul),Vh=function(t){function e(n,r,i,o){var a=this;return(a=t.call(this)||this).key=n,a.data=r,a.se=i,a.Zt=o,a.type=1,a}return St(e,t),e.prototype.Ut=function(n,r){if(this.Yt(n),!this.Zt.Jt(n))return new iy(this.key,r.version);var i=this.ne(n);return new Ht(this.key,r.version,i,{hasCommittedMutations:!0})},e.prototype.Bt=function(n,r,i){if(this.Yt(n),!this.Zt.Jt(n))return n;var o=Ul.Xt(n),a=this.ne(n);return new Ht(this.key,o,a,{te:!0})},e.prototype.ee=function(n){return null},e.prototype.isEqual=function(n){return n instanceof e&&this.key.isEqual(n.key)&&this.se.isEqual(n.se)&&this.Zt.isEqual(n.Zt)},e.prototype.ne=function(n){var r;return r=n instanceof Ht?n.data():Xi.EMPTY,this.ie(r)},e.prototype.ie=function(n){var r=this,i=n.re();return this.se.fields.forEach(function(o){if(!o.U()){var a=r.data.field(o);a!==null?i.set(o,a):i.delete(o)}}),i.oe()},e}(Ul),ry=function(t){function e(n,r){var i=this;return(i=t.call(this)||this).key=n,i.fieldTransforms=r,i.type=2,i.Zt=Cr.exists(!0),i}return St(e,t),e.prototype.Ut=function(n,r){if(this.Yt(n),at(r.transformResults!=null,"Transform results missing for TransformMutation."),!this.Zt.Jt(n))return new iy(this.key,r.version);var i=this.he(n),o=this.ae(n,r.transformResults),a=r.version,c=this.ue(i.data(),o);return new Ht(this.key,a,c,{hasCommittedMutations:!0})},e.prototype.Bt=function(n,r,i){if(this.Yt(n),!this.Zt.Jt(n))return n;var o=this.he(n),a=this.ce(i,n,r),c=this.ue(o.data(),a);return new Ht(this.key,o.version,c,{te:!0})},e.prototype.ee=function(n){for(var r=null,i=0,o=this.fieldTransforms;i<o.length;i++){var a=o[i],c=n instanceof Ht?n.field(a.field):void 0,f=a.transform.qt(c||null);f!=null&&(r=r==null?Xi._e().set(a.field,f):r.set(a.field,f))}return r?r.oe():null},e.prototype.isEqual=function(n){return n instanceof e&&this.key.isEqual(n.key)&&zh(this.fieldTransforms,n.fieldTransforms,function(r,i){return r.isEqual(i)})&&this.Zt.isEqual(n.Zt)},e.prototype.he=function(n){return n},e.prototype.ae=function(n,r){var i=[];at(this.fieldTransforms.length===r.length,"server transform result count ("+r.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var o=0;o<r.length;o++){var a=this.fieldTransforms[o],c=a.transform,f=null;n instanceof Ht&&(f=n.field(a.field)),i.push(c.Ut(f,r[o]))}return i},e.prototype.ce=function(n,r,i){for(var o=[],a=0,c=this.fieldTransforms;a<c.length;a++){var f=c[a],v=f.transform,y=null;r instanceof Ht&&(y=r.field(f.field)),y===null&&i instanceof Ht&&(y=i.field(f.field)),o.push(v.Bt(y,n))}return o},e.prototype.ue=function(n,r){for(var i=n.re(),o=0;o<this.fieldTransforms.length;o++){var a=this.fieldTransforms[o].field;i.set(a,r[o])}return i.oe()},e}(Ul),fp=function(t){function e(n,r){var i=this;return(i=t.call(this)||this).key=n,i.Zt=r,i.type=3,i}return St(e,t),e.prototype.Ut=function(n,r){return this.Yt(n),new Ar(this.key,r.version,{hasCommittedMutations:!0})},e.prototype.Bt=function(n,r,i){return this.Yt(n),this.Zt.Jt(n)?new Ar(this.key,Rt.S()):n},e.prototype.ee=function(n){return null},e.prototype.isEqual=function(n){return n instanceof e&&this.key.isEqual(n.key)&&this.Zt.isEqual(n.Zt)},e}(Ul),O1=function(t){function e(n,r){var i=this;return(i=t.call(this)||this).key=n,i.Zt=r,i.type=4,i}return St(e,t),e.prototype.Ut=function(n,r){We("VerifyMutation should only be used in Transactions.")},e.prototype.Bt=function(n,r,i){We("VerifyMutation should only be used in Transactions.")},e.prototype.ee=function(n){We("VerifyMutation should only be used in Transactions.")},e.prototype.isEqual=function(n){return n instanceof e&&this.key.isEqual(n.key)&&this.Zt.isEqual(n.Zt)},e}(Ul),Xi=function(){function t(e){this.proto=e}return t._e=function(){return t.EMPTY.re()},t.prototype.field=function(e){if(e.U())return this.proto;for(var n=this.proto,r=0;r<e.length-1;++r)if(!n.mapValue.fields||!e3(n=n.mapValue.fields[e.get(r)]))return null;return(n=(n.mapValue.fields||{})[e.B()])||null},t.prototype.se=function(){return this.le(this.proto.mapValue)},t.prototype.le=function(e){var n=this,r=new In(Un.F);return Fl(e.fields||{},function(i,o){var a=new Un([i]);if(Aa(o)===10){var c=n.le(o.mapValue).fields;c.U()?r=r.add(a):c.forEach(function(f){r=r.add(a.child(f))})}else r=r.add(a)}),oh.Kt(r)},t.prototype.isEqual=function(e){return ls(this.proto,e.proto)},t.prototype.re=function(){return new hY(this)},t}();Xi.EMPTY=new Xi({mapValue:{}});var hY=function(){function t(e){this.de=e,this.fe=new Map}return t.prototype.set=function(e,n){return this.Te(e,n),this},t.prototype.delete=function(e){return this.Te(e,null),this},t.prototype.Te=function(e,n){for(var r=this.fe,i=0;i<e.length-1;++i){var o=e.get(i),a=r.get(o);a instanceof Map?r=a:a&&Aa(a)===10?(a=new Map(Object.entries(a.mapValue.fields||{})),r.set(o,a),r=a):(a=new Map,r.set(o,a),r=a)}r.set(e.B(),n)},t.prototype.oe=function(){var e=this.me(Un.H,this.fe);return e!=null?new Xi(e):this.de},t.prototype.me=function(e,n){var r=this,i=!1,o=this.de.field(e),a=e3(o)?Object.assign({},o.mapValue.fields):{};return n.forEach(function(c,f){if(c instanceof Map){var v=r.me(e.child(f),c);v!=null&&(a[f]=v,i=!0)}else c!==null?(a[f]=c,i=!0):a.hasOwnProperty(f)&&(delete a[f],i=!0)}),i?{mapValue:{fields:a}}:null},t}(),ix=function(){function t(e,n){this.key=e,this.version=n}return t.we=function(e,n){return ct.F(e.key,n.key)},t}(),Ht=function(t){function e(n,r,i,o){var a=this;return(a=t.call(this,n,r)||this).Ee=i,a.te=!!o.te,a.hasCommittedMutations=!!o.hasCommittedMutations,a}return St(e,t),e.prototype.field=function(n){return this.Ee.field(n)},e.prototype.data=function(){return this.Ee},e.prototype.Ie=function(){return this.Ee.proto},e.prototype.isEqual=function(n){return n instanceof e&&this.key.isEqual(n.key)&&this.version.isEqual(n.version)&&this.te===n.te&&this.hasCommittedMutations===n.hasCommittedMutations&&this.Ee.isEqual(n.Ee)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.Ee.toString()+", {hasLocalMutations: "+this.te+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.te||this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.Re=function(n,r,i){var o=r.field(n),a=i.field(n);return o!==null&&a!==null?cp(o,a):We("Trying to compare documents on fields that don't exist")},e}(ix),Ar=function(t){function e(n,r,i){var o=this;return(o=t.call(this,n,r)||this).hasCommittedMutations=!(!i||!i.hasCommittedMutations),o}return St(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(n){return n instanceof e&&n.hasCommittedMutations===this.hasCommittedMutations&&n.version.isEqual(this.version)&&n.key.isEqual(this.key)},e}(ix),iy=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return St(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(n){return n instanceof e&&n.version.isEqual(this.version)&&n.key.isEqual(this.key)},e}(ix),QR=function(){function t(e,n,r,i,o,a,c){n===void 0&&(n=null),r===void 0&&(r=[]),i===void 0&&(i=[]),o===void 0&&(o=null),a===void 0&&(a=null),c===void 0&&(c=null),this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=a,this.endAt=c,this.Ae=null}return t.prototype.canonicalId=function(){if(this.Ae===null){var e=this.path.K();this.collectionGroup!==null&&(e+="|cg:"+this.collectionGroup),e+="|f:",e+=this.filters.map(function(n){return n.canonicalId()}).join(","),e+="|ob:",e+=this.orderBy.map(function(n){return n.canonicalId()}).join(","),jl(this.limit)||(e+="|l:",e+=this.limit),this.startAt&&(e+="|lb:",e+=this.startAt.canonicalId()),this.endAt&&(e+="|ub:",e+=this.endAt.canonicalId()),this.Ae=e}return this.Ae},t.prototype.toString=function(){var e=this.path.K();return this.collectionGroup!==null&&(e+=" collectionGroup="+this.collectionGroup),this.filters.length>0&&(e+=", filters: ["+this.filters.join(", ")+"]"),jl(this.limit)||(e+=", limit: "+this.limit),this.orderBy.length>0&&(e+=", orderBy: ["+this.orderBy.join(", ")+"]"),this.startAt&&(e+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(e+=", endAt: "+this.endAt.canonicalId()),"Target("+e+")"},t.prototype.isEqual=function(e){if(this.limit!==e.limit||this.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<this.orderBy.length;n++)if(!this.orderBy[n].isEqual(e.orderBy[n]))return!1;if(this.filters.length!==e.filters.length)return!1;for(var r=0;r<this.filters.length;r++)if(!this.filters[r].isEqual(e.filters[r]))return!1;return this.collectionGroup===e.collectionGroup&&!!this.path.isEqual(e.path)&&!!(this.startAt!==null?this.startAt.isEqual(e.startAt):e.startAt===null)&&(this.endAt!==null?this.endAt.isEqual(e.endAt):e.endAt===null)},t.prototype.Pe=function(){return ct.st(this.path)&&this.collectionGroup===null&&this.filters.length===0},t}(),Vl=function(){function t(e,n,r,i,o,a,c,f){n===void 0&&(n=null),r===void 0&&(r=[]),i===void 0&&(i=[]),o===void 0&&(o=null),a===void 0&&(a="F"),c===void 0&&(c=null),f===void 0&&(f=null),this.path=e,this.collectionGroup=n,this.Ve=r,this.filters=i,this.limit=o,this.ge=a,this.startAt=c,this.endAt=f,this.pe=null,this.ye=null,this.startAt&&this.be(this.startAt),this.endAt&&this.be(this.endAt)}return t.ve=function(e){return new t(e)},Object.defineProperty(t.prototype,"orderBy",{get:function(){if(this.pe===null){var e=this.Se(),n=this.De();if(e!==null&&n===null)e.Y()?this.pe=[ub]:this.pe=[new Bh(e),ub];else{this.pe=[];for(var r=!1,i=0,o=this.Ve;i<o.length;i++){var a=o[i];this.pe.push(a),a.field.Y()&&(r=!0)}if(!r){var c=this.Ve.length>0?this.Ve[this.Ve.length-1].dir:Yn.ASCENDING;this.pe.push(c===Yn.ASCENDING?ub:mY)}}}return this.pe},enumerable:!0,configurable:!0}),t.prototype.Ce=function(e){var n=this.filters.concat([e]);return new t(this.path,this.collectionGroup,this.Ve.slice(),n,this.limit,this.ge,this.startAt,this.endAt)},t.prototype.ke=function(e){var n=this.Ve.concat([e]);return new t(this.path,this.collectionGroup,n,this.filters.slice(),this.limit,this.ge,this.startAt,this.endAt)},t.prototype.Ne=function(e){return new t(this.path,this.collectionGroup,this.Ve.slice(),this.filters.slice(),e,"F",this.startAt,this.endAt)},t.prototype.Fe=function(e){return new t(this.path,this.collectionGroup,this.Ve.slice(),this.filters.slice(),e,"L",this.startAt,this.endAt)},t.prototype.$e=function(e){return new t(this.path,this.collectionGroup,this.Ve.slice(),this.filters.slice(),this.limit,this.ge,e,this.endAt)},t.prototype.Me=function(e){return new t(this.path,this.collectionGroup,this.Ve.slice(),this.filters.slice(),this.limit,this.ge,this.startAt,e)},t.prototype.Le=function(e){return new t(e,null,this.Ve.slice(),this.filters.slice(),this.limit,this.ge,this.startAt,this.endAt)},t.prototype.Oe=function(){return this.filters.length===0&&this.limit===null&&this.startAt==null&&this.endAt==null&&(this.Ve.length===0||this.Ve.length===1&&this.Ve[0].field.Y())},t.prototype.canonicalId=function(){return this.xe().canonicalId()+"|lt:"+this.ge},t.prototype.toString=function(){return"Query(target="+this.xe().toString()+"; limitType="+this.ge+")"},t.prototype.isEqual=function(e){return this.xe().isEqual(e.xe())&&this.ge===e.ge},t.prototype.Be=function(e,n){for(var r=!1,i=0,o=this.orderBy;i<o.length;i++){var a=o[i],c=a.compare(e,n);if(c!==0)return c;r=r||a.field.Y()}return 0},t.prototype.matches=function(e){return this.Ue(e)&&this.qe(e)&&this.Qe(e)&&this.We(e)},t.prototype.je=function(){return!jl(this.limit)&&this.ge==="F"},t.prototype.Ke=function(){return!jl(this.limit)&&this.ge==="L"},t.prototype.De=function(){return this.Ve.length>0?this.Ve[0].field:null},t.prototype.Se=function(){for(var e=0,n=this.filters;e<n.length;e++){var r=n[e];if(r instanceof Qi&&r.Ge())return r.field}return null},t.prototype.ze=function(e){for(var n=0,r=this.filters;n<r.length;n++){var i=r[n];if(i instanceof Qi&&e.indexOf(i.op)>=0)return i.op}return null},t.prototype.Pe=function(){return this.xe().Pe()},t.prototype.He=function(){return this.collectionGroup!==null},t.prototype.xe=function(){if(!this.ye)if(this.ge==="F")this.ye=new QR(this.path,this.collectionGroup,this.orderBy,this.filters,this.limit,this.startAt,this.endAt);else{for(var e=[],n=0,r=this.orderBy;n<r.length;n++){var i=r[n],o=i.dir===Yn.DESCENDING?Yn.ASCENDING:Yn.DESCENDING;e.push(new Bh(i.field,o))}var a=this.endAt?new dp(this.endAt.position,!this.endAt.before):null,c=this.startAt?new dp(this.startAt.position,!this.startAt.before):null;this.ye=new QR(this.path,this.collectionGroup,e,this.filters,this.limit,a,c)}return this.ye},t.prototype.Ue=function(e){var n=e.key.path;return this.collectionGroup!==null?e.key.et(this.collectionGroup)&&this.path.q(n):ct.st(this.path)?this.path.isEqual(n):this.path.W(n)},t.prototype.qe=function(e){for(var n=0,r=this.Ve;n<r.length;n++){var i=r[n];if(!i.field.Y()&&e.field(i.field)===null)return!1}return!0},t.prototype.Qe=function(e){for(var n=0,r=this.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0},t.prototype.We=function(e){return!(this.startAt&&!this.startAt.Je(this.orderBy,e)||this.endAt&&this.endAt.Je(this.orderBy,e))},t.prototype.be=function(e){},t}(),Xe=function(){function t(e){this.name=e}return t.G=function(e){switch(e){case"<":return t.LESS_THAN;case"<=":return t.LESS_THAN_OR_EQUAL;case"==":return t.EQUAL;case">=":return t.GREATER_THAN_OR_EQUAL;case">":return t.GREATER_THAN;case"array-contains":return t.ARRAY_CONTAINS;case"in":return t.IN;case"array-contains-any":return t.ARRAY_CONTAINS_ANY;default:return We("Unknown FieldFilter operator: "+e)}},t.prototype.toString=function(){return this.name},t.prototype.isEqual=function(e){return this.name===e.name},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xe.LESS_THAN=new Xe("<"),Xe.LESS_THAN_OR_EQUAL=new Xe("<="),Xe.EQUAL=new Xe("=="),Xe.GREATER_THAN=new Xe(">"),Xe.GREATER_THAN_OR_EQUAL=new Xe(">="),Xe.ARRAY_CONTAINS=new Xe("array-contains"),Xe.IN=new Xe("in"),Xe.ARRAY_CONTAINS_ANY=new Xe("array-contains-any");var Qi=function(t){function e(n,r,i){var o=this;return(o=t.call(this)||this).field=n,o.op=r,o.value=i,o}return St(e,t),e.create=function(n,r,i){if(n.Y())return r===Xe.IN?new dY(n,i):new fY(n,r,i);if(Jj(i)){if(r!==Xe.EQUAL)throw new Ie(pe.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new e(n,r,i)}if(Zj(i)){if(r!==Xe.EQUAL)throw new Ie(pe.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new e(n,r,i)}return r===Xe.ARRAY_CONTAINS?new pY(n,i):r===Xe.IN?new vY(n,i):r===Xe.ARRAY_CONTAINS_ANY?new gY(n,i):new e(n,r,i)},e.prototype.matches=function(n){var r=n.field(this.field);return r!==null&&Aa(this.value)===Aa(r)&&this.Ye(cp(r,this.value))},e.prototype.Ye=function(n){switch(this.op){case Xe.LESS_THAN:return n<0;case Xe.LESS_THAN_OR_EQUAL:return n<=0;case Xe.EQUAL:return n===0;case Xe.GREATER_THAN:return n>0;case Xe.GREATER_THAN_OR_EQUAL:return n>=0;default:return We("Unknown FieldFilter operator: "+this.op)}},e.prototype.Ge=function(){return[Xe.LESS_THAN,Xe.LESS_THAN_OR_EQUAL,Xe.GREATER_THAN,Xe.GREATER_THAN_OR_EQUAL].indexOf(this.op)>=0},e.prototype.canonicalId=function(){return this.field.K()+this.op.toString()+C1(this.value)},e.prototype.isEqual=function(n){return n instanceof e&&this.op.isEqual(n.op)&&this.field.isEqual(n.field)&&ls(this.value,n.value)},e.prototype.toString=function(){return this.field.K()+" "+this.op+" "+C1(this.value)},e}(function(){}),fY=function(t){function e(n,r,i){var o=this;return(o=t.call(this,n,r,i)||this).key=ct.tt(i.referenceValue),o}return St(e,t),e.prototype.matches=function(n){var r=ct.F(n.key,this.key);return this.Ye(r)},e}(Qi),dY=function(t){function e(n,r){var i=this;return(i=t.call(this,n,Xe.IN,r)||this).keys=(r.arrayValue.values||[]).map(function(o){return ct.tt(o.referenceValue)}),i}return St(e,t),e.prototype.matches=function(n){return this.keys.some(function(r){return r.isEqual(n.key)})},e}(Qi),pY=function(t){function e(n,r){return t.call(this,n,Xe.ARRAY_CONTAINS,r)||this}return St(e,t),e.prototype.matches=function(n){var r=n.field(this.field);return rx(r)&&nx(r.arrayValue,this.value)},e}(Qi),vY=function(t){function e(n,r){return t.call(this,n,Xe.IN,r)||this}return St(e,t),e.prototype.matches=function(n){var r=n.field(this.field);return r!==null&&nx(this.value.arrayValue,r)},e}(Qi),gY=function(t){function e(n,r){return t.call(this,n,Xe.ARRAY_CONTAINS_ANY,r)||this}return St(e,t),e.prototype.matches=function(n){var r=this,i=n.field(this.field);return!(!rx(i)||!i.arrayValue.values)&&i.arrayValue.values.some(function(o){return nx(r.value.arrayValue,o)})},e}(Qi),Yn=function(){function t(e){this.name=e}return t.prototype.toString=function(){return this.name},t}();Yn.ASCENDING=new Yn("asc"),Yn.DESCENDING=new Yn("desc");var tr,$t,dp=function(){function t(e,n){this.position=e,this.before=n}return t.prototype.canonicalId=function(){return(this.before?"b":"a")+":"+this.position.map(function(e){return C1(e)}).join(",")},t.prototype.Je=function(e,n){for(var r=0,i=0;i<this.position.length;i++){var o=e[i],a=this.position[i];if(r=o.field.Y()?ct.F(ct.tt(a.referenceValue),n.key):cp(a,n.field(o.field)),o.dir===Yn.DESCENDING&&(r*=-1),r!==0)break}return this.before?r<=0:r<0},t.prototype.isEqual=function(e){if(e===null||this.before!==e.before||this.position.length!==e.position.length)return!1;for(var n=0;n<this.position.length;n++)if(!ls(this.position[n],e.position[n]))return!1;return!0},t}(),Bh=function(){function t(e,n){this.field=e,n===void 0&&(n=Yn.ASCENDING),this.dir=n,this.Xe=e.Y()}return t.prototype.compare=function(e,n){var r=this.Xe?Ht.we(e,n):Ht.Re(this.field,e,n);switch(this.dir){case Yn.ASCENDING:return r;case Yn.DESCENDING:return-1*r;default:return We("Unknown direction: "+this.dir)}},t.prototype.canonicalId=function(){return this.field.K()+this.dir.toString()},t.prototype.toString=function(){return this.field.K()+" ("+this.dir+")"},t.prototype.isEqual=function(e){return this.dir===e.dir&&this.field.isEqual(e.field)},t}(),ub=new Bh(Un.X(),Yn.ASCENDING),mY=new Bh(Un.X(),Yn.DESCENDING),S_=function(){function t(e,n,r,i,o,a,c){o===void 0&&(o=Rt.MIN),a===void 0&&(a=Rt.MIN),c===void 0&&(c=mr.xt),this.target=e,this.targetId=n,this.Ze=r,this.sequenceNumber=i,this.ts=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c}return t.prototype.es=function(e){return new t(this.target,this.targetId,this.Ze,e,this.ts,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.ss=function(e,n){return new t(this.target,this.targetId,this.Ze,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.ns=function(e){return new t(this.target,this.targetId,this.Ze,this.sequenceNumber,this.ts,e,this.resumeToken)},t}(),yY=function(t){this.count=t};function P1(t){switch(t){case pe.OK:return We("Treated status OK as error");case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0;default:return We("Unknown status code: "+t)}}function n3(t){if(t===void 0)return Qn("GRPC error has no .code"),pe.UNKNOWN;switch(t){case tr.OK:return pe.OK;case tr.CANCELLED:return pe.CANCELLED;case tr.UNKNOWN:return pe.UNKNOWN;case tr.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case tr.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case tr.INTERNAL:return pe.INTERNAL;case tr.UNAVAILABLE:return pe.UNAVAILABLE;case tr.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case tr.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case tr.NOT_FOUND:return pe.NOT_FOUND;case tr.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case tr.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case tr.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case tr.ABORTED:return pe.ABORTED;case tr.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case tr.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case tr.DATA_LOSS:return pe.DATA_LOSS;default:return We("Unknown status code: "+t)}}($t=tr||(tr={}))[$t.OK=0]="OK",$t[$t.CANCELLED=1]="CANCELLED",$t[$t.UNKNOWN=2]="UNKNOWN",$t[$t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$t[$t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$t[$t.NOT_FOUND=5]="NOT_FOUND",$t[$t.ALREADY_EXISTS=6]="ALREADY_EXISTS",$t[$t.PERMISSION_DENIED=7]="PERMISSION_DENIED",$t[$t.UNAUTHENTICATED=16]="UNAUTHENTICATED",$t[$t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$t[$t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$t[$t.ABORTED=10]="ABORTED",$t[$t.OUT_OF_RANGE=11]="OUT_OF_RANGE",$t[$t.UNIMPLEMENTED=12]="UNIMPLEMENTED",$t[$t.INTERNAL=13]="INTERNAL",$t[$t.UNAVAILABLE=14]="UNAVAILABLE",$t[$t.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _Y=new mi(ct.F);function Ou(){return _Y}function oy(){return Ou()}var wY=new mi(ct.F);function pp(){return wY}var EY=new mi(ct.F);function r3(){return EY}var bY=new In(ct.F);function ln(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=bY,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var SY=new In(Pt);function T_(){return SY}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var i3=function(){function t(e){this.F=e?function(n,r){return e(n,r)||ct.F(n.key,r.key)}:function(n,r){return ct.F(n.key,r.key)},this.rs=pp(),this.os=new mi(this.F)}return t.hs=function(e){return new t(e.F)},t.prototype.has=function(e){return this.rs.get(e)!=null},t.prototype.get=function(e){return this.rs.get(e)},t.prototype.first=function(){return this.os.ht()},t.prototype.last=function(){return this.os.at()},t.prototype.U=function(){return this.os.U()},t.prototype.indexOf=function(e){var n=this.rs.get(e);return n?this.os.indexOf(n):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.os.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(e){this.os.ut(function(n,r){return e(n),!1})},t.prototype.add=function(e){var n=this.delete(e.key);return n.rt(n.rs.it(e.key,e),n.os.it(e,null))},t.prototype.delete=function(e){var n=this.get(e);return n?this.rt(this.rs.remove(e),this.os.remove(n)):this},t.prototype.isEqual=function(e){if(!(e instanceof t)||this.size!==e.size)return!1;for(var n=this.os._t(),r=e.os._t();n.It();){var i=n.Et().key,o=r.Et().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var e=[];return this.forEach(function(n){e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`},t.prototype.rt=function(e,n){var r=new t;return r.F=this.F,r.rs=e,r.os=n,r},t}(),JR=function(){function t(){this.as=new mi(ct.F)}return t.prototype.track=function(e){var n=e.doc.key,r=this.as.get(n);r?e.type!==0&&r.type===3?this.as=this.as.it(n,e):e.type===3&&r.type!==1?this.as=this.as.it(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.as=this.as.it(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.as=this.as.it(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.as=this.as.remove(n):e.type===1&&r.type===2?this.as=this.as.it(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.as=this.as.it(n,{type:2,doc:e.doc}):We("unsupported combination of changes: "+JSON.stringify(e)+" after "+JSON.stringify(r)):this.as=this.as.it(n,e)},t.prototype.us=function(){var e=[];return this.as.ut(function(n,r){e.push(r)}),e},t}(),sy=function(){function t(e,n,r,i,o,a,c,f){this.query=e,this.docs=n,this.cs=r,this.docChanges=i,this._s=o,this.fromCache=a,this.ls=c,this.ds=f}return t.fs=function(e,n,r,i){var o=[];return n.forEach(function(a){o.push({type:0,doc:a})}),new t(e,n,i3.hs(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this._s.U()},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){if(!(this.fromCache===e.fromCache&&this.ls===e.ls&&this._s.isEqual(e._s)&&this.query.isEqual(e.query)&&this.docs.isEqual(e.docs)&&this.cs.isEqual(e.cs)))return!1;var n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0},t}(),D1=function(){function t(e,n,r,i,o){this.ts=e,this.Ts=n,this.ms=r,this.ws=i,this.Es=o}return t.Is=function(e,n){var r=new Map;return r.set(e,ox.Rs(e,n)),new t(Rt.MIN,r,T_(),Ou(),ln())},t}(),ox=function(){function t(e,n,r,i,o){this.resumeToken=e,this.As=n,this.Ps=r,this.Vs=i,this.gs=o}return t.Rs=function(e,n){return new t(mr.xt,n,ln(),ln(),ln())},t}(),em=function(t,e,n,r){this.ps=t,this.removedTargetIds=e,this.key=n,this.ys=r},o3=function(t,e){this.targetId=t,this.bs=e},s3=function(t,e,n,r){n===void 0&&(n=mr.xt),r===void 0&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},ZR=function(){function t(){this.vs=0,this.Ss=tO(),this.Ds=mr.xt,this.Cs=!1,this.ks=!0}return Object.defineProperty(t.prototype,"As",{get:function(){return this.Cs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.Ds},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Ns",{get:function(){return this.vs!==0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Fs",{get:function(){return this.ks},enumerable:!0,configurable:!0}),t.prototype.$s=function(e){e.Ot()>0&&(this.ks=!0,this.Ds=e)},t.prototype.Ms=function(){var e=ln(),n=ln(),r=ln();return this.Ss.forEach(function(i,o){switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:We("Encountered invalid change type: "+o)}}),new ox(this.Ds,this.Cs,e,n,r)},t.prototype.Ls=function(){this.ks=!1,this.Ss=tO()},t.prototype.Os=function(e,n){this.ks=!0,this.Ss=this.Ss.it(e,n)},t.prototype.xs=function(e){this.ks=!0,this.Ss=this.Ss.remove(e)},t.prototype.Bs=function(){this.vs+=1},t.prototype.Us=function(){this.vs-=1},t.prototype.qs=function(){this.ks=!0,this.Cs=!0},t}(),TY=function(){function t(e){this.Qs=e,this.Ws=new Map,this.js=Ou(),this.Ks=eO(),this.Gs=new In(Pt)}return t.prototype.zs=function(e){for(var n=0,r=e.ps;n<r.length;n++){var i=r[n];e.ys instanceof Ht?this.Hs(i,e.ys):e.ys instanceof Ar&&this.Js(i,e.key,e.ys)}for(var o=0,a=e.removedTargetIds;o<a.length;o++){var c=a[o];this.Js(c,e.key,e.ys)}},t.prototype.Ys=function(e){var n=this;this.Xs(e,function(r){var i=n.Zs(r);switch(e.state){case 0:n.tn(r)&&i.$s(e.resumeToken);break;case 1:i.Us(),i.Ns||i.Ls(),i.$s(e.resumeToken);break;case 2:i.Us(),i.Ns||n.removeTarget(r);break;case 3:n.tn(r)&&(i.qs(),i.$s(e.resumeToken));break;case 4:n.tn(r)&&(n.en(r),i.$s(e.resumeToken));break;default:We("Unknown target watch change state: "+e.state)}})},t.prototype.Xs=function(e,n){var r=this;e.targetIds.length>0?e.targetIds.forEach(n):this.Ws.forEach(function(i,o){r.tn(o)&&n(o)})},t.prototype.sn=function(e){var n=e.targetId,r=e.bs.count,i=this.nn(n);if(i){var o=i.target;if(o.Pe())if(r===0){var a=new ct(o.path);this.Js(n,a,new Ar(a,Rt.S()))}else at(r===1,"Single document existence filter with count: "+r);else this.in(n)!==r&&(this.en(n),this.Gs=this.Gs.add(n))}},t.prototype.rn=function(e){var n=this,r=new Map;this.Ws.forEach(function(a,c){var f=n.nn(c);if(f){if(a.As&&f.target.Pe()){var v=new ct(f.target.path);n.js.get(v)!==null||n.on(c,v)||n.Js(c,v,new Ar(v,e))}a.Fs&&(r.set(c,a.Ms()),a.Ls())}});var i=ln();this.Ks.forEach(function(a,c){var f=!0;c.kt(function(v){var y=n.nn(v);return!y||y.Ze===2||(f=!1,!1)}),f&&(i=i.add(a))});var o=new D1(e,r,this.Gs,this.js,i);return this.js=Ou(),this.Ks=eO(),this.Gs=new In(Pt),o},t.prototype.Hs=function(e,n){if(this.tn(e)){var r=this.on(e,n.key)?2:0;this.Zs(e).Os(n.key,r),this.js=this.js.it(n.key,n),this.Ks=this.Ks.it(n.key,this.hn(n.key).add(e))}},t.prototype.Js=function(e,n,r){if(this.tn(e)){var i=this.Zs(e);this.on(e,n)?i.Os(n,1):i.xs(n),this.Ks=this.Ks.it(n,this.hn(n).delete(e)),r&&(this.js=this.js.it(n,r))}},t.prototype.removeTarget=function(e){this.Ws.delete(e)},t.prototype.in=function(e){var n=this.Zs(e).Ms();return this.Qs.an(e).size+n.Ps.size-n.gs.size},t.prototype.Bs=function(e){this.Zs(e).Bs()},t.prototype.Zs=function(e){var n=this.Ws.get(e);return n||(n=new ZR,this.Ws.set(e,n)),n},t.prototype.hn=function(e){var n=this.Ks.get(e);return n||(n=new In(Pt),this.Ks=this.Ks.it(e,n)),n},t.prototype.tn=function(e){var n=this.nn(e)!==null;return n||Ke("WatchChangeAggregator","Detected inactive target",e),n},t.prototype.nn=function(e){var n=this.Ws.get(e);return n&&n.Ns?null:this.Qs.un(e)},t.prototype.en=function(e){var n=this;this.Ws.set(e,new ZR),this.Qs.an(e).forEach(function(r){n.Js(e,r,null)})},t.prototype.on=function(e,n){return this.Qs.an(e).has(n)},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eO(){return new mi(ct.F)}function tO(){return new mi(ct.F)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var IY=function(){var t={};return t[Yn.ASCENDING.name]="ASCENDING",t[Yn.DESCENDING.name]="DESCENDING",t}(),xY=function(){var t={};return t[Xe.LESS_THAN.name]="LESS_THAN",t[Xe.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",t[Xe.GREATER_THAN.name]="GREATER_THAN",t[Xe.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",t[Xe.EQUAL.name]="EQUAL",t[Xe.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",t[Xe.IN.name]="IN",t[Xe.ARRAY_CONTAINS_ANY.name]="ARRAY_CONTAINS_ANY",t}(),a3=function(){function t(e,n){this.cn=e,this.options=n}return t.prototype._n=function(e){var n=e.code===void 0?pe.UNKNOWN:n3(e.code);return new Ie(n,e.message||"")},t.prototype.ln=function(e){return this.options.dn||jl(e)?e:{value:e}},t.prototype.fn=function(e){var n;return jl(n=typeof e=="object"?e.value:e)?null:n},t.prototype.Wt=function(e){return{integerValue:""+e}},t.prototype.jt=function(e){if(this.options.dn){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ny(e)?"-0":e}},t.prototype.Tn=function(e){return Qj(e)?this.Wt(e):this.jt(e)},t.prototype.k=function(e){return this.options.dn?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}},t.prototype.v=function(e){var n=Ru(e);return new Fi(n.seconds,n.nanos)},t.prototype.mn=function(e){return this.options.dn?e.toBase64():e.toUint8Array()},t.prototype.wn=function(e){return this.options.dn?(at(e===void 0||typeof e=="string","value must be undefined or a string when using proto3 Json"),mr.fromBase64String(e||"")):(at(e===void 0||e instanceof Uint8Array,"value must be undefined or Uint8Array"),mr.fromUint8Array(e||new Uint8Array))},t.prototype.toVersion=function(e){return this.k(e.k())},t.prototype.fromVersion=function(e){return at(!!e,"Trying to deserialize version that isn't set"),Rt.v(this.v(e))},t.prototype.En=function(e,n){return this.In(n||this.cn).child("documents").child(e).K()},t.prototype.Rn=function(e){var n=gn.G(e);return at(u3(n),"Tried to deserialize invalid key "+n.toString()),n},t.prototype.An=function(e){return this.En(e.path)},t.prototype.tt=function(e){var n=this.Rn(e);return at(n.get(1)===this.cn.projectId,"Tried to deserialize key from different project: "+n.get(1)+" vs "+this.cn.projectId),at(!n.get(3)&&!this.cn.database||n.get(3)===this.cn.database,"Tried to deserialize key from different database: "+n.get(3)+" vs "+this.cn.database),new ct(this.Pn(n))},t.prototype.Vn=function(e){return this.En(e)},t.prototype.gn=function(e){var n=this.Rn(e);return n.length===4?gn.H:this.Pn(n)},Object.defineProperty(t.prototype,"pn",{get:function(){return new gn(["projects",this.cn.projectId,"databases",this.cn.database]).K()},enumerable:!0,configurable:!0}),t.prototype.In=function(e){return new gn(["projects",e.projectId,"databases",e.database])},t.prototype.Pn=function(e){return at(e.length>4&&e.get(4)==="documents","tried to deserialize invalid key "+e.toString()),e.M(5)},t.prototype.yn=function(e,n){return{name:this.An(e),fields:n.proto.mapValue.fields}},t.prototype.bn=function(e){return{name:this.An(e.key),fields:e.Ie().mapValue.fields,updateTime:this.k(e.version.k())}},t.prototype.vn=function(e,n){var r=this.tt(e.name),i=this.fromVersion(e.updateTime),o=new Xi({mapValue:{fields:e.fields}});return new Ht(r,i,o,{hasCommittedMutations:!!n})},t.prototype.Sn=function(e){at(!!e.found,"Tried to deserialize a found document from a missing document."),e.found.name,e.found.updateTime;var n=this.tt(e.found.name),r=this.fromVersion(e.found.updateTime),i=new Xi({mapValue:{fields:e.found.fields}});return new Ht(n,r,i,{})},t.prototype.Dn=function(e){at(!!e.missing,"Tried to deserialize a missing document from a found document."),at(!!e.readTime,"Tried to deserialize a missing document without a read time.");var n=this.tt(e.missing),r=this.fromVersion(e.readTime);return new Ar(n,r)},t.prototype.Cn=function(e){return"found"in e?this.Sn(e):"missing"in e?this.Dn(e):We("invalid batch get response: "+JSON.stringify(e))},t.prototype.kn=function(e){var n;if("targetChange"in e){e.targetChange;var r=this.Nn(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=this.wn(e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&this._n(a);n=new s3(r,i,o,c||null)}else if("documentChange"in e){e.documentChange;var f=e.documentChange;f.document,f.document.name,f.document.updateTime;var v=this.tt(f.document.name),y=this.fromVersion(f.document.updateTime),b=new Xi({mapValue:{fields:f.document.fields}}),E=new Ht(v,y,b,{}),I=f.targetIds||[],L=f.removedTargetIds||[];n=new em(I,L,E.key,E)}else if("documentDelete"in e){e.documentDelete;var D=e.documentDelete;D.document;var te=this.tt(D.document),z=D.readTime?this.fromVersion(D.readTime):Rt.S(),Y=new Ar(te,z),K=D.removedTargetIds||[];n=new em([],K,Y.key,Y)}else if("documentRemove"in e){e.documentRemove;var ue=e.documentRemove;ue.document;var oe=this.tt(ue.document),fe=ue.removedTargetIds||[];n=new em([],fe,oe,null)}else{if(!("filter"in e))return We("Unknown change type "+JSON.stringify(e));e.filter;var me=e.filter;me.targetId;var he=me.count||0,Z=new yY(he),be=me.targetId;n=new o3(be,Z)}return n},t.prototype.Nn=function(e){return e==="NO_CHANGE"?0:e==="ADD"?1:e==="REMOVE"?2:e==="CURRENT"?3:e==="RESET"?4:We("Got unexpected TargetChange.state: "+e)},t.prototype.Fn=function(e){if(!("targetChange"in e))return Rt.MIN;var n=e.targetChange;return n.targetIds&&n.targetIds.length?Rt.MIN:n.readTime?this.fromVersion(n.readTime):Rt.MIN},t.prototype.$n=function(e){var n,r=this;if(e instanceof R1)n={update:this.yn(e.key,e.value)};else if(e instanceof fp)n={delete:this.An(e.key)};else if(e instanceof Vh)n={update:this.yn(e.key,e.data),updateMask:this.Mn(e.se)};else if(e instanceof ry)n={transform:{document:this.An(e.key),fieldTransforms:e.fieldTransforms.map(function(i){return r.Ln(i)})}};else{if(!(e instanceof O1))return We("Unknown mutation type "+e.type);n={verify:this.An(e.key)}}return e.Zt.Ht||(n.currentDocument=this.On(e.Zt)),n},t.prototype.xn=function(e){var n=this,r=e.currentDocument?this.Bn(e.currentDocument):Cr.NONE;if(e.update){e.update.name;var i=this.tt(e.update.name),o=new Xi({mapValue:{fields:e.update.fields}});if(e.updateMask){var a=this.Un(e.updateMask);return new Vh(i,o,a,r)}return new R1(i,o,r)}if(e.delete){var c=this.tt(e.delete);return new fp(c,r)}if(e.transform){var f=this.tt(e.transform.document),v=e.transform.fieldTransforms.map(function(b){return n.qn(b)});return at(r.exists===!0,'Transforms only support precondition "exists == true"'),new ry(f,v)}if(e.verify){var y=this.tt(e.verify);return new O1(y,r)}return We("unknown mutation proto: "+JSON.stringify(e))},t.prototype.On=function(e){return e.updateTime!==void 0?{updateTime:this.toVersion(e.updateTime)}:e.exists!==void 0?{exists:e.exists}:We("Unknown precondition")},t.prototype.Bn=function(e){return e.updateTime!==void 0?Cr.updateTime(this.fromVersion(e.updateTime)):e.exists!==void 0?Cr.exists(e.exists):Cr.NONE},t.prototype.Qn=function(e,n){var r=e.updateTime?this.fromVersion(e.updateTime):this.fromVersion(n);r.isEqual(Rt.MIN)&&(r=this.fromVersion(n));var i=null;return e.transformResults&&e.transformResults.length>0&&(i=e.transformResults),new cY(r,i)},t.prototype.Wn=function(e,n){var r=this;return e&&e.length>0?(at(n!==void 0,"Received a write result without a commit time"),e.map(function(i){return r.Qn(i,n)})):[]},t.prototype.Ln=function(e){var n=e.transform;if(n instanceof hp)return{fieldPath:e.field.K(),setToServerValue:"REQUEST_TIME"};if(n instanceof N1)return{fieldPath:e.field.K(),appendMissingElements:{values:n.elements}};if(n instanceof A1)return{fieldPath:e.field.K(),removeAllFromArray:{values:n.elements}};if(n instanceof k1)return{fieldPath:e.field.K(),increment:n.Qt};throw We("Unknown transform: "+e.transform)},t.prototype.qn=function(e){var n=null;if("setToServerValue"in e)at(e.setToServerValue==="REQUEST_TIME","Unknown server value transform proto: "+JSON.stringify(e)),n=hp.instance;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new N1(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new A1(i)}else"increment"in e?n=new k1(this,e.increment):We("Unknown transform proto: "+JSON.stringify(e));var o=Un.Z(e.fieldPath);return new ld(o,n)},t.prototype.jn=function(e){return{documents:[this.Vn(e.path)]}},t.prototype.Kn=function(e){var n=e.documents.length;at(n===1,"DocumentsTarget contained other than 1 document: "+n);var r=e.documents[0];return Vl.ve(this.gn(r)).xe()},t.prototype.Gn=function(e){var n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=this.Vn(r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=this.Vn(r.L()),n.structuredQuery.from=[{collectionId:r.B()}]);var i=this.zn(e.filters);i&&(n.structuredQuery.where=i);var o=this.Hn(e.orderBy);o&&(n.structuredQuery.orderBy=o);var a=this.ln(e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=this.Jn(e.startAt)),e.endAt&&(n.structuredQuery.endAt=this.Jn(e.endAt)),n},t.prototype.Yn=function(e){var n=this.gn(e.parent),r=e.structuredQuery,i=r.from?r.from.length:0,o=null;if(i>0){at(i===1,"StructuredQuery.from with more than one collection is not supported.");var a=r.from[0];a.allDescendants?o=a.collectionId:n=n.child(a.collectionId)}var c=[];r.where&&(c=this.Xn(r.where));var f=[];r.orderBy&&(f=this.Zn(r.orderBy));var v=null;r.limit&&(v=this.fn(r.limit));var y=null;r.startAt&&(y=this.ti(r.startAt));var b=null;return r.endAt&&(b=this.ti(r.endAt)),new Vl(n,o,f,c,v,"F",y,b).xe()},t.prototype.ei=function(e){var n=this.si(e.Ze);return n==null?null:{"goog-listen-tags":n}},t.prototype.si=function(e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return We("Unrecognized query purpose: "+e)}},t.prototype.xe=function(e){var n,r=e.target;return(n=r.Pe()?{documents:this.jn(r)}:{query:this.Gn(r)}).targetId=e.targetId,e.resumeToken.Ot()>0&&(n.resumeToken=this.mn(e.resumeToken)),n},t.prototype.zn=function(e){var n=this;if(e.length!==0){var r=e.map(function(i){return i instanceof Qi?n.ni(i):We("Unrecognized filter: "+JSON.stringify(i))});return r.length===1?r[0]:{compositeFilter:{op:"AND",filters:r}}}},t.prototype.Xn=function(e){var n=this;return e?e.unaryFilter!==void 0?[this.ii(e)]:e.fieldFilter!==void 0?[this.ri(e)]:e.compositeFilter!==void 0?e.compositeFilter.filters.map(function(r){return n.Xn(r)}).reduce(function(r,i){return r.concat(i)}):We("Unknown filter: "+JSON.stringify(e)):[]},t.prototype.Hn=function(e){var n=this;if(e.length!==0)return e.map(function(r){return n.oi(r)})},t.prototype.Zn=function(e){var n=this;return e.map(function(r){return n.hi(r)})},t.prototype.Jn=function(e){return{before:e.before,values:e.position}},t.prototype.ti=function(e){var n=!!e.before,r=e.values||[];return new dp(r,n)},t.prototype.ai=function(e){return IY[e.name]},t.prototype.ui=function(e){switch(e){case"ASCENDING":return Yn.ASCENDING;case"DESCENDING":return Yn.DESCENDING;default:return}},t.prototype.ci=function(e){return xY[e.name]},t.prototype._i=function(e){switch(e){case"EQUAL":return Xe.EQUAL;case"GREATER_THAN":return Xe.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return Xe.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return Xe.LESS_THAN;case"LESS_THAN_OR_EQUAL":return Xe.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return Xe.ARRAY_CONTAINS;case"IN":return Xe.IN;case"ARRAY_CONTAINS_ANY":return Xe.ARRAY_CONTAINS_ANY;case"OPERATOR_UNSPECIFIED":return We("Unspecified operator");default:return We("Unknown operator")}},t.prototype.li=function(e){return{fieldPath:e.K()}},t.prototype.di=function(e){return Un.Z(e.fieldPath)},t.prototype.oi=function(e){return{field:this.li(e.field),direction:this.ai(e.dir)}},t.prototype.hi=function(e){return new Bh(this.di(e.field),this.ui(e.direction))},t.prototype.ri=function(e){return Qi.create(this.di(e.fieldFilter.field),this._i(e.fieldFilter.op),e.fieldFilter.value)},t.prototype.ni=function(e){if(e.op===Xe.EQUAL){if(Zj(e.value))return{unaryFilter:{field:this.li(e.field),op:"IS_NAN"}};if(Jj(e.value))return{unaryFilter:{field:this.li(e.field),op:"IS_NULL"}}}return{fieldFilter:{field:this.li(e.field),op:this.ci(e.op),value:e.value}}},t.prototype.ii=function(e){switch(e.unaryFilter.op){case"IS_NAN":var n=this.di(e.unaryFilter.field);return Qi.create(n,Xe.EQUAL,{doubleValue:NaN});case"IS_NULL":var r=this.di(e.unaryFilter.field);return Qi.create(r,Xe.EQUAL,{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return We("Unspecified filter");default:return We("Unknown filter")}},t.prototype.Mn=function(e){var n=[];return e.fields.forEach(function(r){return n.push(r.K())}),{fieldPaths:n}},t.prototype.Un=function(e){var n=(e.fieldPaths||[]).map(function(r){return Un.Z(r)});return oh.Gt(n)},t}();function u3(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bl=function(){function t(){}return t.fi=function(e){t.platform&&We("Platform already defined"),t.platform=e},t.Lt=function(){return t.platform||We("Platform not set"),t.platform},t}(),Su=new Kh("@firebase/firestore");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ay(){return Su.logLevel}function lb(t){Su.logLevel=t}function Ke(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Su.logLevel<=wt.DEBUG){var r=e.map(l3);Su.debug.apply(Su,eo(["Firestore ("+b_+"): "+t],r))}}function Qn(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Su.logLevel<=wt.ERROR){var r=e.map(l3);Su.error.apply(Su,eo(["Firestore ("+b_+"): "+t],r))}}function l3(t){if(typeof t=="string")return t;var e=Bl.Lt();try{return e.Ti(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function We(t){var e="FIRESTORE ("+b_+") INTERNAL ASSERTION FAILED: "+t;throw Qn(e),new Error(e)}function at(t,e){t||We(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var c3=function(){function t(){}return t.mi=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="",r=0;r<20;r++)n+=e.charAt(Math.floor(Math.random()*e.length));return n},t}();function Pt(t,e){return t<e?-1:t>e?1:0}function zh(t,e,n){return t.length===e.length&&t.every(function(r,i){return n(r,e[i])})}function h3(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var CY=function(t,e,n,r,i){this.cn=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i},L1=function(){function t(e,n){this.projectId=e,this.database=n||"(default)"}return Object.defineProperty(t.prototype,"wi",{get:function(){return this.database==="(default)"},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.D=function(e){return Pt(this.projectId,e.projectId)||Pt(this.database,e.database)},t}(),ef=function(){function t(e){this.Ei=e,this.Ii={}}return t.prototype.get=function(e){var n=this.Ei(e),r=this.Ii[n];if(r!==void 0)for(var i=0,o=r;i<o.length;i++){var a=o[i],c=a[0],f=a[1];if(c.isEqual(e))return f}},t.prototype.has=function(e){return this.get(e)!==void 0},t.prototype.set=function(e,n){var r=this.Ei(e),i=this.Ii[r];if(i!==void 0){for(var o=0;o<i.length;o++)if(i[o][0].isEqual(e))return void(i[o]=[e,n]);i.push([e,n])}else this.Ii[r]=[[e,n]]},t.prototype.delete=function(e){var n=this.Ei(e),r=this.Ii[n];if(r===void 0)return!1;for(var i=0;i<r.length;i++)if(r[i][0].isEqual(e))return r.length===1?delete this.Ii[n]:r.splice(i,1),!0;return!1},t.prototype.forEach=function(e){Fl(this.Ii,function(n,r){for(var i=0,o=r;i<o.length;i++){var a=o[i],c=a[0],f=a[1];e(c,f)}})},t.prototype.U=function(){return Xj(this.Ii)},t}(),sx=function(){function t(e,n,r,i){this.batchId=e,this.Ri=n,this.baseMutations=r,this.mutations=i}return t.prototype.Ut=function(e,n,r){for(var i=r.Ai,o=0;o<this.mutations.length;o++){var a=this.mutations[o];if(a.key.isEqual(e)){var c=i[o];n=a.Ut(n,c)}}return n},t.prototype.Bt=function(e,n){for(var r=0,i=this.baseMutations;r<i.length;r++){var o=i[r];o.key.isEqual(e)&&(n=o.Bt(n,n,this.Ri))}for(var a=n,c=0,f=this.mutations;c<f.length;c++){var v=f[c];v.key.isEqual(e)&&(n=v.Bt(n,a,this.Ri))}return n},t.prototype.Pi=function(e){var n=this,r=e;return this.mutations.forEach(function(i){var o=n.Bt(i.key,e.get(i.key));o&&(r=r.it(i.key,o))}),r},t.prototype.keys=function(){return this.mutations.reduce(function(e,n){return e.add(n.key)},ln())},t.prototype.isEqual=function(e){return this.batchId===e.batchId&&zh(this.mutations,e.mutations,function(n,r){return n.isEqual(r)})&&zh(this.baseMutations,e.baseMutations,function(n,r){return n.isEqual(r)})},t}(),NY=function(){function t(e,n,r,i,o){this.batch=e,this.Vi=n,this.Ai=r,this.streamToken=i,this.gi=o}return t.from=function(e,n,r,i){at(e.mutations.length===r.length,"Mutations sent "+e.mutations.length+" must equal results received "+r.length);for(var o=r3(),a=e.mutations,c=0;c<a.length;c++)o=o.it(a[c].key,r[c].version);return new t(e,n,r,i,o)},t}(),ax=function(){function t(){this.pi=new In(br.we),this.yi=new In(br.bi)}return t.prototype.U=function(){return this.pi.U()},t.prototype.vi=function(e,n){var r=new br(e,n);this.pi=this.pi.add(r),this.yi=this.yi.add(r)},t.prototype.Si=function(e,n){var r=this;e.forEach(function(i){return r.vi(i,n)})},t.prototype.Di=function(e,n){this.Ci(new br(e,n))},t.prototype.ki=function(e,n){var r=this;e.forEach(function(i){return r.Di(i,n)})},t.prototype.Ni=function(e){var n=this,r=ct.EMPTY,i=new br(r,e),o=new br(r,e+1),a=[];return this.yi.Ct([i,o],function(c){n.Ci(c),a.push(c.key)}),a},t.prototype.Fi=function(){var e=this;this.pi.forEach(function(n){return e.Ci(n)})},t.prototype.Ci=function(e){this.pi=this.pi.delete(e),this.yi=this.yi.delete(e)},t.prototype.$i=function(e){var n=ct.EMPTY,r=new br(n,e),i=new br(n,e+1),o=ln();return this.yi.Ct([r,i],function(a){o=o.add(a.key)}),o},t.prototype.Mi=function(e){var n=new br(e,0),r=this.pi.Nt(n);return r!==null&&e.isEqual(r.key)},t}(),br=function(){function t(e,n){this.key=e,this.Li=n}return t.we=function(e,n){return ct.F(e.key,n.key)||Pt(e.Li,n.Li)},t.bi=function(e,n){return Pt(e.Li,n.Li)||ct.F(e.key,n.key)},t}(),ke=function(){function t(e){var n=this;this.Oi=null,this.xi=null,this.result=void 0,this.error=void 0,this.Bi=!1,this.Ui=!1,e(function(r){n.Bi=!0,n.result=r,n.Oi&&n.Oi(r)},function(r){n.Bi=!0,n.error=r,n.xi&&n.xi(r)})}return t.prototype.catch=function(e){return this.next(void 0,e)},t.prototype.next=function(e,n){var r=this;return this.Ui&&We("Called next() or catch() twice for PersistencePromise"),this.Ui=!0,this.Bi?this.error?this.qi(n,this.error):this.Qi(e,this.result):new t(function(i,o){r.Oi=function(a){r.Qi(e,a).next(i,o)},r.xi=function(a){r.qi(n,a).next(i,o)}})},t.prototype.Wi=function(){var e=this;return new Promise(function(n,r){e.next(n,r)})},t.prototype.ji=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(r){return t.reject(r)}},t.prototype.Qi=function(e,n){return e?this.ji(function(){return e(n)}):t.resolve(n)},t.prototype.qi=function(e,n){return e?this.ji(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(n,r){n(e)})},t.reject=function(e){return new t(function(n,r){r(e)})},t.Ki=function(e){return new t(function(n,r){var i=0,o=0,a=!1;e.forEach(function(c){++i,c.next(function(){++o,a&&o===i&&n()},function(f){return r(f)})}),a=!0,o===i&&n()})},t.Gi=function(e){for(var n=t.resolve(!1),r=function(a){n=n.next(function(c){return c?t.resolve(c):a()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(e,n){var r=this,i=[];return e.forEach(function(o,a){i.push(n.call(r,o,a))}),this.Ki(i)},t}(),f3=function(){function t(){this.zi=new ef(function(e){return e.toString()}),this.Hi=!1}return Object.defineProperty(t.prototype,"readTime",{get:function(){return this.Ji},set:function(e){this.Ji=e},enumerable:!0,configurable:!0}),t.prototype.Yi=function(e,n){this.Xi(),this.readTime=n,this.zi.set(e.key,e)},t.prototype.Zi=function(e,n){this.Xi(),n&&(this.readTime=n),this.zi.set(e,null)},t.prototype.tr=function(e,n){this.Xi();var r=this.zi.get(n);return r!==void 0?ke.resolve(r):this.er(e,n)},t.prototype.getEntries=function(e,n){return this.sr(e,n)},t.prototype.apply=function(e){return this.Xi(),this.Hi=!0,this.nr(e)},t.prototype.Xi=function(){},t}(),d3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",p3=function(){function t(){this.ir=[]}return t.prototype.rr=function(e){this.ir.push(e)},t.prototype.or=function(){this.ir.forEach(function(e){return e()})},t}(),nO=function(){function t(e,n,r){this.hr=e,this.ar=n,this.ur=r}return t.prototype.cr=function(e,n){var r=this;return this.ar._r(e,n).next(function(i){return r.lr(e,n,i)})},t.prototype.lr=function(e,n,r){return this.hr.tr(e,n).next(function(i){for(var o=0,a=r;o<a.length;o++)i=a[o].Bt(n,i);return i})},t.prototype.dr=function(e,n,r){var i=oy();return n.forEach(function(o,a){for(var c=0,f=r;c<f.length;c++)a=f[c].Bt(o,a);i=i.it(o,a)}),i},t.prototype.Tr=function(e,n){var r=this;return this.hr.getEntries(e,n).next(function(i){return r.mr(e,i)})},t.prototype.mr=function(e,n){var r=this;return this.ar.wr(e,n).next(function(i){var o=r.dr(e,n,i),a=Ou();return o.forEach(function(c,f){f||(f=new Ar(c,Rt.S())),a=a.it(c,f)}),a})},t.prototype.Er=function(e,n,r){return n.Pe()?this.Ir(e,n.path):n.He()?this.Rr(e,n,r):this.Ar(e,n,r)},t.prototype.Ir=function(e,n){return this.cr(e,new ct(n)).next(function(r){var i=pp();return r instanceof Ht&&(i=i.it(r.key,r)),i})},t.prototype.Rr=function(e,n,r){var i=this,o=n.collectionGroup,a=pp();return this.ur.Pr(e,o).next(function(c){return ke.forEach(c,function(f){var v=n.Le(f.child(o));return i.Ar(e,v,r).next(function(y){y.forEach(function(b,E){a=a.it(b,E)})})}).next(function(){return a})})},t.prototype.Ar=function(e,n,r){var i,o,a=this;return this.hr.Er(e,n,r).next(function(c){return i=c,a.ar.Vr(e,n)}).next(function(c){return o=c,a.gr(e,o,i).next(function(f){i=f;for(var v=0,y=o;v<y.length;v++)for(var b=y[v],E=0,I=b.mutations;E<I.length;E++){var L=I[E],D=L.key,te=i.get(D),z=L.Bt(te,te,b.Ri);i=z instanceof Ht?i.it(D,z):i.remove(D)}})}).next(function(){return i.forEach(function(c,f){n.matches(f)||(i=i.remove(c))}),i})},t.prototype.gr=function(e,n,r){for(var i=ln(),o=0,a=n;o<a.length;o++)for(var c=0,f=a[o].mutations;c<f.length;c++){var v=f[c];v instanceof Vh&&r.get(v.key)===null&&(i=i.add(v.key))}var y=r;return this.hr.getEntries(e,i).next(function(b){return b.forEach(function(E,I){I!==null&&I instanceof Ht&&(y=y.it(E,I))}),y})},t}(),AY=function(){function t(e,n,r,i){this.targetId=e,this.fromCache=n,this.pr=r,this.yr=i}return t.br=function(e,n){for(var r=ln(),i=ln(),o=0,a=n.docChanges;o<a.length;o++){var c=a[o];switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:i=i.add(c.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),es=function(){function t(e,n){var r=this;this.previousValue=e,n&&(n.vr=function(i){return r.Sr(i)},this.Dr=function(i){return n.Cr(i)})}return t.prototype.Sr=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},t.prototype.next=function(){var e=++this.previousValue;return this.Dr&&this.Dr(e),e},t}();es.kr=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var au=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},kY=function(){function t(e,n,r,i,o){this.Nr=e,this.Fr=n,this.$r=r,this.op=i,this.Mr=o,this.Lr=new au,this.then=this.Lr.promise.then.bind(this.Lr.promise),this.catch=this.Lr.promise.catch.bind(this.Lr.promise),this.Lr.promise.catch(function(a){})}return t.Or=function(e,n,r,i,o){var a=new t(e,n,Date.now()+r,i,o);return a.start(r),a},t.prototype.start=function(e){var n=this;this.xr=setTimeout(function(){return n.Br()},e)},t.prototype.Ur=function(){return this.Br()},t.prototype.cancel=function(e){this.xr!==null&&(this.clearTimeout(),this.Lr.reject(new Ie(pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},t.prototype.Br=function(){var e=this;this.Nr.qr(function(){return e.xr!==null?(e.clearTimeout(),e.op().then(function(n){return e.Lr.resolve(n)})):Promise.resolve()})},t.prototype.clearTimeout=function(){this.xr!==null&&(this.Mr(this),clearTimeout(this.xr),this.xr=null)},t}(),RY=function(){function t(){this.Qr=Promise.resolve(),this.Wr=!1,this.jr=[],this.Kr=null,this.Gr=!1,this.zr=[]}return Object.defineProperty(t.prototype,"Hr",{get:function(){return this.Wr},enumerable:!0,configurable:!0}),t.prototype.qr=function(e){this.enqueue(e)},t.prototype.Jr=function(e){this.Yr(),this.Xr(e)},t.prototype.Zr=function(e){return this.Yr(),this.Xr(e)},t.prototype.to=function(e){return Ee(this,void 0,void 0,function(){return we(this,function(n){switch(n.label){case 0:return this.Yr(),this.Wr?[3,2]:(this.Wr=!0,[4,this.Zr(e)]);case 1:n.sent(),n.label=2;case 2:return[2]}})})},t.prototype.enqueue=function(e){return this.Yr(),this.Wr?new Promise(function(n){}):this.Xr(e)},t.prototype.Xr=function(e){var n=this,r=this.Qr.then(function(){return n.Gr=!0,e().catch(function(i){throw n.Kr=i,n.Gr=!1,Qn("INTERNAL UNHANDLED ERROR: ",i.stack||i.message||""),i}).then(function(i){return n.Gr=!1,i})});return this.Qr=r,r},t.prototype.eo=function(e,n,r){var i=this;this.Yr(),this.zr.indexOf(e)>-1&&(n=0);var o=kY.Or(this,e,n,r,function(a){return i.so(a)});return this.jr.push(o),o},t.prototype.Yr=function(){this.Kr&&We("AsyncQueue is already failed: "+(this.Kr.stack||this.Kr.message))},t.prototype.no=function(){},t.prototype.io=function(){return Ee(this,void 0,void 0,function(){var e;return we(this,function(n){switch(n.label){case 0:return[4,e=this.Qr];case 1:n.sent(),n.label=2;case 2:if(e!==this.Qr)return[3,0];n.label=3;case 3:return[2]}})})},t.prototype.ro=function(e){for(var n=0,r=this.jr;n<r.length;n++)if(r[n].Fr===e)return!0;return!1},t.prototype.oo=function(e){var n=this;return this.io().then(function(){n.jr.sort(function(a,c){return a.$r-c.$r});for(var r=0,i=n.jr;r<i.length;r++){var o=i[r];if(o.Ur(),e!=="all"&&o.Fr===e)break}return n.io()})},t.prototype.ho=function(e){this.zr.push(e)},t.prototype.so=function(e){var n=this.jr.indexOf(e);this.jr.splice(n,1)},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rO(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=Pt(n,i);return a===0?Pt(r,o):a}var OY=function(){function t(e){this.ao=e,this.buffer=new In(rO),this.uo=0}return t.prototype.co=function(){return++this.uo},t.prototype._o=function(e){var n=[e,this.co()];if(this.buffer.size<this.ao)this.buffer=this.buffer.add(n);else{var r=this.buffer.last();rO(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),t}(),iO={lo:!1,do:0,fo:0,To:0},nr=function(){function t(e,n,r){this.mo=e,this.wo=n,this.Eo=r}return t.Io=function(e){return new t(e,t.Ro,t.Ao)},t}();nr.Po=-1,nr.Vo=1048576,nr.po=41943040,nr.Ro=10,nr.Ao=1e3,nr.yo=new nr(nr.po,nr.Ro,nr.Ao),nr.DISABLED=new nr(nr.Po,0,0);var PY=function(){function t(e,n){this.bo=e,this.Nr=n,this.vo=!1,this.So=null}return t.prototype.start=function(e){this.bo.Do.mo!==nr.Po&&this.Co(e)},t.prototype.stop=function(){this.So&&(this.So.cancel(),this.So=null)},Object.defineProperty(t.prototype,"ko",{get:function(){return this.So!==null},enumerable:!0,configurable:!0}),t.prototype.Co=function(e){var n=this,r=this.vo?3e5:6e4;Ke("LruGarbageCollector","Garbage collection scheduled in "+r+"ms"),this.So=this.Nr.eo("lru_garbage_collection",r,function(){return n.So=null,n.vo=!0,e.No(n.bo).then(function(){return n.Co(e)}).catch(oa)})},t}(),DY=function(){function t(e,n){this.Fo=e,this.Do=n}return t.prototype.$o=function(e,n){return this.Fo.Mo(e).next(function(r){return Math.floor(n/100*r)})},t.prototype.Lo=function(e,n){var r=this;if(n===0)return ke.resolve(es.kr);var i=new OY(n);return this.Fo.Xs(e,function(o){return i._o(o.sequenceNumber)}).next(function(){return r.Fo.Oo(e,function(o){return i._o(o)})}).next(function(){return i.maxValue})},t.prototype.xo=function(e,n,r){return this.Fo.xo(e,n,r)},t.prototype.Bo=function(e,n){return this.Fo.Bo(e,n)},t.prototype.Uo=function(e,n){var r=this;return this.Do.mo===nr.Po?(Ke("LruGarbageCollector","Garbage collection skipped; disabled"),ke.resolve(iO)):this.qo(e).next(function(i){return i<r.Do.mo?(Ke("LruGarbageCollector","Garbage collection skipped; Cache size "+i+" is lower than threshold "+r.Do.mo),iO):r.Qo(e,n)})},t.prototype.qo=function(e){return this.Fo.qo(e)},t.prototype.Qo=function(e,n){var r,i,o,a,c,f,v,y=this,b=Date.now();return this.$o(e,this.Do.wo).next(function(E){return E>y.Do.Eo?(Ke("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+y.Do.Eo+" from "+E),i=y.Do.Eo):i=E,a=Date.now(),y.Lo(e,i)}).next(function(E){return r=E,c=Date.now(),y.xo(e,r,n)}).next(function(E){return o=E,f=Date.now(),y.Bo(e,r)}).next(function(E){return v=Date.now(),ay()<=wt.DEBUG&&Ke("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in `+(a-b)+`ms
	Determined least recently used `+i+" in "+(c-a)+`ms
	Removed `+o+" targets in "+(f-c)+`ms
	Removed `+E+" documents in "+(v-f)+`ms
Total Duration: `+(v-b)+"ms"),ke.resolve({lo:!0,do:i,fo:o,To:E})})},t}(),ux=function(){function t(e,n,r){this.persistence=e,this.Wo=n,this.jo=new ax,this.Ko=new mi(Pt),this.Go=new ef(function(i){return i.canonicalId()}),this.zo=Rt.MIN,this.persistence.Jo.Ho(this.jo),this.ar=e.Yo(r),this.Xo=e.Zo(),this.th=e.eh(),this.sh=new nO(this.Xo,this.ar,this.persistence.nh()),this.Wo.ih(this.sh)}return t.prototype.start=function(){return this.rh()},t.prototype.oh=function(e){return Ee(this,void 0,void 0,function(){var n,r,i,o=this;return we(this,function(a){switch(a.label){case 0:return n=this.ar,r=this.sh,[4,this.persistence.runTransaction("Handle user change","readonly",function(c){var f;return o.ar.hh(c).next(function(v){return f=v,n=o.persistence.Yo(e),r=new nO(o.Xo,n,o.persistence.nh()),n.hh(c)}).next(function(v){for(var y=[],b=[],E=ln(),I=0,L=f;I<L.length;I++){var D=L[I];y.push(D.batchId);for(var te=0,z=D.mutations;te<z.length;te++){var Y=z[te];E=E.add(Y.key)}}for(var K=0,ue=v;K<ue.length;K++){var oe=ue[K];b.push(oe.batchId);for(var fe=0,me=oe.mutations;fe<me.length;fe++){var he=me[fe];E=E.add(he.key)}}return r.Tr(c,E).next(function(Z){return{ah:Z,uh:y,_h:b}})})})];case 1:return i=a.sent(),[2,(this.ar=n,this.sh=r,this.Wo.ih(this.sh),i)]}})})},t.prototype.lh=function(e){var n,r=this,i=Fi.now(),o=e.reduce(function(a,c){return a.add(c.key)},ln());return this.persistence.runTransaction("Locally write mutations","readwrite",function(a){return r.sh.Tr(a,o).next(function(c){n=c;for(var f=[],v=0,y=e;v<y.length;v++){var b=y[v],E=b.ee(n.get(b.key));E!=null&&f.push(new Vh(b.key,E,E.se(),Cr.exists(!0)))}return r.ar.dh(a,i,f,e)})}).then(function(a){var c=a.Pi(n);return{batchId:a.batchId,zi:c}})},t.prototype.fh=function(e){var n=this;return this.persistence.runTransaction("Lookup mutation documents","readonly",function(r){return n.ar.Th(r,e).next(function(i){return i?n.sh.Tr(r,i):ke.resolve(null)})})},t.prototype.mh=function(e){var n=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(r){var i=e.batch.keys(),o=n.Xo.wh({Eh:!0});return n.ar.mh(r,e.batch,e.streamToken).next(function(){return n.Ih(r,e,o)}).next(function(){return o.apply(r)}).next(function(){return n.ar.Rh(r)}).next(function(){return n.sh.Tr(r,i)})})},t.prototype.Ah=function(e){var n=this;return this.persistence.runTransaction("Reject batch","readwrite-primary",function(r){var i;return n.ar.Ph(r,e).next(function(o){return at(o!==null,"Attempt to reject nonexistent batch!"),i=o.keys(),n.ar.Vh(r,o)}).next(function(){return n.ar.Rh(r)}).next(function(){return n.sh.Tr(r,i)})})},t.prototype.gh=function(){var e=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(n){return e.ar.gh(n)})},t.prototype.ph=function(){var e=this;return this.persistence.runTransaction("Get last stream token","readonly",function(n){return e.ar.ph(n)})},t.prototype.yh=function(e){var n=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary",function(r){return n.ar.yh(r,e)})},t.prototype.bh=function(){var e=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly",function(n){return e.th.bh(n)})},t.prototype.vh=function(e){var n=this,r=e.ts,i=this.Ko;return this.persistence.runTransaction("Apply remote event","readwrite-primary",function(o){var a=n.Xo.wh({Eh:!0});i=n.Ko;var c=[];e.Ts.forEach(function(b,E){var I=i.get(E);if(I){c.push(n.th.Sh(o,b.gs,E).next(function(){return n.th.Dh(o,b.Ps,E)}));var L=b.resumeToken;if(L.Ot()>0){var D=I.ss(L,r).es(o.Ch);i=i.it(E,D),t.kh(I,D,b)&&c.push(n.th.Nh(o,D))}}});var f=Ou(),v=ln();if(e.ws.forEach(function(b,E){v=v.add(b)}),c.push(a.getEntries(o,v).next(function(b){e.ws.forEach(function(E,I){var L=b.get(E);I instanceof Ar&&I.version.isEqual(Rt.MIN)?(a.Zi(E,r),f=f.it(E,I)):L==null||I.version.D(L.version)>0||I.version.D(L.version)===0&&L.hasPendingWrites?(a.Yi(I,r),f=f.it(E,I)):Ke("LocalStore","Ignoring outdated watch update for ",E,". Current version:",L.version," Watch version:",I.version),e.Es.has(E)&&c.push(n.persistence.Jo.Fh(o,E))})})),!r.isEqual(Rt.MIN)){var y=n.th.bh(o).next(function(b){return n.th.$h(o,o.Ch,r)});c.push(y)}return ke.Ki(c).next(function(){return a.apply(o)}).next(function(){return n.sh.mr(o,f)})}).then(function(o){return n.Ko=i,o})},t.kh=function(e,n,r){return at(n.resumeToken.Ot()>0,"Attempted to persist target data with no resume token"),e.resumeToken.Ot()===0||n.ts.C()-e.ts.C()>=this.Mh||r.Ps.size+r.Vs.size+r.gs.size>0},t.prototype.Lh=function(e){for(var n=this,r=0,i=e;r<i.length;r++){var o=i[r],a=o.targetId;if(this.jo.Si(o.pr,a),this.jo.ki(o.yr,a),!o.fromCache){var c=this.Ko.get(a),f=c.ts,v=c.ns(f);this.Ko=this.Ko.it(a,v)}}return this.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(y){return ke.forEach(e,function(b){return ke.forEach(b.yr,function(E){return n.persistence.Jo.Di(y,E)})})})},t.prototype.Oh=function(e){var n=this;return this.persistence.runTransaction("Get next mutation batch","readonly",function(r){return e===void 0&&(e=-1),n.ar.xh(r,e)})},t.prototype.Bh=function(e){var n=this;return this.persistence.runTransaction("read document","readonly",function(r){return n.sh.cr(r,e)})},t.prototype.Uh=function(e){var n=this;return this.persistence.runTransaction("Allocate target","readwrite",function(r){var i;return n.th.qh(r,e).next(function(o){return o?(i=o,ke.resolve(i)):n.th.Qh(r).next(function(a){return i=new S_(e,a,0,r.Ch),n.th.Wh(r,i).next(function(){return i})})})}).then(function(r){return n.Ko.get(r.targetId)===null&&(n.Ko=n.Ko.it(r.targetId,r),n.Go.set(e,r.targetId)),r})},t.prototype.qh=function(e,n){var r=this.Go.get(n);return r!==void 0?ke.resolve(this.Ko.get(r)):this.th.qh(e,n)},t.prototype.jh=function(e,n){var r=this,i=this.Ko.get(e),o=n?"readwrite":"readwrite-primary";return this.persistence.runTransaction("Release target",o,function(a){var c=r.jo.Ni(e);return n?ke.resolve():ke.forEach(c,function(f){return r.persistence.Jo.Di(a,f)}).next(function(){r.persistence.Jo.removeTarget(a,i)})}).then(function(){r.Ko=r.Ko.remove(e),r.Go.delete(i.target)})},t.prototype.Kh=function(e,n){var r=this,i=Rt.MIN,o=ln();return this.persistence.runTransaction("Execute query","readonly",function(a){return r.qh(a,e.xe()).next(function(c){if(c)return i=c.lastLimboFreeSnapshotVersion,r.th.Gh(a,c.targetId).next(function(f){o=f})}).next(function(){return r.Wo.Er(a,e,n?i:Rt.MIN,n?o:ln())}).next(function(c){return{documents:c,zh:o}})})},t.prototype.Hh=function(e){var n=this;return this.persistence.runTransaction("Remote document keys","readonly",function(r){return n.th.Gh(r,e)})},t.prototype.Jh=function(){return this.persistence.Jh()},t.prototype.Yh=function(e){this.ar.Xh(e)},t.prototype.Zh=function(e){this.persistence.Zh(e)},t.prototype.Ih=function(e,n,r){var i=this,o=n.batch,a=o.keys(),c=ke.resolve();return a.forEach(function(f){c=c.next(function(){return r.tr(e,f)}).next(function(v){var y=v,b=n.gi.get(f);at(b!==null,"ackVersions should contain every doc in the write."),(!y||y.version.D(b)<0)&&(y=o.Ut(f,y,n))&&r.Yi(y,n.Vi)})}),c.next(function(){return i.ar.Vh(e,o)})},t.prototype.No=function(e){var n=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(r){return e.Uo(r,n.Ko)})},t.prototype.ta=function(e){var n=this,r=this.Ko.get(e);return r?Promise.resolve(r.target):this.persistence.runTransaction("Get target data","readonly",function(i){return n.th.un(i,e).next(function(o){return o?o.target:null})})},t.prototype.ea=function(){var e=this;return this.persistence.runTransaction("Get new document changes","readonly",function(n){return e.Xo.ea(n,e.zo)}).then(function(n){var r=n.sa,i=n.readTime;return e.zo=i,r})},t.prototype.rh=function(){return Ee(this,void 0,void 0,function(){var e,n=this;return we(this,function(r){switch(r.label){case 0:return e=this,[4,this.persistence.runTransaction("Synchronize last document change read time","readonly",function(i){return n.Xo.na(i)})];case 1:return e.zo=r.sent(),[2]}})})},t}();function oa(t){return Ee(this,void 0,void 0,function(){return we(this,function(e){if(t.code!==pe.FAILED_PRECONDITION||t.message!==d3)throw t;return Ke("LocalStore","Unexpectedly lost primary lease"),[2]})})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oO(t,e){if(e.length!==0)throw new Ie(pe.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+zl(e.length,"argument")+".")}function wn(t,e,n){if(e.length!==n)throw new Ie(pe.INVALID_ARGUMENT,"Function "+t+"() requires "+zl(n,"argument")+", but was called with "+zl(e.length,"argument")+".")}function ga(t,e,n){if(e.length<n)throw new Ie(pe.INVALID_ARGUMENT,"Function "+t+"() requires at least "+zl(n,"argument")+", but was called with "+zl(e.length,"argument")+".")}function Io(t,e,n,r){if(e.length<n||e.length>r)throw new Ie(pe.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+zl(e.length,"argument")+".")}function $n(t,e,n,r){m3(t,e,$p(n)+" argument",r)}function _h(t,e,n,r){r!==void 0&&$n(t,e,n,r)}function v3(t,e,n,r){m3(t,e,n+" option",r)}function ua(t,e,n,r){r!==void 0&&v3(t,e,n,r)}function g3(t,e,n,r,i){r!==void 0&&function(o,a,c,f,v){for(var y=[],b=0,E=v;b<E.length;b++){var I=E[b];if(I===f)return;y.push(Us(I))}var L=Us(f);throw new Ie(pe.INVALID_ARGUMENT,"Invalid value "+L+" provided to function "+o+'() for option "'+c+'". Acceptable values: '+y.join(", "))}(t,0,n,r,i)}function m3(t,e,n,r){if(!(e==="object"?y3(r):e==="non-empty string"?typeof r=="string"&&r!=="":typeof r===e)){var i=Us(r);throw new Ie(pe.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function y3(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Us(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";var e=function(n){if(n.constructor){var r=/function\s+([^\s(]+)\s*\(/.exec(n.constructor.toString());if(r&&r.length>1)return r[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return typeof t=="function"?"a function":We("Unknown wrong type: "+typeof t)}function sO(t,e,n){if(n===void 0)throw new Ie(pe.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+$p(e)+" argument, but it was undefined.")}function tc(t,e,n){Fl(e,function(r,i){if(n.indexOf(r)<0)throw new Ie(pe.INVALID_ARGUMENT,"Unknown option '"+r+"' passed to function "+t+"(). Available options: "+n.join(", "))})}function nc(t,e,n,r){var i=Us(r);return new Ie(pe.INVALID_ARGUMENT,"Function "+t+"() requires its "+$p(n)+" argument to be a "+e+", but it was: "+i)}function aO(t,e,n){if(n<=0)throw new Ie(pe.INVALID_ARGUMENT,'Function "'+t+'()" requires its '+$p(e)+" argument to be a positive number, but it was: "+n+".")}function $p(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function zl(t,e){return t+" "+e+(t===1?"":"s")}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fs(t,e){function n(){var r="This constructor is private.";throw e&&(r+=" ",r+=e),new Ie(pe.INVALID_ARGUMENT,r)}return n.prototype=t.prototype,Object.assign(n,t),n}function uO(){if(typeof Uint8Array>"u")throw new Ie(pe.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function cb(){if(!Bl.Lt().ia)throw new Ie(pe.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}ux.Mh=3e8;var I_=function(){function t(e){cb(),this.ra=e}return t.fromBase64String=function(e){wn("Blob.fromBase64String",arguments,1),$n("Blob.fromBase64String","string",1,e),cb();try{return new t(mr.fromBase64String(e))}catch(n){throw new Ie(pe.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+n)}},t.fromUint8Array=function(e){if(wn("Blob.fromUint8Array",arguments,1),uO(),!(e instanceof Uint8Array))throw nc("Blob.fromUint8Array","Uint8Array",1,e);return new t(mr.fromUint8Array(e))},t.prototype.toBase64=function(){return wn("Blob.toBase64",arguments,0),cb(),this.ra.toBase64()},t.prototype.toUint8Array=function(){return wn("Blob.toUint8Array",arguments,0),uO(),this.ra.toUint8Array()},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(e){return this.ra.isEqual(e.ra)},t}(),LY=fs(I_,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),cs=function(){function t(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];(function(i,o,a,c){if(!(o instanceof Array)||o.length<1)throw new Ie(pe.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+zl(1,"element")+".")})(0,e);for(var r=0;r<e.length;++r)if($n("FieldPath","string",r,e[r]),e[r].length===0)throw new Ie(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.oa=new Un(e)}return t.documentId=function(){return t.ha},t.prototype.isEqual=function(e){if(!(e instanceof t))throw nc("isEqual","FieldPath",1,e);return this.oa.isEqual(e.oa)},t}();cs.ha=new cs(Un.X().K());var MY=new RegExp("[~\\*/\\[\\]]"),Uu=function(){function t(e){this.aa=e}return t.delete=function(){return oO("FieldValue.delete",arguments),wh.instance},t.serverTimestamp=function(){return oO("FieldValue.serverTimestamp",arguments),uy.instance},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return ga("FieldValue.arrayUnion",arguments,1),new _3(e)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return ga("FieldValue.arrayRemove",arguments,1),new w3(e)},t.increment=function(e){return $n("FieldValue.increment","number",1,e),wn("FieldValue.increment",arguments,1),new E3(e)},t.prototype.isEqual=function(e){return this===e},t}(),wh=function(t){function e(){return t.call(this,"FieldValue.delete")||this}return St(e,t),e}(Uu);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wh.instance=new wh;var uy=function(t){function e(){return t.call(this,"FieldValue.serverTimestamp")||this}return St(e,t),e}(Uu);uy.instance=new uy;var _3=function(t){function e(n){var r=this;return(r=t.call(this,"FieldValue.arrayUnion")||this).ua=n,r}return St(e,t),e}(Uu),w3=function(t){function e(n){var r=this;return(r=t.call(this,"FieldValue.arrayRemove")||this).ua=n,r}return St(e,t),e}(Uu),E3=function(t){function e(n){var r=this;return(r=t.call(this,"FieldValue.increment")||this).ca=n,r}return St(e,t),e}(Uu),FY=fs(Uu,"Use FieldValue.<field>() instead."),x_=function(){function t(e,n){if(wn("GeoPoint",arguments,2),$n("GeoPoint","number",1,e),$n("GeoPoint","number",2,n),!isFinite(e)||e<-90||e>90)throw new Ie(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ie(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._a=e,this.la=n}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._a},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.la},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return this._a===e._a&&this.la===e.la},t.prototype.p=function(e){return Pt(this._a,e._a)||Pt(this.la,e.la)},t}(),jY=/^__.*__$/,lO=function(){function t(e,n,r){this.data=e,this.se=n,this.fieldTransforms=r}return t.prototype.da=function(e,n){var r=[];return this.se!==null?r.push(new Vh(e,this.data,this.se,n)):r.push(new R1(e,this.data,n)),this.fieldTransforms.length>0&&r.push(new ry(e,this.fieldTransforms)),r},t}(),cO=function(){function t(e,n,r){this.data=e,this.se=n,this.fieldTransforms=r}return t.prototype.da=function(e,n){var r=[new Vh(e,this.data,this.se,n)];return this.fieldTransforms.length>0&&r.push(new ry(e,this.fieldTransforms)),r},t}();function b3(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw We("Unexpected case for UserDataSource: "+t)}}var Rc=function(){function t(e,n,r,i,o,a){this.fa=e,this.methodName=n,this.path=r,this.Ta=i,o===void 0&&this.ma(),this.Ta=i!==void 0&&i,this.fieldTransforms=o||[],this.se=a||[]}return t.prototype.wa=function(e){var n=this.path==null?null:this.path.child(e),r=new t(this.fa,this.methodName,n,!1,this.fieldTransforms,this.se);return r.Ea(e),r},t.prototype.Ia=function(e){var n=this.path==null?null:this.path.child(e),r=new t(this.fa,this.methodName,n,!1,this.fieldTransforms,this.se);return r.ma(),r},t.prototype.Ra=function(e){return new t(this.fa,this.methodName,null,!0,this.fieldTransforms,this.se)},t.prototype.Aa=function(e){var n=this.path===null||this.path.U()?"":" (found in field "+this.path.toString()+")";return new Ie(pe.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+e+n)},t.prototype.contains=function(e){return this.se.find(function(n){return e.q(n)})!==void 0||this.fieldTransforms.find(function(n){return e.q(n.field)})!==void 0},t.prototype.ma=function(){if(this.path!==null)for(var e=0;e<this.path.length;e++)this.Ea(this.path.get(e))},t.prototype.Ea=function(e){if(e.length===0)throw this.Aa("Document fields must not be empty");if(b3(this.fa)&&jY.test(e))throw this.Aa('Document fields cannot begin and end with "__"')},t}(),lx=function(t,e){this.cn=t,this.key=e},UY=function(){function t(e,n){this.serializer=e,this.Pa=n}return t.prototype.Va=function(e,n){var r=new Rc(0,e,Un.H);Tg("Data must be an object, but it was:",r,n);var i=this.ga(n,r);return new lO(new Xi(i),null,r.fieldTransforms)},t.prototype.pa=function(e,n,r){var i=new Rc(2,e,Un.H);Tg("Data must be an object, but it was:",i,n);var o,a,c=this.ga(n,i);if(r){for(var f=new In(Un.F),v=0,y=r;v<y.length;v++){var b=y[v],E=void 0;if(b instanceof cs)E=b.oa;else{if(typeof b!="string")throw We("Expected stringOrFieldPath to be a string or a FieldPath");E=M1(e,b)}if(!i.contains(E))throw new Ie(pe.INVALID_ARGUMENT,"Field '"+E+"' is specified in your field mask but missing from your input data.");f=f.add(E)}o=oh.Kt(f),a=i.fieldTransforms.filter(function(I){return o.zt(I.field)})}else o=oh.Gt(i.se),a=i.fieldTransforms;return new lO(new Xi(c),o,a)},t.prototype.ya=function(e,n){var r=this,i=new Rc(1,e,Un.H);Tg("Data must be an object, but it was:",i,n);var o=new In(Un.F),a=Xi._e();Fl(n,function(f,v){var y=M1(e,f),b=i.Ia(y);if((v=r.ba(v,b))instanceof wh)o=o.add(y);else{var E=r.va(v,b);E!=null&&(o=o.add(y),a.set(y,E))}});var c=oh.Kt(o);return new cO(a.oe(),c,i.fieldTransforms)},t.prototype.Sa=function(e,n,r,i){var o=new Rc(1,e,Un.H),a=[vp(e,n)],c=[r];if(i.length%2!=0)throw new Ie(pe.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var f=0;f<i.length;f+=2)a.push(vp(e,i[f])),c.push(i[f+1]);for(var v=new In(Un.F),y=Xi._e(),b=0;b<a.length;++b){var E=a[b],I=o.Ia(E),L=this.ba(c[b],I);if(L instanceof wh)v=v.add(E);else{var D=this.va(L,I);D!=null&&(v=v.add(E),y.set(E,D))}}var te=oh.Kt(v);return new cO(y.oe(),te,o.fieldTransforms)},t.prototype.Da=function(e,n,r){r===void 0&&(r=!1);var i=new Rc(r?4:3,e,Un.H);return this.va(n,i)},t.prototype.ba=function(e,n){try{return this.Pa(e)}catch(i){var r=T3(i);throw n.Aa(r)}},t.prototype.va=function(e,n){if(S3(e=this.ba(e,n)))return Tg("Unsupported field value:",n,e),this.ga(e,n);if(e instanceof Uu)return this.Ca(e,n),null;if(n.path&&n.se.push(n.path),e instanceof Array){if(n.Ta&&n.fa!==4)throw n.Aa("Nested arrays are not supported");return this.ka(e,n)}return this.Na(e,n)},t.prototype.ga=function(e,n){var r=this,i={};return Xj(e)?n.path&&n.path.length>0&&n.se.push(n.path):Fl(e,function(o,a){var c=r.va(a,n.wa(o));c!=null&&(i[o]=c)}),{mapValue:{fields:i}}},t.prototype.ka=function(e,n){for(var r=[],i=0,o=0,a=e;o<a.length;o++){var c=a[o],f=this.va(c,n.Ra(i));f==null&&(f={nullValue:"NULL_VALUE"}),r.push(f),i++}return{arrayValue:{values:r}}},t.prototype.Ca=function(e,n){if(!b3(n.fa))throw n.Aa(e.aa+"() can only be used with update() and set()");if(n.path===null)throw n.Aa(e.aa+"() is not currently supported inside arrays");if(e instanceof wh){if(n.fa!==2)throw n.fa===1?n.Aa("FieldValue.delete() can only appear at the top level of your update data"):n.Aa("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");n.se.push(n.path)}else if(e instanceof uy)n.fieldTransforms.push(new ld(n.path,hp.instance));else if(e instanceof _3){var r=this.Fa(e.aa,e.ua),i=new N1(r);n.fieldTransforms.push(new ld(n.path,i))}else if(e instanceof w3){var o=this.Fa(e.aa,e.ua),a=new A1(o);n.fieldTransforms.push(new ld(n.path,a))}else if(e instanceof E3){var c=this.Da("FieldValue.increment",e.ca),f=new k1(this.serializer,c);n.fieldTransforms.push(new ld(n.path,f))}else We("Unknown FieldValue type: "+e)},t.prototype.Na=function(e,n){if(e===null)return{nullValue:"NULL_VALUE"};if(typeof e=="number")return this.serializer.Tn(e);if(typeof e=="boolean")return{booleanValue:e};if(typeof e=="string")return{stringValue:e};if(e instanceof Date){var r=Fi.fromDate(e);return{timestampValue:this.serializer.k(r)}}if(e instanceof Fi){var i=new Fi(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:this.serializer.k(i)}}if(e instanceof x_)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof I_)return{bytesValue:this.serializer.mn(e)};if(e instanceof lx)return{referenceValue:this.serializer.En(e.key.path,e.cn)};throw n.Aa("Unsupported field value: "+Us(e))},t.prototype.Fa=function(e,n){var r=this;return n.map(function(i,o){var a=new Rc(3,e,Un.H);return r.va(i,a.Ra(o))})},t}();function S3(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Fi||t instanceof x_||t instanceof I_||t instanceof lx||t instanceof Uu)}function Tg(t,e,n){if(!S3(n)||!y3(n)){var r=Us(n);throw r==="an object"?e.Aa(t+" a custom object"):e.Aa(t+" "+r)}}function vp(t,e){if(e instanceof cs)return e.oa;if(typeof e=="string")return M1(t,e);throw new Ie(pe.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function M1(t,e){try{return function(r){if(r.search(MY)>=0)throw new Ie(pe.INVALID_ARGUMENT,"Invalid field path ("+r+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(cs.bind.apply(cs,eo([void 0],r.split("."))))}catch{throw new Ie(pe.INVALID_ARGUMENT,"Invalid field path ("+r+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e).oa}catch(r){var n=T3(r);throw new Ie(pe.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. "+n)}}function T3(t){return t instanceof Error?t.message:t.toString()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var I3=function(){function t(e,n,r,i,o){r===void 0&&(r=1e3),i===void 0&&(i=1.5),o===void 0&&(o=6e4),this.$a=e,this.Fr=n,this.Ma=r,this.La=i,this.Oa=o,this.xa=0,this.Ba=null,this.Ua=Date.now(),this.reset()}return t.prototype.reset=function(){this.xa=0},t.prototype.qa=function(){this.xa=this.Oa},t.prototype.Qa=function(e){var n=this;this.cancel();var r=Math.floor(this.xa+this.Wa()),i=Math.max(0,Date.now()-this.Ua),o=Math.max(0,r-i);this.xa>0&&Ke("ExponentialBackoff","Backing off for "+o+" ms (base delay: "+this.xa+" ms, delay with jitter: "+r+" ms, last attempt: "+i+" ms ago)"),this.Ba=this.$a.eo(this.Fr,o,function(){return n.Ua=Date.now(),e()}),this.xa*=this.La,this.xa<this.Ma&&(this.xa=this.Ma),this.xa>this.Oa&&(this.xa=this.Oa)},t.prototype.cancel=function(){this.Ba!==null&&(this.Ba.cancel(),this.Ba=null)},t.prototype.Wa=function(){return(Math.random()-.5)*this.xa},t}(),x3=function(){function t(e,n,r,i,o,a){this.$a=e,this.ja=r,this.Ka=i,this.Ga=o,this.listener=a,this.state=0,this.za=0,this.Ha=null,this.stream=null,this.Ja=new I3(e,n)}return t.prototype.Ya=function(){return this.state===1||this.state===2||this.state===4},t.prototype.Xa=function(){return this.state===2},t.prototype.start=function(){this.state!==3?this.auth():this.Za()},t.prototype.stop=function(){return Ee(this,void 0,void 0,function(){return we(this,function(e){switch(e.label){case 0:return this.Ya()?[4,this.close(0)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},t.prototype.tu=function(){this.state=0,this.Ja.reset()},t.prototype.eu=function(){var e=this;this.Xa()&&this.Ha===null&&(this.Ha=this.$a.eo(this.ja,6e4,function(){return e.su()}))},t.prototype.nu=function(e){this.iu(),this.stream.send(e)},t.prototype.su=function(){return Ee(this,void 0,void 0,function(){return we(this,function(e){return this.Xa()?[2,this.close(0)]:[2]})})},t.prototype.iu=function(){this.Ha&&(this.Ha.cancel(),this.Ha=null)},t.prototype.close=function(e,n){return Ee(this,void 0,void 0,function(){return we(this,function(r){switch(r.label){case 0:return this.iu(),this.Ja.cancel(),this.za++,e!==3?this.Ja.reset():n&&n.code===pe.RESOURCE_EXHAUSTED?(Qn(n.toString()),Qn("Using maximum backoff delay to prevent overloading the backend."),this.Ja.qa()):n&&n.code===pe.UNAUTHENTICATED&&this.Ga._(),this.stream!==null&&(this.ru(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.ou(n)];case 1:return r.sent(),[2]}})})},t.prototype.ru=function(){},t.prototype.auth=function(){var e=this;this.state=1;var n=this.hu(this.za),r=this.za;this.Ga.getToken().then(function(i){e.za===r&&e.au(i)},function(i){n(function(){var o=new Ie(pe.UNKNOWN,"Fetching auth token failed: "+i.message);return e.uu(o)})})},t.prototype.au=function(e){var n=this,r=this.hu(this.za);this.stream=this.cu(e),this.stream._u(function(){r(function(){return n.state=2,n.listener._u()})}),this.stream.ou(function(i){r(function(){return n.uu(i)})}),this.stream.onMessage(function(i){r(function(){return n.onMessage(i)})})},t.prototype.Za=function(){var e=this;this.state=4,this.Ja.Qa(function(){return Ee(e,void 0,void 0,function(){return we(this,function(n){return this.state=0,this.start(),[2]})})})},t.prototype.uu=function(e){return Ke("PersistentStream","close with error: "+e),this.stream=null,this.close(3,e)},t.prototype.hu=function(e){var n=this;return function(r){n.$a.qr(function(){return n.za===e?r():(Ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),VY=function(t){function e(n,r,i,o,a){var c=this;return(c=t.call(this,n,"listen_stream_connection_backoff","listen_stream_idle",r,i,a)||this).serializer=o,c}return St(e,t),e.prototype.cu=function(n){return this.Ka.lu("Listen",n)},e.prototype.onMessage=function(n){this.Ja.reset();var r=this.serializer.kn(n),i=this.serializer.Fn(n);return this.listener.du(r,i)},e.prototype.fu=function(n){var r={};r.database=this.serializer.pn,r.addTarget=this.serializer.xe(n);var i=this.serializer.ei(n);i&&(r.labels=i),this.nu(r)},e.prototype.Tu=function(n){var r={};r.database=this.serializer.pn,r.removeTarget=n,this.nu(r)},e}(x3),BY=function(t){function e(n,r,i,o,a){var c=this;return(c=t.call(this,n,"write_stream_connection_backoff","write_stream_idle",r,i,a)||this).serializer=o,c.mu=!1,c.lastStreamToken=mr.xt,c}return St(e,t),Object.defineProperty(e.prototype,"wu",{get:function(){return this.mu},enumerable:!0,configurable:!0}),e.prototype.start=function(){this.mu=!1,t.prototype.start.call(this)},e.prototype.ru=function(){this.mu&&this.Eu([])},e.prototype.cu=function(n){return this.Ka.lu("Write",n)},e.prototype.onMessage=function(n){if(at(!!n.streamToken,"Got a write response without a stream token"),this.lastStreamToken=this.serializer.wn(n.streamToken),this.mu){this.Ja.reset();var r=this.serializer.Wn(n.writeResults,n.commitTime),i=this.serializer.fromVersion(n.commitTime);return this.listener.Iu(i,r)}return at(!n.writeResults||n.writeResults.length===0,"Got mutation results for handshake"),this.mu=!0,this.listener.Ru()},e.prototype.Au=function(){var n={};n.database=this.serializer.pn,this.nu(n)},e.prototype.Eu=function(n){var r=this,i={streamToken:this.serializer.mn(this.lastStreamToken),writes:n.map(function(o){return r.serializer.$n(o)})};this.nu(i)},e}(x3),zY=function(){function t(e,n,r,i){this.$a=e,this.Ka=n,this.credentials=r,this.serializer=i}return t.prototype.Pu=function(e){return new BY(this.$a,this.Ka,this.credentials,this.serializer,e)},t.prototype.Vu=function(e){return new VY(this.$a,this.Ka,this.credentials,this.serializer,e)},t.prototype.commit=function(e){var n=this,r={database:this.serializer.pn,writes:e.map(function(i){return n.serializer.$n(i)})};return this.gu("Commit",r).then(function(i){return n.serializer.Wn(i.writeResults,i.commitTime)})},t.prototype.pu=function(e){var n=this,r={database:this.serializer.pn,documents:e.map(function(i){return n.serializer.An(i)})};return this.yu("BatchGetDocuments",r).then(function(i){var o=Ou();i.forEach(function(c){var f=n.serializer.Cn(c);o=o.it(f.key,f)});var a=[];return e.forEach(function(c){var f=o.get(c);at(!!f,"Missing entity in write response for "+c),a.push(f)}),a})},t.prototype.gu=function(e,n){var r=this;return this.credentials.getToken().then(function(i){return r.Ka.gu(e,n,i)}).catch(function(i){throw i.code===pe.UNAUTHENTICATED&&r.credentials._(),i})},t.prototype.yu=function(e,n){var r=this;return this.credentials.getToken().then(function(i){return r.Ka.yu(e,n,i)}).catch(function(i){throw i.code===pe.UNAUTHENTICATED&&r.credentials._(),i})},t}(),qY=function(){function t(e){this.bu=e,this.vu=r3(),this.mutations=[],this.Su=!1,this.Du=null,this.Cu=new Set}return t.prototype.pu=function(e){return Ee(this,void 0,void 0,function(){var n,r=this;return we(this,function(i){switch(i.label){case 0:if(this.ku(),this.mutations.length>0)throw new Ie(pe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,this.bu.pu(e)];case 1:return[2,((n=i.sent()).forEach(function(o){o instanceof Ar||o instanceof Ht?r.Nu(o):We("Document in a transaction was a "+o.constructor.name)}),n)]}})})},t.prototype.set=function(e,n){this.write(n.da(e,this.Zt(e))),this.Cu.add(e)},t.prototype.update=function(e,n){try{this.write(n.da(e,this.Fu(e)))}catch(r){this.Du=r}this.Cu.add(e)},t.prototype.delete=function(e){this.write([new fp(e,this.Zt(e))]),this.Cu.add(e)},t.prototype.commit=function(){return Ee(this,void 0,void 0,function(){var e,n=this;return we(this,function(r){switch(r.label){case 0:if(this.ku(),this.Du)throw this.Du;return e=this.vu,this.mutations.forEach(function(i){e=e.remove(i.key)}),e.forEach(function(i,o){n.mutations.push(new O1(i,n.Zt(i)))}),[4,this.bu.commit(this.mutations)];case 1:return r.sent(),this.Su=!0,[2]}})})},t.prototype.Nu=function(e){var n;if(e instanceof Ht)n=e.version;else{if(!(e instanceof Ar))throw We("Document in a transaction was a "+e.constructor.name);n=Rt.S()}var r=this.vu.get(e.key);if(r!==null){if(!n.isEqual(r))throw new Ie(pe.ABORTED,"Document version changed between two reads.")}else this.vu=this.vu.it(e.key,n)},t.prototype.Zt=function(e){var n=this.vu.get(e);return!this.Cu.has(e)&&n?Cr.updateTime(n):Cr.NONE},t.prototype.Fu=function(e){var n=this.vu.get(e);if(!this.Cu.has(e)&&n){if(n.isEqual(Rt.S()))throw new Ie(pe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Cr.updateTime(n)}return Cr.exists(!0)},t.prototype.write=function(e){this.ku(),this.mutations=this.mutations.concat(e)},t.prototype.ku=function(){},t}(),WY=function(){function t(e,n){this.Nr=e,this.$u=n,this.state="Unknown",this.Mu=0,this.Lu=null,this.Ou=!0}return t.prototype.xu=function(){var e=this;this.Mu===0&&(this.Bu("Unknown"),this.Lu=this.Nr.eo("online_state_timeout",1e4,function(){return e.Lu=null,e.Uu("Backend didn't respond within 10 seconds."),e.Bu("Offline"),Promise.resolve()}))},t.prototype.qu=function(e){this.state==="Online"?this.Bu("Unknown"):(this.Mu++,this.Mu>=1&&(this.Qu(),this.Uu("Connection failed 1 times. Most recent error: "+e.toString()),this.Bu("Offline")))},t.prototype.set=function(e){this.Qu(),this.Mu=0,e==="Online"&&(this.Ou=!1),this.Bu(e)},t.prototype.Bu=function(e){e!==this.state&&(this.state=e,this.$u(e))},t.prototype.Uu=function(e){var n="Could not reach Cloud Firestore backend. "+e+`
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Ou?(Qn(n),this.Ou=!1):Ke("OnlineStateTracker",n)},t.prototype.Qu=function(){this.Lu!==null&&(this.Lu.cancel(),this.Lu=null)},t}(),C3=function(){function t(e,n,r,i,o){var a=this;this.Wu=e,this.bu=n,this.ju=[],this.Ku=new Map,this.Gu=null,this.networkEnabled=!1,this.isPrimary=!1,this.zu=o,this.zu.Hu(function(c){r.qr(function(){return Ee(a,void 0,void 0,function(){return we(this,function(f){switch(f.label){case 0:return this.Ju()?(Ke("RemoteStore","Restarting streams for network reachability change."),[4,this.Yu()]):[3,2];case 1:f.sent(),f.label=2;case 2:return[2]}})})})}),this.Xu=new WY(r,i),this.Zu=this.bu.Vu({_u:this.tc.bind(this),ou:this.ec.bind(this),du:this.sc.bind(this)}),this.nc=this.bu.Pu({_u:this.ic.bind(this),ou:this.rc.bind(this),Ru:this.oc.bind(this),Iu:this.Iu.bind(this)})}return t.prototype.start=function(){return this.enableNetwork()},t.prototype.enableNetwork=function(){return Ee(this,void 0,void 0,function(){var e;return we(this,function(n){switch(n.label){case 0:return this.networkEnabled=!0,this.Ju()?(e=this.nc,[4,this.Wu.ph()]):[3,3];case 1:return e.lastStreamToken=n.sent(),this.hc()?this.ac():this.Xu.set("Unknown"),[4,this.uc()];case 2:n.sent(),n.label=3;case 3:return[2]}})})},t.prototype.disableNetwork=function(){return Ee(this,void 0,void 0,function(){return we(this,function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.cc()];case 1:return e.sent(),this.Xu.set("Offline"),[2]}})})},t.prototype.cc=function(){return Ee(this,void 0,void 0,function(){return we(this,function(e){switch(e.label){case 0:return[4,this.nc.stop()];case 1:return e.sent(),[4,this.Zu.stop()];case 2:return e.sent(),this.ju.length>0&&(Ke("RemoteStore","Stopping write stream with "+this.ju.length+" pending writes"),this.ju=[]),this._c(),[2]}})})},t.prototype.lc=function(){return Ee(this,void 0,void 0,function(){return we(this,function(e){switch(e.label){case 0:return Ke("RemoteStore","RemoteStore shutting down."),this.networkEnabled=!1,[4,this.cc()];case 1:return e.sent(),this.zu.lc(),this.Xu.set("Unknown"),[2]}})})},t.prototype.listen=function(e){this.Ku.has(e.targetId)||(this.Ku.set(e.targetId,e),this.hc()?this.ac():this.Zu.Xa()&&this.dc(e))},t.prototype.fc=function(e){this.Ku.delete(e),this.Zu.Xa()&&this.Tc(e),this.Ku.size===0&&(this.Zu.Xa()?this.Zu.eu():this.Ju()&&this.Xu.set("Unknown"))},t.prototype.un=function(e){return this.Ku.get(e)||null},t.prototype.an=function(e){return this.mc.an(e)},t.prototype.dc=function(e){this.Gu.Bs(e.targetId),this.Zu.fu(e)},t.prototype.Tc=function(e){this.Gu.Bs(e),this.Zu.Tu(e)},t.prototype.ac=function(){this.Gu=new TY(this),this.Zu.start(),this.Xu.xu()},t.prototype.hc=function(){return this.Ju()&&!this.Zu.Ya()&&this.Ku.size>0},t.prototype.Ju=function(){return this.isPrimary&&this.networkEnabled},t.prototype._c=function(){this.Gu=null},t.prototype.tc=function(){return Ee(this,void 0,void 0,function(){var e=this;return we(this,function(n){return this.Ku.forEach(function(r,i){e.dc(r)}),[2]})})},t.prototype.ec=function(e){return Ee(this,void 0,void 0,function(){return we(this,function(n){return this._c(),this.hc()?(this.Xu.qu(e),this.ac()):this.Xu.set("Unknown"),[2]})})},t.prototype.sc=function(e,n){return Ee(this,void 0,void 0,function(){var r;return we(this,function(i){switch(i.label){case 0:return this.Xu.set("Online"),e instanceof s3&&e.state===2&&e.cause?[2,this.wc(e)]:(e instanceof em?this.Gu.zs(e):e instanceof o3?this.Gu.sn(e):this.Gu.Ys(e),n.isEqual(Rt.MIN)?[3,4]:[4,this.Wu.bh()]);case 1:return r=i.sent(),n.D(r)>=0?[4,this.Ec(n)]:[3,3];case 2:i.sent(),i.label=3;case 3:i.label=4;case 4:return[2]}})})},t.prototype.Ec=function(e){var n=this,r=this.Gu.rn(e);return r.Ts.forEach(function(i,o){if(i.resumeToken.Ot()>0){var a=n.Ku.get(o);a&&n.Ku.set(o,a.ss(i.resumeToken,e))}}),r.ms.forEach(function(i){var o=n.Ku.get(i);if(o){n.Ku.set(i,o.ss(mr.xt,o.ts)),n.Tc(i);var a=new S_(o.target,i,1,o.sequenceNumber);n.dc(a)}}),this.mc.vh(r)},t.prototype.wc=function(e){var n=this,r=e.cause,i=Promise.resolve();return e.targetIds.forEach(function(o){i=i.then(function(){return Ee(n,void 0,void 0,function(){return we(this,function(a){return this.Ku.has(o)?[2,(this.Ku.delete(o),this.Gu.removeTarget(o),this.mc.Ic(o,r))]:[2]})})})}),i},t.prototype.uc=function(){return Ee(this,void 0,void 0,function(){var e,n;return we(this,function(r){switch(r.label){case 0:return this.Rc()?(e=this.ju.length>0?this.ju[this.ju.length-1].batchId:-1,[4,this.Wu.Oh(e)]):[3,5];case 1:return(n=r.sent())!==null?[3,2]:(this.ju.length===0&&this.nc.eu(),[3,4]);case 2:return this.Ac(n),[4,this.uc()];case 3:r.sent(),r.label=4;case 4:r.label=5;case 5:return this.Pc()&&this.Vc(),[2]}})})},t.prototype.Rc=function(){return this.Ju()&&this.ju.length<10},t.prototype.gc=function(){return this.ju.length},t.prototype.Ac=function(e){this.ju.push(e),this.nc.Xa()&&this.nc.wu&&this.nc.Eu(e.mutations)},t.prototype.Pc=function(){return this.Ju()&&!this.nc.Ya()&&this.ju.length>0},t.prototype.Vc=function(){this.nc.start()},t.prototype.ic=function(){return Ee(this,void 0,void 0,function(){return we(this,function(e){return this.nc.Au(),[2]})})},t.prototype.oc=function(){var e=this;return this.Wu.yh(this.nc.lastStreamToken).then(function(){for(var n=0,r=e.ju;n<r.length;n++){var i=r[n];e.nc.Eu(i.mutations)}}).catch(oa)},t.prototype.Iu=function(e,n){var r=this,i=this.ju.shift(),o=NY.from(i,e,n,this.nc.lastStreamToken);return this.mc.pc(o).then(function(){return r.uc()})},t.prototype.rc=function(e){return Ee(this,void 0,void 0,function(){var n,r=this;return we(this,function(i){return e&&this.ju.length>0?[2,(n=this.nc.wu?this.yc(e):this.bc(e),n.then(function(){r.Pc()&&r.Vc()}))]:[2]})})},t.prototype.bc=function(e){return Ee(this,void 0,void 0,function(){return we(this,function(n){return P1(e.code)?[2,(Ke("RemoteStore","RemoteStore error before completed handshake; resetting stream token: ",this.nc.lastStreamToken),this.nc.lastStreamToken=mr.xt,this.Wu.yh(mr.xt).catch(oa))]:[2]})})},t.prototype.yc=function(e){return Ee(this,void 0,void 0,function(){var n,r,i=this;return we(this,function(o){return P1(r=e.code)&&r!==pe.ABORTED?(n=this.ju.shift(),[2,(this.nc.tu(),this.mc.vc(n.batchId,e).then(function(){return i.uc()}))]):[2]})})},t.prototype.Sc=function(){return new qY(this.bu)},t.prototype.Yu=function(){return Ee(this,void 0,void 0,function(){return we(this,function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.cc()];case 1:return e.sent(),this.Xu.set("Unknown"),[4,this.enableNetwork()];case 2:return e.sent(),[2]}})})},t.prototype.Dc=function(){return Ee(this,void 0,void 0,function(){return we(this,function(e){switch(e.label){case 0:return this.Ju()?(Ke("RemoteStore","RemoteStore restarting streams for new credential"),[4,this.Yu()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},t.prototype.Cc=function(e){return Ee(this,void 0,void 0,function(){return we(this,function(n){switch(n.label){case 0:return this.isPrimary=e,e&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return n.sent(),[3,5];case 2:return e?[3,4]:[4,this.cc()];case 3:n.sent(),this.Xu.set("Unknown"),n.label=4;case 4:n.label=5;case 5:return[2]}})})},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hO(t,e){return"firestore_clients_"+t+"_"+e}function fO(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.t()&&(r+="_"+e.uid),r}function hb(t,e){return"firestore_targets_"+t+"_"+e}var dO=function(){function t(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}return t.kc=function(e,n,r){var i=JSON.parse(r),o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object"),a=void 0;return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string")&&(a=new Ie(i.error.code,i.error.message)),o?new t(e,n,i.state,a):(Qn("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Nc=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},t}(),fb=function(){function t(e,n,r){this.targetId=e,this.state=n,this.error=r}return t.kc=function(e,n){var r=JSON.parse(n),i=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object"),o=void 0;return i&&r.error&&(i=typeof r.error.message=="string"&&typeof r.error.code=="string")&&(o=new Ie(r.error.code,r.error.message)),i?new t(e,r.state,o):(Qn("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Nc=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},t}(),pO=function(){function t(e,n){this.clientId=e,this.activeTargetIds=n}return t.kc=function(e,n){for(var r=JSON.parse(n),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=T_(),a=0;i&&a<r.activeTargetIds.length;++a)i=Qj(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new t(e,o):(Qn("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),GY=function(){function t(e,n){this.clientId=e,this.onlineState=n}return t.kc=function(e){var n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(Qn("SharedClientState","Failed to parse online state: "+e),null)},t}(),F1=function(){function t(){this.activeTargetIds=T_()}return t.prototype.Fc=function(e){this.activeTargetIds=this.activeTargetIds.add(e)},t.prototype.$c=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},t.prototype.Nc=function(){var e={activeTargetIds:this.activeTargetIds.j(),updateTimeMs:Date.now()};return JSON.stringify(e)},t}(),vO=function(){function t(e,n,r,i,o){if(this.$a=e,this.platform=n,this.persistenceKey=r,this.Mc=i,this.mc=null,this.$u=null,this.vr=null,this.Lc={},this.Oc=this.xc.bind(this),this.ko=!1,this.Bc=[],!t.Uc(this.platform))throw new Ie(pe.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=o,this.qc=hO(this.persistenceKey,this.Mc),this.Qc=function(c){return"firestore_sequence_number_"+c}(this.persistenceKey),this.Lc[this.Mc]=new F1,this.Wc=new RegExp("^firestore_clients_"+a+"_([^_]*)$"),this.jc=new RegExp("^firestore_mutations_"+a+"_(\\d+)(?:_(.*))?$"),this.Kc=new RegExp("^firestore_targets_"+a+"_(\\d+)$"),this.Gc=function(c){return"firestore_online_state_"+c}(this.persistenceKey),this.platform.window.addEventListener("storage",this.Oc)}return t.Uc=function(e){return!(!e.window||e.window.localStorage==null)},t.prototype.start=function(){return Ee(this,void 0,void 0,function(){var e,n,r,i,o,a,c,f,v,y,b,E=this;return we(this,function(I){switch(I.label){case 0:return[4,this.mc.Jh()];case 1:for(e=I.sent(),n=0,r=e;n<r.length;n++)(i=r[n])!==this.Mc&&(o=this.getItem(hO(this.persistenceKey,i)))&&(a=pO.kc(i,o))&&(this.Lc[a.clientId]=a);for(this.zc(),(c=this.storage.getItem(this.Gc))&&(f=this.Hc(c))&&this.Jc(f),v=0,y=this.Bc;v<y.length;v++)b=y[v],this.xc(b);return this.Bc=[],this.platform.window.addEventListener("unload",function(){return E.lc()}),this.ko=!0,[2]}})})},t.prototype.Cr=function(e){this.setItem(this.Qc,JSON.stringify(e))},t.prototype.Yc=function(){var e=T_();return Fl(this.Lc,function(n,r){e=e.Ft(r.activeTargetIds)}),e},t.prototype.Xc=function(e){for(var n in this.Lc)if(this.Lc.hasOwnProperty(n)&&this.Lc[n].activeTargetIds.has(e))return!0;return!1},t.prototype.Zc=function(e){this.t_(e,"pending")},t.prototype.e_=function(e,n,r){this.t_(e,n,r),this.s_(e)},t.prototype.n_=function(e){var n="not-current";if(this.Xc(e)){var r=this.storage.getItem(hb(this.persistenceKey,e));if(r){var i=fb.kc(e,r);i&&(n=i.state)}}return this.i_.Fc(e),this.zc(),n},t.prototype.r_=function(e){this.i_.$c(e),this.zc()},t.prototype.o_=function(e){return this.i_.activeTargetIds.has(e)},t.prototype.h_=function(e){this.removeItem(hb(this.persistenceKey,e))},t.prototype.a_=function(e,n,r){this.u_(e,n,r)},t.prototype.oh=function(e,n,r){var i=this;n.forEach(function(o){i.s_(o)}),this.currentUser=e,r.forEach(function(o){i.Zc(o)})},t.prototype.c_=function(e){this.__(e)},t.prototype.lc=function(){this.ko&&(this.platform.window.removeEventListener("storage",this.Oc),this.removeItem(this.qc),this.ko=!1)},t.prototype.getItem=function(e){var n=this.storage.getItem(e);return Ke("SharedClientState","READ",e,n),n},t.prototype.setItem=function(e,n){Ke("SharedClientState","SET",e,n),this.storage.setItem(e,n)},t.prototype.removeItem=function(e){Ke("SharedClientState","REMOVE",e),this.storage.removeItem(e)},t.prototype.xc=function(e){var n=this;if(e.storageArea===this.storage){if(Ke("SharedClientState","EVENT",e.key,e.newValue),e.key===this.qc)return void Qn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.$a.qr(function(){return Ee(n,void 0,void 0,function(){var r,i,o,a,c,f;return we(this,function(v){if(this.ko){if(e.key!==null)if(this.Wc.test(e.key)){if(e.newValue==null)return r=this.l_(e.key),[2,this.d_(r,null)];if(i=this.f_(e.key,e.newValue))return[2,this.d_(i.clientId,i)]}else if(this.jc.test(e.key)){if(e.newValue!==null&&(o=this.T_(e.key,e.newValue)))return[2,this.m_(o)]}else if(this.Kc.test(e.key)){if(e.newValue!==null&&(a=this.w_(e.key,e.newValue)))return[2,this.E_(a)]}else if(e.key===this.Gc){if(e.newValue!==null&&(c=this.Hc(e.newValue)))return[2,this.Jc(c)]}else e.key===this.Qc&&(f=function(y){var b=es.kr;if(y!=null)try{var E=JSON.parse(y);at(typeof E=="number","Found non-numeric sequence number"),b=E}catch(I){Qn("SharedClientState","Failed to read sequence number from WebStorage",I)}return b}(e.newValue))!==es.kr&&this.vr(f)}else this.Bc.push(e);return[2]})})})}},Object.defineProperty(t.prototype,"i_",{get:function(){return this.Lc[this.Mc]},enumerable:!0,configurable:!0}),t.prototype.zc=function(){this.setItem(this.qc,this.i_.Nc())},t.prototype.t_=function(e,n,r){var i=new dO(this.currentUser,e,n,r),o=fO(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Nc())},t.prototype.s_=function(e){var n=fO(this.persistenceKey,this.currentUser,e);this.removeItem(n)},t.prototype.__=function(e){var n={clientId:this.Mc,onlineState:e};this.storage.setItem(this.Gc,JSON.stringify(n))},t.prototype.u_=function(e,n,r){var i=hb(this.persistenceKey,e),o=new fb(e,n,r);this.setItem(i,o.Nc())},t.prototype.l_=function(e){var n=this.Wc.exec(e);return n?n[1]:null},t.prototype.f_=function(e,n){var r=this.l_(e);return pO.kc(r,n)},t.prototype.T_=function(e,n){var r=this.jc.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return dO.kc(new _o(o),i,n)},t.prototype.w_=function(e,n){var r=this.Kc.exec(e),i=Number(r[1]);return fb.kc(i,n)},t.prototype.Hc=function(e){return GY.kc(e)},t.prototype.m_=function(e){return Ee(this,void 0,void 0,function(){return we(this,function(n){return e.user.uid===this.currentUser.uid?[2,this.mc.I_(e.batchId,e.state,e.error)]:(Ke("SharedClientState","Ignoring mutation for non-active user "+e.user.uid),[2])})})},t.prototype.E_=function(e){return this.mc.R_(e.targetId,e.state,e.error)},t.prototype.d_=function(e,n){var r=this,i=this.Yc();n?this.Lc[e]=n:delete this.Lc[e];var o=this.Yc(),a=[],c=[];return o.forEach(function(f){return Ee(r,void 0,void 0,function(){return we(this,function(v){return i.has(f)||a.push(f),[2]})})}),i.forEach(function(f){return Ee(r,void 0,void 0,function(){return we(this,function(v){return o.has(f)||c.push(f),[2]})})}),this.mc.A_(a,c)},t.prototype.Jc=function(e){this.Lc[e.clientId]&&this.$u(e.onlineState)},t}(),N3=function(){function t(){this.P_=new F1,this.V_={},this.mc=null,this.$u=null,this.vr=null}return t.prototype.Zc=function(e){},t.prototype.e_=function(e,n,r){},t.prototype.n_=function(e){return this.P_.Fc(e),this.V_[e]||"not-current"},t.prototype.a_=function(e,n,r){this.V_[e]=n},t.prototype.r_=function(e){this.P_.$c(e)},t.prototype.o_=function(e){return this.P_.activeTargetIds.has(e)},t.prototype.h_=function(e){delete this.V_[e]},t.prototype.Yc=function(){return this.P_.activeTargetIds},t.prototype.Xc=function(e){return this.P_.activeTargetIds.has(e)},t.prototype.start=function(){return this.P_=new F1,Promise.resolve()},t.prototype.oh=function(e,n,r){},t.prototype.c_=function(e){},t.prototype.lc=function(){},t.prototype.Cr=function(e){},t}(),ly=function(){function t(e){this.g_=e}return t.prototype.next=function(){return this.g_+=2,this.g_},t.p_=function(){return new t(0)},t.y_=function(){return new t(-1)},t}(),A3=function(t){this.key=t},k3=function(t){this.key=t},R3=function(){function t(e,n){this.query=e,this.b_=n,this.v_=null,this.As=!1,this.S_=ln(),this._s=ln(),this.D_=new i3(e.Be.bind(e))}return Object.defineProperty(t.prototype,"C_",{get:function(){return this.b_},enumerable:!0,configurable:!0}),t.prototype.k_=function(e,n){var r=this,i=n?n.N_:new JR,o=n?n.D_:this.D_,a=n?n._s:this._s,c=o,f=!1,v=this.query.je()&&o.size===this.query.limit?o.last():null,y=this.query.Ke()&&o.size===this.query.limit?o.first():null;if(e.ut(function(E,I){var L=o.get(E),D=I instanceof Ht?I:null;D&&(D=r.query.matches(D)?D:null);var te=!!L&&r._s.has(L.key),z=!!D&&(D.te||r._s.has(D.key)&&D.hasCommittedMutations),Y=!1;L&&D?L.data().isEqual(D.data())?te!==z&&(i.track({type:3,doc:D}),Y=!0):r.F_(L,D)||(i.track({type:2,doc:D}),Y=!0,(v&&r.query.Be(D,v)>0||y&&r.query.Be(D,y)<0)&&(f=!0)):!L&&D?(i.track({type:0,doc:D}),Y=!0):L&&!D&&(i.track({type:1,doc:L}),Y=!0,(v||y)&&(f=!0)),Y&&(D?(c=c.add(D),a=z?a.add(E):a.delete(E)):(c=c.delete(E),a=a.delete(E)))}),this.query.je()||this.query.Ke())for(;c.size>this.query.limit;){var b=this.query.je()?c.last():c.first();c=c.delete(b.key),a=a.delete(b.key),i.track({type:1,doc:b})}return{D_:c,N_:i,M_:f,_s:a}},t.prototype.F_=function(e,n){return e.te&&n.hasCommittedMutations&&!n.te},t.prototype.nr=function(e,n,r){var i=this,o=this.D_;this.D_=e.D_,this._s=e._s;var a=e.N_.us();a.sort(function(y,b){return function(E,I){var L=function(D){switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return We("Unknown ChangeType: "+D)}};return L(E)-L(I)}(y.type,b.type)||i.query.Be(y.doc,b.doc)}),this.L_(r);var c=n?this.O_():[],f=this.S_.size===0&&this.As?1:0,v=f!==this.v_;return this.v_=f,a.length!==0||v?{snapshot:new sy(this.query,e.D_,o,a,e._s,f===0,v,!1),x_:c}:{x_:c}},t.prototype.B_=function(e){return this.As&&e==="Offline"?(this.As=!1,this.nr({D_:this.D_,N_:new JR,_s:this._s,M_:!1},!1)):{x_:[]}},t.prototype.U_=function(e){return!this.b_.has(e)&&!!this.D_.has(e)&&!this.D_.get(e).te},t.prototype.L_=function(e){var n=this;e&&(e.Ps.forEach(function(r){return n.b_=n.b_.add(r)}),e.Vs.forEach(function(r){}),e.gs.forEach(function(r){return n.b_=n.b_.delete(r)}),this.As=e.As)},t.prototype.O_=function(){var e=this;if(!this.As)return[];var n=this.S_;this.S_=ln(),this.D_.forEach(function(i){e.U_(i.key)&&(e.S_=e.S_.add(i.key))});var r=[];return n.forEach(function(i){e.S_.has(i)||r.push(new k3(i))}),this.S_.forEach(function(i){n.has(i)||r.push(new A3(i))}),r},t.prototype.q_=function(e){this.b_=e.zh,this.S_=ln();var n=this.k_(e.documents);return this.nr(n,!0)},t.prototype.Q_=function(){return sy.fs(this.query,this.D_,this._s,this.v_===0)},t}(),$Y=function(){function t(e,n,r,i){this.Nr=e,this.W_=n,this.updateFunction=r,this.Lr=i,this.j_=5,this.Ja=new I3(this.Nr,"retry_transaction")}return t.prototype.K_=function(){this.G_()},t.prototype.G_=function(){var e=this;this.Ja.Qa(function(){return Ee(e,void 0,void 0,function(){var n,r,i=this;return we(this,function(o){return n=this.W_.Sc(),(r=this.z_(n))&&r.then(function(a){i.Nr.qr(function(){return n.commit().then(function(){i.Lr.resolve(a)}).catch(function(c){i.H_(c)})})}).catch(function(a){i.H_(a)}),[2]})})})},t.prototype.z_=function(e){try{var n=this.updateFunction(e);return!jl(n)&&n.catch&&n.then?n:(this.Lr.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.Lr.reject(r),null}},t.prototype.H_=function(e){var n=this;this.j_>0&&this.J_(e)?(this.j_-=1,this.Nr.qr(function(){return n.G_(),Promise.resolve()})):this.Lr.reject(e)},t.prototype.J_=function(e){if(e.name==="FirebaseError"){var n=e.code;return n==="aborted"||n==="failed-precondition"||!P1(n)}return!1},t}(),HY=function(t,e,n){this.query=t,this.targetId=e,this.view=n},KY=function(t){this.key=t,this.Y_=!1},O3=function(){function t(e,n,r,i,o){this.Wu=e,this.W_=n,this.X_=r,this.currentUser=i,this.Z_=o,this.tl=null,this.el=new ef(function(a){return a.canonicalId()}),this.sl=new Map,this.nl=[],this.il=new mi(ct.F),this.rl=new Map,this.ol=new ax,this.hl={},this.al=new Map,this.ul=ly.y_(),this.isPrimary=void 0,this.onlineState="Unknown"}return Object.defineProperty(t.prototype,"cl",{get:function(){return this.isPrimary===!0},enumerable:!0,configurable:!0}),t.prototype.subscribe=function(e){this.tl=e},t.prototype.listen=function(e){return Ee(this,void 0,void 0,function(){var n,r,i,o,a;return we(this,function(c){switch(c.label){case 0:return this._l("listen()"),(i=this.el.get(e))?(n=i.targetId,this.X_.n_(n),r=i.view.Q_(),[3,4]):[3,1];case 1:return[4,this.Wu.Uh(e.xe())];case 2:return o=c.sent(),a=this.X_.n_(o.targetId),n=o.targetId,[4,this.ll(e,n,a==="current")];case 3:r=c.sent(),this.isPrimary&&this.W_.listen(o),c.label=4;case 4:return[2,(this.tl.du([r]),n)]}})})},t.prototype.ll=function(e,n,r){return Ee(this,void 0,void 0,function(){var i,o,a,c,f,v;return we(this,function(y){switch(y.label){case 0:return[4,this.Wu.Kh(e,!0)];case 1:return i=y.sent(),o=new R3(e,i.zh),a=o.k_(i.documents),c=ox.Rs(n,r&&this.onlineState!=="Offline"),f=o.nr(a,this.isPrimary===!0,c),v=new HY(e,n,o),[2,(this.el.set(e,v),this.sl.has(n)?this.sl.get(n).push(e):this.sl.set(n,[e]),f.snapshot)]}})})},t.prototype.dl=function(e){return Ee(this,void 0,void 0,function(){var n,r;return we(this,function(i){switch(i.label){case 0:return[4,this.Wu.Kh(e.query,!0)];case 1:return n=i.sent(),r=e.view.q_(n),[2,(this.isPrimary&&this.fl(e.targetId,r.x_),r)]}})})},t.prototype.fc=function(e){return Ee(this,void 0,void 0,function(){var n,r,i=this;return we(this,function(o){switch(o.label){case 0:return this._l("unlisten()"),n=this.el.get(e),(r=this.sl.get(n.targetId)).length>1?[2,(this.sl.set(n.targetId,r.filter(function(a){return!a.isEqual(e)})),void this.el.delete(e))]:this.isPrimary?(this.X_.r_(n.targetId),this.X_.Xc(n.targetId)?[3,2]:[4,this.Wu.jh(n.targetId,!1).then(function(){i.X_.h_(n.targetId),i.W_.fc(n.targetId),i.Tl(n.targetId)}).catch(oa)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return this.Tl(n.targetId),[4,this.Wu.jh(n.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})},t.prototype.write=function(e,n){return Ee(this,void 0,void 0,function(){var r;return we(this,function(i){switch(i.label){case 0:return this._l("write()"),[4,this.Wu.lh(e)];case 1:return r=i.sent(),this.X_.Zc(r.batchId),this.ml(r.batchId,n),[4,this.wl(r.zi)];case 2:return i.sent(),[4,this.W_.uc()];case 3:return i.sent(),[2]}})})},t.prototype.runTransaction=function(e,n,r){new $Y(e,this.W_,n,r).K_()},t.prototype.vh=function(e){return Ee(this,void 0,void 0,function(){var n,r=this;return we(this,function(i){switch(i.label){case 0:this._l("applyRemoteEvent()"),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this.Wu.vh(e)];case 2:return n=i.sent(),e.Ts.forEach(function(o,a){var c=r.rl.get(a);c&&(at(o.Ps.size+o.Vs.size+o.gs.size<=1,"Limbo resolution for single document contains multiple changes."),o.Ps.size>0?c.Y_=!0:o.Vs.size>0?at(c.Y_,"Received change for limbo target document without add."):o.gs.size>0&&(at(c.Y_,"Received remove for limbo target document without add."),c.Y_=!1))}),[4,this.wl(n,e)];case 3:return i.sent(),[3,6];case 4:return[4,oa(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})},t.prototype.B_=function(e,n){if(this.isPrimary&&n===0||!this.isPrimary&&n===1){this._l("applyOnlineStateChange()");var r=[];this.el.forEach(function(i,o){var a=o.view.B_(e);a.snapshot&&r.push(a.snapshot)}),this.tl.El(e),this.tl.du(r),this.onlineState=e,this.isPrimary&&this.X_.c_(e)}},t.prototype.Ic=function(e,n){return Ee(this,void 0,void 0,function(){var r,i,o,a,c,f=this;return we(this,function(v){switch(v.label){case 0:return this._l("rejectListens()"),this.X_.a_(e,"rejected",n),r=this.rl.get(e),(i=r&&r.key)?(this.il=this.il.remove(i),this.rl.delete(e),this.Il(),o=(o=new mi(ct.F)).it(i,new Ar(i,Rt.S())),a=ln().add(i),c=new D1(Rt.MIN,new Map,new In(Pt),o,a),[2,this.vh(c)]):[4,this.Wu.jh(e,!1).then(function(){return f.Tl(e,n)}).catch(oa)];case 1:return v.sent(),[2]}})})},t.prototype.I_=function(e,n,r){return Ee(this,void 0,void 0,function(){var i;return we(this,function(o){switch(o.label){case 0:return this._l("applyBatchState()"),[4,this.Wu.fh(e)];case 1:return(i=o.sent())===null?[3,6]:n!=="pending"?[3,3]:[4,this.W_.uc()];case 2:return o.sent(),[3,4];case 3:n==="acknowledged"||n==="rejected"?(this.Rl(e,r||null),this.Wu.Yh(e)):We("Unknown batchState: "+n),o.label=4;case 4:return[4,this.wl(i)];case 5:return o.sent(),[3,7];case 6:Ke("SyncEngine","Cannot apply mutation batch with id: "+e),o.label=7;case 7:return[2]}})})},t.prototype.pc=function(e){return Ee(this,void 0,void 0,function(){var n,r;return we(this,function(i){switch(i.label){case 0:this._l("applySuccessfulWrite()"),n=e.batch.batchId,this.Rl(n,null),this.Al(n),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this.Wu.mh(e)];case 2:return r=i.sent(),this.X_.e_(n,"acknowledged"),[4,this.wl(r)];case 3:return i.sent(),[3,6];case 4:return[4,oa(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})},t.prototype.vc=function(e,n){return Ee(this,void 0,void 0,function(){var r;return we(this,function(i){switch(i.label){case 0:this._l("rejectFailedWrite()"),this.Rl(e,n),this.Al(e),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this.Wu.Ah(e)];case 2:return r=i.sent(),this.X_.e_(e,"rejected",n),[4,this.wl(r)];case 3:return i.sent(),[3,6];case 4:return[4,oa(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})},t.prototype.Pl=function(e){return Ee(this,void 0,void 0,function(){var n,r;return we(this,function(i){switch(i.label){case 0:return this.W_.Ju()||Ke("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),[4,this.Wu.gh()];case 1:return(n=i.sent())===-1?[2,void e.resolve()]:((r=this.al.get(n)||[]).push(e),this.al.set(n,r),[2])}})})},t.prototype.Al=function(e){(this.al.get(e)||[]).forEach(function(n){n.resolve()}),this.al.delete(e)},t.prototype.Vl=function(e){this.al.forEach(function(n){n.forEach(function(r){r.reject(new Ie(pe.CANCELLED,e))})}),this.al.clear()},t.prototype.ml=function(e,n){var r=this.hl[this.currentUser.s()];r||(r=new mi(Pt)),r=r.it(e,n),this.hl[this.currentUser.s()]=r},t.prototype.Rl=function(e,n){var r=this.hl[this.currentUser.s()];if(r){var i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),this.hl[this.currentUser.s()]=r}},t.prototype.Tl=function(e,n){var r=this;n===void 0&&(n=null),this.X_.r_(e);for(var i=0,o=this.sl.get(e);i<o.length;i++){var a=o[i];this.el.delete(a),n&&this.tl.gl(a,n)}if(this.sl.delete(e),this.isPrimary){var c=this.ol.$i(e);this.ol.Ni(e),c.forEach(function(f){r.ol.Mi(f)||r.pl(f)})}},t.prototype.pl=function(e){var n=this.il.get(e);n!==null&&(this.W_.fc(n),this.il=this.il.remove(e),this.rl.delete(n),this.Il())},t.prototype.fl=function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof A3?(this.ol.vi(o.key,e),this.yl(o)):o instanceof k3?(Ke("SyncEngine","Document no longer in limbo: "+o.key),this.ol.Di(o.key,e),this.ol.Mi(o.key)||this.pl(o.key)):We("Unknown limbo change: "+JSON.stringify(o))}},t.prototype.yl=function(e){var n=e.key;this.il.get(n)||(Ke("SyncEngine","New document in limbo: "+n),this.nl.push(n),this.Il())},t.prototype.Il=function(){for(;this.nl.length>0&&this.il.size<this.Z_;){var e=this.nl.shift(),n=this.ul.next();this.rl.set(n,new KY(e)),this.il=this.il.it(e,n),this.W_.listen(new S_(Vl.ve(e.path).xe(),n,2,es.kr))}},t.prototype.bl=function(){return this.il},t.prototype.vl=function(){return this.nl},t.prototype.wl=function(e,n){return Ee(this,void 0,void 0,function(){var r,i,o,a=this;return we(this,function(c){switch(c.label){case 0:return r=[],i=[],o=[],this.el.forEach(function(f,v){o.push(Promise.resolve().then(function(){var y=v.view.k_(e);return y.M_?a.Wu.Kh(v.query,!1).then(function(b){var E=b.documents;return v.view.k_(E,y)}):y}).then(function(y){var b=n&&n.Ts.get(v.targetId),E=v.view.nr(y,a.isPrimary===!0,b);if(a.fl(v.targetId,E.x_),E.snapshot){a.isPrimary&&a.X_.a_(v.targetId,E.snapshot.fromCache?"not-current":"current"),r.push(E.snapshot);var I=AY.br(v.targetId,E.snapshot);i.push(I)}}))}),[4,Promise.all(o)];case 1:return c.sent(),this.tl.du(r),[4,this.Wu.Lh(i)];case 2:return c.sent(),[2]}})})},t.prototype._l=function(e){},t.prototype.Dc=function(e){return Ee(this,void 0,void 0,function(){var n,r;return we(this,function(i){switch(i.label){case 0:return n=!this.currentUser.isEqual(e),this.currentUser=e,n?(this.Vl("'waitForPendingWrites' promise is rejected due to a user change."),[4,this.Wu.oh(e)]):[3,3];case 1:return r=i.sent(),this.X_.oh(e,r.uh,r._h),[4,this.wl(r.ah)];case 2:i.sent(),i.label=3;case 3:return[4,this.W_.Dc()];case 4:return i.sent(),[2]}})})},t.prototype.Cc=function(e){return Ee(this,void 0,void 0,function(){var n,r,i,o,a,c,f,v=this;return we(this,function(y){switch(y.label){case 0:return e!==!0||this.isPrimary===!0?[3,3]:(this.isPrimary=!0,[4,this.W_.Cc(!0)]);case 1:return y.sent(),n=this.X_.Yc(),[4,this.Sl(n.j())];case 2:for(r=y.sent(),i=0,o=r;i<o.length;i++)a=o[i],this.W_.listen(a);return[3,7];case 3:return e!==!1||this.isPrimary===!1?[3,7]:(this.isPrimary=!1,c=[],f=Promise.resolve(),this.sl.forEach(function(b,E){v.X_.o_(E)?c.push(E):f=f.then(function(){return v.Tl(E),v.Wu.jh(E,!0)}),v.W_.fc(E)}),[4,f]);case 4:return y.sent(),[4,this.Sl(c)];case 5:return y.sent(),this.Dl(),[4,this.W_.Cc(!1)];case 6:y.sent(),y.label=7;case 7:return[2]}})})},t.prototype.Dl=function(){var e=this;this.rl.forEach(function(n,r){e.W_.fc(r)}),this.ol.Fi(),this.rl=new Map,this.il=new mi(ct.F)},t.prototype.Sl=function(e){return Ee(this,void 0,void 0,function(){var n,r,i,o,a,c,f,v,y,b,E,I,L;return we(this,function(D){switch(D.label){case 0:n=[],r=[],i=0,o=e,D.label=1;case 1:return i<o.length?(a=o[i],c=void 0,(f=this.sl.get(a))&&f.length!==0?[4,this.Wu.jh(a,!0)]:[3,8]):[3,14];case 2:return D.sent(),[4,this.Wu.Uh(f[0].xe())];case 3:c=D.sent(),v=0,y=f,D.label=4;case 4:return v<y.length?(b=y[v],E=this.el.get(b),[4,this.dl(E)]):[3,7];case 5:(I=D.sent()).snapshot&&r.push(I.snapshot),D.label=6;case 6:return v++,[3,4];case 7:return[3,12];case 8:return[4,this.Wu.ta(a)];case 9:return L=D.sent(),[4,this.Wu.Uh(L)];case 10:return c=D.sent(),[4,this.ll(this.Cl(L),a,!1)];case 11:D.sent(),D.label=12;case 12:n.push(c),D.label=13;case 13:return i++,[3,1];case 14:return[2,(this.tl.du(r),n)]}})})},t.prototype.Cl=function(e){return new Vl(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)},t.prototype.Jh=function(){return this.Wu.Jh()},t.prototype.R_=function(e,n,r){return Ee(this,void 0,void 0,function(){var i,o;return we(this,function(a){switch(a.label){case 0:return this.isPrimary?(Ke("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!this.sl.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,this.Wu.ea()];case 3:return i=a.sent(),o=D1.Is(e,n==="current"),[4,this.wl(i,o)];case 4:return a.sent(),[3,8];case 5:return[4,this.Wu.jh(e,!0)];case 6:return a.sent(),this.Tl(e,r),[3,8];case 7:We("Unexpected target state: "+n),a.label=8;case 8:return[2]}})})},t.prototype.A_=function(e,n){return Ee(this,void 0,void 0,function(){var r,i,o,a,c,f,v,y,b,E,I=this;return we(this,function(L){switch(L.label){case 0:if(!this.isPrimary)return[3,10];r=0,i=e,L.label=1;case 1:return r<i.length?(o=i[r],[4,this.Wu.ta(o)]):[3,6];case 2:return a=L.sent(),[4,this.Wu.Uh(a)];case 3:return c=L.sent(),[4,this.ll(this.Cl(a),c.targetId,!1)];case 4:L.sent(),this.W_.listen(c),L.label=5;case 5:return r++,[3,1];case 6:f=function(D){return we(this,function(te){switch(te.label){case 0:return v.sl.has(D)?[4,v.Wu.jh(D,!1).then(function(){I.W_.fc(D),I.Tl(D)}).catch(oa)]:[3,2];case 1:te.sent(),te.label=2;case 2:return[2]}})},v=this,y=0,b=n,L.label=7;case 7:return y<b.length?(E=b[y],[5,f(E)]):[3,10];case 8:L.sent(),L.label=9;case 9:return y++,[3,7];case 10:return[2]}})})},t.prototype.enableNetwork=function(){return this.Wu.Zh(!0),this.W_.enableNetwork()},t.prototype.disableNetwork=function(){return this.Wu.Zh(!1),this.W_.disableNetwork()},t.prototype.an=function(e){var n=this.rl.get(e);if(n&&n.Y_)return ln().add(n.key);var r=ln(),i=this.sl.get(e);if(!i)return r;for(var o=0,a=i;o<a.length;o++){var c=a[o],f=this.el.get(c);r=r.Ft(f.view.C_)}return r},t}(),YY=function(){this.kl=null,this.targetId=0,this.Nl=[]},P3=function(){function t(e){this.mc=e,this.Fl=new ef(function(n){return n.canonicalId()}),this.onlineState="Unknown",this.$l=new Set,this.mc.subscribe(this)}return t.prototype.listen=function(e){var n=e.query,r=!1,i=this.Fl.get(n);return i||(r=!0,i=new YY,this.Fl.set(n,i)),i.Nl.push(e),e.B_(this.onlineState),i.kl&&e.Ml(i.kl)&&this.Ll(),r?this.mc.listen(n).then(function(o){return i.targetId=o,o}):Promise.resolve(i.targetId)},t.prototype.fc=function(e){return Ee(this,void 0,void 0,function(){var n,r,i,o;return we(this,function(a){return n=e.query,r=!1,(i=this.Fl.get(n))&&(o=i.Nl.indexOf(e))>=0&&(i.Nl.splice(o,1),r=i.Nl.length===0),r?[2,(this.Fl.delete(n),this.mc.fc(n))]:[2]})})},t.prototype.du=function(e){for(var n=!1,r=0,i=e;r<i.length;r++){var o=i[r],a=o.query,c=this.Fl.get(a);if(c){for(var f=0,v=c.Nl;f<v.length;f++)v[f].Ml(o)&&(n=!0);c.kl=o}}n&&this.Ll()},t.prototype.gl=function(e,n){var r=this.Fl.get(e);if(r)for(var i=0,o=r.Nl;i<o.length;i++)o[i].onError(n);this.Fl.delete(e)},t.prototype.El=function(e){this.onlineState=e;var n=!1;this.Fl.forEach(function(r,i){for(var o=0,a=i.Nl;o<a.length;o++)a[o].B_(e)&&(n=!0)}),n&&this.Ll()},t.prototype.Ol=function(e){this.$l.add(e),e.next()},t.prototype.xl=function(e){this.$l.delete(e)},t.prototype.Ll=function(){this.$l.forEach(function(e){e.next()})},t}(),XY=function(){function t(e,n,r){this.query=e,this.Bl=n,this.Ul=!1,this.ql=null,this.onlineState="Unknown",this.options=r||{}}return t.prototype.Ml=function(e){if(!this.options.includeMetadataChanges){for(var n=[],r=0,i=e.docChanges;r<i.length;r++){var o=i[r];o.type!==3&&n.push(o)}e=new sy(e.query,e.docs,e.cs,n,e._s,e.fromCache,e.ls,!0)}var a=!1;return this.Ul?this.Ql(e)&&(this.Bl.next(e),a=!0):this.Wl(e,this.onlineState)&&(this.jl(e),a=!0),this.ql=e,a},t.prototype.onError=function(e){this.Bl.error(e)},t.prototype.B_=function(e){this.onlineState=e;var n=!1;return this.ql&&!this.Ul&&this.Wl(this.ql,e)&&(this.jl(this.ql),n=!0),n},t.prototype.Wl=function(e,n){if(!e.fromCache)return!0;var r=n!=="Offline";return!(this.options.Kl&&r||e.docs.U()&&n!=="Offline")},t.prototype.Ql=function(e){if(e.docChanges.length>0)return!0;var n=this.ql&&this.ql.hasPendingWrites!==e.hasPendingWrites;return!(!e.ls&&!n)&&this.options.includeMetadataChanges===!0},t.prototype.jl=function(e){e=sy.fs(e.query,e.docs,e._s,e.fromCache),this.Ul=!0,this.Bl.next(e)},t}(),D3=function(){function t(){}return t.prototype.ih=function(e){this.Gl=e},t.prototype.Er=function(e,n,r,i){var o=this;return n.Oe()||r.isEqual(Rt.MIN)?this.zl(e,n):this.Gl.Tr(e,i).next(function(a){var c=o.Hl(n,a);return(n.je()||n.Ke())&&o.M_(n.ge,c,i,r)?o.zl(e,n):(ay()<=wt.DEBUG&&Ke("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),n.toString()),o.Gl.Er(e,n,r).next(function(f){return c.forEach(function(v){f=f.it(v.key,v)}),f}))})},t.prototype.Hl=function(e,n){var r=new In(function(i,o){return e.Be(i,o)});return n.forEach(function(i,o){o instanceof Ht&&e.matches(o)&&(r=r.add(o))}),r},t.prototype.M_=function(e,n,r,i){if(r.size!==n.size)return!0;var o=e==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.D(i)>0)},t.prototype.zl=function(e,n){return ay()<=wt.DEBUG&&Ke("IndexFreeQueryEngine","Using full collection scan to execute query: %s",n.toString()),this.Gl.Er(e,n,Rt.MIN)},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ss(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=gO(e)),e=QY(t.get(n),e);return gO(e)}function QY(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function gO(t){return t+""}function ma(t){var e=t.length;if(at(e>=2,"Invalid path "+t),e===2)return at(t.charAt(0)===""&&t.charAt(1)==="","Non-empty path "+t+" had length 2"),gn.H;for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf("",o);switch((a<0||a>n)&&We('Invalid encoded resource path: "'+t+'"'),t.charAt(a+1)){case"":var c=t.substring(o,a),f=void 0;i.length===0?f=c:(f=i+=c,i=""),r.push(f);break;case"":i+=t.substring(o,a),i+="\0";break;case"":i+=t.substring(o,a+1);break;default:We('Invalid encoded resource path: "'+t+'"')}o=a+2}return new gn(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sh=function(){function t(e){this.db=e,t.Jl(s1())===12.2&&Qn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.Yl=function(e,n,r){return Ke("SimpleDb","Opening database:",e),new ke(function(i,o){var a=window.indexedDB.open(e,n);a.onsuccess=function(c){var f=c.target.result;i(new t(f))},a.onblocked=function(){o(new Ie(pe.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=function(c){var f=c.target.error;f.name==="VersionError"?o(new Ie(pe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o(f)},a.onupgradeneeded=function(c){Ke("SimpleDb",'Database "'+e+'" requires upgrade from version:',c.oldVersion);var f=c.target.result;r.createOrUpgrade(f,a.transaction,c.oldVersion,hy).next(function(){Ke("SimpleDb","Database upgrade to version "+hy+" complete")})}}).Wi()},t.delete=function(e){return Ke("SimpleDb","Removing database:",e),gl(window.indexedDB.deleteDatabase(e)).Wi()},t.Uc=function(){if(typeof window>"u"||window.indexedDB==null)return!1;if(t.Xl())return!0;if(window.navigator===void 0)return!1;var e=s1(),n=t.Jl(e),r=0<n&&n<10,i=t.Zl(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.Xl=function(){var e;return typeof __PRIVATE_process<"u"&&((e=__PRIVATE_process.__PRIVATE_env)===null||e===void 0?void 0:e.td)==="YES"},t.ed=function(e,n){return e.store(n)},t.Jl=function(e){var n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)},t.Zl=function(e){var n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)},t.prototype.sd=function(e){this.db.onversionchange=function(n){return e(n)}},t.prototype.runTransaction=function(e,n,r){return Ee(this,void 0,void 0,function(){var i,o,a,c,f;return we(this,function(v){switch(v.label){case 0:i=e==="readonly",o=0,a=function(){var y,b,E,I,L;return we(this,function(D){switch(D.label){case 0:++o,y=L3.open(c.db,i?"readonly":"readwrite",n),D.label=1;case 1:return D.trys.push([1,3,,4]),b=r(y).catch(function(te){return y.abort(te),ke.reject(te)}).Wi(),E={},b.catch(function(){}),[4,y.nd];case 2:return[2,(E.value=(D.sent(),b),E)];case 3:return I=D.sent(),L=I.name!=="FirebaseError"&&o<3,Ke("SimpleDb","Transaction failed with error: %s. Retrying: %s.",I.message,L),L?[3,4]:[2,{value:Promise.reject(I)}];case 4:return[2]}})},c=this,v.label=1;case 1:return[5,a()];case 2:if(typeof(f=v.sent())=="object")return[2,f.value];v.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db.close()},t}(),JY=function(){function t(e){this.rd=e,this.od=!1,this.hd=null}return Object.defineProperty(t.prototype,"Bi",{get:function(){return this.od},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ad",{get:function(){return this.hd},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(e){this.rd=e},enumerable:!0,configurable:!0}),t.prototype.done=function(){this.od=!0},t.prototype.ud=function(e){this.hd=e},t.prototype.delete=function(){return gl(this.rd.delete())},t}(),L3=function(){function t(e){var n=this;this.transaction=e,this.aborted=!1,this._d=new au,this.transaction.oncomplete=function(){n._d.resolve()},this.transaction.onabort=function(){e.error?n._d.reject(e.error):n._d.resolve()},this.transaction.onerror=function(r){var i=cx(r.target.error);n._d.reject(i)}}return t.open=function(e,n,r){return new t(e.transaction(r,n))},Object.defineProperty(t.prototype,"nd",{get:function(){return this._d.promise},enumerable:!0,configurable:!0}),t.prototype.abort=function(e){e&&this._d.reject(e),this.aborted||(Ke("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(e){var n=this.transaction.objectStore(e);return new ZY(n)},t}(),ZY=function(){function t(e){this.store=e}return t.prototype.put=function(e,n){var r;return n!==void 0?(Ke("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(Ke("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),gl(r)},t.prototype.add=function(e){return Ke("SimpleDb","ADD",this.store.name,e,e),gl(this.store.add(e))},t.prototype.get=function(e){var n=this;return gl(this.store.get(e)).next(function(r){return r===void 0&&(r=null),Ke("SimpleDb","GET",n.store.name,e,r),r})},t.prototype.delete=function(e){return Ke("SimpleDb","DELETE",this.store.name,e),gl(this.store.delete(e))},t.prototype.count=function(){return Ke("SimpleDb","COUNT",this.store.name),gl(this.store.count())},t.prototype.ld=function(e,n){var r=this.cursor(this.options(e,n)),i=[];return this.dd(r,function(o,a){i.push(a)}).next(function(){return i})},t.prototype.fd=function(e,n){Ke("SimpleDb","DELETE ALL",this.store.name);var r=this.options(e,n);r.Td=!1;var i=this.cursor(r);return this.dd(i,function(o,a,c){return c.delete()})},t.prototype.md=function(e,n){var r;n?r=e:(r={},n=e);var i=this.cursor(r);return this.dd(i,n)},t.prototype.wd=function(e){var n=this.cursor({});return new ke(function(r,i){n.onerror=function(o){var a=cx(o.target.error);i(a)},n.onsuccess=function(o){var a=o.target.result;a?e(a.primaryKey,a.value).next(function(c){c?a.continue():r()}):r()}})},t.prototype.dd=function(e,n){var r=[];return new ke(function(i,o){e.onerror=function(a){o(a.target.error)},e.onsuccess=function(a){var c=a.target.result;if(c){var f=new JY(c),v=n(c.primaryKey,c.value,f);if(v instanceof ke){var y=v.catch(function(b){return f.done(),ke.reject(b)});r.push(y)}f.Bi?i():f.ad===null?c.continue():c.continue(f.ad)}else i()}}).next(function(){return ke.Ki(r)})},t.prototype.options=function(e,n){var r=void 0;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}},t.prototype.cursor=function(e){var n="next";if(e.reverse&&(n="prev"),e.index){var r=this.store.index(e.index);return e.Td?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)},t}();function gl(t){return new ke(function(e,n){t.onsuccess=function(r){var i=r.target.result;e(i)},t.onerror=function(r){var i=cx(r.target.error);n(i)}})}var mO=!1;function cx(t){var e=sh.Jl(s1());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Ie("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return mO||(mO=!0,setTimeout(function(){throw r},0)),r}}return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var eX=function(){function t(e,n,r,i){this.userId=e,this.serializer=n,this.ur=r,this.Jo=i,this.Ed={}}return t.Id=function(e,n,r,i){return at(e.uid!=="","UserID must not be an empty string."),new t(e.t()?e.uid:"",n,r,i)},t.prototype.Rd=function(e){var n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ka(e).md({index:pn.userMutationsIndex,range:r},function(i,o,a){n=!1,a.done()}).next(function(){return n})},t.prototype.mh=function(e,n,r){return this.Ad(e).next(function(i){return i.lastStreamToken=r.toBase64(),tm(e).put(i)})},t.prototype.ph=function(e){return this.Ad(e).next(function(n){return mr.fromBase64String(n.lastStreamToken)})},t.prototype.yh=function(e,n){return this.Ad(e).next(function(r){return r.lastStreamToken=n.toBase64(),tm(e).put(r)})},t.prototype.dh=function(e,n,r,i){var o=this,a=Gc(e),c=Ka(e);return c.add({}).next(function(f){at(typeof f=="number","Auto-generated key is not a number");for(var v=new sx(f,n,r,i),y=o.serializer.Pd(o.userId,v),b=[],E=new In(function(z,Y){return Pt(z.K(),Y.K())}),I=0,L=i;I<L.length;I++){var D=L[I],te=Yr.key(o.userId,D.key.path,f);E=E.add(D.key.path.L()),b.push(c.put(y)),b.push(a.put(te,Yr.PLACEHOLDER))}return E.forEach(function(z){b.push(o.ur.Vd(e,z))}),e.rr(function(){o.Ed[f]=v.keys()}),ke.Ki(b).next(function(){return v})})},t.prototype.Ph=function(e,n){var r=this;return Ka(e).get(n).next(function(i){return i?(at(i.userId===r.userId,"Unexpected user '"+i.userId+"' for mutation batch "+n),r.serializer.gd(i)):null})},t.prototype.Th=function(e,n){var r=this;return this.Ed[n]?ke.resolve(this.Ed[n]):this.Ph(e,n).next(function(i){if(i){var o=i.keys();return r.Ed[n]=o,o}return null})},t.prototype.xh=function(e,n){var r=this,i=n+1,o=IDBKeyRange.lowerBound([this.userId,i]),a=null;return Ka(e).md({index:pn.userMutationsIndex,range:o},function(c,f,v){f.userId===r.userId&&(at(f.batchId>=i,"Should have found mutation after "+i),a=r.serializer.gd(f)),v.done()}).next(function(){return a})},t.prototype.gh=function(e){var n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Ka(e).md({index:pn.userMutationsIndex,range:n,reverse:!0},function(i,o,a){r=o.batchId,a.done()}).next(function(){return r})},t.prototype.hh=function(e){var n=this,r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ka(e).ld(pn.userMutationsIndex,r).next(function(i){return i.map(function(o){return n.serializer.gd(o)})})},t.prototype._r=function(e,n){var r=this,i=Yr.prefixForPath(this.userId,n.path),o=IDBKeyRange.lowerBound(i),a=[];return Gc(e).md({range:o},function(c,f,v){var y=c[0],b=c[1],E=c[2],I=ma(b);if(y===r.userId&&n.path.isEqual(I))return Ka(e).get(E).next(function(L){if(!L)throw We("Dangling document-mutation reference found: "+c+" which points to "+E);at(L.userId===r.userId,"Unexpected user '"+L.userId+"' for mutation batch "+E),a.push(r.serializer.gd(L))});v.done()}).next(function(){return a})},t.prototype.wr=function(e,n){var r=this,i=new In(Pt),o=[];return n.forEach(function(a){var c=Yr.prefixForPath(r.userId,a.path),f=IDBKeyRange.lowerBound(c),v=Gc(e).md({range:f},function(y,b,E){var I=y[0],L=y[1],D=y[2],te=ma(L);I===r.userId&&a.path.isEqual(te)?i=i.add(D):E.done()});o.push(v)}),ke.Ki(o).next(function(){return r.pd(e,i)})},t.prototype.Vr=function(e,n){var r=this,i=n.path,o=i.length+1,a=Yr.prefixForPath(this.userId,i),c=IDBKeyRange.lowerBound(a),f=new In(Pt);return Gc(e).md({range:c},function(v,y,b){var E=v[0],I=v[1],L=v[2],D=ma(I);E===r.userId&&i.q(D)?D.length===o&&(f=f.add(L)):b.done()}).next(function(){return r.pd(e,f)})},t.prototype.pd=function(e,n){var r=this,i=[],o=[];return n.forEach(function(a){o.push(Ka(e).get(a).next(function(c){if(c===null)throw We("Dangling document-mutation reference found, which points to "+a);at(c.userId===r.userId,"Unexpected user '"+c.userId+"' for mutation batch "+a),i.push(r.serializer.gd(c))}))}),ke.Ki(o).next(function(){return i})},t.prototype.Vh=function(e,n){var r=this;return F3(e.yd,this.userId,n).next(function(i){return e.rr(function(){r.Xh(n.batchId)}),ke.forEach(i,function(o){return r.Jo.bd(e,o)})})},t.prototype.Xh=function(e){delete this.Ed[e]},t.prototype.Rh=function(e){var n=this;return this.Rd(e).next(function(r){if(!r)return ke.resolve();var i=IDBKeyRange.lowerBound(Yr.prefixForUser(n.userId)),o=[];return Gc(e).md({range:i},function(a,c,f){if(a[0]===n.userId){var v=ma(a[1]);o.push(v)}else f.done()}).next(function(){at(o.length===0,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+o.map(function(a){return a.K()}))})})},t.prototype.Mi=function(e,n){return M3(e,this.userId,n)},t.prototype.Ad=function(e){var n=this;return tm(e).get(this.userId).next(function(r){return r||new Tu(n.userId,-1,"")})},t}();function M3(t,e,n){var r=Yr.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return Gc(t).md({range:o,Td:!0},function(c,f,v){var y=c[0],b=c[1];c[2],y===e&&b===i&&(a=!0),v.done()}).next(function(){return a})}function F3(t,e,n){var r=t.store(pn.store),i=t.store(Yr.store),o=[],a=IDBKeyRange.only(n.batchId),c=0,f=r.md({range:a},function(L,D,te){return c++,te.delete()});o.push(f.next(function(){at(c===1,"Dangling document-mutation reference found: Missing batch "+n.batchId)}));for(var v=[],y=0,b=n.mutations;y<b.length;y++){var E=b[y],I=Yr.key(e,E.key.path,n.batchId);o.push(i.delete(I)),v.push(E.key)}return ke.Ki(o).next(function(){return v})}function Ka(t){return Oi.ed(t,pn.store)}function Gc(t){return Oi.ed(t,Yr.store)}function tm(t){return Oi.ed(t,Tu.store)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tX=function(){function t(e,n){this.Jo=e,this.serializer=n}return t.prototype.Qh=function(e){var n=this;return this.vd(e).next(function(r){var i=new ly(r.highestTargetId);return r.highestTargetId=i.next(),n.Sd(e,r).next(function(){return r.highestTargetId})})},t.prototype.bh=function(e){return this.vd(e).next(function(n){return Rt.v(new Fi(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.Dd=function(e){return hx(e.yd)},t.prototype.$h=function(e,n,r){var i=this;return this.vd(e).next(function(o){return o.highestListenSequenceNumber=n,r&&(o.lastRemoteSnapshotVersion=r.k()),n>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=n),i.Sd(e,o)})},t.prototype.Wh=function(e,n){var r=this;return this.Cd(e,n).next(function(){return r.vd(e).next(function(i){return i.targetCount+=1,r.kd(n,i),r.Sd(e,i)})})},t.prototype.Nh=function(e,n){return this.Cd(e,n)},t.prototype.Nd=function(e,n){var r=this;return this.Fd(e,n.targetId).next(function(){return Oc(e).delete(n.targetId)}).next(function(){return r.vd(e)}).next(function(i){return at(i.targetCount>0,"Removing from an empty target cache"),i.targetCount-=1,r.Sd(e,i)})},t.prototype.xo=function(e,n,r){var i=this,o=0,a=[];return Oc(e).md(function(c,f){var v=i.serializer.$d(f);v.sequenceNumber<=n&&r.get(v.targetId)===null&&(o++,a.push(i.Nd(e,v)))}).next(function(){return ke.Ki(a)}).next(function(){return o})},t.prototype.Xs=function(e,n){var r=this;return Oc(e).md(function(i,o){var a=r.serializer.$d(o);n(a)})},t.prototype.vd=function(e){return j3(e.yd)},t.prototype.Sd=function(e,n){return(r=e,Oi.ed(r,Ji.store)).put(Ji.key,n);var r},t.prototype.Cd=function(e,n){return Oc(e).put(this.serializer.Md(n))},t.prototype.kd=function(e,n){var r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r},t.prototype.Ld=function(e){return this.vd(e).next(function(n){return n.targetCount})},t.prototype.qh=function(e,n){var r=this,i=n.canonicalId(),o=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]),a=null;return Oc(e).md({range:o,index:Ri.queryTargetsIndexName},function(c,f,v){var y=r.serializer.$d(f);n.isEqual(y.target)&&(a=y,v.done())}).next(function(){return a})},t.prototype.Dh=function(e,n,r){var i=this,o=[],a=uu(e);return n.forEach(function(c){var f=ss(c.path);o.push(a.put(new Fr(r,f))),o.push(i.Jo.vi(e,c))}),ke.Ki(o)},t.prototype.Sh=function(e,n,r){var i=this,o=uu(e);return ke.forEach(n,function(a){var c=ss(a.path);return ke.Ki([o.delete([r,c]),i.Jo.Di(e,a)])})},t.prototype.Fd=function(e,n){var r=uu(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)},t.prototype.Gh=function(e,n){var r=IDBKeyRange.bound([n],[n+1],!1,!0),i=uu(e),o=ln();return i.md({range:r,Td:!0},function(a,c,f){var v=ma(a[1]),y=new ct(v);o=o.add(y)}).next(function(){return o})},t.prototype.Mi=function(e,n){var r=ss(n.path),i=IDBKeyRange.bound([r],[h3(r)],!1,!0),o=0;return uu(e).md({index:Fr.documentTargetsIndex,Td:!0,range:i},function(a,c,f){var v=a[0];a[1],v!==0&&(o++,f.done())}).next(function(){return o>0})},t.prototype.un=function(e,n){var r=this;return Oc(e).get(n).next(function(i){return i?r.serializer.$d(i):null})},t}();function Oc(t){return Oi.ed(t,Ri.store)}function j3(t){return sh.ed(t,Ji.store).get(Ji.key).next(function(e){return at(e!==null,"Missing metadata row."),e})}function hx(t){return j3(t).next(function(e){return e.highestListenSequenceNumber})}function uu(t){return Oi.ed(t,Fr.store)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var U3=function(){function t(e,n){this.serializer=e,this.ur=n}return t.prototype.Yi=function(e,n,r){return Ya(e).put(Ig(n),r)},t.prototype.Zi=function(e,n){var r=Ya(e),i=Ig(n);return r.delete(i)},t.prototype.updateMetadata=function(e,n){var r=this;return this.getMetadata(e).next(function(i){return i.byteSize+=n,r.Od(e,i)})},t.prototype.tr=function(e,n){var r=this;return Ya(e).get(Ig(n)).next(function(i){return r.xd(i)})},t.prototype.Bd=function(e,n){var r=this;return Ya(e).get(Ig(n)).next(function(i){var o=r.xd(i);return o?{Ud:o,size:cy(i)}:null})},t.prototype.getEntries=function(e,n){var r=this,i=oy();return this.qd(e,n,function(o,a){var c=r.xd(a);i=i.it(o,c)}).next(function(){return i})},t.prototype.Qd=function(e,n){var r=this,i=oy(),o=new mi(ct.F);return this.qd(e,n,function(a,c){var f=r.xd(c);f?(i=i.it(a,f),o=o.it(a,cy(c))):(i=i.it(a,null),o=o.it(a,0))}).next(function(){return{Wd:i,jd:o}})},t.prototype.qd=function(e,n,r){if(n.U())return ke.resolve();var i=IDBKeyRange.bound(n.first().path.j(),n.last().path.j()),o=n._t(),a=o.Et();return Ya(e).md({range:i},function(c,f,v){for(var y=ct.nt(c);a&&ct.F(a,y)<0;)r(a,null),a=o.Et();a&&a.isEqual(y)&&(r(a,f),a=o.It()?o.Et():null),a?v.ud(a.path.j()):v.done()}).next(function(){for(;a;)r(a,null),a=o.It()?o.Et():null})},t.prototype.Er=function(e,n,r){var i=this,o=pp(),a=n.path.length+1,c={};if(r.isEqual(Rt.MIN)){var f=n.path.j();c.range=IDBKeyRange.lowerBound(f)}else{var v=n.path.j(),y=this.serializer.Kd(r);c.range=IDBKeyRange.lowerBound([v,y],!0),c.index=Vn.collectionReadTimeIndex}return Ya(e).md(c,function(b,E,I){if(b.length===a){var L=i.serializer.Gd(E);n.path.q(L.key.path)?L instanceof Ht&&n.matches(L)&&(o=o.it(L.key,L)):I.done()}}).next(function(){return o})},t.prototype.ea=function(e,n){var r=this,i=Ou(),o=this.serializer.Kd(n),a=Ya(e),c=IDBKeyRange.lowerBound(o,!0);return a.md({index:Vn.readTimeIndex,range:c},function(f,v){var y=r.serializer.Gd(v);i=i.it(y.key,y),o=v.readTime}).next(function(){return{sa:i,readTime:r.serializer.zd(o)}})},t.prototype.na=function(e){var n=this,r=Ya(e),i=Rt.MIN;return r.md({index:Vn.readTimeIndex,reverse:!0},function(o,a,c){a.readTime&&(i=n.serializer.zd(a.readTime)),c.done()}).next(function(){return i})},t.prototype.wh=function(e){return new t.Hd(this,!!e&&e.Eh)},t.prototype.Jd=function(e){return this.getMetadata(e).next(function(n){return n.byteSize})},t.prototype.getMetadata=function(e){return yO(e).get(Ns.key).next(function(n){return at(!!n,"Missing document cache metadata"),n})},t.prototype.Od=function(e,n){return yO(e).put(Ns.key,n)},t.prototype.xd=function(e){if(e){var n=this.serializer.Gd(e);return n instanceof Ar&&n.version.isEqual(Rt.S())?null:n}return null},t}();function yO(t){return Oi.ed(t,Ns.store)}function Ya(t){return Oi.ed(t,Vn.store)}function Ig(t){return t.path.j()}function cy(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw We("Unknown remote document type");e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */U3.Hd=function(t){function e(n,r){var i=this;return(i=t.call(this)||this).Yd=n,i.Eh=r,i.Xd=new ef(function(o){return o.toString()}),i}return St(e,t),e.prototype.nr=function(n){var r=this,i=[],o=0,a=new In(function(c,f){return Pt(c.K(),f.K())});return this.zi.forEach(function(c,f){var v=r.Xd.get(c);if(f){var y=r.Yd.serializer.Zd(f,r.readTime);a=a.add(c.path.L());var b=cy(y);o+=b-v,i.push(r.Yd.Yi(n,c,y))}else if(o-=v,r.Eh){var E=r.Yd.serializer.Zd(new Ar(c,Rt.S()),r.readTime);i.push(r.Yd.Yi(n,c,E))}else i.push(r.Yd.Zi(n,c))}),a.forEach(function(c){i.push(r.Yd.ur.Vd(n,c))}),i.push(this.Yd.updateMetadata(n,o)),ke.Ki(i)},e.prototype.er=function(n,r){var i=this;return this.Yd.Bd(n,r).next(function(o){return o===null?(i.Xd.set(r,0),null):(i.Xd.set(r,o.size),o.Ud)})},e.prototype.sr=function(n,r){var i=this;return this.Yd.Qd(n,r).next(function(o){var a=o.Wd;return o.jd.forEach(function(c,f){i.Xd.set(c,f)}),a})},e}(f3);var nX=function(){function t(){this.tf=new fx}return t.prototype.Vd=function(e,n){return this.tf.add(n),ke.resolve()},t.prototype.Pr=function(e,n){return ke.resolve(this.tf.getEntries(n))},t}(),fx=function(){function t(){this.index={}}return t.prototype.add=function(e){var n=e.B(),r=e.L(),i=this.index[n]||new In(gn.F),o=!i.has(r);return this.index[n]=i.add(r),o},t.prototype.has=function(e){var n=e.B(),r=e.L(),i=this.index[n];return i&&i.has(r)},t.prototype.getEntries=function(e){return(this.index[e]||new In(gn.F)).j()},t}(),hy=10,rX=function(){function t(e){this.serializer=e}return t.prototype.createOrUpgrade=function(e,n,r,i){var o=this;at(r<i&&r>=0&&i<=hy,"Unexpected schema upgrade from v"+r+" to v"+i+".");var a=new L3(n);r<1&&i>=1&&(function(f){f.createObjectStore(Wi.store)}(e),function(f){f.createObjectStore(Tu.store,{keyPath:Tu.keyPath}),f.createObjectStore(pn.store,{keyPath:pn.keyPath,autoIncrement:!0}).createIndex(pn.userMutationsIndex,pn.userMutationsKeyPath,{unique:!0}),f.createObjectStore(Yr.store)}(e),_O(e),function(f){f.createObjectStore(Vn.store)}(e));var c=ke.resolve();return r<3&&i>=3&&(r!==0&&(function(f){f.deleteObjectStore(Fr.store),f.deleteObjectStore(Ri.store),f.deleteObjectStore(Ji.store)}(e),_O(e)),c=c.next(function(){return function(f){var v=f.store(Ji.store),y=new Ji(0,0,Rt.MIN.k(),0);return v.put(Ji.key,y)}(a)})),r<4&&i>=4&&(r!==0&&(c=c.next(function(){return function(f,v){return v.store(pn.store).ld().next(function(y){f.deleteObjectStore(pn.store),f.createObjectStore(pn.store,{keyPath:pn.keyPath,autoIncrement:!0}).createIndex(pn.userMutationsIndex,pn.userMutationsKeyPath,{unique:!0});var b=v.store(pn.store),E=y.map(function(I){return b.put(I)});return ke.Ki(E)})}(e,a)})),c=c.next(function(){(function(f){f.createObjectStore(As.store,{keyPath:As.keyPath})})(e)})),r<5&&i>=5&&(c=c.next(function(){return o.removeAcknowledgedMutations(a)})),r<6&&i>=6&&(c=c.next(function(){return function(f){f.createObjectStore(Ns.store)}(e),o.addDocumentGlobal(a)})),r<7&&i>=7&&(c=c.next(function(){return o.ensureSequenceNumbers(a)})),r<8&&i>=8&&(c=c.next(function(){return o.createCollectionParentIndex(e,a)})),r<9&&i>=9&&(c=c.next(function(){(function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")})(e),function(f){var v=f.objectStore(Vn.store);v.createIndex(Vn.readTimeIndex,Vn.readTimeIndexPath,{unique:!1}),v.createIndex(Vn.collectionReadTimeIndex,Vn.collectionReadTimeIndexPath,{unique:!1})}(n)})),r<10&&i>=10&&(c=c.next(function(){return o.rewriteCanonicalIds(a)})),c},t.prototype.addDocumentGlobal=function(e){var n=0;return e.store(Vn.store).md(function(r,i){n+=cy(i)}).next(function(){var r=new Ns(n);return e.store(Ns.store).put(Ns.key,r)})},t.prototype.removeAcknowledgedMutations=function(e){var n=this,r=e.store(Tu.store),i=e.store(pn.store);return r.ld().next(function(o){return ke.forEach(o,function(a){var c=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return i.ld(pn.userMutationsIndex,c).next(function(f){return ke.forEach(f,function(v){at(v.userId===a.userId,"Cannot process batch "+v.batchId+" from unexpected user");var y=n.serializer.gd(v);return F3(e,a.userId,y).next(function(){})})})})})},t.prototype.ensureSequenceNumbers=function(e){var n=e.store(Fr.store),r=e.store(Vn.store);return hx(e).next(function(i){var o=[];return r.md(function(a,c){var f=new gn(a),v=function(y){return[0,ss(y)]}(f);o.push(n.get(v).next(function(y){return y?ke.resolve():function(b){return n.put(new Fr(0,ss(b),i))}(f)}))}).next(function(){return ke.Ki(o)})})},t.prototype.createCollectionParentIndex=function(e,n){e.createObjectStore(Nl.store,{keyPath:Nl.keyPath});var r=n.store(Nl.store),i=new fx,o=function(a){if(i.add(a)){var c=a.B(),f=a.L();return r.put({collectionId:c,parent:ss(f)})}};return n.store(Vn.store).md({Td:!0},function(a,c){var f=new gn(a);return o(f.L())}).next(function(){return n.store(Yr.store).md({Td:!0},function(a,c){a[0];var f=a[1],v=(a[2],ma(f));return o(v.L())})})},t.prototype.rewriteCanonicalIds=function(e){var n=this,r=e.store(Ri.store);return r.md(function(i,o){var a=n.serializer.$d(o),c=n.serializer.Md(a);return r.put(c)})},t}(),iX=function(t,e){this.seconds=t,this.nanoseconds=e},Wi=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Wi.store="owner",Wi.key="owner";var Tu=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Tu.store="mutationQueues",Tu.keyPath="userId";var pn=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};pn.store="mutations",pn.keyPath="batchId",pn.userMutationsIndex="userMutationsIndex",pn.userMutationsKeyPath=["userId","batchId"];var Yr=function(){function t(){}return t.prefixForUser=function(e){return[e]},t.prefixForPath=function(e,n){return[e,ss(n)]},t.key=function(e,n,r){return[e,ss(n),r]},t}();Yr.store="documentMutations",Yr.PLACEHOLDER=new Yr;var oX=function(t,e){this.path=t,this.readTime=e},sX=function(t,e){this.path=t,this.version=e},Vn=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Vn.store="remoteDocuments",Vn.readTimeIndex="readTimeIndex",Vn.readTimeIndexPath="readTime",Vn.collectionReadTimeIndex="collectionReadTimeIndex",Vn.collectionReadTimeIndexPath=["parentPath","readTime"];var Ns=function(t){this.byteSize=t};Ns.store="remoteDocumentGlobal",Ns.key="remoteDocumentGlobalKey";var Ri=function(t,e,n,r,i,o,a){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};Ri.store="targets",Ri.keyPath="targetId",Ri.queryTargetsIndexName="queryTargetsIndex",Ri.queryTargetsKeyPath=["canonicalId","targetId"];var Fr=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Fr.store="targetDocuments",Fr.keyPath=["targetId","path"],Fr.documentTargetsIndex="documentTargetsIndex",Fr.documentTargetsKeyPath=["path","targetId"];var Ji=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Ji.key="targetGlobalKey",Ji.store="targetGlobal";var Nl=function(t,e){this.collectionId=t,this.parent=e};function _O(t){t.createObjectStore(Fr.store,{keyPath:Fr.keyPath}).createIndex(Fr.documentTargetsIndex,Fr.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Ri.store,{keyPath:Ri.keyPath}).createIndex(Ri.queryTargetsIndexName,Ri.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Ji.store)}Nl.store="collectionParents",Nl.keyPath=["collectionId","parent"];var As=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};As.store="clientMetadata",As.keyPath="clientId";var wO=eo(eo(eo([Tu.store,pn.store,Yr.store,Vn.store,Ri.store,Wi.store,Ji.store,Fr.store],[As.store]),[Ns.store]),[Nl.store]),aX=function(){function t(){this.ef=new fx}return t.prototype.Vd=function(e,n){var r=this;if(!this.ef.has(n)){var i=n.B(),o=n.L();e.rr(function(){r.ef.add(n)});var a={collectionId:i,parent:ss(o)};return EO(e).put(a)}return ke.resolve()},t.prototype.Pr=function(e,n){var r=[],i=IDBKeyRange.bound([n,""],[h3(n),""],!1,!0);return EO(e).ld(i).next(function(o){for(var a=0,c=o;a<c.length;a++){var f=c[a];if(f.collectionId!==n)break;r.push(ma(f.parent))}return r})},t}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EO(t){return Oi.ed(t,Nl.store)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var uX=function(){function t(e){this.sf=e}return t.prototype.Gd=function(e){if(e.document)return this.sf.vn(e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=ct.nt(e.noDocument.path),r=this.nf(e.noDocument.readTime);return new Ar(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=ct.nt(e.unknownDocument.path),o=this.nf(e.unknownDocument.version);return new iy(i,o)}return We("Unexpected DbRemoteDocument")},t.prototype.Zd=function(e,n){var r=this.Kd(n),i=e.key.path.L().j();if(e instanceof Ht){var o=this.sf.bn(e),a=e.hasCommittedMutations;return new Vn(null,null,o,a,r,i)}if(e instanceof Ar){var c=e.key.path.j(),f=this.if(e.version),v=e.hasCommittedMutations;return new Vn(null,new oX(c,f),null,v,r,i)}if(e instanceof iy){var y=e.key.path.j(),b=this.if(e.version);return new Vn(new sX(y,b),null,null,!0,r,i)}return We("Unexpected MaybeDocument")},t.prototype.Kd=function(e){var n=e.k();return[n.seconds,n.nanoseconds]},t.prototype.zd=function(e){var n=new Fi(e[0],e[1]);return Rt.v(n)},t.prototype.if=function(e){var n=e.k();return new iX(n.seconds,n.nanoseconds)},t.prototype.nf=function(e){var n=new Fi(e.seconds,e.nanoseconds);return Rt.v(n)},t.prototype.Pd=function(e,n){var r=this,i=n.baseMutations.map(function(a){return r.sf.$n(a)}),o=n.mutations.map(function(a){return r.sf.$n(a)});return new pn(e,n.batchId,n.Ri.toMillis(),i,o)},t.prototype.gd=function(e){var n=this,r=(e.baseMutations||[]).map(function(a){return n.sf.xn(a)}),i=e.mutations.map(function(a){return n.sf.xn(a)}),o=Fi.fromMillis(e.localWriteTimeMs);return new sx(e.batchId,o,r,i)},t.prototype.$d=function(e){var n,r=this.nf(e.readTime),i=e.lastLimboFreeSnapshotVersion!==void 0?this.nf(e.lastLimboFreeSnapshotVersion):Rt.MIN;return n=e.query.documents!==void 0?this.sf.Kn(e.query):this.sf.Yn(e.query),new S_(n,e.targetId,0,e.lastListenSequenceNumber,r,i,mr.fromBase64String(e.resumeToken))},t.prototype.Md=function(e){var n,r=this.if(e.ts),i=this.if(e.lastLimboFreeSnapshotVersion);n=e.target.Pe()?this.sf.jn(e.target):this.sf.Gn(e.target);var o=e.resumeToken.toBase64();return new Ri(e.targetId,e.target.canonicalId(),r,o,e.sequenceNumber,i,n)},t}(),bO="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.",SO=function(t){function e(n,r){var i=this;return(i=t.call(this)||this).yd=n,i.Ch=r,i}return St(e,t),e}(p3),Oi=function(){function t(e,n,r,i,o,a,c,f){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.$a=a,this.rf=f,this.hf=!1,this.isPrimary=!1,this.networkEnabled=!0,this.af=null,this.inForeground=!1,this.uf=null,this.cf=null,this._f=Number.NEGATIVE_INFINITY,this.lf=function(v){return Promise.resolve()},this.Jo=new lX(this,o),this.df=n+t.ff,this.serializer=new uX(c),this.document=i.document,this.th=new tX(this.Jo,this.serializer),this.ur=new aX,this.hr=new U3(this.serializer,this.ur),!i.window||!i.window.localStorage)throw new Ie(pe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=i.window,this.Tf=this.window.localStorage}return t.ed=function(e,n){if(e instanceof SO)return sh.ed(e.yd,n);throw We("IndexedDbPersistence must use instances of IndexedDbTransaction")},t.mf=function(e){return Ee(this,void 0,void 0,function(){var n;return we(this,function(r){switch(r.label){case 0:if(!t.Uc())throw new Ie(pe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");return[4,(n=new t(e.allowTabSynchronization,e.persistenceKey,e.clientId,e.platform,e.wf,e.$a,e.serializer,e.rf)).start()];case 1:return[2,(r.sent(),n)]}})})},t.prototype.start=function(){var e=this;return sh.Yl(this.df,hy,new rX(this.serializer)).then(function(n){return e.Ef=n,e.If()}).then(function(){return e.Rf(),e.Af(),e.Pf(),e.Ef.runTransaction("readonly",[Ji.store],function(n){return hx(n)})}).then(function(n){e.Vf=new es(n,e.rf)}).then(function(){e.hf=!0}).catch(function(n){return e.Ef&&e.Ef.close(),Promise.reject(n)})},t.prototype.gf=function(e){var n=this;return this.lf=function(r){return Ee(n,void 0,void 0,function(){return we(this,function(i){return this.ko?[2,e(r)]:[2]})})},e(this.isPrimary)},t.prototype.pf=function(e){var n=this;this.Ef.sd(function(r){return Ee(n,void 0,void 0,function(){return we(this,function(i){switch(i.label){case 0:return r.newVersion===null?[4,e()]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})})},t.prototype.Zh=function(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.$a.qr(function(){return Ee(n,void 0,void 0,function(){return we(this,function(r){switch(r.label){case 0:return this.ko?[4,this.If()]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}})})}))},t.prototype.If=function(){var e=this;return this.Ef.runTransaction("readwrite",wO,function(n){return xg(n).put(new As(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next(function(){if(e.isPrimary)return e.yf(n).next(function(r){r||(e.isPrimary=!1,e.$a.qr(function(){return e.lf(!1)}))})}).next(function(){return e.bf(n)}).next(function(r){return e.isPrimary&&!r?e.vf(n).next(function(){return!1}):!!r&&e.Sf(n).next(function(){return!0})})}).catch(function(n){if(!e.allowTabSynchronization)throw n;return Ke("IndexedDbPersistence","Releasing owner lease after error during lease refresh",n),!1}).then(function(n){e.isPrimary!==n&&e.$a.qr(function(){return e.lf(n)}),e.isPrimary=n})},t.prototype.yf=function(e){var n=this;return Qf(e).get(Wi.key).next(function(r){return ke.resolve(n.Df(r))})},t.prototype.Cf=function(e){return xg(e).delete(this.clientId)},t.prototype.kf=function(){return Ee(this,void 0,void 0,function(){var e=this;return we(this,function(n){switch(n.label){case 0:return!this.isPrimary||this.Nf(this._f,18e5)?[3,2]:(this._f=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(r){var i=t.ed(r,As.store);return i.ld().next(function(o){var a=e.Ff(o,18e5),c=o.filter(function(f){return a.indexOf(f)===-1});return ke.forEach(c,function(f){return i.delete(f.clientId)}).next(function(){return c})})}).catch(function(){return[]})]);case 1:n.sent().forEach(function(r){e.window.localStorage.removeItem(e.$f(r.clientId))}),n.label=2;case 2:return[2]}})})},t.prototype.Pf=function(){var e=this;this.cf=this.$a.eo("client_metadata_refresh",4e3,function(){return e.If().then(function(){return e.kf()}).then(function(){return e.Pf()})})},t.prototype.Df=function(e){return!!e&&e.ownerId===this.clientId},t.prototype.bf=function(e){var n=this;return Qf(e).get(Wi.key).next(function(r){if(r!==null&&n.Nf(r.leaseTimestampMs,5e3)&&!n.Mf(r.ownerId)){if(n.Df(r)&&n.networkEnabled)return!0;if(!n.Df(r)){if(!r.allowTabSynchronization)throw new Ie(pe.FAILED_PRECONDITION,bO);return!1}}return!(!n.networkEnabled||!n.inForeground)||xg(e).ld().next(function(i){return n.Ff(i,5e3).find(function(o){if(n.clientId!==o.clientId){var a=!n.networkEnabled&&o.networkEnabled,c=!n.inForeground&&o.inForeground,f=n.networkEnabled===o.networkEnabled;if(a||c&&f)return!0}return!1})===void 0})}).next(function(r){return n.isPrimary!==r&&Ke("IndexedDbPersistence","Client "+(r?"is":"is not")+" eligible for a primary lease."),r})},t.prototype.lc=function(){return Ee(this,void 0,void 0,function(){var e=this;return we(this,function(n){switch(n.label){case 0:return this.hf=!1,this.Lf(),this.cf&&(this.cf.cancel(),this.cf=null),this.Of(),this.xf(),[4,this.Ef.runTransaction("readwrite",[Wi.store,As.store],function(r){return e.vf(r).next(function(){return e.Cf(r)})})];case 1:return n.sent(),this.Ef.close(),this.Bf(),[2]}})})},t.prototype.Ff=function(e,n){var r=this;return e.filter(function(i){return r.Nf(i.updateTimeMs,n)&&!r.Mf(i.clientId)})},t.prototype.Jh=function(){var e=this;return this.Ef.runTransaction("readonly",[As.store],function(n){return xg(n).ld().next(function(r){return e.Ff(r,18e5).map(function(i){return i.clientId})})})},t.clearPersistence=function(e){return Ee(this,void 0,void 0,function(){var n;return we(this,function(r){switch(r.label){case 0:return t.Uc()?(n=e+t.ff,[4,sh.delete(n)]):[2,Promise.resolve()];case 1:return r.sent(),[2]}})})},Object.defineProperty(t.prototype,"ko",{get:function(){return this.hf},enumerable:!0,configurable:!0}),t.prototype.Yo=function(e){return eX.Id(e,this.serializer,this.ur,this.Jo)},t.prototype.eh=function(){return this.th},t.prototype.Zo=function(){return this.hr},t.prototype.nh=function(){return this.ur},t.prototype.runTransaction=function(e,n,r){var i=this;Ke("IndexedDbPersistence","Starting transaction:",e);var o,a=n==="readonly"?"readonly":"readwrite";return this.Ef.runTransaction(a,wO,function(c){return o=new SO(c,i.Vf.next()),n==="readwrite-primary"?i.yf(c).next(function(f){return!!f||i.bf(c)}).next(function(f){if(!f)throw Qn("Failed to obtain primary lease for action '"+e+"'."),i.isPrimary=!1,i.$a.qr(function(){return i.lf(!1)}),new Ie(pe.FAILED_PRECONDITION,d3);return r(o)}).next(function(f){return i.Sf(c).next(function(){return f})}):i.Uf(c).next(function(){return r(o)})}).then(function(c){return o.or(),c})},t.prototype.Uf=function(e){var n=this;return Qf(e).get(Wi.key).next(function(r){if(r!==null&&n.Nf(r.leaseTimestampMs,5e3)&&!n.Mf(r.ownerId)&&!n.Df(r)&&!r.allowTabSynchronization)throw new Ie(pe.FAILED_PRECONDITION,bO)})},t.prototype.Sf=function(e){var n=new Wi(this.clientId,this.allowTabSynchronization,Date.now());return Qf(e).put(Wi.key,n)},t.Uc=function(){return sh.Uc()},t.qf=function(e){var n=e.cn.projectId;return e.cn.wi||(n+="."+e.cn.database),"firestore/"+e.persistenceKey+"/"+n+"/"},t.prototype.vf=function(e){var n=this,r=Qf(e);return r.get(Wi.key).next(function(i){return n.Df(i)?(Ke("IndexedDbPersistence","Releasing primary lease."),r.delete(Wi.key)):ke.resolve()})},t.prototype.Nf=function(e,n){var r=Date.now();return!(e<r-n||e>r&&(Qn("Detected an update time that is in the future: "+e+" > "+r),1))},t.prototype.Rf=function(){var e=this;this.document!==null&&typeof this.document.addEventListener=="function"&&(this.uf=function(){e.$a.qr(function(){return e.inForeground=e.document.visibilityState==="visible",e.If()})},this.document.addEventListener("visibilitychange",this.uf),this.inForeground=this.document.visibilityState==="visible")},t.prototype.Of=function(){this.uf&&(this.document.removeEventListener("visibilitychange",this.uf),this.uf=null)},t.prototype.Af=function(){var e=this;typeof this.window.addEventListener=="function"&&(this.af=function(){e.Lf(),e.$a.qr(function(){return e.lc()})},this.window.addEventListener("unload",this.af))},t.prototype.xf=function(){this.af&&(this.window.removeEventListener("unload",this.af),this.af=null)},t.prototype.Mf=function(e){try{var n=this.Tf.getItem(this.$f(e))!==null;return Ke("IndexedDbPersistence","Client '"+e+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(r){return Qn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}},t.prototype.Lf=function(){try{this.Tf.setItem(this.$f(this.clientId),String(Date.now()))}catch(e){Qn("Failed to set zombie client id.",e)}},t.prototype.Bf=function(){try{this.Tf.removeItem(this.$f(this.clientId))}catch{}},t.prototype.$f=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qf(t){return t.store(Wi.store)}function xg(t){return t.store(As.store)}Oi.ff="main";var lX=function(){function t(e,n){this.db=e,this.Qf=null,this.bo=new DY(this,n)}return t.prototype.Mo=function(e){var n=this.Wf(e);return this.db.eh().Ld(e).next(function(r){return n.next(function(i){return r+i})})},t.prototype.Wf=function(e){var n=0;return this.Oo(e,function(r){n++}).next(function(){return n})},t.prototype.Xs=function(e,n){return this.db.eh().Xs(e,n)},t.prototype.Oo=function(e,n){return this.jf(e,function(r,i){return n(i)})},t.prototype.Ho=function(e){this.Qf=e},t.prototype.vi=function(e,n){return Cg(e,n)},t.prototype.Di=function(e,n){return Cg(e,n)},t.prototype.xo=function(e,n,r){return this.db.eh().xo(e,n,r)},t.prototype.bd=function(e,n){return Cg(e,n)},t.prototype.Kf=function(e,n){return this.Qf.Mi(n)?ke.resolve(!0):function(r,i){var o=!1;return tm(r).wd(function(a){return M3(r,a,i).next(function(c){return c&&(o=!0),ke.resolve(!c)})}).next(function(){return o})}(e,n)},t.prototype.Bo=function(e,n){var r=this,i=this.db.Zo().wh(),o=[],a=0;return this.jf(e,function(c,f){if(f<=n){var v=r.Kf(e,c).next(function(y){if(!y)return a++,i.tr(e,c).next(function(){return i.Zi(c),uu(e).delete([0,ss(c.path)])})});o.push(v)}}).next(function(){return ke.Ki(o)}).next(function(){return i.apply(e)}).next(function(){return a})},t.prototype.removeTarget=function(e,n){var r=n.es(e.Ch);return this.db.eh().Nh(e,r)},t.prototype.Fh=function(e,n){return Cg(e,n)},t.prototype.jf=function(e,n){var r,i=uu(e),o=es.kr;return i.md({index:Fr.documentTargetsIndex},function(a,c){var f=a[0],v=(a[1],c.path),y=c.sequenceNumber;f===0?(o!==es.kr&&n(new ct(ma(r)),o),o=y,r=v):o=es.kr}).next(function(){o!==es.kr&&n(new ct(ma(r)),o)})},t.prototype.qo=function(e){return this.db.Zo().Jd(e)},t}();function Cg(t,e){return uu(t).put(function(n,r){return new Fr(0,ss(n.path),r)}(e,t.Ch))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cX=function(){function t(e,n){this.ur=e,this.Jo=n,this.ar=[],this.Gf=1,this.lastStreamToken=mr.xt,this.zf=new In(br.we)}return t.prototype.Rd=function(e){return ke.resolve(this.ar.length===0)},t.prototype.mh=function(e,n,r){var i=n.batchId,o=this.Hf(i,"acknowledged");return at(o===0,"Can only acknowledge the first batch in the mutation queue"),this.ar[o],this.lastStreamToken=r,ke.resolve()},t.prototype.ph=function(e){return ke.resolve(this.lastStreamToken)},t.prototype.yh=function(e,n){return this.lastStreamToken=n,ke.resolve()},t.prototype.dh=function(e,n,r,i){var o=this.Gf;this.Gf++,this.ar.length>0&&this.ar[this.ar.length-1];var a=new sx(o,n,r,i);this.ar.push(a);for(var c=0,f=i;c<f.length;c++){var v=f[c];this.zf=this.zf.add(new br(v.key,o)),this.ur.Vd(e,v.key.path.L())}return ke.resolve(a)},t.prototype.Ph=function(e,n){return ke.resolve(this.Jf(n))},t.prototype.Th=function(e,n){var r=this.Jf(n);return ke.resolve(r.keys())},t.prototype.xh=function(e,n){var r=n+1,i=this.Yf(r),o=i<0?0:i;return ke.resolve(this.ar.length>o?this.ar[o]:null)},t.prototype.gh=function(){return ke.resolve(this.ar.length===0?-1:this.Gf-1)},t.prototype.hh=function(e){return ke.resolve(this.ar.slice())},t.prototype._r=function(e,n){var r=this,i=new br(n,0),o=new br(n,Number.POSITIVE_INFINITY),a=[];return this.zf.Ct([i,o],function(c){var f=r.Jf(c.Li);a.push(f)}),ke.resolve(a)},t.prototype.wr=function(e,n){var r=this,i=new In(Pt);return n.forEach(function(o){var a=new br(o,0),c=new br(o,Number.POSITIVE_INFINITY);r.zf.Ct([a,c],function(f){i=i.add(f.Li)})}),ke.resolve(this.Xf(i))},t.prototype.Vr=function(e,n){var r=n.path,i=r.length+1,o=r;ct.st(o)||(o=o.child(""));var a=new br(new ct(o),0),c=new In(Pt);return this.zf.kt(function(f){var v=f.key.path;return!!r.q(v)&&(v.length===i&&(c=c.add(f.Li)),!0)},a),ke.resolve(this.Xf(c))},t.prototype.Xf=function(e){var n=this,r=[];return e.forEach(function(i){var o=n.Jf(i);o!==null&&r.push(o)}),r},t.prototype.Vh=function(e,n){var r=this;at(this.Hf(n.batchId,"removed")===0,"Can only remove the first entry of the mutation queue"),this.ar.shift();var i=this.zf;return ke.forEach(n.mutations,function(o){var a=new br(o.key,n.batchId);return i=i.delete(a),r.Jo.bd(e,o.key)}).next(function(){r.zf=i})},t.prototype.Xh=function(e){},t.prototype.Mi=function(e,n){var r=new br(n,0),i=this.zf.Nt(r);return ke.resolve(n.isEqual(i&&i.key))},t.prototype.Rh=function(e){return this.ar.length,ke.resolve()},t.prototype.Hf=function(e,n){return this.Yf(e)},t.prototype.Yf=function(e){return this.ar.length===0?0:e-this.ar[0].batchId},t.prototype.Jf=function(e){var n=this.Yf(e);return n<0||n>=this.ar.length?null:this.ar[n]},t}(),V3=function(){function t(e,n){this.ur=e,this.Zf=n,this.docs=new mi(ct.F),this.size=0}return t.prototype.Yi=function(e,n,r){var i=n.key,o=this.docs.get(i),a=o?o.size:0,c=this.Zf(n);return this.docs=this.docs.it(i,{Ud:n,size:c,readTime:r}),this.size+=c-a,this.ur.Vd(e,i.path.L())},t.prototype.Zi=function(e){var n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)},t.prototype.tr=function(e,n){var r=this.docs.get(n);return ke.resolve(r?r.Ud:null)},t.prototype.getEntries=function(e,n){var r=this,i=oy();return n.forEach(function(o){var a=r.docs.get(o);i=i.it(o,a?a.Ud:null)}),ke.resolve(i)},t.prototype.Er=function(e,n,r){for(var i=pp(),o=new ct(n.path.child("")),a=this.docs.lt(o);a.It();){var c=a.Et(),f=c.key,v=c.value,y=v.Ud,b=v.readTime;if(!n.path.q(f.path))break;b.D(r)<=0||y instanceof Ht&&n.matches(y)&&(i=i.it(y.key,y))}return ke.resolve(i)},t.prototype.tT=function(e,n){return ke.forEach(this.docs,function(r){return n(r)})},t.prototype.ea=function(e,n){throw new Error("getNewDocumentChanges() is not supported with MemoryPersistence")},t.prototype.na=function(e){return ke.resolve(Rt.MIN)},t.prototype.wh=function(e){return new t.Hd(this)},t.prototype.Jd=function(e){return ke.resolve(this.size)},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */V3.Hd=function(t){function e(n){var r=this;return(r=t.call(this)||this).Yd=n,r}return St(e,t),e.prototype.nr=function(n){var r=this,i=[];return this.zi.forEach(function(o,a){a?i.push(r.Yd.Yi(n,a,r.readTime)):r.Yd.Zi(o)}),ke.Ki(i)},e.prototype.er=function(n,r){return this.Yd.tr(n,r)},e.prototype.sr=function(n,r){return this.Yd.getEntries(n,r)},e}(f3);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hX=function(){function t(e){this.persistence=e,this.eT=new ef(function(n){return n.canonicalId()}),this.lastRemoteSnapshotVersion=Rt.MIN,this.highestTargetId=0,this.sT=0,this.nT=new ax,this.targetCount=0,this.iT=ly.p_()}return t.prototype.Xs=function(e,n){return this.eT.forEach(function(r,i){return n(i)}),ke.resolve()},t.prototype.bh=function(e){return ke.resolve(this.lastRemoteSnapshotVersion)},t.prototype.Dd=function(e){return ke.resolve(this.sT)},t.prototype.Qh=function(e){return this.highestTargetId=this.iT.next(),ke.resolve(this.highestTargetId)},t.prototype.$h=function(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.sT&&(this.sT=n),ke.resolve()},t.prototype.Cd=function(e){this.eT.set(e.target,e);var n=e.targetId;n>this.highestTargetId&&(this.iT=new ly(n),this.highestTargetId=n),e.sequenceNumber>this.sT&&(this.sT=e.sequenceNumber)},t.prototype.Wh=function(e,n){return this.Cd(n),this.targetCount+=1,ke.resolve()},t.prototype.Nh=function(e,n){return this.Cd(n),ke.resolve()},t.prototype.Nd=function(e,n){return this.eT.delete(n.target),this.nT.Ni(n.targetId),this.targetCount-=1,ke.resolve()},t.prototype.xo=function(e,n,r){var i=this,o=0,a=[];return this.eT.forEach(function(c,f){f.sequenceNumber<=n&&r.get(f.targetId)===null&&(i.eT.delete(c),a.push(i.Fd(e,f.targetId)),o++)}),ke.Ki(a).next(function(){return o})},t.prototype.Ld=function(e){return ke.resolve(this.targetCount)},t.prototype.qh=function(e,n){var r=this.eT.get(n)||null;return ke.resolve(r)},t.prototype.un=function(e,n){return We("Not yet implemented.")},t.prototype.Dh=function(e,n,r){this.nT.Si(n,r);var i=this.persistence.Jo,o=[];return i&&n.forEach(function(a){o.push(i.vi(e,a))}),ke.Ki(o)},t.prototype.Sh=function(e,n,r){this.nT.ki(n,r);var i=this.persistence.Jo,o=[];return i&&n.forEach(function(a){o.push(i.Di(e,a))}),ke.Ki(o)},t.prototype.Fd=function(e,n){return this.nT.Ni(n),ke.resolve()},t.prototype.Gh=function(e,n){var r=this.nT.$i(n);return ke.resolve(r)},t.prototype.Mi=function(e,n){return ke.resolve(this.nT.Mi(n))},t}(),fX=function(){function t(e,n){var r=this;this.clientId=e,this.rT={},this.Vf=new es(0),this.hf=!1,this.hf=!0,this.Jo=n(this),this.th=new hX(this),this.ur=new nX,this.hr=new V3(this.ur,function(i){return r.Jo.oT(i)})}return t.prototype.lc=function(){return this.hf=!1,Promise.resolve()},Object.defineProperty(t.prototype,"ko",{get:function(){return this.hf},enumerable:!0,configurable:!0}),t.prototype.Jh=function(){return Ee(this,void 0,void 0,function(){return we(this,function(e){return[2,[this.clientId]]})})},t.prototype.gf=function(e){return e(!0)},t.prototype.pf=function(){},t.prototype.Zh=function(e){},t.prototype.nh=function(){return this.ur},t.prototype.Yo=function(e){var n=this.rT[e.s()];return n||(n=new cX(this.ur,this.Jo),this.rT[e.s()]=n),n},t.prototype.eh=function(){return this.th},t.prototype.Zo=function(){return this.hr},t.prototype.runTransaction=function(e,n,r){var i=this;Ke("MemoryPersistence","Starting transaction:",e);var o=new dX(this.Vf.next());return this.Jo.hT(),r(o).next(function(a){return i.Jo.aT(o).next(function(){return a})}).Wi().then(function(a){return o.or(),a})},t.prototype.uT=function(e,n){return ke.Gi(Object.values(this.rT).map(function(r){return function(){return r.Mi(e,n)}}))},t}(),dX=function(t){function e(n){var r=this;return(r=t.call(this)||this).Ch=n,r}return St(e,t),e}(p3),pX=function(){function t(e){this.persistence=e,this.Qf=null,this.cT=null}return t._T=function(e){return new t(e)},Object.defineProperty(t.prototype,"lT",{get:function(){if(this.cT)return this.cT;throw We("orphanedDocuments is only valid during a transaction.")},enumerable:!0,configurable:!0}),t.prototype.Ho=function(e){this.Qf=e},t.prototype.vi=function(e,n){return this.lT.delete(n),ke.resolve()},t.prototype.Di=function(e,n){return this.lT.add(n),ke.resolve()},t.prototype.bd=function(e,n){return this.lT.add(n),ke.resolve()},t.prototype.removeTarget=function(e,n){var r=this,i=this.persistence.eh();return i.Gh(e,n.targetId).next(function(o){o.forEach(function(a){return r.lT.add(a)})}).next(function(){return i.Nd(e,n)})},t.prototype.hT=function(){this.cT=new Set},t.prototype.aT=function(e){var n=this,r=this.persistence.Zo().wh();return ke.forEach(this.lT,function(i){return n.dT(e,i).next(function(o){o||r.Zi(i)})}).next(function(){return n.cT=null,r.apply(e)})},t.prototype.Fh=function(e,n){var r=this;return this.dT(e,n).next(function(i){i?r.lT.delete(n):r.lT.add(n)})},t.prototype.oT=function(e){return 0},t.prototype.dT=function(e,n){var r=this;return ke.Gi([function(){return r.persistence.eh().Mi(e,n)},function(){return r.persistence.uT(e,n)},function(){return ke.resolve(r.Qf.Mi(n))}])},t}(),vX=function(){function t(){}return t.prototype.initialize=function(e,n,r,i,o,a,c,f){return Ee(this,void 0,void 0,function(){var v,y,b,E,I=this;return we(this,function(L){switch(L.label){case 0:if(v=Oi.qf(n),y=r.fT(n.cn),!vO.Uc(r))throw new Ie(pe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return this.X_=f.synchronizeTabs?new vO(e,r,v,o,a):new N3,this.X_.$u=function(D){return I.mc.B_(D,1)},b=this,[4,Oi.mf({allowTabSynchronization:f.synchronizeTabs,persistenceKey:v,clientId:o,platform:r,$a:e,serializer:y,wf:nr.Io(f.cacheSizeBytes),rf:this.X_})];case 1:return b.persistence=L.sent(),E=this.persistence.Jo.bo,this.TT=new PY(E,e),this.Wu=new ux(this.persistence,new D3,a),this.W_=new C3(this.Wu,i,e,function(D){return I.mc.B_(D,0)},r.mT()),this.mc=new O3(this.Wu,this.W_,this.X_,a,c),this.wT=new P3(this.mc),this.W_.mc=this.mc,this.X_.mc=this.mc,[4,this.X_.start()];case 2:return L.sent(),[4,this.W_.start()];case 3:return L.sent(),[4,this.Wu.start()];case 4:return L.sent(),[4,this.persistence.gf(function(D){return Ee(I,void 0,void 0,function(){return we(this,function(te){switch(te.label){case 0:return[4,this.mc.Cc(D)];case 1:return te.sent(),D&&!this.TT.ko?this.TT.start(this.Wu):D||this.TT.stop(),[2]}})})})];case 5:return L.sent(),[2]}})})},t.prototype.clearPersistence=function(e){var n=Oi.qf(e);return Oi.clearPersistence(n)},t}(),TO="You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.",j1=function(){function t(e){e===void 0&&(e=pX._T),this.ET=e}return t.prototype.initialize=function(e,n,r,i,o,a,c,f){return Ee(this,void 0,void 0,function(){var v=this;return we(this,function(y){switch(y.label){case 0:if(f.IT)throw new Ie(pe.FAILED_PRECONDITION,TO);return this.persistence=new fX(o,this.ET),this.TT=null,this.X_=new N3,this.Wu=new ux(this.persistence,new D3,a),this.W_=new C3(this.Wu,i,e,function(b){return v.mc.B_(b,0)},r.mT()),this.mc=new O3(this.Wu,this.W_,this.X_,a,c),this.wT=new P3(this.mc),this.W_.mc=this.mc,[4,this.W_.start()];case 1:return y.sent(),[4,this.W_.Cc(!0)];case 2:return y.sent(),[4,this.mc.Cc(!0)];case 3:return y.sent(),[2]}})})},t.prototype.clearPersistence=function(){throw new Ie(pe.FAILED_PRECONDITION,TO)},t}(),gX=function(){function t(e,n,r,i){this.platform=e,this.RT=n,this.credentials=r,this.Nr=i,this.clientId=c3.mi()}return t.prototype.start=function(e,n){var r=this;this.AT();var i=new au,o=new au,a=!1;return this.credentials.l(function(c){if(!a)return a=!0,Ke("FirestoreClient","Initializing. user=",c.uid),r.PT(e,n,c,o).then(i.resolve,i.reject);r.Nr.qr(function(){return r.Dc(c)})}),this.Nr.qr(function(){return i.promise}),o.promise},t.prototype.enableNetwork=function(){var e=this;return this.AT(),this.Nr.enqueue(function(){return e.mc.enableNetwork()})},t.prototype.PT=function(e,n,r,i){return Ee(this,void 0,void 0,function(){var o,a,c,f,v=this;return we(this,function(y){switch(y.label){case 0:return y.trys.push([0,3,,4]),[4,this.platform.VT(this.RT)];case 1:return o=y.sent(),a=this.platform.fT(this.RT.cn),c=new zY(this.Nr,o,this.credentials,a),[4,e.initialize(this.Nr,this.RT,this.platform,c,this.clientId,r,100,n)];case 2:return y.sent(),this.persistence=e.persistence,this.X_=e.X_,this.Wu=e.Wu,this.W_=e.W_,this.mc=e.mc,this.TT=e.TT,this.gT=e.wT,this.persistence.pf(function(){return Ee(v,void 0,void 0,function(){return we(this,function(b){switch(b.label){case 0:return[4,this.terminate()];case 1:return b.sent(),[2]}})})}),i.resolve(),[3,4];case 3:if(f=y.sent(),i.reject(f),!this.pT(f))throw f;return[2,(console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+f),this.PT(new j1,{IT:!1},r,i))];case 4:return[2]}})})},t.prototype.pT=function(e){return e.name==="FirebaseError"?e.code===pe.FAILED_PRECONDITION||e.code===pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11},t.prototype.AT=function(){if(this.Nr.Hr)throw new Ie(pe.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.Dc=function(e){return this.Nr.no(),Ke("FirestoreClient","Credential Changed. Current user: "+e.uid),this.mc.Dc(e)},t.prototype.disableNetwork=function(){var e=this;return this.AT(),this.Nr.enqueue(function(){return e.mc.disableNetwork()})},t.prototype.terminate=function(){var e=this;return this.Nr.to(function(){return Ee(e,void 0,void 0,function(){return we(this,function(n){switch(n.label){case 0:return this.TT&&this.TT.stop(),[4,this.W_.lc()];case 1:return n.sent(),[4,this.X_.lc()];case 2:return n.sent(),[4,this.persistence.lc()];case 3:return n.sent(),this.credentials.T(),[2]}})})})},t.prototype.waitForPendingWrites=function(){var e=this;this.AT();var n=new au;return this.Nr.qr(function(){return e.mc.Pl(n)}),n.promise},t.prototype.listen=function(e,n,r){var i=this;this.AT();var o=new XY(e,n,r);return this.Nr.qr(function(){return i.gT.listen(o)}),o},t.prototype.fc=function(e){var n=this;this.yT||this.Nr.qr(function(){return n.gT.fc(e)})},t.prototype.bT=function(e){var n=this;return this.AT(),this.Nr.enqueue(function(){return n.Wu.Bh(e)}).then(function(r){if(r instanceof Ht)return r;if(r instanceof Ar)return null;throw new Ie(pe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")})},t.prototype.vT=function(e){var n=this;return this.AT(),this.Nr.enqueue(function(){return Ee(n,void 0,void 0,function(){var r,i,o;return we(this,function(a){switch(a.label){case 0:return[4,this.Wu.Kh(e,!0)];case 1:return r=a.sent(),i=new R3(e,r.zh),o=i.k_(r.documents),[2,i.nr(o,!1).snapshot]}})})})},t.prototype.write=function(e){var n=this;this.AT();var r=new au;return this.Nr.qr(function(){return n.mc.write(e,r)}),r.promise},t.prototype.cn=function(){return this.RT.cn},t.prototype.Ol=function(e){var n=this;this.AT(),this.Nr.qr(function(){return n.gT.Ol(e),Promise.resolve()})},t.prototype.xl=function(e){this.yT||this.gT.xl(e)},Object.defineProperty(t.prototype,"yT",{get:function(){return this.Nr.Hr},enumerable:!0,configurable:!0}),t.prototype.transaction=function(e){var n=this;this.AT();var r=new au;return this.Nr.qr(function(){return n.mc.runTransaction(n.Nr,e,r),Promise.resolve()}),r.promise},t}(),dx=function(){function t(e){this.observer=e,this.muted=!1}return t.prototype.next=function(e){this.ST(this.observer.next,e)},t.prototype.error=function(e){this.ST(this.observer.error,e)},t.prototype.DT=function(){this.muted=!0},t.prototype.ST=function(e,n){var r=this;this.muted||setTimeout(function(){r.muted||e(n)},0)},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gp(t){return function(e,n){if(typeof e!="object"||e===null)return!1;for(var r=e,i=0,o=["next","error","complete"];i<o.length;i++){var a=o[i];if(a in r&&typeof r[a]=="function")return!0}return!1}(t)}var IO=function(){function t(e,n,r,i){this.firestore=e,this.timestampsInSnapshots=n,this.CT=r,this.converter=i}return t.prototype.kT=function(e){switch(Aa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ir(e.integerValue||e.doubleValue);case 3:return this.NT(e.timestampValue);case 4:return this.FT(e);case 5:return e.stringValue;case 6:return new I_(Uh(e.bytesValue));case 7:return this.$T(e.referenceValue);case 8:return new x_(e.geoPointValue.latitude,e.geoPointValue.longitude);case 9:return this.MT(e.arrayValue);case 10:return this.LT(e.mapValue);default:throw We("Invalid value type: "+JSON.stringify(e))}},t.prototype.LT=function(e){var n=this,r={};return Fl(e.fields||{},function(i,o){r[i]=n.kT(o)}),r},t.prototype.MT=function(e){var n=this;return(e.values||[]).map(function(r){return n.kT(r)})},t.prototype.FT=function(e){switch(this.CT){case"previous":var n=function r(i){var o=i.mapValue.fields.__previous_value__;return tx(o)?r(o):o}(e);return n==null?null:this.kT(n);case"estimate":return this.NT(lp(e));default:return null}},t.prototype.NT=function(e){var n=Ru(e),r=new Fi(n.seconds,n.nanos);return this.timestampsInSnapshots?r:r.toDate()},t.prototype.$T=function(e){var n=gn.G(e);at(u3(n),"ReferenceValue is not valid "+e);var r=new L1(n.get(1),n.get(3)),i=new ct(n.M(5));return r.isEqual(this.firestore.OT)||Qn("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+this.firestore.OT.projectId+"/"+this.firestore.OT.database+") instead."),new ka(i,this.firestore,this.converter)},t}(),B3=nr.Po,xO=function(){function t(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ie(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else v3("settings","non-empty string","host",e.host),this.host=e.host,ua("settings","boolean","ssl",e.ssl),this.ssl=(n=e.ssl)===null||n===void 0||n;if(tc("settings",e,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling"]),ua("settings","object","credentials",e.credentials),this.credentials=e.credentials,ua("settings","boolean","timestampsInSnapshots",e.timestampsInSnapshots),e.timestampsInSnapshots===!0?Qn("The setting 'timestampsInSnapshots: true' is no longer required and should be removed."):e.timestampsInSnapshots===!1&&Qn("Support for 'timestampsInSnapshots: false' will be removed soon. You must update your code to handle Timestamp objects."),this.timestampsInSnapshots=(r=e.timestampsInSnapshots)===null||r===void 0||r,ua("settings","number","cacheSizeBytes",e.cacheSizeBytes),e.cacheSizeBytes===void 0)this.cacheSizeBytes=nr.po;else{if(e.cacheSizeBytes!==B3&&e.cacheSizeBytes<nr.Vo)throw new Ie(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+nr.Vo);this.cacheSizeBytes=e.cacheSizeBytes}ua("settings","boolean","experimentalForceLongPolling",e.experimentalForceLongPolling),this.forceLongPolling=e.experimentalForceLongPolling!==void 0&&e.experimentalForceLongPolling}return t.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.timestampsInSnapshots===e.timestampsInSnapshots&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.forceLongPolling===e.forceLongPolling},t}(),px=function(){function t(e,n,r){var i=this;if(r===void 0&&(r=new j1),this.xT=null,this.BT=new RY,this.INTERNAL={delete:function(){return Ee(i,void 0,void 0,function(){return we(this,function(c){switch(c.label){case 0:return this.UT(),[4,this.qT.terminate()];case 1:return c.sent(),[2]}})})}},typeof e.options=="object"){var o=e;this.xT=o,this.OT=t.QT(o),this.WT=o.name,this.jT=new oY(n)}else{var a=e;if(!a.projectId)throw new Ie(pe.INVALID_ARGUMENT,"Must provide projectId");this.OT=new L1(a.projectId,a.database),this.WT="[DEFAULT]",this.jT=new HR}this.KT=r,this.GT=new xO({}),this.zT=this.HT(this.OT)}return t.prototype.settings=function(e){wn("Firestore.settings",arguments,1),$n("Firestore.settings","object",1,e);var n=new xO(e);if(this.qT&&!this.GT.isEqual(n))throw new Ie(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this.GT=n,n.credentials!==void 0&&(this.jT=function(r){if(!r)return new HR;switch(r.type){case"gapi":var i=r.JT;return at(!(typeof i!="object"||i===null||!i.auth||!i.auth.getAuthHeaderValueForFirstParty),"unexpected gapi interface"),new aY(i,r.V||"0");case"provider":return r.JT;default:throw new Ie(pe.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(n.credentials))},t.prototype.enableNetwork=function(){return this.UT(),this.qT.enableNetwork()},t.prototype.disableNetwork=function(){return this.UT(),this.qT.disableNetwork()},t.prototype.enablePersistence=function(e){var n,r;if(this.qT)throw new Ie(pe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var i=!1;return e&&(e.experimentalTabSynchronization!==void 0&&Qn("The 'experimentalTabSynchronization' setting will be removed. Use 'synchronizeTabs' instead."),i=(r=(n=e.synchronizeTabs)!==null&&n!==void 0?n:e.experimentalTabSynchronization)!==null&&r!==void 0&&r),this.YT(this.KT,{IT:!0,cacheSizeBytes:this.GT.cacheSizeBytes,synchronizeTabs:i})},t.prototype.clearPersistence=function(){return Ee(this,void 0,void 0,function(){var e,n=this;return we(this,function(r){if(this.qT!==void 0&&!this.qT.yT)throw new Ie(pe.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return e=new au,[2,(this.BT.Jr(function(){return Ee(n,void 0,void 0,function(){var i,o;return we(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),i=this.XT(),[4,this.KT.clearPersistence(i)];case 1:return a.sent(),e.resolve(),[3,3];case 2:return o=a.sent(),e.reject(o),[3,3];case 3:return[2]}})})}),e.promise)]})})},t.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(t.prototype,"ZT",{get:function(){return this.UT(),this.qT.yT},enumerable:!0,configurable:!0}),t.prototype.waitForPendingWrites=function(){return this.UT(),this.qT.waitForPendingWrites()},t.prototype.onSnapshotsInSync=function(e){if(this.UT(),gp(e))return this.tm(e);$n("Firestore.onSnapshotsInSync","function",1,e);var n={next:e};return this.tm(n)},t.prototype.tm=function(e){var n=this,r=new dx({next:function(){e.next&&e.next()},error:function(i){throw We("Uncaught Error in onSnapshotsInSync")}});return this.qT.Ol(r),function(){r.DT(),n.qT.xl(r)}},t.prototype.UT=function(){return this.qT||this.YT(new j1,{IT:!1}),this.qT},t.prototype.XT=function(){return new CY(this.OT,this.WT,this.GT.host,this.GT.ssl,this.GT.forceLongPolling)},t.prototype.YT=function(e,n){var r=this.XT();return this.qT=new gX(Bl.Lt(),r,this.jT,this.BT),this.qT.start(e,n)},t.prototype.HT=function(e){var n=new a3(e,{dn:Bl.Lt().dn});return new UY(n,function(r){if(r instanceof ka){var i=e,o=r.firestore.OT;if(!o.isEqual(i))throw new Ie(pe.INVALID_ARGUMENT,"Document reference is for database "+o.projectId+"/"+o.database+" but should be for database "+i.projectId+"/"+i.database);return new lx(e,r.em)}return r})},t.QT=function(e){if(n=e.options,!Object.prototype.hasOwnProperty.call(n,"projectId"))throw new Ie(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n,r=e.options.projectId;if(!r||typeof r!="string")throw new Ie(pe.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new L1(r)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.xT)throw new Ie(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.xT},enumerable:!0,configurable:!0}),t.prototype.collection=function(e){return wn("Firestore.collection",arguments,1),$n("Firestore.collection","non-empty string",1,e),this.UT(),new fy(gn.G(e),this)},t.prototype.doc=function(e){return wn("Firestore.doc",arguments,1),$n("Firestore.doc","non-empty string",1,e),this.UT(),ka.sm(gn.G(e),this)},t.prototype.collectionGroup=function(e){if(wn("Firestore.collectionGroup",arguments,1),$n("Firestore.collectionGroup","non-empty string",1,e),e.indexOf("/")>=0)throw new Ie(pe.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.UT(),new C_(new Vl(gn.H,e),this)},t.prototype.runTransaction=function(e){var n=this;return wn("Firestore.runTransaction",arguments,1),$n("Firestore.runTransaction","function",1,e),this.UT().transaction(function(r){return e(new z3(n,r))})},t.prototype.batch=function(){return this.UT(),new q3(this)},Object.defineProperty(t,"logLevel",{get:function(){switch(ay()){case wt.DEBUG:return"debug";case wt.SILENT:return"silent";default:return"error"}},enumerable:!0,configurable:!0}),t.setLogLevel=function(e){switch(wn("Firestore.setLogLevel",arguments,1),$n("Firestore.setLogLevel","non-empty string",1,e),e){case"debug":lb(wt.DEBUG);break;case"error":lb(wt.ERROR);break;case"silent":lb(wt.SILENT);break;default:throw new Ie(pe.INVALID_ARGUMENT,"Invalid log level: "+e)}},t.prototype.nm=function(){return this.GT.timestampsInSnapshots},t}(),z3=function(){function t(e,n){this.im=e,this.rm=n}return t.prototype.get=function(e){var n=this;wn("Transaction.get",arguments,1);var r=la("Transaction.get",e,this.im);return this.rm.pu([r.em]).then(function(i){if(!i||i.length!==1)return We("Mismatch in docs returned from document lookup.");var o=i[0];if(o instanceof Ar)return new ql(n.im,r.em,null,!1,!1,r.om);if(o instanceof Ht)return new ql(n.im,r.em,o,!1,!1,r.om);throw We("BatchGetDocumentsRequest returned unexpected document type: "+o.constructor.name)})},t.prototype.set=function(e,n,r){Io("Transaction.set",arguments,2,3);var i=la("Transaction.set",e,this.im);r=vx("Transaction.set",r);var o=gx(i.om,n,"Transaction.set"),a=o[0],c=o[1],f=r.merge||r.mergeFields?this.im.zT.pa(c,a,r.mergeFields):this.im.zT.Va(c,a);return this.rm.set(i.em,f),this},t.prototype.update=function(e,n,r){for(var i,o,a=[],c=3;c<arguments.length;c++)a[c-3]=arguments[c];return typeof n=="string"||n instanceof cs?(ga("Transaction.update",arguments,3),i=la("Transaction.update",e,this.im),o=this.im.zT.Sa("Transaction.update",n,r,a)):(wn("Transaction.update",arguments,2),i=la("Transaction.update",e,this.im),o=this.im.zT.ya("Transaction.update",n)),this.rm.update(i.em,o),this},t.prototype.delete=function(e){wn("Transaction.delete",arguments,1);var n=la("Transaction.delete",e,this.im);return this.rm.delete(n.em),this},t}(),q3=function(){function t(e){this.im=e,this.hm=[],this.am=!1}return t.prototype.set=function(e,n,r){Io("WriteBatch.set",arguments,2,3),this.um();var i=la("WriteBatch.set",e,this.im);r=vx("WriteBatch.set",r);var o=gx(i.om,n,"WriteBatch.set"),a=o[0],c=o[1],f=r.merge||r.mergeFields?this.im.zT.pa(c,a,r.mergeFields):this.im.zT.Va(c,a);return this.hm=this.hm.concat(f.da(i.em,Cr.NONE)),this},t.prototype.update=function(e,n,r){for(var i,o,a=[],c=3;c<arguments.length;c++)a[c-3]=arguments[c];return this.um(),typeof n=="string"||n instanceof cs?(ga("WriteBatch.update",arguments,3),i=la("WriteBatch.update",e,this.im),o=this.im.zT.Sa("WriteBatch.update",n,r,a)):(wn("WriteBatch.update",arguments,2),i=la("WriteBatch.update",e,this.im),o=this.im.zT.ya("WriteBatch.update",n)),this.hm=this.hm.concat(o.da(i.em,Cr.exists(!0))),this},t.prototype.delete=function(e){wn("WriteBatch.delete",arguments,1),this.um();var n=la("WriteBatch.delete",e,this.im);return this.hm=this.hm.concat(new fp(n.em,Cr.NONE)),this},t.prototype.commit=function(){return this.um(),this.am=!0,this.hm.length>0?this.im.UT().write(this.hm):Promise.resolve()},t.prototype.um=function(){if(this.am)throw new Ie(pe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),ka=function(){function t(e,n,r){this.em=e,this.firestore=n,this.om=r,this.qT=this.firestore.UT()}return t.sm=function(e,n,r){if(e.length%2!=0)throw new Ie(pe.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.K()+" has "+e.length);return new t(new ct(e),n,r)},Object.defineProperty(t.prototype,"id",{get:function(){return this.em.path.B()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new fy(this.em.path.L(),this.firestore,this.om)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.em.path.K()},enumerable:!0,configurable:!0}),t.prototype.collection=function(e){if(wn("DocumentReference.collection",arguments,1),$n("DocumentReference.collection","non-empty string",1,e),!e)throw new Ie(pe.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var n=gn.G(e);return new fy(this.em.path.child(n),this.firestore)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw nc("isEqual","DocumentReference",1,e);return this.firestore===e.firestore&&this.em.isEqual(e.em)&&this.om===e.om},t.prototype.set=function(e,n){Io("DocumentReference.set",arguments,1,2),n=vx("DocumentReference.set",n);var r=gx(this.om,e,"DocumentReference.set"),i=r[0],o=r[1],a=n.merge||n.mergeFields?this.firestore.zT.pa(o,i,n.mergeFields):this.firestore.zT.Va(o,i);return this.qT.write(a.da(this.em,Cr.NONE))},t.prototype.update=function(e,n){for(var r,i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];return typeof e=="string"||e instanceof cs?(ga("DocumentReference.update",arguments,2),r=this.firestore.zT.Sa("DocumentReference.update",e,n,i)):(wn("DocumentReference.update",arguments,1),r=this.firestore.zT.ya("DocumentReference.update",e)),this.qT.write(r.da(this.em,Cr.exists(!0)))},t.prototype.delete=function(){return wn("DocumentReference.delete",arguments,0),this.qT.write([new fp(this.em,Cr.NONE)])},t.prototype.onSnapshot=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Io("DocumentReference.onSnapshot",arguments,1,4);var r,i={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||gp(e[o])||(tc("DocumentReference.onSnapshot",i=e[o],["includeMetadataChanges"]),ua("DocumentReference.onSnapshot","boolean","includeMetadataChanges",i.includeMetadataChanges),o++);var a={includeMetadataChanges:i.includeMetadataChanges};return gp(e[o])?r=e[o]:($n("DocumentReference.onSnapshot","function",o,e[o]),_h("DocumentReference.onSnapshot","function",o+1,e[o+1]),_h("DocumentReference.onSnapshot","function",o+2,e[o+2]),r={next:e[o],error:e[o+1],complete:e[o+2]}),this.cm(a,r)},t.prototype.cm=function(e,n){var r=this,i=function(c){console.error("Uncaught Error in onSnapshot:",c)};n.error&&(i=n.error.bind(n));var o=new dx({next:function(c){if(n.next){var f=c.docs.get(r.em);n.next(new ql(r.firestore,r.em,f,c.fromCache,c.hasPendingWrites,r.om))}},error:i}),a=this.qT.listen(Vl.ve(this.em.path),o,e);return function(){o.DT(),r.qT.fc(a)}},t.prototype.get=function(e){var n=this;return Io("DocumentReference.get",arguments,0,1),G3("DocumentReference.get",e),new Promise(function(r,i){e&&e.source==="cache"?n.firestore.UT().bT(n.em).then(function(o){r(new ql(n.firestore,n.em,o,!0,o instanceof Ht&&o.te,n.om))},i):n._m(r,i,e)})},t.prototype._m=function(e,n,r){var i=this.cm({includeMetadataChanges:!0,Kl:!0},{next:function(o){i(),!o.exists&&o.metadata.fromCache?n(new Ie(pe.UNAVAILABLE,"Failed to get document because the client is offline.")):o.exists&&o.metadata.fromCache&&r&&r.source==="server"?n(new Ie(pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):e(o)},error:n})},t.prototype.withConverter=function(e){return new t(this.em,this.firestore,e)},t}(),W3=function(){function t(e,n){this.hasPendingWrites=e,this.fromCache=n}return t.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},t}(),ql=function(){function t(e,n,r,i,o,a){this.im=e,this.em=n,this.lm=r,this.dm=i,this.fm=o,this.om=a}return t.prototype.data=function(e){if(Io("DocumentSnapshot.data",arguments,0,1),e=CO("DocumentSnapshot.data",e),this.lm){if(this.om){var n=new Cd(this.im,this.em,this.lm,this.dm,this.fm);return this.om.fromFirestore(n,e)}return new IO(this.im,this.im.nm(),e.serverTimestamps,void 0).kT(this.lm.Ie())}},t.prototype.get=function(e,n){if(Io("DocumentSnapshot.get",arguments,1,2),n=CO("DocumentSnapshot.get",n),this.lm){var r=this.lm.data().field(vp("DocumentSnapshot.get",e));if(r!==null)return new IO(this.im,this.im.nm(),n.serverTimestamps,this.om).kT(r)}},Object.defineProperty(t.prototype,"id",{get:function(){return this.em.path.B()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new ka(this.em,this.im,this.om)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this.lm!==null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new W3(this.fm,this.dm)},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){if(!(e instanceof t))throw nc("isEqual","DocumentSnapshot",1,e);return this.im===e.im&&this.dm===e.dm&&this.em.isEqual(e.em)&&(this.lm===null?e.lm===null:this.lm.isEqual(e.lm))&&this.om===e.om},t}(),Cd=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return St(e,t),e.prototype.data=function(n){return t.prototype.data.call(this,n)},e}(ql),C_=function(){function t(e,n,r){this.Tm=e,this.firestore=n,this.om=r}return t.prototype.where=function(e,n,r){var i;wn("Query.where",arguments,3),sO("Query.where",3,r),function(E,I,L,D){if(!I.some(function(te){return te===D}))throw new Ie(pe.INVALID_ARGUMENT,"Invalid value "+Us(D)+" provided to function Query.where() for its "+$p(2)+" argument. Acceptable values: "+I.join(", "))}(0,["<","<=","==",">=",">","array-contains","in","array-contains-any"],0,n);var o=vp("Query.where",e),a=Xe.G(n);if(o.Y()){if(a===Xe.ARRAY_CONTAINS||a===Xe.ARRAY_CONTAINS_ANY)throw new Ie(pe.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+a.toString()+"' queries on FieldPath.documentId().");if(a===Xe.IN){this.mm(r,a);for(var c=[],f=0,v=r;f<v.length;f++){var y=v[f];c.push(this.wm(y))}i={arrayValue:{values:c}}}else i=this.wm(r)}else a!==Xe.IN&&a!==Xe.ARRAY_CONTAINS_ANY||this.mm(r,a),i=this.firestore.zT.Da("Query.where",r,a===Xe.IN);var b=Qi.create(o,a,i);return this.Em(b),new t(this.Tm.Ce(b),this.firestore,this.om)},t.prototype.orderBy=function(e,n){var r;if(Io("Query.orderBy",arguments,1,2),_h("Query.orderBy","non-empty string",2,n),n===void 0||n==="asc")r=Yn.ASCENDING;else{if(n!=="desc")throw new Ie(pe.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r=Yn.DESCENDING}if(this.Tm.startAt!==null)throw new Ie(pe.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(this.Tm.endAt!==null)throw new Ie(pe.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var i=vp("Query.orderBy",e),o=new Bh(i,r);return this.Im(o),new t(this.Tm.ke(o),this.firestore,this.om)},t.prototype.limit=function(e){return wn("Query.limit",arguments,1),$n("Query.limit","number",1,e),aO("Query.limit",1,e),new t(this.Tm.Ne(e),this.firestore,this.om)},t.prototype.limitToLast=function(e){return wn("Query.limitToLast",arguments,1),$n("Query.limitToLast","number",1,e),aO("Query.limitToLast",1,e),new t(this.Tm.Fe(e),this.firestore,this.om)},t.prototype.startAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];ga("Query.startAt",arguments,1);var i=this.Rm("Query.startAt",e,n,!0);return new t(this.Tm.$e(i),this.firestore,this.om)},t.prototype.startAfter=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];ga("Query.startAfter",arguments,1);var i=this.Rm("Query.startAfter",e,n,!1);return new t(this.Tm.$e(i),this.firestore,this.om)},t.prototype.endBefore=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];ga("Query.endBefore",arguments,1);var i=this.Rm("Query.endBefore",e,n,!0);return new t(this.Tm.Me(i),this.firestore,this.om)},t.prototype.endAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];ga("Query.endAt",arguments,1);var i=this.Rm("Query.endAt",e,n,!1);return new t(this.Tm.Me(i),this.firestore,this.om)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw nc("isEqual","Query",1,e);return this.firestore===e.firestore&&this.Tm.isEqual(e.Tm)},t.prototype.withConverter=function(e){return new t(this.Tm,this.firestore,e)},t.prototype.Rm=function(e,n,r,i){if(sO(e,1,n),n instanceof ql){if(r.length>0)throw new Ie(pe.INVALID_ARGUMENT,"Too many arguments provided to "+e+"().");var o=n;if(!o.exists)throw new Ie(pe.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+e+"().");return this.Am(o.lm,i)}var a=[n].concat(r);return this.Pm(e,a,i)},t.prototype.Am=function(e,n){for(var r=[],i=0,o=this.Tm.orderBy;i<o.length;i++){var a=o[i];if(a.field.Y())r.push(Sg(this.firestore.OT,e.key));else{var c=e.field(a.field);if(tx(c))throw new Ie(pe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(c===null){var f=a.field.K();throw new Ie(pe.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+f+"' (used as the orderBy) does not exist.")}r.push(c)}}return new dp(r,n)},t.prototype.Pm=function(e,n,r){var i=this.Tm.Ve;if(n.length>i.length)throw new Ie(pe.INVALID_ARGUMENT,"Too many arguments provided to "+e+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var o=[],a=0;a<n.length;a++){var c=n[a];if(i[a].field.Y()){if(typeof c!="string")throw new Ie(pe.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+e+"(), but got a "+typeof c);if(!this.Tm.He()&&c.indexOf("/")!==-1)throw new Ie(pe.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+e+"() must be a plain document ID, but '"+c+"' contains a slash.");var f=this.Tm.path.child(gn.G(c));if(!ct.st(f))throw new Ie(pe.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+e+"() must result in a valid document path, but '"+f+"' is not because it contains an odd number of segments.");var v=new ct(f);o.push(Sg(this.firestore.OT,v))}else{var y=this.firestore.zT.Da(e,c);o.push(y)}}return new dp(o,r)},t.prototype.onSnapshot=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Io("Query.onSnapshot",arguments,1,4);var r,i={},o=0;return typeof e[o]!="object"||gp(e[o])||(tc("Query.onSnapshot",i=e[o],["includeMetadataChanges"]),ua("Query.onSnapshot","boolean","includeMetadataChanges",i.includeMetadataChanges),o++),gp(e[o])?r=e[o]:($n("Query.onSnapshot","function",o,e[o]),_h("Query.onSnapshot","function",o+1,e[o+1]),_h("Query.onSnapshot","function",o+2,e[o+2]),r={next:e[o],error:e[o+1],complete:e[o+2]}),this.Vm(this.Tm),this.cm(i,r)},t.prototype.cm=function(e,n){var r=this,i=function(f){console.error("Uncaught Error in onSnapshot:",f)};n.error&&(i=n.error.bind(n));var o=new dx({next:function(f){n.next&&n.next(new U1(r.firestore,r.Tm,f,r.om))},error:i}),a=this.firestore.UT(),c=a.listen(this.Tm,o,e);return function(){o.DT(),a.fc(c)}},t.prototype.Vm=function(e){if(e.Ke()&&e.Ve.length===0)throw new Ie(pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")},t.prototype.get=function(e){var n=this;return Io("Query.get",arguments,0,1),G3("Query.get",e),this.Vm(this.Tm),new Promise(function(r,i){e&&e.source==="cache"?n.firestore.UT().vT(n.Tm).then(function(o){r(new U1(n.firestore,n.Tm,o,n.om))},i):n._m(r,i,e)})},t.prototype._m=function(e,n,r){var i=this.cm({includeMetadataChanges:!0,Kl:!0},{next:function(o){i(),o.metadata.fromCache&&r&&r.source==="server"?n(new Ie(pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):e(o)},error:n})},t.prototype.wm=function(e){if(typeof e=="string"){if(e==="")throw new Ie(pe.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this.Tm.He()&&e.indexOf("/")!==-1)throw new Ie(pe.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+e+"' contains a '/' character.");var n=this.Tm.path.child(gn.G(e));if(!ct.st(n))throw new Ie(pe.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+n+"' is not because it has an odd number of segments ("+n.length+").");return Sg(this.firestore.OT,new ct(n))}if(e instanceof ka){var r=e;return Sg(this.firestore.OT,r.em)}throw new Ie(pe.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Us(e)+".")},t.prototype.mm=function(e,n){if(!Array.isArray(e)||e.length===0)throw new Ie(pe.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+n.toString()+"' filters.");if(e.length>10)throw new Ie(pe.INVALID_ARGUMENT,"Invalid Query. '"+n.toString()+"' filters support a maximum of 10 elements in the value array.");if(e.indexOf(null)>=0)throw new Ie(pe.INVALID_ARGUMENT,"Invalid Query. '"+n.toString()+"' filters cannot contain 'null' in the value array.");if(e.filter(function(r){return Number.isNaN(r)}).length>0)throw new Ie(pe.INVALID_ARGUMENT,"Invalid Query. '"+n.toString()+"' filters cannot contain 'NaN' in the value array.")},t.prototype.Em=function(e){if(e instanceof Qi){var n=[Xe.ARRAY_CONTAINS,Xe.ARRAY_CONTAINS_ANY],r=[Xe.IN,Xe.ARRAY_CONTAINS_ANY],i=n.indexOf(e.op)>=0,o=r.indexOf(e.op)>=0;if(e.Ge()){var a=this.Tm.Se();if(a!==null&&!a.isEqual(e.field))throw new Ie(pe.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+a.toString()+"' and '"+e.field.toString()+"'");var c=this.Tm.De();c!==null&&this.gm(e.field,c)}else if(o||i){var f=null;if(o&&(f=this.Tm.ze(r)),f===null&&i&&(f=this.Tm.ze(n)),f!=null)throw f===e.op?new Ie(pe.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new Ie(pe.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+f.toString()+"' filters.")}}},t.prototype.Im=function(e){if(this.Tm.De()===null){var n=this.Tm.Se();n!==null&&this.gm(n,e.field)}},t.prototype.gm=function(e,n){if(!n.isEqual(e))throw new Ie(pe.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+n.toString()+"' instead.")},t}(),U1=function(){function t(e,n,r,i){this.im=e,this.pm=n,this.ym=r,this.om=i,this.bm=null,this.vm=null,this.metadata=new W3(r.hasPendingWrites,r.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var e=[];return this.forEach(function(n){return e.push(n)}),e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this.ym.docs.U()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.ym.docs.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(e,n){var r=this;Io("QuerySnapshot.forEach",arguments,1,2),$n("QuerySnapshot.forEach","function",1,e),this.ym.docs.forEach(function(i){e.call(n,r.Sm(i))})},Object.defineProperty(t.prototype,"query",{get:function(){return new C_(this.pm,this.im,this.om)},enumerable:!0,configurable:!0}),t.prototype.docChanges=function(e){e&&(tc("QuerySnapshot.docChanges",e,["includeMetadataChanges"]),ua("QuerySnapshot.docChanges","boolean","includeMetadataChanges",e.includeMetadataChanges));var n=!(!e||!e.includeMetadataChanges);if(n&&this.ym.ds)throw new Ie(pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.bm&&this.vm===n||(this.bm=function(r,i,o,a){if(o.cs.U()){var c=0;return o.docChanges.map(function(v){var y=new Cd(r,v.doc.key,v.doc,o.fromCache,o._s.has(v.doc.key),a);return v.doc,{type:"added",doc:y,oldIndex:-1,newIndex:c++}})}var f=o.cs;return o.docChanges.filter(function(v){return i||v.type!==3}).map(function(v){var y=new Cd(r,v.doc.key,v.doc,o.fromCache,o._s.has(v.doc.key),a),b=-1,E=-1;return v.type!==0&&(b=f.indexOf(v.doc.key),f=f.delete(v.doc.key)),v.type!==1&&(E=(f=f.add(v.doc)).indexOf(v.doc.key)),{type:mX(v.type),doc:y,oldIndex:b,newIndex:E}})}(this.im,n,this.ym,this.om),this.vm=n),this.bm},t.prototype.isEqual=function(e){if(!(e instanceof t))throw nc("isEqual","QuerySnapshot",1,e);return this.im===e.im&&this.pm.isEqual(e.pm)&&this.ym.isEqual(e.ym)&&this.om===e.om},t.prototype.Sm=function(e){return new Cd(this.im,e.key,e,this.metadata.fromCache,this.ym._s.has(e.key),this.om)},t}(),fy=function(t){function e(n,r,i){var o=this;if((o=t.call(this,Vl.ve(n),r,i)||this).Dm=n,n.length%2!=1)throw new Ie(pe.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+n.K()+" has "+n.length);return o}return St(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.Tm.path.B()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var n=this.Tm.path.L();return n.U()?null:new ka(new ct(n),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.Tm.path.K()},enumerable:!0,configurable:!0}),e.prototype.doc=function(n){if(Io("CollectionReference.doc",arguments,0,1),arguments.length===0&&(n=c3.mi()),$n("CollectionReference.doc","non-empty string",1,n),n==="")throw new Ie(pe.INVALID_ARGUMENT,"Document path must be a non-empty string");var r=gn.G(n);return ka.sm(this.Tm.path.child(r),this.firestore,this.om)},e.prototype.add=function(n){wn("CollectionReference.add",arguments,1),$n("CollectionReference.add","object",1,this.om?this.om.toFirestore(n):n);var r=this.doc();return r.set(n).then(function(){return r})},e.prototype.withConverter=function(n){return new e(this.Dm,this.firestore,n)},e}(C_);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vx(t,e){if(e===void 0)return{merge:!1};if(tc(t,e,["merge","mergeFields"]),ua(t,"boolean","merge",e.merge),function(n,r,i,o,a){o!==void 0&&function(c,f,v,y,b){if(!(y instanceof Array))throw new Ie(pe.INVALID_ARGUMENT,"Function "+c+"() requires its "+f+" option to be an array, but it was: "+Us(y));for(var E=0;E<y.length;++E)if(!b(y[E]))throw new Ie(pe.INVALID_ARGUMENT,"Function "+c+"() requires all "+f+" elements to be "+v+", but the value at index "+E+" was: "+Us(y[E]))}(n,r,i,o,a)}(t,"mergeFields","a string or a FieldPath",e.mergeFields,function(n){return typeof n=="string"||n instanceof cs}),e.mergeFields!==void 0&&e.merge!==void 0)throw new Ie(pe.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function CO(t,e){return e===void 0?{}:(tc(t,e,["serverTimestamps"]),g3(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function G3(t,e){_h(t,"object",1,e),e&&(tc(t,e,["source"]),g3(t,0,"source",e.source,["default","server","cache"]))}function la(t,e,n){if(e instanceof ka){if(e.firestore!==n)throw new Ie(pe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw nc(t,"DocumentReference",1,e)}function mX(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return We("Unknown change type: "+t)}}function gx(t,e,n){var r;return t?(r=t.toFirestore(e),n="toFirestore() in "+n):r=e,[r,n]}var yX=fs(px,"Use firebase.firestore() instead."),_X=fs(z3,"Use firebase.firestore().runTransaction() instead."),wX=fs(q3,"Use firebase.firestore().batch() instead."),EX=fs(ka,"Use firebase.firestore().doc() instead."),bX=fs(ql),SX=fs(Cd),TX=fs(C_),IX=fs(U1),xX=fs(fy,"Use firebase.firestore().collection() instead."),CX={Firestore:yX,GeoPoint:x_,Timestamp:Fi,Blob:LY,Transaction:_X,WriteBatch:wX,DocumentReference:EX,DocumentSnapshot:bX,Query:TX,QueryDocumentSnapshot:SX,QuerySnapshot:IX,CollectionReference:xX,FieldPath:cs,FieldValue:FY,setLogLevel:px.setLogLevel,CACHE_SIZE_UNLIMITED:B3},NX=function(){function t(){}return t.prototype.Hu=function(e){},t.prototype.lc=function(){},t}(),NO=function(){function t(){var e=this;this.Cm=function(){return e.km()},this.Nm=function(){return e.Fm()},this.$m=[],this.Mm()}return t.prototype.Hu=function(e){this.$m.push(e)},t.prototype.lc=function(){window.removeEventListener("online",this.Cm),window.removeEventListener("offline",this.Nm)},t.prototype.Mm=function(){window.addEventListener("online",this.Cm),window.addEventListener("offline",this.Nm)},t.prototype.km=function(){Ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var e=0,n=this.$m;e<n.length;e++)(0,n[e])(0)},t.prototype.Fm=function(){Ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var e=0,n=this.$m;e<n.length;e++)(0,n[e])(1)},t.Uc=function(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0},t}(),AX=function(){function t(e){this.Lm=e.Lm,this.Om=e.Om}return t.prototype._u=function(e){this.xm=e},t.prototype.ou=function(e){this.Bm=e},t.prototype.onMessage=function(e){this.Um=e},t.prototype.close=function(){this.Om()},t.prototype.send=function(e){this.Lm(e)},t.prototype.qm=function(){this.xm()},t.prototype.Qm=function(e){this.Bm(e)},t.prototype.Wm=function(e){this.Um(e)},t}(),kX={BatchGetDocuments:"batchGet",Commit:"commit"},RX="gl-js/ fire/"+b_,OX=function(){function t(e){this.cn=e.cn;var n=e.ssl?"https":"http";this.jm=n+"://"+e.host,this.forceLongPolling=e.forceLongPolling}return t.prototype.Km=function(e,n){if(n)for(var r in n.h)n.h.hasOwnProperty(r)&&(e[r]=n.h[r]);e["X-Goog-Api-Client"]=RX},t.prototype.gu=function(e,n,r){var i=this,o=this.Gm(e);return new Promise(function(a,c){var f=new rY;f.listenOnce(nY.COMPLETE,function(){try{switch(f.getLastErrorCode()){case sb.NO_ERROR:var E=f.getResponseJson();Ke("Connection","XHR received:",JSON.stringify(E)),a(E);break;case sb.TIMEOUT:Ke("Connection",'RPC "'+e+'" timed out'),c(new Ie(pe.DEADLINE_EXCEEDED,"Request time out"));break;case sb.HTTP_ERROR:var I=f.getStatus();if(Ke("Connection",'RPC "'+e+'" failed with status:',I,"response text:",f.getResponseText()),I>0){var L=f.getResponseJson().error;if(L&&L.status&&L.message){var D=function(te){var z=te.toLowerCase().replace("_","-");return Object.values(pe).indexOf(z)>=0?z:pe.UNKNOWN}(L.status);c(new Ie(D,L.message))}else c(new Ie(pe.UNKNOWN,"Server responded with status "+f.getStatus()))}else Ke("Connection",'RPC "'+e+'" failed'),c(new Ie(pe.UNAVAILABLE,"Connection failed."));break;default:We('RPC "'+e+'" failed with unanticipated webchannel error '+f.getLastErrorCode()+": "+f.getLastError()+", giving up.")}}finally{Ke("Connection",'RPC "'+e+'" completed.')}});var v=Object.assign({},n);delete v.database;var y=JSON.stringify(v);Ke("Connection","XHR sending: ",o+" "+y);var b={"Content-Type":"text/plain"};i.Km(b,r),f.send(o,"POST",y,b,15)})},t.prototype.yu=function(e,n,r){return this.gu(e,n,r)},t.prototype.lu=function(e,n){var r=[this.jm,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=tY(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.cn.projectId+"/databases/"+this.cn.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.Km(o.initMessageHeaders,n),yI()||eF()||p$()||v$()||g$()||d$()||(o.httpHeadersOverwriteParam="$httpHeaders");var a=r.join("");Ke("Connection","Creating WebChannel: "+a+" "+o);var c=i.createWebChannel(a,o),f=!1,v=!1,y=new AX({Lm:function(E){v?Ke("Connection","Not sending because WebChannel is closed:",E):(f||(Ke("Connection","Opening WebChannel transport."),c.open(),f=!0),Ke("Connection","WebChannel sending:",E),c.send(E))},Om:function(){return c.close()}}),b=function(E,I){c.listen(E,function(L){try{I(L)}catch(D){setTimeout(function(){throw D},0)}})};return b(Eg.EventType.OPEN,function(){v||Ke("Connection","WebChannel transport opened.")}),b(Eg.EventType.CLOSE,function(){v||(v=!0,Ke("Connection","WebChannel transport closed"),y.Qm())}),b(Eg.EventType.ERROR,function(E){v||(v=!0,Ke("Connection","WebChannel transport errored:",E),y.Qm(new Ie(pe.UNAVAILABLE,"The operation could not be completed")))}),b(Eg.EventType.MESSAGE,function(E){var I;if(!v){var L=E.data[0];at(!!L,"Got a webchannel message without data.");var D=L,te=D.error||((I=D[0])===null||I===void 0?void 0:I.error);if(te){Ke("Connection","WebChannel received error:",te);var z=te.status,Y=function(ue){var oe=tr[ue];if(oe!==void 0)return n3(oe)}(z),K=te.message;Y===void 0&&(Y=pe.INTERNAL,K="Unknown error status: "+z+" with message "+te.message),v=!0,y.Qm(new Ie(Y,K)),c.close()}else Ke("Connection","WebChannel received:",L),y.Wm(L)}}),setTimeout(function(){y.qm()},0),y},t.prototype.Gm=function(e){var n=kX[e];return this.jm+"/v1/projects/"+this.cn.projectId+"/databases/"+this.cn.database+"/documents:"+n},t}();/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PX(t){(function(e,n){e.INTERNAL.registerComponent(new Fs("firestore",function(r){return function(i,o){return new px(i,o,new vX)}(r.getProvider("app").getImmediate(),r.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},CX)))})(t),t.registerVersion("@firebase/firestore","1.14.0")}Bl.fi(new(function(){function t(){this.dn=!0,this.ia=typeof atob<"u"}return Object.defineProperty(t.prototype,"document",{get:function(){return typeof document<"u"?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"window",{get:function(){return typeof window<"u"?window:null},enumerable:!0,configurable:!0}),t.prototype.VT=function(e){return Promise.resolve(new OX(e))},t.prototype.mT=function(){return NO.Uc()?new NO:new NX},t.prototype.fT=function(e){return new a3(e,{dn:!0})},t.prototype.Ti=function(e){return JSON.stringify(e)},t.prototype.atob=function(e){return atob(e)},t.prototype.btoa=function(e){return btoa(e)},t}())),PX(ze);/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var AO={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Eh=function(t){St(e,t);function e(n,r,i){var o=t.call(this,r)||this;return Object.setPrototypeOf(o,e.prototype),o.code=n,o.details=i,o}return e}(Error);function DX(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function LX(t,e,n){var r=DX(t),i=r,o=void 0;try{var a=e&&e.error;if(a){var c=a.status;if(typeof c=="string"){if(!AO[c])return new Eh("internal","internal");r=AO[c],i=c}var f=a.message;typeof f=="string"&&(i=f),o=a.details,o!==void 0&&(o=n.decode(o))}}catch{}return r==="ok"?null:new Eh(r,i,o)}var MX=function(){function t(e,n){var r=this;this.auth=null,this.messaging=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(function(i){return r.auth=i},function(){}),this.messaging||n.get().then(function(i){return r.messaging=i},function(){})}return t.prototype.getAuthToken=function(){return Ee(this,void 0,void 0,function(){var e;return we(this,function(n){switch(n.label){case 0:if(!this.auth)return[2,void 0];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return e=n.sent(),e?[2,e.accessToken]:[2,void 0];case 3:return n.sent(),[2,void 0];case 4:return[2]}})})},t.prototype.getInstanceIdToken=function(){return Ee(this,void 0,void 0,function(){return we(this,function(e){if(!this.messaging||!("Notification"in self)||Notification.permission!=="granted")return[2,void 0];try{return[2,this.messaging.getToken()]}catch{return[2,void 0]}return[2]})})},t.prototype.getContext=function(){return Ee(this,void 0,void 0,function(){var e,n;return we(this,function(r){switch(r.label){case 0:return[4,this.getAuthToken()];case 1:return e=r.sent(),[4,this.getInstanceIdToken()];case 2:return n=r.sent(),[2,{authToken:e,instanceIdToken:n}]}})})},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var FX="type.googleapis.com/google.protobuf.Int64Value",jX="type.googleapis.com/google.protobuf.UInt64Value";function kO(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var UX=function(){function t(){}return t.prototype.encode=function(e){var n=this;if(e==null)return null;if(e instanceof Number&&(e=e.valueOf()),typeof e=="number"&&isFinite(e)||e===!0||e===!1||Object.prototype.toString.call(e)==="[object String]")return e;if(Array.isArray(e))return e.map(function(r){return n.encode(r)});if(typeof e=="function"||typeof e=="object")return kO(e,function(r){return n.encode(r)});throw new Error("Data cannot be encoded in JSON: "+e)},t.prototype.decode=function(e){var n=this;if(e==null)return e;if(e["@type"])switch(e["@type"]){case FX:case jX:{var r=Number(e.value);if(isNaN(r))throw new Error("Data cannot be decoded from JSON: "+e);return r}default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(function(i){return n.decode(i)}):typeof e=="function"||typeof e=="object"?kO(e,function(i){return n.decode(i)}):e},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VX(t){return new Promise(function(e,n){setTimeout(function(){n(new Eh("deadline-exceeded","deadline-exceeded"))},t)})}var $3=function(){function t(e,n,r,i){var o=this;i===void 0&&(i="us-central1"),this.app_=e,this.region_=i,this.serializer=new UX,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return o.deleteService()}},this.contextProvider=new MX(n,r),this.cancelAllRequests=new Promise(function(a){o.deleteService=function(){return a()}})}return Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),t.prototype._url=function(e){var n=this.app_.options.projectId,r=this.region_;if(this.emulatorOrigin!==null){var i=this.emulatorOrigin;return i+"/"+n+"/"+r+"/"+e}return"https://"+r+"-"+n+".cloudfunctions.net/"+e},t.prototype.useFunctionsEmulator=function(e){this.emulatorOrigin=e},t.prototype.httpsCallable=function(e,n){var r=this;return function(i){return r.call(e,i,n||{})}},t.prototype.postJSON=function(e,n,r){return Ee(this,void 0,void 0,function(){var i,o;return we(this,function(a){switch(a.label){case 0:r.append("Content-Type","application/json"),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,fetch(e,{method:"POST",body:JSON.stringify(n),headers:r})];case 2:return i=a.sent(),[3,4];case 3:return a.sent(),[2,{status:0,json:null}];case 4:o=null,a.label=5;case 5:return a.trys.push([5,7,,8]),[4,i.json()];case 6:return o=a.sent(),[3,8];case 7:return a.sent(),[3,8];case 8:return[2,{status:i.status,json:o}]}})})},t.prototype.call=function(e,n,r){return Ee(this,void 0,void 0,function(){var i,o,a,c,f,v,y,b,E;return we(this,function(I){switch(I.label){case 0:return i=this._url(e),n=this.serializer.encode(n),o={data:n},a=new Headers,[4,this.contextProvider.getContext()];case 1:return c=I.sent(),c.authToken&&a.append("Authorization","Bearer "+c.authToken),c.instanceIdToken&&a.append("Firebase-Instance-ID-Token",c.instanceIdToken),f=r.timeout||7e4,[4,Promise.race([this.postJSON(i,o,a),VX(f),this.cancelAllRequests])];case 2:if(v=I.sent(),!v)throw new Eh("cancelled","Firebase Functions instance was deleted.");if(y=LX(v.status,v.json,this.serializer),y)throw y;if(!v.json)throw new Eh("internal","Response is not valid JSON object.");if(b=v.json.data,typeof b>"u"&&(b=v.json.result),typeof b>"u")throw new Eh("internal","Response is missing data field.");return E=this.serializer.decode(b),[2,{data:E}]}})})},t}();/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var BX="functions";function zX(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("messaging");return new $3(n,r,i,e)}function qX(t){var e={Functions:$3};t.INTERNAL.registerComponent(new Fs(BX,zX,"PUBLIC").setServiceProps(e).setMultipleInstances(!0))}var WX="@firebase/functions",GX="0.4.40";/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qX(ze);ze.registerVersion(WX,GX);function $X(t){return Array.prototype.slice.call(t)}function H3(t){return new Promise(function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function N_(t,e,n){var r,i=new Promise(function(o,a){r=t[e].apply(t,n),H3(r).then(o,a)});return i.request=r,i}function HX(t,e,n){var r=N_(t,e,n);return r.then(function(i){if(i)return new mp(i,r.request)})}function tf(t,e,n){n.forEach(function(r){Object.defineProperty(t.prototype,r,{get:function(){return this[e][r]},set:function(i){this[e][r]=i}})})}function mx(t,e,n,r){r.forEach(function(i){i in n.prototype&&(t.prototype[i]=function(){return N_(this[e],i,arguments)})})}function A_(t,e,n,r){r.forEach(function(i){i in n.prototype&&(t.prototype[i]=function(){return this[e][i].apply(this[e],arguments)})})}function K3(t,e,n,r){r.forEach(function(i){i in n.prototype&&(t.prototype[i]=function(){return HX(this[e],i,arguments)})})}function rc(t){this._index=t}tf(rc,"_index",["name","keyPath","multiEntry","unique"]);mx(rc,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]);K3(rc,"_index",IDBIndex,["openCursor","openKeyCursor"]);function mp(t,e){this._cursor=t,this._request=e}tf(mp,"_cursor",["direction","key","primaryKey","value"]);mx(mp,"_cursor",IDBCursor,["update","delete"]);["advance","continue","continuePrimaryKey"].forEach(function(t){t in IDBCursor.prototype&&(mp.prototype[t]=function(){var e=this,n=arguments;return Promise.resolve().then(function(){return e._cursor[t].apply(e._cursor,n),H3(e._request).then(function(r){if(r)return new mp(r,e._request)})})})});function Bs(t){this._store=t}Bs.prototype.createIndex=function(){return new rc(this._store.createIndex.apply(this._store,arguments))};Bs.prototype.index=function(){return new rc(this._store.index.apply(this._store,arguments))};tf(Bs,"_store",["name","keyPath","indexNames","autoIncrement"]);mx(Bs,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]);K3(Bs,"_store",IDBObjectStore,["openCursor","openKeyCursor"]);A_(Bs,"_store",IDBObjectStore,["deleteIndex"]);function Hp(t){this._tx=t,this.complete=new Promise(function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}})}Hp.prototype.objectStore=function(){return new Bs(this._tx.objectStore.apply(this._tx,arguments))};tf(Hp,"_tx",["objectStoreNames","mode"]);A_(Hp,"_tx",IDBTransaction,["abort"]);function k_(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new Hp(n)}k_.prototype.createObjectStore=function(){return new Bs(this._db.createObjectStore.apply(this._db,arguments))};tf(k_,"_db",["name","version","objectStoreNames"]);A_(k_,"_db",IDBDatabase,["deleteObjectStore","close"]);function R_(t){this._db=t}R_.prototype.transaction=function(){return new Hp(this._db.transaction.apply(this._db,arguments))};tf(R_,"_db",["name","version","objectStoreNames"]);A_(R_,"_db",IDBDatabase,["close"]);["openCursor","openKeyCursor"].forEach(function(t){[Bs,rc].forEach(function(e){t in e.prototype&&(e.prototype[t.replace("open","iterate")]=function(){var n=$X(arguments),r=n[n.length-1],i=this._store||this._index,o=i[t].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})})});[rc,Bs].forEach(function(t){t.prototype.getAll||(t.prototype.getAll=function(e,n){var r=this,i=[];return new Promise(function(o){r.iterateCursor(e,function(a){if(!a){o(i);return}if(i.push(a.value),n!==void 0&&i.length==n){o(i);return}a.continue()})})})});function yx(t,e,n){var r=N_(indexedDB,"open",[t,e]),i=r.request;return i&&(i.onupgradeneeded=function(o){n&&n(new k_(i.result,o.oldVersion,i.transaction))}),r.then(function(o){return new R_(o)})}function db(t){return N_(indexedDB,"deleteDatabase",[t])}var KX="@firebase/installations",Y3="0.4.7";/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var X3=1e4,Q3="w:"+Y3,J3="FIS_v2",YX="https://firebaseinstallations.googleapis.com/v1",XX=60*60*1e3,QX="installations",JX="Installations";/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xa,ZX=(Xa={},Xa["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',Xa["not-registered"]="Firebase Installation is not registered.",Xa["installation-not-found"]="Firebase Installation not found.",Xa["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',Xa["app-offline"]="Could not process request. Application offline.",Xa["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",Xa),Ra=new Op(QX,JX,ZX);function Z3(t){return t instanceof mI&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _x(t){var e=t.projectId;return YX+"/projects/"+e+"/installations"}function eU(t){return{token:t.token,requestStatus:2,expiresIn:eQ(t.expiresIn),creationTime:Date.now()}}function wx(t,e){return Ee(this,void 0,void 0,function(){var n,r;return we(this,function(i){switch(i.label){case 0:return[4,e.json()];case 1:return n=i.sent(),r=n.error,[2,Ra.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}})})}function tU(t){var e=t.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function nU(t,e){var n=e.refreshToken,r=tU(t);return r.append("Authorization",tQ(n)),r}function Ex(t){return Ee(this,void 0,void 0,function(){var e;return we(this,function(n){switch(n.label){case 0:return[4,t()];case 1:return e=n.sent(),e.status>=500&&e.status<600?[2,t()]:[2,e]}})})}function eQ(t){return Number(t.replace("s","000"))}function tQ(t){return J3+" "+t}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nQ(t,e){var n=e.fid;return Ee(this,void 0,void 0,function(){var r,i,o,a,c,f,v;return we(this,function(y){switch(y.label){case 0:return r=_x(t),i=tU(t),o={fid:n,authVersion:J3,appId:t.appId,sdkVersion:Q3},a={method:"POST",headers:i,body:JSON.stringify(o)},[4,Ex(function(){return fetch(r,a)})];case 1:return c=y.sent(),c.ok?[4,c.json()]:[3,3];case 2:return f=y.sent(),v={fid:f.fid||n,registrationStatus:2,refreshToken:f.refreshToken,authToken:eU(f.authToken)},[2,v];case 3:return[4,wx("Create Installation",c)];case 4:throw y.sent()}})})}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rU(t){return new Promise(function(e){setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rQ(t){var e=btoa(String.fromCharCode.apply(String,Pa(t)));return e.replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var iQ=/^[cdef][\w-]{21}$/,V1="";function oQ(){try{var t=new Uint8Array(17),e=self.crypto||self.msCrypto;e.getRandomValues(t),t[0]=112+t[0]%16;var n=sQ(t);return iQ.test(n)?n:V1}catch{return V1}}function sQ(t){var e=rQ(t);return e.substr(0,22)}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nf(t){return t.appName+"!"+t.appId}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qh=new Map;function iU(t,e){var n=nf(t);oU(n,e),lQ(n,e)}function aQ(t,e){sU();var n=nf(t),r=qh.get(n);r||(r=new Set,qh.set(n,r)),r.add(e)}function uQ(t,e){var n=nf(t),r=qh.get(n);r&&(r.delete(e),r.size===0&&qh.delete(n),aU())}function oU(t,e){var n,r,i=qh.get(t);if(i)try{for(var o=Kn(i),a=o.next();!a.done;a=o.next()){var c=a.value;c(e)}}catch(f){n={error:f}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}function lQ(t,e){var n=sU();n&&n.postMessage({key:t,fid:e}),aU()}var bl=null;function sU(){return!bl&&"BroadcastChannel"in self&&(bl=new BroadcastChannel("[Firebase] FID Change"),bl.onmessage=function(t){oU(t.data.key,t.data.fid)}),bl}function aU(){qh.size===0&&bl&&(bl.close(),bl=null)}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cQ="firebase-installations-database",hQ=1,Wl="firebase-installations-store",pb=null;function bx(){return pb||(pb=yx(cQ,hQ,function(t){switch(t.oldVersion){case 0:t.createObjectStore(Wl)}})),pb}function dy(t,e){return Ee(this,void 0,void 0,function(){var n,r,i,o,a;return we(this,function(c){switch(c.label){case 0:return n=nf(t),[4,bx()];case 1:return r=c.sent(),i=r.transaction(Wl,"readwrite"),o=i.objectStore(Wl),[4,o.get(n)];case 2:return a=c.sent(),[4,o.put(e,n)];case 3:return c.sent(),[4,i.complete];case 4:return c.sent(),(!a||a.fid!==e.fid)&&iU(t,e.fid),[2,e]}})})}function Sx(t){return Ee(this,void 0,void 0,function(){var e,n,r;return we(this,function(i){switch(i.label){case 0:return e=nf(t),[4,bx()];case 1:return n=i.sent(),r=n.transaction(Wl,"readwrite"),[4,r.objectStore(Wl).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}})})}function Kp(t,e){return Ee(this,void 0,void 0,function(){var n,r,i,o,a,c;return we(this,function(f){switch(f.label){case 0:return n=nf(t),[4,bx()];case 1:return r=f.sent(),i=r.transaction(Wl,"readwrite"),o=i.objectStore(Wl),[4,o.get(n)];case 2:return a=f.sent(),c=e(a),c!==void 0?[3,4]:[4,o.delete(n)];case 3:return f.sent(),[3,6];case 4:return[4,o.put(c,n)];case 5:f.sent(),f.label=6;case 6:return[4,i.complete];case 7:return f.sent(),c&&(!a||a.fid!==c.fid)&&iU(t,c.fid),[2,c]}})})}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(t){return Ee(this,void 0,void 0,function(){var e,n,r;return we(this,function(i){switch(i.label){case 0:return[4,Kp(t,function(o){var a=fQ(o),c=dQ(t,a);return e=c.registrationPromise,c.installationEntry})];case 1:return n=i.sent(),n.fid!==V1?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}})})}function fQ(t){var e=t||{fid:oQ(),registrationStatus:0};return uU(e)}function dQ(t,e){if(e.registrationStatus===0){if(!navigator.onLine){var n=Promise.reject(Ra.create("app-offline"));return{installationEntry:e,registrationPromise:n}}var r={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=pQ(t,r);return{installationEntry:r,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:vQ(t)}:{installationEntry:e}}function pQ(t,e){return Ee(this,void 0,void 0,function(){var n,r;return we(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,nQ(t,e)];case 1:return n=i.sent(),[2,dy(t,n)];case 2:return r=i.sent(),Z3(r)&&r.serverCode===409?[4,Sx(t)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,dy(t,{fid:e.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}})})}function vQ(t){return Ee(this,void 0,void 0,function(){var e,n,r,i;return we(this,function(o){switch(o.label){case 0:return[4,RO(t)];case 1:e=o.sent(),o.label=2;case 2:return e.registrationStatus!==1?[3,5]:[4,rU(100)];case 3:return o.sent(),[4,RO(t)];case 4:return e=o.sent(),[3,2];case 5:return e.registrationStatus!==0?[3,7]:[4,Tx(t)];case 6:return n=o.sent(),r=n.installationEntry,i=n.registrationPromise,i?[2,i]:[2,r];case 7:return[2,e]}})})}function RO(t){return Kp(t,function(e){if(!e)throw Ra.create("installation-not-found");return uU(e)})}function uU(t){return gQ(t)?{fid:t.fid,registrationStatus:0}:t}function gQ(t){return t.registrationStatus===1&&t.registrationTime+X3<Date.now()}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mQ(t,e){var n=t.appConfig,r=t.platformLoggerProvider;return Ee(this,void 0,void 0,function(){var i,o,a,c,f,v,y,b;return we(this,function(E){switch(E.label){case 0:return i=yQ(n,e),o=nU(n,e),a=r.getImmediate({optional:!0}),a&&o.append("x-firebase-client",a.getPlatformInfoString()),c={installation:{sdkVersion:Q3}},f={method:"POST",headers:o,body:JSON.stringify(c)},[4,Ex(function(){return fetch(i,f)})];case 1:return v=E.sent(),v.ok?[4,v.json()]:[3,3];case 2:return y=E.sent(),b=eU(y),[2,b];case 3:return[4,wx("Generate Auth Token",v)];case 4:throw E.sent()}})})}function yQ(t,e){var n=e.fid;return _x(t)+"/"+n+"/authTokens:generate"}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ix(t,e){return e===void 0&&(e=!1),Ee(this,void 0,void 0,function(){var n,r,i,o;return we(this,function(a){switch(a.label){case 0:return[4,Kp(t.appConfig,function(c){if(!lU(c))throw Ra.create("not-registered");var f=c.authToken;if(!e&&EQ(f))return c;if(f.requestStatus===1)return n=_Q(t,e),c;if(!navigator.onLine)throw Ra.create("app-offline");var v=SQ(c);return n=wQ(t,v),v})];case 1:return r=a.sent(),n?[4,n]:[3,3];case 2:return o=a.sent(),[3,4];case 3:o=r.authToken,a.label=4;case 4:return i=o,[2,i]}})})}function _Q(t,e){return Ee(this,void 0,void 0,function(){var n,r;return we(this,function(i){switch(i.label){case 0:return[4,OO(t.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return n.authToken.requestStatus!==1?[3,5]:[4,rU(100)];case 3:return i.sent(),[4,OO(t.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return r=n.authToken,r.requestStatus===0?[2,Ix(t,e)]:[2,r]}})})}function OO(t){return Kp(t,function(e){if(!lU(e))throw Ra.create("not-registered");var n=e.authToken;return TQ(n)?Tn(Tn({},e),{authToken:{requestStatus:0}}):e})}function wQ(t,e){return Ee(this,void 0,void 0,function(){var n,i,r,i;return we(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,mQ(t,e)];case 1:return n=o.sent(),i=Tn(Tn({},e),{authToken:n}),[4,dy(t.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return r=o.sent(),Z3(r)&&(r.serverCode===401||r.serverCode===404)?[4,Sx(t.appConfig)]:[3,5];case 4:return o.sent(),[3,7];case 5:return i=Tn(Tn({},e),{authToken:{requestStatus:0}}),[4,dy(t.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}})})}function lU(t){return t!==void 0&&t.registrationStatus===2}function EQ(t){return t.requestStatus===2&&!bQ(t)}function bQ(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+XX}function SQ(t){var e={requestStatus:1,requestTime:Date.now()};return Tn(Tn({},t),{authToken:e})}function TQ(t){return t.requestStatus===1&&t.requestTime+X3<Date.now()}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IQ(t){return Ee(this,void 0,void 0,function(){var e,n,r;return we(this,function(i){switch(i.label){case 0:return[4,Tx(t.appConfig)];case 1:return e=i.sent(),n=e.installationEntry,r=e.registrationPromise,r?r.catch(console.error):Ix(t).catch(console.error),[2,n.fid]}})})}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xQ(t,e){return e===void 0&&(e=!1),Ee(this,void 0,void 0,function(){var n;return we(this,function(r){switch(r.label){case 0:return[4,CQ(t.appConfig)];case 1:return r.sent(),[4,Ix(t,e)];case 2:return n=r.sent(),[2,n.token]}})})}function CQ(t){return Ee(this,void 0,void 0,function(){var e;return we(this,function(n){switch(n.label){case 0:return[4,Tx(t)];case 1:return e=n.sent().registrationPromise,e?[4,e]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}})})}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NQ(t,e){return Ee(this,void 0,void 0,function(){var n,r,i,o;return we(this,function(a){switch(a.label){case 0:return n=AQ(t,e),r=nU(t,e),i={method:"DELETE",headers:r},[4,Ex(function(){return fetch(n,i)})];case 1:return o=a.sent(),o.ok?[3,3]:[4,wx("Delete Installation",o)];case 2:throw a.sent();case 3:return[2]}})})}function AQ(t,e){var n=e.fid;return _x(t)+"/"+n}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kQ(t){return Ee(this,void 0,void 0,function(){var e,n;return we(this,function(r){switch(r.label){case 0:return e=t.appConfig,[4,Kp(e,function(i){if(!(i&&i.registrationStatus===0))return i})];case 1:if(n=r.sent(),!n)return[3,6];if(n.registrationStatus!==1)return[3,2];throw Ra.create("delete-pending-registration");case 2:if(n.registrationStatus!==2)return[3,6];if(navigator.onLine)return[3,3];throw Ra.create("app-offline");case 3:return[4,NQ(e,n)];case 4:return r.sent(),[4,Sx(e)];case 5:r.sent(),r.label=6;case 6:return[2]}})})}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RQ(t,e){var n=t.appConfig;return aQ(n,e),function(){uQ(n,e)}}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OQ(t){var e,n;if(!t||!t.options)throw vb("App Configuration");if(!t.name)throw vb("App Name");var r=["projectId","apiKey","appId"];try{for(var i=Kn(r),o=i.next();!o.done;o=i.next()){var a=o.value;if(!t.options[a])throw vb(a)}}catch(c){e={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function vb(t){return Ra.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PQ(t){var e="installations";t.INTERNAL.registerComponent(new Fs(e,function(n){var r=n.getProvider("app").getImmediate(),i=OQ(r),o=n.getProvider("platform-logger"),a={appConfig:i,platformLoggerProvider:o},c={app:r,getId:function(){return IQ(a)},getToken:function(f){return xQ(a,f)},delete:function(){return kQ(a)},onIdChange:function(f){return RQ(a,f)}};return c},"PUBLIC")),t.registerVersion(KX,Y3)}PQ(ze);/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fr,DQ=(fr={},fr["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',fr["only-available-in-window"]="This method is available in a Window context.",fr["only-available-in-sw"]="This method is available in a service worker context.",fr["permission-default"]="The notification permission was not granted and dismissed instead.",fr["permission-blocked"]="The notification permission was not granted and blocked instead.",fr["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",fr["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",fr["token-subscribe-failed"]="A problem occured while subscribing the user to FCM: {$errorInfo}",fr["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",fr["token-unsubscribe-failed"]="A problem occured while unsubscribing the user from FCM: {$errorInfo}",fr["token-update-failed"]="A problem occured while updating the user from FCM: {$errorInfo}",fr["token-update-no-token"]="FCM returned no token when updating the user to push.",fr["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",fr["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",fr["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",fr["invalid-vapid-key"]="The public VAPID key must be a string.",fr["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",fr),on=new Op("messaging","Messaging",DQ);/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LQ(t){var e,n;if(!t||!t.options)throw gb("App Configuration Object");if(!t.name)throw gb("App Name");var r=["projectId","apiKey","appId","messagingSenderId"],i=t.options;try{for(var o=Kn(r),a=o.next();!a.done;a=o.next()){var c=a.value;if(!i[c])throw gb(c)}}catch(f){e={error:f}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return{appName:t.name,projectId:i.projectId,apiKey:i.apiKey,appId:i.appId,senderId:i.messagingSenderId}}function gb(t){return on.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function na(t){var e=new Uint8Array(t),n=btoa(String.fromCharCode.apply(String,Pa(e)));return n.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function MQ(t){for(var e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length),o=0;o<r.length;++o)i[o]=r.charCodeAt(o);return i}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mb="fcm_token_details_db",FQ=5,PO="fcm_token_object_Store";function jQ(t){return Ee(this,void 0,void 0,function(){var e,n,r,i,o=this;return we(this,function(a){switch(a.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(e=a.sent(),n=e.map(function(c){return c.name}),!n.includes(mb))return[2,null];a.label=2;case 2:return r=null,[4,yx(mb,FQ,function(c){return Ee(o,void 0,void 0,function(){var f,v,y,y,y,b;return we(this,function(E){switch(E.label){case 0:return c.oldVersion<2?[2]:c.objectStoreNames.contains(PO)?(f=c.transaction.objectStore(PO),[4,f.index("fcmSenderId").get(t)]):[2];case 1:return v=E.sent(),[4,f.clear()];case 2:if(E.sent(),!v)return[2];if(c.oldVersion===2){if(y=v,!y.auth||!y.p256dh||!y.endpoint)return[2];r={token:y.fcmToken,createTime:(b=y.createTime)!==null&&b!==void 0?b:Date.now(),subscriptionOptions:{auth:y.auth,p256dh:y.p256dh,endpoint:y.endpoint,swScope:y.swScope,vapidKey:typeof y.vapidKey=="string"?y.vapidKey:na(y.vapidKey)}}}else c.oldVersion===3?(y=v,r={token:y.fcmToken,createTime:y.createTime,subscriptionOptions:{auth:na(y.auth),p256dh:na(y.p256dh),endpoint:y.endpoint,swScope:y.swScope,vapidKey:na(y.vapidKey)}}):c.oldVersion===4&&(y=v,r={token:y.fcmToken,createTime:y.createTime,subscriptionOptions:{auth:na(y.auth),p256dh:na(y.p256dh),endpoint:y.endpoint,swScope:y.swScope,vapidKey:na(y.vapidKey)}});return[2]}})})})];case 3:return i=a.sent(),i.close(),[4,db(mb)];case 4:return a.sent(),[4,db("fcm_vapid_details_db")];case 5:return a.sent(),[4,db("undefined")];case 6:return a.sent(),[2,UQ(r)?r:null]}})})}function UQ(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var VQ="firebase-messaging-database",BQ=1,Gl="firebase-messaging-store",yb=null;function xx(){return yb||(yb=yx(VQ,BQ,function(t){switch(t.oldVersion){case 0:t.createObjectStore(Gl)}})),yb}function py(t){return Ee(this,void 0,void 0,function(){var e,n,r,i;return we(this,function(o){switch(o.label){case 0:return e=Nx(t),[4,xx()];case 1:return n=o.sent(),[4,n.transaction(Gl).objectStore(Gl).get(e)];case 2:return r=o.sent(),r?[2,r]:[3,3];case 3:return[4,jQ(t.appConfig.senderId)];case 4:return i=o.sent(),i?[4,Cx(t,i)]:[3,6];case 5:return o.sent(),[2,i];case 6:return[2]}})})}function Cx(t,e){return Ee(this,void 0,void 0,function(){var n,r,i;return we(this,function(o){switch(o.label){case 0:return n=Nx(t),[4,xx()];case 1:return r=o.sent(),i=r.transaction(Gl,"readwrite"),[4,i.objectStore(Gl).put(e,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,e]}})})}function zQ(t){return Ee(this,void 0,void 0,function(){var e,n,r;return we(this,function(i){switch(i.label){case 0:return e=Nx(t),[4,xx()];case 1:return n=i.sent(),r=n.transaction(Gl,"readwrite"),[4,r.objectStore(Gl).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}})})}function Nx(t){var e=t.appConfig;return e.appId}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qQ="/firebase-messaging-sw.js",WQ="/firebase-cloud-messaging-push-scope",vy="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",GQ="https://fcmregistrations.googleapis.com/v1",cU="FCM_MSG",hU="google.c.a.c_id",$Q="google.c.a.c_l",HQ="google.c.a.ts",KQ="google.c.a.e";/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YQ(t,e){return Ee(this,void 0,void 0,function(){var n,r,i,o,a,c,f;return we(this,function(v){switch(v.label){case 0:return[4,kx(t)];case 1:n=v.sent(),r=dU(e),i={method:"POST",headers:n,body:JSON.stringify(r)},v.label=2;case 2:return v.trys.push([2,5,,6]),[4,fetch(Ax(t.appConfig),i)];case 3:return a=v.sent(),[4,a.json()];case 4:return o=v.sent(),[3,6];case 5:throw c=v.sent(),on.create("token-subscribe-failed",{errorInfo:c});case 6:if(o.error)throw f=o.error.message,on.create("token-subscribe-failed",{errorInfo:f});if(!o.token)throw on.create("token-subscribe-no-token");return[2,o.token]}})})}function XQ(t,e){return Ee(this,void 0,void 0,function(){var n,r,i,o,a,c,f;return we(this,function(v){switch(v.label){case 0:return[4,kx(t)];case 1:n=v.sent(),r=dU(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},v.label=2;case 2:return v.trys.push([2,5,,6]),[4,fetch(Ax(t.appConfig)+"/"+e.token,i)];case 3:return a=v.sent(),[4,a.json()];case 4:return o=v.sent(),[3,6];case 5:throw c=v.sent(),on.create("token-update-failed",{errorInfo:c});case 6:if(o.error)throw f=o.error.message,on.create("token-update-failed",{errorInfo:f});if(!o.token)throw on.create("token-update-no-token");return[2,o.token]}})})}function fU(t,e){return Ee(this,void 0,void 0,function(){var n,r,i,o,a,c;return we(this,function(f){switch(f.label){case 0:return[4,kx(t)];case 1:n=f.sent(),r={method:"DELETE",headers:n},f.label=2;case 2:return f.trys.push([2,5,,6]),[4,fetch(Ax(t.appConfig)+"/"+e,r)];case 3:return i=f.sent(),[4,i.json()];case 4:if(o=f.sent(),o.error)throw a=o.error.message,on.create("token-unsubscribe-failed",{errorInfo:a});return[3,6];case 5:throw c=f.sent(),on.create("token-unsubscribe-failed",{errorInfo:c});case 6:return[2]}})})}function Ax(t){var e=t.projectId;return GQ+"/projects/"+e+"/registrations"}function kx(t){var e=t.appConfig,n=t.installations;return Ee(this,void 0,void 0,function(){var r;return we(this,function(i){switch(i.label){case 0:return[4,n.getToken()];case 1:return r=i.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":"FIS "+r})]}})})}function dU(t){var e=t.p256dh,n=t.auth,r=t.endpoint,i=t.vapidKey,o={web:{endpoint:r,auth:n,p256dh:e}};return i!==vy&&(o.web.applicationPubKey=i),o}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var QQ=7*24*60*60*1e3;function B1(t,e,n){return Ee(this,void 0,void 0,function(){var r,i,o,a;return we(this,function(c){switch(c.label){case 0:if(Notification.permission!=="granted")throw on.create("permission-blocked");return[4,ZQ(e,n)];case 1:return r=c.sent(),[4,py(t)];case 2:return i=c.sent(),o={vapidKey:n,swScope:e.scope,endpoint:r.endpoint,auth:na(r.getKey("auth")),p256dh:na(r.getKey("p256dh"))},i?[3,3]:[2,DO(t,o)];case 3:if(eJ(i.subscriptionOptions,o))return[3,8];c.label=4;case 4:return c.trys.push([4,6,,7]),[4,fU(t,i.token)];case 5:return c.sent(),[3,7];case 6:return a=c.sent(),console.warn(a),[3,7];case 7:return[2,DO(t,o)];case 8:return Date.now()>=i.createTime+QQ?[2,JQ({token:i.token,createTime:Date.now(),subscriptionOptions:o},t,e)]:[2,i.token];case 9:return[2]}})})}function Nd(t,e){return Ee(this,void 0,void 0,function(){var n,r;return we(this,function(i){switch(i.label){case 0:return[4,py(t)];case 1:return n=i.sent(),n?[4,fU(t,n.token)]:[3,4];case 2:return i.sent(),[4,zQ(t)];case 3:i.sent(),i.label=4;case 4:return[4,e.pushManager.getSubscription()];case 5:return r=i.sent(),r?[2,r.unsubscribe()]:[2,!0]}})})}function JQ(t,e,n){return Ee(this,void 0,void 0,function(){var r,i,o;return we(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,5]),[4,XQ(e,t)];case 1:return r=a.sent(),i=Tn({token:r,createTime:Date.now()},t),[4,Cx(e,i)];case 2:return a.sent(),[2,r];case 3:return o=a.sent(),[4,Nd(e,n)];case 4:throw a.sent(),o;case 5:return[2]}})})}function DO(t,e){return Ee(this,void 0,void 0,function(){var n,r;return we(this,function(i){switch(i.label){case 0:return[4,YQ(t,e)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:e},[4,Cx(t,r)];case 2:return i.sent(),[2,r.token]}})})}function ZQ(t,e){return Ee(this,void 0,void 0,function(){var n;return we(this,function(r){switch(r.label){case 0:return[4,t.pushManager.getSubscription()];case 1:return n=r.sent(),n?[2,n]:[2,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:MQ(e)})]}})})}function eJ(t,e){var n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,i=e.auth===t.auth,o=e.p256dh===t.p256dh;return n&&r&&i&&o}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $l;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})($l||($l={}));/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pU(t){return typeof t=="object"&&!!t&&hU in t}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tJ=function(){function t(e){var n=this;this.firebaseDependencies=e,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",function(r){return n.messageEventListener(r)})}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!0,configurable:!0}),t.prototype.getToken=function(){return Ee(this,void 0,void 0,function(){var e;return we(this,function(n){switch(n.label){case 0:return this.vapidKey||(this.vapidKey=vy),[4,this.getServiceWorkerRegistration()];case 1:return e=n.sent(),Notification.permission!=="default"?[3,3]:[4,Notification.requestPermission()];case 2:n.sent(),n.label=3;case 3:if(Notification.permission!=="granted")throw on.create("permission-blocked");return[2,B1(this.firebaseDependencies,e,this.vapidKey)]}})})},t.prototype.deleteToken=function(){return Ee(this,void 0,void 0,function(){var e;return we(this,function(n){switch(n.label){case 0:return[4,this.getServiceWorkerRegistration()];case 1:return e=n.sent(),[2,Nd(this.firebaseDependencies,e)]}})})},t.prototype.requestPermission=function(){return Ee(this,void 0,void 0,function(){var e;return we(this,function(n){switch(n.label){case 0:return Notification.permission==="granted"?[2]:[4,Notification.requestPermission()];case 1:if(e=n.sent(),e==="granted")return[2];throw e==="denied"?on.create("permission-blocked"):on.create("permission-default")}})})},t.prototype.usePublicVapidKey=function(e){if(this.vapidKey!==null)throw on.create("use-vapid-key-after-get-token");if(typeof e!="string"||e.length===0)throw on.create("invalid-vapid-key");this.vapidKey=e},t.prototype.useServiceWorker=function(e){if(!(e instanceof ServiceWorkerRegistration))throw on.create("invalid-sw-registration");if(this.swRegistration)throw on.create("use-sw-after-get-token");this.swRegistration=e},t.prototype.onMessage=function(e){var n=this;return this.onMessageCallback=typeof e=="function"?e:e.next,function(){n.onMessageCallback=null}},t.prototype.setBackgroundMessageHandler=function(){throw on.create("only-available-in-sw")},t.prototype.onTokenRefresh=function(){return function(){}},t.prototype.getServiceWorkerRegistration=function(){return Ee(this,void 0,void 0,function(){var e,n;return we(this,function(r){switch(r.label){case 0:if(this.swRegistration)return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),e=this,[4,navigator.serviceWorker.register(qQ,{scope:WQ})];case 2:return e.swRegistration=r.sent(),this.swRegistration.update().catch(function(){}),[3,4];case 3:throw n=r.sent(),on.create("failed-service-worker-registration",{browserErrorMessage:n.message});case 4:return[2,this.swRegistration]}})})},t.prototype.messageEventListener=function(e){var n;return Ee(this,void 0,void 0,function(){var r,i,o,a;return we(this,function(c){switch(c.label){case 0:return!((n=e.data)===null||n===void 0)&&n.firebaseMessaging?(r=e.data.firebaseMessaging,i=r.type,o=r.payload,this.onMessageCallback&&i===$l.PUSH_RECEIVED&&this.onMessageCallback(o),a=o.data,pU(a)&&a[KQ]==="1"?[4,this.logEvent(i,a)]:[3,2]):[2];case 1:c.sent(),c.label=2;case 2:return[2]}})})},t.prototype.logEvent=function(e,n){return Ee(this,void 0,void 0,function(){var r,i;return we(this,function(o){switch(o.label){case 0:return r=nJ(e),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return i=o.sent(),i.logEvent(r,{message_id:n[hU],message_name:n[$Q],message_time:n[HQ],message_device_time:Math.floor(Date.now()/1e3)}),[2]}})})},t}();function nJ(t){switch(t){case $l.NOTIFICATION_CLICKED:return"notification_open";case $l.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rJ(t){return new Promise(function(e){setTimeout(e,t)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var iJ=function(){function t(e){var n=this;this.firebaseDependencies=e,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",function(r){r.waitUntil(n.onPush(r))}),self.addEventListener("pushsubscriptionchange",function(r){r.waitUntil(n.onSubChange(r))}),self.addEventListener("notificationclick",function(r){r.waitUntil(n.onNotificationClick(r))})}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!0,configurable:!0}),t.prototype.setBackgroundMessageHandler=function(e){if(!e||typeof e!="function")throw on.create("invalid-bg-handler");this.bgMessageHandler=e},t.prototype.getToken=function(){var e,n;return Ee(this,void 0,void 0,function(){var r;return we(this,function(i){switch(i.label){case 0:return this.vapidKey?[3,2]:[4,py(this.firebaseDependencies)];case 1:r=i.sent(),this.vapidKey=(n=(e=r==null?void 0:r.subscriptionOptions)===null||e===void 0?void 0:e.vapidKey)!==null&&n!==void 0?n:vy,i.label=2;case 2:return[2,B1(this.firebaseDependencies,self.registration,this.vapidKey)]}})})},t.prototype.deleteToken=function(){return Nd(this.firebaseDependencies,self.registration)},t.prototype.requestPermission=function(){throw on.create("only-available-in-window")},t.prototype.usePublicVapidKey=function(e){if(this.vapidKey!==null)throw on.create("use-vapid-key-after-get-token");if(typeof e!="string"||e.length===0)throw on.create("invalid-vapid-key");this.vapidKey=e},t.prototype.useServiceWorker=function(){throw on.create("only-available-in-window")},t.prototype.onMessage=function(){throw on.create("only-available-in-window")},t.prototype.onTokenRefresh=function(){throw on.create("only-available-in-window")},t.prototype.onPush=function(e){return Ee(this,void 0,void 0,function(){var n,r,i;return we(this,function(o){switch(o.label){case 0:return n=oJ(e),n?[4,vU()]:[2];case 1:return r=o.sent(),uJ(r)?[2,lJ(r,n)]:(i=sJ(n),i?[4,cJ(i)]:[3,3]);case 2:return o.sent(),[3,5];case 3:return this.bgMessageHandler?[4,this.bgMessageHandler(n)]:[3,5];case 4:o.sent(),o.label=5;case 5:return[2]}})})},t.prototype.onSubChange=function(e){var n,r;return Ee(this,void 0,void 0,function(){var i,o;return we(this,function(a){switch(a.label){case 0:return i=e.newSubscription,i?[3,2]:[4,Nd(this.firebaseDependencies,self.registration)];case 1:return a.sent(),[2];case 2:return[4,py(this.firebaseDependencies)];case 3:return o=a.sent(),[4,Nd(this.firebaseDependencies,self.registration)];case 4:return a.sent(),[4,B1(this.firebaseDependencies,self.registration,(r=(n=o==null?void 0:o.subscriptionOptions)===null||n===void 0?void 0:n.vapidKey)!==null&&r!==void 0?r:vy)];case 5:return a.sent(),[2]}})})},t.prototype.onNotificationClick=function(e){var n,r;return Ee(this,void 0,void 0,function(){var i,o,a,c;return we(this,function(f){switch(f.label){case 0:if(i=(r=(n=e.notification)===null||n===void 0?void 0:n.data)===null||r===void 0?void 0:r[cU],i){if(e.action)return[2]}else return[2];return e.stopImmediatePropagation(),e.notification.close(),o=hJ(i),o?[4,aJ(o)]:[2];case 1:return a=f.sent(),a?[3,4]:[4,self.clients.openWindow(o)];case 2:return a=f.sent(),[4,rJ(3e3)];case 3:return f.sent(),[3,6];case 4:return[4,a.focus()];case 5:a=f.sent(),f.label=6;case 6:return a?(c=gU($l.NOTIFICATION_CLICKED,i),[2,a.postMessage(c)]):[2]}})})},t}();function oJ(t){var e=t.data;if(!e)return null;try{return e.json()}catch{return null}}function sJ(t){var e;if(!(!t||typeof t.notification!="object")){var n=Tn({},t.notification);return n.data=Tn(Tn({},t.notification.data),(e={},e[cU]=t,e)),n}}function aJ(t){return Ee(this,void 0,void 0,function(){var e,n,r,i,o,a,c,f;return we(this,function(v){switch(v.label){case 0:return e=new URL(t,self.location.href).href,[4,vU()];case 1:n=v.sent();try{for(r=Kn(n),i=r.next();!i.done;i=r.next())if(o=i.value,a=new URL(o.url,self.location.href).href,a===e)return[2,o]}catch(y){c={error:y}}finally{try{i&&!i.done&&(f=r.return)&&f.call(r)}finally{if(c)throw c.error}}return[2,null]}})})}function uJ(t){return t.some(function(e){return e.visibilityState==="visible"&&!e.url.startsWith("chrome-extension://")})}function lJ(t,e){var n,r,i=gU($l.PUSH_RECEIVED,e);try{for(var o=Kn(t),a=o.next();!a.done;a=o.next()){var c=a.value;c.postMessage(i)}}catch(f){n={error:f}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}function vU(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function gU(t,e){return{firebaseMessaging:{type:t,payload:e}}}function cJ(t){var e,n=(e=t.title)!==null&&e!==void 0?e:"",r=t.actions,i=Notification.maxActions;return r&&i&&r.length>i&&console.warn("This browser only supports "+i+" actions. The remaining actions will not be displayed."),self.registration.showNotification(n,t)}function hJ(t){var e,n,r,i=(n=(e=t.fcmOptions)===null||e===void 0?void 0:e.link)!==null&&n!==void 0?n:(r=t.notification)===null||r===void 0?void 0:r.click_action;return i||(pU(t.data)?self.location.origin:null)}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fJ="messaging";function dJ(t){var e=t.getProvider("app").getImmediate(),n=LQ(e),r=t.getProvider("installations").getImmediate(),i=t.getProvider("analytics-internal"),o={app:e,appConfig:n,installations:r,analyticsProvider:i};if(!mU())throw on.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new iJ(o):new tJ(o)}var pJ={isSupported:mU};ze.INTERNAL.registerComponent(new Fs(fJ,dJ,"PUBLIC").setServiceProps(pJ));function mU(){return self&&"ServiceWorkerGlobalScope"in self?gJ():vJ()}function vJ(){return"indexedDB"in window&&indexedDB!==null&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function gJ(){return"indexedDB"in self&&indexedDB!==null&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yU="firebasestorage.googleapis.com",_U="storageBucket",mJ=2*60*1e3,yJ=10*60*1e3,_J=-9007199254740991;/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _r=function(){function t(e,n){this.code_=LO(e),this.message_="Firebase Storage: "+n,this.serverResponse_=null,this.name_="FirebaseError"}return t.prototype.codeProp=function(){return this.code},t.prototype.codeEquals=function(e){return LO(e)===this.codeProp()},t.prototype.serverResponseProp=function(){return this.serverResponse_},t.prototype.setServerResponseProp=function(e){this.serverResponse_=e},Object.defineProperty(t.prototype,"name",{get:function(){return this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"code",{get:function(){return this.code_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"message",{get:function(){return this.message_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!0,configurable:!0}),t}(),Jn={UNKNOWN:"unknown",OBJECT_NOT_FOUND:"object-not-found",BUCKET_NOT_FOUND:"bucket-not-found",PROJECT_NOT_FOUND:"project-not-found",QUOTA_EXCEEDED:"quota-exceeded",UNAUTHENTICATED:"unauthenticated",UNAUTHORIZED:"unauthorized",RETRY_LIMIT_EXCEEDED:"retry-limit-exceeded",INVALID_CHECKSUM:"invalid-checksum",CANCELED:"canceled",INVALID_EVENT_NAME:"invalid-event-name",INVALID_URL:"invalid-url",INVALID_DEFAULT_BUCKET:"invalid-default-bucket",NO_DEFAULT_BUCKET:"no-default-bucket",CANNOT_SLICE_BLOB:"cannot-slice-blob",SERVER_FILE_WRONG_SIZE:"server-file-wrong-size",NO_DOWNLOAD_URL:"no-download-url",INVALID_ARGUMENT:"invalid-argument",INVALID_ARGUMENT_COUNT:"invalid-argument-count",APP_DELETED:"app-deleted",INVALID_ROOT_OPERATION:"invalid-root-operation",INVALID_FORMAT:"invalid-format",INTERNAL_ERROR:"internal-error"};function LO(t){return"storage/"+t}function Rx(){var t="An unknown error occurred, please check the error payload for server response.";return new _r(Jn.UNKNOWN,t)}function wJ(t){return new _r(Jn.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function EJ(t){return new _r(Jn.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function bJ(){var t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new _r(Jn.UNAUTHENTICATED,t)}function SJ(t){return new _r(Jn.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function TJ(){return new _r(Jn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function wU(){return new _r(Jn.CANCELED,"User canceled the upload/download.")}function IJ(t){return new _r(Jn.INVALID_URL,"Invalid URL '"+t+"'.")}function xJ(t){return new _r(Jn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function CJ(){return new _r(Jn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+_U+"' property when initializing the app?")}function EU(){return new _r(Jn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function NJ(){return new _r(Jn.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function AJ(){return new _r(Jn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function MO(t,e,n){return new _r(Jn.INVALID_ARGUMENT,"Invalid argument in `"+e+"` at index "+t+": "+n)}function kJ(t,e,n,r){var i,o;return t===e?(i=t,o=t===1?"argument":"arguments"):(i="between "+t+" and "+e,o="arguments"),new _r(Jn.INVALID_ARGUMENT_COUNT,"Invalid argument count in `"+n+"`: Expected "+i+" "+o+", received "+r+".")}function z1(){return new _r(Jn.APP_DELETED,"The Firebase app was deleted.")}function RJ(t){return new _r(Jn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ad(t,e){return new _r(Jn.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Ng(t){throw new _r(Jn.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var or={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};function OJ(t){switch(t){case or.RAW:case or.BASE64:case or.BASE64URL:case or.DATA_URL:return;default:throw"Expected one of the event types: ["+or.RAW+", "+or.BASE64+", "+or.BASE64URL+", "+or.DATA_URL+"]."}}var _b=function(){function t(e,n){this.data=e,this.contentType=n||null}return t}();function bU(t,e){switch(t){case or.RAW:return new _b(SU(e));case or.BASE64:case or.BASE64URL:return new _b(TU(t,e));case or.DATA_URL:return new _b(DJ(e),LJ(e))}throw Rx()}function SU(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296){var i=n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320;if(!i)e.push(239,191,189);else{var o=r,a=t.charCodeAt(++n);r=65536|(o&1023)<<10|a&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function PJ(t){var e;try{e=decodeURIComponent(t)}catch{throw Ad(or.DATA_URL,"Malformed data URL.")}return SU(e)}function TU(t,e){switch(t){case or.BASE64:{var n=e.indexOf("-")!==-1,r=e.indexOf("_")!==-1;if(n||r){var i=n?"-":"_";throw Ad(t,"Invalid character '"+i+"' found: is it base64url encoded?")}break}case or.BASE64URL:{var o=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(o||a){var i=o?"+":"/";throw Ad(t,"Invalid character '"+i+"' found: is it base64 encoded?")}e=e.replace(/-/g,"+").replace(/_/g,"/");break}}var c;try{c=atob(e)}catch{throw Ad(t,"Invalid character found")}for(var f=new Uint8Array(c.length),v=0;v<c.length;v++)f[v]=c.charCodeAt(v);return f}var IU=function(){function t(e){this.base64=!1,this.contentType=null;var n=e.match(/^data:([^,]+)?,/);if(n===null)throw Ad(or.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;r!=null&&(this.base64=MJ(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}return t}();function DJ(t){var e=new IU(t);return e.base64?TU(or.BASE64,e.rest):PJ(e.rest)}function LJ(t){var e=new IU(t);return e.contentType}function MJ(t,e){var n=t.length>=e.length;return n?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var q1={STATE_CHANGED:"state_changed"},It={RUNNING:"running",PAUSING:"pausing",PAUSED:"paused",SUCCESS:"success",CANCELING:"canceling",CANCELED:"canceled",ERROR:"error"},pi={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function wb(t){switch(t){case It.RUNNING:case It.PAUSING:case It.CANCELING:return pi.RUNNING;case It.PAUSED:return pi.PAUSED;case It.SUCCESS:return pi.SUCCESS;case It.CANCELED:return pi.CANCELED;case It.ERROR:return pi.ERROR;default:return pi.ERROR}}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(t){return t!=null}function eu(t){return t!==void 0}function xU(t){return typeof t=="function"}function yp(t){return typeof t=="object"}function FJ(t){return yp(t)&&t!==null}function jJ(t){return yp(t)&&!Array.isArray(t)}function rf(t){return typeof t=="string"||t instanceof String}function UJ(t){return CU(t)&&Number.isInteger(t)}function CU(t){return typeof t=="number"||t instanceof Number}function FO(t){return O_()&&t instanceof Blob}function O_(){return typeof Blob<"u"}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Al;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Al||(Al={}));/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var VJ=function(){function t(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Al.NO_ERROR,this.sendPromise_=new Promise(function(n){e.xhr_.addEventListener("abort",function(){e.errorCode_=Al.ABORT,n(e)}),e.xhr_.addEventListener("error",function(){e.errorCode_=Al.NETWORK_ERROR,n(e)}),e.xhr_.addEventListener("load",function(){n(e)})})}return t.prototype.send=function(e,n,r,i){if(this.sent_)throw Ng("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),ts(i))for(var o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return ts(r)?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw Ng("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw Ng("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw Ng("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(e){return this.xhr_.getResponseHeader(e)},t.prototype.addUploadProgressListener=function(e){ts(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",e)},t.prototype.removeUploadProgressListener=function(e){ts(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",e)},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var BJ=function(){function t(){}return t.prototype.createXhrIo=function(){return new VJ},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zJ(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function qJ(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=zJ();if(n!==void 0){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}else{if(O_())return new Blob(t);throw Error("This browser doesn't seem to support creating Blobs")}}function WJ(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var W1=function(){function t(e,n){var r=0,i="";FO(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(FO(this.data_)){var r=this.data_,i=WJ(r,e,n);return i===null?null:new t(i)}else{var o=new Uint8Array(this.data_.buffer,e,n-e);return new t(o,!0)}},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(O_()){var r=e.map(function(f){return f instanceof t?f.data_:f});return new t(qJ.apply(null,r))}else{var i=e.map(function(f){return rf(f)?bU(or.RAW,f).data:f.data_}),o=0;i.forEach(function(f){o+=f.byteLength});var a=new Uint8Array(o),c=0;return i.forEach(function(f){for(var v=0;v<f.length;v++)a[c++]=f[v]}),new t(a,!0)}},t.prototype.uploadData=function(){return this.data_},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Eo=function(){function t(e,n){this.bucket=e,this.path_=n}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return this.path.length===0},enumerable:!0,configurable:!0}),t.prototype.fullServerUrl=function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)},t.prototype.bucketOnlyServerUrl=function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o"},t.makeFromBucketSpec=function(e){var n;try{n=t.makeFromUrl(e)}catch{return new t(e,"")}if(n.path==="")return n;throw xJ(e)},t.makeFromUrl=function(e){var n=null,r="([A-Za-z0-9.\\-_]+)";function i(he){he.path.charAt(he.path.length-1)==="/"&&(he.path_=he.path_.slice(0,-1))}var o="(/(.*))?$",a=new RegExp("^gs://"+r+o,"i"),c={bucket:1,path:3};function f(he){he.path_=decodeURIComponent(he.path)}for(var v="v[A-Za-z0-9_]+",y=yU.replace(/[.]/g,"\\."),b="(/([^?#]*).*)?$",E=new RegExp("^https?://"+y+"/"+v+"/b/"+r+"/o"+b,"i"),I={bucket:1,path:3},L="(?:storage.googleapis.com|storage.cloud.google.com)",D="([^?#]*)",te=new RegExp("^https?://"+L+"/"+r+"/"+D,"i"),z={bucket:1,path:2},Y=[{regex:a,indices:c,postModify:i},{regex:E,indices:I,postModify:f},{regex:te,indices:z,postModify:f}],K=0;K<Y.length;K++){var ue=Y[K],oe=ue.regex.exec(e);if(oe){var fe=oe[ue.indices.bucket],me=oe[ue.indices.path];me||(me=""),n=new t(fe,me),ue.postModify(n);break}}if(n==null)throw IJ(e);return n},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ox(t){var e;try{e=JSON.parse(t)}catch{return null}return jJ(e)?e:null}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GJ(t){if(t.length===0)return null;var e=t.lastIndexOf("/");if(e===-1)return"";var n=t.slice(0,e);return n}function $J(t,e){var n=e.split("/").filter(function(r){return r.length>0}).join("/");return t.length===0?n:t+"/"+n}function NU(t){var e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vu(t){return"https://"+yU+"/v0"+t}function AU(t){var e=encodeURIComponent,n="?";for(var r in t)if(t.hasOwnProperty(r)){var i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HJ(t,e){return e}var ai=function(){function t(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||HJ}return t}(),Ag=null;function KJ(t){return!rf(t)||t.length<2?t:NU(t)}function YJ(){if(Ag)return Ag;var t=[];t.push(new ai("bucket")),t.push(new ai("generation")),t.push(new ai("metageneration")),t.push(new ai("name","fullPath",!0));function e(o,a){return KJ(a)}var n=new ai("name");n.xform=e,t.push(n);function r(o,a){return ts(a)?Number(a):a}var i=new ai("size");return i.xform=r,t.push(i),t.push(new ai("timeCreated")),t.push(new ai("updated")),t.push(new ai("md5Hash",null,!0)),t.push(new ai("cacheControl",null,!0)),t.push(new ai("contentDisposition",null,!0)),t.push(new ai("contentEncoding",null,!0)),t.push(new ai("contentLanguage",null,!0)),t.push(new ai("contentType",null,!0)),t.push(new ai("metadata","customMetadata",!0)),Ag=t,Ag}function XJ(t,e){function n(){var r=t.bucket,i=t.fullPath,o=new Eo(r,i);return e.makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function QJ(t,e,n){var r={};r.type="file";for(var i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,e[a.server])}return XJ(r,t),r}function kU(t,e,n){var r=Ox(e);if(r===null)return null;var i=r;return QJ(t,i,n)}function JJ(t,e){var n=Ox(e);if(n===null||!rf(n.downloadTokens))return null;var r=n.downloadTokens;if(r.length===0)return null;var i=encodeURIComponent,o=r.split(","),a=o.map(function(c){var f=t.bucket,v=t.fullPath,y="/b/"+i(f)+"/o/"+i(v),b=Vu(y),E=AU({alt:"media",token:c});return b+E});return a[0]}function Px(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}function ZJ(t){if(!yp(t)||!t)throw"Expected Metadata object.";for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];if(e==="customMetadata"){if(!yp(n))throw"Expected object for 'customMetadata' mapping."}else if(FJ(n))throw"Mapping for '"+e+"' cannot be an object."}}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kg="maxResults",eZ=1e3,Eb="pageToken",jO="prefixes",UO="items";function tZ(t,e){var n={prefixes:[],items:[],nextPageToken:e.nextPageToken},r=t.bucket();if(r===null)throw CJ();if(e[jO])for(var i=0,o=e[jO];i<o.length;i++){var a=o[i],c=a.replace(/\/$/,""),f=t.makeStorageReference(new Eo(r,c));n.prefixes.push(f)}if(e[UO])for(var v=0,y=e[UO];v<y.length;v++){var b=y[v],f=t.makeStorageReference(new Eo(r,b.name));n.items.push(f)}return n}function nZ(t,e){var n=Ox(e);if(n===null)return null;var r=n;return tZ(t,r)}function rZ(t){if(!yp(t)||!t)throw"Expected ListOptions object.";for(var e in t)if(e===kg){if(!UJ(t[kg])||t[kg]<=0)throw"Expected maxResults to be a positive number.";if(t[kg]>1e3)throw"Expected maxResults to be less than or equal to "+eZ+"."}else if(e===Eb){if(t[Eb]&&!rf(t[Eb]))throw"Expected pageToken to be string."}else throw"Unknown option: "+e}var Ma=function(){function t(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}return t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ps(t){if(!t)throw Rx()}function P_(t,e){function n(r,i){var o=kU(t,i,e);return Ps(o!==null),o}return n}function iZ(t){function e(n,r){var i=nZ(t,r);return Ps(i!==null),i}return e}function oZ(t,e){function n(r,i){var o=kU(t,i,e);return Ps(o!==null),JJ(o,i)}return n}function of(t){function e(n,r){var i;return n.getStatus()===401?i=bJ():n.getStatus()===402?i=EJ(t.bucket):n.getStatus()===403?i=SJ(t.path):i=r,i.setServerResponseProp(r.serverResponseProp()),i}return e}function D_(t){var e=of(t);function n(r,i){var o=e(r,i);return r.getStatus()===404&&(o=wJ(t.path)),o.setServerResponseProp(i.serverResponseProp()),o}return n}function RU(t,e,n){var r=e.fullServerUrl(),i=Vu(r),o="GET",a=t.maxOperationRetryTime(),c=new Ma(i,o,P_(t,n),a);return c.errorHandler=D_(e),c}function sZ(t,e,n,r,i){var o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var a=e.bucketOnlyServerUrl(),c=Vu(a),f="GET",v=t.maxOperationRetryTime(),y=new Ma(c,f,iZ(t),v);return y.urlParams=o,y.errorHandler=of(e),y}function aZ(t,e,n){var r=e.fullServerUrl(),i=Vu(r),o="GET",a=t.maxOperationRetryTime(),c=new Ma(i,o,oZ(t,n),a);return c.errorHandler=D_(e),c}function uZ(t,e,n,r){var i=e.fullServerUrl(),o=Vu(i),a="PATCH",c=Px(n,r),f={"Content-Type":"application/json; charset=utf-8"},v=t.maxOperationRetryTime(),y=new Ma(o,a,P_(t,r),v);return y.headers=f,y.body=c,y.errorHandler=D_(e),y}function lZ(t,e){var n=e.fullServerUrl(),r=Vu(n),i="DELETE",o=t.maxOperationRetryTime();function a(f,v){}var c=new Ma(r,i,a,o);return c.successCodes=[200,204],c.errorHandler=D_(e),c}function cZ(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function OU(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=cZ(null,e)),r}function hZ(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function c(){for(var K="",ue=0;ue<2;ue++)K=K+Math.random().toString().slice(2);return K}var f=c();a["Content-Type"]="multipart/related; boundary="+f;var v=OU(e,r,i),y=Px(v,n),b="--"+f+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+y+`\r
--`+f+`\r
Content-Type: `+v.contentType+`\r
\r
`,E=`\r
--`+f+"--",I=W1.getBlob(b,r,E);if(I===null)throw EU();var L={name:v.fullPath},D=Vu(o),te="POST",z=t.maxUploadRetryTime(),Y=new Ma(D,te,P_(t,n),z);return Y.urlParams=L,Y.headers=a,Y.body=I.uploadData(),Y.errorHandler=of(e),Y}var gy=function(){function t(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}return t}();function Dx(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Ps(!1)}var r=e||["active"];return Ps(!!n&&r.indexOf(n)!==-1),n}function fZ(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a=OU(e,r,i),c={name:a.fullPath},f=Vu(o),v="POST",y={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},b=Px(a,n),E=t.maxUploadRetryTime();function I(D){Dx(D);var te;try{te=D.getResponseHeader("X-Goog-Upload-URL")}catch{Ps(!1)}return Ps(rf(te)),te}var L=new Ma(f,v,I,E);return L.urlParams=c,L.headers=y,L.body=b,L.errorHandler=of(e),L}function dZ(t,e,n,r){var i={"X-Goog-Upload-Command":"query"};function o(v){var y=Dx(v,["active","final"]),b=null;try{b=v.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Ps(!1)}b||Ps(!1);var E=Number(b);return Ps(!isNaN(E)),new gy(E,r.size(),y==="final")}var a="POST",c=t.maxUploadRetryTime(),f=new Ma(n,a,o,c);return f.headers=i,f.errorHandler=of(e),f}var VO=256*1024;function pZ(t,e,n,r,i,o,a,c){var f=new gy(0,0);if(a?(f.current=a.current,f.total=a.total):(f.current=0,f.total=r.size()),r.size()!==f.total)throw NJ();var v=f.total-f.current,y=v;i>0&&(y=Math.min(y,i));var b=f.current,E=b+y,I=y===v?"upload, finalize":"upload",L={"X-Goog-Upload-Command":I,"X-Goog-Upload-Offset":f.current},D=r.slice(b,E);if(D===null)throw EU();function te(ue,oe){var fe=Dx(ue,["active","final"]),me=f.current+y,he=r.size(),Z;return fe==="final"?Z=P_(e,o)(ue,oe):Z=null,new gy(me,he,fe==="final",Z)}var z="POST",Y=e.maxUploadRetryTime(),K=new Ma(n,z,te,Y);return K.headers=L,K.body=D.uploadData(),K.progressCallback=c||null,K.errorHandler=of(t),K}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vZ=function(){function t(e,n,r){var i=xU(e)||ts(n)||ts(r);if(i)this.next=e,this.error=n||null,this.complete=r||null;else{var o=e;this.next=o.next||null,this.error=o.error||null,this.complete=o.complete||null}}return t}(),gZ=function(){function t(e,n,r,i,o,a){this.bytesTransferred=e,this.totalBytes=n,this.state=r,this.metadata=i,this.task=o,this.ref=a}return t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(t,e,n){for(var r=e.length,i=e.length,o=0;o<e.length;o++)if(e[o].optional){r=o;break}var a=r<=n.length&&n.length<=i;if(!a)throw kJ(r,i,t,n.length);for(var o=0;o<n.length;o++)try{e[o].validator(n[o])}catch(f){throw f instanceof Error?MO(o,t,f.message):MO(o,t,f)}}var ic=function(){function t(e,n){var r=this;this.validator=function(i){r.optional&&!eu(i)||e(i)},this.optional=!!n}return t}();function mZ(t,e){return function(n){t(n),e(n)}}function bh(t,e){function n(i){if(!rf(i))throw"Expected string."}var r;return t?r=mZ(n,t):r=n,new ic(r,e)}function yZ(){function t(e){var n=e instanceof Uint8Array||e instanceof ArrayBuffer||O_()&&e instanceof Blob;if(!n)throw"Expected Blob or File."}return new ic(t)}function bb(t){return new ic(ZJ,t)}function _Z(t){return new ic(rZ,t)}function BO(){function t(e){var n=CU(e)&&e>=0;if(!n)throw"Expected a number 0 or greater."}return new ic(t)}function Sb(t,e){function n(r){var i=r===null||ts(r)&&r instanceof Object;if(!i)throw"Expected an Object.";t!=null&&t(r)}return new ic(n,e)}function Jf(t){function e(n){var r=n===null||xU(n);if(!r)throw"Expected a Function."}return new ic(e,t)}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pc(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then(function(){return t.apply(void 0,e)})}}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zO=function(){function t(e,n,r,i,o,a){var c=this;a===void 0&&(a=null),this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=e,this.authWrapper_=n,this.location_=r,this.blob_=o,this.metadata_=a,this.mappings_=i,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_=It.RUNNING,this.errorHandler_=function(f){c.request_=null,c.chunkMultiplier_=1,f.codeEquals(Jn.CANCELED)?(c.needToFetchStatus_=!0,c.completeTransitions_()):(c.error_=f,c.transition_(It.ERROR))},this.metadataErrorHandler_=function(f){c.request_=null,f.codeEquals(Jn.CANCELED)?c.completeTransitions_():(c.error_=f,c.transition_(It.ERROR))},this.promise_=new Promise(function(f,v){c.resolve_=f,c.reject_=v,c.start_()}),this.promise_.then(null,function(){})}return t.prototype.makeProgressCallback_=function(){var e=this,n=this.transferred_;return function(r){return e.updateProgress_(n+r)}},t.prototype.shouldDoResumable_=function(e){return e.size()>256*1024},t.prototype.start_=function(){this.state_===It.RUNNING&&this.request_===null&&(this.resumable_?this.uploadUrl_===null?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},t.prototype.resolveToken_=function(e){var n=this;this.authWrapper_.getAuthToken().then(function(r){switch(n.state_){case It.RUNNING:e(r);break;case It.CANCELING:n.transition_(It.CANCELED);break;case It.PAUSING:n.transition_(It.PAUSED);break}})},t.prototype.createResumable_=function(){var e=this;this.resolveToken_(function(n){var r=fZ(e.authWrapper_,e.location_,e.mappings_,e.blob_,e.metadata_),i=e.authWrapper_.makeRequest(r,n);e.request_=i,i.getPromise().then(function(o){e.request_=null,e.uploadUrl_=o,e.needToFetchStatus_=!1,e.completeTransitions_()},e.errorHandler_)})},t.prototype.fetchStatus_=function(){var e=this,n=this.uploadUrl_;this.resolveToken_(function(r){var i=dZ(e.authWrapper_,e.location_,n,e.blob_),o=e.authWrapper_.makeRequest(i,r);e.request_=o,o.getPromise().then(function(a){a=a,e.request_=null,e.updateProgress_(a.current),e.needToFetchStatus_=!1,a.finalized&&(e.needToFetchMetadata_=!0),e.completeTransitions_()},e.errorHandler_)})},t.prototype.continueUpload_=function(){var e=this,n=VO*this.chunkMultiplier_,r=new gy(this.transferred_,this.blob_.size()),i=this.uploadUrl_;this.resolveToken_(function(o){var a;try{a=pZ(e.location_,e.authWrapper_,i,e.blob_,n,e.mappings_,r,e.makeProgressCallback_())}catch(f){e.error_=f,e.transition_(It.ERROR);return}var c=e.authWrapper_.makeRequest(a,o);e.request_=c,c.getPromise().then(function(f){e.increaseMultiplier_(),e.request_=null,e.updateProgress_(f.current),f.finalized?(e.metadata_=f.metadata,e.transition_(It.SUCCESS)):e.completeTransitions_()},e.errorHandler_)})},t.prototype.increaseMultiplier_=function(){var e=VO*this.chunkMultiplier_;e<32*1024*1024&&(this.chunkMultiplier_*=2)},t.prototype.fetchMetadata_=function(){var e=this;this.resolveToken_(function(n){var r=RU(e.authWrapper_,e.location_,e.mappings_),i=e.authWrapper_.makeRequest(r,n);e.request_=i,i.getPromise().then(function(o){e.request_=null,e.metadata_=o,e.transition_(It.SUCCESS)},e.metadataErrorHandler_)})},t.prototype.oneShotUpload_=function(){var e=this;this.resolveToken_(function(n){var r=hZ(e.authWrapper_,e.location_,e.mappings_,e.blob_,e.metadata_),i=e.authWrapper_.makeRequest(r,n);e.request_=i,i.getPromise().then(function(o){e.request_=null,e.metadata_=o,e.updateProgress_(e.blob_.size()),e.transition_(It.SUCCESS)},e.errorHandler_)})},t.prototype.updateProgress_=function(e){var n=this.transferred_;this.transferred_=e,this.transferred_!==n&&this.notifyObservers_()},t.prototype.transition_=function(e){if(this.state_!==e)switch(e){case It.CANCELING:this.state_=e,this.request_!==null&&this.request_.cancel();break;case It.PAUSING:this.state_=e,this.request_!==null&&this.request_.cancel();break;case It.RUNNING:var n=this.state_===It.PAUSED;this.state_=e,n&&(this.notifyObservers_(),this.start_());break;case It.PAUSED:this.state_=e,this.notifyObservers_();break;case It.CANCELED:this.error_=wU(),this.state_=e,this.notifyObservers_();break;case It.ERROR:this.state_=e,this.notifyObservers_();break;case It.SUCCESS:this.state_=e,this.notifyObservers_();break}},t.prototype.completeTransitions_=function(){switch(this.state_){case It.PAUSING:this.transition_(It.PAUSED);break;case It.CANCELING:this.transition_(It.CANCELED);break;case It.RUNNING:this.start_();break}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var e=wb(this.state_);return new gZ(this.transferred_,this.blob_.size(),e,this.metadata_,this,this.ref_)},enumerable:!0,configurable:!0}),t.prototype.on=function(e,n,r,i){function o(){if(e!==q1.STATE_CHANGED)throw"Expected one of the event types: ["+q1.STATE_CHANGED+"]."}var a="Expected a function or an Object with one of `next`, `error`, `complete` properties.",c=Jf(!0).validator,f=Sb(null,!0).validator;function v(te){try{c(te);return}catch{}try{f(te);var z=eu(te.next)||eu(te.error)||eu(te.complete);if(!z)throw"";return}catch{throw a}}var y=[bh(o),Sb(v,!0),Jf(!0),Jf(!0)];dr("on",y,arguments);var b=this;function E(te){function z(Y,K,ue){te!==null&&dr("on",te,arguments);var oe=new vZ(Y,K,i);return b.addObserver_(oe),function(){b.removeObserver_(oe)}}return z}function I(te){if(te===null)throw a;v(te)}var L=[Sb(I),Jf(!0),Jf(!0)],D=!(eu(n)||eu(r)||eu(i));return D?E(L):E(null)(n,r,i)},t.prototype.then=function(e,n){return this.promise_.then(e,n)},t.prototype.catch=function(e){return this.then(null,e)},t.prototype.addObserver_=function(e){this.observers_.push(e),this.notifyObserver_(e)},t.prototype.removeObserver_=function(e){var n=this.observers_.indexOf(e);n!==-1&&this.observers_.splice(n,1)},t.prototype.notifyObservers_=function(){var e=this;this.finishPromise_();var n=this.observers_.slice();n.forEach(function(r){e.notifyObserver_(r)})},t.prototype.finishPromise_=function(){if(this.resolve_!==null){var e=!0;switch(wb(this.state_)){case pi.SUCCESS:Pc(this.resolve_.bind(null,this.snapshot))();break;case pi.CANCELED:case pi.ERROR:var n=this.reject_;Pc(n.bind(null,this.error_))();break;default:e=!1;break}e&&(this.resolve_=null,this.reject_=null)}},t.prototype.notifyObserver_=function(e){var n=wb(this.state_);switch(n){case pi.RUNNING:case pi.PAUSED:e.next&&Pc(e.next.bind(e,this.snapshot))();break;case pi.SUCCESS:e.complete&&Pc(e.complete.bind(e))();break;case pi.CANCELED:case pi.ERROR:e.error&&Pc(e.error.bind(e,this.error_))();break;default:e.error&&Pc(e.error.bind(e,this.error_))()}},t.prototype.resume=function(){dr("resume",[],arguments);var e=this.state_===It.PAUSED||this.state_===It.PAUSING;return e&&this.transition_(It.RUNNING),e},t.prototype.pause=function(){dr("pause",[],arguments);var e=this.state_===It.RUNNING;return e&&this.transition_(It.PAUSING),e},t.prototype.cancel=function(){dr("cancel",[],arguments);var e=this.state_===It.RUNNING||this.state_===It.PAUSING;return e&&this.transition_(It.CANCELING),e},t}();/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nm=function(){function t(e,n){this.authWrapper=e,n instanceof Eo?this.location=n:this.location=Eo.makeFromUrl(n)}return t.prototype.toString=function(){return dr("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},t.prototype.newRef=function(e,n){return new t(e,n)},t.prototype.mappings=function(){return YJ()},t.prototype.child=function(e){dr("child",[bh()],arguments);var n=$J(this.location.path,e),r=new Eo(this.location.bucket,n);return this.newRef(this.authWrapper,r)},Object.defineProperty(t.prototype,"parent",{get:function(){var e=GJ(this.location.path);if(e===null)return null;var n=new Eo(this.location.bucket,e);return this.newRef(this.authWrapper,n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){var e=new Eo(this.location.bucket,"");return this.newRef(this.authWrapper,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return NU(this.location.path)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this.authWrapper.service()},enumerable:!0,configurable:!0}),t.prototype.put=function(e,n){return n===void 0&&(n=null),dr("put",[yZ(),bb(!0)],arguments),this.throwIfRoot_("put"),new zO(this,this.authWrapper,this.location,this.mappings(),new W1(e),n)},t.prototype.putString=function(e,n,r){n===void 0&&(n=or.RAW),dr("putString",[bh(),bh(OJ,!0),bb(!0)],arguments),this.throwIfRoot_("putString");var i=bU(n,e),o=Object.assign({},r);return!ts(o.contentType)&&ts(i.contentType)&&(o.contentType=i.contentType),new zO(this,this.authWrapper,this.location,this.mappings(),new W1(i.data,!0),o)},t.prototype.delete=function(){var e=this;return dr("delete",[],arguments),this.throwIfRoot_("delete"),this.authWrapper.getAuthToken().then(function(n){var r=lZ(e.authWrapper,e.location);return e.authWrapper.makeRequest(r,n).getPromise()})},t.prototype.listAll=function(){dr("listAll",[],arguments);var e={prefixes:[],items:[]};return this.listAllHelper(e).then(function(){return e})},t.prototype.listAllHelper=function(e,n){return Ee(this,void 0,void 0,function(){var r,i,o,a;return we(this,function(c){switch(c.label){case 0:return r={pageToken:n},[4,this.list(r)];case 1:return i=c.sent(),(o=e.prefixes).push.apply(o,i.prefixes),(a=e.items).push.apply(a,i.items),i.nextPageToken==null?[3,3]:[4,this.listAllHelper(e,i.nextPageToken)];case 2:c.sent(),c.label=3;case 3:return[2]}})})},t.prototype.list=function(e){dr("list",[_Z(!0)],arguments);var n=this;return this.authWrapper.getAuthToken().then(function(r){var i=e||{},o=sZ(n.authWrapper,n.location,"/",i.pageToken,i.maxResults);return n.authWrapper.makeRequest(o,r).getPromise()})},t.prototype.getMetadata=function(){var e=this;return dr("getMetadata",[],arguments),this.throwIfRoot_("getMetadata"),this.authWrapper.getAuthToken().then(function(n){var r=RU(e.authWrapper,e.location,e.mappings());return e.authWrapper.makeRequest(r,n).getPromise()})},t.prototype.updateMetadata=function(e){var n=this;return dr("updateMetadata",[bb()],arguments),this.throwIfRoot_("updateMetadata"),this.authWrapper.getAuthToken().then(function(r){var i=uZ(n.authWrapper,n.location,e,n.mappings());return n.authWrapper.makeRequest(i,r).getPromise()})},t.prototype.getDownloadURL=function(){var e=this;return dr("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL"),this.authWrapper.getAuthToken().then(function(n){var r=aZ(e.authWrapper,e.location,e.mappings());return e.authWrapper.makeRequest(r,n).getPromise().then(function(i){if(i===null)throw AJ();return i})})},t.prototype.throwIfRoot_=function(e){if(this.location.path==="")throw RJ(e)},t}(),wZ=function(){function t(e){this.promise_=Promise.reject(e)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(e){},t}(),EZ=function(){function t(){this.map=new Map,this.id=_J}return t.prototype.addRequest=function(e){var n=this,r=this.id;this.id++,this.map.set(r,e),e.getPromise().then(function(){return n.map.delete(r)},function(){return n.map.delete(r)})},t.prototype.clear=function(){this.map.forEach(function(e){e&&e.cancel(!0)}),this.map.clear()},t}(),bZ=function(){function t(e,n,r,i,o,a){var c;if(this.bucket_=null,this.appId_=null,this.deleted_=!1,this.app_=e,this.app_!==null){var f=this.app_.options;ts(f)&&(this.bucket_=t.extractBucket_(f),this.appId_=(c=f.appId)!==null&&c!==void 0?c:null)}this.authProvider_=n,this.storageRefMaker_=r,this.requestMaker_=i,this.pool_=a,this.service_=o,this.maxOperationRetryTime_=mJ,this.maxUploadRetryTime_=yJ,this.requestMap_=new EZ}return t.extractBucket_=function(e){var n=e[_U]||null;if(n==null)return null;var r=Eo.makeFromBucketSpec(n);return r.bucket},t.prototype.getAuthToken=function(){var e=this.authProvider_.getImmediate({optional:!0});return e?e.getToken().then(function(n){return n!==null?n.accessToken:null},function(){return null}):Promise.resolve(null)},t.prototype.bucket=function(){if(this.deleted_)throw z1();return this.bucket_},t.prototype.service=function(){return this.service_},t.prototype.makeStorageReference=function(e){return this.storageRefMaker_(this,e)},t.prototype.makeRequest=function(e,n){if(this.deleted_)return new wZ(z1());var r=this.requestMaker_(e,this.appId_,n,this.pool_);return this.requestMap_.addRequest(r),r},t.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requestMap_.clear()},t.prototype.maxUploadRetryTime=function(){return this.maxUploadRetryTime_},t.prototype.setMaxUploadRetryTime=function(e){this.maxUploadRetryTime_=e},t.prototype.maxOperationRetryTime=function(){return this.maxOperationRetryTime_},t.prototype.setMaxOperationRetryTime=function(e){this.maxOperationRetryTime_=e},t}();/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SZ(t,e,n){var r=1,i=null,o=!1,a=0;function c(){return a===2}var f=!1;function v(){for(var L=[],D=0;D<arguments.length;D++)L[D]=arguments[D];f||(f=!0,e.apply(null,L))}function y(L){i=setTimeout(function(){i=null,t(b,c())},L)}function b(L){for(var D=[],te=1;te<arguments.length;te++)D[te-1]=arguments[te];if(!f){if(L){v.call.apply(v,eo([null,L],D));return}var z=c()||o;if(z){v.call.apply(v,eo([null,L],D));return}r<64&&(r*=2);var Y;a===1?(a=2,Y=0):Y=(r+Math.random())*1e3,y(Y)}}var E=!1;function I(L){E||(E=!0,!f&&(i!==null?(L||(a=2),clearTimeout(i),y(0)):L||(a=1)))}return y(0),setTimeout(function(){o=!0,I(!0)},n),I}function TZ(t){t(!1)}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var IZ=function(){function t(e,n,r,i,o,a,c,f,v,y,b){var E=this;this.pendingXhr_=null,this.backoffId_=null,this.resolve_=null,this.reject_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=o.slice(),this.additionalRetryCodes_=a.slice(),this.callback_=c,this.errorCallback_=f,this.progressCallback_=y,this.timeout_=v,this.pool_=b,this.promise_=new Promise(function(I,L){E.resolve_=I,E.reject_=L,E.start_()})}return t.prototype.start_=function(){var e=this;function n(i,o){if(o){i(!1,new Rg(!1,null,!0));return}var a=e.pool_.createXhrIo();e.pendingXhr_=a;function c(f){var v=f.loaded,y=f.lengthComputable?f.total:-1;e.progressCallback_!==null&&e.progressCallback_(v,y)}e.progressCallback_!==null&&a.addUploadProgressListener(c),a.send(e.url_,e.method_,e.body_,e.headers_).then(function(f){e.progressCallback_!==null&&f.removeUploadProgressListener(c),e.pendingXhr_=null,f=f;var v=f.getErrorCode()===Al.NO_ERROR,y=f.getStatus();if(!v||e.isRetryStatusCode_(y)){var b=f.getErrorCode()===Al.ABORT;i(!1,new Rg(!1,null,b));return}var E=e.successCodes_.indexOf(y)!==-1;i(!0,new Rg(E,f))})}function r(i,o){var a=e.resolve_,c=e.reject_,f=o.xhr;if(o.wasSuccessCode)try{var v=e.callback_(f,f.getResponseText());eu(v)?a(v):a()}catch(b){c(b)}else if(f!==null){var y=Rx();y.setServerResponseProp(f.getResponseText()),e.errorCallback_?c(e.errorCallback_(f,y)):c(y)}else if(o.canceled){var y=e.appDelete_?z1():wU();c(y)}else{var y=TJ();c(y)}}this.canceled_?r(!1,new Rg(!1,null,!0)):this.backoffId_=SZ(n,r,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&TZ(this.backoffId_),this.pendingXhr_!==null&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(e){var n=e>=500&&e<600,r=[408,429],i=r.indexOf(e)!==-1,o=this.additionalRetryCodes_.indexOf(e)!==-1;return n||i||o},t}(),Rg=function(){function t(e,n,r){this.wasSuccessCode=e,this.xhr=n,this.canceled=!!r}return t}();function xZ(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function CZ(t){var e=typeof ze<"u"?ze.SDK_VERSION:"AppManager";t["X-Firebase-Storage-Version"]="webjs/"+e}function NZ(t,e){e&&(t["X-Firebase-GMPID"]=e)}function AZ(t,e,n,r){var i=AU(t.urlParams),o=t.url+i,a=Object.assign({},t.headers);return NZ(a,e),xZ(a,n),CZ(a),new IZ(o,t.method,a,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r)}/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var PU=function(){function t(e,n,r,i){this.bucket_=null;function o(c,f){return new nm(c,f)}if(this.authWrapper_=new bZ(e,n,o,AZ,this,r),this.app_=e,i!=null)this.bucket_=Eo.makeFromBucketSpec(i);else{var a=this.authWrapper_.bucket();a!=null&&(this.bucket_=new Eo(a,""))}this.internals_=new kZ(this)}return t.prototype.ref=function(e){function n(i){if(typeof i!="string")throw"Path is not a string.";if(/^[A-Za-z]+:\/\//.test(i))throw"Expected child path but got a URL, use refFromURL instead."}if(dr("ref",[bh(n,!0)],arguments),this.bucket_==null)throw new Error("No Storage Bucket defined in Firebase Options.");var r=new nm(this.authWrapper_,this.bucket_);return e!=null?r.child(e):r},t.prototype.refFromURL=function(e){function n(r){if(typeof r!="string")throw"Path is not a string.";if(!/^[A-Za-z]+:\/\//.test(r))throw"Expected full URL but got a child path, use ref instead.";try{Eo.makeFromUrl(r)}catch{throw"Expected valid full URL but got an invalid one."}}return dr("refFromURL",[bh(n,!1)],arguments),new nm(this.authWrapper_,e)},Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this.authWrapper_.maxUploadRetryTime()},enumerable:!0,configurable:!0}),t.prototype.setMaxUploadRetryTime=function(e){dr("setMaxUploadRetryTime",[BO()],arguments),this.authWrapper_.setMaxUploadRetryTime(e)},t.prototype.setMaxOperationRetryTime=function(e){dr("setMaxOperationRetryTime",[BO()],arguments),this.authWrapper_.setMaxOperationRetryTime(e)},Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!0,configurable:!0}),t}(),kZ=function(){function t(e){this.service_=e}return t.prototype.delete=function(){return this.service_.authWrapper_.deleteApp(),Promise.resolve()},t}(),RZ="@firebase/storage",OZ="0.3.31";/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var PZ="storage";function DZ(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return new PU(n,r,new BJ,e)}function LZ(t){var e={TaskState:pi,TaskEvent:q1,StringFormat:or,Storage:PU,Reference:nm};t.INTERNAL.registerComponent(new Fs(PZ,DZ,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion(RZ,OZ)}LZ(ze);var MZ="@firebase/performance",DU="0.3.0";/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var LU=DU,FZ="FB-PERF-TRACE-START",jZ="FB-PERF-TRACE-STOP",G1="FB-PERF-TRACE-MEASURE",MU="_wt_",FU="_fp",jU="_fcp",UU="_fid",VU="@firebase/performance/config",BU="@firebase/performance/configexpire",UZ="performance",zU="Performance";/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ui,VZ=(ui={},ui["trace started"]="Trace {$traceName} was started before.",ui["trace stopped"]="Trace {$traceName} is not running.",ui["no window"]="Window is not available.",ui["no app id"]="App id is not available.",ui["no project id"]="Project id is not available.",ui["no api key"]="Api key is not available.",ui["invalid cc log"]="Attempted to queue invalid cc event",ui["FB not default"]="Performance can only start when Firebase app instance is the default one.",ui["RC response not ok"]="RC response is not ok",ui["invalid attribute name"]="Attribute name {$attributeName} is invalid.",ui["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",ui["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",ui["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",ui),Ni=new Op(UZ,zU,VZ);/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tb,qU,Zr=function(){function t(e){if(this.window=e,!e)throw Ni.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}return t.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},t.prototype.mark=function(e){!this.performance||!this.performance.mark||this.performance.mark(e)},t.prototype.measure=function(e,n,r){!this.performance||!this.performance.measure||this.performance.measure(e,n,r)},t.prototype.getEntriesByType=function(e){return!this.performance||!this.performance.getEntriesByType?[]:this.performance.getEntriesByType(e)},t.prototype.getEntriesByName=function(e){return!this.performance||!this.performance.getEntriesByName?[]:this.performance.getEntriesByName(e)},t.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},t.prototype.requiredApisAvailable=function(){return!!(fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled)},t.prototype.setupObserver=function(e,n){if(this.PerformanceObserver){var r=new this.PerformanceObserver(function(i){for(var o=0,a=i.getEntries();o<a.length;o++){var c=a[o];n(c)}});r.observe({entryTypes:[e]})}},t.getInstance=function(){return Tb===void 0&&(Tb=new t(qU)),Tb},t}();function BZ(t){qU=t}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qO(t,e){var n=t.length-e.length;if(n<0||n>1)throw Ni.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ib,ur=function(){function t(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=qO("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=qO("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.shouldSendToFl=!1,this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return t.prototype.getAppId=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!e)throw Ni.create("no app id");return e},t.prototype.getProjectId=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!e)throw Ni.create("no project id");return e},t.prototype.getApiKey=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!e)throw Ni.create("no api key");return e},t.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},t.getInstance=function(){return Ib===void 0&&(Ib=new t),Ib},t}();/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var WU;function zZ(){var t=ur.getInstance().installationsService.getId();return t.then(function(e){WU=e}),t}function Lx(){return WU}function qZ(){var t=ur.getInstance().installationsService.getToken();return t.then(function(e){}),t}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Sh;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.VISIBLE=1]="VISIBLE",t[t.HIDDEN=2]="HIDDEN"})(Sh||(Sh={}));var WZ=["firebase_","google_","ga_"],GZ=new RegExp("^[a-zA-Z]\\w*$"),$Z=40,HZ=100;function KZ(){var t=Zr.getInstance().navigator;return"serviceWorker"in t?t.serviceWorker.controller?2:3:1}function GU(){var t=Zr.getInstance().document,e=t.visibilityState;switch(e){case"visible":return Sh.VISIBLE;case"hidden":return Sh.HIDDEN;default:return Sh.UNKNOWN}}function YZ(){var t=Zr.getInstance().navigator,e=t.connection,n=e&&e.effectiveType;switch(n){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function XZ(t){if(t.length===0||t.length>$Z)return!1;var e=WZ.some(function(n){return t.startsWith(n)});return!e&&!!t.match(GZ)}function QZ(t){return t.length!==0&&t.length<=HZ}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hl=new Kh(zU);Hl.logLevel=wt.INFO;/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var JZ="0.0.1",WO={loggingEnabled:!0,shouldSendToFl:!0},ZZ={shouldSendToFl:!1},eee="FIREBASE_INSTALLATIONS_AUTH";function tee(t){var e=nee();return e?(GO(t,e),Promise.resolve()):oee(t).then(function(n){return GO(t,n)}).then(function(n){return ree(n)},function(){})}function nee(){var t=Zr.getInstance().localStorage;if(t){var e=t.getItem(BU);if(!(!e||!see(e))){var n=t.getItem(VU);if(n)try{var r=JSON.parse(n);return r}catch{return}}}}function ree(t){var e=Zr.getInstance().localStorage;!t||!e||(e.setItem(VU,JSON.stringify(t)),e.setItem(BU,String(Date.now()+ur.getInstance().configTimeToLive*60*60*1e3)))}var iee="Could not fetch config, will use default configs";function oee(t){return qZ().then(function(e){var n=ur.getInstance().getProjectId(),r="https://firebaseremoteconfig.googleapis.com/v1/projects/"+n+"/namespaces/fireperf:fetch?key="+ur.getInstance().getApiKey(),i=new Request(r,{method:"POST",headers:{Authorization:eee+" "+e},body:JSON.stringify({app_instance_id:t,app_instance_id_token:e,app_id:ur.getInstance().getAppId(),app_version:LU,sdk_version:JZ})});return fetch(i).then(function(o){if(o.ok)return o.json();throw Ni.create("RC response not ok")})}).catch(function(){Hl.info(iee)})}function GO(t,e){if(!e)return e;var n=ur.getInstance(),r=e.entries||{},i=e.state;return r.fpr_enabled!==void 0?n.loggingEnabled=String(r.fpr_enabled)==="true":n.loggingEnabled=WO.loggingEnabled,r.fpr_log_source&&(n.logSource=Number(r.fpr_log_source)),r.fpr_log_endpoint_url&&(n.logEndPointUrl=r.fpr_log_endpoint_url),r.fpr_log_transport_key&&(n.transportKey=r.fpr_log_transport_key),i===void 0||i==="INSTANCE_STATE_UNSPECIFIED"||i==="NO_TEMPLATE"?n.shouldSendToFl=ZZ.shouldSendToFl:r.fpr_log_transport_web_percent?n.shouldSendToFl=aee(t,Number(r.fpr_log_transport_web_percent)):n.shouldSendToFl=WO.shouldSendToFl,r.fpr_vc_network_request_sampling_rate!==void 0&&(n.networkRequestsSamplingRate=Number(r.fpr_vc_network_request_sampling_rate)),r.fpr_vc_trace_sampling_rate!==void 0&&(n.tracesSamplingRate=Number(r.fpr_vc_trace_sampling_rate)),n.logTraceAfterSampling=$O(n.tracesSamplingRate),n.logNetworkAfterSampling=$O(n.networkRequestsSamplingRate),e}function see(t){return Number(t)>Date.now()}function $O(t){return Math.random()<=t}function aee(t,e){return t.length===0?!1:uee(t)<e}function uee(t){for(var e=0,n=0;n<t.length;n++)e=(e<<3)+e-t.charCodeAt(n);return e=Math.abs(e%100),e}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mx=1,xb;function $U(){return Mx=2,xb=xb||cee(),xb}function lee(){return Mx===3}function cee(){return hee().then(function(){return zZ()}).then(function(t){return tee(t)}).then(function(){return HO()},function(){return HO()})}function hee(){var t=Zr.getInstance().document;return new Promise(function(e){if(t&&t.readyState!=="complete"){var n=function(){t.readyState==="complete"&&(t.removeEventListener("readystatechange",n),e())};t.addEventListener("readystatechange",n)}else e()})}function HO(){Mx=3}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _p=10*1e3,fee=5.5*1e3,Fx=3,wp=Fx,ya=[],KO=!1;function dee(){KO||(Yp(fee),KO=!0)}function Yp(t){setTimeout(function(){if(wp!==0){if(!ya.length)return Yp(_p);pee()}},t)}function pee(){var t=eo(ya);ya=[];var e=t.map(function(r){return{source_extension_json_proto3:r.message,event_time_ms:String(r.eventTime)}}),n={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:ur.getInstance().logSource,log_event:e};vee(n,t).catch(function(){ya=eo(t,ya),wp--,Hl.info("Tries left: "+wp+"."),Yp(_p)})}function vee(t,e){return ur.getInstance().shouldSendToFl?gee(t,e):mee(t)}function gee(t,e){return yee(t).then(function(n){return n.ok||Hl.info("Call to Firebase backend failed."),n.json()}).then(function(n){var r=Number(n.nextRequestWaitMillis),i=_p;isNaN(r)||(i=Math.max(r,i));var o=n.logResponseDetails;Array.isArray(o)&&o.length>0&&o[0].responseAction==="RETRY_REQUEST_LATER"&&(ya=eo(e,ya),Hl.info("Retry transport request later.")),wp=Fx,Yp(i)})}function mee(t){return fetch(ur.getInstance().logEndPointUrl,{method:"POST",body:JSON.stringify(t)}).then(function(e){return e.ok||Hl.info("Call to Firebase backend failed."),e.json()}).then(function(e){var n=Number(e.next_request_wait_millis),r=isNaN(n)?_p:Math.max(_p,n);wp=Fx,Yp(r)})}function yee(t){var e=ur.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}function _ee(t){if(!t.eventTime||!t.message)throw Ni.create("invalid cc log");ya=eo(ya,[t])}function wee(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=t.apply(void 0,e);_ee({message:r,eventTime:Date.now()})}}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cb;function HU(t,e){Cb||(Cb=wee(bee)),Cb(t,e)}function Og(t){var e=ur.getInstance();!e.instrumentationEnabled&&t.isAuto||!e.dataCollectionEnabled&&!t.isAuto||Zr.getInstance().requiredApisAvailable()&&(t.isAuto&&GU()!==Sh.VISIBLE||!e.loggingEnabled||!e.logTraceAfterSampling||(lee()?Nb(t):$U().then(function(){return Nb(t)},function(){return Nb(t)})))}function Nb(t){Lx()&&setTimeout(function(){return HU(t,1)},0)}function Eee(t){var e=ur.getInstance();if(e.instrumentationEnabled){var n=t.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];n===r||n===i||!e.loggingEnabled||!e.logNetworkAfterSampling||setTimeout(function(){return HU(t,0)},0)}}function bee(t,e){return e===0?See(t):Tee(t)}function See(t){var e={url:t.url,http_method:t.httpMethod||0,http_response_code:200,response_payload_bytes:t.responsePayloadBytes,client_start_time_us:t.startTimeUs,time_to_response_initiated_us:t.timeToResponseInitiatedUs,time_to_response_completed_us:t.timeToResponseCompletedUs},n={application_info:KU(),network_request_metric:e};return JSON.stringify(n)}function Tee(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};Object.keys(t.counters).length!==0&&(e.counters=t.counters);var n=t.getAttributes();Object.keys(n).length!==0&&(e.custom_attributes=n);var r={application_info:KU(),trace_metric:e};return JSON.stringify(r)}function KU(){return{google_app_id:ur.getInstance().getAppId(),app_instance_id:Lx(),web_app_info:{sdk_version:LU,page_url:Zr.getInstance().getUrl(),service_worker_status:KZ(),visibility_state:GU(),effective_connection_type:YZ()},application_process_state:0}}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Iee=100,xee="_",Cee=[FU,jU,UU];function Nee(t,e){return t.length===0||t.length>Iee?!1:e&&e.startsWith(MU)&&Cee.indexOf(t)>-1||!t.startsWith(xee)}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kd=function(){function t(e,n,r){n===void 0&&(n=!1),this.name=e,this.isAuto=n,this.state=1,this.customAttributes={},this.counters={},this.api=Zr.getInstance(),this.randomId=Math.floor(Math.random()*1e6),this.isAuto||(this.traceStartMark=FZ+"-"+this.randomId+"-"+this.name,this.traceStopMark=jZ+"-"+this.randomId+"-"+this.name,this.traceMeasure=r||G1+"-"+this.randomId+"-"+this.name,r&&this.calculateTraceMetrics())}return t.prototype.start=function(){if(this.state!==1)throw Ni.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},t.prototype.stop=function(){if(this.state!==2)throw Ni.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),Og(this)},t.prototype.record=function(e,n,r){if(this.durationUs=Math.floor(n*1e3),this.startTimeUs=Math.floor(e*1e3),r&&r.attributes&&(this.customAttributes=Tn({},r.attributes)),r&&r.metrics)for(var i=0,o=Object.keys(r.metrics);i<o.length;i++){var a=o[i];isNaN(Number(r.metrics[a]))||(this.counters[a]=Number(Math.floor(r.metrics[a])))}Og(this)},t.prototype.incrementMetric=function(e,n){n===void 0&&(n=1),this.counters[e]===void 0&&this.putMetric(e,0),this.counters[e]+=n},t.prototype.putMetric=function(e,n){if(Nee(e,this.name))this.counters[e]=n;else throw Ni.create("invalid custom metric name",{customMetricName:e})},t.prototype.getMetric=function(e){return this.counters[e]||0},t.prototype.putAttribute=function(e,n){var r=XZ(e),i=QZ(n);if(r&&i){this.customAttributes[e]=n;return}if(!r)throw Ni.create("invalid attribute name",{attributeName:e});if(!i)throw Ni.create("invalid attribute value",{attributeValue:n})},t.prototype.getAttribute=function(e){return this.customAttributes[e]},t.prototype.removeAttribute=function(e){this.customAttributes[e]!==void 0&&delete this.customAttributes[e]},t.prototype.getAttributes=function(){return Tn({},this.customAttributes)},t.prototype.setStartTime=function(e){this.startTimeUs=e},t.prototype.setDuration=function(e){this.durationUs=e},t.prototype.calculateTraceMetrics=function(){var e=this.api.getEntriesByName(this.traceMeasure),n=e&&e[0];n&&(this.durationUs=Math.floor(n.duration*1e3),this.startTimeUs=Math.floor((n.startTime+this.api.getTimeOrigin())*1e3))},t.createOobTrace=function(e,n,r){var i=Zr.getInstance().getUrl();if(i){var o=new t(MU+i,!0),a=Math.floor(Zr.getInstance().getTimeOrigin()*1e3);o.setStartTime(a),e&&e[0]&&(o.setDuration(Math.floor(e[0].duration*1e3)),o.putMetric("domInteractive",Math.floor(e[0].domInteractive*1e3)),o.putMetric("domContentLoadedEventEnd",Math.floor(e[0].domContentLoadedEventEnd*1e3)),o.putMetric("loadEventEnd",Math.floor(e[0].loadEventEnd*1e3)));var c="first-paint",f="first-contentful-paint";if(n){var v=n.find(function(b){return b.name===c});v&&v.startTime&&o.putMetric(FU,Math.floor(v.startTime*1e3));var y=n.find(function(b){return b.name===f});y&&y.startTime&&o.putMetric(jU,Math.floor(y.startTime*1e3)),r&&o.putMetric(UU,Math.floor(r*1e3))}Og(o)}},t.createUserTimingTrace=function(e){var n=new t(e,!1,e);Og(n)},t}();/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YO(t){var e=t;if(!(!e||e.responseStart===void 0)){var n=Zr.getInstance().getTimeOrigin(),r=Math.floor((e.startTime+n)*1e3),i=e.responseStart?Math.floor((e.responseStart-e.startTime)*1e3):void 0,o=Math.floor((e.responseEnd-e.startTime)*1e3),a=e.name&&e.name.split("?")[0],c={url:a,responsePayloadBytes:e.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o};Eee(c)}}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Aee=5e3;function XO(){Lx()&&(setTimeout(function(){return Ree()},0),setTimeout(function(){return kee()},0),setTimeout(function(){return Oee()},0))}function kee(){for(var t=Zr.getInstance(),e=t.getEntriesByType("resource"),n=0,r=e;n<r.length;n++){var i=r[n];YO(i)}t.setupObserver("resource",YO)}function Ree(){var t=Zr.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");if(t.onFirstInputDelay){var r=setTimeout(function(){kd.createOobTrace(e,n),r=void 0},Aee);t.onFirstInputDelay(function(i){r&&(clearTimeout(r),kd.createOobTrace(e,n,i))})}else kd.createOobTrace(e,n)}function Oee(){for(var t=Zr.getInstance(),e=t.getEntriesByType("measure"),n=0,r=e;n<r.length;n++){var i=r[n];QO(i)}t.setupObserver("measure",QO)}function QO(t){var e=t.name;e.substring(0,G1.length)!==G1&&kd.createUserTimingTrace(e)}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pee=function(){function t(e){this.app=e,Zr.getInstance().requiredApisAvailable()?(dee(),$U().then(XO,XO)):Hl.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled.")}return t.prototype.trace=function(e){return new kd(e)},Object.defineProperty(t.prototype,"instrumentationEnabled",{get:function(){return ur.getInstance().instrumentationEnabled},set:function(e){ur.getInstance().instrumentationEnabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataCollectionEnabled",{get:function(){return ur.getInstance().dataCollectionEnabled},set:function(e){ur.getInstance().dataCollectionEnabled=e},enumerable:!0,configurable:!0}),t}();/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dee="[DEFAULT]";function Lee(t){var e=function(n,r){if(n.name!==Dee)throw Ni.create("FB not default");if(typeof window>"u")throw Ni.create("no window");return BZ(window),ur.getInstance().firebaseAppInstance=n,ur.getInstance().installationsService=r,new Pee(n)};t.INTERNAL.registerComponent(new Fs("performance",function(n){var r=n.getProvider("app").getImmediate(),i=n.getProvider("installations").getImmediate();return e(r,i)},"PUBLIC")),t.registerVersion(MZ,DU)}Lee(ze);/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jx="measurementId",Mee="firebase_id",Fee="origin",YU="https://www.googletagmanager.com/gtag/js",gi;(function(t){t.EVENT="event",t.SET="set",t.CONFIG="config"})(gi||(gi={}));var $1;(function(t){t.ADD_SHIPPING_INFO="add_shipping_info",t.ADD_PAYMENT_INFO="add_payment_info",t.ADD_TO_CART="add_to_cart",t.ADD_TO_WISHLIST="add_to_wishlist",t.BEGIN_CHECKOUT="begin_checkout",t.CHECKOUT_PROGRESS="checkout_progress",t.EXCEPTION="exception",t.GENERATE_LEAD="generate_lead",t.LOGIN="login",t.PAGE_VIEW="page_view",t.PURCHASE="purchase",t.REFUND="refund",t.REMOVE_FROM_CART="remove_from_cart",t.SCREEN_VIEW="screen_view",t.SEARCH="search",t.SELECT_CONTENT="select_content",t.SELECT_ITEM="select_item",t.SELECT_PROMOTION="select_promotion",t.SET_CHECKOUT_OPTION="set_checkout_option",t.SHARE="share",t.SIGN_UP="sign_up",t.TIMING_COMPLETE="timing_complete",t.VIEW_CART="view_cart",t.VIEW_ITEM="view_item",t.VIEW_ITEM_LIST="view_item_list",t.VIEW_PROMOTION="view_promotion",t.VIEW_SEARCH_RESULTS="view_search_results"})($1||($1={}));/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jee(t,e,n,r,i){var o=r||{};(!i||!i.global)&&(o=Tn(Tn({},r),{send_to:e})),t(gi.EVENT,n,o||{})}function Uee(t,e,n,r){r&&r.global?t(gi.SET,{screen_name:n}):t(gi.CONFIG,e,{update:!0,screen_name:n})}function Vee(t,e,n,r){r&&r.global?t(gi.SET,{user_id:n}):t(gi.CONFIG,e,{update:!0,user_id:n})}function Bee(t,e,n,r){if(r&&r.global){for(var i={},o=0,a=Object.keys(n);o<a.length;o++){var c=a[o];i["user_properties."+c]=n[c]}t(gi.SET,i)}else t(gi.CONFIG,e,{update:!0,user_properties:n})}function zee(t,e){window["ga-disable-"+t]=!e}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var JO=new Kh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qee(t,e,n){return Ee(this,void 0,void 0,function(){var r,i;return we(this,function(o){switch(o.label){case 0:return[4,e.getId()];case 1:return r=o.sent(),n("js",new Date),n(gi.CONFIG,t.options[jx],(i={},i[Mee]=r,i[Fee]="firebase",i.update=!0,i)),[2]}})})}function Wee(t){var e=document.createElement("script");e.src=YU+"?l="+t,e.async=!0,document.head.appendChild(e)}function Gee(t){var e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}function $ee(t,e){return function(n,r,i){if(n===gi.EVENT){var o=[];if(i&&i.send_to){var a=i.send_to;Array.isArray(a)||(a=[a]);for(var c=0,f=a;c<f.length;c++){var v=f[c],y=e[v];if(y)o.push(y);else{o=[];break}}}if(o.length===0)for(var b=0,E=Object.values(e);b<E.length;b++){var I=E[b];o.push(I)}Promise.all(o).then(function(){return t(gi.EVENT,r,i||{})}).catch(function(D){return JO.error(D)})}else if(n===gi.CONFIG){var L=e[r]||Promise.resolve();L.then(function(){t(gi.CONFIG,r,i)}).catch(function(D){return JO.error(D)})}else t(gi.SET,r)}}function Hee(t,e,n){var r=function(){window[e].push(arguments)};return window[n]&&typeof window[n]=="function"&&(r=window[n]),window[n]=$ee(r,t),{gtagCore:r,wrappedGtag:window[n]}}function Kee(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(YU))return r}return null}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dc,Yee=(Dc={},Dc["no-ga-id"]='"'+jx+'" field is empty in Firebase config. Firebase Analytics requires this field to contain a valid measurement ID.',Dc["already-exists"]="A Firebase Analytics instance with the measurement ID ${id}  already exists. Only one Firebase Analytics instance can be created for each measurement ID.",Dc["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",Dc["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate",Dc),my=new Op("analytics","Analytics",Yee);/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ab={},rm="dataLayer",XU="gtag",ZO,Zf,H1=!1;function Xee(t){if(H1)throw my.create("already-initialized");t.dataLayerName&&(rm=t.dataLayerName),t.gtagName&&(XU=t.gtagName)}function Qee(t,e){var n=t.options[jx];if(!n)throw my.create("no-ga-id");if(Ab[n]!=null)throw my.create("already-exists",{id:n});if(!H1){Kee()||Wee(rm),Gee(rm);var r=Hee(Ab,rm,XU),i=r.wrappedGtag,o=r.gtagCore;Zf=i,ZO=o,H1=!0}Ab[n]=qee(t,e,ZO);var a={app:t,logEvent:function(c,f,v){return jee(Zf,n,c,f,v)},setCurrentScreen:function(c,f){return Uee(Zf,n,c,f)},setUserId:function(c,f){return Vee(Zf,n,c,f)},setUserProperties:function(c,f){return Bee(Zf,n,c,f)},setAnalyticsCollectionEnabled:function(c){return zee(n,c)}};return a}var Jee="@firebase/analytics",Zee="0.3.2";/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var eP="analytics";function ete(t){t.INTERNAL.registerComponent(new Fs(eP,function(n){var r=n.getProvider("app").getImmediate(),i=n.getProvider("installations").getImmediate();return Qee(r,i)},"PUBLIC").setServiceProps({settings:Xee,EventName:$1})),t.INTERNAL.registerComponent(new Fs("analytics-internal",e,"PRIVATE")),t.registerVersion(Jee,Zee);function e(n){try{var r=n.getProvider(eP).getImmediate();return{logEvent:r.logEvent}}catch(i){throw my.create("interop-component-reg-failed",{reason:i})}}}ete(ze);/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tte=function(){function t(e,n,r,i){this.client=e,this.storage=n,this.storageCache=r,this.logger=i}return t.prototype.isCachedDataFresh=function(e,n){if(!n)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var r=Date.now()-n,i=r<=e;return this.logger.debug("Config fetch cache check."+(" Cache age millis: "+r+".")+(" Cache max age millis (minimumFetchIntervalMillis setting): "+e+".")+(" Is cache hit: "+i+".")),i},t.prototype.fetch=function(e){return Ee(this,void 0,void 0,function(){var n,r,i,o,a;return we(this,function(c){switch(c.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return n=c.sent(),r=n[0],i=n[1],i&&this.isCachedDataFresh(e.cacheMaxAgeMillis,r)?[2,i]:(e.eTag=i&&i.eTag,[4,this.client.fetch(e)]);case 2:return o=c.sent(),a=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],o.status===200&&a.push(this.storage.setLastSuccessfulFetchResponse(o)),[4,Promise.all(a)];case 3:return c.sent(),[2,o]}})})},t}();/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var li,nte=(li={},li["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",li["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",li["registration-api-key"]="Undefined API key. Check Firebase app initialization.",li["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",li["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",li["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",li["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",li["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",li["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",li["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',li["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',li["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",li["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",li),So=new Op("remoteconfig","Remote Config",nte);function rte(t,e){return t instanceof mI&&t.code.indexOf(e)!==-1}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ite(t){return t===void 0&&(t=navigator),t.languages&&t.languages[0]||t.language}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ote=function(){function t(e,n,r,i,o,a){this.firebaseInstallations=e,this.sdkVersion=n,this.namespace=r,this.projectId=i,this.apiKey=o,this.appId=a}return t.prototype.fetch=function(e){return Ee(this,void 0,void 0,function(){var n,r,i,o,a,c,f,v,y,b,E,I,L,D,te,z,Y,K,ue;return we(this,function(oe){switch(oe.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:n=oe.sent(),r=n[0],i=n[1],o=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",a=o+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,c={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},f={sdk_version:this.sdkVersion,app_instance_id:r,app_instance_id_token:i,app_id:this.appId,language_code:ite()},v={method:"POST",headers:c,body:JSON.stringify(f)},y=fetch(a,v),b=new Promise(function(fe,me){e.signal.addEventListener(function(){var he=new Error("The operation was aborted.");he.name="AbortError",me(he)})}),oe.label=2;case 2:return oe.trys.push([2,5,,6]),[4,Promise.race([y,b])];case 3:return oe.sent(),[4,y];case 4:return E=oe.sent(),[3,6];case 5:throw I=oe.sent(),L="fetch-client-network",I.name==="AbortError"&&(L="fetch-timeout"),So.create(L,{originalErrorMessage:I.message});case 6:if(D=E.status,te=E.headers.get("ETag")||void 0,E.status!==200)return[3,11];K=void 0,oe.label=7;case 7:return oe.trys.push([7,9,,10]),[4,E.json()];case 8:return K=oe.sent(),[3,10];case 9:throw ue=oe.sent(),So.create("fetch-client-parse",{originalErrorMessage:ue.message});case 10:z=K.entries,Y=K.state,oe.label=11;case 11:if(Y==="INSTANCE_STATE_UNSPECIFIED"?D=500:Y==="NO_CHANGE"?D=304:(Y==="NO_TEMPLATE"||Y==="EMPTY_CONFIG")&&(z={}),D!==304&&D!==200)throw So.create("fetch-status",{httpStatus:D});return[2,{status:D,eTag:te,config:z}]}})})},t}();/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ste=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(e){this.listeners.push(e)},t.prototype.abort=function(){this.listeners.forEach(function(e){return e()})},t}();/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ate=!1,ute="",tP=0,lte=["1","true","t","yes","y","on"],kb=function(){function t(e,n){n===void 0&&(n=ute),this._source=e,this._value=n}return t.prototype.asString=function(){return this._value},t.prototype.asBoolean=function(){return this._source==="static"?ate:lte.indexOf(this._value.toLowerCase())>=0},t.prototype.asNumber=function(){if(this._source==="static")return tP;var e=Number(this._value);return isNaN(e)&&(e=tP),e},t.prototype.getSource=function(){return this._source},t}();/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cte=60*1e3,hte=12*60*60*1e3,fte=function(){function t(e,n,r,i,o){this.app=e,this._client=n,this._storageCache=r,this._storage=i,this._logger=o,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:cte,minimumFetchIntervalMillis:hte},this.defaultConfig={}}return t.prototype.setLogLevel=function(e){switch(e){case"debug":this._logger.logLevel=wt.DEBUG;break;case"silent":this._logger.logLevel=wt.SILENT;break;default:this._logger.logLevel=wt.ERROR}},Object.defineProperty(t.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!0,configurable:!0}),t.prototype.activate=function(){return Ee(this,void 0,void 0,function(){var e,n,r;return we(this,function(i){switch(i.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return e=i.sent(),n=e[0],r=e[1],!n||!n.config||!n.eTag||n.eTag===r?[2,!1]:[4,Promise.all([this._storageCache.setActiveConfig(n.config),this._storage.setActiveConfigEtag(n.eTag)])];case 2:return i.sent(),[2,!0]}})})},t.prototype.ensureInitialized=function(){var e=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then(function(){e._isInitializationComplete=!0})),this._initializePromise},t.prototype.fetch=function(){return Ee(this,void 0,void 0,function(){var e,n,r,i=this;return we(this,function(o){switch(o.label){case 0:e=new ste,setTimeout(function(){return Ee(i,void 0,void 0,function(){return we(this,function(a){return e.abort(),[2]})})},this.settings.fetchTimeoutMillis),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:e})];case 2:return o.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return o.sent(),[3,6];case 4:return n=o.sent(),r=rte(n,"fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(r)];case 5:throw o.sent(),n;case 6:return[2]}})})},t.prototype.fetchAndActivate=function(){return Ee(this,void 0,void 0,function(){return we(this,function(e){switch(e.label){case 0:return[4,this.fetch()];case 1:return e.sent(),[2,this.activate()]}})})},t.prototype.getAll=function(){var e=this;return dte(this._storageCache.getActiveConfig(),this.defaultConfig).reduce(function(n,r){return n[r]=e.getValue(r),n},{})},t.prototype.getBoolean=function(e){return this.getValue(e).asBoolean()},t.prototype.getNumber=function(e){return this.getValue(e).asNumber()},t.prototype.getString=function(e){return this.getValue(e).asString()},t.prototype.getValue=function(e){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+e+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var n=this._storageCache.getActiveConfig();return n&&n[e]!==void 0?new kb("remote",n[e]):this.defaultConfig&&this.defaultConfig[e]!==void 0?new kb("default",String(this.defaultConfig[e])):(this._logger.debug('Returning static value for key "'+e+'". Define a default or remote value if this is unintentional.'),new kb("static"))},t}();function dte(t,e){return t===void 0&&(t={}),e===void 0&&(e={}),Object.keys(Tn(Tn({},t),e))}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function im(t,e){var n=t.target.error||void 0;return So.create(e,{originalErrorMessage:n&&n.message})}var dl="app_namespace_store",pte="firebase_remote_config",vte=1;function gte(){return new Promise(function(t,e){var n=indexedDB.open(pte,vte);n.onerror=function(r){e(im(r,"storage-open"))},n.onsuccess=function(r){t(r.target.result)},n.onupgradeneeded=function(r){var i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(dl,{keyPath:"compositeKey"})}}})}var mte=function(){function t(e,n,r,i){i===void 0&&(i=gte()),this.appId=e,this.appName=n,this.namespace=r,this.openDbPromise=i}return t.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},t.prototype.setLastFetchStatus=function(e){return this.set("last_fetch_status",e)},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},t.prototype.setLastSuccessfulFetchTimestampMillis=function(e){return this.set("last_successful_fetch_timestamp_millis",e)},t.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},t.prototype.setLastSuccessfulFetchResponse=function(e){return this.set("last_successful_fetch_response",e)},t.prototype.getActiveConfig=function(){return this.get("active_config")},t.prototype.setActiveConfig=function(e){return this.set("active_config",e)},t.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},t.prototype.setActiveConfigEtag=function(e){return this.set("active_config_etag",e)},t.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},t.prototype.setThrottleMetadata=function(e){return this.set("throttle_metadata",e)},t.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},t.prototype.get=function(e){return Ee(this,void 0,void 0,function(){var n,r=this;return we(this,function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise(function(o,a){var c=n.transaction([dl],"readonly"),f=c.objectStore(dl),v=r.createCompositeKey(e);try{var y=f.get(v);y.onerror=function(b){a(im(b,"storage-get"))},y.onsuccess=function(b){var E=b.target.result;o(E?E.value:void 0)}}catch(b){a(So.create("storage-get",{originalErrorMessage:b&&b.message}))}})]}})})},t.prototype.set=function(e,n){return Ee(this,void 0,void 0,function(){var r,i=this;return we(this,function(o){switch(o.label){case 0:return[4,this.openDbPromise];case 1:return r=o.sent(),[2,new Promise(function(a,c){var f=r.transaction([dl],"readwrite"),v=f.objectStore(dl),y=i.createCompositeKey(e);try{var b=v.put({compositeKey:y,value:n});b.onerror=function(E){c(im(E,"storage-set"))},b.onsuccess=function(){a()}}catch(E){c(So.create("storage-set",{originalErrorMessage:E&&E.message}))}})]}})})},t.prototype.delete=function(e){return Ee(this,void 0,void 0,function(){var n,r=this;return we(this,function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise(function(o,a){var c=n.transaction([dl],"readwrite"),f=c.objectStore(dl),v=r.createCompositeKey(e);try{var y=f.delete(v);y.onerror=function(b){a(im(b,"storage-delete"))},y.onsuccess=function(){o()}}catch(b){a(So.create("storage-delete",{originalErrorMessage:b&&b.message}))}})]}})})},t.prototype.createCompositeKey=function(e){return[this.appId,this.appName,this.namespace,e].join()},t}();/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yte=function(){function t(e){this.storage=e}return t.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},t.prototype.getActiveConfig=function(){return this.activeConfig},t.prototype.loadFromStorage=function(){return Ee(this,void 0,void 0,function(){var e,n,r,i,o,a;return we(this,function(c){switch(c.label){case 0:return e=this.storage.getLastFetchStatus(),n=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),[4,e];case 1:return i=c.sent(),i&&(this.lastFetchStatus=i),[4,n];case 2:return o=c.sent(),o&&(this.lastSuccessfulFetchTimestampMillis=o),[4,r];case 3:return a=c.sent(),a&&(this.activeConfig=a),[2]}})})},t.prototype.setLastFetchStatus=function(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)},t.prototype.setLastSuccessfulFetchTimestampMillis=function(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)},t.prototype.setActiveConfig=function(e){return this.activeConfig=e,this.storage.setActiveConfig(e)},t}();/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _te=1e3,wte=2,Ete=4*60*60*1e3,bte=.5;function Ste(t){var e=_te*Math.pow(wte,t),n=Math.round(bte*e*(Math.random()-.5)*2);return Math.min(Ete,e+n)}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tte(t,e){return new Promise(function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener(function(){clearTimeout(o),r(So.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Ite(t){if(!(t instanceof mI))return!1;var e=Number(t.httpStatus);return e===429||e===500||e===503||e===504}var xte=function(){function t(e,n){this.client=e,this.storage=n}return t.prototype.fetch=function(e){return Ee(this,void 0,void 0,function(){var n;return we(this,function(r){switch(r.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return n=r.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(e,n)]}})})},t.prototype.attemptFetch=function(e,n){var r=n.throttleEndTimeMillis,i=n.backoffCount;return Ee(this,void 0,void 0,function(){var o,a,c;return we(this,function(f){switch(f.label){case 0:return[4,Tte(e.signal,r)];case 1:f.sent(),f.label=2;case 2:return f.trys.push([2,5,,7]),[4,this.client.fetch(e)];case 3:return o=f.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return f.sent(),[2,o];case 5:if(a=f.sent(),!Ite(a))throw a;return c={throttleEndTimeMillis:Date.now()+Ste(i),backoffCount:i+1},[4,this.storage.setThrottleMetadata(c)];case 6:return f.sent(),[2,this.attemptFetch(e,c)];case 7:return[2]}})})},t}(),nP="@firebase/remote-config",Cte="0.1.18";/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nte(t){t.INTERNAL.registerComponent(new Fs("remoteConfig",e,"PUBLIC").setMultipleInstances(!0)),t.registerVersion(nP,Cte);function e(n,r){var i=n.getProvider("app").getImmediate(),o=n.getProvider("installations").getImmediate();if(typeof window>"u")throw So.create("registration-window");var a=i.options,c=a.projectId,f=a.apiKey,v=a.appId;if(!c)throw So.create("registration-project-id");if(!f)throw So.create("registration-api-key");if(!v)throw So.create("registration-app-id");r=r||"firebase";var y=new mte(v,i.name,r),b=new yte(y),E=new Kh(nP);E.logLevel=wt.ERROR;var I=new ote(o,t.SDK_VERSION,r,c,f,v),L=new xte(I,y),D=new tte(L,y,b,E),te=new fte(i,D,b,y,E);return te.ensureInitialized(),te}}Nte(ze);var Ate="firebase",kte="7.14.0";/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ze.registerVersion(Ate,kte,"app");var Rte="firebase",Ote="7.14.0";/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */console.warn(`
It looks like you're using the development build of the Firebase JS SDK.
When deploying Firebase apps to production, it is advisable to only import
the individual SDK components you intend to use.

For the module builds, these are available in the following manner
(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):

CommonJS Modules:
const firebase = require('firebase/app');
require('firebase/<PACKAGE>');

ES Modules:
import firebase from 'firebase/app';
import 'firebase/<PACKAGE>';

Typescript:
import * as firebase from 'firebase/app';
import 'firebase/<PACKAGE>';
`);ze.registerVersion(Rte,Ote);ze.initializeApp({apiKey:"AIzaSyAHOemftrTSOUjtoA6K3VR2hkOU5H-ScSI",authDomain:"amstangram.firebaseapp.com",databaseURL:"https://amstangram.firebaseio.com",projectId:"amstangram",storageBucket:"amstangram.appspot.com",messagingSenderId:"1075176148116",appId:"1:1075176148116:web:e61e6512cd983a75533881",measurementId:"G-PLH3BSWLM2"});const Pte=t=>{const e=document.createElement("textarea");e.value=t,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)},Dte=t=>{let e=t.length,n,r;for(;e!==0;)r=Math.floor(Math.random()*e),e-=1,n=t[e],t[e]=t[r],t[r]=n;return t},Lte=Vs(Te,{css:{fontSize:3,p:2,borderRadius:1,bg:"notificationBackground",color:"dialogText",animation:`${go/2}ms fadeIn both`,boxShadow:"0px 0px 10px #00000080"}}),ko=ee.createContext(null),Mte=({children:t})=>{const e=ee.useRef(),[n,r]=ee.useState(null),i=ee.useCallback(o=>{r(a=>(a&&clearTimeout(a.timeoutId),{content:o,timeoutId:setTimeout(()=>{r(null)},2e3)}))},[]);return F.jsxs(ko.Provider,{value:i,children:[t,n&&iI.createPortal(F.jsx(Te,{css:{position:"fixed",top:0,left:0,bottom:0,right:0,pointerEvents:"none",alignItems:"center",justifyContent:"center"},children:F.jsx(Lte,{ref:e,children:n.content})}),document.getElementById("notificationContainer"))]})},qr=ee.createContext(null),Fte=({children:t})=>{const[e,n]=ee.useState(void 0),[r,i]=ee.useState(null),[o,a]=ee.useState(!1);ee.useEffect(()=>{e!==void 0&&r!==null&&a(!0)},[e,r]),ee.useEffect(()=>ze.auth().onAuthStateChanged(async E=>{if(!E)n(null);else{const L=(await ze.firestore().collection("users").doc(E.uid).get()).data();n({uid:E.uid,...L,firebaseUser:E})}}),[]),ee.useEffect(()=>ze.firestore().collection("users").onSnapshot(E=>{const I={};for(const L of E.docs){const D=L.data();I[L.id]=D}i(I)}),[]);const c=ee.useCallback(async(b,E)=>{await b.firebaseUser.updateProfile({displayName:E}),await ze.firestore().collection("users").doc(b.uid).update({username:E}),n({...b,username:E})},[]),f=ee.useCallback(async(b,E,I)=>{const L=ze.auth.EmailAuthProvider.credential(b.firebaseUser.email,E);await b.firebaseUser.reauthenticateWithCredential(L),await b.firebaseUser.updatePassword(I)},[]),v=ee.useCallback(async(b,E,I)=>{const L=ze.auth.EmailAuthProvider.credential(b.firebaseUser.email,I);await b.firebaseUser.reauthenticateWithCredential(L),await b.firebaseUser.updateEmail(E)},[]),y=ee.useMemo(()=>({initialized:o,currentUser:e,usersMetadata:r,updateUsername:c,updatePassword:f,updateEmail:v}),[o,e,r,c,f,v]);return F.jsx(qr.Provider,{value:y,children:t})},jte=(t,e)=>e.edges===t.edges?e.length-t.length:e.edges-t.edges,Ute=(t,e)=>dd.indexOf(t.emoji)-dd.indexOf(e.emoji),Vte=(t,e)=>pd.indexOf(t.emoji)-pd.indexOf(e.emoji),Bu=ee.createContext([]),Bte=({children:t})=>{const{currentUser:e}=ee.useContext(qr),[n,r]=ee.useState(null);ee.useEffect(()=>ze.firestore().collection("tangrams").onSnapshot(a=>{const c=[];for(const f of a.docs){const v=f.id,{...y}=f.data();c.push({id:v,...y})}r(c)}),[]);const i=ee.useMemo(()=>{if(!n)return{initialized:!1,approvedTangrams:null,pendingTangrams:null,approvedTangramsByCategory:null};const o=[],a=[];for(const c of n)c.approved?o.push(c):e&&(e.isAdmin||c.uid===e.uid)&&a.push(c);return{initialized:!0,approvedTangrams:o,pendingTangrams:a}},[e,n]);return F.jsx(Bu.Provider,{value:i,children:t})},ji=ee.createContext(null),zte=({children:t})=>{const e=On(),n=ee.useContext(ko),{currentUser:r}=ee.useContext(qr),{approvedTangrams:i}=ee.useContext(Bu),[o,a]=ee.useState(null),[c,f]=ee.useState(null),[v,y]=ee.useState(null),[b,E]=ee.useState(0),[I,L]=ee.useState(!1);ee.useEffect(()=>{o&&c&&L(!0)},[o,c]),ee.useEffect(()=>ze.firestore().collection("stats").onSnapshot(he=>{const Z={},be={};for(const Ue of he.docs){const Ge=Ue.id,ft=Ue.data();Z[Ge]||(Z[Ge]={},be[Ge]={});for(const Le in ft)Z[Ge][Le]=ft[Le].completed,be[Ge][Le]=ft[Le].starred}a(Z),f(be)}),[]);const D=ee.useCallback(me=>!r||!c[me]?!1:c[me][r.uid]===!0,[r,c]),te=ee.useCallback(me=>!r||!o[me]?!1:o[me][r.uid]!==void 0,[r,o]),z=ee.useCallback(me=>{let he=`${window.location.origin}/?tangrams=${me.map(({id:Z})=>Z).join(",")}`;r&&(he+=`&uid=${r.uid}`),Pte(he),n(e.formatMessage({id:"Challenge link copied to clipboard"}))},[n,r,e]),Y=ee.useCallback(()=>{E(me=>me+1)},[]),K=ee.useCallback(me=>{const he=me?({id:be,edges:Ue},{id:Ge,edges:ft})=>{const Le=te(be),it=te(Ge);return!Le&&!it?ft-Ue:Le-it}:({id:be},{id:Ue})=>{const Ge=te(be),ft=te(Ue);return Ge-ft},Z=Dte([...i]).sort(he);y(Z)},[i,te]),ue=ee.useCallback(async(me,he)=>{r&&i.some(Z=>Z.id===me.id)&&!te(me.id)&&await ze.firestore().collection("stats").doc(me.id).set({[r.uid]:{completed:he}},{merge:!0})},[i,r,te]),oe=ee.useCallback(async me=>{if(r&&i.some(he=>he.id===me.id)){const he=D(me.id);await ze.firestore().collection("stats").doc(me.id).set({[r.uid]:{starred:!he}},{merge:!0})}},[i,r,D]),fe=ee.useMemo(()=>({initialized:I,requestSave:Y,saveRequestId:b,playlist:v,setPlaylist:y,shareTangrams:z,startRandomPlaylist:K,tangramsCompletedBy:o,tangramsStarredBy:c,toggleTangramStar:oe,markTangramAsComplete:ue,isTangramCompleted:te,isTangramStarred:D}),[I,Y,b,v,z,K,o,c,oe,ue,te,D]);return F.jsx(ji.Provider,{value:fe,children:t})};var QU={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},rP=rr.createContext&&rr.createContext(QU),Iu=function(){return Iu=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Iu.apply(this,arguments)},qte=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function JU(t){return t&&t.map(function(e,n){return rr.createElement(e.tag,Iu({key:n},e.attr),JU(e.child))})}function bi(t){return function(e){return rr.createElement(Wte,Iu({attr:Iu({},t.attr)},e),JU(t.child))}}function Wte(t){var e=function(n){var r=t.attr,i=t.size,o=t.title,a=qte(t,["attr","size","title"]),c=i||n.size||"1em",f;return n.className&&(f=n.className),t.className&&(f=(f?f+" ":"")+t.className),rr.createElement("svg",Iu({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,a,{className:f,style:Iu(Iu({color:t.color||n.color},n.style),t.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),o&&rr.createElement("title",null,o),t.children)};return rP!==void 0?rr.createElement(rP.Consumer,null,function(n){return e(n)}):e(QU)}function ZU(t){return bi({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"8",r:"7"}},{tag:"polyline",attr:{points:"8.21 13.89 7 23 12 20 17 23 15.79 13.88"}}]})(t)}function Gte(t){return bi({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"}}]})(t)}function e4(t){return bi({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"7",height:"7"}},{tag:"rect",attr:{x:"14",y:"3",width:"7",height:"7"}},{tag:"rect",attr:{x:"14",y:"14",width:"7",height:"7"}},{tag:"rect",attr:{x:"3",y:"14",width:"7",height:"7"}}]})(t)}function t4(t){return bi({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"}},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"}},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"}}]})(t)}function $te(t){return bi({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"}}]})(t)}function Hte(t){return bi({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"5 3 19 12 5 21 5 3"}}]})(t)}function n4(t){return bi({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}},{tag:"polyline",attr:{points:"17 21 17 13 7 13 7 21"}},{tag:"polyline",attr:{points:"7 3 7 8 15 8"}}]})(t)}function r4(t){return bi({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"}},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"}}]})(t)}function i4(t){return bi({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"18",cy:"5",r:"3"}},{tag:"circle",attr:{cx:"6",cy:"12",r:"3"}},{tag:"circle",attr:{cx:"18",cy:"19",r:"3"}},{tag:"line",attr:{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}},{tag:"line",attr:{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"}}]})(t)}function Pu(t){return bi({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"}}]})(t)}function Kte(t){return bi({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"5"}},{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"3"}},{tag:"line",attr:{x1:"12",y1:"21",x2:"12",y2:"23"}},{tag:"line",attr:{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}},{tag:"line",attr:{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}},{tag:"line",attr:{x1:"1",y1:"12",x2:"3",y2:"12"}},{tag:"line",attr:{x1:"21",y1:"12",x2:"23",y2:"12"}},{tag:"line",attr:{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}},{tag:"line",attr:{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"}}]})(t)}function o4(t){return bi({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"}}]})(t)}function Yte(t){return bi({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"}},{tag:"path",attr:{d:"M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"}}]})(t)}function Xte(t){return bi({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"}},{tag:"line",attr:{x1:"23",y1:"9",x2:"17",y2:"15"}},{tag:"line",attr:{x1:"17",y1:"9",x2:"23",y2:"15"}}]})(t)}function s4(t){return bi({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"}},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"}}]})(t)}const Qte="modulepreload",Jte=function(t){return"/"+t},iP={},Zte=function(e,n,r){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(o=>{if(o=Jte(o),o in iP)return;iP[o]=!0;const a=o.endsWith(".css"),c=a?'[rel="stylesheet"]':"";if(!!r)for(let y=i.length-1;y>=0;y--){const b=i[y];if(b.href===o&&(!a||b.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${c}`))return;const v=document.createElement("link");if(v.rel=a?"stylesheet":Qte,a||(v.as="script",v.crossOrigin=""),v.href=o,document.head.appendChild(v),a)return new Promise((y,b)=>{v.addEventListener("load",y),v.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>e()).catch(o=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o})};function yy(){return yy=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yy.apply(this,arguments)}function ene(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function tne(t){ee.useEffect(t,[])}function Lc(t,e){e===void 0&&(e={});var n=e,r=n.volume,i=r===void 0?1:r,o=n.playbackRate,a=o===void 0?1:o,c=n.soundEnabled,f=c===void 0?!0:c,v=n.interrupt,y=v===void 0?!1:v,b=n.onload,E=ene(n,["id","volume","playbackRate","soundEnabled","interrupt","onload"]),I=rr.useRef(null),L=rr.useRef(!1),D=rr.useState(null),te=D[0],z=D[1],Y=rr.useState(null),K=Y[0],ue=Y[1],oe=function(){typeof b=="function"&&b.call(this),L.current&&z(this.duration()*1e3),ue(this)};tne(function(){return Zte(()=>import("./howler-Gjpzaf1c.js").then(be=>be.h),__vite__mapDeps([])).then(function(be){if(!L.current){var Ue;I.current=(Ue=be.Howl)!==null&&Ue!==void 0?Ue:be.default.Howl,L.current=!0,new I.current(yy({src:Array.isArray(t)?t:[t],volume:i,rate:a,onload:oe},E))}}),function(){L.current=!1}}),rr.useEffect(function(){I.current&&K&&ue(new I.current(yy({src:Array.isArray(t)?t:[t],volume:i,onload:oe},E)))},[JSON.stringify(t)]),rr.useEffect(function(){K&&(K.volume(i),K.rate(a))},[i,a]);var fe=rr.useCallback(function(be){typeof be>"u"&&(be={}),!(!K||!f&&!be.forceSoundEnabled)&&(y&&K.stop(),be.playbackRate&&K.rate(be.playbackRate),K.play(be.id))},[K,f,y]),me=rr.useCallback(function(be){K&&K.stop(be)},[K]),he=rr.useCallback(function(be){K&&K.pause(be)},[K]),Z=[fe,{sound:K,stop:me,pause:he,duration:te}];return Z}const nne="/assets/star-wql4oqhK.wav",oP="/assets/button-J_WJeIQM.wav",rne="/assets/card-xj0x2Eh2.wav",ine="/assets/pop-DwoHE_6m.wav",one="/assets/victory-gnOqf9qL.wav",Ro=ee.createContext([!0,()=>{}]),sne=({children:t})=>{const[e,n]=ee.useState(!0),[r]=Lc(nne,{soundEnabled:e}),[i]=Lc(oP,{soundEnabled:e}),[o]=Lc(oP,{soundEnabled:e}),[a]=Lc(rne,{soundEnabled:e}),[c]=Lc(ine,{soundEnabled:e}),[f]=Lc(one,{soundEnabled:e});ee.useEffect(()=>{n(window.localStorage.getItem("sound")!=="off")},[]);const v=ee.useCallback(()=>{const b=!e;n(b),window.localStorage.setItem("sound",b?"on":"off")},[e]),y=ee.useMemo(()=>({soundEnabled:e,toggleSound:v,playButton:i,playToggle:o,playCard:a,playStar:r,playTangram:c,playVictory:f}),[e,v,i,o,a,r,c,f]);return F.jsx(Ro.Provider,{value:y,children:t})},Ux=Tp("button",({css:t,onClick:e,mute:n,...r})=>{const{playButton:i}=ee.useContext(Ro);return{css:{borderRadius:2,minWidth:0,minHeight:0,flex:"none",fontWeight:"bold",border:"none",fontSize:"inherit",color:"inherit",background:"none",cursor:"pointer",p:3,"&:disabled":{opacity:.3,cursor:"not-allowed"},"&:focus":{outline:"none"},...t},onClick:o=>{n||i(),e&&e(o)},...r}}),ane=Vs(Ux,{css:{border:"2px solid",borderRadius:2}}),une=Vs(Ux,{css:{border:"2px solid",color:"errorText"}}),yi=Vs(Ux,({css:t,...e})=>({css:{animation:`${fm({0:{bg:"pieces.lt2"},14:{bg:"pieces.rh"},28:{bg:"pieces.st2"},42:{bg:"pieces.mt1"},57:{bg:"pieces.st1"},71:{bg:"pieces.lt1"},85:{bg:"pieces.sq"},100:{bg:"pieces.lt2"}})} 20s linear infinite both`,color:"#FFFFFFDD",...t},...e})),L_=({uid:t,size:e="badge",css:n,onClick:r,...i})=>{const{playButton:o}=ee.useContext(Ro),a=ee.useContext(hs),c=ee.useMemo(()=>{const f=Object.values(a.colors.pieces);return f[t.charCodeAt(0)%f.length].slice(1)},[a,t]);return F.jsx(Te,{as:"img",src:`https://api.dicebear.com/7.x/croodles-neutral/svg?seed=${t}&backgroundColor=${encodeURIComponent(c)}`,css:{m:"2px",boxShadow:`0 0 0 2px ${a.colors.dialogText}`,borderRadius:"50%",backgroundColor:c,size:e,...n},onClick:r?f=>{o(),r(f)}:void 0,...i})},lne=(t,e)=>{const[n,r]=ee.useState(null),i=c=>{if(n&&c.touches&&c.touches.length!==1)clearTimeout(n.timeoutId);else{const f=c.touches?c.touches.item(0):c;r({timeoutId:setTimeout(t,e),startEvent:{clientX:f.clientX,clientY:f.clientY}})}},o=c=>{if(!n)return;let f=c.touches?c.touches.item(0):c;Math.sqrt(Math.pow(f.clientX-n.startEvent.clientX,2)+Math.pow(f.clientY-n.startEvent.clientY,2))>10&&clearTimeout(n.timeoutId)},a=()=>{n&&clearTimeout(n.timeoutId)};return{onMouseDown:i,onMouseUp:a,onMouseMove:o,onMouseLeave:a,onTouchStart:i,onTouchEnd:a,onTouchMove:o}},cne=t=>t.edges>16?0:t.edges>8?1:2,Xp=({showStroke:t,tangram:e,completed:n,selected:r,css:i,onBadgeClick:o,onClick:a,onLongPress:c,hideBadge:f,...v})=>{const{path:y,width:b,height:E,uid:I,approved:L,emoji:D}=e,te=ee.useMemo(()=>cne(e),[e]),{playCard:z}=ee.useContext(Ro),K=ee.useContext(hs).colors.difficulties[te],ue=ee.useCallback(()=>{c&&c(e)},[c,e]),oe=lne(ue,1e3);return F.jsx(Te,{css:i,onClick:a?()=>{z(),a(e)}:void 0,...oe,...v,children:F.jsxs(Te,{css:{opacity:I&&L===!1?.5:1,borderRadius:5,boxShadow:r?`0px 0px 0px 4px ${K}`:"0px 0px 0px 1px rgba(0, 0, 0, 0.1)",m:1,bg:"background",transition:`background-color ${cm}ms`,p:3,textAlign:"center",position:"relative",cursor:a||c?"pointer":void 0,width:128,height:178},deps:[K,r,I,L],children:[F.jsx(Te,{as:"svg",css:{flex:"1",justifyContent:"center",fill:K,stroke:t?"lime":void 0,strokeWidth:t?8:void 0},deps:[t,K],viewBox:`0 0 ${b} ${E}`,dangerouslySetInnerHTML:{__html:`<path d="${y}" />`}}),n&&F.jsx(Te,{css:{position:"absolute",top:1,left:1,fontSize:"30px"},children:D}),I&&!f&&F.jsx(L_,{uid:I,css:{position:"absolute",bottom:1,right:1,cursor:o?"pointer":void 0},onClick:o?fe=>{fe.stopPropagation(),o(I)}:void 0})]})})},zs=({children:t,title:e,onClose:n,big:r,css:i,...o})=>{const{playButton:a}=ee.useContext(Ro);return iI.createPortal(F.jsx(Te,{onClick:n,css:{position:"fixed",top:0,left:0,right:0,bottom:0,bg:"#00000080",alignItems:"center",justifyContent:"center",animation:`${go/2}ms fadeIn ease both`,p:3},children:F.jsxs(Te,{css:{flex:"0 1 auto",bg:"dialogBackground",color:"dialogText",borderRadius:3,transition:`background-color ${cm}ms, color ${cm}ms`,fontSize:3,p:3,gap:3,maxWidth:"95vw",width:r?"568px":"400px"},onClick:c=>c.stopPropagation(),children:[F.jsxs(Te,{css:{flexDirection:"row",gap:3,alignItems:"center",justifyContent:"space-between",zIndex:1},children:[e,F.jsx(Te,{as:s4,css:{cursor:"pointer",size:"badge",ml:e?void 0:"auto"},onClick:()=>{a(),n()}})]}),F.jsx(Te,{css:{overflow:"auto",flex:"1",maxWidth:"100%",...i},...o,children:t})]})}),document.getElementById("dialogContainer"))},mt=Tp("div",{css:{display:"inline",minWidth:0,minHeight:0,flex:"none"}}),Pi=Vs(mt,{css:{fontSize:2,color:"errorText"}}),ca=Vs(mt,{css:{fontSize:2,opacity:.75}}),to=Vs(mt,{css:{fontSize:4,fontWeight:"bold"}}),Mc=Vs(mt,{css:{fontSize:3,fontWeight:"bold"}}),sP=Tp("a",{css:{cursor:"pointer",textDecoration:"underline",color:"inherit","&:visited":{color:"inherit"}}}),as=Vs(mt,{css:{cursor:"pointer",textDecoration:"underline"}}),Ii=({icon:t,css:e})=>F.jsx(mt,{as:t,css:{position:"relative",top:"0.1em",size:"0.9em",...e}}),hne=({uid:t,tangrams:e,deferred:n})=>{const r=On(),{usersMetadata:i}=ee.useContext(qr);ee.useContext(ji);const o=i[t]?i[t].username:null;return F.jsxs(zs,{big:!0,title:F.jsx(to,{children:o?r.formatMessage({id:"{username} challenged you"},{username:o}):r.formatMessage({id:"Rise to the challenge"},{username:o})}),onClose:()=>n.reject(Gn),css:{gap:3,overflow:"initial",maxWidth:"568px"},children:[F.jsx(Te,{css:{flex:"1",overflow:"auto",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",m:-1},children:e.map(a=>F.jsx(Xp,{selected:!0,tangram:a,css:{m:1}},a.id))}),F.jsx(yi,{onClick:()=>{n.resolve()},children:r.formatMessage({id:"Let's go!"})})]})},Xn=Tp("input",{type:"text",css:{color:"inherit",fontSize:"inherit",bg:"inputBackground",border:"none",borderRadius:2,borderColor:"currentColor",p:2,"&:disabled":{opacity:.5,cursor:"not-allowed"},"&:focus":{outline:"none"}}}),fne=Vs(Te,({css:t,...e})=>({css:{p:3,alignItems:"center",position:"sticky",top:0,zIndex:1,background:`linear-gradient(0deg, rgba(0,0,0,0) 0%, ${ee.useContext(hs).colors.dialogBackground} 50%)`,...t},...e})),dne=({deferred:t})=>{const e=On(),{currentUser:n}=ee.useContext(qr),{pendingTangrams:r,approvedTangrams:i}=ee.useContext(Bu),{showProfile:o,showTangram:a}=ee.useContext(Jp),{setPlaylist:c,shareTangrams:f,startRandomPlaylist:v,isTangramCompleted:y,isTangramStarred:b}=ee.useContext(ji),[E,I]=ee.useState([]),[L,D]=ee.useState(()=>{const fe=window.localStorage.getItem("selectedGalleryFilter");return["all","uncompleted","starred","pending"].includes(fe)?fe:"all"}),te=fe=>{D(fe.target.value),window.localStorage.setItem("selectedGalleryFilter",fe.target.value)},z=ee.useCallback(fe=>{I(me=>me.some(he=>he.id===fe.id)?me.filter(he=>he.id!==fe.id):[...me,fe])},[]),Y=()=>{E.length?c(E):v(),t.resolve()},K=()=>t.reject(Gn),ue=ee.useMemo(()=>{const fe=L==="pending"?r:i,me={};for(const Z of fe)L==="uncompleted"&&y(Z.id)||L==="starred"&&!b(Z.id)||(me[Z.category]||(me[Z.category]=[]),me[Z.category].push(Z));const he={};for(const Z of Object.keys(me).sort())he[Z]=me[Z].sort(Z==="letters"?Vte:Z==="digits"?Ute:jte);return he},[r,i,L,y,b]),oe=Object.keys(ue);return F.jsx(F.Fragment,{children:F.jsx(zs,{big:!0,title:F.jsx(to,{children:e.formatMessage({id:"Tangram gallery"})}),css:{gap:3,width:"568px"},onClose:K,children:F.jsxs(F.Fragment,{children:[F.jsxs(Xn,{as:"select",value:L,onChange:te,children:[F.jsx("option",{value:"all",children:e.formatMessage({id:"All tangrams"})}),F.jsx("option",{value:"uncompleted",children:e.formatMessage({id:"Uncompleted tangrams"})}),F.jsx("option",{value:"starred",children:e.formatMessage({id:" Starred tangrams"})}),F.jsx("option",{value:"pending",children:e.formatMessage({id:"Pending approbation tangrams"})})]}),F.jsx(Te,{css:{flex:"1",overflow:"auto",gap:3},children:oe.length===0?F.jsx(Te,{css:{gap:3,alignItems:"center"},children:L==="uncompleted"?F.jsxs(F.Fragment,{children:[F.jsx(mt,{css:{fontSize:"8em"},children:""}),F.jsxs(Te,{css:{gap:2,alignItems:"center",px:3},children:[F.jsx(Mc,{css:{textAlign:"center"},children:F.jsx(Jt,{id:"You've completed all tangrams"})}),F.jsx(ca,{children:F.jsx(Jt,{id:"Come back later for more or create your own tangrams"})})]})]}):L==="pending"?n&&n.isAdmin?F.jsxs(F.Fragment,{children:[F.jsx(mt,{css:{fontSize:"8em"},children:""}),F.jsxs(Te,{css:{gap:2,alignItems:"center",px:3},children:[F.jsx(Mc,{css:{textAlign:"center"},children:F.jsx(Jt,{id:"No tangram left to approve"})}),F.jsx(ca,{children:F.jsx(Jt,{id:"Good job moderator {username}!",values:{username:n.username}})})]})]}):F.jsxs(F.Fragment,{children:[F.jsx(mt,{css:{fontSize:"8em"},children:""}),F.jsxs(Te,{css:{gap:2,alignItems:"center",px:3},children:[F.jsx(Mc,{css:{textAlign:"center"},children:F.jsx(Jt,{id:"All your tangrams have been approved"})}),F.jsx(ca,{children:F.jsx(Jt,{id:"Create more tangrams and earn <starIcon></starIcon>",values:{starIcon:()=>F.jsx(Ii,{icon:Pu,css:{fill:"currentColor"}})}})})]})]}):L==="starred"?F.jsxs(F.Fragment,{children:[F.jsx(mt,{css:{fontSize:"8em"},children:""}),F.jsxs(Te,{css:{gap:2,alignItems:"center",px:3},children:[F.jsx(Mc,{css:{textAlign:"center"},children:F.jsx(Jt,{id:"No starred tangrams yet"})}),F.jsx(ca,{children:F.jsx(Jt,{id:"Press <starIcon></starIcon> to star a tangram and show your love",values:{starIcon:()=>F.jsx(Ii,{icon:Pu,css:{fill:"currentColor"}})}})})]})]}):F.jsxs(F.Fragment,{children:[F.jsx(mt,{css:{fontSize:"8em"},children:""}),F.jsxs(Te,{css:{gap:2,alignItems:"center",px:3},children:[F.jsx(Mc,{css:{textAlign:"center"},children:F.jsx(Jt,{id:"Nothing to see here"})}),F.jsx(ca,{children:F.jsx(Jt,{id:"Something might have gone wrong"})})]})]})},"noresult"):F.jsx(Te,{css:{flex:"1",overflow:"auto",gap:3},children:oe.map(fe=>F.jsxs(Te,{children:[F.jsx(fne,{children:F.jsx(Mc,{children:e.formatMessage({id:fe})})}),F.jsx(Te,{css:{display:"grid",gridTemplateColumns:"repeat(auto-fill, 136px)",gridColumnGap:2,gridRowGap:2,justifyContent:"center",justifyItems:"center",alignItems:"center"},children:ue[fe].map(me=>F.jsx(Xp,{showStroke:L==="pending"&&n&&n.isAdmin,tangram:me,completed:y(me.id),selected:E.some(he=>he.id===me.id),onClick:z,onBadgeClick:o,onLongPress:a},me.id))})]},fe))},"results")}),F.jsxs(Te,{css:{flexDirection:"row",gap:2},children:[F.jsx(yi,{onClick:Y,css:{flex:"1"},children:E.length===0?e.formatMessage({id:"Play now!"}):E.length===1?e.formatMessage({id:"Start 1 tangram!"}):e.formatMessage({id:"Start {count} tangrams!"},{count:E.length})}),F.jsx(yi,{disabled:E.length===0,onClick:()=>f(E),children:F.jsx(Te,{as:i4,css:{size:"icon",m:"-2px"}})})]})]})})})},pne=({deferred:t})=>{const e=On(),{showProfile:n}=ee.useContext(Jp),{currentUser:r,usersMetadata:i}=ee.useContext(qr),{approvedTangrams:o}=ee.useContext(Bu),{tangramsStarredBy:a,tangramsCompletedBy:c}=ee.useContext(ji),[f,v]=ee.useState(()=>{const L=window.localStorage.getItem("selectedLeaderboard");return["stars","completed","created"].includes(L)?L:"stars"}),y=L=>{v(L.target.value),window.localStorage.setItem("selectedLeaderboard",L.target.value)},b=L=>{n(L)},E=ee.useMemo(()=>{const L={},D={},te={};for(const{id:z,uid:Y}of o){D[Y]||(D[Y]=0,L[Y]=0);for(const K in a[z])K!==Y&&a[z][K]&&(L[Y]+=1);D[Y]+=1;for(const K in c[z])te[K]||(te[K]=0),te[K]+=1}return Object.keys(i).map(z=>{const Y=i[z];return{uid:z,...Y,stars:L[z]||0,completed:te[z]||0,created:D[z]||0}})},[o,a,c,i]),I=ee.useMemo(()=>{if(E)return E.sort((L,D)=>D[f]-L[f])},[E,f]);return F.jsx(zs,{title:F.jsx(to,{children:e.formatMessage({id:"Leaderboard"})}),onClose:()=>t.reject(Gn),css:{gap:3},children:F.jsxs(F.Fragment,{children:[F.jsxs(Xn,{as:"select",value:f,onChange:y,children:[F.jsx("option",{value:"stars",children:e.formatMessage({id:"Stars earned"})}),F.jsx("option",{value:"completed",children:e.formatMessage({id:"Completed tangrams"})}),F.jsx("option",{value:"created",children:e.formatMessage({id:"Created tangrams"})})]}),F.jsx(Te,{css:{flex:"1",overflow:"auto",gap:2},children:I.map(({uid:L,username:D,...te},z)=>F.jsxs(Te,{css:{flexDirection:"row",gap:2,alignItems:"center",fontSize:z===0?"1.6em":z===1?"1.4em":z===2?"1.2em":void 0},deps:[z],children:[F.jsx(L_,{uid:L,size:"badge",onClick:()=>b(L)}),F.jsx(mt,{css:{flex:"1",fontWeight:r&&r.uid===L?"bold":void 0},deps:[r,L],children:D}),F.jsxs(mt,{children:[te[f],f==="stars"&&F.jsxs(F.Fragment,{children:[" ",F.jsx(Ii,{icon:Pu,css:{fill:"currentColor"}})]})]})]},L))})]})})};var Qp=t=>t.type==="checkbox",ah=t=>t instanceof Date,xi=t=>t==null;const a4=t=>typeof t=="object";var Br=t=>!xi(t)&&!Array.isArray(t)&&a4(t)&&!ah(t),vne=t=>Br(t)&&t.target?Qp(t.target)?t.target.checked:t.target.value:t,gne=t=>t.substring(0,t.search(/.\d/))||t,mne=(t,e)=>[...t].some(n=>gne(e)===n),Ep=t=>(t||[]).filter(Boolean),Lr=t=>t===void 0,st=(t,e,n)=>{if(Br(t)&&e){const r=Ep(e.split(/[,[\].]+?/)).reduce((i,o)=>xi(i)?i:i[o],t);return Lr(r)||r===t?Lr(t[e])?n:t[e]:r}};const yne={BLUR:"blur",CHANGE:"change"},Xo={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Zs={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};var Vx=(t,e)=>{const n=Object.assign({},t);return delete n[e],n};ee.createContext(null);var _ne=(t,e,n,r=!0)=>{function i(a){return()=>{if(a in t)return e[a]!==Xo.all&&(e[a]=!r||Xo.all),n&&(n[a]=!0),t[a]}}const o={};for(const a in t)Object.defineProperty(o,a,{get:i(a)});return o},Gi=t=>Br(t)&&!Object.keys(t).length,wne=(t,e,n)=>{const r=Vx(t,"name");return Gi(r)||Object.keys(r).length>=Object.keys(e).length||Object.keys(r).find(i=>e[i]===(!n||Xo.all))},Rb=t=>Array.isArray(t)?t:[t];function Ene(t){const e=ee.useRef(t);e.current=t,ee.useEffect(()=>{const n=i=>{i&&i.unsubscribe()},r=!t.disabled&&e.current.subject.subscribe({next:e.current.callback});return()=>n(r)},[t.disabled])}var ks=t=>typeof t=="string",bne=(t,e,n,r)=>{const i=Array.isArray(t);return ks(t)?(r&&e.watch.add(t),st(n,t)):i?t.map(o=>(r&&e.watch.add(o),st(n,o))):(r&&(e.watchAll=!0),n)},M_=t=>typeof t=="function",u4=t=>{for(const e in t)if(M_(t[e]))return!0;return!1},Sne=(t,e,n,r,i)=>e?Object.assign(Object.assign({},n[t]),{types:Object.assign(Object.assign({},n[t]&&n[t].types?n[t].types:{}),{[r]:i||!0})}):{},Bx=t=>/^\w*$/.test(t),l4=t=>Ep(t.replace(/["|']|\]/g,"").split(/\.|\[/));function Wn(t,e,n){let r=-1;const i=Bx(e)?[e]:l4(e),o=i.length,a=o-1;for(;++r<o;){const c=i[r];let f=n;if(r!==a){const v=t[c];f=Br(v)||Array.isArray(v)?v:isNaN(+i[r+1])?{}:[]}t[c]=f,t=t[c]}return t}const K1=(t,e,n)=>{for(const r of n||Object.keys(t)){const i=st(t,r);if(i){const o=i._f,a=Vx(i,"_f");if(o&&e(o.name)){if(o.ref.focus&&Lr(o.ref.focus()))break;if(o.refs){o.refs[0].focus();break}}else Br(a)&&K1(a,e)}}};var aP=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));function cd(t){let e;const n=Array.isArray(t);if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(n||Br(t)){e=n?[]:{};for(const r in t){if(M_(t[r])){e=t;break}e[r]=cd(t[r])}}else return t;return e}function Ob(){let t=[];return{get observers(){return t},next:i=>{for(const o of t)o.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(o=>o!==i)}}),unsubscribe:()=>{t=[]}}}var _y=t=>xi(t)||!a4(t);function uh(t,e){if(_y(t)||_y(e))return t===e;if(ah(t)&&ah(e))return t.getTime()===e.getTime();const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const i of n){const o=t[i];if(!r.includes(i))return!1;if(i!=="ref"){const a=e[i];if(ah(o)&&ah(a)||Br(o)&&Br(a)||Array.isArray(o)&&Array.isArray(a)?!uh(o,a):o!==a)return!1}}return!0}var uP=t=>({isOnSubmit:!t||t===Xo.onSubmit,isOnBlur:t===Xo.onBlur,isOnChange:t===Xo.onChange,isOnAll:t===Xo.all,isOnTouch:t===Xo.onTouched}),Wh=t=>typeof t=="boolean",zx=t=>t.type==="file",Y1=t=>t instanceof HTMLElement,c4=t=>t.type==="select-multiple",qx=t=>t.type==="radio",Tne=t=>qx(t)||Qp(t),lP=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u",Pb=t=>Y1(t)&&document.contains(t);function Ine(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=Lr(t)?r++:t[e[r++]];return t}function ci(t,e){const n=Bx(e)?[e]:l4(e),r=n.length==1?t:Ine(t,n),i=n[n.length-1];let o;r&&delete r[i];for(let a=0;a<n.slice(0,-1).length;a++){let c=-1,f;const v=n.slice(0,-(a+1)),y=v.length-1;for(a>0&&(o=t);++c<v.length;){const b=v[c];f=f?f[b]:t[b],y===c&&(Br(f)&&Gi(f)||Array.isArray(f)&&!f.filter(E=>Br(E)&&!Gi(E)||Wh(E)).length)&&(o?delete o[b]:delete t[b]),o=f}}return t}function wy(t,e={}){const n=Array.isArray(t);if(Br(t)||n)for(const r in t)Array.isArray(t[r])||Br(t[r])&&!u4(t[r])?(e[r]=Array.isArray(t[r])?[]:{},wy(t[r],e[r])):xi(t[r])||(e[r]=!0);return e}function h4(t,e,n){const r=Array.isArray(t);if(Br(t)||r)for(const i in t)Array.isArray(t[i])||Br(t[i])&&!u4(t[i])?Lr(e)||_y(n[i])?n[i]=Array.isArray(t[i])?wy(t[i],[]):Object.assign({},wy(t[i])):h4(t[i],xi(e)?{}:e[i],n[i]):n[i]=!uh(t[i],e[i]);return n}var cP=(t,e)=>h4(t,e,wy(e));const hP={value:!1,isValid:!1},fP={value:!0,isValid:!0};var f4=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Lr(t[0].attributes.value)?Lr(t[0].value)||t[0].value===""?fP:{value:t[0].value,isValid:!0}:fP:hP}return hP},d4=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>Lr(t)?t:e?t===""?NaN:+t:n&&ks(t)?new Date(t):r?r(t):t;const dP={isValid:!1,value:null};var p4=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,dP):dP;function Db(t){const e=t.ref;if(!(t.refs?t.refs.every(n=>n.disabled):e.disabled))return zx(e)?e.files:qx(e)?p4(t.refs).value:c4(e)?[...e.selectedOptions].map(({value:n})=>n):Qp(e)?f4(t.refs).value:d4(Lr(e.value)?t.ref.value:e.value,t)}var xne=(t,e,n,r)=>{const i={};for(const o of t){const a=st(e,o);a&&Wn(i,o,a._f)}return{criteriaMode:n,names:[...t],fields:i,shouldUseNativeValidation:r}},Ey=t=>t instanceof RegExp,ed=t=>Lr(t)?void 0:Ey(t)?t.source:Br(t)?Ey(t.value)?t.value.source:t.value:t,Cne=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate);function pP(t,e,n){const r=st(t,n);if(r||Bx(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const o=i.join("."),a=st(e,o),c=st(t,o);if(a&&!Array.isArray(a)&&n!==o)return{name:n};if(c&&c.type)return{name:o,error:c};i.pop()}return{name:n}}var Nne=(t,e,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(e||t):(n?r.isOnBlur:i.isOnBlur)?!t:(n?r.isOnChange:i.isOnChange)?t:!0,vP=(t,e)=>!Ep(st(t,e)).length&&ci(t,e),om=t=>ks(t)||ee.isValidElement(t);function gP(t,e,n="validate"){if(om(t)||Array.isArray(t)&&t.every(om)||Wh(t)&&!t)return{type:n,message:om(t)?t:"",ref:e}}var Fc=t=>Br(t)&&!Ey(t)?t:{value:t,message:""},mP=async(t,e,n,r)=>{const{ref:i,refs:o,required:a,maxLength:c,minLength:f,min:v,max:y,pattern:b,validate:E,name:I,valueAsNumber:L,mount:D,disabled:te}=t._f;if(!D||te)return{};const z=o?o[0]:i,Y=be=>{r&&z.reportValidity&&(z.setCustomValidity(Wh(be)?"":be||" "),z.reportValidity())},K={},ue=qx(i),oe=Qp(i),fe=ue||oe,me=(L||zx(i))&&!i.value||e===""||Array.isArray(e)&&!e.length,he=Sne.bind(null,I,n,K),Z=(be,Ue,Ge,ft=Zs.maxLength,Le=Zs.minLength)=>{const it=be?Ue:Ge;K[I]=Object.assign({type:be?ft:Le,message:it,ref:i},he(be?ft:Le,it))};if(a&&(!fe&&(me||xi(e))||Wh(e)&&!e||oe&&!f4(o).isValid||ue&&!p4(o).isValid)){const{value:be,message:Ue}=om(a)?{value:!!a,message:a}:Fc(a);if(be&&(K[I]=Object.assign({type:Zs.required,message:Ue,ref:z},he(Zs.required,Ue)),!n))return Y(Ue),K}if(!me&&(!xi(v)||!xi(y))){let be,Ue;const Ge=Fc(y),ft=Fc(v);if(isNaN(e)){const Le=i.valueAsDate||new Date(e);ks(Ge.value)&&(be=Le>new Date(Ge.value)),ks(ft.value)&&(Ue=Le<new Date(ft.value))}else{const Le=i.valueAsNumber||parseFloat(e);xi(Ge.value)||(be=Le>Ge.value),xi(ft.value)||(Ue=Le<ft.value)}if((be||Ue)&&(Z(!!be,Ge.message,ft.message,Zs.max,Zs.min),!n))return Y(K[I].message),K}if((c||f)&&!me&&ks(e)){const be=Fc(c),Ue=Fc(f),Ge=!xi(be.value)&&e.length>be.value,ft=!xi(Ue.value)&&e.length<Ue.value;if((Ge||ft)&&(Z(Ge,be.message,Ue.message),!n))return Y(K[I].message),K}if(b&&!me&&ks(e)){const{value:be,message:Ue}=Fc(b);if(Ey(be)&&!e.match(be)&&(K[I]=Object.assign({type:Zs.pattern,message:Ue,ref:i},he(Zs.pattern,Ue)),!n))return Y(Ue),K}if(E){if(M_(E)){const be=await E(e),Ue=gP(be,z);if(Ue&&(K[I]=Object.assign(Object.assign({},Ue),he(Zs.validate,Ue.message)),!n))return Y(Ue.message),K}else if(Br(E)){let be={};for(const Ue in E){if(!Gi(be)&&!n)break;const Ge=gP(await E[Ue](e),z,Ue);Ge&&(be=Object.assign(Object.assign({},Ge),he(Ue,Ge.message)),Y(Ge.message),n&&(K[I]=be))}if(!Gi(be)&&(K[I]=Object.assign({ref:z},be),!n))return K}}return Y(!0),K};const Ane={mode:Xo.onSubmit,reValidateMode:Xo.onChange,shouldFocusError:!0};function kne(t={}){let e=Object.assign(Object.assign({},Ane),t),n={isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}},r={},i=e.defaultValues||{},o=e.shouldUnregister?{}:cd(i),a={action:!1,mount:!1,watch:!1},c={mount:new Set,unMount:new Set,array:new Set,watch:new Set},f,v=0,y={};const b={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},E={watch:Ob(),array:Ob(),state:Ob()},I=uP(e.mode),L=uP(e.reValidateMode),D=e.criteriaMode===Xo.all,te=(ce,ge)=>(..._e)=>{clearTimeout(v),v=window.setTimeout(()=>ce(..._e),ge)},z=async ce=>{let ge=!1;return b.isValid&&(ge=e.resolver?Gi((await me()).errors):await Z(r,!0),!ce&&ge!==n.isValid&&(n.isValid=ge,E.state.next({isValid:ge}))),ge},Y=(ce,ge,_e,je=[],Pe=!0,Ve=!0)=>{if(a.action=!0,Ve&&st(r,ce)){const He=ge(st(r,ce),_e.argA,_e.argB);Pe&&Wn(r,ce,He)}if(Array.isArray(st(n.errors,ce))){const He=ge(st(n.errors,ce),_e.argA,_e.argB);Pe&&Wn(n.errors,ce,He),vP(n.errors,ce)}if(b.touchedFields&&st(n.touchedFields,ce)){const He=ge(st(n.touchedFields,ce),_e.argA,_e.argB);Pe&&Wn(n.touchedFields,ce,He),vP(n.touchedFields,ce)}(b.dirtyFields||b.isDirty)&&(n.dirtyFields=cP(i,o)),E.state.next({isDirty:Ue(ce,je),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})},K=(ce,ge)=>(Wn(n.errors,ce,ge),E.state.next({errors:n.errors})),ue=(ce,ge,_e)=>{const je=st(r,ce);if(je){const Pe=st(o,ce,st(i,ce));Lr(Pe)||_e&&_e.defaultChecked||ge?Wn(o,ce,ge?Pe:Db(je._f)):Le(ce,Pe)}a.mount&&z()},oe=(ce,ge,_e,je=!0)=>{let Pe=!1;const Ve={name:ce},He=st(n.touchedFields,ce);if(b.isDirty){const zt=n.isDirty;n.isDirty=Ve.isDirty=Ue(),Pe=zt!==Ve.isDirty}if(b.dirtyFields&&!_e){const zt=st(n.dirtyFields,ce);uh(st(i,ce),ge)?ci(n.dirtyFields,ce):Wn(n.dirtyFields,ce,!0),Ve.dirtyFields=n.dirtyFields,Pe=Pe||zt!==st(n.dirtyFields,ce)}return _e&&!He&&(Wn(n.touchedFields,ce,_e),Ve.touchedFields=n.touchedFields,Pe=Pe||b.touchedFields&&He!==_e),Pe&&je&&E.state.next(Ve),Pe?Ve:{}},fe=async(ce,ge,_e,je,Pe)=>{const Ve=st(n.errors,ge),He=b.isValid&&n.isValid!==_e;if(t.delayError&&je?(f=f||te(K,t.delayError),f(ge,je)):(clearTimeout(v),je?Wn(n.errors,ge,je):ci(n.errors,ge)),((je?!uh(Ve,je):Ve)||!Gi(Pe)||He)&&!ce){const zt=Object.assign(Object.assign(Object.assign({},Pe),He?{isValid:_e}:{}),{errors:n.errors,name:ge});n=Object.assign(Object.assign({},n),zt),E.state.next(zt)}y[ge]--,b.isValidating&&!y[ge]&&(E.state.next({isValidating:!1}),y={})},me=async ce=>e.resolver?await e.resolver(Object.assign({},o),e.context,xne(ce||c.mount,r,e.criteriaMode,e.shouldUseNativeValidation)):{},he=async ce=>{const{errors:ge}=await me();if(ce)for(const _e of ce){const je=st(ge,_e);je?Wn(n.errors,_e,je):ci(n.errors,_e)}else n.errors=ge;return ge},Z=async(ce,ge,_e={valid:!0})=>{for(const je in ce){const Pe=ce[je];if(Pe){const Ve=Pe._f,He=Vx(Pe,"_f");if(Ve){const zt=await mP(Pe,st(o,Ve.name),D,e.shouldUseNativeValidation);if(zt[Ve.name]&&(_e.valid=!1,ge))break;ge||(zt[Ve.name]?Wn(n.errors,Ve.name,zt[Ve.name]):ci(n.errors,Ve.name))}He&&await Z(He,ge,_e)}}return _e.valid},be=()=>{for(const ce of c.unMount){const ge=st(r,ce);ge&&(ge._f.refs?ge._f.refs.every(_e=>!Pb(_e)):!Pb(ge._f.ref))&&Xt(ce)}c.unMount=new Set},Ue=(ce,ge)=>(ce&&ge&&Wn(o,ce,ge),!uh(Ne(),i)),Ge=(ce,ge,_e)=>{const je=Object.assign({},a.mount?o:Lr(ge)?i:ks(ce)?{[ce]:ge}:ge);return bne(ce,c,je,_e)},ft=ce=>st(a.mount?o:i,ce,t.shouldUnregister?st(i,ce,[]):[]),Le=(ce,ge,_e={})=>{const je=st(r,ce);let Pe=ge;if(je){const Ve=je._f;Ve&&(Wn(o,ce,d4(ge,Ve)),Pe=lP&&Y1(Ve.ref)&&xi(ge)?"":ge,c4(Ve.ref)?[...Ve.ref.options].forEach(He=>He.selected=Pe.includes(He.value)):Ve.refs?Qp(Ve.ref)?Ve.refs.length>1?Ve.refs.forEach(He=>He.checked=Array.isArray(Pe)?!!Pe.find(zt=>zt===He.value):Pe===He.value):Ve.refs[0].checked=!!Pe:Ve.refs.forEach(He=>He.checked=He.value===Pe):zx(Ve.ref)||(Ve.ref.value=Pe))}(_e.shouldDirty||_e.shouldTouch)&&oe(ce,Pe,_e.shouldTouch),_e.shouldValidate&&Fe(ce)},it=(ce,ge,_e)=>{for(const je in ge){const Pe=ge[je],Ve=`${ce}.${je}`,He=st(r,Ve);(c.array.has(ce)||!_y(Pe)||He&&!He._f)&&!ah(Pe)?it(Ve,Pe,_e):Le(Ve,Pe,_e)}},xe=(ce,ge,_e={})=>{const je=st(r,ce),Pe=c.array.has(ce);Wn(o,ce,ge),Pe?(E.array.next({name:ce,values:o}),(b.isDirty||b.dirtyFields)&&_e.shouldDirty&&(n.dirtyFields=cP(i,o),E.state.next({name:ce,dirtyFields:n.dirtyFields,isDirty:Ue(ce,ge)}))):je&&!je._f&&!xi(ge)?it(ce,ge,_e):Le(ce,ge,_e),aP(ce,c)&&E.state.next({}),E.watch.next({name:ce})},_t=async ce=>{const ge=ce.target;let _e=ge.name;const je=st(r,_e);if(je){let Pe,Ve;const He=ge.type?Db(je._f):vne(ce),zt=ce.type===yne.BLUR,ri=!Cne(je._f)&&!e.resolver&&!st(n.errors,_e)&&!je._f.deps||Nne(zt,st(n.touchedFields,_e),n.isSubmitted,L,I),ao=aP(_e,c,zt);zt?je._f.onBlur&&je._f.onBlur(ce):je._f.onChange&&je._f.onChange(ce),Wn(o,_e,He);const Oo=oe(_e,He,zt,!1),xn=!Gi(Oo)||ao;if(!zt&&E.watch.next({name:_e,type:ce.type}),ri)return xn&&E.state.next(Object.assign({name:_e},ao?{}:Oo));if(!zt&&ao&&E.state.next({}),y[_e]=(y[_e],1),b.isValidating&&E.state.next({isValidating:!0}),e.resolver){const{errors:Fa}=await me([_e]),hn=pP(n.errors,r,_e),zu=pP(Fa,r,hn.name||_e);Pe=zu.error,_e=zu.name,Ve=Gi(Fa)}else Pe=(await mP(je,st(o,_e),D,e.shouldUseNativeValidation))[_e],Ve=await z(!0);je._f.deps&&Fe(je._f.deps),fe(!1,_e,Ve,Pe,Oo)}},Fe=async(ce,ge={})=>{let _e,je;const Pe=Rb(ce);if(E.state.next({isValidating:!0}),e.resolver){const Ve=await he(Lr(ce)?ce:Pe);_e=Gi(Ve),je=ce?!Pe.some(He=>st(Ve,He)):_e}else ce?(je=(await Promise.all(Pe.map(async Ve=>{const He=st(r,Ve);return await Z(He&&He._f?{[Ve]:He}:He)}))).every(Boolean),!(!je&&!n.isValid)&&z()):je=_e=await Z(r);return E.state.next(Object.assign(Object.assign(Object.assign({},!ks(ce)||b.isValid&&_e!==n.isValid?{}:{name:ce}),e.resolver?{isValid:_e}:{}),{errors:n.errors,isValidating:!1})),ge.shouldFocus&&!je&&K1(r,Ve=>st(n.errors,Ve),ce?Pe:c.mount),je},Ne=ce=>{const ge=Object.assign(Object.assign({},i),a.mount?o:{});return Lr(ce)?ge:ks(ce)?st(ge,ce):ce.map(_e=>st(ge,_e))},qe=ce=>{ce?Rb(ce).forEach(ge=>ci(n.errors,ge)):n.errors={},E.state.next({errors:n.errors,isValid:!0})},Ct=(ce,ge,_e)=>{const je=(st(r,ce,{_f:{}})._f||{}).ref;Wn(n.errors,ce,Object.assign(Object.assign({},ge),{ref:je})),E.state.next({name:ce,errors:n.errors,isValid:!1}),_e&&_e.shouldFocus&&je&&je.focus&&je.focus()},tt=(ce,ge)=>M_(ce)?E.watch.subscribe({next:_e=>ce(Ge(void 0,ge),_e)}):Ge(ce,ge,!0),Xt=(ce,ge={})=>{for(const _e of ce?Rb(ce):c.mount)c.mount.delete(_e),c.array.delete(_e),st(r,_e)&&(ge.keepValue||(ci(r,_e),ci(o,_e)),!ge.keepError&&ci(n.errors,_e),!ge.keepDirty&&ci(n.dirtyFields,_e),!ge.keepTouched&&ci(n.touchedFields,_e),!e.shouldUnregister&&!ge.keepDefaultValue&&ci(i,_e));E.watch.next({}),E.state.next(Object.assign(Object.assign({},n),ge.keepDirty?{isDirty:Ue()}:{})),!ge.keepIsValid&&z()},Nt=(ce,ge={})=>{let _e=st(r,ce);return Wn(r,ce,{_f:Object.assign(Object.assign(Object.assign({},_e&&_e._f?_e._f:{ref:{name:ce}}),{name:ce,mount:!0}),ge)}),c.mount.add(ce),!Lr(ge.value)&&!ge.disabled&&Wn(o,ce,st(o,ce,ge.value)),_e?Wh(ge.disabled)&&Wn(o,ce,ge.disabled?void 0:st(o,ce,Db(_e._f))):ue(ce,!0),Object.assign(Object.assign(Object.assign({},Wh(ge.disabled)?{disabled:ge.disabled}:{}),e.shouldUseNativeValidation?{required:!!ge.required,min:ed(ge.min),max:ed(ge.max),minLength:ed(ge.minLength),maxLength:ed(ge.maxLength),pattern:ed(ge.pattern)}:{}),{name:ce,onChange:_t,onBlur:_t,ref:je=>{if(je){Nt(ce,ge),_e=st(r,ce);const Pe=Lr(je.value)&&je.querySelectorAll&&je.querySelectorAll("input,select,textarea")[0]||je,Ve=Tne(Pe);if(Pe===_e._f.ref||Ve&&Ep(_e._f.refs).find(He=>He===Pe))return;Wn(r,ce,{_f:Ve?Object.assign(Object.assign({},_e._f),{refs:[...Ep(_e._f.refs).filter(Pb),Pe],ref:{type:Pe.type,name:ce}}):Object.assign(Object.assign({},_e._f),{ref:Pe})}),!ge.disabled&&ue(ce,!1,Pe)}else _e=st(r,ce,{}),_e._f&&(_e._f.mount=!1),(e.shouldUnregister||ge.shouldUnregister)&&!(mne(c.array,ce)&&a.action)&&c.unMount.add(ce)}})};return{control:{register:Nt,unregister:Xt,_executeSchema:me,_getWatch:Ge,_getDirty:Ue,_updateValid:z,_removeUnmounted:be,_updateFieldArray:Y,_getFieldArray:ft,_subjects:E,_proxyFormState:b,get _fields(){return r},set _fields(ce){r=ce},get _formValues(){return o},set _formValues(ce){o=ce},get _stateFlags(){return a},set _stateFlags(ce){a=ce},get _defaultValues(){return i},set _defaultValues(ce){i=ce},get _names(){return c},set _names(ce){c=ce},get _formState(){return n},set _formState(ce){n=ce},get _options(){return e},set _options(ce){e=Object.assign(Object.assign({},e),ce)}},trigger:Fe,register:Nt,handleSubmit:(ce,ge)=>async _e=>{_e&&(_e.preventDefault&&_e.preventDefault(),_e.persist&&_e.persist());let je=!0,Pe=e.shouldUnregister?cd(o):Object.assign({},o);E.state.next({isSubmitting:!0});try{if(e.resolver){const{errors:Ve,values:He}=await me();n.errors=Ve,Pe=He}else await Z(r);Gi(n.errors)&&Object.keys(n.errors).every(Ve=>st(Pe,Ve))?(E.state.next({errors:{},isSubmitting:!0}),await ce(Pe,_e)):(ge&&await ge(n.errors,_e),e.shouldFocusError&&K1(r,Ve=>st(n.errors,Ve),c.mount))}catch(Ve){throw je=!1,Ve}finally{n.isSubmitted=!0,E.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Gi(n.errors)&&je,submitCount:n.submitCount+1,errors:n.errors})}},watch:tt,setValue:xe,getValues:Ne,reset:(ce,ge={})=>{const _e=ce||i,je=cd(_e),Pe=Gi(ce)?i:je;if(ge.keepDefaultValues||(i=_e),!ge.keepValues){if(lP)for(const Ve of c.mount){const He=st(r,Ve);if(He&&He._f){const zt=Array.isArray(He._f.refs)?He._f.refs[0]:He._f.ref;try{Y1(zt)&&zt.closest("form").reset();break}catch{}}}o=t.shouldUnregister?ge.keepDefaultValues?cd(i):{}:je,r={},E.watch.next({values:Pe}),E.array.next({values:Pe})}c={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},E.state.next({submitCount:ge.keepSubmitCount?n.submitCount:0,isDirty:ge.keepDirty?n.isDirty:ge.keepDefaultValues?!uh(ce,i):!1,isSubmitted:ge.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:ge.keepDirty?n.dirtyFields:ge.keepDefaultValues&&ce?Object.entries(ce).reduce((Ve,[He,zt])=>Object.assign(Object.assign({},Ve),{[He]:zt!==st(i,He)}),{}):{},touchedFields:ge.keepTouched?n.touchedFields:{},errors:ge.keepErrors?n.errors:{},isSubmitting:!1,isSubmitSuccessful:!1}),a.mount=!b.isValid||!!ge.keepIsValid,a.watch=!!t.shouldUnregister},resetField:(ce,ge={})=>{Lr(ge.defaultValue)?xe(ce,st(i,ce)):(xe(ce,ge.defaultValue),Wn(i,ce,ge.defaultValue)),ge.keepTouched||ci(n.touchedFields,ce),ge.keepDirty||(ci(n.dirtyFields,ce),n.isDirty=ge.defaultValue?Ue(ce,st(i,ce)):Ue()),ge.keepError||(ci(n.errors,ce),b.isValid&&z()),E.state.next(Object.assign({},n))},clearErrors:qe,unregister:Xt,setError:Ct,setFocus:ce=>{const ge=st(r,ce)._f;(ge.ref.focus?ge.ref:ge.refs[0]).focus()}}}function oc(t={}){const e=ee.useRef(),[n,r]=ee.useState({isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}});e.current?e.current.control._options=t:e.current=Object.assign(Object.assign({},kne(t)),{formState:n});const i=e.current.control;return Ene({subject:i._subjects.state,callback:o=>{wne(o,i._proxyFormState,!0)&&(i._formState=Object.assign(Object.assign({},i._formState),o),r(Object.assign({},i._formState)))}}),ee.useEffect(()=>{i._stateFlags.mount||(i._proxyFormState.isValid&&i._updateValid(),i._stateFlags.mount=!0),i._stateFlags.watch&&(i._stateFlags.watch=!1,i._subjects.state.next({})),i._removeUnmounted()}),e.current.formState=_ne(n,i._proxyFormState),e.current}const Rne=({setTab:t})=>{const e=On(),n=ee.useContext(ko),{handleSubmit:r,register:i,setError:o,formState:a}=oc(),c=ee.useCallback(async({email:f})=>{try{await ze.auth().sendPasswordResetEmail(f),t("signin"),n(e.formatMessage({id:"Reset password email sent"}))}catch(v){switch(v.code){case"auth/invalid-email":case"auth/user-not-found":case"auth/user-disabled":o("email",{type:"invalid",message:e.formatMessage({id:"Unknown email address"})});break;default:n(e.formatMessage({id:"An error occured, please retry later"},{email:f}))}}},[o,e,n,t]);return F.jsxs(Te,{as:"form",name:"reset",onSubmit:r(c),css:{gap:4},children:[F.jsxs(Te,{css:{gap:2},children:[F.jsx("label",{children:e.formatMessage({id:"Email address"})}),F.jsx(Xn,{type:"email",...i("email",{required:e.formatMessage({id:"Email address is required"})})}),a.errors.email&&F.jsx(Pi,{children:a.errors.email.message})]}),F.jsxs(Te,{css:{gap:3},children:[F.jsx(yi,{type:"submit",disabled:a.isSubmitting,children:e.formatMessage({id:"Send the reset mail!"})}),F.jsx(Te,{css:{alignItems:"center"},children:F.jsx(as,{onClick:()=>t("signin"),children:e.formatMessage({id:"Back"})})})]})]})},One=({onSignUp:t,setTab:e})=>{const n=On(),{handleSubmit:r,register:i,watch:o,setError:a,formState:c}=oc(),f=o("password"),v=ee.useCallback(async({email:y,username:b,password:E})=>{try{const{user:I}=await ze.auth().createUserWithEmailAndPassword(y,E),L={username:b,signupDate:Date.now()};await ze.firestore().collection("users").doc(I.uid).set(L),t({uid:I.uid,...L,firebaseUser:I})}catch(I){switch(I.code){case"auth/weak-password":a("password",{type:"weakPassword",message:n.formatMessage({id:"Password is too weak"})});break;case"auth/email-already-in-use":a("email",{type:"alreadyExists",message:n.formatMessage({id:"Email address already in use"})});break;case"auth/invalid-email":a("email",{type:"invalid",message:n.formatMessage({id:"Invalid email address"})});break;default:return}}},[t,a,n]);return F.jsxs(Te,{as:"form",name:"signup",autoComplete:"off",onSubmit:r(v),css:{gap:4},children:[F.jsxs(Te,{css:{gap:3},children:[F.jsxs(Te,{css:{gap:2},children:[F.jsx("label",{children:n.formatMessage({id:"Username"})}),F.jsx(Xn,{...i("username",{required:n.formatMessage({id:"Username is required"})})}),c.errors.username&&F.jsx(Pi,{children:c.errors.username.message})]}),F.jsxs(Te,{css:{gap:2},children:[F.jsx("label",{children:n.formatMessage({id:"Email address"})}),F.jsx(Xn,{type:"email",...i("email",{required:n.formatMessage({id:"Email address is required"})})}),c.errors.email&&F.jsx(Pi,{children:c.errors.email.message})]}),F.jsxs(Te,{css:{gap:2},children:[F.jsx("label",{children:n.formatMessage({id:"Password"})}),F.jsx(Xn,{autoComplete:"new-password",type:"password",...i("password",{required:n.formatMessage({id:"Password is required"})})}),c.errors.password&&F.jsx(Pi,{children:c.errors.password.message})]}),F.jsxs(Te,{css:{gap:2},children:[F.jsx("label",{children:n.formatMessage({id:"Confirm password"})}),F.jsx(Xn,{autoComplete:"off",type:"password",...i("passwordConfirm",{required:"Password is required",validate:y=>y===f||n.formatMessage({id:"Passwords must match"})})}),c.errors.passwordConfirm&&F.jsx(Pi,{children:c.errors.passwordConfirm.message})]})]}),F.jsxs(Te,{css:{gap:3},children:[F.jsx(yi,{disabled:c.isSubmitting,type:"submit",children:n.formatMessage({id:"Sign me up!"})}),F.jsx(Te,{css:{alignItems:"center"},children:F.jsx(as,{onClick:()=>e("signin"),children:n.formatMessage({id:"I already have an account"})})})]})]})},Pne=({onSignIn:t,setTab:e})=>{const n=On(),{handleSubmit:r,register:i,setError:o,formState:a}=oc(),c=ee.useCallback(async({email:f,password:v})=>{try{const{user:y}=await ze.auth().signInWithEmailAndPassword(f,v),E=(await ze.firestore().collection("users").doc(y.uid).get()).data();t({uid:y.uid,...E,firebaseUser:y})}catch(y){switch(y.code){case"auth/invalid-email":case"auth/user-not-found":case"auth/user-disabled":o("email",{type:"invalid",message:n.formatMessage({id:"Unknown email address"})});break;case"auth/wrong-password":o("password",{type:"mismatch",message:n.formatMessage({id:"Incorrect password"})});break;default:return}}},[t,o,n]);return F.jsxs(Te,{as:"form",name:"signin",onSubmit:r(c),css:{gap:4},children:[F.jsxs(Te,{css:{gap:3},children:[F.jsxs(Te,{css:{gap:2},children:[F.jsx("label",{children:n.formatMessage({id:"Email address"})}),F.jsx(Xn,{type:"email",...i("email",{required:n.formatMessage({id:"Email address is required"})})}),a.errors.email&&F.jsx(Pi,{children:a.errors.email.message})]}),F.jsxs(Te,{css:{gap:2},children:[F.jsx("label",{children:n.formatMessage({id:"Password"})}),F.jsx(Xn,{type:"password",...i("password",{required:n.formatMessage({id:"Password is required"})})}),a.errors.password&&F.jsx(Pi,{children:a.errors.password.message}),F.jsx(as,{css:{alignSelf:"flex-end",fontSize:2},onClick:()=>e("reset"),children:n.formatMessage({id:"Forgot password?"})})]})]}),F.jsxs(Te,{css:{gap:3},children:[F.jsx(yi,{type:"submit",disabled:a.isSubmitting,children:n.formatMessage({id:"Sign me in!"})}),F.jsx(Te,{css:{alignItems:"center"},children:F.jsx(as,{onClick:()=>e("signup"),children:n.formatMessage({id:"I don't have an account"})})})]})]})},Dne=({deferred:t})=>{const e=On(),n=ee.useContext(ko),[r,i]=ee.useState("signup"),o=a=>{t.resolve(a),n(e.formatMessage({id:"Logged in as {username}"},{username:a.username}))};return F.jsx(zs,{title:r==="signup"?F.jsx(to,{children:e.formatMessage({id:"Create your account"})}):r==="signin"?F.jsx(to,{children:e.formatMessage({id:"Connect to your account"})}):F.jsx(to,{children:e.formatMessage({id:"Reset your password"})}),onClose:()=>t.reject(Gn),children:r==="signup"?F.jsx(One,{onSignUp:o,setTab:i}):r==="signin"?F.jsx(Pne,{onSignIn:o,setTab:i}):F.jsx(Rne,{setTab:i})})},Lne={Amstangram:"Amstangram",Language:"Language",en:"English",fr:"French",Theme:"Theme","Logged in as {username}":"Logged in as {username}",Settings:"Settings",Difficulty:"Difficulty",Easy:"Easy",Hard:"Hard","Tangram approved":"Tangram approved","You can't save an invalid tangram":"You can't save an invalid tangram","You can't save such an easy tangram":"You can't save such an easy tangram","Tangram submitted for review":"Tangram submitted for review","Logged out":"Logged out","Tangram gallery":"Tangram gallery","All tangrams":"All tangrams","Uncompleted tangrams":"Uncompleted tangrams"," Starred tangrams":" Starred tangrams","Pending approbation tangrams":"Pending approbation tangrams","You've completed all tangrams":"You've completed all tangrams","Come back later for more or create your own tangrams":"Come back later for more or create your own tangrams","No tangram left to approve":"No tangram left to approve","Good job moderator {username}!":"Good job moderator {username}!","All your tangrams have been approved":"All your tangrams have been approved","Create more tangrams and earn <starIcon></starIcon>":"Create more tangrams and earn <starIcon></starIcon>","No starred tangrams yet":"No starred tangrams yet","Press <starIcon></starIcon> to star a tangram and show your love":"Press <starIcon></starIcon> to star a tangram and show your love","Nothing to see here":"Nothing to see here","Something might have gone wrong":"Something might have gone wrong","Play now!":"Play now !","Start 1 tangram!":"Start 1 tangram !","Start {count} tangrams!":"Start {count} tangrams !","Password is too weak":"Password is too weak","Email address already in use":"Email address already in use","Invalid email address":"Invalid email address","Email address":"Email address","Email address is required":"Email address is required",Username:"Username","Username is required":"Username is required",Password:"Password","Password is required":"Password is required","Confirm password":"Confirm password","Passwords must match":"Passwords must match","Sign me up!":"Sign me up!","I already have an account":"I already have an account","Unknown email address":"Unknown email address","Incorrect password":"Incorrect password","Sign me in!":"Sign me in!","I don't have an account":"I don't have an account","Create your account":"Create your account","Connect to your account":"Connect to your account","A moderator will have to approve your tangram. It can be deleted or edited at any time.":"A moderator will have to approve your tangram.<br></br>It can be deleted or edited at any time.","Submit your tangram":"Submit your tangram","Edit your tangram":"Edit your tangram",Path:"Path","Invalid path":"Invalid path",Category:"Category","Victory emoji":"Victory emoji","Leave empty for random emoji":"Leave empty for random emoji",Order:"Order","Submit!":"Submit!","Edit!":"Edit!","Or delete tangram":"Or delete tangram",animals:"Animals",geometric:"Geometric",digits:"Digits",letters:"Alphabet",people:"People",stuff:"Stuff","Joined {signupDate}":"Joined {signupDate}","Log out":"Log out","Are you sure you want to log out?":"Are you sure you want to log out?","Change email address":"Change email address","Change username":"Change username","Change password":"Change password",Back:"Back","Confirm new password":"Confirm new password","New password":"New password","Current password":"Current password","Password changed successfuly":"Password changed successfuly","New username":"New username","Username updated successfuly":"Username updated successfuly","Email address updated successfuly":"Email address updated successfuly","New email address":"New email address","An error occured, please retry later":"An error occured, please retry later",Sounds:"Sounds","Are you sure you want to delete this tangram?":"Are you sure you want to delete this tangram?","Tangram deleted successfuly":"Tangram deleted successfuly","Tangram modified successfuly":"Tangram modified successfuly","Challenge link copied to clipboard":"Challenge link copied to clipboard","{username} challenged you":"{username} challenged you","Rise to the challenge":"Rise to the challenge","Let's go!":"Let's go!",Leaderboard:"Leaderboard","Completed {completed}/{total} tangrams":"Completed {completed}/{total} tangrams","Created {created} tangrams":"Created {created} tangrams","Earned {stars}":"Earned {stars} <starIcon></starIcon>","Stars earned":"Stars earned","Completed tangrams":"Completed tangrams","Created tangrams":"Created tangrams","Random tip":"Random tip","Got it!":"Got it!","Welcome to Amstangram":"Welcome to Amstangram","tips.welcome":"Reproduce the black shape by moving the pieces, you can rotate a piece by pressing it.<br></br><br></br>Have fun !","tips.menu":"You can access the tangram gallery {galleryIcon}, settings {settingsIcon} and more by pressing {menuIcon}","tips.account1":"You can create an account by pressing {accountIcon} in the menu {menuIcon}","tips.account2":"Signup in order to save your progression and create your very own tangrams","tips.gallery":"You can create your own tangram playlist by selecting tangrams in the gallery {galleryIcon}","tips.share":"You can share playlist with your friends by pressing {shareIcon} in the gallery {galleryIcon}","tips.create":"You can create your own tangrams by pressing {createIcon} in the menu {menuIcon}","tips.stars":"Did you liked this tangram?<br></br>Give a star to its creator by pressing {starIcon}","tips.difficulty":"Having it too easy?<br></br>You can change difficulty by pressing {settingsIcon} in the menu {menuIcon}","tips.theme":"Too bright for your eyes?<br></br>You can toggle dark mode by pressing {settingsIcon} in the menu {menuIcon}","tips.sound":"Too much noise?<br></br>You can disable sounds by pressing {settingsIcon} in the menu {menuIcon}","tips.card":"You can acces tangram details or edit your own tangrams by long pressing a card in the gallery {galleryIcon}","tips.leaderboard":"Check the leaderboard to see who's the best by pressing {leaderboardIcon} in the menu {menuIcon}","tips.particles":"Disable particle effects by pressing {settingsIcon} in the menu {menuIcon}. It can improve performances.","I don't want to see tips anymore":"I don't want to see tips anymore","Show tips":"Show tips","Show particles":"Show particles",Yes:"Yes",No:"No","Reset tips":"Reset tips","Tips reseted successfuly":"Tips reseted successfuly","Loading...":"Loading...",Approve:"Approve",Next:"Next",Quit:"Quit","See my profile":"See my profile","Log in":"Log in","Save tangram":"Save tangram","Contact ":"Contact ","A word about Amstangram":"A word about Amstangram","Version {code}":"Version {code}","Forgot password?":"Forgot password?","Reset your password":"Reset your password","Send the reset mail!":"Send the reset mail!","Reset password email sent":"Reset password email sent"},Mne={Amstangram:"Amstangram",Language:"Langage",en:"Anglais",fr:"Francais",Theme:"Thme","Logged in as {username}":"Connect en tant que {username}",Settings:"Rglages",Difficulty:"Difficult",Easy:"Facile",Hard:"Difficile","Tangram approved":"Tangram approuv","You can't save an invalid tangram":"Tangram invalide","You can't save such an easy tangram":"Tangram trop facile","Tangram submitted for review":"Tangram soumis pour vrification","Logged out":"Dconnect.e","Tangram gallery":"Galerie des tangrams","All tangrams":"Tous les tangrams","Uncompleted tangrams":"Tangrams non complts"," Starred tangrams":"Tangrams toils ","Pending approbation tangrams":"Tangrams en attente d'approbation","You've completed all tangrams":"Tu as complt tous les tangrams","Come back later for more or create your own tangrams":"Reviens plus tard ou crs tes propres tangrams","No tangram left to approve":"Il ne reste plus de tangram  approuver","Good job moderator {username}!":"Bon boulot modrateur {username} !","All your tangrams have been approved":"Tous tes tangrams ont t approuvs","Create more tangrams and earn <starIcon></starIcon>":"Crs d'autres tangrams et gagne des <starIcon></starIcon>","No starred tangrams yet":"Tu n'as pas encore donn d'toile","Press <starIcon></starIcon> to star a tangram and show your love":"Appuie sur <starIcon></starIcon> pour donner une toile et montrer que tu aimes un tangram","Nothing to see here":"Rien  voir","Something might have gone wrong":"Il semble y avoir un problme","Play now!":"Commencer  jouer !","Start 1 tangram!":"Lancer 1 tangram","Start {count} tangrams!":"Lancer {count} tangrams","Password is too weak":"Mot de passe trop faible","Email address already in use":"Adresse email dj prise","Invalid email address":"Adresse email invalide","Email address":"Adresse Email","Email address is required":"Adresse email requise",Username:"Nom d'utilisateur","Username is required":"Nom d'utilisateur requis",Password:"Mot de passe","Password is required":"Mot de passe requis","Confirm password":"Confirmer le mot de passe","Passwords must match":"Les mots de passe doivent correspondre","Sign me up!":"Je cr mon compte !","I already have an account":"J'ai dj un compte","Unknown email address":"Adresse email inconnu","Incorrect password":"Mot de passe incorrect","Sign me in!":"Je me connecte !","I don't have an account":"Je n'ai pas de compte","Create your account":"Crer un compte","Connect to your account":"Se connecter","Submit your tangram":"Envoyer votre tangram","Edit your tangram":"diter votre tangram",Category:"Catgorie",Path:"Chemin","Invalid path":"Chemin invalide","Victory emoji":"Emoji de succs","Leave empty for random emoji":"Laisser vide pour un emoji au hasard",Order:"Ordre","A moderator will have to approve your tangram. It can be deleted or edited at any time.":"Un modrateur doit approuver votre tangram.<br></br>Il peut tre supprim ou modifi n'importe quand.","Submit!":"Envoyer !","Edit!":"diter !","Or delete tangram":"Ou supprimer le tangram",animals:"Animaux",geometric:"Gomtrique",digits:"Chiffres",letters:"Alphabet",people:"Personnes",stuff:"Trucs","Joined {signupDate}":"Inscrit le {signupDate}","Log out":"Se dconnecter","Are you sure you want to log out?":"Es-tu sr.e de vouloir te dconnecter ?","Change email address":"Modifier l'adresse email","Change username":"Modifier le nom d'utilisateur","Change password":"Modifier le mot de passe",Back:"Retour","Confirm new password":"Confirmer le nouveau mot de passe","New password":"Nouveau mot de passe","Current password":"Mot de passe actuel","Password changed successfuly":"Mot de passe chang avec succs","New username":"Nouveau nom d'utilisateur","Username updated successfuly":"Nom d'utilisateur chang avec succs","Email address updated successfuly":"Adresse email chang avec succs","New email address":"Nouvelle adresse email","An error occured, please retry later":"Une erreur est survenue, veuillez ressayer plus tard",Sounds:"Sons","Are you sure you want to delete this tangram?":"Es-tu sr.e de vouloir supprimer ce tangram ?","Tangram deleted successfuly":"Tangram supprim avec succs","Tangram modified successfuly":"Tangram modifi avec succs","Challenge link copied to clipboard":"Lien de dfi copi dans le presse papier","{username} challenged you":"{username} te met au dfi","Rise to the challenge":"Relevez le dfi","Let's go!":"C'est parti !",Leaderboard:"Classement","Completed {completed}/{total} tangrams":"{completed}/{total} tangrams complts","Created {created} tangrams":"{created} tangrams crs","Earned {stars}":"{stars} <starIcon></starIcon> gagnes","Stars earned":"toiles gagnes","Completed tangrams":"Tangrams complts","Created tangrams":"Tangrams crs","Random tip":"Astuce","Got it!":"J'ai compris !","Welcome to Amstangram":"Bienvenue sur Amstangram","tips.welcome":"Reproduis la forme noire en dplaant les pices, tu peux faire tourner une pice en appuyant dessus.<br></br><br></br>Amuse-toi bien !","tips.menu":"Tu peux accder  la galerie des tangrams {galleryIcon}, aux rglages {settingsIcon} et plus encore en appuyant sur {menuIcon}","tips.account1":"Crer ton compte utilisateur en appuyant sur {accountIcon} dans le menu {menuIcon}","tips.account2":"Crer ton compte utilisateur pour sauvegarder ta progression crer tes propres tangrams","tips.gallery":"Tu peux crer ta propre playlist en slectionnant les tangrams dans la galerie {galleryIcon}","tips.share":"Tu peux partager ta playlist avec tes amis en appuyant sur {shareIcon} dans la galerie {galleryIcon}","tips.create":"Tu peux crer tes propres tangrams en appuyant sur {createIcon} dans le menu {menuIcon}","tips.stars":"T'as aim ce tangram ?<br></br>Envoie une toile  son crateur en appuyant sur {starIcon}","tips.difficulty":"Trop facile pour toi ?<br></br>Essayes le mode difficile en appuyant sur {settingsIcon} dans le menu {menuIcon}","tips.theme":"Envie de passer du ct obscur ?<br></br>Tu peux activer le mode sombre en appuyant sur {settingsIcon} dans le menu {menuIcon}","tips.sound":"Trop de bruits ?<br></br>Tu peux dsactiver les sons en appuyant sur {settingsIcon} dans le menu {menuIcon}","tips.card":"Tu peux accder aux dtails d'un tangram ou mme diter les tiens en faisant un appui long sur une carte dans la galerie {galleryIcon}","tips.leaderboard":"Jette un oeil au classement pour savoir qui est le meilleur en appuyant sur {leaderboardIcon} dans le menu {menuIcon}","tips.particles":"Dsactive les effets de particule en appuyant sur {settingsIcon} dans le menu {menuIcon}. Cela peut amliorer les performances.","I don't want to see tips anymore":"Je ne veux plus voir les astuces","Show tips":"Afficher les astuces","Show particles":"Afficher les particles",Yes:"Oui",No:"Non","Reset tips":"Rinitialiser les astuces","Tips reseted successfuly":"Astuces rinitilises avec succs","Loading...":"Chargement...",Approve:"Approuver",Next:"Suivant",Quit:"Quitter","See my profile":"Voir mon profil","Log in":"Se connecter","Save tangram":"Sauvegarder le tangram","Contact ":"Contact ","A word about Amstangram":"Quelques mots  propos d'Amstangram","Version {code}":"Version {code}","Forgot password?":"Mot de passe oubli ?","Reset your password":"Rinitialiser le mot de passe","Send the reset mail!":"Envoyer le mail de rinitialisation","Reset password email sent":"Email de rinitialisation envoy"},Fne={en:Lne,fr:Mne},Wx="fr",X1=["en","fr"],Gx=ee.createContext({language:Wx,setLanguage:()=>{}}),jne=()=>{const t=localStorage.getItem("language");if(X1.includes(t))return t;const e=navigator.languages;for(const n of e){const r=X1.find(i=>n.includes(i));if(r)return r}return Wx},Une=({children:t})=>{const[e,n]=ee.useState(Wx);ee.useEffect(()=>{const i=jne();n(i)},[]);const r=ee.useMemo(()=>({language:e,setLanguage:i=>{n(i),localStorage.setItem("language",i)}}),[e]);return F.jsx(aG,{locale:e,messages:Fne[e],onError:console.warn,children:F.jsx(Gx.Provider,{value:r,children:t})})},Vne=({currentUser:t,onClose:e})=>{const n=On(),{updateEmail:r}=ee.useContext(qr),i=ee.useContext(ko),{handleSubmit:o,register:a,setError:c,formState:f}=oc(),v=ee.useCallback(async({password:y,newEmail:b})=>{try{await r(t,y,b),i(n.formatMessage({id:"Email address updated successfuly"})),e()}catch(E){switch(E.code){case"auth/email-already-in-use":c("newEmail",{type:"alreadyExists",message:n.formatMessage({id:"Email address already in use"})});break;case"auth/invalid-email":c("newEmail",{type:"invalid",message:n.formatMessage({id:"Invalid email address"})});break;case"auth/wrong-password":c("password",{type:"mismatch",message:n.formatMessage({id:"Incorrect password"})});break;default:throw i(n.formatMessage({id:"An error occured, please retry later"})),E}}},[t,r,c,e,i,n]);return F.jsxs(Te,{as:"form",onSubmit:o(v),css:{flex:"1",gap:4},children:[F.jsxs(Te,{css:{gap:3,overflow:"auto",flex:"1"},children:[F.jsxs(Te,{css:{gap:2},children:[F.jsx("label",{children:n.formatMessage({id:"Password"})}),F.jsx(Xn,{type:"password",...a("password",{required:n.formatMessage({id:"Password is required"})})}),f.errors.password&&F.jsx(Pi,{children:f.errors.password.message})]}),F.jsxs(Te,{css:{gap:2},children:[F.jsx("label",{children:n.formatMessage({id:"New email address"})}),F.jsx(Xn,{type:"email",...a("newEmail",{required:n.formatMessage({id:"Email address is required"})})}),f.errors.newEmail&&F.jsx(Pi,{children:f.errors.newEmail.message})]})]}),F.jsxs(Te,{css:{gap:3},children:[F.jsx(yi,{disabled:f.isSubmitting,type:"submit",children:n.formatMessage({id:"Change email address"})}),F.jsx(Te,{css:{alignItems:"center"},children:F.jsx(as,{onClick:e,children:n.formatMessage({id:"Back"})})})]})]})},Bne=({currentUser:t,onClose:e})=>{const n=On(),{updateUsername:r}=ee.useContext(qr),i=ee.useContext(ko),{handleSubmit:o,register:a,formState:c}=oc(),f=ee.useCallback(async({newUsername:v})=>{try{await r(t,v),i(n.formatMessage({id:"Username updated successfuly"})),e()}catch(y){throw i(n.formatMessage({id:"An error occured, please retry later"})),y}},[t,r,e,i,n]);return F.jsxs(Te,{as:"form",onSubmit:o(f),css:{flex:"1",gap:4},children:[F.jsx(Te,{css:{gap:3,overflow:"auto",flex:"1"},children:F.jsxs(Te,{css:{gap:2},children:[F.jsx("label",{children:n.formatMessage({id:"New username"})}),F.jsx(Xn,{type:"text",...a("newUsername",{required:n.formatMessage({id:"Username is required"})})}),c.errors.newUsername&&F.jsx(Pi,{children:c.errors.newUsername.message})]})}),F.jsxs(Te,{css:{gap:3},children:[F.jsx(yi,{disabled:c.isSubmitting,type:"submit",children:n.formatMessage({id:"Change username"})}),F.jsx(Te,{css:{alignItems:"center"},children:F.jsx(as,{onClick:e,children:n.formatMessage({id:"Back"})})})]})]})},zne=({currentUser:t,onClose:e})=>{const n=On(),{updateUsername:r}=ee.useContext(qr),i=ee.useContext(ko),{handleSubmit:o,register:a,watch:c,setError:f,formState:v}=oc(),y=c("newPassword"),b=ee.useCallback(async({password:E,newPassword:I})=>{try{await r(t,E,I),i(n.formatMessage({id:"Password changed successfuly"})),e()}catch(L){switch(L.code){case"auth/weak-password":f("newPassword",{type:"weakPassword",message:n.formatMessage({id:"Password is too weak"})});break;case"auth/wrong-password":f("password",{type:"mismatch",message:n.formatMessage({id:"Incorrect password"})});break;default:i(n.formatMessage({id:"An error occured, please retry later"}));return}}},[t,r,e,f,i,n]);return F.jsxs(Te,{as:"form",onSubmit:o(b),css:{flex:"1",gap:4},children:[F.jsxs(Te,{css:{gap:3,overflow:"auto",flex:"1"},children:[F.jsxs(Te,{css:{gap:2},children:[F.jsx("label",{children:n.formatMessage({id:"Current password"})}),F.jsx(Xn,{type:"password",...a("password",{required:n.formatMessage({id:"Password is required"})})}),v.errors.password&&F.jsx(Pi,{children:v.errors.password.message})]}),F.jsxs(Te,{css:{gap:2},children:[F.jsx("label",{children:n.formatMessage({id:"New password"})}),F.jsx(Xn,{type:"password",autoComplete:"new-password",...a("newPassword",{required:n.formatMessage({id:"Password is required"})})}),v.errors.newPassword&&F.jsx(Pi,{children:v.errors.newPassword.message})]}),F.jsxs(Te,{css:{gap:2},children:[F.jsx("label",{children:n.formatMessage({id:"Confirm new password"})}),F.jsx(Xn,{type:"password",...a("newPasswordConfirm",{required:"Password is required",validate:E=>E===y||n.formatMessage({id:"Passwords must match"})})}),v.errors.newPasswordConfirm&&F.jsx(Pi,{children:v.errors.newPasswordConfirm.message})]})]}),F.jsxs(Te,{css:{gap:3},children:[F.jsx(yi,{disabled:v.isSubmitting,type:"submit",children:n.formatMessage({id:"Change password"})}),F.jsx(Te,{css:{alignItems:"center"},children:F.jsx(as,{onClick:e,children:n.formatMessage({id:"Back"})})})]})]})},qne=({uid:t,deferred:e})=>{const n=On(),r=ee.useContext(ko),{language:i}=ee.useContext(Gx),{currentUser:o,usersMetadata:a}=ee.useContext(qr),{username:c,signupDate:f}=a[t],[v,y]=ee.useState(!1),[b,E]=ee.useState(!1),[I,L]=ee.useState(!1),{approvedTangrams:D}=ee.useContext(Bu),{tangramsStarredBy:te,tangramsCompletedBy:z}=ee.useContext(ji),{stars:Y,completed:K,created:ue}=ee.useMemo(()=>{let fe=0,me=0,he=0;for(const Z of D){if(Z.uid===t){me++;for(const be in te[Z.id])be!==t&&te[Z.id][be]&&(fe+=1)}for(const be in z[Z.id])be===t&&(he+=1)}return{stars:fe,completed:he,created:me}},[D,z,te,t]),oe=async()=>{window.confirm(n.formatMessage({id:"Are you sure you want to log out?"}))&&(await ze.auth().signOut(),e.reject(Gn),r(n.formatMessage({id:"Logged out"})))};return F.jsx(zs,{onClose:()=>e.reject(Gn),css:{overflow:"auto",pt:4,mt:-4,gap:3},children:v?F.jsx(Vne,{currentUser:o,onClose:()=>y(!1)}):b?F.jsx(Bne,{currentUser:o,onClose:()=>E(!1)}):I?F.jsx(zne,{currentUser:o,onClose:()=>L(!1)}):F.jsxs(Te,{css:{gap:4,mt:-4},children:[F.jsxs(Te,{css:{gap:3,alignItems:"center"},children:[F.jsx(L_,{uid:t,size:"badgeBig"}),F.jsx(to,{children:c}),F.jsxs(Te,{css:{gap:2,fontSize:2,alignItems:"center"},children:[o&&t===o.uid&&F.jsx(mt,{children:o.firebaseUser.email}),F.jsx(mt,{children:n.formatMessage({id:"Joined {signupDate}"},{signupDate:new Intl.DateTimeFormat(i).format(f)})}),F.jsx(mt,{children:n.formatMessage({id:"Completed {completed}/{total} tangrams"},{completed:K,total:D.length})}),F.jsx(mt,{children:n.formatMessage({id:"Created {created} tangrams"},{created:ue})}),F.jsx(mt,{children:F.jsx(Jt,{id:"Earned {stars}",values:{stars:Y,starIcon:()=>F.jsx(Ii,{icon:Pu,css:{fill:"currentColor"}})}})})]})]}),o&&o.uid===t&&F.jsxs(F.Fragment,{children:[F.jsxs(Te,{css:{gap:3,alignItems:"center"},children:[F.jsx(as,{onClick:()=>y(!0),children:n.formatMessage({id:"Change email address"})}),F.jsx(as,{onClick:()=>E(!0),children:n.formatMessage({id:"Change username"})}),F.jsx(as,{onClick:()=>L(!0),children:n.formatMessage({id:"Change password"})})]}),F.jsx(une,{onClick:oe,children:n.formatMessage({id:"Log out"})})]})]})})},yP=["","","","","","","","","",""],_P=()=>yP[Math.floor(Math.random()*yP.length)];var v4={exports:{}};const Wne={},Gne=Object.freeze(Object.defineProperty({__proto__:null,default:Wne},Symbol.toStringTag,{value:"Module"})),wP=Q1(Gne);/*!
 * Paper.js v0.12.17 - The Swiss Army Knife of Vector Graphics Scripting.
 * http://paperjs.org/
 *
 * Copyright (c) 2011 - 2020, Jrg Lehni & Jonathan Puckey
 * http://juerglehni.com/ & https://puckey.studio/
 *
 * Distributed under the MIT license. See LICENSE file for details.
 *
 * All rights reserved.
 *
 * Date: Thu Nov 3 21:15:36 2022 +0100
 *
 ***
 *
 * Straps.js - Class inheritance library with support for bean-style accessors
 *
 * Copyright (c) 2006 - 2020 Jrg Lehni
 * http://juerglehni.com/
 *
 * Distributed under the MIT license.
 *
 ***
 *
 * Acorn.js
 * https://marijnhaverbeke.nl/acorn/
 *
 * Acorn is a tiny, fast JavaScript parser written in JavaScript,
 * created by Marijn Haverbeke and released under an MIT license.
 *
 */(function(t){(function(e,n){e=e||wP;var r=e.window,i=e.document,o=new function(){var u=/^(statics|enumerable|beans|preserve)$/,h=[],d=h.slice,g=Object.create,m=Object.getOwnPropertyDescriptor,w=Object.defineProperty,T=h.forEach||function(R,A){for(var U=0,W=this.length;U<W;U++)R.call(A,this[U],U,this)},S=function(R,A){for(var U in this)this.hasOwnProperty(U)&&R.call(A,this[U],U,this)},x=Object.assign||function(R){for(var A=1,U=arguments.length;A<U;A++){var W=arguments[A];for(var H in W)W.hasOwnProperty(H)&&(R[H]=W[H])}return R},N=function(R,A,U){if(R){var W=m(R,"length");(W&&typeof W.value=="number"?T:S).call(R,A,U=U||R)}return U};function O(R,A,U,W,H){var V={};function B(X,Q){Q=Q||(Q=m(A,X))&&(Q.get?Q:Q.value),typeof Q=="string"&&Q[0]==="#"&&(Q=R[Q.substring(1)]||Q);var J=typeof Q=="function",ne=Q,se=H||J&&!Q.base?Q&&Q.get?X in R:R[X]:null,ie;(!H||!se)&&(J&&se&&(Q.base=se),J&&W!==!1&&(ie=X.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(V[ie[3].toLowerCase()+ie[4]]=ie[2]),(!ne||J||!ne.get||typeof ne.get!="function"||!P.isPlainObject(ne))&&(ne={value:ne,writable:!0}),(m(R,X)||{configurable:!0}).configurable&&(ne.configurable=!0,ne.enumerable=U??!ie),w(R,X,ne))}if(A){for(var k in A)A.hasOwnProperty(k)&&!u.test(k)&&B(k);for(var k in V){var M=V[k],q=R["set"+M],$=R["get"+M]||q&&R["is"+M];$&&(W===!0||$.length===0)&&B(k,{get:$,set:q})}}return R}function P(){for(var R=0,A=arguments.length;R<A;R++){var U=arguments[R];U&&x(this,U)}return this}return O(P,{inject:function(R){if(R){var A=R.statics===!0?R:R.statics,U=R.beans,W=R.preserve;A!==R&&O(this.prototype,R,R.enumerable,U,W),O(this,A,null,U,W)}for(var H=1,V=arguments.length;H<V;H++)this.inject(arguments[H]);return this},extend:function(){for(var R=this,A,U,W=0,H,V=arguments.length;W<V&&!(A&&U);W++)H=arguments[W],A=A||H.initialize,U=U||H.prototype;return A=A||function(){R.apply(this,arguments)},U=A.prototype=U||g(this.prototype),w(U,"constructor",{value:A,writable:!0,configurable:!0}),O(A,this),arguments.length&&this.inject.apply(A,arguments),A.base=R,A}}).inject({enumerable:!1,initialize:P,set:P,inject:function(){for(var R=0,A=arguments.length;R<A;R++){var U=arguments[R];U&&O(this,U,U.enumerable,U.beans,U.preserve)}return this},extend:function(){var R=g(this);return R.inject.apply(R,arguments)},each:function(R,A){return N(this,R,A)},clone:function(){return new this.constructor(this)},statics:{set:x,each:N,create:g,define:w,describe:m,clone:function(R){return x(new R.constructor,R)},isPlainObject:function(R){var A=R!=null&&R.constructor;return A&&(A===Object||A===P||A.name==="Object")},pick:function(R,A){return R!==n?R:A},slice:function(R,A,U){return d.call(R,A,U)}}})};t.exports=o,o.inject({enumerable:!1,toString:function(){return this._id!=null?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+o.each(this,function(u,h){if(!/^_/.test(h)){var d=typeof u;this.push(h+": "+(d==="number"?y.instance.number(u):d==="string"?"'"+u+"'":u))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(u){return o.importJSON(u,this)},exportJSON:function(u){return o.exportJSON(this,u)},toJSON:function(){return o.serialize(this)},set:function(u,h){return u&&o.filter(this,u,h,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function u(){var h=u.base.apply(this,arguments),d=h.prototype._class;return d&&!o.exports[d]&&(o.exports[d]=h),h},equals:function(u,h){if(u===h)return!0;if(u&&u.equals)return u.equals(h);if(h&&h.equals)return h.equals(u);if(u&&h&&typeof u=="object"&&typeof h=="object"){if(Array.isArray(u)&&Array.isArray(h)){var d=u.length;if(d!==h.length)return!1;for(;d--;)if(!o.equals(u[d],h[d]))return!1}else{var g=Object.keys(u),d=g.length;if(d!==Object.keys(h).length)return!1;for(;d--;){var m=g[d];if(!(h.hasOwnProperty(m)&&o.equals(u[m],h[m])))return!1}}return!0}return!1},read:function(u,h,d,g){if(this===o){var m=this.peek(u,h);return u.__index++,m}var w=this.prototype,T=w._readIndex,S=h||T&&u.__index||0,x=u.length,N=u[S];if(g=g||x-S,N instanceof this||d&&d.readNull&&N==null&&g<=1)return T&&(u.__index=S+1),N&&d&&d.clone?N.clone():N;if(N=o.create(w),T&&(N.__read=!0),N=N.initialize.apply(N,S>0||S+g<x?o.slice(u,S,S+g):u)||N,T){u.__index=S+N.__read;var O=N.__filtered;O&&(u.__filtered=O,N.__filtered=n),N.__read=n}return N},peek:function(u,h){return u[u.__index=h||u.__index||0]},remain:function(u){return u.length-(u.__index||0)},readList:function(u,h,d,g){for(var m=[],w,T=h||0,S=g?T+g:u.length,x=T;x<S;x++)m.push(Array.isArray(w=u[x])?this.read(w,0,d):this.read(u,x,d,1));return m},readNamed:function(u,h,d,g,m){var w=this.getNamed(u,h),T=w!==n;if(T){var S=u.__filtered;if(!S){var x=this.getSource(u);S=u.__filtered=o.create(x),S.__unfiltered=x}S[h]=n}return this.read(T?[w]:u,d,g,m)},readSupported:function(u,h){var d=this.getSource(u),g=this,m=!1;return d&&Object.keys(d).forEach(function(w){if(w in h){var T=g.readNamed(u,w);T!==n&&(h[w]=T),m=!0}}),m},getSource:function(u){var h=u.__source;if(h===n){var d=u.length===1&&u[0];h=u.__source=d&&o.isPlainObject(d)?d:null}return h},getNamed:function(u,h){var d=this.getSource(u);if(d)return h?d[h]:u.__filtered||d},hasNamed:function(u,h){return!!this.getNamed(u,h)},filter:function(u,h,d,g){var m;function w(O){if(!(d&&O in d)&&!(m&&O in m)){var P=h[O];P!==n&&(u[O]=P)}}if(g){for(var T={},S=0,x,N=g.length;S<N;S++)(x=g[S])in h&&(w(x),T[x]=!0);m=T}return Object.keys(h.__unfiltered||h).forEach(w),u},isPlainValue:function(u,h){return o.isPlainObject(u)||Array.isArray(u)||h&&typeof u=="string"},serialize:function(u,h,d,g){h=h||{};var m=!g,w;if(m&&(h.formatter=new y(h.precision),g={length:0,definitions:{},references:{},add:function(P,R){var A="#"+P._id,U=this.references[A];if(!U){this.length++;var W=R.call(P),H=P._class;H&&W[0]!==H&&W.unshift(H),this.definitions[A]=W,U=this.references[A]=[A]}return U}}),u&&u._serialize){w=u._serialize(h,g);var T=u._class;T&&!u._compactSerialize&&(m||!d)&&w[0]!==T&&w.unshift(T)}else if(Array.isArray(u)){w=[];for(var S=0,x=u.length;S<x;S++)w[S]=o.serialize(u[S],h,d,g)}else if(o.isPlainObject(u)){w={};for(var N=Object.keys(u),S=0,x=N.length;S<x;S++){var O=N[S];w[O]=o.serialize(u[O],h,d,g)}}else typeof u=="number"?w=h.formatter.number(u,h.precision):w=u;return m&&g.length>0?[["dictionary",g.definitions],w]:w},deserialize:function(u,h,d,g,m){var w=u,T=!d,S=T&&u&&u.length&&u[0][0]==="dictionary";if(d=d||{},Array.isArray(u)){var x=u[0],N=x==="dictionary";if(u.length==1&&/^#/.test(x))return d.dictionary[x];x=o.exports[x],w=[];for(var O=x?1:0,P=u.length;O<P;O++)w.push(o.deserialize(u[O],h,d,N,S));if(x){var R=w;h?w=h(x,R,T||m):w=new x(R)}}else if(o.isPlainObject(u)){w={},g&&(d.dictionary=w);for(var A in u)w[A]=o.deserialize(u[A],h,d)}return S?w[1]:w},exportJSON:function(u,h){var d=o.serialize(u,h);return h&&h.asString==!1?d:JSON.stringify(d)},importJSON:function(u,h){return o.deserialize(typeof u=="string"?JSON.parse(u):u,function(d,g,m){var w=m&&h&&h.constructor===d,T=w?h:o.create(d.prototype);if(g.length===1&&T instanceof fe&&(w||!(T instanceof he))){var S=g[0];o.isPlainObject(S)&&(S.insert=!1,w&&(g=g.concat([fe.INSERT])))}return(w?T.set:d).apply(T,g),w&&(h=null),T})},push:function(u,h){var d=h.length;if(d<4096)u.push.apply(u,h);else{var g=u.length;u.length+=d;for(var m=0;m<d;m++)u[g+m]=h[m]}return u},splice:function(u,h,d,g){var m=h&&h.length,w=d===n;d=w?u.length:d,d>u.length&&(d=u.length);for(var T=0;T<m;T++)h[T]._index=d+T;if(w)return o.push(u,h),[];var S=[d,g];h&&o.push(S,h);for(var x=u.splice.apply(u,S),T=0,N=x.length;T<N;T++)x[T]._index=n;for(var T=d+m,N=u.length;T<N;T++)u[T]._index=T;return x},capitalize:function(u){return u.replace(/\b[a-z]/g,function(h){return h.toUpperCase()})},camelize:function(u){return u.replace(/-(.)/g,function(h,d){return d.toUpperCase()})},hyphenate:function(u){return u.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var a={on:function(u,h){if(typeof u!="string")o.each(u,function(w,T){this.on(T,w)},this);else{var d=this._eventTypes,g=d&&d[u],m=this._callbacks=this._callbacks||{};m=m[u]=m[u]||[],m.indexOf(h)===-1&&(m.push(h),g&&g.install&&m.length===1&&g.install.call(this,u))}return this},off:function(u,h){if(typeof u!="string"){o.each(u,function(T,S){this.off(S,T)},this);return}var d=this._eventTypes,g=d&&d[u],m=this._callbacks&&this._callbacks[u],w;return m&&(!h||(w=m.indexOf(h))!==-1&&m.length===1?(g&&g.uninstall&&g.uninstall.call(this,u),delete this._callbacks[u]):w!==-1&&m.splice(w,1)),this},once:function(u,h){return this.on(u,function d(){h.apply(this,arguments),this.off(u,d)})},emit:function(u,h){var d=this._callbacks&&this._callbacks[u];if(!d)return!1;var g=o.slice(arguments,1),m=h&&h.target&&!h.currentTarget;d=d.slice(),m&&(h.currentTarget=this);for(var w=0,T=d.length;w<T;w++)if(d[w].apply(this,g)==!1){h&&h.stop&&h.stop();break}return m&&delete h.currentTarget,!0},responds:function(u){return!!(this._callbacks&&this._callbacks[u])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(u){var h=this._eventTypes,d=this._callbacks,g=u?"install":"uninstall";if(h){for(var m in d)if(d[m].length>0){var w=h[m],T=w&&w[g];T&&T.call(this,m)}}},statics:{inject:function u(h){var d=h._events;if(d){var g={};o.each(d,function(m,w){var T=typeof m=="string",S=T?m:w,x=o.capitalize(S),N=S.substring(2).toLowerCase();g[N]=T?{}:m,S="_"+S,h["get"+x]=function(){return this[S]},h["set"+x]=function(O){var P=this[S];P&&this.off(N,P),O&&this.on(N,O),this[S]=O}}),h._eventTypes=g}return u.base.apply(this,arguments)}}},c=o.extend({_class:"PaperScope",initialize:function u(){Ot=this,this.settings=new o({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=u._id++,u._scopes[this._id]=this;var h=u.prototype;if(!this.support){var d=xn.getContext(1,1)||{};h.support={nativeDash:"setLineDash"in d||"mozDash"in d,nativeBlendModes:Fa.nativeModes},xn.release(d)}if(!this.agent){var g=e.navigator.userAgent.toLowerCase(),m=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(g)||[])[0],w=m==="darwin"?"mac":m,T=h.agent=h.browser={platform:w};w&&(T[w]=!0),g.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(S,x,N,O,P){if(!T.chrome){var R=x==="opera"?O:/^(node|trident)$/.test(x)?P:N;T.version=R,T.versionNumber=parseFloat(R),x={trident:"msie",jsdom:"node"}[x]||x,T.name=x,T[x]=!0}}),T.chrome&&delete T.webkit,T.atom&&delete T.chrome}},version:"0.12.17",getView:function(){var u=this.project;return u&&u._view},getPaper:function(){return this},execute:function(u,h){},install:function(u){var h=this;o.each(["project","view","tool"],function(g){o.define(u,g,{configurable:!0,get:function(){return h[g]}})});for(var d in this)!/^_/.test(d)&&this[d]&&(u[d]=this[d])},setup:function(u){return Ot=this,this.project=new oe(u),this},createCanvas:function(u,h){return xn.getCanvas(u,h)},activate:function(){Ot=this},clear:function(){for(var u=this.projects,h=this.tools,d=u.length-1;d>=0;d--)u[d].remove();for(var d=h.length-1;d>=0;d--)h[d].remove()},remove:function(){this.clear(),delete c._scopes[this._id]},statics:new function(){function u(h){return h+="Attribute",function(d,g){return d[h](g)||d[h]("data-paper-"+g)}}return{_scopes:{},_id:0,get:function(h){return this._scopes[h]||null},getAttribute:u("get"),hasAttribute:u("has")}}}),f=o.extend(a,{initialize:function(u){this._scope=Ot,this._index=this._scope[this._list].push(this)-1,(u||!this._scope[this._reference])&&this.activate()},activate:function(){if(!this._scope)return!1;var u=this._scope[this._reference];return u&&u!==this&&u.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",u),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return this._index==null?!1:(o.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),v={findItemBoundsCollisions:function(u,h,d){function g(T){for(var S=new Array(T.length),x=0;x<T.length;x++){var N=T[x].getBounds();S[x]=[N.left,N.top,N.right,N.bottom]}return S}var m=g(u),w=!h||h===u?m:g(h);return this.findBoundsCollisions(m,w,d||0)},findCurveBoundsCollisions:function(u,h,d,g){function m(R){for(var A=Math.min,U=Math.max,W=new Array(R.length),H=0;H<R.length;H++){var V=R[H];W[H]=[A(V[0],V[2],V[4],V[6]),A(V[1],V[3],V[5],V[7]),U(V[0],V[2],V[4],V[6]),U(V[1],V[3],V[5],V[7])]}return W}var w=m(u),T=!h||h===u?w:m(h);if(g){for(var S=this.findBoundsCollisions(w,T,d||0,!1,!0),x=this.findBoundsCollisions(w,T,d||0,!0,!0),N=[],O=0,P=S.length;O<P;O++)N[O]={hor:S[O],ver:x[O]};return N}return this.findBoundsCollisions(w,T,d||0)},findBoundsCollisions:function(u,h,d,g,m){var w=!h||u===h,T=w?u:u.concat(h),S=u.length,x=T.length;function N(Me,Be,lt){for(var nt=0,et=Me.length;nt<et;){var Ze=et+nt>>>1;T[Me[Ze]][Be]<lt?nt=Ze+1:et=Ze}return nt-1}for(var O=g?1:0,P=O+2,R=g?0:1,A=R+2,U=new Array(x),W=0;W<x;W++)U[W]=W;U.sort(function(Me,Be){return T[Me][O]-T[Be][O]});for(var H=[],V=new Array(S),W=0;W<x;W++){var B=U[W],k=T[B],M=w?B:B-S,q=B<S,$=w||!q,X=q?[]:null;if(H.length){var Q=N(H,P,k[O]-d)+1;if(H.splice(0,Q),w&&m){X=X.concat(H);for(var J=0;J<H.length;J++){var ne=H[J];V[ne].push(M)}}else for(var se=k[A],ie=k[R],J=0;J<H.length;J++){var ne=H[J],ae=T[ne],le=ne<S,de=w||ne>=S;(m||(q&&de||$&&le)&&se>=ae[R]-d&&ie<=ae[A]+d)&&(q&&de&&X.push(w?ne:ne-S),$&&le&&V[ne].push(M))}}if(q&&(u===h&&X.push(B),V[B]=X),H.length){var ve=k[P],ye=N(H,P,ve);H.splice(ye+1,0,B)}else H.push(B)}for(var W=0;W<V.length;W++){var Ae=V[W];Ae&&Ae.sort(function(Be,lt){return Be-lt})}return V}},y=o.extend({initialize:function(u){this.precision=o.pick(u,5),this.multiplier=Math.pow(10,this.precision)},number:function(u){return this.precision<16?Math.round(u*this.multiplier)/this.multiplier:u},pair:function(u,h,d){return this.number(u)+(d||",")+this.number(h)},point:function(u,h){return this.number(u.x)+(h||",")+this.number(u.y)},size:function(u,h){return this.number(u.width)+(h||",")+this.number(u.height)},rectangle:function(u,h){return this.point(u,h)+(h||",")+this.size(u,h)}});y.instance=new y;var b=new function(){var u=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],h=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],d=Math.abs,g=Math.sqrt,m=Math.pow,w=Math.log2||function(P){return Math.log(P)*Math.LOG2E},T=1e-12,S=112e-18;function x(P,R,A){return P<R?R:P>A?A:P}function N(P,R,A){function U(Q){var J=Q*134217729,ne=Q-J,se=ne+J,ie=Q-se;return[se,ie]}var W=R*R-P*A,H=R*R+P*A;if(d(W)*3<H){var V=U(P),B=U(R),k=U(A),M=R*R,q=B[0]*B[0]-M+2*B[0]*B[1]+B[1]*B[1],$=P*A,X=V[0]*k[0]-$+V[0]*k[1]+V[1]*k[0]+V[1]*k[1];W=M-$+(q-X)}return W}function O(){var P=Math.max.apply(Math,arguments);return P&&(P<1e-8||P>1e8)?m(2,-Math.round(w(P))):0}return{EPSILON:T,MACHINE_EPSILON:S,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,ANGULAR_EPSILON:1e-5,KAPPA:4*(g(2)-1)/3,isZero:function(P){return P>=-T&&P<=T},isMachineZero:function(P){return P>=-S&&P<=S},clamp:x,integrate:function(P,R,A,U){for(var W=u[U-2],H=h[U-2],V=(A-R)*.5,B=V+R,k=0,M=U+1>>1,q=U&1?H[k++]*P(B):0;k<M;){var $=V*W[k];q+=H[k++]*(P(B+$)+P(B-$))}return V*q},findRoot:function(P,R,A,U,W,H,V){for(var B=0;B<H;B++){var k=P(A),M=k/R(A),q=A-M;if(d(M)<V){A=q;break}k>0?(W=A,A=q<=U?(U+W)*.5:q):(U=A,A=q>=W?(U+W)*.5:q)}return x(A,U,W)},solveQuadratic:function(P,R,A,U,W,H){var V,B=1/0;if(d(P)<T){if(d(R)<T)return d(A)<T?-1:0;V=-A/R}else{R*=-.5;var k=N(P,R,A);if(k&&d(k)<S){var M=O(d(P),d(R),d(A));M&&(P*=M,R*=M,A*=M,k=N(P,R,A))}if(k>=-S){var q=k<0?0:g(k),$=R+(R<0?-q:q);$===0?(V=A/P,B=-V):(V=$/P,B=A/$)}}var X=0,Q=W==null,J=W-T,ne=H+T;return isFinite(V)&&(Q||V>J&&V<ne)&&(U[X++]=Q?V:x(V,W,H)),B!==V&&isFinite(B)&&(Q||B>J&&B<ne)&&(U[X++]=Q?B:x(B,W,H)),X},solveCubic:function(P,R,A,U,W,H,V){var B=O(d(P),d(R),d(A),d(U)),k,M,q,$,X;B&&(P*=B,R*=B,A*=B,U*=B);function Q(ye){k=ye;var Ae=P*k;M=Ae+R,q=M*k+A,$=(Ae+M)*k+q,X=q*k+U}if(d(P)<T)P=R,M=A,q=U,k=1/0;else if(d(U)<T)M=R,q=A,k=0;else{Q(-(R/P)/3);var J=X/P,ne=m(d(J),1/3),se=J<0?-1:1,ie=-$/P,ae=ie>0?1.324717957244746*Math.max(ne,g(ie)):ne,le=k-se*ae;if(le!==k){do Q(le),le=$===0?k:k-X/$/(1+S);while(se*le>se*k);d(P)*k*k>d(U/k)&&(q=-U/k,M=(q-A)/k)}}var de=b.solveQuadratic(P,M,q,W,H,V),ve=H==null;return isFinite(k)&&(de===0||de>0&&k!==W[0]&&k!==W[1])&&(ve||k>H-T&&k<V+T)&&(W[de++]=ve?k:x(k,H,V)),de}}},E={_id:1,_pools:{},get:function(u){if(u){var h=this._pools[u];return h||(h=this._pools[u]={_id:1}),h._id++}else return this._id++}},I=o.extend({_class:"Point",_readIndex:!0,initialize:function(h,d){var g=typeof h,m=this.__read,w=0;if(g==="number"){var T=typeof d=="number";this._set(h,T?d:h),m&&(w=T?2:1)}else if(g==="undefined"||h===null)this._set(0,0),m&&(w=h===null?1:0);else{var S=g==="string"?h.split(/[\s,]+/)||[]:h;w=1,Array.isArray(S)?this._set(+S[0],+(S.length>1?S[1]:S[0])):"x"in S?this._set(S.x||0,S.y||0):"width"in S?this._set(S.width||0,S.height||0):"angle"in S?(this._set(S.length||0,0),this.setAngle(S.angle||0)):(this._set(0,0),w=0)}return m&&(this.__read=w),this},set:"#initialize",_set:function(u,h){return this.x=u,this.y=h,this},equals:function(u){return this===u||u&&(this.x===u.x&&this.y===u.y||Array.isArray(u)&&this.x===u[0]&&this.y===u[1])||!1},clone:function(){return new I(this.x,this.y)},toString:function(){var u=y.instance;return"{ x: "+u.number(this.x)+", y: "+u.number(this.y)+" }"},_serialize:function(u){var h=u.formatter;return[h.number(this.x),h.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(u){if(this.isZero()){var h=this._angle||0;this._set(Math.cos(h)*u,Math.sin(h)*u)}else{var d=u/this.getLength();b.isZero(d)&&this.getAngle(),this._set(this.x*d,this.y*d)}},getAngle:function(){return this.getAngleInRadians.apply(this,arguments)*180/Math.PI},setAngle:function(u){this.setAngleInRadians.call(this,u*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var u=I.read(arguments),h=this.getLength()*u.getLength();if(b.isZero(h))return NaN;var d=this.dot(u)/h;return Math.acos(d<-1?-1:d>1?1:d)}else return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(u){if(this._angle=u,!this.isZero()){var h=this.getLength();this._set(Math.cos(u)*h,Math.sin(u)*h)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var u=I.read(arguments);return Math.atan2(this.cross(u),this.dot(u))*180/Math.PI},getDistance:function(){var u=arguments,h=I.read(u),d=h.x-this.x,g=h.y-this.y,m=d*d+g*g,w=o.read(u);return w?m:Math.sqrt(m)},normalize:function(u){u===n&&(u=1);var h=this.getLength(),d=h!==0?u/h:0,g=new I(this.x*d,this.y*d);return d>=0&&(g._angle=this._angle),g},rotate:function(u,h){if(u===0)return this.clone();u=u*Math.PI/180;var d=h?this.subtract(h):this,g=Math.sin(u),m=Math.cos(u);return d=new I(d.x*m-d.y*g,d.x*g+d.y*m),h?d.add(h):d},transform:function(u){return u?u._transformPoint(this):this},add:function(){var u=I.read(arguments);return new I(this.x+u.x,this.y+u.y)},subtract:function(){var u=I.read(arguments);return new I(this.x-u.x,this.y-u.y)},multiply:function(){var u=I.read(arguments);return new I(this.x*u.x,this.y*u.y)},divide:function(){var u=I.read(arguments);return new I(this.x/u.x,this.y/u.y)},modulo:function(){var u=I.read(arguments);return new I(this.x%u.x,this.y%u.y)},negate:function(){return new I(-this.x,-this.y)},isInside:function(){return z.read(arguments).contains(this)},isClose:function(){var u=arguments,h=I.read(u),d=o.read(u);return this.getDistance(h)<=d},isCollinear:function(){var u=I.read(arguments);return I.isCollinear(this.x,this.y,u.x,u.y)},isColinear:"#isCollinear",isOrthogonal:function(){var u=I.read(arguments);return I.isOrthogonal(this.x,this.y,u.x,u.y)},isZero:function(){var u=b.isZero;return u(this.x)&&u(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(u){return this.x*(u>1&&u<4?-1:1)>=0&&this.y*(u>2?-1:1)>=0},dot:function(){var u=I.read(arguments);return this.x*u.x+this.y*u.y},cross:function(){var u=I.read(arguments);return this.x*u.y-this.y*u.x},project:function(){var u=I.read(arguments),h=u.isZero()?0:this.dot(u)/u.dot(u);return new I(u.x*h,u.y*h)},statics:{min:function(){var u=arguments,h=I.read(u),d=I.read(u);return new I(Math.min(h.x,d.x),Math.min(h.y,d.y))},max:function(){var u=arguments,h=I.read(u),d=I.read(u);return new I(Math.max(h.x,d.x),Math.max(h.y,d.y))},random:function(){return new I(Math.random(),Math.random())},isCollinear:function(u,h,d,g){return Math.abs(u*g-h*d)<=Math.sqrt((u*u+h*h)*(d*d+g*g))*1e-8},isOrthogonal:function(u,h,d,g){return Math.abs(u*d+h*g)<=Math.sqrt((u*u+h*h)*(d*d+g*g))*1e-8}}},o.each(["round","ceil","floor","abs"],function(u){var h=Math[u];this[u]=function(){return new I(h(this.x),h(this.y))}},{})),L=I.extend({initialize:function(h,d,g,m){this._x=h,this._y=d,this._owner=g,this._setter=m},_set:function(u,h,d){return this._x=u,this._y=h,d||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(u){this._x=u,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(u){this._y=u,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(u){this._owner._changeSelection(this._getSelection(),u)},_getSelection:function(){return this._setter==="setPosition"?4:0}}),D=o.extend({_class:"Size",_readIndex:!0,initialize:function(h,d){var g=typeof h,m=this.__read,w=0;if(g==="number"){var T=typeof d=="number";this._set(h,T?d:h),m&&(w=T?2:1)}else if(g==="undefined"||h===null)this._set(0,0),m&&(w=h===null?1:0);else{var S=g==="string"?h.split(/[\s,]+/)||[]:h;w=1,Array.isArray(S)?this._set(+S[0],+(S.length>1?S[1]:S[0])):"width"in S?this._set(S.width||0,S.height||0):"x"in S?this._set(S.x||0,S.y||0):(this._set(0,0),w=0)}return m&&(this.__read=w),this},set:"#initialize",_set:function(u,h){return this.width=u,this.height=h,this},equals:function(u){return u===this||u&&(this.width===u.width&&this.height===u.height||Array.isArray(u)&&this.width===u[0]&&this.height===u[1])||!1},clone:function(){return new D(this.width,this.height)},toString:function(){var u=y.instance;return"{ width: "+u.number(this.width)+", height: "+u.number(this.height)+" }"},_serialize:function(u){var h=u.formatter;return[h.number(this.width),h.number(this.height)]},add:function(){var u=D.read(arguments);return new D(this.width+u.width,this.height+u.height)},subtract:function(){var u=D.read(arguments);return new D(this.width-u.width,this.height-u.height)},multiply:function(){var u=D.read(arguments);return new D(this.width*u.width,this.height*u.height)},divide:function(){var u=D.read(arguments);return new D(this.width/u.width,this.height/u.height)},modulo:function(){var u=D.read(arguments);return new D(this.width%u.width,this.height%u.height)},negate:function(){return new D(-this.width,-this.height)},isZero:function(){var u=b.isZero;return u(this.width)&&u(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(u,h){return new D(Math.min(u.width,h.width),Math.min(u.height,h.height))},max:function(u,h){return new D(Math.max(u.width,h.width),Math.max(u.height,h.height))},random:function(){return new D(Math.random(),Math.random())}}},o.each(["round","ceil","floor","abs"],function(u){var h=Math[u];this[u]=function(){return new D(h(this.width),h(this.height))}},{})),te=D.extend({initialize:function(h,d,g,m){this._width=h,this._height=d,this._owner=g,this._setter=m},_set:function(u,h,d){return this._width=u,this._height=h,d||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(u){this._width=u,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(u){this._height=u,this._owner[this._setter](this)}}),z=o.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(h,d,g,m){var w=arguments,T=typeof h,S;if(T==="number"?(this._set(h,d,g,m),S=4):T==="undefined"||h===null?(this._set(0,0,0,0),S=h===null?1:0):w.length===1&&(Array.isArray(h)?(this._set.apply(this,h),S=1):h.x!==n||h.width!==n?(this._set(h.x||0,h.y||0,h.width||0,h.height||0),S=1):h.from===n&&h.to===n&&(this._set(0,0,0,0),o.readSupported(w,this)&&(S=1))),S===n){var x=I.readNamed(w,"from"),N=o.peek(w),O=x.x,P=x.y,R,A;if(N&&N.x!==n||o.hasNamed(w,"to")){var U=I.readNamed(w,"to");R=U.x-O,A=U.y-P,R<0&&(O=U.x,R=-R),A<0&&(P=U.y,A=-A)}else{var W=D.read(w);R=W.width,A=W.height}this._set(O,P,R,A),S=w.__index}var H=w.__filtered;return H&&(this.__filtered=H),this.__read&&(this.__read=S),this},set:"#initialize",_set:function(u,h,d,g){return this.x=u,this.y=h,this.width=d,this.height=g,this},clone:function(){return new z(this.x,this.y,this.width,this.height)},equals:function(u){var h=o.isPlainValue(u)?z.read(arguments):u;return h===this||h&&this.x===h.x&&this.y===h.y&&this.width===h.width&&this.height===h.height||!1},toString:function(){var u=y.instance;return"{ x: "+u.number(this.x)+", y: "+u.number(this.y)+", width: "+u.number(this.width)+", height: "+u.number(this.height)+" }"},_serialize:function(u){var h=u.formatter;return[h.number(this.x),h.number(this.y),h.number(this.width),h.number(this.height)]},getPoint:function(u){var h=u?I:L;return new h(this.x,this.y,this,"setPoint")},setPoint:function(){var u=I.read(arguments);this.x=u.x,this.y=u.y},getSize:function(u){var h=u?D:te;return new h(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var u=D.read(arguments),h=this._sx,d=this._sy,g=u.width,m=u.height;h&&(this.x+=(this.width-g)*h),d&&(this.y+=(this.height-m)*d),this.width=g,this.height=m,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(u){if(!this._fw){var h=u-this.x;this.width-=this._sx===.5?h*2:h}this.x=u,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(u){if(!this._fh){var h=u-this.y;this.height-=this._sy===.5?h*2:h}this.y=u,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(u){if(!this._fw){var h=u-this.x;this.width=this._sx===.5?h*2:h}this.x=u-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(u){if(!this._fh){var h=u-this.y;this.height=this._sy===.5?h*2:h}this.y=u-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(u){this._fw||this._sx===.5?this.x=u-this.width/2:(this._sx&&(this.x+=(u-this.x)*2*this._sx),this.width=(u-this.x)*2),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(u){this._fh||this._sy===.5?this.y=u-this.height/2:(this._sy&&(this.y+=(u-this.y)*2*this._sy),this.height=(u-this.y)*2),this._sy=.5,this._fh=0},getCenter:function(u){var h=u?I:L;return new h(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var u=I.read(arguments);return this.setCenterX(u.x),this.setCenterY(u.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return this.width===0||this.height===0},contains:function(u){return u&&u.width!==n||(Array.isArray(u)?u:arguments).length===4?this._containsRectangle(z.read(arguments)):this._containsPoint(I.read(arguments))},_containsPoint:function(u){var h=u.x,d=u.y;return h>=this.x&&d>=this.y&&h<=this.x+this.width&&d<=this.y+this.height},_containsRectangle:function(u){var h=u.x,d=u.y;return h>=this.x&&d>=this.y&&h+u.width<=this.x+this.width&&d+u.height<=this.y+this.height},intersects:function(){var u=z.read(arguments),h=o.read(arguments)||0;return u.x+u.width>this.x-h&&u.y+u.height>this.y-h&&u.x<this.x+this.width+h&&u.y<this.y+this.height+h},intersect:function(){var u=z.read(arguments),h=Math.max(this.x,u.x),d=Math.max(this.y,u.y),g=Math.min(this.x+this.width,u.x+u.width),m=Math.min(this.y+this.height,u.y+u.height);return new z(h,d,g-h,m-d)},unite:function(){var u=z.read(arguments),h=Math.min(this.x,u.x),d=Math.min(this.y,u.y),g=Math.max(this.x+this.width,u.x+u.width),m=Math.max(this.y+this.height,u.y+u.height);return new z(h,d,g-h,m-d)},include:function(){var u=I.read(arguments),h=Math.min(this.x,u.x),d=Math.min(this.y,u.y),g=Math.max(this.x+this.width,u.x),m=Math.max(this.y+this.height,u.y);return new z(h,d,g-h,m-d)},expand:function(){var u=D.read(arguments),h=u.width,d=u.height;return new z(this.x-h/2,this.y-d/2,this.width+h,this.height+d)},scale:function(u,h){return this.expand(this.width*u-this.width,this.height*(h===n?u:h)-this.height)}},o.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(u,h){var d=u.join(""),g=/^[RL]/.test(d);h>=4&&(u[1]+=g?"Y":"X");var m=u[g?0:1],w=u[g?1:0],T="get"+m,S="get"+w,x="set"+m,N="set"+w,O="get"+d,P="set"+d;this[O]=function(R){var A=R?I:L;return new A(this[T](),this[S](),this,P)},this[P]=function(){var R=I.read(arguments);this[x](R.x),this[N](R.y)}},{beans:!0})),Y=z.extend({initialize:function(h,d,g,m,w,T){this._set(h,d,g,m,!0),this._owner=w,this._setter=T},_set:function(u,h,d,g,m){return this._x=u,this._y=h,this._width=d,this._height=g,m||this._owner[this._setter](this),this}},new function(){var u=z.prototype;return o.each(["x","y","width","height"],function(h){var d=o.capitalize(h),g="_"+h;this["get"+d]=function(){return this[g]},this["set"+d]=function(m){this[g]=m,this._dontNotify||this._owner[this._setter](this)}},o.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(h){var d="set"+h;this[d]=function(){this._dontNotify=!0,u[d].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(this._owner._selection&2)},setSelected:function(h){var d=this._owner;d._changeSelection&&d._changeSelection(2,h)}}))}),K=o.extend({_class:"Matrix",initialize:function u(h,d){var g=arguments,m=g.length,w=!0;if(m>=6?this._set.apply(this,g):m===1||m===2?h instanceof u?this._set(h._a,h._b,h._c,h._d,h._tx,h._ty,d):Array.isArray(h)?this._set.apply(this,d?h.concat([d]):h):w=!1:m?w=!1:this.reset(),!w)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(u,h,d,g,m,w,T){return this._a=u,this._b=h,this._c=d,this._d=g,this._tx=m,this._ty=w,T||this._changed(),this},_serialize:function(u,h){return o.serialize(this.getValues(),u,!0,h)},_changed:function(){var u=this._owner;u&&(u._applyMatrix?u.transform(null,!0):u._changed(25))},clone:function(){return new K(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(u){return u===this||u&&this._a===u._a&&this._b===u._b&&this._c===u._c&&this._d===u._d&&this._tx===u._tx&&this._ty===u._ty},toString:function(){var u=y.instance;return"[["+[u.number(this._a),u.number(this._c),u.number(this._tx)].join(", ")+"], ["+[u.number(this._b),u.number(this._d),u.number(this._ty)].join(", ")+"]]"},reset:function(u){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,u||this._changed(),this},apply:function(u,h){var d=this._owner;return d?(d.transform(null,o.pick(u,!0),h),this.isIdentity()):!1},translate:function(){var u=I.read(arguments),h=u.x,d=u.y;return this._tx+=h*this._a+d*this._c,this._ty+=h*this._b+d*this._d,this._changed(),this},scale:function(){var u=arguments,h=I.read(u),d=I.read(u,0,{readNull:!0});return d&&this.translate(d),this._a*=h.x,this._b*=h.x,this._c*=h.y,this._d*=h.y,d&&this.translate(d.negate()),this._changed(),this},rotate:function(u){u*=Math.PI/180;var h=I.read(arguments,1),d=h.x,g=h.y,m=Math.cos(u),w=Math.sin(u),T=d-d*m+g*w,S=g-d*w-g*m,x=this._a,N=this._b,O=this._c,P=this._d;return this._a=m*x+w*O,this._b=m*N+w*P,this._c=-w*x+m*O,this._d=-w*N+m*P,this._tx+=T*x+S*O,this._ty+=T*N+S*P,this._changed(),this},shear:function(){var u=arguments,h=I.read(u),d=I.read(u,0,{readNull:!0});d&&this.translate(d);var g=this._a,m=this._b;return this._a+=h.y*this._c,this._b+=h.y*this._d,this._c+=h.x*g,this._d+=h.x*m,d&&this.translate(d.negate()),this._changed(),this},skew:function(){var u=arguments,h=I.read(u),d=I.read(u,0,{readNull:!0}),g=Math.PI/180,m=new I(Math.tan(h.x*g),Math.tan(h.y*g));return this.shear(m,d)},append:function(u,h){if(u){var d=this._a,g=this._b,m=this._c,w=this._d,T=u._a,S=u._c,x=u._b,N=u._d,O=u._tx,P=u._ty;this._a=T*d+x*m,this._c=S*d+N*m,this._b=T*g+x*w,this._d=S*g+N*w,this._tx+=O*d+P*m,this._ty+=O*g+P*w,h||this._changed()}return this},prepend:function(u,h){if(u){var d=this._a,g=this._b,m=this._c,w=this._d,T=this._tx,S=this._ty,x=u._a,N=u._c,O=u._b,P=u._d,R=u._tx,A=u._ty;this._a=x*d+N*g,this._c=x*m+N*w,this._b=O*d+P*g,this._d=O*m+P*w,this._tx=x*T+N*S+R,this._ty=O*T+P*S+A,h||this._changed()}return this},appended:function(u){return this.clone().append(u)},prepended:function(u){return this.clone().prepend(u)},invert:function(){var u=this._a,h=this._b,d=this._c,g=this._d,m=this._tx,w=this._ty,T=u*g-h*d,S=null;return T&&!isNaN(T)&&isFinite(m)&&isFinite(w)&&(this._a=g/T,this._b=-h/T,this._c=-d/T,this._d=u/T,this._tx=(d*w-g*m)/T,this._ty=(h*m-u*w)/T,S=this),S},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new K(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return this._a===1&&this._b===0&&this._c===0&&this._d===1&&this._tx===0&&this._ty===0},isInvertible:function(){var u=this._a*this._d-this._c*this._b;return u&&!isNaN(u)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(u,h,d){return arguments.length<3?this._transformPoint(I.read(arguments)):this._transformCoordinates(u,h,d)},_transformPoint:function(u,h,d){var g=u.x,m=u.y;return h||(h=new I),h._set(g*this._a+m*this._c+this._tx,g*this._b+m*this._d+this._ty,d)},_transformCoordinates:function(u,h,d){for(var g=0,m=2*d;g<m;g+=2){var w=u[g],T=u[g+1];h[g]=w*this._a+T*this._c+this._tx,h[g+1]=w*this._b+T*this._d+this._ty}return h},_transformCorners:function(u){var h=u.x,d=u.y,g=h+u.width,m=d+u.height,w=[h,d,g,d,g,m,h,m];return this._transformCoordinates(w,w,4)},_transformBounds:function(u,h,d){for(var g=this._transformCorners(u),m=g.slice(0,2),w=m.slice(),T=2;T<8;T++){var S=g[T],x=T&1;S<m[x]?m[x]=S:S>w[x]&&(w[x]=S)}return h||(h=new z),h._set(m[0],m[1],w[0]-m[0],w[1]-m[1],d)},inverseTransform:function(){return this._inverseTransform(I.read(arguments))},_inverseTransform:function(u,h,d){var g=this._a,m=this._b,w=this._c,T=this._d,S=this._tx,x=this._ty,N=g*T-m*w,O=null;if(N&&!isNaN(N)&&isFinite(S)&&isFinite(x)){var P=u.x-this._tx,R=u.y-this._ty;h||(h=new I),O=h._set((P*T-R*w)/N,(R*g-P*m)/N,d)}return O},decompose:function(){var u=this._a,h=this._b,d=this._c,g=this._d,m=u*g-h*d,w=Math.sqrt,T=Math.atan2,S=180/Math.PI,x,N,O;if(u!==0||h!==0){var P=w(u*u+h*h);x=Math.acos(u/P)*(h>0?1:-1),N=[P,m/P],O=[T(u*d+h*g,P*P),0]}else if(d!==0||g!==0){var R=w(d*d+g*g);x=Math.asin(d/R)*(g>0?1:-1),N=[m/R,R],O=[0,T(u*d+h*g,R*R)]}else x=0,O=N=[0,0];return{translation:this.getTranslation(),rotation:x*S,scaling:new I(N),skewing:new I(O[0]*S,O[1]*S)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new I(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(u){this.isIdentity()||u.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},o.each(["a","b","c","d","tx","ty"],function(u){var h=o.capitalize(u),d="_"+u;this["get"+h]=function(){return this[d]},this["set"+h]=function(g){this[d]=g,this._changed()}},{})),ue=o.extend({_class:"Line",initialize:function(h,d,g,m,w){var T=!1;arguments.length>=4?(this._px=h,this._py=d,this._vx=g,this._vy=m,T=w):(this._px=h.x,this._py=h.y,this._vx=d.x,this._vy=d.y,T=g),T||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new I(this._px,this._py)},getVector:function(){return new I(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(u,h){return ue.intersect(this._px,this._py,this._vx,this._vy,u._px,u._py,u._vx,u._vy,!0,h)},getSide:function(u,h){return ue.getSide(this._px,this._py,this._vx,this._vy,u.x,u.y,!0,h)},getDistance:function(u){return Math.abs(this.getSignedDistance(u))},getSignedDistance:function(u){return ue.getSignedDistance(this._px,this._py,this._vx,this._vy,u.x,u.y,!0)},isCollinear:function(u){return I.isCollinear(this._vx,this._vy,u._vx,u._vy)},isOrthogonal:function(u){return I.isOrthogonal(this._vx,this._vy,u._vx,u._vy)},statics:{intersect:function(u,h,d,g,m,w,T,S,x,N){x||(d-=u,g-=h,T-=m,S-=w);var O=d*S-g*T;if(!b.isMachineZero(O)){var P=u-m,R=h-w,A=(T*R-S*P)/O,U=(d*R-g*P)/O,W=1e-12,H=-W,V=1+W;if(N||H<A&&A<V&&H<U&&U<V)return N||(A=A<=0?0:A>=1?1:A),new I(u+A*d,h+A*g)}},getSide:function(u,h,d,g,m,w,T,S){T||(d-=u,g-=h);var x=m-u,N=w-h,O=x*g-N*d;return!S&&b.isMachineZero(O)&&(O=(x*d+x*d)/(d*d+g*g),O>=0&&O<=1&&(O=0)),O<0?-1:O>0?1:0},getSignedDistance:function(u,h,d,g,m,w,T){return T||(d-=u,g-=h),d===0?g>0?m-u:u-m:g===0?d<0?w-h:h-w:((m-u)*g-(w-h)*d)/(g>d?g*Math.sqrt(1+d*d/(g*g)):d*Math.sqrt(1+g*g/(d*d)))},getDistance:function(u,h,d,g,m,w,T){return Math.abs(ue.getSignedDistance(u,h,d,g,m,w,T))}}}),oe=f.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(h){f.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new qs(null,null,this),this._view=_e.create(this,h||xn.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(u,h){return o.serialize(this._children,u,!0,h)},_changed:function(u,h){if(u&1){var d=this._view;d&&(d._needsUpdate=!0,!d._requested&&d._autoUpdate&&d.requestUpdate())}var g=this._changes;if(g&&h){var m=this._changesById,w=h._id,T=m[w];T?T.flags|=u:g.push(m[w]={item:h,flags:u})}},clear:function(){for(var u=this._children,h=u.length-1;h>=0;h--)u[h].remove()},isEmpty:function(){return!this._children.length},remove:function u(){return u.base.call(this)?(this._view&&this._view.remove(),!0):!1},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(u){this._currentStyle.set(u)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new he({project:this,insert:!0})},getSymbolDefinitions:function(){var u=[],h={};return this.getItems({class:Ue,match:function(d){var g=d._definition,m=g._id;return h[m]||(h[m]=!0,u.push(g)),!1}}),u},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var u=this._selectionItems,h=[];for(var d in u){var g=u[d],m=g._selection;m&1&&g.isInserted()?h.push(g):m||this._updateSelection(g)}return h},_updateSelection:function(u){var h=u._id,d=this._selectionItems;u._selection?d[h]!==u&&(this._selectionCount++,d[h]=u):d[h]===u&&(this._selectionCount--,delete d[h])},selectAll:function(){for(var u=this._children,h=0,d=u.length;h<d;h++)u[h].setFullySelected(!0)},deselectAll:function(){var u=this._selectionItems;for(var h in u)u[h].setFullySelected(!1)},addLayer:function(u){return this.insertLayer(n,u)},insertLayer:function(u,h){if(h instanceof he){h._remove(!1,!0),o.splice(this._children,[h],u,0),h._setProject(this,!0);var d=h._name;d&&h.setName(d),this._changes&&h._changed(5),this._activeLayer||(this._activeLayer=h)}else h=null;return h},_insertItem:function(u,h,d){return h=this.insertLayer(u,h)||(this._activeLayer||this._insertItem(n,new he(fe.NO_INSERT),!0)).insertChild(u,h),d&&h.activate&&h.activate(),h},getItems:function(u){return fe._getItems(this,u)},getItem:function(u){return fe._getItems(this,u,null,null,!0)[0]||null},importJSON:function(u){this.activate();var h=this._activeLayer;return o.importJSON(u,h&&h.isEmpty()&&h)},removeOn:function(u){var h=this._removeSets;if(h){u==="mouseup"&&(h.mousedrag=null);var d=h[u];if(d){for(var g in d){var m=d[g];for(var w in h){var T=h[w];T&&T!=d&&delete T[m._id]}m.remove()}h[u]=null}}},draw:function(u,h,d){this._updateVersion++,u.save(),h.applyToContext(u);for(var g=this._children,m=new o({offset:new I(0,0),pixelRatio:d,viewMatrix:h.isIdentity()?null:h,matrices:[new K],updateMatrix:!0}),w=0,T=g.length;w<T;w++)g[w].draw(u,m);if(u.restore(),this._selectionCount>0){u.save(),u.strokeWidth=1;var S=this._selectionItems,x=this._scope.settings.handleSize,N=this._updateVersion;for(var O in S)S[O]._drawSelection(u,h,x,S,N);u.restore()}}}),fe=o.extend(a,{statics:{extend:function u(h){return h._serializeFields&&(h._serializeFields=o.set({},this.prototype._serializeFields,h._serializeFields)),u.base.apply(this,arguments)},INSERT:{insert:!0},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new K,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var u=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return o.each(u,function(h){this._events[h]={install:function(d){this.getView()._countItemEvent(d,1)},uninstall:function(d){this.getView()._countItemEvent(d,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:u}})},{initialize:function(){},_initialize:function(u,h){var d=u&&o.isPlainObject(u),g=d&&u.internal===!0,m=this._matrix=new K,w=d&&u.project||Ot.project,T=Ot.settings;return this._id=g?null:E.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&T.applyMatrix,h&&m.translate(h),m._owner=this,this._style=new qs(w._currentStyle,this,w),g||d&&u.insert==!1||!T.insertItems&&!(d&&u.insert==!0)?this._setProject(w):(d&&u.parent||w)._insertItem(n,this,!0),d&&u!==fe.NO_INSERT&&u!==fe.INSERT&&this.set(u,{internal:!0,insert:!0,project:!0,parent:!0}),d},_serialize:function(u,h){var d={},g=this;function m(w){for(var T in w){var S=g[T];o.equals(S,T==="leading"?w.fontSize*1.2:w[T])||(d[T]=o.serialize(S,u,T!=="data",h))}}return m(this._serializeFields),this instanceof me||m(this._style._defaults),[this._class,d]},_changed:function(u){var h=this._symbol,d=this._parent||h,g=this._project;u&8&&(this._bounds=this._position=this._decomposed=n),u&16&&(this._globalMatrix=n),d&&u&72&&fe._clearBoundsCache(d),u&2&&fe._clearBoundsCache(this),g&&g._changed(u,this),h&&h._changed(u)},getId:function(){return this._id},getName:function(){return this._name},setName:function(u){if(this._name&&this._removeNamed(),u===+u+"")throw new Error("Names consisting only of numbers are not supported.");var h=this._getOwner();if(u&&h){var d=h._children,g=h._namedChildren;(g[u]=g[u]||[]).push(this),u in d||(d[u]=this)}this._name=u||n,this._changed(256)},getStyle:function(){return this._style},setStyle:function(u){this.getStyle().set(u)}},o.each(["locked","visible","blendMode","opacity","guide"],function(u){var h=o.capitalize(u),d="_"+u,g={locked:256,visible:265};this["get"+h]=function(){return this[d]},this["set"+h]=function(m){m!=this[d]&&(this[d]=m,this._changed(g[u]||257))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(u){if(u!==this._selection){this._selection=u;var h=this._project;h&&(h._updateSelection(this),this._changed(257))}},_changeSelection:function(u,h){var d=this._selection;this.setSelection(h?d|u:d&~u)},isSelected:function(){if(this._selectChildren){for(var u=this._children,h=0,d=u.length;h<d;h++)if(u[h].isSelected())return!0}return!!(this._selection&1)},setSelected:function(u){if(this._selectChildren)for(var h=this._children,d=0,g=h.length;d<g;d++)h[d].setSelected(u);this._changeSelection(1,u)},isFullySelected:function(){var u=this._children,h=!!(this._selection&1);if(u&&h){for(var d=0,g=u.length;d<g;d++)if(!u[d].isFullySelected())return!1;return!0}return h},setFullySelected:function(u){var h=this._children;if(h)for(var d=0,g=h.length;d<g;d++)h[d].setFullySelected(u);this._changeSelection(1,u)},isClipMask:function(){return this._clipMask},setClipMask:function(u){this._clipMask!=(u=!!u)&&(this._clipMask=u,u&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(u){this._data=u},getPosition:function(u){var h=u?I:L,d=this._position||(this._position=this._getPositionFromBounds());return new h(d.x,d.y,this,"setPosition")},setPosition:function(){this.translate(I.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(u){return this._pivot?this._matrix._transformPoint(this._pivot):(u||this.getBounds()).getCenter(!0)},getPivot:function(){var u=this._pivot;return u?new L(u.x,u.y,this,"setPivot"):null},setPivot:function(){this._pivot=I.read(arguments,0,{clone:!0,readNull:!0}),this._position=n}},o.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(u,h){this[h]=function(d){return this.getBounds(d,u)}},{beans:!0,getBounds:function(u,h){var d=h||u instanceof K,g=o.set({},d?h:u,this._boundsOptions);(!g.stroke||this.getStrokeScaling())&&(g.cacheItem=this);var m=this._getCachedBounds(d&&u,g).rect;return arguments.length?m:new Y(m.x,m.y,m.width,m.height,this,"setBounds")},setBounds:function(){var u=z.read(arguments),h=this.getBounds(),d=this._matrix,g=new K,m=u.getCenter();g.translate(m),(u.width!=h.width||u.height!=h.height)&&(d.isInvertible()||(d.set(d._backup||new K().translate(d.getTranslation())),h=this.getBounds()),g.scale(h.width!==0?u.width/h.width:0,h.height!==0?u.height/h.height:0)),m=h.getCenter(),g.translate(-m.x,-m.y),this.transform(g)},_getBounds:function(u,h){var d=this._children;return!d||!d.length?new z:(fe._updateBoundsCache(this,h.cacheItem),fe._getBounds(d,u,h))},_getBoundsCacheKey:function(u,h){return[u.stroke?1:0,u.handle?1:0,h?1:0].join("")},_getCachedBounds:function(u,h,d){u=u&&u._orNullIfIdentity();var g=h.internal&&!d,m=h.cacheItem,w=g?null:this._matrix._orNullIfIdentity(),T=m&&(!u||u.equals(w))&&this._getBoundsCacheKey(h,g),S=this._bounds;if(fe._updateBoundsCache(this._parent||this._symbol,m),T&&S&&T in S){var x=S[T];return{rect:x.rect.clone(),nonscaling:x.nonscaling}}var N=this._getBounds(u||w,h),O=N.rect||N,P=this._style,R=N.nonscaling||P.hasStroke()&&!P.getStrokeScaling();if(T){S||(this._bounds=S={});var x=S[T]={rect:O.clone(),nonscaling:R,internal:g}}return{rect:O,nonscaling:R}},_getStrokeMatrix:function(u,h){var d=this.getStrokeScaling()?null:h&&h.internal?this:this._parent||this._symbol&&this._symbol._item,g=d?d.getViewMatrix().invert():u;return g&&g._shiftless()},statics:{_updateBoundsCache:function(u,h){if(u&&h){var d=h._id,g=u._boundsCache=u._boundsCache||{ids:{},list:[]};g.ids[d]||(g.list.push(h),g.ids[d]=h)}},_clearBoundsCache:function(u){var h=u._boundsCache;if(h){u._bounds=u._position=u._boundsCache=n;for(var d=0,g=h.list,m=g.length;d<m;d++){var w=g[d];w!==u&&(w._bounds=w._position=n,w._boundsCache&&fe._clearBoundsCache(w))}}},_getBounds:function(u,h,d){var g=1/0,m=-g,w=g,T=m,S=!1;d=d||{};for(var x=0,N=u.length;x<N;x++){var O=u[x];if(O._visible&&!O.isEmpty(!0)){var P=O._getCachedBounds(h&&h.appended(O._matrix),d,!0),R=P.rect;g=Math.min(R.x,g),w=Math.min(R.y,w),m=Math.max(R.x+R.width,m),T=Math.max(R.y+R.height,T),P.nonscaling&&(S=!0)}}return{rect:isFinite(g)?new z(g,w,m-g,T-w):new z,nonscaling:S}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var u=this._decompose();return u?u.rotation:0},setRotation:function(u){var h=this.getRotation();if(h!=null&&u!=null){var d=this._decomposed;this.rotate(u-h),d&&(d.rotation=u,this._decomposed=d)}},getScaling:function(){var u=this._decompose(),h=u&&u.scaling;return new L(h?h.x:1,h?h.y:1,this,"setScaling")},setScaling:function(){var u=this.getScaling(),h=I.read(arguments,0,{clone:!0,readNull:!0});if(u&&h&&!u.equals(h)){var d=this.getRotation(),g=this._decomposed,m=new K,w=b.isZero;if(w(u.x)||w(u.y))m.translate(g.translation),d&&m.rotate(d),m.scale(h.x,h.y),this._matrix.set(m);else{var T=this.getPosition(!0);m.translate(T),d&&m.rotate(d),m.scale(h.x/u.x,h.y/u.y),d&&m.rotate(-d),m.translate(T.negate()),this.transform(m)}g&&(g.scaling=h,this._decomposed=g)}},getMatrix:function(){return this._matrix},setMatrix:function(){var u=this._matrix;u.set.apply(u,arguments)},getGlobalMatrix:function(u){var h=this._globalMatrix;if(h)for(var d=this._parent,g=[];d;){if(!d._globalMatrix){h=null;for(var m=0,w=g.length;m<w;m++)g[m]._globalMatrix=null;break}g.push(d),d=d._parent}if(!h){h=this._globalMatrix=this._matrix.clone();var d=this._parent;d&&h.prepend(d.getGlobalMatrix(!0))}return u?h:h.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(u){(this._applyMatrix=this._canApplyMatrix&&!!u)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(u,h){if(this._project!==u){this._project&&this._installEvents(!1),this._project=u;for(var d=this._children,g=0,m=d&&d.length;g<m;g++)d[g]._setProject(u);h=!0}h&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function u(h){u.base.call(this,h);for(var d=this._children,g=0,m=d&&d.length;g<m;g++)d[g]._installEvents(h)},getLayer:function(){for(var u=this;u=u._parent;)if(u instanceof he)return u;return null},getParent:function(){return this._parent},setParent:function(u){return u.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(u){this.removeChildren(),this.addChildren(u)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var u=this._getOwner();return u&&u._children[this._index+1]||null},getPreviousSibling:function(){var u=this._getOwner();return u&&u._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(u){return u===this||u&&this._class===u._class&&this._style.equals(u._style)&&this._matrix.equals(u._matrix)&&this._locked===u._locked&&this._visible===u._visible&&this._blendMode===u._blendMode&&this._opacity===u._opacity&&this._clipMask===u._clipMask&&this._guide===u._guide&&this._equals(u)||!1},_equals:function(u){return o.equals(this._children,u._children)},clone:function(u){var h=new this.constructor(fe.NO_INSERT),d=this._children,g=o.pick(u?u.insert:n,u===n||u===!0),m=o.pick(u?u.deep:n,!0);d&&h.copyAttributes(this),(!d||m)&&h.copyContent(this),d||h.copyAttributes(this),g&&h.insertAbove(this);var w=this._name,T=this._parent;if(w&&T){for(var d=T._children,S=w,x=1;d[w];)w=S+" "+x++;w!==S&&h.setName(w)}return h},copyContent:function(u){for(var h=u._children,d=0,g=h&&h.length;d<g;d++)this.addChild(h[d].clone(!1),!0)},copyAttributes:function(u,h){this.setStyle(u._style);for(var d=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],g=0,m=d.length;g<m;g++){var w=d[g];u.hasOwnProperty(w)&&(this[w]=u[w])}h||this._matrix.set(u._matrix,!0),this.setApplyMatrix(u._applyMatrix),this.setPivot(u._pivot),this.setSelection(u._selection);var T=u._data,S=u._name;this._data=T?o.clone(T):null,S&&this.setName(S)},rasterize:function(u,h){var d,g,m;o.isPlainObject(u)?(d=u.resolution,g=u.insert,m=u.raster):(d=u,g=h),m||(m=new be(fe.NO_INSERT));var w=this.getStrokeBounds(),T=(d||this.getView().getResolution())/72,S=w.getTopLeft().floor(),x=w.getBottomRight().ceil(),N=new D(x.subtract(S)),O=N.multiply(T);if(m.setSize(O,!0),!O.isZero()){var P=m.getContext(!0),R=new K().scale(T).translate(S.negate());P.save(),R.applyToContext(P),this.draw(P,new o({matrices:[R]})),P.restore()}return m._matrix.set(new K().translate(S.add(N.divide(2))).scale(1/T)),(g===n||g)&&m.insertAbove(this),m},contains:function(){var u=this._matrix;return u.isInvertible()&&!!this._contains(u._inverseTransform(I.read(arguments)))},_contains:function(u){var h=this._children;if(h){for(var d=h.length-1;d>=0;d--)if(h[d].contains(u))return!0;return!1}return u.isInside(this.getInternalBounds())},isInside:function(){return z.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new Ne.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(u,h){return u instanceof fe?this._asPathItem().getIntersections(u._asPathItem(),null,h,!0).length>0:!1}},new function(){function u(){var g=arguments;return this._hitTest(I.read(g),ft.getOptions(g))}function h(){var g=arguments,m=I.read(g),w=ft.getOptions(g),T=[];return this._hitTest(m,new o({all:T},w)),T}function d(g,m,w,T){var S=this._children;if(S)for(var x=S.length-1;x>=0;x--){var N=S[x],O=N!==T&&N._hitTest(g,m,w);if(O&&!m.all)return O}return null}return oe.inject({hitTest:u,hitTestAll:h,_hitTest:d}),{hitTest:u,hitTestAll:h,_hitTestChildren:d}},{_hitTest:function(u,h,d){if(this._locked||!this._visible||this._guide&&!h.guides||this.isEmpty())return null;var g=this._matrix,m=d?d.appended(g):this.getGlobalMatrix().prepend(this.getView()._matrix),w=Math.max(h.tolerance,1e-12),T=h._tolerancePadding=new D(Ne._getStrokePadding(w,g._shiftless().invert()));if(u=g._inverseTransform(u),!u||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(T.multiply(2))._containsPoint(u))return null;var S=!(h.guides&&!this._guide||h.selected&&!this.isSelected()||h.type&&h.type!==o.hyphenate(this._class)||h.class&&!(this instanceof h.class)),x=h.match,N=this,O,P;function R(k){return k&&x&&!x(k)&&(k=null),k&&h.all&&h.all.push(k),k}function A(k,M){var q=M?O["get"+M]():N.getPosition();if(u.subtract(q).divide(T).length<=1)return new ft(k,N,{name:M?o.hyphenate(M):k,point:q})}var U=h.position,W=h.center,H=h.bounds;if(S&&this._parent&&(U||W||H)){if((W||H)&&(O=this.getInternalBounds()),P=U&&A("position")||W&&A("center","Center"),!P&&H)for(var V=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],B=0;B<8&&!P;B++)P=A("bounds",V[B]);P=R(P)}return P||(P=this._hitTestChildren(u,h,m)||S&&R(this._hitTestSelf(u,h,m,this.getStrokeScaling()?null:m._shiftless().invert()))||null),P&&P.point&&(P.point=g.transform(P.point)),P},_hitTestSelf:function(u,h){if(h.fill&&this.hasFill()&&this._contains(u))return new ft("fill",this)},matches:function(u,h){function d(T,S){for(var x in T)if(T.hasOwnProperty(x)){var N=T[x],O=S[x];if(o.isPlainObject(N)&&o.isPlainObject(O)){if(!d(N,O))return!1}else if(!o.equals(N,O))return!1}return!0}var g=typeof u;if(g==="object"){for(var m in u)if(u.hasOwnProperty(m)&&!this.matches(m,u[m]))return!1;return!0}else{if(g==="function")return u(this);if(u==="match")return h(this);var w=/^(empty|editable)$/.test(u)?this["is"+o.capitalize(u)]():u==="type"?o.hyphenate(this._class):this[u];if(u==="class"){if(typeof h=="function")return this instanceof h;w=this._class}if(typeof h=="function")return!!h(w);if(h){if(h.test)return h.test(w);if(o.isPlainObject(h))return d(h,w)}return o.equals(w,h)}},getItems:function(u){return fe._getItems(this,u,this._matrix)},getItem:function(u){return fe._getItems(this,u,this._matrix,null,!0)[0]||null},statics:{_getItems:function u(h,d,g,m,w){if(!m){var T=typeof d=="object"&&d,S=T&&T.overlapping,x=T&&T.inside,N=S||x,R=N&&z.read([N]);m={items:[],recursive:T&&T.recursive!==!1,inside:!!x,overlapping:!!S,rect:R,path:S&&new Ne.Rectangle({rectangle:R,insert:!1})},T&&(d=o.filter({},d,{recursive:!0,inside:!0,overlapping:!0}))}var O=h._children,P=m.items,R=m.rect;g=R&&(g||new K);for(var A=0,U=O&&O.length;A<U;A++){var W=O[A],H=g&&g.appended(W._matrix),V=!0;if(R){var N=W.getBounds(H);if(!R.intersects(N))continue;R.contains(N)||m.overlapping&&(N.contains(R)||m.path.intersects(W,H))||(V=!1)}if(V&&W.matches(d)&&(P.push(W),w)||(m.recursive!==!1&&u(W,d,H,m,w),w&&P.length>0))break}return P}}},{importJSON:function(u){var h=o.importJSON(u,this);return h!==this?this.addChild(h):h},addChild:function(u){return this.insertChild(n,u)},insertChild:function(u,h){var d=h?this.insertChildren(u,[h]):null;return d&&d[0]},addChildren:function(u){return this.insertChildren(this._children.length,u)},insertChildren:function(u,h){var d=this._children;if(d&&h&&h.length>0){h=o.slice(h);for(var g={},m=h.length-1;m>=0;m--){var w=h[m],T=w&&w._id;!w||g[T]?h.splice(m,1):(w._remove(!1,!0),g[T]=!0)}o.splice(d,h,u,0);for(var S=this._project,x=S._changes,m=0,N=h.length;m<N;m++){var w=h[m],O=w._name;w._parent=this,w._setProject(S,!0),O&&w.setName(O),x&&w._changed(5)}this._changed(11)}else h=null;return h},_insertItem:"#insertChild",_insertAt:function(u,h){var d=u&&u._getOwner(),g=u!==this&&d?this:null;return g&&(g._remove(!1,!0),d._insertItem(u._index+h,g)),g},insertAbove:function(u){return this._insertAt(u,1)},insertBelow:function(u){return this._insertAt(u,0)},sendToBack:function(){var u=this._getOwner();return u?u._insertItem(0,this):null},bringToFront:function(){var u=this._getOwner();return u?u._insertItem(n,this):null},appendTop:"#addChild",appendBottom:function(u){return this.insertChild(0,u)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(u){return u._insertItem(n,this)},copyTo:function(u){return this.clone(!1).addTo(u)},reduce:function(u){var h=this._children;if(h&&h.length===1){var d=h[0].reduce(u);return this._parent?(d.insertAbove(this),this.remove()):d.remove(),d}return this},_removeNamed:function(){var u=this._getOwner();if(u){var h=u._children,d=u._namedChildren,g=this._name,m=d[g],w=m?m.indexOf(this):-1;w!==-1&&(h[g]==this&&delete h[g],m.splice(w,1),m.length?h[g]=m[0]:delete d[g])}},_remove:function(u,h){var d=this._getOwner(),g=this._project,m=this._index;return this._style&&this._style._dispose(),d?(this._name&&this._removeNamed(),m!=null&&(g._activeLayer===this&&(g._activeLayer=this.getNextSibling()||this.getPreviousSibling()),o.splice(d._children,null,m,1)),this._installEvents(!1),u&&g._changes&&this._changed(5),h&&d._changed(11,this),this._parent=null,!0):!1},remove:function(){return this._remove(!0,!0)},replaceWith:function(u){var h=u&&u.insertBelow(this);return h&&this.remove(),h},removeChildren:function(u,h){if(!this._children)return null;u=u||0,h=o.pick(h,this._children.length);for(var d=o.splice(this._children,null,u,h-u),g=d.length-1;g>=0;g--)d[g]._remove(!0,!1);return d.length>0&&this._changed(11),d},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var u=0,h=this._children.length;u<h;u++)this._children[u]._index=u;this._changed(11)}},isEmpty:function(u){var h=this._children,d=h?h.length:0;if(u){for(var g=0;g<d;g++)if(!h[g].isEmpty(u))return!1;return!0}return!d},isEditable:function(){for(var u=this;u;){if(!u._visible||u._locked)return!1;u=u._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(u){function h(T){var S=[];do S.unshift(T);while(T=T._parent);return S}for(var d=h(this),g=h(u),m=0,w=Math.min(d.length,g.length);m<w;m++)if(d[m]!=g[m])return d[m]._index<g[m]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return this._parent?this._parent.isInserted():!1},isAbove:function(u){return this._getOrder(u)===-1},isBelow:function(u){return this._getOrder(u)===1},isParent:function(u){return this._parent===u},isChild:function(u){return u&&u._parent===this},isDescendant:function(u){for(var h=this;h=h._parent;)if(h===u)return!0;return!1},isAncestor:function(u){return u?u.isDescendant(this):!1},isSibling:function(u){return this._parent===u._parent},isGroupedWith:function(u){for(var h=this._parent;h;){if(h._parent&&/^(Group|Layer|CompoundPath)$/.test(h._class)&&u.isDescendant(h))return!0;h=h._parent}return!1}},o.each(["rotate","scale","shear","skew"],function(u){var h=u==="rotate";this[u]=function(){var d=arguments,g=(h?o:I).read(d),m=I.read(d,0,{readNull:!0});return this.transform(new K()[u](g,m||this.getPosition(!0)))}},{translate:function(){var u=new K;return this.transform(u.translate.apply(u,arguments))},transform:function(u,h,d){var g=this._matrix,m=u&&!u.isIdentity(),w=d&&this._canApplyMatrix||this._applyMatrix&&(m||!g.isIdentity()||h&&this._children);if(!m&&!w)return this;if(m){!u.isInvertible()&&g.isInvertible()&&(g._backup=g.getValues()),g.prepend(u,!0);var T=this._style,S=T.getFillColor(!0),x=T.getStrokeColor(!0);S&&S.transform(u),x&&x.transform(u)}if(w&&(w=this._transformContent(g,h,d))){var N=this._pivot;N&&g._transformPoint(N,N,!0),g.reset(!0),d&&this._canApplyMatrix&&(this._applyMatrix=!0)}var O=this._bounds,P=this._position;(m||w)&&this._changed(25);var R=m&&O&&u.decompose();if(R&&R.skewing.isZero()&&R.rotation%90===0){for(var A in O){var U=O[A];if(U.nonscaling)delete O[A];else if(w||!U.internal){var W=U.rect;u._transformBounds(W,W)}}this._bounds=O;var H=O[this._getBoundsCacheKey(this._boundsOptions||{})];H&&(this._position=this._getPositionFromBounds(H.rect))}else m&&P&&this._pivot&&(this._position=u._transformPoint(P,P));return this},_transformContent:function(u,h,d){var g=this._children;if(g){for(var m=0,w=g.length;m<w;m++)g[m].transform(u,h,d);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(I.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(I.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(I.read(arguments))},localToParent:function(){return this._matrix._transformPoint(I.read(arguments))},fitBounds:function(u,h){u=z.read(arguments);var d=this.getBounds(),g=d.height/d.width,m=u.height/u.width,w=(h?g>m:g<m)?u.width/d.width:u.height/d.height,T=new z(new I,new D(d.width*w,d.height*w));T.setCenter(u.getCenter()),this.setBounds(T)}}),{_setStyles:function(u,h,d){var g=this._style,m=this._matrix;if(g.hasFill()&&(u.fillStyle=g.getFillColor().toCanvasStyle(u,m)),g.hasStroke()){u.strokeStyle=g.getStrokeColor().toCanvasStyle(u,m),u.lineWidth=g.getStrokeWidth();var w=g.getStrokeJoin(),T=g.getStrokeCap(),S=g.getMiterLimit();if(w&&(u.lineJoin=w),T&&(u.lineCap=T),S&&(u.miterLimit=S),Ot.support.nativeDash){var x=g.getDashArray(),N=g.getDashOffset();x&&x.length&&("setLineDash"in u?(u.setLineDash(x),u.lineDashOffset=N):(u.mozDash=x,u.mozDashOffset=N))}}if(g.hasShadow()){var O=h.pixelRatio||1,P=d._shiftless().prepend(new K().scale(O,O)),R=P.transform(new I(g.getShadowBlur(),0)),A=P.transform(this.getShadowOffset());u.shadowColor=g.getShadowColor().toCanvasStyle(u),u.shadowBlur=R.getLength(),u.shadowOffsetX=A.x,u.shadowOffsetY=A.y}},draw:function(u,h,d){if(this._updateVersion=this._project._updateVersion,!(!this._visible||this._opacity===0)){var g=h.matrices,m=h.viewMatrix,w=this._matrix,T=g[g.length-1].appended(w);if(T.isInvertible()){m=m?m.appended(T):T,g.push(T),h.updateMatrix&&(this._globalMatrix=T);var S=this._blendMode,x=b.clamp(this._opacity,0,1),N=S==="normal",O=Fa.nativeModes[S],P=N&&x===1||h.dontStart||h.clip||(O||N&&x<1)&&this._canComposite(),R=h.pixelRatio||1,A,U,W;if(!P){var H=this.getStrokeBounds(m);if(!H.width||!H.height){g.pop();return}W=h.offset,U=h.offset=H.getTopLeft().floor(),A=u,u=xn.getContext(H.getSize().ceil().add(1).multiply(R)),R!==1&&u.scale(R,R)}u.save();var V=d?d.appended(w):this._canScaleStroke&&!this.getStrokeScaling(!0)&&m,B=!P&&h.clipItem,k=!V||B;if(P?(u.globalAlpha=x,O&&(u.globalCompositeOperation=S)):k&&u.translate(-U.x,-U.y),k&&(P?w:m).applyToContext(u),B&&h.clipItem.draw(u,h.extend({clip:!0})),V){u.setTransform(R,0,0,R,0,0);var M=h.offset;M&&u.translate(-M.x,-M.y)}this._draw(u,h,m,V),u.restore(),g.pop(),h.clip&&!h.dontFinish&&u.clip(this.getFillRule()),P||(Fa.process(S,u,A,x,U.subtract(W).multiply(R)),xn.release(u),h.offset=W)}}},_isUpdated:function(u){var h=this._parent;if(h instanceof qe)return h._isUpdated(u);var d=this._updateVersion===u;return!d&&h&&h._visible&&h._isUpdated(u)&&(this._updateVersion=u,d=!0),d},_drawSelection:function(u,h,d,g,m){var w=this._selection,T=w&1,S=w&2||T&&this._selectBounds,x=w&4;if(this._drawSelected||(T=!1),(T||S||x)&&this._isUpdated(m)){var N,O=this.getSelectedColor(!0)||(N=this.getLayer())&&N.getSelectedColor(!0),P=h.appended(this.getGlobalMatrix(!0)),R=d/2;if(u.strokeStyle=u.fillStyle=O?O.toCanvasStyle(u):"#009dec",T&&this._drawSelected(u,P,g),x){var A=this.getPosition(!0),U=this._parent,W=U?U.localToGlobal(A):A,H=W.x,V=W.y;u.beginPath(),u.arc(H,V,R,0,Math.PI*2,!0),u.stroke();for(var B=[[0,-1],[1,0],[0,1],[-1,0]],k=R,M=d+1,q=0;q<4;q++){var $=B[q],X=$[0],Q=$[1];u.moveTo(H+X*k,V+Q*k),u.lineTo(H+X*M,V+Q*M),u.stroke()}}if(S){var J=P._transformCorners(this.getInternalBounds());u.beginPath();for(var q=0;q<8;q++)u[q?"lineTo":"moveTo"](J[q],J[++q]);u.closePath(),u.stroke();for(var q=0;q<8;q++)u.fillRect(J[q]-R,J[++q]-R,d,d)}}},_canComposite:function(){return!1}},o.each(["down","drag","up","move"],function(u){this["removeOn"+o.capitalize(u)]=function(){var h={};return h[u]=!0,this.removeOn(h)}},{removeOn:function(u){for(var h in u)if(u[h]){var d="mouse"+h,g=this._project,m=g._removeSets=g._removeSets||{};m[d]=m[d]||{},m[d][this._id]=this}return this}}),{tween:function(u,h,d){d||(d=h,h=u,u=null,d||(d=h,h=null));var g=d&&d.easing,m=d&&d.start,w=d!=null&&(typeof d=="number"?d:d.duration),T=new ao(this,u,h,w,g,m);function S(x){T._handleFrame(x.time*1e3),T.running||this.off("frame",S)}return w&&this.on("frame",S),T},tweenTo:function(u,h){return this.tween(null,u,h)},tweenFrom:function(u,h){return this.tween(u,null,h)}}),me=fe.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(h){this._children=[],this._namedChildren={},this._initialize(h)||this.addChildren(Array.isArray(h)?h:arguments)},_changed:function u(h){u.base.call(this,h),h&2050&&(this._clipItem=n)},_getClipItem:function(){var u=this._clipItem;if(u===n){u=null;for(var h=this._children,d=0,g=h.length;d<g;d++)if(h[d]._clipMask){u=h[d];break}this._clipItem=u}return u},isClipped:function(){return!!this._getClipItem()},setClipped:function(u){var h=this.getFirstChild();h&&h.setClipMask(u)},_getBounds:function u(h,d){var g=this._getClipItem();return g?g._getCachedBounds(g._matrix.prepended(h),o.set({},d,{stroke:!1})):u.base.call(this,h,d)},_hitTestChildren:function u(h,d,g){var m=this._getClipItem();return(!m||m.contains(h))&&u.base.call(this,h,d,g,m)},_draw:function(u,h){var d=h.clip,g=!d&&this._getClipItem();h=h.extend({clipItem:g,clip:!1}),d?(u.beginPath(),h.dontStart=h.dontFinish=!0):g&&g.draw(u,h.extend({clip:!0}));for(var m=this._children,w=0,T=m.length;w<T;w++){var S=m[w];S!==g&&S.draw(u,h)}}}),he=me.extend({_class:"Layer",initialize:function(){me.apply(this,arguments)},_getOwner:function(){return this._parent||this._index!=null&&this._project},isInserted:function u(){return this._parent?u.base.call(this):this._index!=null},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),Z=fe.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(h,d){this._initialize(h,d)},_equals:function(u){return this._type===u._type&&this._size.equals(u._size)&&o.equals(this._radius,u._radius)},copyContent:function(u){this.setType(u._type),this.setSize(u._size),this.setRadius(u._radius)},getType:function(){return this._type},setType:function(u){this._type=u},getShape:"#getType",setShape:"#setType",getSize:function(){var u=this._size;return new te(u.width,u.height,this,"setSize")},setSize:function(){var u=D.read(arguments);if(!this._size)this._size=u.clone();else if(!this._size.equals(u)){var h=this._type,d=u.width,g=u.height;h==="rectangle"?this._radius.set(D.min(this._radius,u.divide(2).abs())):h==="circle"?(d=g=(d+g)/2,this._radius=d/2):h==="ellipse"&&this._radius._set(d/2,g/2),this._size._set(d,g),this._changed(9)}},getRadius:function(){var u=this._radius;return this._type==="circle"?u:new te(u.width,u.height,this,"setRadius")},setRadius:function(u){var h=this._type;if(h==="circle"){if(u===this._radius)return;var d=u*2;this._radius=u,this._size._set(d,d)}else if(u=D.read(arguments),!this._radius)this._radius=u.clone();else{if(this._radius.equals(u))return;if(this._radius.set(u),h==="rectangle"){var d=D.max(this._size,u.multiply(2));this._size.set(d)}else h==="ellipse"&&this._size._set(u.width*2,u.height*2)}this._changed(9)},isEmpty:function(){return!1},toPath:function(u){var h=new Ne[o.capitalize(this._type)]({center:new I,size:this._size,radius:this._radius,insert:!1});return h.copyAttributes(this),Ot.settings.applyMatrix&&h.setApplyMatrix(!0),(u===n||u)&&h.insertAbove(this),h},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(u,h,d,g){var m=this._style,w=m.hasFill(),T=m.hasStroke(),S=h.dontFinish||h.clip,x=!g;if(w||T||S){var N=this._type,O=this._radius,P=N==="circle";if(h.dontStart||u.beginPath(),x&&P)u.arc(0,0,O,0,Math.PI*2,!0);else{var R=P?O:O.width,A=P?O:O.height,U=this._size,W=U.width,H=U.height;if(x&&N==="rectangle"&&R===0&&A===0)u.rect(-W/2,-H/2,W,H);else{var V=W/2,B=H/2,k=1-.5522847498307936,M=R*k,q=A*k,$=[-V,-B+A,-V,-B+q,-V+M,-B,-V+R,-B,V-R,-B,V-M,-B,V,-B+q,V,-B+A,V,B-A,V,B-q,V-M,B,V-R,B,-V+R,B,-V+M,B,-V,B-q,-V,B-A];g&&g.transform($,$,32),u.moveTo($[0],$[1]),u.bezierCurveTo($[2],$[3],$[4],$[5],$[6],$[7]),V!==R&&u.lineTo($[8],$[9]),u.bezierCurveTo($[10],$[11],$[12],$[13],$[14],$[15]),B!==A&&u.lineTo($[16],$[17]),u.bezierCurveTo($[18],$[19],$[20],$[21],$[22],$[23]),V!==R&&u.lineTo($[24],$[25]),u.bezierCurveTo($[26],$[27],$[28],$[29],$[30],$[31])}}u.closePath()}!S&&(w||T)&&(this._setStyles(u,h,d),w&&(u.fill(m.getFillRule()),u.shadowColor="rgba(0,0,0,0)"),T&&u.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(u,h){var d=new z(this._size).setCenter(0,0),g=this._style,m=h.stroke&&g.hasStroke()&&g.getStrokeWidth();return u&&(d=u._transformBounds(d)),m?d.expand(Ne._getStrokePadding(m,this._getStrokeMatrix(u,h))):d}},new function(){function u(d,g,m){var w=d._radius;if(!w.isZero())for(var T=d._size.divide(2),S=1;S<=4;S++){var x=new I(S>1&&S<4?-1:1,S>2?-1:1),N=x.multiply(T),O=N.subtract(x.multiply(w)),P=new z(m?N.add(x.multiply(m)):N,O);if(P.contains(g))return{point:O,quadrant:S}}}function h(d,g,m,w){var T=d.divide(g);return(!w||T.isInQuadrant(w))&&T.subtract(T.normalize()).multiply(g).divide(m).length<=1}return{_contains:function d(g){if(this._type==="rectangle"){var m=u(this,g);return m?g.subtract(m.point).divide(this._radius).getLength()<=1:d.base.call(this,g)}else return g.divide(this.size).getLength()<=.5},_hitTestSelf:function d(g,m,w,T){var S=!1,x=this._style,N=m.stroke&&x.hasStroke(),O=m.fill&&x.hasFill();if(N||O){var P=this._type,R=this._radius,A=N?x.getStrokeWidth()/2:0,U=m._tolerancePadding.add(Ne._getStrokePadding(A,!x.getStrokeScaling()&&T));if(P==="rectangle"){var W=U.multiply(2),H=u(this,g,W);if(H)S=h(g.subtract(H.point),R,U,H.quadrant);else{var V=new z(this._size).setCenter(0,0),B=V.expand(W),k=V.expand(W.negate());S=B._containsPoint(g)&&!k._containsPoint(g)}}else S=h(g,R,U)}return S?new ft(N?"stroke":"fill",this):d.base.apply(this,arguments)}}},{statics:new function(){function u(h,d,g,m,w){var T=o.create(Z.prototype);return T._type=h,T._size=g,T._radius=m,T._initialize(o.getNamed(w),d),T}return{Circle:function(){var h=arguments,d=I.readNamed(h,"center"),g=o.readNamed(h,"radius");return u("circle",d,new D(g*2),g,h)},Rectangle:function(){var h=arguments,d=z.readNamed(h,"rectangle"),g=D.min(D.readNamed(h,"radius"),d.getSize(!0).divide(2));return u("rectangle",d.getCenter(!0),d.getSize(!0),g,h)},Ellipse:function(){var h=arguments,d=Z._readEllipse(h),g=d.radius;return u("ellipse",d.center,g.multiply(2),g,h)},_readEllipse:function(h){var d,g;if(o.hasNamed(h,"radius"))d=I.readNamed(h,"center"),g=D.readNamed(h,"radius");else{var m=z.readNamed(h,"rectangle");d=m.getCenter(!0),g=m.getSize(!0).divide(2)}return{center:d,radius:g}}}}}),be=fe.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:"low",beans:!0,initialize:function(h,d){if(!this._initialize(h,d!==n&&I.read(arguments))){var g,m=typeof h,w=m==="string"?i.getElementById(h):m==="object"?h:null;if(w&&w!==fe.NO_INSERT){if(w.getContext||w.naturalHeight!=null)g=w;else if(w){var T=D.read(arguments);T.isZero()||(g=xn.getCanvas(T))}}g?this.setImage(g):this.setSource(h)}this._size||(this._size=new D,this._loaded=!1)},_equals:function(u){return this.getSource()===u.getSource()},copyContent:function(u){var h=u._image,d=u._canvas;if(h)this._setImage(h);else if(d){var g=xn.getCanvas(u._size);g.getContext("2d").drawImage(d,0,0),this._setImage(g)}this._crossOrigin=u._crossOrigin},getSize:function(){var u=this._size;return new te(u?u.width:0,u?u.height:0,this,"setSize")},setSize:function(u,h){var d=D.read(arguments);if(d.equals(this._size))h&&this.clear();else if(d.width>0&&d.height>0){var g=!h&&this.getElement();this._setImage(xn.getCanvas(d)),g&&this.getContext(!0).drawImage(g,0,0,d.width,d.height)}else this._canvas&&xn.release(this._canvas),this._size=d.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(u){this.setSize(u,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(u){this.setSize(this.getWidth(),u)},getLoaded:function(){return this._loaded},isEmpty:function(){var u=this._size;return!u||u.width===0&&u.height===0},getResolution:function(){var u=this._matrix,h=new I(0,0).transform(u),d=new I(1,0).transform(u).subtract(h),g=new I(0,1).transform(u).subtract(h);return new D(72/d.getLength(),72/g.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(u){var h=this;function d(g){var m=h.getView(),w=g&&g.type||"load";m&&h.responds(w)&&(Ot=m._scope,h.emit(w,new Pe(g)))}this._setImage(u),this._loaded?setTimeout(d,0):u&&ge.add(u,{load:function(g){h._setImage(u),d(g)},error:d})},_setImage:function(u){this._canvas&&xn.release(this._canvas),u&&u.getContext?(this._image=null,this._canvas=u,this._loaded=!0):(this._image=u,this._canvas=null,this._loaded=!!(u&&u.src&&u.complete)),this._size=new D(u?u.naturalWidth||u.width:0,u?u.naturalHeight||u.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var u=xn.getContext(this._size);try{this._image&&u.drawImage(this._image,0,0),this._canvas=u.canvas}catch{xn.release(u)}}return this._canvas},setCanvas:"#setImage",getContext:function(u){return this._context||(this._context=this.getCanvas().getContext("2d")),u&&(this._image=null,this._changed(1025)),this._context},setContext:function(u){this._context=u},getSource:function(){var u=this._image;return u&&u.src||this.toDataURL()},setSource:function(u){var h=new e.Image,d=this._crossOrigin;d&&(h.crossOrigin=d),u&&(h.src=u),this.setImage(h)},getCrossOrigin:function(){var u=this._image;return u&&u.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(u){this._crossOrigin=u;var h=this._image;h&&(h.crossOrigin=u)},getSmoothing:function(){return this._smoothing},setSmoothing:function(u){this._smoothing=typeof u=="string"?u:u?"low":"off",this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var u=z.read(arguments),h=xn.getContext(u.getSize());return h.drawImage(this.getCanvas(),u.x,u.y,u.width,u.height,0,0,u.width,u.height),h.canvas},getSubRaster:function(){var u=z.read(arguments),h=new be(fe.NO_INSERT);return h._setImage(this.getSubCanvas(u)),h.translate(u.getCenter().subtract(this.getSize().divide(2))),h._matrix.prepend(this._matrix),h.insertAbove(this),h},toDataURL:function(){var u=this._image,h=u&&u.src;if(/^data:/.test(h))return h;var d=this.getCanvas();return d?d.toDataURL.apply(d,arguments):null},drawImage:function(u){var h=I.read(arguments,1);this.getContext(!0).drawImage(u,h.x,h.y)},getAverageColor:function(u){var h,d;if(u?u instanceof Fe?(d=u,h=u.getBounds()):typeof u=="object"&&("width"in u?h=new z(u):"x"in u&&(h=new z(u.x-.5,u.y-.5,1,1))):h=this.getBounds(),!h)return null;var g=32,m=Math.min(h.width,g),w=Math.min(h.height,g),T=be._sampleContext;T?T.clearRect(0,0,g+1,g+1):T=be._sampleContext=xn.getContext(new D(g)),T.save();var S=new K().scale(m/h.width,w/h.height).translate(-h.x,-h.y);S.applyToContext(T),d&&d.draw(T,new o({clip:!0,matrices:[S]})),this._matrix.applyToContext(T);var x=this.getElement(),N=this._size;x&&T.drawImage(x,-N.width/2,-N.height/2),T.restore();for(var O=T.getImageData(.5,.5,Math.ceil(m),Math.ceil(w)).data,P=[0,0,0],R=0,A=0,U=O.length;A<U;A+=4){var W=O[A+3];R+=W,W/=255,P[0]+=O[A]*W,P[1]+=O[A+1]*W,P[2]+=O[A+2]*W}for(var A=0;A<3;A++)P[A]/=R;return R?Wt.read(P):null},getPixel:function(){var u=I.read(arguments),h=this.getContext().getImageData(u.x,u.y,1,1).data;return new Wt("rgb",[h[0]/255,h[1]/255,h[2]/255],h[3]/255)},setPixel:function(){var u=arguments,h=I.read(u),d=Wt.read(u),g=d._convert("rgb"),m=d._alpha,w=this.getContext(!0),T=w.createImageData(1,1),S=T.data;S[0]=g[0]*255,S[1]=g[1]*255,S[2]=g[2]*255,S[3]=m!=null?m*255:255,w.putImageData(T,h.x,h.y)},clear:function(){var u=this._size;this.getContext(!0).clearRect(0,0,u.width+1,u.height+1)},createImageData:function(){var u=D.read(arguments);return this.getContext().createImageData(u.width,u.height)},getImageData:function(){var u=z.read(arguments);return u.isEmpty()&&(u=new z(this._size)),this.getContext().getImageData(u.x,u.y,u.width,u.height)},putImageData:function(u){var h=I.read(arguments,1);this.getContext(!0).putImageData(u,h.x,h.y)},setImageData:function(u){this.setSize(u),this.getContext(!0).putImageData(u,0,0)},_getBounds:function(u,h){var d=new z(this._size).setCenter(0,0);return u?u._transformBounds(d):d},_hitTestSelf:function(u){if(this._contains(u)){var h=this;return new ft("pixel",h,{offset:u.add(h._size.divide(2)).round(),color:{get:function(){return h.getPixel(this.offset)}}})}},_draw:function(u,h,d){var g=this.getElement();if(g&&g.width>0&&g.height>0){u.globalAlpha=b.clamp(this._opacity,0,1),this._setStyles(u,h,d);var m=this._smoothing,w=m==="off";ce.setPrefixed(u,w?"imageSmoothingEnabled":"imageSmoothingQuality",w?!1:m),u.drawImage(g,-this._size.width/2,-this._size.height/2)}},_canComposite:function(){return!0}}),Ue=fe.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(h,d){this._initialize(h,d!==n&&I.read(arguments,1))||this.setDefinition(h instanceof Ge?h:new Ge(h))},_equals:function(u){return this._definition===u._definition},copyContent:function(u){this.setDefinition(u._definition)},getDefinition:function(){return this._definition},setDefinition:function(u){this._definition=u,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(u,h){var d=this._definition._item;return d._getCachedBounds(d._matrix.prepended(u),h)},_hitTestSelf:function(u,h,d){var g=h.extend({all:!1}),m=this._definition._item._hitTest(u,g,d);return m&&(m.item=this),m},_draw:function(u,h){this._definition._item.draw(u,h)}}),Ge=o.extend({_class:"SymbolDefinition",initialize:function(h,d){this._id=E.get(),this.project=Ot.project,h&&this.setItem(h,d)},_serialize:function(u,h){return h.add(this,function(){return o.serialize([this._class,this._item],u,!1,h)})},_changed:function(u){u&8&&fe._clearBoundsCache(this),u&1&&this.project._changed(u)},getItem:function(){return this._item},setItem:function(u,h){u._symbol&&(u=u.clone()),this._item&&(this._item._symbol=null),this._item=u,u.remove(),u.setSelected(!1),h||u.setPosition(new I),u._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(u){return new Ue(this,u)},clone:function(){return new Ge(this._item.clone(!1))},equals:function(u){return u===this||u&&this._item.equals(u._item)||!1}}),ft=o.extend({_class:"HitResult",initialize:function(h,d,g){this.type=h,this.item=d,g&&this.inject(g)},statics:{getOptions:function(u){var h=u&&o.read(u);return new o({type:null,tolerance:Ot.settings.hitTolerance,fill:!h,stroke:!h,segments:!h,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},h)}}}),Le=o.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(h,d,g,m,w,T){var S=arguments.length,x,N,O,P;S>0&&(h==null||typeof h=="object"?S===1&&h&&"point"in h?(x=h.point,N=h.handleIn,O=h.handleOut,P=h.selection):(x=h,N=d,O=g,P=m):(x=[h,d],N=g!==n?[g,m]:null,O=w!==n?[w,T]:null)),new it(x,this,"_point"),new it(N,this,"_handleIn"),new it(O,this,"_handleOut"),P&&this.setSelection(P)},_serialize:function(u,h){var d=this._point,g=this._selection,m=g||this.hasHandles()?[d,this._handleIn,this._handleOut]:d;return g&&m.push(g),o.serialize(m,u,!0,h)},_changed:function(u){var h=this._path;if(h){var d=h._curves,g=this._index,m;d&&((!u||u===this._point||u===this._handleIn)&&(m=g>0?d[g-1]:h._closed?d[d.length-1]:null)&&m._changed(),(!u||u===this._point||u===this._handleOut)&&(m=d[g])&&m._changed()),h._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(I.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(I.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(I.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var u=this._handleIn,h=this._handleOut;return!u.isZero()&&!h.isZero()&&u.isCollinear(h)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(u){var h=this._selection,d=this._path;this._selection=u=u||0,d&&u!==h&&(d._updateSelection(this,h,u),d._changed(257))},_changeSelection:function(u,h){var d=this._selection;this.setSelection(h?d|u:d&~u)},isSelected:function(){return!!(this._selection&7)},setSelected:function(u){this._changeSelection(7,u)},getIndex:function(){return this._index!==n?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var u=this._path,h=this._index;return u?(h>0&&!u._closed&&h===u._segments.length-1&&h--,u.getCurves()[h]||null):null},getLocation:function(){var u=this.getCurve();return u?new _t(u,this===u._segment1?0:1):null},getNext:function(){var u=this._path&&this._path._segments;return u&&(u[this._index+1]||this._path._closed&&u[0])||null},smooth:function(u,h,d){var g=u||{},m=g.type,w=g.factor,T=this.getPrevious(),S=this.getNext(),x=(T||this)._point,N=this._point,O=(S||this)._point,P=x.getDistance(N),R=N.getDistance(O);if(!m||m==="catmull-rom"){var A=w===n?.5:w,U=Math.pow(P,A),W=U*U,H=Math.pow(R,A),V=H*H;if(!h&&T){var B=2*V+3*H*U+W,k=3*H*(H+U);this.setHandleIn(k!==0?new I((V*x._x+B*N._x-W*O._x)/k-N._x,(V*x._y+B*N._y-W*O._y)/k-N._y):new I)}if(!d&&S){var B=2*W+3*U*H+V,k=3*U*(U+H);this.setHandleOut(k!==0?new I((W*O._x+B*N._x-V*x._x)/k-N._x,(W*O._y+B*N._y-V*x._y)/k-N._y):new I)}}else if(m==="geometric"){if(T&&S){var M=x.subtract(O),q=w===n?.4:w,$=q*P/(P+R);h||this.setHandleIn(M.multiply($)),d||this.setHandleOut(M.multiply($-q))}}else throw new Error("Smoothing method '"+m+"' not supported.")},getPrevious:function(){var u=this._path&&this._path._segments;return u&&(u[this._index-1]||this._path._closed&&u[u.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var u=this._path;return u&&this._index===u._segments.length-1||!1},reverse:function(){var u=this._handleIn,h=this._handleOut,d=u.clone();u.set(h),h.set(d)},reversed:function(){return new Le(this._point,this._handleOut,this._handleIn)},remove:function(){return this._path?!!this._path.removeSegment(this._index):!1},clone:function(){return new Le(this._point,this._handleIn,this._handleOut)},equals:function(u){return u===this||u&&this._class===u._class&&this._point.equals(u._point)&&this._handleIn.equals(u._handleIn)&&this._handleOut.equals(u._handleOut)||!1},toString:function(){var u=["point: "+this._point];return this._handleIn.isZero()||u.push("handleIn: "+this._handleIn),this._handleOut.isZero()||u.push("handleOut: "+this._handleOut),"{ "+u.join(", ")+" }"},transform:function(u){this._transformCoordinates(u,new Array(6),!0),this._changed()},interpolate:function(u,h,d){var g=1-d,m=d,w=u._point,T=h._point,S=u._handleIn,x=h._handleIn,N=h._handleOut,O=u._handleOut;this._point._set(g*w._x+m*T._x,g*w._y+m*T._y,!0),this._handleIn._set(g*S._x+m*x._x,g*S._y+m*x._y,!0),this._handleOut._set(g*O._x+m*N._x,g*O._y+m*N._y,!0),this._changed()},_transformCoordinates:function(u,h,d){var g=this._point,m=!d||!this._handleIn.isZero()?this._handleIn:null,w=!d||!this._handleOut.isZero()?this._handleOut:null,T=g._x,S=g._y,x=2;return h[0]=T,h[1]=S,m&&(h[x++]=m._x+T,h[x++]=m._y+S),w&&(h[x++]=w._x+T,h[x++]=w._y+S),u&&(u._transformCoordinates(h,h,x/2),T=h[0],S=h[1],d?(g._x=T,g._y=S,x=2,m&&(m._x=h[x++]-T,m._y=h[x++]-S),w&&(w._x=h[x++]-T,w._y=h[x++]-S)):(m||(h[x++]=T,h[x++]=S),w||(h[x++]=T,h[x++]=S))),h}}),it=I.extend({initialize:function(h,d,g){var m,w,T;if(!h)m=w=0;else if((m=h[0])!==n)w=h[1];else{var S=h;(m=S.x)===n&&(S=I.read(arguments),m=S.x),w=S.y,T=S.selected}this._x=m,this._y=w,this._owner=d,d[g]=this,T&&this.setSelected(!0)},_set:function(u,h){return this._x=u,this._y=h,this._owner._changed(this),this},getX:function(){return this._x},setX:function(u){this._x=u,this._owner._changed(this)},getY:function(){return this._y},setY:function(u){this._y=u,this._owner._changed(this)},isZero:function(){var u=b.isZero;return u(this._x)&&u(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(u){this._owner._changeSelection(this._getSelection(),u)},_getSelection:function(){var u=this._owner;return this===u._point?1:this===u._handleIn?2:this===u._handleOut?4:0}}),xe=o.extend({_class:"Curve",beans:!0,initialize:function(h,d,g,m,w,T,S,x){var N=arguments.length,O,P,R,A,U,W;N===3?(this._path=h,O=d,P=g):N?N===1?"segment1"in h?(O=new Le(h.segment1),P=new Le(h.segment2)):"point1"in h?(R=h.point1,U=h.handle1,W=h.handle2,A=h.point2):Array.isArray(h)&&(R=[h[0],h[1]],A=[h[6],h[7]],U=[h[2]-h[0],h[3]-h[1]],W=[h[4]-h[6],h[5]-h[7]]):N===2?(O=new Le(h),P=new Le(d)):N===4?(R=h,U=d,W=g,A=m):N===8&&(R=[h,d],A=[S,x],U=[g-h,m-d],W=[w-S,T-x]):(O=new Le,P=new Le),this._segment1=O||new Le(R,null,U),this._segment2=P||new Le(A,W,null)},_serialize:function(u,h){return o.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],u,!0,h)},_changed:function(){this._length=this._bounds=n},clone:function(){return new xe(this._segment1,this._segment2)},toString:function(){var u=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||u.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||u.push("handle2: "+this._segment2._handleIn),u.push("point2: "+this._segment2._point),"{ "+u.join(", ")+" }"},classify:function(){return xe.classify(this.getValues())},remove:function(){var u=!1;if(this._path){var h=this._segment2,d=h._handleOut;u=h.remove(),u&&this._segment1._handleOut.set(d)}return u},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(I.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(I.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(I.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(I.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var u=this._path&&this._path._curves;return u&&(u[this._segment1._index+1]||this._path._closed&&u[0])||null},getPrevious:function(){var u=this._path&&this._path._curves;return u&&(u[this._segment1._index-1]||this._path._closed&&u[u.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var u=this._path;return u&&this._segment1._index===u._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(u){this.getPoint1().setSelected(u),this.getHandle1().setSelected(u),this.getHandle2().setSelected(u),this.getPoint2().setSelected(u)},getValues:function(u){return xe.getValues(this._segment1,this._segment2,u)},getPoints:function(){for(var u=this.getValues(),h=[],d=0;d<8;d+=2)h.push(new I(u[d],u[d+1]));return h}},{getLength:function(){return this._length==null&&(this._length=xe.getLength(this.getValues(),0,1)),this._length},getArea:function(){return xe.getArea(this.getValues())},getLine:function(){return new ue(this._segment1._point,this._segment2._point)},getPart:function(u,h){return new xe(xe.getPart(this.getValues(),u,h))},getPartLength:function(u,h){return xe.getLength(this.getValues(),u,h)},divideAt:function(u){return this.divideAtTime(u&&u.curve===this?u.time:this.getTimeAt(u))},divideAtTime:function(u,h){var d=1e-8,g=1-d,m=null;if(u>=d&&u<=g){var w=xe.subdivide(this.getValues(),u),T=w[0],S=w[1],x=h||this.hasHandles(),N=this._segment1,O=this._segment2,P=this._path;x&&(N._handleOut._set(T[2]-T[0],T[3]-T[1]),O._handleIn._set(S[4]-S[6],S[5]-S[7]));var R=T[6],A=T[7],U=new Le(new I(R,A),x&&new I(T[4]-R,T[5]-A),x&&new I(S[2]-R,S[3]-A));P?(P.insert(N._index+1,U),m=this.getNext()):(this._segment2=U,this._changed(),m=new xe(U,O))}return m},splitAt:function(u){var h=this._path;return h?h.splitAt(u):null},splitAtTime:function(u){return this.splitAt(this.getLocationAtTime(u))},divide:function(u,h){return this.divideAtTime(u===n?.5:h?u:this.getTimeAt(u))},split:function(u,h){return this.splitAtTime(u===n?.5:h?u:this.getTimeAt(u))},reversed:function(){return new xe(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(u,h,d,g){var m=u._point,w=u._handleOut,T=h._handleIn,S=h._point,x=m.x,N=m.y,O=S.x,P=S.y,R=g?[x,N,x,N,O,P,O,P]:[x,N,x+w._x,N+w._y,O+T._x,P+T._y,O,P];return d&&d._transformCoordinates(R,R,4),R},subdivide:function(u,h){var d=u[0],g=u[1],m=u[2],w=u[3],T=u[4],S=u[5],x=u[6],N=u[7];h===n&&(h=.5);var O=1-h,P=O*d+h*m,R=O*g+h*w,A=O*m+h*T,U=O*w+h*S,W=O*T+h*x,H=O*S+h*N,V=O*P+h*A,B=O*R+h*U,k=O*A+h*W,M=O*U+h*H,q=O*V+h*k,$=O*B+h*M;return[[d,g,P,R,V,B,q,$],[q,$,k,M,W,H,x,N]]},getMonoCurves:function(u,h){var d=[],g=h?0:1,m=u[g+0],w=u[g+2],T=u[g+4],S=u[g+6];if(m>=w==w>=T&&w>=T==T>=S||xe.isStraight(u))d.push(u);else{var x=3*(w-T)-m+S,N=2*(m+T)-4*w,O=w-m,P=1e-8,R=1-P,A=[],U=b.solveQuadratic(x,N,O,A,P,R);if(!U)d.push(u);else{A.sort();var W=A[0],H=xe.subdivide(u,W);d.push(H[0]),U>1&&(W=(A[1]-W)/(1-W),H=xe.subdivide(H[1],W),d.push(H[0])),d.push(H[1])}}return d},solveCubic:function(u,h,d,g,m,w){var T=u[h],S=u[h+2],x=u[h+4],N=u[h+6],O=0;if(!(T<d&&N<d&&S<d&&x<d||T>d&&N>d&&S>d&&x>d)){var P=3*(S-T),R=3*(x-S)-P,A=N-T-P-R;O=b.solveCubic(A,R,P,T-d,g,m,w)}return O},getTimeOf:function(u,h){var d=new I(u[0],u[1]),g=new I(u[6],u[7]),m=1e-12,w=1e-7,T=h.isClose(d,m)?0:h.isClose(g,m)?1:null;if(T===null)for(var S=[h.x,h.y],x=[],N=0;N<2;N++)for(var O=xe.solveCubic(u,N,S[N],x,0,1),P=0;P<O;P++){var R=x[P];if(h.isClose(xe.getPoint(u,R),w))return R}return h.isClose(d,w)?0:h.isClose(g,w)?1:null},getNearestTime:function(u,h){if(xe.isStraight(u)){var d=u[0],g=u[1],m=u[6],w=u[7],T=m-d,S=w-g,x=T*T+S*S;if(x===0)return 0;var N=((h.x-d)*T+(h.y-g)*S)/x;return N<1e-12?0:N>.999999999999?1:xe.getTimeOf(u,new I(d+N*T,g+N*S))}var O=100,P=1/0,R=0;function A(H){if(H>=0&&H<=1){var V=h.getDistance(xe.getPoint(u,H),!0);if(V<P)return P=V,R=H,!0}}for(var U=0;U<=O;U++)A(U/O);for(var W=1/(O*2);W>1e-8;)!A(R-W)&&!A(R+W)&&(W/=2);return R},getPart:function(u,h,d){var g=h>d;if(g){var m=h;h=d,d=m}return h>0&&(u=xe.subdivide(u,h)[1]),d<1&&(u=xe.subdivide(u,(d-h)/(1-h))[0]),g?[u[6],u[7],u[4],u[5],u[2],u[3],u[0],u[1]]:u},isFlatEnough:function(u,h){var d=u[0],g=u[1],m=u[2],w=u[3],T=u[4],S=u[5],x=u[6],N=u[7],O=3*m-2*d-x,P=3*w-2*g-N,R=3*T-2*x-d,A=3*S-2*N-g;return Math.max(O*O,R*R)+Math.max(P*P,A*A)<=16*h*h},getArea:function(u){var h=u[0],d=u[1],g=u[2],m=u[3],w=u[4],T=u[5],S=u[6],x=u[7];return 3*((x-d)*(g+w)-(S-h)*(m+T)+m*(h-w)-g*(d-T)+x*(w+h/3)-S*(T+d/3))/20},getBounds:function(u){for(var h=u.slice(0,2),d=h.slice(),g=[0,0],m=0;m<2;m++)xe._addBounds(u[m],u[m+2],u[m+4],u[m+6],m,0,h,d,g);return new z(h[0],h[1],d[0]-h[0],d[1]-h[1])},_addBounds:function(u,h,d,g,m,w,T,S,x){function N(q,$){var X=q-$,Q=q+$;X<T[m]&&(T[m]=X),Q>S[m]&&(S[m]=Q)}w/=2;var O=T[m]+w,P=S[m]-w;if(u<O||h<O||d<O||g<O||u>P||h>P||d>P||g>P)if(h<u!=h<g&&d<u!=d<g)N(u,0),N(g,0);else{var R=3*(h-d)-u+g,A=2*(u+d)-4*h,U=h-u,W=b.solveQuadratic(R,A,U,x),H=1e-8,V=1-H;N(g,0);for(var B=0;B<W;B++){var k=x[B],M=1-k;H<=k&&k<=V&&N(M*M*M*u+3*M*M*k*h+3*M*k*k*d+k*k*k*g,w)}}}}},o.each(["getBounds","getStrokeBounds","getHandleBounds"],function(u){this[u]=function(){this._bounds||(this._bounds={});var h=this._bounds[u];return h||(h=this._bounds[u]=Ne[u]([this._segment1,this._segment2],!1,this._path)),h.clone()}},{}),o.each({isStraight:function(u,h,d,g){if(h.isZero()&&d.isZero())return!0;var m=g.subtract(u);if(m.isZero())return!1;if(m.isCollinear(h)&&m.isCollinear(d)){var w=new ue(u,g),T=1e-7;if(w.getDistance(u.add(h))<T&&w.getDistance(g.add(d))<T){var S=m.dot(m),x=m.dot(h)/S,N=m.dot(d)/S;return x>=0&&x<=1&&N<=0&&N>=-1}}return!1},isLinear:function(u,h,d,g){var m=g.subtract(u).divide(3);return h.equals(m)&&d.negate().equals(m)}},function(u,h){this[h]=function(d){var g=this._segment1,m=this._segment2;return u(g._point,g._handleOut,m._handleIn,m._point,d)},this.statics[h]=function(d,g){var m=d[0],w=d[1],T=d[6],S=d[7];return u(new I(m,w),new I(d[2]-m,d[3]-w),new I(d[4]-T,d[5]-S),new I(T,S),g)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(u){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(u||0)},isCollinear:function(u){return u&&this.isStraight()&&u.isStraight()&&this.getLine().isCollinear(u.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(u,h){return this.getLocationAtTime(h?u:this.getTimeAt(u))},getLocationAtTime:function(u){return u!=null&&u>=0&&u<=1?new _t(this,u):null},getTimeAt:function(u,h){return xe.getTimeAt(this.getValues(),u,h)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var u=I.read(arguments);return u.isZero()?[]:xe.getTimesWithTangent(this.getValues(),u)},getOffsetAtTime:function(u){return this.getPartLength(0,u)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(I.read(arguments)))},getOffsetOf:function(){var u=this.getLocationOf.apply(this,arguments);return u?u.getOffset():null},getTimeOf:function(){return xe.getTimeOf(this.getValues(),I.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var u=I.read(arguments),h=this.getValues(),d=xe.getNearestTime(h,u),g=xe.getPoint(h,d);return new _t(this,d,g,null,u.getDistance(g))},getNearestPoint:function(){var u=this.getNearestLocation.apply(this,arguments);return u&&u.getPoint()}},new function(){var u=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return o.each(u,function(h){this[h+"At"]=function(d,g){var m=this.getValues();return xe[h](m,g?d:xe.getTimeAt(m,d))},this[h+"AtTime"]=function(d){return xe[h](this.getValues(),d)}},{statics:{_evaluateMethods:u}})},new function(){function u(g){var m=g[0],w=g[1],T=g[2],S=g[3],x=g[4],N=g[5],O=g[6],P=g[7],R=9*(T-x)+3*(O-m),A=6*(m+x)-12*T,U=3*(T-m),W=9*(S-N)+3*(P-w),H=6*(w+N)-12*S,V=3*(S-w);return function(B){var k=(R*B+A)*B+U,M=(W*B+H)*B+V;return Math.sqrt(k*k+M*M)}}function h(g,m){return Math.max(2,Math.min(16,Math.ceil(Math.abs(m-g)*32)))}function d(g,m,w,T){if(m==null||m<0||m>1)return null;var S=g[0],x=g[1],N=g[2],O=g[3],P=g[4],R=g[5],A=g[6],U=g[7],W=b.isZero;W(N-S)&&W(O-x)&&(N=S,O=x),W(P-A)&&W(R-U)&&(P=A,R=U);var H=3*(N-S),V=3*(P-N)-H,B=A-S-H-V,k=3*(O-x),M=3*(R-O)-k,q=U-x-k-M,$,X;if(w===0)$=m===0?S:m===1?A:((B*m+V)*m+H)*m+S,X=m===0?x:m===1?U:((q*m+M)*m+k)*m+x;else{var Q=1e-8,J=1-Q;if(m<Q?($=H,X=k):m>J?($=3*(A-P),X=3*(U-R)):($=(3*B*m+2*V)*m+H,X=(3*q*m+2*M)*m+k),T){$===0&&X===0&&(m<Q||m>J)&&($=P-N,X=R-O);var ne=Math.sqrt($*$+X*X);ne&&($/=ne,X/=ne)}if(w===3){var P=6*B*m+2*V,R=6*q*m+2*M,se=Math.pow($*$+X*X,3/2);$=se!==0?($*R-X*P)/se:0,X=0}}return w===2?new I(X,-$):new I($,X)}return{statics:{classify:function(g){var m=g[0],w=g[1],T=g[2],S=g[3],x=g[4],N=g[5],O=g[6],P=g[7],R=m*(P-N)+w*(x-O)+O*N-P*x,A=T*(w-P)+S*(O-m)+m*P-w*O,U=x*(S-w)+N*(m-T)+T*w-S*m,W=3*U,H=W-A,V=H-A+R,B=Math.sqrt(V*V+H*H+W*W),k=B!==0?1/B:0,M=b.isZero,q="serpentine";V*=k,H*=k,W*=k;function $(ne,se,ie){var ae=se!==n,le=ae&&se>0&&se<1,de=ae&&ie>0&&ie<1;return ae&&(!(le||de)||ne==="loop"&&!(le&&de))&&(ne="arch",le=de=!1),{type:ne,roots:le||de?le&&de?se<ie?[se,ie]:[ie,se]:[le?se:ie]:null}}if(M(V))return M(H)?$(M(W)?"line":"quadratic"):$(q,W/(3*H));var X=3*H*H-4*V*W;if(M(X))return $("cusp",H/(2*V));var Q=X>0?Math.sqrt(X/3):Math.sqrt(-X),J=2*V;return $(X>0?q:"loop",(H+Q)/J,(H-Q)/J)},getLength:function(g,m,w,T){if(m===n&&(m=0),w===n&&(w=1),xe.isStraight(g)){var S=g;w<1&&(S=xe.subdivide(S,w)[0],m/=w),m>0&&(S=xe.subdivide(S,m)[1]);var x=S[6]-S[0],N=S[7]-S[1];return Math.sqrt(x*x+N*N)}return b.integrate(T||u(g),m,w,h(m,w))},getTimeAt:function(g,m,w){if(w===n&&(w=m<0?1:0),m===0)return w;var T=Math.abs,S=1e-12,x=m>0,N=x?w:0,O=x?1:w,P=u(g),R=xe.getLength(g,N,O,P),A=T(m)-R;if(T(A)<S)return x?O:N;if(A>S)return null;var U=m/R,W=0;function H(V){return W+=b.integrate(P,w,V,h(w,V)),w=V,W-m}return b.findRoot(H,P,w+U,N,O,32,1e-12)},getPoint:function(g,m){return d(g,m,0,!1)},getTangent:function(g,m){return d(g,m,1,!0)},getWeightedTangent:function(g,m){return d(g,m,1,!1)},getNormal:function(g,m){return d(g,m,2,!0)},getWeightedNormal:function(g,m){return d(g,m,2,!1)},getCurvature:function(g,m){return d(g,m,3,!1).x},getPeaks:function(g){var m=g[0],w=g[1],T=g[2],S=g[3],x=g[4],N=g[5],O=g[6],P=g[7],R=-m+3*T-3*x+O,A=3*m-6*T+3*x,U=-3*m+3*T,W=-w+3*S-3*N+P,H=3*w-6*S+3*N,V=-3*w+3*S,B=1e-8,k=1-B,M=[];return b.solveCubic(9*(R*R+W*W),9*(R*A+H*W),2*(A*A+H*H)+3*(U*R+V*W),U*A+H*V,M,B,k),M.sort()}}}},new function(){function u(A,U,W,H,V,B,k){var M=!k&&W.getPrevious()===V,q=!k&&W!==V&&W.getNext()===V,$=1e-8,X=1-$;if(H!==null&&H>=(M?$:0)&&H<=(q?X:1)&&B!==null&&B>=(q?$:0)&&B<=(M?X:1)){var Q=new _t(W,H,null,k),J=new _t(V,B,null,k);Q._intersection=J,J._intersection=Q,(!U||U(Q))&&_t.insert(A,Q,!0)}}function h(A,U,W,H,V,B,k,M,q,$,X,Q,J){if(++q>=4096||++M>=40)return q;var ne=1e-9,se=U[0],ie=U[1],ae=U[6],le=U[7],de=ue.getSignedDistance,ve=de(se,ie,ae,le,U[2],U[3]),ye=de(se,ie,ae,le,U[4],U[5]),Ae=ve*ye>0?3/4:4/9,Me=Ae*Math.min(0,ve,ye),Be=Ae*Math.max(0,ve,ye),lt=de(se,ie,ae,le,A[0],A[1]),nt=de(se,ie,ae,le,A[2],A[3]),et=de(se,ie,ae,le,A[4],A[5]),Ze=de(se,ie,ae,le,A[6],A[7]),vt=d(lt,nt,et,Ze),ot=vt[0],Et=vt[1],xt,Lt;if(ve===0&&ye===0&&lt===0&&nt===0&&et===0&&Ze===0||(xt=g(ot,Et,Me,Be))==null||(Lt=g(ot.reverse(),Et.reverse(),Me,Be))==null)return q;var Mt=$+(X-$)*xt,At=$+(X-$)*Lt;if(Math.max(J-Q,At-Mt)<ne){var lr=(Mt+At)/2,Zn=(Q+J)/2;u(V,B,k?H:W,k?Zn:lr,k?W:H,k?lr:Zn)}else{A=xe.getPart(A,xt,Lt);var wr=J-Q;if(Lt-xt>.8)if(At-Mt>wr){var Dn=xe.subdivide(A,.5),lr=(Mt+At)/2;q=h(U,Dn[0],H,W,V,B,!k,M,q,Q,J,Mt,lr),q=h(U,Dn[1],H,W,V,B,!k,M,q,Q,J,lr,At)}else{var Dn=xe.subdivide(U,.5),Zn=(Q+J)/2;q=h(Dn[0],A,H,W,V,B,!k,M,q,Q,Zn,Mt,At),q=h(Dn[1],A,H,W,V,B,!k,M,q,Zn,J,Mt,At)}else wr===0||wr>=ne?q=h(U,A,H,W,V,B,!k,M,q,Q,J,Mt,At):q=h(A,U,W,H,V,B,k,M,q,Mt,At,Q,J)}return q}function d(A,U,W,H){var V=[0,A],B=[1/3,U],k=[2/3,W],M=[1,H],q=U-(2*A+H)/3,$=W-(A+2*H)/3,X;if(q*$<0)X=[[V,B,M],[V,k,M]];else{var Q=q/$;X=[Q>=2?[V,B,M]:Q<=.5?[V,k,M]:[V,B,k,M],[V,M]]}return(q||$)<0?X.reverse():X}function g(A,U,W,H){return A[0][1]<W?m(A,!0,W):U[0][1]>H?m(U,!1,H):A[0][0]}function m(A,U,W){for(var H=A[0][0],V=A[0][1],B=1,k=A.length;B<k;B++){var M=A[B][0],q=A[B][1];if(U?q>=W:q<=W)return q===W?M:H+(W-V)*(M-H)/(q-V);H=M,V=q}return null}function w(A,U,W,H,V){var B=b.isZero;if(B(H)&&B(V)){var k=xe.getTimeOf(A,new I(U,W));return k===null?[]:[k]}for(var M=Math.atan2(-V,H),q=Math.sin(M),$=Math.cos(M),X=[],Q=[],J=0;J<8;J+=2){var ne=A[J]-U,se=A[J+1]-W;X.push(ne*$-se*q,ne*q+se*$)}return xe.solveCubic(X,1,0,Q,0,1),Q}function T(A,U,W,H,V,B,k){for(var M=U[0],q=U[1],$=U[6],X=U[7],Q=w(A,M,q,$-M,X-q),J=0,ne=Q.length;J<ne;J++){var se=Q[J],ie=xe.getPoint(A,se),ae=xe.getTimeOf(U,ie);ae!==null&&u(V,B,k?H:W,k?ae:se,k?W:H,k?se:ae)}}function S(A,U,W,H,V,B){var k=ue.intersect(A[0],A[1],A[6],A[7],U[0],U[1],U[6],U[7]);k&&u(V,B,W,xe.getTimeOf(A,k),H,xe.getTimeOf(U,k))}function x(A,U,W,H,V,B){var k=1e-12,M=Math.min,q=Math.max;if(q(A[0],A[2],A[4],A[6])+k>M(U[0],U[2],U[4],U[6])&&M(A[0],A[2],A[4],A[6])-k<q(U[0],U[2],U[4],U[6])&&q(A[1],A[3],A[5],A[7])+k>M(U[1],U[3],U[5],U[7])&&M(A[1],A[3],A[5],A[7])-k<q(U[1],U[3],U[5],U[7])){var $=P(A,U);if($)for(var X=0;X<2;X++){var Q=$[X];u(V,B,W,Q[0],H,Q[1],!0)}else{var J=xe.isStraight(A),ne=xe.isStraight(U),se=J&&ne,ie=J&&!ne,ae=V.length;if((se?S:J||ne?T:h)(ie?U:A,ie?A:U,ie?H:W,ie?W:H,V,B,ie,0,0,0,1,0,1),!se||V.length===ae)for(var X=0;X<4;X++){var le=X>>1,de=X&1,ve=le*6,ye=de*6,Ae=new I(A[ve],A[ve+1]),Me=new I(U[ye],U[ye+1]);Ae.isClose(Me,k)&&u(V,B,W,le,H,de)}}}return V}function N(A,U,W,H){var V=xe.classify(A);if(V.type==="loop"){var B=V.roots;u(W,H,U,B[0],U,B[1])}return W}function O(A,U,W,H,V,B){var k=1e-7,M=!U;M&&(U=A);for(var q=A.length,$=U.length,X=new Array(q),Q=M?X:new Array($),J=[],ne=0;ne<q;ne++)X[ne]=A[ne].getValues(H);if(!M)for(var ne=0;ne<$;ne++)Q[ne]=U[ne].getValues(V);for(var se=v.findCurveBoundsCollisions(X,Q,k),ie=0;ie<q;ie++){var ae=A[ie],le=X[ie];M&&N(le,ae,J,W);var de=se[ie];if(de)for(var ve=0;ve<de.length;ve++){if(B&&J.length)return J;var ye=de[ve];if(!M||ye>ie){var Ae=U[ye],Me=Q[ye];x(le,Me,ae,Ae,J,W)}}}return J}function P(A,U){function W(Ze){var vt=Ze[6]-Ze[0],ot=Ze[7]-Ze[1];return vt*vt+ot*ot}var H=Math.abs,V=ue.getDistance,B=1e-8,k=1e-7,M=xe.isStraight(A),q=xe.isStraight(U),$=M&&q,X=W(A)<W(U),Q=X?U:A,J=X?A:U,ne=Q[0],se=Q[1],ie=Q[6]-ne,ae=Q[7]-se;if(V(ne,se,ie,ae,J[0],J[1],!0)<k&&V(ne,se,ie,ae,J[6],J[7],!0)<k)!$&&V(ne,se,ie,ae,Q[2],Q[3],!0)<k&&V(ne,se,ie,ae,Q[4],Q[5],!0)<k&&V(ne,se,ie,ae,J[2],J[3],!0)<k&&V(ne,se,ie,ae,J[4],J[5],!0)<k&&(M=q=$=!0);else if($)return null;if(M^q)return null;for(var le=[A,U],de=[],ve=0;ve<4&&de.length<2;ve++){var ye=ve&1,Ae=ye^1,Me=ve>>1,Be=xe.getTimeOf(le[ye],new I(le[Ae][Me?6:0],le[Ae][Me?7:1]));if(Be!=null){var lt=ye?[Me,Be]:[Be,Me];(!de.length||H(lt[0]-de[0][0])>B&&H(lt[1]-de[0][1])>B)&&de.push(lt)}if(ve>2&&!de.length)break}if(de.length!==2)de=null;else if(!$){var nt=xe.getPart(A,de[0][0],de[1][0]),et=xe.getPart(U,de[0][1],de[1][1]);(H(et[2]-nt[2])>k||H(et[3]-nt[3])>k||H(et[4]-nt[4])>k||H(et[5]-nt[5])>k)&&(de=null)}return de}function R(A,U){var W=A[0],H=A[1],V=A[2],B=A[3],k=A[4],M=A[5],q=A[6],$=A[7],X=U.normalize(),Q=X.x,J=X.y,ne=3*q-9*k+9*V-3*W,se=3*$-9*M+9*B-3*H,ie=6*k-12*V+6*W,ae=6*M-12*B+6*H,le=3*V-3*W,de=3*B-3*H,ve=2*ne*J-2*se*Q,ye=[];if(Math.abs(ve)<b.CURVETIME_EPSILON){var Ae=ne*de-se*le,ve=ne*ae-se*ie;if(ve!=0){var Me=-Ae/ve;Me>=0&&Me<=1&&ye.push(Me)}}else{var Be=(ie*ie-4*ne*le)*J*J+(-2*ie*ae+4*se*le+4*ne*de)*Q*J+(ae*ae-4*se*de)*Q*Q,lt=ie*J-ae*Q;if(Be>=0&&ve!=0){var nt=Math.sqrt(Be),et=-(lt+nt)/ve,Ze=(-lt+nt)/ve;et>=0&&et<=1&&ye.push(et),Ze>=0&&Ze<=1&&ye.push(Ze)}}return ye}return{getIntersections:function(A){var U=this.getValues(),W=A&&A!==this&&A.getValues();return W?x(U,W,this,A,[]):N(U,this,[])},statics:{getOverlaps:P,getIntersections:O,getCurveLineIntersections:w,getTimesWithTangent:R}}}),_t=o.extend({_class:"CurveLocation",initialize:function(h,d,g,m,w){if(d>=.99999999){var T=h.getNext();T&&(d=0,h=T)}this._setCurve(h),this._time=d,this._point=g||h.getPointAtTime(d),this._overlap=m,this._distance=w,this._intersection=this._next=this._previous=null},_setPath:function(u){this._path=u,this._version=u?u._version:0},_setCurve:function(u){this._setPath(u._path),this._curve=u,this._segment=null,this._segment1=u._segment1,this._segment2=u._segment2},_setSegment:function(u){var h=u.getCurve();h?this._setCurve(h):(this._setPath(u._path),this._segment1=u,this._segment2=null),this._segment=u,this._time=u===this._segment1?0:1,this._point=u._point.clone()},getSegment:function(){var u=this._segment;if(!u){var h=this.getCurve(),d=this.getTime();d===0?u=h._segment1:d===1?u=h._segment2:d!=null&&(u=h.getPartLength(0,d)<h.getPartLength(d,1)?h._segment1:h._segment2),this._segment=u}return u},getCurve:function(){var u=this._path,h=this;u&&u._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null);function d(g){var m=g&&g.getCurve();if(m&&(h._time=m.getTimeOf(h._point))!=null)return h._setCurve(m),m}return this._curve||d(this._segment)||d(this._segment1)||d(this._segment2.getPrevious())},getPath:function(){var u=this.getCurve();return u&&u._path},getIndex:function(){var u=this.getCurve();return u&&u.getIndex()},getTime:function(){var u=this.getCurve(),h=this._time;return u&&h==null?this._time=u.getTimeOf(this._point):h},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var u=this._offset;if(u==null){u=0;var h=this.getPath(),d=this.getIndex();if(h&&d!=null)for(var g=h.getCurves(),m=0;m<d;m++)u+=g[m].getLength();this._offset=u+=this.getCurveOffset()}return u},getCurveOffset:function(){var u=this._curveOffset;if(u==null){var h=this.getCurve(),d=this.getTime();this._curveOffset=u=d!=null&&h&&h.getPartLength(0,d)}return u},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var u=this.getCurve(),h=u&&u.divideAtTime(this.getTime());return h&&this._setSegment(h._segment1),h},split:function(){var u=this.getCurve(),h=u._path,d=u&&u.splitAtTime(this.getTime());return d&&this._setSegment(h.getLastSegment()),d},equals:function(u,h){var d=this===u;if(!d&&u instanceof _t){var g=this.getCurve(),m=u.getCurve(),w=g._path,T=m._path;if(w===T){var S=Math.abs,x=1e-7,N=S(this.getOffset()-u.getOffset()),O=!h&&this._intersection,P=!h&&u._intersection;d=(N<x||w&&S(w.getLength()-N)<x)&&(!O&&!P||O&&P&&O.equals(P,!0))}}return d},toString:function(){var u=[],h=this.getPoint(),d=y.instance;h&&u.push("point: "+h);var g=this.getIndex();g!=null&&u.push("index: "+g);var m=this.getTime();return m!=null&&u.push("time: "+d.number(m)),this._distance!=null&&u.push("distance: "+d.number(this._distance)),"{ "+u.join(", ")+" }"},isTouching:function(){var u=this._intersection;if(u&&this.getTangent().isCollinear(u.getTangent())){var h=this.getCurve(),d=u.getCurve();return!(h.isStraight()&&d.isStraight()&&h.getLine().intersect(d.getLine()))}return!1},isCrossing:function(){var u=this._intersection;if(!u)return!1;var h=this.getTime(),d=u.getTime(),g=1e-8,m=1-g,w=h>=g&&h<=m,T=d>=g&&d<=m;if(w&&T)return!this.isTouching();var S=this.getCurve(),x=S&&h<g?S.getPrevious():S,N=u.getCurve(),O=N&&d<g?N.getPrevious():N;if(h>m&&(S=S.getNext()),d>m&&(N=N.getNext()),!x||!S||!O||!N)return!1;var P=[];function R(Q,J){var ne=Q.getValues(),se=xe.classify(ne).roots||xe.getPeaks(ne),ie=se.length,ae=xe.getLength(ne,J&&ie?se[ie-1]:0,!J&&ie?se[0]:1);P.push(ie?ae:ae/32)}function A(Q,J,ne){return J<ne?Q>J&&Q<ne:Q>J||Q<ne}w||(R(x,!0),R(S,!1)),T||(R(O,!0),R(N,!1));var U=this.getPoint(),W=Math.min.apply(Math,P),H=w?S.getTangentAtTime(h):S.getPointAt(W).subtract(U),V=w?H.negate():x.getPointAt(-W).subtract(U),B=T?N.getTangentAtTime(d):N.getPointAt(W).subtract(U),k=T?B.negate():O.getPointAt(-W).subtract(U),M=V.getAngle(),q=H.getAngle(),$=k.getAngle(),X=B.getAngle();return!!(w?A(M,$,X)^A(q,$,X)&&A(M,X,$)^A(q,X,$):A($,M,q)^A(X,M,q)&&A($,q,M)^A(X,q,M))},hasOverlap:function(){return!!this._overlap}},o.each(xe._evaluateMethods,function(u){var h=u+"At";this[u]=function(){var d=this.getCurve(),g=this.getTime();return g!=null&&d&&d[h](g,!0)}},{preserve:!0}),new function(){function u(h,d,g){var m=h.length,w=0,T=m-1;function S(U,W){for(var H=U+W;H>=-1&&H<=m;H+=W){var V=h[(H%m+m)%m];if(!d.getPoint().isClose(V.getPoint(),1e-7))break;if(d.equals(V))return V}return null}for(;w<=T;){var x=w+T>>>1,N=h[x],O;if(g&&(O=d.equals(N)?N:S(x,-1)||S(x,1)))return d._overlap&&(O._overlap=O._intersection._overlap=!0),O;var P=d.getPath(),R=N.getPath(),A=P!==R?P._id-R._id:d.getIndex()+d.getTime()-(N.getIndex()+N.getTime());A<0?T=x-1:w=x+1}return h.splice(w,0,d),d}return{statics:{insert:u,expand:function(h){for(var d=h.slice(),g=h.length-1;g>=0;g--)u(d,h[g]._intersection,!1);return d}}}}),Fe=fe.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(u){var h,d,g;if(o.isPlainObject(u)?(d=u.segments,h=u.pathData):Array.isArray(u)?d=u:typeof u=="string"&&(h=u),d){var m=d[0];g=m&&Array.isArray(m[0])}else h&&(g=(h.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(h));var w=g?qe:Ne;return new w(u)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(u){this.isClockwise()!=(u=!!u)&&this.reverse()},setPathData:function(u){var h=u&&u.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/ig),d,g=!1,m,w,T=new I,S=new I;function x(k,M){var q=+d[k];return g&&(q+=T[M]),q}function N(k){return new I(x(k,"x"),x(k+1,"y"))}this.clear();for(var O=0,P=h&&h.length;O<P;O++){var R=h[O],A=R[0],U=A.toLowerCase();d=R.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g);var W=d&&d.length;switch(g=A===U,m==="z"&&!/[mz]/.test(U)&&this.moveTo(T),U){case"m":case"l":for(var H=U==="m",V=0;V<W;V+=2)this[H?"moveTo":"lineTo"](T=N(V)),H&&(S=T,H=!1);w=T;break;case"h":case"v":var B=U==="h"?"x":"y";T=T.clone();for(var V=0;V<W;V++)T[B]=x(V,B),this.lineTo(T);w=T;break;case"c":for(var V=0;V<W;V+=6)this.cubicCurveTo(N(V),w=N(V+2),T=N(V+4));break;case"s":for(var V=0;V<W;V+=4)this.cubicCurveTo(/[cs]/.test(m)?T.multiply(2).subtract(w):T,w=N(V),T=N(V+2)),m=U;break;case"q":for(var V=0;V<W;V+=4)this.quadraticCurveTo(w=N(V),T=N(V+2));break;case"t":for(var V=0;V<W;V+=2)this.quadraticCurveTo(w=/[qt]/.test(m)?T.multiply(2).subtract(w):T,T=N(V)),m=U;break;case"a":for(var V=0;V<W;V+=7)this.arcTo(T=N(V+5),new D(+d[V],+d[V+1]),+d[V+2],+d[V+4],+d[V+3]);break;case"z":this.closePath(1e-12),T=S;break}m=U}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(u){var h=u.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(u):{};return h.onPath||!!(this.getFillRule()==="evenodd"?h.windingL&1||h.windingR&1:h.winding)},getIntersections:function(u,h,d,g){var m=this===u||!u,w=this._matrix._orNullIfIdentity(),T=m?w:(d||u._matrix)._orNullIfIdentity();return m||this.getBounds(w).intersects(u.getBounds(T),1e-12)?xe.getIntersections(this.getCurves(),!m&&u.getCurves(),h,w,T,g):[]},getCrossings:function(u){return this.getIntersections(u,function(h){return h.isCrossing()})},getNearestLocation:function(){for(var u=I.read(arguments),h=this.getCurves(),d=1/0,g=null,m=0,w=h.length;m<w;m++){var T=h[m].getNearestLocation(u);T._distance<d&&(d=T._distance,g=T)}return g},getNearestPoint:function(){var u=this.getNearestLocation.apply(this,arguments);return u&&u.getPoint()},interpolate:function(u,h,d){var g=!this._children,m=g?"_segments":"_children",w=u[m],T=h[m],S=this[m];if(!w||!T||w.length!==T.length)throw new Error("Invalid operands in interpolate() call: "+u+", "+h);var x=S.length,N=T.length;if(x<N)for(var O=g?Le:Ne,P=x;P<N;P++)this.add(new O);else x>N&&this[g?"removeSegments":"removeChildren"](N,x);for(var P=0;P<N;P++)S[P].interpolate(w[P],T[P],d);g&&(this.setClosed(u._closed),this._changed(9))},compare:function(u){var h=!1;if(u){var d=this._children||[this],g=u._children?u._children.slice():[u],m=d.length,w=g.length,T=[],S=0;h=!0;for(var x=v.findItemBoundsCollisions(d,g,b.GEOMETRIC_EPSILON),N=m-1;N>=0&&h;N--){var O=d[N];h=!1;var P=x[N];if(P)for(var R=P.length-1;R>=0&&!h;R--)O.compare(g[P[R]])&&(T[P[R]]||(T[P[R]]=!0,S++),h=!0)}h=h&&S===w}return h}}),Ne=Fe.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(h){this._closed=!1,this._segments=[],this._version=0;var d=arguments,g=Array.isArray(h)?typeof h[0]=="object"?h:d:h&&h.size===n&&(h.x!==n||h.point!==n)?d:null;g&&g.length>0?this.setSegments(g):(this._curves=n,this._segmentSelection=0,!g&&typeof h=="string"&&(this.setPathData(h),h=null)),this._initialize(!g&&h)},_equals:function(u){return this._closed===u._closed&&o.equals(this._segments,u._segments)},copyContent:function(u){this.setSegments(u._segments),this._closed=u._closed},_changed:function u(h){if(u.base.call(this,h),h&8){if(this._length=this._area=n,h&32)this._version++;else if(this._curves)for(var d=0,g=this._curves.length;d<g;d++)this._curves[d]._changed()}else h&64&&(this._bounds=n)},getStyle:function(){var u=this._parent;return(u instanceof qe?u:this)._style},getSegments:function(){return this._segments},setSegments:function(u){var h=this.isFullySelected(),d=u&&u.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=n,d){var g=u[d-1];typeof g=="boolean"&&(this.setClosed(g),d--),this._add(Le.readList(u,0,{},d))}h&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var u=this._curves,h=this._segments;if(!u){var d=this._countCurves();u=this._curves=new Array(d);for(var g=0;g<d;g++)u[g]=new xe(this,h[g],h[g+1]||h[0])}return u},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var u=this.getCurves();return u[u.length-1]},isClosed:function(){return this._closed},setClosed:function(u){if(this._closed!=(u=!!u)){if(this._closed=u,this._curves){var h=this._curves.length=this._countCurves();u&&(this._curves[h-1]=new xe(this,this._segments[h-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(u,h){var d=this._segments,g=d.length,m=new y(h),w=new Array(6),T=!0,S,x,N,O,P,R,A,U,W=[];function H(B,k){if(B._transformCoordinates(u,w),S=w[0],x=w[1],T)W.push("M"+m.pair(S,x)),T=!1;else if(P=w[2],R=w[3],P===S&&R===x&&A===N&&U===O){if(!k){var M=S-N,q=x-O;W.push(M===0?"v"+m.number(q):q===0?"h"+m.number(M):"l"+m.pair(M,q))}}else W.push("c"+m.pair(A-N,U-O)+" "+m.pair(P-N,R-O)+" "+m.pair(S-N,x-O));N=S,O=x,A=w[4],U=w[5]}if(!g)return"";for(var V=0;V<g;V++)H(d[V]);return this._closed&&g>0&&(H(d[0],!0),W.push("z")),W.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(u){for(var h=this._segments,d=new Array(6),g=0,m=h.length;g<m;g++)h[g]._transformCoordinates(u,d,!0);return!0},_add:function(u,T){for(var d=this._segments,g=this._curves,m=u.length,w=T==null,T=w?d.length:T,S=0;S<m;S++){var x=u[S];x._path&&(x=u[S]=x.clone()),x._path=this,x._index=T+S,x._selection&&this._updateSelection(x,0,x._selection)}if(w)o.push(d,u);else{d.splice.apply(d,[T,0].concat(u));for(var S=T+m,N=d.length;S<N;S++)d[S]._index=S}if(g){var O=this._countCurves(),P=T>0&&T+m-1===O?T-1:T,R=P,A=Math.min(P+m,O);u._curves&&(g.splice.apply(g,[P,0].concat(u._curves)),R+=u._curves.length);for(var S=R;S<A;S++)g.splice(S,0,new xe(this,null,null));this._adjustCurves(P,A)}return this._changed(41),u},_adjustCurves:function(u,h){for(var d=this._segments,g=this._curves,m,w=u;w<h;w++)m=g[w],m._path=this,m._segment1=d[w],m._segment2=d[w+1]||d[0],m._changed();(m=g[this._closed&&!u?d.length-1:u-1])&&(m._segment2=d[u]||d[0],m._changed()),(m=g[h])&&(m._segment1=d[h],m._changed())},_countCurves:function(){var u=this._segments.length;return!this._closed&&u>0?u-1:u},add:function(u){var h=arguments;return h.length>1&&typeof u!="number"?this._add(Le.readList(h)):this._add([Le.read(h)])[0]},insert:function(u,h){var d=arguments;return d.length>2&&typeof h!="number"?this._add(Le.readList(d,1),u):this._add([Le.read(d,1)],u)[0]},addSegment:function(){return this._add([Le.read(arguments)])[0]},insertSegment:function(u){return this._add([Le.read(arguments,1)],u)[0]},addSegments:function(u){return this._add(Le.readList(u))},insertSegments:function(u,h){return this._add(Le.readList(h),u)},removeSegment:function(u){return this.removeSegments(u,u+1)[0]||null},removeSegments:function(u,h,d){u=u||0,h=o.pick(h,this._segments.length);var g=this._segments,m=this._curves,w=g.length,T=g.splice(u,h-u),S=T.length;if(!S)return T;for(var x=0;x<S;x++){var N=T[x];N._selection&&this._updateSelection(N,N._selection,0),N._index=N._path=null}for(var x=u,O=g.length;x<O;x++)g[x]._index=x;if(m){for(var P=u>0&&h===w+(this._closed?1:0)?u-1:u,m=m.splice(P,S),x=m.length-1;x>=0;x--)m[x]._path=null;d&&(T._curves=m.slice(1)),this._adjustCurves(P,P)}return this._changed(41),T},clear:"#removeSegments",hasHandles:function(){for(var u=this._segments,h=0,d=u.length;h<d;h++)if(u[h].hasHandles())return!0;return!1},clearHandles:function(){for(var u=this._segments,h=0,d=u.length;h<d;h++)u[h].clearHandles()},getLength:function(){if(this._length==null){for(var u=this.getCurves(),h=0,d=0,g=u.length;d<g;d++)h+=u[d].getLength();this._length=h}return this._length},getArea:function(){var u=this._area;if(u==null){var h=this._segments,d=this._closed;u=0;for(var g=0,m=h.length;g<m;g++){var w=g+1===m;u+=xe.getArea(xe.getValues(h[g],h[w?0:g+1],null,w&&!d))}this._area=u}return u},isFullySelected:function(){var u=this._segments.length;return this.isSelected()&&u>0&&this._segmentSelection===u*7},setFullySelected:function(u){u&&this._selectSegments(!0),this.setSelected(u)},setSelection:function u(h){h&1||this._selectSegments(!1),u.base.call(this,h)},_selectSegments:function(u){var h=this._segments,d=h.length,g=u?7:0;this._segmentSelection=g*d;for(var m=0;m<d;m++)h[m]._selection=g},_updateSelection:function(u,h,d){u._selection=d;var g=this._segmentSelection+=d-h;g>0&&this.setSelected(!0)},divideAt:function(u){var h=this.getLocationAt(u),d;return h&&(d=h.getCurve().divideAt(h.getCurveOffset()))?d._segment1:null},splitAt:function(u){var h=this.getLocationAt(u),d=h&&h.index,g=h&&h.time,m=1e-8,w=1-m;g>w&&(d++,g=0);var T=this.getCurves();if(d>=0&&d<T.length){g>=m&&T[d++].divideAtTime(g);var S=this.removeSegments(d,this._segments.length,!0),x;return this._closed?(this.setClosed(!1),x=this):(x=new Ne(fe.NO_INSERT),x.insertAbove(this),x.copyAttributes(this)),x._add(S,0),this.addSegment(S[0]),x}return null},split:function(u,h){var d,g=h===n?u:(d=this.getCurves()[u])&&d.getLocationAtTime(h);return g!=null?this.splitAt(g):null},join:function(u,h){var d=h||0;if(u&&u!==this){var g=u._segments,m=this.getLastSegment(),w=u.getLastSegment();if(!w)return this;m&&m._point.isClose(w._point,d)&&u.reverse();var T=u.getFirstSegment();if(m&&m._point.isClose(T._point,d))m.setHandleOut(T._handleOut),this._add(g.slice(1));else{var S=this.getFirstSegment();S&&S._point.isClose(T._point,d)&&u.reverse(),w=u.getLastSegment(),S&&S._point.isClose(w._point,d)?(S.setHandleIn(w._handleIn),this._add(g.slice(0,g.length-1),0)):this._add(g.slice())}u._closed&&this._add([g[0]]),u.remove()}var x=this.getFirstSegment(),N=this.getLastSegment();return x!==N&&x._point.isClose(N._point,d)&&(x.setHandleIn(N._handleIn),N.remove(),this.setClosed(!0)),this},reduce:function(u){for(var h=this.getCurves(),d=u&&u.simplify,g=d?1e-7:0,m=h.length-1;m>=0;m--){var w=h[m];!w.hasHandles()&&(!w.hasLength(g)||d&&w.isCollinear(w.getNext()))&&w.remove()}return this},reverse:function(){this._segments.reverse();for(var u=0,h=this._segments.length;u<h;u++){var d=this._segments[u],g=d._handleIn;d._handleIn=d._handleOut,d._handleOut=g,d._index=u}this._curves=null,this._changed(9)},flatten:function(u){for(var h=new Ct(this,u||.25,256,!0),d=h.parts,g=d.length,m=[],w=0;w<g;w++)m.push(new Le(d[w].curve.slice(0,2)));!this._closed&&g>0&&m.push(new Le(d[g-1].curve.slice(6))),this.setSegments(m)},simplify:function(u){var h=new tt(this).fit(u||2.5);return h&&this.setSegments(h),!!h},smooth:function(u){var h=this,d=u||{},g=d.type||"asymmetric",m=this._segments,w=m.length,T=this._closed;function S(ot,Et){var xt=ot&&ot.index;if(xt!=null){var Lt=ot.path;if(Lt&&Lt!==h)throw new Error(ot._class+" "+xt+" of "+Lt+" is not part of "+h);Et&&ot instanceof xe&&xt++}else xt=typeof ot=="number"?ot:Et;return Math.min(xt<0&&T?xt%w:xt<0?xt+w:xt,w-1)}var x=T&&d.from===n&&d.to===n,N=S(d.from,0),O=S(d.to,w-1);if(N>O)if(T)N-=w;else{var P=N;N=O,O=P}if(/^(?:asymmetric|continuous)$/.test(g)){var R=g==="asymmetric",A=Math.min,U=O-N+1,W=U-1,H=x?A(U,4):1,V=H,B=H,k=[];if(T||(V=A(1,N),B=A(1,w-O-1)),W+=V+B,W<=1)return;for(var M=0,q=N-V;M<=W;M++,q++)k[M]=m[(q<0?q+w:q)%w]._point;for(var $=k[0]._x+2*k[1]._x,X=k[0]._y+2*k[1]._y,Q=2,J=W-1,ne=[$],se=[X],ie=[Q],ae=[],le=[],M=1;M<W;M++){var de=M<J,ve=de||R?1:2,ye=de?4:R?2:7,Ae=de?4:R?3:8,Me=de?2:R?0:1,Be=ve/Q;Q=ie[M]=ye-Be,$=ne[M]=Ae*k[M]._x+Me*k[M+1]._x-Be*$,X=se[M]=Ae*k[M]._y+Me*k[M+1]._y-Be*X}ae[J]=ne[J]/ie[J],le[J]=se[J]/ie[J];for(var M=W-2;M>=0;M--)ae[M]=(ne[M]-ae[M+1])/ie[M],le[M]=(se[M]-le[M+1])/ie[M];ae[W]=(3*k[W]._x-ae[J])/2,le[W]=(3*k[W]._y-le[J])/2;for(var M=V,lt=W-B,q=N;M<=lt;M++,q++){var nt=m[q<0?q+w:q],et=nt._point,Ze=ae[M]-et._x,vt=le[M]-et._y;(x||M<lt)&&nt.setHandleOut(Ze,vt),(x||M>V)&&nt.setHandleIn(-Ze,-vt)}}else for(var M=N;M<=O;M++)m[M<0?M+w:M].smooth(d,!x&&M===N,!x&&M===O)},toShape:function(u){if(!this._closed)return null;var h=this._segments,d,g,m,w;function T(R,A){var U=h[R],W=U.getNext(),H=h[A],V=H.getNext();return U._handleOut.isZero()&&W._handleIn.isZero()&&H._handleOut.isZero()&&V._handleIn.isZero()&&W._point.subtract(U._point).isCollinear(V._point.subtract(H._point))}function S(R){var A=h[R],U=A.getPrevious(),W=A.getNext();return U._handleOut.isZero()&&A._handleIn.isZero()&&A._handleOut.isZero()&&W._handleIn.isZero()&&A._point.subtract(U._point).isOrthogonal(W._point.subtract(A._point))}function x(R){var A=h[R],U=A.getNext(),W=A._handleOut,H=U._handleIn,V=.5522847498307936;if(W.isOrthogonal(H)){var B=A._point,k=U._point,M=new ue(B,W,!0).intersect(new ue(k,H,!0),!0);return M&&b.isZero(W.getLength()/M.subtract(B).getLength()-V)&&b.isZero(H.getLength()/M.subtract(k).getLength()-V)}return!1}function N(R,A){return h[R]._point.getDistance(h[A]._point)}if(!this.hasHandles()&&h.length===4&&T(0,2)&&T(1,3)&&S(1)?(d=Z.Rectangle,g=new D(N(0,3),N(0,1)),w=h[1]._point.add(h[2]._point).divide(2)):h.length===8&&x(0)&&x(2)&&x(4)&&x(6)&&T(1,5)&&T(3,7)?(d=Z.Rectangle,g=new D(N(1,6),N(0,3)),m=g.subtract(new D(N(0,7),N(1,2))).divide(2),w=h[3]._point.add(h[4]._point).divide(2)):h.length===4&&x(0)&&x(1)&&x(2)&&x(3)&&(b.isZero(N(0,2)-N(1,3))?(d=Z.Circle,m=N(0,2)/2):(d=Z.Ellipse,m=new D(N(2,0)/2,N(3,1)/2)),w=h[1]._point),d){var O=this.getPosition(!0),P=new d({center:O,size:g,radius:m,insert:!1});return P.copyAttributes(this,!0),P._matrix.prepend(this._matrix),P.rotate(w.subtract(O).getAngle()+90),(u===n||u)&&P.insertAbove(this),P}return null},toPath:"#clone",compare:function u(h){if(!h||h instanceof qe)return u.base.call(this,h);var d=this.getCurves(),g=h.getCurves(),m=d.length,w=g.length;if(!m||!w)return m==w;for(var T=d[0].getValues(),S=[],x=0,N,O=0,P,R=0;R<w;R++){var H=g[R].getValues();S.push(H);var A=xe.getOverlaps(T,H);if(A){N=!R&&A[0][0]>0?w-1:R,P=A[0][1];break}}for(var U=Math.abs,W=1e-8,H=S[N],V;T&&H;){var A=xe.getOverlaps(T,H);if(A){var B=A[0][0];if(U(B-O)<W){O=A[1][0],O===1&&(T=++x<m?d[x].getValues():null,O=0);var k=A[0][1];if(U(k-P)<W){if(V||(V=[N,k]),P=A[1][1],P===1&&(++N>=w&&(N=0),H=S[N]||g[N].getValues(),P=0),!T)return V[0]===N&&V[1]===P;continue}}}break}return!1},_hitTestSelf:function(u,h,d,g){var m=this,w=this.getStyle(),T=this._segments,S=T.length,x=this._closed,N=h._tolerancePadding,O=N,P,R,A,U,W,H,V=h.stroke&&w.hasStroke(),B=h.fill&&w.hasFill(),k=h.curves,M=V?w.getStrokeWidth()/2:B&&h.tolerance>0||k?0:null;M!==null&&(M>0?(P=w.getStrokeJoin(),R=w.getStrokeCap(),A=w.getMiterLimit(),O=O.add(Ne._getStrokePadding(M,g))):P=R="round");function q(ae,le){return u.subtract(ae).divide(le).length<=1}function $(ae,le,de){if(!h.selected||le.isSelected()){var ve=ae._point;if(le!==ve&&(le=le.add(ve)),q(le,O))return new ft(de,m,{segment:ae,point:le})}}function X(ae,le){return(le||h.segments)&&$(ae,ae._point,"segment")||!le&&h.handles&&($(ae,ae._handleIn,"handle-in")||$(ae,ae._handleOut,"handle-out"))}function Q(ae){U.add(ae)}function J(ae){var le=x||ae._index>0&&ae._index<S-1;if((le?P:R)==="round")return q(ae._point,O);if(U=new Ne({internal:!0,closed:!0}),le?ae.isSmooth()||Ne._addBevelJoin(ae,P,M,A,null,g,Q,!0):R==="square"&&Ne._addSquareCap(ae,R,M,null,g,Q,!0),!U.isEmpty()){var de;return U.contains(u)||(de=U.getNearestLocation(u))&&q(de.getPoint(),N)}}if(h.ends&&!h.segments&&!x){if(H=X(T[0],!0)||X(T[S-1],!0))return H}else if(h.segments||h.handles){for(var ne=0;ne<S;ne++)if(H=X(T[ne]))return H}if(M!==null){if(W=this.getNearestLocation(u),W){var se=W.getTime();se===0||se===1&&S>1?J(W.getSegment())||(W=null):q(W.getPoint(),O)||(W=null)}if(!W&&P==="miter"&&S>1)for(var ne=0;ne<S;ne++){var ie=T[ne];if(u.getDistance(ie._point)<=A*M&&J(ie)){W=ie.getLocation();break}}}return!W&&B&&this._contains(u)||W&&!V&&!k?new ft("fill",this):W?new ft(V?"stroke":"curve",this,{location:W,point:W.getPoint()}):null}},o.each(xe._evaluateMethods,function(u){this[u+"At"]=function(h){var d=this.getLocationAt(h);return d&&d[u]()}},{beans:!1,getLocationOf:function(){for(var u=I.read(arguments),h=this.getCurves(),d=0,g=h.length;d<g;d++){var m=h[d].getLocationOf(u);if(m)return m}return null},getOffsetOf:function(){var u=this.getLocationOf.apply(this,arguments);return u?u.getOffset():null},getLocationAt:function(u){if(typeof u=="number"){for(var h=this.getCurves(),d=0,g=0,m=h.length;g<m;g++){var w=d,T=h[g];if(d+=T.getLength(),d>u)return T.getLocationAt(u-w)}if(h.length>0&&u<=this.getLength())return new _t(h[h.length-1],1)}else if(u&&u.getPath&&u.getPath()===this)return u;return null},getOffsetsWithTangent:function(){var u=I.read(arguments);if(u.isZero())return[];for(var h=[],d=0,g=this.getCurves(),m=0,w=g.length;m<w;m++){for(var T=g[m],S=T.getTimesWithTangent(u),x=0,N=S.length;x<N;x++){var O=d+T.getOffsetAtTime(S[x]);h.indexOf(O)<0&&h.push(O)}d+=T.length}return h}}),new function(){function u(d,g,m,w){if(w<=0)return;var T=w/2,S=w-2,x=T-1,N=new Array(6),O,P;function R(B){var k=N[B],M=N[B+1];(O!=k||P!=M)&&(d.beginPath(),d.moveTo(O,P),d.lineTo(k,M),d.stroke(),d.beginPath(),d.arc(k,M,T,0,Math.PI*2,!0),d.fill())}for(var A=0,U=g.length;A<U;A++){var W=g[A],H=W._selection;if(W._transformCoordinates(m,N),O=N[0],P=N[1],H&2&&R(2),H&4&&R(4),d.fillRect(O-T,P-T,w,w),S>0&&!(H&1)){var V=d.fillStyle;d.fillStyle="#ffffff",d.fillRect(O-x,P-x,S,S),d.fillStyle=V}}}function h(d,g,m){var w=g._segments,T=w.length,S=new Array(6),x=!0,N,O,P,R,A,U,W,H;function V(k){if(m)k._transformCoordinates(m,S),N=S[0],O=S[1];else{var M=k._point;N=M._x,O=M._y}if(x)d.moveTo(N,O),x=!1;else{if(m)A=S[2],U=S[3];else{var q=k._handleIn;A=N+q._x,U=O+q._y}A===N&&U===O&&W===P&&H===R?d.lineTo(N,O):d.bezierCurveTo(W,H,A,U,N,O)}if(P=N,R=O,m)W=S[4],H=S[5];else{var q=k._handleOut;W=P+q._x,H=R+q._y}}for(var B=0;B<T;B++)V(w[B]);g._closed&&T>0&&V(w[0])}return{_draw:function(d,g,m,w){var T=g.dontStart,S=g.dontFinish||g.clip,x=this.getStyle(),N=x.hasFill(),O=x.hasStroke(),P=x.getDashArray(),R=!Ot.support.nativeDash&&O&&P&&P.length;T||d.beginPath(),(N||O&&!R||S)&&(h(d,this,w),this._closed&&d.closePath());function A(k){return P[(k%R+R)%R]}if(!S&&(N||O)&&(this._setStyles(d,g,m),N&&(d.fill(x.getFillRule()),d.shadowColor="rgba(0,0,0,0)"),O)){if(R){T||d.beginPath();for(var U=new Ct(this,.25,32,!1,w),W=U.length,H=-x.getDashOffset(),V,B=0;H>0;)H-=A(B--)+A(B--);for(;H<W;)V=H+A(B++),(H>0||V>0)&&U.drawPart(d,Math.max(H,0),Math.max(V,0)),H=V+A(B++)}d.stroke()}},_drawSelected:function(d,g){d.beginPath(),h(d,this,g),d.stroke(),u(d,this._segments,g,Ot.settings.handleSize)}}},new function(){function u(h){var d=h._segments;if(!d.length)throw new Error("Use a moveTo() command first");return d[d.length-1]}return{moveTo:function(){var h=this._segments;h.length===1&&this.removeSegment(0),h.length||this._add([new Le(I.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new Le(I.read(arguments))])},cubicCurveTo:function(){var h=arguments,d=I.read(h),g=I.read(h),m=I.read(h),w=u(this);w.setHandleOut(d.subtract(w._point)),this._add([new Le(m,g.subtract(m))])},quadraticCurveTo:function(){var h=arguments,d=I.read(h),g=I.read(h),m=u(this)._point;this.cubicCurveTo(d.add(m.subtract(d).multiply(1/3)),d.add(g.subtract(d).multiply(1/3)),g)},curveTo:function(){var h=arguments,d=I.read(h),g=I.read(h),m=o.pick(o.read(h),.5),w=1-m,T=u(this)._point,S=d.subtract(T.multiply(w*w)).subtract(g.multiply(m*m)).divide(2*m*w);if(S.isNaN())throw new Error("Cannot put a curve through points with parameter = "+m);this.quadraticCurveTo(S,g)},arcTo:function(){var h=arguments,d=Math.abs,g=Math.sqrt,m=u(this),w=m._point,T=I.read(h),S,x=o.peek(h),N=o.pick(x,!0),O,P,R,A;if(typeof N=="boolean")var U=w.add(T).divide(2),S=U.add(U.subtract(w).rotate(N?-90:90));else if(o.remain(h)<=2)S=T,T=I.read(h);else if(!w.equals(T)){var W=D.read(h),H=b.isZero;if(H(W.width)||H(W.height))return this.lineTo(T);var V=o.read(h),N=!!o.read(h),B=!!o.read(h),U=w.add(T).divide(2),k=w.subtract(U).rotate(-V),M=k.x,q=k.y,$=d(W.width),X=d(W.height),Q=$*$,J=X*X,ne=M*M,se=q*q,ie=g(ne/Q+se/J);if(ie>1&&($*=ie,X*=ie,Q=$*$,J=X*X),ie=(Q*J-Q*se-J*ne)/(Q*se+J*ne),d(ie)<1e-12&&(ie=0),ie<0)throw new Error("Cannot create an arc with the given arguments");O=new I($*q/X,-X*M/$).multiply((B===N?-1:1)*g(ie)).rotate(V).add(U),A=new K().translate(O).rotate(V).scale($,X),R=A._inverseTransform(w),P=R.getDirectedAngle(A._inverseTransform(T)),!N&&P>0?P-=360:N&&P<0&&(P+=360)}if(S){var ae=new ue(w.add(S).divide(2),S.subtract(w).rotate(90),!0),le=new ue(S.add(T).divide(2),T.subtract(S).rotate(90),!0),de=new ue(w,T),ve=de.getSide(S);if(O=ae.intersect(le,!0),!O){if(!ve)return this.lineTo(T);throw new Error("Cannot create an arc with the given arguments")}R=w.subtract(O),P=R.getDirectedAngle(T.subtract(O));var ye=de.getSide(O,!0);ye===0?P=ve*d(P):ve===ye&&(P+=P<0?360:-360)}if(P){for(var Ae=1e-5,Me=d(P),Be=Me>=360?4:Math.ceil((Me-Ae)/90),lt=P/Be,nt=lt*Math.PI/360,et=4/3*Math.sin(nt)/(1+Math.cos(nt)),Ze=[],vt=0;vt<=Be;vt++){var k=T,ot=null;if(vt<Be&&(ot=R.rotate(90).multiply(et),A?(k=A._transformPoint(R),ot=A._transformPoint(R.add(ot)).subtract(k)):k=O.add(R)),!vt)m.setHandleOut(ot);else{var Et=R.rotate(-90).multiply(et);A&&(Et=A._transformPoint(R.add(Et)).subtract(k)),Ze.push(new Le(k,Et,ot))}R=R.rotate(lt)}this._add(Ze)}},lineBy:function(){var h=I.read(arguments),d=u(this)._point;this.lineTo(d.add(h))},curveBy:function(){var h=arguments,d=I.read(h),g=I.read(h),m=o.read(h),w=u(this)._point;this.curveTo(w.add(d),w.add(g),m)},cubicCurveBy:function(){var h=arguments,d=I.read(h),g=I.read(h),m=I.read(h),w=u(this)._point;this.cubicCurveTo(w.add(d),w.add(g),w.add(m))},quadraticCurveBy:function(){var h=arguments,d=I.read(h),g=I.read(h),m=u(this)._point;this.quadraticCurveTo(m.add(d),m.add(g))},arcBy:function(){var h=arguments,d=u(this)._point,g=d.add(I.read(h)),m=o.pick(o.peek(h),!0);typeof m=="boolean"?this.arcTo(g,m):this.arcTo(g,d.add(I.read(h)))},closePath:function(h){this.setClosed(!0),this.join(this,h)}}},{_getBounds:function(u,h){var d=h.handle?"getHandleBounds":h.stroke?"getStrokeBounds":"getBounds";return Ne[d](this._segments,this._closed,this,u,h)},statics:{getBounds:function(u,h,d,g,m,w){var T=u[0];if(!T)return new z;var S=new Array(6),x=T._transformCoordinates(g,new Array(6)),N=x.slice(0,2),O=N.slice(),P=new Array(2);function R(W){W._transformCoordinates(g,S);for(var H=0;H<2;H++)xe._addBounds(x[H],x[H+4],S[H+2],S[H],H,w?w[H]:0,N,O,P);var V=x;x=S,S=V}for(var A=1,U=u.length;A<U;A++)R(u[A]);return h&&R(T),new z(N[0],N[1],O[0]-N[0],O[1]-N[1])},getStrokeBounds:function(u,h,d,g,m){var w=d.getStyle(),T=w.hasStroke(),S=w.getStrokeWidth(),x=T&&d._getStrokeMatrix(g,m),N=T&&Ne._getStrokePadding(S,x),O=Ne.getBounds(u,h,d,g,m,N);if(!T)return O;var P=S/2,R=w.getStrokeJoin(),A=w.getStrokeCap(),U=w.getMiterLimit(),W=new z(new D(N));function H($){O=O.include($)}function V($){O=O.unite(W.setCenter($._point.transform(g)))}function B($,X){X==="round"||$.isSmooth()?V($):Ne._addBevelJoin($,X,P,U,g,x,H)}function k($,X){X==="round"?V($):Ne._addSquareCap($,X,P,g,x,H)}var M=u.length-(h?0:1);if(M>0){for(var q=1;q<M;q++)B(u[q],R);h?B(u[0],R):(k(u[0],A),k(u[u.length-1],A))}return O},_getStrokePadding:function(u,h){if(!h)return[u,u];var d=new I(u,0).transform(h),g=new I(0,u).transform(h),m=d.getAngleInRadians(),w=d.getLength(),T=g.getLength(),S=Math.sin(m),x=Math.cos(m),N=Math.tan(m),O=Math.atan2(T*N,w),P=Math.atan2(T,N*w);return[Math.abs(w*Math.cos(O)*x+T*Math.sin(O)*S),Math.abs(T*Math.sin(P)*x+w*Math.cos(P)*S)]},_addBevelJoin:function(u,h,d,g,m,w,T,S){var x=u.getCurve(),N=x.getPrevious(),O=x.getPoint1().transform(m),P=N.getNormalAtTime(1).multiply(d).transform(w),R=x.getNormalAtTime(0).multiply(d).transform(w),A=P.getDirectedAngle(R);if((A<0||A>=180)&&(P=P.negate(),R=R.negate()),S&&T(O),T(O.add(P)),h==="miter"){var U=new ue(O.add(P),new I(-P.y,P.x),!0).intersect(new ue(O.add(R),new I(-R.y,R.x),!0),!0);U&&O.getDistance(U)<=g*d&&T(U)}T(O.add(R))},_addSquareCap:function(u,h,d,g,m,w,T){var S=u._point.transform(g),x=u.getLocation(),N=x.getNormal().multiply(x.getTime()===0?d:-d).transform(m);h==="square"&&(T&&(w(S.subtract(N)),w(S.add(N))),S=S.add(N.rotate(-90))),w(S.add(N)),w(S.subtract(N))},getHandleBounds:function(u,h,d,g,m){var w=d.getStyle(),T=m.stroke&&w.hasStroke(),S,x;if(T){var N=d._getStrokeMatrix(g,m),O=w.getStrokeWidth()/2,P=O;w.getStrokeJoin()==="miter"&&(P=O*w.getMiterLimit()),w.getStrokeCap()==="square"&&(P=Math.max(P,O*Math.SQRT2)),S=Ne._getStrokePadding(O,N),x=Ne._getStrokePadding(P,N)}for(var R=new Array(6),A=1/0,U=-A,W=A,H=U,V=0,B=u.length;V<B;V++){var k=u[V];k._transformCoordinates(g,R);for(var M=0;M<6;M+=2){var q=M?S:x,$=q?q[0]:0,X=q?q[1]:0,Q=R[M],J=R[M+1],ne=Q-$,se=Q+$,ie=J-X,ae=J+X;ne<A&&(A=ne),se>U&&(U=se),ie<W&&(W=ie),ae>H&&(H=ae)}}return new z(A,W,U-A,H-W)}}});Ne.inject({statics:new function(){var u=.5522847498307936,h=[new Le([-1,0],[0,u],[0,-u]),new Le([0,-1],[-u,0],[u,0]),new Le([1,0],[0,-u],[0,u]),new Le([0,1],[u,0],[-u,0])];function d(m,w,T){var S=o.getNamed(T),x=new Ne(S&&(S.insert==!0?fe.INSERT:S.insert==!1?fe.NO_INSERT:null));return x._add(m),x._closed=w,x.set(S,fe.INSERT)}function g(m,w,T){for(var S=new Array(4),x=0;x<4;x++){var N=h[x];S[x]=new Le(N._point.multiply(w).add(m),N._handleIn.multiply(w),N._handleOut.multiply(w))}return d(S,!0,T)}return{Line:function(){var m=arguments;return d([new Le(I.readNamed(m,"from")),new Le(I.readNamed(m,"to"))],!1,m)},Circle:function(){var m=arguments,w=I.readNamed(m,"center"),T=o.readNamed(m,"radius");return g(w,new D(T),m)},Rectangle:function(){var m=arguments,w=z.readNamed(m,"rectangle"),T=D.readNamed(m,"radius",0,{readNull:!0}),S=w.getBottomLeft(!0),x=w.getTopLeft(!0),N=w.getTopRight(!0),O=w.getBottomRight(!0),P;if(!T||T.isZero())P=[new Le(S),new Le(x),new Le(N),new Le(O)];else{T=D.min(T,w.getSize(!0).divide(2));var R=T.width,A=T.height,U=R*u,W=A*u;P=[new Le(S.add(R,0),null,[-U,0]),new Le(S.subtract(0,A),[0,W]),new Le(x.add(0,A),null,[0,-W]),new Le(x.add(R,0),[-U,0],null),new Le(N.subtract(R,0),null,[U,0]),new Le(N.add(0,A),[0,-W],null),new Le(O.subtract(0,A),null,[0,W]),new Le(O.subtract(R,0),[U,0])]}return d(P,!0,m)},RoundRectangle:"#Rectangle",Ellipse:function(){var m=arguments,w=Z._readEllipse(m);return g(w.center,w.radius,m)},Oval:"#Ellipse",Arc:function(){var m=arguments,w=I.readNamed(m,"from"),T=I.readNamed(m,"through"),S=I.readNamed(m,"to"),x=o.getNamed(m),N=new Ne(x&&x.insert==!1&&fe.NO_INSERT);return N.moveTo(w),N.arcTo(T,S),N.set(x)},RegularPolygon:function(){for(var m=arguments,w=I.readNamed(m,"center"),T=o.readNamed(m,"sides"),S=o.readNamed(m,"radius"),x=360/T,N=T%3===0,O=new I(0,N?-S:S),P=N?-1:.5,R=new Array(T),A=0;A<T;A++)R[A]=new Le(w.add(O.rotate((A+P)*x)));return d(R,!0,m)},Star:function(){for(var m=arguments,w=I.readNamed(m,"center"),T=o.readNamed(m,"points")*2,S=o.readNamed(m,"radius1"),x=o.readNamed(m,"radius2"),N=360/T,O=new I(0,-1),P=new Array(T),R=0;R<T;R++)P[R]=new Le(w.add(O.rotate(N*R).multiply(R%2?x:S)));return d(P,!0,m)}}}});var qe=Fe.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(h){this._children=[],this._namedChildren={},this._initialize(h)||(typeof h=="string"?this.setPathData(h):this.addChildren(Array.isArray(h)?h:arguments))},insertChildren:function u(h,d){var g=d,m=g[0];m&&typeof m[0]=="number"&&(g=[g]);for(var w=d.length-1;w>=0;w--){var T=g[w];g===d&&!(T instanceof Ne)&&(g=o.slice(g)),Array.isArray(T)?g[w]=new Ne({segments:T,insert:!1}):T instanceof qe&&(g.splice.apply(g,[w,1].concat(T.removeChildren())),T.remove())}return u.base.call(this,h,g)},reduce:function u(h){for(var d=this._children,g=d.length-1;g>=0;g--){var m=d[g].reduce(h);m.isEmpty()&&m.remove()}if(!d.length){var m=new Ne(fe.NO_INSERT);return m.copyAttributes(this),m.insertAbove(this),this.remove(),m}return u.base.call(this)},isClosed:function(){for(var u=this._children,h=0,d=u.length;h<d;h++)if(!u[h]._closed)return!1;return!0},setClosed:function(u){for(var h=this._children,d=0,g=h.length;d<g;d++)h[d].setClosed(u)},getFirstSegment:function(){var u=this.getFirstChild();return u&&u.getFirstSegment()},getLastSegment:function(){var u=this.getLastChild();return u&&u.getLastSegment()},getCurves:function(){for(var u=this._children,h=[],d=0,g=u.length;d<g;d++)o.push(h,u[d].getCurves());return h},getFirstCurve:function(){var u=this.getFirstChild();return u&&u.getFirstCurve()},getLastCurve:function(){var u=this.getLastChild();return u&&u.getLastCurve()},getArea:function(){for(var u=this._children,h=0,d=0,g=u.length;d<g;d++)h+=u[d].getArea();return h},getLength:function(){for(var u=this._children,h=0,d=0,g=u.length;d<g;d++)h+=u[d].getLength();return h},getPathData:function(u,h){for(var d=this._children,g=[],m=0,w=d.length;m<w;m++){var T=d[m],S=T._matrix;g.push(T.getPathData(u&&!S.isIdentity()?u.appended(S):u,h))}return g.join("")},_hitTestChildren:function u(h,d,g){return u.base.call(this,h,d.class===Ne||d.type==="path"?d:o.set({},d,{fill:!1}),g)},_draw:function(u,h,d,g){var m=this._children;if(m.length){h=h.extend({dontStart:!0,dontFinish:!0}),u.beginPath();for(var w=0,T=m.length;w<T;w++)m[w].draw(u,h,g);if(!h.clip){this._setStyles(u,h,d);var S=this._style;S.hasFill()&&(u.fill(S.getFillRule()),u.shadowColor="rgba(0,0,0,0)"),S.hasStroke()&&u.stroke()}}},_drawSelected:function(u,h,d){for(var g=this._children,m=0,w=g.length;m<w;m++){var T=g[m],S=T._matrix;d[T._id]||T._drawSelected(u,S.isIdentity()?h:h.appended(S))}}},new function(){function u(h,d){var g=h._children;if(d&&!g.length)throw new Error("Use a moveTo() command first");return g[g.length-1]}return o.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(h){this[h]=function(){var d=u(this,!0);d[h].apply(d,arguments)}},{moveTo:function(){var h=u(this),d=h&&h.isEmpty()?h:new Ne(fe.NO_INSERT);d!==h&&this.addChild(d),d.moveTo.apply(d,arguments)},moveBy:function(){var h=u(this,!0),d=h&&h.getLastSegment(),g=I.read(arguments);this.moveTo(d?g.add(d._point):g)},closePath:function(h){u(this,!0).closePath(h)}})},o.each(["reverse","flatten","simplify","smooth"],function(u){this[u]=function(h){for(var d=this._children,g,m=0,w=d.length;m<w;m++)g=d[m][u](h)||g;return g}},{}));Fe.inject(new function(){var u=Math.min,h=Math.max,d=Math.abs,g={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};function m(V){return V._children||[V]}function w(V,B){var k=V.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);if(B){for(var M=m(k),q=0,$=M.length;q<$;q++){var V=M[q];!V._closed&&!V.isEmpty()&&(V.closePath(1e-12),V.getFirstSegment().setHandleIn(0,0),V.getLastSegment().setHandleOut(0,0))}k=k.resolveCrossings().reorient(k.getFillRule()==="nonzero",!0)}return k}function T(V,B,k,M,q){var $=new qe(fe.NO_INSERT);return $.addChildren(V,!0),$=$.reduce({simplify:B}),q&&q.insert==!1||$.insertAbove(M&&k.isSibling(M)&&k.getIndex()<M.getIndex()?M:k),$.copyAttributes(k,!0),$}function S(V){return V.hasOverlap()||V.isCrossing()}function x(V,B,k,M){if(M&&(M.trace==!1||M.stroke)&&/^(subtract|intersect)$/.test(k))return N(V,B,k);var q=w(V,!0),$=B&&V!==B&&w(B,!0),X=g[k];X[k]=!0,$&&(X.subtract||X.exclude)^($.isClockwise()^q.isClockwise())&&$.reverse();var Q=A(_t.expand(q.getIntersections($,S))),J=m(q),ne=$&&m($),se=[],ie=[],ae;function le(ot){for(var Et=0,xt=ot.length;Et<xt;Et++){var Lt=ot[Et];o.push(se,Lt._segments),o.push(ie,Lt.getCurves()),Lt._overlapsOnly=!0}}function de(ot){for(var Et=[],xt=0,Lt=ot&&ot.length;xt<Lt;xt++)Et.push(ie[ot[xt]]);return Et}if(Q.length){le(J),ne&&le(ne);for(var ve=new Array(ie.length),ye=0,Ae=ie.length;ye<Ae;ye++)ve[ye]=ie[ye].getValues();for(var Me=v.findCurveBoundsCollisions(ve,ve,0,!0),Be={},ye=0;ye<ie.length;ye++){var lt=ie[ye],nt=lt._path._id,et=Be[nt]=Be[nt]||{};et[lt.getIndex()]={hor:de(Me[ye].hor),ver:de(Me[ye].ver)}}for(var ye=0,Ae=Q.length;ye<Ae;ye++)W(Q[ye]._segment,q,$,Be,X);for(var ye=0,Ae=se.length;ye<Ae;ye++){var Ze=se[ye],vt=Ze._intersection;Ze._winding||W(Ze,q,$,Be,X),vt&&vt._overlap||(Ze._path._overlapsOnly=!1)}ae=H(se,X)}else ae=R(ne?J.concat(ne):J.slice(),function(ot){return!!X[ot]});return T(ae,!0,V,B,M)}function N(V,B,k){var M=w(V),q=w(B),$=M.getIntersections(q,S),X=k==="subtract",Q=k==="divide",J={},ne=[];function se(le){if(!J[le._id]&&(Q||q.contains(le.getPointAt(le.getLength()/2))^X))return ne.unshift(le),J[le._id]=!0}for(var ie=$.length-1;ie>=0;ie--){var ae=$[ie].split();ae&&(se(ae)&&ae.getFirstSegment().setHandleIn(0,0),M.getLastSegment().setHandleOut(0,0))}return se(M),T(ne,!1,V,B)}function O(V,B){for(var k=V;k;){if(k===B)return;k=k._previous}for(;V._next&&V._next!==B;)V=V._next;if(!V._next){for(;B._previous;)B=B._previous;V._next=B,B._previous=V}}function P(V){for(var B=V.length-1;B>=0;B--)V[B].clearHandles()}function R(V,B,k){var M=V&&V.length;if(M){var q=o.each(V,function(Me,Be){this[Me._id]={container:null,winding:Me.isClockwise()?1:-1,index:Be}},{}),$=V.slice().sort(function(Me,Be){return d(Be.getArea())-d(Me.getArea())}),X=$[0],Q=v.findItemBoundsCollisions($,null,b.GEOMETRIC_EPSILON);k==null&&(k=X.isClockwise());for(var J=0;J<M;J++){var ne=$[J],se=q[ne._id],ie=0,ae=Q[J];if(ae){for(var le=null,de=ae.length-1;de>=0;de--)if(ae[de]<J){le=le||ne.getInteriorPoint();var ve=$[ae[de]];if(ve.contains(le)){var ye=q[ve._id];ie=ye.winding,se.winding+=ie,se.container=ye.exclude?ye.container:ve;break}}}if(B(se.winding)===B(ie))se.exclude=!0,V[se.index]=null;else{var Ae=se.container;ne.setClockwise(Ae?!Ae.isClockwise():k)}}}return V}function A(V,B,k){var M=B&&[],q=1e-8,$=1-q,X=!1,Q=k||[],J=k&&{},ne,se,ie;function ae(Et){return Et._path._id+"."+Et._segment1._index}for(var le=(k&&k.length)-1;le>=0;le--){var de=k[le];de._path&&(J[ae(de)]=!0)}for(var le=V.length-1;le>=0;le--){var ve=V[le],ye=ve._time,Ae=ye,Me=B&&!B(ve),de=ve._curve,Be;if(de&&(de!==se?(X=!de.hasHandles()||J&&J[ae(de)],ne=[],ie=null,se=de):ie>=q&&(ye/=ie)),Me){ne&&ne.push(ve);continue}else B&&M.unshift(ve);if(ie=Ae,ye<q)Be=de._segment1;else if(ye>$)Be=de._segment2;else{var lt=de.divideAtTime(ye,!0);X&&Q.push(de,lt),Be=lt._segment1;for(var nt=ne.length-1;nt>=0;nt--){var et=ne[nt];et._time=(et._time-ye)/(1-ye)}}ve._setSegment(Be);var Ze=Be._intersection,vt=ve._intersection;if(Ze){O(Ze,vt);for(var ot=Ze;ot;)O(ot._intersection,Ze),ot=ot._next}else Be._intersection=vt}return k||P(Q),M||V}function U(V,B,k,M,q){var $=Array.isArray(B)?B:B[k?"hor":"ver"],X=k?1:0,Q=X^1,J=[V.x,V.y],ne=J[X],se=J[Q],ie=1e-9,ae=1e-6,le=ne-ie,de=ne+ie,ve=0,ye=0,Ae=0,Me=0,Be=!1,lt=!1,nt=1,et=[],Ze,vt;function ot(Qt){var er=Qt[Q+0],Si=Qt[Q+6];if(!(se<u(er,Si)||se>h(er,Si))){var sn=Qt[X+0],ds=Qt[X+2],Po=Qt[X+4],Do=Qt[X+6];if(er===Si){(sn<de&&Do>le||Do<de&&sn>le)&&(Be=!0);return}var ps=se===er?0:se===Si||le>h(sn,ds,Po,Do)||de<u(sn,ds,Po,Do)?1:xe.solveCubic(Qt,Q,se,et,0,1)>0?et[0]:1,Vi=ps===0?sn:ps===1?Do:xe.getPoint(Qt,ps)[k?"y":"x"],uo=er>Si?1:-1,Ws=Ze[Q]>Ze[Q+6]?1:-1,Gs=Ze[X+6];return se!==er?(Vi<le?Ae+=uo:Vi>de?Me+=uo:Be=!0,Vi>ne-ae&&Vi<ne+ae&&(nt/=2)):(uo!==Ws?sn<le?Ae+=uo:sn>de&&(Me+=uo):sn!=Gs&&(Gs<de&&Vi>de?(Me+=uo,Be=!0):Gs>le&&Vi<le&&(Ae+=uo,Be=!0)),nt/=4),Ze=Qt,!q&&Vi>le&&Vi<de&&xe.getTangent(Qt,ps)[k?"x":"y"]===0&&U(V,B,!k,M,!0)}}function Et(Qt){var er=Qt[Q+0],Si=Qt[Q+2],sn=Qt[Q+4],ds=Qt[Q+6];if(se<=h(er,Si,sn,ds)&&se>=u(er,Si,sn,ds)){for(var Po=Qt[X+0],Do=Qt[X+2],ps=Qt[X+4],Vi=Qt[X+6],uo=le>h(Po,Do,ps,Vi)||de<u(Po,Do,ps,Vi)?[Qt]:xe.getMonoCurves(Qt,k),Ws,Gs=0,Zp=uo.length;Gs<Zp;Gs++)if(Ws=ot(uo[Gs]))return Ws}}for(var xt=0,Lt=$.length;xt<Lt;xt++){var Mt=$[xt],At=Mt._path,lr=Mt.getValues(),Zn;if((!xt||$[xt-1]._path!==At)&&(Ze=null,At._closed||(vt=xe.getValues(At.getLastCurve().getSegment2(),Mt.getSegment1(),null,!M),vt[Q]!==vt[Q+6]&&(Ze=vt)),!Ze)){Ze=lr;for(var wr=At.getLastCurve();wr&&wr!==Mt;){var Dn=wr.getValues();if(Dn[Q]!==Dn[Q+6]){Ze=Dn;break}wr=wr.getPrevious()}}if(Zn=Et(lr))return Zn;if(xt+1===Lt||$[xt+1]._path!==At){if(vt&&(Zn=Et(vt)))return Zn;Be&&!Ae&&!Me&&(Ae=Me=At.isClockwise(M)^k?1:-1),ve+=Ae,ye+=Me,Ae=Me=0,Be&&(lt=!0,Be=!1),vt=null}}return ve=d(ve),ye=d(ye),{winding:h(ve,ye),windingL:ve,windingR:ye,quality:nt,onPath:lt}}function W(V,B,k,M,q){var $=[],X=V,Q=0,ie;do{var J=V.getCurve();if(J){var ne=J.getLength();$.push({segment:V,curve:J,length:ne}),Q+=ne}V=V.getNext()}while(V&&!V._intersection&&V!==X);for(var se=[.5,.25,.75],ie={winding:0,quality:-1},ae=.001,le=1-ae,de=0;de<se.length&&ie.quality<.5;de++)for(var ne=Q*se[de],ve=0,ye=$.length;ve<ye;ve++){var Ae=$[ve],Me=Ae.length;if(ne<=Me){var J=Ae.curve,Be=J._path,lt=Be._parent,nt=lt instanceof qe?lt:Be,et=b.clamp(J.getTimeAt(ne),ae,le),Ze=J.getPointAtTime(et),vt=d(J.getTangentAtTime(et).y)<Math.SQRT1_2,ot=null;if(q.subtract&&k){var Et=nt===B?k:B,xt=Et._getWinding(Ze,vt,!0);if(nt===B&&xt.winding||nt===k&&!xt.winding){if(xt.quality<1)continue;ot={winding:0,quality:1}}}ot=ot||U(Ze,M[Be._id][J.getIndex()],vt,!0),ot.quality>ie.quality&&(ie=ot);break}ne-=Me}for(var ve=$.length-1;ve>=0;ve--)$[ve].segment._winding=ie}function H(V,B){var k=[],M;function q(Lt){var Mt;return!!(Lt&&!Lt._visited&&(!B||B[(Mt=Lt._winding||{}).winding]&&!(B.unite&&Mt.winding===2&&Mt.windingL&&Mt.windingR)))}function $(Lt){if(Lt){for(var Mt=0,At=M.length;Mt<At;Mt++)if(Lt===M[Mt])return!0}return!1}function X(Lt){for(var Mt=Lt._segments,At=0,lr=Mt.length;At<lr;At++)Mt[At]._visited=!0}function Q(Lt,Mt){var At=Lt._intersection,lr=At,Zn=[];Mt&&(M=[Lt]);function wr(Dn,Qt){for(;Dn&&Dn!==Qt;){var er=Dn._segment,Si=er&&er._path;if(Si){var sn=er.getNext()||Si.getFirstSegment(),ds=sn._intersection;er!==Lt&&($(er)||$(sn)||sn&&q(er)&&(q(sn)||ds&&q(ds._segment)))&&Zn.push(er),Mt&&M.push(er)}Dn=Dn._next}}if(At){for(wr(At);At&&At._previous;)At=At._previous;wr(At,lr)}return Zn}V.sort(function(Lt,Mt){var At=Lt._intersection,lr=Mt._intersection,Zn=!!(At&&At._overlap),wr=!!(lr&&lr._overlap),Dn=Lt._path,Qt=Mt._path;return Zn^wr?Zn?1:-1:!At^!lr?At?1:-1:Dn!==Qt?Dn._id-Qt._id:Lt._index-Mt._index});for(var J=0,ne=V.length;J<ne;J++){var se=V[J],ie=q(se),ae=null,le=!1,de=!0,ve=[],ye,Ae,Me;if(ie&&se._path._overlapsOnly){var Be=se._path,lt=se._intersection._segment._path;Be.compare(lt)&&(Be.getArea()&&k.push(Be.clone(!1)),X(Be),X(lt),ie=!1)}for(;ie;){var nt=!ae,et=Q(se,nt),Ze=et.shift(),le=!nt&&($(se)||$(Ze)),vt=!le&&Ze;if(nt&&(ae=new Ne(fe.NO_INSERT),ye=null),le){(se.isFirst()||se.isLast())&&(de=se._path._closed),se._visited=!0;break}if(vt&&ye&&(ve.push(ye),ye=null),ye||(vt&&et.push(se),ye={start:ae._segments.length,crossings:et,visited:Ae=[],handleIn:Me}),vt&&(se=Ze),!q(se)){ae.removeSegments(ye.start);for(var ot=0,Et=Ae.length;ot<Et;ot++)Ae[ot]._visited=!1;Ae.length=0;do se=ye&&ye.crossings.shift(),(!se||!se._path)&&(se=null,ye=ve.pop(),ye&&(Ae=ye.visited,Me=ye.handleIn));while(ye&&!q(se));if(!se)break}var xt=se.getNext();ae.add(new Le(se._point,Me,xt&&se._handleOut)),se._visited=!0,Ae.push(se),se=xt||se._path.getFirstSegment(),Me=xt&&xt._handleIn}le&&(de&&(ae.getFirstSegment().setHandleIn(Me),ae.setClosed(de)),ae.getArea()!==0&&k.push(ae))}return k}return{_getWinding:function(V,B,k){return U(V,this.getCurves(),B,k)},unite:function(V,B){return x(this,V,"unite",B)},intersect:function(V,B){return x(this,V,"intersect",B)},subtract:function(V,B){return x(this,V,"subtract",B)},exclude:function(V,B){return x(this,V,"exclude",B)},divide:function(V,B){return B&&(B.trace==!1||B.stroke)?N(this,V,"divide"):T([this.subtract(V,B),this.intersect(V,B)],!0,this,V,B)},resolveCrossings:function(){var V=this._children,B=V||[this];function k(ye,Ae){var Me=ye&&ye._intersection;return Me&&Me._overlap&&Me._path===Ae}var M=!1,q=!1,$=this.getIntersections(null,function(ye){return ye.hasOverlap()&&(M=!0)||ye.isCrossing()&&(q=!0)}),X=M&&q&&[];if($=_t.expand($),M)for(var Q=A($,function(ye){return ye.hasOverlap()},X),J=Q.length-1;J>=0;J--){var ne=Q[J],se=ne._path,ie=ne._segment,ae=ie.getPrevious(),le=ie.getNext();k(ae,se)&&k(le,se)&&(ie.remove(),ae._handleOut._set(0,0),le._handleIn._set(0,0),ae!==ie&&!ae.getCurve().hasLength()&&(le._handleIn.set(ae._handleIn),ae.remove()))}q&&(A($,M&&function(ye){var Ae=ye.getCurve(),Me=ye.getSegment(),Be=ye._intersection,lt=Be._curve,nt=Be._segment;if(Ae&&lt&&Ae._path&&lt._path)return!0;Me&&(Me._intersection=null),nt&&(nt._intersection=null)},X),X&&P(X),B=H(o.each(B,function(ye){o.push(this,ye._segments)},[])));var de=B.length,ve;return de>1&&V?(B!==V&&this.setChildren(B),ve=this):de===1&&!V&&(B[0]!==this&&this.setSegments(B[0].removeSegments()),ve=this),ve||(ve=new qe(fe.NO_INSERT),ve.addChildren(B),ve=ve.reduce(),ve.copyAttributes(this),this.replaceWith(ve)),ve},reorient:function(V,B){var k=this._children;return k&&k.length?this.setChildren(R(this.removeChildren(),function(M){return!!(V?M:M&1)},B)):B!==n&&this.setClockwise(B),this},getInteriorPoint:function(){var V=this.getBounds(),B=V.getCenter(!0);if(!this.contains(B)){for(var k=this.getCurves(),M=B.y,q=[],$=[],X=0,Q=k.length;X<Q;X++){var J=k[X].getValues(),ne=J[1],se=J[3],ie=J[5],ae=J[7];if(M>=u(ne,se,ie,ae)&&M<=h(ne,se,ie,ae))for(var le=xe.getMonoCurves(J),de=0,ve=le.length;de<ve;de++){var ye=le[de],Ae=ye[1],Me=ye[7];if(Ae!==Me&&(M>=Ae&&M<=Me||M>=Me&&M<=Ae)){var Be=M===Ae?ye[0]:M===Me?ye[6]:xe.solveCubic(ye,1,M,$,0,1)===1?xe.getPoint(ye,$[0]).x:(ye[0]+ye[6])/2;q.push(Be)}}}q.length>1&&(q.sort(function(lt,nt){return lt-nt}),B.x=(q[0]+q[1])/2)}return B}}});var Ct=o.extend({_class:"PathFlattener",initialize:function(u,h,d,g,m){var w=[],T=[],S=0,x=1/(d||32),N=u._segments,O=N[0],P;function R(H,V){var B=xe.getValues(H,V,m);w.push(B),A(B,H._index,0,1)}function A(H,V,B,k){if(k-B>x&&!(g&&xe.isStraight(H))&&!xe.isFlatEnough(H,h||.25)){var M=xe.subdivide(H,.5),q=(B+k)/2;A(M[0],V,B,q),A(M[1],V,q,k)}else{var $=H[6]-H[0],X=H[7]-H[1],Q=Math.sqrt($*$+X*X);Q>0&&(S+=Q,T.push({offset:S,curve:H,index:V,time:k}))}}for(var U=1,W=N.length;U<W;U++)P=N[U],R(O,P),O=P;u._closed&&R(P||O,N[0]),this.curves=w,this.parts=T,this.length=S,this.index=0},_get:function(u){for(var h=this.parts,d=h.length,g,m=this.index;g=m,!(!m||h[--m].offset<u););for(;g<d;g++){var w=h[g];if(w.offset>=u){this.index=g;var T=h[g-1],S=T&&T.index===w.index?T.time:0,x=T?T.offset:0;return{index:w.index,time:S+(w.time-S)*(u-x)/(w.offset-x)}}}return{index:h[d-1].index,time:1}},drawPart:function(u,h,d){for(var g=this._get(h),m=this._get(d),w=g.index,T=m.index;w<=T;w++){var S=xe.getPart(this.curves[w],w===g.index?g.time:0,w===m.index?m.time:1);w===g.index&&u.moveTo(S[0],S[1]),u.bezierCurveTo.apply(u,S.slice(2))}}},o.each(xe._evaluateMethods,function(u){this[u+"At"]=function(h){var d=this._get(h);return xe[u](this.curves[d.index],d.time)}},{})),tt=o.extend({initialize:function(u){for(var h=this.points=[],d=u._segments,g=u._closed,m=0,w,T=d.length;m<T;m++){var S=d[m].point;(!w||!w.equals(S))&&h.push(w=S.clone())}g&&(h.unshift(h[h.length-1]),h.push(h[1])),this.closed=g},fit:function(u){var h=this.points,d=h.length,g=null;return d>0&&(g=[new Le(h[0])],d>1&&(this.fitCubic(g,u,0,d-1,h[1].subtract(h[0]),h[d-2].subtract(h[d-1])),this.closed&&(g.shift(),g.pop()))),g},fitCubic:function(u,h,d,g,m,w){var T=this.points;if(g-d===1){var S=T[d],x=T[g],N=S.getDistance(x)/3;this.addCurve(u,[S,S.add(m.normalize(N)),x.add(w.normalize(N)),x]);return}for(var O=this.chordLengthParameterize(d,g),P=Math.max(h,h*h),R,A=!0,U=0;U<=4;U++){var W=this.generateBezier(d,g,O,m,w),H=this.findMaxError(d,g,W,O);if(H.error<h&&A){this.addCurve(u,W);return}if(R=H.index,H.error>=P)break;A=this.reparameterize(d,g,O,W),P=H.error}var V=T[R-1].subtract(T[R+1]);this.fitCubic(u,h,d,R,m,V),this.fitCubic(u,h,R,g,V.negate(),w)},addCurve:function(u,h){var d=u[u.length-1];d.setHandleOut(h[1].subtract(h[0])),u.push(new Le(h[3],h[2].subtract(h[3])))},generateBezier:function(u,h,d,g,m){for(var w=1e-12,T=Math.abs,S=this.points,x=S[u],N=S[h],O=[[0,0],[0,0]],P=[0,0],R=0,A=h-u+1;R<A;R++){var U=d[R],W=1-U,H=3*U*W,V=W*W*W,B=H*W,k=H*U,M=U*U*U,q=g.normalize(B),$=m.normalize(k),X=S[u+R].subtract(x.multiply(V+B)).subtract(N.multiply(k+M));O[0][0]+=q.dot(q),O[0][1]+=q.dot($),O[1][0]=O[0][1],O[1][1]+=$.dot($),P[0]+=q.dot(X),P[1]+=$.dot(X)}var Q=O[0][0]*O[1][1]-O[1][0]*O[0][1],J,ne;if(T(Q)>w){var se=O[0][0]*P[1]-O[1][0]*P[0],ie=P[0]*O[1][1]-P[1]*O[0][1];J=ie/Q,ne=se/Q}else{var ae=O[0][0]+O[0][1],le=O[1][0]+O[1][1];J=ne=T(ae)>w?P[0]/ae:T(le)>w?P[1]/le:0}var de=N.getDistance(x),ve=w*de,ye,Ae;if(J<ve||ne<ve)J=ne=de/3;else{var Me=N.subtract(x);ye=g.normalize(J),Ae=m.normalize(ne),ye.dot(Me)-Ae.dot(Me)>de*de&&(J=ne=de/3,ye=Ae=null)}return[x,x.add(ye||g.normalize(J)),N.add(Ae||m.normalize(ne)),N]},reparameterize:function(u,h,d,g){for(var m=u;m<=h;m++)d[m-u]=this.findRoot(g,this.points[m],d[m-u]);for(var m=1,w=d.length;m<w;m++)if(d[m]<=d[m-1])return!1;return!0},findRoot:function(u,h,d){for(var g=[],m=[],w=0;w<=2;w++)g[w]=u[w+1].subtract(u[w]).multiply(3);for(var w=0;w<=1;w++)m[w]=g[w+1].subtract(g[w]).multiply(2);var T=this.evaluate(3,u,d),S=this.evaluate(2,g,d),x=this.evaluate(1,m,d),N=T.subtract(h),O=S.dot(S)+N.dot(x);return b.isMachineZero(O)?d:d-N.dot(S)/O},evaluate:function(u,h,d){for(var g=h.slice(),m=1;m<=u;m++)for(var w=0;w<=u-m;w++)g[w]=g[w].multiply(1-d).add(g[w+1].multiply(d));return g[0]},chordLengthParameterize:function(u,h){for(var d=[0],g=u+1;g<=h;g++)d[g-u]=d[g-u-1]+this.points[g].getDistance(this.points[g-1]);for(var g=1,m=h-u;g<=m;g++)d[g]/=d[m];return d},findMaxError:function(u,h,d,g){for(var m=Math.floor((h-u+1)/2),w=0,T=u+1;T<h;T++){var S=this.evaluate(3,d,g[T-u]),x=S.subtract(this.points[T]),N=x.x*x.x+x.y*x.y;N>=w&&(w=N,m=T)}return{error:w,index:m}}}),Xt=fe.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(h){this._content="",this._lines=[];var d=h&&o.isPlainObject(h)&&h.x===n&&h.y===n;this._initialize(d&&h,!d&&I.read(arguments))},_equals:function(u){return this._content===u._content},copyContent:function(u){this.setContent(u._content)},getContent:function(){return this._content},setContent:function(u){this._content=""+u,this._lines=this._content.split(/\r\n|\n|\r/mg),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),Nt=Xt.extend({_class:"PointText",initialize:function(){Xt.apply(this,arguments)},getPoint:function(){var u=this._matrix.getTranslation();return new L(u.x,u.y,this,"setPoint")},setPoint:function(){var u=I.read(arguments);this.translate(u.subtract(this._matrix.getTranslation()))},_draw:function(u,h,d){if(this._content){this._setStyles(u,h,d);var g=this._lines,m=this._style,w=m.hasFill(),T=m.hasStroke(),S=m.getLeading(),x=u.shadowColor;u.font=m.getFontStyle(),u.textAlign=m.getJustification();for(var N=0,O=g.length;N<O;N++){u.shadowColor=x;var P=g[N];w&&(u.fillText(P,0,0),u.shadowColor="rgba(0,0,0,0)"),T&&u.strokeText(P,0,0),u.translate(0,S)}}},_getBounds:function(u,h){var d=this._style,g=this._lines,m=g.length,w=d.getJustification(),T=d.getLeading(),S=this.getView().getTextWidth(d.getFontStyle(),g),x=0;w!=="left"&&(x-=S/(w==="center"?2:1));var N=new z(x,m?-.75*T:0,S,m*T);return u?u._transformBounds(N,N):N}}),Wt=o.extend(new function(){var u={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},h={},d={transparent:[0,0,0,0]},g;function m(S){var x=S.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||S.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),N="rgb",O;if(x){var P=x[4]?4:3;O=new Array(P);for(var R=0;R<P;R++){var A=x[R+1];O[R]=parseInt(A.length==1?A+A:A,16)/255}}else if(x=S.match(/^(rgb|hsl)a?\((.*)\)$/)){N=x[1],O=x[2].trim().split(/[,\s]+/g);for(var U=N==="hsl",R=0,W=Math.min(O.length,4);R<W;R++){var H=O[R],A=parseFloat(H);if(U)if(R===0){var V=H.match(/([a-z]*)$/)[1];A*={turn:360,rad:180/Math.PI,grad:.9}[V]||1}else R<3&&(A/=100);else R<3&&(A/=/%$/.test(H)?100:255);O[R]=A}}else{var B=d[S];if(!B)if(r){g||(g=xn.getContext(1,1,{willReadFrequently:!0}),g.globalCompositeOperation="copy"),g.fillStyle="rgba(0,0,0,0)",g.fillStyle=S,g.fillRect(0,0,1,1);var k=g.getImageData(0,0,1,1).data;B=d[S]=[k[0]/255,k[1]/255,k[2]/255]}else B=[0,0,0];O=B.slice()}return[N,O]}var w=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],T={"rgb-hsb":function(S,x,N){var O=Math.max(S,x,N),P=Math.min(S,x,N),R=O-P,A=R===0?0:(O==S?(x-N)/R+(x<N?6:0):O==x?(N-S)/R+2:(S-x)/R+4)*60;return[A,O===0?0:R/O,O]},"hsb-rgb":function(S,x,N){S=(S/60%6+6)%6;var P=Math.floor(S),O=S-P,P=w[P],R=[N,N*(1-x),N*(1-x*O),N*(1-x*(1-O))];return[R[P[0]],R[P[1]],R[P[2]]]},"rgb-hsl":function(S,x,N){var O=Math.max(S,x,N),P=Math.min(S,x,N),R=O-P,A=R===0,U=A?0:(O==S?(x-N)/R+(x<N?6:0):O==x?(N-S)/R+2:(S-x)/R+4)*60,W=(O+P)/2,H=A?0:W<.5?R/(O+P):R/(2-O-P);return[U,H,W]},"hsl-rgb":function(S,x,N){if(S=(S/360%1+1)%1,x===0)return[N,N,N];for(var O=[S+1/3,S,S-1/3],P=N<.5?N*(1+x):N+x-N*x,R=2*N-P,A=[],U=0;U<3;U++){var W=O[U];W<0&&(W+=1),W>1&&(W-=1),A[U]=6*W<1?R+(P-R)*6*W:2*W<1?P:3*W<2?R+(P-R)*(2/3-W)*6:R}return A},"rgb-gray":function(S,x,N){return[S*.2989+x*.587+N*.114]},"gray-rgb":function(S){return[S,S,S]},"gray-hsb":function(S){return[0,0,S]},"gray-hsl":function(S){return[0,0,S]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return o.each(u,function(S,x){h[x]=[],o.each(S,function(N,O){var P=o.capitalize(N),R=/^(hue|saturation)$/.test(N),A=h[x][O]=x==="gradient"?N==="gradient"?function(U){var W=this._components[0];return U=Pn.read(Array.isArray(U)?U:arguments,0,{readNull:!0}),W!==U&&(W&&W._removeOwner(this),U&&U._addOwner(this)),U}:function(){return I.read(arguments,0,{readNull:N==="highlight",clone:!0})}:function(U){return U==null||isNaN(U)?0:+U};this["get"+P]=function(){return this._type===x||R&&/^hs[bl]$/.test(this._type)?this._components[O]:this._convert(x)[O]},this["set"+P]=function(U){this._type!==x&&!(R&&/^hs[bl]$/.test(this._type))&&(this._components=this._convert(x),this._properties=u[x],this._type=x),this._components[O]=A.call(this,U),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function S(x){var N=arguments,O=this.__read,P=0,R,A,U,W;Array.isArray(x)&&(N=x,x=N[0]);var H=x!=null&&typeof x;if(H==="string"&&x in u&&(R=x,x=N[1],Array.isArray(x)?(A=x,U=N[2]):(O&&(P=1),N=o.slice(N,1),H=typeof x)),!A){if(W=H==="number"?N:H==="object"&&x.length!=null?x:null,W){R||(R=W.length>=3?"rgb":"gray");var V=u[R].length;U=W[V],O&&(P+=W===arguments?V+(U!=null?1:0):1),W.length>V&&(W=o.slice(W,0,V))}else if(H==="string"){var B=m(x);R=B[0],A=B[1],A.length===4&&(U=A[3],A.length--)}else if(H==="object")if(x.constructor===S){if(R=x._type,A=x._components.slice(),U=x._alpha,R==="gradient")for(var k=1,M=A.length;k<M;k++){var q=A[k];q&&(A[k]=q.clone())}}else if(x.constructor===Pn)R="gradient",W=N;else{R="hue"in x?"lightness"in x?"hsl":"hsb":"gradient"in x||"stops"in x||"radial"in x?"gradient":"gray"in x?"gray":"rgb";var $=u[R],X=h[R];this._components=A=[];for(var k=0,M=$.length;k<M;k++){var Q=x[$[k]];Q==null&&!k&&R==="gradient"&&"stops"in x&&(Q={stops:x.stops,radial:x.radial}),Q=X[k].call(this,Q),Q!=null&&(A[k]=Q)}U=x.alpha}O&&R&&(P=1)}if(this._type=R||"rgb",!A){this._components=A=[];for(var X=h[this._type],k=0,M=X.length;k<M;k++){var Q=X[k].call(this,W&&W[k]);Q!=null&&(A[k]=Q)}}return this._components=A,this._properties=u[this._type],this._alpha=U,O&&(this.__read=P),this},set:"#initialize",_serialize:function(S,x){var N=this.getComponents();return o.serialize(/^(gray|rgb)$/.test(this._type)?N:[this._type].concat(N),S,!0,x)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(S){var x;return this._type===S?this._components.slice():(x=T[this._type+"-"+S])?x.apply(this,this._components):T["rgb-"+S].apply(this,T[this._type+"-rgb"].apply(this,this._components))},convert:function(S){return new Wt(S,this._convert(S),this._alpha)},getType:function(){return this._type},setType:function(S){this._components=this._convert(S),this._properties=u[S],this._type=S},getComponents:function(){var S=this._components.slice();return this._alpha!=null&&S.push(this._alpha),S},getAlpha:function(){return this._alpha!=null?this._alpha:1},setAlpha:function(S){this._alpha=S==null?null:Math.min(Math.max(S,0),1),this._changed()},hasAlpha:function(){return this._alpha!=null},equals:function(S){var x=o.isPlainValue(S,!0)?Wt.read(arguments):S;return x===this||x&&this._class===x._class&&this._type===x._type&&this.getAlpha()===x.getAlpha()&&o.equals(this._components,x._components)||!1},toString:function(){for(var S=this._properties,x=[],N=this._type==="gradient",O=y.instance,P=0,R=S.length;P<R;P++){var A=this._components[P];A!=null&&x.push(S[P]+": "+(N?A:O.number(A)))}return this._alpha!=null&&x.push("alpha: "+O.number(this._alpha)),"{ "+x.join(", ")+" }"},toCSS:function(S){var x=this._convert("rgb"),N=S||this._alpha==null?1:this._alpha;function O(P){return Math.round((P<0?0:P>1?1:P)*255)}return x=[O(x[0]),O(x[1]),O(x[2])],N<1&&x.push(N<0?0:N),S?"#"+((1<<24)+(x[0]<<16)+(x[1]<<8)+x[2]).toString(16).slice(1):(x.length==4?"rgba(":"rgb(")+x.join(",")+")"},toCanvasStyle:function(S,x){if(this._canvasStyle)return this._canvasStyle;if(this._type!=="gradient")return this._canvasStyle=this.toCSS();var N=this._components,O=N[0],P=O._stops,R=N[1],A=N[2],U=N[3],W=x&&x.inverted(),H;if(W&&(R=W._transformPoint(R),A=W._transformPoint(A),U&&(U=W._transformPoint(U))),O._radial){var V=A.getDistance(R);if(U){var B=U.subtract(R);B.getLength()>V&&(U=R.add(B.normalize(V-.1)))}var k=U||R;H=S.createRadialGradient(k.x,k.y,0,R.x,R.y,V)}else H=S.createLinearGradient(R.x,R.y,A.x,A.y);for(var M=0,q=P.length;M<q;M++){var $=P[M],X=$._offset;H.addColorStop(X??M/(q-1),$._color.toCanvasStyle())}return this._canvasStyle=H},transform:function(S){if(this._type==="gradient"){for(var x=this._components,N=1,O=x.length;N<O;N++){var P=x[N];S._transformPoint(P,P,!0)}this._changed()}},statics:{_types:u,random:function(){var S=Math.random;return new Wt(S(),S(),S())},_setOwner:function(S,x,N){return S&&(S._owner&&x&&S._owner!==x&&(S=S.clone()),!S._owner^!x&&(S._owner=x||null,S._setter=N||null)),S}}})},new function(){var u={add:function(h,d){return h+d},subtract:function(h,d){return h-d},multiply:function(h,d){return h*d},divide:function(h,d){return h/d}};return o.each(u,function(h,d){this[d]=function(g){g=Wt.read(arguments);for(var m=this._type,w=this._components,T=g._convert(m),S=0,x=w.length;S<x;S++)T[S]=h(w[S],T[S]);return new Wt(m,T,this._alpha!=null?h(this._alpha,g.getAlpha()):null)}},{})}),Pn=o.extend({_class:"Gradient",initialize:function(h,d){this._id=E.get(),h&&o.isPlainObject(h)&&(this.set(h),h=d=null),this._stops==null&&this.setStops(h||["white","black"]),this._radial==null&&this.setRadial(typeof d=="string"&&d==="radial"||d||!1)},_serialize:function(u,h){return h.add(this,function(){return o.serialize([this._stops,this._radial],u,!0,h)})},_changed:function(){for(var u=0,h=this._owners&&this._owners.length;u<h;u++)this._owners[u]._changed()},_addOwner:function(u){this._owners||(this._owners=[]),this._owners.push(u)},_removeOwner:function(u){var h=this._owners?this._owners.indexOf(u):-1;h!=-1&&(this._owners.splice(h,1),this._owners.length||(this._owners=n))},clone:function(){for(var u=[],h=0,d=this._stops.length;h<d;h++)u[h]=this._stops[h].clone();return new Pn(u,this._radial)},getStops:function(){return this._stops},setStops:function(u){if(u.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var h=this._stops;if(h)for(var d=0,g=h.length;d<g;d++)h[d]._owner=n;h=this._stops=Dt.readList(u,0,{clone:!0});for(var d=0,g=h.length;d<g;d++)h[d]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(u){this._radial=u,this._changed()},equals:function(u){if(u===this)return!0;if(u&&this._class===u._class){var h=this._stops,d=u._stops,g=h.length;if(g===d.length){for(var m=0;m<g;m++)if(!h[m].equals(d[m]))return!1;return!0}}return!1}}),Dt=o.extend({_class:"GradientStop",initialize:function(h,d){var g=h,m=d;typeof h=="object"&&d===n&&(Array.isArray(h)&&typeof h[0]!="number"?(g=h[0],m=h[1]):("color"in h||"offset"in h||"rampPoint"in h)&&(g=h.color,m=h.offset||h.rampPoint||0)),this.setColor(g),this.setOffset(m)},clone:function(){return new Dt(this._color.clone(),this._offset)},_serialize:function(u,h){var d=this._color,g=this._offset;return o.serialize(g==null?[d]:[d,g],u,!0,h)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(u){this._offset=u,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){Wt._setOwner(this._color,null),this._color=Wt._setOwner(Wt.read(arguments,0),this,"setColor"),this._changed()},equals:function(u){return u===this||u&&this._class===u._class&&this._color.equals(u._color)&&this._offset==u._offset||!1}}),qs=o.extend(new function(){var u={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new I,selectedColor:null},h=o.set({},u,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),d=o.set({},h,{fillColor:new Wt}),g={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},m={beans:!0},w={_class:"Style",beans:!0,initialize:function(S,x,N){this._values={},this._owner=x,this._project=x&&x._project||N||Ot.project,this._defaults=!x||x instanceof me?h:x instanceof Xt?d:u,S&&this.set(S)}};return o.each(h,function(T,S){var x=/Color$/.test(S),N=S==="shadowOffset",O=o.capitalize(S),P=g[S],R="set"+O,A="get"+O;w[R]=function(U){var W=this._owner,H=W&&W._children,V=H&&H.length>0&&!(W instanceof qe);if(V)for(var B=0,k=H.length;B<k;B++)H[B]._style[R](U);if((S==="selectedColor"||!V)&&S in this._defaults){var M=this._values[S];M!==U&&(x&&(M&&(Wt._setOwner(M,null),M._canvasStyle=null),U&&U.constructor===Wt&&(U=Wt._setOwner(U,W,V&&R))),this._values[S]=U,W&&W._changed(P||129))}},w[A]=function(U){var W=this._owner,H=W&&W._children,V=H&&H.length>0&&!(W instanceof qe),B;if(V&&!U)for(var k=0,M=H.length;k<M;k++){var q=H[k]._style[A]();if(!k)B=q;else if(!o.equals(B,q))return n}else if(S in this._defaults){var B=this._values[S];if(B===n)B=this._defaults[S],B&&B.clone&&(B=B.clone());else{var $=x?Wt:N?I:null;$&&!(B&&B.constructor===$)&&(this._values[S]=B=$.read([B],0,{readNull:!0,clone:!0}))}}return B&&x&&(B=Wt._setOwner(B,W,V&&R)),B},m[A]=function(U){return this._style[A](U)},m[R]=function(U){this._style[R](U)}}),o.each({Font:"FontFamily",WindingRule:"FillRule"},function(T,S){var x="get"+S,N="set"+S;w[x]=m[x]="#get"+T,w[N]=m[N]="#set"+T}),fe.inject(m),w},{set:function(u){var h=u instanceof qs,d=h?u._values:u;if(d){for(var g in d)if(g in this._defaults){var m=d[g];this[g]=m&&h&&m.clone?m.clone():m}}},equals:function(u){function h(d,g,m){var w=d._values,T=g._values,S=g._defaults;for(var x in w){var N=w[x],O=T[x];if(!(m&&x in T)&&!o.equals(N,O===n?S[x]:O))return!1}return!0}return u===this||u&&this._class===u._class&&h(this,u)&&h(u,this,!0)||!1},_dispose:function(){var u;u=this.getFillColor(),u&&(u._canvasStyle=null),u=this.getStrokeColor(),u&&(u._canvasStyle=null),u=this.getShadowColor(),u&&(u._canvasStyle=null)},hasFill:function(){var u=this.getFillColor();return!!u&&u.alpha>0},hasStroke:function(){var u=this.getStrokeColor();return!!u&&u.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var u=this.getShadowColor();return!!u&&u.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var u=this.getFontSize();return this.getFontWeight()+" "+u+(/[a-z]/i.test(u+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function u(){var h=u.base.call(this),d=this.getFontSize();return/pt|em|%|px/.test(d)&&(d=this.getView().getPixelSize(d)),h??d*1.2}}),ce=new function(){function u(h,d,g,m){for(var w=["","webkit","moz","Moz","ms","o"],T=d[0].toUpperCase()+d.substring(1),S=0;S<6;S++){var x=w[S],N=x?x+T:d;if(N in h){if(g)h[N]=m;else return h[N];break}}}return{getStyles:function(h){var d=h&&h.nodeType!==9?h.ownerDocument:h,g=d&&d.defaultView;return g&&g.getComputedStyle(h,"")},getBounds:function(h,d){var g=h.ownerDocument,m=g.body,w=g.documentElement,T;try{T=h.getBoundingClientRect()}catch{T={left:0,top:0,width:0,height:0}}var S=T.left-(w.clientLeft||m.clientLeft||0),x=T.top-(w.clientTop||m.clientTop||0);if(!d){var N=g.defaultView;S+=N.pageXOffset||w.scrollLeft||m.scrollLeft,x+=N.pageYOffset||w.scrollTop||m.scrollTop}return new z(S,x,T.width,T.height)},getViewportBounds:function(h){var d=h.ownerDocument,g=d.defaultView,m=d.documentElement;return new z(0,0,g.innerWidth||m.clientWidth,g.innerHeight||m.clientHeight)},getOffset:function(h,d){return ce.getBounds(h,d).getPoint()},getSize:function(h){return ce.getBounds(h,!0).getSize()},isInvisible:function(h){return ce.getSize(h).equals(new D(0,0))},isInView:function(h){return!ce.isInvisible(h)&&ce.getViewportBounds(h).intersects(ce.getBounds(h,!0))},isInserted:function(h){return i.body.contains(h)},getPrefixed:function(h,d){return h&&u(h,d)},setPrefixed:function(h,d,g){if(typeof d=="object")for(var m in d)u(h,m,!0,d[m]);else u(h,d,!0,g)}}},ge={add:function(u,h){if(u)for(var d in h)for(var g=h[d],m=d.split(/[\s,]+/g),w=0,T=m.length;w<T;w++){var S=m[w],x=u===i&&(S==="touchstart"||S==="touchmove")?{passive:!1}:!1;u.addEventListener(S,g,x)}},remove:function(u,h){if(u)for(var d in h)for(var g=h[d],m=d.split(/[\s,]+/g),w=0,T=m.length;w<T;w++)u.removeEventListener(m[w],g,!1)},getPoint:function(u){var h=u.targetTouches?u.targetTouches.length?u.targetTouches[0]:u.changedTouches[0]:u;return new I(h.pageX||h.clientX+i.documentElement.scrollLeft,h.pageY||h.clientY+i.documentElement.scrollTop)},getTarget:function(u){return u.target||u.srcElement},getRelatedTarget:function(u){return u.relatedTarget||u.toElement},getOffset:function(u,h){return ge.getPoint(u).subtract(ce.getOffset(h||ge.getTarget(u)))}};ge.requestAnimationFrame=new function(){var u=ce.getPrefixed(r,"requestAnimationFrame"),h=!1,d=[],g;function m(){var w=d;d=[];for(var T=0,S=w.length;T<S;T++)w[T]();h=u&&d.length,h&&u(m)}return function(w){d.push(w),u?h||(u(m),h=!0):g||(g=setInterval(m,1e3/60))}};var _e=o.extend(a,{_class:"View",initialize:function u(h,d){function g(P){return d[P]||parseInt(d.getAttribute(P),10)}function m(){var P=ce.getSize(d);return P.isNaN()||P.isZero()?new D(g("width"),g("height")):P}var w;if(r&&d){this._id=d.getAttribute("id"),this._id==null&&d.setAttribute("id",this._id="paper-view-"+u._id++),ge.add(d,this._viewEvents);var T="none";if(ce.setPrefixed(d.style,{userDrag:T,userSelect:T,touchCallout:T,contentZooming:T,tapHighlightColor:"rgba(0,0,0,0)"}),c.hasAttribute(d,"resize")){var S=this;ge.add(r,this._windowEvents={resize:function(){S.setViewSize(m())}})}if(w=m(),c.hasAttribute(d,"stats")&&typeof Stats<"u"){this._stats=new Stats;var x=this._stats.domElement,N=x.style,O=ce.getOffset(d);N.position="absolute",N.left=O.x+"px",N.top=O.y+"px",i.body.appendChild(x)}}else w=new D(d),d=null;this._project=h,this._scope=h._scope,this._element=d,this._pixelRatio||(this._pixelRatio=r&&r.devicePixelRatio||1),this._setElementSize(w.width,w.height),this._viewSize=w,u._views.push(this),u._viewsById[this._id]=this,(this._matrix=new K)._owner=this,u._focused||(u._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!Ot.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;_e._focused===this&&(_e._focused=null),_e._views.splice(_e._views.indexOf(this),1),delete _e._viewsById[this._id];var u=this._project;return u._view===this&&(u._view=null),ge.remove(this._element,this._viewEvents),ge.remove(r,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:o.each(fe._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(u){this[u]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(u){this._autoUpdate=u,u&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var u=this;ge.requestAnimationFrame(function(){if(u._requested=!1,u._animate){u.requestUpdate();var h=u._element;(!ce.getPrefixed(i,"hidden")||c.getAttribute(h,"keepalive")==="true")&&ce.isInView(h)&&u._handleFrame()}u._autoUpdate&&u.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){Ot=this._scope;var u=Date.now()/1e3,h=this._last?u-this._last:0;this._last=u,this.emit("frame",new o({delta:h,time:this._time+=h,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(u,h){var d=this._frameItems;h?(d[u._id]={item:u,time:0,count:0},++this._frameItemCount===1&&this.on("frame",this._handleFrameItems)):(delete d[u._id],--this._frameItemCount===0&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(u){for(var h in this._frameItems){var d=this._frameItems[h];d.item.emit("frame",new o(u,{time:d.time+=u.delta,count:d.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=n},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return this._pixelRatio*72},getViewSize:function(){var u=this._viewSize;return new te(u.width,u.height,this,"setViewSize")},setViewSize:function(){var u=D.read(arguments),h=u.subtract(this._viewSize);h.isZero()||(this._setElementSize(u.width,u.height),this._viewSize.set(u),this._changed(),this.emit("resize",{size:u,delta:h}),this._autoUpdate&&this.update())},_setElementSize:function(u,h){var d=this._element;d&&(d.width!==u&&(d.width=u),d.height!==h&&(d.height=h))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new z(new I,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return ce.isInView(this._element)},isInserted:function(){return ce.isInserted(this._element)},getPixelSize:function(u){var h=this._element,d;if(h){var g=h.parentNode,m=i.createElement("div");m.style.fontSize=u,g.appendChild(m),d=parseFloat(ce.getStyles(m).fontSize),g.removeChild(m)}else d=parseFloat(d);return d},getTextWidth:function(u,h){return 0}},o.each(["rotate","scale","shear","skew"],function(u){var h=u==="rotate";this[u]=function(){var d=arguments,g=(h?o:I).read(d),m=I.read(d,0,{readNull:!0});return this.transform(new K()[u](g,m||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var u=new K;return this.transform(u.translate.apply(u,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var u=I.read(arguments);this.translate(this.getCenter().subtract(u))},getZoom:function(){var u=this._decompose().scaling;return(u.x+u.y)/2},setZoom:function(u){this.transform(new K().scale(u/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(u){var h=this.getRotation();h!=null&&u!=null&&this.rotate(u-h)},getScaling:function(){var u=this._decompose().scaling;return new L(u.x,u.y,this,"setScaling")},setScaling:function(){var u=this.getScaling(),h=I.read(arguments,0,{clone:!0,readNull:!0});u&&h&&this.scale(h.x/u.x,h.y/u.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var u=this._matrix;u.set.apply(u,arguments)},transform:function(u){this._matrix.append(u)},scrollBy:function(){this.translate(I.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(I.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(I.read(arguments))},getEventPoint:function(u){return this.viewToProject(ge.getOffset(u,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(u,h){i&&typeof h=="string"&&(h=i.getElementById(h));var d=r?je:_e;return new d(u,h)}}},new function(){if(!r)return;var u,h,d=!1,g=!1;function m(ie){var ae=ge.getTarget(ie);return ae.getAttribute&&_e._viewsById[ae.getAttribute("id")]}function w(){var ie=_e._focused;if(!ie||!ie.isVisible()){for(var ae=0,le=_e._views.length;ae<le;ae++)if((ie=_e._views[ae]).isVisible()){_e._focused=h=ie;break}}}function T(ie,ae,le){ie._handleMouseEvent("mousemove",ae,le)}var S=r.navigator,x,N,O;S.pointerEnabled||S.msPointerEnabled?(x="pointerdown MSPointerDown",N="pointermove MSPointerMove",O="pointerup pointercancel MSPointerUp MSPointerCancel"):(x="touchstart",N="touchmove",O="touchend touchcancel","ontouchstart"in r&&S.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(x+=" mousedown",N+=" mousemove",O+=" mouseup"));var P={},R={mouseout:function(ie){var ae=_e._focused,le=ge.getRelatedTarget(ie);if(ae&&(!le||le.nodeName==="HTML")){var de=ge.getOffset(ie,ae._element),ve=de.x,ye=Math.abs,Ae=ye(ve),Me=1<<25,Be=Ae-Me;de.x=ye(Be)<Ae?Be*(ve<0?-1:1):ve,T(ae,ie,ae.viewToProject(de))}},scroll:w};P[x]=function(ie){var ae=_e._focused=m(ie);d||(d=!0,ae._handleMouseEvent("mousedown",ie))},R[N]=function(ie){var ae=_e._focused;if(!g){var le=m(ie);le?ae!==le&&(ae&&T(ae,ie),u||(u=ae),ae=_e._focused=h=le):h&&h===ae&&(u&&!u.isInserted()&&(u=null),ae=_e._focused=u,u=null,w())}ae&&T(ae,ie)},R[x]=function(){g=!0},R[O]=function(ie){var ae=_e._focused;ae&&d&&ae._handleMouseEvent("mouseup",ie),g=d=!1},ge.add(i,R),ge.add(r,{load:w});var A=!1,U=!1,W={doubleclick:"click",mousedrag:"mousemove"},H=!1,V,B,k,M,q,$,X,Q;function J(ie,ae,le,de,ve,ye,Ae){var Me=!1,Be;function lt(nt,et){if(nt.responds(et)){if(Be||(Be=new zt(et,de,ve,ae||nt,ye?ve.subtract(ye):null)),nt.emit(et,Be)&&(A=!0,Be.prevented&&(U=!0),Be.stopped))return Me=!0}else{var Ze=W[et];if(Ze)return lt(nt,Ze)}}for(;ie&&ie!==Ae&&!lt(ie,le);)ie=ie._parent;return Me}function ne(ie,ae,le,de,ve,ye){return ie._project.removeOn(le),U=A=!1,q&&J(q,null,le,de,ve,ye)||ae&&ae!==q&&!ae.isDescendant(q)&&J(ae,null,le==="mousedrag"?"mousemove":le,de,ve,ye,q)||J(ie,q||ae||ie,le,de,ve,ye)}var se={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:P,_handleMouseEvent:function(ie,ae,le){var de=this._itemEvents,ve=de.native[ie],ye=ie==="mousemove",Ae=this._scope.tool,Me=this;function Be(Et){return de.virtual[Et]||Me.responds(Et)||Ae&&Ae.responds(Et)}ye&&d&&Be("mousedrag")&&(ie="mousedrag"),le||(le=this.getEventPoint(ae));var lt=this.getBounds().contains(le),nt=ve&&lt&&Me._project.hitTest(le,{tolerance:0,fill:!0,stroke:!0}),et=nt&&nt.item||null,Ze=!1,vt={};if(vt[ie.substr(5)]=!0,ve&&et!==M&&(M&&J(M,null,"mouseleave",ae,le),et&&J(et,null,"mouseenter",ae,le),M=et),H^lt&&(J(this,null,lt?"mouseenter":"mouseleave",ae,le),Ze=!0),(lt||vt.drag)&&!le.equals(B)&&(ne(this,et,ye?ie:"mousemove",ae,le,B),Ze=!0),H=lt,vt.down&&lt||vt.up&&V){if(ne(this,et,ie,ae,le,V),vt.down){if(Q=et===$&&Date.now()-X<300,k=$=et,!U&&et){for(var ot=et;ot&&!ot.responds("mousedrag");)ot=ot._parent;ot&&(q=et)}V=le}else vt.up&&(!U&&et===k&&(X=Date.now(),ne(this,et,Q?"doubleclick":"click",ae,le,V),Q=!1),k=q=null);H=!1,Ze=!0}B=le,Ze&&Ae&&(A=Ae._handleMouseEvent(ie,ae,le,vt)||A),ae.cancelable!==!1&&(A&&!vt.move||vt.down&&Be("mouseup"))&&ae.preventDefault()},_handleKeyEvent:function(ie,ae,le,de){var ve=this._scope,ye=ve.tool,Ae;function Me(Be){Be.responds(ie)&&(Ot=ve,Be.emit(ie,Ae=Ae||new Ve(ie,ae,le,de)))}this.isVisible()&&(Me(this),ye&&ye.responds(ie)&&Me(ye))},_countItemEvent:function(ie,ae){var le=this._itemEvents,de=le.native,ve=le.virtual;for(var ye in se)de[ye]=(de[ye]||0)+(se[ye][ie]||0)*ae;ve[ie]=(ve[ie]||0)+ae},statics:{updateFocus:w,_resetState:function(){d=g=A=H=!1,u=h=V=B=k=M=q=$=X=Q=null}}}}),je=_e.extend({_class:"CanvasView",initialize:function(h,d){if(!(d instanceof r.HTMLCanvasElement)){var g=D.read(arguments,1);if(g.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+o.slice(arguments,1));d=xn.getCanvas(g)}var m=this._context=d.getContext("2d");if(m.save(),this._pixelRatio=1,!/^off|false$/.test(c.getAttribute(d,"hidpi"))){var w=r.devicePixelRatio||1,T=ce.getPrefixed(m,"backingStorePixelRatio")||1;this._pixelRatio=w/T}_e.call(this,h,d),this._needsUpdate=!0},remove:function u(){return this._context.restore(),u.base.call(this)},_setElementSize:function u(h,d){var g=this._pixelRatio;if(u.base.call(this,h*g,d*g),g!==1){var m=this._element,w=this._context;if(!c.hasAttribute(m,"resize")){var T=m.style;T.width=h+"px",T.height=d+"px"}w.restore(),w.save(),w.scale(g,g)}},getContext:function(){return this._context},getPixelSize:function u(h){var d=Ot.agent,g;if(d&&d.firefox)g=u.base.call(this,h);else{var m=this._context,w=m.font;m.font=h+" serif",g=parseFloat(m.font),m.font=w}return g},getTextWidth:function(u,h){var d=this._context,g=d.font,m=0;d.font=u;for(var w=0,T=h.length;w<T;w++)m=Math.max(m,d.measureText(h[w]).width);return d.font=g,m},update:function(){if(!this._needsUpdate)return!1;var u=this._project,h=this._context,d=this._viewSize;return h.clearRect(0,0,d.width+1,d.height+1),u&&u.draw(h,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),Pe=o.extend({_class:"Event",initialize:function(h){this.event=h,this.type=h&&h.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return He.modifiers}}),Ve=Pe.extend({_class:"KeyEvent",initialize:function(h,d,g,m){this.type=h,this.event=d,this.key=g,this.character=m},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),He=new function(){var u={"	":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},h={tab:"	",space:" ",enter:"\r"},d={},g={},m,w,T=new o({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var N=Ot&&Ot.agent;return N&&N.mac?this.meta:this.control}}});function S(N){var O=N.key||N.keyIdentifier;return O=/^U\+/.test(O)?String.fromCharCode(parseInt(O.substr(2),16)):/^Arrow[A-Z]/.test(O)?O.substr(5):O==="Unidentified"||O===n?String.fromCharCode(N.keyCode):O,u[O]||(O.length>1?o.hyphenate(O):O.toLowerCase())}function x(N,O,P,R){var A=_e._focused,U;if(d[O]=N,N?g[O]=P:delete g[O],O.length>1&&(U=o.camelize(O))in T){T[U]=N;var W=Ot&&Ot.agent;if(U==="meta"&&W&&W.mac)if(N)m={};else{for(var H in m)H in g&&x(!1,H,m[H],R);m=null}}else N&&m&&(m[O]=P);A&&A._handleKeyEvent(N?"keydown":"keyup",R,O,P)}return ge.add(i,{keydown:function(N){var O=S(N),P=Ot&&Ot.agent;O.length>1||P&&P.chrome&&(N.altKey||P.mac&&N.metaKey||!P.mac&&N.ctrlKey)?x(!0,O,h[O]||(O.length>1?"":O),N):w=O},keypress:function(N){if(w){var O=S(N),P=N.charCode,R=P>=32?String.fromCharCode(P):O.length>1?"":O;O!==w&&(O=R.toLowerCase()),x(!0,O,R,N),w=null}},keyup:function(N){var O=S(N);O in g&&x(!1,O,g[O],N)}}),ge.add(r,{blur:function(N){for(var O in g)x(!1,O,g[O],N)}}),{modifiers:T,isDown:function(N){return!!d[N]}}},zt=Pe.extend({_class:"MouseEvent",initialize:function(h,d,g,m,w){this.type=h,this.event=d,this.point=g,this.target=m,this.delta=w},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),ri=Pe.extend({_class:"ToolEvent",_item:null,initialize:function(h,d,g){this.tool=h,this.type=d,this.event=g},_choosePoint:function(u,h){return u||(h?h.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(u){this._point=u},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(u){this._lastPoint=u},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(u){this._downPoint=u},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(u){this._middlePoint=u},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(u){this._delta=u},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(u){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=u},getItem:function(){if(!this._item){var u=this.tool._scope.project.hitTest(this.getPoint());if(u){for(var h=u.item,d=h._parent;/^(Group|CompoundPath)$/.test(d._class);)h=d,d=d._parent;this._item=h}}return this._item},setItem:function(u){this._item=u},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}});f.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(h){f.call(this),this._moveCount=-1,this._downCount=-1,this.set(h)},getMinDistance:function(){return this._minDistance},setMinDistance:function(u){this._minDistance=u,u!=null&&this._maxDistance!=null&&u>this._maxDistance&&(this._maxDistance=u)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(u){this._maxDistance=u,this._minDistance!=null&&u!=null&&u<this._minDistance&&(this._minDistance=u)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(u){this._minDistance=this._maxDistance=u},_handleMouseEvent:function(u,h,d,g){Ot=this._scope,g.drag&&!this.responds(u)&&(u="mousemove");var m=g.move||g.drag,w=this.responds(u),T=this.minDistance,S=this.maxDistance,x=!1,N=this;function O(R,A){var U=d,W=m?N._point:N._downPoint||U;if(m){if(N._moveCount>=0&&U.equals(W))return!1;if(W&&(R!=null||A!=null)){var H=U.subtract(W),V=H.getLength();if(V<(R||0))return!1;A&&(U=W.add(H.normalize(Math.min(V,A))))}N._moveCount++}return N._point=U,N._lastPoint=W||U,g.down&&(N._moveCount=-1,N._downPoint=U,N._downCount++),!0}function P(){w&&(x=N.emit(u,new ri(N,u,h))||x)}if(g.down)O(),P();else if(g.up)O(null,S),P();else if(w)for(;O(T,S);)P();return x}});var ao=o.extend(a,{_class:"Tween",statics:{easings:new o({linear:function(u){return u},easeInQuad:function(u){return u*u},easeOutQuad:function(u){return u*(2-u)},easeInOutQuad:function(u){return u<.5?2*u*u:-1+2*(2-u)*u},easeInCubic:function(u){return u*u*u},easeOutCubic:function(u){return--u*u*u+1},easeInOutCubic:function(u){return u<.5?4*u*u*u:(u-1)*(2*u-2)*(2*u-2)+1},easeInQuart:function(u){return u*u*u*u},easeOutQuart:function(u){return 1- --u*u*u*u},easeInOutQuart:function(u){return u<.5?8*u*u*u*u:1-8*--u*u*u*u},easeInQuint:function(u){return u*u*u*u*u},easeOutQuint:function(u){return 1+--u*u*u*u*u},easeInOutQuint:function(u){return u<.5?16*u*u*u*u*u:1+16*--u*u*u*u*u}})},initialize:function u(h,d,g,m,w,T){this.object=h;var S=typeof w,x=S==="function";this.type=x?S:S==="string"?w:"linear",this.easing=x?w:u.easings[this.type],this.duration=m,this.running=!1,this._then=null,this._startTime=null;var N=d||g;this._keys=N?Object.keys(N):[],this._parsedKeys=this._parseKeys(this._keys),this._from=N&&this._getState(d),this._to=N&&this._getState(g),T!==!1&&this.start()},then:function(u){return this._then=u,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(u){if(this.running){u>=1&&(u=1,this.running=!1);for(var h=this.easing(u),d=this._keys,g=function(O){return typeof O=="function"?O(h,u):O},m=0,w=d&&d.length;m<w;m++){var T=d[m],S=g(this._from[T]),x=g(this._to[T]),N=S&&x&&S.__add&&x.__add?x.__subtract(S).__multiply(h).__add(S):(x-S)*h+S;this._setProperty(this._parsedKeys[T],N)}this.responds("update")&&this.emit("update",new o({progress:u,factor:h})),!this.running&&this._then&&this._then(this.object)}return this},_events:{onUpdate:{}},_handleFrame:function(u){var h=this._startTime,d=h?(u-h)/this.duration:0;h||(this._startTime=u),this.update(d)},_getState:function(u){for(var h=this._keys,d={},g=0,m=h.length;g<m;g++){var w=h[g],T=this._parsedKeys[w],S=this._getProperty(T),x;if(u){var N=this._resolveValue(S,u[w]);this._setProperty(T,N),x=this._getProperty(T),x=x&&x.clone?x.clone():x,this._setProperty(T,S)}else x=S&&S.clone?S.clone():S;d[w]=x}return d},_resolveValue:function(u,h){if(h){if(Array.isArray(h)&&h.length===2){var d=h[0];return d&&d.match&&d.match(/^[+\-\*\/]=/)?this._calculate(u,d[0],h[1]):h}else if(typeof h=="string"){var g=h.match(/^[+\-*/]=(.*)/);if(g){var m=JSON.parse(g[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(u,h[0],m)}}}return h},_calculate:function(u,h,d){return Ot.PaperScript.calculateBinary(u,h,d)},_parseKeys:function(u){for(var h={},d=0,g=u.length;d<g;d++){var m=u[d],w=m.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");h[m]=w.split("/")}return h},_getProperty:function(u,h){for(var d=this.object,g=0,m=u.length-(h||0);g<m&&d;g++)d=d[u[g]];return d},_setProperty:function(u,h){var d=this._getProperty(u,1);d&&(d[u[u.length-1]]=h)}}),Oo={request:function(u){var h=new e.XMLHttpRequest;return h.open((u.method||"get").toUpperCase(),u.url,o.pick(u.async,!0)),u.mimeType&&h.overrideMimeType(u.mimeType),h.onload=function(){var d=h.status;d===0||d===200?u.onLoad&&u.onLoad.call(h,h.responseText):h.onerror()},h.onerror=function(){var d=h.status,g='Could not load "'+u.url+'" (Status: '+d+")";if(u.onError)u.onError(g,d);else throw new Error(g)},h.send(null)}},xn=o.exports.CanvasProvider={canvases:[],getCanvas:function(u,h,d){if(!r)return null;var g,m=!0;typeof u=="object"&&(h=u.height,u=u.width),this.canvases.length?g=this.canvases.pop():(g=i.createElement("canvas"),m=!1);var w=g.getContext("2d",d||{});if(!w)throw new Error("Canvas "+g+" is unable to provide a 2D context.");return g.width===u&&g.height===h?m&&w.clearRect(0,0,u+1,h+1):(g.width=u,g.height=h),w.save(),g},getContext:function(u,h,d){var g=this.getCanvas(u,h,d);return g?g.getContext("2d",d||{}):null},release:function(u){var h=u&&u.canvas?u.canvas:u;h&&h.getContext&&(h.getContext("2d").restore(),this.canvases.push(h))}},Fa=new function(){var u=Math.min,h=Math.max,d=Math.abs,g,m,w,T,S,x,N,O,P,R,A;function U(q,$,X){return .2989*q+.587*$+.114*X}function W(q,$,X,ne){var J=ne-U(q,$,X);P=q+J,R=$+J,A=X+J;var ne=U(P,R,A),se=u(P,R,A),ie=h(P,R,A);if(se<0){var ae=ne-se;P=ne+(P-ne)*ne/ae,R=ne+(R-ne)*ne/ae,A=ne+(A-ne)*ne/ae}if(ie>255){var le=255-ne,de=ie-ne;P=ne+(P-ne)*le/de,R=ne+(R-ne)*le/de,A=ne+(A-ne)*le/de}}function H(q,$,X){return h(q,$,X)-u(q,$,X)}function V(q,$,X,Q){var J=[q,$,X],ne=h(q,$,X),se=u(q,$,X),ie;se=se===q?0:se===$?1:2,ne=ne===q?0:ne===$?1:2,ie=u(se,ne)===0?h(se,ne)===1?2:1:0,J[ne]>J[se]?(J[ie]=(J[ie]-J[se])*Q/(J[ne]-J[se]),J[ne]=Q):J[ie]=J[ne]=0,J[se]=0,P=J[0],R=J[1],A=J[2]}var B={multiply:function(){P=S*g/255,R=x*m/255,A=N*w/255},screen:function(){P=S+g-S*g/255,R=x+m-x*m/255,A=N+w-N*w/255},overlay:function(){P=S<128?2*S*g/255:255-2*(255-S)*(255-g)/255,R=x<128?2*x*m/255:255-2*(255-x)*(255-m)/255,A=N<128?2*N*w/255:255-2*(255-N)*(255-w)/255},"soft-light":function(){var q=g*S/255;P=q+S*(255-(255-S)*(255-g)/255-q)/255,q=m*x/255,R=q+x*(255-(255-x)*(255-m)/255-q)/255,q=w*N/255,A=q+N*(255-(255-N)*(255-w)/255-q)/255},"hard-light":function(){P=g<128?2*g*S/255:255-2*(255-g)*(255-S)/255,R=m<128?2*m*x/255:255-2*(255-m)*(255-x)/255,A=w<128?2*w*N/255:255-2*(255-w)*(255-N)/255},"color-dodge":function(){P=S===0?0:g===255?255:u(255,255*S/(255-g)),R=x===0?0:m===255?255:u(255,255*x/(255-m)),A=N===0?0:w===255?255:u(255,255*N/(255-w))},"color-burn":function(){P=S===255?255:g===0?0:h(0,255-(255-S)*255/g),R=x===255?255:m===0?0:h(0,255-(255-x)*255/m),A=N===255?255:w===0?0:h(0,255-(255-N)*255/w)},darken:function(){P=S<g?S:g,R=x<m?x:m,A=N<w?N:w},lighten:function(){P=S>g?S:g,R=x>m?x:m,A=N>w?N:w},difference:function(){P=S-g,P<0&&(P=-P),R=x-m,R<0&&(R=-R),A=N-w,A<0&&(A=-A)},exclusion:function(){P=S+g*(255-S-S)/255,R=x+m*(255-x-x)/255,A=N+w*(255-N-N)/255},hue:function(){V(g,m,w,H(S,x,N)),W(P,R,A,U(S,x,N))},saturation:function(){V(S,x,N,H(g,m,w)),W(P,R,A,U(S,x,N))},luminosity:function(){W(S,x,N,U(g,m,w))},color:function(){W(g,m,w,U(S,x,N))},add:function(){P=u(S+g,255),R=u(x+m,255),A=u(N+w,255)},subtract:function(){P=h(S-g,0),R=h(x-m,0),A=h(N-w,0)},average:function(){P=(S+g)/2,R=(x+m)/2,A=(N+w)/2},negation:function(){P=255-d(255-g-S),R=255-d(255-m-x),A=255-d(255-w-N)}},k=this.nativeModes=o.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(q){this[q]=!0},{}),M=xn.getContext(1,1,{willReadFrequently:!0});M&&(o.each(B,function(q,$){var X=$==="darken",Q=!1;M.save();try{M.fillStyle=X?"#300":"#a00",M.fillRect(0,0,1,1),M.globalCompositeOperation=$,M.globalCompositeOperation===$&&(M.fillStyle=X?"#a00":"#300",M.fillRect(0,0,1,1),Q=M.getImageData(0,0,1,1).data[0]!==X?170:51)}catch{}M.restore(),k[$]=Q}),xn.release(M)),this.process=function(q,$,X,Q,J){var ne=$.canvas,se=q==="normal";if(se||k[q])X.save(),X.setTransform(1,0,0,1,0,0),X.globalAlpha=Q,se||(X.globalCompositeOperation=q),X.drawImage(ne,J.x,J.y),X.restore();else{var ie=B[q];if(!ie)return;for(var ae=X.getImageData(J.x,J.y,ne.width,ne.height),le=ae.data,de=$.getImageData(0,0,ne.width,ne.height).data,ve=0,ye=le.length;ve<ye;ve+=4){g=de[ve],S=le[ve],m=de[ve+1],x=le[ve+1],w=de[ve+2],N=le[ve+2],T=de[ve+3],O=le[ve+3],ie();var Ae=T*Q/255,Me=1-Ae;le[ve]=Ae*P+Me*S,le[ve+1]=Ae*R+Me*x,le[ve+2]=Ae*A+Me*N,le[ve+3]=T*Q+Me*O}X.putImageData(ae,J.x,J.y)}}},hn=new function(){var u="http://www.w3.org/2000/svg",h="http://www.w3.org/2000/xmlns",d="http://www.w3.org/1999/xlink",g={href:d,xlink:h,xmlns:h+"/","xmlns:xlink":h+"/"};function m(S,x,N){return T(i.createElementNS(u,S),x,N)}function w(S,x){var N=g[x],O=N?S.getAttributeNS(N,x):S.getAttribute(x);return O==="null"?null:O}function T(S,x,N){for(var O in x){var P=x[O],R=g[O];typeof P=="number"&&N&&(P=N.number(P)),R?S.setAttributeNS(R,O,P):S.setAttribute(O,P)}return S}return{svg:u,xmlns:h,xlink:d,create:m,get:w,set:T}},zu=o.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(u,h){return!h&&(u instanceof Fe||u instanceof Z||u instanceof Xt)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(u,h){var d=o.capitalize(h),g=u[2];this[h]={type:u[1],property:h,attribute:u[0],toSVG:g,fromSVG:g&&o.each(g,function(m,w){this[m]=w},{}),exportFilter:u[3],get:"get"+d,set:"set"+d}},{});new function(){var u;function h(B,k,M){var q=new o,$=B.getTranslation();if(k){var X;B.isInvertible()?(B=B._shiftless(),X=B._inverseTransform($),$=null):X=new I,q[M?"cx":"x"]=X.x,q[M?"cy":"y"]=X.y}if(!B.isIdentity()){var Q=B.decompose();if(Q){var J=[],ne=Q.rotation,se=Q.scaling,ie=Q.skewing;$&&!$.isZero()&&J.push("translate("+u.point($)+")"),ne&&J.push("rotate("+u.number(ne)+")"),(!b.isZero(se.x-1)||!b.isZero(se.y-1))&&J.push("scale("+u.point(se)+")"),ie.x&&J.push("skewX("+u.number(ie.x)+")"),ie.y&&J.push("skewY("+u.number(ie.y)+")"),q.transform=J.join(" ")}else q.transform="matrix("+B.getValues().join(",")+")"}return q}function d(B,k){for(var M=h(B._matrix),q=B._children,$=hn.create("g",M,u),X=0,Q=q.length;X<Q;X++){var J=q[X],ne=H(J,k);if(ne)if(J.isClipMask()){var se=hn.create("clipPath");se.appendChild(ne),U(J,se,"clip"),hn.set($,{"clip-path":"url(#"+se.id+")"})}else $.appendChild(ne)}return $}function g(B,k){var M=h(B._matrix,!0),q=B.getSize(),$=B.getImage();return M.x-=q.width/2,M.y-=q.height/2,M.width=q.width,M.height=q.height,M.href=k.embedImages==!1&&$&&$.src||B.toDataURL(),hn.create("image",M,u)}function m(B,k){var M=k.matchShapes;if(M){var q=B.toShape(!1);if(q)return w(q)}var $=B._segments,X=$.length,Q,J=h(B._matrix);if(M&&X>=2&&!B.hasHandles())if(X>2){Q=B._closed?"polygon":"polyline";for(var ne=[],se=0;se<X;se++)ne.push(u.point($[se]._point));J.points=ne.join(" ")}else{Q="line";var ie=$[0]._point,ae=$[1]._point;J.set({x1:ie.x,y1:ie.y,x2:ae.x,y2:ae.y})}else Q="path",J.d=B.getPathData(null,k.precision);return hn.create(Q,J,u)}function w(B){var k=B._type,M=B._radius,q=h(B._matrix,!0,k!=="rectangle");if(k==="rectangle"){k="rect";var $=B._size,X=$.width,Q=$.height;q.x-=X/2,q.y-=Q/2,q.width=X,q.height=Q,M.isZero()&&(M=null)}return M&&(k==="circle"?q.r=M:(q.rx=M.width,q.ry=M.height)),hn.create(k,q,u)}function T(B,k){var M=h(B._matrix),q=B.getPathData(null,k.precision);return q&&(M.d=q),hn.create("path",M,u)}function S(B,k){var M=h(B._matrix,!0),q=B._definition,$=A(q,"symbol"),X=q._item,Q=X.getStrokeBounds();return $||($=hn.create("symbol",{viewBox:u.rectangle(Q)}),$.appendChild(H(X,k)),U(q,$,"symbol")),M.href="#"+$.id,M.x+=Q.x,M.y+=Q.y,M.width=Q.width,M.height=Q.height,M.overflow="visible",hn.create("use",M,u)}function x(B){var k=A(B,"color");if(!k){var M=B.getGradient(),q=M._radial,$=B.getOrigin(),X=B.getDestination(),Q;if(q){Q={cx:$.x,cy:$.y,r:$.getDistance(X)};var J=B.getHighlight();J&&(Q.fx=J.x,Q.fy=J.y)}else Q={x1:$.x,y1:$.y,x2:X.x,y2:X.y};Q.gradientUnits="userSpaceOnUse",k=hn.create((q?"radial":"linear")+"Gradient",Q,u);for(var ne=M._stops,se=0,ie=ne.length;se<ie;se++){var ae=ne[se],le=ae._color,de=le.getAlpha(),ve=ae._offset;Q={offset:ve??se/(ie-1)},le&&(Q["stop-color"]=le.toCSS(!0)),de<1&&(Q["stop-opacity"]=de),k.appendChild(hn.create("stop",Q,u))}U(B,k,"color")}return"url(#"+k.id+")"}function N(B){var k=hn.create("text",h(B._matrix,!0),u);return k.textContent=B._content,k}var O={Group:d,Layer:d,Raster:g,Path:m,Shape:w,CompoundPath:T,SymbolItem:S,PointText:N};function P(B,k,M){var q={},$=!M&&B.getParent(),X=[];return B._name!=null&&(q.id=B._name),o.each(zu,function(Q){var J=Q.get,ne=Q.type,se=B[J]();if(Q.exportFilter?Q.exportFilter(B,se):!$||!o.equals($[J](),se)){if(ne==="color"&&se!=null){var ie=se.getAlpha();ie<1&&(q[Q.attribute+"-opacity"]=ie)}ne==="style"?X.push(Q.attribute+": "+se):q[Q.attribute]=se==null?"none":ne==="color"?se.gradient?x(se):se.toCSS(!0):ne==="array"?se.join(","):ne==="lookup"?Q.toSVG[se]:se}}),X.length&&(q.style=X.join(";")),q.opacity===1&&delete q.opacity,B._visible||(q.visibility="hidden"),hn.set(k,q,u)}var R;function A(B,k){return R||(R={ids:{},svgs:{}}),B&&R.svgs[k+"-"+(B._id||B.__id||(B.__id=E.get("svg")))]}function U(B,k,M){R||A();var q=R.ids[M]=(R.ids[M]||0)+1;k.id=M+"-"+q,R.svgs[M+"-"+(B._id||B.__id)]=k}function W(B,k){var M=B,q=null;if(R){M=B.nodeName.toLowerCase()==="svg"&&B;for(var $ in R.svgs)q||(M||(M=hn.create("svg"),M.appendChild(B)),q=M.insertBefore(hn.create("defs"),M.firstChild)),q.appendChild(R.svgs[$]);R=null}return k.asString?new e.XMLSerializer().serializeToString(M):M}function H(B,k,M){var q=O[B._class],$=q&&q(B,k);if($){var X=k.onExport;X&&($=X(B,$,k)||$);var Q=JSON.stringify(B._data);Q&&Q!=="{}"&&Q!=="null"&&$.setAttribute("data-paper-data",Q)}return $&&P(B,$,M)}function V(B){return B||(B={}),u=new y(B.precision),B}fe.inject({exportSVG:function(B){return B=V(B),W(H(this,B,!0),B)}}),oe.inject({exportSVG:function(B){B=V(B);var k=this._children,M=this.getView(),q=o.pick(B.bounds,"view"),$=B.matrix||q==="view"&&M._matrix,X=$&&K.read([$]),Q=q==="view"?new z([0,0],M.getViewSize()):q==="content"?fe._getBounds(k,X,{stroke:!0}).rect:z.read([q],0,{readNull:!0}),J={version:"1.1",xmlns:hn.svg,"xmlns:xlink":hn.xlink};Q&&(J.width=Q.width,J.height=Q.height,(Q.x||Q.x===0||Q.y||Q.y===0)&&(J.viewBox=u.rectangle(Q)));var ne=hn.create("svg",J,u),se=ne;X&&!X.isIdentity()&&(se=ne.appendChild(hn.create("g",h(X),u)));for(var ie=0,ae=k.length;ie<ae;ie++)se.appendChild(H(k[ie],B,!0));return W(ne,B)}})},new function(){var u={},h;function d(k,M,q,$,X,Q){var J=hn.get(k,M)||Q,ne=J==null?$?null:q?"":0:q?J:parseFloat(J);return/%\s*$/.test(J)?ne/100*(X?1:h[/x|^width/.test(M)?"width":"height"]):ne}function g(k,M,q,$,X,Q,J){return M=d(k,M||"x",!1,$,X,Q),q=d(k,q||"y",!1,$,X,J),$&&(M==null||q==null)?null:new I(M,q)}function m(k,M,q,$,X){return M=d(k,M||"width",!1,$,X),q=d(k,q||"height",!1,$,X),$&&(M==null||q==null)?null:new D(M,q)}function w(k,M,q){return k==="none"?null:M==="number"?parseFloat(k):M==="array"?k?k.split(/[\s,]+/g).map(parseFloat):[]:M==="color"?H(k)||k:M==="lookup"?q[k]:k}function T(k,M,q,$){var X=k.childNodes,Q=M==="clippath",J=M==="defs",ne=new me,se=ne._project,ie=se._currentStyle,ae=[];if(!Q&&!J&&(ne=W(ne,k,$),se._currentStyle=ne._style.clone()),$)for(var le=k.querySelectorAll("defs"),de=0,ve=le.length;de<ve;de++)V(le[de],q,!1);for(var de=0,ve=X.length;de<ve;de++){var ye=X[de],Ae;ye.nodeType===1&&!/^defs$/i.test(ye.nodeName)&&(Ae=V(ye,q,!1))&&!(Ae instanceof Ge)&&ae.push(Ae)}return ne.addChildren(ae),Q&&(ne=W(ne.reduce(),k,$)),se._currentStyle=ie,(Q||J)&&(ne.remove(),ne=null),ne}function S(k,M){for(var q=k.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),$=[],X=0,Q=q.length;X<Q;X+=2)$.push(new I(parseFloat(q[X]),parseFloat(q[X+1])));var J=new Ne($);return M==="polygon"&&J.closePath(),J}function x(k){return Fe.create(k.getAttribute("d"))}function N(k,M){var q=(d(k,"href",!0)||"").substring(1),$=M==="radialgradient",X;if(q)X=u[q].getGradient(),X._radial^$&&(X=X.clone(),X._radial=$);else{for(var Q=k.childNodes,J=[],ne=0,se=Q.length;ne<se;ne++){var ie=Q[ne];ie.nodeType===1&&J.push(W(new Dt,ie))}X=new Pn(J,$)}var ae,le,de,ve=d(k,"gradientUnits",!0)!=="userSpaceOnUse";$?(ae=g(k,"cx","cy",!1,ve,"50%","50%"),le=ae.add(d(k,"r",!1,!1,ve,"50%"),0),de=g(k,"fx","fy",!0,ve)):(ae=g(k,"x1","y1",!1,ve,"0%","0%"),le=g(k,"x2","y2",!1,ve,"100%","0%"));var ye=W(new Wt(X,ae,le,de),k);return ye._scaleToBounds=ve,null}var O={"#document":function(k,M,q,$){for(var X=k.childNodes,Q=0,J=X.length;Q<J;Q++){var ne=X[Q];if(ne.nodeType===1)return V(ne,q,$)}},g:T,svg:T,clippath:T,polygon:S,polyline:S,path:x,lineargradient:N,radialgradient:N,image:function(k){var M=new be(d(k,"href",!0));return M.on("load",function(){var q=m(k);this.setSize(q);var $=g(k).add(q.divide(2));this._matrix.append(new K().translate($))}),M},symbol:function(k,M,q,$){return new Ge(T(k,M,q,$),!0)},defs:T,use:function(k){var M=(d(k,"href",!0)||"").substring(1),q=u[M],$=g(k);return q?q instanceof Ge?q.place($):q.clone().translate($):null},circle:function(k){return new Z.Circle(g(k,"cx","cy"),d(k,"r"))},ellipse:function(k){return new Z.Ellipse({center:g(k,"cx","cy"),radius:m(k,"rx","ry")})},rect:function(k){return new Z.Rectangle(new z(g(k),m(k)),m(k,"rx","ry"))},line:function(k){return new Ne.Line(g(k,"x1","y1"),g(k,"x2","y2"))},text:function(k){var M=new Nt(g(k).add(g(k,"dx","dy")));return M.setContent(k.textContent.trim()||""),M},switch:T};function P(k,M,q,$){if(k.transform){for(var X=($.getAttribute(q)||"").split(/\)\s*/g),Q=new K,J=0,ne=X.length;J<ne;J++){var se=X[J];if(!se)break;for(var ie=se.split(/\(\s*/),ae=ie[0],le=ie[1].split(/[\s,]+/g),de=0,ve=le.length;de<ve;de++)le[de]=parseFloat(le[de]);switch(ae){case"matrix":Q.append(new K(le[0],le[1],le[2],le[3],le[4],le[5]));break;case"rotate":Q.rotate(le[0],le[1]||0,le[2]||0);break;case"translate":Q.translate(le[0],le[1]||0);break;case"scale":Q.scale(le);break;case"skewX":Q.skew(le[0],0);break;case"skewY":Q.skew(0,le[0]);break}}k.transform(Q)}}function R(k,M,q){var $=q==="fill-opacity"?"getFillColor":"getStrokeColor",X=k[$]&&k[$]();X&&X.setAlpha(parseFloat(M))}var A=o.set(o.each(zu,function(k){this[k.attribute]=function(M,q){if(M[k.set]&&(M[k.set](w(q,k.type,k.fromSVG)),k.type==="color")){var $=M[k.get]();if($&&$._scaleToBounds){var X=M.getBounds();$.transform(new K().translate(X.getPoint()).scale(X.getSize()))}}}},{}),{id:function(k,M){u[M]=k,k.setName&&k.setName(M)},"clip-path":function(k,M){var q=H(M);if(q)if(q=q.clone(),q.setClipMask(!0),k instanceof me)k.insertChild(0,q);else return new me(q,k)},gradientTransform:P,transform:P,"fill-opacity":R,"stroke-opacity":R,visibility:function(k,M){k.setVisible&&k.setVisible(M==="visible")},display:function(k,M){k.setVisible&&k.setVisible(M!==null)},"stop-color":function(k,M){k.setColor&&k.setColor(M)},"stop-opacity":function(k,M){k._color&&k._color.setAlpha(parseFloat(M))},offset:function(k,M){if(k.setOffset){var q=M.match(/(.*)%$/);k.setOffset(q?q[1]/100:parseFloat(M))}},viewBox:function(k,M,q,$,X){var Q=new z(w(M,"array")),J=m($,null,null,!0),ne,se;if(k instanceof me){var ie=J?J.divide(Q.getSize()):1,se=new K().scale(ie).translate(Q.getPoint().negate());ne=k}else k instanceof Ge&&(J&&Q.setSize(J),ne=k._item);if(ne){if(U($,"overflow",X)!=="visible"){var ae=new Z.Rectangle(Q);ae.setClipMask(!0),ne.addChild(ae)}se&&ne.transform(se)}}});function U(k,M,q){var $=k.attributes[M],X=$&&$.value;if(!X&&k.style){var Q=o.camelize(M);X=k.style[Q],!X&&q.node[Q]!==q.parent[Q]&&(X=q.node[Q])}return X?X==="none"?null:X:n}function W(k,M,q){var $=M.parentNode,X={node:ce.getStyles(M)||{},parent:!q&&!/^defs$/i.test($.tagName)&&ce.getStyles($)||{}};return o.each(A,function(Q,J){var ne=U(M,J,X);k=ne!==n&&Q(k,ne,J,M,X)||k}),k}function H(k){var M=k&&k.match(/\((?:["'#]*)([^"')]+)/),q=M&&M[1],$=q&&u[r?q.replace(r.location.href.split("#")[0]+"#",""):q];return $&&$._scaleToBounds&&($=$.clone(),$._scaleToBounds=!0),$}function V(k,M,q){var $=k.nodeName.toLowerCase(),X=$!=="#document",Q=i.body,J,ne,se;q&&X&&(h=Ot.getView().getSize(),h=m(k,null,null,!0)||h,J=hn.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),ne=k.parentNode,se=k.nextSibling,J.appendChild(k),Q.appendChild(J));var ie=Ot.settings,ae=ie.applyMatrix,le=ie.insertItems;ie.applyMatrix=!1,ie.insertItems=!1;var de=O[$],ve=de&&de(k,$,M,q)||null;if(ie.insertItems=le,ie.applyMatrix=ae,ve){X&&!(ve instanceof me)&&(ve=W(ve,k,q));var ye=M.onImport,Ae=X&&k.getAttribute("data-paper-data");ye&&(ve=ye(k,ve,M)||ve),M.expandShapes&&ve instanceof Z&&(ve.remove(),ve=ve.toPath()),Ae&&(ve._data=JSON.parse(Ae))}return J&&(Q.removeChild(J),ne&&(se?ne.insertBefore(k,se):ne.appendChild(k))),q&&(u={},ve&&o.pick(M.applyMatrix,ae)&&ve.matrix.apply(!0,!0)),ve}function B(k,M,q){if(!k)return null;M=typeof M=="function"?{onLoad:M}:M||{};var $=Ot,X=null;function Q(ie){try{var ae=typeof ie=="object"?ie:new e.DOMParser().parseFromString(ie.trim(),"image/svg+xml");if(!ae.nodeName)throw ae=null,new Error("Unsupported SVG source: "+k);Ot=$,X=V(ae,M,!0),(!M||M.insert!==!1)&&q._insertItem(n,X);var le=M.onLoad;le&&le(X,ie)}catch(de){J(de)}}function J(ie,ae){var le=M.onError;if(le)le(ie,ae);else throw new Error(ie)}if(typeof k=="string"&&!/^[\s\S]*</.test(k)){var ne=i.getElementById(k);ne?Q(ne):Oo.request({url:k,async:!0,onLoad:Q,onError:J})}else if(typeof File<"u"&&k instanceof File){var se=new FileReader;return se.onload=function(){Q(se.result)},se.onerror=function(){J(se.error)},se.readAsText(k)}else Q(k);return X}fe.inject({importSVG:function(k,M){return B(k,M,this)}}),oe.inject({importSVG:function(k,M){return this.activate(),B(k,M,this)}})};var Ot=new(c.inject(o.exports,{Base:o,Numerical:b,Key:He,DomEvent:ge,DomElement:ce,document:i,window:r,Symbol:Ge,PlacedSymbol:Ue}));return Ot.agent.node&&wP(Ot),typeof n=="function"&&n.amd?n("paper",Ot):t&&(t.exports=Ot),Ot}).call(CP,typeof self=="object"?self:null)})(v4);var $ne=v4.exports;const ut=NP($ne),Hne=t=>{const e=ut.project.importSVG(`<path d="${t}" />`,{applyMatrix:!0,insert:!1}),n={path:e.exportSVG().getAttribute("d"),edges:e.curves.length,height:Math.round(e.bounds.height),width:Math.round(e.bounds.width),length:Math.round(e.length)};if(e.remove(),n.edges<3||n.edges>23)throw new Error("Invalid path");return n},Kne=({tangram:t,deferred:e})=>{const{tangramsStarredBy:n}=ee.useContext(ji),r=ee.useMemo(()=>{let i=0;for(const o in n[t.id])n[t.id][o]&&(i+=1);return i},[t,n]);return F.jsx(zs,{onClose:()=>e.reject(Gn),css:{gap:3},children:F.jsxs(Te,{css:{gap:3,overflow:"auto",flex:"1",alignItems:"center"},children:[F.jsx(Xp,{selected:!0,tangram:t}),F.jsx(mt,{css:{fontSize:2},children:F.jsx(Jt,{id:"Earned {stars}",values:{stars:r,starIcon:()=>F.jsx(Ii,{icon:Pu,css:{fill:"currentColor"}})}})})]})})},Yne=({tangram:t,deferred:e})=>{const n=On(),r=ee.useContext(ko),{currentUser:i}=ee.useContext(qr),[o,a]=ee.useState(()=>({...t})),{tangramsStarredBy:c}=ee.useContext(ji),f=i&&!t.id,v=ee.useMemo(()=>({path:t.path,category:t.category,emoji:t.category!=="digits"&&t.category!=="letters"?t.emoji:_P(),letterIndex:t.category==="letters"?pd.indexOf(t.emoji):void 0,digitIndex:t.category==="digits"?dd.indexOf(t.emoji):void 0}),[t]),{handleSubmit:y,register:b,watch:E,setError:I,clearErrors:L,formState:D}=oc({defaultValues:v}),{path:te,category:z,emoji:Y,letterIndex:K,digitIndex:ue}=E();ee.useEffect(()=>{try{const he=Hne(te);a(Z=>({...Z,...he})),L("path")}catch{I("path",{type:"invalid",message:n.formatMessage({id:"Invalid path"})})}},[te,I,L,n]),ee.useEffect(()=>{const he=z==="letters"?pd[K]:z==="digits"?dd[ue]:Y||_P();a(Z=>({...Z,emoji:he}))},[z,Y,K,ue]),ee.useEffect(()=>{a(he=>({...he,category:z}))},[z]);const oe=async()=>{window.confirm(n.formatMessage({id:"Are you sure you want to delete this tangram?"}))&&(await ze.firestore().collection("tangrams").doc(t.id).delete(),r(n.formatMessage({id:"Tangram deleted successfuly"})),e.resolve())},fe=async()=>{f?(await ze.firestore().collection("tangrams").add({...o,uid:i.uid,approved:!1}),r(n.formatMessage({id:"Tangram submitted for review"}))):(await ze.firestore().collection("tangrams").doc(t.id).update(o),r(n.formatMessage({id:"Tangram modified successfuly"}))),e.resolve()},me=ee.useMemo(()=>{if(!t.approved)return 0;let he=0;for(const Z in c[t.id])c[t.id][Z]&&(he+=1);return he},[t,c]);return F.jsxs(zs,{title:F.jsx(to,{children:f?n.formatMessage({id:"Submit your tangram"}):n.formatMessage({id:"Edit your tangram"})}),onClose:()=>e.reject(Gn),as:"form",onSubmit:y(fe),css:{gap:3},children:[F.jsxs(Te,{css:{gap:3,overflow:"auto",flex:"1"},children:[F.jsx(Xp,{showStroke:i.isAdmin,selected:!0,completed:!0,tangram:o,css:{alignSelf:"center"}}),t.approved&&F.jsx(mt,{css:{alignSelf:"center",fontSize:2},children:F.jsx(Jt,{id:"Earned {stars}",values:{stars:me,starIcon:()=>F.jsx(Ii,{icon:Pu,css:{fill:"currentColor"}})}})}),f&&!i.isAdmin&&F.jsx(ca,{children:F.jsx(Jt,{id:"A moderator will have to approve your tangram. It can be deleted or edited at any time.",values:{br:()=>F.jsx("br",{})}})}),i&&i.isAdmin&&F.jsx(F.Fragment,{children:F.jsxs(Te,{css:{gap:2},children:[F.jsx("label",{children:n.formatMessage({id:"Path"})}),F.jsx(Xn,{as:"textarea",...b("path")}),D.errors.path&&F.jsx(Pi,{children:D.errors.path.message})]})}),F.jsxs(Te,{css:{gap:2},children:[F.jsx("label",{children:n.formatMessage({id:"Category"})}),F.jsx(Xn,{as:"select",...b("category"),children:l8.map(he=>F.jsx("option",{value:he,children:n.formatMessage({id:he})},he))})]}),z==="digits"?F.jsxs(Te,{css:{gap:2},children:[F.jsx("label",{children:n.formatMessage({id:"Victory emoji"})}),F.jsx(Xn,{as:"select",...b("digitIndex"),children:dd.map((he,Z)=>F.jsx("option",{value:Z,children:he},Z))})]}):z==="letters"?F.jsxs(Te,{css:{gap:2},children:[F.jsx("label",{children:n.formatMessage({id:"Victory emoji"})}),F.jsx(Xn,{as:"select",...b("letterIndex"),children:pd.map((he,Z)=>F.jsx("option",{value:Z,children:he},Z))})]}):F.jsxs(Te,{css:{gap:2},children:[F.jsx("label",{children:n.formatMessage({id:"Victory emoji"})}),F.jsx(Xn,{...b("emoji")}),F.jsx(ca,{children:n.formatMessage({id:"Leave empty for random emoji"})})]})]}),F.jsx(yi,{type:"submit",children:f?n.formatMessage({id:"Submit!"}):n.formatMessage({id:"Edit!"})}),!f&&F.jsx(Te,{css:{alignItems:"center"},children:F.jsx(as,{onClick:oe,children:n.formatMessage({id:"Or delete tangram"})})})]})},Xne=({tangram:t,deferred:e})=>{const{currentUser:n}=ee.useContext(qr);return n&&(n.isAdmin||!t.id||t.uid===n.uid)?F.jsx(Yne,{tangram:t,deferred:e}):F.jsx(Kne,{tangram:t,deferred:e})};class ra{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}const g4=ee.createContext([!0,()=>{}]),$x=()=>ee.useContext(g4),Qne=({children:t})=>{const[e,n]=ee.useState(!0);ee.useEffect(()=>{const o=window.localStorage.getItem("showBackgroundPattern");if(o===null){n(!0);return}try{const a=JSON.parse(o);n(!!JSON.parse(a))}catch{window.localStorage.removeItem("showBackgroundPattern")}},[]);const r=ee.useCallback(()=>{const o=!e;n(o),window.localStorage.setItem("showBackgroundPattern",JSON.stringify(o))},[e]),i=ee.useMemo(()=>[e,r],[e,r]);return F.jsx(g4.Provider,{value:i,children:t})},m4=ee.createContext(["",()=>{}]),y4=()=>ee.useContext(m4),EP="css-system-theme",bP={breakpoints:{s:"40em",m:"52em",l:"64em"},space:[0,4,8,16,32,64,128,256,512],sizes:{menu:40,inline:16,logo:128,icon:24,badge:32,badgeBig:86},borderWidths:{loader:8},radii:[0,4,8,16,32],fontSizes:[10,12,14,18,22,30,46,62,70]},Pg={light:{...bP,colors:{pieces:{st1:"#FECA57",st2:"#48DBFB",mt1:"#1DD1A1",lt1:"#FF6B6B",lt2:"#8557E0",sq:"#FF9FF3",rh:"#54A0FF"},difficulties:["#10ac84","#2e86de","#ee5253"],shape:"#121212",background:"#fff",dialogBackground:"#d9d9d9",dialogText:"#303030",inputBackground:"#fff",errorText:"#bd0808",notificationBackground:"#FFFFFFdd"}},dark:{...bP,colors:{pieces:{st1:"#CE9518",st2:"#1CACCB",mt1:"#0CA57C",lt1:"#C33B3B",lt2:"#5C2DB9",sq:"#C95EBC",rh:"#2E75CF"},difficulties:["#0b8767","#1a6cbd","#ce3737"],shape:"#595959",background:"#15141a",dialogBackground:"#383838",dialogText:"#d8d8d8",inputBackground:"#595959",errorText:"#e63c3c",notificationBackground:"#000000dd"}}},Jne="light",Zne=({children:t})=>{const[e,n]=ee.useState(Jne);ee.useEffect(()=>{const o=window.localStorage.getItem(EP);Pg[o]&&n(o)},[]);const r=ee.useCallback(o=>{Pg[o]&&(n(o),window.localStorage.setItem(EP,o))},[Pg]),i=ee.useMemo(()=>[e,r],[e,r]);return F.jsx(m4.Provider,{value:i,children:F.jsx(hs.Provider,{value:Pg[e],children:t})})},Hx=ee.createContext(),ere=({deferred:t,tip:{id:e,title:n=F.jsx(to,{children:F.jsx(Jt,{id:"Random tip"})}),content:r}})=>{const i=On(),[o,a]=ee.useState(!1);return F.jsxs(zs,{onClose:()=>t.reject(Gn),title:n,css:{gap:3},children:[r,F.jsx(yi,{onClick:()=>t.resolve(o),children:i.formatMessage({id:"Got it!"})}),e!=="welcome"&&F.jsxs(Te,{as:"label",css:{gap:1,flexDirection:"row",cursor:"pointer",alignItems:"flex-end"},children:[F.jsx("input",{type:"checkbox",checked:o,onChange:()=>a(!o)}),F.jsx(mt,{as:"small",children:i.formatMessage({id:"I don't want to see tips anymore"})})]})]})},hi={settingsIcon:F.jsx(Ii,{icon:r4}),accountIcon:F.jsx(Ii,{icon:o4}),menuIcon:F.jsx(Ii,{icon:t4}),galleryIcon:F.jsx(Ii,{icon:e4}),shareIcon:F.jsx(Ii,{icon:i4}),createIcon:F.jsx(Ii,{icon:n4}),leaderboardIcon:F.jsx(Ii,{icon:ZU}),starIcon:F.jsx(Ii,{icon:Pu}),br:()=>F.jsx("br",{})},tre=[{id:"particles",predicate:({particles:t})=>t,content:F.jsx(mt,{css:{textAlign:"justify"},children:F.jsx(Jt,{id:"tips.particles",values:hi})})},{id:"menu",content:F.jsx(mt,{css:{textAlign:"justify"},children:F.jsx(Jt,{id:"tips.menu",values:hi})})},{id:"gallery",content:F.jsx(mt,{css:{textAlign:"justify"},children:F.jsx(Jt,{id:"tips.gallery",values:hi})})},{id:"difficulty",predicate:({showBackgroundPattern:t})=>t,content:F.jsx(mt,{css:{textAlign:"justify"},children:F.jsx(Jt,{id:"tips.difficulty",values:hi})})},{id:"theme",predicate:({themeKey:t})=>t!=="dark",content:F.jsx(mt,{css:{textAlign:"justify"},children:F.jsx(Jt,{id:"tips.theme",values:hi})})},{id:"sound",predicate:({soundEnabled:t})=>t,content:F.jsx(mt,{css:{textAlign:"justify"},children:F.jsx(Jt,{id:"tips.sound",values:hi})})},{id:"account1",predicate:({currentUser:t})=>!t,content:F.jsx(mt,{css:{textAlign:"justify"},children:F.jsx(Jt,{id:"tips.account1",values:hi})})},{id:"account2",predicate:({currentUser:t})=>!t,content:F.jsx(mt,{css:{textAlign:"justify"},children:F.jsx(Jt,{id:"tips.account2",values:hi})})},{id:"stars",predicate:({currentUser:t})=>t,content:F.jsx(mt,{css:{textAlign:"justify"},children:F.jsx(Jt,{id:"tips.stars",values:hi})})},{id:"create",predicate:({currentUser:t,approvedTangrams:e,isTangramCompleted:n})=>{if(t){let r=0;for(const{id:i}of e)if(n(i)&&(r+=1,r===10))return!0}return!1},content:F.jsx(mt,{css:{textAlign:"justify"},children:F.jsx(Jt,{id:"tips.create",values:hi})})},{id:"share",content:F.jsx(mt,{css:{textAlign:"justify"},children:F.jsx(Jt,{id:"tips.share",values:hi})})},{id:"card",content:F.jsx(mt,{css:{textAlign:"justify"},children:F.jsx(Jt,{id:"tips.card",values:hi})})},{id:"leaderboard",content:F.jsx(mt,{css:{textAlign:"justify"},children:F.jsx(Jt,{id:"tips.leaderboard",values:hi})})}],nre=({children:t})=>{const e=On(),n=ee.useContext(ko),[r,i]=ee.useState(null),[o,a]=ee.useState(!0),{soundEnabled:c}=ee.useContext(Ro),[f]=y4(),[v]=$x(),{currentUser:y}=ee.useContext(qr),{approvedTangrams:b}=ee.useContext(Bu),{isTangramCompleted:E}=ee.useContext(ji);ee.useEffect(()=>{a(window.localStorage.getItem("hideTips")===null)},[]),ee.useEffect(()=>{o?window.localStorage.removeItem("hideTips"):window.localStorage.setItem("hideTips",!0)},[o]);const I=()=>{let ue=[];const oe=localStorage.getItem("seenTips");if(oe)try{const fe=JSON.parse(oe);if(!Array.isArray(fe))throw new Error("Invalid data for seenTips : "+fe);ue=fe}catch{localStorage.removeItem("seenTips")}return ue},L=ee.useCallback(ue=>{const oe=I(),fe=new ra;return i({deferred:fe,tip:ue}),fe.promise.then(me=>{me&&a(!1)}).finally(()=>{localStorage.setItem("seenTips",JSON.stringify([...oe,ue.id])),i(null)})},[]),D=ee.useCallback(()=>{!o||I().includes("welcome")||(!y||!b.some(oe=>E(oe.id)))&&L({id:"welcome",title:F.jsx(to,{children:F.jsx(Jt,{id:"Welcome to Amstangram",values:hi})}),content:F.jsx(mt,{css:{textAlign:"justify"},children:F.jsx(Jt,{id:"tips.welcome",values:hi})})})},[L,o,y,b,E]),te=ee.useCallback(()=>{if(!o)return;const ue=I(),oe=tre.filter(({id:me,predicate:he=()=>!0})=>!ue.includes(me)&&he({themeKey:f,showBackgroundPattern:v,currentUser:y,approvedTangrams:b,isTangramCompleted:E,soundEnabled:c}));if(!oe.length)return;const fe=oe[0];L(fe)},[L,b,E,f,y,v,c,o]),z=ee.useCallback(()=>{a(ue=>!ue)},[]),Y=ee.useCallback(()=>{a(!0),window.localStorage.removeItem("seenTips"),n(e.formatMessage({id:"Tips reseted successfuly"}))},[n,e]),K=ee.useMemo(()=>({showRandomTip:te,showWelcome:D,tipsEnabled:o,toggleTips:z,resetTips:Y}),[te,D,o,z,Y]);return F.jsxs(Hx.Provider,{value:K,children:[t,r&&F.jsx(ere,{...r})]})},Dg=20,td=({leftComponent:t,leftValue:e,rightComponent:n,rightValue:r,value:i,onChange:o,invertSounds:a})=>{const{playToggle:c,soundEnabled:f}=ee.useContext(Ro),v=ee.useContext(hs),y=ee.useMemo(()=>i===r?"right":"left",[i,r]),b=()=>{a?f||c({forceSoundEnabled:!0}):c()},E=()=>{o((y==="left"?"right":"left")==="right"?r:e),b()},I=L=>{L!==y&&(o(L==="right"?r:e),b())};return F.jsxs(Te,{css:{flexDirection:"row",justifyContent:"center",alignItems:"center",gap:3},children:[F.jsx(Te,{css:{cursor:"pointer",flex:"1",alignItems:"flex-end"},onClick:()=>I("left"),children:t}),F.jsx(Te,{onClick:E,css:{cursor:"pointer",position:"relative",bg:"inputBackground",width:`${2*Dg}px`,height:`${Dg}px`,borderRadius:"99999px"},children:F.jsx(Te,{css:{position:"absolute",size:`${Dg}px`,borderRadius:"99999px",bg:"dialogText",boxShadow:`0 0 0 2px ${v.colors.inputBackground}`,transition:"left 250ms ease-in-out"},style:{left:y==="left"?0:Dg}})}),F.jsx(Te,{css:{cursor:"pointer",flex:"1",alignItems:"flex-start"},onClick:()=>I("right"),children:n})]})},_4=ee.createContext([!0,()=>{}]),w4=()=>ee.useContext(_4),rre=({children:t})=>{const[e,n]=ee.useState(!0);ee.useEffect(()=>{const o=window.localStorage.getItem("showParticles");if(o===null){n(!0);return}try{const a=JSON.parse(o);n(!!JSON.parse(a))}catch{window.localStorage.removeItem("showParticles")}},[]);const r=ee.useCallback(()=>{const o=!e;n(o),window.localStorage.setItem("showParticles",JSON.stringify(o))},[e]),i=ee.useMemo(()=>[e,r],[e,r]);return F.jsx(_4.Provider,{value:i,children:t})},ire=({deferred:t})=>{const{soundEnabled:e,toggleSound:n}=ee.useContext(Ro),{tipsEnabled:r,toggleTips:i,resetTips:o}=ee.useContext(Hx),[a,c]=$x(),[f,v]=w4(),{language:y,setLanguage:b}=ee.useContext(Gx),E=On(),[I,L]=y4(),D=te=>{b(te.target.value)};return F.jsxs(zs,{title:F.jsx(to,{children:E.formatMessage({id:"Settings"})}),onClose:()=>t.reject(Gn),css:{gap:4},children:[F.jsxs(Te,{css:{gap:3},children:[F.jsxs(Te,{css:{gap:2},children:[F.jsx("label",{children:E.formatMessage({id:"Language"})}),F.jsx(Xn,{as:"select",onChange:D,value:y,children:X1.map(te=>F.jsx("option",{value:te,children:E.formatMessage({id:te})},te))})]}),F.jsxs(Te,{css:{gap:2},children:[F.jsx("label",{children:E.formatMessage({id:"Difficulty"})}),F.jsx(td,{value:a,onChange:c,leftComponent:F.jsx(mt,{children:E.formatMessage({id:"Easy"})}),leftValue:!0,rightComponent:F.jsx(mt,{children:E.formatMessage({id:"Hard"})}),rightValue:!1})]}),F.jsxs(Te,{css:{gap:2},children:[F.jsx("label",{children:E.formatMessage({id:"Theme"})}),F.jsx(td,{value:I,onChange:L,leftComponent:F.jsx(Te,{as:Kte,css:{size:"icon"}}),leftValue:"light",rightComponent:F.jsx(Te,{as:$te,css:{size:"icon"}}),rightValue:"dark"})]}),F.jsxs(Te,{css:{gap:2},children:[F.jsx("label",{children:E.formatMessage({id:"Sounds"})}),F.jsx(td,{invertSounds:!0,value:e,onChange:n,leftComponent:F.jsx(Te,{as:Xte,css:{size:"icon"}}),leftValue:!1,rightComponent:F.jsx(Te,{as:Yte,css:{size:"icon"}}),rightValue:!0})]}),F.jsxs(Te,{css:{gap:2},children:[F.jsx("label",{children:E.formatMessage({id:"Show particles"})}),F.jsx(td,{value:f,onChange:v,leftComponent:F.jsx(mt,{children:E.formatMessage({id:"Yes"})}),leftValue:!0,rightComponent:F.jsx(mt,{children:E.formatMessage({id:"No"})}),rightValue:!1})]}),F.jsxs(Te,{css:{gap:2},children:[F.jsx("label",{children:E.formatMessage({id:"Show tips"})}),F.jsx(td,{value:r,onChange:i,leftComponent:F.jsx(mt,{children:E.formatMessage({id:"Yes"})}),leftValue:!0,rightComponent:F.jsx(mt,{children:E.formatMessage({id:"No"})}),rightValue:!1})]})]}),F.jsx(ane,{onClick:o,children:E.formatMessage({id:"Reset tips"})})]})},Jp=ee.createContext(),ore=({children:t})=>{const{initialized:e}=ee.useContext(qr),{playlist:n,setPlaylist:r,startRandomPlaylist:i,initialized:o}=ee.useContext(ji),{initialized:a,approvedTangrams:c}=ee.useContext(Bu),[f,v]=ee.useState(!1),[y,b]=ee.useState(null),E=ee.useCallback(async it=>{const xe=new ra;b({uid:it,deferred:xe});try{await xe.promise}catch(_t){if(_t!==Gn)throw _t}finally{b(null)}},[]),[I,L]=ee.useState(null),D=ee.useCallback(async()=>{const it=new ra;L(it);try{await it.promise}catch(xe){if(xe!==Gn)throw xe}finally{L(null)}},[]),[te,z]=ee.useState(null),Y=ee.useCallback(async()=>{const it=new ra;z(it);try{await it.promise}catch(xe){if(xe!==Gn)throw xe}finally{z(null)}},[]),[K,ue]=ee.useState(null),oe=ee.useCallback(async()=>{const it=new ra;ue(it);try{await it.promise}catch(xe){if(xe!==Gn)throw xe}finally{ue(null)}},[]),[fe,me]=ee.useState(null),he=ee.useCallback(async it=>{const xe=new ra;me({deferred:xe,tangram:it});try{await xe.promise}catch(_t){if(_t!==Gn)throw _t}finally{me(null)}},[]),[Z,be]=ee.useState(null),Ue=ee.useCallback(async()=>{const it=new ra;be(it);try{await it.promise}catch(xe){if(xe!==Gn)throw xe}finally{be(null)}},[]),[Ge,ft]=ee.useState(null);ee.useEffect(()=>{(async()=>{if(a&&o&&e&&!f){let xe=!1;if(!n&&window.location.search){const _t=new URLSearchParams(window.location.search);if(_t.has("tangrams")){const Fe=_t.get("tangrams").split(","),Ne=_t.get("uid"),qe=c.filter(Ct=>Fe.includes(Ct.id));if(qe.length){window.history.replaceState({},document.title,window.location.origin);const Ct=new ra;ft({deferred:Ct,tangrams:qe,uid:Ne});try{await Ct.promise,xe=!0,r(qe)}catch(tt){if(tt!==Gn)throw tt}finally{ft(null)}}}}xe||i(!0),v(!0)}})()},[a,o,e,f]);const Le=ee.useMemo(()=>({showProfile:E,showLeaderboard:D,showGallery:Y,showLogin:oe,showTangram:he,showSettings:Ue}),[E,D,Y,oe,he,Ue]);return F.jsxs(Jp.Provider,{value:Le,children:[t,K&&F.jsx(Dne,{deferred:K}),te&&F.jsx(dne,{deferred:te}),fe&&F.jsx(Xne,{...fe}),y&&F.jsx(qne,{...y}),I&&F.jsx(pne,{deferred:I}),Ge&&F.jsx(hne,{...Ge}),Z&&F.jsx(ire,{deferred:Z})]})},jc=({action:t,icon:e,text:n})=>{const{playButton:r}=ee.useContext(Ro);return F.jsxs(Te,{css:{alignItems:"center",flexDirection:"row",gap:3,cursor:"pointer",py:3},onClick:()=>{r(),t()},children:[F.jsx(Te,{as:e,css:{size:"icon"}}),F.jsx(mt,{css:{fontSize:3},children:n})]})},sre=()=>{const{playlist:t,saveRequestId:e}=ee.useContext(ji),{currentUser:n}=ee.useContext(qr),{playButton:r}=ee.useContext(Ro),i=On(),{showLeaderboard:o,showGallery:a,showLogin:c,showProfile:f,showSettings:v}=ee.useContext(Jp),[y,b]=ee.useState();ee.useEffect(()=>{y&&y.reject(Gn)},[t,e]);const{requestSave:E}=ee.useContext(ji),I=async()=>{r();const te=new ra;b(te);try{await te.promise}catch(z){if(z!==Gn)throw z}finally{b(null)}},L=fm({0:{color:"pieces.lt2"},14:{color:"pieces.rh"},28:{color:"pieces.st2"},42:{color:"pieces.mt1"},57:{color:"pieces.st1"},71:{color:"pieces.lt1"},85:{color:"pieces.sq"},100:{color:"pieces.lt2"}}),D=fm({from:{transform:"translate(0, 0)"},to:{transform:"translate(30px, -30px)"}});return F.jsxs(F.Fragment,{children:[F.jsx(Te,{css:{position:"fixed",top:3,left:3,animation:`${L} 20s linear infinite both`},children:F.jsx(Te,{as:t4,css:{size:"menu",cursor:"pointer"},onClick:I})}),y&&F.jsxs(zs,{onClose:()=>y.reject(Gn),title:F.jsxs(Te,{css:{flexDirection:"row",gap:3,alignItems:"center"},children:[F.jsx(KM,{css:{size:"badge",ml:"-2px",mr:"-6px",overflow:"visible","& > g":{animation:`${D} ${go}ms ${Wb}ms ease both`}}}),F.jsx(to,{children:i.formatMessage({id:"Amstangram"})})]}),css:{gap:3,overflow:"initial"},children:[F.jsxs(Te,{children:[n?F.jsx(jc,{action:()=>f(n.uid),icon:()=>F.jsx(L_,{css:{mx:-1},uid:n.uid,size:"badge"}),text:i.formatMessage({id:"See my profile"})}):F.jsx(jc,{action:c,icon:o4,text:i.formatMessage({id:"Log in"})}),F.jsx(jc,{action:a,icon:e4,text:i.formatMessage({id:"Tangram gallery"})}),F.jsx(jc,{action:E,icon:n4,text:i.formatMessage({id:"Save tangram"})}),F.jsx(jc,{action:o,icon:ZU,text:i.formatMessage({id:"Leaderboard"})}),F.jsx(jc,{action:v,icon:r4,text:i.formatMessage({id:"Settings"})})]}),F.jsxs(Te,{css:{flexDirection:"row",alignItems:"baseline",justifyContent:"space-between"},children:[F.jsx(ca,{as:sP,href:`mailto:millagou.benjamin@gmail.com?subject=${i.formatMessage({id:"A word about Amstangram"})}`,target:"_blank",rel:"noopener, noreferrer",children:i.formatMessage({id:"Contact "})}),F.jsx(ca,{as:sP,href:"https://github.com/myagoo/amstangram",target:"_blank",rel:"noopener, noreferrer",children:i.formatMessage({id:"Version {code}"},{code:".."})})]})]})]})},bp=(t,e)=>{const n=new window.ClipperLib.ClipperOffset,r=new window.ClipperLib.Paths;if(n.AddPaths([t.map(({x:i,y:o})=>({X:i,Y:o}))],window.ClipperLib.JoinType.jtMiter,window.ClipperLib.EndType.etClosedPolygon),n.MiterLimit=0,n.ArcTolerance=0,n.Execute(r,e),r.length)return r[0].map(({X:i,Y:o})=>new ut.Point(i,o))},are=t=>{const e=t[1].getDistance(t[2]),n=t[0].getDistance(t[2]),r=t[0].getDistance(t[1]),i=e+n+r,o=(t[0].x*e+t[1].x*n+t[2].x*r)/i,a=(t[0].y*e+t[1].y*n+t[2].y*r)/i;return new ut.Point(o,a)},nd=(t,e)=>{const n=[new ut.Point(0,0),new ut.Point(t*2,0),new ut.Point(t,t)],r=new ut.Path({name:"display",segments:n,closed:!0}),i=new ut.Path({name:"collision",segments:bp(n,-ml),closed:!0}),o=new ut.Path({name:"insetBorder",segments:bp(n,-sa),closed:!0,strokeWidth:sa}),a=are(n),c=new ut.Point(ut.view.center.x+a.x-r.bounds.width/2,ut.view.center.y+a.y-r.bounds.height/2);return new ut.Group({children:[r,i,o],position:ut.view.center,pivot:c,data:{id:e,collisions:new Set},applyMatrix:!0})},ure=(t,e)=>{const n=[new ut.Point(0,0),new ut.Point(t*2,0),new ut.Point(t*3,t),new ut.Point(t,t)],r=new ut.Path({name:"display",segments:n,closed:!0}),i=new ut.Path({name:"collision",segments:bp(n,-ml),closed:!0,strokeWidth:ml}),o=new ut.Path({name:"insetBorder",segments:bp(n,-sa),closed:!0,strokeWidth:sa});return new ut.Group({children:[r,i,o],position:ut.view.center,data:{id:e,collisions:new Set},applyMatrix:!0})},lre=(t,e)=>{const n=new ut.Path.Rectangle({name:"display",point:[0,0],size:[t,t]}),r=new ut.Path.Rectangle({name:"collision",point:[ml,ml],size:[t-ml*2,t-ml*2]}),i=new ut.Path.Rectangle({name:"insetBorder",point:[sa,sa],size:[t-sa*2,t-sa*2],strokeWidth:sa});return new ut.Group({children:[n,r,i],position:ut.view.center,data:{id:e,collisions:new Set},applyMatrix:!0,rotation:Math.round(Math.random()*7)*45})},cre=()=>{const t=r8,e=Math.sqrt(Math.pow(t,2)*2),n=Math.sqrt(Math.pow(e,2)*2);return new ut.Group([nd(t,"st1"),nd(t,"st2"),nd(e,"mt1"),nd(n,"lt1"),nd(n,"lt2"),lre(e,"sq"),ure(t,"rh")])},hre=(t,e)=>{let n;for(const f of t.children){const v=f.children.display;n?n=n.unite(v,{insert:!1}):n=v}n.scale(1/e),n.position=new ut.Point(n.bounds.width/2,n.bounds.height/2);const r=n.exportSVG().getAttribute("d"),i=n.curves.length,o=Math.round(n.bounds.width),a=Math.round(n.bounds.height),c=Math.round(n.length);return n.remove(),{width:o,height:a,length:c,path:r,edges:i}},SP=(t,e,n)=>{const r={x:n.x-e.x,y:n.y-e.y},i={x:t.x-e.x,y:t.y-e.y},o=r.x*r.x+r.y*r.y;let a=i.x*r.x+i.y*r.y;const c=Math.min(1,Math.max(0,a/o));return a=(n.x-e.x)*(t.y-e.y)-(n.y-e.y)*(t.x-e.x),new ut.Point(e.x+r.x*c,e.y+r.y*c)},TP=(t,e,n)=>{for(const r of e)for(const{point:i}of r.segments)for(const{point:o}of t.segments){const a=o.getDistance(i);a<n.distance&&(n.distance=a,n.shape=r,n.vector=i.subtract(o))}if(!n.vector)for(const r of e){for(const{point:i}of t.segments)for(const{point:o,next:{point:a}}of r.segments){const c=SP(i,o,a),f=c.getDistance(i);f<n.distance&&(n.distance=f,n.vector=c.subtract(i),n.shape=r,n.segment=[o,a],n.point=i)}for(const{point:i}of r.segments)for(const{point:o,next:{point:a}}of t.segments){const c=SP(i,o,a),f=c.getDistance(i);f<n.distance&&(n.distance=f,n.vector=i.subtract(c),n.shape=t,n.segment=[o,a])}}return n},IP=(t,e,n)=>{if(n.segment){let r=n.maxDistance,i;const[o,a]=n.segment,c=Math.atan2(a.y-o.y,a.x-o.x),f=Math.atan2(o.y-a.y,o.x-a.x);for(const v of[c,f])for(const{point:y}of t.segments){if(y===n.point)continue;const b=y.add(n.vector),E=new ut.Point(b.x+n.maxDistance*Math.cos(v),b.y+n.maxDistance*Math.sin(v)),I=new ut.Path.Line({from:b,to:E,insert:!1});for(const L of e){const D=I.getIntersections(L);for(const{point:te}of D){const z=te.subtract(b).add(n.vector);z.length<n.maxDistance&&z.length<=r&&(r=z.length,i=z)}}}i&&(n.vector=i)}},fre=(t,e,n,r)=>{let i={maxDistance:t,distance:t};return TP(e,n,i),r&&TP(e,r,i),IP(e,n.filter(o=>o.shape!==i.shape),i),r&&IP(e,r,i),i.vector},dre=(t,e,n)=>{let r=t;for(const i of e.children){if(i.data.collisions.size>0)return;r=r.unite(new ut.Path({segments:bp(i.children.display.segments.map(({point:o})=>o),-n),closed:!0,insert:!1}),{insert:!1})}return Math.round(r.length*1e3)===Math.round(t.length*1e3)},pre=t=>{for(const e of t.children)if(e.data.collisions.size>0)return!1;return!0},Lg=(t,e)=>{const n=t.pivot?t.pivot.subtract(t.bounds.center):new ut.Point;t.bounds.x<0&&(t.position.x=t.bounds.width/2+n.x),t.bounds.y<0&&(t.position.y=t.bounds.height/2+n.y),t.bounds.x+t.bounds.width>e.width/window.devicePixelRatio&&(t.position.x=e.width/window.devicePixelRatio-t.bounds.width/2+n.x),t.bounds.y+t.bounds.height>e.height/window.devicePixelRatio&&(t.position.y=e.height/window.devicePixelRatio-t.bounds.height/2+n.y)},vre=(t,e)=>{const n=new ut.Point(ut.project.view.bounds.width,ut.project.view.bounds.height).subtract(Fk*2);if(t.position=ut.Point.random().multiply(n).add(Fk),t.data.id==="rh"){const r=Math.round(Math.random()*3)*45;t.rotation=r,t.data.rotation=r}else t.rotation=Math.round(Math.random()*7)*45},xP=(t,e)=>e.segments.every(n=>t.contains(n.point)),Lb=(t,e)=>{for(const r of e.children){if(r===t)continue;const i=t.children.collision,o=r.children.collision;i.intersects(o)||xP(i,o)||xP(o,i)?(t.data.collisions.add(r.data.id),r.data.collisions.add(t.data.id)):(t.data.collisions.delete(r.data.id),r.data.collisions.delete(t.data.id))}let n=!0;for(const r of e.children)r.data.collisions.size>0?(n=!1,r.children.display.opacity=i8):r.children.display.opacity=1;return n},gre=({tangram:t,onStop:e,onNext:n,onApprove:r,onStarToggle:i})=>{const o=On(),[a,c]=ee.useState(!1),{playStar:f}=ee.useContext(Ro),{tangramsStarredBy:v,isTangramStarred:y}=ee.useContext(ji),b=ee.useMemo(()=>{let D=0;for(const te in v[t.id])v[t.id][te]&&(D+=1);return D},[t,v]),E=y(t.id),I=fm({0:{opacity:"0",transform:"rotate(0) scale(0)"},100:{opacity:1,transform:`rotate(${360*5}deg) scale(1)`}}),L=()=>{setTimeout(()=>c(!0),1e3)};return F.jsx(Te,{css:{position:"absolute",top:0,left:0,right:0,bottom:0,alignItems:"center",justifyContent:"center",gap:3},children:F.jsxs(Te,{css:{position:"relative"},children:[F.jsx(Te,{onAnimationEnd:L,css:{textShadow:"0px 5px 10px #00000080",fontSize:"30vmin",animation:`2000ms ${I} cubic-bezier(.6,1.56,.58,.92) forwards`},children:t.emoji},"emojiSpin"),a&&F.jsxs(Te,{css:{mt:3,position:"absolute",top:"100%",left:"50%",transform:"translateX(-50%)",flexDirection:"row",gap:3,animation:`${go}ms fadeIn ease both`},children:[r&&F.jsxs(Te,{as:yi,onClick:r,css:{boxShadow:"0px 5px 10px #00000080",flexDirection:"row",gap:2,alignItems:"flex-end"},children:[F.jsx(Te,{as:Gte,css:{size:"icon"}}),F.jsx(mt,{children:o.formatMessage({id:"Approve"})})]}),i&&F.jsxs(Te,{as:yi,mute:!0,onClick:()=>{f(),i()},css:{boxShadow:"0px 5px 10px #00000080",flexDirection:"row",gap:2,alignItems:"flex-end"},children:[F.jsx(mt,{children:b}),F.jsx(Te,{as:Pu,css:{size:"icon",fill:E?"currentColor":void 0},deps:[E]})]}),n?F.jsxs(Te,{as:yi,onClick:n,css:{boxShadow:"0px 5px 10px #00000080",flexDirection:"row",gap:2,alignItems:"flex-end"},children:[F.jsx(Te,{as:Hte,css:{size:"icon"}}),F.jsx(mt,{children:o.formatMessage({id:"Next"})})]}):F.jsxs(Te,{as:yi,onClick:e,css:{boxShadow:"0px 5px 10px #00000080",flexDirection:"row",gap:2,alignItems:"flex-end"},children:[F.jsx(Te,{as:s4,css:{size:"icon"}}),F.jsx(mt,{children:o.formatMessage({id:"Quit"})})]})]})]})})},mre=()=>{const t=On(),{showRandomTip:e,showWelcome:n}=ee.useContext(Hx),{showLogin:r,showTangram:i}=ee.useContext(Jp),{playTangram:o,playVictory:a}=ee.useContext(Ro),c=ee.useRef();c.current={tangram:o,victory:a};const{currentUser:f}=ee.useContext(qr),v=ee.useRef();v.current=f;const y=ee.useContext(hs),b=ee.useContext(ko),[E]=$x(),[I]=w4(),{saveRequestId:L,playlist:D,setPlaylist:te,markTangramAsComplete:z,toggleTangramStar:Y}=ee.useContext(ji),K=ee.useRef();K.current=z;const[ue,oe]=ee.useState(0),[fe,me]=ee.useState(!1),he=ee.useRef(),Z=ee.useRef(),be=ee.useRef(),Ue=ee.useRef(),Ge=ee.useRef(),ft=ee.useRef(),Le=ee.useRef(),it=ee.useMemo(()=>D&&D[ue],[D,ue]),xe=()=>{me(!1),oe(ue+1),e()},_t=()=>{me(!1),te(null),e()},Fe=async()=>{await ze.firestore().collection("tangrams").doc(it.id).update({approved:!0}),b(t.formatMessage({id:"Tangram approved"}))};return ee.useEffect(()=>{oe(0)},[D]),ee.useEffect(()=>{if(L){if(!pre(be.current)){b(t.formatMessage({id:"You can't save an invalid tangram"}));return}const Ne=hre(be.current,Z.current);if(Ne.edges===23){b(t.formatMessage({id:"You can't save such an easy tangram"}));return}(async()=>{f||await r(),await i(Ne)})()}},[L]),ee.useEffect(()=>{const Ne=()=>{if(he.current&&be.current)for(const qe of be.current.children)Lg(qe,he.current)};return window.addEventListener("resize",Ne),()=>window.removeEventListener("resize",Ne)},[]),ee.useLayoutEffect(()=>{const Ne=Date.now(),qe=tt=>{let Xt=null,Nt=null,Wt=null,Pn=null;const Dt=je=>{document.activeElement===he.current&&(document.body.style.cursor="pointer")},qs=je=>{document.body.style.cursor="default"},ce=je=>{Wt=Date.now(),Pn=je.point,Xt=je.point.subtract(tt.position),Nt=tt.clone({insert:!1,deep:!0}),tt.bringToFront()},ge=je=>{document.body.style.cursor="move";const Ve=je.point.subtract(tt.position).subtract(Xt);Nt.position=tt.position.add(Ve);const He=Nt.children["display 1"],zt=be.current.children.filter(Oo=>Oo!==tt).map(({children:Oo})=>Oo.display),ri=ft.current&&Ge.current?Ge.current.children?Ge.current.children:[Ge.current]:null,ao=fre(Mk,He,zt,ri);ao&&(Nt.position.x+=ao.x,Nt.position.y+=ao.y),Lg(Nt,he.current),tt.position=Nt.position,Lb(tt,be.current)},_e=je=>{if(document.body.style.cursor="pointer",je.point.subtract(Pn).length<Mk&&Date.now()-Wt<a8&&(tt.rotation+=45,tt.data.id==="rh"&&(tt.data.rotation+=45,tt.data.rotation===180&&(tt.data.rotation=0,tt.scale(-1,1))),c.current.tangram(),Lg(tt,he.current),Lb(tt,be.current),Wt=null,Pn=null),Xt=null,Nt&&Nt.remove(),Nt=null,!!Ge.current&&(ft.current===!1&&(Ge.current.position=be.current.position),dre(Ge.current,be.current,ft.current?o8:s8))){K.current(it,Date.now()-Ne);for(const Pe of be.current.children)Pe.data.removeListeners();if(document.body.style.cursor="default",!Le.current){c.current.victory(),me(!0);return}ut.project.activeLayer.tween({opacity:0},{duration:Jv,easing:"easeInCubic"});for(const Pe of Ue.current)Pe.data.animation.stop(),Pe.tween({"position.x":be.current.position.x,"position.y":be.current.position.y,opacity:Bk},{duration:Jv,easing:"easeInCubic"});setTimeout(()=>{c.current.victory(),ut.project.activeLayer.tween({opacity:1},{duration:go,easing:"easeOutCubic"});const Pe=Math.max(ut.view.bounds.width,ut.view.bounds.height)/2;for(const Ve of Ue.current){Ve.data.animation.stop();const He=Math.random()*Math.PI*2,zt=Math.random()*Pe;Ve.tween({"position.x":Ve.position.x+zt*Math.cos(He),"position.y":Ve.position.y+zt*Math.sin(He),opacity:0},{duration:Jv,easing:"easeOutCubic"})}me(!0)},Jv)}};tt.on({mouseenter:Dt,mouseleave:qs,mousedown:ce,mousedrag:ge,mouseup:_e}),tt.data.removeListeners=()=>tt.off({mouseenter:Dt,mouseleave:qs,mousedown:ce,mousedrag:ge,mouseup:_e})};return(()=>{ut.setup(he.current),be.current=cre(),it&&(Ge.current=ut.project.importSVG(`<path d="${it.path}" />`,{applyMatrix:!0}),Ge.current.sendToBack(),Ge.current.fillRule="evenodd",Ge.current.closed=!0);const tt=ut.project.view.bounds,Xt=Ge.current?Ge.current.bounds:be.current.children[3].bounds.scale(2);tt.width>tt.height?Z.current=Math.min(2,Math.min(tt.width*.7,700)/Xt.width,Math.min(tt.height*.8,600)/Xt.height):Z.current=Math.min(2,Math.min(tt.width*.8,600)/Xt.width,Math.min(tt.height*.7,700)/Xt.height),Ge.current&&(Ge.current.scale(Z.current),Ge.current.position=ut.view.center);for(const Nt of be.current.children)Nt.scale(Z.current),vre(Nt,he.current),qe(Nt),Lg(Nt,he.current),Lb(Nt,be.current)})(),()=>{ut.project.remove(),Ue.current=null,be.current=null,Ge.current=null}},[it]),ee.useLayoutEffect(()=>{ft.current=E,Ge.current&&(E?(Ge.current.fillColor=y.colors.shape,Ge.current.position=ut.view.center):Ge.current.fillColor="transparent")},[it,E,y]),ee.useLayoutEffect(()=>{if(Le.current=I,!I)return;const Ne=new ut.Group;Ne.sendToBack();const qe=new ut.Point(he.current.width,he.current.height).divide(window.devicePixelRatio),Ct=()=>Math.random()*(u8-Uk)+Uk,tt=()=>Math.random()*(Bk-Vk)+Vk;Ue.current=new Array(jk);for(let Xt=0;Xt<jk;Xt++){const Nt=new ut.Path.Circle({center:ut.Point.random().multiply(qe),radius:Ct(),opacity:tt(),parent:Ne,data:{index:Xt}}),Wt=()=>{const Pn={radius:Ct(),opacity:tt(),"position.x":Math.min(he.current.width/window.devicePixelRatio,Math.max(0,Nt.position.x+Math.random()*200-100)),"position.y":Math.min(he.current.height/window.devicePixelRatio,Math.max(0,Nt.position.y+Math.random()*200-100))};Nt.data.animation=Nt.tween(Pn,{duration:Math.random()*1e4+5e3,easing:"easeInOutQuad"}).then(Wt)};Wt(),Ue.current[Xt]=Nt}return()=>{Ne.remove(),Ue.current=null}},[it,I]),ee.useLayoutEffect(()=>{for(const qe of be.current.children)qe.children.display.fillColor=y.colors.pieces[qe.data.id],qe.children.insetBorder.strokeColor=y.colors.pieces[qe.data.id];const Ne=Object.values(y.colors.pieces);if(I)for(const qe of Ue.current)qe.fillColor=Ne[Math.floor(Math.random()*Ne.length)]},[y.colors,it,I]),ee.useEffect(()=>{n()},[]),F.jsxs(Te,{css:{flex:"1",position:"relative",color:"dialogText",animation:`${go}ms fadeIn ease`},children:[it&&E===!1&&F.jsx(Te,{css:{zIndex:-1,position:"absolute",top:3,right:3,cursor:"pointer"},children:F.jsx(Xp,{tangram:it,selected:!0,hideBadge:!0})}),F.jsx(Te,{as:"canvas",ref:he,css:{minHeight:"auto",flex:1}}),it&&fe&&F.jsx(gre,{tangram:it,onStop:_t,onNext:ue<D.length-1?xe:void 0,onApprove:f&&f.isAdmin&&!it.approved?Fe:void 0,onStarToggle:f&&it.approved?()=>Y(it):void 0})]})},yre=()=>{const t=On(),e=ee.useContext(ko),[n,r]=ee.useState(!1),[i,o]=ee.useState(!1),[a,c]=ee.useState(!1),[f,v]=ee.useState(!1),{initialized:y}=ee.useContext(Bu),{playlist:b,initialized:E}=ee.useContext(ji),{currentUser:I,initialized:L}=ee.useContext(qr),D=L&&y&&E&&b;if(ee.useEffect(()=>{setTimeout(()=>r(!0),go*2),c(setTimeout(()=>o(!0),go*2))},[]),ee.useEffect(()=>{D&&(clearTimeout(a),o(!1))},[D]),f)return F.jsxs(F.Fragment,{children:[F.jsx(mre,{}),F.jsx(sre,{})]});const te=()=>{v(!0),I&&e(t.formatMessage({id:"Logged in as {username}"},{username:I.username}))};return F.jsxs(Te,{css:{flex:"1",alignItems:"center",justifyContent:"center",gap:3,animation:D&&n?`${go}ms fadeIn ease ${Wb}ms forwards reverse`:void 0},deps:[D,n],onAnimationEnd:z=>{z.currentTarget===z.target&&te()},children:[F.jsx(Te,{css:{animation:`${go}ms fadeIn ease ${Wb}ms both`},children:F.jsx(KM,{css:{size:"logo",overflow:"visible","& > g":{transition:`all ${go}ms ease`,transform:D&&n?"translate(30px, -30px)":"translate(0, 0)"}},deps:[D,n]})}),F.jsx(to,{css:{transition:`opacity ${go}ms ease`,opacity:i?1:0},deps:[i],children:t.formatMessage({id:"Loading..."})})]})};navigator.serviceWorker.getRegistrations().then(function(t){for(let e of t)e.unregister()});const _re=()=>(ee.useEffect(()=>{matchMedia("hover: none").matches&&(window.oncontextmenu=function(){return!1})},[]),C8({body:{m:0,bg:"background",fontFamily:`-apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto",
        "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans",
        "Helvetica Neue", sans-serif`,"-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale",transition:`background-color ${cm}ms`},"body, html, #root":{height:"100%"},"#root":{display:"flex",flexDirection:"column",padding:`
        env(safe-area-inset-top, 0)
        env(safe-area-inset-right, 0)
        env(safe-area-inset-bottom, 0)
        env(safe-area-inset-left, 0)
      `},"*":{boxSizing:"border-box",userSelect:"none","-moz-user-select":"none","-khtml-user-select":"none","-webkit-user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)"},"input, textarea":{"-webkit-user-select":"initial","-moz-user-select":"initial","-ms-user-select":"initial",userSelect:"initial"}}),F.jsx(sne,{children:F.jsx(Une,{children:F.jsx(Mte,{children:F.jsx(Fte,{children:F.jsx(Bte,{children:F.jsx(Qne,{children:F.jsx(rre,{children:F.jsx(zte,{children:F.jsx(nre,{children:F.jsx(ore,{children:F.jsx(Te,{css:{flex:"1",color:"dialogText",fontSize:3},children:F.jsx(yre,{})})})})})})})})})})})}));Jb.createRoot(document.getElementById("root")).render(F.jsx(Zne,{children:F.jsx(_re,{})}));export{CP as c,NP as g};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}