(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{0:function(e,t){},1:function(e,t){},"8Ymh":function(e,t,r){e.exports=r.p+"static/clap-083856b66ccbb1cf6692425f9dbe9b0b.wav"},Hrb7:function(e,t,r){e.exports=r.p+"static/button-14ce515d099e43f117dc184a4b22a8a7.wav"},JtUg:function(e){e.exports=JSON.parse('{"Language":"Language","Theme":"Theme","Logged in as {username}":"Logged in as {username}","en":"English","fr":"French","Settings":"Settings","Difficulty":"Difficulty","Easy":"Easy","Hard":"Hard","Reset data":"Reset data","You are about to delete all your completion data. Are you sure you want to proceed ?":"You are about to delete all your completion data. Are you sure you want to proceed ?","Tangram approved":"Tangram approved","You can\'t save an invalid tangram":"You can\'t save an invalid tangram","You can\'t save such an easy tangram":"You can\'t save such an easy tangram","This tangram already exists":"This tangram already exists","Tangram submitted for review":"Tangram submitted for review","Logged out":"Logged out","Tangram gallery":"Tangram gallery","Pending approbation":"Pending approbation","{username}\'s tangrams":"{username}\'s tangrams","Play now !":"Play now !","Start 1 tangram !":"Start 1 tangram !","Start {count} tangrams !":"Start {count} tangrams !","Password is too weak":"Password is too weak","Email address already in use":"Email address already in use","Invalid email address":"Invalid email address","Email address":"Email address","Email address is required":"Email address is required","Username":"Username","Username is required":"Username is required","Password":"Password","Password is required":"Password is required","Confirm password":"Confirm password","Passwords must match":"Passwords must match","Sign me up !":"Sign me up !","I already have an account":"I already have an account","Unknown email address":"Unknown email address","Incorrect password":"Incorrect password","Sign me in !":"Sign me in !","I don\'t have an account":"I don\'t have an account","Create your account":"Create your account","Connect to your account":"Connect to your account","Submit your tangram":"Submit your tangram","Edit your tangram":"Edit your tangram","Category":"Category","Victory emoji":"Victory emoji","Leave empty for random emoji":"Leave empty for random emoji","Order":"Order","Submit !":"Submit !","Edit !":"Edit !","Or delete tangram":"Or delete tangram","animals":"Animals","geometric":"Geometric","digits":"Digits","letters":"Alphabet","people":"People","stuff":"Stuff","Joined {signupDate}":"Joined {signupDate}","Log out":"Log out","Are you sure you want to log out?":"Are you sure you want to log out?","Change email address":"Change email address","Change username":"Change username","Change password":"Change password","Back":"Back","Confirm new password":"Confirm new password","New password":"New password","Current password":"Current password","Password changed sucessfuly":"Password changed sucessfuly","New username":"New username","Username updated sucessfuly":"Username updated sucessfuly","Email address updated sucessfuly":"Email address updated sucessfuly","New email address":"New email address","An error occured, please retry later":"An error occured, please retry later","Sounds":"Sounds","Are you sure you want to delete this tangram ?":"Are you sure you want to delete this tangram ?","Tangram sucessfuly deleted":"Tangram sucessfuly deleted","Challenge link copied to clipboard":"Challenge link copied to clipboard","{username} challenged you":"{username} challenged you","Rise to the challenge":"Rise to the challenge","Let\'s go !":"Let\'s go !","Leaderboard":"Leaderboard","Completed {completed}/{total} tangrams":"Completed {completed}/{total} tangrams","Created {created} tangrams":"Created {created} tangrams","Earned {claps} üëè":"Earned {claps} üëè","Claps":"Claps","Completed tangrams":"Completed tangrams","Created tangrams":"Created tangrams","Claps only count when logged in":"Claps only count when logged in"}')},Lnxd:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));r("ioFf"),r("91GP");var n=r("q1tI"),a={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},o=n.createContext&&n.createContext(a),i=function(){return(i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},c=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&(r[n[a]]=e[n[a]])}return r};function s(e){return function(t){return n.createElement(u,i({attr:i({},e.attr)},t),function e(t){return t&&t.map((function(t,r){return n.createElement(t.tag,i({key:r},t.attr),e(t.child))}))}(e.child))}}function u(e){var t=function(t){var r,a=e.size||t.size||"1em";t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className);var o=e.attr,s=e.title,u=c(e,["attr","title"]);return n.createElement("svg",i({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,o,u,{className:r,style:i({color:e.color||t.color},t.style,e.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&n.createElement("title",null,s),e.children)};return void 0!==o?n.createElement(o.Consumer,null,(function(e){return t(e)})):t(a)}},NczM:function(e,t,r){e.exports=r.p+"static/card-96da3e7a10f4a164c88ac0a09b36ffec.wav"},RXBc:function(e,t,r){"use strict";r.r(t);var n=r("I9K0"),a=r("q1tI"),o=r.n(a);r("91GP"),r("rGqo"),r("yt8O"),r("Btvt"),r("RW0V");var i=Object(n.createPrimitive)("div",(function(e){var t=e.css,r=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,["css"]);return Object.assign({css:Object(n.useGap)(Object.assign({display:"flex",minWidth:0,minHeight:0,flex:"none",alignSelf:"auto",alignItems:"stretch",flexDirection:"column",justifyContent:"flex-start"},t))},r)})),c=function(e){var t=Object(a.useContext)(n.ThemeContext);return o.a.createElement(i,Object.assign({as:"svg",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 467.27 512"},e),o.a.createElement("polygon",{fill:t.colors.shape,points:"352.33 159.67 432.16 239.45 432.16 399.13 319.29 512 93.55 512 159.67 445.87 0 286.25 319.29 286.25 272.55 239.45 272.55 79.84 352.33 0 465.26 112.87 352.33 112.87 352.33 159.67"}),o.a.createElement("g",null,o.a.createElement("polygon",{fill:t.colors.pieces.mt1,points:"272.57 79.84 272.57 239.45 352.36 319.29 432.19 399.13 432.19 239.45 352.36 159.67 352.36 112.87 465.29 112.87 352.36 0 272.57 79.84"}),o.a.createElement("polygon",{fill:t.colors.pieces.st1,points:"93.58 512 319.32 512 432.19 399.13 319.32 286.25 93.58 512"}),o.a.createElement("polygon",{fill:t.colors.pieces.lt2,points:"159.67 445.87 239.48 366.05 319.31 286.24 0.03 286.24 159.67 445.87"})))},s=r("X7BR"),u=(r("VRzm"),r("rE2o"),r("ioFf"),r("XfO3"),r("HEwt"),r("f3/d"),r("a1Th"),r("Vd3H"),r("o0o1")),l=r.n(u),d=(r("ls82"),r("Z2Ku"),r("L9s1"),r("Wcq6")),f=r.n(d);f.a.apps.length||f.a.initializeApp({apiKey:"AIzaSyAHOemftrTSOUjtoA6K3VR2hkOU5H-ScSI",authDomain:"amstangram.firebaseapp.com",databaseURL:"https://amstangram.firebaseio.com",projectId:"amstangram",storageBucket:"amstangram.appspot.com",messagingSenderId:"1075176148116",appId:"1:1075176148116:web:e61e6512cd983a75533881",measurementId:"G-PLH3BSWLM2"});var m=f.a,p=(r("dRSK"),r("pIFo"),{en:r("JtUg"),fr:r("o1Si")});function g(e){var t=0;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(e,t)}(e)))return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var v=["en","fr"],b=Object(a.createContext)({language:"fr",setLanguage:function(){}}),y=function(){var e=Object(a.useContext)(b).languageRef;return Object(a.useCallback)((function(t,r){var n=e.current;if(!p[n]||!p[n][t])return s.DEV&&console.warn("Key "+t+" not found in language "+n),t;if(!r)return p[n][t];var a=p[n][t];for(var o in r)a=a.replace("{"+o+"}",r[o]);return a}),[e])},w=function(e){var t=e.children,r=Object(a.useState)("fr"),n=r[0],i=r[1],c=Object(a.useRef)(n);Object(a.useEffect)((function(){var e=function(){var e=localStorage.getItem("language");if(v.includes(e))return e;for(var t,r=function(){var e=t.value,r=v.find((function(t){return e.includes(t)}));if(r)return{v:r}},n=g(navigator.languages);!(t=n()).done;){var a=r();if("object"==typeof a)return a.v}return"fr"}();i(e),c.current=e}),[]);var s=Object(a.useMemo)((function(){return{language:n,languageRef:c,setLanguage:function(e){i(e),c.current=e}}}),[n]);return o.a.createElement(b.Provider,{value:s},t)},O=r("i8i4"),E=Object(n.extendPrimitive)(i,{fontSize:3,p:2,borderRadius:1,bg:"notificationBackground",color:"dialogText",animation:s.FADE_TRANSITION_DURATION/2+"ms fadeIn both",boxShadow:"0px 0px 10px #00000080"}),x=Object(a.createContext)(null),j=function(e){var t=e.children,r=Object(a.useRef)(),n=Object(a.useState)(null),c=n[0],s=n[1],u=Object(a.useCallback)((function(e){s((function(t){return t&&clearTimeout(t.timeoutId),{content:e,timeoutId:setTimeout((function(){s(null)}),2e3)}}))}),[]);return o.a.createElement(x.Provider,{value:u},t,c&&Object(O.createPortal)(o.a.createElement(i,{css:{position:"fixed",top:0,left:0,bottom:0,right:0,pointerEvents:"none",alignItems:"center",justifyContent:"center"}},o.a.createElement(E,{ref:r},c.content)),document.getElementById("notificationContainer")))};function C(e){var t=0;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S(e,t)}(e)))return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function k(e,t,r,n,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void r(u)}c.done?t(s):Promise.resolve(s).then(n,a)}function I(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){k(o,n,a,i,c,"next",e)}function c(e){k(o,n,a,i,c,"throw",e)}i(void 0)}))}}var A=Object(a.createContext)(null),T=function(e){var t=e.children,r=Object(a.useState)(void 0),n=r[0],i=r[1],c=Object(a.useState)(null),s=c[0],u=c[1],d=Object(a.useState)(!1),f=d[0],p=d[1];Object(a.useEffect)((function(){void 0!==n&&null!==s&&p(!0)}),[n,s]),Object(a.useEffect)((function(){return m.auth().onAuthStateChanged(function(){var e=I(l.a.mark((function e(t){var r,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=4;break}i(null),e.next=9;break;case 4:return e.next=6,m.firestore().collection("users").doc(t.uid).get();case 6:r=e.sent,n=r.data(),i(Object.assign({uid:t.uid},n,{firebaseUser:t}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(a.useEffect)((function(){return m.firestore().collection("users").onSnapshot((function(e){for(var t,r={},n=C(e.docs);!(t=n()).done;){var a=t.value,o=a.data();r[a.id]=o}u(r)}))}),[]);var g=Object(a.useCallback)(function(){var e=I(l.a.mark((function e(t,r){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.firebaseUser.updateProfile({displayName:r});case 2:return e.next=4,m.firestore().collection("users").doc(t.uid).update({username:r});case 4:i(Object.assign({},t,{username:r}));case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),[]),h=Object(a.useCallback)(function(){var e=I(l.a.mark((function e(t,r,n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=m.auth.EmailAuthProvider.credential(t.firebaseUser.email,r),e.next=3,t.firebaseUser.reauthenticateWithCredential(a);case 3:return e.next=5,t.firebaseUser.updatePassword(n);case 5:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),[]),v=Object(a.useCallback)(function(){var e=I(l.a.mark((function e(t,r,n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=m.auth.EmailAuthProvider.credential(t.firebaseUser.email,n),e.next=3,t.firebaseUser.reauthenticateWithCredential(a);case 3:return e.next=5,t.firebaseUser.updateEmail(r);case 5:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),[]),b=Object(a.useMemo)((function(){return{initialized:f,currentUser:n,usersMetadata:s,updateUsername:g,updatePassword:h,updateEmail:v}}),[f,n,s,g,h,v]);return o.a.createElement(A.Provider,{value:b},t)},R=function(e,t){return t.edges===e.edges?t.length-e.length:t.edges-e.edges},L=function(e,t){return s.DIGITS.indexOf(e.emoji)-s.DIGITS.indexOf(t.emoji)},P=function(e,t){return s.LETTERS.indexOf(e.emoji)-s.LETTERS.indexOf(t.emoji)};function N(e){var t=0;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return D(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return D(e,t)}(e)))return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var M=Object(a.createContext)([]),_=function(e){var t=e.children,r=Object(a.useContext)(A).currentUser,n=Object(a.useState)(null),i=n[0],c=n[1];Object(a.useEffect)((function(){return m.firestore().collection("tangrams").onSnapshot((function(e){for(var t,r=[],n=N(e.docs);!(t=n()).done;){var a=t.value,o=a.id,i=a.data();r.push(Object.assign({id:o},i))}c(r)}))}),[]);var s=Object(a.useMemo)((function(){if(!i)return{initialized:!1,approvedTangrams:null,pendingTangrams:null,approvedTangramsByCategory:null};for(var e,t=[],n=[],a={},o=N(i);!(e=o()).done;){var c=e.value;c.approved?(t.push(c),a[c.category]||(a[c.category]=[]),a[c.category].push(c)):r&&(r.isAdmin||c.uid===r.uid)&&n.push(c)}for(var s,u={},l=N(Object.keys(a).sort());!(s=l()).done;){var d=s.value;u[d]=a[d].sort("letters"===d?P:"digits"===d?L:R)}return{initialized:!0,approvedTangrams:t,pendingTangrams:n,approvedTangramsByCategory:a}}),[r,i]);return o.a.createElement(M.Provider,{value:s},t)};function U(e){return function(e){if(Array.isArray(e))return z(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||B(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t,r,n,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void r(u)}c.done?t(s):Promise.resolve(s).then(n,a)}function B(e,t){if(e){if("string"==typeof e)return z(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?z(e,t):void 0}}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var G=Object(a.createContext)(null),V=function(e){var t=e.children,r=y(),n=Object(a.useContext)(x),i=Object(a.useContext)(A).currentUser,c=Object(a.useContext)(M).approvedTangrams,s=Object(a.useState)(null),u=s[0],d=s[1],f=Object(a.useState)(0),p=f[0],g=f[1],h=Object(a.useState)(null),v=h[0],b=h[1],w=Object(a.useState)(!1),O=w[0],E=w[1];Object(a.useEffect)((function(){return m.firestore().collection("stats").onSnapshot((function(e){for(var t,r={},n=function(e){var t=0;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=B(e)))return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}(e.docs);!(t=n()).done;){var a=t.value,o=a.id,i=a.data();r[o]=i}b(r)}))}),[]);var j=Object(a.useMemo)((function(){if(!c||!v)return null;var e=c.map((function(e){return e.id}));console.log(v);var t={};for(var r in v)for(var n in t[r]||(t[r]={}),v[r])e.includes(n)&&(t[r][n]=v[r][n]);return t}),[v,c]);Object(a.useEffect)((function(){j&&E(!0)}),[j]);var C=Object(a.useCallback)((function(e){var t,a,o=window.location.origin+"/?tangrams="+e.map((function(e){return e.id})).join(",");i&&(o+="&uid="+i.uid),t=o,(a=document.createElement("textarea")).value=t,document.body.appendChild(a),a.select(),document.execCommand("copy"),document.body.removeChild(a),n(r("Challenge link copied to clipboard"))}),[n,r,i]),S=Object(a.useCallback)((function(){g((function(e){return e+1}))}),[]),k=Object(a.useCallback)(function(){var e,t=(e=l.a.mark((function e(t,r){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i||!t.approved||j[t.id]){e.next=3;break}return e.next=3,m.firestore().collection("stats").doc(i.uid).set(((n={})[t.id]={completionTime:r},n),{merge:!0});case 3:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){F(o,n,a,i,c,"next",e)}function c(e){F(o,n,a,i,c,"throw",e)}i(void 0)}))});return function(e,r){return t.apply(this,arguments)}}(),[i,j]),I=Object(a.useCallback)((function(){var e=null!=i&&j[i.uid]?j[i.uid]:{},t=function(e){for(var t,r,n=e.length;0!==n;)r=Math.floor(Math.random()*n),t=e[n-=1],e[n]=e[r],e[r]=t;return e}(U(c)).sort((function(t,r){var n=t.id,a=t.edges,o=r.id,i=r.edges,c=void 0!==e[n],s=void 0!==e[o];return c||s?c-s:i-a}));d(U(t))}),[c,j,i]),T=Object(a.useMemo)((function(){return{initialized:O,requestSave:S,saveRequestId:p,playlist:u,setPlaylist:d,markTangramAsComplete:k,completedTangrams:j,shareTangrams:C,startRandomPlaylist:I}}),[O,S,p,u,k,j,C,I]);return o.a.createElement(G.Provider,{value:T},t)};var q=function(e){var t=e.css,r=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,["css"]),c=Object(n.useKeyframes)({from:{transform:"rotate(0deg)"},to:{transform:"rotate(360deg)"}}),s=Object(n.useKeyframes)({0:{borderTopColor:"pieces.lt2"},14:{borderTopColor:"pieces.rh"},28:{borderTopColor:"pieces.st2"},42:{borderTopColor:"pieces.mt1"},57:{borderTopColor:"pieces.st1"},71:{borderTopColor:"pieces.lt1"},85:{borderTopColor:"pieces.sq"},100:{borderTopColor:"pieces.lt2"}}),u=Object(a.useContext)(n.ThemeContext);return o.a.createElement(i,Object.assign({css:Object.assign({position:"relative",alignItems:"center",justifyContent:"center",size:Math.round(1.4*u.sizes.button)+"px"},t,{"& > div":{position:"absolute",size:"button",borderColor:"transparent",borderStyle:"solid",borderWidth:"loader",borderRadius:"50%",animation:c+" 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite, "+s+" 10s linear infinite both","&:nth-child(1)":{animationDelay:"-0.45s"},"&:nth-child(2)":{animationDelay:"-0.3s"},"&:nth-child(3)":{animationDelay:"-0.15s"}}})},r),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null))},W=(r("hhXQ"),r("BbdF")),Y=r.n(W),H=Object(a.createContext)([!0,function(){}]),J=function(){return Object(a.useContext)(H)},K=function(e){var t=e.children,r=Object(a.useState)(!0),n=r[0],i=r[1];Object(a.useEffect)((function(){var e=window.localStorage.getItem("showBackgroundPattern");if(null!==e)try{var t=JSON.parse(e);i(!!JSON.parse(t))}catch(r){window.localStorage.removeItem("showBackgroundPattern")}else i(!0)}),[]);var c=Object(a.useCallback)((function(){var e=!n;i(e),window.localStorage.setItem("showBackgroundPattern",JSON.stringify(e))}),[n]),s=Object(a.useMemo)((function(){return[n,c]}),[n,c]);return o.a.createElement(H.Provider,{value:s},t)};function $(){return($=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var X=function(e,t){void 0===t&&(t={});var n,i=t,c=i.volume,s=void 0===c?1:c,u=i.playbackRate,l=void 0===u?1:u,d=i.soundEnabled,f=void 0===d||d,m=i.interrupt,p=void 0!==m&&m,g=i.onload,h=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(i,["volume","playbackRate","soundEnabled","interrupt","onload"]),v=o.a.useRef(null),b=o.a.useState(!1),y=b[0],w=b[1],O=o.a.useState(null),E=O[0],x=O[1],j=o.a.useState(null),C=j[0],S=j[1],k=function(){"function"==typeof g&&g.call(this),x(1e3*this.duration())};n=function(){r.e(9).then(r.t.bind(null,"HlzF",7)).then((function(t){v.current=t.Howl;var r=new v.current($({src:[e],volume:s,onload:k},h));S(r)}))},Object(a.useEffect)(n,[]),o.a.useEffect((function(){v.current&&C&&S(new v.current($({src:[e],volume:s,onload:k},h)))}),[e]),o.a.useEffect((function(){C&&(C.volume(s),C.rate(l))}),[s,l]);var I=o.a.useCallback((function(e){void 0===e&&(e={}),C&&(f||e.forceSoundEnabled)&&(p&&C.stop(),e.playbackRate&&C.rate(e.playbackRate),C.play(e.id),C.once("end",(function(){return w(!1)})),w(!0))}),[C,f,p]),A=o.a.useCallback((function(e){C&&(C.stop(e),w(!1))}),[C]),T=o.a.useCallback((function(e){C&&(C.pause(e),w(!1))}),[C]);return[I,{sound:C,stop:A,pause:T,isPlaying:y,duration:E}]},Q=r("8Ymh"),Z=r.n(Q),ee=r("Hrb7"),te=r.n(ee),re=r("NczM"),ne=r.n(re),ae=r("wCrC"),oe=r.n(ae),ie=Object(a.createContext)([!0,function(){}]),ce=function(e){var t=e.children,r=Object(a.useState)(!0),n=r[0],i=r[1],c=X(Z.a,{soundEnabled:n})[0],s=X(te.a,{soundEnabled:n})[0],u=X(te.a,{soundEnabled:n})[0],l=X(ne.a,{soundEnabled:n})[0],d=X(oe.a,{soundEnabled:n})[0];Object(a.useEffect)((function(){i("off"!==window.localStorage.getItem("sound"))}),[]);var f=Object(a.useCallback)((function(){var e=!n;i(e),window.localStorage.setItem("sound",e?"on":"off")}),[n]),m=Object(a.useMemo)((function(){return{soundEnabled:n,toggleSound:f,playButton:s,playToggle:u,playCard:l,playClap:c,playTangram:d}}),[n,f,s,u,l,c,d]);return o.a.createElement(ie.Provider,{value:m},t)},se=(r("T39b"),function(e,t){var r=new window.ClipperLib.ClipperOffset,n=new window.ClipperLib.Paths;if(r.AddPaths([e.map((function(e){return{X:e.x,Y:e.y}}))],window.ClipperLib.JoinType.jtMiter,window.ClipperLib.EndType.etClosedPolygon),r.MiterLimit=0,r.ArcTolerance=0,r.Execute(n,t),n.length)return n[0].map((function(e){var t=e.X,r=e.Y;return new Y.a.Point(t,r)}))}),ue=function(e,t){var r=[new Y.a.Point(0,0),new Y.a.Point(2*e,0),new Y.a.Point(e,e)],n=new Y.a.Path({name:"display",segments:r,closed:!0}),a=new Y.a.Path({name:"collision",segments:se(r,-s.COLLISION_MARGIN),closed:!0}),o=new Y.a.Path({name:"insetBorder",segments:se(r,-s.INSET_BORDER),closed:!0,strokeWidth:s.INSET_BORDER}),i=function(e){var t=e[1].getDistance(e[2]),r=e[0].getDistance(e[2]),n=e[0].getDistance(e[1]),a=t+r+n,o=(e[0].x*t+e[1].x*r+e[2].x*n)/a,i=(e[0].y*t+e[1].y*r+e[2].y*n)/a;return new Y.a.Point(o,i)}(r),c=new Y.a.Point(Y.a.view.center.x+i.x-n.bounds.width/2,Y.a.view.center.y+i.y-n.bounds.height/2);return new Y.a.Group({children:[n,a,o],position:Y.a.view.center,pivot:c,data:{id:t,collisions:new Set},applyMatrix:!0})},le=function(e,t){var r=[new Y.a.Point(0,0),new Y.a.Point(2*e,0),new Y.a.Point(3*e,e),new Y.a.Point(e,e)],n=new Y.a.Path({name:"display",segments:r,closed:!0}),a=new Y.a.Path({name:"collision",segments:se(r,-s.COLLISION_MARGIN),closed:!0,strokeWidth:s.COLLISION_MARGIN}),o=new Y.a.Path({name:"insetBorder",segments:se(r,-s.INSET_BORDER),closed:!0,strokeWidth:s.INSET_BORDER});return new Y.a.Group({children:[n,a,o],position:Y.a.view.center,data:{id:t,collisions:new Set},applyMatrix:!0})};function de(e){var t=0;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return fe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fe(e,t)}(e)))return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var me=function(e,t,r){var n=r.x-t.x,a=r.y-t.y,o=n*n+a*a,i=(e.x-t.x)*n+(e.y-t.y)*a,c=Math.min(1,Math.max(0,i/o));return i=(r.x-t.x)*(e.y-t.y)-(r.y-t.y)*(e.x-t.x),new Y.a.Point(t.x+n*c,t.y+a*c)};function pe(e){var t=0;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return ge(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ge(e,t)}(e)))return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}function ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var he=function(e,t,r){for(var n,a=pe(t);!(n=a()).done;)for(var o,i=n.value,c=pe(i.segments);!(o=c()).done;)for(var u,l=o.value.point,d=pe(e.segments);!(u=d()).done;){var f=u.value.point,m=f.getDistance(l);m<r.distance&&(r.distance=m,r.shape=i,r.vector=l.subtract(f))}if(!r.vector)for(var p,g=pe(t);!(p=g()).done;){for(var h,v=p.value,b=pe(e.segments);!(h=b()).done;)for(var y,w=h.value.point,O=pe(v.segments);!(y=O()).done;){var E=y.value,x=E.point,j=E.next.point,C=me(w,x,j),S=C.getDistance(w);S<r.distance&&(r.distance=S,r.vector=C.subtract(w),r.shape=v,r.segment=[x,j],r.point=w,s.DEV&&new Y.a.Path.Circle({center:C,radius:2,fillColor:"red"}).removeOn({drag:!0,move:!0}))}for(var k,I=pe(v.segments);!(k=I()).done;)for(var A,T=k.value.point,R=pe(e.segments);!(A=R()).done;){var L=A.value,P=L.point,N=L.next.point,D=me(T,P,N),M=D.getDistance(T);M<r.distance&&(r.distance=M,r.vector=T.subtract(D),r.shape=e,r.segment=[P,N],s.DEV&&new Y.a.Path.Circle({center:D,radius:2,fillColor:"red"}).removeOn({drag:!0,move:!0}))}}return r},ve=function(e,t,r){if(r.segment){var n,a=r.maxDistance,o=r.segment,i=o[0],c=o[1],u=Math.atan2(c.y-i.y,c.x-i.x),l=Math.atan2(i.y-c.y,i.x-c.x);s.DEV&&new Y.a.Path.Line({from:i,to:c,strokeColor:"red"}).removeOn({drag:!0,move:!0});for(var d=0,f=[u,l];d<f.length;d++)for(var m,p=f[d],g=pe(e.segments);!(m=g()).done;){var h=m.value.point;if(h!==r.point){var v=h.add(r.vector),b=new Y.a.Point(v.x+r.maxDistance*Math.cos(p),v.y+r.maxDistance*Math.sin(p)),y=new Y.a.Path.Line({from:v,to:b,insert:!1});s.DEV&&new Y.a.Path.Line({from:v,to:b,strokeColor:"green"}).removeOn({drag:!0,move:!0});for(var w,O=pe(t);!(w=O()).done;)for(var E,x=w.value,j=pe(y.getIntersections(x));!(E=j()).done;){var C=E.value.point;s.DEV&&new Y.a.Path.Circle({center:C,radius:5,fillColor:"blue"}).removeOn({drag:!0,move:!0});var S=C.subtract(v).add(r.vector);S.length<r.maxDistance&&S.length<=a&&(a=S.length,n=S)}}}n&&(r.vector=n)}};function be(e){var t=0;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return ye(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ye(e,t)}(e)))return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}function ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function we(e){var t=0;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return Oe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Oe(e,t)}(e)))return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}function Oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ee=function(e,t){var r=e.pivot?e.pivot.subtract(e.bounds.center):new Y.a.Point;e.bounds.x<0&&(e.position.x=e.bounds.width/2+r.x),e.bounds.y<0&&(e.position.y=e.bounds.height/2+r.y),e.bounds.x+e.bounds.width>t.width/window.devicePixelRatio&&(e.position.x=t.width/window.devicePixelRatio-e.bounds.width/2+r.x),e.bounds.y+e.bounds.height>t.height/window.devicePixelRatio&&(e.position.y=t.height/window.devicePixelRatio-e.bounds.height/2+r.y)},xe=function(e,t){var r=new Y.a.Point(Y.a.project.view.bounds.width,Y.a.project.view.bounds.height).subtract(2*s.SCRAMBLE_PADDING);if(e.position=Y.a.Point.random().multiply(r).add(s.SCRAMBLE_PADDING),"rh"===e.data.id){var n=45*Math.round(3*Math.random());e.rotation=n,e.data.rotation=n}else e.rotation=45*Math.round(7*Math.random())},je=function(e,t){return t.segments.every((function(t){return e.contains(t.point)}))};function Ce(e){var t=0;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return Se(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Se(e,t)}(e)))return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}function Se(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ke=function(e,t){for(var r,n=Ce(t.children);!(r=n()).done;){var a=r.value;if(a!==e){var o=e.children.collision,i=a.children.collision;o.intersects(i)||je(o,i)||je(i,o)?(e.data.collisions.add(a.data.id),a.data.collisions.add(e.data.id)):(e.data.collisions.delete(a.data.id),a.data.collisions.delete(e.data.id))}}for(var c,u=!0,l=Ce(t.children);!(c=l()).done;){var d=c.value;d.data.collisions.size>0?(u=!1,d.children.display.opacity=s.OVERLAPING_OPACITY):d.children.display.opacity=1}return u};var Ie=function(e){var t=e.uid,r=e.size,n=void 0===r?40:r,a=e.css,c=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,["uid","size","css"]);return o.a.createElement(i,Object.assign({as:"img",src:"https://api.adorable.io/avatars/"+n+"/"+t+".png",css:Object.assign({border:"2px solid",borderColor:"dialogText",borderRadius:"50%",size:n},a)},c))};var Ae=function(e){var t,r,c,u,l,d,f,m,p=e.tangram,g=e.completed,h=e.selected,v=e.css,b=e.onBadgeClick,y=e.onClick,w=e.onLongPress,O=e.hideBadge,E=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,["tangram","completed","selected","css","onBadgeClick","onClick","onLongPress","hideBadge"]),x=p.path,j=p.width,C=p.height,S=p.uid,k=p.approved,I=p.emoji,A=Object(a.useMemo)((function(){return function(e){return e.edges>16?0:e.edges>8?1:2}(p)}),[p]),T=Object(a.useContext)(ie).playCard,R=Object(a.useContext)(n.ThemeContext).colors.difficulties[A],L=Object(a.useCallback)((function(){w&&w(p)}),[w,p]),P=(t=L,r=1e3,c=Object(a.useState)(null),u=c[0],l=c[1],{onMouseDown:d=function(e){if(u&&e.touches&&1!==e.touches.length)clearTimeout(u.timeoutId);else{var n=e.touches?e.touches.item(0):e;l({timeoutId:setTimeout(t,r),startEvent:{clientX:n.clientX,clientY:n.clientY}})}},onMouseUp:m=function(){u&&clearTimeout(u.timeoutId)},onMouseMove:f=function(e){if(u){var t=e.touches?e.touches.item(0):e;Math.sqrt(Math.pow(t.clientX-u.startEvent.clientX,2)+Math.pow(t.clientY-u.startEvent.clientY,2))>10&&clearTimeout(u.timeoutId)}},onMouseLeave:m,onTouchStart:d,onTouchEnd:m,onTouchMove:f});return o.a.createElement(i,Object.assign({css:v,onClick:y?function(e){T(),y(e)}:void 0},P,E),o.a.createElement(i,{css:{opacity:S&&!1===k?.5:1,borderRadius:5,boxShadow:h?"0px 0px 0px 4px "+R:"0px 0px 0px 1px rgba(0, 0, 0, 0.1)",m:1,bg:"background",transition:"background-color "+s.COLOR_TRANSITION_DURATION+"ms",p:3,textAlign:"center",position:"relative",cursor:y||w?"pointer":void 0,width:128,height:178},deps:[R,h,S,k]},o.a.createElement(i,{as:"svg",css:{flex:"1",justifyContent:"center",fill:R,stroke:s.DEV?"red":void 0,strokeWidth:s.DEV?4:void 0},deps:[R],viewBox:"0 0 "+j+" "+C,dangerouslySetInnerHTML:{__html:'<path d="'+x+'" />'}}),g&&I&&o.a.createElement(i,{css:{position:"absolute",top:1,left:1,fontSize:"30px"}},I),S&&!O&&o.a.createElement(Ie,{uid:S,css:{position:"absolute",bottom:1,right:1,cursor:b?"pointer":void 0},onClick:b?function(e){e.stopPropagation(),b(S)}:void 0})))},Te=r("Tgqd");r("KKXr"),r("OG14"),r("CX2u");function Re(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}var Le=Object(n.createPrimitive)("button",{minWidth:0,minHeight:0,flex:"none",fontWeight:"bold",border:"2px solid",borderRadius:2,fontSize:"inherit",color:"errorText",background:"none",cursor:"pointer",p:3,"&:disabled":{opacity:.3,cursor:"not-allowed"},"&:focus":{outline:"none"}}),Pe=function(e){var t=e.as,r=void 0===t?"button":t,i=e.css,c=e.onClick,s=Re(e,["as","css","onClick"]),u=Object(a.useContext)(ie).playButton,l=Object(n.useKeyframes)({0:{bg:"pieces.lt2"},14:{bg:"pieces.rh"},28:{bg:"pieces.st2"},42:{bg:"pieces.mt1"},57:{bg:"pieces.st1"},71:{bg:"pieces.lt1"},85:{bg:"pieces.sq"},100:{bg:"pieces.lt2"}}),d=Object(n.useCss)(Object.assign({minWidth:0,minHeight:0,flex:"none",animation:l+" 20s linear infinite both",fontWeight:"bold",border:0,borderRadius:2,fontSize:"inherit",color:"#FFFFFFDD",cursor:"pointer",p:3,"&:disabled":{opacity:.3,cursor:"not-allowed"},"&:focus":{outline:"none"}},i));return o.a.createElement(r,Object.assign({className:d,onClick:c?function(e){u(),c(e)}:void 0},s))},Ne=function(e){var t=e.as,r=void 0===t?"button":t,i=e.css,c=e.onClick,s=Re(e,["as","css","onClick"]),u=Object(a.useContext)(ie).playButton,l=Object(n.useKeyframes)({0:{bg:"pieces.lt2"},14:{bg:"pieces.rh"},28:{bg:"pieces.st2"},42:{bg:"pieces.mt1"},57:{bg:"pieces.st1"},71:{bg:"pieces.lt1"},85:{bg:"pieces.sq"},100:{bg:"pieces.lt2"}}),d=Object(n.useCss)(Object.assign({animation:l+" 20s linear infinite both",backgroundSize:"2000% 2000%",boxShadow:"0px 5px 10px #00000080",border:0,borderRadius:"50%",fontSize:5,color:"#FFFFFFDD",size:"button",cursor:"pointer",p:0,"&:disabled":{opacity:.3,cursor:"not-allowed"},"&:focus":{outline:"none"}},i));return o.a.createElement(r,Object.assign({className:d,onClick:c?function(e){u(),c(e)}:void 0},s))};var De=function(e){var t=e.children,r=e.title,n=e.onClose,a=e.css,c=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,["children","title","onClose","css"]);return Object(O.createPortal)(o.a.createElement(i,{onClick:n,css:{position:"fixed",top:0,left:0,right:0,bottom:0,bg:"#00000080",alignItems:"center",justifyContent:"center",animation:s.FADE_TRANSITION_DURATION/2+"ms fadeIn ease both",p:3}},o.a.createElement(i,{css:{flex:"0 1 auto",bg:"dialogBackground",color:"dialogText",borderRadius:3,transition:"background-color "+s.COLOR_TRANSITION_DURATION+"ms, color "+s.COLOR_TRANSITION_DURATION+"ms",fontSize:3,p:3,gap:3,maxWidth:"95vw"}},o.a.createElement(i,{css:{flexDirection:"row",gap:3,alignItems:"center",justifyContent:"space-between",zIndex:1}},r,o.a.createElement(i,{as:Te.o,css:{cursor:"pointer",size:32,ml:r?void 0:"auto"},onClick:n})),o.a.createElement(i,Object.assign({onClick:function(e){return e.stopPropagation()},css:Object.assign({flex:"1"},a)},c),t))),document.getElementById("dialogContainer"))},Me=Object(n.createPrimitive)("div",{display:"inline",minWidth:0,minHeight:0,flex:"none"});function _e(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}var Ue=Object(n.extendPrimitive)(Me,(function(e){var t=e.as,r=void 0===t?"small":t,n=e.css,a=_e(e,["as","css"]);return Object.assign({as:r,css:Object.assign({color:"errorText"},n)},a)})),Fe=Object(n.extendPrimitive)(Me,(function(e){var t=e.as,r=void 0===t?"small":t,n=e.css,a=_e(e,["as","css"]);return Object.assign({as:r,css:Object.assign({opacity:.5},n)},a)})),Be=Object(n.extendPrimitive)(Me,{fontSize:4,fontWeight:"bold"}),ze=Object(n.extendPrimitive)(Me,{fontSize:3,fontWeight:"bold"}),Ge=Object(n.extendPrimitive)(Me,{cursor:"pointer",textDecoration:"underline"}),Ve=function(e){var t=e.uid,r=e.tangrams,n=e.deferred,c=y(),u=Object(a.useContext)(Vr),l=u.showProfile,d=u.showTangram,f=Object(a.useContext)(A).usersMetadata,m=Object(a.useContext)(G).setPlaylist,p=f[t]?f[t].username:null;return o.a.createElement(De,{title:o.a.createElement(Be,null,p?c("{username} challenged you",{username:p}):c("Rise to the challenge")),onClose:function(){return n.reject(s.DIALOG_CLOSED_REASON)},css:{gap:3,minWidth:"268px",maxWidth:"500px"}},o.a.createElement(i,{css:{flex:"1",overflow:"auto",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",m:-1}},r.map((function(e){return o.a.createElement(Ae,{key:e.id,selected:!0,tangram:e,css:{m:1},onBadgeClick:l,onLongPress:d})}))),o.a.createElement(Pe,{onClick:function(){m(r),n.resolve()}},c("Let's go !")))};function qe(e){return function(e){if(Array.isArray(e))return We(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return We(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return We(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function We(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ye=Object(n.extendPrimitive)(i,(function(e){var t=e.css,r=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,["css"]),o=Object(a.useContext)(n.ThemeContext);return Object.assign({css:Object.assign({},t,{p:3,alignItems:"center",position:"sticky",top:0,zIndex:1,background:"linear-gradient(0deg, rgba(0,0,0,0) 0%, "+o.colors.dialogBackground+" 50%)"})},r)})),He=function(e){var t=e.deferred,r=y(),n=Object(a.useContext)(M),c=n.pendingTangrams,u=n.approvedTangramsByCategory,l=Object(a.useContext)(Vr),d=l.showProfile,f=l.showTangram,m=Object(a.useContext)(A).currentUser,p=Object(a.useContext)(G),g=p.setPlaylist,h=p.completedTangrams,v=p.shareTangrams,b=p.startRandomPlaylist,w=Object(a.useState)([]),O=w[0],E=w[1],x=function(e){console.log(e),E((function(t){return t.some((function(t){return t.id===e.id}))?O.filter((function(t){return t.id!==e.id})):[].concat(qe(O),[e])}))};return o.a.createElement(o.a.Fragment,null,o.a.createElement(De,{title:o.a.createElement(Be,null,r("Tangram gallery")),css:{gap:3,width:"500px",maxWidth:"80vw"},onClose:function(){return t.reject(s.DIALOG_CLOSED_REASON)}},o.a.createElement(o.a.Fragment,null,o.a.createElement(i,{css:{flex:"1",overflow:"auto",gap:3}},c.length&&o.a.createElement(i,null,o.a.createElement(Ye,null,o.a.createElement(ze,null,r("Pending approbation"))),o.a.createElement(i,{css:{display:"grid",gridTemplateColumns:"repeat(auto-fill, 136px)",gridColumnGap:2,gridRowGap:2,justifyContent:"center",justifyItems:"center",alignItems:"center"}},c.map((function(e){return o.a.createElement(Ae,{key:e.id,tangram:e,completed:m&&h[m.uid]&&h[m.uid][e.id],selected:O.some((function(t){return t.id===e.id})),onClick:function(){return x(e)},onBadgeClick:d,onLongPress:f})})))),Object.keys(u).map((function(e){return o.a.createElement(i,{key:e},o.a.createElement(Ye,null,o.a.createElement(ze,null,r(e))),o.a.createElement(i,{css:{display:"grid",gridTemplateColumns:"repeat(auto-fill, 136px)",gridColumnGap:2,gridRowGap:2,justifyContent:"center",justifyItems:"center",alignItems:"center"}},u[e].map((function(e){return o.a.createElement(Ae,{key:e.id,tangram:e,completed:m&&h[m.uid]&&h[m.uid][e.id],selected:O.some((function(t){return t.id===e.id})),onClick:function(){return x(e)},onBadgeClick:d,onLongPress:f})}))))}))),o.a.createElement(i,{css:{flexDirection:"row",gap:2}},o.a.createElement(Pe,{onClick:function(){O.length?g(O):b(),t.resolve()},css:{flex:"1"}},0===O.length?r("Play now !"):1===O.length?r("Start 1 tangram !"):r("Start {count} tangrams !",{count:O.length})),o.a.createElement(Pe,{disabled:0===O.length,onClick:function(){return v(O)}},o.a.createElement(i,{as:Te.i,size:20}))))))};var Je=Object(n.createPrimitive)("input",(function(e){var t=e.css,r=e.type,n=void 0===r?"text":r,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,["css","type"]);return Object.assign({css:Object.assign({color:"inherit",fontSize:"inherit",bg:"inputBackground",border:"none",borderRadius:2,borderColor:"currentColor",p:2,"&:disabled":{opacity:.5,cursor:"not-allowed"},"&:focus":{outline:"none"}},t),type:n},a)}));function Ke(e){var t=0;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return $e(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $e(e,t)}(e)))return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}function $e(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Xe=function(e){var t=e.deferred,r=y(),n=Object(a.useContext)(Vr).showProfile,c=Object(a.useContext)(A),u=c.currentUser,l=c.usersMetadata,d=Object(a.useContext)(M).approvedTangrams,f=Object(a.useContext)(G).completedTangrams,m=Object(a.useState)((function(){return window.localStorage.getItem("selectedLeaderboard")||"claps"})),p=m[0],g=m[1],h=Object(a.useMemo)((function(){for(var e,t={},r={},n=Ke(d);!(e=n()).done;){var a=e.value,o=a.uid,i=a.claps;t[o]||(t[o]=0,r[o]=0),t[o]+=i||0,r[o]+=1}return Object.keys(l).map((function(e){var n=l[e];return Object.assign({uid:e},n,{claps:t[e]||0,completed:f[e]?Object.keys(f[e]).length:0,created:r[e]||0})}))}),[f,d,l]),v=Object(a.useMemo)((function(){if(h)return h.sort((function(e,t){return t[p]-e[p]}))}),[h,p]);return o.a.createElement(De,{title:o.a.createElement(Be,null,r("Leaderboard")),onClose:function(){return t.reject(s.DIALOG_CLOSED_REASON)},css:{gap:3,minWidth:"268px",maxWidth:"500px",flex:"1",overflow:"auto"}},o.a.createElement(o.a.Fragment,null,o.a.createElement(Je,{as:"select",value:p,onChange:function(e){g(e.target.value),window.localStorage.setItem("selectedLeaderboard",e.target.value)}},o.a.createElement("option",{value:"claps"},r("Claps")),o.a.createElement("option",{value:"completed"},r("Completed tangrams")),o.a.createElement("option",{value:"created"},r("Created tangrams"))),o.a.createElement(i,{css:{flex:"1",overflow:"auto",gap:2}},v.map((function(e,t){var r=e.uid,a=e.username,c=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,["uid","username"]);return o.a.createElement(i,{key:r,css:{flexDirection:"row",gap:2,alignItems:"center",fontSize:0===t?"1.6em":1===t?"1.4em":2===t?"1.2em":void 0},deps:[t]},o.a.createElement(Ie,{uid:r,size:32,onClick:function(){return function(e){n(e)}(r)}}),o.a.createElement(Me,{css:{flex:"1",fontWeight:u&&u.uid===r?"bold":void 0},deps:[u,r]},a),o.a.createElement(Me,null,c[p],"claps"===p&&"üëè"))})))))};r("bHtr"),r("SRfc");function Qe(e,t,r,n,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void r(u)}c.done?t(s):Promise.resolve(s).then(n,a)}function Ze(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){Qe(o,n,a,i,c,"next",e)}function c(e){Qe(o,n,a,i,c,"throw",e)}i(void 0)}))}}r("Oyvg"),r("9VmF");function et(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function tt(e,t){if(e){if("string"==typeof e)return et(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?et(e,t):void 0}}function rt(e){return function(e){if(Array.isArray(e))return et(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||tt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function at(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(s){a=!0,o=s}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}return r}}(e,t)||tt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}r("/8Fb");var ot=function(e){return void 0===e},it=function(e){return null===e||ot(e)},ct=function(e){return Array.isArray(e)},st=function(e){return"object"==typeof e},ut=function(e){return!it(e)&&!ct(e)&&st(e)},lt=function(e){return ut(e)&&e.nodeType===Node.ELEMENT_NODE},dt={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit"},ft="undefined",mt={BLUR:"blur",CHANGE:"change",INPUT:"input"},pt="max",gt="min",ht="maxLength",vt="minLength",bt="pattern",yt="required",wt="validate",Ot=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Et=/^\w*$/,xt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,jt=/\\(\\)?/g;var Ct=function(e){return!ct(e)&&(Et.test(e)||!Ot.test(e))},St=function(e){var t=[];return e.replace(xt,(function(e,r,n,a){t.push(n?a.replace(jt,"$1"):r||e)})),t};function kt(e,t,r){for(var n=-1,a=Ct(t)?[t]:St(t),o=a.length,i=o-1;++n<o;){var c=a[n],s=r;if(n!==i){var u=e[c];s=ut(u)||ct(u)?u:isNaN(+a[n+1])?{}:[]}e[c]=s,e=e[c]}return e}var It=function(e){return Object.entries(e).reduce((function(e,t){var r=at(t,2),n=r[0],a=r[1];return Ct(n)?Object.assign(Object.assign({},e),nt({},n,a)):(kt(e,n,a),e)}),{})},At=function(e,t,r){var n=t.split(/[,[\].]+?/).filter(Boolean).reduce((function(e,t){return it(e)?e:e[t]}),e);return ot(n)||n===e?e[t]||r:n},Tt=function(e,t){for(var r in e)if(At(t,r)){var n=e[r];if(n){if(n.ref.focus){n.ref.focus();break}if(n.options){n.options[0].ref.focus();break}}}},Rt=function(e,t){lt(e)&&e.removeEventListener&&(e.removeEventListener(mt.INPUT,t),e.removeEventListener(mt.CHANGE,t),e.removeEventListener(mt.BLUR,t))},Lt=function(e){return"radio"===e.type},Pt=function(e){return"checkbox"===e.type};function Nt(e){return!e||e instanceof HTMLElement&&e.nodeType!==Node.DOCUMENT_NODE&&Nt(e.parentNode)}var Dt=function(e){return ut(e)&&!Object.keys(e).length};function Mt(e){return ct(e)?e:St(e)}function _t(e,t){return 1==t.length?e:function(e,t){for(var r=Ct(t)?[t]:Mt(t),n=t.length,a=0;a<n;)e=ot(e)?a++:e[r[a++]];return a==n?e:void 0}(e,function(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(r=r>a?a:r)<0&&(r+=a),a=t>r?0:r-t;for(var o=Array(a);++n<a;)o[n]=e[n+t];return o}(t,0,-1))}function Ut(e,t){return t.forEach((function(t){!function(e,t){for(var r=Ct(t)?[t]:Mt(t),n=_t(e,r),a=r[r.length-1],o=!(null!=n)||delete n[a],i=void 0,c=0;c<r.slice(0,-1).length;c++){var s=-1,u=void 0,l=r.slice(0,-(c+1)),d=l.length-1;for(c>0&&(i=e);++s<l.length;){var f=l[s];u=u?u[f]:e[f],d===s&&(ut(u)&&Dt(u)||ct(u)&&!u.filter((function(e){return ut(e)&&!Dt(e)})).length)&&(i?delete i[f]:delete e[f]),i=u}}}(e,t)})),e}var Ft={isValid:!1,value:""},Bt=function(e){return ct(e)?e.filter(Boolean).reduce((function(e,t){var r=t.ref,n=r.checked,a=r.value;return n?{isValid:!0,value:a}:e}),Ft):Ft},zt=function(e){return rt(e).filter((function(e){return e.selected})).map((function(e){return e.value}))},Gt=function(e){return"file"===e.type},Vt=function(e){return"select-multiple"===e.type},qt=function(e){return""===e},Wt={value:!1,isValid:!1},Yt={value:!0,isValid:!0},Ht=function(e){if(ct(e)){if(e.length>1){var t=e.filter((function(e){return e.ref.checked})).map((function(e){return e.ref.value}));return{value:t,isValid:!!t.length}}var r=e[0].ref,n=r.checked,a=r.value,o=r.attributes;return n?o&&!ot(o.value)?ot(a)||qt(a)?Yt:{value:a,isValid:!0}:Yt:Wt}return Wt};function Jt(e,t){var r=t.name,n=t.value,a=e[r];return Gt(t)?t.files:Lt(t)?a?Bt(a.options).value:"":Vt(t)?zt(t.options):Pt(t)?!!a&&Ht(a.options).value:n}var Kt=function(e){return"string"==typeof e},$t=function(e,t){var r={},n=function(n){(ot(t)||(Kt(t)?n.startsWith(t):ct(t)?t.find((function(e){return n.startsWith(e)})):t&&t.nest))&&(r[n]=Jt(e,e[n].ref))};for(var a in e)n(a);return r},Xt=function(e,t){var r=t.type,n=t.types,a=t.message;return ut(e)&&e.type===r&&e.message===a&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object.entries(e),n=Object.keys(t);return r.length===n.length&&r.reduce((function(e,r){var n=at(r,2),a=n[0],o=n[1];return!!e&&(t[a]&&t[a]===o)}),!0)}(e.types,n)};var Qt=function(e){return e instanceof RegExp},Zt=function(e){var t;return ut(t=e)&&!Qt(t)?e:{value:e,message:""}},er=function(e){return"function"==typeof e},tr=function(e){return"boolean"==typeof e},rr=function(e){return Kt(e)||ut(e)&&Object(a.isValidElement)(e)};function nr(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"validate";if(rr(e)||tr(e)&&!e)return{type:r,message:rr(e)?e:"",ref:t}}var ar=function(e,t,r,n,a){if(t){var o=r[e];return Object.assign(Object.assign({},o),{types:Object.assign(Object.assign({},o&&o.types?o.types:{}),nt({},n,a||!0))})}return{}},or=function(){var e=Ze(l.a.mark((function e(t,r,n){var a,o,i,c,s,u,d,f,m,p,g,h,v,b,y,w,O,E,x,j,C,S,k,I,A,T,R,L,P,N,D,M,_,U,F,B,z,G,V,q,W,Y,H,J,K,$,X,Q,Z,ee,te,re,ne,ae,oe,ie,ce,se,ue;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.ref,o=n.ref,i=o.type,c=o.value,s=o.name,u=n.options,d=n.required,f=n.maxLength,m=n.minLength,p=n.min,g=n.max,h=n.pattern,v=n.validate,y=t.current,w={},O=Lt(a),E=Pt(a),x=O||E,j=qt(c),C=ar.bind(null,s,r,w),S=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ht,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:vt,c=e?t:n;if(w[s]=Object.assign({type:e?o:i,message:c,ref:a},C(e?o:i,c)),!r)return w},!d||!(!O&&!E&&(j||it(c))||tr(c)&&!c||E&&!Ht(u).isValid||O&&!Bt(u).isValid)){e.next=15;break}if(k=rr(d)?{value:!!d,message:d}:Zt(d),I=k.value,A=k.message,!I){e.next=15;break}if(w[s]=Object.assign({type:yt,message:A,ref:x?null===(b=y[s].options)||void 0===b?void 0:b[0].ref:a},C(yt,A)),r){e.next=15;break}return e.abrupt("return",w);case 15:if(it(p)&&it(g)){e.next=23;break}if(L=Zt(g),P=L.value,N=L.message,D=Zt(p),M=D.value,_=D.message,"number"===i||!i&&!isNaN(c)?(U=a.valueAsNumber||parseFloat(c),it(P)||(T=U>P),it(M)||(R=U<M)):(F=a.valueAsDate||new Date(c),Kt(P)&&(T=F>new Date(P)),Kt(M)&&(R=F<new Date(M))),!T&&!R){e.next=23;break}if(S(!!T,N,_,pt,gt),r){e.next=23;break}return e.abrupt("return",w);case 23:if(!Kt(c)||j||!f&&!m){e.next=33;break}if(B=Zt(f),z=B.value,G=B.message,V=Zt(m),q=V.value,W=V.message,Y=c.toString().length,H=!it(z)&&Y>z,J=!it(q)&&Y<q,!H&&!J){e.next=33;break}if(S(!!H,G,W),r){e.next=33;break}return e.abrupt("return",w);case 33:if(!h||j){e.next=39;break}if(K=Zt(h),$=K.value,X=K.message,!Qt($)||$.test(c)){e.next=39;break}if(w[s]=Object.assign({type:bt,message:X,ref:a},C(bt,X)),r){e.next=39;break}return e.abrupt("return",w);case 39:if(!v){e.next=72;break}if(Q=Jt(y,a),Z=x&&u?u[0].ref:a,!er(v)){e.next=53;break}return e.next=45,v(Q);case 45:if(ee=e.sent,!(te=nr(ee,Z))){e.next=51;break}if(w[s]=Object.assign(Object.assign({},te),C(wt,te.message)),r){e.next=51;break}return e.abrupt("return",w);case 51:e.next=72;break;case 53:if(!ut(v)){e.next=72;break}re={},ne=0,ae=Object.entries(v);case 56:if(!(ne<ae.length)){e.next=68;break}if(oe=at(ae[ne],2),ie=oe[0],ce=oe[1],Dt(re)||r){e.next=60;break}return e.abrupt("break",68);case 60:return e.next=62,ce(Q);case 62:se=e.sent,(ue=nr(se,Z,ie))&&(re=Object.assign(Object.assign({},ue),C(ie,ue.message)),r&&(w[s]=re));case 65:ne++,e.next=56;break;case 68:if(Dt(re)){e.next=72;break}if(w[s]=Object.assign({ref:Z},re),r){e.next=72;break}return e.abrupt("return",w);case 72:return e.abrupt("return",w);case 73:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),ir=function(e,t){return ct(e.inner)?e.inner.reduce((function(e,r){var n=r.path,a=r.message,o=r.type;return Object.assign(Object.assign({},e),e[n]&&t?nt({},n,ar(n,t,e,o,a)):nt({},n,e[n]||Object.assign({message:a,type:o},t?{types:nt({},o,a||!0)}:{})))}),{}):nt({},e.path,{message:e.message,type:e.type})};function cr(e,t,r,n,a){return sr.apply(this,arguments)}function sr(){return(sr=Ze(l.a.mark((function e(t,r,n,a,o){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=2;break}return e.abrupt("return",a(n,o));case 2:return e.prev=2,e.next=5,t.validate(n,{abortEarly:!1,context:o});case 5:return e.t0=e.sent,e.t1={},e.abrupt("return",{values:e.t0,errors:e.t1});case 10:return e.prev=10,e.t2=e.catch(2),e.abrupt("return",{values:{},errors:It(ir(e.t2,r))});case 13:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}var ur=function(e){return it(e)||!st(e)},lr=function(e,t){return function e(t,r){var n=function(r,n,a){var o=a?"".concat(t,".").concat(n):"".concat(t,"[").concat(n,"]");return ur(r)?o:e(o,r)};return ct(r)?r.map((function(e,t){return n(e,t)})):Object.entries(r).map((function(e){var t=at(e,2),r=t[0],a=t[1];return n(a,r,!0)}))}(e,t).flat(1/0)},dr=function(e,t,r,n){var a;return r.add(t),Dt(e)?a=void 0:ot(e[t])?(a=At(It(e),t),ot(a)||lr(t,a).forEach((function(e){return r.add(e)}))):(a=e[t],r.add(t)),ot(a)?ut(n)?At(n,t):n:a},fr=function(e){var t=e.isOnChange,r=e.hasError,n=e.isBlurEvent,a=e.isOnSubmit,o=e.isReValidateOnSubmit,i=e.isOnBlur,c=e.isReValidateOnBlur,s=e.isSubmitted;return t&&n||a&&o||a&&!s||i&&!n&&!r||c&&!n&&r||o&&s},mr=function(e){return e.substring(0,e.indexOf("["))},pr=function(e,t){var r=It($t(e));return t?At(r,t,r):r};function gr(e,t){var r=!1;if(!ct(e)||!ct(t)||e.length!==t.length)return!0;for(var n=0;n<e.length&&!r;n++){var a=e[n],o=t[n];if(ot(o)||Object.keys(a).length!==Object.keys(o).length){r=!0;break}for(var i in a)if(a[i]!==o[i]){r=!0;break}}return r}var hr=function(e,t){return RegExp("^".concat(t,"[\\d+]").replace(/\[/g,"\\[").replace(/\]/g,"\\]")).test(e)},vr=function(e,t){return rt(e).reduce((function(e,r){return!!hr(t,r)||e}),!1)},br=function(e){return typeof FileList!==ft&&e instanceof FileList};var yr=function(e){return{isOnSubmit:!e||e===dt.onSubmit,isOnBlur:e===dt.onBlur,isOnChange:e===dt.onChange}},wr=function(e){return Lt(e)||Pt(e)};function Or(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mode,r=void 0===t?dt.onSubmit:t,n=e.reValidateMode,o=void 0===n?dt.onChange:n,i=e.validationSchema,c=e.validationResolver,s=e.validationContext,u=e.defaultValues,d=void 0===u?{}:u,f=e.submitFocusError,m=void 0===f||f,p=e.validateCriteriaMode,g=Object(a.useRef)({}),h="all"===p,v=Object(a.useRef)({}),b=Object(a.useRef)({}),y=Object(a.useRef)({}),w=Object(a.useRef)(new Set),O=Object(a.useRef)(new Set),E=Object(a.useRef)(new Set),x=Object(a.useRef)(new Set),j=Object(a.useRef)(!0),C=Object(a.useRef)({}),S=Object(a.useRef)(d),k=Object(a.useRef)(!1),I=Object(a.useRef)(!1),A=Object(a.useRef)(!1),T=Object(a.useRef)(!1),R=Object(a.useRef)(0),L=Object(a.useRef)(!1),P=Object(a.useRef)(),N=Object(a.useRef)({}),D=Object(a.useRef)(s),M=Object(a.useRef)(new Set),_=at(Object(a.useState)(),2)[1],U=Object(a.useRef)(yr(r)).current,F=U.isOnBlur,B=U.isOnSubmit,z=U.isOnChange,G=typeof window===ft,V=!(!i&&!c),q=typeof document!==ft&&!G&&!ot(window.HTMLElement),W=q&&"Proxy"in window,Y=Object(a.useRef)({dirty:!W,dirtyFields:!W,isSubmitted:B,submitCount:!W,touched:!W,isSubmitting:!W,isValid:!W}),H=Object(a.useRef)(yr(o)).current,J=H.isOnBlur,K=H.isOnSubmit;D.current=s;var $=Object(a.useCallback)((function(){k.current||_({})}),[]),X=Object(a.useCallback)((function(e,t,r,n){var a=r||function(e){var t=e.errors,r=e.name,n=e.error,a=e.validFields,o=e.fieldsWithValidation,i=Dt(n),c=Dt(t),s=At(n,r),u=At(t,r);return!(i&&a.has(r)||u&&u.isManual)&&(!!(c!==i||!c&&!u||i&&o.has(r)&&!a.has(r))||s&&!Xt(u,s))}({errors:v.current,error:t,name:e,validFields:x.current,fieldsWithValidation:E.current});if(Dt(t)?((E.current.has(e)||V)&&(x.current.add(e),a=a||At(v.current,e)),v.current=Ut(v.current,[e])):(x.current.delete(e),a=a||!At(v.current,e),kt(v.current,e,t[e])),a&&!n)return $(),!0}),[$,V]),Q=Object(a.useCallback)((function(e,t){var r=e.ref,n=e.options,a=r.type,o=q&&lt(r)&&it(t)?"":t;return Lt(r)&&n?n.forEach((function(e){var t=e.ref;return t.checked=t.value===o})):Gt(r)?br(o)?r.files=o:r.value=o:Vt(r)?rt(r.options).forEach((function(e){return e.selected=o.includes(e.value)})):Pt(r)&&n?n.length>1?n.forEach((function(e){var t=e.ref;return t.checked=o.includes(t.value)})):n[0].ref.checked=!!o:r.value=o,!!a}),[q]),Z=function(e){if(!g.current[e]||!Y.current.dirty&&!Y.current.dirtyFields)return!1;var t=vr(M.current,e),r=O.current.size,n=C.current[e]!==Jt(g.current,g.current[e].ref);if(t){var a=mr(e);n=gr(pr(g.current,a),At(S.current,a))}var o=(t?T.current:O.current.has(e))!==n;return n?O.current.add(e):O.current.delete(e),T.current=t?n:!!O.current.size,Y.current.dirty?o:r!==O.current.size},ee=Object(a.useCallback)((function(e){if(Z(e)||!At(b.current,e)&&Y.current.touched)return!!kt(b.current,e,!0)}),[]),te=Object(a.useCallback)((function(e,t,r){var n=ct(t);for(var a in t){var o="".concat(r||e).concat(n?"[".concat(a,"]"):".".concat(a));ut(t[a])&&te(e,t[a],o);var i=g.current[o];i&&(Q(i,t[a]),ee(o))}}),[Q,ee]),re=Object(a.useCallback)((function(e,t){var r=g.current[e];if(r){Q(r,t);var n=ee(e);if(tr(n))return n}else ur(t)||te(e,t)}),[ee,Q,te]),ne=Object(a.useCallback)(function(){var e=Ze(l.a.mark((function e(t,r){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=g.current[t]){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,or(g,h,n);case 5:return a=e.sent,X(t,a,!1,r),e.abrupt("return",Dt(a));case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),[X,h]),ae=Object(a.useCallback)(function(){var e=Ze(l.a.mark((function e(t){var r,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cr(i,h,pr(g.current),c,D.current);case 2:return r=e.sent,n=r.errors,a=j.current,j.current=Dt(n),ct(t)?(t.forEach((function(e){var t=At(n,e);t?kt(v.current,e,t):Ut(v.current,[e])})),$()):X(t,At(n,t)?nt({},t,At(n,t)):{},a!==j.current),e.abrupt("return",Dt(v.current));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[$,X,h,c,i]),oe=Object(a.useCallback)(function(){var e=Ze(l.a.mark((function e(t){var r,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t||Object.keys(g.current),!V){e.next=3;break}return e.abrupt("return",ae(r));case 3:if(!ct(r)){e.next=9;break}return e.next=6,Promise.all(r.map(function(){var e=Ze(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne(t,!0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:return n=e.sent,$(),e.abrupt("return",n.every(Boolean));case 9:return e.next=11,ne(r);case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[ae,ne,$,V]),ie=function(e){return I.current||w.current.has(e)||w.current.has((e.match(/\w+/)||[])[0])};P.current=P.current?P.current:function(){var e=Ze(l.a.mark((function e(t){var r,n,a,o,s,u,d,f,m,p,y,w,O,E,x;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.type,n=t.target,a=n?n.name:"",o=g.current,s=v.current,u=o[a],d=At(s,a),u){e.next=8;break}return e.abrupt("return");case 8:if(m=r===mt.BLUR,p=fr({hasError:!!d,isOnChange:z,isBlurEvent:m,isOnSubmit:B,isReValidateOnSubmit:K,isOnBlur:F,isReValidateOnBlur:J,isSubmitted:A.current}),y=Z(a),w=ie(a)||y,m&&!At(b.current,a)&&Y.current.touched&&(kt(b.current,a,!0),w=!0),!p){e.next=15;break}return e.abrupt("return",w&&$());case 15:if(!V){e.next=26;break}return e.next=18,cr(i,h,pr(o),c,D.current);case 18:O=e.sent,E=O.errors,x=j.current,j.current=Dt(E),f=At(E,a)?nt({},a,At(E,a)):{},x!==j.current&&(w=!0),e.next=29;break;case 26:return e.next=28,or(g,h,u);case 28:f=e.sent;case 29:!X(a,f)&&w&&$();case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var ce=Object(a.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Dt(S.current)?$t(g.current):S.current;cr(i,h,It(Object.assign(Object.assign({},t),e)),c,D.current).then((function(e){var t=e.errors,r=j.current;j.current=Dt(t),r!==j.current&&$()}))}),[$,h,c]),se=Object(a.useCallback)((function(e,t){!ot(P.current)&&e&&function(e,t,r,n){var a=r.ref,o=r.ref,i=o.name,c=o.type,s=r.mutationWatcher;if(c){var u=e[i];if((Lt(a)||Pt(a))&&u){var l=u.options;ct(l)&&l.length?(l.filter(Boolean).forEach((function(e,r){var a=e.ref,o=e.mutationWatcher;(a&&Nt(a)||n)&&(Rt(a,t),o&&o.disconnect(),Ut(l,["[".concat(r,"]")]))})),l&&!l.filter(Boolean).length&&delete e[i]):delete e[i]}else(Nt(a)||n)&&(Rt(a,t),s&&s.disconnect(),delete e[i])}else delete e[i]}(g.current,P.current,e,t)}),[]),ue=Object(a.useCallback)((function(e,t){if(e&&(!e||!vr(M.current,e.ref.name)||t)){se(e,t);var r=e.ref.name;v.current=Ut(v.current,[r]),b.current=Ut(b.current,[r]),C.current=Ut(C.current,[r]),[O,E,x,w].forEach((function(e){return e.current.delete(r)})),(Y.current.isValid||Y.current.touched)&&($(),V&&ce())}}),[$,V,ce,se]);var le=function(e){var t=e.name,r=e.type,n=e.types,a=e.message,o=e.preventRender,i=g.current[t];Xt(v.current[t],{type:r,message:a,types:n})||(kt(v.current,t,{type:r,types:n,message:a,ref:i?i.ref:{},isManual:!0}),o||$())};function de(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e.name)return console.warn("Missing name @",e);var r,n=e.name,a=e.type,o=e.value,i=Object.assign({ref:e},t),c=g.current,s=wr(e),u=c[n],l=!0,d=!1;if(s?u&&ct(u.options)&&u.options.filter(Boolean).find((function(e){var t=e.ref;return o===t.value})):u)c[n]=Object.assign(Object.assign({},u),t);else{if(a){var f=(m=e,p=function(){return ue(i)},(v=new MutationObserver((function(){Nt(m)&&(v.disconnect(),p())}))).observe(window.document,{childList:!0,subtree:!0}),v);u=s?Object.assign({options:[].concat(rt(u&&u.options||[]),[{ref:e,mutationWatcher:f}]),ref:{type:a,name:n}},t):Object.assign(Object.assign({},i),{mutationWatcher:f})}else u=i;var m,p,v;if(c[n]=u,Dt(S.current)||(r=At(S.current,n),l=ot(r),d=vr(M.current,n),l||d||Q(u,r)),V&&!d&&Y.current.isValid?ce():Dt(t)||(E.current.add(n),!B&&Y.current.isValid&&or(g,h,u).then((function(e){var t=j.current;Dt(e)?x.current.add(n):j.current=!1,t!==j.current&&$()}))),C.current[n]||d&&l||(C.current[n]=l?Jt(c,u.ref):r),a)!function(e){var t=e.field.ref,r=e.handleChange,n=e.isRadioOrCheckbox;lt(t)&&r&&(t.addEventListener(n?mt.CHANGE:mt.INPUT,r),t.addEventListener(mt.BLUR,r))}({field:s&&u.options?u.options[u.options.length-1]:u,isRadioOrCheckbox:s,handleChange:P.current})}}var fe=Object(a.useCallback)((function(e){return function(){var t=Ze(l.a.mark((function t(r){var n,a,o,s,u,d,f,p,b,y,w,O;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r&&(r.preventDefault(),r.persist()),n={},a={},o=g.current,Y.current.isSubmitting&&(L.current=!0,$()),t.prev=5,!V){t.next=18;break}return a=$t(o),t.next=10,cr(i,h,It(a),c,D.current);case 10:s=t.sent,u=s.errors,d=s.values,v.current=u,n=u,a=d,t.next=30;break;case 18:f=0,p=Object.values(o);case 19:if(!(f<p.length)){t.next=30;break}if(!(b=p[f])){t.next=27;break}return y=b.ref,w=b.ref.name,t.next=25,or(g,h,b);case 25:(O=t.sent)[w]?(kt(n,w,O[w]),x.current.delete(w)):(E.current.has(w)&&x.current.add(w),a[w]=Jt(o,y));case 27:f++,t.next=19;break;case 30:if(!Dt(n)){t.next=36;break}return v.current={},t.next=34,e(It(a),r);case 34:t.next=38;break;case 36:m&&q&&Tt(o,n),v.current=n;case 38:return t.prev=38,A.current=!0,L.current=!1,R.current=R.current+1,$(),t.finish(38);case 44:case"end":return t.stop()}}),t,null,[[5,,38,44]])})));return function(e){return t.apply(this,arguments)}}()}),[q,$,V,m,h,c,i]),me=function(e){var t=e.errors,r=e.dirty,n=e.isSubmitted,a=e.touched,o=e.isValid,i=e.submitCount;g.current={},t||(v.current={}),a||(b.current={}),o||(x.current=new Set,E.current=new Set,j.current=!0),r||(O.current=new Set,T.current=!1),n||(A.current=!1),i||(R.current=0),C.current={},y.current={},w.current=new Set,I.current=!1};Object(a.useEffect)((function(){return function(){k.current=!0,g.current&&Object.values(g.current).forEach((function(e){return ue(e,!0)}))}}),[ue]),V||(j.current=x.current.size>=E.current.size&&Dt(v.current));var pe={dirty:T.current,dirtyFields:O.current,isSubmitted:A.current,submitCount:R.current,touched:b.current,isSubmitting:L.current,isValid:B?A.current&&Dt(v.current):j.current},ge={triggerValidation:oe,setValue:Object(a.useCallback)((function(e,t,r){var n=!1,a=ct(e);(a?e:[e]).forEach((function(e){var r=Kt(e);n=!(!re(r?e:Object.keys(e)[0],r?t:Object.values(e)[0])&&!a)||ie(e)})),(n||a)&&$(),(r||a&&t)&&oe(a?void 0:e)}),[$,re,oe]),register:Object(a.useCallback)((function(e,t){if(!G)if(Kt(e))de({name:e},t);else{if(!(ut(e)&&"name"in e))return function(t){return t&&de(t,e)};de(e,t)}}),[S.current,C.current]),unregister:Object(a.useCallback)((function(e){Dt(g.current)||(ct(e)?e:[e]).forEach((function(e){return ue(g.current[e],!0)}))}),[]),getValues:Object(a.useCallback)((function(e){var t=$t(g.current),r=Dt(t)?S.current:t;return e&&e.nest?It(r):r}),[]),formState:W?new Proxy(pe,{get:function(e,t){return t in e?(Y.current[t]=!0,e[t]):{}}}):pe},he=Object.assign(Object.assign(Object.assign({removeFieldEventListener:se,reRender:$},V?{validateSchemaIsValid:ce}:{}),{mode:{isOnBlur:F,isOnSubmit:B,isOnChange:z},reValidateMode:{isReValidateOnBlur:J,isReValidateOnSubmit:K},errorsRef:v,touchedFieldsRef:b,fieldsRef:g,isWatchAllRef:I,watchFieldsRef:w,resetFieldArrayFunctionRef:N,fieldArrayDefaultValues:y,validFieldsRef:x,dirtyFieldsRef:O,fieldsWithValidationRef:E,fieldArrayNamesRef:M,isDirtyRef:T,readFormStateRef:Y,defaultValuesRef:S}),ge);return Object.assign({watch:function(e,t){var r=ot(t)?ot(S.current)?{}:S.current:t,n=$t(g.current,e),a=w.current;if(Dt(r)||(Y.current.dirty=!0),Kt(e))return dr(n,e,a,r);if(ct(e))return e.reduce((function(e,t){return Object.assign(Object.assign({},e),nt({},t,dr(n,t,a,r)))}),{});I.current=!0;var o=!Dt(n)&&n||r;return e&&e.nest?It(o):o},control:he,handleSubmit:fe,reset:Object(a.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(q)for(var r=0,n=Object.values(g.current);r<n.length;r++){var a=n[r];if(a){var o=a.ref,i=a.options,c=wr(o)&&ct(i)?i[0].ref:o;if(lt(c))try{c.closest("form").reset();break}catch(s){}}}e&&(S.current=e),Object.values(N.current).forEach((function(e){return er(e)&&e()})),me(t),$()}),[]),clearError:Object(a.useCallback)((function(e){ot(e)?v.current={}:Ut(v.current,ct(e)?e:[e]),$()}),[]),setError:Object(a.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0;Kt(e)?le(Object.assign({name:e},ut(t)?{types:t,type:""}:{type:t,message:r})):ct(e)&&(e.forEach((function(e){return le(Object.assign(Object.assign({},e),{preventRender:!0}))})),$())}),[]),errors:v.current},ge)}Object(a.createContext)(null);function Er(e,t,r,n,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void r(u)}c.done?t(s):Promise.resolve(s).then(n,a)}function xr(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){Er(o,n,a,i,c,"next",e)}function c(e){Er(o,n,a,i,c,"throw",e)}i(void 0)}))}}var jr=function(e){var t=e.onSignup,r=e.switchTab,n=y(),c=Or(),s=c.handleSubmit,u=c.register,d=c.watch,f=c.setError,p=c.errors,g=c.formState,h=d("password"),v=Object(a.useCallback)(function(){var e=xr(l.a.mark((function e(r){var a,o,i,c,s,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.email,o=r.username,i=r.password,e.prev=1,e.next=4,m.auth().createUserWithEmailAndPassword(a,i);case 4:return c=e.sent,s=c.user,u={username:o,signupDate:Date.now()},e.next=9,m.firestore().collection("users").doc(s.uid).set(u);case 9:t(Object.assign({uid:s.uid},u,{firebaseUser:s})),e.next=24;break;case 12:e.prev=12,e.t0=e.catch(1),e.t1=e.t0.code,e.next="auth/weak-password"===e.t1?17:"auth/email-already-in-use"===e.t1?19:"auth/invalid-email"===e.t1?21:23;break;case 17:return f("password","weakPassword",n("Password is too weak")),e.abrupt("break",24);case 19:return f("email","alreadyExists",n("Email address already in use")),e.abrupt("break",24);case 21:return f("email","invalid",n("Invalid email address")),e.abrupt("break",24);case 23:return e.abrupt("return");case 24:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),[t,f,n]);return o.a.createElement(i,{as:"form",onSubmit:s(v),css:{flex:"1",gap:3}},o.a.createElement(i,{css:{gap:3,overflow:"auto",flex:"1"}},o.a.createElement(i,{css:{gap:2}},o.a.createElement("label",null,n("Email address")),o.a.createElement(Je,{type:"email",name:"email",ref:u({required:n("Email address is required")})}),p.email&&o.a.createElement(Ue,null,p.email.message)),o.a.createElement(i,{css:{gap:2}},o.a.createElement("label",null,n("Username")),o.a.createElement(Je,{name:"username",ref:u({required:n("Username is required")})}),p.username&&o.a.createElement(Ue,null,p.username.message)),o.a.createElement(i,{css:{gap:2}},o.a.createElement("label",null,n("Password")),o.a.createElement(Je,{type:"password",name:"password",ref:u({required:n("Password is required")})}),p.password&&o.a.createElement(Ue,null,p.password.message)),o.a.createElement(i,{css:{gap:2}},o.a.createElement("label",null,n("Confirm password")),o.a.createElement(Je,{type:"password",name:"passwordConfirm",ref:u({required:"Password is required",validate:function(e){return e===h||n("Passwords must match")}})}),p.passwordConfirm&&o.a.createElement(Ue,null,p.passwordConfirm.message))),o.a.createElement(Pe,{disabled:g.isSubmitting,type:"submit"},n("Sign me up !")),o.a.createElement(i,{css:{alignItems:"center"}},o.a.createElement(Ge,{onClick:r},n("I already have an account"))))},Cr=function(e){var t=e.onSignin,r=e.switchTab,n=y(),c=Or(),s=c.handleSubmit,u=c.register,d=c.setError,f=c.errors,p=c.formState,g=Object(a.useCallback)(function(){var e=xr(l.a.mark((function e(r){var a,o,i,c,s,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.email,o=r.password,e.prev=1,e.next=4,m.auth().signInWithEmailAndPassword(a,o);case 4:return i=e.sent,c=i.user,e.next=8,m.firestore().collection("users").doc(c.uid).get();case 8:s=e.sent,u=s.data(),t(Object.assign({uid:c.uid},u,{firebaseUser:c})),e.next=23;break;case 13:e.prev=13,e.t0=e.catch(1),e.t1=e.t0.code,e.next="auth/invalid-email"===e.t1?18:"auth/user-not-found"===e.t1?18:"auth/user-disabled"===e.t1?18:"auth/wrong-password"===e.t1?20:22;break;case 18:return d("email","invalid",n("Unknown email address")),e.abrupt("break",23);case 20:return d("password","mismatch",n("Incorrect password")),e.abrupt("break",23);case 22:return e.abrupt("return");case 23:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}(),[t,d,n]);return o.a.createElement(i,{as:"form",onSubmit:s(g),css:{flex:"1",gap:3}},o.a.createElement(i,{css:{gap:3,overflow:"auto",flex:"1"}},o.a.createElement(i,{css:{gap:2}},o.a.createElement("label",null,n("Email address")),o.a.createElement(Je,{type:"email",name:"email",ref:u({required:n("Email address is required")})}),f.email&&o.a.createElement(Ue,null,f.email.message)),o.a.createElement(i,{css:{gap:2}},o.a.createElement("label",null,n("Password")),o.a.createElement(Je,{type:"password",name:"password",ref:u({required:n("Password is required")})}),f.password&&o.a.createElement(Ue,null,f.password.message))),o.a.createElement(Pe,{type:"submit",disabled:p.isSubmitting},n("Sign me in !")),o.a.createElement(i,{css:{alignItems:"center"}},o.a.createElement(Ge,{onClick:r},n("I don't have an account"))))},Sr=function(e){var t=e.deferred,r=y(),n=Object(a.useContext)(x),i=Object(a.useState)("signup"),c=i[0],u=i[1],l=function(e){t.resolve(e),n(r("Logged in as {username}",{username:e.username}))};return o.a.createElement(De,{title:"signup"===c?o.a.createElement(Be,null,r("Create your account")):o.a.createElement(Be,null,r("Connect to your account")),onClose:function(){return t.reject(s.DIALOG_CLOSED_REASON)},css:{gap:3}},"signup"===c?o.a.createElement(jr,{onSignup:l,switchTab:function(){return u("signin")}}):o.a.createElement(Cr,{onSignin:l,switchTab:function(){return u("signup")}}))};function kr(e){var t=0;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return Ir(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ir(e,t)}(e)))return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}function Ir(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ar(e,t,r,n,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void r(u)}c.done?t(s):Promise.resolve(s).then(n,a)}function Tr(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){Ar(o,n,a,i,c,"next",e)}function c(e){Ar(o,n,a,i,c,"throw",e)}i(void 0)}))}}var Rr=function(e){var t=e.currentUser,r=e.onClose,n=Object(a.useContext)(A).updateEmail,c=y(),s=Object(a.useContext)(x),u=Or(),d=u.handleSubmit,f=u.register,m=u.setError,p=u.errors,g=u.formState,h=Object(a.useCallback)(function(){var e=Tr(l.a.mark((function e(a){var o,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=a.password,i=a.newEmail,e.prev=1,e.next=4,n(t,o,i);case 4:s(c("Email address updated sucessfuly")),r(),e.next=21;break;case 8:e.prev=8,e.t0=e.catch(1),e.t1=e.t0.code,e.next="auth/email-already-in-use"===e.t1?13:"auth/invalid-email"===e.t1?15:"auth/wrong-password"===e.t1?17:19;break;case 13:return m("newEmail","alreadyExists",c("Email address already in use")),e.abrupt("break",21);case 15:return m("newEmail","invalid",c("Invalid email address")),e.abrupt("break",21);case 17:return m("password","mismatch",c("Incorrect password")),e.abrupt("break",21);case 19:throw s(c("An error occured, please retry later")),e.t0;case 21:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),[t,n,m,r,c,s]);return o.a.createElement(i,{as:"form",onSubmit:d(h),css:{flex:"1",gap:4}},o.a.createElement(i,{css:{gap:3,overflow:"auto",flex:"1"}},o.a.createElement(i,{css:{gap:2}},o.a.createElement("label",null,c("Password")),o.a.createElement(Je,{type:"password",name:"password",ref:f({required:c("Password is required")})}),p.password&&o.a.createElement(Ue,null,p.password.message)),o.a.createElement(i,{css:{gap:2}},o.a.createElement("label",null,c("New email address")),o.a.createElement(Je,{type:"email",name:"newEmail",ref:f({required:c("Email address is required")})}),p.newEmail&&o.a.createElement(Ue,null,p.newEmail.message))),o.a.createElement(i,{css:{gap:3}},o.a.createElement(Pe,{disabled:g.isSubmitting,type:"submit"},c("Change email address")),o.a.createElement(i,{css:{alignItems:"center"}},o.a.createElement(Ge,{onClick:r},c("Back")))))},Lr=function(e){var t=e.currentUser,r=e.onClose,n=Object(a.useContext)(A).updateUsername,c=y(),s=Object(a.useContext)(x),u=Or(),d=u.handleSubmit,f=u.register,m=u.errors,p=u.formState,g=Object(a.useCallback)(function(){var e=Tr(l.a.mark((function e(a){var o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=a.newUsername,e.prev=1,e.next=4,n(t,o);case 4:s(c("Username updated sucessfuly")),r(),e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(1),s(c("An error occured, please retry later")),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),[t,n,r,c,s]);return o.a.createElement(i,{as:"form",onSubmit:d(g),css:{flex:"1",gap:4}},o.a.createElement(i,{css:{gap:3,overflow:"auto",flex:"1"}},o.a.createElement(i,{css:{gap:2}},o.a.createElement("label",null,c("New username")),o.a.createElement(Je,{type:"text",name:"newUsername",ref:f({required:c("Username is required")})}),m.newUsername&&o.a.createElement(Ue,null,m.newUsername.message))),o.a.createElement(i,{css:{gap:3}},o.a.createElement(Pe,{disabled:p.isSubmitting,type:"submit"},c("Change username")),o.a.createElement(i,{css:{alignItems:"center"}},o.a.createElement(Ge,{onClick:r},c("Back")))))},Pr=function(e){var t=e.currentUser,r=e.onClose,n=Object(a.useContext)(A).updateUsername,c=y(),s=Object(a.useContext)(x),u=Or(),d=u.handleSubmit,f=u.register,m=u.watch,p=u.setError,g=u.errors,h=u.formState,v=m("newPassword"),b=Object(a.useCallback)(function(){var e=Tr(l.a.mark((function e(a){var o,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=a.password,i=a.newPassword,e.prev=1,e.next=4,n(t,o,i);case 4:s(c("Password changed sucessfuly")),r(),e.next=19;break;case 8:e.prev=8,e.t0=e.catch(1),e.t1=e.t0.code,e.next="auth/weak-password"===e.t1?13:"auth/wrong-password"===e.t1?15:17;break;case 13:return p("newPassword","weakPassword",c("Password is too weak")),e.abrupt("break",19);case 15:return p("password","mismatch",c("Incorrect password")),e.abrupt("break",19);case 17:return s(c("An error occured, please retry later")),e.abrupt("return");case 19:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),[t,n,r,p,c,s]);return o.a.createElement(i,{as:"form",onSubmit:d(b),css:{flex:"1",gap:4}},o.a.createElement(i,{css:{gap:3,overflow:"auto",flex:"1"}},o.a.createElement(i,{css:{gap:2}},o.a.createElement("label",null,c("Current password")),o.a.createElement(Je,{type:"password",name:"password",ref:f({required:c("Password is required")})}),g.password&&o.a.createElement(Ue,null,g.password.message)),o.a.createElement(i,{css:{gap:2}},o.a.createElement("label",null,c("New password")),o.a.createElement(Je,{type:"password",name:"newPassword",ref:f({required:c("Password is required")})}),g.newPassword&&o.a.createElement(Ue,null,g.newPassword.message)),o.a.createElement(i,{css:{gap:2}},o.a.createElement("label",null,c("Confirm new password")),o.a.createElement(Je,{type:"password",name:"newPasswordConfirm",ref:f({required:"Password is required",validate:function(e){return e===v||c("Passwords must match")}})}),g.newPasswordConfirm&&o.a.createElement(Ue,null,g.newPasswordConfirm.message))),o.a.createElement(i,{css:{gap:3}},o.a.createElement(Pe,{disabled:h.isSubmitting,type:"submit"},c("Change password")),o.a.createElement(i,{css:{alignItems:"center"}},o.a.createElement(Ge,{onClick:r},c("Back")))))},Nr=function(e){var t=e.uid,r=e.deferred,n=y(),c=Object(a.useContext)(x),u=Object(a.useContext)(b).language,d=Object(a.useContext)(G).completedTangrams,f=Object(a.useContext)(A),p=f.currentUser,g=f.usersMetadata[t],h=g.username,v=g.signupDate,w=Object(a.useState)(!1),O=w[0],E=w[1],j=Object(a.useState)(!1),C=j[0],S=j[1],k=Object(a.useState)(!1),I=k[0],T=k[1],R=Object(a.useContext)(M).approvedTangrams,L=Object(a.useMemo)((function(){for(var e,r=0,n=0,a=kr(R);!(e=a()).done;){var o=e.value;o.uid===t&&(r+=o.claps||0,n++)}return{claps:r,completed:d[t]?Object.keys(d[t]).length:0,created:n}}),[d,R,t]),P=L.claps,N=L.completed,D=L.created,_=function(){var e=Tr(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm(n("Are you sure you want to log out?"))){e.next=5;break}return e.next=3,m.auth().signOut();case 3:r.reject(s.DIALOG_CLOSED_REASON),c(n("Logged out"));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return o.a.createElement(De,{onClose:function(){return r.reject(s.DIALOG_CLOSED_REASON)},css:{flex:"1",minWidth:"268px",overflow:"auto",pt:4,mt:-4,gap:3}},O?o.a.createElement(Rr,{currentUser:p,onClose:function(){return E(!1)}}):C?o.a.createElement(Lr,{currentUser:p,onClose:function(){return S(!1)}}):I?o.a.createElement(Pr,{currentUser:p,onClose:function(){return T(!1)}}):o.a.createElement(i,{css:{gap:4}},o.a.createElement(i,{css:{gap:3,alignItems:"center"}},o.a.createElement(Ie,{uid:t,size:86,css:{}}),o.a.createElement(Be,null,h),o.a.createElement(i,{css:{gap:2,fontSize:2,alignItems:"center"}},p&&t===p.uid&&o.a.createElement(Me,{css:{fontSize:2}},p.firebaseUser.email),o.a.createElement(Me,{css:{fontSize:2}},n("Joined {signupDate}",{signupDate:new Intl.DateTimeFormat(u).format(v)})),o.a.createElement(Me,null,n("Completed {completed}/{total} tangrams",{completed:N,total:R.length})),o.a.createElement(Me,null,n("Created {created} tangrams",{created:D})),o.a.createElement(Me,null,n("Earned {claps} üëè",{claps:P})))),o.a.createElement(i,{css:{gap:3,alignItems:"center"}},o.a.createElement(Ge,{onClick:function(){return E(!0)}},n("Change email address")),o.a.createElement(Ge,{onClick:function(){return S(!0)}},n("Change username")),o.a.createElement(Ge,{onClick:function(){return T(!0)}},n("Change password"))),o.a.createElement(Le,{onClick:_},n("Log out"))))},Dr=["üí™","üî•","üò±","üòé","üéâ","ü•á","üöÄ","üëå","üëç","üòµ"],Mr=function(){return Dr[Math.floor(Math.random()*Dr.length)]};function _r(e,t,r,n,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void r(u)}c.done?t(s):Promise.resolve(s).then(n,a)}function Ur(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){_r(o,n,a,i,c,"next",e)}function c(e){_r(o,n,a,i,c,"throw",e)}i(void 0)}))}}var Fr=function(e){var t=e.tangram,r=e.deferred,n=y();return o.a.createElement(De,{onClose:function(){return r.reject(s.DIALOG_CLOSED_REASON)},css:{gap:3,minWidth:"268px"}},o.a.createElement(i,{css:{gap:3,overflow:"auto",flex:"1",alignItems:"center"}},o.a.createElement(Ae,{selected:!0,tangram:t}),o.a.createElement(Me,null,n("Earned {claps} üëè",{claps:t.claps||0}))))},Br=function(e){var t=e.tangram,r=e.deferred,n=Object(a.useState)(Object.assign({},t)),c=n[0],u=n[1],d=Object(a.useContext)(A).currentUser,f=Or({defaultValues:Object(a.useMemo)((function(){return{path:t.path,category:t.category,emoji:"digits"!==t.category&&"letters"!==t.category?t.emoji:Mr(),letterIndex:"letters"===t.category?s.LETTERS.indexOf(t.emoji):void 0,digitIndex:"digits"===t.category?s.DIGITS.indexOf(t.emoji):void 0}}),[t])}),p=f.handleSubmit,g=f.register,h=f.watch,v=(f.setValue,f.errors),b=f.setError,w=f.clearError,O=d&&!t.id,E=y(),j=Object(a.useContext)(x),C=h(),S=C.path,k=C.category,I=C.emoji,T=C.letterIndex,R=C.digitIndex;Object(a.useEffect)((function(){try{var e=function(e){var t=Y.a.project.importSVG('<path d="'+e+'" />',{applyMatrix:!0,insert:!1}),r={path:t.exportSVG().getAttribute("d"),edges:t.curves.length,height:Math.round(t.bounds.height),width:Math.round(t.bounds.width),length:Math.round(t.length)};if(t.remove(),r.edges<3||r.edges>23)throw new Error("Invalid path");return r}(S);u((function(t){return Object.assign({},t,{},e)})),w("path")}catch(t){b("path","invalid",E("Invalid path"))}}),[S,b,w,E]),Object(a.useEffect)((function(){var e="letters"===k?s.LETTERS[T]:"digits"===k?s.DIGITS[R]:I||Mr();u((function(t){return Object.assign({},t,{emoji:e})}))}),[k,I,T,R]),Object(a.useEffect)((function(){u((function(e){return Object.assign({},e,{category:k})}))}),[k]);var L=function(){var e=Ur(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm(E("Are you sure you want to delete this tangram ?"))){e.next=5;break}return e.next=3,m.firestore().collection("tangrams").doc(t.id).delete();case 3:j(E("Tangram sucessfuly deleted")),r.resolve();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Ur(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!O){e.next=6;break}return e.next=3,m.firestore().collection("tangrams").add(Object.assign({},c,{uid:d.uid,approved:!1}));case 3:j(E("Tangram submitted for review")),e.next=9;break;case 6:return e.next=8,m.firestore().collection("tangrams").doc(t.id).update(c);case 8:j(E("Tangram successfuly modified"));case 9:r.resolve();case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return o.a.createElement(De,{title:o.a.createElement(Be,null,E(O?"Submit your tangram":"Edit your tangram")),onClose:function(){return r.reject(s.DIALOG_CLOSED_REASON)},as:"form",onSubmit:p(P),css:{gap:3,minWidth:"268px"}},o.a.createElement(i,{css:{gap:3,overflow:"auto",flex:"1"}},o.a.createElement(Ae,{selected:!0,completed:!0,tangram:c,css:{alignSelf:"center"}}),t.approved&&o.a.createElement(Me,{css:{alignSelf:"center"}},E("Earned {claps} üëè",{claps:t.claps||0})),d&&d.isAdmin&&o.a.createElement(o.a.Fragment,null,o.a.createElement(i,{css:{gap:2}},o.a.createElement("label",null,E("Path")),o.a.createElement(Je,{as:"textarea",name:"path",ref:g}),v.path&&o.a.createElement(Ue,null,v.path.message))),o.a.createElement(i,{css:{gap:2}},o.a.createElement("label",null,E("Category")),o.a.createElement(Je,{as:"select",name:"category",ref:g},s.CATEGORIES.map((function(e){return o.a.createElement("option",{key:e,value:e},E(e))})))),"digits"===k?o.a.createElement(i,{css:{gap:2}},o.a.createElement("label",null,E("Victory emoji")),o.a.createElement(Je,{as:"select",name:"digitIndex",ref:g},s.DIGITS.map((function(e,t){return o.a.createElement("option",{key:t,value:t},e)})))):"letters"===k?o.a.createElement(i,{css:{gap:2}},o.a.createElement("label",null,E("Victory emoji")),o.a.createElement(Je,{as:"select",name:"letterIndex",ref:g},s.LETTERS.map((function(e,t){return o.a.createElement("option",{key:t,value:t},e)})))):o.a.createElement(i,{css:{gap:2}},o.a.createElement("label",null,E("Victory emoji")),o.a.createElement(Je,{name:"emoji",ref:g}),o.a.createElement(Fe,null,E("Leave empty for random emoji")))),o.a.createElement(Pe,{type:"submit"},E(O?"Submit !":"Edit !")),!O&&o.a.createElement(i,{css:{alignItems:"center"}},o.a.createElement(Ge,{onClick:L},E("Or delete tangram"))))},zr=function(e){var t=e.tangram,r=e.deferred,n=Object(a.useContext)(A).currentUser;return n&&(n.isAdmin||!t.id||t.uid===n.uid)?o.a.createElement(Br,{tangram:t,deferred:r}):o.a.createElement(Fr,{tangram:t,deferred:r})},Gr=function(){var e=this;this.promise=new Promise((function(t,r){e.resolve=t,e.reject=r}))},Vr=Object(a.createContext)(),qr=function(e){var t=e.children,r=Object(a.useState)(null),n=r[0],i=r[1],c=Object(a.useState)(null),s=c[0],u=c[1],l=Object(a.useState)(null),d=l[0],f=l[1],m=Object(a.useState)(null),p=m[0],g=m[1],h=Object(a.useState)(null),v=h[0],b=h[1],y=Object(a.useState)(null),w=y[0],O=y[1],E=Object(a.useContext)(A).initialized,x=Object(a.useContext)(G),j=x.playlist,C=x.startRandomPlaylist,S=x.initialized,k=Object(a.useContext)(M),I=k.initialized,T=k.approvedTangrams,R=Object(a.useState)(!1),L=R[0],P=R[1],N=Object(a.useCallback)((function(e){var t=new Gr;return i({uid:e,deferred:t}),t.promise.finally((function(){return i(null)}))}),[]),D=Object(a.useCallback)((function(){var e=new Gr;return u(e),e.promise.finally((function(){return u(null)}))}),[]),_=Object(a.useCallback)((function(){var e=new Gr;return f(e),e.promise.finally((function(){return f(null)}))}),[]),U=Object(a.useCallback)((function(){var e=new Gr;return g(e),e.promise.finally((function(){return g(null)}))}),[]),F=Object(a.useCallback)((function(e){var t=new Gr;return b({deferred:t,tangram:e}),t.promise.finally((function(){return b(null)}))}),[]);Object(a.useEffect)((function(){if(I&&S&&E&&!L){var e=!1;if(!j&&window.location.search){var t=new URLSearchParams(window.location.search);if(t.has("tangrams")){var r=t.get("tangrams").split(","),n=t.get("uid"),a=T.filter((function(e){return r.includes(e.id)}));if(a.length){e=!0,window.history.replaceState({},document.title,window.location.origin);var o=new Gr;O({deferred:o,tangrams:a,uid:n}),o.promise.catch((function(e){if(e instanceof Error)throw e;C()})).finally((function(){return O(null)}))}}}e||C(),P(!0)}}),[I,S,E,L]);var B=Object(a.useMemo)((function(){return{showProfile:N,showLeaderboard:D,showGallery:_,showLogin:U,showTangram:F}}),[N,D,_,U,F]);return o.a.createElement(Vr.Provider,{value:B},t,p&&o.a.createElement(Sr,{deferred:p}),d&&o.a.createElement(He,{deferred:d}),v&&o.a.createElement(zr,v),n&&o.a.createElement(Nr,n),s&&o.a.createElement(Xe,{deferred:s}),w&&o.a.createElement(Ve,w))},Wr=r("expU"),Yr=function(e){var t=e.leftComponent,r=e.leftValue,c=e.rightComponent,s=e.rightValue,u=e.value,l=e.onChange,d=e.invertSounds,f=Object(a.useContext)(ie),m=f.playToggle,p=f.soundEnabled,g=Object(a.useContext)(n.ThemeContext),h=Object(a.useMemo)((function(){return u===s?"right":"left"}),[u,s]),v=function(){d?p||m({forceSoundEnabled:!0}):m()},b=function(e){e!==h&&(l("right"===e?s:r),v())};return o.a.createElement(i,{css:{flexDirection:"row",justifyContent:"center",alignItems:"center",gap:3}},o.a.createElement(i,{css:{cursor:"pointer",flex:"1",alignItems:"flex-end"},onClick:function(){return b("left")}},t),o.a.createElement(i,{onClick:function(){l("right"===("left"===h?"right":"left")?s:r),v()},css:{cursor:"pointer",position:"relative",bg:"inputBackground",width:"40px",height:"20px",borderRadius:"99999px"}},o.a.createElement(i,{css:{position:"absolute",size:"20px",borderRadius:"99999px",bg:"dialogText",boxShadow:"0 0 0 2px "+g.colors.inputBackground,transition:"left 250ms ease-in-out"},style:{left:"left"===h?0:20}})),o.a.createElement(i,{css:{cursor:"pointer",flex:"1",alignItems:"flex-start"},onClick:function(){return b("right")}},c))},Hr=function(e){var t=e.deferred,r=Object(a.useContext)(ie),n=r.soundEnabled,c=r.toggleSound,u=J(),l=u[0],d=u[1],f=Object(a.useContext)(b),m=f.language,p=f.setLanguage,g=y(),h=Object(Wr.useSwitchTheme)(),w=h[0],O=h[1];return o.a.createElement(De,{title:o.a.createElement(Be,null,g("Settings")),onClose:function(){return t.reject(s.DIALOG_CLOSED_REASON)},css:{gap:4,overflow:"auto",flex:"1",minWidth:"268px"}},o.a.createElement(i,{css:{gap:2}},o.a.createElement("label",null,g("Language")),o.a.createElement(Je,{as:"select",onChange:function(e){p(e.target.value)},value:m},v.map((function(e){return o.a.createElement("option",{key:e,value:e},g(e))})))),o.a.createElement(i,{css:{gap:2}},o.a.createElement("label",null,g("Difficulty")),o.a.createElement(Yr,{value:l,onChange:d,leftComponent:o.a.createElement(Me,null,g("Easy")),leftValue:!0,rightComponent:o.a.createElement(Me,null,g("Hard")),rightValue:!1})),o.a.createElement(i,{css:{gap:2}},o.a.createElement("label",null,g("Theme")),o.a.createElement(Yr,{value:w,onChange:O,leftComponent:o.a.createElement(i,{as:Te.k,css:{size:32}}),leftValue:"light",rightComponent:o.a.createElement(i,{as:Te.e,css:{size:32}}),rightValue:"dark"})),o.a.createElement(i,{css:{gap:2}},o.a.createElement("label",null,g("Sounds")),o.a.createElement(Yr,{invertSounds:!0,value:n,onChange:c,leftComponent:o.a.createElement(i,{as:Te.n,css:{size:32}}),leftValue:!1,rightComponent:o.a.createElement(i,{as:Te.m,css:{size:32}}),rightValue:!0})),o.a.createElement(Le,{onClick:function(){window.confirm(g("You are about to delete all your completion data. Are you sure you want to proceed ?"))&&(window.localStorage.clear(),window.location.reload())}},g("Reset data")))},Jr=Object(a.createContext)({showSettings:function(){}}),Kr=function(e){var t=e.children,r=Object(a.useState)(null),n=r[0],i=r[1],c=Object(a.useCallback)((function(){var e=new Gr;return i(e),e.promise.finally((function(){return i(null)}))}),[]),s=Object(a.useMemo)((function(){return{showSettingsDialog:c}}),[c]);return o.a.createElement(Jr.Provider,{value:s},t,n&&o.a.createElement(Hr,{deferred:n}))},$r=function(){var e=Object(a.useContext)(Jr).showSettingsDialog,t=Object(a.useContext)(Vr),r=t.showProfile,n=t.showLeaderboard,c=t.showGallery,u=t.showLogin,l=Object(a.useContext)(A).currentUser,d=Object(a.useState)(!1),f=d[0],m=d[1],p=Object(a.useContext)(G).requestSave,g=[o.a.createElement(Ne,{onClick:function(){c()}},o.a.createElement(i,{as:Te.c,css:{m:"0 auto"}})),o.a.createElement(Ne,{onClick:function(){return p()}},o.a.createElement(i,{as:Te.g,css:{m:"0 auto"}})),o.a.createElement(Ne,{onClick:function(){return n()}},o.a.createElement(i,{as:Te.a,css:{m:"0 auto"}})),o.a.createElement(Ne,{onClick:function(){l?r(l.uid):u()}},o.a.createElement(i,{as:Te.l,css:{m:"0 auto"}})),o.a.createElement(Ne,{onClick:function(){return e()}},o.a.createElement(i,{as:Te.h,css:{m:"0 auto"}}))];return o.a.createElement(o.a.Fragment,null,o.a.createElement(i,{css:{position:"fixed",bottom:3,left:"50%",transform:"translateX(-50%)",animation:s.FADE_TRANSITION_DURATION+"ms fadeIn "+s.FADE_STAGGER_DURATION+"ms ease both"}},o.a.createElement(i,{css:{position:"relative"}},g.map((function(e,t,r){var n=((r.length%2!=0?180:157.5)+Math.ceil(t/2)*(t%2?45:-45))*Math.PI/180,a=100*Math.cos(n),c=100*Math.sin(n),s=f?{opacity:1,top:a+"px",left:c+"px"}:{opacity:0,top:"0px",left:"0px"};return o.a.createElement(i,{key:t,css:{transition:"all 100ms ease-in-out "+50*t+"ms",position:"absolute"},style:s,onClick:function(){return m(!1)}},e)})),o.a.createElement(i,{css:{zIndex:1}},o.a.createElement(Ne,{onClick:function(){return m(!f)}},o.a.createElement(i,{as:f?Te.o:Te.d,css:{m:"auto"}}))))))},Xr=function(e){var t=e.emoji,r=e.onStop,c=e.onNext,u=e.onApprove,l=e.onClap,d=Object(a.useState)(!1),f=d[0],m=d[1],p=Object(a.useState)(!1),g=p[0],h=p[1],v=Object(a.useState)(!1),b=v[0],y=v[1],w=Object(a.useState)(!1),O=w[0],E=w[1],x=Object(a.useState)(1),j=x[0],C=x[1],S=Object(a.useContext)(ie).playClap,k=Object(a.useState)(0),I=k[0],A=k[1],T=Object(a.useState)(),R=T[0],L=T[1],P=Object(n.useKeyframes)({0:{opacity:"0",transform:"rotate(0) scale(0)"},100:{opacity:1,transform:"rotate(1800deg) scale(1)"}}),N=Object(n.useKeyframes)({0:{transform:"rotate(0) scale(1)"},50:{transform:"rotate(5deg) scale(1.1)"},100:{transform:"rotate(0) scale(1)"}}),D=function(){l(I),A(0)};return o.a.createElement(i,{css:{position:"absolute",top:0,left:0,right:0,bottom:0,alignItems:"center",justifyContent:"center",gap:3}},g?b?o.a.createElement(o.a.Fragment,null,O?o.a.createElement(i,{key:"clap"+f,css:{fontSize:"30vmin",animation:f?"250ms "+N+" alternate":void 0},onClick:function(){f<15&&(S({playbackRate:j}),m(f+1),A(I+1),C(j+.05),clearTimeout(R),L(setTimeout(D,500)))}},"üëè"):o.a.createElement(i,{key:"clapFadeInEnded",css:{fontSize:"30vmin",animation:s.FADE_TRANSITION_DURATION+"ms fadeIn ease both"},onAnimationEnd:function(){E(!0)}},"üëè"),o.a.createElement(i,{css:{flexDirection:"row",gap:3,animation:s.FADE_TRANSITION_DURATION+"ms fadeIn ease both"}},u&&o.a.createElement(Ne,{onClick:u},o.a.createElement(i,{as:Te.b,css:{m:"auto"}})),c?o.a.createElement(Ne,{onClick:c},o.a.createElement(i,{as:Te.f,css:{m:"auto"}})):o.a.createElement(Ne,{onClick:r},o.a.createElement(i,{as:Te.j,css:{m:"auto"}})))):o.a.createElement(i,{key:"emojiFadeOut",onAnimationEnd:function(){y(!0)},css:{fontSize:"30vmin",animation:s.FADE_TRANSITION_DURATION+"ms "+P+" cubic-bezier(.6,1.56,.58,.92) forwards reverse"}},t):o.a.createElement(i,{key:"emojiSpin",onAnimationEnd:function(){setTimeout((function(){return h(!0)}),1e3)},css:{fontSize:"30vmin",animation:"2000ms "+P+" cubic-bezier(.6,1.56,.58,.92) forwards"}},t))};function Qr(e){var t=0;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return Zr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Zr(e,t)}(e)))return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}function Zr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function en(e,t,r,n,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void r(u)}c.done?t(s):Promise.resolve(s).then(n,a)}function tn(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){en(o,n,a,i,c,"next",e)}function c(e){en(o,n,a,i,c,"throw",e)}i(void 0)}))}}var rn=function(){var e=Object(a.useContext)(M).approvedTangrams,t=Object(a.useContext)(Vr),r=t.showLogin,c=t.showTangram,u=Object(a.useContext)(ie).playTangram,d=Object(a.useRef)();d.current=u;var f=y(),p=Object(a.useContext)(A).currentUser;Object(a.useRef)().current=p;var g=Object(a.useContext)(n.ThemeContext),h=Object(a.useContext)(x),v=J()[0],b=Object(a.useContext)(G),w=b.markTangramAsComplete,O=b.saveRequestId,E=b.playlist,j=b.setPlaylist,C=Object(a.useRef)();C.current=w;var S=Object(a.useState)(0),k=S[0],I=S[1],T=Object(a.useState)(!1),R=T[0],L=T[1],P=Object(a.useRef)(),N=Object(a.useRef)(),D=Object(a.useRef)(),_=Object(a.useRef)(),U=Object(a.useRef)(),F=Object(a.useRef)(),B=Object(a.useMemo)((function(){return E&&E[k]}),[E,k]),z=Object(a.useCallback)((function(){j(null)}),[j]),V=function(){var e=tn(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.firestore().collection("tangrams").doc(B.id).update({approved:!0});case 2:h(f("Tangram approved"));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){I(0)}),[E]),Object(a.useEffect)((function(){if(O){if(!function(e){for(var t,r=we(e.children);!(t=r()).done;){if(t.value.data.collisions.size>0)return!1}return!0}(D.current))return void h(f("You can't save an invalid tangram"));var t=function(e,t){for(var r,n,a=de(e.children);!(n=a()).done;){var o=n.value.children.display;r=r?r.unite(o,{insert:!1}):o}r.scale(1/t),r.position=new Y.a.Point(r.bounds.width/2,r.bounds.height/2);var i=r.exportSVG().getAttribute("d"),c=r.curves.length,s=Math.round(r.bounds.width),u=Math.round(r.bounds.height),l=Math.round(r.length);return r.remove(),{width:s,height:u,length:l,path:i,edges:c}}(D.current,N.current);if(23===t.edges)return void h(f("You can't save such an easy tangram"));var n=Math.round(t.length),a=Math.round(t.width),o=Math.round(t.height);if(e.find((function(e){return e.edges===t.edges&&Math.round(e.length)===n&&Math.round(e.width)===a&&Math.round(e.height)===o})))return void h(f("This tangram already exists"));(function(){var e=tn(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p){e.next=3;break}return e.next=3,r();case 3:return e.next=5,c(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}}),[O]),Object(a.useEffect)((function(){var e=function(){if(P.current&&D.current)for(var e,t=Qr(D.current.children);!(e=t()).done;){var r=e.value;Ee(r,P.current)}};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),Object(a.useEffect)((function(){L(!1)}),[B]),Object(a.useLayoutEffect)((function(){var e=Date.now(),t=function(t){var r=null,n=null,a=null,o=null,i=function(e){document.activeElement===P.current&&(document.body.style.cursor="pointer")},c=function(e){document.body.style.cursor="default"},u=function(e){a=Date.now(),o=e.point,r=e.point.subtract(t.position),n=t.clone({insert:!1,deep:!0}),t.bringToFront()},l=function(e){document.body.style.cursor="move";var a=e.point.subtract(t.position).subtract(r);n.position=t.position.add(a);var o,i,c,u,l,d=n.children["display 1"],f=D.current.children.filter((function(e){return e!==t})).map((function(e){return e.children.display})),m=F.current&&U.current?U.current.children?U.current.children:[U.current]:null,p=(o=s.SNAP_DISTANCE,u=m,he(i=d,c=f,l={maxDistance:o,distance:o}),u&&he(i,u,l),ve(i,c.filter((function(e){return e.shape!==l.shape})),l),u&&ve(i,u,l),l.vector);p&&(n.position.x+=p.x,n.position.y+=p.y),Ee(n,P.current),s.DEV&&new Y.a.Path.Rectangle({rectangle:n.bounds,strokeColor:"black"}).removeOn({drag:!0,move:!0}),t.position=n.position,ke(t,D.current)},f=function(i){if(document.body.style.cursor="pointer",i.point.subtract(o).length<s.SNAP_DISTANCE&&Date.now()-a<s.CLICK_TIMEOUT&&(t.rotation+=45,"rh"===t.data.id&&(t.data.rotation+=45,180===t.data.rotation&&(t.data.rotation=0,t.scale(-1,1))),d.current(),Ee(t,P.current),ke(t,D.current),a=null,o=null),r=null,n&&n.remove(),n=null,U.current&&(!1===F.current&&(U.current.position=D.current.position),function(e,t,r){for(var n,a=e,o=be(t.children);!(n=o()).done;){var i=n.value;if(i.data.collisions.size>0)return;a=a.unite(new Y.a.Path({segments:se(i.children.display.segments.map((function(e){return e.point})),-r),closed:!0,insert:!1}),{insert:!1})}return Math.round(1e3*a.length)===Math.round(1e3*e.length)}(U.current,D.current,F.current?s.STRICT_ERROR_MARGIN:s.SOFT_ERROR_MARGIN))){C.current(B,Date.now()-e);for(var c,u=Qr(D.current.children);!(c=u()).done;){c.value.data.removeListeners()}document.body.style.cursor="default",Y.a.project.activeLayer.tween({opacity:0},{duration:s.VICTORY_PARTICLES_DURATION,easing:"easeInCubic"});for(var l,f=Qr(_.current);!(l=f()).done;){var m=l.value;m.data.animation.stop(),m.tween({"position.x":D.current.position.x,"position.y":D.current.position.y},{duration:s.VICTORY_PARTICLES_DURATION,easing:"easeInCubic"})}setTimeout((function(){Y.a.project.activeLayer.tween({opacity:1},{duration:s.FADE_TRANSITION_DURATION,easing:"easeOutCubic"});for(var e,t=Math.max(Y.a.view.bounds.width,Y.a.view.bounds.height)/2,r=Qr(_.current);!(e=r()).done;){var n=e.value;n.data.animation.stop();var a=Math.random()*Math.PI*2,o=Math.random()*t;n.tween({"position.x":n.position.x+o*Math.cos(a),"position.y":n.position.y+o*Math.sin(a),opacity:0},{duration:s.VICTORY_PARTICLES_DURATION,easing:"easeOutCubic"})}L(!0)}),s.VICTORY_PARTICLES_DURATION)}};t.on({mouseenter:i,mouseleave:c,mousedown:u,mousedrag:l,mouseup:f}),t.data.removeListeners=function(){return t.off({mouseenter:i,mouseleave:c,mousedown:u,mousedrag:l,mouseup:f})}};return function(){var e,r,n,a,o,i,c,u;Y.a.setup(P.current),D.current=(i=s.SMALL_TRIANGLE_BASE,c=Math.sqrt(2*Math.pow(i,2)),u=Math.sqrt(2*Math.pow(c,2)),new Y.a.Group([ue(i,"st1"),ue(i,"st2"),ue(c,"mt1"),ue(u,"lt1"),ue(u,"lt2"),(e=c,r="sq",n=new Y.a.Path.Rectangle({name:"display",point:[0,0],size:[e,e]}),a=new Y.a.Path.Rectangle({name:"collision",point:[s.COLLISION_MARGIN,s.COLLISION_MARGIN],size:[e-2*s.COLLISION_MARGIN,e-2*s.COLLISION_MARGIN]}),o=new Y.a.Path.Rectangle({name:"insetBorder",point:[s.INSET_BORDER,s.INSET_BORDER],size:[e-2*s.INSET_BORDER,e-2*s.INSET_BORDER],strokeWidth:s.INSET_BORDER}),new Y.a.Group({children:[n,a,o],position:Y.a.view.center,data:{id:r,collisions:new Set},applyMatrix:!0,rotation:45*Math.round(7*Math.random())})),le(i,"rh")])),B&&(U.current=Y.a.project.importSVG('<path d="'+B.path+'" />',{applyMatrix:!0}),U.current.sendToBack(),U.current.fillRule="evenodd",s.DEV&&(U.current.strokeWidth=2,U.current.strokeColor="red"),U.current.closed=!0);var l=Y.a.project.view.bounds,d=U.current?U.current.bounds:D.current.children[3].bounds.scale(2);l.width>l.height?N.current=Math.min(2,Math.min(.6*l.width,700)/d.width,Math.min(.8*l.height,600)/d.height):N.current=Math.min(2,Math.min(.8*l.width,600)/d.width,Math.min(.6*l.height,700)/d.height),U.current&&(U.current.scale(N.current),U.current.position=Y.a.view.center);for(var f,m=Qr(D.current.children);!(f=m()).done;){var p=f.value;p.scale(N.current),xe(p,P.current),t(p),Ee(p,P.current),ke(p,D.current)}}(),function(){Y.a.project.remove(),_.current=null,D.current=null,U.current=null}}),[B]),Object(a.useLayoutEffect)((function(){F.current=v,U.current&&(v?(U.current.fillColor=g.colors.shape,U.current.position=Y.a.view.center):U.current.fillColor="transparent")}),[B,v,g]),Object(a.useLayoutEffect)((function(){var e=new Y.a.Group;e.sendToBack();var t=new Y.a.Point(P.current.width,P.current.height).divide(window.devicePixelRatio),r=function(){return 3*Math.random()+2},n=function(){return.4*Math.random()+.1};_.current=new Array(60);for(var a=function(a){var o=new Y.a.Path.Circle({center:Y.a.Point.random().multiply(t),radius:r(),opacity:n(),parent:e,data:{index:a}});!function e(){var t={radius:r(),opacity:n(),"position.x":Math.min(P.current.width/window.devicePixelRatio,Math.max(0,o.position.x+200*Math.random()-100)),"position.y":Math.min(P.current.height/window.devicePixelRatio,Math.max(0,o.position.y+200*Math.random()-100))};o.data.animation=o.tween(t,{duration:1e4*Math.random()+5e3,easing:"easeInOutQuad"}).then(e)}(),_.current[a]=o},o=0;o<60;o++)a(o)}),[B]),Object(a.useLayoutEffect)((function(){for(var e,t=Qr(D.current.children);!(e=t()).done;){var r=e.value;r.children.display.fillColor=g.colors.pieces[r.data.id],r.children.insetBorder.strokeColor=g.colors.pieces[r.data.id]}for(var n,a=Object.values(g.colors.pieces),o=Qr(_.current);!(n=o()).done;){n.value.fillColor=a[Math.floor(Math.random()*a.length)]}}),[g.colors,B]),o.a.createElement(i,{css:{flex:"1",position:"relative",color:"dialogText",animation:s.FADE_TRANSITION_DURATION+"ms fadeIn ease"}},B&&!1===v&&o.a.createElement(i,{css:{zIndex:-1,position:"absolute",top:3,right:3,cursor:"pointer"}},o.a.createElement(Ae,{tangram:B,selected:!0,hideBadge:!0})),o.a.createElement(i,{as:"canvas",ref:P,css:{minHeight:"auto",flex:1}}),E&&R&&o.a.createElement(Xr,{emoji:B.emoji,onStop:z,onNext:k<E.length-1?function(){I(k+1)}:void 0,onApprove:p&&p.isAdmin&&B.uid&&!B.approved?V:void 0,onClap:function(e){p?m.firestore().collection("tangrams").doc(B.id).update({claps:m.firestore.FieldValue.increment(e)}):h(f("Claps only count when logged in"))}}),o.a.createElement($r,null))},nn=function(){var e=y(),t=Object(a.useContext)(x),r=Object(a.useState)(!1),n=r[0],u=r[1],l=Object(a.useState)(!1),d=l[0],f=l[1],m=Object(a.useState)(!1),p=m[0],g=m[1],h=Object(a.useState)(!1),v=h[0],b=h[1],w=Object(a.useContext)(M).initialized,O=Object(a.useContext)(G),E=O.playlist,j=O.initialized,C=Object(a.useContext)(A),S=C.currentUser,k=C.initialized&&w&&j&&E;if(Object(a.useEffect)((function(){setTimeout((function(){return u(!0)}),2*s.FADE_TRANSITION_DURATION),g(setTimeout((function(){return f(!0)}),2*s.FADE_TRANSITION_DURATION))}),[]),Object(a.useEffect)((function(){k&&clearTimeout(p)}),[k]),v)return o.a.createElement(rn,null);return o.a.createElement(i,{css:{flex:"1",alignItems:"center",justifyContent:"center",animation:k&&n?s.FADE_TRANSITION_DURATION+"ms fadeIn ease "+s.FADE_STAGGER_DURATION+"ms reverse":void 0},deps:[k,n],onAnimationEnd:function(r){r.currentTarget===r.target&&(b(!0),S&&t(e("Logged in as {username}",{username:S.username})))}},o.a.createElement(i,{css:{animation:s.FADE_TRANSITION_DURATION+"ms fadeIn ease "+s.FADE_STAGGER_DURATION+"ms both"}},o.a.createElement(c,{css:{size:128,overflow:"visible","& > g":{transition:"all "+s.FADE_TRANSITION_DURATION+"ms ease",transform:k&&n?"translate(30px, -30px)":"translate(0, 0)"}},deps:[k,n]})),o.a.createElement(q,{css:d?{animation:s.FADE_TRANSITION_DURATION+"ms fadeIn ease"}:{opacity:0},deps:[d]}))};t.default=function(){return Object(a.useEffect)((function(){window.oncontextmenu=function(){return!1}}),[]),Object(n.useGlobalCss)({body:{m:0,bg:"background",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto",\n        "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans",\n        "Helvetica Neue", sans-serif',"-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale",transition:"background-color "+s.COLOR_TRANSITION_DURATION+"ms"},"body, html, #___gatsby, #gatsby-focus-wrapper":{height:"100%"},"#gatsby-focus-wrapper":{display:"flex",flexDirection:"column",padding:"\n        env(safe-area-inset-top, 0)\n        env(safe-area-inset-right, 0)\n        env(safe-area-inset-bottom, 0)\n        env(safe-area-inset-left, 0)\n      "},"*":{boxSizing:"border-box",userSelect:"none","-moz-user-select":"none","-khtml-user-select":"none","-webkit-user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)"},"input, textarea":{"-webkit-user-select":"initial","-moz-user-select":"initial","-ms-user-select":"initial",userSelect:"initial"}}),o.a.createElement(ce,null,o.a.createElement(w,null,o.a.createElement(j,null,o.a.createElement(T,null,o.a.createElement(_,null,o.a.createElement(K,null,o.a.createElement(V,null,o.a.createElement(Kr,null,o.a.createElement(qr,null,o.a.createElement(nn,null))))))))))}},Wcq6:function(e,t,r){"use strict";var n,a=(n=r("wj3C"))&&"object"==typeof n&&"default"in n?n.default:n;a.registerVersion("firebase","7.14.0","app"),e.exports=a},bHtr:function(e,t,r){var n=r("XKFU");n(n.P,"Array",{fill:r("Nr18")}),r("nGyu")("fill")},ls82:function(e,t,r){r("rGqo"),r("yt8O"),r("a1Th"),r("VRzm"),r("Btvt"),r("f3/d"),r("rE2o"),r("ioFf");var n=function(e){"use strict";var t,r=Object.prototype,n=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,r,n){var a=t&&t.prototype instanceof g?t:g,o=Object.create(a.prototype),i=new k(n||[]);return o._invoke=function(e,t,r){var n=l;return function(a,o){if(n===f)throw new Error("Generator is already running");if(n===m){if("throw"===a)throw o;return A()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var c=j(i,r);if(c){if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===l)throw n=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=f;var s=u(e,t,r);if("normal"===s.type){if(n=r.done?m:d,s.arg===p)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n=m,r.method="throw",r.arg=s.arg)}}}(e,r,i),o}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}e.wrap=s;var l="suspendedStart",d="suspendedYield",f="executing",m="completed",p={};function g(){}function h(){}function v(){}var b={};b[o]=function(){return this};var y=Object.getPrototypeOf,w=y&&y(y(I([])));w&&w!==r&&n.call(w,o)&&(b=w);var O=v.prototype=g.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function x(e){var t;this._invoke=function(r,a){function o(){return new Promise((function(t,o){!function t(r,a,o,i){var c=u(e[r],e,a);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==typeof l&&n.call(l,"__await")?Promise.resolve(l.__await).then((function(e){t("next",e,o,i)}),(function(e){t("throw",e,o,i)})):Promise.resolve(l).then((function(e){s.value=e,o(s)}),(function(e){return t("throw",e,o,i)}))}i(c.arg)}(r,a,t,o)}))}return t=t?t.then(o,o):o()}}function j(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method))return p;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var a=u(n,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,p;var o=a.arg;return o?o.done?(r[e.resultName]=o.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,p):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function I(e){if(e){var r=e[o];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}return{next:A}}function A(){return{value:t,done:!0}}return h.prototype=O.constructor=v,v.constructor=h,v[c]=h.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c in e||(e[c]="GeneratorFunction")),e.prototype=Object.create(O),e},e.awrap=function(e){return{__await:e}},E(x.prototype),x.prototype[i]=function(){return this},e.AsyncIterator=x,e.async=function(t,r,n,a){var o=new x(s(t,r,n,a));return e.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},E(O),O[c]="Generator",O[o]=function(){return this},O.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=I,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return c.type="throw",c.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;S(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),p}},e}(e.exports);try{regeneratorRuntime=n}catch(a){Function("r","regeneratorRuntime = r")(n)}},mLhc:function(e,t,r){var n=function(e){"use strict";var t,r=Object.prototype,n=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,r,n){var a=t&&t.prototype instanceof g?t:g,o=Object.create(a.prototype),i=new k(n||[]);return o._invoke=function(e,t,r){var n=l;return function(a,o){if(n===f)throw new Error("Generator is already running");if(n===m){if("throw"===a)throw o;return A()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var c=j(i,r);if(c){if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===l)throw n=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=f;var s=u(e,t,r);if("normal"===s.type){if(n=r.done?m:d,s.arg===p)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n=m,r.method="throw",r.arg=s.arg)}}}(e,r,i),o}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}e.wrap=s;var l="suspendedStart",d="suspendedYield",f="executing",m="completed",p={};function g(){}function h(){}function v(){}var b={};b[o]=function(){return this};var y=Object.getPrototypeOf,w=y&&y(y(I([])));w&&w!==r&&n.call(w,o)&&(b=w);var O=v.prototype=g.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function x(e,t){var r;this._invoke=function(a,o){function i(){return new t((function(r,i){!function r(a,o,i,c){var s=u(e[a],e,o);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(d).then((function(e){l.value=e,i(l)}),(function(e){return r("throw",e,i,c)}))}c(s.arg)}(a,o,r,i)}))}return r=r?r.then(i,i):i()}}function j(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method))return p;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var a=u(n,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,p;var o=a.arg;return o?o.done?(r[e.resultName]=o.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,p):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function I(e){if(e){var r=e[o];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}return{next:A}}function A(){return{value:t,done:!0}}return h.prototype=O.constructor=v,v.constructor=h,v[c]=h.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c in e||(e[c]="GeneratorFunction")),e.prototype=Object.create(O),e},e.awrap=function(e){return{__await:e}},E(x.prototype),x.prototype[i]=function(){return this},e.AsyncIterator=x,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new x(s(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(O),O[c]="Generator",O[o]=function(){return this},O.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=I,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return c.type="throw",c.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;S(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),p}},e}(e.exports);try{regeneratorRuntime=n}catch(a){Function("r","regeneratorRuntime = r")(n)}},o0o1:function(e,t,r){e.exports=r("mLhc")},o1Si:function(e){e.exports=JSON.parse('{"Language":"Langage","Theme":"Th√®me","Logged in as {username}":"Connect√© en tant que {username}","en":"Anglais","fr":"Francais","Settings":"R√©glages","Difficulty":"Difficult√©","Easy":"Facile","Hard":"Difficile","Reset data":"R√©initialiser les donn√©es","You are about to delete all your completion data. Are you sure you want to proceed ?":"Tu es sur le point de supprimer toutes tes donn√©es de jeu. Es-tu s√ªr.e de vouloir continuer ?","Tangram approved":"Tangram approuv√©","You can\'t save an invalid tangram":"Tangram invalide","You can\'t save such an easy tangram":"Tangram trop facile","This tangram already exists":"Ce tangram existe d√©j√†","Tangram submitted for review":"Tangram soumis pour v√©rification","Logged out":"D√©connect√©.e","Tangram gallery":"Galerie des tangrams","Pending approbation":"En attente d\'approbation","{username}\'s tangrams":"Tangrams de {username}","Play now !":"Commencer √† jouer !","Start 1 tangram !":"Lancer 1 tangram","Start {count} tangrams !":"Lancer {count} tangrams","Password is too weak":"Mot de passe trop faible","Email address already in use":"Adresse email d√©j√† prise","Invalid email address":"Adresse email invalide","Email address":"Adresse Email","Email address is required":"Adresse email requise","Username":"Nom d\'utilisateur","Username is required":"Nom d\'utilisateur requis","Password":"Mot de passe","Password is required":"Mot de passe requis","Confirm password":"Confirmer le mot de passe","Passwords must match":"Les mots de passe doivent correspondre","Sign me up !":"Je cr√©√© mon compte !","I already have an account":"J\'ai d√©j√† un compte","Unknown email address":"Adresse email inconnu","Incorrect password":"Mot de passe incorrect","Sign me in !":"Je me connecte !","I don\'t have an account":"Je n\'ai pas de compte","Create your account":"Cr√©er un compte","Connect to your account":"Se connecter","Submit your tangram":"Envoyer votre tangram","Edit your tangram":"√âditer votre tangram","Category":"Cat√©gorie","Victory emoji":"Emoji de succ√®s","Leave empty for random emoji":"Laisser vide pour un emoji au hasard","Order":"Ordre","Submit !":"Envoyer !","Edit !":"√âditer !","Or delete tangram":"Ou supprimer le tangram","animals":"Animaux","geometric":"G√©om√©trique","digits":"Chiffres","letters":"Alphabet","people":"Personnes","stuff":"Trucs","Joined {signupDate}":"Inscrit le {signupDate}","Log out":"Se d√©connecter","Are you sure you want to log out?":"√ätes vous s√ªr.e de vouloir vous d√©connecter ?","Change email address":"Modifier l\'adresse email","Change username":"Modifier le nom d\'utilisateur","Change password":"Modifier le mot de passe","Back":"Retour","Confirm new password":"Confirmer le nouveau mot de passe","New password":"Nouveau mot de passe","Current password":"Mot de passe actuel","Password changed sucessfuly":"Mot de passe chang√© avec succ√©s","New username":"Nouveau nom d\'utilisateur","Username updated sucessfuly":"Nom d\'utilisateur chang√© avec succ√©s","Email address updated sucessfuly":"Adresse email chang√© avec succ√©s","New email address":"Nouvelle adresse email","An error occured, please retry later":"Une erreur est survenue, veuillez r√©essayer plus tard","Sounds":"Sons","Are you sure you want to delete this tangram ?":"√ätes vous s√ªr.e de vouloir supprimer ce tangram ?","Tangram deleted sucessfuly":"Tangram supprim√© avec succ√©s","Challenge link copied to clipboard":"Lien de d√©fi copi√© dans le presse papier","{username} challenged you":"{username} vous met au d√©fi","Rise to the challenge":"Relevez le d√©fi","Let\'s go !":"C\'est parti !","Leaderboard":"Classement","Completed {completed}/{total} tangrams":"{completed}/{total} tangrams compl√©t√©s","Created {created} tangrams":"{created} tangrams cr√©√©s","Earned {claps} üëè":"{claps} üëè gagn√©s","Claps":"Claps","Completed tangrams":"Tangrams compl√©t√©s","Created tangrams":"Tangrams cr√©√©s","Claps only count when logged in":"Les claps ne comptent que si tu es identifi√©.e"}')},"pp/T":function(e,t,r){var n=r("XKFU");n(n.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},wCrC:function(e,t,r){e.exports=r.p+"static/pop-a0c7623b355005c8fd4af82974179acf.wav"}}]);
//# sourceMappingURL=component---src-pages-index-js-74d11a2f9a347241ac7c.js.map