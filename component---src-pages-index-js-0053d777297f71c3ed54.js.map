{"version":3,"file":"component---src-pages-index-js-0053d777297f71c3ed54.js","mappings":"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","sources":["webpack:///./node_modules/@babel/runtime/regenerator/index.js","webpack:///./node_modules/firebase/app/dist/index.cjs.js","webpack:///./node_modules/react-icons/lib/esm/iconsManifest.js","webpack:///./node_modules/react-icons/lib/esm/iconContext.js","webpack:///./node_modules/react-icons/lib/esm/iconBase.js","webpack:///./node_modules/react-intl/lib/src/components/useIntl.js","webpack:///./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","webpack:///./src/components/view.js","webpack:///./src/components/logo.js","webpack:///./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack:///./node_modules/gatsby-plugin-firebase/src/firebase.js","webpack:///./node_modules/gatsby-plugin-firebase/index.js","webpack:///./src/contexts/notify.js","webpack:///./src/contexts/user.js","webpack:///./src/contexts/tangrams.js","webpack:///./src/contexts/gallery.js","webpack:///./src/utils/copyToClipboard.js","webpack:///./src/utils/shuffle.js","webpack:///./node_modules/use-sound/dist/use-sound.esm.js","webpack:///./src/sounds/star.wav","webpack:///./src/sounds/button.wav","webpack:///./src/sounds/card.wav","webpack:///./src/sounds/pop.wav","webpack:///./src/sounds/victory.wav","webpack:///./src/contexts/sound.js","webpack:///./src/components/button.js","webpack:///./src/components/badge.js","webpack:///./src/components/card.js","webpack:///./src/utils/useLongPress.js","webpack:///./src/utils/getTangramDifficulty.js","webpack:///./src/components/dialog.js","webpack:///./src/components/text.js","webpack:///./src/components/primitives.js","webpack:///./src/components/challengeDialog.js","webpack:///./node_modules/react-intl/lib/src/components/message.js","webpack:///./src/utils/sortTangrams.js","webpack:///./src/components/input.js","webpack:///./src/components/galleryDialog.js","webpack:///./src/components/leaderboardDialog.js","webpack:///./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack:///./node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack:///./node_modules/react-hook-form/dist/index.esm.js","webpack:///./src/components/loginDialog.js","webpack:///./src/components/profileDialog.js","webpack:///./src/utils/getRandomEmoji.js","webpack:///./src/components/tangramDialog.js","webpack:///./src/utils/recomputePathData.js","webpack:///./src/utils/deferred.js","webpack:///./src/contexts/showBackgroundPattern.js","webpack:///./src/contexts/tips.js","webpack:///./src/components/toggle.js","webpack:///./src/contexts/showParticles.js","webpack:///./src/components/settingsDialog.js","webpack:///./src/contexts/dialog.js","webpack:///./src/components/menu.js","webpack:///./src/utils/getOffsettedPathPoints.js","webpack:///./src/utils/createPiecesGroup.js","webpack:///./src/utils/getTriangleCenter.js","webpack:///./src/utils/getPathData.js","webpack:///./src/utils/getNearestPoint.js","webpack:///./src/utils/getSnapVector.js","webpack:///./src/utils/isTangramValid.js","webpack:///./src/utils/restrictGroupWithinCanvas.js","webpack:///./src/utils/scrambleGroup.js","webpack:///./src/utils/doesPathContainsPath.js","webpack:///./src/utils/updateColisionState.js","webpack:///./src/components/victory.js","webpack:///./src/components/tangram.js","webpack:///./src/utils/isTangramComplete.js","webpack:///./src/components/app.js","webpack:///./src/pages/index.js","webpack:///./node_modules/regenerator-runtime/runtime.js"],"sourcesContent":["module.exports = require(\"regenerator-runtime\");\n","'use strict';\n\nfunction _interopDefault(ex) {\n  return ex && typeof ex === 'object' && 'default' in ex ? ex['default'] : ex;\n}\n\nvar firebase = _interopDefault(require('@firebase/app'));\n\nvar name = \"firebase\";\nvar version = \"7.14.0\";\n/**\r\n * @license\r\n * Copyright 2018 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\nfirebase.registerVersion(name, version, 'app');\nmodule.exports = firebase;","export var IconsManifest = [{\n  \"id\": \"fa\",\n  \"name\": \"Font Awesome\",\n  \"projectUrl\": \"https://fontawesome.com/\",\n  \"license\": \"CC BY 4.0 License\",\n  \"licenseUrl\": \"https://creativecommons.org/licenses/by/4.0/\"\n}, {\n  \"id\": \"io\",\n  \"name\": \"Ionicons 4\",\n  \"projectUrl\": \"https://ionicons.com/\",\n  \"license\": \"MIT\",\n  \"licenseUrl\": \"https://github.com/ionic-team/ionicons/blob/master/LICENSE\"\n}, {\n  \"id\": \"io5\",\n  \"name\": \"Ionicons 5\",\n  \"projectUrl\": \"https://ionicons.com/\",\n  \"license\": \"MIT\",\n  \"licenseUrl\": \"https://github.com/ionic-team/ionicons/blob/master/LICENSE\"\n}, {\n  \"id\": \"md\",\n  \"name\": \"Material Design icons\",\n  \"projectUrl\": \"http://google.github.io/material-design-icons/\",\n  \"license\": \"Apache License Version 2.0\",\n  \"licenseUrl\": \"https://github.com/google/material-design-icons/blob/master/LICENSE\"\n}, {\n  \"id\": \"ti\",\n  \"name\": \"Typicons\",\n  \"projectUrl\": \"http://s-ings.com/typicons/\",\n  \"license\": \"CC BY-SA 3.0\",\n  \"licenseUrl\": \"https://creativecommons.org/licenses/by-sa/3.0/\"\n}, {\n  \"id\": \"go\",\n  \"name\": \"Github Octicons icons\",\n  \"projectUrl\": \"https://octicons.github.com/\",\n  \"license\": \"MIT\",\n  \"licenseUrl\": \"https://github.com/primer/octicons/blob/master/LICENSE\"\n}, {\n  \"id\": \"fi\",\n  \"name\": \"Feather\",\n  \"projectUrl\": \"https://feathericons.com/\",\n  \"license\": \"MIT\",\n  \"licenseUrl\": \"https://github.com/feathericons/feather/blob/master/LICENSE\"\n}, {\n  \"id\": \"gi\",\n  \"name\": \"Game Icons\",\n  \"projectUrl\": \"https://game-icons.net/\",\n  \"license\": \"CC BY 3.0\",\n  \"licenseUrl\": \"https://creativecommons.org/licenses/by/3.0/\"\n}, {\n  \"id\": \"wi\",\n  \"name\": \"Weather Icons\",\n  \"projectUrl\": \"https://erikflowers.github.io/weather-icons/\",\n  \"license\": \"SIL OFL 1.1\",\n  \"licenseUrl\": \"http://scripts.sil.org/OFL\"\n}, {\n  \"id\": \"di\",\n  \"name\": \"Devicons\",\n  \"projectUrl\": \"https://vorillaz.github.io/devicons/\",\n  \"license\": \"MIT\",\n  \"licenseUrl\": \"https://opensource.org/licenses/MIT\"\n}, {\n  \"id\": \"ai\",\n  \"name\": \"Ant Design Icons\",\n  \"projectUrl\": \"https://github.com/ant-design/ant-design-icons\",\n  \"license\": \"MIT\",\n  \"licenseUrl\": \"https://opensource.org/licenses/MIT\"\n}, {\n  \"id\": \"bs\",\n  \"name\": \"Bootstrap Icons\",\n  \"projectUrl\": \"https://github.com/twbs/icons\",\n  \"license\": \"MIT\",\n  \"licenseUrl\": \"https://opensource.org/licenses/MIT\"\n}, {\n  \"id\": \"ri\",\n  \"name\": \"Remix Icon\",\n  \"projectUrl\": \"https://github.com/Remix-Design/RemixIcon\",\n  \"license\": \"Apache License Version 2.0\",\n  \"licenseUrl\": \"http://www.apache.org/licenses/\"\n}, {\n  \"id\": \"fc\",\n  \"name\": \"Flat Color Icons\",\n  \"projectUrl\": \"https://github.com/icons8/flat-color-icons\",\n  \"license\": \"MIT\",\n  \"licenseUrl\": \"https://opensource.org/licenses/MIT\"\n}, {\n  \"id\": \"gr\",\n  \"name\": \"Grommet-Icons\",\n  \"projectUrl\": \"https://github.com/grommet/grommet-icons\",\n  \"license\": \"Apache License Version 2.0\",\n  \"licenseUrl\": \"http://www.apache.org/licenses/\"\n}, {\n  \"id\": \"hi\",\n  \"name\": \"Heroicons\",\n  \"projectUrl\": \"https://github.com/tailwindlabs/heroicons\",\n  \"license\": \"MIT\",\n  \"licenseUrl\": \"https://opensource.org/licenses/MIT\"\n}, {\n  \"id\": \"si\",\n  \"name\": \"Simple Icons\",\n  \"projectUrl\": \"https://simpleicons.org/\",\n  \"license\": \"CC0 1.0 Universal\",\n  \"licenseUrl\": \"https://creativecommons.org/publicdomain/zero/1.0/\"\n}, {\n  \"id\": \"im\",\n  \"name\": \"IcoMoon Free\",\n  \"projectUrl\": \"https://github.com/Keyamoon/IcoMoon-Free\",\n  \"license\": \"CC BY 4.0 License\"\n}, {\n  \"id\": \"bi\",\n  \"name\": \"BoxIcons\",\n  \"projectUrl\": \"https://github.com/atisawd/boxicons\",\n  \"license\": \"CC BY 4.0 License\"\n}, {\n  \"id\": \"cg\",\n  \"name\": \"css.gg\",\n  \"projectUrl\": \"https://github.com/astrit/css.gg\",\n  \"license\": \"MIT\",\n  \"licenseUrl\": \"https://opensource.org/licenses/MIT\"\n}, {\n  \"id\": \"vsc\",\n  \"name\": \"VS Code Icons\",\n  \"projectUrl\": \"https://github.com/microsoft/vscode-codicons\",\n  \"license\": \"CC BY 4.0\",\n  \"licenseUrl\": \"https://creativecommons.org/licenses/by/4.0/\"\n}];","import React from 'react';\nexport var DefaultContext = {\n  color: undefined,\n  size: undefined,\n  className: undefined,\n  style: undefined,\n  attr: undefined\n};\nexport var IconContext = React.createContext && React.createContext(DefaultContext);","var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport React from 'react';\nimport { IconContext, DefaultContext } from './iconContext';\n\nfunction Tree2Element(tree) {\n  return tree && tree.map(function (node, i) {\n    return React.createElement(node.tag, __assign({\n      key: i\n    }, node.attr), Tree2Element(node.child));\n  });\n}\n\nexport function GenIcon(data) {\n  return function (props) {\n    return React.createElement(IconBase, __assign({\n      attr: __assign({}, data.attr)\n    }, props), Tree2Element(data.child));\n  };\n}\nexport function IconBase(props) {\n  var elem = function elem(conf) {\n    var attr = props.attr,\n        size = props.size,\n        title = props.title,\n        svgProps = __rest(props, [\"attr\", \"size\", \"title\"]);\n\n    var computedSize = size || conf.size || \"1em\";\n    var className;\n    if (conf.className) className = conf.className;\n    if (props.className) className = (className ? className + ' ' : '') + props.className;\n    return React.createElement(\"svg\", __assign({\n      stroke: \"currentColor\",\n      fill: \"currentColor\",\n      strokeWidth: \"0\"\n    }, conf.attr, attr, svgProps, {\n      className: className,\n      style: __assign(__assign({\n        color: props.color || conf.color\n      }, conf.style), props.style),\n      height: computedSize,\n      width: computedSize,\n      xmlns: \"http://www.w3.org/2000/svg\"\n    }), title && React.createElement(\"title\", null, title), props.children);\n  };\n\n  return IconContext !== undefined ? React.createElement(IconContext.Consumer, null, function (conf) {\n    return elem(conf);\n  }) : elem(DefaultContext);\n}","import * as React from 'react';\nimport { Context } from './injectIntl';\nimport { invariantIntlContext } from '../utils';\nexport default function useIntl() {\n  var intl = React.useContext(Context);\n  invariantIntlContext(intl);\n  return intl;\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","import { createPrimitive, useGap } from \"css-system\"\n\nexport const View = createPrimitive(\"div\", ({ css, ...props }) => {\n  return {\n    css: useGap({\n      display: \"flex\",\n      minWidth: 0,\n      minHeight: 0,\n      flex: \"none\",\n      alignSelf: \"auto\",\n      alignItems: \"stretch\",\n      flexDirection: \"column\",\n      justifyContent: \"flex-start\",\n      ...css,\n    }),\n    ...props,\n  }\n})\n","import React, { useContext } from \"react\"\nimport { ThemeContext } from \"css-system\"\nimport { View } from \"./view\"\n\nexport const Logo = (props) => {\n  const theme = useContext(ThemeContext)\n  return (\n    <View\n      as=\"svg\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 467.27 512\"\n      {...props}\n    >\n      <polygon\n        fill={theme.colors.shape}\n        points=\"352.33 159.67 432.16 239.45 432.16 399.13 319.29 512 93.55 512 159.67 445.87 0 286.25 319.29 286.25 272.55 239.45 272.55 79.84 352.33 0 465.26 112.87 352.33 112.87 352.33 159.67\"\n      />\n      <g>\n        <polygon\n          fill={theme.colors.pieces.mt1}\n          points=\"272.57 79.84 272.57 239.45 352.36 319.29 432.19 399.13 432.19 239.45 352.36 159.67 352.36 112.87 465.29 112.87 352.36 0 272.57 79.84\"\n        />\n        <polygon\n          fill={theme.colors.pieces.st1}\n          points=\"93.58 512 319.32 512 432.19 399.13 319.32 286.25 93.58 512\"\n        />\n        <polygon\n          fill={theme.colors.pieces.lt2}\n          points=\"159.67 445.87 239.48 366.05 319.31 286.24 0.03 286.24 159.67 445.87\"\n        />\n      </g>\n    </View>\n  )\n}\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","import firebase from \"firebase/app\";\n\nif (!firebase.apps.length) {\n  firebase.initializeApp({\n    apiKey: process.env.FIREBASE_API_KEY,\n    authDomain: process.env.FIREBASE_AUTH_DOMAIN,\n    databaseURL: process.env.FIREBASE_DATABASE_URL,\n    projectId: process.env.FIREBASE_PROJECT_ID,\n    storageBucket: process.env.FIREBASE_STORAGE_BUCKET,\n    messagingSenderId: process.env.FIREBASE_MESSAGING_SENDER_ID,\n    appId: process.env.FIREBASE_APP_ID,\n    measurementId: process.env.FIREBASE_MEASUREMENT_ID\n  });\n}\n\nexport default firebase;\n","import firebase from \"./src/firebase\";\n\nexport default firebase;\n","import React, { createContext, useCallback, useState, useRef } from \"react\"\nimport { createPortal } from \"react-dom\"\nimport { View } from \"../components/view\"\nimport { FADE_TRANSITION_DURATION } from \"../constants\"\nimport { extendPrimitive } from \"css-system\"\n\nconst Notification = extendPrimitive(View, {\n  css: {\n    fontSize: 3,\n    p: 2,\n    borderRadius: 1,\n    bg: \"notificationBackground\",\n    color: \"dialogText\",\n    animation: `${FADE_TRANSITION_DURATION / 2}ms fadeIn both`,\n    boxShadow: \"0px 0px 10px #00000080\",\n  },\n})\n\nexport const NotifyContext = createContext(null)\n\nexport const NotifyProvider = ({ children }) => {\n  const notificationRef = useRef()\n  const [notificationData, setNotificationData] = useState(null)\n\n  const notify = useCallback((content) => {\n    setNotificationData((prevNotificationData) => {\n      if (prevNotificationData) {\n        clearTimeout(prevNotificationData.timeoutId)\n      }\n\n      return {\n        content,\n        timeoutId: setTimeout(() => {\n          setNotificationData(null)\n        }, 2000),\n      }\n    })\n  }, [])\n\n  return (\n    <NotifyContext.Provider value={notify}>\n      {children}\n      {notificationData &&\n        createPortal(\n          <View\n            css={{\n              position: \"fixed\",\n              top: 0,\n              left: 0,\n              bottom: 0,\n              right: 0,\n              pointerEvents: \"none\",\n              alignItems: \"center\",\n              justifyContent: \"center\",\n            }}\n          >\n            <Notification ref={notificationRef}>\n              {notificationData.content}\n            </Notification>\n          </View>,\n          document.getElementById(\"notificationContainer\")\n        )}\n    </NotifyContext.Provider>\n  )\n}\n","import firebase from \"gatsby-plugin-firebase\"\nimport React, {\n  createContext,\n  useCallback,\n  useEffect,\n  useMemo,\n  useState,\n} from \"react\"\n\nexport const UserContext = createContext(null)\n\nexport const UserProvider = ({ children }) => {\n  const [currentUser, setCurrentUser] = useState(undefined)\n  const [usersMetadata, setUsersMetadata] = useState(null)\n\n  const [initialized, setInitialized] = useState(false)\n\n  useEffect(() => {\n    if (currentUser !== undefined && usersMetadata !== null) {\n      setInitialized(true)\n    }\n  }, [currentUser, usersMetadata])\n\n  useEffect(() => {\n    const unsubscribe = firebase.auth().onAuthStateChanged(async (user) => {\n      if (!user) {\n        setCurrentUser(null)\n      } else {\n        // This read is redundant\n        const snapshot = await firebase\n          .firestore()\n          .collection(\"users\")\n          .doc(user.uid)\n          .get()\n\n        const userMetadata = snapshot.data()\n        setCurrentUser({\n          uid: user.uid,\n          ...userMetadata,\n          firebaseUser: user,\n        })\n      }\n    })\n    return unsubscribe\n  }, [])\n\n  useEffect(() => {\n    const unsubscribe = firebase\n      .firestore()\n      .collection(\"users\")\n      .onSnapshot((querySnapshot) => {\n        const map = {}\n\n        for (const doc of querySnapshot.docs) {\n          const metadata = doc.data()\n          map[doc.id] = metadata\n        }\n\n        setUsersMetadata(map)\n      })\n    return unsubscribe\n  }, [])\n\n  const updateUsername = useCallback(async (currentUser, username) => {\n    await currentUser.firebaseUser.updateProfile({\n      displayName: username,\n    })\n\n    await firebase\n      .firestore()\n      .collection(\"users\")\n      .doc(currentUser.uid)\n      .update({ username })\n\n    setCurrentUser({ ...currentUser, username })\n  }, [])\n\n  const updatePassword = useCallback(\n    async (currentUser, password, newPassword) => {\n      const credential = firebase.auth.EmailAuthProvider.credential(\n        currentUser.firebaseUser.email,\n        password\n      )\n\n      await currentUser.firebaseUser.reauthenticateWithCredential(credential)\n\n      await currentUser.firebaseUser.updatePassword(newPassword)\n    },\n    []\n  )\n\n  const updateEmail = useCallback(async (currentUser, newEmail, password) => {\n    const credential = firebase.auth.EmailAuthProvider.credential(\n      currentUser.firebaseUser.email,\n      password\n    )\n\n    await currentUser.firebaseUser.reauthenticateWithCredential(credential)\n\n    await currentUser.firebaseUser.updateEmail(newEmail)\n  }, [])\n\n  const contextValue = useMemo(\n    () => ({\n      initialized,\n      currentUser,\n      usersMetadata,\n      updateUsername,\n      updatePassword,\n      updateEmail,\n    }),\n    [\n      initialized,\n      currentUser,\n      usersMetadata,\n      updateUsername,\n      updatePassword,\n      updateEmail,\n    ]\n  )\n\n  return (\n    <UserContext.Provider value={contextValue}>{children}</UserContext.Provider>\n  )\n}\n","import firebase from \"gatsby-plugin-firebase\"\nimport React, {\n  createContext,\n  useEffect,\n  useState,\n  useMemo,\n  useContext,\n} from \"react\"\nimport { UserContext } from \"./user\"\nimport {\n  sortDigitsTangrams,\n  sortLettersTangrams,\n  sortTangrams,\n} from \"../utils/sortTangrams\"\n\nexport const TangramsContext = createContext([])\n\nexport const TangramsProvider = ({ children }) => {\n  const { currentUser } = useContext(UserContext)\n  const [allTangrams, setAllTangrams] = useState(null)\n\n  useEffect(() => {\n    const unsubscribe = firebase\n      .firestore()\n      .collection(\"tangrams\")\n      .onSnapshot((collectionSnapshot) => {\n        const newAllTangrams = []\n        for (const doc of collectionSnapshot.docs) {\n          const id = doc.id\n          const { ...tangram } = doc.data()\n\n          newAllTangrams.push({\n            id,\n            ...tangram,\n          })\n        }\n        setAllTangrams(newAllTangrams)\n      })\n\n    return unsubscribe\n  }, [])\n\n  const contextValue = useMemo(() => {\n    if (!allTangrams) {\n      return {\n        initialized: false,\n        approvedTangrams: null,\n        pendingTangrams: null,\n        approvedTangramsByCategory: null,\n      }\n    }\n\n    const newApprovedTangrams = []\n    const newPendingTangrams = []\n\n    for (const tangram of allTangrams) {\n      if (tangram.approved) {\n        newApprovedTangrams.push(tangram)\n      } else if (\n        currentUser &&\n        (currentUser.isAdmin || tangram.uid === currentUser.uid)\n      ) {\n        newPendingTangrams.push(tangram)\n      }\n    }\n\n    return {\n      initialized: true,\n      approvedTangrams: newApprovedTangrams,\n      pendingTangrams: newPendingTangrams,\n    }\n  }, [currentUser, allTangrams])\n\n  return (\n    <TangramsContext.Provider value={contextValue}>\n      {children}\n    </TangramsContext.Provider>\n  )\n}\n","import firebase from \"gatsby-plugin-firebase\"\n\nimport React, {\n  createContext,\n  useCallback,\n  useContext,\n  useEffect,\n  useMemo,\n  useState,\n} from \"react\"\nimport { useIntl } from \"react-intl\"\nimport { copyToClipboard } from \"../utils/copyToClipboard\"\nimport { shuffle } from \"../utils/shuffle\"\nimport { NotifyContext } from \"./notify\"\nimport { TangramsContext } from \"./tangrams\"\nimport { UserContext } from \"./user\"\n\nexport const GalleryContext = createContext(null)\n\nexport const GalleryProvider = ({ children }) => {\n  const intl = useIntl()\n\n  const notify = useContext(NotifyContext)\n  const { currentUser } = useContext(UserContext)\n  const { approvedTangrams } = useContext(TangramsContext)\n\n  const [tangramsCompletedBy, setTangramsCompletedBy] = useState(null)\n  const [tangramsStarredBy, setTangramsLikedBy] = useState(null)\n\n  const [playlist, setPlaylist] = useState(null)\n  const [saveRequestId, setSaveRequestId] = useState(0)\n  const [initialized, setInitialized] = useState(false)\n\n  useEffect(() => {\n    if (tangramsCompletedBy && tangramsStarredBy) {\n      setInitialized(true)\n    }\n  }, [tangramsCompletedBy, tangramsStarredBy])\n\n  useEffect(() => {\n    const unsubscribe = firebase\n      .firestore()\n      .collection(\"stats\")\n      .onSnapshot((collectionSnapshot) => {\n        const newTangramsCompletedBy = {}\n        const newTangramsStarredBy = {}\n\n        for (const doc of collectionSnapshot.docs) {\n          const tangramId = doc.id\n          const tangramStats = doc.data()\n\n          if (!newTangramsCompletedBy[tangramId]) {\n            newTangramsCompletedBy[tangramId] = {}\n            newTangramsStarredBy[tangramId] = {}\n          }\n          for (const userId in tangramStats) {\n            newTangramsCompletedBy[tangramId][userId] =\n              tangramStats[userId].completed\n            newTangramsStarredBy[tangramId][userId] =\n              tangramStats[userId].starred\n          }\n        }\n        setTangramsCompletedBy(newTangramsCompletedBy)\n        setTangramsLikedBy(newTangramsStarredBy)\n      })\n\n    return unsubscribe\n  }, [])\n\n  const isTangramStarred = useCallback(\n    (tangramId) => {\n      if (!currentUser || !tangramsStarredBy[tangramId]) {\n        return false\n      }\n      return tangramsStarredBy[tangramId][currentUser.uid] === true\n    },\n    [currentUser, tangramsStarredBy]\n  )\n\n  const isTangramCompleted = useCallback(\n    (tangramId) => {\n      if (!currentUser || !tangramsCompletedBy[tangramId]) {\n        return false\n      }\n      return tangramsCompletedBy[tangramId][currentUser.uid] !== undefined\n    },\n    [currentUser, tangramsCompletedBy]\n  )\n\n  const shareTangrams = useCallback(\n    (tangrams) => {\n      let challengeLink = `${window.location.origin}/?tangrams=${tangrams\n        .map(({ id }) => id)\n        .join(\",\")}`\n      if (currentUser) {\n        challengeLink += `&uid=${currentUser.uid}`\n      }\n      copyToClipboard(challengeLink)\n      notify(intl.formatMessage({ id: \"Challenge link copied to clipboard\" }))\n    },\n    [notify, currentUser, intl]\n  )\n\n  const requestSave = useCallback(() => {\n    setSaveRequestId((prevRequestId) => prevRequestId + 1)\n  }, [])\n\n  const startRandomPlaylist = useCallback(\n    (sortDifficulty) => {\n      const sortFn = sortDifficulty\n        ? ({ id: idA, edges: edgesA }, { id: idB, edges: edgesB }) => {\n            const isTangramACompleted = isTangramCompleted(idA)\n            const isTangramBCompleted = isTangramCompleted(idB)\n            return !isTangramACompleted && !isTangramBCompleted\n              ? edgesB - edgesA\n              : isTangramACompleted - isTangramBCompleted\n          }\n        : ({ id: idA }, { id: idB }) => {\n            const isTangramACompleted = isTangramCompleted(idA)\n            const isTangramBCompleted = isTangramCompleted(idB)\n            return isTangramACompleted - isTangramBCompleted\n          }\n\n      const randomPlaylist = shuffle([...approvedTangrams]).sort(sortFn)\n      setPlaylist(randomPlaylist)\n    },\n    [approvedTangrams, isTangramCompleted]\n  )\n\n  const markTangramAsComplete = useCallback(\n    async (tangram, completionTime) => {\n      if (\n        currentUser &&\n        approvedTangrams.some(\n          (approvedTangram) => approvedTangram.id === tangram.id\n        ) &&\n        !isTangramCompleted(tangram.id)\n      ) {\n        await firebase\n          .firestore()\n          .collection(\"stats\")\n          .doc(tangram.id)\n          .set(\n            {\n              [currentUser.uid]: {\n                completed: completionTime,\n              },\n            },\n            { merge: true }\n          )\n      }\n    },\n    [approvedTangrams, currentUser, isTangramCompleted]\n  )\n\n  const toggleTangramStar = useCallback(\n    async (tangram) => {\n      if (\n        currentUser &&\n        approvedTangrams.some(\n          (approvedTangram) => approvedTangram.id === tangram.id\n        )\n      ) {\n        const starred = isTangramStarred(tangram.id)\n\n        await firebase\n          .firestore()\n          .collection(\"stats\")\n          .doc(tangram.id)\n          .set(\n            {\n              [currentUser.uid]: {\n                starred: !starred,\n              },\n            },\n            { merge: true }\n          )\n      }\n    },\n    [approvedTangrams, currentUser, isTangramStarred]\n  )\n\n  const contextValue = useMemo(\n    () => ({\n      initialized,\n      requestSave,\n      saveRequestId,\n      playlist,\n      setPlaylist,\n      shareTangrams,\n      startRandomPlaylist,\n      tangramsCompletedBy,\n      tangramsStarredBy,\n      toggleTangramStar,\n      markTangramAsComplete,\n      isTangramCompleted,\n      isTangramStarred,\n    }),\n    [\n      initialized,\n      requestSave,\n      saveRequestId,\n      playlist,\n      shareTangrams,\n      startRandomPlaylist,\n      tangramsCompletedBy,\n      tangramsStarredBy,\n      toggleTangramStar,\n      markTangramAsComplete,\n      isTangramCompleted,\n      isTangramStarred,\n    ]\n  )\n\n  return (\n    <GalleryContext.Provider value={contextValue}>\n      {children}\n    </GalleryContext.Provider>\n  )\n}\n","export const copyToClipboard = (str) => {\n  const el = document.createElement(\"textarea\")\n  el.value = str\n  document.body.appendChild(el)\n  el.select()\n  document.execCommand(\"copy\")\n  document.body.removeChild(el)\n}\n","export const shuffle = array => {\n  let currentIndex = array.length\n  let temporaryValue\n  let randomIndex\n\n  // While there remain elements to shuffle...\n  while (0 !== currentIndex) {\n    // Pick a remaining element...\n    randomIndex = Math.floor(Math.random() * currentIndex)\n    currentIndex -= 1\n\n    // And swap it with the current element.\n    temporaryValue = array[currentIndex]\n    array[currentIndex] = array[randomIndex]\n    array[randomIndex] = temporaryValue\n  }\n\n  return array\n}\n","import React__default, { useEffect } from 'react';\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction useOnMount(callback) {\n  useEffect(callback, []);\n}\n\nfunction useSound(src, _ref) {\n  if (_ref === void 0) {\n    _ref = {};\n  }\n\n  var _ref2 = _ref,\n      _ref2$volume = _ref2.volume,\n      volume = _ref2$volume === void 0 ? 1 : _ref2$volume,\n      _ref2$playbackRate = _ref2.playbackRate,\n      playbackRate = _ref2$playbackRate === void 0 ? 1 : _ref2$playbackRate,\n      _ref2$soundEnabled = _ref2.soundEnabled,\n      soundEnabled = _ref2$soundEnabled === void 0 ? true : _ref2$soundEnabled,\n      _ref2$interrupt = _ref2.interrupt,\n      interrupt = _ref2$interrupt === void 0 ? false : _ref2$interrupt,\n      onload = _ref2.onload,\n      delegated = _objectWithoutPropertiesLoose(_ref2, [\"id\", \"volume\", \"playbackRate\", \"soundEnabled\", \"interrupt\", \"onload\"]);\n\n  var HowlConstructor = React__default.useRef(null);\n  var isMounted = React__default.useRef(false);\n\n  var _React$useState = React__default.useState(null),\n      duration = _React$useState[0],\n      setDuration = _React$useState[1];\n\n  var _React$useState2 = React__default.useState(null),\n      sound = _React$useState2[0],\n      setSound = _React$useState2[1];\n\n  var handleLoad = function handleLoad() {\n    if (typeof onload === 'function') {\n      // @ts-ignore\n      onload.call(this);\n    }\n\n    if (isMounted.current) {\n      // @ts-ignore\n      setDuration(this.duration() * 1000);\n    } // @ts-ignore\n\n\n    setSound(this);\n  }; // We want to lazy-load Howler, since sounds can't play on load anyway.\n\n\n  useOnMount(function () {\n    import('howler').then(function (mod) {\n      if (!isMounted.current) {\n        var _mod$Howl; // Depending on the module system used, `mod` might hold\n        // the export directly, or it might be under `default`.\n\n\n        HowlConstructor.current = (_mod$Howl = mod.Howl) !== null && _mod$Howl !== void 0 ? _mod$Howl : mod[\"default\"].Howl;\n        isMounted.current = true;\n        new HowlConstructor.current(_extends({\n          src: Array.isArray(src) ? src : [src],\n          volume: volume,\n          rate: playbackRate,\n          onload: handleLoad\n        }, delegated));\n      }\n    });\n    return function () {\n      isMounted.current = false;\n    };\n  }); // When the `src` changes, we have to do a whole thing where we recreate\n  // the Howl instance. This is because Howler doesn't expose a way to\n  // tweak the sound\n\n  React__default.useEffect(function () {\n    if (HowlConstructor.current && sound) {\n      setSound(new HowlConstructor.current(_extends({\n        src: Array.isArray(src) ? src : [src],\n        volume: volume,\n        onload: handleLoad\n      }, delegated)));\n    } // The linter wants to run this effect whenever ANYTHING changes,\n    // but very specifically I only want to recreate the Howl instance\n    // when the `src` changes. Other changes should have no effect.\n    // Passing array to the useEffect dependencies list will result in\n    // ifinite loop so we need to stringify it, for more details check\n    // https://github.com/facebook/react/issues/14476#issuecomment-471199055\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [JSON.stringify(src)]); // Whenever volume/playbackRate are changed, change those properties\n  // on the sound instance.\n\n  React__default.useEffect(function () {\n    if (sound) {\n      sound.volume(volume);\n      sound.rate(playbackRate);\n    } // A weird bug means that including the `sound` here can trigger an\n    // error on unmount, where the state loses track of the sprites??\n    // No idea, but anyway I don't need to re-run this if only the `sound`\n    // changes.\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [volume, playbackRate]);\n  var play = React__default.useCallback(function (options) {\n    if (typeof options === 'undefined') {\n      options = {};\n    }\n\n    if (!sound || !soundEnabled && !options.forceSoundEnabled) {\n      return;\n    }\n\n    if (interrupt) {\n      sound.stop();\n    }\n\n    if (options.playbackRate) {\n      sound.rate(options.playbackRate);\n    }\n\n    sound.play(options.id);\n  }, [sound, soundEnabled, interrupt]);\n  var stop = React__default.useCallback(function (id) {\n    if (!sound) {\n      return;\n    }\n\n    sound.stop(id);\n  }, [sound]);\n  var pause = React__default.useCallback(function (id) {\n    if (!sound) {\n      return;\n    }\n\n    sound.pause(id);\n  }, [sound]);\n  var returnedValue = [play, {\n    sound: sound,\n    stop: stop,\n    pause: pause,\n    duration: duration\n  }];\n  return returnedValue;\n}\n\nexport default useSound;\nexport { useSound };","export default __webpack_public_path__ + \"static/star-a46cf5189a2688d87d665c2befbef64c.wav\";","export default __webpack_public_path__ + \"static/button-8b24bcedcccb791b25194297eeb24943.wav\";","export default __webpack_public_path__ + \"static/card-b05a7b6659023812d652b2e1ec172c0c.wav\";","export default __webpack_public_path__ + \"static/pop-15167204762122a48c3ea7b03541b75a.wav\";","export default __webpack_public_path__ + \"static/victory-f1f96272b3b6267e3c5f86b47e4d8cf9.wav\";","import React, {\n  useState,\n  useCallback,\n  useEffect,\n  useMemo,\n  createContext,\n} from \"react\"\nimport useSound from \"use-sound\"\n\nimport starSound from \"../sounds/star.wav\"\nimport buttonSound from \"../sounds/button.wav\"\nimport cardSound from \"../sounds/card.wav\"\nimport tangramSound from \"../sounds/pop.wav\"\nimport victorySound from \"../sounds/victory.wav\"\n\nexport const SoundContext = createContext([true, () => {}])\n\nexport const SoundProvider = ({ children }) => {\n  const [soundEnabled, setSoundEnabled] = useState(true)\n\n  const [playStar] = useSound(starSound, {\n    soundEnabled,\n  })\n  const [playButton] = useSound(buttonSound, {\n    soundEnabled,\n  })\n  const [playToggle] = useSound(buttonSound, {\n    soundEnabled,\n  })\n  const [playCard] = useSound(cardSound, {\n    soundEnabled,\n  })\n\n  const [playTangram] = useSound(tangramSound, {\n    soundEnabled,\n  })\n\n  const [playVictory] = useSound(victorySound, {\n    soundEnabled,\n  })\n\n  useEffect(() => {\n    setSoundEnabled(\n      window.localStorage.getItem(\"sound\") === \"off\" ? false : true\n    )\n  }, [])\n\n  const toggleSound = useCallback(() => {\n    const newSoundsEnabled = !soundEnabled\n    setSoundEnabled(newSoundsEnabled)\n    window.localStorage.setItem(\"sound\", newSoundsEnabled ? \"on\" : \"off\")\n  }, [soundEnabled])\n\n  const contextValue = useMemo(\n    () => ({\n      soundEnabled,\n      toggleSound,\n      playButton,\n      playToggle,\n      playCard,\n      playStar,\n      playTangram,\n      playVictory,\n    }),\n    [\n      soundEnabled,\n      toggleSound,\n      playButton,\n      playToggle,\n      playCard,\n      playStar,\n      playTangram,\n      playVictory,\n    ]\n  )\n\n  return (\n    <SoundContext.Provider value={contextValue}>\n      {children}\n    </SoundContext.Provider>\n  )\n}\n","import { createPrimitive, useKeyframes, extendPrimitive } from \"css-system\"\nimport { useContext } from \"react\"\nimport { SoundContext } from \"../contexts/sound\"\n\nconst BaseButton = createPrimitive(\n  \"button\",\n  ({ css, onClick, mute, ...props }) => {\n    const { playButton } = useContext(SoundContext)\n\n    return {\n      css: {\n        borderRadius: 2,\n        minWidth: 0,\n        minHeight: 0,\n        flex: \"none\",\n        fontWeight: \"bold\",\n        border: \"none\",\n        fontSize: \"inherit\",\n        color: \"inherit\",\n        background: \"none\",\n        cursor: \"pointer\",\n        p: 3,\n        \"&:disabled\": {\n          opacity: 0.3,\n          cursor: \"not-allowed\",\n        },\n        \"&:focus\": {\n          outline: \"none\",\n        },\n        ...css,\n      },\n      onClick: (e) => {\n        if (!mute) {\n          playButton()\n        }\n        onClick && onClick(e)\n      },\n      ...props,\n    }\n  }\n)\n\nexport const SecondaryButton = extendPrimitive(BaseButton, {\n  css: {\n    border: \"2px solid\",\n    borderRadius: 2,\n  },\n})\n\nexport const DangerButton = extendPrimitive(BaseButton, {\n  css: {\n    border: \"2px solid\",\n    color: \"errorText\",\n  },\n})\n\nexport const PrimaryButton = extendPrimitive(\n  BaseButton,\n  ({ css, ...props }) => {\n    const gradient = useKeyframes({\n      0: { bg: \"pieces.lt2\" },\n      14: { bg: \"pieces.rh\" },\n      28: { bg: \"pieces.st2\" },\n      42: { bg: \"pieces.mt1\" },\n      57: { bg: \"pieces.st1\" },\n      71: { bg: \"pieces.lt1\" },\n      85: { bg: \"pieces.sq\" },\n      100: { bg: \"pieces.lt2\" },\n    })\n\n    return {\n      css: {\n        animation: `${gradient} 20s linear infinite both`,\n        color: \"#FFFFFFDD\",\n        ...css,\n      },\n\n      ...props,\n    }\n  }\n)\n","import React, { useContext, useMemo } from \"react\"\nimport { View } from \"./view\"\nimport { SoundContext } from \"../contexts/sound\"\nimport { ThemeContext } from \"css-system\"\n\nexport const Badge = ({ uid, size = \"badge\", css, onClick, ...props }) => {\n  const { playButton } = useContext(SoundContext)\n  const theme = useContext(ThemeContext)\n\n  const backgroundColor = useMemo(() => {\n    const pieceColors = Object.values(theme.colors.pieces)\n    return pieceColors[uid.charCodeAt(0) % pieceColors.length].slice(1)\n  }, [theme, uid])\n\n  return (\n    <View\n      as=\"img\"\n      src={`https://api.dicebear.com/7.x/croodles-neutral/svg?seed=${uid}&backgroundColor=${encodeURIComponent(backgroundColor)}`}\n      css={{\n        m: \"2px\",\n        boxShadow: `0 0 0 2px ${theme.colors.dialogText}`,\n        borderRadius: \"50%\",\n        backgroundColor,\n        size,\n        ...css,\n      }}\n      onClick={\n        onClick\n          ? (e) => {\n              playButton()\n              onClick(e)\n            }\n          : undefined\n      }\n      {...props}\n    ></View>\n  )\n}\n","import { ThemeContext } from \"css-system\"\nimport React, { useContext, useMemo, useCallback } from \"react\"\nimport { COLOR_TRANSITION_DURATION } from \"../constants\"\nimport { SoundContext } from \"../contexts/sound\"\nimport { Badge } from \"./badge\"\nimport { View } from \"./view\"\nimport { useLongPress } from \"../utils/useLongPress\"\nimport { getTangramDifficulty } from \"../utils/getTangramDifficulty\"\n\nexport const Card = ({\n  showStroke,\n  tangram,\n  completed,\n  selected,\n  css,\n  onBadgeClick,\n  onClick,\n  onLongPress,\n  hideBadge,\n  ...props\n}) => {\n  const { path, width, height, uid, approved, emoji } = tangram\n  const difficulty = useMemo(() => getTangramDifficulty(tangram), [tangram])\n  const { playCard } = useContext(SoundContext)\n  const theme = useContext(ThemeContext)\n  const color = theme.colors.difficulties[difficulty]\n  const handleLongPress = useCallback(() => {\n    if (onLongPress) {\n      onLongPress(tangram)\n    }\n  }, [onLongPress, tangram])\n  const longPressHandlers = useLongPress(handleLongPress, 1000)\n\n  return (\n    <View\n      css={css}\n      onClick={\n        onClick\n          ? () => {\n              playCard()\n              onClick(tangram)\n            }\n          : undefined\n      }\n      {...longPressHandlers}\n      {...props}\n    >\n      <View\n        css={{\n          opacity: uid && approved === false ? 0.5 : 1,\n          borderRadius: 5,\n          boxShadow: selected\n            ? `0px 0px 0px 4px ${color}`\n            : \"0px 0px 0px 1px rgba(0, 0, 0, 0.1)\",\n          m: 1,\n          bg: \"background\",\n          transition: `background-color ${COLOR_TRANSITION_DURATION}ms`,\n          p: 3,\n          textAlign: \"center\",\n          position: \"relative\",\n          cursor: onClick || onLongPress ? \"pointer\" : undefined,\n          width: 128,\n          height: 178,\n        }}\n        deps={[color, selected, uid, approved]}\n      >\n        <View\n          as=\"svg\"\n          css={{\n            flex: \"1\",\n            justifyContent: \"center\",\n            fill: color,\n            stroke: showStroke ? \"lime\" : undefined,\n            strokeWidth: showStroke ? 8 : undefined,\n          }}\n          deps={[showStroke, color]}\n          viewBox={`0 0 ${width} ${height}`}\n          dangerouslySetInnerHTML={{ __html: `<path d=\"${path}\" />` }}\n        />\n        {completed && (\n          <View\n            css={{ position: \"absolute\", top: 1, left: 1, fontSize: \"30px\" }}\n          >\n            {emoji}\n          </View>\n        )}\n        {uid && !hideBadge && (\n          <Badge\n            uid={uid}\n            css={{\n              position: \"absolute\",\n              bottom: 1,\n              right: 1,\n              cursor: onBadgeClick ? \"pointer\" : undefined,\n            }}\n            onClick={\n              onBadgeClick\n                ? (e) => {\n                    e.stopPropagation()\n                    onBadgeClick(uid)\n                  }\n                : undefined\n            }\n          ></Badge>\n        )}\n      </View>\n    </View>\n  )\n}\n","import { useState } from \"react\"\n\nexport const useLongPress = (callback, ms) => {\n  const [data, setData] = useState(null)\n\n  const handleStart = (event) => {\n    if (data && event.touches && event.touches.length !== 1) {\n      clearTimeout(data.timeoutId)\n    } else {\n      const startEvent = event.touches ? event.touches.item(0) : event\n      setData({\n        timeoutId: setTimeout(callback, ms),\n        startEvent: {\n          clientX: startEvent.clientX,\n          clientY: startEvent.clientY,\n        },\n      })\n    }\n  }\n\n  const handleMove = (event) => {\n    if (!data) {\n      return\n    }\n    let moveEvent = event.touches ? event.touches.item(0) : event\n    const distance = Math.sqrt(\n      Math.pow(moveEvent.clientX - data.startEvent.clientX, 2) +\n        Math.pow(moveEvent.clientY - data.startEvent.clientY, 2)\n    )\n    if (distance > 10) {\n      clearTimeout(data.timeoutId)\n    }\n  }\n\n  const handleEnd = () => {\n    if (!data) {\n      return\n    }\n    clearTimeout(data.timeoutId)\n  }\n\n  return {\n    onMouseDown: handleStart,\n    onMouseUp: handleEnd,\n    onMouseMove: handleMove,\n    onMouseLeave: handleEnd,\n    onTouchStart: handleStart,\n    onTouchEnd: handleEnd,\n    onTouchMove: handleMove,\n  }\n}\n","export const getTangramDifficulty = (tangram) =>\n  tangram.edges > 16 ? 0 : tangram.edges > 8 ? 1 : 2\n","import React, { useContext } from \"react\"\nimport { createPortal } from \"react-dom\"\nimport { FiX } from \"react-icons/fi\"\nimport {\n  COLOR_TRANSITION_DURATION,\n  FADE_TRANSITION_DURATION,\n} from \"../constants\"\nimport { SoundContext } from \"../contexts/sound\"\nimport { View } from \"./view\"\n\nexport const Dialog = ({ children, title, onClose, big, css, ...props }) => {\n  const { playButton } = useContext(SoundContext)\n\n  return createPortal(\n    <View\n      onClick={onClose}\n      css={{\n        position: \"fixed\",\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        bg: \"#00000080\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        animation: `${FADE_TRANSITION_DURATION / 2}ms fadeIn ease both`,\n        p: 3,\n      }}\n    >\n      <View\n        css={{\n          flex: \"0 1 auto\",\n          bg: \"dialogBackground\",\n          color: \"dialogText\",\n          borderRadius: 3,\n          transition: `background-color ${COLOR_TRANSITION_DURATION}ms, color ${COLOR_TRANSITION_DURATION}ms`,\n          fontSize: 3,\n          p: 3,\n          gap: 3,\n          maxWidth: \"95vw\",\n          width: big ? \"568px\" : \"400px\"\n        }}\n        onClick={(e) => e.stopPropagation()}\n      >\n        <View\n          css={{\n            flexDirection: \"row\",\n            gap: 3,\n            alignItems: \"center\",\n            justifyContent: \"space-between\",\n            zIndex: 1,\n          }}\n        >\n          {title}\n          <View\n            as={FiX}\n            css={{\n              cursor: \"pointer\",\n              size: \"badge\",\n              ml: title ? undefined : \"auto\",\n            }}\n            onClick={() => {\n              playButton()\n              onClose()\n            }}\n          ></View>\n        </View>\n        <View\n          css={{\n            overflow: \"auto\",\n            flex: \"1\",\n            maxWidth: \"100%\",\n            ...css,\n          }}\n          {...props}\n        >\n          {children}\n        </View>\n      </View>\n    </View>,\n    document.getElementById(\"dialogContainer\")\n  )\n}\n","import { createPrimitive } from \"css-system\"\n\nexport const Text = createPrimitive(\"div\", {\n  css: {\n    display: \"inline\",\n    minWidth: 0,\n    minHeight: 0,\n    flex: \"none\",\n  },\n})\n","import React from \"react\"\n\nimport { Text } from \"./text\"\nimport { extendPrimitive, createPrimitive, useKeyframes } from \"css-system\"\nimport { FiStar } from \"react-icons/fi\"\nimport { View } from \"./view\"\n\nexport const Error = extendPrimitive(Text, {\n  css: {\n    fontSize: 2,\n    color: \"errorText\",\n  },\n})\n\nexport const Hint = extendPrimitive(Text, {\n  css: {\n    fontSize: 2,\n    opacity: 0.75,\n  },\n})\n\nexport const Title = extendPrimitive(Text, {\n  css: {\n    fontSize: 4,\n    fontWeight: \"bold\",\n  },\n})\n\nexport const SubTitle = extendPrimitive(Text, {\n  css: {\n    fontSize: 3,\n    fontWeight: \"bold\",\n  },\n})\n\nexport const Link = createPrimitive(\"a\", {\n  css: {\n    cursor: \"pointer\",\n    textDecoration: \"underline\",\n    color: \"inherit\",\n    \"&:visited\": {\n      color: \"inherit\",\n    },\n  },\n})\n\nexport const Similink = extendPrimitive(Text, {\n  css: {\n    cursor: \"pointer\",\n    textDecoration: \"underline\",\n  },\n})\n\nexport const InlineIcon = ({ icon, css }) => {\n  return (\n    <Text\n      as={icon}\n      css={{\n        position: \"relative\",\n        top: \"0.1em\",\n        size: \"0.9em\",\n        ...css,\n      }}\n    ></Text>\n  )\n}\n\nexport const InlineStarIcon = ({ css }) => {\n  const gradient = useKeyframes({\n    0: { color: \"pieces.lt2\" },\n    14: { color: \"pieces.rh\" },\n    28: { color: \"pieces.st2\" },\n    42: { color: \"pieces.mt1\" },\n    57: { color: \"pieces.st1\" },\n    71: { color: \"pieces.lt1\" },\n    85: { color: \"pieces.sq\" },\n    100: { color: \"pieces.lt2\" },\n  })\n  return (\n    <Text\n      as={FiStar}\n      css={{\n        stroke: \"currentColor\",\n        fill: \"currentColor\",\n        animation: `${gradient} 20s linear infinite both`,\n        position: \"relative\",\n        top: \"0.1em\",\n        size: \"0.9em\",\n        ...css,\n      }}\n    ></Text>\n  )\n}\n\nexport const StarIcon = ({ css, deps }) => {\n  const gradient = useKeyframes({\n    0: { color: \"pieces.lt2\" },\n    14: { color: \"pieces.rh\" },\n    28: { color: \"pieces.st2\" },\n    42: { color: \"pieces.mt1\" },\n    57: { color: \"pieces.st1\" },\n    71: { color: \"pieces.lt1\" },\n    85: { color: \"pieces.sq\" },\n    100: { color: \"pieces.lt2\" },\n  })\n  return (\n    <View\n      as={FiStar}\n      css={{\n        size: \"icon\",\n        m: \"-2px\",\n        stroke: \"currentColor\",\n        fill: \"currentColor\",\n        animation: `${gradient} 20s linear infinite both`,\n        ...css,\n      }}\n      deps={deps}\n    ></View>\n  )\n}\n","import React, { useContext } from \"react\"\nimport { useIntl } from \"react-intl\"\nimport { DIALOG_CLOSED_REASON } from \"../constants\"\nimport { GalleryContext } from \"../contexts/gallery\"\nimport { UserContext } from \"../contexts/user\"\nimport { PrimaryButton } from \"./button\"\nimport { Card } from \"./card\"\nimport { Dialog } from \"./dialog\"\nimport { Title } from \"./primitives\"\nimport { View } from \"./view\"\n\nexport const ChallengeDialog = ({ uid, tangrams, deferred }) => {\n  const intl = useIntl()\n  const { usersMetadata } = useContext(UserContext)\n  const { setPlaylist } = useContext(GalleryContext)\n  const username = usersMetadata[uid] ? usersMetadata[uid].username : null\n\n  return (\n    <Dialog\n      big\n      title={\n        <Title>\n          {username\n            ? intl.formatMessage(\n              { id: \"{username} challenged you\" },\n              {\n                username,\n              }\n            )\n            : intl.formatMessage(\n              { id: \"Rise to the challenge\" },\n              {\n                username,\n              }\n            )}\n        </Title>\n      }\n      onClose={() => deferred.reject(DIALOG_CLOSED_REASON)}\n      css={{ gap: 3, overflow: \"initial\", maxWidth: \"568px\" }}\n    >\n      <View\n        css={{\n          flex: \"1\",\n          overflow: \"auto\",\n          flexDirection: \"row\",\n          flexWrap: \"wrap\",\n          justifyContent: \"center\",\n          m: -1,\n        }}\n      >\n        {tangrams.map((tangram) => (\n          <Card\n            key={tangram.id}\n            selected\n            tangram={tangram}\n            css={{\n              m: 1,\n            }}\n          ></Card>\n        ))}\n      </View>\n\n      <PrimaryButton\n        onClick={() => {\n          setPlaylist(tangrams)\n          deferred.resolve()\n        }}\n      >\n        {intl.formatMessage({ id: \"Let's go!\" })}\n      </PrimaryButton>\n    </Dialog>\n  )\n}\n","/*\n * Copyright 2015, Yahoo Inc.\n * Copyrights licensed under the New BSD License.\n * See the accompanying LICENSE file for terms.\n */\nimport { __rest } from \"tslib\";\nimport * as React from 'react';\nimport useIntl from './useIntl';\nimport { shallowEqual } from '../utils';\n\nfunction areEqual(prevProps, nextProps) {\n  var values = prevProps.values,\n      otherProps = __rest(prevProps, [\"values\"]);\n\n  var nextValues = nextProps.values,\n      nextOtherProps = __rest(nextProps, [\"values\"]);\n\n  return shallowEqual(nextValues, values) && shallowEqual(otherProps, nextOtherProps);\n}\n\nfunction FormattedMessage(props) {\n  var intl = useIntl();\n  var formatMessage = intl.formatMessage,\n      _a = intl.textComponent,\n      Text = _a === void 0 ? React.Fragment : _a;\n  var id = props.id,\n      description = props.description,\n      defaultMessage = props.defaultMessage,\n      values = props.values,\n      children = props.children,\n      _b = props.tagName,\n      Component = _b === void 0 ? Text : _b,\n      ignoreTag = props.ignoreTag;\n  var descriptor = {\n    id: id,\n    description: description,\n    defaultMessage: defaultMessage\n  };\n  var nodes = formatMessage(descriptor, values, {\n    ignoreTag: ignoreTag\n  });\n\n  if (typeof children === 'function') {\n    return children(Array.isArray(nodes) ? nodes : [nodes]);\n  }\n\n  if (Component) {\n    return React.createElement(Component, null, React.Children.toArray(nodes));\n  }\n\n  return React.createElement(React.Fragment, null, nodes);\n}\n\nFormattedMessage.displayName = 'FormattedMessage';\nvar MemoizedFormattedMessage = React.memo(FormattedMessage, areEqual);\nMemoizedFormattedMessage.displayName = 'MemoizedFormattedMessage';\nexport default MemoizedFormattedMessage;","import { DIGITS, LETTERS } from \"../constants\"\n\nexport const sortTangrams = (tangramA, tangramB) => {\n  return tangramB.edges === tangramA.edges\n    ? tangramB.length - tangramA.length\n    : tangramB.edges - tangramA.edges\n}\n\nexport const sortDigitsTangrams = (tangramA, tangramB) => {\n  return DIGITS.indexOf(tangramA.emoji) - DIGITS.indexOf(tangramB.emoji)\n}\n\nexport const sortLettersTangrams = (tangramA, tangramB) => {\n  return LETTERS.indexOf(tangramA.emoji) - LETTERS.indexOf(tangramB.emoji)\n}\n","import { createPrimitive } from \"css-system\"\n\nexport const Input = createPrimitive(\"input\", {\n  type: \"text\",\n  css: {\n    color: \"inherit\",\n    fontSize: \"inherit\",\n    bg: \"inputBackground\",\n    border: \"none\",\n    borderRadius: 2,\n    borderColor: \"currentColor\",\n    p: 2,\n    \"&:disabled\": {\n      opacity: 0.5,\n      cursor: \"not-allowed\",\n    },\n    \"&:focus\": {\n      outline: \"none\",\n    },\n  },\n})\n","import { extendPrimitive, ThemeContext } from \"css-system\"\nimport React, { useCallback, useContext, useMemo, useState } from \"react\"\nimport { FiShare2, FiStar } from \"react-icons/fi\"\nimport { FormattedMessage, useIntl } from \"react-intl\"\nimport { DIALOG_CLOSED_REASON } from \"../constants\"\nimport { DialogContext } from \"../contexts/dialog\"\nimport { GalleryContext } from \"../contexts/gallery\"\nimport { TangramsContext } from \"../contexts/tangrams\"\nimport { UserContext } from \"../contexts/user\"\nimport {\n  sortDigitsTangrams,\n  sortLettersTangrams,\n  sortTangrams,\n} from \"../utils/sortTangrams\"\nimport { PrimaryButton } from \"./button\"\nimport { Card } from \"./card\"\nimport { Dialog } from \"./dialog\"\nimport { Input } from \"./input\"\nimport { Hint, InlineIcon, SubTitle, Title } from \"./primitives\"\nimport { Text } from \"./text\"\nimport { View } from \"./view\"\n\nconst FadedView = extendPrimitive(View, ({ css, ...props }) => {\n  const theme = useContext(ThemeContext)\n  return {\n    css: {\n      p: 3,\n      alignItems: \"center\",\n      position: \"sticky\",\n      top: 0,\n      zIndex: 1,\n      background: `linear-gradient(0deg, rgba(0,0,0,0) 0%, ${theme.colors.dialogBackground} 50%)`,\n      ...css,\n    },\n    ...props,\n  }\n})\n\nexport const GalleryDialog = ({ deferred }) => {\n  const intl = useIntl()\n\n  const { currentUser } = useContext(UserContext)\n\n  const { pendingTangrams, approvedTangrams } = useContext(TangramsContext)\n  const { showProfile, showTangram } = useContext(DialogContext)\n  const {\n    setPlaylist,\n    shareTangrams,\n    startRandomPlaylist,\n    isTangramCompleted,\n    isTangramStarred,\n  } = useContext(GalleryContext)\n\n  const [selectedTangrams, setSelectedTangrams] = useState([])\n\n  const [selectedGalleryFilter, setSelectedGalleryFilter] = useState(() => {\n    const storedSelectedGalleryFilter = window.localStorage.getItem(\n      \"selectedGalleryFilter\"\n    )\n\n    return [\"all\", \"uncompleted\", \"starred\", \"pending\"].includes(\n      storedSelectedGalleryFilter\n    )\n      ? storedSelectedGalleryFilter\n      : \"all\"\n  })\n\n  const handleGalleryFilterChange = (e) => {\n    setSelectedGalleryFilter(e.target.value)\n    window.localStorage.setItem(\"selectedGalleryFilter\", e.target.value)\n  }\n\n  const handleTangramClick = useCallback((clickedTangram) => {\n    setSelectedTangrams((prevPendingSelectedTangrams) => {\n      if (\n        prevPendingSelectedTangrams.some(\n          (pendingSelectedTangram) =>\n            pendingSelectedTangram.id === clickedTangram.id\n        )\n      ) {\n        return prevPendingSelectedTangrams.filter(\n          (tangram) => tangram.id !== clickedTangram.id\n        )\n      }\n      return [...prevPendingSelectedTangrams, clickedTangram]\n    })\n  }, [])\n\n  const handleStartClick = () => {\n    if (selectedTangrams.length) {\n      setPlaylist(selectedTangrams)\n    } else {\n      startRandomPlaylist()\n    }\n\n    deferred.resolve()\n  }\n\n  const handleCloseClick = () => deferred.reject(DIALOG_CLOSED_REASON)\n\n  const tangramsByCategory = useMemo(() => {\n    const tangrams =\n      selectedGalleryFilter === \"pending\" ? pendingTangrams : approvedTangrams\n\n    const newTangramsByCategory = {}\n\n    for (const tangram of tangrams) {\n      if (\n        selectedGalleryFilter === \"uncompleted\" &&\n        isTangramCompleted(tangram.id)\n      ) {\n        continue\n      }\n      if (\n        selectedGalleryFilter === \"starred\" &&\n        !isTangramStarred(tangram.id)\n      ) {\n        continue\n      }\n\n      if (!newTangramsByCategory[tangram.category]) {\n        newTangramsByCategory[tangram.category] = []\n      }\n\n      newTangramsByCategory[tangram.category].push(tangram)\n    }\n\n    const newSortedTangramsByCategory = {}\n\n    for (const sortedCategory of Object.keys(newTangramsByCategory).sort()) {\n      newSortedTangramsByCategory[sortedCategory] = newTangramsByCategory[\n        sortedCategory\n      ].sort(\n        sortedCategory === \"letters\"\n          ? sortLettersTangrams\n          : sortedCategory === \"digits\"\n            ? sortDigitsTangrams\n            : sortTangrams\n      )\n    }\n\n    return newSortedTangramsByCategory\n  }, [\n    pendingTangrams,\n    approvedTangrams,\n    selectedGalleryFilter,\n    isTangramCompleted,\n    isTangramStarred,\n  ])\n\n  const visibleCategories = Object.keys(tangramsByCategory)\n\n  return (\n    <>\n      <Dialog\n        big\n        title={<Title>{intl.formatMessage({ id: \"Tangram gallery\" })}</Title>}\n        css={{\n          gap: 3,\n          width: \"568px\",\n        }}\n        onClose={handleCloseClick}\n      >\n        {\n          <>\n            <Input\n              as=\"select\"\n              value={selectedGalleryFilter}\n              onChange={handleGalleryFilterChange}\n            >\n              <option value=\"all\">\n                {intl.formatMessage({ id: \"All tangrams\" })}\n              </option>\n              <option value=\"uncompleted\">\n                {intl.formatMessage({ id: \"Uncompleted tangrams\" })}\n              </option>\n              <option value=\"starred\">\n                {intl.formatMessage({ id: \"★ Starred tangrams\" })}\n              </option>\n              <option value=\"pending\">\n                {intl.formatMessage({ id: \"Pending approbation tangrams\" })}\n              </option>\n            </Input>\n            <View css={{ flex: \"1\", overflow: \"auto\", gap: 3 }}>\n              {visibleCategories.length === 0 ? (\n                <View\n                  key=\"noresult\"\n                  css={{\n                    gap: 3,\n                    alignItems: \"center\",\n                  }}\n                >\n                  {selectedGalleryFilter === \"uncompleted\" ? (\n                    <>\n                      <Text css={{ fontSize: \"8em\" }}>{\"🍾\"}</Text>\n                      <View css={{ gap: 2, alignItems: \"center\", px: 3 }}>\n                        <SubTitle css={{ textAlign: \"center\" }}>\n                          <FormattedMessage id=\"You've completed all tangrams\" />\n                        </SubTitle>\n                        <Hint>\n                          <FormattedMessage id=\"Come back later for more or create your own tangrams\" />\n                        </Hint>\n                      </View>\n                    </>\n                  ) : selectedGalleryFilter === \"pending\" ? (\n                    currentUser && currentUser.isAdmin ? (\n                      <>\n                        <Text css={{ fontSize: \"8em\" }}>{\"👮\"}</Text>\n                        <View css={{ gap: 2, alignItems: \"center\", px: 3 }}>\n                          <SubTitle css={{ textAlign: \"center\" }}>\n                            <FormattedMessage id=\"No tangram left to approve\" />\n                          </SubTitle>\n                          <Hint>\n                            <FormattedMessage\n                              id=\"Good job moderator {username}!\"\n                              values={{ username: currentUser.username }}\n                            />\n                          </Hint>\n                        </View>\n                      </>\n                    ) : (\n                      <>\n                        <Text css={{ fontSize: \"8em\" }}>{\"👍\"}</Text>\n                        <View css={{ gap: 2, alignItems: \"center\", px: 3 }}>\n                          <SubTitle css={{ textAlign: \"center\" }}>\n                            <FormattedMessage id=\"All your tangrams have been approved\" />\n                          </SubTitle>\n                          <Hint>\n                            <FormattedMessage\n                              id=\"Create more tangrams and earn <starIcon></starIcon>\"\n                              values={{\n                                starIcon: () => (\n                                  <InlineIcon\n                                    icon={FiStar}\n                                    css={{ fill: \"currentColor\" }}\n                                  ></InlineIcon>\n                                ),\n                              }}\n                            />\n                          </Hint>\n                        </View>\n                      </>\n                    )\n                  ) : selectedGalleryFilter === \"starred\" ? (\n                    <>\n                      <Text css={{ fontSize: \"8em\" }}>{\"🌃\"}</Text>\n                      <View css={{ gap: 2, alignItems: \"center\", px: 3 }}>\n                        <SubTitle css={{ textAlign: \"center\" }}>\n                          <FormattedMessage id=\"No starred tangrams yet\" />\n                        </SubTitle>\n                        <Hint>\n                          <FormattedMessage\n                            id=\"Press <starIcon></starIcon> to star a tangram and show your love\"\n                            values={{\n                              starIcon: () => (\n                                <InlineIcon\n                                  icon={FiStar}\n                                  css={{ fill: \"currentColor\" }}\n                                ></InlineIcon>\n                              ),\n                            }}\n                          />\n                        </Hint>\n                      </View>\n                    </>\n                  ) : (\n                    <>\n                      <Text css={{ fontSize: \"8em\" }}>{\"🤷\"}</Text>\n                      <View css={{ gap: 2, alignItems: \"center\", px: 3 }}>\n                        <SubTitle css={{ textAlign: \"center\" }}>\n                          <FormattedMessage id=\"Nothing to see here\" />\n                        </SubTitle>\n                        <Hint>\n                          <FormattedMessage id=\"Something might have gone wrong\" />\n                        </Hint>\n                      </View>\n                    </>\n                  )}\n                </View>\n              ) : (\n                <View\n                  key=\"results\"\n                  css={{ flex: \"1\", overflow: \"auto\", gap: 3 }}\n                >\n                  {visibleCategories.map((category) => (\n                    <View key={category}>\n                      <FadedView>\n                        <SubTitle>\n                          {intl.formatMessage({ id: category })}\n                        </SubTitle>\n                      </FadedView>\n                      <View\n                        css={{\n                          display: \"grid\",\n                          gridTemplateColumns: \"repeat(auto-fill, 136px)\",\n                          gridColumnGap: 2,\n                          gridRowGap: 2,\n                          justifyContent: \"center\",\n                          justifyItems: \"center\",\n                          alignItems: \"center\",\n                        }}\n                      >\n                        {tangramsByCategory[category].map((tangram) => (\n                          <Card\n                            showStroke={\n                              selectedGalleryFilter === \"pending\" &&\n                              currentUser &&\n                              currentUser.isAdmin\n                            }\n                            key={tangram.id}\n                            tangram={tangram}\n                            completed={isTangramCompleted(tangram.id)}\n                            selected={selectedTangrams.some(\n                              (selectedTangram) =>\n                                selectedTangram.id === tangram.id\n                            )}\n                            onClick={handleTangramClick}\n                            onBadgeClick={showProfile}\n                            onLongPress={showTangram}\n                          />\n                        ))}\n                      </View>\n                    </View>\n                  ))}\n                </View>\n              )}\n            </View>\n\n            <View css={{ flexDirection: \"row\", gap: 2 }}>\n              <PrimaryButton onClick={handleStartClick} css={{ flex: \"1\" }}>\n                {selectedTangrams.length === 0\n                  ? intl.formatMessage({ id: \"Play now!\" })\n                  : selectedTangrams.length === 1\n                    ? intl.formatMessage({ id: \"Start 1 tangram!\" })\n                    : intl.formatMessage(\n                      { id: \"Start {count} tangrams!\" },\n                      { count: selectedTangrams.length }\n                    )}\n              </PrimaryButton>\n              <PrimaryButton\n                disabled={selectedTangrams.length === 0}\n                onClick={() => shareTangrams(selectedTangrams)}\n              >\n                <View as={FiShare2} css={{ size: \"icon\", m: \"-2px\" }}></View>\n              </PrimaryButton>\n            </View>\n          </>\n        }\n      </Dialog>\n    </>\n  )\n}\n","import React, { useContext, useMemo, useState } from \"react\"\nimport { DIALOG_CLOSED_REASON } from \"../constants\"\nimport { DialogContext } from \"../contexts/dialog\"\n\nimport { TangramsContext } from \"../contexts/tangrams\"\nimport { UserContext } from \"../contexts/user\"\nimport { Badge } from \"./badge\"\nimport { Dialog } from \"./dialog\"\nimport { Input } from \"./input\"\nimport { Title, InlineIcon } from \"./primitives\"\nimport { Text } from \"./text\"\nimport { View } from \"./view\"\nimport { useIntl } from \"react-intl\"\nimport { FiStar } from \"react-icons/fi\"\nimport { GalleryContext } from \"../contexts/gallery\"\n\nexport const LeaderboardDialog = ({ deferred }) => {\n  const intl = useIntl()\n\n  const { showProfile } = useContext(DialogContext)\n\n  const { currentUser, usersMetadata } = useContext(UserContext)\n  const { approvedTangrams } = useContext(TangramsContext)\n  const { tangramsStarredBy, tangramsCompletedBy } = useContext(GalleryContext)\n  const [selected, setSelected] = useState(() => {\n    const storedSelectedLeaderBoard = window.localStorage.getItem(\n      \"selectedLeaderboard\"\n    )\n\n    return [\"stars\", \"completed\", \"created\"].includes(storedSelectedLeaderBoard)\n      ? storedSelectedLeaderBoard\n      : \"stars\"\n  })\n\n  const handleChange = (e) => {\n    setSelected(e.target.value)\n    window.localStorage.setItem(\"selectedLeaderboard\", e.target.value)\n  }\n\n  const handleBadgeClick = (uid) => {\n    showProfile(uid)\n  }\n\n  const users = useMemo(() => {\n    const starsByUserId = {}\n    const createdTangramsByUserId = {}\n    const completedTangramsByUserId = {}\n    for (const { id, uid } of approvedTangrams) {\n      if (!createdTangramsByUserId[uid]) {\n        createdTangramsByUserId[uid] = 0\n        starsByUserId[uid] = 0\n      }\n\n      for (const starredByUid in tangramsStarredBy[id]) {\n        if (starredByUid !== uid && tangramsStarredBy[id][starredByUid]) {\n          starsByUserId[uid] += 1\n        }\n      }\n\n      createdTangramsByUserId[uid] += 1\n\n      for (const completedByUid in tangramsCompletedBy[id]) {\n        if (!completedTangramsByUserId[completedByUid]) {\n          completedTangramsByUserId[completedByUid] = 0\n        }\n        completedTangramsByUserId[completedByUid] += 1\n      }\n    }\n\n    return Object.keys(usersMetadata).map((uid) => {\n      const userMetadata = usersMetadata[uid]\n\n      return {\n        uid,\n        ...userMetadata,\n        stars: starsByUserId[uid] || 0,\n        completed: completedTangramsByUserId[uid] || 0,\n        created: createdTangramsByUserId[uid] || 0,\n      }\n    })\n  }, [approvedTangrams, tangramsStarredBy, tangramsCompletedBy, usersMetadata])\n\n  const sortedUsers = useMemo(() => {\n    if (!users) {\n      return\n    }\n    return users.sort((userA, userB) => userB[selected] - userA[selected])\n  }, [users, selected])\n\n  return (\n    <Dialog\n      title={<Title>{intl.formatMessage({ id: \"Leaderboard\" })}</Title>}\n      onClose={() => deferred.reject(DIALOG_CLOSED_REASON)}\n      css={{\n        gap: 3,\n      }}\n    >\n      {\n        <>\n          <Input as=\"select\" value={selected} onChange={handleChange}>\n            <option value=\"stars\">\n              {intl.formatMessage({ id: \"Stars earned\" })}\n            </option>\n            <option value=\"completed\">\n              {intl.formatMessage({ id: \"Completed tangrams\" })}\n            </option>\n            <option value=\"created\">\n              {intl.formatMessage({ id: \"Created tangrams\" })}\n            </option>\n          </Input>\n\n          <View css={{ flex: \"1\", overflow: \"auto\", gap: 2 }}>\n            {sortedUsers.map(({ uid, username, ...stats }, index) => (\n              <View\n                key={uid}\n                css={{\n                  flexDirection: \"row\",\n                  gap: 2,\n                  alignItems: \"center\",\n                  fontSize:\n                    index === 0\n                      ? \"1.6em\"\n                      : index === 1\n                      ? \"1.4em\"\n                      : index === 2\n                      ? \"1.2em\"\n                      : undefined,\n                }}\n                deps={[index]}\n              >\n                <Badge\n                  uid={uid}\n                  size=\"badge\"\n                  onClick={() => handleBadgeClick(uid)}\n                ></Badge>\n                <Text\n                  css={{\n                    flex: \"1\",\n                    fontWeight:\n                      currentUser && currentUser.uid === uid\n                        ? \"bold\"\n                        : undefined,\n                  }}\n                  deps={[currentUser, uid]}\n                >\n                  {username}\n                </Text>\n                <Text>\n                  {stats[selected]}\n                  {selected === \"stars\" && (\n                    <>\n                      {\" \"}\n                      <InlineIcon\n                        icon={FiStar}\n                        css={{ fill: \"currentColor\" }}\n                      />\n                    </>\n                  )}\n                </Text>\n              </View>\n            ))}\n          </View>\n        </>\n      }\n    </Dialog>\n  )\n}\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import _asyncToGenerator from \"/home/myagoo/Workspace/amstangram/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _defineProperty from \"/home/myagoo/Workspace/amstangram/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _slicedToArray from \"/home/myagoo/Workspace/amstangram/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _toConsumableArray from \"/home/myagoo/Workspace/amstangram/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _regeneratorRuntime from \"/home/myagoo/Workspace/amstangram/node_modules/@babel/runtime/regenerator/index.js\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport * as React from 'react';\n\nvar isCheckBoxInput = function isCheckBoxInput(element) {\n  return element.type === 'checkbox';\n};\n\nvar isDateObject = function isDateObject(data) {\n  return data instanceof Date;\n};\n\nvar isNullOrUndefined = function isNullOrUndefined(value) {\n  return value == null;\n};\n\nvar isObjectType = function isObjectType(value) {\n  return typeof value === 'object';\n};\n\nvar isObject = function isObject(value) {\n  return !isNullOrUndefined(value) && !Array.isArray(value) && isObjectType(value) && !isDateObject(value);\n};\n\nvar getEventValue = function getEventValue(event) {\n  return isObject(event) && event.target ? isCheckBoxInput(event.target) ? event.target.checked : event.target.value : event;\n};\n\nvar getNodeParentName = function getNodeParentName(name) {\n  return name.substring(0, name.search(/.\\d/)) || name;\n};\n\nvar isNameInFieldArray = function isNameInFieldArray(names, name) {\n  return _toConsumableArray(names).some(function (current) {\n    return getNodeParentName(name) === current;\n  });\n};\n\nvar compact = function compact(value) {\n  return (value || []).filter(Boolean);\n};\n\nvar isUndefined = function isUndefined(val) {\n  return val === undefined;\n};\n\nvar get = function get(obj, path, defaultValue) {\n  if (isObject(obj) && path) {\n    var result = compact(path.split(/[,[\\].]+?/)).reduce(function (result, key) {\n      return isNullOrUndefined(result) ? result : result[key];\n    }, obj);\n    return isUndefined(result) || result === obj ? isUndefined(obj[path]) ? defaultValue : obj[path] : result;\n  }\n\n  return undefined;\n};\n\nvar EVENTS = {\n  BLUR: 'blur',\n  CHANGE: 'change'\n};\nvar VALIDATION_MODE = {\n  onBlur: 'onBlur',\n  onChange: 'onChange',\n  onSubmit: 'onSubmit',\n  onTouched: 'onTouched',\n  all: 'all'\n};\nvar INPUT_VALIDATION_RULES = {\n  max: 'max',\n  min: 'min',\n  maxLength: 'maxLength',\n  minLength: 'minLength',\n  pattern: 'pattern',\n  required: 'required',\n  validate: 'validate'\n};\n\nvar omit = function omit(source, key) {\n  var copy = Object.assign({}, source);\n  delete copy[key];\n  return copy;\n};\n\nvar HookFormContext = React.createContext(null);\n\nvar useFormContext = function useFormContext() {\n  return React.useContext(HookFormContext);\n};\n\nvar FormProvider = function FormProvider(props) {\n  return React.createElement(HookFormContext.Provider, {\n    value: omit(props, 'children')\n  }, props.children);\n};\n\nvar getProxyFormState = function getProxyFormState(formState, _proxyFormState, localProxyFormState) {\n  var isRoot = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n\n  function createGetter(prop) {\n    return function () {\n      if (prop in formState) {\n        if (_proxyFormState[prop] !== VALIDATION_MODE.all) {\n          _proxyFormState[prop] = !isRoot || VALIDATION_MODE.all;\n        }\n\n        localProxyFormState && (localProxyFormState[prop] = true);\n        return formState[prop];\n      }\n\n      return undefined;\n    };\n  }\n\n  var result = {};\n\n  for (var key in formState) {\n    Object.defineProperty(result, key, {\n      get: createGetter(key)\n    });\n  }\n\n  return result;\n};\n\nvar isEmptyObject = function isEmptyObject(value) {\n  return isObject(value) && !Object.keys(value).length;\n};\n\nvar shouldRenderFormState = function shouldRenderFormState(formStateData, _proxyFormState, isRoot) {\n  var formState = omit(formStateData, 'name');\n  return isEmptyObject(formState) || Object.keys(formState).length >= Object.keys(_proxyFormState).length || Object.keys(formState).find(function (key) {\n    return _proxyFormState[key] === (!isRoot || VALIDATION_MODE.all);\n  });\n};\n\nvar convertToArrayPayload = function convertToArrayPayload(value) {\n  return Array.isArray(value) ? value : [value];\n};\n\nvar shouldSubscribeByName = function shouldSubscribeByName(name, signalName, exact) {\n  return exact && signalName ? name === signalName : !name || !signalName || name === signalName || convertToArrayPayload(name).some(function (currentName) {\n    return currentName && (currentName.startsWith(signalName) || signalName.startsWith(currentName));\n  });\n};\n\nfunction useSubscribe(props) {\n  var _props = React.useRef(props);\n\n  _props.current = props;\n  React.useEffect(function () {\n    var tearDown = function tearDown(subscription) {\n      if (subscription) {\n        subscription.unsubscribe();\n      }\n    };\n\n    var subscription = !props.disabled && _props.current.subject.subscribe({\n      next: _props.current.callback\n    });\n\n    return function () {\n      return tearDown(subscription);\n    };\n  }, [props.disabled]);\n}\n\nfunction useFormState(props) {\n  var methods = useFormContext();\n\n  var _ref = props || {},\n      _ref$control = _ref.control,\n      control = _ref$control === void 0 ? methods.control : _ref$control,\n      disabled = _ref.disabled,\n      name = _ref.name,\n      exact = _ref.exact;\n\n  var _React$useState = React.useState(control._formState),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      formState = _React$useState2[0],\n      updateFormState = _React$useState2[1];\n\n  var _localProxyFormState = React.useRef({\n    isDirty: false,\n    dirtyFields: false,\n    touchedFields: false,\n    isValidating: false,\n    isValid: false,\n    errors: false\n  });\n\n  var _name = React.useRef(name);\n\n  _name.current = name;\n  useSubscribe({\n    disabled: disabled,\n    callback: function callback(value) {\n      return shouldSubscribeByName(_name.current, value.name, exact) && shouldRenderFormState(value, _localProxyFormState.current) && updateFormState(Object.assign(Object.assign({}, control._formState), value));\n    },\n    subject: control._subjects.state\n  });\n  return getProxyFormState(formState, control._proxyFormState, _localProxyFormState.current, false);\n}\n\nvar isString = function isString(value) {\n  return typeof value === 'string';\n};\n\nvar generateWatchOutput = function generateWatchOutput(names, _names, formValues, isGlobal) {\n  var isArray = Array.isArray(names);\n\n  if (isString(names)) {\n    isGlobal && _names.watch.add(names);\n    return get(formValues, names);\n  }\n\n  if (isArray) {\n    return names.map(function (fieldName) {\n      return isGlobal && _names.watch.add(fieldName), get(formValues, fieldName);\n    });\n  }\n\n  isGlobal && (_names.watchAll = true);\n  return formValues;\n};\n\nvar isFunction = function isFunction(value) {\n  return typeof value === 'function';\n};\n\nvar objectHasFunction = function objectHasFunction(data) {\n  for (var key in data) {\n    if (isFunction(data[key])) {\n      return true;\n    }\n  }\n\n  return false;\n};\n\nfunction useWatch(props) {\n  var methods = useFormContext();\n\n  var _ref2 = props || {},\n      _ref2$control = _ref2.control,\n      control = _ref2$control === void 0 ? methods.control : _ref2$control,\n      name = _ref2.name,\n      defaultValue = _ref2.defaultValue,\n      disabled = _ref2.disabled,\n      exact = _ref2.exact;\n\n  var _name = React.useRef(name);\n\n  _name.current = name;\n  useSubscribe({\n    disabled: disabled,\n    subject: control._subjects.watch,\n    callback: function callback(formState) {\n      if (shouldSubscribeByName(_name.current, formState.name, exact)) {\n        var fieldValues = generateWatchOutput(_name.current, control._names, formState.values || control._formValues);\n        updateValue(isUndefined(_name.current) || isObject(fieldValues) && !objectHasFunction(fieldValues) ? Object.assign({}, fieldValues) : Array.isArray(fieldValues) ? _toConsumableArray(fieldValues) : fieldValues);\n      }\n    }\n  });\n\n  var _React$useState3 = React.useState(isUndefined(defaultValue) ? control._getWatch(name) : defaultValue),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      value = _React$useState4[0],\n      updateValue = _React$useState4[1];\n\n  React.useEffect(function () {\n    control._removeUnmounted();\n  });\n  return value;\n}\n\nfunction useController(props) {\n  var methods = useFormContext();\n  var name = props.name,\n      _props$control = props.control,\n      control = _props$control === void 0 ? methods.control : _props$control,\n      shouldUnregister = props.shouldUnregister;\n  var isArrayField = isNameInFieldArray(control._names.array, name);\n  var value = useWatch({\n    control: control,\n    name: name,\n    defaultValue: get(control._formValues, name, get(control._defaultValues, name, props.defaultValue)),\n    exact: !isArrayField\n  });\n  var formState = useFormState({\n    control: control,\n    name: name\n  });\n\n  var _name = React.useRef(name);\n\n  _name.current = name;\n  var registerProps = control.register(name, Object.assign(Object.assign({}, props.rules), {\n    value: value\n  }));\n  React.useEffect(function () {\n    var updateMounted = function updateMounted(name, value) {\n      var field = get(control._fields, name);\n\n      if (field) {\n        field._f.mount = value;\n      }\n    };\n\n    updateMounted(name, true);\n    return function () {\n      var _shouldUnregisterField = control._options.shouldUnregister || shouldUnregister;\n\n      if (isArrayField ? _shouldUnregisterField && !control._stateFlags.action : _shouldUnregisterField) {\n        control.unregister(name, {\n          keepDefaultValue: true\n        });\n      } else {\n        updateMounted(name, false);\n      }\n    };\n  }, [name, control, isArrayField, shouldUnregister]);\n  return {\n    field: {\n      onChange: function onChange(event) {\n        registerProps.onChange({\n          target: {\n            value: getEventValue(event),\n            name: name\n          },\n          type: EVENTS.CHANGE\n        });\n      },\n      onBlur: function onBlur() {\n        registerProps.onBlur({\n          target: {\n            value: get(control._formValues, name),\n            name: name\n          },\n          type: EVENTS.BLUR\n        });\n      },\n      name: name,\n      value: value,\n      ref: function ref(elm) {\n        var field = get(control._fields, name);\n\n        if (elm && field && elm.focus) {\n          field._f.ref = {\n            focus: function focus() {\n              return elm.focus();\n            },\n            setCustomValidity: function setCustomValidity(message) {\n              return elm.setCustomValidity(message);\n            },\n            reportValidity: function reportValidity() {\n              return elm.reportValidity();\n            }\n          };\n        }\n      }\n    },\n    formState: formState,\n    fieldState: {\n      invalid: !!get(formState.errors, name),\n      isDirty: !!get(formState.dirtyFields, name),\n      isTouched: !!get(formState.touchedFields, name),\n      error: get(formState.errors, name)\n    }\n  };\n}\n\nvar Controller = function Controller(props) {\n  return props.render(useController(props));\n};\n\nvar appendErrors = function appendErrors(name, validateAllFieldCriteria, errors, type, message) {\n  return validateAllFieldCriteria ? Object.assign(Object.assign({}, errors[name]), {\n    types: Object.assign(Object.assign({}, errors[name] && errors[name].types ? errors[name].types : {}), _defineProperty({}, type, message || true))\n  }) : {};\n};\n\nvar isKey = function isKey(value) {\n  return /^\\w*$/.test(value);\n};\n\nvar stringToPath = function stringToPath(input) {\n  return compact(input.replace(/[\"|']|\\]/g, '').split(/\\.|\\[/));\n};\n\nfunction set(object, path, value) {\n  var index = -1;\n  var tempPath = isKey(path) ? [path] : stringToPath(path);\n  var length = tempPath.length;\n  var lastIndex = length - 1;\n\n  while (++index < length) {\n    var key = tempPath[index];\n    var newValue = value;\n\n    if (index !== lastIndex) {\n      var objValue = object[key];\n      newValue = isObject(objValue) || Array.isArray(objValue) ? objValue : !isNaN(+tempPath[index + 1]) ? [] : {};\n    }\n\n    object[key] = newValue;\n    object = object[key];\n  }\n\n  return object;\n}\n\nvar focusFieldBy = function focusFieldBy(fields, callback, fieldsNames) {\n  var _iterator = _createForOfIteratorHelper(fieldsNames || Object.keys(fields)),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var key = _step.value;\n      var field = get(fields, key);\n\n      if (field) {\n        var _f = field._f;\n        var current = omit(field, '_f');\n\n        if (_f && callback(_f.name)) {\n          if (_f.ref.focus && isUndefined(_f.ref.focus())) {\n            break;\n          } else if (_f.refs) {\n            _f.refs[0].focus();\n\n            break;\n          }\n        } else if (isObject(current)) {\n          focusFieldBy(current, callback);\n        }\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n};\n\nvar getFocusFieldName = function getFocusFieldName(name, index) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  return options.shouldFocus || isUndefined(options.shouldFocus) ? options.focusName || \"\".concat(name, \".\").concat(isUndefined(options.focusIndex) ? index : options.focusIndex, \".\") : '';\n};\n\nvar isWatched = function isWatched(name, _names, isBlurEvent) {\n  return !isBlurEvent && (_names.watchAll || _names.watch.has(name) || _toConsumableArray(_names.watch).some(function (watchName) {\n    return name.startsWith(watchName) && /^\\.\\w+/.test(name.slice(watchName.length));\n  }));\n};\n\nvar mapCurrentIds = function mapCurrentIds(values, _fieldIds, keyName) {\n  return values.map(function (value, index) {\n    var output = _fieldIds.current[index];\n    return Object.assign(Object.assign({}, value), output ? _defineProperty({}, keyName, output[keyName]) : {});\n  });\n};\n\nvar generateId = function generateId() {\n  var d = typeof performance === 'undefined' ? Date.now() : performance.now() * 1000;\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    var r = (Math.random() * 16 + d) % 16 | 0;\n    return (c == 'x' ? r : r & 0x3 | 0x8).toString(16);\n  });\n};\n\nvar mapIds = function mapIds() {\n  var values = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var keyName = arguments.length > 1 ? arguments[1] : undefined;\n  return values.map(function (value) {\n    return Object.assign(Object.assign({}, value[keyName] ? {} : _defineProperty({}, keyName, generateId())), value);\n  });\n};\n\nfunction append(data, value) {\n  return [].concat(_toConsumableArray(convertToArrayPayload(data)), _toConsumableArray(convertToArrayPayload(value)));\n}\n\nvar fillEmptyArray = function fillEmptyArray(value) {\n  return Array.isArray(value) ? value.map(function () {\n    return undefined;\n  }) : undefined;\n};\n\nfunction insert(data, index, value) {\n  return [].concat(_toConsumableArray(data.slice(0, index)), _toConsumableArray(convertToArrayPayload(value)), _toConsumableArray(data.slice(index)));\n}\n\nvar moveArrayAt = function moveArrayAt(data, from, to) {\n  if (Array.isArray(data)) {\n    if (isUndefined(data[to])) {\n      data[to] = undefined;\n    }\n\n    data.splice(to, 0, data.splice(from, 1)[0]);\n    return data;\n  }\n\n  return [];\n};\n\nvar omitKeys = function omitKeys(fields, keyName) {\n  return fields.map(function () {\n    var field = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return omit(field, keyName);\n  });\n};\n\nfunction prepend(data, value) {\n  return [].concat(_toConsumableArray(convertToArrayPayload(value)), _toConsumableArray(convertToArrayPayload(data)));\n}\n\nfunction removeAtIndexes(data, indexes) {\n  var i = 0;\n\n  var temp = _toConsumableArray(data);\n\n  var _iterator2 = _createForOfIteratorHelper(indexes),\n      _step2;\n\n  try {\n    for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n      var index = _step2.value;\n      temp.splice(index - i, 1);\n      i++;\n    }\n  } catch (err) {\n    _iterator2.e(err);\n  } finally {\n    _iterator2.f();\n  }\n\n  return compact(temp).length ? temp : [];\n}\n\nvar removeArrayAt = function removeArrayAt(data, index) {\n  return isUndefined(index) ? [] : removeAtIndexes(data, convertToArrayPayload(index).sort(function (a, b) {\n    return a - b;\n  }));\n};\n\nvar swapArrayAt = function swapArrayAt(data, indexA, indexB) {\n  data[indexA] = [data[indexB], data[indexB] = data[indexA]][0];\n};\n\nvar updateAt = function updateAt(fieldValues, index, value) {\n  fieldValues[index] = value;\n  return fieldValues;\n};\n\nvar useFieldArray = function useFieldArray(props) {\n  var methods = useFormContext();\n  var _props$control2 = props.control,\n      control = _props$control2 === void 0 ? methods.control : _props$control2,\n      name = props.name,\n      _props$keyName = props.keyName,\n      keyName = _props$keyName === void 0 ? 'id' : _props$keyName,\n      shouldUnregister = props.shouldUnregister;\n\n  var _React$useState5 = React.useState(mapIds(control._getFieldArray(name), keyName)),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      fields = _React$useState6[0],\n      setFields = _React$useState6[1];\n\n  var _fieldIds = React.useRef(fields);\n\n  var _name = React.useRef(name);\n\n  var _actioned = React.useRef(false);\n\n  _name.current = name;\n  _fieldIds.current = fields;\n\n  control._names.array.add(name);\n\n  useSubscribe({\n    callback: function callback(_ref5) {\n      var values = _ref5.values,\n          fieldArrayName = _ref5.name;\n\n      if (fieldArrayName === _name.current || !fieldArrayName) {\n        setFields(mapIds(get(values, _name.current), keyName));\n      }\n    },\n    subject: control._subjects.array\n  });\n  var updateValues = React.useCallback(function (updatedFieldArrayValuesWithKey) {\n    var updatedFieldArrayValues = omitKeys(updatedFieldArrayValuesWithKey, keyName);\n    _actioned.current = true;\n    set(control._formValues, name, updatedFieldArrayValues);\n    return updatedFieldArrayValues;\n  }, [control, name, keyName]);\n\n  var append$1 = function append$1(value, options) {\n    var appendValue = convertToArrayPayload(value);\n    var updatedFieldArrayValuesWithKey = append(mapCurrentIds(control._getFieldArray(name), _fieldIds, keyName), mapIds(appendValue, keyName));\n    var fieldArrayValues = updateValues(updatedFieldArrayValuesWithKey);\n    control._names.focus = getFocusFieldName(name, fieldArrayValues.length - 1, options);\n    setFields(updatedFieldArrayValuesWithKey);\n\n    control._updateFieldArray(name, append, {\n      argA: fillEmptyArray(value)\n    }, fieldArrayValues);\n  };\n\n  var prepend$1 = function prepend$1(value, options) {\n    var updatedFieldArrayValuesWithKey = prepend(mapCurrentIds(control._getFieldArray(name), _fieldIds, keyName), mapIds(convertToArrayPayload(value), keyName));\n    var fieldArrayValues = updateValues(updatedFieldArrayValuesWithKey);\n    control._names.focus = getFocusFieldName(name, 0, options);\n    setFields(updatedFieldArrayValuesWithKey);\n\n    control._updateFieldArray(name, prepend, {\n      argA: fillEmptyArray(value)\n    }, fieldArrayValues);\n  };\n\n  var remove = function remove(index) {\n    var updatedFieldArrayValuesWithKey = removeArrayAt(mapCurrentIds(control._getFieldArray(name), _fieldIds, keyName), index);\n    var fieldArrayValues = updateValues(updatedFieldArrayValuesWithKey);\n    setFields(updatedFieldArrayValuesWithKey);\n\n    control._updateFieldArray(name, removeArrayAt, {\n      argA: index\n    }, fieldArrayValues);\n  };\n\n  var insert$1 = function insert$1(index, value, options) {\n    var updatedFieldArrayValuesWithKey = insert(mapCurrentIds(control._getFieldArray(name), _fieldIds, keyName), index, mapIds(convertToArrayPayload(value), keyName));\n    var fieldArrayValues = updateValues(updatedFieldArrayValuesWithKey);\n    control._names.focus = getFocusFieldName(name, index, options);\n    setFields(updatedFieldArrayValuesWithKey);\n\n    control._updateFieldArray(name, insert, {\n      argA: index,\n      argB: fillEmptyArray(value)\n    }, fieldArrayValues);\n  };\n\n  var swap = function swap(indexA, indexB) {\n    var updatedFieldArrayValuesWithKey = mapCurrentIds(control._getFieldArray(name), _fieldIds, keyName);\n    swapArrayAt(updatedFieldArrayValuesWithKey, indexA, indexB);\n    var fieldArrayValues = updateValues(updatedFieldArrayValuesWithKey);\n    setFields(updatedFieldArrayValuesWithKey);\n\n    control._updateFieldArray(name, swapArrayAt, {\n      argA: indexA,\n      argB: indexB\n    }, fieldArrayValues, false);\n  };\n\n  var move = function move(from, to) {\n    var updatedFieldArrayValuesWithKey = mapCurrentIds(control._getFieldArray(name), _fieldIds, keyName);\n    moveArrayAt(updatedFieldArrayValuesWithKey, from, to);\n    var fieldArrayValues = updateValues(updatedFieldArrayValuesWithKey);\n    setFields(updatedFieldArrayValuesWithKey);\n\n    control._updateFieldArray(name, moveArrayAt, {\n      argA: from,\n      argB: to\n    }, fieldArrayValues, false);\n  };\n\n  var update = function update(index, value) {\n    var updatedFieldArrayValuesWithKey = mapCurrentIds(control._getFieldArray(name), _fieldIds, keyName);\n    var updatedFieldArrayValues = updateAt(updatedFieldArrayValuesWithKey, index, value);\n    _fieldIds.current = mapIds(updatedFieldArrayValues, keyName);\n    var fieldArrayValues = updateValues(_fieldIds.current);\n    setFields(_fieldIds.current);\n\n    control._updateFieldArray(name, updateAt, {\n      argA: index,\n      argB: value\n    }, fieldArrayValues, true, false);\n  };\n\n  var replace = function replace(value) {\n    var updatedFieldArrayValuesWithKey = mapIds(convertToArrayPayload(value), keyName);\n    var fieldArrayValues = updateValues(updatedFieldArrayValuesWithKey);\n    setFields(updatedFieldArrayValuesWithKey);\n\n    control._updateFieldArray(name, function () {\n      return updatedFieldArrayValuesWithKey;\n    }, {}, fieldArrayValues, true, false);\n  };\n\n  React.useEffect(function () {\n    control._stateFlags.action = false;\n    isWatched(name, control._names) && control._subjects.state.next({});\n\n    if (_actioned.current) {\n      control._executeSchema([name]).then(function (result) {\n        var error = get(result.errors, name);\n\n        if (error && error.type && !get(control._formState.errors, name)) {\n          set(control._formState.errors, name, error);\n\n          control._subjects.state.next({\n            errors: control._formState.errors\n          });\n        }\n      });\n    }\n\n    control._subjects.watch.next({\n      name: name,\n      values: control._formValues\n    });\n\n    control._names.focus && focusFieldBy(control._fields, function (key) {\n      return key.startsWith(control._names.focus);\n    });\n    control._names.focus = '';\n    control._proxyFormState.isValid && control._updateValid();\n  }, [fields, name, control, keyName]);\n  React.useEffect(function () {\n    !get(control._formValues, name) && set(control._formValues, name, []);\n    return function () {\n      if (control._options.shouldUnregister || shouldUnregister) {\n        control.unregister(name);\n      }\n    };\n  }, [name, control, keyName, shouldUnregister]);\n  return {\n    swap: React.useCallback(swap, [updateValues, name, control, keyName]),\n    move: React.useCallback(move, [updateValues, name, control, keyName]),\n    prepend: React.useCallback(prepend$1, [updateValues, name, control, keyName]),\n    append: React.useCallback(append$1, [updateValues, name, control, keyName]),\n    remove: React.useCallback(remove, [updateValues, name, control, keyName]),\n    insert: React.useCallback(insert$1, [updateValues, name, control, keyName]),\n    update: React.useCallback(update, [updateValues, name, control, keyName]),\n    replace: React.useCallback(replace, [updateValues, name, control, keyName]),\n    fields: fields\n  };\n};\n\nfunction cloneObject(data) {\n  var copy;\n  var isArray = Array.isArray(data);\n\n  if (data instanceof Date) {\n    copy = new Date(data);\n  } else if (data instanceof Set) {\n    copy = new Set(data);\n  } else if (isArray || isObject(data)) {\n    copy = isArray ? [] : {};\n\n    for (var key in data) {\n      if (isFunction(data[key])) {\n        copy = data;\n        break;\n      }\n\n      copy[key] = cloneObject(data[key]);\n    }\n  } else {\n    return data;\n  }\n\n  return copy;\n}\n\nfunction createSubject() {\n  var _observers = [];\n\n  var next = function next(value) {\n    var _iterator3 = _createForOfIteratorHelper(_observers),\n        _step3;\n\n    try {\n      for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n        var observer = _step3.value;\n        observer.next(value);\n      }\n    } catch (err) {\n      _iterator3.e(err);\n    } finally {\n      _iterator3.f();\n    }\n  };\n\n  var subscribe = function subscribe(observer) {\n    _observers.push(observer);\n\n    return {\n      unsubscribe: function unsubscribe() {\n        _observers = _observers.filter(function (o) {\n          return o !== observer;\n        });\n      }\n    };\n  };\n\n  var unsubscribe = function unsubscribe() {\n    _observers = [];\n  };\n\n  return {\n    get observers() {\n      return _observers;\n    },\n\n    next: next,\n    subscribe: subscribe,\n    unsubscribe: unsubscribe\n  };\n}\n\nvar isPrimitive = function isPrimitive(value) {\n  return isNullOrUndefined(value) || !isObjectType(value);\n};\n\nfunction deepEqual(object1, object2) {\n  if (isPrimitive(object1) || isPrimitive(object2)) {\n    return object1 === object2;\n  }\n\n  if (isDateObject(object1) && isDateObject(object2)) {\n    return object1.getTime() === object2.getTime();\n  }\n\n  var keys1 = Object.keys(object1);\n  var keys2 = Object.keys(object2);\n\n  if (keys1.length !== keys2.length) {\n    return false;\n  }\n\n  for (var _i = 0, _keys = keys1; _i < _keys.length; _i++) {\n    var key = _keys[_i];\n    var val1 = object1[key];\n\n    if (!keys2.includes(key)) {\n      return false;\n    }\n\n    if (key !== 'ref') {\n      var val2 = object2[key];\n\n      if (isDateObject(val1) && isDateObject(val2) || isObject(val1) && isObject(val2) || Array.isArray(val1) && Array.isArray(val2) ? !deepEqual(val1, val2) : val1 !== val2) {\n        return false;\n      }\n    }\n  }\n\n  return true;\n}\n\nvar getValidationModes = function getValidationModes(mode) {\n  return {\n    isOnSubmit: !mode || mode === VALIDATION_MODE.onSubmit,\n    isOnBlur: mode === VALIDATION_MODE.onBlur,\n    isOnChange: mode === VALIDATION_MODE.onChange,\n    isOnAll: mode === VALIDATION_MODE.all,\n    isOnTouch: mode === VALIDATION_MODE.onTouched\n  };\n};\n\nvar isBoolean = function isBoolean(value) {\n  return typeof value === 'boolean';\n};\n\nvar isFileInput = function isFileInput(element) {\n  return element.type === 'file';\n};\n\nvar isHTMLElement = function isHTMLElement(value) {\n  return value instanceof HTMLElement;\n};\n\nvar isMultipleSelect = function isMultipleSelect(element) {\n  return element.type === \"select-multiple\";\n};\n\nvar isRadioInput = function isRadioInput(element) {\n  return element.type === 'radio';\n};\n\nvar isRadioOrCheckbox = function isRadioOrCheckbox(ref) {\n  return isRadioInput(ref) || isCheckBoxInput(ref);\n};\n\nvar isWeb = typeof window !== 'undefined' && typeof window.HTMLElement !== 'undefined' && typeof document !== 'undefined';\n\nvar live = function live(ref) {\n  return isHTMLElement(ref) && document.contains(ref);\n};\n\nfunction baseGet(object, updatePath) {\n  var length = updatePath.slice(0, -1).length;\n  var index = 0;\n\n  while (index < length) {\n    object = isUndefined(object) ? index++ : object[updatePath[index++]];\n  }\n\n  return object;\n}\n\nfunction unset(object, path) {\n  var updatePath = isKey(path) ? [path] : stringToPath(path);\n  var childObject = updatePath.length == 1 ? object : baseGet(object, updatePath);\n  var key = updatePath[updatePath.length - 1];\n  var previousObjRef;\n\n  if (childObject) {\n    delete childObject[key];\n  }\n\n  for (var k = 0; k < updatePath.slice(0, -1).length; k++) {\n    var index = -1;\n    var objectRef = void 0;\n    var currentPaths = updatePath.slice(0, -(k + 1));\n    var currentPathsLength = currentPaths.length - 1;\n\n    if (k > 0) {\n      previousObjRef = object;\n    }\n\n    while (++index < currentPaths.length) {\n      var item = currentPaths[index];\n      objectRef = objectRef ? objectRef[item] : object[item];\n\n      if (currentPathsLength === index && (isObject(objectRef) && isEmptyObject(objectRef) || Array.isArray(objectRef) && !objectRef.filter(function (data) {\n        return isObject(data) && !isEmptyObject(data) || isBoolean(data);\n      }).length)) {\n        previousObjRef ? delete previousObjRef[item] : delete object[item];\n      }\n\n      previousObjRef = objectRef;\n    }\n  }\n\n  return object;\n}\n\nfunction markFieldsDirty(data) {\n  var fields = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var isParentNodeArray = Array.isArray(data);\n\n  if (isObject(data) || isParentNodeArray) {\n    for (var key in data) {\n      if (Array.isArray(data[key]) || isObject(data[key]) && !objectHasFunction(data[key])) {\n        fields[key] = Array.isArray(data[key]) ? [] : {};\n        markFieldsDirty(data[key], fields[key]);\n      } else if (!isNullOrUndefined(data[key])) {\n        fields[key] = true;\n      }\n    }\n  }\n\n  return fields;\n}\n\nfunction getDirtyFieldsFromDefaultValues(data, formValues, dirtyFieldsFromValues) {\n  var isParentNodeArray = Array.isArray(data);\n\n  if (isObject(data) || isParentNodeArray) {\n    for (var key in data) {\n      if (Array.isArray(data[key]) || isObject(data[key]) && !objectHasFunction(data[key])) {\n        if (isUndefined(formValues) || isPrimitive(dirtyFieldsFromValues[key])) {\n          dirtyFieldsFromValues[key] = Array.isArray(data[key]) ? markFieldsDirty(data[key], []) : Object.assign({}, markFieldsDirty(data[key]));\n        } else {\n          getDirtyFieldsFromDefaultValues(data[key], isNullOrUndefined(formValues) ? {} : formValues[key], dirtyFieldsFromValues[key]);\n        }\n      } else {\n        dirtyFieldsFromValues[key] = !deepEqual(data[key], formValues[key]);\n      }\n    }\n  }\n\n  return dirtyFieldsFromValues;\n}\n\nvar getDirtyFields = function getDirtyFields(defaultValues, formValues) {\n  return getDirtyFieldsFromDefaultValues(defaultValues, formValues, markFieldsDirty(formValues));\n};\n\nvar defaultResult = {\n  value: false,\n  isValid: false\n};\nvar validResult = {\n  value: true,\n  isValid: true\n};\n\nvar getCheckboxValue = function getCheckboxValue(options) {\n  if (Array.isArray(options)) {\n    if (options.length > 1) {\n      var values = options.filter(function (option) {\n        return option && option.checked && !option.disabled;\n      }).map(function (option) {\n        return option.value;\n      });\n      return {\n        value: values,\n        isValid: !!values.length\n      };\n    }\n\n    return options[0].checked && !options[0].disabled ? // @ts-expect-error expected to work in the browser\n    options[0].attributes && !isUndefined(options[0].attributes.value) ? isUndefined(options[0].value) || options[0].value === '' ? validResult : {\n      value: options[0].value,\n      isValid: true\n    } : validResult : defaultResult;\n  }\n\n  return defaultResult;\n};\n\nvar getFieldValueAs = function getFieldValueAs(value, _ref6) {\n  var valueAsNumber = _ref6.valueAsNumber,\n      valueAsDate = _ref6.valueAsDate,\n      setValueAs = _ref6.setValueAs;\n  return isUndefined(value) ? value : valueAsNumber ? value === '' ? NaN : +value : valueAsDate && isString(value) ? new Date(value) : setValueAs ? setValueAs(value) : value;\n};\n\nvar defaultReturn = {\n  isValid: false,\n  value: null\n};\n\nvar getRadioValue = function getRadioValue(options) {\n  return Array.isArray(options) ? options.reduce(function (previous, option) {\n    return option && option.checked && !option.disabled ? {\n      isValid: true,\n      value: option.value\n    } : previous;\n  }, defaultReturn) : defaultReturn;\n};\n\nfunction getFieldValue(_f) {\n  var ref = _f.ref;\n\n  if (_f.refs ? _f.refs.every(function (ref) {\n    return ref.disabled;\n  }) : ref.disabled) {\n    return;\n  }\n\n  if (isFileInput(ref)) {\n    return ref.files;\n  }\n\n  if (isRadioInput(ref)) {\n    return getRadioValue(_f.refs).value;\n  }\n\n  if (isMultipleSelect(ref)) {\n    return _toConsumableArray(ref.selectedOptions).map(function (_ref7) {\n      var value = _ref7.value;\n      return value;\n    });\n  }\n\n  if (isCheckBoxInput(ref)) {\n    return getCheckboxValue(_f.refs).value;\n  }\n\n  return getFieldValueAs(isUndefined(ref.value) ? _f.ref.value : ref.value, _f);\n}\n\nvar getResolverOptions = function getResolverOptions(fieldsNames, _fields, criteriaMode, shouldUseNativeValidation) {\n  var fields = {};\n\n  var _iterator4 = _createForOfIteratorHelper(fieldsNames),\n      _step4;\n\n  try {\n    for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n      var name = _step4.value;\n      var field = get(_fields, name);\n      field && set(fields, name, field._f);\n    }\n  } catch (err) {\n    _iterator4.e(err);\n  } finally {\n    _iterator4.f();\n  }\n\n  return {\n    criteriaMode: criteriaMode,\n    names: _toConsumableArray(fieldsNames),\n    fields: fields,\n    shouldUseNativeValidation: shouldUseNativeValidation\n  };\n};\n\nvar isRegex = function isRegex(value) {\n  return value instanceof RegExp;\n};\n\nvar getRuleValue = function getRuleValue(rule) {\n  return isUndefined(rule) ? undefined : isRegex(rule) ? rule.source : isObject(rule) ? isRegex(rule.value) ? rule.value.source : rule.value : rule;\n};\n\nvar hasValidation = function hasValidation(options) {\n  return options.mount && (options.required || options.min || options.max || options.maxLength || options.minLength || options.pattern || options.validate);\n};\n\nfunction schemaErrorLookup(errors, _fields, name) {\n  var error = get(errors, name);\n\n  if (error || isKey(name)) {\n    return {\n      error: error,\n      name: name\n    };\n  }\n\n  var names = name.split('.');\n\n  while (names.length) {\n    var fieldName = names.join('.');\n    var field = get(_fields, fieldName);\n    var foundError = get(errors, fieldName);\n\n    if (field && !Array.isArray(field) && name !== fieldName) {\n      return {\n        name: name\n      };\n    }\n\n    if (foundError && foundError.type) {\n      return {\n        name: fieldName,\n        error: foundError\n      };\n    }\n\n    names.pop();\n  }\n\n  return {\n    name: name\n  };\n}\n\nvar skipValidation = function skipValidation(isBlurEvent, isTouched, isSubmitted, reValidateMode, mode) {\n  if (mode.isOnAll) {\n    return false;\n  } else if (!isSubmitted && mode.isOnTouch) {\n    return !(isTouched || isBlurEvent);\n  } else if (isSubmitted ? reValidateMode.isOnBlur : mode.isOnBlur) {\n    return !isBlurEvent;\n  } else if (isSubmitted ? reValidateMode.isOnChange : mode.isOnChange) {\n    return isBlurEvent;\n  }\n\n  return true;\n};\n\nvar unsetEmptyArray = function unsetEmptyArray(ref, name) {\n  return !compact(get(ref, name)).length && unset(ref, name);\n};\n\nvar isMessage = function isMessage(value) {\n  return isString(value) || React.isValidElement(value);\n};\n\nfunction getValidateError(result, ref) {\n  var type = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'validate';\n\n  if (isMessage(result) || Array.isArray(result) && result.every(isMessage) || isBoolean(result) && !result) {\n    return {\n      type: type,\n      message: isMessage(result) ? result : '',\n      ref: ref\n    };\n  }\n}\n\nvar getValueAndMessage = function getValueAndMessage(validationData) {\n  return isObject(validationData) && !isRegex(validationData) ? validationData : {\n    value: validationData,\n    message: ''\n  };\n};\n\nvar validateField = /*#__PURE__*/function () {\n  var _ref8 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(field, inputValue, validateAllFieldCriteria, shouldUseNativeValidation) {\n    var _field$_f, ref, refs, required, maxLength, minLength, min, max, pattern, validate, name, valueAsNumber, mount, disabled, inputRef, setCustomValidity, error, isRadio, isCheckBox, isRadioOrCheckbox, isEmpty, appendErrorsCurry, getMinMaxMessage, _ref9, value, message, exceedMax, exceedMin, maxOutput, minOutput, valueNumber, valueDate, maxLengthOutput, minLengthOutput, _exceedMax, _exceedMin, _getValueAndMessage, patternValue, _message, result, validateError, validationResult, key, _validateError;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _field$_f = field._f, ref = _field$_f.ref, refs = _field$_f.refs, required = _field$_f.required, maxLength = _field$_f.maxLength, minLength = _field$_f.minLength, min = _field$_f.min, max = _field$_f.max, pattern = _field$_f.pattern, validate = _field$_f.validate, name = _field$_f.name, valueAsNumber = _field$_f.valueAsNumber, mount = _field$_f.mount, disabled = _field$_f.disabled;\n\n            if (!(!mount || disabled)) {\n              _context.next = 3;\n              break;\n            }\n\n            return _context.abrupt(\"return\", {});\n\n          case 3:\n            inputRef = refs ? refs[0] : ref;\n\n            setCustomValidity = function setCustomValidity(message) {\n              if (shouldUseNativeValidation && inputRef.reportValidity) {\n                inputRef.setCustomValidity(isBoolean(message) ? '' : message || ' ');\n                inputRef.reportValidity();\n              }\n            };\n\n            error = {};\n            isRadio = isRadioInput(ref);\n            isCheckBox = isCheckBoxInput(ref);\n            isRadioOrCheckbox = isRadio || isCheckBox;\n            isEmpty = (valueAsNumber || isFileInput(ref)) && !ref.value || inputValue === '' || Array.isArray(inputValue) && !inputValue.length;\n            appendErrorsCurry = appendErrors.bind(null, name, validateAllFieldCriteria, error);\n\n            getMinMaxMessage = function getMinMaxMessage(exceedMax, maxLengthMessage, minLengthMessage) {\n              var maxType = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : INPUT_VALIDATION_RULES.maxLength;\n              var minType = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : INPUT_VALIDATION_RULES.minLength;\n              var message = exceedMax ? maxLengthMessage : minLengthMessage;\n              error[name] = Object.assign({\n                type: exceedMax ? maxType : minType,\n                message: message,\n                ref: ref\n              }, appendErrorsCurry(exceedMax ? maxType : minType, message));\n            };\n\n            if (!(required && (!isRadioOrCheckbox && (isEmpty || isNullOrUndefined(inputValue)) || isBoolean(inputValue) && !inputValue || isCheckBox && !getCheckboxValue(refs).isValid || isRadio && !getRadioValue(refs).isValid))) {\n              _context.next = 19;\n              break;\n            }\n\n            _ref9 = isMessage(required) ? {\n              value: !!required,\n              message: required\n            } : getValueAndMessage(required), value = _ref9.value, message = _ref9.message;\n\n            if (!value) {\n              _context.next = 19;\n              break;\n            }\n\n            error[name] = Object.assign({\n              type: INPUT_VALIDATION_RULES.required,\n              message: message,\n              ref: inputRef\n            }, appendErrorsCurry(INPUT_VALIDATION_RULES.required, message));\n\n            if (validateAllFieldCriteria) {\n              _context.next = 19;\n              break;\n            }\n\n            setCustomValidity(message);\n            return _context.abrupt(\"return\", error);\n\n          case 19:\n            if (!(!isEmpty && (!isNullOrUndefined(min) || !isNullOrUndefined(max)))) {\n              _context.next = 28;\n              break;\n            }\n\n            maxOutput = getValueAndMessage(max);\n            minOutput = getValueAndMessage(min);\n\n            if (!isNaN(inputValue)) {\n              valueNumber = ref.valueAsNumber || parseFloat(inputValue);\n\n              if (!isNullOrUndefined(maxOutput.value)) {\n                exceedMax = valueNumber > maxOutput.value;\n              }\n\n              if (!isNullOrUndefined(minOutput.value)) {\n                exceedMin = valueNumber < minOutput.value;\n              }\n            } else {\n              valueDate = ref.valueAsDate || new Date(inputValue);\n\n              if (isString(maxOutput.value)) {\n                exceedMax = valueDate > new Date(maxOutput.value);\n              }\n\n              if (isString(minOutput.value)) {\n                exceedMin = valueDate < new Date(minOutput.value);\n              }\n            }\n\n            if (!(exceedMax || exceedMin)) {\n              _context.next = 28;\n              break;\n            }\n\n            getMinMaxMessage(!!exceedMax, maxOutput.message, minOutput.message, INPUT_VALIDATION_RULES.max, INPUT_VALIDATION_RULES.min);\n\n            if (validateAllFieldCriteria) {\n              _context.next = 28;\n              break;\n            }\n\n            setCustomValidity(error[name].message);\n            return _context.abrupt(\"return\", error);\n\n          case 28:\n            if (!((maxLength || minLength) && !isEmpty && isString(inputValue))) {\n              _context.next = 38;\n              break;\n            }\n\n            maxLengthOutput = getValueAndMessage(maxLength);\n            minLengthOutput = getValueAndMessage(minLength);\n            _exceedMax = !isNullOrUndefined(maxLengthOutput.value) && inputValue.length > maxLengthOutput.value;\n            _exceedMin = !isNullOrUndefined(minLengthOutput.value) && inputValue.length < minLengthOutput.value;\n\n            if (!(_exceedMax || _exceedMin)) {\n              _context.next = 38;\n              break;\n            }\n\n            getMinMaxMessage(_exceedMax, maxLengthOutput.message, minLengthOutput.message);\n\n            if (validateAllFieldCriteria) {\n              _context.next = 38;\n              break;\n            }\n\n            setCustomValidity(error[name].message);\n            return _context.abrupt(\"return\", error);\n\n          case 38:\n            if (!(pattern && !isEmpty && isString(inputValue))) {\n              _context.next = 45;\n              break;\n            }\n\n            _getValueAndMessage = getValueAndMessage(pattern), patternValue = _getValueAndMessage.value, _message = _getValueAndMessage.message;\n\n            if (!(isRegex(patternValue) && !inputValue.match(patternValue))) {\n              _context.next = 45;\n              break;\n            }\n\n            error[name] = Object.assign({\n              type: INPUT_VALIDATION_RULES.pattern,\n              message: _message,\n              ref: ref\n            }, appendErrorsCurry(INPUT_VALIDATION_RULES.pattern, _message));\n\n            if (validateAllFieldCriteria) {\n              _context.next = 45;\n              break;\n            }\n\n            setCustomValidity(_message);\n            return _context.abrupt(\"return\", error);\n\n          case 45:\n            if (!validate) {\n              _context.next = 79;\n              break;\n            }\n\n            if (!isFunction(validate)) {\n              _context.next = 58;\n              break;\n            }\n\n            _context.next = 49;\n            return validate(inputValue);\n\n          case 49:\n            result = _context.sent;\n            validateError = getValidateError(result, inputRef);\n\n            if (!validateError) {\n              _context.next = 56;\n              break;\n            }\n\n            error[name] = Object.assign(Object.assign({}, validateError), appendErrorsCurry(INPUT_VALIDATION_RULES.validate, validateError.message));\n\n            if (validateAllFieldCriteria) {\n              _context.next = 56;\n              break;\n            }\n\n            setCustomValidity(validateError.message);\n            return _context.abrupt(\"return\", error);\n\n          case 56:\n            _context.next = 79;\n            break;\n\n          case 58:\n            if (!isObject(validate)) {\n              _context.next = 79;\n              break;\n            }\n\n            validationResult = {};\n            _context.t0 = _regeneratorRuntime.keys(validate);\n\n          case 61:\n            if ((_context.t1 = _context.t0()).done) {\n              _context.next = 75;\n              break;\n            }\n\n            key = _context.t1.value;\n\n            if (!(!isEmptyObject(validationResult) && !validateAllFieldCriteria)) {\n              _context.next = 65;\n              break;\n            }\n\n            return _context.abrupt(\"break\", 75);\n\n          case 65:\n            _context.t2 = getValidateError;\n            _context.next = 68;\n            return validate[key](inputValue);\n\n          case 68:\n            _context.t3 = _context.sent;\n            _context.t4 = inputRef;\n            _context.t5 = key;\n            _validateError = (0, _context.t2)(_context.t3, _context.t4, _context.t5);\n\n            if (_validateError) {\n              validationResult = Object.assign(Object.assign({}, _validateError), appendErrorsCurry(key, _validateError.message));\n              setCustomValidity(_validateError.message);\n\n              if (validateAllFieldCriteria) {\n                error[name] = validationResult;\n              }\n            }\n\n            _context.next = 61;\n            break;\n\n          case 75:\n            if (isEmptyObject(validationResult)) {\n              _context.next = 79;\n              break;\n            }\n\n            error[name] = Object.assign({\n              ref: inputRef\n            }, validationResult);\n\n            if (validateAllFieldCriteria) {\n              _context.next = 79;\n              break;\n            }\n\n            return _context.abrupt(\"return\", error);\n\n          case 79:\n            setCustomValidity(true);\n            return _context.abrupt(\"return\", error);\n\n          case 81:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function validateField(_x, _x2, _x3, _x4) {\n    return _ref8.apply(this, arguments);\n  };\n}();\n\nvar defaultOptions = {\n  mode: VALIDATION_MODE.onSubmit,\n  reValidateMode: VALIDATION_MODE.onChange,\n  shouldFocusError: true\n};\n\nfunction createFormControl() {\n  var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  var _options = Object.assign(Object.assign({}, defaultOptions), props);\n\n  var _formState = {\n    isDirty: false,\n    isValidating: false,\n    dirtyFields: {},\n    isSubmitted: false,\n    submitCount: 0,\n    touchedFields: {},\n    isSubmitting: false,\n    isSubmitSuccessful: false,\n    isValid: false,\n    errors: {}\n  };\n  var _fields = {};\n\n  var _defaultValues = _options.defaultValues || {};\n\n  var _formValues = _options.shouldUnregister ? {} : cloneObject(_defaultValues);\n\n  var _stateFlags = {\n    action: false,\n    mount: false,\n    watch: false\n  };\n  var _names = {\n    mount: new Set(),\n    unMount: new Set(),\n    array: new Set(),\n    watch: new Set()\n  };\n  var delayErrorCallback;\n  var timer = 0;\n  var validateFields = {};\n  var _proxyFormState = {\n    isDirty: false,\n    dirtyFields: false,\n    touchedFields: false,\n    isValidating: false,\n    isValid: false,\n    errors: false\n  };\n  var _subjects = {\n    watch: createSubject(),\n    array: createSubject(),\n    state: createSubject()\n  };\n  var validationModeBeforeSubmit = getValidationModes(_options.mode);\n  var validationModeAfterSubmit = getValidationModes(_options.reValidateMode);\n  var shouldDisplayAllAssociatedErrors = _options.criteriaMode === VALIDATION_MODE.all;\n\n  var debounce = function debounce(callback, wait) {\n    return function () {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      clearTimeout(timer);\n      timer = window.setTimeout(function () {\n        return callback.apply(void 0, args);\n      }, wait);\n    };\n  };\n\n  var _updateValid = /*#__PURE__*/function () {\n    var _ref10 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(shouldSkipRender) {\n      var isValid;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              isValid = false;\n\n              if (!_proxyFormState.isValid) {\n                _context2.next = 15;\n                break;\n              }\n\n              if (!_options.resolver) {\n                _context2.next = 10;\n                break;\n              }\n\n              _context2.t1 = isEmptyObject;\n              _context2.next = 6;\n              return _executeSchema();\n\n            case 6:\n              _context2.t2 = _context2.sent.errors;\n              _context2.t0 = (0, _context2.t1)(_context2.t2);\n              _context2.next = 13;\n              break;\n\n            case 10:\n              _context2.next = 12;\n              return executeBuildInValidation(_fields, true);\n\n            case 12:\n              _context2.t0 = _context2.sent;\n\n            case 13:\n              isValid = _context2.t0;\n\n              if (!shouldSkipRender && isValid !== _formState.isValid) {\n                _formState.isValid = isValid;\n\n                _subjects.state.next({\n                  isValid: isValid\n                });\n              }\n\n            case 15:\n              return _context2.abrupt(\"return\", isValid);\n\n            case 16:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function _updateValid(_x5) {\n      return _ref10.apply(this, arguments);\n    };\n  }();\n\n  var _updateFieldArray = function _updateFieldArray(name, method, args) {\n    var values = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];\n    var shouldSetValues = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;\n    var shouldSetFields = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : true;\n    _stateFlags.action = true;\n\n    if (shouldSetFields && get(_fields, name)) {\n      var fieldValues = method(get(_fields, name), args.argA, args.argB);\n      shouldSetValues && set(_fields, name, fieldValues);\n    }\n\n    if (Array.isArray(get(_formState.errors, name))) {\n      var errors = method(get(_formState.errors, name), args.argA, args.argB);\n      shouldSetValues && set(_formState.errors, name, errors);\n      unsetEmptyArray(_formState.errors, name);\n    }\n\n    if (_proxyFormState.touchedFields && get(_formState.touchedFields, name)) {\n      var touchedFields = method(get(_formState.touchedFields, name), args.argA, args.argB);\n      shouldSetValues && set(_formState.touchedFields, name, touchedFields);\n      unsetEmptyArray(_formState.touchedFields, name);\n    }\n\n    if (_proxyFormState.dirtyFields || _proxyFormState.isDirty) {\n      _formState.dirtyFields = getDirtyFields(_defaultValues, _formValues);\n    }\n\n    _subjects.state.next({\n      isDirty: _getDirty(name, values),\n      dirtyFields: _formState.dirtyFields,\n      errors: _formState.errors,\n      isValid: _formState.isValid\n    });\n  };\n\n  var updateErrors = function updateErrors(name, error) {\n    return set(_formState.errors, name, error), _subjects.state.next({\n      errors: _formState.errors\n    });\n  };\n\n  var updateValidAndValue = function updateValidAndValue(name, shouldSkipSetValueAs, ref) {\n    var field = get(_fields, name);\n\n    if (field) {\n      var defaultValue = get(_formValues, name, get(_defaultValues, name));\n      isUndefined(defaultValue) || ref && ref.defaultChecked || shouldSkipSetValueAs ? set(_formValues, name, shouldSkipSetValueAs ? defaultValue : getFieldValue(field._f)) : setFieldValue(name, defaultValue);\n    }\n\n    _stateFlags.mount && _updateValid();\n  };\n\n  var updateTouchAndDirty = function updateTouchAndDirty(name, fieldValue, isCurrentTouched) {\n    var shouldRender = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n    var isFieldDirty = false;\n    var output = {\n      name: name\n    };\n    var isPreviousFieldTouched = get(_formState.touchedFields, name);\n\n    if (_proxyFormState.isDirty) {\n      var isPreviousFormDirty = _formState.isDirty;\n      _formState.isDirty = output.isDirty = _getDirty();\n      isFieldDirty = isPreviousFormDirty !== output.isDirty;\n    }\n\n    if (_proxyFormState.dirtyFields && !isCurrentTouched) {\n      var isPreviousFieldDirty = get(_formState.dirtyFields, name);\n      var isCurrentFieldPristine = deepEqual(get(_defaultValues, name), fieldValue);\n      isCurrentFieldPristine ? unset(_formState.dirtyFields, name) : set(_formState.dirtyFields, name, true);\n      output.dirtyFields = _formState.dirtyFields;\n      isFieldDirty = isFieldDirty || isPreviousFieldDirty !== get(_formState.dirtyFields, name);\n    }\n\n    if (isCurrentTouched && !isPreviousFieldTouched) {\n      set(_formState.touchedFields, name, isCurrentTouched);\n      output.touchedFields = _formState.touchedFields;\n      isFieldDirty = isFieldDirty || _proxyFormState.touchedFields && isPreviousFieldTouched !== isCurrentTouched;\n    }\n\n    isFieldDirty && shouldRender && _subjects.state.next(output);\n    return isFieldDirty ? output : {};\n  };\n\n  var shouldRenderByError = /*#__PURE__*/function () {\n    var _ref11 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(shouldSkipRender, name, isValid, error, fieldState) {\n      var previousFieldError, shouldUpdateValid, updatedFormState;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              previousFieldError = get(_formState.errors, name);\n              shouldUpdateValid = _proxyFormState.isValid && _formState.isValid !== isValid;\n\n              if (props.delayError && error) {\n                delayErrorCallback = delayErrorCallback || debounce(updateErrors, props.delayError);\n                delayErrorCallback(name, error);\n              } else {\n                clearTimeout(timer);\n                error ? set(_formState.errors, name, error) : unset(_formState.errors, name);\n              }\n\n              if (((error ? !deepEqual(previousFieldError, error) : previousFieldError) || !isEmptyObject(fieldState) || shouldUpdateValid) && !shouldSkipRender) {\n                updatedFormState = Object.assign(Object.assign(Object.assign({}, fieldState), shouldUpdateValid ? {\n                  isValid: isValid\n                } : {}), {\n                  errors: _formState.errors,\n                  name: name\n                });\n                _formState = Object.assign(Object.assign({}, _formState), updatedFormState);\n\n                _subjects.state.next(updatedFormState);\n              }\n\n              validateFields[name]--;\n\n              if (_proxyFormState.isValidating && !validateFields[name]) {\n                _subjects.state.next({\n                  isValidating: false\n                });\n\n                validateFields = {};\n              }\n\n            case 6:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function shouldRenderByError(_x6, _x7, _x8, _x9, _x10) {\n      return _ref11.apply(this, arguments);\n    };\n  }();\n\n  var _executeSchema = /*#__PURE__*/function () {\n    var _ref12 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(name) {\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              if (!_options.resolver) {\n                _context4.next = 6;\n                break;\n              }\n\n              _context4.next = 3;\n              return _options.resolver(Object.assign({}, _formValues), _options.context, getResolverOptions(name || _names.mount, _fields, _options.criteriaMode, _options.shouldUseNativeValidation));\n\n            case 3:\n              _context4.t0 = _context4.sent;\n              _context4.next = 7;\n              break;\n\n            case 6:\n              _context4.t0 = {};\n\n            case 7:\n              return _context4.abrupt(\"return\", _context4.t0);\n\n            case 8:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function _executeSchema(_x11) {\n      return _ref12.apply(this, arguments);\n    };\n  }();\n\n  var executeSchemaAndUpdateState = /*#__PURE__*/function () {\n    var _ref13 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(names) {\n      var _yield$_executeSchema, errors, _iterator5, _step5, _name2, _error;\n\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.next = 2;\n              return _executeSchema();\n\n            case 2:\n              _yield$_executeSchema = _context5.sent;\n              errors = _yield$_executeSchema.errors;\n\n              if (names) {\n                _iterator5 = _createForOfIteratorHelper(names);\n\n                try {\n                  for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n                    _name2 = _step5.value;\n                    _error = get(errors, _name2);\n                    _error ? set(_formState.errors, _name2, _error) : unset(_formState.errors, _name2);\n                  }\n                } catch (err) {\n                  _iterator5.e(err);\n                } finally {\n                  _iterator5.f();\n                }\n              } else {\n                _formState.errors = errors;\n              }\n\n              return _context5.abrupt(\"return\", errors);\n\n            case 6:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n\n    return function executeSchemaAndUpdateState(_x12) {\n      return _ref13.apply(this, arguments);\n    };\n  }();\n\n  var executeBuildInValidation = /*#__PURE__*/function () {\n    var _ref14 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(fields, shouldOnlyCheckValid) {\n      var context,\n          _name3,\n          field,\n          fieldReference,\n          fieldValue,\n          fieldError,\n          _args6 = arguments;\n\n      return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              context = _args6.length > 2 && _args6[2] !== undefined ? _args6[2] : {\n                valid: true\n              };\n              _context6.t0 = _regeneratorRuntime.keys(fields);\n\n            case 2:\n              if ((_context6.t1 = _context6.t0()).done) {\n                _context6.next = 23;\n                break;\n              }\n\n              _name3 = _context6.t1.value;\n              field = fields[_name3];\n\n              if (!field) {\n                _context6.next = 21;\n                break;\n              }\n\n              fieldReference = field._f;\n              fieldValue = omit(field, '_f');\n\n              if (!fieldReference) {\n                _context6.next = 17;\n                break;\n              }\n\n              _context6.next = 11;\n              return validateField(field, get(_formValues, fieldReference.name), shouldDisplayAllAssociatedErrors, _options.shouldUseNativeValidation);\n\n            case 11:\n              fieldError = _context6.sent;\n\n              if (!fieldError[fieldReference.name]) {\n                _context6.next = 16;\n                break;\n              }\n\n              context.valid = false;\n\n              if (!shouldOnlyCheckValid) {\n                _context6.next = 16;\n                break;\n              }\n\n              return _context6.abrupt(\"break\", 23);\n\n            case 16:\n              if (!shouldOnlyCheckValid) {\n                fieldError[fieldReference.name] ? set(_formState.errors, fieldReference.name, fieldError[fieldReference.name]) : unset(_formState.errors, fieldReference.name);\n              }\n\n            case 17:\n              _context6.t2 = fieldValue;\n\n              if (!_context6.t2) {\n                _context6.next = 21;\n                break;\n              }\n\n              _context6.next = 21;\n              return executeBuildInValidation(fieldValue, shouldOnlyCheckValid, context);\n\n            case 21:\n              _context6.next = 2;\n              break;\n\n            case 23:\n              return _context6.abrupt(\"return\", context.valid);\n\n            case 24:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, _callee6);\n    }));\n\n    return function executeBuildInValidation(_x13, _x14) {\n      return _ref14.apply(this, arguments);\n    };\n  }();\n\n  var _removeUnmounted = function _removeUnmounted() {\n    var _iterator6 = _createForOfIteratorHelper(_names.unMount),\n        _step6;\n\n    try {\n      for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n        var _name4 = _step6.value;\n        var field = get(_fields, _name4);\n        field && (field._f.refs ? field._f.refs.every(function (ref) {\n          return !live(ref);\n        }) : !live(field._f.ref)) && unregister(_name4);\n      }\n    } catch (err) {\n      _iterator6.e(err);\n    } finally {\n      _iterator6.f();\n    }\n\n    _names.unMount = new Set();\n  };\n\n  var _getDirty = function _getDirty(name, data) {\n    return name && data && set(_formValues, name, data), !deepEqual(getValues(), _defaultValues);\n  };\n\n  var _getWatch = function _getWatch(names, defaultValue, isGlobal) {\n    var fieldValues = Object.assign({}, _stateFlags.mount ? _formValues : isUndefined(defaultValue) ? _defaultValues : isString(names) ? _defineProperty({}, names, defaultValue) : defaultValue);\n    return generateWatchOutput(names, _names, fieldValues, isGlobal);\n  };\n\n  var _getFieldArray = function _getFieldArray(name) {\n    return get(_stateFlags.mount ? _formValues : _defaultValues, name, props.shouldUnregister ? get(_defaultValues, name, []) : []);\n  };\n\n  var setFieldValue = function setFieldValue(name, value) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var field = get(_fields, name);\n    var fieldValue = value;\n\n    if (field) {\n      var fieldReference = field._f;\n\n      if (fieldReference) {\n        set(_formValues, name, getFieldValueAs(value, fieldReference));\n        fieldValue = isWeb && isHTMLElement(fieldReference.ref) && isNullOrUndefined(value) ? '' : value;\n\n        if (isMultipleSelect(fieldReference.ref)) {\n          _toConsumableArray(fieldReference.ref.options).forEach(function (selectRef) {\n            return selectRef.selected = fieldValue.includes(selectRef.value);\n          });\n        } else if (fieldReference.refs) {\n          if (isCheckBoxInput(fieldReference.ref)) {\n            fieldReference.refs.length > 1 ? fieldReference.refs.forEach(function (checkboxRef) {\n              return checkboxRef.checked = Array.isArray(fieldValue) ? !!fieldValue.find(function (data) {\n                return data === checkboxRef.value;\n              }) : fieldValue === checkboxRef.value;\n            }) : fieldReference.refs[0].checked = !!fieldValue;\n          } else {\n            fieldReference.refs.forEach(function (radioRef) {\n              return radioRef.checked = radioRef.value === fieldValue;\n            });\n          }\n        } else if (!isFileInput(fieldReference.ref)) {\n          fieldReference.ref.value = fieldValue;\n        }\n      }\n    }\n\n    (options.shouldDirty || options.shouldTouch) && updateTouchAndDirty(name, fieldValue, options.shouldTouch);\n    options.shouldValidate && trigger(name);\n  };\n\n  var setValues = function setValues(name, value, options) {\n    for (var fieldKey in value) {\n      var fieldValue = value[fieldKey];\n      var fieldName = \"\".concat(name, \".\").concat(fieldKey);\n      var field = get(_fields, fieldName);\n      (_names.array.has(name) || !isPrimitive(fieldValue) || field && !field._f) && !isDateObject(fieldValue) ? setValues(fieldName, fieldValue, options) : setFieldValue(fieldName, fieldValue, options);\n    }\n  };\n\n  var setValue = function setValue(name, value) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var field = get(_fields, name);\n\n    var isFieldArray = _names.array.has(name);\n\n    set(_formValues, name, value);\n\n    if (isFieldArray) {\n      _subjects.array.next({\n        name: name,\n        values: _formValues\n      });\n\n      if ((_proxyFormState.isDirty || _proxyFormState.dirtyFields) && options.shouldDirty) {\n        _formState.dirtyFields = getDirtyFields(_defaultValues, _formValues);\n\n        _subjects.state.next({\n          name: name,\n          dirtyFields: _formState.dirtyFields,\n          isDirty: _getDirty(name, value)\n        });\n      }\n    } else {\n      field && !field._f && !isNullOrUndefined(value) ? setValues(name, value, options) : setFieldValue(name, value, options);\n    }\n\n    isWatched(name, _names) && _subjects.state.next({});\n\n    _subjects.watch.next({\n      name: name\n    });\n  };\n\n  var onChange = /*#__PURE__*/function () {\n    var _ref16 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(event) {\n      var target, name, field, _error2, isValid, fieldValue, isBlurEvent, shouldSkipValidation, watched, fieldState, shouldRender, _yield$_executeSchema2, errors, previousErrorLookupResult, errorLookupResult;\n\n      return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              target = event.target;\n              name = target.name;\n              field = get(_fields, name);\n\n              if (!field) {\n                _context7.next = 39;\n                break;\n              }\n\n              fieldValue = target.type ? getFieldValue(field._f) : getEventValue(event);\n              isBlurEvent = event.type === EVENTS.BLUR;\n              shouldSkipValidation = !hasValidation(field._f) && !_options.resolver && !get(_formState.errors, name) && !field._f.deps || skipValidation(isBlurEvent, get(_formState.touchedFields, name), _formState.isSubmitted, validationModeAfterSubmit, validationModeBeforeSubmit);\n              watched = isWatched(name, _names, isBlurEvent);\n\n              if (isBlurEvent) {\n                field._f.onBlur && field._f.onBlur(event);\n              } else if (field._f.onChange) {\n                field._f.onChange(event);\n              }\n\n              set(_formValues, name, fieldValue);\n              fieldState = updateTouchAndDirty(name, fieldValue, isBlurEvent, false);\n              shouldRender = !isEmptyObject(fieldState) || watched;\n              !isBlurEvent && _subjects.watch.next({\n                name: name,\n                type: event.type\n              });\n\n              if (!shouldSkipValidation) {\n                _context7.next = 15;\n                break;\n              }\n\n              return _context7.abrupt(\"return\", shouldRender && _subjects.state.next(Object.assign({\n                name: name\n              }, watched ? {} : fieldState)));\n\n            case 15:\n              !isBlurEvent && watched && _subjects.state.next({});\n              validateFields[name] = validateFields[name] ? +1 : 1;\n              _proxyFormState.isValidating && _subjects.state.next({\n                isValidating: true\n              });\n\n              if (!_options.resolver) {\n                _context7.next = 30;\n                break;\n              }\n\n              _context7.next = 21;\n              return _executeSchema([name]);\n\n            case 21:\n              _yield$_executeSchema2 = _context7.sent;\n              errors = _yield$_executeSchema2.errors;\n              previousErrorLookupResult = schemaErrorLookup(_formState.errors, _fields, name);\n              errorLookupResult = schemaErrorLookup(errors, _fields, previousErrorLookupResult.name || name);\n              _error2 = errorLookupResult.error;\n              name = errorLookupResult.name;\n              isValid = isEmptyObject(errors);\n              _context7.next = 37;\n              break;\n\n            case 30:\n              _context7.next = 32;\n              return validateField(field, get(_formValues, name), shouldDisplayAllAssociatedErrors, _options.shouldUseNativeValidation);\n\n            case 32:\n              _context7.t0 = name;\n              _error2 = _context7.sent[_context7.t0];\n              _context7.next = 36;\n              return _updateValid(true);\n\n            case 36:\n              isValid = _context7.sent;\n\n            case 37:\n              field._f.deps && trigger(field._f.deps);\n              shouldRenderByError(false, name, isValid, _error2, fieldState);\n\n            case 39:\n            case \"end\":\n              return _context7.stop();\n          }\n        }\n      }, _callee7);\n    }));\n\n    return function onChange(_x15) {\n      return _ref16.apply(this, arguments);\n    };\n  }();\n\n  var trigger = /*#__PURE__*/function () {\n    var _ref17 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9(name) {\n      var options,\n          isValid,\n          validationResult,\n          fieldNames,\n          errors,\n          _args9 = arguments;\n      return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n        while (1) {\n          switch (_context9.prev = _context9.next) {\n            case 0:\n              options = _args9.length > 1 && _args9[1] !== undefined ? _args9[1] : {};\n              fieldNames = convertToArrayPayload(name);\n\n              _subjects.state.next({\n                isValidating: true\n              });\n\n              if (!_options.resolver) {\n                _context9.next = 11;\n                break;\n              }\n\n              _context9.next = 6;\n              return executeSchemaAndUpdateState(isUndefined(name) ? name : fieldNames);\n\n            case 6:\n              errors = _context9.sent;\n              isValid = isEmptyObject(errors);\n              validationResult = name ? !fieldNames.some(function (name) {\n                return get(errors, name);\n              }) : isValid;\n              _context9.next = 21;\n              break;\n\n            case 11:\n              if (!name) {\n                _context9.next = 18;\n                break;\n              }\n\n              _context9.next = 14;\n              return Promise.all(fieldNames.map( /*#__PURE__*/function () {\n                var _ref18 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8(fieldName) {\n                  var field;\n                  return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n                    while (1) {\n                      switch (_context8.prev = _context8.next) {\n                        case 0:\n                          field = get(_fields, fieldName);\n                          _context8.next = 3;\n                          return executeBuildInValidation(field && field._f ? _defineProperty({}, fieldName, field) : field);\n\n                        case 3:\n                          return _context8.abrupt(\"return\", _context8.sent);\n\n                        case 4:\n                        case \"end\":\n                          return _context8.stop();\n                      }\n                    }\n                  }, _callee8);\n                }));\n\n                return function (_x17) {\n                  return _ref18.apply(this, arguments);\n                };\n              }()));\n\n            case 14:\n              validationResult = _context9.sent.every(Boolean);\n              !(!validationResult && !_formState.isValid) && _updateValid();\n              _context9.next = 21;\n              break;\n\n            case 18:\n              _context9.next = 20;\n              return executeBuildInValidation(_fields);\n\n            case 20:\n              validationResult = isValid = _context9.sent;\n\n            case 21:\n              _subjects.state.next(Object.assign(Object.assign(Object.assign({}, !isString(name) || _proxyFormState.isValid && isValid !== _formState.isValid ? {} : {\n                name: name\n              }), _options.resolver ? {\n                isValid: isValid\n              } : {}), {\n                errors: _formState.errors,\n                isValidating: false\n              }));\n\n              options.shouldFocus && !validationResult && focusFieldBy(_fields, function (key) {\n                return get(_formState.errors, key);\n              }, name ? fieldNames : _names.mount);\n              return _context9.abrupt(\"return\", validationResult);\n\n            case 24:\n            case \"end\":\n              return _context9.stop();\n          }\n        }\n      }, _callee9);\n    }));\n\n    return function trigger(_x16) {\n      return _ref17.apply(this, arguments);\n    };\n  }();\n\n  var getValues = function getValues(fieldNames) {\n    var values = Object.assign(Object.assign({}, _defaultValues), _stateFlags.mount ? _formValues : {});\n    return isUndefined(fieldNames) ? values : isString(fieldNames) ? get(values, fieldNames) : fieldNames.map(function (name) {\n      return get(values, name);\n    });\n  };\n\n  var clearErrors = function clearErrors(name) {\n    name ? convertToArrayPayload(name).forEach(function (inputName) {\n      return unset(_formState.errors, inputName);\n    }) : _formState.errors = {};\n\n    _subjects.state.next({\n      errors: _formState.errors,\n      isValid: true\n    });\n  };\n\n  var setError = function setError(name, error, options) {\n    var ref = (get(_fields, name, {\n      _f: {}\n    })._f || {}).ref;\n    set(_formState.errors, name, Object.assign(Object.assign({}, error), {\n      ref: ref\n    }));\n\n    _subjects.state.next({\n      name: name,\n      errors: _formState.errors,\n      isValid: false\n    });\n\n    options && options.shouldFocus && ref && ref.focus && ref.focus();\n  };\n\n  var watch = function watch(name, defaultValue) {\n    return isFunction(name) ? _subjects.watch.subscribe({\n      next: function next(info) {\n        return name(_getWatch(undefined, defaultValue), info);\n      }\n    }) : _getWatch(name, defaultValue, true);\n  };\n\n  var unregister = function unregister(name) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    var _iterator7 = _createForOfIteratorHelper(name ? convertToArrayPayload(name) : _names.mount),\n        _step7;\n\n    try {\n      for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {\n        var fieldName = _step7.value;\n\n        _names.mount.delete(fieldName);\n\n        _names.array.delete(fieldName);\n\n        if (get(_fields, fieldName)) {\n          if (!options.keepValue) {\n            unset(_fields, fieldName);\n            unset(_formValues, fieldName);\n          }\n\n          !options.keepError && unset(_formState.errors, fieldName);\n          !options.keepDirty && unset(_formState.dirtyFields, fieldName);\n          !options.keepTouched && unset(_formState.touchedFields, fieldName);\n          !_options.shouldUnregister && !options.keepDefaultValue && unset(_defaultValues, fieldName);\n        }\n      }\n    } catch (err) {\n      _iterator7.e(err);\n    } finally {\n      _iterator7.f();\n    }\n\n    _subjects.watch.next({});\n\n    _subjects.state.next(Object.assign(Object.assign({}, _formState), !options.keepDirty ? {} : {\n      isDirty: _getDirty()\n    }));\n\n    !options.keepIsValid && _updateValid();\n  };\n\n  var register = function register(name) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var field = get(_fields, name);\n    set(_fields, name, {\n      _f: Object.assign(Object.assign(Object.assign({}, field && field._f ? field._f : {\n        ref: {\n          name: name\n        }\n      }), {\n        name: name,\n        mount: true\n      }), options)\n    });\n\n    _names.mount.add(name);\n\n    !isUndefined(options.value) && !options.disabled && set(_formValues, name, get(_formValues, name, options.value));\n    field ? isBoolean(options.disabled) && set(_formValues, name, options.disabled ? undefined : get(_formValues, name, getFieldValue(field._f))) : updateValidAndValue(name, true);\n    return Object.assign(Object.assign(Object.assign({}, isBoolean(options.disabled) ? {\n      disabled: options.disabled\n    } : {}), _options.shouldUseNativeValidation ? {\n      required: !!options.required,\n      min: getRuleValue(options.min),\n      max: getRuleValue(options.max),\n      minLength: getRuleValue(options.minLength),\n      maxLength: getRuleValue(options.maxLength),\n      pattern: getRuleValue(options.pattern)\n    } : {}), {\n      name: name,\n      onChange: onChange,\n      onBlur: onChange,\n      ref: function (_ref20) {\n        function ref(_x18) {\n          return _ref20.apply(this, arguments);\n        }\n\n        ref.toString = function () {\n          return _ref20.toString();\n        };\n\n        return ref;\n      }(function (ref) {\n        if (ref) {\n          register(name, options);\n          field = get(_fields, name);\n          var fieldRef = isUndefined(ref.value) ? ref.querySelectorAll ? ref.querySelectorAll('input,select,textarea')[0] || ref : ref : ref;\n          var radioOrCheckbox = isRadioOrCheckbox(fieldRef);\n\n          if (fieldRef === field._f.ref || radioOrCheckbox && compact(field._f.refs).find(function (option) {\n            return option === fieldRef;\n          })) {\n            return;\n          }\n\n          set(_fields, name, {\n            _f: radioOrCheckbox ? Object.assign(Object.assign({}, field._f), {\n              refs: [].concat(_toConsumableArray(compact(field._f.refs).filter(live)), [fieldRef]),\n              ref: {\n                type: fieldRef.type,\n                name: name\n              }\n            }) : Object.assign(Object.assign({}, field._f), {\n              ref: fieldRef\n            })\n          });\n          !options.disabled && updateValidAndValue(name, false, fieldRef);\n        } else {\n          field = get(_fields, name, {});\n\n          if (field._f) {\n            field._f.mount = false;\n          }\n\n          (_options.shouldUnregister || options.shouldUnregister) && !(isNameInFieldArray(_names.array, name) && _stateFlags.action) && _names.unMount.add(name);\n        }\n      })\n    });\n  };\n\n  var handleSubmit = function handleSubmit(onValid, onInvalid) {\n    return /*#__PURE__*/function () {\n      var _ref21 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee10(e) {\n        var hasNoPromiseError, fieldValues, _yield$_executeSchema3, errors, values;\n\n        return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                if (e) {\n                  e.preventDefault && e.preventDefault();\n                  e.persist && e.persist();\n                }\n\n                hasNoPromiseError = true;\n                fieldValues = _options.shouldUnregister ? cloneObject(_formValues) : Object.assign({}, _formValues);\n\n                _subjects.state.next({\n                  isSubmitting: true\n                });\n\n                _context10.prev = 4;\n\n                if (!_options.resolver) {\n                  _context10.next = 15;\n                  break;\n                }\n\n                _context10.next = 8;\n                return _executeSchema();\n\n              case 8:\n                _yield$_executeSchema3 = _context10.sent;\n                errors = _yield$_executeSchema3.errors;\n                values = _yield$_executeSchema3.values;\n                _formState.errors = errors;\n                fieldValues = values;\n                _context10.next = 17;\n                break;\n\n              case 15:\n                _context10.next = 17;\n                return executeBuildInValidation(_fields);\n\n              case 17:\n                if (!(isEmptyObject(_formState.errors) && Object.keys(_formState.errors).every(function (name) {\n                  return get(fieldValues, name);\n                }))) {\n                  _context10.next = 23;\n                  break;\n                }\n\n                _subjects.state.next({\n                  errors: {},\n                  isSubmitting: true\n                });\n\n                _context10.next = 21;\n                return onValid(fieldValues, e);\n\n              case 21:\n                _context10.next = 28;\n                break;\n\n              case 23:\n                _context10.t0 = onInvalid;\n\n                if (!_context10.t0) {\n                  _context10.next = 27;\n                  break;\n                }\n\n                _context10.next = 27;\n                return onInvalid(_formState.errors, e);\n\n              case 27:\n                _options.shouldFocusError && focusFieldBy(_fields, function (key) {\n                  return get(_formState.errors, key);\n                }, _names.mount);\n\n              case 28:\n                _context10.next = 34;\n                break;\n\n              case 30:\n                _context10.prev = 30;\n                _context10.t1 = _context10[\"catch\"](4);\n                hasNoPromiseError = false;\n                throw _context10.t1;\n\n              case 34:\n                _context10.prev = 34;\n                _formState.isSubmitted = true;\n\n                _subjects.state.next({\n                  isSubmitted: true,\n                  isSubmitting: false,\n                  isSubmitSuccessful: isEmptyObject(_formState.errors) && hasNoPromiseError,\n                  submitCount: _formState.submitCount + 1,\n                  errors: _formState.errors\n                });\n\n                return _context10.finish(34);\n\n              case 38:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10, null, [[4, 30, 34, 38]]);\n      }));\n\n      return function (_x19) {\n        return _ref21.apply(this, arguments);\n      };\n    }();\n  };\n\n  var resetField = function resetField(name) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    if (isUndefined(options.defaultValue)) {\n      setValue(name, get(_defaultValues, name));\n    } else {\n      setValue(name, options.defaultValue);\n      set(_defaultValues, name, options.defaultValue);\n    }\n\n    if (!options.keepTouched) {\n      unset(_formState.touchedFields, name);\n    }\n\n    if (!options.keepDirty) {\n      unset(_formState.dirtyFields, name);\n      _formState.isDirty = options.defaultValue ? _getDirty(name, get(_defaultValues, name)) : _getDirty();\n    }\n\n    if (!options.keepError) {\n      unset(_formState.errors, name);\n      _proxyFormState.isValid && _updateValid();\n    }\n\n    _subjects.state.next(Object.assign({}, _formState));\n  };\n\n  var reset = function reset(formValues) {\n    var keepStateOptions = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var updatedValues = formValues || _defaultValues;\n    var cloneUpdatedValues = cloneObject(updatedValues);\n    var values = !isEmptyObject(formValues) ? cloneUpdatedValues : _defaultValues;\n\n    if (!keepStateOptions.keepDefaultValues) {\n      _defaultValues = updatedValues;\n    }\n\n    if (!keepStateOptions.keepValues) {\n      if (isWeb) {\n        var _iterator8 = _createForOfIteratorHelper(_names.mount),\n            _step8;\n\n        try {\n          for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {\n            var _name5 = _step8.value;\n            var field = get(_fields, _name5);\n\n            if (field && field._f) {\n              var fieldReference = Array.isArray(field._f.refs) ? field._f.refs[0] : field._f.ref;\n\n              try {\n                isHTMLElement(fieldReference) && fieldReference.closest('form').reset();\n                break;\n              } catch (_a) {}\n            }\n          }\n        } catch (err) {\n          _iterator8.e(err);\n        } finally {\n          _iterator8.f();\n        }\n      }\n\n      _formValues = props.shouldUnregister ? keepStateOptions.keepDefaultValues ? cloneObject(_defaultValues) : {} : cloneUpdatedValues;\n      _fields = {};\n\n      _subjects.watch.next({\n        values: values\n      });\n\n      _subjects.array.next({\n        values: values\n      });\n    }\n\n    _names = {\n      mount: new Set(),\n      unMount: new Set(),\n      array: new Set(),\n      watch: new Set(),\n      watchAll: false,\n      focus: ''\n    };\n\n    _subjects.state.next({\n      submitCount: keepStateOptions.keepSubmitCount ? _formState.submitCount : 0,\n      isDirty: keepStateOptions.keepDirty ? _formState.isDirty : keepStateOptions.keepDefaultValues ? !deepEqual(formValues, _defaultValues) : false,\n      isSubmitted: keepStateOptions.keepIsSubmitted ? _formState.isSubmitted : false,\n      dirtyFields: keepStateOptions.keepDirty ? _formState.dirtyFields : keepStateOptions.keepDefaultValues && formValues ? Object.entries(formValues).reduce(function (previous, _ref22) {\n        var _ref23 = _slicedToArray(_ref22, 2),\n            key = _ref23[0],\n            value = _ref23[1];\n\n        return Object.assign(Object.assign({}, previous), _defineProperty({}, key, value !== get(_defaultValues, key)));\n      }, {}) : {},\n      touchedFields: keepStateOptions.keepTouched ? _formState.touchedFields : {},\n      errors: keepStateOptions.keepErrors ? _formState.errors : {},\n      isSubmitting: false,\n      isSubmitSuccessful: false\n    });\n\n    _stateFlags.mount = !_proxyFormState.isValid || !!keepStateOptions.keepIsValid;\n    _stateFlags.watch = !!props.shouldUnregister;\n  };\n\n  var setFocus = function setFocus(name) {\n    var field = get(_fields, name)._f;\n\n    (field.ref.focus ? field.ref : field.refs[0]).focus();\n  };\n\n  return {\n    control: {\n      register: register,\n      unregister: unregister,\n      _executeSchema: _executeSchema,\n      _getWatch: _getWatch,\n      _getDirty: _getDirty,\n      _updateValid: _updateValid,\n      _removeUnmounted: _removeUnmounted,\n      _updateFieldArray: _updateFieldArray,\n      _getFieldArray: _getFieldArray,\n      _subjects: _subjects,\n      _proxyFormState: _proxyFormState,\n\n      get _fields() {\n        return _fields;\n      },\n\n      set _fields(value) {\n        _fields = value;\n      },\n\n      get _formValues() {\n        return _formValues;\n      },\n\n      set _formValues(value) {\n        _formValues = value;\n      },\n\n      get _stateFlags() {\n        return _stateFlags;\n      },\n\n      set _stateFlags(value) {\n        _stateFlags = value;\n      },\n\n      get _defaultValues() {\n        return _defaultValues;\n      },\n\n      set _defaultValues(value) {\n        _defaultValues = value;\n      },\n\n      get _names() {\n        return _names;\n      },\n\n      set _names(value) {\n        _names = value;\n      },\n\n      get _formState() {\n        return _formState;\n      },\n\n      set _formState(value) {\n        _formState = value;\n      },\n\n      get _options() {\n        return _options;\n      },\n\n      set _options(value) {\n        _options = Object.assign(Object.assign({}, _options), value);\n      }\n\n    },\n    trigger: trigger,\n    register: register,\n    handleSubmit: handleSubmit,\n    watch: watch,\n    setValue: setValue,\n    getValues: getValues,\n    reset: reset,\n    resetField: resetField,\n    clearErrors: clearErrors,\n    unregister: unregister,\n    setError: setError,\n    setFocus: setFocus\n  };\n}\n\nfunction useForm() {\n  var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  var _formControl = React.useRef();\n\n  var _React$useState7 = React.useState({\n    isDirty: false,\n    isValidating: false,\n    dirtyFields: {},\n    isSubmitted: false,\n    submitCount: 0,\n    touchedFields: {},\n    isSubmitting: false,\n    isSubmitSuccessful: false,\n    isValid: false,\n    errors: {}\n  }),\n      _React$useState8 = _slicedToArray(_React$useState7, 2),\n      formState = _React$useState8[0],\n      updateFormState = _React$useState8[1];\n\n  if (_formControl.current) {\n    _formControl.current.control._options = props;\n  } else {\n    _formControl.current = Object.assign(Object.assign({}, createFormControl(props)), {\n      formState: formState\n    });\n  }\n\n  var control = _formControl.current.control;\n  useSubscribe({\n    subject: control._subjects.state,\n    callback: function callback(value) {\n      if (shouldRenderFormState(value, control._proxyFormState, true)) {\n        control._formState = Object.assign(Object.assign({}, control._formState), value);\n        updateFormState(Object.assign({}, control._formState));\n      }\n    }\n  });\n  React.useEffect(function () {\n    if (!control._stateFlags.mount) {\n      control._proxyFormState.isValid && control._updateValid();\n      control._stateFlags.mount = true;\n    }\n\n    if (control._stateFlags.watch) {\n      control._stateFlags.watch = false;\n\n      control._subjects.state.next({});\n    }\n\n    control._removeUnmounted();\n  });\n  _formControl.current.formState = getProxyFormState(formState, control._proxyFormState);\n  return _formControl.current;\n}\n\nexport { Controller, FormProvider, appendErrors, get, set, useController, useFieldArray, useForm, useFormContext, useFormState, useWatch };","import firebase from \"gatsby-plugin-firebase\"\nimport React, { useCallback, useContext, useState } from \"react\"\nimport { useForm } from \"react-hook-form\"\nimport { useIntl } from \"react-intl\"\nimport { DIALOG_CLOSED_REASON } from \"../constants\"\nimport { NotifyContext } from \"../contexts/notify\"\nimport { PrimaryButton } from \"./button\"\nimport { Dialog } from \"./dialog\"\nimport { Input } from \"./input\"\nimport { Error, Similink, Title } from \"./primitives\"\nimport { View } from \"./view\"\n\nconst ResetPasswordTab = ({ setTab }) => {\n  const intl = useIntl()\n  const notify = useContext(NotifyContext)\n\n  const { handleSubmit, register, setError, formState } = useForm()\n\n  const onSubmit = useCallback(\n    async ({ email }) => {\n      try {\n        await firebase.auth().sendPasswordResetEmail(email)\n        setTab(\"signin\")\n        notify(intl.formatMessage({ id: \"Reset password email sent\" }))\n      } catch (error) {\n        switch (error.code) {\n          case \"auth/invalid-email\":\n          case \"auth/user-not-found\":\n          case \"auth/user-disabled\":\n            setError(\"email\", {\n              type: \"invalid\",\n              message: intl.formatMessage({ id: \"Unknown email address\" }),\n            })\n            break\n          default:\n            notify(\n              intl.formatMessage(\n                { id: \"An error occured, please retry later\" },\n                { email }\n              )\n            )\n        }\n      }\n    },\n    [setError, intl, notify, setTab]\n  )\n\n  return (\n    <View\n      as=\"form\"\n      name=\"reset\"\n      onSubmit={handleSubmit(onSubmit)}\n      css={{ gap: 4 }}\n    >\n      <View css={{ gap: 2 }}>\n        <label>{intl.formatMessage({ id: \"Email address\" })}</label>\n        <Input\n          type=\"email\"\n          {...register(\"email\", {\n            required: intl.formatMessage({ id: \"Email address is required\" }),\n          })}\n        ></Input>\n        {formState.errors.email && (\n          <Error>{formState.errors.email.message}</Error>\n        )}\n      </View>\n\n      <View css={{ gap: 3 }}>\n        <PrimaryButton type=\"submit\" disabled={formState.isSubmitting}>\n          {intl.formatMessage({ id: \"Send the reset mail!\" })}\n        </PrimaryButton>\n\n        <View\n          css={{\n            alignItems: \"center\",\n          }}\n        >\n          <Similink onClick={() => setTab(\"signin\")}>\n            {intl.formatMessage({ id: \"Back\" })}\n          </Similink>\n        </View>\n      </View>\n    </View>\n  )\n}\n\nconst SignUpTab = ({ onSignUp, setTab }) => {\n  const intl = useIntl()\n\n  const { handleSubmit, register, watch, setError, formState } = useForm()\n\n  const password = watch(\"password\")\n\n  const onSubmit = useCallback(\n    async ({ email, username, password }) => {\n      try {\n        const { user } = await firebase\n          .auth()\n          .createUserWithEmailAndPassword(email, password)\n\n        const userMetadata = { username, signupDate: Date.now() }\n\n        await firebase\n          .firestore()\n          .collection(\"users\")\n          .doc(user.uid)\n          .set(userMetadata)\n\n        onSignUp({\n          uid: user.uid,\n          ...userMetadata,\n          firebaseUser: user,\n        })\n      } catch (error) {\n        switch (error.code) {\n          case \"auth/weak-password\":\n            setError(\"password\", {\n              type: \"weakPassword\",\n              message: intl.formatMessage({ id: \"Password is too weak\" }),\n            })\n            break\n          case \"auth/email-already-in-use\":\n            setError(\"email\", {\n              type: \"alreadyExists\",\n              message: intl.formatMessage({\n                id: \"Email address already in use\",\n              }),\n            })\n            break\n          case \"auth/invalid-email\":\n            setError(\"email\", {\n              type: \"invalid\",\n              message: intl.formatMessage({ id: \"Invalid email address\" }),\n            })\n            break\n          default:\n            return\n        }\n      }\n    },\n    [onSignUp, setError, intl]\n  )\n\n  return (\n    <View\n      as=\"form\"\n      name=\"signup\"\n      autoComplete=\"off\"\n      onSubmit={handleSubmit(onSubmit)}\n      css={{ gap: 4 }}\n    >\n      <View css={{ gap: 3 }}>\n        <View css={{ gap: 2 }}>\n          <label>{intl.formatMessage({ id: \"Username\" })}</label>\n          <Input\n            {...register(\"username\", {\n              required: intl.formatMessage({ id: \"Username is required\" }),\n            })}\n          ></Input>\n          {formState.errors.username && (\n            <Error>{formState.errors.username.message}</Error>\n          )}\n        </View>\n\n        <View css={{ gap: 2 }}>\n          <label>{intl.formatMessage({ id: \"Email address\" })}</label>\n          <Input\n            type=\"email\"\n            {...register(\"email\", {\n              required: intl.formatMessage({ id: \"Email address is required\" }),\n            })}\n          ></Input>\n          {formState.errors.email && (\n            <Error>{formState.errors.email.message}</Error>\n          )}\n        </View>\n\n        <View css={{ gap: 2 }}>\n          <label>{intl.formatMessage({ id: \"Password\" })}</label>\n          <Input\n            autoComplete=\"new-password\"\n            type=\"password\"\n            {...register(\"password\", {\n              required: intl.formatMessage({ id: \"Password is required\" }),\n            })}\n          ></Input>\n          {formState.errors.password && (\n            <Error>{formState.errors.password.message}</Error>\n          )}\n        </View>\n\n        <View css={{ gap: 2 }}>\n          <label>{intl.formatMessage({ id: \"Confirm password\" })}</label>\n          <Input\n            autoComplete=\"off\"\n            type=\"password\"\n            {...register(\"passwordConfirm\", {\n              required: \"Password is required\",\n              validate: (passwordConfirm) =>\n                passwordConfirm === password ||\n                intl.formatMessage({ id: \"Passwords must match\" }),\n            })}\n          ></Input>\n          {formState.errors.passwordConfirm && (\n            <Error>{formState.errors.passwordConfirm.message}</Error>\n          )}\n        </View>\n      </View>\n\n      <View css={{ gap: 3 }}>\n        <PrimaryButton disabled={formState.isSubmitting} type=\"submit\">\n          {intl.formatMessage({ id: \"Sign me up!\" })}\n        </PrimaryButton>\n\n        <View\n          css={{\n            alignItems: \"center\",\n          }}\n        >\n          <Similink onClick={() => setTab(\"signin\")}>\n            {intl.formatMessage({ id: \"I already have an account\" })}\n          </Similink>\n        </View>\n      </View>\n    </View>\n  )\n}\n\nconst SignInTab = ({ onSignIn, setTab }) => {\n  const intl = useIntl()\n\n  const { handleSubmit, register, setError, formState } = useForm()\n\n  const onSubmit = useCallback(\n    async ({ email, password }) => {\n      try {\n        const { user } = await firebase\n          .auth()\n          .signInWithEmailAndPassword(email, password)\n\n        const snapshot = await firebase\n          .firestore()\n          .collection(\"users\")\n          .doc(user.uid)\n          .get()\n\n        const userMetadata = snapshot.data()\n\n        onSignIn({\n          uid: user.uid,\n          ...userMetadata,\n          firebaseUser: user,\n        })\n      } catch (error) {\n        switch (error.code) {\n          case \"auth/invalid-email\":\n          case \"auth/user-not-found\":\n          case \"auth/user-disabled\":\n            setError(\"email\", {\n              type: \"invalid\",\n              message: intl.formatMessage({ id: \"Unknown email address\" }),\n            })\n            break\n          case \"auth/wrong-password\":\n            setError(\"password\", {\n              type: \"mismatch\",\n              message: intl.formatMessage({ id: \"Incorrect password\" }),\n            })\n            break\n\n          default:\n            return\n        }\n      }\n    },\n    [onSignIn, setError, intl]\n  )\n\n  return (\n    <View\n      as=\"form\"\n      name=\"signin\"\n      onSubmit={handleSubmit(onSubmit)}\n      css={{ gap: 4 }}\n    >\n      <View css={{ gap: 3 }}>\n        <View css={{ gap: 2 }}>\n          <label>{intl.formatMessage({ id: \"Email address\" })}</label>\n          <Input\n            type=\"email\"\n            {...register(\"email\", {\n              required: intl.formatMessage({ id: \"Email address is required\" }),\n            })}\n          ></Input>\n          {formState.errors.email && (\n            <Error>{formState.errors.email.message}</Error>\n          )}\n        </View>\n\n        <View css={{ gap: 2 }}>\n          <label>{intl.formatMessage({ id: \"Password\" })}</label>\n          <Input\n            type=\"password\"\n            {...register(\"password\", {\n              required: intl.formatMessage({ id: \"Password is required\" }),\n            })}\n          ></Input>\n          {formState.errors.password && (\n            <Error>{formState.errors.password.message}</Error>\n          )}\n          <Similink\n            css={{ alignSelf: \"flex-end\", fontSize: 2 }}\n            onClick={() => setTab(\"reset\")}\n          >\n            {intl.formatMessage({ id: \"Forgot password?\" })}\n          </Similink>\n        </View>\n      </View>\n\n      <View css={{ gap: 3 }}>\n        <PrimaryButton type=\"submit\" disabled={formState.isSubmitting}>\n          {intl.formatMessage({ id: \"Sign me in!\" })}\n        </PrimaryButton>\n\n        <View\n          css={{\n            alignItems: \"center\",\n          }}\n        >\n          <Similink onClick={() => setTab(\"signup\")}>\n            {intl.formatMessage({ id: \"I don't have an account\" })}\n          </Similink>\n        </View>\n      </View>\n    </View>\n  )\n}\n\nexport const LoginDialog = ({ deferred }) => {\n  const intl = useIntl()\n\n  const notify = useContext(NotifyContext)\n\n  const [tab, setTab] = useState(\"signup\")\n\n  const handleLogin = (currentUser) => {\n    deferred.resolve(currentUser)\n    notify(\n      intl.formatMessage(\n        { id: \"Logged in as {username}\" },\n        { username: currentUser.username }\n      )\n    )\n  }\n\n  return (\n    <Dialog\n      title={\n        tab === \"signup\" ? (\n          <Title>{intl.formatMessage({ id: \"Create your account\" })}</Title>\n        ) : tab === \"signin\" ? (\n          <Title>{intl.formatMessage({ id: \"Connect to your account\" })}</Title>\n        ) : (\n          <Title>{intl.formatMessage({ id: \"Reset your password\" })}</Title>\n        )\n      }\n      onClose={() => deferred.reject(DIALOG_CLOSED_REASON)}\n    >\n      {tab === \"signup\" ? (\n        <SignUpTab onSignUp={handleLogin} setTab={setTab}></SignUpTab>\n      ) : tab === \"signin\" ? (\n        <SignInTab onSignIn={handleLogin} setTab={setTab}></SignInTab>\n      ) : (\n        <ResetPasswordTab setTab={setTab} />\n      )}\n    </Dialog>\n  )\n}\n","import firebase from \"gatsby-plugin-firebase\"\nimport React, { useCallback, useContext, useMemo, useState } from \"react\"\nimport { useForm } from \"react-hook-form\"\nimport { FiStar } from \"react-icons/fi\"\nimport { FormattedMessage, useIntl } from \"react-intl\"\nimport { DIALOG_CLOSED_REASON } from \"../constants\"\nimport { GalleryContext } from \"../contexts/gallery\"\nimport { LanguageContext } from \"../contexts/language\"\nimport { NotifyContext } from \"../contexts/notify\"\nimport { TangramsContext } from \"../contexts/tangrams\"\nimport { UserContext } from \"../contexts/user\"\nimport { Badge } from \"./badge\"\nimport { DangerButton, PrimaryButton } from \"./button\"\nimport { Dialog } from \"./dialog\"\nimport { Input } from \"./input\"\nimport { Error, InlineIcon, Similink, Title } from \"./primitives\"\nimport { Text } from \"./text\"\nimport { View } from \"./view\"\n\nconst ChangeEmailForm = ({ currentUser, onClose }) => {\n  const intl = useIntl()\n\n  const { updateEmail } = useContext(UserContext)\n\n  const notify = useContext(NotifyContext)\n  const { handleSubmit, register, setError, formState } = useForm()\n\n  const onSubmit = useCallback(\n    async ({ password, newEmail }) => {\n      try {\n        await updateEmail(currentUser, password, newEmail)\n        notify(intl.formatMessage({ id: \"Email address updated successfuly\" }))\n        onClose()\n      } catch (error) {\n        switch (error.code) {\n          case \"auth/email-already-in-use\":\n            setError(\"newEmail\", {\n              type: \"alreadyExists\",\n              message: intl.formatMessage({\n                id: \"Email address already in use\",\n              }),\n            })\n            break\n          case \"auth/invalid-email\":\n            setError(\"newEmail\", {\n              type: \"invalid\",\n              message: intl.formatMessage({ id: \"Invalid email address\" }),\n            })\n            break\n          case \"auth/wrong-password\":\n            setError(\"password\", {\n              type: \"mismatch\",\n              message: intl.formatMessage({ id: \"Incorrect password\" }),\n            })\n            break\n          default:\n            notify(\n              intl.formatMessage({ id: \"An error occured, please retry later\" })\n            )\n            throw error\n        }\n      }\n    },\n    [currentUser, updateEmail, setError, onClose, notify, intl]\n  )\n\n  return (\n    <View\n      as=\"form\"\n      onSubmit={handleSubmit(onSubmit)}\n      css={{ flex: \"1\", gap: 4 }}\n    >\n      <View css={{ gap: 3, overflow: \"auto\", flex: \"1\" }}>\n        <View css={{ gap: 2 }}>\n          <label>{intl.formatMessage({ id: \"Password\" })}</label>\n          <Input\n            type=\"password\"\n            {...register(\"password\", {\n              required: intl.formatMessage({ id: \"Password is required\" }),\n            })}\n          ></Input>\n          {formState.errors.password && (\n            <Error>{formState.errors.password.message}</Error>\n          )}\n        </View>\n        <View css={{ gap: 2 }}>\n          <label>{intl.formatMessage({ id: \"New email address\" })}</label>\n          <Input\n            type=\"email\"\n            {...register(\"newEmail\", {\n              required: intl.formatMessage({ id: \"Email address is required\" }),\n            })}\n          ></Input>\n          {formState.errors.newEmail && (\n            <Error>{formState.errors.newEmail.message}</Error>\n          )}\n        </View>\n      </View>\n\n      <View css={{ gap: 3 }}>\n        <PrimaryButton disabled={formState.isSubmitting} type=\"submit\">\n          {intl.formatMessage({ id: \"Change email address\" })}\n        </PrimaryButton>\n\n        <View\n          css={{\n            alignItems: \"center\",\n          }}\n        >\n          <Similink onClick={onClose}>\n            {intl.formatMessage({ id: \"Back\" })}\n          </Similink>\n        </View>\n      </View>\n    </View>\n  )\n}\n\nconst ChangeUsernameForm = ({ currentUser, onClose }) => {\n  const intl = useIntl()\n\n  const { updateUsername } = useContext(UserContext)\n\n  const notify = useContext(NotifyContext)\n  const { handleSubmit, register, formState } = useForm()\n\n  const onSubmit = useCallback(\n    async ({ newUsername }) => {\n      try {\n        await updateUsername(currentUser, newUsername)\n        notify(intl.formatMessage({ id: \"Username updated successfuly\" }))\n        onClose()\n      } catch (error) {\n        notify(\n          intl.formatMessage({ id: \"An error occured, please retry later\" })\n        )\n        throw error\n      }\n    },\n    [currentUser, updateUsername, onClose, notify, intl]\n  )\n\n  return (\n    <View\n      as=\"form\"\n      onSubmit={handleSubmit(onSubmit)}\n      css={{ flex: \"1\", gap: 4 }}\n    >\n      <View css={{ gap: 3, overflow: \"auto\", flex: \"1\" }}>\n        <View css={{ gap: 2 }}>\n          <label>{intl.formatMessage({ id: \"New username\" })}</label>\n          <Input\n            type=\"text\"\n            {...register(\"newUsername\", {\n              required: intl.formatMessage({ id: \"Username is required\" }),\n            })}\n          ></Input>\n          {formState.errors.newUsername && (\n            <Error>{formState.errors.newUsername.message}</Error>\n          )}\n        </View>\n      </View>\n\n      <View css={{ gap: 3 }}>\n        <PrimaryButton disabled={formState.isSubmitting} type=\"submit\">\n          {intl.formatMessage({ id: \"Change username\" })}\n        </PrimaryButton>\n        <View\n          css={{\n            alignItems: \"center\",\n          }}\n        >\n          <Similink onClick={onClose}>\n            {intl.formatMessage({ id: \"Back\" })}\n          </Similink>\n        </View>\n      </View>\n    </View>\n  )\n}\n\nconst ChangePasswordForm = ({ currentUser, onClose }) => {\n  const intl = useIntl()\n\n  const { updateUsername } = useContext(UserContext)\n\n  const notify = useContext(NotifyContext)\n\n  const { handleSubmit, register, watch, setError, formState } = useForm()\n\n  const newPassword = watch(\"newPassword\")\n\n  const onSubmit = useCallback(\n    async ({ password, newPassword }) => {\n      try {\n        await updateUsername(currentUser, password, newPassword)\n        notify(intl.formatMessage({ id: \"Password changed successfuly\" }))\n        onClose()\n      } catch (error) {\n        switch (error.code) {\n          case \"auth/weak-password\":\n            setError(\"newPassword\", {\n              type: \"weakPassword\",\n              message: intl.formatMessage({ id: \"Password is too weak\" }),\n            })\n            break\n          case \"auth/wrong-password\":\n            setError(\"password\", {\n              type: \"mismatch\",\n              message: intl.formatMessage({ id: \"Incorrect password\" }),\n            })\n            break\n          default:\n            notify(\n              intl.formatMessage({ id: \"An error occured, please retry later\" })\n            )\n            return\n        }\n      }\n    },\n    [currentUser, updateUsername, onClose, setError, notify, intl]\n  )\n\n  return (\n    <View\n      as=\"form\"\n      onSubmit={handleSubmit(onSubmit)}\n      css={{ flex: \"1\", gap: 4 }}\n    >\n      <View css={{ gap: 3, overflow: \"auto\", flex: \"1\" }}>\n        <View css={{ gap: 2 }}>\n          <label>{intl.formatMessage({ id: \"Current password\" })}</label>\n          <Input\n            type=\"password\"\n            {...register(\"password\", {\n              required: intl.formatMessage({ id: \"Password is required\" }),\n            })}\n          ></Input>\n          {formState.errors.password && (\n            <Error>{formState.errors.password.message}</Error>\n          )}\n        </View>\n        <View css={{ gap: 2 }}>\n          <label>{intl.formatMessage({ id: \"New password\" })}</label>\n          <Input\n            type=\"password\"\n            autoComplete=\"new-password\"\n            {...register(\"newPassword\", {\n              required: intl.formatMessage({ id: \"Password is required\" }),\n            })}\n          ></Input>\n          {formState.errors.newPassword && (\n            <Error>{formState.errors.newPassword.message}</Error>\n          )}\n        </View>\n\n        <View css={{ gap: 2 }}>\n          <label>{intl.formatMessage({ id: \"Confirm new password\" })}</label>\n          <Input\n            type=\"password\"\n            {...register(\"newPasswordConfirm\", {\n              required: \"Password is required\",\n              validate: (newPasswordConfirm) =>\n                newPasswordConfirm === newPassword ||\n                intl.formatMessage({ id: \"Passwords must match\" }),\n            })}\n          ></Input>\n          {formState.errors.newPasswordConfirm && (\n            <Error>{formState.errors.newPasswordConfirm.message}</Error>\n          )}\n        </View>\n      </View>\n\n      <View css={{ gap: 3 }}>\n        <PrimaryButton disabled={formState.isSubmitting} type=\"submit\">\n          {intl.formatMessage({ id: \"Change password\" })}\n        </PrimaryButton>\n        <View\n          css={{\n            alignItems: \"center\",\n          }}\n        >\n          <Similink onClick={onClose}>\n            {intl.formatMessage({ id: \"Back\" })}\n          </Similink>\n        </View>\n      </View>\n    </View>\n  )\n}\nexport const ProfileDialog = ({ uid, deferred }) => {\n  const intl = useIntl()\n  const notify = useContext(NotifyContext)\n\n  const { language } = useContext(LanguageContext)\n  const { currentUser, usersMetadata } = useContext(UserContext)\n  const { username, signupDate } = usersMetadata[uid]\n  const [changeEmailRequested, setChangeEmailRequested] = useState(false)\n  const [changeUsernameRequested, setChangeUsernameRequested] = useState(false)\n  const [changePasswordRequested, setChangePasswordRequested] = useState(false)\n  const { approvedTangrams } = useContext(TangramsContext)\n  const { tangramsStarredBy, tangramsCompletedBy } = useContext(GalleryContext)\n\n  const { stars, completed, created } = useMemo(() => {\n    let stars = 0\n    let created = 0\n    let completed = 0\n    for (const tangram of approvedTangrams) {\n      if (tangram.uid === uid) {\n        created++\n        for (const starredByUid in tangramsStarredBy[tangram.id]) {\n          if (\n            starredByUid !== uid &&\n            tangramsStarredBy[tangram.id][starredByUid]\n          ) {\n            stars += 1\n          }\n        }\n      }\n      for (const completedByUid in tangramsCompletedBy[tangram.id]) {\n        if (completedByUid === uid) {\n          completed += 1\n        }\n      }\n    }\n    return {\n      stars,\n      completed,\n      created,\n    }\n  }, [approvedTangrams, tangramsCompletedBy, tangramsStarredBy, uid])\n\n  const handleLogout = async () => {\n    if (\n      window.confirm(\n        intl.formatMessage({ id: \"Are you sure you want to log out?\" })\n      )\n    ) {\n      await firebase.auth().signOut()\n      deferred.reject(DIALOG_CLOSED_REASON)\n      notify(intl.formatMessage({ id: \"Logged out\" }))\n    }\n  }\n\n  return (\n    <Dialog\n      onClose={() => deferred.reject(DIALOG_CLOSED_REASON)}\n      css={{\n        overflow: \"auto\",\n        pt: 4,\n        mt: -4,\n        gap: 3,\n      }}\n    >\n      {changeEmailRequested ? (\n        <ChangeEmailForm\n          currentUser={currentUser}\n          onClose={() => setChangeEmailRequested(false)}\n        ></ChangeEmailForm>\n      ) : changeUsernameRequested ? (\n        <ChangeUsernameForm\n          currentUser={currentUser}\n          onClose={() => setChangeUsernameRequested(false)}\n        ></ChangeUsernameForm>\n      ) : changePasswordRequested ? (\n        <ChangePasswordForm\n          currentUser={currentUser}\n          onClose={() => setChangePasswordRequested(false)}\n        />\n      ) : (\n        <View css={{ gap: 4, mt: -4 }}>\n          <View css={{ gap: 3, alignItems: \"center\" }}>\n            <Badge uid={uid} size=\"badgeBig\"></Badge>\n            <Title>{username}</Title>\n            <View css={{ gap: 2, fontSize: 2, alignItems: \"center\" }}>\n              {currentUser && uid === currentUser.uid && (\n                <Text>{currentUser.firebaseUser.email}</Text>\n              )}\n              <Text>\n                {intl.formatMessage(\n                  { id: \"Joined {signupDate}\" },\n                  {\n                    signupDate: new Intl.DateTimeFormat(language).format(\n                      signupDate\n                    ),\n                  }\n                )}\n              </Text>\n              <Text>\n                {intl.formatMessage(\n                  { id: \"Completed {completed}/{total} tangrams\" },\n                  {\n                    completed,\n                    total: approvedTangrams.length,\n                  }\n                )}\n              </Text>\n              <Text>\n                {intl.formatMessage(\n                  { id: \"Created {created} tangrams\" },\n                  {\n                    created,\n                  }\n                )}\n              </Text>\n              <Text>\n                <FormattedMessage\n                  id=\"Earned {stars}\"\n                  values={{\n                    stars,\n                    starIcon: () => (\n                      <InlineIcon\n                        icon={FiStar}\n                        css={{ fill: \"currentColor\" }}\n                      ></InlineIcon>\n                    ),\n                  }}\n                ></FormattedMessage>\n              </Text>\n            </View>\n          </View>\n          {currentUser && currentUser.uid === uid && (\n            <>\n              <View css={{ gap: 3, alignItems: \"center\" }}>\n                <Similink onClick={() => setChangeEmailRequested(true)}>\n                  {intl.formatMessage({ id: \"Change email address\" })}\n                </Similink>\n                <Similink onClick={() => setChangeUsernameRequested(true)}>\n                  {intl.formatMessage({ id: \"Change username\" })}\n                </Similink>\n                <Similink onClick={() => setChangePasswordRequested(true)}>\n                  {intl.formatMessage({ id: \"Change password\" })}\n                </Similink>\n              </View>\n\n              <DangerButton onClick={handleLogout}>\n                {intl.formatMessage({ id: \"Log out\" })}\n              </DangerButton>\n            </>\n          )}\n        </View>\n      )}\n    </Dialog>\n  )\n}\n","const EMOJIS = [\"💪\", \"🔥\", \"😱\", \"😎\", \"🎉\", \"🥇\", \"🚀\", \"👌\", \"👍\", \"😵\"]\n\nexport const getRandomEmoji = () => {\n  return EMOJIS[Math.floor(Math.random() * EMOJIS.length)]\n}\n","import firebase from \"gatsby-plugin-firebase\"\nimport React, { useContext, useEffect, useMemo, useState } from \"react\"\nimport { useForm } from \"react-hook-form\"\nimport { FiStar } from \"react-icons/fi\"\nimport { FormattedMessage, useIntl } from \"react-intl\"\nimport { CATEGORIES, DIALOG_CLOSED_REASON, DIGITS, LETTERS } from \"../constants\"\nimport { GalleryContext } from \"../contexts/gallery\"\nimport { NotifyContext } from \"../contexts/notify\"\nimport { UserContext } from \"../contexts/user\"\nimport { getRandomEmoji } from \"../utils/getRandomEmoji\"\nimport { recomputePathData } from \"../utils/recomputePathData\"\nimport { PrimaryButton } from \"./button\"\nimport { Card } from \"./card\"\nimport { Dialog } from \"./dialog\"\nimport { Input } from \"./input\"\nimport { Error, Hint, InlineIcon, Similink, Title } from \"./primitives\"\nimport { Text } from \"./text\"\nimport { View } from \"./view\"\n\nconst ReadTangramDialog = ({ tangram, deferred }) => {\n  const { tangramsStarredBy } = useContext(GalleryContext)\n\n  const stars = useMemo(() => {\n    let stars = 0\n    for (const starredByUid in tangramsStarredBy[tangram.id]) {\n      if (tangramsStarredBy[tangram.id][starredByUid]) {\n        stars += 1\n      }\n    }\n    return stars\n  }, [tangram, tangramsStarredBy])\n\n  return (\n    <Dialog\n      onClose={() => deferred.reject(DIALOG_CLOSED_REASON)}\n      css={{ gap: 3 }}\n    >\n      <View css={{ gap: 3, overflow: \"auto\", flex: \"1\", alignItems: \"center\" }}>\n        <Card selected tangram={tangram}></Card>\n        <Text css={{ fontSize: 2 }}>\n          <FormattedMessage\n            id=\"Earned {stars}\"\n            values={{\n              stars,\n              starIcon: () => (\n                <InlineIcon\n                  icon={FiStar}\n                  css={{ fill: \"currentColor\" }}\n                ></InlineIcon>\n              ),\n            }}\n          ></FormattedMessage>\n        </Text>\n      </View>\n    </Dialog>\n  )\n}\n\nconst SaveTangramDialog = ({ tangram, deferred }) => {\n  const intl = useIntl()\n  const notify = useContext(NotifyContext)\n  const { currentUser } = useContext(UserContext)\n  const [tangramCopy, setTangramCopy] = useState(() => ({ ...tangram }))\n  const { tangramsStarredBy } = useContext(GalleryContext)\n\n  const isCreation = currentUser && !tangram.id\n\n  const defaultValues = useMemo(\n    () => ({\n      path: tangram.path,\n      category: tangram.category,\n      emoji:\n        tangram.category !== \"digits\" && tangram.category !== \"letters\"\n          ? tangram.emoji\n          : getRandomEmoji(),\n      letterIndex:\n        tangram.category === \"letters\"\n          ? LETTERS.indexOf(tangram.emoji)\n          : undefined,\n      digitIndex:\n        tangram.category === \"digits\"\n          ? DIGITS.indexOf(tangram.emoji)\n          : undefined,\n    }),\n    [tangram]\n  )\n\n  const { handleSubmit, register, watch, setError, clearError, formState } =\n    useForm({\n      defaultValues,\n    })\n\n  const { path, category, emoji, letterIndex, digitIndex } = watch()\n\n  useEffect(() => {\n    try {\n      const pathData = recomputePathData(path)\n      setTangramCopy((prevTangramCopy) => ({\n        ...prevTangramCopy,\n        ...pathData,\n      }))\n      clearError(\"path\")\n    } catch (error) {\n      setError(\"path\", {\n        type: \"invalid\",\n        message: intl.formatMessage({ id: \"Invalid path\" }),\n      })\n    }\n  }, [path, setError, clearError, intl])\n\n  useEffect(() => {\n    const computedEmoji =\n      category === \"letters\"\n        ? LETTERS[letterIndex]\n        : category === \"digits\"\n        ? DIGITS[digitIndex]\n        : emoji\n        ? emoji\n        : getRandomEmoji()\n\n    setTangramCopy((prevTangramCopy) => ({\n      ...prevTangramCopy,\n      emoji: computedEmoji,\n    }))\n  }, [category, emoji, letterIndex, digitIndex])\n\n  useEffect(() => {\n    setTangramCopy((prevTangramCopy) => ({\n      ...prevTangramCopy,\n      category,\n    }))\n  }, [category])\n\n  const handleDelete = async () => {\n    if (\n      window.confirm(\n        intl.formatMessage({\n          id: \"Are you sure you want to delete this tangram?\",\n        })\n      )\n    ) {\n      await firebase.firestore().collection(\"tangrams\").doc(tangram.id).delete()\n      notify(intl.formatMessage({ id: \"Tangram deleted successfuly\" }))\n      deferred.resolve()\n    }\n  }\n\n  const onSubmit = async () => {\n    if (isCreation) {\n      await firebase\n        .firestore()\n        .collection(\"tangrams\")\n        .add({\n          ...tangramCopy,\n          uid: currentUser.uid,\n          approved: false,\n        })\n      notify(intl.formatMessage({ id: \"Tangram submitted for review\" }))\n    } else {\n      await firebase\n        .firestore()\n        .collection(\"tangrams\")\n        .doc(tangram.id)\n        .update(tangramCopy)\n      notify(intl.formatMessage({ id: \"Tangram modified successfuly\" }))\n    }\n\n    deferred.resolve()\n  }\n\n  const stars = useMemo(() => {\n    if (!tangram.approved) {\n      return 0\n    }\n\n    let stars = 0\n\n    for (const starredByUid in tangramsStarredBy[tangram.id]) {\n      if (tangramsStarredBy[tangram.id][starredByUid]) {\n        stars += 1\n      }\n    }\n    return stars\n  }, [tangram, tangramsStarredBy])\n\n  return (\n    <Dialog\n      title={\n        <Title>\n          {isCreation\n            ? intl.formatMessage({ id: \"Submit your tangram\" })\n            : intl.formatMessage({ id: \"Edit your tangram\" })}\n        </Title>\n      }\n      onClose={() => deferred.reject(DIALOG_CLOSED_REASON)}\n      as=\"form\"\n      onSubmit={handleSubmit(onSubmit)}\n      css={{ gap: 3 }}\n    >\n      <View css={{ gap: 3, overflow: \"auto\", flex: \"1\" }}>\n        <Card\n          showStroke={currentUser.isAdmin}\n          selected\n          completed\n          tangram={tangramCopy}\n          css={{ alignSelf: \"center\" }}\n        ></Card>\n\n        {tangram.approved && (\n          <Text css={{ alignSelf: \"center\", fontSize: 2 }}>\n            <FormattedMessage\n              id=\"Earned {stars}\"\n              values={{\n                stars,\n                starIcon: () => (\n                  <InlineIcon\n                    icon={FiStar}\n                    css={{ fill: \"currentColor\" }}\n                  ></InlineIcon>\n                ),\n              }}\n            ></FormattedMessage>\n          </Text>\n        )}\n\n        {isCreation && !currentUser.isAdmin && (\n          <Hint>\n            <FormattedMessage\n              id=\"A moderator will have to approve your tangram. It can be deleted or edited at any time.\"\n              values={{ br: () => <br /> }}\n            ></FormattedMessage>\n          </Hint>\n        )}\n\n        {currentUser && currentUser.isAdmin && (\n          <>\n            <View css={{ gap: 2 }}>\n              <label>{intl.formatMessage({ id: \"Path\" })}</label>\n              <Input as=\"textarea\" {...register(\"path\")}></Input>\n              {formState.errors.path && (\n                <Error>{formState.errors.path.message}</Error>\n              )}\n            </View>\n          </>\n        )}\n\n        <View css={{ gap: 2 }}>\n          <label>{intl.formatMessage({ id: \"Category\" })}</label>\n          <Input as=\"select\" {...register(\"category\")}>\n            {CATEGORIES.map((category) => (\n              <option key={category} value={category}>\n                {intl.formatMessage({ id: category })}\n              </option>\n            ))}\n          </Input>\n        </View>\n\n        {category === \"digits\" ? (\n          <View css={{ gap: 2 }}>\n            <label>{intl.formatMessage({ id: \"Victory emoji\" })}</label>\n            <Input as=\"select\" {...register(\"digitIndex\")}>\n              {DIGITS.map((digitEmoji, index) => (\n                <option key={index} value={index}>\n                  {digitEmoji}\n                </option>\n              ))}\n            </Input>\n          </View>\n        ) : category === \"letters\" ? (\n          <View css={{ gap: 2 }}>\n            <label>{intl.formatMessage({ id: \"Victory emoji\" })}</label>\n            <Input as=\"select\" {...register(\"letterIndex\")}>\n              {LETTERS.map((letterEmoji, index) => (\n                <option key={index} value={index}>\n                  {letterEmoji}\n                </option>\n              ))}\n            </Input>\n          </View>\n        ) : (\n          <View css={{ gap: 2 }}>\n            <label>{intl.formatMessage({ id: \"Victory emoji\" })}</label>\n            <Input {...register(\"emoji\")} />\n            <Hint>\n              {intl.formatMessage({ id: \"Leave empty for random emoji\" })}\n            </Hint>\n          </View>\n        )}\n      </View>\n      <PrimaryButton type=\"submit\">\n        {isCreation\n          ? intl.formatMessage({ id: \"Submit!\" })\n          : intl.formatMessage({ id: \"Edit!\" })}\n      </PrimaryButton>\n      {!isCreation && (\n        <View\n          css={{\n            alignItems: \"center\",\n          }}\n        >\n          <Similink onClick={handleDelete}>\n            {intl.formatMessage({ id: \"Or delete tangram\" })}\n          </Similink>\n        </View>\n      )}\n    </Dialog>\n  )\n}\n\nexport const TangramDialog = ({ tangram, deferred }) => {\n  const { currentUser } = useContext(UserContext)\n  const isEdit =\n    currentUser &&\n    (currentUser.isAdmin || !tangram.id || tangram.uid === currentUser.uid)\n\n  return isEdit ? (\n    <SaveTangramDialog tangram={tangram} deferred={deferred} />\n  ) : (\n    <ReadTangramDialog tangram={tangram} deferred={deferred} />\n  )\n}\n","import paper from \"paper/dist/paper-core\"\n\nexport const recomputePathData = (path) => {\n  const compoundPath = paper.project.importSVG(`<path d=\"${path}\" />`, {\n    applyMatrix: true,\n    insert: false,\n  })\n\n  const pathData = {\n    path: compoundPath.exportSVG().getAttribute(\"d\"),\n    edges: compoundPath.curves.length,\n    height: Math.round(compoundPath.bounds.height),\n    width: Math.round(compoundPath.bounds.width),\n    length: Math.round(compoundPath.length),\n  }\n\n  compoundPath.remove()\n\n  if (pathData.edges < 3 || pathData.edges > 23) {\n    throw new Error(\"Invalid path\")\n  }\n\n  return pathData\n}\n","export class Deferred {\n  constructor() {\n    this.promise = new Promise((resolve, reject) => {\n      this.resolve = resolve\n      this.reject = reject\n    })\n  }\n}\n","import React, {\n  useState,\n  useCallback,\n  useEffect,\n  useMemo,\n  createContext,\n  useContext,\n} from \"react\"\n\nexport const ShowBackgroundPatternContext = createContext([true, () => {}])\n\nexport const useShowBackgroundPattern = () =>\n  useContext(ShowBackgroundPatternContext)\n\nexport const ShowBackgroundPatternProvider = ({ children }) => {\n  const [showBackgroundPattern, setShowBackgroundPattern] = useState(true)\n\n  useEffect(() => {\n    const storedData = window.localStorage.getItem(\"showBackgroundPattern\")\n\n    if (storedData === null) {\n      setShowBackgroundPattern(true)\n      return\n    }\n\n    try {\n      const storedShowBackgroundPattern = JSON.parse(storedData)\n      setShowBackgroundPattern(!!JSON.parse(storedShowBackgroundPattern))\n    } catch (error) {\n      window.localStorage.removeItem(\"showBackgroundPattern\")\n    }\n  }, [])\n\n  const toggleShowBackgroundPattern = useCallback(() => {\n    const newShowBackgroundPattern = !showBackgroundPattern\n    setShowBackgroundPattern(newShowBackgroundPattern)\n    window.localStorage.setItem(\n      \"showBackgroundPattern\",\n      JSON.stringify(newShowBackgroundPattern)\n    )\n  }, [showBackgroundPattern])\n\n  const contextValue = useMemo(\n    () => [showBackgroundPattern, toggleShowBackgroundPattern],\n    [showBackgroundPattern, toggleShowBackgroundPattern]\n  )\n\n  return (\n    <ShowBackgroundPatternContext.Provider value={contextValue}>\n      {children}\n    </ShowBackgroundPatternContext.Provider>\n  )\n}\n","import { useSwitchTheme } from \"@css-system/gatsby-plugin-css-system\"\nimport React, {\n  createContext,\n  useCallback,\n  useContext,\n  useEffect,\n  useMemo,\n  useState,\n} from \"react\"\nimport {\n  FiAward,\n  FiGrid,\n  FiMenu,\n  FiSave,\n  FiSettings,\n  FiShare2,\n  FiUser,\n  FiStar,\n} from \"react-icons/fi\"\nimport { FormattedMessage, useIntl } from \"react-intl\"\nimport { PrimaryButton } from \"../components/button\"\nimport { Dialog } from \"../components/dialog\"\nimport { InlineIcon, Title } from \"../components/primitives\"\nimport { Text } from \"../components/text\"\nimport { View } from \"../components/view\"\nimport { DIALOG_CLOSED_REASON } from \"../constants\"\nimport { Deferred } from \"../utils/deferred\"\nimport { NotifyContext } from \"./notify\"\nimport { useShowBackgroundPattern } from \"./showBackgroundPattern\"\nimport { SoundContext } from \"./sound\"\nimport { TangramsContext } from \"./tangrams\"\nimport { UserContext } from \"./user\"\nimport { GalleryContext } from \"./gallery\"\n\nexport const TipsContext = createContext()\n\nconst TipDialog = ({\n  deferred,\n  tip: {\n    id,\n    title = (\n      <Title>\n        <FormattedMessage id=\"Random tip\" />\n      </Title>\n    ),\n    content,\n  },\n}) => {\n  const intl = useIntl()\n  const [hideTips, setHideTips] = useState(false)\n  return (\n    <Dialog\n      onClose={() => deferred.reject(DIALOG_CLOSED_REASON)}\n      title={title}\n      css={{ gap: 3 }}\n    >\n      {content}\n      <PrimaryButton onClick={() => deferred.resolve(hideTips)}>\n        {intl.formatMessage({ id: \"Got it!\" })}\n      </PrimaryButton>\n      {id !== \"welcome\" && (\n        <View\n          as=\"label\"\n          css={{\n            gap: 1,\n            flexDirection: \"row\",\n            cursor: \"pointer\",\n            alignItems: \"flex-end\",\n          }}\n        >\n          <input\n            type=\"checkbox\"\n            checked={hideTips}\n            onChange={() => setHideTips(!hideTips)}\n          ></input>\n          <Text as=\"small\">\n            {intl.formatMessage({ id: \"I don't want to see tips anymore\" })}\n          </Text>\n        </View>\n      )}\n    </Dialog>\n  )\n}\n\nconst iconValues = {\n  settingsIcon: <InlineIcon icon={FiSettings} />,\n  accountIcon: <InlineIcon icon={FiUser} />,\n  menuIcon: <InlineIcon icon={FiMenu} />,\n  galleryIcon: <InlineIcon icon={FiGrid} />,\n  shareIcon: <InlineIcon icon={FiShare2} />,\n  createIcon: <InlineIcon icon={FiSave} />,\n  leaderboardIcon: <InlineIcon icon={FiAward} />,\n  starIcon: <InlineIcon icon={FiStar} />,\n  br: () => <br />,\n}\n\nconst tips = [\n  {\n    id: \"particles\",\n    predicate: ({ particles }) => {\n      return particles\n    },\n    content: (\n      <Text css={{ textAlign: \"justify\" }}>\n        <FormattedMessage id=\"tips.particles\" values={iconValues} />\n      </Text>\n    ),\n  },\n  {\n    id: \"menu\",\n    content: (\n      <Text css={{ textAlign: \"justify\" }}>\n        <FormattedMessage id=\"tips.menu\" values={iconValues} />\n      </Text>\n    ),\n  },\n  {\n    id: \"gallery\",\n    content: (\n      <Text css={{ textAlign: \"justify\" }}>\n        <FormattedMessage id=\"tips.gallery\" values={iconValues} />\n      </Text>\n    ),\n  },\n  {\n    id: \"difficulty\",\n    predicate: ({ showBackgroundPattern }) => {\n      return showBackgroundPattern\n    },\n    content: (\n      <Text css={{ textAlign: \"justify\" }}>\n        <FormattedMessage id=\"tips.difficulty\" values={iconValues} />\n      </Text>\n    ),\n  },\n  {\n    id: \"theme\",\n    predicate: ({ themeKey }) => {\n      return themeKey !== \"dark\"\n    },\n    content: (\n      <Text css={{ textAlign: \"justify\" }}>\n        <FormattedMessage id=\"tips.theme\" values={iconValues} />\n      </Text>\n    ),\n  },\n  {\n    id: \"sound\",\n    predicate: ({ soundEnabled }) => {\n      return soundEnabled\n    },\n    content: (\n      <Text css={{ textAlign: \"justify\" }}>\n        <FormattedMessage id=\"tips.sound\" values={iconValues} />\n      </Text>\n    ),\n  },\n\n  {\n    id: \"account1\",\n    predicate: ({ currentUser }) => {\n      return !currentUser\n    },\n    content: (\n      <Text css={{ textAlign: \"justify\" }}>\n        <FormattedMessage id=\"tips.account1\" values={iconValues} />\n      </Text>\n    ),\n  },\n  {\n    id: \"account2\",\n    predicate: ({ currentUser }) => {\n      return !currentUser\n    },\n    content: (\n      <Text css={{ textAlign: \"justify\" }}>\n        <FormattedMessage id=\"tips.account2\" values={iconValues} />\n      </Text>\n    ),\n  },\n  {\n    id: \"stars\",\n    predicate: ({ currentUser }) => {\n      return currentUser\n    },\n    content: (\n      <Text css={{ textAlign: \"justify\" }}>\n        <FormattedMessage id=\"tips.stars\" values={iconValues} />\n      </Text>\n    ),\n  },\n  {\n    id: \"create\",\n    predicate: ({ currentUser, approvedTangrams, isTangramCompleted }) => {\n      if (currentUser) {\n        let completedTangrams = 0\n        for (const { id } of approvedTangrams) {\n          if (isTangramCompleted(id)) {\n            completedTangrams += 1\n            if (completedTangrams === 10) {\n              return true\n            }\n          }\n        }\n      }\n      return false\n    },\n    content: (\n      <Text css={{ textAlign: \"justify\" }}>\n        <FormattedMessage id=\"tips.create\" values={iconValues} />\n      </Text>\n    ),\n  },\n  {\n    id: \"share\",\n    content: (\n      <Text css={{ textAlign: \"justify\" }}>\n        <FormattedMessage id=\"tips.share\" values={iconValues} />\n      </Text>\n    ),\n  },\n  {\n    id: \"card\",\n    content: (\n      <Text css={{ textAlign: \"justify\" }}>\n        <FormattedMessage id=\"tips.card\" values={iconValues} />\n      </Text>\n    ),\n  },\n  {\n    id: \"leaderboard\",\n    content: (\n      <Text css={{ textAlign: \"justify\" }}>\n        <FormattedMessage id=\"tips.leaderboard\" values={iconValues} />\n      </Text>\n    ),\n  },\n]\n\nexport const TipsProvider = ({ children }) => {\n  const intl = useIntl()\n  const notify = useContext(NotifyContext)\n  const [tipDialogData, setTipDialogData] = useState(null)\n  const [tipsEnabled, setTipsEnabled] = useState(true)\n\n  const { soundEnabled } = useContext(SoundContext)\n  const [themeKey] = useSwitchTheme()\n  const [showBackgroundPattern] = useShowBackgroundPattern()\n  const { currentUser } = useContext(UserContext)\n  const { approvedTangrams } = useContext(TangramsContext)\n  const { isTangramCompleted } = useContext(GalleryContext)\n\n  useEffect(() => {\n    setTipsEnabled(window.localStorage.getItem(\"hideTips\") === null)\n  }, [])\n\n  useEffect(() => {\n    if (tipsEnabled) {\n      window.localStorage.removeItem(\"hideTips\")\n    } else {\n      window.localStorage.setItem(\"hideTips\", true)\n    }\n  }, [tipsEnabled])\n\n  const getSeenTips = () => {\n    let seenTipsIds = []\n    const data = localStorage.getItem(\"seenTips\")\n    if (data) {\n      try {\n        const parsedData = JSON.parse(data)\n        if (!Array.isArray(parsedData)) {\n          throw new Error(\"Invalid data for seenTips : \" + parsedData)\n        }\n        seenTipsIds = parsedData\n      } catch (error) {\n        localStorage.removeItem(\"seenTips\")\n      }\n    }\n    return seenTipsIds\n  }\n\n  const showTip = useCallback((tip) => {\n    const seenTipsId = getSeenTips()\n\n    const deferred = new Deferred()\n\n    setTipDialogData({ deferred, tip })\n\n    return deferred.promise\n      .then((hideTips) => {\n        if (hideTips) {\n          setTipsEnabled(false)\n        }\n      })\n      .finally(() => {\n        localStorage.setItem(\n          \"seenTips\",\n          JSON.stringify([...seenTipsId, tip.id])\n        )\n        setTipDialogData(null)\n      })\n  }, [])\n\n  const showWelcome = useCallback(() => {\n    if (!tipsEnabled) {\n      return\n    }\n\n    const seenTipsId = getSeenTips()\n\n    if (seenTipsId.includes(\"welcome\")) {\n      return\n    }\n\n    if (\n      !currentUser ||\n      !approvedTangrams.some((tangram) => isTangramCompleted(tangram.id))\n    ) {\n      showTip({\n        id: \"welcome\",\n        title: (\n          <Title>\n            <FormattedMessage id=\"Welcome to Amstangram\" values={iconValues} />\n          </Title>\n        ),\n        content: (\n          <Text css={{ textAlign: \"justify\" }}>\n            <FormattedMessage id=\"tips.welcome\" values={iconValues} />\n          </Text>\n        ),\n      })\n    }\n  }, [showTip, tipsEnabled, currentUser, approvedTangrams, isTangramCompleted])\n\n  const showRandomTip = useCallback(() => {\n    if (!tipsEnabled) {\n      return\n    }\n\n    const seenTipsId = getSeenTips()\n\n    const unseenTips = tips.filter(\n      ({ id, predicate = () => true }) =>\n        !seenTipsId.includes(id) &&\n        predicate({\n          themeKey,\n          showBackgroundPattern,\n          currentUser,\n          approvedTangrams,\n          isTangramCompleted,\n          soundEnabled,\n        })\n    )\n\n    if (!unseenTips.length) {\n      return\n    }\n\n    const tip = unseenTips[0]\n\n    showTip(tip)\n  }, [\n    showTip,\n    approvedTangrams,\n    isTangramCompleted,\n    themeKey,\n    currentUser,\n    showBackgroundPattern,\n    soundEnabled,\n    tipsEnabled,\n  ])\n\n  const toggleTips = useCallback(() => {\n    setTipsEnabled((prevTipsEnabled) => !prevTipsEnabled)\n  }, [])\n\n  const resetTips = useCallback(() => {\n    setTipsEnabled(true)\n    window.localStorage.removeItem(\"seenTips\")\n    notify(intl.formatMessage({ id: \"Tips reseted successfuly\" }))\n  }, [notify, intl])\n\n  const contextValue = useMemo(\n    () => ({\n      showRandomTip,\n      showWelcome,\n      tipsEnabled,\n      toggleTips,\n      resetTips,\n    }),\n    [showRandomTip, showWelcome, tipsEnabled, toggleTips, resetTips]\n  )\n\n  return (\n    <TipsContext.Provider value={contextValue}>\n      {children}\n      {tipDialogData && <TipDialog {...tipDialogData}></TipDialog>}\n    </TipsContext.Provider>\n  )\n}\n","import { ThemeContext } from \"css-system\"\nimport React, { useContext, useMemo } from \"react\"\nimport { SoundContext } from \"../contexts/sound\"\nimport { View } from \"./view\"\n\nconst SIZE = 20\n\nexport const Toggle = ({\n  leftComponent,\n  leftValue,\n  rightComponent,\n  rightValue,\n  value,\n  onChange,\n  invertSounds,\n}) => {\n  const { playToggle, soundEnabled } = useContext(SoundContext)\n\n  const theme = useContext(ThemeContext)\n\n  const selectedSide = useMemo(\n    () => (value === rightValue ? \"right\" : \"left\"),\n    [value, rightValue]\n  )\n\n  const play = () => {\n    if (invertSounds) {\n      if (!soundEnabled) {\n        playToggle({\n          forceSoundEnabled: true,\n        })\n      }\n    } else {\n      playToggle()\n    }\n  }\n\n  const toggleSelectedSide = () => {\n    const newSelectedSide = selectedSide === \"left\" ? \"right\" : \"left\"\n\n    onChange(newSelectedSide === \"right\" ? rightValue : leftValue)\n    play()\n  }\n\n  const handleSideClick = (newSelectedSide) => {\n    if (newSelectedSide === selectedSide) {\n      return\n    }\n\n    onChange(newSelectedSide === \"right\" ? rightValue : leftValue)\n    play()\n  }\n\n  return (\n    <View\n      css={{\n        flexDirection: \"row\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        gap: 3,\n      }}\n    >\n      <View\n        css={{ cursor: \"pointer\", flex: \"1\", alignItems: \"flex-end\" }}\n        onClick={() => handleSideClick(\"left\")}\n      >\n        {leftComponent}\n      </View>\n      <View\n        onClick={toggleSelectedSide}\n        css={{\n          cursor: \"pointer\",\n          position: \"relative\",\n          bg: \"inputBackground\",\n          width: `${2 * SIZE}px`,\n          height: `${SIZE}px`,\n          borderRadius: \"99999px\",\n        }}\n      >\n        <View\n          css={{\n            position: \"absolute\",\n            size: `${SIZE}px`,\n            borderRadius: \"99999px\",\n            bg: \"dialogText\",\n            boxShadow: `0 0 0 2px ${theme.colors.inputBackground}`,\n            transition: \"left 250ms ease-in-out\",\n          }}\n          style={{ left: selectedSide === \"left\" ? 0 : SIZE }}\n        ></View>\n      </View>\n      <View\n        css={{ cursor: \"pointer\", flex: \"1\", alignItems: \"flex-start\" }}\n        onClick={() => handleSideClick(\"right\")}\n      >\n        {rightComponent}\n      </View>\n    </View>\n  )\n}\n","import React, {\n  useState,\n  useCallback,\n  useEffect,\n  useMemo,\n  createContext,\n  useContext,\n} from \"react\"\n\nexport const ShowParticlesContext = createContext([true, () => {}])\n\nexport const useShowParticles = () =>\n  useContext(ShowParticlesContext)\n\nexport const ShowParticlesProvider = ({ children }) => {\n  const [showParticles, setShowParticles] = useState(true)\n\n  useEffect(() => {\n    const storedData = window.localStorage.getItem(\"showParticles\")\n\n    if (storedData === null) {\n      setShowParticles(true)\n      return\n    }\n\n    try {\n      const storedShowParticles = JSON.parse(storedData)\n      setShowParticles(!!JSON.parse(storedShowParticles))\n    } catch (error) {\n      window.localStorage.removeItem(\"showParticles\")\n    }\n  }, [])\n\n  const toggleShowParticles = useCallback(() => {\n    const newShowParticles = !showParticles\n    setShowParticles(newShowParticles)\n    window.localStorage.setItem(\n      \"showParticles\",\n      JSON.stringify(newShowParticles)\n    )\n  }, [showParticles])\n\n  const contextValue = useMemo(\n    () => [showParticles, toggleShowParticles],\n    [showParticles, toggleShowParticles]\n  )\n\n  return (\n    <ShowParticlesContext.Provider value={contextValue}>\n      {children}\n    </ShowParticlesContext.Provider>\n  )\n}\n","import { useSwitchTheme } from \"@css-system/gatsby-plugin-css-system\"\nimport React, { useContext } from \"react\"\nimport { FiMoon, FiSun, FiVolume2, FiVolumeX } from \"react-icons/fi\"\nimport { useIntl } from \"react-intl\"\nimport { DIALOG_CLOSED_REASON } from \"../constants\"\nimport { LanguageContext, supportedLanguages } from \"../contexts/language\"\nimport { useShowBackgroundPattern } from \"../contexts/showBackgroundPattern\"\nimport { SoundContext } from \"../contexts/sound\"\nimport { TipsContext } from \"../contexts/tips\"\nimport { SecondaryButton } from \"./button\"\nimport { Dialog } from \"./dialog\"\nimport { Input } from \"./input\"\nimport { Title } from \"./primitives\"\nimport { Text } from \"./text\"\nimport { Toggle } from \"./toggle\"\nimport { View } from \"./view\"\nimport { useShowParticles } from \"../contexts/showParticles\"\n\nexport const SettingsDialog = ({ deferred }) => {\n  const { soundEnabled, toggleSound } = useContext(SoundContext)\n  const { tipsEnabled, toggleTips, resetTips } = useContext(TipsContext)\n  const [\n    showBackgroundPattern,\n    toggleShowBackgroundPattern,\n  ] = useShowBackgroundPattern()\n  const [showParticles, toggleShowParticles] = useShowParticles()\n  const { language, setLanguage } = useContext(LanguageContext)\n  const intl = useIntl()\n\n  const [themeKey, switchTheme] = useSwitchTheme()\n\n  const handleLanguageChange = (event) => {\n    setLanguage(event.target.value)\n  }\n\n  return (\n    <Dialog\n      title={<Title>{intl.formatMessage({ id: \"Settings\" })}</Title>}\n      onClose={() => deferred.reject(DIALOG_CLOSED_REASON)}\n      css={{ gap: 4 }}\n    >\n      <View css={{ gap: 3 }}>\n        <View css={{ gap: 2 }}>\n          <label>{intl.formatMessage({ id: \"Language\" })}</label>\n          <Input as=\"select\" onChange={handleLanguageChange} value={language}>\n            {supportedLanguages.map((language) => (\n              <option key={language} value={language}>\n                {intl.formatMessage({ id: language })}\n              </option>\n            ))}\n          </Input>\n        </View>\n        <View css={{ gap: 2 }}>\n          <label>{intl.formatMessage({ id: \"Difficulty\" })}</label>\n          <Toggle\n            value={showBackgroundPattern}\n            onChange={toggleShowBackgroundPattern}\n            leftComponent={<Text>{intl.formatMessage({ id: \"Easy\" })}</Text>}\n            leftValue={true}\n            rightComponent={<Text>{intl.formatMessage({ id: \"Hard\" })}</Text>}\n            rightValue={false}\n          ></Toggle>\n        </View>\n        <View css={{ gap: 2 }}>\n          <label>{intl.formatMessage({ id: \"Theme\" })}</label>\n          <Toggle\n            value={themeKey}\n            onChange={switchTheme}\n            leftComponent={<View as={FiSun} css={{ size: \"icon\" }}></View>}\n            leftValue=\"light\"\n            rightComponent={<View as={FiMoon} css={{ size: \"icon\" }}></View>}\n            rightValue=\"dark\"\n          ></Toggle>\n        </View>\n        <View css={{ gap: 2 }}>\n          <label>{intl.formatMessage({ id: \"Sounds\" })}</label>\n          <Toggle\n            invertSounds\n            value={soundEnabled}\n            onChange={toggleSound}\n            leftComponent={<View as={FiVolumeX} css={{ size: \"icon\" }}></View>}\n            leftValue={false}\n            rightComponent={<View as={FiVolume2} css={{ size: \"icon\" }}></View>}\n            rightValue={true}\n          ></Toggle>\n        </View>\n        <View css={{ gap: 2 }}>\n          <label>{intl.formatMessage({ id: \"Show particles\" })}</label>\n          <Toggle\n            value={showParticles}\n            onChange={toggleShowParticles}\n            leftComponent={<Text>{intl.formatMessage({ id: \"Yes\" })}</Text>}\n            leftValue={true}\n            rightComponent={<Text>{intl.formatMessage({ id: \"No\" })}</Text>}\n            rightValue={false}\n          ></Toggle>\n        </View>\n        <View css={{ gap: 2 }}>\n          <label>{intl.formatMessage({ id: \"Show tips\" })}</label>\n          <Toggle\n            value={tipsEnabled}\n            onChange={toggleTips}\n            leftComponent={<Text>{intl.formatMessage({ id: \"Yes\" })}</Text>}\n            leftValue={true}\n            rightComponent={<Text>{intl.formatMessage({ id: \"No\" })}</Text>}\n            rightValue={false}\n          ></Toggle>\n        </View>\n      </View>\n      <SecondaryButton onClick={resetTips}>\n        {intl.formatMessage({ id: \"Reset tips\" })}\n      </SecondaryButton>\n    </Dialog>\n  )\n}\n","import React, {\n  createContext,\n  useCallback,\n  useContext,\n  useEffect,\n  useMemo,\n  useState,\n} from \"react\"\nimport { ChallengeDialog } from \"../components/challengeDialog\"\nimport { GalleryDialog } from \"../components/galleryDialog\"\nimport { LeaderboardDialog } from \"../components/leaderboardDialog\"\nimport { LoginDialog } from \"../components/loginDialog\"\nimport { ProfileDialog } from \"../components/profileDialog\"\nimport { TangramDialog } from \"../components/tangramDialog\"\nimport { Deferred } from \"../utils/deferred\"\nimport { GalleryContext } from \"./gallery\"\nimport { TangramsContext } from \"./tangrams\"\nimport { UserContext } from \"./user\"\nimport { SettingsDialog } from \"../components/settingsDialog\"\nimport { DIALOG_CLOSED_REASON } from \"../constants\"\n\nexport const DialogContext = createContext()\n\nexport const DialogProvider = ({ children }) => {\n  const { initialized: usersInitialized } = useContext(UserContext)\n\n  const {\n    playlist,\n    startRandomPlaylist,\n    initialized: galleryInitialized,\n  } = useContext(GalleryContext)\n\n  const { initialized: tangramsInitialized, approvedTangrams } =\n    useContext(TangramsContext)\n\n  const [initialized, setInitialized] = useState(false)\n\n  const [profileDialogData, setProfileDialogData] = useState(null)\n\n  const showProfile = useCallback(async (uid) => {\n    const deferred = new Deferred()\n    setProfileDialogData({ uid, deferred })\n    try {\n      await deferred.promise\n    } catch (error) {\n      if (error !== DIALOG_CLOSED_REASON) {\n        throw error\n      }\n    } finally {\n      setProfileDialogData(null)\n    }\n  }, [])\n\n  const [leaderboardDeferred, setLeaderboardDeferred] = useState(null)\n\n  const showLeaderboard = useCallback(async () => {\n    const deferred = new Deferred()\n    setLeaderboardDeferred(deferred)\n\n    try {\n      await deferred.promise\n    } catch (error) {\n      if (error !== DIALOG_CLOSED_REASON) {\n        throw error\n      }\n    } finally {\n      setLeaderboardDeferred(null)\n    }\n  }, [])\n\n  const [galleryDeferred, setGalleryDeferred] = useState(null)\n\n  const showGallery = useCallback(async () => {\n    const deferred = new Deferred()\n    setGalleryDeferred(deferred)\n\n    try {\n      await deferred.promise\n    } catch (error) {\n      if (error !== DIALOG_CLOSED_REASON) {\n        throw error\n      }\n    } finally {\n      setGalleryDeferred(null)\n    }\n  }, [])\n\n  const [loginDeferred, setLoginDeferred] = useState(null)\n\n  const showLogin = useCallback(async () => {\n    const deferred = new Deferred()\n    setLoginDeferred(deferred)\n    try {\n      await deferred.promise\n    } catch (error) {\n      if (error !== DIALOG_CLOSED_REASON) {\n        throw error\n      }\n    } finally {\n      setLoginDeferred(null)\n    }\n  }, [])\n\n  const [tangramDialogData, setTangramDialogData] = useState(null)\n\n  const showTangram = useCallback(async (tangram) => {\n    const deferred = new Deferred()\n    setTangramDialogData({ deferred, tangram })\n    try {\n      await deferred.promise\n    } catch (error) {\n      if (error !== DIALOG_CLOSED_REASON) {\n        throw error\n      }\n    } finally {\n      setTangramDialogData(null)\n    }\n  }, [])\n\n  const [settingsDialogDeferred, setSettingsDialogDeferred] = useState(null)\n\n  const showSettings = useCallback(async () => {\n    const deferred = new Deferred()\n\n    setSettingsDialogDeferred(deferred)\n\n    try {\n      await deferred.promise\n    } catch (error) {\n      if (error !== DIALOG_CLOSED_REASON) {\n        throw error\n      }\n    } finally {\n      setSettingsDialogDeferred(null)\n    }\n  }, [])\n\n  const [challengeDialogData, setChallengeDialogData] = useState(null)\n\n  useEffect(() => {\n    const checkForChallenge = async () => {\n      if (\n        tangramsInitialized &&\n        galleryInitialized &&\n        usersInitialized &&\n        !initialized\n      ) {\n        let hasBeenChallenged = false\n\n        if (!playlist && window.location.search) {\n          const searchParams = new URLSearchParams(window.location.search)\n\n          if (searchParams.has(\"tangrams\")) {\n            const tangramIds = searchParams.get(\"tangrams\").split(\",\")\n            const uid = searchParams.get(\"uid\")\n            const challengeTangrams = approvedTangrams.filter((tangram) =>\n              tangramIds.includes(tangram.id)\n            )\n            if (challengeTangrams.length) {\n              hasBeenChallenged = true\n              window.history.replaceState(\n                {},\n                document.title,\n                window.location.origin\n              )\n\n              const deferred = new Deferred()\n\n              setChallengeDialogData({\n                deferred,\n                tangrams: challengeTangrams,\n                uid,\n              })\n\n              try {\n                await deferred.promise\n                startRandomPlaylist(true)\n              } catch (error) {\n                if (error !== DIALOG_CLOSED_REASON) {\n                  throw error\n                }\n              } finally {\n                setChallengeDialogData(null)\n              }\n            }\n          }\n        }\n\n        if (!hasBeenChallenged) {\n          startRandomPlaylist(true)\n        }\n\n        setInitialized(true)\n      }\n    }\n\n    checkForChallenge()\n  }, [tangramsInitialized, galleryInitialized, usersInitialized, initialized])\n\n  const contextValue = useMemo(\n    () => ({\n      showProfile,\n      showLeaderboard,\n      showGallery,\n      showLogin,\n      showTangram,\n      showSettings,\n    }),\n    [\n      showProfile,\n      showLeaderboard,\n      showGallery,\n      showLogin,\n      showTangram,\n      showSettings,\n    ]\n  )\n\n  return (\n    <DialogContext.Provider value={contextValue}>\n      {children}\n      {loginDeferred && <LoginDialog deferred={loginDeferred}></LoginDialog>}\n      {galleryDeferred && (\n        <GalleryDialog deferred={galleryDeferred}></GalleryDialog>\n      )}\n      {tangramDialogData && (\n        <TangramDialog {...tangramDialogData}></TangramDialog>\n      )}\n      {profileDialogData && (\n        <ProfileDialog {...profileDialogData}></ProfileDialog>\n      )}\n      {leaderboardDeferred && (\n        <LeaderboardDialog deferred={leaderboardDeferred}></LeaderboardDialog>\n      )}\n      {challengeDialogData && (\n        <ChallengeDialog {...challengeDialogData}></ChallengeDialog>\n      )}\n      {settingsDialogDeferred && (\n        <SettingsDialog deferred={settingsDialogDeferred}></SettingsDialog>\n      )}\n    </DialogContext.Provider>\n  )\n}\n","import { useKeyframes } from \"css-system\"\nimport React, { useContext, useEffect, useState } from \"react\"\nimport {\n  FiAward,\n  FiGrid,\n  FiMenu,\n  FiSave,\n  FiSettings,\n  FiUser,\n} from \"react-icons/fi\"\nimport { useIntl } from \"react-intl\"\nimport {\n  DIALOG_CLOSED_REASON,\n  FADE_STAGGER_DURATION,\n  FADE_TRANSITION_DURATION,\n} from \"../constants\"\nimport { DialogContext } from \"../contexts/dialog\"\nimport { GalleryContext } from \"../contexts/gallery\"\nimport { SoundContext } from \"../contexts/sound\"\nimport { UserContext } from \"../contexts/user\"\nimport { Deferred } from \"../utils/deferred\"\nimport { Badge } from \"./badge\"\nimport { Dialog } from \"./dialog\"\nimport { Logo } from \"./logo\"\nimport { Hint, Link, Title } from \"./primitives\"\nimport { Text } from \"./text\"\nimport { View } from \"./view\"\n\nconst MenuItem = ({ action, icon, text }) => {\n  const { playButton } = useContext(SoundContext)\n  return (\n    <View\n      css={{\n        alignItems: \"center\",\n        flexDirection: \"row\",\n        gap: 3,\n        cursor: \"pointer\",\n        py: 3,\n      }}\n      onClick={() => {\n        playButton()\n        action()\n      }}\n    >\n      <View as={icon} css={{ size: \"icon\" }}></View>\n      <Text css={{ fontSize: 3 }}>{text}</Text>\n    </View>\n  )\n}\n\nexport const Menu = () => {\n  const { playlist, saveRequestId } = useContext(GalleryContext)\n  const { currentUser } = useContext(UserContext)\n  const { playButton } = useContext(SoundContext)\n  const intl = useIntl()\n\n  const { showLeaderboard, showGallery, showLogin, showProfile, showSettings } =\n    useContext(DialogContext)\n\n  const [menuDialogDeferred, setMenuDialogDeferred] = useState()\n\n  useEffect(() => {\n    menuDialogDeferred && menuDialogDeferred.reject(DIALOG_CLOSED_REASON)\n  }, [playlist, saveRequestId])\n\n  const { requestSave } = useContext(GalleryContext)\n\n  const handleMenuClick = async () => {\n    playButton()\n    const deferred = new Deferred()\n    setMenuDialogDeferred(deferred)\n    try {\n      await deferred.promise\n    } catch (error) {\n      if (error !== DIALOG_CLOSED_REASON) {\n        throw error\n      }\n    } finally {\n      setMenuDialogDeferred(null)\n    }\n  }\n\n  const gradient = useKeyframes({\n    0: { color: \"pieces.lt2\" },\n    14: { color: \"pieces.rh\" },\n    28: { color: \"pieces.st2\" },\n    42: { color: \"pieces.mt1\" },\n    57: { color: \"pieces.st1\" },\n    71: { color: \"pieces.lt1\" },\n    85: { color: \"pieces.sq\" },\n    100: { color: \"pieces.lt2\" },\n  })\n\n  const flightAnimation = useKeyframes({\n    from: { transform: \"translate(0, 0)\" },\n    to: {\n      transform: \"translate(30px, -30px)\",\n    },\n  })\n\n  return (\n    <>\n      <View\n        css={{\n          position: \"fixed\",\n          top: 3,\n          left: 3,\n          animation: `${gradient} 20s linear infinite both`,\n        }}\n      >\n        <View\n          as={FiMenu}\n          css={{\n            size: \"menu\",\n            cursor: \"pointer\",\n          }}\n          onClick={handleMenuClick}\n        ></View>\n      </View>\n\n      {menuDialogDeferred && (\n        <Dialog\n          onClose={() => menuDialogDeferred.reject(DIALOG_CLOSED_REASON)}\n          title={\n            <View css={{ flexDirection: \"row\", gap: 3, alignItems: \"center\" }}>\n              <Logo\n                css={{\n                  size: \"badge\",\n                  ml: \"-2px\",\n                  mr: \"-6px\",\n                  overflow: \"visible\",\n                  \"& > g\": {\n                    animation: `${flightAnimation} ${FADE_TRANSITION_DURATION}ms ${FADE_STAGGER_DURATION}ms ease both`,\n                  },\n                }}\n              />\n              <Title>{intl.formatMessage({ id: \"Amstangram\" })}</Title>\n            </View>\n          }\n          css={{ gap: 3, overflow: \"initial\" }}\n        >\n          <View>\n            {currentUser ? (\n              <MenuItem\n                action={() => showProfile(currentUser.uid)}\n                icon={() => (\n                  <Badge css={{ mx: -1 }} uid={currentUser.uid} size=\"badge\" />\n                )}\n                text={intl.formatMessage({ id: \"See my profile\" })}\n              ></MenuItem>\n            ) : (\n              <MenuItem\n                action={showLogin}\n                icon={FiUser}\n                text={intl.formatMessage({ id: \"Log in\" })}\n              ></MenuItem>\n            )}\n\n            <MenuItem\n              action={showGallery}\n              icon={FiGrid}\n              text={intl.formatMessage({ id: \"Tangram gallery\" })}\n            ></MenuItem>\n\n            <MenuItem\n              action={requestSave}\n              icon={FiSave}\n              text={intl.formatMessage({ id: \"Save tangram\" })}\n            ></MenuItem>\n\n            <MenuItem\n              action={showLeaderboard}\n              icon={FiAward}\n              text={intl.formatMessage({ id: \"Leaderboard\" })}\n            ></MenuItem>\n\n            <MenuItem\n              action={showSettings}\n              icon={FiSettings}\n              text={intl.formatMessage({ id: \"Settings\" })}\n            ></MenuItem>\n          </View>\n\n          <View\n            css={{\n              flexDirection: \"row\",\n              alignItems: \"baseline\",\n              justifyContent: \"space-between\",\n            }}\n          >\n            <Hint\n              as={Link}\n              href={`mailto:millagou.benjamin@gmail.com?subject=${intl.formatMessage(\n                { id: \"A word about Amstangram\" }\n              )}`}\n              target=\"_blank\"\n              rel=\"noopener, noreferrer\"\n            >\n              {intl.formatMessage({ id: \"Contact 💌\" })}\n            </Hint>\n            <Hint\n              as={Link}\n              href=\"https://github.com/myagoo/amstangram\"\n              target=\"_blank\"\n              rel=\"noopener, noreferrer\"\n            >\n              {intl.formatMessage(\n                { id: \"Version {code}\" },\n                { code: \"✨.🥸.♿\" }\n              )}\n            </Hint>\n          </View>\n        </Dialog>\n      )}\n    </>\n  )\n}\n","import paper from \"paper/dist/paper-core\"\n\nexport const getOffsettedPathPoints = (points, offset) => {\n  const offsetter = new window.ClipperLib.ClipperOffset()\n\n  const offsettedPathPoints = new window.ClipperLib.Paths()\n\n  offsetter.AddPaths(\n    [\n      points.map(({ x, y }) => ({\n        X: x,\n        Y: y,\n      })),\n    ],\n    window.ClipperLib.JoinType.jtMiter,\n    window.ClipperLib.EndType.etClosedPolygon\n  )\n\n  offsetter.MiterLimit = 0\n  offsetter.ArcTolerance = 0\n\n  offsetter.Execute(offsettedPathPoints, offset)\n\n  if (offsettedPathPoints.length) {\n    return offsettedPathPoints[0].map(({ X, Y }) => new paper.Point(X, Y))\n  }\n}\n","import paper from \"paper/dist/paper-core\"\nimport {\n  SMALL_TRIANGLE_BASE,\n  INSET_BORDER,\n  COLLISION_MARGIN,\n} from \"../constants\"\nimport { getOffsettedPathPoints } from \"./getOffsettedPathPoints\"\nimport { getTriangleCenter } from \"./getTriangleCenter\"\n\nconst createTriangle = (size, id) => {\n  const points = [\n    new paper.Point(0, 0),\n    new paper.Point(size * 2, 0),\n    new paper.Point(size, size),\n  ]\n\n  const displayShape = new paper.Path({\n    name: \"display\",\n    segments: points,\n    closed: true,\n  })\n\n  const collisionShape = new paper.Path({\n    name: \"collision\",\n    segments: getOffsettedPathPoints(points, -COLLISION_MARGIN),\n    closed: true,\n  })\n\n  const insetBorderShape = new paper.Path({\n    name: \"insetBorder\",\n    segments: getOffsettedPathPoints(points, -INSET_BORDER),\n    closed: true,\n    strokeWidth: INSET_BORDER,\n  })\n\n  const triangleCenter = getTriangleCenter(points)\n\n  const center = new paper.Point(\n    paper.view.center.x + triangleCenter.x - displayShape.bounds.width / 2,\n    paper.view.center.y + triangleCenter.y - displayShape.bounds.height / 2\n  )\n\n  const group = new paper.Group({\n    children: [displayShape, collisionShape, insetBorderShape],\n    position: paper.view.center,\n    pivot: center,\n    data: { id, collisions: new Set() },\n    applyMatrix: true,\n  })\n\n  return group\n}\n\nconst createRhombus = (size, id) => {\n  const points = [\n    new paper.Point(0, 0),\n    new paper.Point(size * 2, 0),\n    new paper.Point(size * 3, size),\n    new paper.Point(size, size),\n  ]\n\n  const displayShape = new paper.Path({\n    name: \"display\",\n    segments: points,\n    closed: true,\n  })\n\n  const collisionShape = new paper.Path({\n    name: \"collision\",\n    segments: getOffsettedPathPoints(points, -COLLISION_MARGIN),\n    closed: true,\n    strokeWidth: COLLISION_MARGIN,\n  })\n\n  const insetBorderShape = new paper.Path({\n    name: \"insetBorder\",\n    segments: getOffsettedPathPoints(points, -INSET_BORDER),\n    closed: true,\n    strokeWidth: INSET_BORDER,\n  })\n\n  const group = new paper.Group({\n    children: [displayShape, collisionShape, insetBorderShape],\n    position: paper.view.center,\n    data: { id, collisions: new Set() },\n    applyMatrix: true,\n  })\n\n  return group\n}\n\nconst createSquare = (size, id) => {\n  const displayShape = new paper.Path.Rectangle({\n    name: \"display\",\n    point: [0, 0],\n    size: [size, size],\n  })\n\n  const collisionShape = new paper.Path.Rectangle({\n    name: \"collision\",\n    point: [COLLISION_MARGIN, COLLISION_MARGIN],\n    size: [size - COLLISION_MARGIN * 2, size - COLLISION_MARGIN * 2],\n  })\n\n  const insetBorderShape = new paper.Path.Rectangle({\n    name: \"insetBorder\",\n    point: [INSET_BORDER, INSET_BORDER],\n    size: [size - INSET_BORDER * 2, size - INSET_BORDER * 2],\n    strokeWidth: INSET_BORDER,\n  })\n\n  const group = new paper.Group({\n    children: [displayShape, collisionShape, insetBorderShape],\n    position: paper.view.center,\n    data: { id, collisions: new Set() },\n    applyMatrix: true,\n    rotation: Math.round(Math.random() * 7) * 45,\n  })\n\n  return group\n}\n\nexport const createPiecesGroup = () => {\n  const smallBase = SMALL_TRIANGLE_BASE\n  const mediumBase = Math.sqrt(Math.pow(smallBase, 2) * 2)\n  const largeBase = Math.sqrt(Math.pow(mediumBase, 2) * 2)\n\n  return new paper.Group([\n    createTriangle(smallBase, \"st1\"),\n    createTriangle(smallBase, \"st2\"),\n    createTriangle(mediumBase, \"mt1\"),\n    createTriangle(largeBase, \"lt1\"),\n    createTriangle(largeBase, \"lt2\"),\n    createSquare(mediumBase, \"sq\"),\n    createRhombus(smallBase, \"rh\"),\n  ])\n}\n","import paper from \"paper/dist/paper-core\"\n\nexport const getTriangleCenter = points => {\n  const d1 = points[1].getDistance(points[2])\n  const d2 = points[0].getDistance(points[2])\n  const d3 = points[0].getDistance(points[1])\n\n  const perimeter = d1 + d2 + d3\n\n  const triangleCenterX =\n    (points[0].x * d1 + points[1].x * d2 + points[2].x * d3) / perimeter\n  const triangleCenterY =\n    (points[0].y * d1 + points[1].y * d2 + points[2].y * d3) / perimeter\n\n  return new paper.Point(triangleCenterX, triangleCenterY)\n}\n","import paper from \"paper/dist/paper-core\"\n\nexport const getPathData = (piecesGroup, scaleFactor) => {\n  let compoundPath\n\n  for (const pieceGroup of piecesGroup.children) {\n    const path = pieceGroup.children[\"display\"]\n\n    if (!compoundPath) {\n      compoundPath = path\n    } else {\n      compoundPath = compoundPath.unite(path, {\n        insert: false,\n      })\n    }\n  }\n\n  compoundPath.scale(1 / scaleFactor)\n\n  compoundPath.position = new paper.Point(\n    compoundPath.bounds.width / 2,\n    compoundPath.bounds.height / 2\n  )\n\n  const path = compoundPath.exportSVG().getAttribute(\"d\")\n  const edges = compoundPath.curves.length\n  const width = Math.round(compoundPath.bounds.width)\n  const height = Math.round(compoundPath.bounds.height)\n  const length = Math.round(compoundPath.length)\n\n  compoundPath.remove()\n\n  return {\n    width,\n    height,\n    length,\n    path,\n    edges,\n  }\n}\n","import paper from \"paper/dist/paper-core\"\n\nexport const getNearestPoint = (point, startPoint, endPoint) => {\n  const atob = { x: endPoint.x - startPoint.x, y: endPoint.y - startPoint.y }\n  const atop = { x: point.x - startPoint.x, y: point.y - startPoint.y }\n  const len = atob.x * atob.x + atob.y * atob.y\n  let dot = atop.x * atob.x + atop.y * atob.y\n  const t = Math.min(1, Math.max(0, dot / len))\n\n  dot =\n    (endPoint.x - startPoint.x) * (point.y - startPoint.y) -\n    (endPoint.y - startPoint.y) * (point.x - startPoint.x)\n\n  return new paper.Point(startPoint.x + atob.x * t, startPoint.y + atob.y * t)\n}\n","import paper from \"paper/dist/paper-core\"\nimport { getNearestPoint } from \"./getNearestPoint\"\n\nconst getPrimarySnap = (shape, otherShapes, snap) => {\n  for (const otherShape of otherShapes) {\n    for (const { point: otherPoint } of otherShape.segments) {\n      for (const { point: ghostPoint } of shape.segments) {\n        const distance = ghostPoint.getDistance(otherPoint)\n        if (distance < snap.distance) {\n          snap.distance = distance\n          snap.shape = otherShape\n          snap.vector = otherPoint.subtract(ghostPoint)\n        }\n      }\n    }\n  }\n\n  if (!snap.vector) {\n    for (const otherShape of otherShapes) {\n      for (const { point } of shape.segments) {\n        for (const {\n          point: startPoint,\n          next: { point: endPoint },\n        } of otherShape.segments) {\n          const nearestPoint = getNearestPoint(point, startPoint, endPoint)\n          const distance = nearestPoint.getDistance(point)\n          if (distance < snap.distance) {\n            snap.distance = distance\n            snap.vector = nearestPoint.subtract(point)\n            snap.shape = otherShape\n            snap.segment = [startPoint, endPoint]\n            snap.point = point\n          }\n        }\n      }\n\n      for (const { point: otherPoint } of otherShape.segments) {\n        for (const {\n          point: startPoint,\n          next: { point: endPoint },\n        } of shape.segments) {\n          const nearestPoint = getNearestPoint(otherPoint, startPoint, endPoint)\n          const distance = nearestPoint.getDistance(otherPoint)\n          if (distance < snap.distance) {\n            snap.distance = distance\n            snap.vector = otherPoint.subtract(nearestPoint)\n            snap.shape = shape\n            snap.segment = [startPoint, endPoint]\n          }\n        }\n      }\n    }\n  }\n\n  return snap\n}\n\nconst getSecondarySnap = (shape, otherShapes, snap) => {\n  if (snap.segment) {\n    let bestNewVectorLenth = snap.maxDistance\n    let bestNewVector\n\n    const [startPoint, endPoint] = snap.segment\n\n    const angle1 = Math.atan2(\n      endPoint.y - startPoint.y,\n      endPoint.x - startPoint.x\n    )\n    const angle2 = Math.atan2(\n      startPoint.y - endPoint.y,\n      startPoint.x - endPoint.x\n    )\n\n    for (const angle of [angle1, angle2]) {\n      for (const { point } of shape.segments) {\n        if (point === snap.point) {\n          //TODO snap.point should be an array of point when several points of the moved shape touch the snaped segment\n          continue\n        }\n        const startPoint = point.add(snap.vector)\n\n        const endPoint = new paper.Point(\n          startPoint.x + snap.maxDistance * Math.cos(angle),\n          startPoint.y + snap.maxDistance * Math.sin(angle)\n        )\n\n        const ray = new paper.Path.Line({\n          from: startPoint,\n          to: endPoint,\n          insert: false,\n        })\n\n        for (const otherShape of otherShapes) {\n          const intersections = ray.getIntersections(otherShape)\n\n          for (const { point: intersectionPoint } of intersections) {\n            const newVector = intersectionPoint\n              .subtract(startPoint)\n              .add(snap.vector)\n\n            if (\n              newVector.length < snap.maxDistance &&\n              newVector.length <= bestNewVectorLenth\n            ) {\n              bestNewVectorLenth = newVector.length\n              bestNewVector = newVector\n            }\n          }\n        }\n      }\n    }\n\n    if (bestNewVector) {\n      snap.vector = bestNewVector\n    }\n  }\n}\n\nexport const getSnapVector = (\n  maxDistance,\n  shape,\n  otherPrimaryShapes,\n  otherSecondaryShapes\n) => {\n  let snap = {\n    maxDistance,\n    distance: maxDistance,\n  }\n\n  getPrimarySnap(shape, otherPrimaryShapes, snap)\n\n  if (otherSecondaryShapes) {\n    getPrimarySnap(shape, otherSecondaryShapes, snap)\n  }\n\n  getSecondarySnap(\n    shape,\n    otherPrimaryShapes.filter((otherShape) => otherShape.shape !== snap.shape),\n    snap\n  )\n\n  if (otherSecondaryShapes) {\n    getSecondarySnap(shape, otherSecondaryShapes, snap)\n  }\n\n  return snap.vector\n}\n","export const isTangramValid = piecesGroup => {\n  for (const pieceGroup of piecesGroup.children) {\n    if (pieceGroup.data.collisions.size > 0) {\n      return false\n    }\n  }\n\n  return true\n}\n","import paper from \"paper/dist/paper-core\"\n\nexport const restrictGroupWithinCanvas = (group, canvas) => {\n  const correctionVector = group.pivot\n    ? group.pivot.subtract(group.bounds.center)\n    : new paper.Point()\n\n  if (group.bounds.x < 0) {\n    group.position.x = group.bounds.width / 2 + correctionVector.x\n  }\n  if (group.bounds.y < 0) {\n    group.position.y = group.bounds.height / 2 + correctionVector.y\n  }\n\n  if (\n    group.bounds.x + group.bounds.width >\n    canvas.width / window.devicePixelRatio\n  ) {\n    group.position.x =\n      canvas.width / window.devicePixelRatio -\n      group.bounds.width / 2 +\n      correctionVector.x\n  }\n\n  if (\n    group.bounds.y + group.bounds.height >\n    canvas.height / window.devicePixelRatio\n  ) {\n    group.position.y =\n      canvas.height / window.devicePixelRatio -\n      group.bounds.height / 2 +\n      correctionVector.y\n  }\n}\n","import paper from \"paper/dist/paper-core\"\nimport { SCRAMBLE_PADDING } from \"../constants\"\n\nexport const scrambleGroup = (group, canvas) => {\n  const maxPoint = new paper.Point(\n    paper.project.view.bounds.width,\n    paper.project.view.bounds.height\n  ).subtract(SCRAMBLE_PADDING * 2)\n\n  group.position = paper.Point.random()\n    .multiply(maxPoint)\n    .add(SCRAMBLE_PADDING)\n\n  if (group.data.id === \"rh\") {\n    const rotation = Math.round(Math.random() * 3) * 45\n    group.rotation = rotation\n    group.data.rotation = rotation\n  } else {\n    group.rotation = Math.round(Math.random() * 7) * 45\n  }\n}\n","export const doesPathContainsPath = (pathA, pathB) => {\n  return pathB.segments.every(segment => pathA.contains(segment.point))\n}\n","import { OVERLAPING_OPACITY } from \"../constants\"\nimport { doesPathContainsPath } from \"./doesPathContainsPath\"\n\nexport const updateColisionState = (pieceGroup, piecesGroup) => {\n  for (const otherPieceGroup of piecesGroup.children) {\n    if (otherPieceGroup === pieceGroup) {\n      continue\n    }\n\n    const pieceCollisionShape = pieceGroup.children[\"collision\"]\n    const otherPieceCollisionShape = otherPieceGroup.children[\"collision\"]\n    if (\n      pieceCollisionShape.intersects(otherPieceCollisionShape) ||\n      doesPathContainsPath(pieceCollisionShape, otherPieceCollisionShape) ||\n      doesPathContainsPath(otherPieceCollisionShape, pieceCollisionShape)\n    ) {\n      pieceGroup.data.collisions.add(otherPieceGroup.data.id)\n      otherPieceGroup.data.collisions.add(pieceGroup.data.id)\n    } else {\n      pieceGroup.data.collisions.delete(otherPieceGroup.data.id)\n      otherPieceGroup.data.collisions.delete(pieceGroup.data.id)\n    }\n  }\n\n  let isTangramValid = true\n\n  for (const otherPieceGroup of piecesGroup.children) {\n    if (otherPieceGroup.data.collisions.size > 0) {\n      isTangramValid = false\n      otherPieceGroup.children[\"display\"].opacity = OVERLAPING_OPACITY\n    } else {\n      otherPieceGroup.children[\"display\"].opacity = 1\n    }\n  }\n\n  return isTangramValid\n}\n","import { useKeyframes } from \"css-system\"\nimport React, { useContext, useState, useMemo } from \"react\"\nimport { FiCheck, FiPlay, FiX, FiStar } from \"react-icons/fi\"\nimport { useIntl } from \"react-intl\"\nimport { PrimaryButton } from \"../components/button\"\nimport { View } from \"../components/view\"\nimport { FADE_TRANSITION_DURATION } from \"../constants\"\nimport { SoundContext } from \"../contexts/sound\"\nimport { Text } from \"./text\"\nimport { GalleryContext } from \"../contexts/gallery\"\n\nexport const Victory = ({\n  tangram,\n  onStop,\n  onNext,\n  onApprove,\n  onStarToggle,\n}) => {\n  const intl = useIntl()\n  const [emojiSpinEnded, setEmojiSpinEnded] = useState(false)\n  const { playStar } = useContext(SoundContext)\n  const { tangramsStarredBy, isTangramStarred } = useContext(GalleryContext)\n\n  const stars = useMemo(() => {\n    let stars = 0\n    for (const starredByUid in tangramsStarredBy[tangram.id]) {\n      if (tangramsStarredBy[tangram.id][starredByUid]) {\n        stars += 1\n      }\n    }\n    return stars\n  }, [tangram, tangramsStarredBy])\n\n  const starred = isTangramStarred(tangram.id)\n\n  const emojiSpin = useKeyframes({\n    0: {\n      opacity: \"0\",\n      transform: \"rotate(0) scale(0)\",\n    },\n    100: {\n      opacity: 1,\n      transform: `rotate(${360 * 5}deg) scale(1)`,\n    },\n  })\n\n  const handleEmojiSpinAnimationEnd = () => {\n    setTimeout(() => setEmojiSpinEnded(true), 1000)\n  }\n\n  return (\n    <View\n      css={{\n        position: \"absolute\",\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        gap: 3,\n      }}\n    >\n      <View\n        css={{\n          position: \"relative\",\n        }}\n      >\n        <View\n          key=\"emojiSpin\"\n          onAnimationEnd={handleEmojiSpinAnimationEnd}\n          css={{\n            textShadow: \"0px 5px 10px #00000080\",\n            fontSize: \"30vmin\",\n            animation: `2000ms ${emojiSpin} cubic-bezier(.6,1.56,.58,.92) forwards`,\n          }}\n        >\n          {tangram.emoji}\n        </View>\n        {emojiSpinEnded && (\n          <View\n            css={{\n              mt: 3,\n              position: \"absolute\",\n              top: \"100%\",\n              left: \"50%\",\n              transform: \"translateX(-50%)\",\n              flexDirection: \"row\",\n              gap: 3,\n              animation: `${FADE_TRANSITION_DURATION}ms fadeIn ease both`,\n            }}\n          >\n            {onApprove && (\n              <View\n                as={PrimaryButton}\n                onClick={onApprove}\n                css={{\n                  boxShadow: \"0px 5px 10px #00000080\",\n                  flexDirection: \"row\",\n                  gap: 2,\n                  alignItems: \"flex-end\",\n                }}\n              >\n                <View as={FiCheck} css={{ size: \"icon\" }}></View>\n                <Text>{intl.formatMessage({ id: \"Approve\" })}</Text>\n              </View>\n            )}\n            {onStarToggle && (\n              <View\n                as={PrimaryButton}\n                mute\n                onClick={() => {\n                  playStar()\n                  onStarToggle()\n                }}\n                css={{\n                  boxShadow: \"0px 5px 10px #00000080\",\n                  flexDirection: \"row\",\n                  gap: 2,\n                  alignItems: \"flex-end\",\n                }}\n              >\n                <Text>{stars}</Text>\n                <View\n                  as={FiStar}\n                  css={{\n                    size: \"icon\",\n                    fill: starred ? \"currentColor\" : undefined,\n                  }}\n                  deps={[starred]}\n                ></View>\n              </View>\n            )}\n            {onNext ? (\n              <View\n                as={PrimaryButton}\n                onClick={onNext}\n                css={{\n                  boxShadow: \"0px 5px 10px #00000080\",\n                  flexDirection: \"row\",\n                  gap: 2,\n                  alignItems: \"flex-end\",\n                }}\n              >\n                <View as={FiPlay} css={{ size: \"icon\" }}></View>\n                <Text>{intl.formatMessage({ id: \"Next\" })}</Text>\n              </View>\n            ) : (\n              <View\n                as={PrimaryButton}\n                onClick={onStop}\n                css={{\n                  boxShadow: \"0px 5px 10px #00000080\",\n                  flexDirection: \"row\",\n                  gap: 2,\n                  alignItems: \"flex-end\",\n                }}\n              >\n                <View as={FiX} css={{ size: \"icon\" }}></View>\n                <Text>{intl.formatMessage({ id: \"Quit\" })}</Text>\n              </View>\n            )}\n          </View>\n        )}\n      </View>\n    </View>\n  )\n}\n","import { ThemeContext } from \"css-system\"\nimport firebase from \"gatsby-plugin-firebase\"\nimport paper from \"paper/dist/paper-core\"\nimport React, {\n  useContext,\n  useEffect,\n  useLayoutEffect,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\"\nimport { useIntl } from \"react-intl\"\nimport { View } from \"../components/view\"\nimport {\n  CLICK_TIMEOUT,\n  FADE_TRANSITION_DURATION,\n  SNAP_DISTANCE,\n  SOFT_ERROR_MARGIN,\n  STRICT_ERROR_MARGIN,\n  VICTORY_PARTICLES_DURATION,\n  PARTICLES_COUNT,\n  MIN_PARTICLE_OPACITY,\n  MIN_PARTICLE_SIZE,\n  MAX_PARTICLE_SIZE,\n  MAX_PARTICLE_OPACITY,\n} from \"../constants\"\nimport { DialogContext } from \"../contexts/dialog\"\nimport { GalleryContext } from \"../contexts/gallery\"\nimport { NotifyContext } from \"../contexts/notify\"\nimport { useShowBackgroundPattern } from \"../contexts/showBackgroundPattern\"\nimport { SoundContext } from \"../contexts/sound\"\nimport { TipsContext } from \"../contexts/tips\"\nimport { UserContext } from \"../contexts/user\"\nimport { createPiecesGroup } from \"../utils/createPiecesGroup\"\nimport { getPathData } from \"../utils/getPathData\"\nimport { getSnapVector } from \"../utils/getSnapVector\"\nimport { isTangramComplete } from \"../utils/isTangramComplete\"\nimport { isTangramValid } from \"../utils/isTangramValid\"\nimport { restrictGroupWithinCanvas } from \"../utils/restrictGroupWithinCanvas\"\nimport { scrambleGroup } from \"../utils/scrambleGroup\"\nimport { updateColisionState } from \"../utils/updateColisionState\"\nimport { Card } from \"./card\"\nimport { Victory } from \"./victory\"\nimport { useShowParticles } from \"../contexts/showParticles\"\n\nexport const Tangram = () => {\n  const intl = useIntl()\n  const { showRandomTip, showWelcome } = useContext(TipsContext)\n\n  const { showLogin, showTangram } = useContext(DialogContext)\n  const { playTangram, playVictory } = useContext(SoundContext)\n  const playRef = useRef()\n  playRef.current = {\n    tangram: playTangram,\n    victory: playVictory,\n  }\n\n  const { currentUser } = useContext(UserContext)\n  const currentUserRef = useRef()\n  currentUserRef.current = currentUser\n  const theme = useContext(ThemeContext)\n  const notify = useContext(NotifyContext)\n  const [showBackgroundPattern] = useShowBackgroundPattern()\n  const [showParticles] = useShowParticles()\n  const {\n    saveRequestId,\n    playlist,\n    setPlaylist,\n    markTangramAsComplete,\n    toggleTangramStar,\n  } = useContext(GalleryContext)\n\n  const markTangramAsCompleteRef = useRef()\n  markTangramAsCompleteRef.current = markTangramAsComplete\n\n  const [currentTangramIndex, setCurrentTangramIndex] = useState(0)\n  const [victoryPhase, setVictoryPhase] = useState(false)\n\n  const canvasRef = useRef()\n  const scaleFactorRef = useRef()\n  const piecesGroupRef = useRef()\n  const particlesRef = useRef()\n  const coumpoundPathRef = useRef()\n  const showBackgroundPatternRef = useRef()\n  const showParticlesRef = useRef()\n\n  const selectedTangram = useMemo(() => {\n    return playlist && playlist[currentTangramIndex]\n  }, [playlist, currentTangramIndex])\n\n  const handleNext = () => {\n    setVictoryPhase(false)\n    setCurrentTangramIndex(currentTangramIndex + 1)\n    showRandomTip()\n  }\n\n  const handleStop = () => {\n    setVictoryPhase(false)\n    setPlaylist(null)\n    showRandomTip()\n  }\n\n  const handleApprove = async () => {\n    await firebase\n      .firestore()\n      .collection(\"tangrams\")\n      .doc(selectedTangram.id)\n      .update({ approved: true })\n\n    notify(intl.formatMessage({ id: \"Tangram approved\" }))\n  }\n\n  useEffect(() => {\n    setCurrentTangramIndex(0)\n  }, [playlist])\n\n  // Handle save tangram request\n  useEffect(() => {\n    if (saveRequestId) {\n      if (!isTangramValid(piecesGroupRef.current)) {\n        notify(intl.formatMessage({ id: \"You can't save an invalid tangram\" }))\n        return\n      }\n\n      const pathData = getPathData(\n        piecesGroupRef.current,\n        scaleFactorRef.current\n      )\n\n      if (pathData.edges === 23) {\n        notify(\n          intl.formatMessage({ id: \"You can't save such an easy tangram\" })\n        )\n        return\n      }\n\n      const asyncTask = async () => {\n        if (!currentUser) {\n          await showLogin()\n        }\n        await showTangram(pathData)\n      }\n\n      asyncTask()\n    }\n  }, [saveRequestId])\n\n  // Handle window resize\n  useEffect(() => {\n    const handleResize = () => {\n      if (canvasRef.current && piecesGroupRef.current) {\n        for (const pieceGroup of piecesGroupRef.current.children) {\n          // It seems that some android devices resize browser when switching activities\n          restrictGroupWithinCanvas(pieceGroup, canvasRef.current)\n        }\n      }\n    }\n\n    window.addEventListener(\"resize\", handleResize)\n    return () => window.removeEventListener(\"resize\", handleResize)\n  }, [])\n\n  // Init a game\n  useLayoutEffect(() => {\n    const start = Date.now()\n    const attachPieceGroupEvents = (pieceGroup) => {\n      let anchorPoint = null\n      let ghostGroup = null\n      let mouseDownTimestamp = null\n      let mouseDownPoint = null\n\n      const handleMouseEnter = (mdEvent) => {\n        if (document.activeElement === canvasRef.current) {\n          document.body.style.cursor = \"pointer\"\n        }\n      }\n\n      const handleMouseLeave = (mdEvent) => {\n        document.body.style.cursor = \"default\"\n      }\n\n      const handleMouseDown = (mdEvent) => {\n        mouseDownTimestamp = Date.now()\n        mouseDownPoint = mdEvent.point\n\n        anchorPoint = mdEvent.point.subtract(pieceGroup.position)\n\n        ghostGroup = pieceGroup.clone({ insert: false, deep: true })\n\n        pieceGroup.bringToFront()\n      }\n\n      const handleMouseDrag = (mdEvent) => {\n        document.body.style.cursor = \"move\"\n\n        const newAnchorPoint = mdEvent.point.subtract(pieceGroup.position)\n\n        const vector = newAnchorPoint.subtract(anchorPoint)\n\n        ghostGroup.position = pieceGroup.position.add(vector)\n\n        const ghostShape = ghostGroup.children[\"display 1\"]\n\n        const otherShapes = piecesGroupRef.current.children\n          .filter((otherGroup) => otherGroup !== pieceGroup)\n          .map(({ children }) => children[\"display\"])\n\n        const coumpoundShapes =\n          showBackgroundPatternRef.current && coumpoundPathRef.current\n            ? coumpoundPathRef.current.children\n              ? coumpoundPathRef.current.children\n              : [coumpoundPathRef.current]\n            : null\n\n        const snapVector = getSnapVector(\n          SNAP_DISTANCE,\n          ghostShape,\n          otherShapes,\n          coumpoundShapes\n        )\n\n        if (snapVector) {\n          ghostGroup.position.x += snapVector.x\n          ghostGroup.position.y += snapVector.y\n        }\n\n        restrictGroupWithinCanvas(ghostGroup, canvasRef.current)\n\n        pieceGroup.position = ghostGroup.position\n\n        updateColisionState(pieceGroup, piecesGroupRef.current)\n      }\n\n      const handleMouseUp = (muEvent) => {\n        document.body.style.cursor = \"pointer\"\n\n        if (\n          muEvent.point.subtract(mouseDownPoint).length < SNAP_DISTANCE &&\n          Date.now() - mouseDownTimestamp < CLICK_TIMEOUT\n        ) {\n          pieceGroup.rotation += 45\n          if (pieceGroup.data.id === \"rh\") {\n            pieceGroup.data.rotation += 45\n            if (pieceGroup.data.rotation === 180) {\n              pieceGroup.data.rotation = 0\n              pieceGroup.scale(-1, 1) // Horizontal flip\n            }\n          }\n          playRef.current.tangram()\n\n          restrictGroupWithinCanvas(pieceGroup, canvasRef.current)\n\n          updateColisionState(pieceGroup, piecesGroupRef.current)\n\n          mouseDownTimestamp = null\n          mouseDownPoint = null\n        }\n\n        anchorPoint = null\n        ghostGroup && ghostGroup.remove()\n        ghostGroup = null\n\n        if (!coumpoundPathRef.current) {\n          return\n        }\n\n        if (showBackgroundPatternRef.current === false) {\n          coumpoundPathRef.current.position = piecesGroupRef.current.position\n        }\n\n        if (\n          isTangramComplete(\n            coumpoundPathRef.current,\n            piecesGroupRef.current,\n            showBackgroundPatternRef.current\n              ? STRICT_ERROR_MARGIN\n              : SOFT_ERROR_MARGIN\n          )\n        ) {\n          markTangramAsCompleteRef.current(selectedTangram, Date.now() - start)\n\n          for (const pieceGroup of piecesGroupRef.current.children) {\n            pieceGroup.data.removeListeners()\n          }\n          document.body.style.cursor = \"default\"\n\n          if (!showParticlesRef.current) {\n            playRef.current.victory()\n            setVictoryPhase(true)\n            return\n          }\n\n          paper.project.activeLayer.tween(\n            {\n              opacity: 0,\n            },\n            {\n              duration: VICTORY_PARTICLES_DURATION,\n              easing: \"easeInCubic\",\n            }\n          )\n\n          for (const particle of particlesRef.current) {\n            particle.data.animation.stop()\n\n            particle.tween(\n              {\n                \"position.x\": piecesGroupRef.current.position.x,\n                \"position.y\": piecesGroupRef.current.position.y,\n                opacity: MAX_PARTICLE_OPACITY,\n              },\n              {\n                duration: VICTORY_PARTICLES_DURATION,\n                easing: \"easeInCubic\",\n              }\n            )\n          }\n          setTimeout(() => {\n            playRef.current.victory()\n            paper.project.activeLayer.tween(\n              {\n                opacity: 1,\n              },\n              {\n                duration: FADE_TRANSITION_DURATION,\n                easing: \"easeOutCubic\",\n              }\n            )\n\n            const maxDistance =\n              Math.max(paper.view.bounds.width, paper.view.bounds.height) / 2\n\n            for (const particle of particlesRef.current) {\n              particle.data.animation.stop()\n\n              const angle = Math.random() * Math.PI * 2\n              const distance = Math.random() * maxDistance\n              particle.tween(\n                {\n                  \"position.x\":\n                    particle.position.x + distance * Math.cos(angle),\n                  \"position.y\":\n                    particle.position.y + distance * Math.sin(angle),\n                  opacity: 0,\n                },\n                {\n                  duration: VICTORY_PARTICLES_DURATION,\n                  easing: \"easeOutCubic\",\n                }\n              )\n            }\n            setVictoryPhase(true)\n          }, VICTORY_PARTICLES_DURATION)\n        }\n      }\n\n      pieceGroup.on({\n        mouseenter: handleMouseEnter,\n        mouseleave: handleMouseLeave,\n        mousedown: handleMouseDown,\n        mousedrag: handleMouseDrag,\n        mouseup: handleMouseUp,\n      })\n\n      pieceGroup.data.removeListeners = () =>\n        pieceGroup.off({\n          mouseenter: handleMouseEnter,\n          mouseleave: handleMouseLeave,\n          mousedown: handleMouseDown,\n          mousedrag: handleMouseDrag,\n          mouseup: handleMouseUp,\n        })\n    }\n\n    const init = () => {\n      paper.setup(canvasRef.current)\n\n      piecesGroupRef.current = createPiecesGroup()\n\n      if (selectedTangram) {\n        coumpoundPathRef.current = paper.project.importSVG(\n          `<path d=\"${selectedTangram.path}\" />`,\n          {\n            applyMatrix: true,\n          }\n        )\n\n        coumpoundPathRef.current.sendToBack()\n        coumpoundPathRef.current.fillRule = \"evenodd\"\n\n        coumpoundPathRef.current.closed = true\n      }\n\n      const outerBounds = paper.project.view.bounds\n      const innerBounds = coumpoundPathRef.current\n        ? coumpoundPathRef.current.bounds\n        : piecesGroupRef.current.children[3].bounds.scale(2)\n\n      if (outerBounds.width > outerBounds.height) {\n        scaleFactorRef.current = Math.min(\n          2,\n          Math.min(outerBounds.width * 0.6, 700) / innerBounds.width,\n          Math.min(outerBounds.height * 0.8, 600) / innerBounds.height\n        )\n      } else {\n        scaleFactorRef.current = Math.min(\n          2,\n          Math.min(outerBounds.width * 0.8, 600) / innerBounds.width,\n          Math.min(outerBounds.height * 0.6, 700) / innerBounds.height\n        )\n      }\n\n      if (coumpoundPathRef.current) {\n        coumpoundPathRef.current.scale(scaleFactorRef.current)\n        coumpoundPathRef.current.position = paper.view.center\n      }\n\n      for (const pieceGroup of piecesGroupRef.current.children) {\n        pieceGroup.scale(scaleFactorRef.current)\n        scrambleGroup(pieceGroup, canvasRef.current)\n        attachPieceGroupEvents(pieceGroup)\n        restrictGroupWithinCanvas(pieceGroup, canvasRef.current)\n        updateColisionState(pieceGroup, piecesGroupRef.current)\n      }\n    }\n\n    init()\n\n    return () => {\n      paper.project.remove()\n      particlesRef.current = null\n      piecesGroupRef.current = null\n      coumpoundPathRef.current = null\n    }\n  }, [selectedTangram])\n\n  useLayoutEffect(() => {\n    showBackgroundPatternRef.current = showBackgroundPattern\n    if (!coumpoundPathRef.current) {\n      return\n    }\n\n    if (showBackgroundPattern) {\n      coumpoundPathRef.current.fillColor = theme.colors.shape\n      coumpoundPathRef.current.position = paper.view.center\n    } else {\n      coumpoundPathRef.current.fillColor = \"transparent\"\n    }\n  }, [selectedTangram, showBackgroundPattern, theme])\n\n  useLayoutEffect(() => {\n    showParticlesRef.current = showParticles\n\n    if(!showParticles){\n      return\n    }\n    const particleGroup = new paper.Group()\n\n    particleGroup.sendToBack()\n\n    const maxPoint = new paper.Point(\n      canvasRef.current.width,\n      canvasRef.current.height\n    ).divide(window.devicePixelRatio)\n\n    const getRandomRadius = () =>\n      Math.random() * (MAX_PARTICLE_SIZE - MIN_PARTICLE_SIZE) +\n      MIN_PARTICLE_SIZE\n\n    const getRandomOpacity = () =>\n      Math.random() * (MAX_PARTICLE_OPACITY - MIN_PARTICLE_OPACITY) +\n      MIN_PARTICLE_OPACITY\n\n    particlesRef.current = new Array(PARTICLES_COUNT)\n\n    for (let i = 0; i < PARTICLES_COUNT; i++) {\n      const particle = new paper.Path.Circle({\n        center: paper.Point.random().multiply(maxPoint),\n        radius: getRandomRadius(),\n        opacity: getRandomOpacity(),\n        parent: particleGroup,\n        data: { index: i },\n      })\n\n      const randomize = () => {\n        const values = {\n          radius: getRandomRadius(),\n          opacity: getRandomOpacity(),\n          \"position.x\": Math.min(\n            canvasRef.current.width / window.devicePixelRatio,\n            Math.max(0, particle.position.x + Math.random() * 200 - 100)\n          ),\n          \"position.y\": Math.min(\n            canvasRef.current.height / window.devicePixelRatio,\n            Math.max(0, particle.position.y + Math.random() * 200 - 100)\n          ),\n        }\n\n        particle.data.animation = particle\n          .tween(values, {\n            duration: Math.random() * 10000 + 5000,\n            easing: \"easeInOutQuad\",\n          })\n          .then(randomize)\n      }\n\n      randomize()\n\n      particlesRef.current[i] = particle\n\n    }\n    return () => {\n      particleGroup.remove()\n      particlesRef.current = null\n    }\n  }, [selectedTangram, showParticles])\n\n  useLayoutEffect(() => {\n    for (const pieceGroup of piecesGroupRef.current.children) {\n      pieceGroup.children[\"display\"].fillColor =\n        theme.colors.pieces[pieceGroup.data.id]\n      pieceGroup.children[\"insetBorder\"].strokeColor =\n        theme.colors.pieces[pieceGroup.data.id]\n    }\n\n    const pieceColors = Object.values(theme.colors.pieces)\n\n    if(!showParticles){\n      return\n    }\n\n    for (const particle of particlesRef.current) {\n      particle.fillColor =\n        pieceColors[Math.floor(Math.random() * pieceColors.length)]\n    }\n  }, [theme.colors, selectedTangram, showParticles])\n\n  useEffect(() => {\n    showWelcome()\n  }, [])\n\n  return (\n    <View\n      css={{\n        flex: \"1\",\n        position: \"relative\",\n        color: \"dialogText\",\n        animation: `${FADE_TRANSITION_DURATION}ms fadeIn ease`,\n      }}\n    >\n      {selectedTangram && showBackgroundPattern === false && (\n        <View\n          css={{\n            zIndex: -1,\n            position: \"absolute\",\n            top: 3,\n            right: 3,\n            cursor: \"pointer\",\n          }}\n        >\n          <Card tangram={selectedTangram} selected hideBadge></Card>\n        </View>\n      )}\n      <View\n        as=\"canvas\"\n        ref={canvasRef}\n        css={{\n          minHeight: \"auto\",\n          flex: 1,\n        }}\n      />\n\n      {selectedTangram && victoryPhase && (\n        <Victory\n          tangram={selectedTangram}\n          onStop={handleStop}\n          onNext={\n            currentTangramIndex < playlist.length - 1 ? handleNext : undefined\n          }\n          onApprove={\n            currentUser && currentUser.isAdmin && !selectedTangram.approved\n              ? handleApprove\n              : undefined\n          }\n          onStarToggle={\n            currentUser && selectedTangram.approved\n              ? () => toggleTangramStar(selectedTangram)\n              : undefined\n          }\n        />\n      )}\n    </View>\n  )\n}\n","import paper from \"paper/dist/paper-core\"\nimport { getOffsettedPathPoints } from \"./getOffsettedPathPoints\"\n\nexport const isTangramComplete = (coumpoundPath, piecesGroup, errorMargin) => {\n  let newCoumpoundPath = coumpoundPath\n\n  for (const pieceGroup of piecesGroup.children) {\n    if (pieceGroup.data.collisions.size > 0) {\n      return\n    }\n    newCoumpoundPath = newCoumpoundPath.unite(\n      new paper.Path({\n        segments: getOffsettedPathPoints(\n          pieceGroup.children[\"display\"].segments.map(({ point }) => point),\n          -errorMargin\n        ),\n        closed: true,\n        insert: false,\n      }),\n\n      {\n        insert: false,\n      }\n    )\n  }\n\n  return (\n    Math.round(newCoumpoundPath.length * 1000) ===\n    Math.round(coumpoundPath.length * 1000)\n  )\n}\n","import React, { useContext, useEffect, useState } from \"react\"\nimport { useIntl } from \"react-intl\"\nimport { Logo } from \"../components/logo\"\nimport { View } from \"../components/view\"\nimport { FADE_STAGGER_DURATION, FADE_TRANSITION_DURATION } from \"../constants\"\nimport { GalleryContext } from \"../contexts/gallery\"\nimport { NotifyContext } from \"../contexts/notify\"\nimport { TangramsContext } from \"../contexts/tangrams\"\nimport { UserContext } from \"../contexts/user\"\nimport { Menu } from \"./menu\"\nimport { Title } from \"./primitives\"\nimport { Tangram } from \"./tangram\"\n\nexport const App = () => {\n  const intl = useIntl()\n  const notify = useContext(NotifyContext)\n  const [waited, setWaited] = useState(false)\n  const [showLoader, setShowLoader] = useState(false)\n  const [showLoaderTimeout, setShowLoaderTimeout] = useState(false)\n  const [initialized, setInitialized] = useState(false)\n  const { initialized: tangramsInitialized } = useContext(TangramsContext)\n  const { playlist, initialized: galleryInitialized } = useContext(\n    GalleryContext\n  )\n  const { currentUser, initialized: usersInitialized } = useContext(UserContext)\n\n  const isEverythingInitialized =\n    usersInitialized && tangramsInitialized && galleryInitialized && playlist\n\n  useEffect(() => {\n    setTimeout(() => setWaited(true), FADE_TRANSITION_DURATION * 2)\n\n    setShowLoaderTimeout(\n      setTimeout(() => setShowLoader(true), FADE_TRANSITION_DURATION * 2)\n    )\n  }, [])\n\n  useEffect(() => {\n    if (isEverythingInitialized) {\n      clearTimeout(showLoaderTimeout)\n      setShowLoader(false)\n    }\n  }, [isEverythingInitialized])\n\n  if (initialized) {\n    return (\n      <>\n        <Tangram></Tangram>\n        <Menu></Menu>\n      </>\n    )\n  }\n\n  const handleAnimationEnd = () => {\n    setInitialized(true)\n    if (currentUser) {\n      notify(\n        intl.formatMessage(\n          { id: \"Logged in as {username}\" },\n          {\n            username: currentUser.username,\n          }\n        )\n      )\n    }\n  }\n\n  return (\n    <View\n      css={{\n        flex: \"1\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        gap: 3,\n        animation:\n          isEverythingInitialized && waited\n            ? `${FADE_TRANSITION_DURATION}ms fadeIn ease ${FADE_STAGGER_DURATION}ms reverse`\n            : undefined,\n      }}\n      deps={[isEverythingInitialized, waited]}\n      onAnimationEnd={(event) => {\n        if (event.currentTarget === event.target) {\n          handleAnimationEnd()\n        }\n      }}\n    >\n      <View\n        css={{\n          animation: `${FADE_TRANSITION_DURATION}ms fadeIn ease ${FADE_STAGGER_DURATION}ms both`,\n        }}\n      >\n        <Logo\n          css={{\n            size: \"logo\",\n            overflow: \"visible\",\n            \"& > g\": {\n              transition: `all ${FADE_TRANSITION_DURATION}ms ease`,\n              transform:\n                isEverythingInitialized && waited\n                  ? \"translate(30px, -30px)\"\n                  : \"translate(0, 0)\",\n            },\n          }}\n          deps={[isEverythingInitialized, waited]}\n        />\n      </View>\n\n      <Title\n        css={{\n          transition: `opacity ${FADE_TRANSITION_DURATION}ms ease`,\n          opacity: showLoader ? 1 : 0,\n        }}\n        deps={[showLoader]}\n      >\n        {intl.formatMessage({ id: \"Loading...\" })}\n      </Title>\n    </View>\n  )\n}\n","import { useGlobalCss } from \"css-system\"\nimport React, { useEffect } from \"react\"\nimport { App } from \"../components/app\"\nimport { COLOR_TRANSITION_DURATION } from \"../constants\"\nimport { GalleryProvider } from \"../contexts/gallery\"\nimport { LanguageProvider } from \"../contexts/language\"\nimport { NotifyProvider } from \"../contexts/notify\"\nimport { ShowBackgroundPatternProvider } from \"../contexts/showBackgroundPattern\"\nimport { SoundProvider } from \"../contexts/sound\"\nimport { TangramsProvider } from \"../contexts/tangrams\"\nimport { UserProvider } from \"../contexts/user\"\nimport { DialogProvider } from \"../contexts/dialog\"\nimport { TipsProvider } from \"../contexts/tips\"\nimport { View } from \"../components/view\"\nimport { ShowParticlesProvider } from \"../contexts/showParticles\"\n\nconst IndexPage = () => {\n  useEffect(() => {\n    window.oncontextmenu = function () {\n      return false\n    }\n  }, [])\n  useGlobalCss({\n    body: {\n      m: 0,\n      bg: \"background\",\n      fontFamily: `-apple-system, BlinkMacSystemFont, \"Segoe UI\", \"Roboto\",\n        \"Oxygen\", \"Ubuntu\", \"Cantarell\", \"Fira Sans\", \"Droid Sans\",\n        \"Helvetica Neue\", sans-serif`,\n      \"-webkit-font-smoothing\": \"antialiased\",\n      \"-moz-osx-font-smoothing\": \"grayscale\",\n      transition: `background-color ${COLOR_TRANSITION_DURATION}ms`,\n    },\n    \"body, html, #___gatsby, #gatsby-focus-wrapper\": {\n      height: \"100%\",\n    },\n    \"#gatsby-focus-wrapper\": {\n      display: \"flex\",\n      flexDirection: \"column\",\n      padding: `\n        env(safe-area-inset-top, 0)\n        env(safe-area-inset-right, 0)\n        env(safe-area-inset-bottom, 0)\n        env(safe-area-inset-left, 0)\n      `,\n    },\n    \"*\": {\n      boxSizing: \"border-box\",\n      userSelect: \"none\",\n      \"-moz-user-select\": \"none\",\n      \"-khtml-user-select\": \"none\",\n      \"-webkit-user-select\": \"none\",\n      \"-webkit-tap-highlight-color\": \"rgba(0,0,0,0)\",\n    },\n    \"input, textarea\": {\n      \"-webkit-user-select\": \"initial\",\n      \"-moz-user-select\": \"initial\",\n      \"-ms-user-select\": \"initial\",\n      userSelect: \"initial\",\n    },\n  })\n\n  return (\n    <SoundProvider>\n      <LanguageProvider>\n        <NotifyProvider>\n          <UserProvider>\n            <TangramsProvider>\n              <ShowBackgroundPatternProvider>\n                <ShowParticlesProvider>\n                  <GalleryProvider>\n                    <TipsProvider>\n                      <DialogProvider>\n                        <View\n                          css={{\n                            flex: \"1\",\n                            color: \"dialogText\",\n                            fontSize: 3,\n                          }}\n                        >\n                          <App></App>\n                        </View>\n                      </DialogProvider>\n                    </TipsProvider>\n                  </GalleryProvider>\n                </ShowParticlesProvider>\n              </ShowBackgroundPatternProvider>\n            </TangramsProvider>\n          </UserProvider>\n        </NotifyProvider>\n      </LanguageProvider>\n    </SoundProvider>\n  )\n}\nexport default IndexPage","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n"],"names":["module","exports","ex","firebase","registerVersion","DefaultContext","color","undefined","size","className","style","attr","IconContext","__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","this","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","Tree2Element","tree","map","node","tag","key","child","GenIcon","data","props","IconBase","elem","conf","title","svgProps","computedSize","stroke","fill","strokeWidth","height","width","xmlns","children","Consumer","useIntl","intl","_objectWithoutPropertiesLoose","source","excluded","target","sourceKeys","keys","View","createPrimitive","css","useGap","display","minWidth","minHeight","flex","alignSelf","alignItems","flexDirection","justifyContent","Logo","theme","useContext","ThemeContext","as","viewBox","colors","shape","points","pieces","mt1","st1","lt2","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","self","args","err","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","Notification","extendPrimitive","fontSize","borderRadius","bg","animation","FADE_TRANSITION_DURATION","boxShadow","NotifyContext","createContext","NotifyProvider","notificationRef","useRef","useState","notificationData","setNotificationData","notify","useCallback","content","prevNotificationData","clearTimeout","timeoutId","setTimeout","Provider","createPortal","position","top","left","bottom","right","pointerEvents","ref","document","getElementById","UserContext","UserProvider","currentUser","setCurrentUser","usersMetadata","setUsersMetadata","initialized","setInitialized","useEffect","unsubscribe","onAuthStateChanged","user","collection","doc","uid","get","snapshot","userMetadata","firebaseUser","onSnapshot","querySnapshot","docs","metadata","id","updateUsername","username","updateProfile","displayName","update","updatePassword","password","newPassword","credential","email","reauthenticateWithCredential","updateEmail","newEmail","contextValue","useMemo","TangramsContext","TangramsProvider","allTangrams","setAllTangrams","collectionSnapshot","newAllTangrams","tangram","push","approvedTangrams","pendingTangrams","approvedTangramsByCategory","newApprovedTangrams","newPendingTangrams","approved","isAdmin","GalleryContext","GalleryProvider","tangramsCompletedBy","setTangramsCompletedBy","tangramsStarredBy","setTangramsLikedBy","playlist","setPlaylist","saveRequestId","setSaveRequestId","newTangramsCompletedBy","newTangramsStarredBy","tangramId","tangramStats","userId","completed","starred","isTangramStarred","isTangramCompleted","shareTangrams","tangrams","str","el","challengeLink","window","location","origin","join","createElement","body","appendChild","select","execCommand","removeChild","formatMessage","requestSave","prevRequestId","startRandomPlaylist","sortDifficulty","sortFn","idA","edgesA","edges","idB","edgesB","isTangramACompleted","isTangramBCompleted","randomPlaylist","array","temporaryValue","randomIndex","currentIndex","Math","floor","random","shuffle","sort","markTangramAsComplete","completionTime","some","approvedTangram","set","merge","toggleTangramStar","_extends","src","_ref","callback","_ref2","_ref2$volume","volume","_ref2$playbackRate","playbackRate","_ref2$soundEnabled","soundEnabled","_ref2$interrupt","interrupt","onload","delegated","HowlConstructor","isMounted","_React$useState","duration","setDuration","_React$useState2","sound","setSound","handleLoad","current","mod","_mod$Howl","Howl","Array","isArray","rate","JSON","stringify","play","options","forceSoundEnabled","stop","pause","SoundContext","SoundProvider","setSoundEnabled","playStar","useSound","starSound","playButton","buttonSound","playToggle","playCard","cardSound","playTangram","tangramSound","playVictory","victorySound","localStorage","getItem","toggleSound","newSoundsEnabled","setItem","BaseButton","onClick","mute","fontWeight","border","background","cursor","opacity","outline","SecondaryButton","DangerButton","PrimaryButton","gradient","useKeyframes","Badge","backgroundColor","pieceColors","values","charCodeAt","slice","encodeURIComponent","m","dialogText","Card","ms","setData","handleStart","handleMove","handleEnd","showStroke","selected","onBadgeClick","onLongPress","hideBadge","path","emoji","difficulty","getTangramDifficulty","difficulties","handleLongPress","longPressHandlers","onMouseDown","event","touches","startEvent","item","clientX","clientY","onMouseUp","onMouseMove","moveEvent","sqrt","pow","onMouseLeave","onTouchStart","onTouchEnd","onTouchMove","transition","COLOR_TRANSITION_DURATION","textAlign","deps","dangerouslySetInnerHTML","__html","stopPropagation","Dialog","onClose","big","gap","maxWidth","zIndex","FiX","ml","overflow","Text","Error","Hint","Title","SubTitle","Link","textDecoration","Similink","InlineIcon","icon","ChallengeDialog","deferred","DIALOG_CLOSED_REASON","flexWrap","FormattedMessage","_a","textComponent","description","defaultMessage","_b","tagName","Component","nodes","ignoreTag","MemoizedFormattedMessage","prevProps","nextProps","otherProps","nextValues","nextOtherProps","sortTangrams","tangramA","tangramB","sortDigitsTangrams","DIGITS","sortLettersTangrams","LETTERS","Input","type","borderColor","FadedView","dialogBackground","GalleryDialog","DialogContext","showProfile","showTangram","selectedTangrams","setSelectedTangrams","storedSelectedGalleryFilter","includes","selectedGalleryFilter","setSelectedGalleryFilter","handleTangramClick","clickedTangram","prevPendingSelectedTangrams","pendingSelectedTangram","filter","tangramsByCategory","newTangramsByCategory","category","newSortedTangramsByCategory","sortedCategory","visibleCategories","onChange","px","starIcon","FiStar","gridTemplateColumns","gridColumnGap","gridRowGap","justifyItems","selectedTangram","count","disabled","FiShare2","LeaderboardDialog","storedSelectedLeaderBoard","setSelected","users","starsByUserId","createdTangramsByUserId","completedTangramsByUserId","starredByUid","completedByUid","stars","created","sortedUsers","userA","userB","index","stats","handleBadgeClick","obj","defineProperty","enumerable","configurable","writable","arr","_i","Symbol","iterator","_s","_e","_arr","_n","_d","next","unsupportedIterableToArray","TypeError","_createForOfIteratorHelper","o","allowArrayLike","it","minLen","toString","constructor","name","from","test","F","f","normalCompletion","didErr","step","_e2","return","len","arr2","isCheckBoxInput","element","isDateObject","Date","isNullOrUndefined","isObjectType","isObject","getEventValue","checked","isNameInFieldArray","names","substring","search","getNodeParentName","compact","Boolean","isUndefined","val","defaultValue","result","split","reduce","EVENTS","VALIDATION_MODE","INPUT_VALIDATION_RULES","omit","copy","getProxyFormState","formState","_proxyFormState","localProxyFormState","isRoot","createGetter","prop","isEmptyObject","shouldRenderFormState","formStateData","find","convertToArrayPayload","useSubscribe","_props","subscription","subject","subscribe","tearDown","isString","generateWatchOutput","_names","formValues","isGlobal","watch","add","fieldName","watchAll","isFunction","objectHasFunction","appendErrors","validateAllFieldCriteria","errors","message","types","isKey","stringToPath","input","replace","object","tempPath","lastIndex","newValue","objValue","isNaN","focusFieldBy","fields","fieldsNames","_step","_iterator","field","_f","focus","refs","isWatched","isBlurEvent","has","watchName","startsWith","cloneObject","Set","createSubject","_observers","observers","_step3","_iterator3","observer","isPrimitive","deepEqual","object1","object2","getTime","keys1","keys2","_keys","val1","val2","getValidationModes","mode","isOnSubmit","isOnBlur","isOnChange","isOnAll","isOnTouch","isBoolean","isFileInput","isHTMLElement","HTMLElement","isMultipleSelect","isRadioInput","isRadioOrCheckbox","isWeb","live","contains","unset","previousObjRef","updatePath","childObject","baseGet","k","objectRef","currentPaths","currentPathsLength","markFieldsDirty","isParentNodeArray","getDirtyFieldsFromDefaultValues","dirtyFieldsFromValues","getDirtyFields","defaultValues","defaultResult","isValid","validResult","getCheckboxValue","option","attributes","getFieldValueAs","_ref6","valueAsNumber","valueAsDate","setValueAs","NaN","defaultReturn","getRadioValue","previous","getFieldValue","every","files","selectedOptions","_ref7","getResolverOptions","_fields","criteriaMode","shouldUseNativeValidation","_step4","_iterator4","isRegex","RegExp","getRuleValue","rule","hasValidation","mount","required","min","max","maxLength","minLength","pattern","validate","schemaErrorLookup","foundError","pop","skipValidation","isTouched","isSubmitted","reValidateMode","unsetEmptyArray","isMessage","getValidateError","getValueAndMessage","validationData","validateField","_ref8","_callee","inputValue","_field$_f","inputRef","setCustomValidity","isRadio","isCheckBox","isEmpty","appendErrorsCurry","getMinMaxMessage","_ref9","exceedMax","exceedMin","maxOutput","minOutput","valueNumber","valueDate","maxLengthOutput","minLengthOutput","_exceedMax","_exceedMin","_getValueAndMessage","patternValue","_message","validateError","validationResult","_validateError","_context","prev","abrupt","reportValidity","bind","maxLengthMessage","minLengthMessage","maxType","minType","parseFloat","match","sent","t0","t1","t2","t3","t4","t5","_x","_x2","_x3","_x4","defaultOptions","shouldFocusError","createFormControl","delayErrorCallback","_options","_formState","isDirty","isValidating","dirtyFields","submitCount","touchedFields","isSubmitting","isSubmitSuccessful","_defaultValues","_formValues","shouldUnregister","_stateFlags","action","unMount","timer","validateFields","_subjects","state","validationModeBeforeSubmit","validationModeAfterSubmit","shouldDisplayAllAssociatedErrors","debounce","wait","_len","_key","_updateValid","_ref10","_callee2","shouldSkipRender","_context2","resolver","_executeSchema","executeBuildInValidation","_x5","_updateFieldArray","method","shouldSetValues","shouldSetFields","fieldValues","argA","argB","_getDirty","updateErrors","updateValidAndValue","shouldSkipSetValueAs","defaultChecked","setFieldValue","updateTouchAndDirty","fieldValue","isCurrentTouched","shouldRender","isFieldDirty","output","isPreviousFieldTouched","isPreviousFormDirty","isPreviousFieldDirty","isCurrentFieldPristine","shouldRenderByError","_ref11","_callee3","fieldState","previousFieldError","shouldUpdateValid","updatedFormState","_context3","delayError","_x6","_x7","_x8","_x9","_x10","_ref12","_callee4","_context4","context","_x11","executeSchemaAndUpdateState","_ref13","_callee5","_yield$_executeSchema","_iterator5","_step5","_name2","_error","_context5","_x12","_ref14","_callee6","shouldOnlyCheckValid","_name3","fieldReference","fieldError","_args6","_context6","valid","_x13","_x14","_removeUnmounted","_step6","_iterator6","_name4","unregister","getValues","_getWatch","_getFieldArray","forEach","selectRef","checkboxRef","radioRef","shouldDirty","shouldTouch","shouldValidate","trigger","setValues","fieldKey","concat","setValue","isFieldArray","_ref16","_callee7","_error2","shouldSkipValidation","watched","_yield$_executeSchema2","previousErrorLookupResult","errorLookupResult","_context7","onBlur","_x15","_ref17","_callee9","fieldNames","_args9","_context9","all","_ref18","_callee8","_context8","_x17","shouldFocus","_x16","clearErrors","inputName","setError","_step7","_iterator7","delete","keepValue","keepError","keepDirty","keepTouched","keepDefaultValue","keepIsValid","register","_ref20","_x18","fieldRef","querySelectorAll","radioOrCheckbox","handleSubmit","onValid","onInvalid","_ref21","_callee10","hasNoPromiseError","_yield$_executeSchema3","_context10","preventDefault","persist","finish","_x19","resetField","reset","keepStateOptions","updatedValues","cloneUpdatedValues","keepDefaultValues","keepValues","_step8","_iterator8","_name5","closest","keepSubmitCount","keepIsSubmitted","entries","_ref22","_ref23","keepErrors","setFocus","control","useForm","_formControl","_React$useState7","_React$useState8","updateFormState","ResetPasswordTab","setTab","onSubmit","sendPasswordResetEmail","code","SignUpTab","onSignUp","createUserWithEmailAndPassword","signupDate","now","autoComplete","passwordConfirm","SignInTab","onSignIn","signInWithEmailAndPassword","LoginDialog","tab","handleLogin","ChangeEmailForm","ChangeUsernameForm","newUsername","ChangePasswordForm","newPasswordConfirm","ProfileDialog","language","LanguageContext","changeEmailRequested","setChangeEmailRequested","changeUsernameRequested","setChangeUsernameRequested","changePasswordRequested","setChangePasswordRequested","handleLogout","confirm","signOut","pt","mt","Intl","DateTimeFormat","format","total","EMOJIS","getRandomEmoji","ReadTangramDialog","SaveTangramDialog","tangramCopy","setTangramCopy","isCreation","letterIndex","digitIndex","clearError","pathData","compoundPath","paper","applyMatrix","insert","exportSVG","getAttribute","curves","round","bounds","remove","recomputePathData","prevTangramCopy","computedEmoji","handleDelete","br","CATEGORIES","digitEmoji","letterEmoji","TangramDialog","Deferred","promise","ShowBackgroundPatternContext","useShowBackgroundPattern","ShowBackgroundPatternProvider","showBackgroundPattern","setShowBackgroundPattern","storedData","storedShowBackgroundPattern","parse","removeItem","toggleShowBackgroundPattern","newShowBackgroundPattern","TipsContext","TipDialog","tip","hideTips","setHideTips","iconValues","settingsIcon","FiSettings","accountIcon","FiUser","menuIcon","FiMenu","galleryIcon","FiGrid","shareIcon","createIcon","FiSave","leaderboardIcon","FiAward","tips","predicate","particles","themeKey","completedTangrams","TipsProvider","tipDialogData","setTipDialogData","tipsEnabled","setTipsEnabled","useSwitchTheme","getSeenTips","seenTipsIds","parsedData","showTip","seenTipsId","finally","showWelcome","showRandomTip","unseenTips","toggleTips","prevTipsEnabled","resetTips","Toggle","leftComponent","leftValue","rightComponent","rightValue","invertSounds","selectedSide","handleSideClick","newSelectedSide","SIZE","inputBackground","ShowParticlesContext","useShowParticles","ShowParticlesProvider","showParticles","setShowParticles","storedShowParticles","toggleShowParticles","newShowParticles","SettingsDialog","setLanguage","switchTheme","supportedLanguages","FiSun","FiMoon","FiVolumeX","FiVolume2","DialogProvider","usersInitialized","galleryInitialized","tangramsInitialized","profileDialogData","setProfileDialogData","leaderboardDeferred","setLeaderboardDeferred","showLeaderboard","galleryDeferred","setGalleryDeferred","showGallery","loginDeferred","setLoginDeferred","showLogin","tangramDialogData","setTangramDialogData","settingsDialogDeferred","setSettingsDialogDeferred","showSettings","challengeDialogData","setChallengeDialogData","checkForChallenge","hasBeenChallenged","searchParams","URLSearchParams","tangramIds","challengeTangrams","history","replaceState","MenuItem","text","py","Menu","menuDialogDeferred","setMenuDialogDeferred","handleMenuClick","flightAnimation","transform","to","mr","FADE_STAGGER_DURATION","mx","href","rel","getOffsettedPathPoints","offset","offsetter","ClipperLib","ClipperOffset","offsettedPathPoints","Paths","AddPaths","X","x","Y","y","JoinType","jtMiter","EndType","etClosedPolygon","MiterLimit","ArcTolerance","Execute","createTriangle","displayShape","segments","closed","collisionShape","COLLISION_MARGIN","insetBorderShape","INSET_BORDER","triangleCenter","d1","getDistance","d2","d3","perimeter","triangleCenterX","triangleCenterY","getTriangleCenter","center","pivot","collisions","createRhombus","getNearestPoint","point","startPoint","endPoint","atob","dot","getPrimarySnap","otherShapes","snap","otherShape","otherPoint","ghostPoint","distance","vector","subtract","nearestPoint","segment","getSecondarySnap","bestNewVector","bestNewVectorLenth","maxDistance","atan2","angle","cos","sin","ray","getIntersections","newVector","restrictGroupWithinCanvas","group","canvas","correctionVector","devicePixelRatio","scrambleGroup","maxPoint","SCRAMBLE_PADDING","multiply","rotation","doesPathContainsPath","pathA","pathB","updateColisionState","pieceGroup","piecesGroup","otherPieceGroup","pieceCollisionShape","otherPieceCollisionShape","intersects","isTangramValid","OVERLAPING_OPACITY","Victory","onStop","onNext","onApprove","onStarToggle","emojiSpinEnded","setEmojiSpinEnded","emojiSpin","onAnimationEnd","textShadow","FiCheck","FiPlay","Tangram","playRef","victory","markTangramAsCompleteRef","currentTangramIndex","setCurrentTangramIndex","victoryPhase","setVictoryPhase","canvasRef","scaleFactorRef","piecesGroupRef","particlesRef","coumpoundPathRef","showBackgroundPatternRef","showParticlesRef","handleApprove","scaleFactor","unite","scale","getPathData","asyncTask","handleResize","addEventListener","removeEventListener","useLayoutEffect","start","attachPieceGroupEvents","anchorPoint","ghostGroup","mouseDownTimestamp","mouseDownPoint","handleMouseEnter","mdEvent","activeElement","handleMouseLeave","handleMouseDown","clone","deep","bringToFront","handleMouseDrag","otherPrimaryShapes","otherSecondaryShapes","ghostShape","otherGroup","coumpoundShapes","snapVector","SNAP_DISTANCE","handleMouseUp","muEvent","CLICK_TIMEOUT","coumpoundPath","errorMargin","newCoumpoundPath","isTangramComplete","STRICT_ERROR_MARGIN","SOFT_ERROR_MARGIN","removeListeners","VICTORY_PARTICLES_DURATION","easing","particle","tween","MAX_PARTICLE_OPACITY","PI","on","mouseenter","mouseleave","mousedown","mousedrag","mouseup","off","smallBase","mediumBase","largeBase","SMALL_TRIANGLE_BASE","sendToBack","fillRule","outerBounds","innerBounds","init","fillColor","particleGroup","divide","getRandomRadius","MAX_PARTICLE_SIZE","MIN_PARTICLE_SIZE","getRandomOpacity","MIN_PARTICLE_OPACITY","PARTICLES_COUNT","radius","parent","randomize","strokeColor","App","waited","setWaited","showLoader","setShowLoader","showLoaderTimeout","setShowLoaderTimeout","isEverythingInitialized","currentTarget","oncontextmenu","useGlobalCss","fontFamily","padding","boxSizing","userSelect","LanguageProvider","runtime","Op","hasOwn","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","create","Context","_invoke","GenStateSuspendedStart","GenStateExecuting","GenStateCompleted","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","_sent","dispatchException","record","tryCatch","GenStateSuspendedYield","makeInvokeMethod","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","Gp","defineIteratorMethods","AsyncIterator","PromiseImpl","invoke","__await","unwrapped","previousPromise","callInvokeWithMethodAndArg","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","iterable","iteratorMethod","isGeneratorFunction","genFun","ctor","mark","setPrototypeOf","__proto__","awrap","async","iter","reverse","skipTempReset","charAt","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","Function"],"sourceRoot":""}