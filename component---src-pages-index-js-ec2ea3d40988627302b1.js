(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{0:function(e,t){},1:function(e,t){},"8Ymh":function(e,t,r){e.exports=r.p+"static/clap-083856b66ccbb1cf6692425f9dbe9b0b.wav"},CX2u:function(e,t,r){"use strict";var n=r("XKFU"),a=r("g3g5"),o=r("dyZX"),i=r("69bn"),c=r("vKrd");n(n.P+n.R,"Promise",{finally:function(e){var t=i(this,a.Promise||o.Promise),r="function"==typeof e;return this.then(r?function(r){return c(t,e()).then((function(){return r}))}:e,r?function(r){return c(t,e()).then((function(){throw r}))}:e)}})},Hrb7:function(e,t,r){e.exports=r.p+"static/button-14ce515d099e43f117dc184a4b22a8a7.wav"},JtUg:function(e){e.exports=JSON.parse('{"Language":"Language","Theme":"Theme","Logged in as {username}":"Logged in as {username}","en":"English","fr":"French","Settings":"Settings","Difficulty":"Difficulty","Easy":"Easy","Hard":"Hard","Reset data":"Reset data","You are about to delete all your completion data. Are you sure you want to proceed ?":"You are about to delete all your completion data. Are you sure you want to proceed ?","Tangram approved":"Tangram approved","You can\'t save an invalid tangram":"You can\'t save an invalid tangram","You can\'t save such an easy tangram":"You can\'t save such an easy tangram","Tangram submitted for review":"Tangram submitted for review","Logged out":"Logged out","Tangram gallery":"Tangram gallery","Pending approbation":"Pending approbation","{username}\'s tangrams":"{username}\'s tangrams","Play now !":"Play now !","Start 1 tangram !":"Start 1 tangram !","Start {count} tangrams !":"Start {count} tangrams !","Password is too weak":"Password is too weak","Email address already in use":"Email address already in use","Invalid email address":"Invalid email address","Email address":"Email address","Email address is required":"Email address is required","Username":"Username","Username is required":"Username is required","Password":"Password","Password is required":"Password is required","Confirm password":"Confirm password","Passwords must match":"Passwords must match","Sign me up !":"Sign me up !","I already have an account":"I already have an account","Unknown email address":"Unknown email address","Incorrect password":"Incorrect password","Sign me in !":"Sign me in !","I don\'t have an account":"I don\'t have an account","Create your account":"Create your account","Connect to your account":"Connect to your account","Submit your tangram":"Submit your tangram","Edit your tangram":"Edit your tangram","Category":"Category","Victory emoji":"Victory emoji","Leave empty for random emoji":"Leave empty for random emoji","Order":"Order","Submit !":"Submit !","Edit !":"Edit !","Or delete tangram":"Or delete tangram","animals":"Animals","geometric":"Geometric","digits":"Digits","letters":"Alphabet","people":"People","stuff":"Stuff","Joined {signupDate}":"Joined {signupDate}","Log out":"Log out","Change email address":"Change email address","Change username":"Change username","Change password":"Change password","Back":"Back","Confirm new password":"Confirm new password","New password":"New password","Current password":"Current password","Password changed sucessfuly":"Password changed sucessfuly","New username":"New username","Username updated sucessfuly":"Username updated sucessfuly","Email address updated sucessfuly":"Email address updated sucessfuly","New email address":"New email address","An error occured, please retry later":"An error occured, please retry later","Sounds":"Sounds","Are you sure you want to delete this tangram ?":"Are you sure you want to delete this tangram ?","Tangram sucessfuly deleted":"Tangram sucessfuly deleted","Challenge link copied to clipboard":"Challenge link copied to clipboard","{username} challenged you":"{username} challenged you","Rise to the challenge":"Rise to the challenge","Let\'s go !":"Let\'s go !"}')},Lnxd:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));r("ioFf"),r("91GP");var n=r("q1tI"),a={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},o=n.createContext&&n.createContext(a),i=function(){return(i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},c=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&(r[n[a]]=e[n[a]])}return r};function u(e){return function(t){return n.createElement(s,i({attr:i({},e.attr)},t),function e(t){return t&&t.map((function(t,r){return n.createElement(t.tag,i({key:r},t.attr),e(t.child))}))}(e.child))}}function s(e){var t=function(t){var r,a=e.size||t.size||"1em";t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className);var o=e.attr,u=e.title,s=c(e,["attr","title"]);return n.createElement("svg",i({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,o,s,{className:r,style:i({color:e.color||t.color},t.style,e.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),u&&n.createElement("title",null,u),e.children)};return void 0!==o?n.createElement(o.Consumer,null,(function(e){return t(e)})):t(a)}},NczM:function(e,t,r){e.exports=r.p+"static/card-96da3e7a10f4a164c88ac0a09b36ffec.wav"},RXBc:function(e,t,r){"use strict";r.r(t);var n=r("I9K0"),a=r("q1tI"),o=r.n(a),i=(r("rE2o"),r("ioFf"),r("XfO3"),r("HEwt"),r("f3/d"),r("a1Th"),r("VRzm"),r("rGqo"),r("yt8O"),r("Btvt"),r("hhXQ"),r("o0o1")),c=r.n(i),u=(r("ls82"),r("Wcq6")),s=r.n(u);s.a.apps.length||s.a.initializeApp({apiKey:"AIzaSyAHOemftrTSOUjtoA6K3VR2hkOU5H-ScSI",authDomain:"amstangram.firebaseapp.com",databaseURL:"https://amstangram.firebaseio.com",projectId:"amstangram",storageBucket:"amstangram.appspot.com",messagingSenderId:"1075176148116",appId:"1:1075176148116:web:e61e6512cd983a75533881",measurementId:"G-PLH3BSWLM2"});var l=s.a,f=r("BbdF"),d=r.n(f),m=(r("91GP"),function(e){var t=Object(a.useContext)(n.ThemeContext).colors.pieces,r=t.st1,i=t.st2,c=t.mt1,u=t.lt1,s=t.lt2,l=t.sq,f=t.rh;return o.a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 368 61"},e),o.a.createElement("path",{fill:r,d:"M109.1 11l-5.3 5.3-5.3-5.3 5.3-5.3 5.3 5.3z"}),o.a.createElement("path",{fill:i,d:"M106.2 35.6L95.6 25v21.2l10.6-10.6z"}),o.a.createElement("path",{fill:c,d:"M84 23.6l10.6 10.6V13L84 23.6z"}),o.a.createElement("path",{fill:u,d:"M94.6 35.6L84 46.2h10.6V35.6z"}),o.a.createElement("path",{fill:s,d:"M78 40.3l5.3 5.3 5.3-5.3H78z"}),o.a.createElement("path",{fill:l,d:"M94.5 11.5H87V19l7.5-7.5z"}),o.a.createElement("path",{fill:f,d:"M97.6 10.6H87l5.3-5.3H103l-5.3 5.3z"}),o.a.createElement("path",{fill:r,d:"M137.5 14.5H130V7h7.5v7.5z"}),o.a.createElement("path",{fill:i,d:"M122.5 39l-10.6 10.6H133L122.5 39z"}),o.a.createElement("path",{fill:c,d:"M129 7h-15l15 15V7z"}),o.a.createElement("path",{fill:u,d:"M121 24v15l7.5-7.5L121 24z"}),o.a.createElement("path",{fill:s,d:"M128.3 33l-5.3 5.3 5.3 5.3V33z"}),o.a.createElement("path",{fill:l,d:"M113 7.5V15h7.5L113 7.5z"}),o.a.createElement("path",{fill:f,d:"M121.2 23l7.5 7.5V23l-7.4-7.6V23z"}),o.a.createElement("path",{fill:r,d:"M71.5 42H64v-7.5h7.5V42z"}),o.a.createElement("path",{fill:i,d:"M61 21.6l10.6 10.6V11L61 21.6z"}),o.a.createElement("path",{fill:c,d:"M50.2 21.6L39.6 11v21.2l10.6-10.6z"}),o.a.createElement("path",{fill:u,d:"M63 18H48l7.5 7.5L63 18z"}),o.a.createElement("path",{fill:s,d:"M40 42.5h7.5V35L40 42.5z"}),o.a.createElement("path",{fill:l,d:"M64.1 26.1v7.5h7.5l-7.5-7.5z"}),o.a.createElement("path",{fill:f,d:"M47.5 33.5L40 41v-7.5l7.5-7.5v7.5z"}),o.a.createElement("path",{fill:r,d:"M356.5 41H349v-7.5h7.5V41z"}),o.a.createElement("path",{fill:i,d:"M346 20.6l10.6 10.6V10L346 20.6z"}),o.a.createElement("path",{fill:c,d:"M335.2 20.6L324.6 10v21.2l10.6-10.6z"}),o.a.createElement("path",{fill:u,d:"M348 17h-15l7.5 7.5L348 17z"}),o.a.createElement("path",{fill:s,d:"M325 41.5h7.5V34l-7.5 7.5z"}),o.a.createElement("path",{fill:l,d:"M349.1 25.1v7.5h7.5l-7.5-7.5z"}),o.a.createElement("path",{fill:f,d:"M332.5 32.5L325 40v-7.5l7.5-7.5v7.5z"}),o.a.createElement("path",{fill:r,d:"M151.5 44H144v-7.5h7.5V44z"}),o.a.createElement("path",{fill:i,d:"M155.6 7L145 17.6h21.2L155.6 7z"}),o.a.createElement("path",{fill:c,d:"M144 19v15l15-15h-15z"}),o.a.createElement("path",{fill:u,d:"M168 36V20l-8 8 8 8z"}),o.a.createElement("path",{fill:s,d:"M167.5 19H160v7.5l7.5-7.5z"}),o.a.createElement("path",{fill:l,d:"M162.3 42.6l5.3-5.3-5.3-5.3v10.6z"}),o.a.createElement("path",{fill:f,d:"M151.5 28l-7.5 7.5h7.5L159 28h-7.5z"}),o.a.createElement("path",{fill:r,d:"M202.3 21.6l-5.3-5.3 5.3-5.3 5.3 5.3-5.3 5.3z"}),o.a.createElement("path",{fill:i,d:"M180 24h15L180 9v15z"}),o.a.createElement("path",{fill:c,d:"M195.5 25h-15l15 15V25z"}),o.a.createElement("path",{fill:u,d:"M185.3 33L174 44.3h11.3V33z"}),o.a.createElement("path",{fill:s,d:"M180 36.6l5.3-5.3L180 26v10.6z"}),o.a.createElement("path",{fill:l,d:"M196.7 28.6l5.3-5.3-5.3-5.3v10.6z"}),o.a.createElement("path",{fill:f,d:"M202.1 35.6V25l-5.3 5.3v10.6l5.3-5.3z"}),o.a.createElement("path",{fill:r,d:"M242.5 36.5H235V29h7.5v7.5z"}),o.a.createElement("path",{fill:i,d:"M214 20.6l10.6 10.6V10L214 20.6z"}),o.a.createElement("path",{fill:c,d:"M214 37h15l-15-15v15z"}),o.a.createElement("path",{fill:u,d:"M239 38h-16l8 8 8-8z"}),o.a.createElement("path",{fill:s,d:"M225.5 10v7.5h7.5l-7.5-7.5z"}),o.a.createElement("path",{fill:l,d:"M233.5 16.5V9H226l7.5 7.5z"}),o.a.createElement("path",{fill:f,d:"M221.5 45.5L214 38h7.5l7.5 7.5h-7.5z"}),o.a.createElement("path",{fill:r,d:"M270.5 34H263v-7.5h7.5V34z"}),o.a.createElement("path",{fill:i,d:"M251 14v15l15-15h-15z"}),o.a.createElement("path",{fill:c,d:"M251 30.6l10.6 10.6V20L251 30.6z"}),o.a.createElement("path",{fill:u,d:"M262 43.3L250.7 32v11.3H262z"}),o.a.createElement("path",{fill:s,d:"M271.3 29.6l5.3-5.3-5.3-5.3v10.6z"}),o.a.createElement("path",{fill:l,d:"M275.5 21.5V14H268l7.5 7.5z"}),o.a.createElement("path",{fill:f,d:"M274.5 42.5L267 35h7.5l7.5 7.5h-7.5z"}),o.a.createElement("path",{fill:r,d:"M7.5 45H0v-7.5h7.5V45z"}),o.a.createElement("path",{fill:i,d:"M11.6 8L1 18.6h21.2L11.6 8z"}),o.a.createElement("path",{fill:c,d:"M0 20v15l15-15H0z"}),o.a.createElement("path",{fill:u,d:"M24 37V21l-8 8 8 8z"}),o.a.createElement("path",{fill:s,d:"M23.5 20H16v7.5l7.5-7.5z"}),o.a.createElement("path",{fill:l,d:"M18.3 43.6l5.3-5.3-5.3-5.3v10.6z"}),o.a.createElement("path",{fill:f,d:"M7.5 29L0 36.5h7.5L15 29H7.5z"}),o.a.createElement("path",{fill:r,d:"M295.5 44H288v-7.5h7.5V44z"}),o.a.createElement("path",{fill:i,d:"M299.6 7L289 17.6h21.2L299.6 7z"}),o.a.createElement("path",{fill:c,d:"M288 19v15l15-15h-15z"}),o.a.createElement("path",{fill:u,d:"M312 36V20l-8 8 8 8z"}),o.a.createElement("path",{fill:s,d:"M311.5 19H304v7.5l7.5-7.5z"}),o.a.createElement("path",{fill:l,d:"M306.3 42.6l5.3-5.3-5.3-5.3v10.6z"}),o.a.createElement("path",{fill:f,d:"M295.5 28l-7.5 7.5h7.5L303 28h-7.5z"}))});r("RW0V"),r("T39b");function p(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}function h(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||v(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){if(e){if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(e,t):void 0}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var b=function(e,t,r){var n,a,o;if("string"==typeof e)return{"& > * + *":(n={},n["column"===e||"column-reverse"===e?"mt":"ml"]=t,n)};for(var i,c="object"==typeof t?t:{_:t},u=e,s=new Set([].concat(h(Object.keys(u)),h(Object.keys(c)))),l={},f={},d=function(e){var t=0;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=v(e)))return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}(["_"].concat(h(Object.keys(r.breakpoints))));!(i=d()).done;){var m=i.value;if(!1!==s.has(m)){var p=m,g=null!=u[p]?u[p]:a;a=g;var b=null!=c[p]?c[p]:o;o=b,"column"===g||"column-reverse"===g?(l[p]=b,f[p]=0):(f[p]=b,l[p]=0)}}return{"& > * + *":{mt:l,ml:f}}},y=o.a.forwardRef((function(e,t){var r=e.as,i=void 0===r?"div":r,c=e.css,u=e.deps,s=p(e,["as","css","deps"]),l=Object.assign({display:"flex",minWidth:0,minHeight:0,flex:"none",alignSelf:"auto",alignItems:"stretch",flexDirection:"column",justifyContent:"flex-start"},c),f=l.gap,d=p(l,["gap"]),m=Object(a.useContext)(n.ThemeContext),h=Object(a.useMemo)((function(){if(f)return b(d.flexDirection,f,m)}),[f,d.flexDirection,m]),v=Object(n.useCss)(f?Object.assign({},d,{},h):d,u);return o.a.createElement(i,Object.assign({ref:t},s,{className:v}))})),w=["animals","letters","digits","people","geometric","stuff"],E=["0ï¸âƒ£","1ï¸âƒ£","2ï¸âƒ£","3ï¸âƒ£","4ï¸âƒ£","5ï¸âƒ£","6ï¸âƒ£","7ï¸âƒ£","8ï¸âƒ£","9ï¸âƒ£"],x=["ðŸ„°","ðŸ„±","ðŸ„²","ðŸ„³","ðŸ„´","ðŸ„µ","ðŸ„¶","ðŸ„·","ðŸ„¸","ðŸ„¹","ðŸ„º","ðŸ„»","ðŸ„¼","ðŸ„½","ðŸ„¾","ðŸ„¿","ðŸ…€","ðŸ…","ðŸ…‚","ðŸ…ƒ","ðŸ…„","ðŸ……","ðŸ…†","ðŸ…‡","ðŸ…ˆ","ðŸ…‰"],j=(r("CX2u"),r("Z2Ku"),r("L9s1"),r("KKXr"),r("OG14"),r("Vd3H"),r("Tgqd")),O=(r("dRSK"),r("pIFo"),{en:r("JtUg"),fr:r("o1Si")});function C(e){var t=0;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S(e,t)}(e)))return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var k=["en","fr"],M=Object(a.createContext)({language:"fr",setLanguage:function(){}}),L=function(){var e=Object(a.useContext)(M).languageRef;return Object(a.useCallback)((function(t,r){var n=e.current;if(!O[n]||!O[n][t])return t;if(!r)return O[n][t];var a=O[n][t];for(var o in r)a=a.replace("{"+o+"}",r[o]);return a}),[e])},P=function(e){var t=e.children,r=Object(a.useState)("fr"),n=r[0],i=r[1],c=Object(a.useRef)(n);Object(a.useEffect)((function(){var e=function(){var e=localStorage.getItem("language");if(k.includes(e))return e;for(var t,r=function(){var e=t.value,r=k.find((function(t){return e.includes(t)}));if(r)return{v:r}},n=C(navigator.languages);!(t=n()).done;){var a=r();if("object"==typeof a)return a.v}return"fr"}();i(e),c.current=e}),[]);var u=Object(a.useMemo)((function(){return{language:n,languageRef:c,setLanguage:function(e){i(e),c.current=e}}}),[n]);return o.a.createElement(M.Provider,{value:u},t)};r("bHtr"),r("SRfc");function A(e,t,r,n,a,o,i){try{var c=e[o](i),u=c.value}catch(s){return void r(s)}c.done?t(u):Promise.resolve(u).then(n,a)}function I(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){A(o,n,a,i,c,"next",e)}function c(e){A(o,n,a,i,c,"throw",e)}i(void 0)}))}}r("Oyvg"),r("9VmF");function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function R(e,t){if(e){if("string"==typeof e)return z(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?z(e,t):void 0}}function T(e){return function(e){if(Array.isArray(e))return z(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||R(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(u){a=!0,o=u}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}return r}}(e,t)||R(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}r("/8Fb");var N=function(e){return void 0===e},D=function(e){return null===e||N(e)},F=function(e){return Array.isArray(e)},B=function(e){return"object"==typeof e},q=function(e){return!D(e)&&!F(e)&&B(e)},H=function(e){return q(e)&&e.nodeType===Node.ELEMENT_NODE},W={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit"},G="undefined",_={BLUR:"blur",CHANGE:"change",INPUT:"input"},Y="max",J="min",K="maxLength",$="minLength",X="pattern",Q="required",Z="validate",ee=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,te=/^\w*$/,re=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ne=/\\(\\)?/g;var ae=function(e){return!F(e)&&(te.test(e)||!ee.test(e))},oe=function(e){var t=[];return e.replace(re,(function(e,r,n,a){t.push(n?a.replace(ne,"$1"):r||e)})),t};function ie(e,t,r){for(var n=-1,a=ae(t)?[t]:oe(t),o=a.length,i=o-1;++n<o;){var c=a[n],u=r;if(n!==i){var s=e[c];u=q(s)||F(s)?s:isNaN(+a[n+1])?{}:[]}e[c]=u,e=e[c]}return e}var ce=function(e){return Object.entries(e).reduce((function(e,t){var r=U(t,2),n=r[0],a=r[1];return ae(n)?Object.assign(Object.assign({},e),V({},n,a)):(ie(e,n,a),e)}),{})},ue=function(e,t,r){var n=t.split(/[,[\].]+?/).filter(Boolean).reduce((function(e,t){return D(e)?e:e[t]}),e);return N(n)||n===e?e[t]||r:n},se=function(e,t){for(var r in e)if(ue(t,r)){var n=e[r];if(n){if(n.ref.focus){n.ref.focus();break}if(n.options){n.options[0].ref.focus();break}}}},le=function(e,t){H(e)&&e.removeEventListener&&(e.removeEventListener(_.INPUT,t),e.removeEventListener(_.CHANGE,t),e.removeEventListener(_.BLUR,t))},fe=function(e){return"radio"===e.type},de=function(e){return"checkbox"===e.type};function me(e){return!e||e instanceof HTMLElement&&e.nodeType!==Node.DOCUMENT_NODE&&me(e.parentNode)}var pe=function(e){return q(e)&&!Object.keys(e).length};function he(e){return F(e)?e:oe(e)}function ve(e,t){return 1==t.length?e:function(e,t){for(var r=ae(t)?[t]:he(t),n=t.length,a=0;a<n;)e=N(e)?a++:e[r[a++]];return a==n?e:void 0}(e,function(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(r=r>a?a:r)<0&&(r+=a),a=t>r?0:r-t;for(var o=Array(a);++n<a;)o[n]=e[n+t];return o}(t,0,-1))}function ge(e,t){return t.forEach((function(t){!function(e,t){for(var r=ae(t)?[t]:he(t),n=ve(e,r),a=r[r.length-1],o=!(null!=n)||delete n[a],i=void 0,c=0;c<r.slice(0,-1).length;c++){var u=-1,s=void 0,l=r.slice(0,-(c+1)),f=l.length-1;for(c>0&&(i=e);++u<l.length;){var d=l[u];s=s?s[d]:e[d],f===u&&(q(s)&&pe(s)||F(s)&&!s.filter((function(e){return q(e)&&!pe(e)})).length)&&(i?delete i[d]:delete e[d]),i=s}}}(e,t)})),e}var be={isValid:!1,value:""},ye=function(e){return F(e)?e.filter(Boolean).reduce((function(e,t){var r=t.ref,n=r.checked,a=r.value;return n?{isValid:!0,value:a}:e}),be):be},we=function(e){return T(e).filter((function(e){return e.selected})).map((function(e){return e.value}))},Ee=function(e){return"file"===e.type},xe=function(e){return"select-multiple"===e.type},je=function(e){return""===e},Oe={value:!1,isValid:!1},Ce={value:!0,isValid:!0},Se=function(e){if(F(e)){if(e.length>1){var t=e.filter((function(e){return e.ref.checked})).map((function(e){return e.ref.value}));return{value:t,isValid:!!t.length}}var r=e[0].ref,n=r.checked,a=r.value,o=r.attributes;return n?o&&!N(o.value)?N(a)||je(a)?Ce:{value:a,isValid:!0}:Ce:Oe}return Oe};function ke(e,t){var r=t.name,n=t.value,a=e[r];return Ee(t)?t.files:fe(t)?a?ye(a.options).value:"":xe(t)?we(t.options):de(t)?!!a&&Se(a.options).value:n}var Me=function(e){return"string"==typeof e},Le=function(e,t){var r={},n=function(n){(N(t)||(Me(t)?n.startsWith(t):F(t)?t.find((function(e){return n.startsWith(e)})):t&&t.nest))&&(r[n]=ke(e,e[n].ref))};for(var a in e)n(a);return r},Pe=function(e,t){var r=t.type,n=t.types,a=t.message;return q(e)&&e.type===r&&e.message===a&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object.entries(e),n=Object.keys(t);return r.length===n.length&&r.reduce((function(e,r){var n=U(r,2),a=n[0],o=n[1];return!!e&&(t[a]&&t[a]===o)}),!0)}(e.types,n)};var Ae=function(e){return e instanceof RegExp},Ie=function(e){var t;return q(t=e)&&!Ae(t)?e:{value:e,message:""}},ze=function(e){return"function"==typeof e},Re=function(e){return"boolean"==typeof e},Te=function(e){return Me(e)||q(e)&&Object(a.isValidElement)(e)};function Ve(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"validate";if(Te(e)||Re(e)&&!e)return{type:r,message:Te(e)?e:"",ref:t}}var Ue=function(e,t,r,n,a){if(t){var o=r[e];return Object.assign(Object.assign({},o),{types:Object.assign(Object.assign({},o&&o.types?o.types:{}),V({},n,a||!0))})}return{}},Ne=function(){var e=I(c.a.mark((function e(t,r,n){var a,o,i,u,s,l,f,d,m,p,h,v,g,b,y,w,E,x,j,O,C,S,k,M,L,P,A,I,z,R,T,V,N,F,B,H,W,G,_,ee,te,re,ne,ae,oe,ie,ce,ue,se,le,me,he,ve,ge,be,we,Ee,xe,Oe;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.ref,o=n.ref,i=o.type,u=o.value,s=o.name,l=n.options,f=n.required,d=n.maxLength,m=n.minLength,p=n.min,h=n.max,v=n.pattern,g=n.validate,y=t.current,w={},E=fe(a),x=de(a),j=E||x,O=je(u),C=Ue.bind(null,s,r,w),S=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:K,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:$,c=e?t:n;if(w[s]=Object.assign({type:e?o:i,message:c,ref:a},C(e?o:i,c)),!r)return w},!f||!(!E&&!x&&(O||D(u))||Re(u)&&!u||x&&!Se(l).isValid||E&&!ye(l).isValid)){e.next=15;break}if(k=Te(f)?{value:!!f,message:f}:Ie(f),M=k.value,L=k.message,!M){e.next=15;break}if(w[s]=Object.assign({type:Q,message:L,ref:j?null===(b=y[s].options)||void 0===b?void 0:b[0].ref:a},C(Q,L)),r){e.next=15;break}return e.abrupt("return",w);case 15:if(D(p)&&D(h)){e.next=23;break}if(I=Ie(h),z=I.value,R=I.message,T=Ie(p),V=T.value,N=T.message,"number"===i||!i&&!isNaN(u)?(F=a.valueAsNumber||parseFloat(u),D(z)||(P=F>z),D(V)||(A=F<V)):(B=a.valueAsDate||new Date(u),Me(z)&&(P=B>new Date(z)),Me(V)&&(A=B<new Date(V))),!P&&!A){e.next=23;break}if(S(!!P,R,N,Y,J),r){e.next=23;break}return e.abrupt("return",w);case 23:if(!Me(u)||O||!d&&!m){e.next=33;break}if(H=Ie(d),W=H.value,G=H.message,_=Ie(m),ee=_.value,te=_.message,re=u.toString().length,ne=!D(W)&&re>W,ae=!D(ee)&&re<ee,!ne&&!ae){e.next=33;break}if(S(!!ne,G,te),r){e.next=33;break}return e.abrupt("return",w);case 33:if(!v||O){e.next=39;break}if(oe=Ie(v),ie=oe.value,ce=oe.message,!Ae(ie)||ie.test(u)){e.next=39;break}if(w[s]=Object.assign({type:X,message:ce,ref:a},C(X,ce)),r){e.next=39;break}return e.abrupt("return",w);case 39:if(!g){e.next=72;break}if(ue=ke(y,a),se=j&&l?l[0].ref:a,!ze(g)){e.next=53;break}return e.next=45,g(ue);case 45:if(le=e.sent,!(me=Ve(le,se))){e.next=51;break}if(w[s]=Object.assign(Object.assign({},me),C(Z,me.message)),r){e.next=51;break}return e.abrupt("return",w);case 51:e.next=72;break;case 53:if(!q(g)){e.next=72;break}he={},ve=0,ge=Object.entries(g);case 56:if(!(ve<ge.length)){e.next=68;break}if(be=U(ge[ve],2),we=be[0],Ee=be[1],pe(he)||r){e.next=60;break}return e.abrupt("break",68);case 60:return e.next=62,Ee(ue);case 62:xe=e.sent,(Oe=Ve(xe,se,we))&&(he=Object.assign(Object.assign({},Oe),C(we,Oe.message)),r&&(w[s]=he));case 65:ve++,e.next=56;break;case 68:if(pe(he)){e.next=72;break}if(w[s]=Object.assign({ref:se},he),r){e.next=72;break}return e.abrupt("return",w);case 72:return e.abrupt("return",w);case 73:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),De=function(e,t){return F(e.inner)?e.inner.reduce((function(e,r){var n=r.path,a=r.message,o=r.type;return Object.assign(Object.assign({},e),e[n]&&t?V({},n,Ue(n,t,e,o,a)):V({},n,e[n]||Object.assign({message:a,type:o},t?{types:V({},o,a||!0)}:{})))}),{}):V({},e.path,{message:e.message,type:e.type})};function Fe(e,t,r,n,a){return Be.apply(this,arguments)}function Be(){return(Be=I(c.a.mark((function e(t,r,n,a,o){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=2;break}return e.abrupt("return",a(n,o));case 2:return e.prev=2,e.next=5,t.validate(n,{abortEarly:!1,context:o});case 5:return e.t0=e.sent,e.t1={},e.abrupt("return",{values:e.t0,errors:e.t1});case 10:return e.prev=10,e.t2=e.catch(2),e.abrupt("return",{values:{},errors:ce(De(e.t2,r))});case 13:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}var qe=function(e){return D(e)||!B(e)},He=function(e,t){return function e(t,r){var n=function(r,n,a){var o=a?"".concat(t,".").concat(n):"".concat(t,"[").concat(n,"]");return qe(r)?o:e(o,r)};return F(r)?r.map((function(e,t){return n(e,t)})):Object.entries(r).map((function(e){var t=U(e,2),r=t[0],a=t[1];return n(a,r,!0)}))}(e,t).flat(1/0)},We=function(e,t,r,n){var a;return r.add(t),pe(e)?a=void 0:N(e[t])?(a=ue(ce(e),t),N(a)||He(t,a).forEach((function(e){return r.add(e)}))):(a=e[t],r.add(t)),N(a)?q(n)?ue(n,t):n:a},Ge=function(e){var t=e.isOnChange,r=e.hasError,n=e.isBlurEvent,a=e.isOnSubmit,o=e.isReValidateOnSubmit,i=e.isOnBlur,c=e.isReValidateOnBlur,u=e.isSubmitted;return t&&n||a&&o||a&&!u||i&&!n&&!r||c&&!n&&r||o&&u},_e=function(e){return e.substring(0,e.indexOf("["))},Ye=function(e,t){var r=ce(Le(e));return t?ue(r,t,r):r};function Je(e,t){var r=!1;if(!F(e)||!F(t)||e.length!==t.length)return!0;for(var n=0;n<e.length&&!r;n++){var a=e[n],o=t[n];if(N(o)||Object.keys(a).length!==Object.keys(o).length){r=!0;break}for(var i in a)if(a[i]!==o[i]){r=!0;break}}return r}var Ke=function(e,t){return RegExp("^".concat(t,"[\\d+]").replace(/\[/g,"\\[").replace(/\]/g,"\\]")).test(e)},$e=function(e,t){return T(e).reduce((function(e,r){return!!Ke(t,r)||e}),!1)},Xe=function(e){return typeof FileList!==G&&e instanceof FileList};var Qe=function(e){return{isOnSubmit:!e||e===W.onSubmit,isOnBlur:e===W.onBlur,isOnChange:e===W.onChange}},Ze=function(e){return fe(e)||de(e)};function et(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mode,r=void 0===t?W.onSubmit:t,n=e.reValidateMode,o=void 0===n?W.onChange:n,i=e.validationSchema,u=e.validationResolver,s=e.validationContext,l=e.defaultValues,f=void 0===l?{}:l,d=e.submitFocusError,m=void 0===d||d,p=e.validateCriteriaMode,h=Object(a.useRef)({}),v="all"===p,g=Object(a.useRef)({}),b=Object(a.useRef)({}),y=Object(a.useRef)({}),w=Object(a.useRef)(new Set),E=Object(a.useRef)(new Set),x=Object(a.useRef)(new Set),j=Object(a.useRef)(new Set),O=Object(a.useRef)(!0),C=Object(a.useRef)({}),S=Object(a.useRef)(f),k=Object(a.useRef)(!1),M=Object(a.useRef)(!1),L=Object(a.useRef)(!1),P=Object(a.useRef)(!1),A=Object(a.useRef)(0),z=Object(a.useRef)(!1),R=Object(a.useRef)(),B=Object(a.useRef)({}),Y=Object(a.useRef)(s),J=Object(a.useRef)(new Set),K=U(Object(a.useState)(),2)[1],$=Object(a.useRef)(Qe(r)).current,X=$.isOnBlur,Q=$.isOnSubmit,Z=$.isOnChange,ee=typeof window===G,te=!(!i&&!u),re=typeof document!==G&&!ee&&!N(window.HTMLElement),ne=re&&"Proxy"in window,ae=Object(a.useRef)({dirty:!ne,dirtyFields:!ne,isSubmitted:Q,submitCount:!ne,touched:!ne,isSubmitting:!ne,isValid:!ne}),oe=Object(a.useRef)(Qe(o)).current,he=oe.isOnBlur,ve=oe.isOnSubmit;Y.current=s;var be=Object(a.useCallback)((function(){k.current||K({})}),[]),ye=Object(a.useCallback)((function(e,t,r,n){var a=r||function(e){var t=e.errors,r=e.name,n=e.error,a=e.validFields,o=e.fieldsWithValidation,i=pe(n),c=pe(t),u=ue(n,r),s=ue(t,r);return!(i&&a.has(r)||s&&s.isManual)&&(!!(c!==i||!c&&!s||i&&o.has(r)&&!a.has(r))||u&&!Pe(s,u))}({errors:g.current,error:t,name:e,validFields:j.current,fieldsWithValidation:x.current});if(pe(t)?((x.current.has(e)||te)&&(j.current.add(e),a=a||ue(g.current,e)),g.current=ge(g.current,[e])):(j.current.delete(e),a=a||!ue(g.current,e),ie(g.current,e,t[e])),a&&!n)return be(),!0}),[be,te]),we=Object(a.useCallback)((function(e,t){var r=e.ref,n=e.options,a=r.type,o=re&&H(r)&&D(t)?"":t;return fe(r)&&n?n.forEach((function(e){var t=e.ref;return t.checked=t.value===o})):Ee(r)?Xe(o)?r.files=o:r.value=o:xe(r)?T(r.options).forEach((function(e){return e.selected=o.includes(e.value)})):de(r)&&n?n.length>1?n.forEach((function(e){var t=e.ref;return t.checked=o.includes(t.value)})):n[0].ref.checked=!!o:r.value=o,!!a}),[re]),je=function(e){if(!h.current[e]||!ae.current.dirty&&!ae.current.dirtyFields)return!1;var t=$e(J.current,e),r=E.current.size,n=C.current[e]!==ke(h.current,h.current[e].ref);if(t){var a=_e(e);n=Je(Ye(h.current,a),ue(S.current,a))}var o=(t?P.current:E.current.has(e))!==n;return n?E.current.add(e):E.current.delete(e),P.current=t?n:!!E.current.size,ae.current.dirty?o:r!==E.current.size},Oe=Object(a.useCallback)((function(e){if(je(e)||!ue(b.current,e)&&ae.current.touched)return!!ie(b.current,e,!0)}),[]),Ce=Object(a.useCallback)((function(e,t,r){var n=F(t);for(var a in t){var o="".concat(r||e).concat(n?"[".concat(a,"]"):".".concat(a));q(t[a])&&Ce(e,t[a],o);var i=h.current[o];i&&(we(i,t[a]),Oe(o))}}),[we,Oe]),Se=Object(a.useCallback)((function(e,t){var r=h.current[e];if(r){we(r,t);var n=Oe(e);if(Re(n))return n}else qe(t)||Ce(e,t)}),[Oe,we,Ce]),Ae=Object(a.useCallback)(function(){var e=I(c.a.mark((function e(t,r){var n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=h.current[t]){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Ne(h,v,n);case 5:return a=e.sent,ye(t,a,!1,r),e.abrupt("return",pe(a));case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),[ye,v]),Ie=Object(a.useCallback)(function(){var e=I(c.a.mark((function e(t){var r,n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fe(i,v,Ye(h.current),u,Y.current);case 2:return r=e.sent,n=r.errors,a=O.current,O.current=pe(n),F(t)?(t.forEach((function(e){var t=ue(n,e);t?ie(g.current,e,t):ge(g.current,[e])})),be()):ye(t,ue(n,t)?V({},t,ue(n,t)):{},a!==O.current),e.abrupt("return",pe(g.current));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[be,ye,v,u,i]),Te=Object(a.useCallback)(function(){var e=I(c.a.mark((function e(t){var r,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t||Object.keys(h.current),!te){e.next=3;break}return e.abrupt("return",Ie(r));case 3:if(!F(r)){e.next=9;break}return e.next=6,Promise.all(r.map(function(){var e=I(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ae(t,!0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:return n=e.sent,be(),e.abrupt("return",n.every(Boolean));case 9:return e.next=11,Ae(r);case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[Ie,Ae,be,te]),Ve=function(e){return M.current||w.current.has(e)||w.current.has((e.match(/\w+/)||[])[0])};R.current=R.current?R.current:function(){var e=I(c.a.mark((function e(t){var r,n,a,o,s,l,f,d,m,p,y,w,E,x,j;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.type,n=t.target,a=n?n.name:"",o=h.current,s=g.current,l=o[a],f=ue(s,a),l){e.next=8;break}return e.abrupt("return");case 8:if(m=r===_.BLUR,p=Ge({hasError:!!f,isOnChange:Z,isBlurEvent:m,isOnSubmit:Q,isReValidateOnSubmit:ve,isOnBlur:X,isReValidateOnBlur:he,isSubmitted:L.current}),y=je(a),w=Ve(a)||y,m&&!ue(b.current,a)&&ae.current.touched&&(ie(b.current,a,!0),w=!0),!p){e.next=15;break}return e.abrupt("return",w&&be());case 15:if(!te){e.next=26;break}return e.next=18,Fe(i,v,Ye(o),u,Y.current);case 18:E=e.sent,x=E.errors,j=O.current,O.current=pe(x),d=ue(x,a)?V({},a,ue(x,a)):{},j!==O.current&&(w=!0),e.next=29;break;case 26:return e.next=28,Ne(h,v,l);case 28:d=e.sent;case 29:!ye(a,d)&&w&&be();case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var Ue=Object(a.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=pe(S.current)?Le(h.current):S.current;Fe(i,v,ce(Object.assign(Object.assign({},t),e)),u,Y.current).then((function(e){var t=e.errors,r=O.current;O.current=pe(t),r!==O.current&&be()}))}),[be,v,u]),De=Object(a.useCallback)((function(e,t){!N(R.current)&&e&&function(e,t,r,n){var a=r.ref,o=r.ref,i=o.name,c=o.type,u=r.mutationWatcher;if(c){var s=e[i];if((fe(a)||de(a))&&s){var l=s.options;F(l)&&l.length?(l.filter(Boolean).forEach((function(e,r){var a=e.ref,o=e.mutationWatcher;(a&&me(a)||n)&&(le(a,t),o&&o.disconnect(),ge(l,["[".concat(r,"]")]))})),l&&!l.filter(Boolean).length&&delete e[i]):delete e[i]}else(me(a)||n)&&(le(a,t),u&&u.disconnect(),delete e[i])}else delete e[i]}(h.current,R.current,e,t)}),[]),Be=Object(a.useCallback)((function(e,t){if(e&&(!e||!$e(J.current,e.ref.name)||t)){De(e,t);var r=e.ref.name;g.current=ge(g.current,[r]),b.current=ge(b.current,[r]),C.current=ge(C.current,[r]),[E,x,j,w].forEach((function(e){return e.current.delete(r)})),(ae.current.isValid||ae.current.touched)&&(be(),te&&Ue())}}),[be,te,Ue,De]);var He=function(e){var t=e.name,r=e.type,n=e.types,a=e.message,o=e.preventRender,i=h.current[t];Pe(g.current[t],{type:r,message:a,types:n})||(ie(g.current,t,{type:r,types:n,message:a,ref:i?i.ref:{},isManual:!0}),o||be())};function Ke(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e.name)return console.warn("Missing name @",e);var r,n=e.name,a=e.type,o=e.value,i=Object.assign({ref:e},t),c=h.current,u=Ze(e),s=c[n],l=!0,f=!1;if(u?s&&F(s.options)&&s.options.filter(Boolean).find((function(e){var t=e.ref;return o===t.value})):s)c[n]=Object.assign(Object.assign({},s),t);else{if(a){var d=(m=e,p=function(){return Be(i)},(g=new MutationObserver((function(){me(m)&&(g.disconnect(),p())}))).observe(window.document,{childList:!0,subtree:!0}),g);s=u?Object.assign({options:[].concat(T(s&&s.options||[]),[{ref:e,mutationWatcher:d}]),ref:{type:a,name:n}},t):Object.assign(Object.assign({},i),{mutationWatcher:d})}else s=i;var m,p,g;if(c[n]=s,pe(S.current)||(r=ue(S.current,n),l=N(r),f=$e(J.current,n),l||f||we(s,r)),te&&!f&&ae.current.isValid?Ue():pe(t)||(x.current.add(n),!Q&&ae.current.isValid&&Ne(h,v,s).then((function(e){var t=O.current;pe(e)?j.current.add(n):O.current=!1,t!==O.current&&be()}))),C.current[n]||f&&l||(C.current[n]=l?ke(c,s.ref):r),a)!function(e){var t=e.field.ref,r=e.handleChange,n=e.isRadioOrCheckbox;H(t)&&r&&(t.addEventListener(n?_.CHANGE:_.INPUT,r),t.addEventListener(_.BLUR,r))}({field:u&&s.options?s.options[s.options.length-1]:s,isRadioOrCheckbox:u,handleChange:R.current})}}var et=Object(a.useCallback)((function(e){return function(){var t=I(c.a.mark((function t(r){var n,a,o,s,l,f,d,p,b,y,w,E;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r&&(r.preventDefault(),r.persist()),n={},a={},o=h.current,ae.current.isSubmitting&&(z.current=!0,be()),t.prev=5,!te){t.next=18;break}return a=Le(o),t.next=10,Fe(i,v,ce(a),u,Y.current);case 10:s=t.sent,l=s.errors,f=s.values,g.current=l,n=l,a=f,t.next=30;break;case 18:d=0,p=Object.values(o);case 19:if(!(d<p.length)){t.next=30;break}if(!(b=p[d])){t.next=27;break}return y=b.ref,w=b.ref.name,t.next=25,Ne(h,v,b);case 25:(E=t.sent)[w]?(ie(n,w,E[w]),j.current.delete(w)):(x.current.has(w)&&j.current.add(w),a[w]=ke(o,y));case 27:d++,t.next=19;break;case 30:if(!pe(n)){t.next=36;break}return g.current={},t.next=34,e(ce(a),r);case 34:t.next=38;break;case 36:m&&re&&se(o,n),g.current=n;case 38:return t.prev=38,L.current=!0,z.current=!1,A.current=A.current+1,be(),t.finish(38);case 44:case"end":return t.stop()}}),t,null,[[5,,38,44]])})));return function(e){return t.apply(this,arguments)}}()}),[re,be,te,m,v,u,i]),tt=function(e){var t=e.errors,r=e.dirty,n=e.isSubmitted,a=e.touched,o=e.isValid,i=e.submitCount;h.current={},t||(g.current={}),a||(b.current={}),o||(j.current=new Set,x.current=new Set,O.current=!0),r||(E.current=new Set,P.current=!1),n||(L.current=!1),i||(A.current=0),C.current={},y.current={},w.current=new Set,M.current=!1};Object(a.useEffect)((function(){return function(){k.current=!0,h.current&&Object.values(h.current).forEach((function(e){return Be(e,!0)}))}}),[Be]),te||(O.current=j.current.size>=x.current.size&&pe(g.current));var rt={dirty:P.current,dirtyFields:E.current,isSubmitted:L.current,submitCount:A.current,touched:b.current,isSubmitting:z.current,isValid:Q?L.current&&pe(g.current):O.current},nt={triggerValidation:Te,setValue:Object(a.useCallback)((function(e,t,r){var n=!1,a=F(e);(a?e:[e]).forEach((function(e){var r=Me(e);n=!(!Se(r?e:Object.keys(e)[0],r?t:Object.values(e)[0])&&!a)||Ve(e)})),(n||a)&&be(),(r||a&&t)&&Te(a?void 0:e)}),[be,Se,Te]),register:Object(a.useCallback)((function(e,t){if(!ee)if(Me(e))Ke({name:e},t);else{if(!(q(e)&&"name"in e))return function(t){return t&&Ke(t,e)};Ke(e,t)}}),[S.current,C.current]),unregister:Object(a.useCallback)((function(e){pe(h.current)||(F(e)?e:[e]).forEach((function(e){return Be(h.current[e],!0)}))}),[]),getValues:Object(a.useCallback)((function(e){var t=Le(h.current),r=pe(t)?S.current:t;return e&&e.nest?ce(r):r}),[]),formState:ne?new Proxy(rt,{get:function(e,t){return t in e?(ae.current[t]=!0,e[t]):{}}}):rt},at=Object.assign(Object.assign(Object.assign({removeFieldEventListener:De,reRender:be},te?{validateSchemaIsValid:Ue}:{}),{mode:{isOnBlur:X,isOnSubmit:Q,isOnChange:Z},reValidateMode:{isReValidateOnBlur:he,isReValidateOnSubmit:ve},errorsRef:g,touchedFieldsRef:b,fieldsRef:h,isWatchAllRef:M,watchFieldsRef:w,resetFieldArrayFunctionRef:B,fieldArrayDefaultValues:y,validFieldsRef:j,dirtyFieldsRef:E,fieldsWithValidationRef:x,fieldArrayNamesRef:J,isDirtyRef:P,readFormStateRef:ae,defaultValuesRef:S}),nt);return Object.assign({watch:function(e,t){var r=N(t)?N(S.current)?{}:S.current:t,n=Le(h.current,e),a=w.current;if(pe(r)||(ae.current.dirty=!0),Me(e))return We(n,e,a,r);if(F(e))return e.reduce((function(e,t){return Object.assign(Object.assign({},e),V({},t,We(n,t,a,r)))}),{});M.current=!0;var o=!pe(n)&&n||r;return e&&e.nest?ce(o):o},control:at,handleSubmit:et,reset:Object(a.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(re)for(var r=0,n=Object.values(h.current);r<n.length;r++){var a=n[r];if(a){var o=a.ref,i=a.options,c=Ze(o)&&F(i)?i[0].ref:o;if(H(c))try{c.closest("form").reset();break}catch(u){}}}e&&(S.current=e),Object.values(B.current).forEach((function(e){return ze(e)&&e()})),tt(t),be()}),[]),clearError:Object(a.useCallback)((function(e){N(e)?g.current={}:ge(g.current,F(e)?e:[e]),be()}),[]),setError:Object(a.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0;Me(e)?He(Object.assign({name:e},q(t)?{types:t,type:""}:{type:t,message:r})):F(e)&&(e.forEach((function(e){return He(Object.assign(Object.assign({},e),{preventRender:!0}))})),be())}),[]),errors:g.current},nt)}Object(a.createContext)(null);function tt(){return(tt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var rt=function(e,t){void 0===t&&(t={});var n,i=t,c=i.volume,u=void 0===c?1:c,s=i.playbackRate,l=void 0===s?1:s,f=i.soundEnabled,d=void 0===f||f,m=i.interrupt,p=void 0!==m&&m,h=i.onload,v=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(i,["volume","playbackRate","soundEnabled","interrupt","onload"]),g=o.a.useRef(null),b=o.a.useState(!1),y=b[0],w=b[1],E=o.a.useState(null),x=E[0],j=E[1],O=o.a.useState(null),C=O[0],S=O[1],k=function(){"function"==typeof h&&h.call(this),j(1e3*this.duration())};n=function(){r.e(10).then(r.t.bind(null,"HlzF",7)).then((function(t){g.current=t.Howl;var r=new g.current(tt({src:[e],volume:u,onload:k},v));S(r)}))},Object(a.useEffect)(n,[]),o.a.useEffect((function(){g.current&&C&&S(new g.current(tt({src:[e],volume:u,onload:k},v)))}),[e]),o.a.useEffect((function(){C&&(C.volume(u),C.rate(l))}),[u,l]);var M=o.a.useCallback((function(e){void 0===e&&(e={}),C&&(d||e.forceSoundEnabled)&&(p&&C.stop(),e.playbackRate&&C.rate(e.playbackRate),C.play(e.id),C.once("end",(function(){return w(!1)})),w(!0))}),[C,d,p]),L=o.a.useCallback((function(e){C&&(C.stop(e),w(!1))}),[C]),P=o.a.useCallback((function(e){C&&(C.pause(e),w(!1))}),[C]);return[M,{sound:C,stop:L,pause:P,isPlaying:y,duration:x}]},nt=r("8Ymh"),at=r.n(nt),ot=r("Hrb7"),it=r.n(ot),ct=r("NczM"),ut=r.n(ct),st=r("wCrC"),lt=r.n(st),ft=Object(a.createContext)([!0,function(){}]),dt=function(e){var t=e.children,r=Object(a.useState)(!0),n=r[0],i=r[1],c=rt(at.a,{soundEnabled:n})[0],u=rt(it.a,{soundEnabled:n})[0],s=rt(it.a,{soundEnabled:n})[0],l=rt(ut.a,{soundEnabled:n})[0],f=rt(lt.a,{soundEnabled:n})[0];Object(a.useEffect)((function(){i("off"!==window.localStorage.getItem("sound"))}),[]);var d=Object(a.useCallback)((function(){var e=!n;i(e),window.localStorage.setItem("sound",e?"on":"off")}),[n]),m=Object(a.useMemo)((function(){return{soundEnabled:n,toggleSound:d,playButton:u,playToggle:s,playCard:l,playClap:c,playTangram:f}}),[n,d,u,s,l,c,f]);return o.a.createElement(ft.Provider,{value:m},t)};function mt(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}var pt=function(e,t,r){var i="function"==typeof t?t:function(e){return Object.assign({},t,{},e)};return o.a.forwardRef((function(t,c){var u=t.css,s=mt(t,["css"]),l=Object(a.useContext)(n.ThemeContext),f=i(u,l),d=Object.assign({},r,{},s);return o.a.createElement(e,Object.assign({ref:c,css:f},d))}))},ht=function(e,t,r){var i="function"==typeof t?t:function(e){return Object.assign({},t,{},e)};return o.a.forwardRef((function(t,c){var u=t.as,s=void 0===u?e:u,l=t.css,f=t.deps,d=t.className,m=mt(t,["as","css","deps","className"]),p=Object(a.useContext)(n.ThemeContext),h=Object(n.useCss)(i(l,p),f),v=Object.assign({},r,{},m);return o.a.createElement(s,Object.assign({ref:c},v,{className:h+" "+(d||"")}))}))};function vt(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}var gt=ht("button",{minWidth:0,minHeight:0,flex:"none",fontWeight:"bold",border:"2px solid",borderRadius:2,fontSize:"inherit",color:"errorText",background:"none",cursor:"pointer",p:3,"&:disabled":{opacity:.3,cursor:"not-allowed"},"&:focus":{outline:"none"}}),bt=function(e){var t=e.as,r=void 0===t?"button":t,i=e.css,c=e.onClick,u=vt(e,["as","css","onClick"]),s=Object(a.useContext)(ft).playButton,l=Object(n.useKeyframes)({0:{bg:"pieces.lt2"},14:{bg:"pieces.rh"},28:{bg:"pieces.st2"},42:{bg:"pieces.mt1"},57:{bg:"pieces.st1"},71:{bg:"pieces.lt1"},85:{bg:"pieces.sq"},100:{bg:"pieces.lt2"}}),f=Object(n.useCss)(Object.assign({minWidth:0,minHeight:0,flex:"none",animation:l+" 20s linear infinite both",fontWeight:"bold",border:0,borderRadius:2,fontSize:"inherit",color:"#FFFFFFDD",cursor:"pointer",p:3,"&:disabled":{opacity:.3,cursor:"not-allowed"},"&:focus":{outline:"none"}},i));return o.a.createElement(r,Object.assign({className:f,onClick:c?function(e){s(),c(e)}:void 0},u))},yt=function(e){var t=e.as,r=void 0===t?"button":t,i=e.css,c=e.onClick,u=vt(e,["as","css","onClick"]),s=Object(a.useContext)(ft).playButton,l=Object(n.useKeyframes)({0:{bg:"pieces.lt2"},14:{bg:"pieces.rh"},28:{bg:"pieces.st2"},42:{bg:"pieces.mt1"},57:{bg:"pieces.st1"},71:{bg:"pieces.lt1"},85:{bg:"pieces.sq"},100:{bg:"pieces.lt2"}}),f=Object(n.useCss)(Object.assign({animation:l+" 20s linear infinite both",backgroundSize:"2000% 2000%",boxShadow:"0px 5px 10px #00000080",border:0,borderRadius:"50%",fontSize:5,color:"#FFFFFFDD",size:"button",cursor:"pointer",p:0,"&:disabled":{opacity:.3,cursor:"not-allowed"},"&:focus":{outline:"none"}},i));return o.a.createElement(r,Object.assign({className:f,onClick:c?function(e){s(),c(e)}:void 0},u))},wt=r("i8i4");var Et=function(e){var t=e.children,r=e.title,n=e.onClose,a=e.css,i=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,["children","title","onClose","css"]);return Object(wt.createPortal)(o.a.createElement(y,{onClick:n,css:{position:"fixed",top:0,left:0,right:0,bottom:0,bg:"#00000080",alignItems:"center",justifyContent:"center",animation:"500ms fadeIn ease both",p:3}},o.a.createElement(y,{css:{flex:"0 1 auto",bg:"galleryBackground",color:"galleryText",borderRadius:3,transition:"background-color 250ms, color 250ms",fontSize:3,p:3,gap:3,maxWidth:"95vw"}},o.a.createElement(y,{css:{flexDirection:"row",gap:3,alignItems:"center",justifyContent:"space-between",zIndex:1}},r,o.a.createElement(y,{as:j.o,css:{cursor:"pointer",size:32,ml:r?void 0:"auto"},onClick:n})),o.a.createElement(y,Object.assign({onClick:function(e){return e.stopPropagation()},css:Object.assign({flex:"1"},a)},i),t))),document.getElementById("dialogContainer"))},xt=ht("input",(function(e){return Object.assign({color:"inherit",fontSize:"inherit",bg:"inputBackground",border:"none",borderRadius:2,borderColor:"currentColor",p:2,"&:disabled":{opacity:.5,cursor:"not-allowed"},"&:focus":{outline:"none"}},e)}),{type:"text"}),jt=ht("div",{display:"inline",minWidth:0,minHeight:0,flex:"none"}),Ot=pt(jt,{color:"errorText"},{as:"small"}),Ct=pt(jt,{fontSize:4,fontWeight:"bold"}),St=pt(jt,{fontSize:3,fontWeight:"bold"}),kt=pt(jt,{cursor:"pointer",textDecoration:"underline"});function Mt(e,t,r,n,a,o,i){try{var c=e[o](i),u=c.value}catch(s){return void r(s)}c.done?t(u):Promise.resolve(u).then(n,a)}function Lt(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){Mt(o,n,a,i,c,"next",e)}function c(e){Mt(o,n,a,i,c,"throw",e)}i(void 0)}))}}var Pt=function(e){var t=e.onSignup,r=e.switchTab,n=L(),i=et(),u=i.handleSubmit,s=i.register,f=i.watch,d=i.setError,m=i.errors,p=i.formState,h=f("password"),v=Object(a.useCallback)(function(){var e=Lt(c.a.mark((function e(r){var a,o,i,u,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.email,o=r.username,i=r.password,e.prev=1,e.next=4,l.auth().createUserWithEmailAndPassword(a,i);case 4:return u=e.sent,s=u.user,e.next=8,l.firestore().collection("users").doc(s.uid).set({username:o,signupDate:Date.now()});case 8:t(s),e.next=23;break;case 11:e.prev=11,e.t0=e.catch(1),e.t1=e.t0.code,e.next="auth/weak-password"===e.t1?16:"auth/email-already-in-use"===e.t1?18:"auth/invalid-email"===e.t1?20:22;break;case 16:return d("password","weakPassword",n("Password is too weak")),e.abrupt("break",23);case 18:return d("email","alreadyExists",n("Email address already in use")),e.abrupt("break",23);case 20:return d("email","invalid",n("Invalid email address")),e.abrupt("break",23);case 22:return e.abrupt("return");case 23:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),[t,d,n]);return o.a.createElement(y,{as:"form",onSubmit:u(v),css:{flex:"1",gap:3}},o.a.createElement(y,{css:{gap:3,overflow:"auto",flex:"1"}},o.a.createElement(y,{css:{gap:2}},o.a.createElement("label",null,n("Email address")),o.a.createElement(xt,{type:"email",name:"email",ref:s({required:n("Email address is required")})}),m.email&&o.a.createElement(Ot,null,m.email.message)),o.a.createElement(y,{css:{gap:2}},o.a.createElement("label",null,n("Username")),o.a.createElement(xt,{name:"username",ref:s({required:n("Username is required")})}),m.username&&o.a.createElement(Ot,null,m.username.message)),o.a.createElement(y,{css:{gap:2}},o.a.createElement("label",null,n("Password")),o.a.createElement(xt,{type:"password",name:"password",ref:s({required:n("Password is required")})}),m.password&&o.a.createElement(Ot,null,m.password.message)),o.a.createElement(y,{css:{gap:2}},o.a.createElement("label",null,n("Confirm password")),o.a.createElement(xt,{type:"password",name:"passwordConfirm",ref:s({required:"Password is required",validate:function(e){return e===h||n("Passwords must match")}})}),m.passwordConfirm&&o.a.createElement(Ot,null,m.passwordConfirm.message))),o.a.createElement(bt,{disabled:p.isSubmitting,type:"submit"},n("Sign me up !")),o.a.createElement(y,{css:{alignItems:"center"}},o.a.createElement(kt,{onClick:r},n("I already have an account"))))},At=function(e){var t=e.onSignin,r=e.switchTab,n=L(),i=et(),u=i.handleSubmit,s=i.register,f=i.setError,d=i.errors,m=i.formState,p=Object(a.useCallback)(function(){var e=Lt(c.a.mark((function e(r){var a,o,i,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.email,o=r.password,e.prev=1,e.next=4,l.auth().signInWithEmailAndPassword(a,o);case 4:i=e.sent,u=i.user,t(u),e.next=19;break;case 9:e.prev=9,e.t0=e.catch(1),e.t1=e.t0.code,e.next="auth/invalid-email"===e.t1?14:"auth/user-not-found"===e.t1?14:"auth/user-disabled"===e.t1?14:"auth/wrong-password"===e.t1?16:18;break;case 14:return f("email","invalid",n("Unknown email address")),e.abrupt("break",19);case 16:return f("password","mismatch",n("Incorrect password")),e.abrupt("break",19);case 18:return e.abrupt("return");case 19:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),[t,f,n]);return o.a.createElement(y,{as:"form",onSubmit:u(p),css:{flex:"1",gap:3}},o.a.createElement(y,{css:{gap:3,overflow:"auto",flex:"1"}},o.a.createElement(y,{css:{gap:2}},o.a.createElement("label",null,n("Email address")),o.a.createElement(xt,{type:"email",name:"email",ref:s({required:n("Email address is required")})}),d.email&&o.a.createElement(Ot,null,d.email.message)),o.a.createElement(y,{css:{gap:2}},o.a.createElement("label",null,n("Password")),o.a.createElement(xt,{type:"password",name:"password",ref:s({required:n("Password is required")})}),d.password&&o.a.createElement(Ot,null,d.password.message))),o.a.createElement(bt,{type:"submit",disabled:m.isSubmitting},n("Sign me in !")),o.a.createElement(y,{css:{alignItems:"center"}},o.a.createElement(kt,{onClick:r},n("I don't have an account"))))},It=function(e){var t=e.deferred,r=L(),n=Object(a.useState)("signup"),i=n[0],c=n[1];return o.a.createElement(Et,{title:"signup"===i?o.a.createElement(Ct,null,r("Create your account")):o.a.createElement(Ct,null,r("Connect to your account")),onClose:function(){return t.reject("CLOSED")},css:{gap:3}},"signup"===i?o.a.createElement(Pt,{onSignup:t.resolve,switchTab:function(){return c("signin")}}):o.a.createElement(At,{onSignin:t.resolve,switchTab:function(){return c("signup")}}))},zt=pt(y,{fontSize:3,p:2,borderRadius:1,bg:"notificationBackground",color:"galleryText",animation:"500ms fadeIn both",boxShadow:"0px 0px 10px #00000080"}),Rt=Object(a.createContext)(null),Tt=function(e){var t=e.children,r=Object(a.useRef)(),n=Object(a.useState)(null),i=n[0],c=n[1],u=Object(a.useCallback)((function(e){c((function(t){return t&&clearTimeout(t.timeoutId),{content:e,timeoutId:setTimeout((function(){c(null)}),2e3)}}))}),[]);return o.a.createElement(Rt.Provider,{value:u},t,i&&Object(wt.createPortal)(o.a.createElement(y,{css:{position:"fixed",top:0,left:0,bottom:0,right:0,pointerEvents:"none",alignItems:"center",justifyContent:"center"}},o.a.createElement(zt,{ref:r},i.content)),document.getElementById("notificationContainer")))};function Vt(e){var t=0;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return Ut(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ut(e,t)}(e)))return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}function Ut(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Nt=Object(a.createContext)([]),Dt=function(e){var t=e.children,r=Object(a.useState)(null),n=r[0],i=r[1];return Object(a.useEffect)((function(){return l.firestore().collection("tangrams").onSnapshot((function(e){for(var t,r=[],n=Vt(e.docs);!(t=n()).done;){var a=t.value,o=a.id,c=a.data();r.push(Object.assign({id:o},c))}i(r)}))}),[]),o.a.createElement(Nt.Provider,{value:n},t)};var Ft=function(e){var t=e.uid,r=e.size,n=void 0===r?40:r,a=e.css,i=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,["uid","size","css"]);return o.a.createElement(y,Object.assign({as:"img",src:"https://api.adorable.io/avatars/"+n+"/"+t+".png",css:Object.assign({border:"2px solid",borderColor:"galleryText",borderRadius:"50%",size:n},a)},i))};function Bt(e){var t=0;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return qt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qt(e,t)}(e)))return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}function qt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ht(e,t,r,n,a,o,i){try{var c=e[o](i),u=c.value}catch(s){return void r(s)}c.done?t(u):Promise.resolve(u).then(n,a)}function Wt(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){Ht(o,n,a,i,c,"next",e)}function c(e){Ht(o,n,a,i,c,"throw",e)}i(void 0)}))}}var Gt=function(e){var t=e.currentUser,r=e.onClose,n=Object(a.useContext)(er).updateEmail,i=L(),u=Object(a.useContext)(Rt),s=et(),l=s.handleSubmit,f=s.register,d=s.setError,m=s.errors,p=s.formState,h=Object(a.useCallback)(function(){var e=Wt(c.a.mark((function e(a){var o,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=a.password,s=a.newEmail,e.prev=1,e.next=4,n(t,o,s);case 4:u(i("Email address updated sucessfuly")),r(),e.next=22;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0),e.t1=e.t0.code,e.next="auth/email-already-in-use"===e.t1?14:"auth/invalid-email"===e.t1?16:"auth/wrong-password"===e.t1?18:20;break;case 14:return d("newEmail","alreadyExists",i("Email address already in use")),e.abrupt("break",22);case 16:return d("newEmail","invalid",i("Invalid email address")),e.abrupt("break",22);case 18:return d("password","mismatch",i("Incorrect password")),e.abrupt("break",22);case 20:return u(i("An error occured, please retry later")),e.abrupt("return");case 22:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),[t,n,d,r,i,u]);return o.a.createElement(y,{as:"form",onSubmit:l(h),css:{flex:"1",gap:3}},o.a.createElement(y,{css:{gap:3,overflow:"auto",flex:"1"}},o.a.createElement(y,{css:{gap:2}},o.a.createElement("label",null,i("Password")),o.a.createElement(xt,{type:"password",name:"password",ref:f({required:i("Password is required")})}),m.password&&o.a.createElement(Ot,null,m.password.message)),o.a.createElement(y,{css:{gap:2}},o.a.createElement("label",null,i("New email address")),o.a.createElement(xt,{type:"email",name:"newEmail",ref:f({required:i("Email address is required")})}),m.newEmail&&o.a.createElement(Ot,null,m.newEmail.message))),o.a.createElement(bt,{disabled:p.isSubmitting,type:"submit"},i("Change email address")),o.a.createElement(y,{css:{alignItems:"center"}},o.a.createElement(kt,{onClick:r},i("Back"))))},_t=function(e){var t=e.currentUser,r=e.onClose,n=Object(a.useContext)(er).updateUsername,i=L(),u=Object(a.useContext)(Rt),s=et(),l=s.handleSubmit,f=s.register,d=s.errors,m=s.formState,p=Object(a.useCallback)(function(){var e=Wt(c.a.mark((function e(a){var o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=a.newUsername,e.prev=1,e.next=4,n(t,o);case 4:u(i("Username updated sucessfuly")),r(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0),u(i("An error occured, please retry later"));case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),[t,n,r,i,u]);return o.a.createElement(y,{as:"form",onSubmit:l(p),css:{flex:"1",gap:3}},o.a.createElement(y,{css:{gap:3,overflow:"auto",flex:"1"}},o.a.createElement(y,{css:{gap:2}},o.a.createElement("label",null,i("New username")),o.a.createElement(xt,{type:"text",name:"newUsername",ref:f({required:i("Username is required")})}),d.newUsername&&o.a.createElement(Ot,null,d.newUsername.message))),o.a.createElement(bt,{disabled:m.isSubmitting,type:"submit"},i("Change username")),o.a.createElement(y,{css:{alignItems:"center"}},o.a.createElement(kt,{onClick:r},i("Back"))))},Yt=function(e){var t=e.currentUser,r=e.onClose,n=Object(a.useContext)(er).updateUsername,i=L(),u=Object(a.useContext)(Rt),s=et(),l=s.handleSubmit,f=s.register,d=s.watch,m=s.setError,p=s.errors,h=s.formState,v=d("newPassword"),g=Object(a.useCallback)(function(){var e=Wt(c.a.mark((function e(a){var o,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=a.password,s=a.newPassword,e.prev=1,e.next=4,n(t,o,s);case 4:u(i("Password changed sucessfuly")),r(),e.next=19;break;case 8:e.prev=8,e.t0=e.catch(1),e.t1=e.t0.code,e.next="auth/weak-password"===e.t1?13:"auth/wrong-password"===e.t1?15:17;break;case 13:return m("newPassword","weakPassword",i("Password is too weak")),e.abrupt("break",19);case 15:return m("password","mismatch",i("Incorrect password")),e.abrupt("break",19);case 17:return u(i("An error occured, please retry later")),e.abrupt("return");case 19:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),[t,n,r,m,i,u]);return o.a.createElement(y,{as:"form",onSubmit:l(g),css:{flex:"1",gap:3}},o.a.createElement(y,{css:{gap:3,overflow:"auto",flex:"1"}},o.a.createElement(y,{css:{gap:2}},o.a.createElement("label",null,i("Current password")),o.a.createElement(xt,{type:"password",name:"password",ref:f({required:i("Password is required")})}),p.password&&o.a.createElement(Ot,null,p.password.message)),o.a.createElement(y,{css:{gap:2}},o.a.createElement("label",null,i("New password")),o.a.createElement(xt,{type:"password",name:"newPassword",ref:f({required:i("Password is required")})}),p.newPassword&&o.a.createElement(Ot,null,p.newPassword.message)),o.a.createElement(y,{css:{gap:2}},o.a.createElement("label",null,i("Confirm new password")),o.a.createElement(xt,{type:"password",name:"newPasswordConfirm",ref:f({required:"Password is required",validate:function(e){return e===v||i("Passwords must match")}})}),p.newPasswordConfirm&&o.a.createElement(Ot,null,p.newPasswordConfirm.message))),o.a.createElement(bt,{disabled:h.isSubmitting,type:"submit"},i("Change password")),o.a.createElement(y,{css:{alignItems:"center"}},o.a.createElement(kt,{onClick:r},i("Back"))))},Jt=function(e){var t=e.uid,r=e.deferred,n=L(),i=Object(a.useContext)(M).language,c=Object(a.useContext)(er),u=c.currentUser,s=c.usersMetadata,l=c.logout,f=s[t],d=f.username,m=f.signupDate,p=Object(a.useState)(!1),h=p[0],v=p[1],g=Object(a.useState)(!1),b=g[0],w=g[1],E=Object(a.useState)(!1),x=E[0],j=E[1],O=Object(a.useContext)(Nt),C=Object(a.useMemo)((function(){for(var e,r=0,n=Bt(O);!(e=n()).done;){var a=e.value;a.uid===t&&a.claps&&(r+=a.claps)}return r}),[O,t]);return o.a.createElement(Et,{onClose:r.reject,css:{gap:4,flex:"1",minWidth:"268px",overflow:"auto",pt:4,mt:-4}},o.a.createElement(y,{css:{gap:3,alignItems:"center"}},o.a.createElement(Ft,{uid:t,size:86,css:{}}),o.a.createElement(Ct,null,d),o.a.createElement(y,{css:{gap:2,alignItems:"center"}},u&&o.a.createElement(jt,{css:{fontSize:2}},u.firebaseUser.email),o.a.createElement(jt,{css:{fontSize:2}},n("Joined {signupDate}",{signupDate:new Intl.DateTimeFormat(i).format(m)}))),o.a.createElement(y,{css:{flexDirection:"row",alignItems:"flex-end"}},o.a.createElement(jt,{css:{fontSize:5}},"ðŸ‘"),o.a.createElement(jt,{css:{fontSize:3}},"x",C))),u&&u.uid===t&&o.a.createElement(y,{css:{gap:3}},h?o.a.createElement(Gt,{currentUser:u,onClose:function(){return v(!1)}}):b?o.a.createElement(_t,{currentUser:u,onClose:function(){return w(!1)}}):x?o.a.createElement(Yt,{currentUser:u,onClose:function(){return j(!1)}}):o.a.createElement(o.a.Fragment,null,o.a.createElement(y,{css:{gap:3,alignItems:"center"}},o.a.createElement(kt,{onClick:function(){return v(!0)}},n("Change email address")),o.a.createElement(kt,{onClick:function(){return w(!0)}},n("Change username")),o.a.createElement(kt,{onClick:function(){return j(!0)}},n("Change password"))),o.a.createElement(gt,{onClick:l},n("Log out")))))},Kt=function(){var e=this;this.promise=new Promise((function(t,r){e.resolve=t,e.reject=r}))};function $t(e){var t=0;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return Xt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Xt(e,t)}(e)))return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}function Xt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Qt(e,t,r,n,a,o,i){try{var c=e[o](i),u=c.value}catch(s){return void r(s)}c.done?t(u):Promise.resolve(u).then(n,a)}function Zt(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){Qt(o,n,a,i,c,"next",e)}function c(e){Qt(o,n,a,i,c,"throw",e)}i(void 0)}))}}var er=Object(a.createContext)(null),tr=function(e){var t=e.children,r=L(),n=Object(a.useContext)(Rt),i=Object(a.useRef)(),u=Object(a.useState)(null),s=u[0],f=u[1],d=Object(a.useState)(null),m=d[0],p=d[1],h=Object(a.useState)(null),v=h[0],g=h[1],b=Object(a.useState)(null),y=b[0],w=b[1];Object(a.useEffect)((function(){return l.auth().onAuthStateChanged(function(){var e=Zt(c.a.mark((function e(t){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=4;break}f(null),e.next=8;break;case 4:return e.next=6,l.firestore().collection("users").doc(t.uid).get();case 6:r=e.sent,f(Object.assign({uid:t.uid},r.data(),{firebaseUser:t}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(a.useEffect)((function(){return l.firestore().collection("users").onSnapshot((function(e){for(var t,r={},n=$t(e.docs);!(t=n()).done;){var a=t.value,o=a.data();r[a.id]=o}w(r)}))}),[]);var E=Object(a.useCallback)((function(){var e=new Kt;return p(e),e.promise.finally((function(){return p(null)}))}),[]),x=Object(a.useCallback)(Zt(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v&&v.uid===s.uid&&v.deferred.resolve(),e.next=3,l.auth().signOut();case 3:n(r("Logged out"));case 4:case"end":return e.stop()}}),e)}))),[n,r,s,v]);i.current=Object(a.useCallback)(Zt(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=2;break}return e.abrupt("return",s);case 2:return e.abrupt("return",E());case 3:case"end":return e.stop()}}),e)}))),[s,E]);var j=Object(a.useCallback)((function(e){var t=new Kt;return g({uid:e,deferred:t}),t.promise.finally((function(){return g(null)}))}),[]),O=Object(a.useCallback)(function(){var e=Zt(c.a.mark((function e(t,r){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.firestore().collection("users").doc(t.uid).update({username:r});case 2:f(Object.assign({},t,{username:r}));case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),[]),C=Object(a.useCallback)(function(){var e=Zt(c.a.mark((function e(t,r,n){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.auth.EmailAuthProvider.credential(t.firebaseUser.email,r),e.next=3,t.firebaseUser.reauthenticateWithCredential(a);case 3:return e.next=5,t.firebaseUser.updatePassword(n);case 5:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),[]),S=Object(a.useCallback)(function(){var e=Zt(c.a.mark((function e(t,r,n){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.auth.EmailAuthProvider.credential(t.firebaseUser.email,n),e.next=3,t.firebaseUser.reauthenticateWithCredential(a);case 3:return e.next=5,t.firebaseUser.updateEmail(r);case 5:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),[]),k=Object(a.useMemo)((function(){return{currentUser:s,login:E,logout:x,getCurrentUserRef:i,usersMetadata:y,showProfile:j,updateUsername:O,updatePassword:C,updateEmail:S}}),[s,E,x,y,j,O,C,S]);return Object(a.useEffect)((function(){s&&n(r("Logged in as {username}",{username:s.username}))}),[s,n,r]),o.a.createElement(er.Provider,{value:k},t,m&&o.a.createElement(It,{deferred:m}),v&&o.a.createElement(Jt,v))},rr=function(e){for(var t,r,n=e.length;0!==n;)r=Math.floor(Math.random()*n),t=e[n-=1],e[n]=e[r],e[r]=t;return e},nr=function(e){(function(e){return"touches"in e})(e)&&e.touches.length<2&&e.preventDefault&&e.preventDefault()};var ar=function(e){var t=e.tangram,r=e.completed,i=e.selected,c=e.css,u=e.onBadgeClick,s=e.onClick,l=e.onLongPress,f=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,["tangram","completed","selected","css","onBadgeClick","onClick","onLongPress"]),d=t.path,m=t.width,p=t.height,h=t.uid,v=t.approved,g=t.emoji,b=Object(a.useMemo)((function(){return function(e){return e.edges>16?0:e.edges>8?1:2}(t)}),[t]),w=Object(a.useContext)(ft).playCard,E=Object(a.useContext)(n.ThemeContext).colors.difficulties[b],x=function(e,t){var r=void 0===t?{}:t,n=r.isPreventDefault,o=void 0!==n&&n,i=r.delay,c=void 0===i?1e3:i,u=Object(a.useRef)(),s=Object(a.useRef)(),l=Object(a.useCallback)((function(t){o&&t.target&&(t.target.addEventListener("touchend",nr,{passive:!1}),s.current=t.target),u.current=setTimeout((function(){return e(t)}),c)}),[e,c]),f=Object(a.useCallback)((function(){u.current&&clearTimeout(u.current),o&&s.current&&s.current.removeEventListener("touchend",nr)}),[]);return{onMouseDown:l,onTouchStart:l,onMouseUp:f,onMouseLeave:f,onTouchEnd:f}}(Object(a.useCallback)((function(){l&&l(t)}),[l,t]),1e3);return o.a.createElement(y,Object.assign({css:c,onClick:s?function(e){w(),s(e)}:void 0},x,f),o.a.createElement(y,{css:{opacity:h&&!1===v?.5:1,borderRadius:5,boxShadow:i?"0px 0px 0px 4px "+E:"0px 0px 0px 1px rgba(0, 0, 0, 0.1)",m:1,bg:"background",transition:"background-color 250ms",p:3,textAlign:"center",position:"relative",cursor:s||l?"pointer":void 0,width:128,height:178},deps:[E,i,h,v]},o.a.createElement(y,{as:"svg",css:{flex:"1",justifyContent:"center",fill:E,stroke:void 0,strokeWidth:void 0},deps:[E],viewBox:"0 0 "+m+" "+p,dangerouslySetInnerHTML:{__html:'<path d="'+d+'" />'}}),r&&g&&o.a.createElement(y,{css:{position:"absolute",top:2,left:2,fontSize:"30px"}},g),h&&o.a.createElement(Ft,{uid:h,css:{position:"absolute",bottom:1,right:1,cursor:u?"pointer":void 0},onClick:u?function(e){e.stopPropagation(),u(h)}:void 0})))};var or=function(e){var t=e.css,r=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,["css"]),i=Object(n.useKeyframes)({from:{transform:"rotate(0deg)"},to:{transform:"rotate(360deg)"}}),c=Object(n.useKeyframes)({0:{borderTopColor:"pieces.lt2"},14:{borderTopColor:"pieces.rh"},28:{borderTopColor:"pieces.st2"},42:{borderTopColor:"pieces.mt1"},57:{borderTopColor:"pieces.st1"},71:{borderTopColor:"pieces.lt1"},85:{borderTopColor:"pieces.sq"},100:{borderTopColor:"pieces.lt2"}}),u=Object(a.useContext)(n.ThemeContext);return o.a.createElement(y,Object.assign({css:Object.assign({position:"relative",alignItems:"center",justifyContent:"center",size:1.25*u.sizes.button+"px"},t,{"& > div":{position:"absolute",size:"button",borderColor:"transparent",borderStyle:"solid",borderWidth:"loader",borderRadius:"50%",animation:i+" 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite, "+c+" 10s linear infinite both","&:nth-child(1)":{animationDelay:"-0.45s"},"&:nth-child(2)":{animationDelay:"-0.3s"},"&:nth-child(3)":{animationDelay:"-0.15s"}}})},r),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null))};function ir(e){return function(e){if(Array.isArray(e))return cr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return cr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cr(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ur=pt(y,(function(e,t){return Object.assign({},e,{p:1,alignItems:"center",cursor:"pointer",position:"sticky",top:0,zIndex:1,background:"linear-gradient(0deg, rgba(0,0,0,0) 0%, "+t.colors.galleryBackground+" 50%)"})})),sr=function(){var e=L(),t=Object(a.useContext)(er),r=t.usersMetadata,n=t.showProfile,i=Object(a.useContext)(Or),c=i.setGalleryOpened,u=i.tangramsByCategory,s=i.setPlaylist,l=i.completedTangrams,f=i.getTangramRef,d=i.shareTangrams,m=Object(a.useState)([]),p=m[0],h=m[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement(Et,{title:o.a.createElement(Ct,null,e("Tangram gallery")),css:{gap:3,width:"500px",maxWidth:"80vw"},onClose:function(){return c(!1)}},null===u||null===r?o.a.createElement(o.a.Fragment,null,o.a.createElement(or,{css:{m:"auto"}})):o.a.createElement(o.a.Fragment,null,o.a.createElement(y,{css:{flex:"1",overflow:"auto",gap:4}},Object.keys(u).map((function(t){return o.a.createElement(y,{key:t,css:{gap:3}},o.a.createElement(ur,{onClick:function(){return e=u[t],void(p.length&&p.every((function(t){return e.includes(t)}))?h([]):h(rr(ir(e))));var e}},o.a.createElement(St,null,e(t))),o.a.createElement(y,{css:{display:"grid",gridTemplateColumns:"repeat(auto-fill, 136px)",gridColumnGap:2,gridRowGap:2,justifyContent:"center",justifyItems:"center",alignItems:"center"}},u[t].map((function(e){return o.a.createElement(ar,{key:e.id,tangram:e,completed:l[e.id],selected:p.some((function(t){return t.id===e.id})),onClick:function(){return t=e,console.log(t),void h((function(e){return e.some((function(e){return e.id===t.id}))?p.filter((function(e){return e.id!==t.id})):[].concat(ir(p),[t])}));var t},onBadgeClick:n,onLongPress:f.current})}))))}))),o.a.createElement(y,{css:{flexDirection:"row",gap:2}},o.a.createElement(bt,{onClick:function(){s(p.length?p:rr(Object.values(u).flat())),c(null)},css:{flex:"1"}},0===p.length?e("Play now !"):1===p.length?e("Start 1 tangram !"):e("Start {count} tangrams !",{count:p.length})),o.a.createElement(bt,{disabled:0===p.length,onClick:function(){return d(p)}},o.a.createElement(y,{as:j.i,size:20}))))))},lr=function(e){var t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)},fr=["ðŸ’ª","ðŸ”¥","ðŸ˜±","ðŸ˜Ž","ðŸŽ‰","ðŸ¥‡","ðŸš€","ðŸ‘Œ","ðŸ‘","ðŸ˜µ"];function dr(e,t,r,n,a,o,i){try{var c=e[o](i),u=c.value}catch(s){return void r(s)}c.done?t(u):Promise.resolve(u).then(n,a)}function mr(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){dr(o,n,a,i,c,"next",e)}function c(e){dr(o,n,a,i,c,"throw",e)}i(void 0)}))}}var pr=function(e){var t=e.tangram,r=e.deferred;return o.a.createElement(Et,{onClose:r.reject,css:{gap:3,minWidth:"268px"}},o.a.createElement(y,{css:{gap:3,overflow:"auto",flex:"1"}},o.a.createElement(ar,{selected:!0,tangram:t,css:{alignSelf:"center"}}),o.a.createElement(y,{css:{flexDirection:"row",justifyContent:"center",alignItems:"flex-end"}},o.a.createElement(jt,{css:{fontSize:5}},"ðŸ‘"),o.a.createElement(jt,{css:{fontSize:3}},"x",t.claps||0))))},hr=function(e){var t=e.tangram,r=e.deferred,n=Object(a.useContext)(er).currentUser,i=n&&!t.id,u=L(),s=Object(a.useContext)(Rt),f=et({defaultValues:Object(a.useMemo)((function(){return{category:t.category,emoji:"digits"!==t.category&&"letters"!==t.category?t.emoji:void 0,letterIndex:"letters"===t.category?x.indexOf(t.emoji):void 0,digitIndex:"digits"===t.category?E.indexOf(t.emoji):void 0}}),[t])}),d=f.handleSubmit,m=f.register,p=f.watch,h=function(){var e=mr(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm(u("Are you sure you want to delete this tangram ?"))){e.next=5;break}return e.next=3,l.firestore().collection("tangrams").doc(t.id).delete();case 3:s(u("Tangram sucessfuly deleted")),r.resolve();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=mr(c.a.mark((function e(a){var o,f,d,m,p,h;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=a.category,f=a.emoji,d=a.letterIndex,m=a.digitIndex,p="letters"===o?x[d]:"digits"===o?E[m]:f||fr[Math.floor(Math.random()*fr.length)],h=Object.assign({},t,{category:o,emoji:p}),!i){e.next=9;break}return e.next=6,l.firestore().collection("tangrams").add(Object.assign({},h,{uid:n.uid,approved:!1}));case 6:s(u("Tangram submitted for review")),e.next=12;break;case 9:return e.next=11,l.firestore().collection("tangrams").doc(t.id).update(h);case 11:s(u("Tangram successfuly modified"));case 12:r.resolve();case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=p("emoji"),b=p("category");return o.a.createElement(Et,{title:o.a.createElement(Ct,null,u(i?"Submit your tangram":"Edit your tangram")),onClose:r.reject,as:"form",onSubmit:d(v),css:{gap:3,minWidth:"268px"}},o.a.createElement(y,{css:{gap:3,overflow:"auto",flex:"1"}},o.a.createElement(ar,{selected:!0,tangram:Object.assign({},t,{emoji:g}),css:{alignSelf:"center"}}),t.approved&&o.a.createElement(y,{css:{flexDirection:"row",justifyContent:"center",alignItems:"flex-end"}},o.a.createElement(jt,{css:{fontSize:5}},"ðŸ‘"),o.a.createElement(jt,{css:{fontSize:3}},"x",t.claps||0),t.id&&o.a.createElement(y,{as:j.i,css:{cursor:"pointer",size:32},onClick:function(){var e=window.location.origin+"?tangram="+t.id;n&&(e+="&uid="+n.uid),lr(e),s(u("Challenge link copied to clipboard"))}})),o.a.createElement(y,{css:{gap:2}},o.a.createElement("label",null,u("Category")),o.a.createElement(xt,{as:"select",name:"category",ref:m},w.map((function(e){return o.a.createElement("option",{key:e,value:e},u(e))})))),"digits"===b?o.a.createElement(y,{css:{gap:2}},o.a.createElement("label",null,u("Victory emoji")),o.a.createElement(xt,{as:"select",name:"digitIndex",ref:m},E.map((function(e,t){return o.a.createElement("option",{key:t,value:t},e)})))):"letters"===b?o.a.createElement(y,{css:{gap:2}},o.a.createElement("label",null,u("Victory emoji")),o.a.createElement(xt,{as:"select",name:"letterIndex",ref:m},x.map((function(e,t){return o.a.createElement("option",{key:t,value:t},e)})))):o.a.createElement(y,{css:{gap:2}},o.a.createElement("label",null,u("Victory emoji")),o.a.createElement(xt,{name:"emoji",ref:m,placeholder:u("Leave empty for random emoji")}))),o.a.createElement(bt,{type:"submit"},u(i?"Submit !":"Edit !")),!i&&o.a.createElement(y,{css:{alignItems:"center"}},o.a.createElement(kt,{onClick:h},u("Or delete tangram"))))},vr=function(e){var t=e.tangram,r=e.deferred,n=Object(a.useContext)(er).currentUser;return n&&(n.isAdmin||!t.id||t.uid===n.uid)?o.a.createElement(hr,{tangram:t,deferred:r}):o.a.createElement(pr,{tangram:t,deferred:r})},gr=function(e,t){return t.edges===e.edges?t.percent-e.percent:t.edges-e.edges},br=function(e,t){return E.indexOf(e.emoji)-E.indexOf(t.emoji)},yr=function(e,t){return x.indexOf(e.emoji)-x.indexOf(t.emoji)},wr=function(e){var t=e.uid,r=e.tangrams,n=e.deferred,i=L(),c=Object(a.useContext)(er),u=c.usersMetadata,s=c.showProfile,l=Object(a.useContext)(Or),f=l.setPlaylist,d=l.getTangramRef,m=u[t]?u[t].username:null;return o.a.createElement(Et,{title:o.a.createElement(Ct,null,m?i("{username} challenged you",{username:m}):i("Rise to the challenge")),onClose:n.reject,css:{gap:3,minWidth:"268px",maxWidth:"500px"}},o.a.createElement(y,{css:{flex:"1",overflow:"auto",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",m:-1}},r.map((function(e){return o.a.createElement(ar,{key:e.id,selected:!0,tangram:e,css:{m:1},onBadgeClick:s,onLongPress:d.current})}))),o.a.createElement(bt,{onClick:function(){f(r),n.resolve()}},i("Let's go !")))};function Er(e,t,r,n,a,o,i){try{var c=e[o](i),u=c.value}catch(s){return void r(s)}c.done?t(u):Promise.resolve(u).then(n,a)}function xr(e){var t=0;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return jr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jr(e,t)}(e)))return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}function jr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Or=Object(a.createContext)(null),Cr=function(e){var t=e.children,r=L(),n=Object(a.useContext)(Rt),i=Object(a.useContext)(er).currentUser,u=Object(a.useContext)(Nt),s=Object(a.useState)(!1),f=s[0],d=s[1],m=Object(a.useState)(!1),p=m[0],h=m[1],v=Object(a.useRef)(),g=Object(a.useState)(null),b=g[0],y=g[1],w=Object(a.useState)(0),E=w[0],x=w[1],j=Object(a.useState)({}),O=j[0],C=j[1],S=Object(a.useState)(null),k=S[0],M=S[1],P=Object(a.useState)(null),A=P[0],I=P[1],z=Object(a.useState)(null),R=z[0],T=z[1];Object(a.useEffect)((function(){if(i)return l.firestore().collection("users").doc(i.uid).collection("tangrams").onSnapshot((function(e){for(var t,r={},n=xr(e.docs);!(t=n()).done;){var a=t.value,o=a.id,i=a.data();r[o]=i}C(r)}));C({})}),[i]),Object(a.useEffect)((function(){if(null!==u){for(var e,t={},r=xr(u);!(e=r()).done;){var n=e.value;(!n.uid||n.approved||i&&(i.isAdmin||n.uid===i.uid))&&(t[n.category]||(t[n.category]=[]),t[n.category].push(n))}for(var a,o={},c=xr(Object.keys(t).sort());!(a=c()).done;){var s=a.value;o[s]=t[s].sort("letters"===s?yr:"digits"===s?br:gr)}M(o)}}),[u,i]),Object(a.useEffect)((function(){if(u&&!f){if(!b&&window.location.search){var e=new URLSearchParams(window.location.search);if(e.has("tangrams")){var t=e.get("tangrams").split(","),r=e.get("uid"),n=u.filter((function(e){return t.includes(e.id)}));if(n.length){window.history.replaceState({},document.title,window.location.origin);var a=new Kt;T({deferred:a,tangrams:n,uid:r}),a.promise.finally((function(){return T(null)}))}}}d(!0)}}),[u,f,b]);var V=Object(a.useCallback)((function(e){var t=window.location.origin+"/?tangrams="+e.map((function(e){return e.id})).join(",");i&&(t+="&uid="+i.uid),lr(t),n(r("Challenge link copied to clipboard"))}),[n,r,i]),U=Object(a.useCallback)((function(){x((function(e){return e+1}))}),[]),N=Object(a.useCallback)(function(){var e,t=(e=c.a.mark((function e(t,r){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=8;break}return e.next=3,l.firestore().collection("users").doc(i.uid).collection("tangrams").doc(t.id).get();case 3:if(e.sent.exists){e.next=8;break}return e.next=8,l.firestore().collection("users").doc(i.uid).collection("tangrams").doc(t.id).set({completionTime:r});case 8:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){Er(o,n,a,i,c,"next",e)}function c(e){Er(o,n,a,i,c,"throw",e)}i(void 0)}))});return function(e,r){return t.apply(this,arguments)}}(),[i]);v.current=Object(a.useCallback)((function(e){var t=new Kt;return I({deferred:t,tangram:e}),t.promise.finally((function(){return I(null)}))}),[]);var D=Object(a.useMemo)((function(){return{galleryOpened:p,setGalleryOpened:h,requestSave:U,saveRequestId:E,playlist:b,setPlaylist:y,tangramsByCategory:k,getTangramRef:v,markTangramAsComplete:N,completedTangrams:O,shareTangrams:V}}),[p,U,E,b,k,N,O,V]);return o.a.createElement(Or.Provider,{value:D},t,p&&o.a.createElement(sr,null),A&&o.a.createElement(vr,A),R&&o.a.createElement(wr,R))},Sr=Object(a.createContext)([!0,function(){}]),kr=function(){return Object(a.useContext)(Sr)},Mr=function(e){var t=e.children,r=Object(a.useState)(!0),n=r[0],i=r[1];Object(a.useEffect)((function(){var e=window.localStorage.getItem("showBackgroundPattern");if(null!==e)try{var t=JSON.parse(e);i(!!JSON.parse(t))}catch(r){window.localStorage.removeItem("showBackgroundPattern")}else i(!0)}),[]);var c=Object(a.useCallback)((function(){var e=!n;i(e),window.localStorage.setItem("showBackgroundPattern",JSON.stringify(e))}),[n]),u=Object(a.useMemo)((function(){return[n,c]}),[n,c]);return o.a.createElement(Sr.Provider,{value:u},t)},Lr=function(e,t){var r=new window.ClipperLib.ClipperOffset,n=new window.ClipperLib.Paths;if(r.AddPaths([e.map((function(e){return{X:e.x,Y:e.y}}))],window.ClipperLib.JoinType.jtMiter,window.ClipperLib.EndType.etClosedPolygon),r.MiterLimit=0,r.ArcTolerance=0,r.Execute(n,t),n.length)return n[0].map((function(e){var t=e.X,r=e.Y;return new d.a.Point(t,r)}))},Pr=function(e,t){var r=[new d.a.Point(0,0),new d.a.Point(2*e,0),new d.a.Point(e,e)],n=new d.a.Path({name:"display",segments:r,closed:!0}),a=new d.a.Path({name:"collision",segments:Lr(r,-1),closed:!0}),o=new d.a.Path({name:"insetBorder",segments:Lr(r,-4),closed:!0,strokeWidth:4}),i=function(e){var t=e[1].getDistance(e[2]),r=e[0].getDistance(e[2]),n=e[0].getDistance(e[1]),a=t+r+n,o=(e[0].x*t+e[1].x*r+e[2].x*n)/a,i=(e[0].y*t+e[1].y*r+e[2].y*n)/a;return new d.a.Point(o,i)}(r),c=new d.a.Point(d.a.view.center.x+i.x-n.bounds.width/2,d.a.view.center.y+i.y-n.bounds.height/2);return new d.a.Group({children:[n,a,o],position:d.a.view.center,pivot:c,data:{id:t,collisions:new Set},applyMatrix:!0})},Ar=function(e,t){var r=[new d.a.Point(0,0),new d.a.Point(2*e,0),new d.a.Point(3*e,e),new d.a.Point(e,e)],n=new d.a.Path({name:"display",segments:r,closed:!0}),a=new d.a.Path({name:"collision",segments:Lr(r,-1),closed:!0,strokeWidth:1}),o=new d.a.Path({name:"insetBorder",segments:Lr(r,-4),closed:!0,strokeWidth:4});return new d.a.Group({children:[n,a,o],position:d.a.view.center,data:{id:t,collisions:new Set},applyMatrix:!0})};function Ir(e){var t=0;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return zr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zr(e,t)}(e)))return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}function zr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Rr=function(e,t,r){var n=r.x-t.x,a=r.y-t.y,o=n*n+a*a,i=(e.x-t.x)*n+(e.y-t.y)*a,c=Math.min(1,Math.max(0,i/o));return i=(r.x-t.x)*(e.y-t.y)-(r.y-t.y)*(e.x-t.x),new d.a.Point(t.x+n*c,t.y+a*c)};function Tr(e){var t=0;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return Vr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Vr(e,t)}(e)))return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}function Vr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ur=function(e,t,r){for(var n,a=Tr(t);!(n=a()).done;)for(var o,i=n.value,c=Tr(i.segments);!(o=c()).done;)for(var u,s=o.value.point,l=Tr(e.segments);!(u=l()).done;){var f=u.value.point,d=f.getDistance(s);d<r.distance&&(r.distance=d,r.shape=i,r.vector=s.subtract(f))}if(!r.vector)for(var m,p=Tr(t);!(m=p()).done;){for(var h,v=m.value,g=Tr(e.segments);!(h=g()).done;)for(var b,y=h.value.point,w=Tr(v.segments);!(b=w()).done;){var E=b.value,x=E.point,j=E.next.point,O=Rr(y,x,j),C=O.getDistance(y);C<r.distance&&(r.distance=C,r.vector=O.subtract(y),r.shape=v,r.segment=[x,j],r.point=y)}for(var S,k=Tr(v.segments);!(S=k()).done;)for(var M,L=S.value.point,P=Tr(e.segments);!(M=P()).done;){var A=M.value,I=A.point,z=A.next.point,R=Rr(L,I,z),T=R.getDistance(L);T<r.distance&&(r.distance=T,r.vector=L.subtract(R),r.shape=e,r.segment=[I,z])}}return r},Nr=function(e,t,r){if(r.segment){var n,a=r.maxDistance,o=r.segment,i=o[0],c=o[1];0;for(var u=0,s=[Math.atan2(c.y-i.y,c.x-i.x),Math.atan2(i.y-c.y,i.x-c.x)];u<s.length;u++)for(var l,f=s[u],m=Tr(e.segments);!(l=m()).done;){var p=l.value.point;if(p!==r.point){var h=p.add(r.vector),v=new d.a.Point(h.x+r.maxDistance*Math.cos(f),h.y+r.maxDistance*Math.sin(f)),g=new d.a.Path.Line({from:h,to:v,insert:!1});0;for(var b,y=Tr(t);!(b=y()).done;)for(var w,E=b.value,x=Tr(g.getIntersections(E));!(w=x()).done;){var j=w.value.point;0;var O=j.subtract(h).add(r.vector);O.length<r.maxDistance&&O.length<=a&&(a=O.length,n=O)}}}n&&(r.vector=n)}};function Dr(e){var t=0;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return Fr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Fr(e,t)}(e)))return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}function Fr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Br(e){var t=0;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return qr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qr(e,t)}(e)))return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}function qr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Hr=function(e,t){var r=e.pivot?e.pivot.subtract(e.bounds.center):new d.a.Point;e.bounds.x<0&&(e.position.x=e.bounds.width/2+r.x),e.bounds.y<0&&(e.position.y=e.bounds.height/2+r.y),e.bounds.x+e.bounds.width>t.width/window.devicePixelRatio&&(e.position.x=t.width/window.devicePixelRatio-e.bounds.width/2+r.x),e.bounds.y+e.bounds.height>t.height/window.devicePixelRatio&&(e.position.y=t.height/window.devicePixelRatio-e.bounds.height/2+r.y)},Wr=function(e,t){var r=new d.a.Point(d.a.project.view.bounds.width,d.a.project.view.bounds.height).subtract(200);if(e.position=d.a.Point.random().multiply(r).add(100),"rh"===e.data.id){var n=45*Math.round(3*Math.random());e.rotation=n,e.data.rotation=n}else e.rotation=45*Math.round(7*Math.random())},Gr=function(e,t){return t.segments.every((function(t){return e.contains(t.point)}))};function _r(e){var t=0;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return Yr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Yr(e,t)}(e)))return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}function Yr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Jr=function(e,t){for(var r,n=_r(t.children);!(r=n()).done;){var a=r.value;if(a!==e){var o=e.children.collision,i=a.children.collision;o.intersects(i)||Gr(o,i)||Gr(i,o)?(e.data.collisions.add(a.data.id),a.data.collisions.add(e.data.id)):(e.data.collisions.delete(a.data.id),a.data.collisions.delete(e.data.id))}}for(var c,u=!0,s=_r(t.children);!(c=s()).done;){var l=c.value;l.data.collisions.size>0?(u=!1,l.children.display.opacity=.25):l.children.display.opacity=1}return u},Kr=r("expU"),$r=function(e){var t=e.leftComponent,r=e.leftValue,i=e.rightComponent,c=e.rightValue,u=e.value,s=e.onChange,l=e.invertSounds,f=Object(a.useContext)(ft),d=f.playToggle,m=f.soundEnabled,p=Object(a.useContext)(n.ThemeContext),h=Object(a.useMemo)((function(){return u===c?"right":"left"}),[u,c]),v=function(){l?m||d({forceSoundEnabled:!0}):d()},g=function(e){e!==h&&(s("right"===e?c:r),v())};return o.a.createElement(y,{css:{flexDirection:"row",justifyContent:"center",alignItems:"center",gap:3}},o.a.createElement(y,{css:{cursor:"pointer",flex:"1",alignItems:"flex-end"},onClick:function(){return g("left")}},t),o.a.createElement(y,{onClick:function(){s("right"===("left"===h?"right":"left")?c:r),v()},css:{cursor:"pointer",position:"relative",bg:"inputBackground",width:"40px",height:"20px",borderRadius:"99999px"}},o.a.createElement(y,{css:{position:"absolute",size:"20px",borderRadius:"99999px",bg:"galleryText",boxShadow:"0 0 0 2px "+p.colors.inputBackground,transition:"left 250ms ease-in-out"},style:{left:"left"===h?0:20}})),o.a.createElement(y,{css:{cursor:"pointer",flex:"1",alignItems:"flex-start"},onClick:function(){return g("right")}},i))},Xr=function(e){var t=e.deferred,r=Object(a.useContext)(ft),n=r.soundEnabled,i=r.toggleSound,c=kr(),u=c[0],s=c[1],l=Object(a.useContext)(M),f=l.language,d=l.setLanguage,m=L(),p=Object(Kr.useSwitchTheme)(),h=p[0],v=p[1];return o.a.createElement(Et,{title:o.a.createElement(Ct,null,m("Settings")),onClose:t.reject,css:{gap:4,overflow:"auto",flex:"1",minWidth:"268px"}},o.a.createElement(y,{css:{gap:2}},o.a.createElement("label",null,m("Language")),o.a.createElement(xt,{as:"select",onChange:function(e){d(e.target.value)},value:f},k.map((function(e){return o.a.createElement("option",{key:e,value:e},m(e))})))),o.a.createElement(y,{css:{gap:2}},o.a.createElement("label",null,m("Difficulty")),o.a.createElement($r,{value:u,onChange:s,leftComponent:o.a.createElement(jt,{css:{fontSize:3}},m("Easy")),leftValue:!0,rightComponent:o.a.createElement(jt,{css:{fontSize:3}},m("Hard")),rightValue:!1})),o.a.createElement(y,{css:{gap:2}},o.a.createElement("label",null,m("Theme")),o.a.createElement($r,{value:h,onChange:v,leftComponent:o.a.createElement(y,{as:j.k,css:{size:32}}),leftValue:"light",rightComponent:o.a.createElement(y,{as:j.e,css:{size:32}}),rightValue:"dark"})),o.a.createElement(y,{css:{gap:2}},o.a.createElement("label",null,m("Sounds")),o.a.createElement($r,{invertSounds:!0,value:n,onChange:i,leftComponent:o.a.createElement(y,{as:j.n,css:{size:32}}),leftValue:!1,rightComponent:o.a.createElement(y,{as:j.m,css:{size:32}}),rightValue:!0})),o.a.createElement(gt,{onClick:function(){window.confirm(m("You are about to delete all your completion data. Are you sure you want to proceed ?"))&&(window.localStorage.clear(),window.location.reload())}},m("Reset data")))},Qr=Object(a.createContext)({showSettings:function(){}}),Zr=function(e){var t=e.children,r=Object(a.useState)(null),n=r[0],i=r[1],c=Object(a.useCallback)((function(){var e=new Kt;return i(e),e.promise.finally((function(){return i(null)}))}),[]),u=Object(a.useMemo)((function(){return{showSettingsDialog:c}}),[c]);return o.a.createElement(Qr.Provider,{value:u},t,n&&o.a.createElement(Xr,{deferred:n}))};function en(e,t,r,n,a,o,i){try{var c=e[o](i),u=c.value}catch(s){return void r(s)}c.done?t(u):Promise.resolve(u).then(n,a)}var tn=function(){var e,t,r=Object(a.useContext)(Qr).showSettingsDialog,n=Object(a.useContext)(er),i=n.currentUser,u=n.login,s=n.showProfile,l=Object(a.useState)(!1),f=l[0],d=l[1],m=Object(a.useContext)(Or),p=m.requestSave,h=m.playlist,v=m.setPlaylist,g=Object(a.useContext)(Or).setGalleryOpened,b=[{id:"gallery",icon:j.b,onClick:function(){return g((function(e){return!e}))}},{id:"stop",icon:h?j.j:j.g,onClick:h?function(){return v(null)}:p},{id:"settings",icon:j.h,onClick:function(){return r()}},{id:"user",icon:i?j.l:j.c,onClick:(e=c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i?s(i.uid):u();case 1:case"end":return e.stop()}}),e)})),t=function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){en(o,n,a,i,c,"next",e)}function c(e){en(o,n,a,i,c,"throw",e)}i(void 0)}))},function(){return t.apply(this,arguments)})}];return o.a.createElement(y,{css:{position:"fixed",bottom:3,left:"50%",transform:"translateX(-50%)",animation:"1000ms fadeIn 1000ms ease both"}},o.a.createElement(y,{css:{position:"relative"}},b.filter((function(e){return!1!==e.visible})).map((function(e,t,r){var n=e.id,a=e.icon,i=e.onClick,c=e.disabled,u=((r.length%2!=0?180:157.5)+Math.ceil(t/2)*(t%2?45:-45))*Math.PI/180,s=100*Math.cos(u),l=100*Math.sin(u),m=f?{opacity:1,top:s+"px",left:l+"px"}:{opacity:0,top:"0px",left:"0px"};return o.a.createElement(y,{key:n,css:{transition:"all 100ms ease-in-out "+50*t+"ms",position:"absolute"},style:m},o.a.createElement(yt,{onClick:function(e){return function(e,t){t(e),d(!1)}(e,i)},disabled:c},o.a.createElement(y,{as:a,css:{m:"auto"}})))})),o.a.createElement(y,{css:{zIndex:1}},o.a.createElement(yt,{onClick:function(){return d(!f)}},o.a.createElement(y,{as:f?j.o:j.d,css:{m:"auto"}})))))},rn=function(e){var t=e.emoji,r=e.onStop,i=e.onNext,c=e.onApprove,u=e.onClap,s=Object(a.useState)(!1),l=s[0],f=s[1],d=Object(a.useState)(!1),m=d[0],p=d[1],h=Object(a.useState)(!1),v=h[0],g=h[1],b=Object(a.useState)(!1),w=b[0],E=b[1],x=Object(a.useState)(1),O=x[0],C=x[1],S=Object(a.useContext)(ft).playClap,k=Object(n.useKeyframes)({0:{opacity:"0",transform:"rotate(0) scale(0)"},100:{opacity:1,transform:"rotate(1800deg) scale(1)"}}),M=Object(n.useKeyframes)({0:{transform:"rotate(0) scale(1)"},50:{transform:"rotate(5deg) scale(1.1)"},100:{transform:"rotate(0) scale(1)"}});return o.a.createElement(y,{css:{position:"absolute",top:0,left:0,right:0,bottom:0,alignItems:"center",justifyContent:"center",gap:3}},m?v?o.a.createElement(o.a.Fragment,null,w?o.a.createElement(y,{key:"clap"+l,css:{fontSize:"30vmin",animation:l?"250ms "+M+" alternate":void 0},onClick:function(){l<10&&(S({playbackRate:O}),f(l+1),C(O+.01),u())}},"ðŸ‘"):o.a.createElement(y,{key:"clapFadeInEnded",css:{fontSize:"30vmin",animation:"1000ms fadeIn ease both"},onAnimationEnd:function(){E(!0)}},"ðŸ‘"),o.a.createElement(y,{css:{flexDirection:"row",gap:3,animation:"1000ms fadeIn ease both"}},c&&o.a.createElement(yt,{onClick:c},o.a.createElement(y,{as:j.a,css:{m:"auto"}})),i?o.a.createElement(yt,{onClick:i},o.a.createElement(y,{as:j.f,css:{m:"auto"}})):o.a.createElement(yt,{onClick:r},o.a.createElement(y,{as:j.j,css:{m:"auto"}})))):o.a.createElement(y,{key:"emojiFadeOut",onAnimationEnd:function(){g(!0)},css:{fontSize:"30vmin",animation:"1000ms "+k+" cubic-bezier(.6,1.56,.58,.92) forwards reverse"}},t):o.a.createElement(y,{key:"emojiSpin",onAnimationEnd:function(){setTimeout((function(){return p(!0)}),1e3)},css:{fontSize:"30vmin",animation:"2000ms "+k+" cubic-bezier(.6,1.56,.58,.92) forwards"}},t))};function nn(e){var t=0;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return an(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return an(e,t)}(e)))return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}function an(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function on(e,t,r,n,a,o,i){try{var c=e[o](i),u=c.value}catch(s){return void r(s)}c.done?t(u):Promise.resolve(u).then(n,a)}function cn(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){on(o,n,a,i,c,"next",e)}function c(e){on(o,n,a,i,c,"throw",e)}i(void 0)}))}}var un=function(){var e=Object(a.useContext)(ft).playTangram,t=Object(a.useRef)();t.current=e;var r=L(),i=Object(a.useContext)(er),u=i.getCurrentUserRef,s=i.currentUser,f=Object(a.useContext)(n.ThemeContext),p=Object(a.useContext)(Rt),h=kr()[0],v=Object(a.useContext)(Or),g=v.getTangramRef,b=v.markTangramAsComplete,w=v.saveRequestId,E=v.playlist,x=v.setPlaylist,j=Object(a.useRef)();j.current=b;var O=Object(a.useState)(0),C=O[0],S=O[1],k=Object(a.useState)(!1),M=k[0],P=k[1],A=Object(a.useRef)(),I=Object(a.useRef)(),z=Object(a.useRef)(),R=Object(a.useRef)(),T=Object(a.useRef)(),V=Object(a.useRef)(),U=Object(a.useMemo)((function(){return E&&E[C]}),[E,C]),N=Object(a.useCallback)((function(){x(null)}),[x]),D=function(){var e=cn(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.firestore().collection("tangrams").doc(U.id).update({approved:!0});case 2:p(r("Tangram approved"));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){S(0)}),[E]),Object(a.useEffect)((function(){if(w){if(!function(e){for(var t,r=Br(e.children);!(t=r()).done;){if(t.value.data.collisions.size>0)return!1}return!0}(z.current))return void p(r("You can't save an invalid tangram"));var e=function(e,t){for(var r,n,a=Ir(e.children);!(n=a()).done;){var o=n.value.children.display;r=r?r.unite(o,{insert:!1}):o}r.scale(1/t),r.position=new d.a.Point(r.bounds.width/2,r.bounds.height/2);var i=r.exportSVG().getAttribute("d"),c=r.curves.length,u=r.bounds.width,s=r.bounds.height,l=Math.ceil(r.length);return{width:u,height:s,percent:Math.floor((l-765.68542495)/1648.5281373999999*100),length:l,path:i,edges:c}}(z.current,I.current);if(23===e.edges)return void p(r("You can't save such an easy tangram"));(function(){var t=cn(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.current();case 2:return t.next=4,g.current(e);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}}),[p,w,g,u,r]),Object(a.useEffect)((function(){var e=function(){if(A.current&&z.current)for(var e,t=nn(z.current.children);!(e=t()).done;){var r=e.value;Hr(r,A.current)}};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),Object(a.useEffect)((function(){P(!1)}),[U]),Object(a.useLayoutEffect)((function(){var e=Date.now(),r=function(r){var n=null,a=null,o=null,i=null,c=function(e){document.activeElement===A.current&&(document.body.style.cursor="pointer")},u=function(e){document.body.style.cursor="default"},s=function(e){o=Date.now(),i=e.point,n=e.point.subtract(r.position),a=r.clone({insert:!1,deep:!0}),r.bringToFront()},l=function(e){document.body.style.cursor="move";var t=e.point.subtract(r.position).subtract(n);a.position=r.position.add(t);var o,i,c,u,s,l=a.children["display 1"],f=z.current.children.filter((function(e){return e!==r})).map((function(e){return e.children.display})),d=E&&V.current&&T.current?T.current.children?T.current.children:[T.current]:null,m=(u=d,Ur(i=l,c=f,s={maxDistance:o=10,distance:o}),u&&Ur(i,u,s),Nr(i,c.filter((function(e){return e.shape!==s.shape})),s),u&&Nr(i,u,s),s.vector);m&&(a.position.x+=m.x,a.position.y+=m.y),Hr(a,A.current),r.position=a.position,Jr(r,z.current)},f=function(c){if(document.body.style.cursor="pointer",c.point.subtract(i).length<10&&Date.now()-o<300&&(r.rotation+=45,"rh"===r.data.id&&(r.data.rotation+=45,180===r.data.rotation&&(r.data.rotation=0,r.scale(-1,1))),t.current(),Hr(r,A.current),Jr(r,z.current),o=null,i=null),n=null,a&&a.remove(),a=null,null!==E&&(!1===V.current&&(T.current.position=z.current.position),function(e,t,r){for(var n,a=e,o=Dr(t.children);!(n=o()).done;){var i=n.value;if(i.data.collisions.size>0)return;a=a.unite(new d.a.Path({segments:Lr(i.children.display.segments.map((function(e){return e.point})),-r),closed:!0,insert:!1}),{insert:!1})}return Math.round(1e3*a.length)===Math.round(1e3*e.length)}(T.current,z.current,V.current?2:5))){j.current(U,Date.now()-e);for(var u,s=nn(z.current.children);!(u=s()).done;){u.value.data.removeListeners()}document.body.style.cursor="default",d.a.project.activeLayer.tween({opacity:0},{duration:1500,easing:"easeInCubic"});for(var l,f=nn(R.current);!(l=f()).done;){var m=l.value;m.data.animation.stop(),m.tween({"position.x":z.current.position.x,"position.y":z.current.position.y},{duration:1500,easing:"easeInCubic"})}setTimeout((function(){d.a.project.activeLayer.tween({opacity:1},{duration:1e3,easing:"easeOutCubic"});for(var e,t=Math.max(d.a.view.bounds.width,d.a.view.bounds.height)/2,r=nn(R.current);!(e=r()).done;){var n=e.value;n.data.animation.stop();var a=Math.random()*Math.PI*2,o=Math.random()*t;n.tween({"position.x":n.position.x+o*Math.cos(a),"position.y":n.position.y+o*Math.sin(a),opacity:0},{duration:1500,easing:"easeOutCubic"})}P(!0)}),1500)}};r.on({mouseenter:c,mouseleave:u,mousedown:s,mousedrag:l,mouseup:f}),r.data.removeListeners=function(){return r.off({mouseenter:c,mouseleave:u,mousedown:s,mousedrag:l,mouseup:f})}};return function(){var e,t,n,a,o,i,c;d.a.setup(A.current),z.current=(i=Math.sqrt(2*Math.pow(50,2)),c=Math.sqrt(2*Math.pow(i,2)),new d.a.Group([Pr(50,"st1"),Pr(50,"st2"),Pr(i,"mt1"),Pr(c,"lt1"),Pr(c,"lt2"),(e=i,t="sq",n=new d.a.Path.Rectangle({name:"display",point:[0,0],size:[e,e]}),a=new d.a.Path.Rectangle({name:"collision",point:[1,1],size:[e-2,e-2]}),o=new d.a.Path.Rectangle({name:"insetBorder",point:[4,4],size:[e-8,e-8],strokeWidth:4}),new d.a.Group({children:[n,a,o],position:d.a.view.center,data:{id:t,collisions:new Set},applyMatrix:!0,rotation:45*Math.round(7*Math.random())})),Ar(50,"rh")])),U&&(T.current=d.a.project.importSVG('<path d="'+U.path+'" />',{applyMatrix:!0}),T.current.sendToBack(),T.current.fillRule="evenodd",T.current.closed=!0);var u=d.a.project.view.bounds,s=T.current?T.current.bounds:z.current.children[3].bounds.scale(2.5);u.width>u.height?I.current=Math.min(2,Math.min(.6*u.width,700)/s.width,Math.min(.8*u.height,600)/s.height):I.current=Math.min(2,Math.min(.8*u.width,600)/s.width,Math.min(.6*u.height,700)/s.height),T.current&&(T.current.scale(I.current),d.a.project.activeLayer.fitBounds(T.current.bounds,!0),T.current.position=d.a.view.center);for(var l,f=nn(z.current.children);!(l=f()).done;){var m=l.value;m.scale(I.current),Wr(m,A.current),r(m),Hr(m,A.current),Jr(m,z.current)}}(),function(){d.a.project.remove(),R.current=null,z.current=null,T.current=null}}),[U]),Object(a.useLayoutEffect)((function(){V.current=h,T.current&&(h?(T.current.fillColor="black",T.current.position=d.a.view.center):T.current.fillColor="transparent")}),[U,h]),Object(a.useLayoutEffect)((function(){var e=new d.a.Group;e.sendToBack();var t=new d.a.Point(A.current.width,A.current.height).divide(window.devicePixelRatio),r=function(){return 3*Math.random()+2},n=function(){return.4*Math.random()+.1};R.current=new Array(60);for(var a=function(a){var o=new d.a.Path.Circle({center:d.a.Point.random().multiply(t),radius:r(),opacity:n(),parent:e,data:{index:a}});!function e(){var t={radius:r(),opacity:n(),"position.x":Math.min(A.current.width/window.devicePixelRatio,Math.max(0,o.position.x+200*Math.random()-100)),"position.y":Math.min(A.current.height/window.devicePixelRatio,Math.max(0,o.position.y+200*Math.random()-100))};o.data.animation=o.tween(t,{duration:1e4*Math.random()+5e3,easing:"easeInOutQuad"}).then(e)}(),R.current[a]=o},o=0;o<60;o++)a(o)}),[U]),Object(a.useLayoutEffect)((function(){for(var e,t=nn(z.current.children);!(e=t()).done;){var r=e.value;r.children.display.fillColor=f.colors.pieces[r.data.id],r.children.insetBorder.strokeColor=f.colors.pieces[r.data.id]}for(var n,a=Object.values(f.colors.pieces),o=nn(R.current);!(n=o()).done;){n.value.fillColor=a[Math.floor(Math.random()*a.length)]}}),[f.colors,U]),o.a.createElement(y,{css:{flex:"1",position:"relative",color:"galleryText"}},!U&&o.a.createElement(y,{css:{p:3,position:"absolute",top:0,left:0,right:0,zIndex:-1,animation:"1000ms fadeIn 0ms ease both"}},o.a.createElement(y,{as:m,css:{alignSelf:"center",width:"100%",maxWidth:"400px"}})),U&&!1===h&&o.a.createElement(y,{css:{zIndex:-1,position:"absolute",top:3,right:3,cursor:"pointer"}},o.a.createElement(ar,{tangram:U,selected:!0})),o.a.createElement(y,{as:"canvas",ref:A,css:{minHeight:"auto",flex:1,animation:"1000ms fadeIn 500ms ease both"}}),E&&M&&o.a.createElement(rn,{emoji:U.emoji,onStop:N,onNext:C<E.length-1?function(){S(C+1)}:void 0,onApprove:s&&s.isAdmin&&U.uid&&!U.approved?D:void 0,onClap:function(){l.firestore().collection("tangrams").doc(U.id).update({claps:l.firestore.FieldValue.increment(1)})}}),o.a.createElement(tn,null))};t.default=function(){return Object(a.useEffect)((function(){window.oncontextmenu=function(){return!1}}),[]),Object(n.useGlobalCss)({body:{m:0,bg:"background",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto",\n        "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans",\n        "Helvetica Neue", sans-serif',"-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale",transition:"background-color 250ms"},"body, html, #___gatsby, #gatsby-focus-wrapper":{height:"100%"},"#gatsby-focus-wrapper":{display:"flex",flexDirection:"column",padding:"\n        env(safe-area-inset-top, 0)\n        env(safe-area-inset-right, 0)\n        env(safe-area-inset-bottom, 0)\n        env(safe-area-inset-left, 0)\n      "},"*":{boxSizing:"border-box",userSelect:"none","-moz-user-select":"none","-khtml-user-select":"none","-webkit-user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)"}}),o.a.createElement(dt,null,o.a.createElement(P,null,o.a.createElement(Tt,null,o.a.createElement(Dt,null,o.a.createElement(tr,null,o.a.createElement(Mr,null,o.a.createElement(Cr,null,o.a.createElement(Zr,null,o.a.createElement(un,null)))))))))}},Wcq6:function(e,t,r){"use strict";var n,a=(n=r("wj3C"))&&"object"==typeof n&&"default"in n?n.default:n;a.registerVersion("firebase","7.14.0","app"),e.exports=a},bHtr:function(e,t,r){var n=r("XKFU");n(n.P,"Array",{fill:r("Nr18")}),r("nGyu")("fill")},ls82:function(e,t,r){r("rGqo"),r("yt8O"),r("a1Th"),r("VRzm"),r("Btvt"),r("f3/d"),r("rE2o"),r("ioFf");var n=function(e){"use strict";var t,r=Object.prototype,n=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,r,n){var a=t&&t.prototype instanceof h?t:h,o=Object.create(a.prototype),i=new k(n||[]);return o._invoke=function(e,t,r){var n=l;return function(a,o){if(n===d)throw new Error("Generator is already running");if(n===m){if("throw"===a)throw o;return L()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===l)throw n=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=d;var u=s(e,t,r);if("normal"===u.type){if(n=r.done?m:f,u.arg===p)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=m,r.method="throw",r.arg=u.arg)}}}(e,r,i),o}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}e.wrap=u;var l="suspendedStart",f="suspendedYield",d="executing",m="completed",p={};function h(){}function v(){}function g(){}var b={};b[o]=function(){return this};var y=Object.getPrototypeOf,w=y&&y(y(M([])));w&&w!==r&&n.call(w,o)&&(b=w);var E=g.prototype=h.prototype=Object.create(b);function x(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function j(e){var t;this._invoke=function(r,a){function o(){return new Promise((function(t,o){!function t(r,a,o,i){var c=s(e[r],e,a);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==typeof l&&n.call(l,"__await")?Promise.resolve(l.__await).then((function(e){t("next",e,o,i)}),(function(e){t("throw",e,o,i)})):Promise.resolve(l).then((function(e){u.value=e,o(u)}),(function(e){return t("throw",e,o,i)}))}i(c.arg)}(r,a,t,o)}))}return t=t?t.then(o,o):o()}}function O(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,O(e,r),"throw"===r.method))return p;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var a=s(n,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,p;var o=a.arg;return o?o.done?(r[e.resultName]=o.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,p):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function M(e){if(e){var r=e[o];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}return{next:L}}function L(){return{value:t,done:!0}}return v.prototype=E.constructor=g,g.constructor=v,g[c]=v.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c in e||(e[c]="GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},x(j.prototype),j.prototype[i]=function(){return this},e.AsyncIterator=j,e.async=function(t,r,n,a){var o=new j(u(t,r,n,a));return e.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},x(E),E[c]="Generator",E[o]=function(){return this},E.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=M,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return c.type="throw",c.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;S(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:M(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),p}},e}(e.exports);try{regeneratorRuntime=n}catch(a){Function("r","regeneratorRuntime = r")(n)}},mLhc:function(e,t,r){var n=function(e){"use strict";var t,r=Object.prototype,n=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,r,n){var a=t&&t.prototype instanceof h?t:h,o=Object.create(a.prototype),i=new k(n||[]);return o._invoke=function(e,t,r){var n=l;return function(a,o){if(n===d)throw new Error("Generator is already running");if(n===m){if("throw"===a)throw o;return L()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===l)throw n=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=d;var u=s(e,t,r);if("normal"===u.type){if(n=r.done?m:f,u.arg===p)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=m,r.method="throw",r.arg=u.arg)}}}(e,r,i),o}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}e.wrap=u;var l="suspendedStart",f="suspendedYield",d="executing",m="completed",p={};function h(){}function v(){}function g(){}var b={};b[o]=function(){return this};var y=Object.getPrototypeOf,w=y&&y(y(M([])));w&&w!==r&&n.call(w,o)&&(b=w);var E=g.prototype=h.prototype=Object.create(b);function x(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function j(e,t){var r;this._invoke=function(a,o){function i(){return new t((function(r,i){!function r(a,o,i,c){var u=s(e[a],e,o);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}(a,o,r,i)}))}return r=r?r.then(i,i):i()}}function O(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,O(e,r),"throw"===r.method))return p;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var a=s(n,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,p;var o=a.arg;return o?o.done?(r[e.resultName]=o.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,p):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function M(e){if(e){var r=e[o];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}return{next:L}}function L(){return{value:t,done:!0}}return v.prototype=E.constructor=g,g.constructor=v,g[c]=v.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c in e||(e[c]="GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},x(j.prototype),j.prototype[i]=function(){return this},e.AsyncIterator=j,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new j(u(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},x(E),E[c]="Generator",E[o]=function(){return this},E.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=M,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return c.type="throw",c.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;S(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:M(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),p}},e}(e.exports);try{regeneratorRuntime=n}catch(a){Function("r","regeneratorRuntime = r")(n)}},o0o1:function(e,t,r){e.exports=r("mLhc")},o1Si:function(e){e.exports=JSON.parse('{"Language":"Langage","Theme":"ThÃ¨me","Logged in as {username}":"ConnectÃ© en tant que {username}","en":"Anglais","fr":"Francais","Settings":"RÃ©glages","Difficulty":"DifficultÃ©","Easy":"Facile","Hard":"Difficile","Reset data":"RÃ©initialiser les donnÃ©es","You are about to delete all your completion data. Are you sure you want to proceed ?":"Tu es sur le point de supprimer toutes tes donnÃ©es de jeu. Es-tu sÃ»r.e de vouloir continuer ?","Tangram approved":"Tangram approuvÃ©","You can\'t save an invalid tangram":"Tangram invalide","You can\'t save such an easy tangram":"Tangram trop facile","Tangram submitted for review":"Tangram soumis pour vÃ©rification","Logged out":"DÃ©connectÃ©","Tangram gallery":"Galerie des tangrams","Pending approbation":"En attente d\'approbation","{username}\'s tangrams":"Tangrams de {username}","Play now !":"Commencer Ã  jouer !","Start 1 tangram !":"Lancer 1 tangram","Start {count} tangrams !":"Lancer {count} tangrams","Password is too weak":"Mot de passe trop faible","Email address already in use":"Adresse email dÃ©jÃ  prise","Invalid email address":"Adresse email invalide","Email address":"Adresse Email","Email address is required":"Adresse email requise","Username":"Nom d\'utilisateur","Username is required":"Nom d\'utilisateur requis","Password":"Mot de passe","Password is required":"Mot de passe requis","Confirm password":"Confirmer le mot de passe","Passwords must match":"Les mots de passe doivent correspondre","Sign me up !":"Je crÃ©Ã© mon compte !","I already have an account":"J\'ai dÃ©jÃ  un compte","Unknown email address":"Adresse email inconnu","Incorrect password":"Mot de passe incorrect","Sign me in !":"Je me connecte !","I don\'t have an account":"Je n\'ai pas de compte","Create your account":"CrÃ©er un compte","Connect to your account":"Se connecter","Submit your tangram":"Envoyer votre tangram","Edit your tangram":"Ã‰diter votre tangram","Category":"CatÃ©gorie","Victory emoji":"Emoji de succÃ¨s","Leave empty for random emoji":"Laisser vide pour un emoji au hasard","Order":"Ordre","Submit !":"Envoyer !","Edit !":"Ã‰diter !","Or delete tangram":"Ou supprimer le tangram","animals":"Animaux","geometric":"GÃ©omÃ©trique","digits":"Chiffres","letters":"Alphabet","people":"Personnes","stuff":"Trucs","Joined {signupDate}":"Inscrit le {signupDate}","Log out":"Se dÃ©connecter","Change email address":"Modifier l\'adresse email","Change username":"Modifier le nom d\'utilisateur","Change password":"Modifier le mot de passe","Back":"Retour","Confirm new password":"Confirmer le nouveau mot de passe","New password":"Nouveau mot de passe","Current password":"Mot de passe actuel","Password changed sucessfuly":"Mot de passe changÃ© avec succÃ©s","New username":"Nouveau nom d\'utilisateur","Username updated sucessfuly":"Nom d\'utilisateur changÃ© avec succÃ©s","Email address updated sucessfuly":"Adresse email changÃ© avec succÃ©s","New email address":"Nouvelle adresse email","An error occured, please retry later":"Une erreur est survenue, veuillez rÃ©essayer plus tard","Sounds":"Sons","Are you sure you want to delete this tangram ?":"ÃŠtes vous sÃ»r.e de vouloir supprimer ce tangram ?","Tangram deleted sucessfuly":"Tangram supprimÃ© avec succÃ©s","Challenge link copied to clipboard":"Lien de dÃ©fi copiÃ© dans le presse papier","{username} challenged you":"{username} vous met au dÃ©fi","Rise to the challenge":"Relevez le dÃ©fi","Let\'s go !":"C\'est parti !"}')},"pp/T":function(e,t,r){var n=r("XKFU");n(n.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},wCrC:function(e,t,r){e.exports=r.p+"static/pop-a0c7623b355005c8fd4af82974179acf.wav"}}]);
//# sourceMappingURL=component---src-pages-index-js-ec2ea3d40988627302b1.js.map