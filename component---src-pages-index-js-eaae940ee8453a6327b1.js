(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{RXBc:function(e,t,r){"use strict";r.r(t);var n=r("I9K0"),a=r("q1tI"),i=r.n(a),o=(r("XfO3"),r("HEwt"),r("a1Th"),r("rE2o"),r("ioFf"),r("RW0V"),r("Z2Ku"),r("L9s1"),r("rGqo"),r("yt8O"),r("Btvt"),r("hhXQ"),r("91GP"),{color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0}),l=a.createContext&&a.createContext(o),c=function(){return(c=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},s=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&(r[n[a]]=e[n[a]])}return r};function u(e){return function(t){return a.createElement(d,c({attr:c({},e.attr)},t),function e(t){return t&&t.map((function(t,r){return a.createElement(t.tag,c({key:r},t.attr),e(t.child))}))}(e.child))}}function d(e){var t=function(t){var r,n=e.size||t.size||"1em";t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className);var i=e.attr,o=e.title,l=s(e,["attr","title"]);return a.createElement("svg",c({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,l,{className:r,style:c({color:e.color||t.color},t.style,e.style),height:n,width:n,xmlns:"http://www.w3.org/2000/svg"}),o&&a.createElement("title",null,o),e.children)};return void 0!==l?a.createElement(l.Consumer,null,(function(e){return t(e)})):t(o)}var f=function(e){return u({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"7",height:"7"}},{tag:"rect",attr:{x:"14",y:"3",width:"7",height:"7"}},{tag:"rect",attr:{x:"14",y:"14",width:"7",height:"7"}},{tag:"rect",attr:{x:"3",y:"14",width:"7",height:"7"}}]})(e)};f.displayName="FiGrid";var h=function(e){return u({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"}}]})(e)};h.displayName="FiMoon";var m=function(e){return u({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"5 3 19 12 5 21 5 3"}}]})(e)};m.displayName="FiPlay";var p=function(e){return u({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}},{tag:"polyline",attr:{points:"17 21 17 13 7 13 7 21"}},{tag:"polyline",attr:{points:"7 3 7 8 15 8"}}]})(e)};p.displayName="FiSave";var v=function(e){return u({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"16 3 21 3 21 8"}},{tag:"line",attr:{x1:"4",y1:"20",x2:"21",y2:"3"}},{tag:"polyline",attr:{points:"21 16 21 21 16 21"}},{tag:"line",attr:{x1:"15",y1:"15",x2:"21",y2:"21"}},{tag:"line",attr:{x1:"4",y1:"4",x2:"9",y2:"9"}}]})(e)};v.displayName="FiShuffle";var g=function(e){return u({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}}]})(e)};g.displayName="FiSquare";var y=function(e){return u({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"5"}},{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"3"}},{tag:"line",attr:{x1:"12",y1:"21",x2:"12",y2:"23"}},{tag:"line",attr:{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}},{tag:"line",attr:{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}},{tag:"line",attr:{x1:"1",y1:"12",x2:"3",y2:"12"}},{tag:"line",attr:{x1:"21",y1:"12",x2:"23",y2:"12"}},{tag:"line",attr:{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}},{tag:"line",attr:{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"}}]})(e)};y.displayName="FiSun";var b=function(e){return u({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"}},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"}}]})(e)};b.displayName="FiX";var x=r("+pSU"),w=function(e){for(var t,r,n=e.length;0!==n;)r=Math.floor(Math.random()*n),t=e[n-=1],e[n]=e[r],e[r]=t;return e};var E=function(e){var t=e.as,r=void 0===t?"button":t,a=e.css,o=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,["as","css"]),l=Object(n.useKeyframes)({0:{bg:"pieces.lt2"},14:{bg:"pieces.rh"},28:{bg:"pieces.st2"},42:{bg:"pieces.mt1"},57:{bg:"pieces.st1"},71:{bg:"pieces.lt1"},85:{bg:"pieces.sq"},100:{bg:"pieces.lt2"}}),c=Object(n.useCss)(Object.assign({animation:l+" 20s linear infinite both",backgroundSize:"2000% 2000%",boxShadow:"0px 5px 10px #00000080",border:0,borderRadius:"50%",fontSize:5,color:"#FFFFFFCC",size:"button",cursor:"pointer",p:0,"&:disabled":{opacity:.5,cursor:"not-allowed"},"&:focus":{outline:"none"}},a));return i.a.createElement(r,Object.assign({className:c},o))};r("f3/d"),r("T39b");function k(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}function M(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var z=i.a.forwardRef((function(e,t){var r=e.as,o=void 0===r?"div":r,l=e.css,c=e.deps,s=k(e,["as","css","deps"]),u=Object.assign({display:"flex",minWidth:0,minHeight:0,flex:"none",alignSelf:"auto",alignItems:"stretch",flexDirection:"column",justifyContent:"flex-start"},l),d=u.gap,f=k(u,["gap"]),h=Object(a.useContext)(n.ThemeContext),m=Object(a.useMemo)((function(){if(d)return function(e,t,r){var n,a,i;if("string"==typeof e)return{"& > * + *":(n={},n["column"===e||"column-reverse"===e?"mt":"ml"]=t,n)};var o="object"==typeof t?t:{_:t},l=e,c=new Set([].concat(M(Object.keys(l)),M(Object.keys(o)))),s={},u={},d=["_"].concat(M(Object.keys(r.breakpoints))),f=Array.isArray(d),h=0;for(d=f?d:d[Symbol.iterator]();;){var m;if(f){if(h>=d.length)break;m=d[h++]}else{if((h=d.next()).done)break;m=h.value}var p=m;if(!1!==c.has(p)){var v=p,g=null!=l[v]?l[v]:a;a=g;var y=null!=o[v]?o[v]:i;i=y,"column"===g||"column-reverse"===g?(s[v]=y,u[v]=0):(u[v]=y,s[v]=0)}}return{"& > * + *":{mt:s,ml:u}}}(f.flexDirection,d,h)}),[d,f.flexDirection,h]),p=Object(n.useCss)(d?Object.assign({},f,{},m):f,c);return i.a.createElement(o,Object.assign({ref:t},s,{className:p}))}));var j=function(e){var t=e.tangram,r=(t.parent,t.difficulty),o=t.path,l=t.width,c=t.height,s=e.completedEmoji,u=e.selected,d=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,["tangram","completedEmoji","selected"]),f=Object(a.useContext)(n.ThemeContext).colors.difficulties[r];return i.a.createElement(z,Object.assign({css:{borderRadius:5,boxShadow:u?"0px 0px 0px 4px "+f:"0px 0px 0px 1px rgba(0, 0, 0, 0.1)",bg:"background",transition:"background-color 250ms",p:3,textAlign:"center",position:"relative",cursor:"pointer",width:128,height:178},deps:[u]},d),i.a.createElement(z,{as:"svg",css:{flex:"1",justifyContent:"center",width:"100%",fill:f,stroke:void 0,strokeWidth:void 0},viewBox:"0 0 "+l+" "+c,dangerouslySetInnerHTML:{__html:'<path d="'+o+'" />'}}),s&&i.a.createElement(z,{css:{position:"absolute",top:2,left:2,fontSize:"30px"}},s),!1)},O=r("expU"),S=Object(a.createContext)([!0,function(){}]),L=function(){return Object(a.useContext)(S)},C=function(e){var t=e.children,r=Object(a.useState)(!0),n=r[0],o=r[1];Object(a.useEffect)((function(){var e=window.localStorage.getItem("showBackgroundPattern");try{var t=JSON.parse(e);o(!!JSON.parse(t))}catch(r){window.localStorage.removeItem("showBackgroundPattern")}}),[]);var l=Object(a.useCallback)((function(){var e=!n;o(e),window.localStorage.setItem("showBackgroundPattern",JSON.stringify(e))}),[n]),c=Object(a.useMemo)((function(){return[n,l]}),[n,l]);return i.a.createElement(S.Provider,{value:c},t)};function A(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var P=function(){var e=Object(O.useSwitchTheme)(),t=e[0],r=e[1],n=L(),o=n[0],l=n[1],c=Object(a.useContext)(x.TangramsContext),s=c.tangramsByGroup,u=c.completedTangramsEmoji,d=(c.requestSave,c.setPlaylist),p=Object(a.useState)([]),g=p[0],k=p[1],M=Object(a.useState)(!1),S=M[0],C=M[1];return i.a.createElement(i.a.Fragment,null,i.a.createElement(z,{css:{position:"fixed",left:"0",transform:"translate3d("+(S?0:"-100vw")+", 0, 0)",width:"100vw",height:"100%",overflow:"auto",p:3,gap:4,color:"galleryText",bg:"galleryBackground",transition:"background-color 250ms, color 250ms, transform 250ms ease"},deps:[S]},Object.keys(s).map((function(e){return i.a.createElement(z,{key:e,css:{gap:3}},i.a.createElement(z,{css:{fontSize:5,textTransform:"uppercase",alignItems:"center",cursor:"pointer"},onClick:function(){return function(e){g.length&&g.every((function(t){return s[e].includes(t)}))?k([]):k(w(A(s[e])))}(e)}},e),i.a.createElement(z,{css:{display:"grid",gridTemplateColumns:"repeat(auto-fill, 128px)",gridColumnGap:3,gridRowGap:3,justifyContent:"center",justifyItems:"center",alignItems:"center"}},s[e].map((function(e){return i.a.createElement(j,{key:e.id,tangram:e,completedEmoji:u[e.id],selected:g.some((function(t){return t.id===e.id})),onClick:function(){return t=e,void k((function(e){return e.some((function(e){return e.id===t.id}))?g.filter((function(e){return e.id!==t.id})):[].concat(A(g),[t])}));var t}})}))))}))),i.a.createElement(z,{css:{gap:3,position:"fixed",right:3,bottom:3,zIndex:1,animation:"1000ms fadeIn 1000ms ease both"}},!1,S&&i.a.createElement(i.a.Fragment,null,i.a.createElement(E,{onClick:l},i.a.createElement(z,{as:"svg",viewBox:"-30 -30 413.55 413.55",stroke:"currentColor",strokeWidth:30,strokeLinejoin:"round",strokeDasharray:o?60:void 0,fill:o?"transparent":"currentColor",css:{m:"auto",height:"36px"}},i.a.createElement("path",{d:"M353.55339,302.84271l-70.71068,70.71068l-212.13203,0l-70.71068,-70.71068zM184.4269,282.84271v-141.42136l141.42136,-141.42136l0,141.42136z"}))),i.a.createElement(E,{onClick:function(){return r("dark"===t?"light":"dark")}},i.a.createElement(z,{as:"dark"===t?y:h,css:{m:"auto"}})),i.a.createElement(E,{onClick:function(){d(g.length?g:w(Object.values(s).flat())),k([]),C(!1)}},i.a.createElement(z,{as:g.length?m:v,css:{m:"auto"}}))),i.a.createElement(E,{onClick:function(){C(!S),k([])}},i.a.createElement(z,{as:S?b:f,css:{m:"auto"}}))))},V=r("BbdF"),B=r.n(V),H=function(e){var t=Object(a.useContext)(n.ThemeContext).colors.pieces,r=t.st1,o=t.st2,l=t.mt1,c=t.lt1,s=t.lt2,u=t.sq,d=t.rh;return i.a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 368 61"},e),i.a.createElement("path",{fill:r,d:"M109.1 11l-5.3 5.3-5.3-5.3 5.3-5.3 5.3 5.3z"}),i.a.createElement("path",{fill:o,d:"M106.2 35.6L95.6 25v21.2l10.6-10.6z"}),i.a.createElement("path",{fill:l,d:"M84 23.6l10.6 10.6V13L84 23.6z"}),i.a.createElement("path",{fill:c,d:"M94.6 35.6L84 46.2h10.6V35.6z"}),i.a.createElement("path",{fill:s,d:"M78 40.3l5.3 5.3 5.3-5.3H78z"}),i.a.createElement("path",{fill:u,d:"M94.5 11.5H87V19l7.5-7.5z"}),i.a.createElement("path",{fill:d,d:"M97.6 10.6H87l5.3-5.3H103l-5.3 5.3z"}),i.a.createElement("path",{fill:r,d:"M137.5 14.5H130V7h7.5v7.5z"}),i.a.createElement("path",{fill:o,d:"M122.5 39l-10.6 10.6H133L122.5 39z"}),i.a.createElement("path",{fill:l,d:"M129 7h-15l15 15V7z"}),i.a.createElement("path",{fill:c,d:"M121 24v15l7.5-7.5L121 24z"}),i.a.createElement("path",{fill:s,d:"M128.3 33l-5.3 5.3 5.3 5.3V33z"}),i.a.createElement("path",{fill:u,d:"M113 7.5V15h7.5L113 7.5z"}),i.a.createElement("path",{fill:d,d:"M121.2 23l7.5 7.5V23l-7.4-7.6V23z"}),i.a.createElement("path",{fill:r,d:"M71.5 42H64v-7.5h7.5V42z"}),i.a.createElement("path",{fill:o,d:"M61 21.6l10.6 10.6V11L61 21.6z"}),i.a.createElement("path",{fill:l,d:"M50.2 21.6L39.6 11v21.2l10.6-10.6z"}),i.a.createElement("path",{fill:c,d:"M63 18H48l7.5 7.5L63 18z"}),i.a.createElement("path",{fill:s,d:"M40 42.5h7.5V35L40 42.5z"}),i.a.createElement("path",{fill:u,d:"M64.1 26.1v7.5h7.5l-7.5-7.5z"}),i.a.createElement("path",{fill:d,d:"M47.5 33.5L40 41v-7.5l7.5-7.5v7.5z"}),i.a.createElement("path",{fill:r,d:"M356.5 41H349v-7.5h7.5V41z"}),i.a.createElement("path",{fill:o,d:"M346 20.6l10.6 10.6V10L346 20.6z"}),i.a.createElement("path",{fill:l,d:"M335.2 20.6L324.6 10v21.2l10.6-10.6z"}),i.a.createElement("path",{fill:c,d:"M348 17h-15l7.5 7.5L348 17z"}),i.a.createElement("path",{fill:s,d:"M325 41.5h7.5V34l-7.5 7.5z"}),i.a.createElement("path",{fill:u,d:"M349.1 25.1v7.5h7.5l-7.5-7.5z"}),i.a.createElement("path",{fill:d,d:"M332.5 32.5L325 40v-7.5l7.5-7.5v7.5z"}),i.a.createElement("path",{fill:r,d:"M151.5 44H144v-7.5h7.5V44z"}),i.a.createElement("path",{fill:o,d:"M155.6 7L145 17.6h21.2L155.6 7z"}),i.a.createElement("path",{fill:l,d:"M144 19v15l15-15h-15z"}),i.a.createElement("path",{fill:c,d:"M168 36V20l-8 8 8 8z"}),i.a.createElement("path",{fill:s,d:"M167.5 19H160v7.5l7.5-7.5z"}),i.a.createElement("path",{fill:u,d:"M162.3 42.6l5.3-5.3-5.3-5.3v10.6z"}),i.a.createElement("path",{fill:d,d:"M151.5 28l-7.5 7.5h7.5L159 28h-7.5z"}),i.a.createElement("path",{fill:r,d:"M202.3 21.6l-5.3-5.3 5.3-5.3 5.3 5.3-5.3 5.3z"}),i.a.createElement("path",{fill:o,d:"M180 24h15L180 9v15z"}),i.a.createElement("path",{fill:l,d:"M195.5 25h-15l15 15V25z"}),i.a.createElement("path",{fill:c,d:"M185.3 33L174 44.3h11.3V33z"}),i.a.createElement("path",{fill:s,d:"M180 36.6l5.3-5.3L180 26v10.6z"}),i.a.createElement("path",{fill:u,d:"M196.7 28.6l5.3-5.3-5.3-5.3v10.6z"}),i.a.createElement("path",{fill:d,d:"M202.1 35.6V25l-5.3 5.3v10.6l5.3-5.3z"}),i.a.createElement("path",{fill:r,d:"M242.5 36.5H235V29h7.5v7.5z"}),i.a.createElement("path",{fill:o,d:"M214 20.6l10.6 10.6V10L214 20.6z"}),i.a.createElement("path",{fill:l,d:"M214 37h15l-15-15v15z"}),i.a.createElement("path",{fill:c,d:"M239 38h-16l8 8 8-8z"}),i.a.createElement("path",{fill:s,d:"M225.5 10v7.5h7.5l-7.5-7.5z"}),i.a.createElement("path",{fill:u,d:"M233.5 16.5V9H226l7.5 7.5z"}),i.a.createElement("path",{fill:d,d:"M221.5 45.5L214 38h7.5l7.5 7.5h-7.5z"}),i.a.createElement("path",{fill:r,d:"M270.5 34H263v-7.5h7.5V34z"}),i.a.createElement("path",{fill:o,d:"M251 14v15l15-15h-15z"}),i.a.createElement("path",{fill:l,d:"M251 30.6l10.6 10.6V20L251 30.6z"}),i.a.createElement("path",{fill:c,d:"M262 43.3L250.7 32v11.3H262z"}),i.a.createElement("path",{fill:s,d:"M271.3 29.6l5.3-5.3-5.3-5.3v10.6z"}),i.a.createElement("path",{fill:u,d:"M275.5 21.5V14H268l7.5 7.5z"}),i.a.createElement("path",{fill:d,d:"M274.5 42.5L267 35h7.5l7.5 7.5h-7.5z"}),i.a.createElement("path",{fill:r,d:"M7.5 45H0v-7.5h7.5V45z"}),i.a.createElement("path",{fill:o,d:"M11.6 8L1 18.6h21.2L11.6 8z"}),i.a.createElement("path",{fill:l,d:"M0 20v15l15-15H0z"}),i.a.createElement("path",{fill:c,d:"M24 37V21l-8 8 8 8z"}),i.a.createElement("path",{fill:s,d:"M23.5 20H16v7.5l7.5-7.5z"}),i.a.createElement("path",{fill:u,d:"M18.3 43.6l5.3-5.3-5.3-5.3v10.6z"}),i.a.createElement("path",{fill:d,d:"M7.5 29L0 36.5h7.5L15 29H7.5z"}),i.a.createElement("path",{fill:r,d:"M295.5 44H288v-7.5h7.5V44z"}),i.a.createElement("path",{fill:o,d:"M299.6 7L289 17.6h21.2L299.6 7z"}),i.a.createElement("path",{fill:l,d:"M288 19v15l15-15h-15z"}),i.a.createElement("path",{fill:c,d:"M312 36V20l-8 8 8 8z"}),i.a.createElement("path",{fill:s,d:"M311.5 19H304v7.5l7.5-7.5z"}),i.a.createElement("path",{fill:u,d:"M306.3 42.6l5.3-5.3-5.3-5.3v10.6z"}),i.a.createElement("path",{fill:d,d:"M295.5 28l-7.5 7.5h7.5L303 28h-7.5z"}))},I=function(e,t){var r=new window.ClipperLib.ClipperOffset,n=new window.ClipperLib.Paths;if(r.AddPaths([e.map((function(e){return{X:e.x,Y:e.y}}))],window.ClipperLib.JoinType.jtMiter,window.ClipperLib.EndType.etClosedPolygon),r.MiterLimit=0,r.ArcTolerance=0,r.Execute(n,t),n.length)return n[0].map((function(e){var t=e.X,r=e.Y;return new B.a.Point(t,r)}))},R=function(e,t){var r=[new B.a.Point(0,0),new B.a.Point(2*e,0),new B.a.Point(e,e)],n=new B.a.Path({name:"display",segments:r,closed:!0}),a=new B.a.Path({name:"collision",segments:I(r,-1),closed:!0}),i=new B.a.Path({name:"insetBorder",segments:I(r,-2),closed:!0,strokeWidth:4}),o=function(e){var t=e[1].getDistance(e[2]),r=e[0].getDistance(e[2]),n=e[0].getDistance(e[1]),a=t+r+n,i=(e[0].x*t+e[1].x*r+e[2].x*n)/a,o=(e[0].y*t+e[1].y*r+e[2].y*n)/a;return new B.a.Point(i,o)}(r),l=new B.a.Point(B.a.view.center.x+o.x-n.bounds.width/2,B.a.view.center.y+o.y-n.bounds.height/2);return new B.a.Group({children:[n,a,i],position:B.a.view.center,pivot:l,data:{id:t,collisions:new Set},applyMatrix:!0})},T=function(e,t){var r=[new B.a.Point(0,0),new B.a.Point(2*e,0),new B.a.Point(3*e,e),new B.a.Point(e,e)],n=new B.a.Path({name:"display",segments:r,closed:!0}),a=new B.a.Path({name:"collision",segments:I(r,-1),closed:!0,strokeWidth:1}),i=new B.a.Path({name:"insetBorder",segments:I(r,-2),closed:!0,strokeWidth:4});return new B.a.Group({children:[n,a,i],position:B.a.view.center,data:{id:t,collisions:new Set},applyMatrix:!0})},F=["ðŸ’ª","ðŸ‘","ðŸ”¥","ðŸ˜±","ðŸ˜Ž","ðŸŽ‰","ðŸ¥‡","ðŸš€","ðŸ†","ðŸ‘","ðŸ’ƒ","ðŸ•º","ðŸ‘Œ","âœŒ","ðŸ‘","ðŸ˜µ"],N=function(e,t,r){var n=r.x-t.x,a=r.y-t.y,i=n*n+a*a,o=(e.x-t.x)*n+(e.y-t.y)*a,l=Math.min(1,Math.max(0,o/i));return o=(r.x-t.x)*(e.y-t.y)-(r.y-t.y)*(e.x-t.x),new B.a.Point(t.x+n*l,t.y+a*l)},D=function(e,t,r){var n=t,a=Array.isArray(n),i=0;for(n=a?n:n[Symbol.iterator]();;){var o;if(a){if(i>=n.length)break;o=n[i++]}else{if((i=n.next()).done)break;o=i.value}var l=o,c=l.segments,s=Array.isArray(c),u=0;for(c=s?c:c[Symbol.iterator]();;){var d;if(s){if(u>=c.length)break;d=c[u++]}else{if((u=c.next()).done)break;d=u.value}var f=d.point,h=e.segments,m=Array.isArray(h),p=0;for(h=m?h:h[Symbol.iterator]();;){var v;if(m){if(p>=h.length)break;v=h[p++]}else{if((p=h.next()).done)break;v=p.value}var g=v.point,y=g.getDistance(f);y<r.distance&&(r.distance=y,r.shape=l,r.vector=f.subtract(g))}}}if(!r.vector){var b=t,x=Array.isArray(b),w=0;for(b=x?b:b[Symbol.iterator]();;){var E;if(x){if(w>=b.length)break;E=b[w++]}else{if((w=b.next()).done)break;E=w.value}var k=E,M=e.segments,z=Array.isArray(M),j=0;for(M=z?M:M[Symbol.iterator]();;){var O;if(z){if(j>=M.length)break;O=M[j++]}else{if((j=M.next()).done)break;O=j.value}var S=O.point,L=k.segments,C=Array.isArray(L),A=0;for(L=C?L:L[Symbol.iterator]();;){var P;if(C){if(A>=L.length)break;P=L[A++]}else{if((A=L.next()).done)break;P=A.value}var V=P,B=V.point,H=V.next.point,I=N(S,B,H),R=I.getDistance(S);R<r.distance&&(r.distance=R,r.vector=I.subtract(S),r.shape=k,r.segment=[B,H],r.point=S)}}var T=k.segments,F=Array.isArray(T),D=0;for(T=F?T:T[Symbol.iterator]();;){var W;if(F){if(D>=T.length)break;W=T[D++]}else{if((D=T.next()).done)break;W=D.value}var G=W.point,q=e.segments,_=Array.isArray(q),J=0;for(q=_?q:q[Symbol.iterator]();;){var X;if(_){if(J>=q.length)break;X=q[J++]}else{if((J=q.next()).done)break;X=J.value}var K=X,U=K.point,Q=K.next.point,Y=N(G,U,Q),Z=Y.getDistance(G);Z<r.distance&&(r.distance=Z,r.vector=G.subtract(Y),r.shape=e,r.segment=[U,Q])}}}}return r},W=function(e,t,r){if(r.segment){var n,a=r.maxDistance,i=r.segment,o=i[0],l=i[1];0;for(var c=0,s=[Math.atan2(l.y-o.y,l.x-o.x),Math.atan2(o.y-l.y,o.x-l.x)];c<s.length;c++){var u=s[c],d=e.segments,f=Array.isArray(d),h=0;for(d=f?d:d[Symbol.iterator]();;){var m;if(f){if(h>=d.length)break;m=d[h++]}else{if((h=d.next()).done)break;m=h.value}var p=m.point;if(p!==r.point){var v=p.add(r.vector),g=new B.a.Point(v.x+r.maxDistance*Math.cos(u),v.y+r.maxDistance*Math.sin(u)),y=new B.a.Path.Line({from:v,to:g,insert:!1});0;var b=t,x=Array.isArray(b),w=0;for(b=x?b:b[Symbol.iterator]();;){var E;if(x){if(w>=b.length)break;E=b[w++]}else{if((w=b.next()).done)break;E=w.value}var k=E,M=y.getIntersections(k),z=Array.isArray(M),j=0;for(M=z?M:M[Symbol.iterator]();;){var O;if(z){if(j>=M.length)break;O=M[j++]}else{if((j=M.next()).done)break;O=j.value}var S=O.point;0;var L=S.subtract(v).add(r.vector);L.length<r.maxDistance&&L.length<=a&&(a=L.length,n=L)}}}}}n&&(r.vector=n)}},G=function(e,t){var r=e.pivot?e.pivot.subtract(e.bounds.center):new B.a.Point;e.bounds.x<0&&(e.position.x=e.bounds.width/2+r.x),e.bounds.y<0&&(e.position.y=e.bounds.height/2+r.y),e.bounds.x+e.bounds.width>t.width/window.devicePixelRatio&&(e.position.x=t.width/window.devicePixelRatio-e.bounds.width/2+r.x),e.bounds.y+e.bounds.height>t.height/window.devicePixelRatio&&(e.position.y=t.height/window.devicePixelRatio-e.bounds.height/2+r.y)},q=function(e,t){var r=new B.a.Point(B.a.project.view.bounds.width,B.a.project.view.bounds.height).subtract(200);if(e.position=B.a.Point.random().multiply(r).add(100),"rh"===e.data.id){var n=45*Math.round(3*Math.random());e.rotation=n,e.data.rotation=n}else e.rotation=45*Math.round(7*Math.random())},_=function(e,t){return t.segments.every((function(t){return e.contains(t.point)}))},J=function(e,t){var r=t.children,n=Array.isArray(r),a=0;for(r=n?r:r[Symbol.iterator]();;){var i;if(n){if(a>=r.length)break;i=r[a++]}else{if((a=r.next()).done)break;i=a.value}var o=i;if(o!==e){var l=e.children.collision,c=o.children.collision;l.intersects(c)||_(l,c)||_(c,l)?(e.data.collisions.add(o.data.id),o.data.collisions.add(e.data.id)):(e.data.collisions.delete(o.data.id),o.data.collisions.delete(e.data.id))}}var s=t.children,u=Array.isArray(s),d=0;for(s=u?s:s[Symbol.iterator]();;){var f;if(u){if(d>=s.length)break;f=s[d++]}else{if((d=s.next()).done)break;f=d.value}var h=f;h.data.collisions.size>0?h.children.display.opacity=.25:h.children.display.opacity=1}},X=function(e){var t=e.emoji,r=e.onStop,a=e.onNext,o=Object(n.useKeyframes)({0:{opacity:"0",fontSize:"0",transform:"rotate(0)"},33:{opacity:1,fontSize:"30vmin",transform:"rotate(3645deg)"},66:{opacity:1,fontSize:"30vmin",transform:"rotate(3600deg)"},100:{opacity:0,fontSize:"30vmin",transform:"rotate(3600deg)"}});return i.a.createElement(z,{css:{position:"absolute",top:0,left:0,right:0,bottom:0,alignItems:"center",justifyContent:"center",gap:3}},i.a.createElement(z,{css:{animation:"5000ms "+o+" cubic-bezier(0, 0.8, 0.2, 1) forwards"}},t),i.a.createElement(z,{css:{flexDirection:"row",gap:3,animation:"1000ms fadeIn 2500ms ease both"}},i.a.createElement(E,{onClick:r},i.a.createElement(z,{as:g,css:{m:"auto"}})),a&&i.a.createElement(E,{onClick:a},i.a.createElement(z,{as:m,css:{m:"auto"}}))))},K=function(){var e=Object(a.useContext)(n.ThemeContext),t=L()[0],r=Object(a.useContext)(x.TangramsContext),o=r.categories,l=r.setCompletedTangramEmoji,c=r.saveRequestId,s=r.playlist,u=r.setPlaylist,d=Object(a.useState)(0),f=d[0],h=d[1],m=Object(a.useState)(null),p=m[0],v=m[1],g=Object(a.useRef)(),y=Object(a.useRef)(),b=Object(a.useRef)(),w=Object(a.useRef)(),E=Object(a.useRef)(),k=Object(a.useRef)(),M=Object(a.useMemo)((function(){return s&&s[f]}),[s,f]),O=function(){h(f+1)},S=function(){u(null)};return Object(a.useEffect)((function(){h(0)}),[s]),Object(a.useEffect)((function(){}),[c,o]),Object(a.useEffect)((function(){var e=function(){if(g.current&&b.current){var e=b.current.children,t=Array.isArray(e),r=0;for(e=t?e:e[Symbol.iterator]();;){var n;if(t){if(r>=e.length)break;n=e[r++]}else{if((r=e.next()).done)break;n=r.value}G(n,g.current)}}};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),Object(a.useEffect)((function(){v(null)}),[M]),Object(a.useLayoutEffect)((function(){var e=function(e){var t=null,r=null,n=null,a=null,i=function(e){document.body.style.cursor="pointer"},o=function(e){document.body.style.cursor="default"},c=function(i){n=Date.now(),a=i.point,t=i.point.subtract(e.position),r=e.clone({insert:!1,deep:!0}),e.bringToFront()},u=function(n){document.body.style.cursor="move";var a=n.point.subtract(e.position).subtract(t);r.position=e.position.add(a);var i,o,l,c,u,d=r.children["display 1"],f=b.current.children.filter((function(t){return t!==e})).map((function(e){return e.children.display})),h=s&&k.current&&E.current?E.current.children?E.current.children:[E.current]:null,m=(c=h,D(o=d,l=f,u={maxDistance:i=10,distance:i}),c&&D(o,c,u),W(o,l.filter((function(e){return e.shape!==u.shape})),u),c&&W(o,c,u),u.vector);m&&(r.position.x+=m.x,r.position.y+=m.y),G(r,g.current),e.position=r.position,J(e,b.current)},d=function(i){if(document.body.style.cursor="pointer",i.point.subtract(a).length<10&&Date.now()-n<300&&(e.rotation+=45,"rh"===e.data.id&&(e.data.rotation+=45,180===e.data.rotation&&(e.data.rotation=0,e.scale(-1,1))),G(e,g.current),J(e,b.current),n=null,a=null),t=null,r&&r.remove(),r=null,null!==s&&(!1===k.current&&(E.current.position=b.current.position),function(e,t,r){var n=e,a=t.children,i=Array.isArray(a),o=0;for(a=i?a:a[Symbol.iterator]();;){var l;if(i){if(o>=a.length)break;l=a[o++]}else{if((o=a.next()).done)break;l=o.value}var c=l;if(c.data.collisions.size>0)return;n=n.unite(new B.a.Path({segments:I(c.children.display.segments.map((function(e){return e.point})),-r),closed:!0,insert:!1}),{insert:!1})}return console.log(n.length,e.length),Math.round(1e3*n.length)===Math.round(1e3*e.length)}(E.current,b.current,k.current?2:5))){var o=M.emoji?M.emoji:F[Math.floor(Math.random()*F.length)];l(M,o);var c=b.current.children,u=Array.isArray(c),d=0;for(c=u?c:c[Symbol.iterator]();;){var f;if(u){if(d>=c.length)break;f=c[d++]}else{if((d=c.next()).done)break;f=d.value}f.data.removeListeners()}var h=w.current,m=Array.isArray(h),p=0;for(h=m?h:h[Symbol.iterator]();;){var y;if(m){if(p>=h.length)break;y=h[p++]}else{if((p=h.next()).done)break;y=p.value}var x=y;x.data.animation.stop(),x.tween({"position.x":b.current.position.x,"position.y":b.current.position.y,opacity:0,radius:0},{duration:1500,easing:"easeInCubic"})}setTimeout((function(){return v(o)}),1500)}};e.on({mouseenter:i,mouseleave:o,mousedown:c,mousedrag:u,mouseup:d}),e.data.removeListeners=function(){return e.off({mouseenter:i,mouseleave:o,mousedown:c,mousedrag:u,mouseup:d})}};return function(){var t,r,n,a,i,o,l;B.a.setup(g.current),b.current=(o=Math.sqrt(2*Math.pow(50,2)),l=Math.sqrt(2*Math.pow(o,2)),new B.a.Group([R(50,"st1"),R(50,"st2"),R(o,"mt1"),R(l,"lt1"),R(l,"lt2"),(t=o,r="sq",n=new B.a.Path.Rectangle({name:"display",point:[0,0],size:[t,t]}),a=new B.a.Path.Rectangle({name:"collision",point:[1,1],size:[t-2,t-2]}),i=new B.a.Path.Rectangle({name:"insetBorder",point:[2,2],size:[t-4,t-4],strokeWidth:4}),new B.a.Group({children:[n,a,i],position:B.a.view.center,data:{id:r,collisions:new Set},applyMatrix:!0,rotation:45*Math.round(7*Math.random())})),T(50,"rh")])),M&&(E.current=B.a.project.importSVG('<path d="'+M.path+'" />',{applyMatrix:!0}),E.current.sendToBack(),E.current.fillRule="evenodd",E.current.closed=!0);var c=B.a.project.view.bounds,s=E.current?E.current.bounds:b.current.children[3].bounds.scale(2.5);c.width>c.height?y.current=Math.min(2,Math.min(.6*c.width,700)/s.width,Math.min(.8*c.height,600)/s.height):y.current=Math.min(2,Math.min(.8*c.width,600)/s.width,Math.min(.6*c.height,700)/s.height),E.current&&(E.current.scale(y.current),B.a.project.activeLayer.fitBounds(E.current.bounds,!0),E.current.position=B.a.view.center);var u=b.current.children,d=Array.isArray(u),f=0;for(u=d?u:u[Symbol.iterator]();;){var h;if(d){if(f>=u.length)break;h=u[f++]}else{if((f=u.next()).done)break;h=f.value}var m=h;m.scale(y.current),q(m,g.current),e(m),G(m,g.current),J(m,b.current)}}(),function(){B.a.project.remove(),w.current=null,b.current=null,E.current=null}}),[M,l]),Object(a.useLayoutEffect)((function(){k.current=t,E.current&&(t?(E.current.fillColor="black",E.current.position=B.a.view.center):E.current.fillColor="transparent")}),[M,t]),Object(a.useLayoutEffect)((function(){var e=new B.a.Group;e.sendToBack();var t=new B.a.Point(g.current.width,g.current.height).divide(window.devicePixelRatio),r=function(){return 3*Math.random()+2},n=function(){return.4*Math.random()+.1};w.current=new Array(60);for(var a=function(a){var i=new B.a.Path.Circle({center:B.a.Point.random().multiply(t),radius:r(),opacity:n(),parent:e,data:{index:a}});!function e(){var t={radius:r(),opacity:n(),"position.x":Math.min(g.current.width/window.devicePixelRatio,Math.max(0,i.position.x+200*Math.random()-100)),"position.y":Math.min(g.current.height/window.devicePixelRatio,Math.max(0,i.position.y+200*Math.random()-100))};i.data.animation=i.tween(t,{duration:1e4*Math.random()+5e3,easing:"easeInOutQuad"}).then(e)}(),w.current[a]=i},i=0;i<60;i++)a(i)}),[M]),Object(a.useLayoutEffect)((function(){var t=b.current.children,r=Array.isArray(t),n=0;for(t=r?t:t[Symbol.iterator]();;){var a;if(r){if(n>=t.length)break;a=t[n++]}else{if((n=t.next()).done)break;a=n.value}var i=a;i.children.display.fillColor=e.colors.pieces[i.data.id],i.children.insetBorder.strokeColor=e.colors.pieces[i.data.id]}var o=Object.values(e.colors.pieces),l=w.current,c=Array.isArray(l),s=0;for(l=c?l:l[Symbol.iterator]();;){var u;if(c){if(s>=l.length)break;u=l[s++]}else{if((s=l.next()).done)break;u=s.value}u.fillColor=o[Math.floor(Math.random()*o.length)]}}),[e.colors,M]),i.a.createElement(z,{css:{flex:"1",position:"relative"}},!M&&i.a.createElement(z,{css:{p:3,position:"absolute",top:0,left:0,right:0,zIndex:-1,animation:"1000ms fadeIn 0ms ease both"}},i.a.createElement(z,{as:H,css:{alignSelf:"center",width:"100%",maxWidth:"400px"}})),M&&!1===t&&i.a.createElement(z,{css:{zIndex:-1,position:"absolute",top:3,right:3,cursor:"pointer"}},i.a.createElement(j,{tangram:M,selected:!0})),i.a.createElement(z,{as:"canvas",ref:g,css:{flex:1,animation:"1000ms fadeIn 500ms ease both"},resize:"true"}),!1,!1,s&&p&&i.a.createElement(X,{emoji:p,onStop:S,onNext:f<s.length-1?O:void 0}))};t.default=function(){return Object(n.useGlobalCss)({body:{m:0,bg:"background",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto",\n        "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans",\n        "Helvetica Neue", sans-serif',"-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale",transition:"background-color 250ms"},"body, html, #___gatsby, #gatsby-focus-wrapper":{height:"100%"},"#gatsby-focus-wrapper":{display:"flex",flexDirection:"column",padding:"\n        env(safe-area-inset-top, 0)\n        env(safe-area-inset-right, 0)\n        env(safe-area-inset-bottom, 0)\n        env(safe-area-inset-left, 0)\n      "},"*":{boxSizing:"border-box",userSelect:"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)"}}),i.a.createElement(C,null,i.a.createElement(K,null),i.a.createElement(P,null))}}}]);
//# sourceMappingURL=component---src-pages-index-js-eaae940ee8453a6327b1.js.map